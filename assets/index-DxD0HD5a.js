var HG=Object.defineProperty;var ZG=(n,e,t)=>e in n?HG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var In=(n,e,t)=>ZG(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Ka(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function tB(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var O3={exports:{}},ev={},I3={exports:{}},ys={},DI;function XG(){if(DI)return ys;DI=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),B=Symbol.iterator;function S(Ue){return Ue===null||typeof Ue!="object"?null:(Ue=B&&Ue[B]||Ue["@@iterator"],typeof Ue=="function"?Ue:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,U={};function z(Ue,st,wt){this.props=Ue,this.context=st,this.refs=U,this.updater=wt||I}z.prototype.isReactComponent={},z.prototype.setState=function(Ue,st){if(typeof Ue!="object"&&typeof Ue!="function"&&Ue!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ue,st,"setState")},z.prototype.forceUpdate=function(Ue){this.updater.enqueueForceUpdate(this,Ue,"forceUpdate")};function Y(){}Y.prototype=z.prototype;function Q(Ue,st,wt){this.props=Ue,this.context=st,this.refs=U,this.updater=wt||I}var ne=Q.prototype=new Y;ne.constructor=Q,k(ne,z.prototype),ne.isPureReactComponent=!0;var X=Array.isArray,q=Object.prototype.hasOwnProperty,J={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function ie(Ue,st,wt){var mt,ft={},Ut=null,Lt=null;if(st!=null)for(mt in st.ref!==void 0&&(Lt=st.ref),st.key!==void 0&&(Ut=""+st.key),st)q.call(st,mt)&&!N.hasOwnProperty(mt)&&(ft[mt]=st[mt]);var De=arguments.length-2;if(De===1)ft.children=wt;else if(1<De){for(var ke=Array(De),Oe=0;Oe<De;Oe++)ke[Oe]=arguments[Oe+2];ft.children=ke}if(Ue&&Ue.defaultProps)for(mt in De=Ue.defaultProps,De)ft[mt]===void 0&&(ft[mt]=De[mt]);return{$$typeof:n,type:Ue,key:Ut,ref:Lt,props:ft,_owner:J.current}}function he(Ue,st){return{$$typeof:n,type:Ue.type,key:st,ref:Ue.ref,props:Ue.props,_owner:Ue._owner}}function ce(Ue){return typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===n}function we(Ue){var st={"=":"=0",":":"=2"};return"$"+Ue.replace(/[=:]/g,function(wt){return st[wt]})}var pe=/\/+/g;function Ce(Ue,st){return typeof Ue=="object"&&Ue!==null&&Ue.key!=null?we(""+Ue.key):st.toString(36)}function Pe(Ue,st,wt,mt,ft){var Ut=typeof Ue;(Ut==="undefined"||Ut==="boolean")&&(Ue=null);var Lt=!1;if(Ue===null)Lt=!0;else switch(Ut){case"string":case"number":Lt=!0;break;case"object":switch(Ue.$$typeof){case n:case e:Lt=!0}}if(Lt)return Lt=Ue,ft=ft(Lt),Ue=mt===""?"."+Ce(Lt,0):mt,X(ft)?(wt="",Ue!=null&&(wt=Ue.replace(pe,"$&/")+"/"),Pe(ft,st,wt,"",function(Oe){return Oe})):ft!=null&&(ce(ft)&&(ft=he(ft,wt+(!ft.key||Lt&&Lt.key===ft.key?"":(""+ft.key).replace(pe,"$&/")+"/")+Ue)),st.push(ft)),1;if(Lt=0,mt=mt===""?".":mt+":",X(Ue))for(var De=0;De<Ue.length;De++){Ut=Ue[De];var ke=mt+Ce(Ut,De);Lt+=Pe(Ut,st,wt,ke,ft)}else if(ke=S(Ue),typeof ke=="function")for(Ue=ke.call(Ue),De=0;!(Ut=Ue.next()).done;)Ut=Ut.value,ke=mt+Ce(Ut,De++),Lt+=Pe(Ut,st,wt,ke,ft);else if(Ut==="object")throw st=String(Ue),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(Ue).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.");return Lt}function de(Ue,st,wt){if(Ue==null)return Ue;var mt=[],ft=0;return Pe(Ue,mt,"","",function(Ut){return st.call(wt,Ut,ft++)}),mt}function rt(Ue){if(Ue._status===-1){var st=Ue._result;st=st(),st.then(function(wt){(Ue._status===0||Ue._status===-1)&&(Ue._status=1,Ue._result=wt)},function(wt){(Ue._status===0||Ue._status===-1)&&(Ue._status=2,Ue._result=wt)}),Ue._status===-1&&(Ue._status=0,Ue._result=st)}if(Ue._status===1)return Ue._result.default;throw Ue._result}var ze={current:null},Qe={transition:null},ut={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:Qe,ReactCurrentOwner:J};function Te(){throw Error("act(...) is not supported in production builds of React.")}return ys.Children={map:de,forEach:function(Ue,st,wt){de(Ue,function(){st.apply(this,arguments)},wt)},count:function(Ue){var st=0;return de(Ue,function(){st++}),st},toArray:function(Ue){return de(Ue,function(st){return st})||[]},only:function(Ue){if(!ce(Ue))throw Error("React.Children.only expected to receive a single React element child.");return Ue}},ys.Component=z,ys.Fragment=t,ys.Profiler=i,ys.PureComponent=Q,ys.StrictMode=r,ys.Suspense=h,ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ut,ys.act=Te,ys.cloneElement=function(Ue,st,wt){if(Ue==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ue+".");var mt=k({},Ue.props),ft=Ue.key,Ut=Ue.ref,Lt=Ue._owner;if(st!=null){if(st.ref!==void 0&&(Ut=st.ref,Lt=J.current),st.key!==void 0&&(ft=""+st.key),Ue.type&&Ue.type.defaultProps)var De=Ue.type.defaultProps;for(ke in st)q.call(st,ke)&&!N.hasOwnProperty(ke)&&(mt[ke]=st[ke]===void 0&&De!==void 0?De[ke]:st[ke])}var ke=arguments.length-2;if(ke===1)mt.children=wt;else if(1<ke){De=Array(ke);for(var Oe=0;Oe<ke;Oe++)De[Oe]=arguments[Oe+2];mt.children=De}return{$$typeof:n,type:Ue.type,key:ft,ref:Ut,props:mt,_owner:Lt}},ys.createContext=function(Ue){return Ue={$$typeof:a,_currentValue:Ue,_currentValue2:Ue,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ue.Provider={$$typeof:o,_context:Ue},Ue.Consumer=Ue},ys.createElement=ie,ys.createFactory=function(Ue){var st=ie.bind(null,Ue);return st.type=Ue,st},ys.createRef=function(){return{current:null}},ys.forwardRef=function(Ue){return{$$typeof:s,render:Ue}},ys.isValidElement=ce,ys.lazy=function(Ue){return{$$typeof:b,_payload:{_status:-1,_result:Ue},_init:rt}},ys.memo=function(Ue,st){return{$$typeof:g,type:Ue,compare:st===void 0?null:st}},ys.startTransition=function(Ue){var st=Qe.transition;Qe.transition={};try{Ue()}finally{Qe.transition=st}},ys.unstable_act=Te,ys.useCallback=function(Ue,st){return ze.current.useCallback(Ue,st)},ys.useContext=function(Ue){return ze.current.useContext(Ue)},ys.useDebugValue=function(){},ys.useDeferredValue=function(Ue){return ze.current.useDeferredValue(Ue)},ys.useEffect=function(Ue,st){return ze.current.useEffect(Ue,st)},ys.useId=function(){return ze.current.useId()},ys.useImperativeHandle=function(Ue,st,wt){return ze.current.useImperativeHandle(Ue,st,wt)},ys.useInsertionEffect=function(Ue,st){return ze.current.useInsertionEffect(Ue,st)},ys.useLayoutEffect=function(Ue,st){return ze.current.useLayoutEffect(Ue,st)},ys.useMemo=function(Ue,st){return ze.current.useMemo(Ue,st)},ys.useReducer=function(Ue,st,wt){return ze.current.useReducer(Ue,st,wt)},ys.useRef=function(Ue){return ze.current.useRef(Ue)},ys.useState=function(Ue){return ze.current.useState(Ue)},ys.useSyncExternalStore=function(Ue,st,wt){return ze.current.useSyncExternalStore(Ue,st,wt)},ys.useTransition=function(){return ze.current.useTransition()},ys.version="18.3.1",ys}var LI;function Da(){return LI||(LI=1,I3.exports=XG()),I3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI;function JG(){if(FI)return ev;FI=1;var n=Da(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(s,h,g){var b,B={},S=null,I=null;g!==void 0&&(S=""+g),h.key!==void 0&&(S=""+h.key),h.ref!==void 0&&(I=h.ref);for(b in h)r.call(h,b)&&!o.hasOwnProperty(b)&&(B[b]=h[b]);if(s&&s.defaultProps)for(b in h=s.defaultProps,h)B[b]===void 0&&(B[b]=h[b]);return{$$typeof:e,type:s,key:S,ref:I,props:B,_owner:i.current}}return ev.Fragment=t,ev.jsx=a,ev.jsxs=a,ev}var UI;function eW(){return UI||(UI=1,O3.exports=JG()),O3.exports}var ae=eW(),Ai=Da();const Xn=Ka(Ai);var iL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},PE=Xn.createContext&&Xn.createContext(iL),tW=["attr","size","title"];function nW(n,e){if(n==null)return{};var t=rW(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function rW(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Rb(){return Rb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Rb.apply(this,arguments)}function zI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Kb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zI(Object(t),!0).forEach(function(r){iW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iW(n,e,t){return e=oW(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oW(n){var e=sW(n,"string");return typeof e=="symbol"?e:e+""}function sW(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oL(n){return n&&n.map((e,t)=>Xn.createElement(e.tag,Kb({key:t},e.attr),oL(e.child)))}function eu(n){return e=>Xn.createElement(aW,Rb({attr:Kb({},n.attr)},e),oL(n.child))}function aW(n){var e=t=>{var{attr:r,size:i,title:o}=n,a=nW(n,tW),s=i||t.size||"1em",h;return t.className&&(h=t.className),n.className&&(h=(h?h+" ":"")+n.className),Xn.createElement("svg",Rb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:h,style:Kb(Kb({color:n.color||t.color},t.style),n.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Xn.createElement("title",null,o),n.children)};return PE!==void 0?Xn.createElement(PE.Consumer,null,t=>e(t)):e(iL)}var BC={},k3={exports:{}},hd={},T3={exports:{}},P3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jI;function lW(){return jI||(jI=1,function(n){function e(Qe,ut){var Te=Qe.length;Qe.push(ut);e:for(;0<Te;){var Ue=Te-1>>>1,st=Qe[Ue];if(0<i(st,ut))Qe[Ue]=ut,Qe[Te]=st,Te=Ue;else break e}}function t(Qe){return Qe.length===0?null:Qe[0]}function r(Qe){if(Qe.length===0)return null;var ut=Qe[0],Te=Qe.pop();if(Te!==ut){Qe[0]=Te;e:for(var Ue=0,st=Qe.length,wt=st>>>1;Ue<wt;){var mt=2*(Ue+1)-1,ft=Qe[mt],Ut=mt+1,Lt=Qe[Ut];if(0>i(ft,Te))Ut<st&&0>i(Lt,ft)?(Qe[Ue]=Lt,Qe[Ut]=Te,Ue=Ut):(Qe[Ue]=ft,Qe[mt]=Te,Ue=mt);else if(Ut<st&&0>i(Lt,Te))Qe[Ue]=Lt,Qe[Ut]=Te,Ue=Ut;else break e}}return ut}function i(Qe,ut){var Te=Qe.sortIndex-ut.sortIndex;return Te!==0?Te:Qe.id-ut.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();n.unstable_now=function(){return a.now()-s}}var h=[],g=[],b=1,B=null,S=3,I=!1,k=!1,U=!1,z=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(Qe){for(var ut=t(g);ut!==null;){if(ut.callback===null)r(g);else if(ut.startTime<=Qe)r(g),ut.sortIndex=ut.expirationTime,e(h,ut);else break;ut=t(g)}}function X(Qe){if(U=!1,ne(Qe),!k)if(t(h)!==null)k=!0,rt(q);else{var ut=t(g);ut!==null&&ze(X,ut.startTime-Qe)}}function q(Qe,ut){k=!1,U&&(U=!1,Y(ie),ie=-1),I=!0;var Te=S;try{for(ne(ut),B=t(h);B!==null&&(!(B.expirationTime>ut)||Qe&&!we());){var Ue=B.callback;if(typeof Ue=="function"){B.callback=null,S=B.priorityLevel;var st=Ue(B.expirationTime<=ut);ut=n.unstable_now(),typeof st=="function"?B.callback=st:B===t(h)&&r(h),ne(ut)}else r(h);B=t(h)}if(B!==null)var wt=!0;else{var mt=t(g);mt!==null&&ze(X,mt.startTime-ut),wt=!1}return wt}finally{B=null,S=Te,I=!1}}var J=!1,N=null,ie=-1,he=5,ce=-1;function we(){return!(n.unstable_now()-ce<he)}function pe(){if(N!==null){var Qe=n.unstable_now();ce=Qe;var ut=!0;try{ut=N(!0,Qe)}finally{ut?Ce():(J=!1,N=null)}}else J=!1}var Ce;if(typeof Q=="function")Ce=function(){Q(pe)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,de=Pe.port2;Pe.port1.onmessage=pe,Ce=function(){de.postMessage(null)}}else Ce=function(){z(pe,0)};function rt(Qe){N=Qe,J||(J=!0,Ce())}function ze(Qe,ut){ie=z(function(){Qe(n.unstable_now())},ut)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Qe){Qe.callback=null},n.unstable_continueExecution=function(){k||I||(k=!0,rt(q))},n.unstable_forceFrameRate=function(Qe){0>Qe||125<Qe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<Qe?Math.floor(1e3/Qe):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(Qe){switch(S){case 1:case 2:case 3:var ut=3;break;default:ut=S}var Te=S;S=ut;try{return Qe()}finally{S=Te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Qe,ut){switch(Qe){case 1:case 2:case 3:case 4:case 5:break;default:Qe=3}var Te=S;S=Qe;try{return ut()}finally{S=Te}},n.unstable_scheduleCallback=function(Qe,ut,Te){var Ue=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Ue+Te:Ue):Te=Ue,Qe){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=Te+st,Qe={id:b++,callback:ut,priorityLevel:Qe,startTime:Te,expirationTime:st,sortIndex:-1},Te>Ue?(Qe.sortIndex=Te,e(g,Qe),t(h)===null&&Qe===t(g)&&(U?(Y(ie),ie=-1):U=!0,ze(X,Te-Ue))):(Qe.sortIndex=st,e(h,Qe),k||I||(k=!0,rt(q))),Qe},n.unstable_shouldYield=we,n.unstable_wrapCallback=function(Qe){var ut=S;return function(){var Te=S;S=ut;try{return Qe.apply(this,arguments)}finally{S=Te}}}}(P3)),P3}var NI;function uW(){return NI||(NI=1,T3.exports=lW()),T3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GI;function AW(){if(GI)return hd;GI=1;var n=Da(),e=uW();function t(m){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+m,L=1;L<arguments.length;L++)_+="&args[]="+encodeURIComponent(arguments[L]);return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(m,_){a(m,_),a(m+"Capture",_)}function a(m,_){for(i[m]=_,m=0;m<_.length;m++)r.add(_[m])}var s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},B={};function S(m){return h.call(B,m)?!0:h.call(b,m)?!1:g.test(m)?B[m]=!0:(b[m]=!0,!1)}function I(m,_,L,W){if(L!==null&&L.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return W?!1:L!==null?!L.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function k(m,_,L,W){if(_===null||typeof _>"u"||I(m,_,L,W))return!0;if(W)return!1;if(L!==null)switch(L.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function U(m,_,L,W,se,ge,Ze){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=W,this.attributeNamespace=se,this.mustUseProperty=L,this.propertyName=m,this.type=_,this.sanitizeURL=ge,this.removeEmptyString=Ze}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){z[m]=new U(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var _=m[0];z[_]=new U(_,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){z[m]=new U(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){z[m]=new U(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){z[m]=new U(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){z[m]=new U(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){z[m]=new U(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){z[m]=new U(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){z[m]=new U(m,5,!1,m.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function Q(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var _=m.replace(Y,Q);z[_]=new U(_,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var _=m.replace(Y,Q);z[_]=new U(_,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var _=m.replace(Y,Q);z[_]=new U(_,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){z[m]=new U(m,1,!1,m.toLowerCase(),null,!1,!1)}),z.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){z[m]=new U(m,1,!1,m.toLowerCase(),null,!0,!0)});function ne(m,_,L,W){var se=z.hasOwnProperty(_)?z[_]:null;(se!==null?se.type!==0:W||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(k(_,L,se,W)&&(L=null),W||se===null?S(_)&&(L===null?m.removeAttribute(_):m.setAttribute(_,""+L)):se.mustUseProperty?m[se.propertyName]=L===null?se.type===3?!1:"":L:(_=se.attributeName,W=se.attributeNamespace,L===null?m.removeAttribute(_):(se=se.type,L=se===3||se===4&&L===!0?"":""+L,W?m.setAttributeNS(W,_,L):m.setAttribute(_,L))))}var X=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),J=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),we=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),Qe=Symbol.iterator;function ut(m){return m===null||typeof m!="object"?null:(m=Qe&&m[Qe]||m["@@iterator"],typeof m=="function"?m:null)}var Te=Object.assign,Ue;function st(m){if(Ue===void 0)try{throw Error()}catch(L){var _=L.stack.trim().match(/\n( *(at )?)/);Ue=_&&_[1]||""}return`
`+Ue+m}var wt=!1;function mt(m,_){if(!m||wt)return"";wt=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(Cn){var W=Cn}Reflect.construct(m,[],_)}else{try{_.call()}catch(Cn){W=Cn}m.call(_.prototype)}else{try{throw Error()}catch(Cn){W=Cn}m()}}catch(Cn){if(Cn&&W&&typeof Cn.stack=="string"){for(var se=Cn.stack.split(`
`),ge=W.stack.split(`
`),Ze=se.length-1,kt=ge.length-1;1<=Ze&&0<=kt&&se[Ze]!==ge[kt];)kt--;for(;1<=Ze&&0<=kt;Ze--,kt--)if(se[Ze]!==ge[kt]){if(Ze!==1||kt!==1)do if(Ze--,kt--,0>kt||se[Ze]!==ge[kt]){var Wt=`
`+se[Ze].replace(" at new "," at ");return m.displayName&&Wt.includes("<anonymous>")&&(Wt=Wt.replace("<anonymous>",m.displayName)),Wt}while(1<=Ze&&0<=kt);break}}}finally{wt=!1,Error.prepareStackTrace=L}return(m=m?m.displayName||m.name:"")?st(m):""}function ft(m){switch(m.tag){case 5:return st(m.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 2:case 15:return m=mt(m.type,!1),m;case 11:return m=mt(m.type.render,!1),m;case 1:return m=mt(m.type,!0),m;default:return""}}function Ut(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case N:return"Fragment";case J:return"Portal";case he:return"Profiler";case ie:return"StrictMode";case Ce:return"Suspense";case Pe:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case we:return(m.displayName||"Context")+".Consumer";case ce:return(m._context.displayName||"Context")+".Provider";case pe:var _=m.render;return m=m.displayName,m||(m=_.displayName||_.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case de:return _=m.displayName||null,_!==null?_:Ut(m.type)||"Memo";case rt:_=m._payload,m=m._init;try{return Ut(m(_))}catch{}}return null}function Lt(m){var _=m.type;switch(m.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=_.render,m=m.displayName||m.name||"",_.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ut(_);case 8:return _===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function De(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function ke(m){var _=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Oe(m){var _=ke(m)?"checked":"value",L=Object.getOwnPropertyDescriptor(m.constructor.prototype,_),W=""+m[_];if(!m.hasOwnProperty(_)&&typeof L<"u"&&typeof L.get=="function"&&typeof L.set=="function"){var se=L.get,ge=L.set;return Object.defineProperty(m,_,{configurable:!0,get:function(){return se.call(this)},set:function(Ze){W=""+Ze,ge.call(this,Ze)}}),Object.defineProperty(m,_,{enumerable:L.enumerable}),{getValue:function(){return W},setValue:function(Ze){W=""+Ze},stopTracking:function(){m._valueTracker=null,delete m[_]}}}}function Je(m){m._valueTracker||(m._valueTracker=Oe(m))}function Mt(m){if(!m)return!1;var _=m._valueTracker;if(!_)return!0;var L=_.getValue(),W="";return m&&(W=ke(m)?m.checked?"true":"false":m.value),m=W,m!==L?(_.setValue(m),!0):!1}function gt(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Nt(m,_){var L=_.checked;return Te({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:L??m._wrapperState.initialChecked})}function nn(m,_){var L=_.defaultValue==null?"":_.defaultValue,W=_.checked!=null?_.checked:_.defaultChecked;L=De(_.value!=null?_.value:L),m._wrapperState={initialChecked:W,initialValue:L,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function en(m,_){_=_.checked,_!=null&&ne(m,"checked",_,!1)}function Sn(m,_){en(m,_);var L=De(_.value),W=_.type;if(L!=null)W==="number"?(L===0&&m.value===""||m.value!=L)&&(m.value=""+L):m.value!==""+L&&(m.value=""+L);else if(W==="submit"||W==="reset"){m.removeAttribute("value");return}_.hasOwnProperty("value")?Qr(m,_.type,L):_.hasOwnProperty("defaultValue")&&Qr(m,_.type,De(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(m.defaultChecked=!!_.defaultChecked)}function Yn(m,_,L){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var W=_.type;if(!(W!=="submit"&&W!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+m._wrapperState.initialValue,L||_===m.value||(m.value=_),m.defaultValue=_}L=m.name,L!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,L!==""&&(m.name=L)}function Qr(m,_,L){(_!=="number"||gt(m.ownerDocument)!==m)&&(L==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+L&&(m.defaultValue=""+L))}var cr=Array.isArray;function fr(m,_,L,W){if(m=m.options,_){_={};for(var se=0;se<L.length;se++)_["$"+L[se]]=!0;for(L=0;L<m.length;L++)se=_.hasOwnProperty("$"+m[L].value),m[L].selected!==se&&(m[L].selected=se),se&&W&&(m[L].defaultSelected=!0)}else{for(L=""+De(L),_=null,se=0;se<m.length;se++){if(m[se].value===L){m[se].selected=!0,W&&(m[se].defaultSelected=!0);return}_!==null||m[se].disabled||(_=m[se])}_!==null&&(_.selected=!0)}}function br(m,_){if(_.dangerouslySetInnerHTML!=null)throw Error(t(91));return Te({},_,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Cr(m,_){var L=_.value;if(L==null){if(L=_.children,_=_.defaultValue,L!=null){if(_!=null)throw Error(t(92));if(cr(L)){if(1<L.length)throw Error(t(93));L=L[0]}_=L}_==null&&(_=""),L=_}m._wrapperState={initialValue:De(L)}}function Mr(m,_){var L=De(_.value),W=De(_.defaultValue);L!=null&&(L=""+L,L!==m.value&&(m.value=L),_.defaultValue==null&&m.defaultValue!==L&&(m.defaultValue=L)),W!=null&&(m.defaultValue=""+W)}function Qn(m){var _=m.textContent;_===m._wrapperState.initialValue&&_!==""&&_!==null&&(m.value=_)}function Sr(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(m,_){return m==null||m==="http://www.w3.org/1999/xhtml"?Sr(_):m==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ue,me=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,L,W,se){MSApp.execUnsafeLocalFunction(function(){return m(_,L,W,se)})}:m}(function(m,_){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=_;else{for(ue=ue||document.createElement("div"),ue.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=ue.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;_.firstChild;)m.appendChild(_.firstChild)}});function Xe(m,_){if(_){var L=m.firstChild;if(L&&L===m.lastChild&&L.nodeType===3){L.nodeValue=_;return}}m.textContent=_}var Bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yt=["Webkit","ms","Moz","O"];Object.keys(Bt).forEach(function(m){Yt.forEach(function(_){_=_+m.charAt(0).toUpperCase()+m.substring(1),Bt[_]=Bt[m]})});function it(m,_,L){return _==null||typeof _=="boolean"||_===""?"":L||typeof _!="number"||_===0||Bt.hasOwnProperty(m)&&Bt[m]?(""+_).trim():_+"px"}function Kt(m,_){m=m.style;for(var L in _)if(_.hasOwnProperty(L)){var W=L.indexOf("--")===0,se=it(L,_[L],W);L==="float"&&(L="cssFloat"),W?m.setProperty(L,se):m[L]=se}}var Ye=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fe(m,_){if(_){if(Ye[m]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(t(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(t(61))}if(_.style!=null&&typeof _.style!="object")throw Error(t(62))}}function xe(m,_){if(m.indexOf("-")===-1)return typeof _.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p=null;function Ne(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var dt=null,pt=null,Ot=null;function _t(m){if(m=Ri(m)){if(typeof dt!="function")throw Error(t(280));var _=m.stateNode;_&&(_=Ss(_),dt(m.stateNode,m.type,_))}}function rn(m){pt?Ot?Ot.push(m):Ot=[m]:pt=m}function Zt(){if(pt){var m=pt,_=Ot;if(Ot=pt=null,_t(m),_)for(m=0;m<_.length;m++)_t(_[m])}}function Gt(m,_){return m(_)}function bt(){}var Pn=!1;function En(m,_,L){if(Pn)return m(_,L);Pn=!0;try{return Gt(m,_,L)}finally{Pn=!1,(pt!==null||Ot!==null)&&(bt(),Zt())}}function lr(m,_){var L=m.stateNode;if(L===null)return null;var W=Ss(L);if(W===null)return null;L=W[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(W=!W.disabled)||(m=m.type,W=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!W;break e;default:m=!1}if(m)return null;if(L&&typeof L!="function")throw Error(t(231,_,typeof L));return L}var wr=!1;if(s)try{var on={};Object.defineProperty(on,"passive",{get:function(){wr=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{wr=!1}function zn(m,_,L,W,se,ge,Ze,kt,Wt){var Cn=Array.prototype.slice.call(arguments,3);try{_.apply(L,Cn)}catch(or){this.onError(or)}}var Dn=!1,Br=null,xr=!1,Rr=null,rr={onError:function(m){Dn=!0,Br=m}};function co(m,_,L,W,se,ge,Ze,kt,Wt){Dn=!1,Br=null,zn.apply(rr,arguments)}function $a(m,_,L,W,se,ge,Ze,kt,Wt){if(co.apply(this,arguments),Dn){if(Dn){var Cn=Br;Dn=!1,Br=null}else throw Error(t(198));xr||(xr=!0,Rr=Cn)}}function ji(m){var _=m,L=m;if(m.alternate)for(;_.return;)_=_.return;else{m=_;do _=m,_.flags&4098&&(L=_.return),m=_.return;while(m)}return _.tag===3?L:null}function ui(m){if(m.tag===13){var _=m.memoizedState;if(_===null&&(m=m.alternate,m!==null&&(_=m.memoizedState)),_!==null)return _.dehydrated}return null}function Vi(m){if(ji(m)!==m)throw Error(t(188))}function as(m){var _=m.alternate;if(!_){if(_=ji(m),_===null)throw Error(t(188));return _!==m?null:m}for(var L=m,W=_;;){var se=L.return;if(se===null)break;var ge=se.alternate;if(ge===null){if(W=se.return,W!==null){L=W;continue}break}if(se.child===ge.child){for(ge=se.child;ge;){if(ge===L)return Vi(se),m;if(ge===W)return Vi(se),_;ge=ge.sibling}throw Error(t(188))}if(L.return!==W.return)L=se,W=ge;else{for(var Ze=!1,kt=se.child;kt;){if(kt===L){Ze=!0,L=se,W=ge;break}if(kt===W){Ze=!0,W=se,L=ge;break}kt=kt.sibling}if(!Ze){for(kt=ge.child;kt;){if(kt===L){Ze=!0,L=ge,W=se;break}if(kt===W){Ze=!0,W=ge,L=se;break}kt=kt.sibling}if(!Ze)throw Error(t(189))}}if(L.alternate!==W)throw Error(t(190))}if(L.tag!==3)throw Error(t(188));return L.stateNode.current===L?m:_}function Ni(m){return m=as(m),m!==null?ll(m):null}function ll(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var _=ll(m);if(_!==null)return _;m=m.sibling}return null}var ul=e.unstable_scheduleCallback,ts=e.unstable_cancelCallback,Aa=e.unstable_shouldYield,Al=e.unstable_requestPaint,ao=e.unstable_now,Pu=e.unstable_getCurrentPriorityLevel,tu=e.unstable_ImmediatePriority,so=e.unstable_UserBlockingPriority,Kr=e.unstable_NormalPriority,Va=e.unstable_LowPriority,Ts=e.unstable_IdlePriority,ia=null,We=null;function Ct(m){if(We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(ia,m,void 0,(m.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:er,Nn=Math.log,An=Math.LN2;function er(m){return m>>>=0,m===0?32:31-(Nn(m)/An|0)|0}var Ti=64,ho=4194304;function vs(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function js(m,_){var L=m.pendingLanes;if(L===0)return 0;var W=0,se=m.suspendedLanes,ge=m.pingedLanes,Ze=L&268435455;if(Ze!==0){var kt=Ze&~se;kt!==0?W=vs(kt):(ge&=Ze,ge!==0&&(W=vs(ge)))}else Ze=L&~se,Ze!==0?W=vs(Ze):ge!==0&&(W=vs(ge));if(W===0)return 0;if(_!==0&&_!==W&&!(_&se)&&(se=W&-W,ge=_&-_,se>=ge||se===16&&(ge&4194240)!==0))return _;if(W&4&&(W|=L&16),_=m.entangledLanes,_!==0)for(m=m.entanglements,_&=W;0<_;)L=31-pn(_),se=1<<L,W|=m[L],_&=~se;return W}function vA(m,_){switch(m){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(m,_){for(var L=m.suspendedLanes,W=m.pingedLanes,se=m.expirationTimes,ge=m.pendingLanes;0<ge;){var Ze=31-pn(ge),kt=1<<Ze,Wt=se[Ze];Wt===-1?(!(kt&L)||kt&W)&&(se[Ze]=vA(kt,_)):Wt<=_&&(m.expiredLanes|=kt),ge&=~kt}}function wi(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Ha(){var m=Ti;return Ti<<=1,!(Ti&4194240)&&(Ti=64),m}function ci(m){for(var _=[],L=0;31>L;L++)_.push(m);return _}function ca(m,_,L){m.pendingLanes|=_,_!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,_=31-pn(_),m[_]=L}function iA(m,_){var L=m.pendingLanes&~_;m.pendingLanes=_,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=_,m.mutableReadLanes&=_,m.entangledLanes&=_,_=m.entanglements;var W=m.eventTimes;for(m=m.expirationTimes;0<L;){var se=31-pn(L),ge=1<<se;_[se]=0,W[se]=-1,m[se]=-1,L&=~ge}}function ls(m,_){var L=m.entangledLanes|=_;for(m=m.entanglements;L;){var W=31-pn(L),se=1<<W;se&_|m[W]&_&&(m[W]|=_),L&=~se}}var Dr=0;function Ei(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var Za,Ps,Mo,Ns,du,zl=!1,ns=[],Vs=null,fo=null,ms=null,ws=new Map,Xa=new Map,Rs=[],El="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oA(m,_){switch(m){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":ws.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(_.pointerId)}}function Hi(m,_,L,W,se,ge){return m===null||m.nativeEvent!==ge?(m={blockedOn:_,domEventName:L,eventSystemFlags:W,nativeEvent:ge,targetContainers:[se]},_!==null&&(_=Ri(_),_!==null&&Ps(_)),m):(m.eventSystemFlags|=W,_=m.targetContainers,se!==null&&_.indexOf(se)===-1&&_.push(se),m)}function nu(m,_,L,W,se){switch(_){case"focusin":return Vs=Hi(Vs,m,_,L,W,se),!0;case"dragenter":return fo=Hi(fo,m,_,L,W,se),!0;case"mouseover":return ms=Hi(ms,m,_,L,W,se),!0;case"pointerover":var ge=se.pointerId;return ws.set(ge,Hi(ws.get(ge)||null,m,_,L,W,se)),!0;case"gotpointercapture":return ge=se.pointerId,Xa.set(ge,Hi(Xa.get(ge)||null,m,_,L,W,se)),!0}return!1}function Fi(m){var _=Eo(m.target);if(_!==null){var L=ji(_);if(L!==null){if(_=L.tag,_===13){if(_=ui(L),_!==null){m.blockedOn=_,du(m.priority,function(){Mo(L)});return}}else if(_===3&&L.stateNode.current.memoizedState.isDehydrated){m.blockedOn=L.tag===3?L.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Jr(m){if(m.blockedOn!==null)return!1;for(var _=m.targetContainers;0<_.length;){var L=si(m.domEventName,m.eventSystemFlags,_[0],m.nativeEvent);if(L===null){L=m.nativeEvent;var W=new L.constructor(L.type,L);p=W,L.target.dispatchEvent(W),p=null}else return _=Ri(L),_!==null&&Ps(_),m.blockedOn=L,!1;_.shift()}return!0}function ru(m,_,L){Jr(m)&&L.delete(_)}function Gi(){zl=!1,Vs!==null&&Jr(Vs)&&(Vs=null),fo!==null&&Jr(fo)&&(fo=null),ms!==null&&Jr(ms)&&(ms=null),ws.forEach(ru),Xa.forEach(ru)}function lo(m,_){m.blockedOn===_&&(m.blockedOn=null,zl||(zl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gi)))}function Pi(m){function _(se){return lo(se,m)}if(0<ns.length){lo(ns[0],m);for(var L=1;L<ns.length;L++){var W=ns[L];W.blockedOn===m&&(W.blockedOn=null)}}for(Vs!==null&&lo(Vs,m),fo!==null&&lo(fo,m),ms!==null&&lo(ms,m),ws.forEach(_),Xa.forEach(_),L=0;L<Rs.length;L++)W=Rs[L],W.blockedOn===m&&(W.blockedOn=null);for(;0<Rs.length&&(L=Rs[0],L.blockedOn===null);)Fi(L),L.blockedOn===null&&Rs.shift()}var ee=X.ReactCurrentBatchConfig,Se=!0;function tt(m,_,L,W){var se=Dr,ge=ee.transition;ee.transition=null;try{Dr=1,Or(m,_,L,W)}finally{Dr=se,ee.transition=ge}}function $t(m,_,L,W){var se=Dr,ge=ee.transition;ee.transition=null;try{Dr=4,Or(m,_,L,W)}finally{Dr=se,ee.transition=ge}}function Or(m,_,L,W){if(Se){var se=si(m,_,L,W);if(se===null)Jh(m,_,W,Gn,L),oA(m,W);else if(nu(se,m,_,L,W))W.stopPropagation();else if(oA(m,W),_&4&&-1<El.indexOf(m)){for(;se!==null;){var ge=Ri(se);if(ge!==null&&Za(ge),ge=si(m,_,L,W),ge===null&&Jh(m,_,W,Gn,L),ge===se)break;se=ge}se!==null&&W.stopPropagation()}else Jh(m,_,W,null,L)}}var Gn=null;function si(m,_,L,W){if(Gn=null,m=Ne(W),m=Eo(m),m!==null)if(_=ji(m),_===null)m=null;else if(L=_.tag,L===13){if(m=ui(_),m!==null)return m;m=null}else if(L===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;m=null}else _!==m&&(m=null);return Gn=m,null}function hi(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pu()){case tu:return 1;case so:return 4;case Kr:case Va:return 16;case Ts:return 536870912;default:return 16}default:return 16}}var pr=null,Ir=null,vi=null;function So(){if(vi)return vi;var m,_=Ir,L=_.length,W,se="value"in pr?pr.value:pr.textContent,ge=se.length;for(m=0;m<L&&_[m]===se[m];m++);var Ze=L-m;for(W=1;W<=Ze&&_[L-W]===se[ge-W];W++);return vi=se.slice(m,1<W?1-W:void 0)}function ki(m){var _=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&_===13&&(m=13)):m=_,m===10&&(m=13),32<=m||m===13?m:0}function qr(){return!0}function Zi(){return!1}function Xi(m){function _(L,W,se,ge,Ze){this._reactName=L,this._targetInst=se,this.type=W,this.nativeEvent=ge,this.target=Ze,this.currentTarget=null;for(var kt in m)m.hasOwnProperty(kt)&&(L=m[kt],this[kt]=L?L(ge):ge[kt]);return this.isDefaultPrevented=(ge.defaultPrevented!=null?ge.defaultPrevented:ge.returnValue===!1)?qr:Zi,this.isPropagationStopped=Zi,this}return Te(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var L=this.nativeEvent;L&&(L.preventDefault?L.preventDefault():typeof L.returnValue!="unknown"&&(L.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var L=this.nativeEvent;L&&(L.stopPropagation?L.stopPropagation():typeof L.cancelBubble!="unknown"&&(L.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),_}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=Xi(us),La=Te({},us,{view:0,detail:0}),fu=Xi(La),Hs,hc,Sa,cl=Te({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xd,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Sa&&(Sa&&m.type==="mousemove"?(Hs=m.screenX-Sa.screenX,hc=m.screenY-Sa.screenY):hc=Hs=0,Sa=m),Hs)},movementY:function(m){return"movementY"in m?m.movementY:hc}}),lh=Xi(cl),Ru=Te({},cl,{dataTransfer:0}),Ku=Xi(Ru),bd=Te({},La,{relatedTarget:0}),Ms=Xi(bd),Du=Te({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),uh=Xi(Du),gp=Te({},us,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),sA=Xi(gp),qh=Te({},us,{data:0}),Lc=Xi(qh),yp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zs(m){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(m):(m=dc[m])?!!_[m]:!1}function xd(){return Zs}var ef=Te({},La,{key:function(m){if(m.key){var _=yp[m.key]||m.key;if(_!=="Unidentified")return _}return m.type==="keypress"?(m=ki(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Rf[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xd,charCode:function(m){return m.type==="keypress"?ki(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?ki(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Ah=Xi(ef),tf=Te({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ch=Xi(tf),fc=Te({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xd}),wd=Xi(fc),Md=Te({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),hh=Xi(Md),am=Te({},cl,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Fc=Xi(am),pu=[9,13,27,32],Sd=s&&"CompositionEvent"in window,mu=null;s&&"documentMode"in document&&(mu=document.documentMode);var aA=s&&"TextEvent"in window&&!mu,Uc=s&&(!Sd||mu&&8<mu&&11>=mu),Yh=" ",nf=!1;function iu(m,_){switch(m){case"keyup":return pu.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bl(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var WA=!1;function zc(m,_){switch(m){case"compositionend":return Bl(_);case"keypress":return _.which!==32?null:(nf=!0,Yh);case"textInput":return m=_.data,m===Yh&&nf?null:m;default:return null}}function rf(m,_){if(WA)return m==="compositionend"||!Sd&&iu(m,_)?(m=So(),vi=Ir=pr=null,WA=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return Uc&&_.locale!=="ko"?null:_.data;default:return null}}var Kf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dh(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _==="input"?!!Kf[m.type]:_==="textarea"}function _A(m,_,L,W){rn(W),_=vc(_,"onChange"),0<_.length&&(L=new ya("onChange","change",null,L,W),m.push({event:L,listeners:_}))}var Ja=null,Ol=null;function Yo(m){Xh(m,0)}function Ed(m){var _=$r(m);if(Mt(_))return m}function lm(m,_){if(m==="change")return _}var jc=!1;if(s){var Lu;if(s){var $h="oninput"in document;if(!$h){var Vh=document.createElement("div");Vh.setAttribute("oninput","return;"),$h=typeof Vh.oninput=="function"}Lu=$h}else Lu=!1;jc=Lu&&(!document.documentMode||9<document.documentMode)}function pc(){Ja&&(Ja.detachEvent("onpropertychange",Hh),Ol=Ja=null)}function Hh(m){if(m.propertyName==="value"&&Ed(Ol)){var _=[];_A(_,Ol,m,Ne(m)),En(Yo,_)}}function of(m,_,L){m==="focusin"?(pc(),Ja=_,Ol=L,Ja.attachEvent("onpropertychange",Hh)):m==="focusout"&&pc()}function mc(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Ed(Ol)}function gu(m,_){if(m==="click")return Ed(_)}function Vt(m,_){if(m==="input"||m==="change")return Ed(_)}function Tn(m,_){return m===_&&(m!==0||1/m===1/_)||m!==m&&_!==_}var an=typeof Object.is=="function"?Object.is:Tn;function Fr(m,_){if(an(m,_))return!0;if(typeof m!="object"||m===null||typeof _!="object"||_===null)return!1;var L=Object.keys(m),W=Object.keys(_);if(L.length!==W.length)return!1;for(W=0;W<L.length;W++){var se=L[W];if(!h.call(_,se)||!an(m[se],_[se]))return!1}return!0}function _i(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function Co(m,_){var L=_i(m);m=0;for(var W;L;){if(L.nodeType===3){if(W=m+L.textContent.length,m<=_&&W>=_)return{node:L,offset:_-m};m=W}e:{for(;L;){if(L.nextSibling){L=L.nextSibling;break e}L=L.parentNode}L=void 0}L=_i(L)}}function oa(m,_){return m&&_?m===_?!0:m&&m.nodeType===3?!1:_&&_.nodeType===3?oa(m,_.parentNode):"contains"in m?m.contains(_):m.compareDocumentPosition?!!(m.compareDocumentPosition(_)&16):!1:!1}function $o(){for(var m=window,_=gt();_ instanceof m.HTMLIFrameElement;){try{var L=typeof _.contentWindow.location.href=="string"}catch{L=!1}if(L)m=_.contentWindow;else break;_=gt(m.document)}return _}function QA(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _&&(_==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||_==="textarea"||m.contentEditable==="true")}function vp(m){var _=$o(),L=m.focusedElem,W=m.selectionRange;if(_!==L&&L&&L.ownerDocument&&oa(L.ownerDocument.documentElement,L)){if(W!==null&&QA(L)){if(_=W.start,m=W.end,m===void 0&&(m=_),"selectionStart"in L)L.selectionStart=_,L.selectionEnd=Math.min(m,L.value.length);else if(m=(_=L.ownerDocument||document)&&_.defaultView||window,m.getSelection){m=m.getSelection();var se=L.textContent.length,ge=Math.min(W.start,se);W=W.end===void 0?ge:Math.min(W.end,se),!m.extend&&ge>W&&(se=W,W=ge,ge=se),se=Co(L,ge);var Ze=Co(L,W);se&&Ze&&(m.rangeCount!==1||m.anchorNode!==se.node||m.anchorOffset!==se.offset||m.focusNode!==Ze.node||m.focusOffset!==Ze.offset)&&(_=_.createRange(),_.setStart(se.node,se.offset),m.removeAllRanges(),ge>W?(m.addRange(_),m.extend(Ze.node,Ze.offset)):(_.setEnd(Ze.node,Ze.offset),m.addRange(_)))}}for(_=[],m=L;m=m.parentNode;)m.nodeType===1&&_.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<_.length;L++)m=_[L],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Il=s&&"documentMode"in document&&11>=document.documentMode,yu=null,qA=null,kl=null,Wi=!1;function YA(m,_,L){var W=L.window===L?L.document:L.nodeType===9?L:L.ownerDocument;Wi||yu==null||yu!==gt(W)||(W=yu,"selectionStart"in W&&QA(W)?W={start:W.selectionStart,end:W.selectionEnd}:(W=(W.ownerDocument&&W.ownerDocument.defaultView||window).getSelection(),W={anchorNode:W.anchorNode,anchorOffset:W.anchorOffset,focusNode:W.focusNode,focusOffset:W.focusOffset}),kl&&Fr(kl,W)||(kl=W,W=vc(qA,"onSelect"),0<W.length&&(_=new ya("onSelect","select",null,_,L),m.push({event:_,listeners:W}),_.target=yu)))}function Fo(m,_){var L={};return L[m.toLowerCase()]=_.toLowerCase(),L["Webkit"+m]="webkit"+_,L["Moz"+m]="moz"+_,L}var Nc={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionend:Fo("Transition","TransitionEnd")},$A={},CA={};s&&(CA=document.createElement("div").style,"AnimationEvent"in window||(delete Nc.animationend.animation,delete Nc.animationiteration.animation,delete Nc.animationstart.animation),"TransitionEvent"in window||delete Nc.transitionend.transition);function lA(m){if($A[m])return $A[m];if(!Nc[m])return m;var _=Nc[m],L;for(L in _)if(_.hasOwnProperty(L)&&L in CA)return $A[m]=_[L];return m}var Tl=lA("animationend"),gc=lA("animationiteration"),vu=lA("animationstart"),jl=lA("transitionend"),Gc=new Map,Zh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fa(m,_){Gc.set(m,_),o(_,[m])}for(var fh=0;fh<Zh.length;fh++){var yc=Zh[fh],VA=yc.toLowerCase(),sf=yc[0].toUpperCase()+yc.slice(1);Fa(VA,"on"+sf)}Fa(Tl,"onAnimationEnd"),Fa(gc,"onAnimationIteration"),Fa(vu,"onAnimationStart"),Fa("dblclick","onDoubleClick"),Fa("focusin","onFocus"),Fa("focusout","onBlur"),Fa(jl,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HA=new Set("cancel close invalid load scroll toggle".split(" ").concat(bA));function Wc(m,_,L){var W=m.type||"unknown-event";m.currentTarget=L,$a(W,_,void 0,m),m.currentTarget=null}function Xh(m,_){_=(_&4)!==0;for(var L=0;L<m.length;L++){var W=m[L],se=W.event;W=W.listeners;e:{var ge=void 0;if(_)for(var Ze=W.length-1;0<=Ze;Ze--){var kt=W[Ze],Wt=kt.instance,Cn=kt.currentTarget;if(kt=kt.listener,Wt!==ge&&se.isPropagationStopped())break e;Wc(se,kt,Cn),ge=Wt}else for(Ze=0;Ze<W.length;Ze++){if(kt=W[Ze],Wt=kt.instance,Cn=kt.currentTarget,kt=kt.listener,Wt!==ge&&se.isPropagationStopped())break e;Wc(se,kt,Cn),ge=Wt}}}if(xr)throw m=Rr,xr=!1,Rr=null,m}function Vo(m,_){var L=_[$c];L===void 0&&(L=_[$c]=new Set);var W=m+"__bubble";L.has(W)||(qc(_,m,2,!1),L.add(W))}function Qc(m,_,L){var W=0;_&&(W|=4),qc(L,m,W,_)}var ZA="_reactListening"+Math.random().toString(36).slice(2);function Fu(m){if(!m[ZA]){m[ZA]=!0,r.forEach(function(L){L!=="selectionchange"&&(HA.has(L)||Qc(L,!1,m),Qc(L,!0,m))});var _=m.nodeType===9?m:m.ownerDocument;_===null||_[ZA]||(_[ZA]=!0,Qc("selectionchange",!1,_))}}function qc(m,_,L,W){switch(hi(_)){case 1:var se=tt;break;case 4:se=$t;break;default:se=Or}L=se.bind(null,_,L,m),se=void 0,!wr||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(se=!0),W?se!==void 0?m.addEventListener(_,L,{capture:!0,passive:se}):m.addEventListener(_,L,!0):se!==void 0?m.addEventListener(_,L,{passive:se}):m.addEventListener(_,L,!1)}function Jh(m,_,L,W,se){var ge=W;if(!(_&1)&&!(_&2)&&W!==null)e:for(;;){if(W===null)return;var Ze=W.tag;if(Ze===3||Ze===4){var kt=W.stateNode.containerInfo;if(kt===se||kt.nodeType===8&&kt.parentNode===se)break;if(Ze===4)for(Ze=W.return;Ze!==null;){var Wt=Ze.tag;if((Wt===3||Wt===4)&&(Wt=Ze.stateNode.containerInfo,Wt===se||Wt.nodeType===8&&Wt.parentNode===se))return;Ze=Ze.return}for(;kt!==null;){if(Ze=Eo(kt),Ze===null)return;if(Wt=Ze.tag,Wt===5||Wt===6){W=ge=Ze;continue e}kt=kt.parentNode}}W=W.return}En(function(){var Cn=ge,or=Ne(L),Ar=[];e:{var Vn=Gc.get(m);if(Vn!==void 0){var Ur=ya,ii=m;switch(m){case"keypress":if(ki(L)===0)break e;case"keydown":case"keyup":Ur=Ah;break;case"focusin":ii="focus",Ur=Ms;break;case"focusout":ii="blur",Ur=Ms;break;case"beforeblur":case"afterblur":Ur=Ms;break;case"click":if(L.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ur=lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ur=Ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ur=wd;break;case Tl:case gc:case vu:Ur=uh;break;case jl:Ur=hh;break;case"scroll":Ur=fu;break;case"wheel":Ur=Fc;break;case"copy":case"cut":case"paste":Ur=sA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ur=ch}var li=(_&4)!==0,il=!li&&m==="scroll",ln=li?Vn!==null?Vn+"Capture":null:Vn;li=[];for(var Jt=Cn,cn;Jt!==null;){cn=Jt;var mr=cn.stateNode;if(cn.tag===5&&mr!==null&&(cn=mr,ln!==null&&(mr=lr(Jt,ln),mr!=null&&li.push(Yc(Jt,mr,cn)))),il)break;Jt=Jt.return}0<li.length&&(Vn=new Ur(Vn,ii,null,L,or),Ar.push({event:Vn,listeners:li}))}}if(!(_&7)){e:{if(Vn=m==="mouseover"||m==="pointerover",Ur=m==="mouseout"||m==="pointerout",Vn&&L!==p&&(ii=L.relatedTarget||L.fromElement)&&(Eo(ii)||ii[_u]))break e;if((Ur||Vn)&&(Vn=or.window===or?or:(Vn=or.ownerDocument)?Vn.defaultView||Vn.parentWindow:window,Ur?(ii=L.relatedTarget||L.toElement,Ur=Cn,ii=ii?Eo(ii):null,ii!==null&&(il=ji(ii),ii!==il||ii.tag!==5&&ii.tag!==6)&&(ii=null)):(Ur=null,ii=Cn),Ur!==ii)){if(li=lh,mr="onMouseLeave",ln="onMouseEnter",Jt="mouse",(m==="pointerout"||m==="pointerover")&&(li=ch,mr="onPointerLeave",ln="onPointerEnter",Jt="pointer"),il=Ur==null?Vn:$r(Ur),cn=ii==null?Vn:$r(ii),Vn=new li(mr,Jt+"leave",Ur,L,or),Vn.target=il,Vn.relatedTarget=cn,mr=null,Eo(or)===Cn&&(li=new li(ln,Jt+"enter",ii,L,or),li.target=cn,li.relatedTarget=il,mr=li),il=mr,Ur&&ii)t:{for(li=Ur,ln=ii,Jt=0,cn=li;cn;cn=As(cn))Jt++;for(cn=0,mr=ln;mr;mr=As(mr))cn++;for(;0<Jt-cn;)li=As(li),Jt--;for(;0<cn-Jt;)ln=As(ln),cn--;for(;Jt--;){if(li===ln||ln!==null&&li===ln.alternate)break t;li=As(li),ln=As(ln)}li=null}else li=null;Ur!==null&&Uo(Ar,Vn,Ur,li,!1),ii!==null&&il!==null&&Uo(Ar,il,ii,li,!0)}}e:{if(Vn=Cn?$r(Cn):window,Ur=Vn.nodeName&&Vn.nodeName.toLowerCase(),Ur==="select"||Ur==="input"&&Vn.type==="file")var ni=lm;else if(dh(Vn))if(jc)ni=Vt;else{ni=mc;var Ii=of}else(Ur=Vn.nodeName)&&Ur.toLowerCase()==="input"&&(Vn.type==="checkbox"||Vn.type==="radio")&&(ni=gu);if(ni&&(ni=ni(m,Cn))){_A(Ar,ni,L,or);break e}Ii&&Ii(m,Vn,Cn),m==="focusout"&&(Ii=Vn._wrapperState)&&Ii.controlled&&Vn.type==="number"&&Qr(Vn,"number",Vn.value)}switch(Ii=Cn?$r(Cn):window,m){case"focusin":(dh(Ii)||Ii.contentEditable==="true")&&(yu=Ii,qA=Cn,kl=null);break;case"focusout":kl=qA=yu=null;break;case"mousedown":Wi=!0;break;case"contextmenu":case"mouseup":case"dragend":Wi=!1,YA(Ar,L,or);break;case"selectionchange":if(Il)break;case"keydown":case"keyup":YA(Ar,L,or)}var Oi;if(Sd)e:{switch(m){case"compositionstart":var Ui="onCompositionStart";break e;case"compositionend":Ui="onCompositionEnd";break e;case"compositionupdate":Ui="onCompositionUpdate";break e}Ui=void 0}else WA?iu(m,L)&&(Ui="onCompositionEnd"):m==="keydown"&&L.keyCode===229&&(Ui="onCompositionStart");Ui&&(Uc&&L.locale!=="ko"&&(WA||Ui!=="onCompositionStart"?Ui==="onCompositionEnd"&&WA&&(Oi=So()):(pr=or,Ir="value"in pr?pr.value:pr.textContent,WA=!0)),Ii=vc(Cn,Ui),0<Ii.length&&(Ui=new Lc(Ui,m,null,L,or),Ar.push({event:Ui,listeners:Ii}),Oi?Ui.data=Oi:(Oi=Bl(L),Oi!==null&&(Ui.data=Oi)))),(Oi=aA?zc(m,L):rf(m,L))&&(Cn=vc(Cn,"onBeforeInput"),0<Cn.length&&(or=new Lc("onBeforeInput","beforeinput",null,L,or),Ar.push({event:or,listeners:Cn}),or.data=Oi))}Xh(Ar,_)})}function Yc(m,_,L){return{instance:m,listener:_,currentTarget:L}}function vc(m,_){for(var L=_+"Capture",W=[];m!==null;){var se=m,ge=se.stateNode;se.tag===5&&ge!==null&&(se=ge,ge=lr(m,L),ge!=null&&W.unshift(Yc(m,ge,se)),ge=lr(m,_),ge!=null&&W.push(Yc(m,ge,se))),m=m.return}return W}function As(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function Uo(m,_,L,W,se){for(var ge=_._reactName,Ze=[];L!==null&&L!==W;){var kt=L,Wt=kt.alternate,Cn=kt.stateNode;if(Wt!==null&&Wt===W)break;kt.tag===5&&Cn!==null&&(kt=Cn,se?(Wt=lr(L,ge),Wt!=null&&Ze.unshift(Yc(L,Wt,kt))):se||(Wt=lr(L,ge),Wt!=null&&Ze.push(Yc(L,Wt,kt)))),L=L.return}Ze.length!==0&&m.push({event:_,listeners:Ze})}var cs=/\r\n?/g,Df=/\u0000|\uFFFD/g;function ph(m){return(typeof m=="string"?m:""+m).replace(cs,`
`).replace(Df,"")}function mh(m,_,L){if(_=ph(_),ph(m)!==_&&L)throw Error(t(425))}function Uu(){}var XA=null,Nl=null;function xA(m,_){return m==="textarea"||m==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var hl=typeof setTimeout=="function"?setTimeout:void 0,JA=typeof clearTimeout=="function"?clearTimeout:void 0,zu=typeof Promise=="function"?Promise:void 0,gh=typeof queueMicrotask=="function"?queueMicrotask:typeof zu<"u"?function(m){return zu.resolve(null).then(m).catch(ju)}:hl;function ju(m){setTimeout(function(){throw m})}function ed(m,_){var L=_,W=0;do{var se=L.nextSibling;if(m.removeChild(L),se&&se.nodeType===8)if(L=se.data,L==="/$"){if(W===0){m.removeChild(se),Pi(_);return}W--}else L!=="$"&&L!=="$?"&&L!=="$!"||W++;L=se}while(L);Pi(_)}function ec(m){for(;m!=null;m=m.nextSibling){var _=m.nodeType;if(_===1||_===3)break;if(_===8){if(_=m.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return m}function Nu(m){m=m.previousSibling;for(var _=0;m;){if(m.nodeType===8){var L=m.data;if(L==="$"||L==="$!"||L==="$?"){if(_===0)return m;_--}else L==="/$"&&_++}m=m.previousSibling}return null}var Gu=Math.random().toString(36).slice(2),wA="__reactFiber$"+Gu,_c="__reactProps$"+Gu,_u="__reactContainer$"+Gu,$c="__reactEvents$"+Gu,et="__reactListeners$"+Gu,Ua="__reactHandles$"+Gu;function Eo(m){var _=m[wA];if(_)return _;for(var L=m.parentNode;L;){if(_=L[_u]||L[wA]){if(L=_.alternate,_.child!==null||L!==null&&L.child!==null)for(m=Nu(m);m!==null;){if(L=m[wA])return L;m=Nu(m)}return _}m=L,L=m.parentNode}return null}function Ri(m){return m=m[wA]||m[_u],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function $r(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function Ss(m){return m[_c]||null}var yh=[],td=-1;function Ea(m){return{current:m}}function Gs(m){0>td||(m.current=yh[td],yh[td]=null,td--)}function _s(m,_){td++,yh[td]=m.current,m.current=_}var uA={},Es=Ea(uA),dr=Ea(!1),va=uA;function Vc(m,_){var L=m.type.contextTypes;if(!L)return uA;var W=m.stateNode;if(W&&W.__reactInternalMemoizedUnmaskedChildContext===_)return W.__reactInternalMemoizedMaskedChildContext;var se={},ge;for(ge in L)se[ge]=_[ge];return W&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=_,m.__reactInternalMemoizedMaskedChildContext=se),se}function Ba(m){return m=m.childContextTypes,m!=null}function tc(){Gs(dr),Gs(Es)}function vh(m,_,L){if(Es.current!==uA)throw Error(t(168));_s(Es,_),_s(dr,L)}function _h(m,_,L){var W=m.stateNode;if(_=_.childContextTypes,typeof W.getChildContext!="function")return L;W=W.getChildContext();for(var se in W)if(!(se in _))throw Error(t(108,Lt(m)||"Unknown",se));return Te({},L,W)}function Mi(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||uA,va=Es.current,_s(Es,m),_s(dr,dr.current),!0}function Ch(m,_,L){var W=m.stateNode;if(!W)throw Error(t(169));L?(m=_h(m,_,va),W.__reactInternalMemoizedMergedChildContext=m,Gs(dr),Gs(Es),_s(Es,m)):Gs(dr),_s(dr,L)}var Gl=null,bh=!1,xh=!1;function MA(m){Gl===null?Gl=[m]:Gl.push(m)}function nc(m){bh=!0,MA(m)}function AA(){if(!xh&&Gl!==null){xh=!0;var m=0,_=Dr;try{var L=Gl;for(Dr=1;m<L.length;m++){var W=L[m];do W=W(!0);while(W!==null)}Gl=null,bh=!1}catch(se){throw Gl!==null&&(Gl=Gl.slice(m+1)),ul(tu,AA),se}finally{Dr=_,xh=!1}}return null}var Cc=[],Bs=0,bo=null,Cu=0,za=[],Ks=0,Ho=null,ou=1,Wu="";function bc(m,_){Cc[Bs++]=Cu,Cc[Bs++]=bo,bo=m,Cu=_}function nd(m,_,L){za[Ks++]=ou,za[Ks++]=Wu,za[Ks++]=Ho,Ho=m;var W=ou;m=Wu;var se=32-pn(W)-1;W&=~(1<<se),L+=1;var ge=32-pn(_)+se;if(30<ge){var Ze=se-se%5;ge=(W&(1<<Ze)-1).toString(32),W>>=Ze,se-=Ze,ou=1<<32-pn(_)+se|L<<se|W,Wu=ge+m}else ou=1<<ge|L<<se|W,Wu=m}function SA(m){m.return!==null&&(bc(m,1),nd(m,1,0))}function xc(m){for(;m===bo;)bo=Cc[--Bs],Cc[Bs]=null,Cu=Cc[--Bs],Cc[Bs]=null;for(;m===Ho;)Ho=za[--Ks],za[Ks]=null,Wu=za[--Ks],za[Ks]=null,ou=za[--Ks],za[Ks]=null}var gs=null,ha=null,hr=!1,Hr=null;function Qu(m,_){var L=Zu(5,null,null,0);L.elementType="DELETED",L.stateNode=_,L.return=m,_=m.deletions,_===null?(m.deletions=[L],m.flags|=16):_.push(L)}function rc(m,_){switch(m.tag){case 5:var L=m.type;return _=_.nodeType!==1||L.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(m.stateNode=_,gs=m,ha=ec(_.firstChild),!0):!1;case 6:return _=m.pendingProps===""||_.nodeType!==3?null:_,_!==null?(m.stateNode=_,gs=m,ha=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(L=Ho!==null?{id:ou,overflow:Wu}:null,m.memoizedState={dehydrated:_,treeContext:L,retryLane:1073741824},L=Zu(18,null,null,0),L.stateNode=_,L.return=m,m.child=L,gs=m,ha=null,!0):!1;default:return!1}}function bu(m){return(m.mode&1)!==0&&(m.flags&128)===0}function Cs(m){if(hr){var _=ha;if(_){var L=_;if(!rc(m,_)){if(bu(m))throw Error(t(418));_=ec(L.nextSibling);var W=gs;_&&rc(m,_)?Qu(W,L):(m.flags=m.flags&-4097|2,hr=!1,gs=m)}}else{if(bu(m))throw Error(t(418));m.flags=m.flags&-4097|2,hr=!1,gs=m}}}function Lf(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;gs=m}function su(m){if(m!==gs)return!1;if(!hr)return Lf(m),hr=!0,!1;var _;if((_=m.tag!==3)&&!(_=m.tag!==5)&&(_=m.type,_=_!=="head"&&_!=="body"&&!xA(m.type,m.memoizedProps)),_&&(_=ha)){if(bu(m))throw Ff(),Error(t(418));for(;_;)Qu(m,_),_=ec(_.nextSibling)}if(Lf(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,_=0;m;){if(m.nodeType===8){var L=m.data;if(L==="/$"){if(_===0){ha=ec(m.nextSibling);break e}_--}else L!=="$"&&L!=="$!"&&L!=="$?"||_++}m=m.nextSibling}ha=null}}else ha=gs?ec(m.stateNode.nextSibling):null;return!0}function Ff(){for(var m=ha;m;)m=ec(m.nextSibling)}function xu(){ha=gs=null,hr=!1}function To(m){Hr===null?Hr=[m]:Hr.push(m)}var Os=X.ReactCurrentBatchConfig;function rd(m,_,L){if(m=L.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(L._owner){if(L=L._owner,L){if(L.tag!==1)throw Error(t(309));var W=L.stateNode}if(!W)throw Error(t(147,m));var se=W,ge=""+m;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===ge?_.ref:(_=function(Ze){var kt=se.refs;Ze===null?delete kt[ge]:kt[ge]=Ze},_._stringRef=ge,_)}if(typeof m!="string")throw Error(t(284));if(!L._owner)throw Error(t(290,m))}return m}function EA(m,_){throw m=Object.prototype.toString.call(_),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":m))}function id(m){var _=m._init;return _(m._payload)}function BA(m){function _(ln,Jt){if(m){var cn=ln.deletions;cn===null?(ln.deletions=[Jt],ln.flags|=16):cn.push(Jt)}}function L(ln,Jt){if(!m)return null;for(;Jt!==null;)_(ln,Jt),Jt=Jt.sibling;return null}function W(ln,Jt){for(ln=new Map;Jt!==null;)Jt.key!==null?ln.set(Jt.key,Jt):ln.set(Jt.index,Jt),Jt=Jt.sibling;return ln}function se(ln,Jt){return ln=Kh(ln,Jt),ln.index=0,ln.sibling=null,ln}function ge(ln,Jt,cn){return ln.index=cn,m?(cn=ln.alternate,cn!==null?(cn=cn.index,cn<Jt?(ln.flags|=2,Jt):cn):(ln.flags|=2,Jt)):(ln.flags|=1048576,Jt)}function Ze(ln){return m&&ln.alternate===null&&(ln.flags|=2),ln}function kt(ln,Jt,cn,mr){return Jt===null||Jt.tag!==6?(Jt=Q0(cn,ln.mode,mr),Jt.return=ln,Jt):(Jt=se(Jt,cn),Jt.return=ln,Jt)}function Wt(ln,Jt,cn,mr){var ni=cn.type;return ni===N?or(ln,Jt,cn.props.children,mr,cn.key):Jt!==null&&(Jt.elementType===ni||typeof ni=="object"&&ni!==null&&ni.$$typeof===rt&&id(ni)===Jt.type)?(mr=se(Jt,cn.props),mr.ref=rd(ln,Jt,cn),mr.return=ln,mr):(mr=r0(cn.type,cn.key,cn.props,null,ln.mode,mr),mr.ref=rd(ln,Jt,cn),mr.return=ln,mr)}function Cn(ln,Jt,cn,mr){return Jt===null||Jt.tag!==4||Jt.stateNode.containerInfo!==cn.containerInfo||Jt.stateNode.implementation!==cn.implementation?(Jt=i0(cn,ln.mode,mr),Jt.return=ln,Jt):(Jt=se(Jt,cn.children||[]),Jt.return=ln,Jt)}function or(ln,Jt,cn,mr,ni){return Jt===null||Jt.tag!==7?(Jt=gf(cn,ln.mode,mr,ni),Jt.return=ln,Jt):(Jt=se(Jt,cn),Jt.return=ln,Jt)}function Ar(ln,Jt,cn){if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number")return Jt=Q0(""+Jt,ln.mode,cn),Jt.return=ln,Jt;if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case q:return cn=r0(Jt.type,Jt.key,Jt.props,null,ln.mode,cn),cn.ref=rd(ln,null,Jt),cn.return=ln,cn;case J:return Jt=i0(Jt,ln.mode,cn),Jt.return=ln,Jt;case rt:var mr=Jt._init;return Ar(ln,mr(Jt._payload),cn)}if(cr(Jt)||ut(Jt))return Jt=gf(Jt,ln.mode,cn,null),Jt.return=ln,Jt;EA(ln,Jt)}return null}function Vn(ln,Jt,cn,mr){var ni=Jt!==null?Jt.key:null;if(typeof cn=="string"&&cn!==""||typeof cn=="number")return ni!==null?null:kt(ln,Jt,""+cn,mr);if(typeof cn=="object"&&cn!==null){switch(cn.$$typeof){case q:return cn.key===ni?Wt(ln,Jt,cn,mr):null;case J:return cn.key===ni?Cn(ln,Jt,cn,mr):null;case rt:return ni=cn._init,Vn(ln,Jt,ni(cn._payload),mr)}if(cr(cn)||ut(cn))return ni!==null?null:or(ln,Jt,cn,mr,null);EA(ln,cn)}return null}function Ur(ln,Jt,cn,mr,ni){if(typeof mr=="string"&&mr!==""||typeof mr=="number")return ln=ln.get(cn)||null,kt(Jt,ln,""+mr,ni);if(typeof mr=="object"&&mr!==null){switch(mr.$$typeof){case q:return ln=ln.get(mr.key===null?cn:mr.key)||null,Wt(Jt,ln,mr,ni);case J:return ln=ln.get(mr.key===null?cn:mr.key)||null,Cn(Jt,ln,mr,ni);case rt:var Ii=mr._init;return Ur(ln,Jt,cn,Ii(mr._payload),ni)}if(cr(mr)||ut(mr))return ln=ln.get(cn)||null,or(Jt,ln,mr,ni,null);EA(Jt,mr)}return null}function ii(ln,Jt,cn,mr){for(var ni=null,Ii=null,Oi=Jt,Ui=Jt=0,Ds=null;Oi!==null&&Ui<cn.length;Ui++){Oi.index>Ui?(Ds=Oi,Oi=null):Ds=Oi.sibling;var Xo=Vn(ln,Oi,cn[Ui],mr);if(Xo===null){Oi===null&&(Oi=Ds);break}m&&Oi&&Xo.alternate===null&&_(ln,Oi),Jt=ge(Xo,Jt,Ui),Ii===null?ni=Xo:Ii.sibling=Xo,Ii=Xo,Oi=Ds}if(Ui===cn.length)return L(ln,Oi),hr&&bc(ln,Ui),ni;if(Oi===null){for(;Ui<cn.length;Ui++)Oi=Ar(ln,cn[Ui],mr),Oi!==null&&(Jt=ge(Oi,Jt,Ui),Ii===null?ni=Oi:Ii.sibling=Oi,Ii=Oi);return hr&&bc(ln,Ui),ni}for(Oi=W(ln,Oi);Ui<cn.length;Ui++)Ds=Ur(Oi,ln,Ui,cn[Ui],mr),Ds!==null&&(m&&Ds.alternate!==null&&Oi.delete(Ds.key===null?Ui:Ds.key),Jt=ge(Ds,Jt,Ui),Ii===null?ni=Ds:Ii.sibling=Ds,Ii=Ds);return m&&Oi.forEach(function(Ud){return _(ln,Ud)}),hr&&bc(ln,Ui),ni}function li(ln,Jt,cn,mr){var ni=ut(cn);if(typeof ni!="function")throw Error(t(150));if(cn=ni.call(cn),cn==null)throw Error(t(151));for(var Ii=ni=null,Oi=Jt,Ui=Jt=0,Ds=null,Xo=cn.next();Oi!==null&&!Xo.done;Ui++,Xo=cn.next()){Oi.index>Ui?(Ds=Oi,Oi=null):Ds=Oi.sibling;var Ud=Vn(ln,Oi,Xo.value,mr);if(Ud===null){Oi===null&&(Oi=Ds);break}m&&Oi&&Ud.alternate===null&&_(ln,Oi),Jt=ge(Ud,Jt,Ui),Ii===null?ni=Ud:Ii.sibling=Ud,Ii=Ud,Oi=Ds}if(Xo.done)return L(ln,Oi),hr&&bc(ln,Ui),ni;if(Oi===null){for(;!Xo.done;Ui++,Xo=cn.next())Xo=Ar(ln,Xo.value,mr),Xo!==null&&(Jt=ge(Xo,Jt,Ui),Ii===null?ni=Xo:Ii.sibling=Xo,Ii=Xo);return hr&&bc(ln,Ui),ni}for(Oi=W(ln,Oi);!Xo.done;Ui++,Xo=cn.next())Xo=Ur(Oi,ln,Ui,Xo.value,mr),Xo!==null&&(m&&Xo.alternate!==null&&Oi.delete(Xo.key===null?Ui:Xo.key),Jt=ge(Xo,Jt,Ui),Ii===null?ni=Xo:Ii.sibling=Xo,Ii=Xo);return m&&Oi.forEach(function(Hg){return _(ln,Hg)}),hr&&bc(ln,Ui),ni}function il(ln,Jt,cn,mr){if(typeof cn=="object"&&cn!==null&&cn.type===N&&cn.key===null&&(cn=cn.props.children),typeof cn=="object"&&cn!==null){switch(cn.$$typeof){case q:e:{for(var ni=cn.key,Ii=Jt;Ii!==null;){if(Ii.key===ni){if(ni=cn.type,ni===N){if(Ii.tag===7){L(ln,Ii.sibling),Jt=se(Ii,cn.props.children),Jt.return=ln,ln=Jt;break e}}else if(Ii.elementType===ni||typeof ni=="object"&&ni!==null&&ni.$$typeof===rt&&id(ni)===Ii.type){L(ln,Ii.sibling),Jt=se(Ii,cn.props),Jt.ref=rd(ln,Ii,cn),Jt.return=ln,ln=Jt;break e}L(ln,Ii);break}else _(ln,Ii);Ii=Ii.sibling}cn.type===N?(Jt=gf(cn.props.children,ln.mode,mr,cn.key),Jt.return=ln,ln=Jt):(mr=r0(cn.type,cn.key,cn.props,null,ln.mode,mr),mr.ref=rd(ln,Jt,cn),mr.return=ln,ln=mr)}return Ze(ln);case J:e:{for(Ii=cn.key;Jt!==null;){if(Jt.key===Ii)if(Jt.tag===4&&Jt.stateNode.containerInfo===cn.containerInfo&&Jt.stateNode.implementation===cn.implementation){L(ln,Jt.sibling),Jt=se(Jt,cn.children||[]),Jt.return=ln,ln=Jt;break e}else{L(ln,Jt);break}else _(ln,Jt);Jt=Jt.sibling}Jt=i0(cn,ln.mode,mr),Jt.return=ln,ln=Jt}return Ze(ln);case rt:return Ii=cn._init,il(ln,Jt,Ii(cn._payload),mr)}if(cr(cn))return ii(ln,Jt,cn,mr);if(ut(cn))return li(ln,Jt,cn,mr);EA(ln,cn)}return typeof cn=="string"&&cn!==""||typeof cn=="number"?(cn=""+cn,Jt!==null&&Jt.tag===6?(L(ln,Jt.sibling),Jt=se(Jt,cn),Jt.return=ln,ln=Jt):(L(ln,Jt),Jt=Q0(cn,ln.mode,mr),Jt.return=ln,ln=Jt),Ze(ln)):L(ln,Jt)}return il}var Ws=BA(!0),wc=BA(!1),Wl=Ea(null),dl=null,qu=null,Mc=null;function wu(){Mc=qu=dl=null}function _a(m){var _=Wl.current;Gs(Wl),m._currentValue=_}function Xs(m,_,L){for(;m!==null;){var W=m.alternate;if((m.childLanes&_)!==_?(m.childLanes|=_,W!==null&&(W.childLanes|=_)):W!==null&&(W.childLanes&_)!==_&&(W.childLanes|=_),m===L)break;m=m.return}}function au(m,_){dl=m,Mc=qu=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&_&&(ql=!0),m.firstContext=null)}function lu(m){var _=m._currentValue;if(Mc!==m)if(m={context:m,memoizedValue:_,next:null},qu===null){if(dl===null)throw Error(t(308));qu=m,dl.dependencies={lanes:0,firstContext:m}}else qu=qu.next=m;return _}var cA=null;function Mu(m){cA===null?cA=[m]:cA.push(m)}function Sc(m,_,L,W){var se=_.interleaved;return se===null?(L.next=L,Mu(_)):(L.next=se.next,se.next=L),_.interleaved=L,Yu(m,W)}function Yu(m,_){m.lanes|=_;var L=m.alternate;for(L!==null&&(L.lanes|=_),L=m,m=m.return;m!==null;)m.childLanes|=_,L=m.alternate,L!==null&&(L.childLanes|=_),L=m,m=m.return;return L.tag===3?L.stateNode:null}var Ql=!1;function wh(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T(m,_){m=m.updateQueue,_.updateQueue===m&&(_.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function l(m,_){return{eventTime:m,lane:_,tag:0,payload:null,callback:null,next:null}}function c(m,_,L){var W=m.updateQueue;if(W===null)return null;if(W=W.shared,yi&2){var se=W.pending;return se===null?_.next=_:(_.next=se.next,se.next=_),W.pending=_,Yu(m,L)}return se=W.interleaved,se===null?(_.next=_,Mu(W)):(_.next=se.next,se.next=_),W.interleaved=_,Yu(m,L)}function C(m,_,L){if(_=_.updateQueue,_!==null&&(_=_.shared,(L&4194240)!==0)){var W=_.lanes;W&=m.pendingLanes,L|=W,_.lanes=L,ls(m,L)}}function M(m,_){var L=m.updateQueue,W=m.alternate;if(W!==null&&(W=W.updateQueue,L===W)){var se=null,ge=null;if(L=L.firstBaseUpdate,L!==null){do{var Ze={eventTime:L.eventTime,lane:L.lane,tag:L.tag,payload:L.payload,callback:L.callback,next:null};ge===null?se=ge=Ze:ge=ge.next=Ze,L=L.next}while(L!==null);ge===null?se=ge=_:ge=ge.next=_}else se=ge=_;L={baseState:W.baseState,firstBaseUpdate:se,lastBaseUpdate:ge,shared:W.shared,effects:W.effects},m.updateQueue=L;return}m=L.lastBaseUpdate,m===null?L.firstBaseUpdate=_:m.next=_,L.lastBaseUpdate=_}function R(m,_,L,W){var se=m.updateQueue;Ql=!1;var ge=se.firstBaseUpdate,Ze=se.lastBaseUpdate,kt=se.shared.pending;if(kt!==null){se.shared.pending=null;var Wt=kt,Cn=Wt.next;Wt.next=null,Ze===null?ge=Cn:Ze.next=Cn,Ze=Wt;var or=m.alternate;or!==null&&(or=or.updateQueue,kt=or.lastBaseUpdate,kt!==Ze&&(kt===null?or.firstBaseUpdate=Cn:kt.next=Cn,or.lastBaseUpdate=Wt))}if(ge!==null){var Ar=se.baseState;Ze=0,or=Cn=Wt=null,kt=ge;do{var Vn=kt.lane,Ur=kt.eventTime;if((W&Vn)===Vn){or!==null&&(or=or.next={eventTime:Ur,lane:0,tag:kt.tag,payload:kt.payload,callback:kt.callback,next:null});e:{var ii=m,li=kt;switch(Vn=_,Ur=L,li.tag){case 1:if(ii=li.payload,typeof ii=="function"){Ar=ii.call(Ur,Ar,Vn);break e}Ar=ii;break e;case 3:ii.flags=ii.flags&-65537|128;case 0:if(ii=li.payload,Vn=typeof ii=="function"?ii.call(Ur,Ar,Vn):ii,Vn==null)break e;Ar=Te({},Ar,Vn);break e;case 2:Ql=!0}}kt.callback!==null&&kt.lane!==0&&(m.flags|=64,Vn=se.effects,Vn===null?se.effects=[kt]:Vn.push(kt))}else Ur={eventTime:Ur,lane:Vn,tag:kt.tag,payload:kt.payload,callback:kt.callback,next:null},or===null?(Cn=or=Ur,Wt=Ar):or=or.next=Ur,Ze|=Vn;if(kt=kt.next,kt===null){if(kt=se.shared.pending,kt===null)break;Vn=kt,kt=Vn.next,Vn.next=null,se.lastBaseUpdate=Vn,se.shared.pending=null}}while(!0);if(or===null&&(Wt=Ar),se.baseState=Wt,se.firstBaseUpdate=Cn,se.lastBaseUpdate=or,_=se.shared.interleaved,_!==null){se=_;do Ze|=se.lane,se=se.next;while(se!==_)}else ge===null&&(se.shared.lanes=0);yl|=Ze,m.lanes=Ze,m.memoizedState=Ar}}function j(m,_,L){if(m=_.effects,_.effects=null,m!==null)for(_=0;_<m.length;_++){var W=m[_],se=W.callback;if(se!==null){if(W.callback=null,W=L,typeof se!="function")throw Error(t(191,se));se.call(W)}}}var $={},te=Ea($),oe=Ea($),be=Ea($);function Ee(m){if(m===$)throw Error(t(174));return m}function Ie(m,_){switch(_s(be,_),_s(oe,m),_s(te,$),m=_.nodeType,m){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:Ge(null,"");break;default:m=m===8?_.parentNode:_,_=m.namespaceURI||null,m=m.tagName,_=Ge(_,m)}Gs(te),_s(te,_)}function qe(){Gs(te),Gs(oe),Gs(be)}function Ve(m){Ee(be.current);var _=Ee(te.current),L=Ge(_,m.type);_!==L&&(_s(oe,m),_s(te,L))}function At(m){oe.current===m&&(Gs(te),Gs(oe))}var ot=Ea(0);function ct(m){for(var _=m;_!==null;){if(_.tag===13){var L=_.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||L.data==="$?"||L.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var yt=[];function Et(){for(var m=0;m<yt.length;m++)yt[m]._workInProgressVersionPrimary=null;yt.length=0}var Tt=X.ReactCurrentDispatcher,Rt=X.ReactCurrentBatchConfig,zt=0,Pt=null,tn=null,Ht=null,vn=!1,_n=!1,gn=0,On=0;function Un(){throw Error(t(321))}function wn(m,_){if(_===null)return!1;for(var L=0;L<_.length&&L<m.length;L++)if(!an(m[L],_[L]))return!1;return!0}function kr(m,_,L,W,se,ge){if(zt=ge,Pt=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Tt.current=m===null||m.memoizedState===null?_p:Ec,m=L(W,se),_n){ge=0;do{if(_n=!1,gn=0,25<=ge)throw Error(t(301));ge+=1,Ht=tn=null,_.updateQueue=null,Tt.current=kA,m=L(W,se)}while(_n)}if(Tt.current=Eh,_=tn!==null&&tn.next!==null,zt=0,Ht=tn=Pt=null,vn=!1,_)throw Error(t(300));return m}function Bi(){var m=gn!==0;return gn=0,m}function $i(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Pt.memoizedState=Ht=m:Ht=Ht.next=m,Ht}function Bo(){if(tn===null){var m=Pt.alternate;m=m!==null?m.memoizedState:null}else m=tn.next;var _=Ht===null?Pt.memoizedState:Ht.next;if(_!==null)Ht=_,tn=m;else{if(m===null)throw Error(t(310));tn=m,m={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},Ht===null?Pt.memoizedState=Ht=m:Ht=Ht.next=m}return Ht}function Si(m,_){return typeof _=="function"?_(m):_}function zo(m){var _=Bo(),L=_.queue;if(L===null)throw Error(t(311));L.lastRenderedReducer=m;var W=tn,se=W.baseQueue,ge=L.pending;if(ge!==null){if(se!==null){var Ze=se.next;se.next=ge.next,ge.next=Ze}W.baseQueue=se=ge,L.pending=null}if(se!==null){ge=se.next,W=W.baseState;var kt=Ze=null,Wt=null,Cn=ge;do{var or=Cn.lane;if((zt&or)===or)Wt!==null&&(Wt=Wt.next={lane:0,action:Cn.action,hasEagerState:Cn.hasEagerState,eagerState:Cn.eagerState,next:null}),W=Cn.hasEagerState?Cn.eagerState:m(W,Cn.action);else{var Ar={lane:or,action:Cn.action,hasEagerState:Cn.hasEagerState,eagerState:Cn.eagerState,next:null};Wt===null?(kt=Wt=Ar,Ze=W):Wt=Wt.next=Ar,Pt.lanes|=or,yl|=or}Cn=Cn.next}while(Cn!==null&&Cn!==ge);Wt===null?Ze=W:Wt.next=kt,an(W,_.memoizedState)||(ql=!0),_.memoizedState=W,_.baseState=Ze,_.baseQueue=Wt,L.lastRenderedState=W}if(m=L.interleaved,m!==null){se=m;do ge=se.lane,Pt.lanes|=ge,yl|=ge,se=se.next;while(se!==m)}else se===null&&(L.lanes=0);return[_.memoizedState,L.dispatch]}function jo(m){var _=Bo(),L=_.queue;if(L===null)throw Error(t(311));L.lastRenderedReducer=m;var W=L.dispatch,se=L.pending,ge=_.memoizedState;if(se!==null){L.pending=null;var Ze=se=se.next;do ge=m(ge,Ze.action),Ze=Ze.next;while(Ze!==se);an(ge,_.memoizedState)||(ql=!0),_.memoizedState=ge,_.baseQueue===null&&(_.baseState=ge),L.lastRenderedState=ge}return[ge,W]}function xo(){}function yo(m,_){var L=Pt,W=Bo(),se=_(),ge=!an(W.memoizedState,se);if(ge&&(W.memoizedState=se,ql=!0),W=W.queue,Js(hs.bind(null,L,W,m),[m]),W.getSnapshot!==_||ge||Ht!==null&&Ht.memoizedState.tag&1){if(L.flags|=2048,pl(9,No.bind(null,L,W,se,_),void 0,null),Zo===null)throw Error(t(349));zt&30||Oa(L,_,se)}return se}function Oa(m,_,L){m.flags|=16384,m={getSnapshot:_,value:L},_=Pt.updateQueue,_===null?(_={lastEffect:null,stores:null},Pt.updateQueue=_,_.stores=[m]):(L=_.stores,L===null?_.stores=[m]:L.push(m))}function No(m,_,L,W){_.value=L,_.getSnapshot=W,ja(_)&&$u(m)}function hs(m,_,L){return L(function(){ja(_)&&$u(m)})}function ja(m){var _=m.getSnapshot;m=m.value;try{var L=_();return!an(m,L)}catch{return!0}}function $u(m){var _=Yu(m,1);_!==null&&Jc(_,m,1,-1)}function fl(m){var _=$i();return typeof m=="function"&&(m=m()),_.memoizedState=_.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:m},_.queue=m,m=m.dispatch=ic.bind(null,Pt,m),[_.memoizedState,m]}function pl(m,_,L,W){return m={tag:m,create:_,destroy:L,deps:W,next:null},_=Pt.updateQueue,_===null?(_={lastEffect:null,stores:null},Pt.updateQueue=_,_.lastEffect=m.next=m):(L=_.lastEffect,L===null?_.lastEffect=m.next=m:(W=L.next,L.next=m,m.next=W,_.lastEffect=m)),m}function uu(){return Bo().memoizedState}function OA(m,_,L,W){var se=$i();Pt.flags|=m,se.memoizedState=pl(1|_,L,void 0,W===void 0?null:W)}function IA(m,_,L,W){var se=Bo();W=W===void 0?null:W;var ge=void 0;if(tn!==null){var Ze=tn.memoizedState;if(ge=Ze.destroy,W!==null&&wn(W,Ze.deps)){se.memoizedState=pl(_,L,ge,W);return}}Pt.flags|=m,se.memoizedState=pl(1|_,L,ge,W)}function Vu(m,_){return OA(8390656,8,m,_)}function Js(m,_){return IA(2048,8,m,_)}function ml(m,_){return IA(4,2,m,_)}function sa(m,_){return IA(4,4,m,_)}function Pl(m,_){if(typeof _=="function")return m=m(),_(m),function(){_(null)};if(_!=null)return m=m(),_.current=m,function(){_.current=null}}function bs(m,_,L){return L=L!=null?L.concat([m]):null,IA(4,4,Pl.bind(null,_,m),L)}function Qs(){}function el(m,_){var L=Bo();_=_===void 0?null:_;var W=L.memoizedState;return W!==null&&_!==null&&wn(_,W[1])?W[0]:(L.memoizedState=[m,_],m)}function tl(m,_){var L=Bo();_=_===void 0?null:_;var W=L.memoizedState;return W!==null&&_!==null&&wn(_,W[1])?W[0]:(m=m(),L.memoizedState=[m,_],m)}function Mh(m,_,L){return zt&21?(an(L,_)||(L=Ha(),Pt.lanes|=L,yl|=L,m.baseState=!0),_):(m.baseState&&(m.baseState=!1,ql=!0),m.memoizedState=L)}function Bd(m,_){var L=Dr;Dr=L!==0&&4>L?L:4,m(!0);var W=Rt.transition;Rt.transition={};try{m(!1),_()}finally{Dr=L,Rt.transition=W}}function Od(){return Bo().memoizedState}function Sh(m,_,L){var W=Kd(m);if(L={lane:W,action:L,hasEagerState:!1,eagerState:null,next:null},Id(m))Ia(_,L);else if(L=Sc(m,_,L,W),L!==null){var se=hA();Jc(L,m,W,se),Au(L,_,W)}}function ic(m,_,L){var W=Kd(m),se={lane:W,action:L,hasEagerState:!1,eagerState:null,next:null};if(Id(m))Ia(_,se);else{var ge=m.alternate;if(m.lanes===0&&(ge===null||ge.lanes===0)&&(ge=_.lastRenderedReducer,ge!==null))try{var Ze=_.lastRenderedState,kt=ge(Ze,L);if(se.hasEagerState=!0,se.eagerState=kt,an(kt,Ze)){var Wt=_.interleaved;Wt===null?(se.next=se,Mu(_)):(se.next=Wt.next,Wt.next=se),_.interleaved=se;return}}catch{}finally{}L=Sc(m,_,se,W),L!==null&&(se=hA(),Jc(L,m,W,se),Au(L,_,W))}}function Id(m){var _=m.alternate;return m===Pt||_!==null&&_===Pt}function Ia(m,_){_n=vn=!0;var L=m.pending;L===null?_.next=_:(_.next=L.next,L.next=_),m.pending=_}function Au(m,_,L){if(L&4194240){var W=_.lanes;W&=m.pendingLanes,L|=W,_.lanes=L,ls(m,L)}}var Eh={readContext:lu,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},_p={readContext:lu,useCallback:function(m,_){return $i().memoizedState=[m,_===void 0?null:_],m},useContext:lu,useEffect:Vu,useImperativeHandle:function(m,_,L){return L=L!=null?L.concat([m]):null,OA(4194308,4,Pl.bind(null,_,m),L)},useLayoutEffect:function(m,_){return OA(4194308,4,m,_)},useInsertionEffect:function(m,_){return OA(4,2,m,_)},useMemo:function(m,_){var L=$i();return _=_===void 0?null:_,m=m(),L.memoizedState=[m,_],m},useReducer:function(m,_,L){var W=$i();return _=L!==void 0?L(_):_,W.memoizedState=W.baseState=_,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:_},W.queue=m,m=m.dispatch=Sh.bind(null,Pt,m),[W.memoizedState,m]},useRef:function(m){var _=$i();return m={current:m},_.memoizedState=m},useState:fl,useDebugValue:Qs,useDeferredValue:function(m){return $i().memoizedState=m},useTransition:function(){var m=fl(!1),_=m[0];return m=Bd.bind(null,m[1]),$i().memoizedState=m,[_,m]},useMutableSource:function(){},useSyncExternalStore:function(m,_,L){var W=Pt,se=$i();if(hr){if(L===void 0)throw Error(t(407));L=L()}else{if(L=_(),Zo===null)throw Error(t(349));zt&30||Oa(W,_,L)}se.memoizedState=L;var ge={value:L,getSnapshot:_};return se.queue=ge,Vu(hs.bind(null,W,ge,m),[m]),W.flags|=2048,pl(9,No.bind(null,W,ge,L,_),void 0,null),L},useId:function(){var m=$i(),_=Zo.identifierPrefix;if(hr){var L=Wu,W=ou;L=(W&~(1<<32-pn(W)-1)).toString(32)+L,_=":"+_+"R"+L,L=gn++,0<L&&(_+="H"+L.toString(32)),_+=":"}else L=On++,_=":"+_+"r"+L.toString(32)+":";return m.memoizedState=_},unstable_isNewReconciler:!1},Ec={readContext:lu,useCallback:el,useContext:lu,useEffect:Js,useImperativeHandle:bs,useInsertionEffect:ml,useLayoutEffect:sa,useMemo:tl,useReducer:zo,useRef:uu,useState:function(){return zo(Si)},useDebugValue:Qs,useDeferredValue:function(m){var _=Bo();return Mh(_,tn.memoizedState,m)},useTransition:function(){var m=zo(Si)[0],_=Bo().memoizedState;return[m,_]},useMutableSource:xo,useSyncExternalStore:yo,useId:Od,unstable_isNewReconciler:!1},kA={readContext:lu,useCallback:el,useContext:lu,useEffect:Js,useImperativeHandle:bs,useInsertionEffect:ml,useLayoutEffect:sa,useMemo:tl,useReducer:jo,useRef:uu,useState:function(){return jo(Si)},useDebugValue:Qs,useDeferredValue:function(m){var _=Bo();return tn===null?_.memoizedState=m:Mh(_,tn.memoizedState,m)},useTransition:function(){var m=jo(Si)[0],_=Bo().memoizedState;return[m,_]},useMutableSource:xo,useSyncExternalStore:yo,useId:Od,unstable_isNewReconciler:!1};function Na(m,_){if(m&&m.defaultProps){_=Te({},_),m=m.defaultProps;for(var L in m)_[L]===void 0&&(_[L]=m[L]);return _}return _}function Cp(m,_,L,W){_=m.memoizedState,L=L(W,_),L=L==null?_:Te({},_,L),m.memoizedState=L,m.lanes===0&&(m.updateQueue.baseState=L)}var kd={isMounted:function(m){return(m=m._reactInternals)?ji(m)===m:!1},enqueueSetState:function(m,_,L){m=m._reactInternals;var W=hA(),se=Kd(m),ge=l(W,se);ge.payload=_,L!=null&&(ge.callback=L),_=c(m,ge,se),_!==null&&(Jc(_,m,se,W),C(_,m,se))},enqueueReplaceState:function(m,_,L){m=m._reactInternals;var W=hA(),se=Kd(m),ge=l(W,se);ge.tag=1,ge.payload=_,L!=null&&(ge.callback=L),_=c(m,ge,se),_!==null&&(Jc(_,m,se,W),C(_,m,se))},enqueueForceUpdate:function(m,_){m=m._reactInternals;var L=hA(),W=Kd(m),se=l(L,W);se.tag=2,_!=null&&(se.callback=_),_=c(m,se,W),_!==null&&(Jc(_,m,W,L),C(_,m,W))}};function bp(m,_,L,W,se,ge,Ze){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(W,ge,Ze):_.prototype&&_.prototype.isPureReactComponent?!Fr(L,W)||!Fr(se,ge):!0}function od(m,_,L){var W=!1,se=uA,ge=_.contextType;return typeof ge=="object"&&ge!==null?ge=lu(ge):(se=Ba(_)?va:Es.current,W=_.contextTypes,ge=(W=W!=null)?Vc(m,se):uA),_=new _(L,ge),m.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=kd,m.stateNode=_,_._reactInternals=m,W&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=se,m.__reactInternalMemoizedMaskedChildContext=ge),_}function Bc(m,_,L,W){m=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(L,W),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(L,W),_.state!==m&&kd.enqueueReplaceState(_,_.state,null)}function um(m,_,L,W){var se=m.stateNode;se.props=L,se.state=m.memoizedState,se.refs={},wh(m);var ge=_.contextType;typeof ge=="object"&&ge!==null?se.context=lu(ge):(ge=Ba(_)?va:Es.current,se.context=Vc(m,ge)),se.state=m.memoizedState,ge=_.getDerivedStateFromProps,typeof ge=="function"&&(Cp(m,_,ge,L),se.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(_=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),_!==se.state&&kd.enqueueReplaceState(se,se.state,null),R(m,L,se,W),se.state=m.memoizedState),typeof se.componentDidMount=="function"&&(m.flags|=4194308)}function oc(m,_){try{var L="",W=_;do L+=ft(W),W=W.return;while(W);var se=L}catch(ge){se=`
Error generating stack: `+ge.message+`
`+ge.stack}return{value:m,source:_,stack:se,digest:null}}function Td(m,_,L){return{value:m,source:null,stack:L??null,digest:_??null}}function Bh(m,_){try{console.error(_.value)}catch(L){setTimeout(function(){throw L})}}var xp=typeof WeakMap=="function"?WeakMap:Map;function sd(m,_,L){L=l(-1,L),L.tag=3,L.payload={element:null};var W=_.value;return L.callback=function(){df||(df=!0,$m=W),Bh(m,_)},L}function Uf(m,_,L){L=l(-1,L),L.tag=3;var W=m.type.getDerivedStateFromError;if(typeof W=="function"){var se=_.value;L.payload=function(){return W(se)},L.callback=function(){Bh(m,_)}}var ge=m.stateNode;return ge!==null&&typeof ge.componentDidCatch=="function"&&(L.callback=function(){Bh(m,_),typeof W!="function"&&(ff===null?ff=new Set([this]):ff.add(this));var Ze=_.stack;this.componentDidCatch(_.value,{componentStack:Ze!==null?Ze:""})}),L}function zf(m,_,L){var W=m.pingCache;if(W===null){W=m.pingCache=new xp;var se=new Set;W.set(_,se)}else se=W.get(_),se===void 0&&(se=new Set,W.set(_,se));se.has(L)||(se.add(L),m=Qg.bind(null,m,_,L),_.then(m,m))}function wp(m){do{var _;if((_=m.tag===13)&&(_=m.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return m;m=m.return}while(m!==null);return null}function Oh(m,_,L,W,se){return m.mode&1?(m.flags|=65536,m.lanes=se,m):(m===_?m.flags|=65536:(m.flags|=128,L.flags|=131072,L.flags&=-52805,L.tag===1&&(L.alternate===null?L.tag=17:(_=l(-1,1),_.tag=2,c(L,_,1))),L.lanes|=1),m)}var af=X.ReactCurrentOwner,ql=!1;function Rl(m,_,L,W){_.child=m===null?wc(_,null,L,W):Ws(_,m.child,L,W)}function Am(m,_,L,W,se){L=L.render;var ge=_.ref;return au(_,se),W=kr(m,_,L,W,ge,se),L=Bi(),m!==null&&!ql?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~se,Su(m,_,se)):(hr&&L&&SA(_),_.flags|=1,Rl(m,_,W,se),_.child)}function jf(m,_,L,W,se){if(m===null){var ge=L.type;return typeof ge=="function"&&!qf(ge)&&ge.defaultProps===void 0&&L.compare===null&&L.defaultProps===void 0?(_.tag=15,_.type=ge,Oo(m,_,ge,W,se)):(m=r0(L.type,null,W,_,_.mode,se),m.ref=_.ref,m.return=_,_.child=m)}if(ge=m.child,!(m.lanes&se)){var Ze=ge.memoizedProps;if(L=L.compare,L=L!==null?L:Fr,L(Ze,W)&&m.ref===_.ref)return Su(m,_,se)}return _.flags|=1,m=Kh(ge,W),m.ref=_.ref,m.return=_,_.child=m}function Oo(m,_,L,W,se){if(m!==null){var ge=m.memoizedProps;if(Fr(ge,W)&&m.ref===_.ref)if(ql=!1,_.pendingProps=W=ge,(m.lanes&se)!==0)m.flags&131072&&(ql=!0);else return _.lanes=m.lanes,Su(m,_,se)}return Ih(m,_,L,W,se)}function Hu(m,_,L){var W=_.pendingProps,se=W.children,ge=m!==null?m.memoizedState:null;if(W.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},_s(Kl,Is),Is|=L;else{if(!(L&1073741824))return m=ge!==null?ge.baseLanes|L:L,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:m,cachePool:null,transitions:null},_.updateQueue=null,_s(Kl,Is),Is|=m,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},W=ge!==null?ge.baseLanes:L,_s(Kl,Is),Is|=W}else ge!==null?(W=ge.baseLanes|L,_.memoizedState=null):W=L,_s(Kl,Is),Is|=W;return Rl(m,_,se,L),_.child}function lf(m,_){var L=_.ref;(m===null&&L!==null||m!==null&&m.ref!==L)&&(_.flags|=512,_.flags|=2097152)}function Ih(m,_,L,W,se){var ge=Ba(L)?va:Es.current;return ge=Vc(_,ge),au(_,se),L=kr(m,_,L,W,ge,se),W=Bi(),m!==null&&!ql?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~se,Su(m,_,se)):(hr&&W&&SA(_),_.flags|=1,Rl(m,_,L,se),_.child)}function TA(m,_,L,W,se){if(Ba(L)){var ge=!0;Mi(_)}else ge=!1;if(au(_,se),_.stateNode===null)Sp(m,_),od(_,L,W),um(_,L,W,se),W=!0;else if(m===null){var Ze=_.stateNode,kt=_.memoizedProps;Ze.props=kt;var Wt=Ze.context,Cn=L.contextType;typeof Cn=="object"&&Cn!==null?Cn=lu(Cn):(Cn=Ba(L)?va:Es.current,Cn=Vc(_,Cn));var or=L.getDerivedStateFromProps,Ar=typeof or=="function"||typeof Ze.getSnapshotBeforeUpdate=="function";Ar||typeof Ze.UNSAFE_componentWillReceiveProps!="function"&&typeof Ze.componentWillReceiveProps!="function"||(kt!==W||Wt!==Cn)&&Bc(_,Ze,W,Cn),Ql=!1;var Vn=_.memoizedState;Ze.state=Vn,R(_,W,Ze,se),Wt=_.memoizedState,kt!==W||Vn!==Wt||dr.current||Ql?(typeof or=="function"&&(Cp(_,L,or,W),Wt=_.memoizedState),(kt=Ql||bp(_,L,kt,W,Vn,Wt,Cn))?(Ar||typeof Ze.UNSAFE_componentWillMount!="function"&&typeof Ze.componentWillMount!="function"||(typeof Ze.componentWillMount=="function"&&Ze.componentWillMount(),typeof Ze.UNSAFE_componentWillMount=="function"&&Ze.UNSAFE_componentWillMount()),typeof Ze.componentDidMount=="function"&&(_.flags|=4194308)):(typeof Ze.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=W,_.memoizedState=Wt),Ze.props=W,Ze.state=Wt,Ze.context=Cn,W=kt):(typeof Ze.componentDidMount=="function"&&(_.flags|=4194308),W=!1)}else{Ze=_.stateNode,T(m,_),kt=_.memoizedProps,Cn=_.type===_.elementType?kt:Na(_.type,kt),Ze.props=Cn,Ar=_.pendingProps,Vn=Ze.context,Wt=L.contextType,typeof Wt=="object"&&Wt!==null?Wt=lu(Wt):(Wt=Ba(L)?va:Es.current,Wt=Vc(_,Wt));var Ur=L.getDerivedStateFromProps;(or=typeof Ur=="function"||typeof Ze.getSnapshotBeforeUpdate=="function")||typeof Ze.UNSAFE_componentWillReceiveProps!="function"&&typeof Ze.componentWillReceiveProps!="function"||(kt!==Ar||Vn!==Wt)&&Bc(_,Ze,W,Wt),Ql=!1,Vn=_.memoizedState,Ze.state=Vn,R(_,W,Ze,se);var ii=_.memoizedState;kt!==Ar||Vn!==ii||dr.current||Ql?(typeof Ur=="function"&&(Cp(_,L,Ur,W),ii=_.memoizedState),(Cn=Ql||bp(_,L,Cn,W,Vn,ii,Wt)||!1)?(or||typeof Ze.UNSAFE_componentWillUpdate!="function"&&typeof Ze.componentWillUpdate!="function"||(typeof Ze.componentWillUpdate=="function"&&Ze.componentWillUpdate(W,ii,Wt),typeof Ze.UNSAFE_componentWillUpdate=="function"&&Ze.UNSAFE_componentWillUpdate(W,ii,Wt)),typeof Ze.componentDidUpdate=="function"&&(_.flags|=4),typeof Ze.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof Ze.componentDidUpdate!="function"||kt===m.memoizedProps&&Vn===m.memoizedState||(_.flags|=4),typeof Ze.getSnapshotBeforeUpdate!="function"||kt===m.memoizedProps&&Vn===m.memoizedState||(_.flags|=1024),_.memoizedProps=W,_.memoizedState=ii),Ze.props=W,Ze.state=ii,Ze.context=Wt,W=Cn):(typeof Ze.componentDidUpdate!="function"||kt===m.memoizedProps&&Vn===m.memoizedState||(_.flags|=4),typeof Ze.getSnapshotBeforeUpdate!="function"||kt===m.memoizedProps&&Vn===m.memoizedState||(_.flags|=1024),W=!1)}return Pd(m,_,L,W,ge,se)}function Pd(m,_,L,W,se,ge){lf(m,_);var Ze=(_.flags&128)!==0;if(!W&&!Ze)return se&&Ch(_,L,!1),Su(m,_,ge);W=_.stateNode,af.current=_;var kt=Ze&&typeof L.getDerivedStateFromError!="function"?null:W.render();return _.flags|=1,m!==null&&Ze?(_.child=Ws(_,m.child,null,ge),_.child=Ws(_,null,kt,ge)):Rl(m,_,kt,ge),_.memoizedState=W.state,se&&Ch(_,L,!0),_.child}function Mp(m){var _=m.stateNode;_.pendingContext?vh(m,_.pendingContext,_.pendingContext!==_.context):_.context&&vh(m,_.context,!1),Ie(m,_.containerInfo)}function Oc(m,_,L,W,se){return xu(),To(se),_.flags|=256,Rl(m,_,L,W),_.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function Af(m){return{baseLanes:m,cachePool:null,transitions:null}}function ad(m,_,L){var W=_.pendingProps,se=ot.current,ge=!1,Ze=(_.flags&128)!==0,kt;if((kt=Ze)||(kt=m!==null&&m.memoizedState===null?!1:(se&2)!==0),kt?(ge=!0,_.flags&=-129):(m===null||m.memoizedState!==null)&&(se|=1),_s(ot,se&1),m===null)return Cs(_),m=_.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(_.mode&1?m.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(Ze=W.children,m=W.fallback,ge?(W=_.mode,ge=_.child,Ze={mode:"hidden",children:Ze},!(W&1)&&ge!==null?(ge.childLanes=0,ge.pendingProps=Ze):ge=mm(Ze,W,0,null),m=gf(m,W,L,null),ge.return=_,m.return=_,ge.sibling=m,_.child=ge,_.child.memoizedState=Af(L),_.memoizedState=uf,m):kh(_,Ze));if(se=m.memoizedState,se!==null&&(kt=se.dehydrated,kt!==null))return di(m,_,Ze,W,kt,se,L);if(ge){ge=W.fallback,Ze=_.mode,se=m.child,kt=se.sibling;var Wt={mode:"hidden",children:W.children};return!(Ze&1)&&_.child!==se?(W=_.child,W.childLanes=0,W.pendingProps=Wt,_.deletions=null):(W=Kh(se,Wt),W.subtreeFlags=se.subtreeFlags&14680064),kt!==null?ge=Kh(kt,ge):(ge=gf(ge,Ze,L,null),ge.flags|=2),ge.return=_,W.return=_,W.sibling=ge,_.child=W,W=ge,ge=_.child,Ze=m.child.memoizedState,Ze=Ze===null?Af(L):{baseLanes:Ze.baseLanes|L,cachePool:null,transitions:Ze.transitions},ge.memoizedState=Ze,ge.childLanes=m.childLanes&~L,_.memoizedState=uf,W}return ge=m.child,m=ge.sibling,W=Kh(ge,{mode:"visible",children:W.children}),!(_.mode&1)&&(W.lanes=L),W.return=_,W.sibling=null,m!==null&&(L=_.deletions,L===null?(_.deletions=[m],_.flags|=16):L.push(m)),_.child=W,_.memoizedState=null,W}function kh(m,_){return _=mm({mode:"visible",children:_},m.mode,0,null),_.return=m,m.child=_}function Hc(m,_,L,W){return W!==null&&To(W),Ws(_,m.child,null,L),m=kh(_,_.pendingProps.children),m.flags|=2,_.memoizedState=null,m}function di(m,_,L,W,se,ge,Ze){if(L)return _.flags&256?(_.flags&=-257,W=Td(Error(t(422))),Hc(m,_,Ze,W)):_.memoizedState!==null?(_.child=m.child,_.flags|=128,null):(ge=W.fallback,se=_.mode,W=mm({mode:"visible",children:W.children},se,0,null),ge=gf(ge,se,Ze,null),ge.flags|=2,W.return=_,ge.return=_,W.sibling=ge,_.child=W,_.mode&1&&Ws(_,m.child,null,Ze),_.child.memoizedState=Af(Ze),_.memoizedState=uf,ge);if(!(_.mode&1))return Hc(m,_,Ze,null);if(se.data==="$!"){if(W=se.nextSibling&&se.nextSibling.dataset,W)var kt=W.dgst;return W=kt,ge=Error(t(419)),W=Td(ge,W,void 0),Hc(m,_,Ze,W)}if(kt=(Ze&m.childLanes)!==0,ql||kt){if(W=Zo,W!==null){switch(Ze&-Ze){case 4:se=2;break;case 16:se=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:se=32;break;case 536870912:se=268435456;break;default:se=0}se=se&(W.suspendedLanes|Ze)?0:se,se!==0&&se!==ge.retryLane&&(ge.retryLane=se,Yu(m,se),Jc(W,m,se,-1))}return Jm(),W=Td(Error(t(421))),Hc(m,_,Ze,W)}return se.data==="$?"?(_.flags|=128,_.child=m.child,_=W0.bind(null,m),se._reactRetry=_,null):(m=ge.treeContext,ha=ec(se.nextSibling),gs=_,hr=!0,Hr=null,m!==null&&(za[Ks++]=ou,za[Ks++]=Wu,za[Ks++]=Ho,ou=m.id,Wu=m.overflow,Ho=_),_=kh(_,W.children),_.flags|=4096,_)}function Zc(m,_,L){m.lanes|=_;var W=m.alternate;W!==null&&(W.lanes|=_),Xs(m.return,_,L)}function rs(m,_,L,W,se){var ge=m.memoizedState;ge===null?m.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:W,tail:L,tailMode:se}:(ge.isBackwards=_,ge.rendering=null,ge.renderingStartTime=0,ge.last=W,ge.tail=L,ge.tailMode=se)}function Th(m,_,L){var W=_.pendingProps,se=W.revealOrder,ge=W.tail;if(Rl(m,_,W.children,L),W=ot.current,W&2)W=W&1|2,_.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=_.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Zc(m,L,_);else if(m.tag===19)Zc(m,L,_);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===_)break e;for(;m.sibling===null;){if(m.return===null||m.return===_)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}W&=1}if(_s(ot,W),!(_.mode&1))_.memoizedState=null;else switch(se){case"forwards":for(L=_.child,se=null;L!==null;)m=L.alternate,m!==null&&ct(m)===null&&(se=L),L=L.sibling;L=se,L===null?(se=_.child,_.child=null):(se=L.sibling,L.sibling=null),rs(_,!1,se,L,ge);break;case"backwards":for(L=null,se=_.child,_.child=null;se!==null;){if(m=se.alternate,m!==null&&ct(m)===null){_.child=se;break}m=se.sibling,se.sibling=L,L=se,se=m}rs(_,!0,L,null,ge);break;case"together":rs(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Sp(m,_){!(_.mode&1)&&m!==null&&(m.alternate=null,_.alternate=null,_.flags|=2)}function Su(m,_,L){if(m!==null&&(_.dependencies=m.dependencies),yl|=_.lanes,!(L&_.childLanes))return null;if(m!==null&&_.child!==m.child)throw Error(t(153));if(_.child!==null){for(m=_.child,L=Kh(m,m.pendingProps),_.child=L,L.return=_;m.sibling!==null;)m=m.sibling,L=L.sibling=Kh(m,m.pendingProps),L.return=_;L.sibling=null}return _.child}function Ym(m,_,L){switch(_.tag){case 3:Mp(_),xu();break;case 5:Ve(_);break;case 1:Ba(_.type)&&Mi(_);break;case 4:Ie(_,_.stateNode.containerInfo);break;case 10:var W=_.type._context,se=_.memoizedProps.value;_s(Wl,W._currentValue),W._currentValue=se;break;case 13:if(W=_.memoizedState,W!==null)return W.dehydrated!==null?(_s(ot,ot.current&1),_.flags|=128,null):L&_.child.childLanes?ad(m,_,L):(_s(ot,ot.current&1),m=Su(m,_,L),m!==null?m.sibling:null);_s(ot,ot.current&1);break;case 19:if(W=(L&_.childLanes)!==0,m.flags&128){if(W)return Th(m,_,L);_.flags|=128}if(se=_.memoizedState,se!==null&&(se.rendering=null,se.tail=null,se.lastEffect=null),_s(ot,ot.current),W)break;return null;case 22:case 23:return _.lanes=0,Hu(m,_,L)}return Su(m,_,L)}var gl,cm,da,hm;gl=function(m,_){for(var L=_.child;L!==null;){if(L.tag===5||L.tag===6)m.appendChild(L.stateNode);else if(L.tag!==4&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===_)break;for(;L.sibling===null;){if(L.return===null||L.return===_)return;L=L.return}L.sibling.return=L.return,L=L.sibling}},cm=function(){},da=function(m,_,L,W){var se=m.memoizedProps;if(se!==W){m=_.stateNode,Ee(te.current);var ge=null;switch(L){case"input":se=Nt(m,se),W=Nt(m,W),ge=[];break;case"select":se=Te({},se,{value:void 0}),W=Te({},W,{value:void 0}),ge=[];break;case"textarea":se=br(m,se),W=br(m,W),ge=[];break;default:typeof se.onClick!="function"&&typeof W.onClick=="function"&&(m.onclick=Uu)}fe(L,W);var Ze;L=null;for(Cn in se)if(!W.hasOwnProperty(Cn)&&se.hasOwnProperty(Cn)&&se[Cn]!=null)if(Cn==="style"){var kt=se[Cn];for(Ze in kt)kt.hasOwnProperty(Ze)&&(L||(L={}),L[Ze]="")}else Cn!=="dangerouslySetInnerHTML"&&Cn!=="children"&&Cn!=="suppressContentEditableWarning"&&Cn!=="suppressHydrationWarning"&&Cn!=="autoFocus"&&(i.hasOwnProperty(Cn)?ge||(ge=[]):(ge=ge||[]).push(Cn,null));for(Cn in W){var Wt=W[Cn];if(kt=se!=null?se[Cn]:void 0,W.hasOwnProperty(Cn)&&Wt!==kt&&(Wt!=null||kt!=null))if(Cn==="style")if(kt){for(Ze in kt)!kt.hasOwnProperty(Ze)||Wt&&Wt.hasOwnProperty(Ze)||(L||(L={}),L[Ze]="");for(Ze in Wt)Wt.hasOwnProperty(Ze)&&kt[Ze]!==Wt[Ze]&&(L||(L={}),L[Ze]=Wt[Ze])}else L||(ge||(ge=[]),ge.push(Cn,L)),L=Wt;else Cn==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,kt=kt?kt.__html:void 0,Wt!=null&&kt!==Wt&&(ge=ge||[]).push(Cn,Wt)):Cn==="children"?typeof Wt!="string"&&typeof Wt!="number"||(ge=ge||[]).push(Cn,""+Wt):Cn!=="suppressContentEditableWarning"&&Cn!=="suppressHydrationWarning"&&(i.hasOwnProperty(Cn)?(Wt!=null&&Cn==="onScroll"&&Vo("scroll",m),ge||kt===Wt||(ge=[])):(ge=ge||[]).push(Cn,Wt))}L&&(ge=ge||[]).push("style",L);var Cn=ge;(_.updateQueue=Cn)&&(_.flags|=4)}},hm=function(m,_,L,W){L!==W&&(_.flags|=4)};function cf(m,_){if(!hr)switch(m.tailMode){case"hidden":_=m.tail;for(var L=null;_!==null;)_.alternate!==null&&(L=_),_=_.sibling;L===null?m.tail=null:L.sibling=null;break;case"collapsed":L=m.tail;for(var W=null;L!==null;)L.alternate!==null&&(W=L),L=L.sibling;W===null?_||m.tail===null?m.tail=null:m.tail.sibling=null:W.sibling=null}}function nl(m){var _=m.alternate!==null&&m.alternate.child===m.child,L=0,W=0;if(_)for(var se=m.child;se!==null;)L|=se.lanes|se.childLanes,W|=se.subtreeFlags&14680064,W|=se.flags&14680064,se.return=m,se=se.sibling;else for(se=m.child;se!==null;)L|=se.lanes|se.childLanes,W|=se.subtreeFlags,W|=se.flags,se.return=m,se=se.sibling;return m.subtreeFlags|=W,m.childLanes=L,_}function Ep(m,_,L){var W=_.pendingProps;switch(xc(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nl(_),null;case 1:return Ba(_.type)&&tc(),nl(_),null;case 3:return W=_.stateNode,qe(),Gs(dr),Gs(Es),Et(),W.pendingContext&&(W.context=W.pendingContext,W.pendingContext=null),(m===null||m.child===null)&&(su(_)?_.flags|=4:m===null||m.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,Hr!==null&&(Hm(Hr),Hr=null))),cm(m,_),nl(_),null;case 5:At(_);var se=Ee(be.current);if(L=_.type,m!==null&&_.stateNode!=null)da(m,_,L,W,se),m.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!W){if(_.stateNode===null)throw Error(t(166));return nl(_),null}if(m=Ee(te.current),su(_)){W=_.stateNode,L=_.type;var ge=_.memoizedProps;switch(W[wA]=_,W[_c]=ge,m=(_.mode&1)!==0,L){case"dialog":Vo("cancel",W),Vo("close",W);break;case"iframe":case"object":case"embed":Vo("load",W);break;case"video":case"audio":for(se=0;se<bA.length;se++)Vo(bA[se],W);break;case"source":Vo("error",W);break;case"img":case"image":case"link":Vo("error",W),Vo("load",W);break;case"details":Vo("toggle",W);break;case"input":nn(W,ge),Vo("invalid",W);break;case"select":W._wrapperState={wasMultiple:!!ge.multiple},Vo("invalid",W);break;case"textarea":Cr(W,ge),Vo("invalid",W)}fe(L,ge),se=null;for(var Ze in ge)if(ge.hasOwnProperty(Ze)){var kt=ge[Ze];Ze==="children"?typeof kt=="string"?W.textContent!==kt&&(ge.suppressHydrationWarning!==!0&&mh(W.textContent,kt,m),se=["children",kt]):typeof kt=="number"&&W.textContent!==""+kt&&(ge.suppressHydrationWarning!==!0&&mh(W.textContent,kt,m),se=["children",""+kt]):i.hasOwnProperty(Ze)&&kt!=null&&Ze==="onScroll"&&Vo("scroll",W)}switch(L){case"input":Je(W),Yn(W,ge,!0);break;case"textarea":Je(W),Qn(W);break;case"select":case"option":break;default:typeof ge.onClick=="function"&&(W.onclick=Uu)}W=se,_.updateQueue=W,W!==null&&(_.flags|=4)}else{Ze=se.nodeType===9?se:se.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Sr(L)),m==="http://www.w3.org/1999/xhtml"?L==="script"?(m=Ze.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof W.is=="string"?m=Ze.createElement(L,{is:W.is}):(m=Ze.createElement(L),L==="select"&&(Ze=m,W.multiple?Ze.multiple=!0:W.size&&(Ze.size=W.size))):m=Ze.createElementNS(m,L),m[wA]=_,m[_c]=W,gl(m,_,!1,!1),_.stateNode=m;e:{switch(Ze=xe(L,W),L){case"dialog":Vo("cancel",m),Vo("close",m),se=W;break;case"iframe":case"object":case"embed":Vo("load",m),se=W;break;case"video":case"audio":for(se=0;se<bA.length;se++)Vo(bA[se],m);se=W;break;case"source":Vo("error",m),se=W;break;case"img":case"image":case"link":Vo("error",m),Vo("load",m),se=W;break;case"details":Vo("toggle",m),se=W;break;case"input":nn(m,W),se=Nt(m,W),Vo("invalid",m);break;case"option":se=W;break;case"select":m._wrapperState={wasMultiple:!!W.multiple},se=Te({},W,{value:void 0}),Vo("invalid",m);break;case"textarea":Cr(m,W),se=br(m,W),Vo("invalid",m);break;default:se=W}fe(L,se),kt=se;for(ge in kt)if(kt.hasOwnProperty(ge)){var Wt=kt[ge];ge==="style"?Kt(m,Wt):ge==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,Wt!=null&&me(m,Wt)):ge==="children"?typeof Wt=="string"?(L!=="textarea"||Wt!=="")&&Xe(m,Wt):typeof Wt=="number"&&Xe(m,""+Wt):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(i.hasOwnProperty(ge)?Wt!=null&&ge==="onScroll"&&Vo("scroll",m):Wt!=null&&ne(m,ge,Wt,Ze))}switch(L){case"input":Je(m),Yn(m,W,!1);break;case"textarea":Je(m),Qn(m);break;case"option":W.value!=null&&m.setAttribute("value",""+De(W.value));break;case"select":m.multiple=!!W.multiple,ge=W.value,ge!=null?fr(m,!!W.multiple,ge,!1):W.defaultValue!=null&&fr(m,!!W.multiple,W.defaultValue,!0);break;default:typeof se.onClick=="function"&&(m.onclick=Uu)}switch(L){case"button":case"input":case"select":case"textarea":W=!!W.autoFocus;break e;case"img":W=!0;break e;default:W=!1}}W&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return nl(_),null;case 6:if(m&&_.stateNode!=null)hm(m,_,m.memoizedProps,W);else{if(typeof W!="string"&&_.stateNode===null)throw Error(t(166));if(L=Ee(be.current),Ee(te.current),su(_)){if(W=_.stateNode,L=_.memoizedProps,W[wA]=_,(ge=W.nodeValue!==L)&&(m=gs,m!==null))switch(m.tag){case 3:mh(W.nodeValue,L,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&mh(W.nodeValue,L,(m.mode&1)!==0)}ge&&(_.flags|=4)}else W=(L.nodeType===9?L:L.ownerDocument).createTextNode(W),W[wA]=_,_.stateNode=W}return nl(_),null;case 13:if(Gs(ot),W=_.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(hr&&ha!==null&&_.mode&1&&!(_.flags&128))Ff(),xu(),_.flags|=98560,ge=!1;else if(ge=su(_),W!==null&&W.dehydrated!==null){if(m===null){if(!ge)throw Error(t(318));if(ge=_.memoizedState,ge=ge!==null?ge.dehydrated:null,!ge)throw Error(t(317));ge[wA]=_}else xu(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;nl(_),ge=!1}else Hr!==null&&(Hm(Hr),Hr=null),ge=!0;if(!ge)return _.flags&65536?_:null}return _.flags&128?(_.lanes=L,_):(W=W!==null,W!==(m!==null&&m.memoizedState!==null)&&W&&(_.child.flags|=8192,_.mode&1&&(m===null||ot.current&1?Po===0&&(Po=3):Jm())),_.updateQueue!==null&&(_.flags|=4),nl(_),null);case 4:return qe(),cm(m,_),m===null&&Fu(_.stateNode.containerInfo),nl(_),null;case 10:return _a(_.type._context),nl(_),null;case 17:return Ba(_.type)&&tc(),nl(_),null;case 19:if(Gs(ot),ge=_.memoizedState,ge===null)return nl(_),null;if(W=(_.flags&128)!==0,Ze=ge.rendering,Ze===null)if(W)cf(ge,!1);else{if(Po!==0||m!==null&&m.flags&128)for(m=_.child;m!==null;){if(Ze=ct(m),Ze!==null){for(_.flags|=128,cf(ge,!1),W=Ze.updateQueue,W!==null&&(_.updateQueue=W,_.flags|=4),_.subtreeFlags=0,W=L,L=_.child;L!==null;)ge=L,m=W,ge.flags&=14680066,Ze=ge.alternate,Ze===null?(ge.childLanes=0,ge.lanes=m,ge.child=null,ge.subtreeFlags=0,ge.memoizedProps=null,ge.memoizedState=null,ge.updateQueue=null,ge.dependencies=null,ge.stateNode=null):(ge.childLanes=Ze.childLanes,ge.lanes=Ze.lanes,ge.child=Ze.child,ge.subtreeFlags=0,ge.deletions=null,ge.memoizedProps=Ze.memoizedProps,ge.memoizedState=Ze.memoizedState,ge.updateQueue=Ze.updateQueue,ge.type=Ze.type,m=Ze.dependencies,ge.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),L=L.sibling;return _s(ot,ot.current&1|2),_.child}m=m.sibling}ge.tail!==null&&ao()>Nf&&(_.flags|=128,W=!0,cf(ge,!1),_.lanes=4194304)}else{if(!W)if(m=ct(Ze),m!==null){if(_.flags|=128,W=!0,L=m.updateQueue,L!==null&&(_.updateQueue=L,_.flags|=4),cf(ge,!0),ge.tail===null&&ge.tailMode==="hidden"&&!Ze.alternate&&!hr)return nl(_),null}else 2*ao()-ge.renderingStartTime>Nf&&L!==1073741824&&(_.flags|=128,W=!0,cf(ge,!1),_.lanes=4194304);ge.isBackwards?(Ze.sibling=_.child,_.child=Ze):(L=ge.last,L!==null?L.sibling=Ze:_.child=Ze,ge.last=Ze)}return ge.tail!==null?(_=ge.tail,ge.rendering=_,ge.tail=_.sibling,ge.renderingStartTime=ao(),_.sibling=null,L=ot.current,_s(ot,W?L&1|2:L&1),_):(nl(_),null);case 22:case 23:return z0(),W=_.memoizedState!==null,m!==null&&m.memoizedState!==null!==W&&(_.flags|=8192),W&&_.mode&1?Is&1073741824&&(nl(_),_.subtreeFlags&6&&(_.flags|=8192)):nl(_),null;case 24:return null;case 25:return null}throw Error(t(156,_.tag))}function A(m,_){switch(xc(_),_.tag){case 1:return Ba(_.type)&&tc(),m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 3:return qe(),Gs(dr),Gs(Es),Et(),m=_.flags,m&65536&&!(m&128)?(_.flags=m&-65537|128,_):null;case 5:return At(_),null;case 13:if(Gs(ot),m=_.memoizedState,m!==null&&m.dehydrated!==null){if(_.alternate===null)throw Error(t(340));xu()}return m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 19:return Gs(ot),null;case 4:return qe(),null;case 10:return _a(_.type._context),null;case 22:case 23:return z0(),null;case 24:return null;default:return null}}var y=!1,O=!1,E=typeof WeakSet=="function"?WeakSet:Set,K=null;function H(m,_){var L=m.ref;if(L!==null)if(typeof L=="function")try{L(null)}catch(W){rl(m,_,W)}else L.current=null}function le(m,_,L){try{L()}catch(W){rl(m,_,W)}}var ve=!1;function Be(m,_){if(XA=Se,m=$o(),QA(m)){if("selectionStart"in m)var L={start:m.selectionStart,end:m.selectionEnd};else e:{L=(L=m.ownerDocument)&&L.defaultView||window;var W=L.getSelection&&L.getSelection();if(W&&W.rangeCount!==0){L=W.anchorNode;var se=W.anchorOffset,ge=W.focusNode;W=W.focusOffset;try{L.nodeType,ge.nodeType}catch{L=null;break e}var Ze=0,kt=-1,Wt=-1,Cn=0,or=0,Ar=m,Vn=null;t:for(;;){for(var Ur;Ar!==L||se!==0&&Ar.nodeType!==3||(kt=Ze+se),Ar!==ge||W!==0&&Ar.nodeType!==3||(Wt=Ze+W),Ar.nodeType===3&&(Ze+=Ar.nodeValue.length),(Ur=Ar.firstChild)!==null;)Vn=Ar,Ar=Ur;for(;;){if(Ar===m)break t;if(Vn===L&&++Cn===se&&(kt=Ze),Vn===ge&&++or===W&&(Wt=Ze),(Ur=Ar.nextSibling)!==null)break;Ar=Vn,Vn=Ar.parentNode}Ar=Ur}L=kt===-1||Wt===-1?null:{start:kt,end:Wt}}else L=null}L=L||{start:0,end:0}}else L=null;for(Nl={focusedElem:m,selectionRange:L},Se=!1,K=_;K!==null;)if(_=K,m=_.child,(_.subtreeFlags&1028)!==0&&m!==null)m.return=_,K=m;else for(;K!==null;){_=K;try{var ii=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(ii!==null){var li=ii.memoizedProps,il=ii.memoizedState,ln=_.stateNode,Jt=ln.getSnapshotBeforeUpdate(_.elementType===_.type?li:Na(_.type,li),il);ln.__reactInternalSnapshotBeforeUpdate=Jt}break;case 3:var cn=_.stateNode.containerInfo;cn.nodeType===1?cn.textContent="":cn.nodeType===9&&cn.documentElement&&cn.removeChild(cn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(mr){rl(_,_.return,mr)}if(m=_.sibling,m!==null){m.return=_.return,K=m;break}K=_.return}return ii=ve,ve=!1,ii}function Fe(m,_,L){var W=_.updateQueue;if(W=W!==null?W.lastEffect:null,W!==null){var se=W=W.next;do{if((se.tag&m)===m){var ge=se.destroy;se.destroy=void 0,ge!==void 0&&le(_,L,ge)}se=se.next}while(se!==W)}}function ht(m,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var L=_=_.next;do{if((L.tag&m)===m){var W=L.create;L.destroy=W()}L=L.next}while(L!==_)}}function xt(m){var _=m.ref;if(_!==null){var L=m.stateNode;switch(m.tag){case 5:m=L;break;default:m=L}typeof _=="function"?_(m):_.current=m}}function Xt(m){var _=m.alternate;_!==null&&(m.alternate=null,Xt(_)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(_=m.stateNode,_!==null&&(delete _[wA],delete _[_c],delete _[$c],delete _[et],delete _[Ua])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Qt(m){return m.tag===5||m.tag===3||m.tag===4}function xn(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Qt(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Rn(m,_,L){var W=m.tag;if(W===5||W===6)m=m.stateNode,_?L.nodeType===8?L.parentNode.insertBefore(m,_):L.insertBefore(m,_):(L.nodeType===8?(_=L.parentNode,_.insertBefore(m,L)):(_=L,_.appendChild(m)),L=L._reactRootContainer,L!=null||_.onclick!==null||(_.onclick=Uu));else if(W!==4&&(m=m.child,m!==null))for(Rn(m,_,L),m=m.sibling;m!==null;)Rn(m,_,L),m=m.sibling}function $n(m,_,L){var W=m.tag;if(W===5||W===6)m=m.stateNode,_?L.insertBefore(m,_):L.appendChild(m);else if(W!==4&&(m=m.child,m!==null))for($n(m,_,L),m=m.sibling;m!==null;)$n(m,_,L),m=m.sibling}var Jn=null,yr=!1;function ar(m,_,L){for(L=L.child;L!==null;)Lr(m,_,L),L=L.sibling}function Lr(m,_,L){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(ia,L)}catch{}switch(L.tag){case 5:O||H(L,_);case 6:var W=Jn,se=yr;Jn=null,ar(m,_,L),Jn=W,yr=se,Jn!==null&&(yr?(m=Jn,L=L.stateNode,m.nodeType===8?m.parentNode.removeChild(L):m.removeChild(L)):Jn.removeChild(L.stateNode));break;case 18:Jn!==null&&(yr?(m=Jn,L=L.stateNode,m.nodeType===8?ed(m.parentNode,L):m.nodeType===1&&ed(m,L),Pi(m)):ed(Jn,L.stateNode));break;case 4:W=Jn,se=yr,Jn=L.stateNode.containerInfo,yr=!0,ar(m,_,L),Jn=W,yr=se;break;case 0:case 11:case 14:case 15:if(!O&&(W=L.updateQueue,W!==null&&(W=W.lastEffect,W!==null))){se=W=W.next;do{var ge=se,Ze=ge.destroy;ge=ge.tag,Ze!==void 0&&(ge&2||ge&4)&&le(L,_,Ze),se=se.next}while(se!==W)}ar(m,_,L);break;case 1:if(!O&&(H(L,_),W=L.stateNode,typeof W.componentWillUnmount=="function"))try{W.props=L.memoizedProps,W.state=L.memoizedState,W.componentWillUnmount()}catch(kt){rl(L,_,kt)}ar(m,_,L);break;case 21:ar(m,_,L);break;case 22:L.mode&1?(O=(W=O)||L.memoizedState!==null,ar(m,_,L),O=W):ar(m,_,L);break;default:ar(m,_,L)}}function ai(m){var _=m.updateQueue;if(_!==null){m.updateQueue=null;var L=m.stateNode;L===null&&(L=m.stateNode=new E),_.forEach(function(W){var se=qg.bind(null,m,W);L.has(W)||(L.add(W),W.then(se,se))})}}function Nr(m,_){var L=_.deletions;if(L!==null)for(var W=0;W<L.length;W++){var se=L[W];try{var ge=m,Ze=_,kt=Ze;e:for(;kt!==null;){switch(kt.tag){case 5:Jn=kt.stateNode,yr=!1;break e;case 3:Jn=kt.stateNode.containerInfo,yr=!0;break e;case 4:Jn=kt.stateNode.containerInfo,yr=!0;break e}kt=kt.return}if(Jn===null)throw Error(t(160));Lr(ge,Ze,se),Jn=null,yr=!1;var Wt=se.alternate;Wt!==null&&(Wt.return=null),se.return=null}catch(Cn){rl(se,_,Cn)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)Ji(_,m),_=_.sibling}function Ji(m,_){var L=m.alternate,W=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Nr(_,m),Io(m),W&4){try{Fe(3,m,m.return),ht(3,m)}catch(li){rl(m,m.return,li)}try{Fe(5,m,m.return)}catch(li){rl(m,m.return,li)}}break;case 1:Nr(_,m),Io(m),W&512&&L!==null&&H(L,L.return);break;case 5:if(Nr(_,m),Io(m),W&512&&L!==null&&H(L,L.return),m.flags&32){var se=m.stateNode;try{Xe(se,"")}catch(li){rl(m,m.return,li)}}if(W&4&&(se=m.stateNode,se!=null)){var ge=m.memoizedProps,Ze=L!==null?L.memoizedProps:ge,kt=m.type,Wt=m.updateQueue;if(m.updateQueue=null,Wt!==null)try{kt==="input"&&ge.type==="radio"&&ge.name!=null&&en(se,ge),xe(kt,Ze);var Cn=xe(kt,ge);for(Ze=0;Ze<Wt.length;Ze+=2){var or=Wt[Ze],Ar=Wt[Ze+1];or==="style"?Kt(se,Ar):or==="dangerouslySetInnerHTML"?me(se,Ar):or==="children"?Xe(se,Ar):ne(se,or,Ar,Cn)}switch(kt){case"input":Sn(se,ge);break;case"textarea":Mr(se,ge);break;case"select":var Vn=se._wrapperState.wasMultiple;se._wrapperState.wasMultiple=!!ge.multiple;var Ur=ge.value;Ur!=null?fr(se,!!ge.multiple,Ur,!1):Vn!==!!ge.multiple&&(ge.defaultValue!=null?fr(se,!!ge.multiple,ge.defaultValue,!0):fr(se,!!ge.multiple,ge.multiple?[]:"",!1))}se[_c]=ge}catch(li){rl(m,m.return,li)}}break;case 6:if(Nr(_,m),Io(m),W&4){if(m.stateNode===null)throw Error(t(162));se=m.stateNode,ge=m.memoizedProps;try{se.nodeValue=ge}catch(li){rl(m,m.return,li)}}break;case 3:if(Nr(_,m),Io(m),W&4&&L!==null&&L.memoizedState.isDehydrated)try{Pi(_.containerInfo)}catch(li){rl(m,m.return,li)}break;case 4:Nr(_,m),Io(m);break;case 13:Nr(_,m),Io(m),se=m.child,se.flags&8192&&(ge=se.memoizedState!==null,se.stateNode.isHidden=ge,!ge||se.alternate!==null&&se.alternate.memoizedState!==null||(hf=ao())),W&4&&ai(m);break;case 22:if(or=L!==null&&L.memoizedState!==null,m.mode&1?(O=(Cn=O)||or,Nr(_,m),O=Cn):Nr(_,m),Io(m),W&8192){if(Cn=m.memoizedState!==null,(m.stateNode.isHidden=Cn)&&!or&&m.mode&1)for(K=m,or=m.child;or!==null;){for(Ar=K=or;K!==null;){switch(Vn=K,Ur=Vn.child,Vn.tag){case 0:case 11:case 14:case 15:Fe(4,Vn,Vn.return);break;case 1:H(Vn,Vn.return);var ii=Vn.stateNode;if(typeof ii.componentWillUnmount=="function"){W=Vn,L=Vn.return;try{_=W,ii.props=_.memoizedProps,ii.state=_.memoizedState,ii.componentWillUnmount()}catch(li){rl(W,L,li)}}break;case 5:H(Vn,Vn.return);break;case 22:if(Vn.memoizedState!==null){ba(Ar);continue}}Ur!==null?(Ur.return=Vn,K=Ur):ba(Ar)}or=or.sibling}e:for(or=null,Ar=m;;){if(Ar.tag===5){if(or===null){or=Ar;try{se=Ar.stateNode,Cn?(ge=se.style,typeof ge.setProperty=="function"?ge.setProperty("display","none","important"):ge.display="none"):(kt=Ar.stateNode,Wt=Ar.memoizedProps.style,Ze=Wt!=null&&Wt.hasOwnProperty("display")?Wt.display:null,kt.style.display=it("display",Ze))}catch(li){rl(m,m.return,li)}}}else if(Ar.tag===6){if(or===null)try{Ar.stateNode.nodeValue=Cn?"":Ar.memoizedProps}catch(li){rl(m,m.return,li)}}else if((Ar.tag!==22&&Ar.tag!==23||Ar.memoizedState===null||Ar===m)&&Ar.child!==null){Ar.child.return=Ar,Ar=Ar.child;continue}if(Ar===m)break e;for(;Ar.sibling===null;){if(Ar.return===null||Ar.return===m)break e;or===Ar&&(or=null),Ar=Ar.return}or===Ar&&(or=null),Ar.sibling.return=Ar.return,Ar=Ar.sibling}}break;case 19:Nr(_,m),Io(m),W&4&&ai(m);break;case 21:break;default:Nr(_,m),Io(m)}}function Io(m){var _=m.flags;if(_&2){try{e:{for(var L=m.return;L!==null;){if(Qt(L)){var W=L;break e}L=L.return}throw Error(t(160))}switch(W.tag){case 5:var se=W.stateNode;W.flags&32&&(Xe(se,""),W.flags&=-33);var ge=xn(m);$n(m,ge,se);break;case 3:case 4:var Ze=W.stateNode.containerInfo,kt=xn(m);Rn(m,kt,Ze);break;default:throw Error(t(161))}}catch(Wt){rl(m,m.return,Wt)}m.flags&=-3}_&4096&&(m.flags&=-4097)}function Ga(m,_,L){K=m,aa(m)}function aa(m,_,L){for(var W=(m.mode&1)!==0;K!==null;){var se=K,ge=se.child;if(se.tag===22&&W){var Ze=se.memoizedState!==null||y;if(!Ze){var kt=se.alternate,Wt=kt!==null&&kt.memoizedState!==null||O;kt=y;var Cn=O;if(y=Ze,(O=Wt)&&!Cn)for(K=se;K!==null;)Ze=K,Wt=Ze.child,Ze.tag===22&&Ze.memoizedState!==null?ka(se):Wt!==null?(Wt.return=Ze,K=Wt):ka(se);for(;ge!==null;)K=ge,aa(ge),ge=ge.sibling;K=se,y=kt,O=Cn}Ca(m)}else se.subtreeFlags&8772&&ge!==null?(ge.return=se,K=ge):Ca(m)}}function Ca(m){for(;K!==null;){var _=K;if(_.flags&8772){var L=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:O||ht(5,_);break;case 1:var W=_.stateNode;if(_.flags&4&&!O)if(L===null)W.componentDidMount();else{var se=_.elementType===_.type?L.memoizedProps:Na(_.type,L.memoizedProps);W.componentDidUpdate(se,L.memoizedState,W.__reactInternalSnapshotBeforeUpdate)}var ge=_.updateQueue;ge!==null&&j(_,ge,W);break;case 3:var Ze=_.updateQueue;if(Ze!==null){if(L=null,_.child!==null)switch(_.child.tag){case 5:L=_.child.stateNode;break;case 1:L=_.child.stateNode}j(_,Ze,L)}break;case 5:var kt=_.stateNode;if(L===null&&_.flags&4){L=kt;var Wt=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Wt.autoFocus&&L.focus();break;case"img":Wt.src&&(L.src=Wt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var Cn=_.alternate;if(Cn!==null){var or=Cn.memoizedState;if(or!==null){var Ar=or.dehydrated;Ar!==null&&Pi(Ar)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}O||_.flags&512&&xt(_)}catch(Vn){rl(_,_.return,Vn)}}if(_===m){K=null;break}if(L=_.sibling,L!==null){L.return=_.return,K=L;break}K=_.return}}function ba(m){for(;K!==null;){var _=K;if(_===m){K=null;break}var L=_.sibling;if(L!==null){L.return=_.return,K=L;break}K=_.return}}function ka(m){for(;K!==null;){var _=K;try{switch(_.tag){case 0:case 11:case 15:var L=_.return;try{ht(4,_)}catch(Wt){rl(_,L,Wt)}break;case 1:var W=_.stateNode;if(typeof W.componentDidMount=="function"){var se=_.return;try{W.componentDidMount()}catch(Wt){rl(_,se,Wt)}}var ge=_.return;try{xt(_)}catch(Wt){rl(_,ge,Wt)}break;case 5:var Ze=_.return;try{xt(_)}catch(Wt){rl(_,Ze,Wt)}}}catch(Wt){rl(_,_.return,Wt)}if(_===m){K=null;break}var kt=_.sibling;if(kt!==null){kt.return=_.return,K=kt;break}K=_.return}}var Yl=Math.ceil,Wa=X.ReactCurrentDispatcher,xa=X.ReactCurrentOwner,ds=X.ReactCurrentBatchConfig,yi=0,Zo=null,la=null,fa=0,Is=0,Kl=Ea(0),Po=0,Ph=null,yl=0,PA=0,Xc=0,vl=null,_l=null,hf=0,Nf=1/0,Rd=null,df=!1,$m=null,ff=null,Vm=!1,pf=null,RA=0,dm=0,F0=null,fm=-1,Gf=0;function hA(){return yi&6?ao():fm!==-1?fm:fm=ao()}function Kd(m){return m.mode&1?yi&2&&fa!==0?fa&-fa:Os.transition!==null?(Gf===0&&(Gf=Ha()),Gf):(m=Dr,m!==0||(m=window.event,m=m===void 0?16:hi(m.type)),m):1}function Jc(m,_,L,W){if(50<dm)throw dm=0,F0=null,Error(t(185));ca(m,L,W),(!(yi&2)||m!==Zo)&&(m===Zo&&(!(yi&2)&&(PA|=L),Po===4&&mf(m,fa)),sc(m,W),L===1&&yi===0&&!(_.mode&1)&&(Nf=ao()+500,bh&&AA()))}function sc(m,_){var L=m.callbackNode;ri(m,_);var W=js(m,m===Zo?fa:0);if(W===0)L!==null&&ts(L),m.callbackNode=null,m.callbackPriority=0;else if(_=W&-W,m.callbackPriority!==_){if(L!=null&&ts(L),_===1)m.tag===0?nc(Wg.bind(null,m)):MA(Wg.bind(null,m)),gh(function(){!(yi&6)&&AA()}),L=null;else{switch(Ei(W)){case 1:L=tu;break;case 4:L=so;break;case 16:L=Kr;break;case 536870912:L=Ts;break;default:L=Kr}L=Op(L,Wf.bind(null,m))}m.callbackPriority=_,m.callbackNode=L}}function Wf(m,_){if(fm=-1,Gf=0,yi&6)throw Error(t(327));var L=m.callbackNode;if(Bp()&&m.callbackNode!==L)return null;var W=js(m,m===Zo?fa:0);if(W===0)return null;if(W&30||W&m.expiredLanes||_)_=Qa(m,W);else{_=W;var se=yi;yi|=2;var ge=Xm();(Zo!==m||fa!==_)&&(Rd=null,Nf=ao()+500,Rh(m,_));do try{Wy();break}catch(kt){j0(m,kt)}while(!0);wu(),Wa.current=ge,yi=se,la!==null?_=0:(Zo=null,fa=0,_=Po)}if(_!==0){if(_===2&&(se=wi(m),se!==0&&(W=se,_=U0(m,se))),_===1)throw L=Ph,Rh(m,0),mf(m,W),sc(m,ao()),L;if(_===6)mf(m,W);else{if(se=m.current.alternate,!(W&30)&&!Gy(se)&&(_=Qa(m,W),_===2&&(ge=wi(m),ge!==0&&(W=ge,_=U0(m,ge))),_===1))throw L=Ph,Rh(m,0),mf(m,W),sc(m,ao()),L;switch(m.finishedWork=se,m.finishedLanes=W,_){case 0:case 1:throw Error(t(345));case 2:Dd(m,_l,Rd);break;case 3:if(mf(m,W),(W&130023424)===W&&(_=hf+500-ao(),10<_)){if(js(m,0)!==0)break;if(se=m.suspendedLanes,(se&W)!==W){hA(),m.pingedLanes|=m.suspendedLanes&se;break}m.timeoutHandle=hl(Dd.bind(null,m,_l,Rd),_);break}Dd(m,_l,Rd);break;case 4:if(mf(m,W),(W&4194240)===W)break;for(_=m.eventTimes,se=-1;0<W;){var Ze=31-pn(W);ge=1<<Ze,Ze=_[Ze],Ze>se&&(se=Ze),W&=~ge}if(W=se,W=ao()-W,W=(120>W?120:480>W?480:1080>W?1080:1920>W?1920:3e3>W?3e3:4320>W?4320:1960*Yl(W/1960))-W,10<W){m.timeoutHandle=hl(Dd.bind(null,m,_l,Rd),W);break}Dd(m,_l,Rd);break;case 5:Dd(m,_l,Rd);break;default:throw Error(t(329))}}}return sc(m,ao()),m.callbackNode===L?Wf.bind(null,m):null}function U0(m,_){var L=vl;return m.current.memoizedState.isDehydrated&&(Rh(m,_).flags|=256),m=Qa(m,_),m!==2&&(_=_l,_l=L,_!==null&&Hm(_)),m}function Hm(m){_l===null?_l=m:_l.push.apply(_l,m)}function Gy(m){for(var _=m;;){if(_.flags&16384){var L=_.updateQueue;if(L!==null&&(L=L.stores,L!==null))for(var W=0;W<L.length;W++){var se=L[W],ge=se.getSnapshot;se=se.value;try{if(!an(ge(),se))return!1}catch{return!1}}}if(L=_.child,_.subtreeFlags&16384&&L!==null)L.return=_,_=L;else{if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function mf(m,_){for(_&=~Xc,_&=~PA,m.suspendedLanes|=_,m.pingedLanes&=~_,m=m.expirationTimes;0<_;){var L=31-pn(_),W=1<<L;m[L]=-1,_&=~W}}function Wg(m){if(yi&6)throw Error(t(327));Bp();var _=js(m,0);if(!(_&1))return sc(m,ao()),null;var L=Qa(m,_);if(m.tag!==0&&L===2){var W=wi(m);W!==0&&(_=W,L=U0(m,W))}if(L===1)throw L=Ph,Rh(m,0),mf(m,_),sc(m,ao()),L;if(L===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=_,Dd(m,_l,Rd),sc(m,ao()),null}function Zm(m,_){var L=yi;yi|=1;try{return m(_)}finally{yi=L,yi===0&&(Nf=ao()+500,bh&&AA())}}function Qf(m){pf!==null&&pf.tag===0&&!(yi&6)&&Bp();var _=yi;yi|=1;var L=ds.transition,W=Dr;try{if(ds.transition=null,Dr=1,m)return m()}finally{Dr=W,ds.transition=L,yi=_,!(yi&6)&&AA()}}function z0(){Is=Kl.current,Gs(Kl)}function Rh(m,_){m.finishedWork=null,m.finishedLanes=0;var L=m.timeoutHandle;if(L!==-1&&(m.timeoutHandle=-1,JA(L)),la!==null)for(L=la.return;L!==null;){var W=L;switch(xc(W),W.tag){case 1:W=W.type.childContextTypes,W!=null&&tc();break;case 3:qe(),Gs(dr),Gs(Es),Et();break;case 5:At(W);break;case 4:qe();break;case 13:Gs(ot);break;case 19:Gs(ot);break;case 10:_a(W.type._context);break;case 22:case 23:z0()}L=L.return}if(Zo=m,la=m=Kh(m.current,null),fa=Is=_,Po=0,Ph=null,Xc=PA=yl=0,_l=vl=null,cA!==null){for(_=0;_<cA.length;_++)if(L=cA[_],W=L.interleaved,W!==null){L.interleaved=null;var se=W.next,ge=L.pending;if(ge!==null){var Ze=ge.next;ge.next=se,W.next=Ze}L.pending=W}cA=null}return m}function j0(m,_){do{var L=la;try{if(wu(),Tt.current=Eh,vn){for(var W=Pt.memoizedState;W!==null;){var se=W.queue;se!==null&&(se.pending=null),W=W.next}vn=!1}if(zt=0,Ht=tn=Pt=null,_n=!1,gn=0,xa.current=null,L===null||L.return===null){Po=1,Ph=_,la=null;break}e:{var ge=m,Ze=L.return,kt=L,Wt=_;if(_=fa,kt.flags|=32768,Wt!==null&&typeof Wt=="object"&&typeof Wt.then=="function"){var Cn=Wt,or=kt,Ar=or.tag;if(!(or.mode&1)&&(Ar===0||Ar===11||Ar===15)){var Vn=or.alternate;Vn?(or.updateQueue=Vn.updateQueue,or.memoizedState=Vn.memoizedState,or.lanes=Vn.lanes):(or.updateQueue=null,or.memoizedState=null)}var Ur=wp(Ze);if(Ur!==null){Ur.flags&=-257,Oh(Ur,Ze,kt,ge,_),Ur.mode&1&&zf(ge,Cn,_),_=Ur,Wt=Cn;var ii=_.updateQueue;if(ii===null){var li=new Set;li.add(Wt),_.updateQueue=li}else ii.add(Wt);break e}else{if(!(_&1)){zf(ge,Cn,_),Jm();break e}Wt=Error(t(426))}}else if(hr&&kt.mode&1){var il=wp(Ze);if(il!==null){!(il.flags&65536)&&(il.flags|=256),Oh(il,Ze,kt,ge,_),To(oc(Wt,kt));break e}}ge=Wt=oc(Wt,kt),Po!==4&&(Po=2),vl===null?vl=[ge]:vl.push(ge),ge=Ze;do{switch(ge.tag){case 3:ge.flags|=65536,_&=-_,ge.lanes|=_;var ln=sd(ge,Wt,_);M(ge,ln);break e;case 1:kt=Wt;var Jt=ge.type,cn=ge.stateNode;if(!(ge.flags&128)&&(typeof Jt.getDerivedStateFromError=="function"||cn!==null&&typeof cn.componentDidCatch=="function"&&(ff===null||!ff.has(cn)))){ge.flags|=65536,_&=-_,ge.lanes|=_;var mr=Uf(ge,kt,_);M(ge,mr);break e}}ge=ge.return}while(ge!==null)}e0(L)}catch(ni){_=ni,la===L&&L!==null&&(la=L=L.return);continue}break}while(!0)}function Xm(){var m=Wa.current;return Wa.current=Eh,m===null?Eh:m}function Jm(){(Po===0||Po===3||Po===2)&&(Po=4),Zo===null||!(yl&268435455)&&!(PA&268435455)||mf(Zo,fa)}function Qa(m,_){var L=yi;yi|=2;var W=Xm();(Zo!==m||fa!==_)&&(Rd=null,Rh(m,_));do try{N0();break}catch(se){j0(m,se)}while(!0);if(wu(),yi=L,Wa.current=W,la!==null)throw Error(t(261));return Zo=null,fa=0,Po}function N0(){for(;la!==null;)G0(la)}function Wy(){for(;la!==null&&!Aa();)G0(la)}function G0(m){var _=Ld(m.alternate,m,Is);m.memoizedProps=m.pendingProps,_===null?e0(m):la=_,xa.current=null}function e0(m){var _=m;do{var L=_.alternate;if(m=_.return,_.flags&32768){if(L=A(L,_),L!==null){L.flags&=32767,la=L;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Po=6,la=null;return}}else if(L=Ep(L,_,Is),L!==null){la=L;return}if(_=_.sibling,_!==null){la=_;return}la=_=m}while(_!==null);Po===0&&(Po=5)}function Dd(m,_,L){var W=Dr,se=ds.transition;try{ds.transition=null,Dr=1,Qy(m,_,L,W)}finally{ds.transition=se,Dr=W}return null}function Qy(m,_,L,W){do Bp();while(pf!==null);if(yi&6)throw Error(t(327));L=m.finishedWork;var se=m.finishedLanes;if(L===null)return null;if(m.finishedWork=null,m.finishedLanes=0,L===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var ge=L.lanes|L.childLanes;if(iA(m,ge),m===Zo&&(la=Zo=null,fa=0),!(L.subtreeFlags&2064)&&!(L.flags&2064)||Vm||(Vm=!0,Op(Kr,function(){return Bp(),null})),ge=(L.flags&15990)!==0,L.subtreeFlags&15990||ge){ge=ds.transition,ds.transition=null;var Ze=Dr;Dr=1;var kt=yi;yi|=4,xa.current=null,Be(m,L),Ji(L,m),vp(Nl),Se=!!XA,Nl=XA=null,m.current=L,Ga(L),Al(),yi=kt,Dr=Ze,ds.transition=ge}else m.current=L;if(Vm&&(Vm=!1,pf=m,RA=se),ge=m.pendingLanes,ge===0&&(ff=null),Ct(L.stateNode),sc(m,ao()),_!==null)for(W=m.onRecoverableError,L=0;L<_.length;L++)se=_[L],W(se.value,{componentStack:se.stack,digest:se.digest});if(df)throw df=!1,m=$m,$m=null,m;return RA&1&&m.tag!==0&&Bp(),ge=m.pendingLanes,ge&1?m===F0?dm++:(dm=0,F0=m):dm=0,AA(),null}function Bp(){if(pf!==null){var m=Ei(RA),_=ds.transition,L=Dr;try{if(ds.transition=null,Dr=16>m?16:m,pf===null)var W=!1;else{if(m=pf,pf=null,RA=0,yi&6)throw Error(t(331));var se=yi;for(yi|=4,K=m.current;K!==null;){var ge=K,Ze=ge.child;if(K.flags&16){var kt=ge.deletions;if(kt!==null){for(var Wt=0;Wt<kt.length;Wt++){var Cn=kt[Wt];for(K=Cn;K!==null;){var or=K;switch(or.tag){case 0:case 11:case 15:Fe(8,or,ge)}var Ar=or.child;if(Ar!==null)Ar.return=or,K=Ar;else for(;K!==null;){or=K;var Vn=or.sibling,Ur=or.return;if(Xt(or),or===Cn){K=null;break}if(Vn!==null){Vn.return=Ur,K=Vn;break}K=Ur}}}var ii=ge.alternate;if(ii!==null){var li=ii.child;if(li!==null){ii.child=null;do{var il=li.sibling;li.sibling=null,li=il}while(li!==null)}}K=ge}}if(ge.subtreeFlags&2064&&Ze!==null)Ze.return=ge,K=Ze;else e:for(;K!==null;){if(ge=K,ge.flags&2048)switch(ge.tag){case 0:case 11:case 15:Fe(9,ge,ge.return)}var ln=ge.sibling;if(ln!==null){ln.return=ge.return,K=ln;break e}K=ge.return}}var Jt=m.current;for(K=Jt;K!==null;){Ze=K;var cn=Ze.child;if(Ze.subtreeFlags&2064&&cn!==null)cn.return=Ze,K=cn;else e:for(Ze=Jt;K!==null;){if(kt=K,kt.flags&2048)try{switch(kt.tag){case 0:case 11:case 15:ht(9,kt)}}catch(ni){rl(kt,kt.return,ni)}if(kt===Ze){K=null;break e}var mr=kt.sibling;if(mr!==null){mr.return=kt.return,K=mr;break e}K=kt.return}}if(yi=se,AA(),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(ia,m)}catch{}W=!0}return W}finally{Dr=L,ds.transition=_}}return!1}function t0(m,_,L){_=oc(L,_),_=sd(m,_,1),m=c(m,_,1),_=hA(),m!==null&&(ca(m,1,_),sc(m,_))}function rl(m,_,L){if(m.tag===3)t0(m,m,L);else for(;_!==null;){if(_.tag===3){t0(_,m,L);break}else if(_.tag===1){var W=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof W.componentDidCatch=="function"&&(ff===null||!ff.has(W))){m=oc(L,m),m=Uf(_,m,1),_=c(_,m,1),m=hA(),_!==null&&(ca(_,1,m),sc(_,m));break}}_=_.return}}function Qg(m,_,L){var W=m.pingCache;W!==null&&W.delete(_),_=hA(),m.pingedLanes|=m.suspendedLanes&L,Zo===m&&(fa&L)===L&&(Po===4||Po===3&&(fa&130023424)===fa&&500>ao()-hf?Rh(m,0):Xc|=L),sc(m,_)}function dA(m,_){_===0&&(m.mode&1?(_=ho,ho<<=1,!(ho&130023424)&&(ho=4194304)):_=1);var L=hA();m=Yu(m,_),m!==null&&(ca(m,_,L),sc(m,L))}function W0(m){var _=m.memoizedState,L=0;_!==null&&(L=_.retryLane),dA(m,L)}function qg(m,_){var L=0;switch(m.tag){case 13:var W=m.stateNode,se=m.memoizedState;se!==null&&(L=se.retryLane);break;case 19:W=m.stateNode;break;default:throw Error(t(314))}W!==null&&W.delete(_),dA(m,L)}var Ld;Ld=function(m,_,L){if(m!==null)if(m.memoizedProps!==_.pendingProps||dr.current)ql=!0;else{if(!(m.lanes&L)&&!(_.flags&128))return ql=!1,Ym(m,_,L);ql=!!(m.flags&131072)}else ql=!1,hr&&_.flags&1048576&&nd(_,Cu,_.index);switch(_.lanes=0,_.tag){case 2:var W=_.type;Sp(m,_),m=_.pendingProps;var se=Vc(_,Es.current);au(_,L),se=kr(null,_,W,m,se,L);var ge=Bi();return _.flags|=1,typeof se=="object"&&se!==null&&typeof se.render=="function"&&se.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Ba(W)?(ge=!0,Mi(_)):ge=!1,_.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,wh(_),se.updater=kd,_.stateNode=se,se._reactInternals=_,um(_,W,m,L),_=Pd(null,_,W,!0,ge,L)):(_.tag=0,hr&&ge&&SA(_),Rl(null,_,se,L),_=_.child),_;case 16:W=_.elementType;e:{switch(Sp(m,_),m=_.pendingProps,se=W._init,W=se(W._payload),_.type=W,se=_.tag=n0(W),m=Na(W,m),se){case 0:_=Ih(null,_,W,m,L);break e;case 1:_=TA(null,_,W,m,L);break e;case 11:_=Am(null,_,W,m,L);break e;case 14:_=jf(null,_,W,Na(W.type,m),L);break e}throw Error(t(306,W,""))}return _;case 0:return W=_.type,se=_.pendingProps,se=_.elementType===W?se:Na(W,se),Ih(m,_,W,se,L);case 1:return W=_.type,se=_.pendingProps,se=_.elementType===W?se:Na(W,se),TA(m,_,W,se,L);case 3:e:{if(Mp(_),m===null)throw Error(t(387));W=_.pendingProps,ge=_.memoizedState,se=ge.element,T(m,_),R(_,W,null,L);var Ze=_.memoizedState;if(W=Ze.element,ge.isDehydrated)if(ge={element:W,isDehydrated:!1,cache:Ze.cache,pendingSuspenseBoundaries:Ze.pendingSuspenseBoundaries,transitions:Ze.transitions},_.updateQueue.baseState=ge,_.memoizedState=ge,_.flags&256){se=oc(Error(t(423)),_),_=Oc(m,_,W,L,se);break e}else if(W!==se){se=oc(Error(t(424)),_),_=Oc(m,_,W,L,se);break e}else for(ha=ec(_.stateNode.containerInfo.firstChild),gs=_,hr=!0,Hr=null,L=wc(_,null,W,L),_.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(xu(),W===se){_=Su(m,_,L);break e}Rl(m,_,W,L)}_=_.child}return _;case 5:return Ve(_),m===null&&Cs(_),W=_.type,se=_.pendingProps,ge=m!==null?m.memoizedProps:null,Ze=se.children,xA(W,se)?Ze=null:ge!==null&&xA(W,ge)&&(_.flags|=32),lf(m,_),Rl(m,_,Ze,L),_.child;case 6:return m===null&&Cs(_),null;case 13:return ad(m,_,L);case 4:return Ie(_,_.stateNode.containerInfo),W=_.pendingProps,m===null?_.child=Ws(_,null,W,L):Rl(m,_,W,L),_.child;case 11:return W=_.type,se=_.pendingProps,se=_.elementType===W?se:Na(W,se),Am(m,_,W,se,L);case 7:return Rl(m,_,_.pendingProps,L),_.child;case 8:return Rl(m,_,_.pendingProps.children,L),_.child;case 12:return Rl(m,_,_.pendingProps.children,L),_.child;case 10:e:{if(W=_.type._context,se=_.pendingProps,ge=_.memoizedProps,Ze=se.value,_s(Wl,W._currentValue),W._currentValue=Ze,ge!==null)if(an(ge.value,Ze)){if(ge.children===se.children&&!dr.current){_=Su(m,_,L);break e}}else for(ge=_.child,ge!==null&&(ge.return=_);ge!==null;){var kt=ge.dependencies;if(kt!==null){Ze=ge.child;for(var Wt=kt.firstContext;Wt!==null;){if(Wt.context===W){if(ge.tag===1){Wt=l(-1,L&-L),Wt.tag=2;var Cn=ge.updateQueue;if(Cn!==null){Cn=Cn.shared;var or=Cn.pending;or===null?Wt.next=Wt:(Wt.next=or.next,or.next=Wt),Cn.pending=Wt}}ge.lanes|=L,Wt=ge.alternate,Wt!==null&&(Wt.lanes|=L),Xs(ge.return,L,_),kt.lanes|=L;break}Wt=Wt.next}}else if(ge.tag===10)Ze=ge.type===_.type?null:ge.child;else if(ge.tag===18){if(Ze=ge.return,Ze===null)throw Error(t(341));Ze.lanes|=L,kt=Ze.alternate,kt!==null&&(kt.lanes|=L),Xs(Ze,L,_),Ze=ge.sibling}else Ze=ge.child;if(Ze!==null)Ze.return=ge;else for(Ze=ge;Ze!==null;){if(Ze===_){Ze=null;break}if(ge=Ze.sibling,ge!==null){ge.return=Ze.return,Ze=ge;break}Ze=Ze.return}ge=Ze}Rl(m,_,se.children,L),_=_.child}return _;case 9:return se=_.type,W=_.pendingProps.children,au(_,L),se=lu(se),W=W(se),_.flags|=1,Rl(m,_,W,L),_.child;case 14:return W=_.type,se=Na(W,_.pendingProps),se=Na(W.type,se),jf(m,_,W,se,L);case 15:return Oo(m,_,_.type,_.pendingProps,L);case 17:return W=_.type,se=_.pendingProps,se=_.elementType===W?se:Na(W,se),Sp(m,_),_.tag=1,Ba(W)?(m=!0,Mi(_)):m=!1,au(_,L),od(_,W,se),um(_,W,se,L),Pd(null,_,W,!0,m,L);case 19:return Th(m,_,L);case 22:return Hu(m,_,L)}throw Error(t(156,_.tag))};function Op(m,_){return ul(m,_)}function pm(m,_,L,W){this.tag=m,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=W,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zu(m,_,L,W){return new pm(m,_,L,W)}function qf(m){return m=m.prototype,!(!m||!m.isReactComponent)}function n0(m){if(typeof m=="function")return qf(m)?1:0;if(m!=null){if(m=m.$$typeof,m===pe)return 11;if(m===de)return 14}return 2}function Kh(m,_){var L=m.alternate;return L===null?(L=Zu(m.tag,_,m.key,m.mode),L.elementType=m.elementType,L.type=m.type,L.stateNode=m.stateNode,L.alternate=m,m.alternate=L):(L.pendingProps=_,L.type=m.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=m.flags&14680064,L.childLanes=m.childLanes,L.lanes=m.lanes,L.child=m.child,L.memoizedProps=m.memoizedProps,L.memoizedState=m.memoizedState,L.updateQueue=m.updateQueue,_=m.dependencies,L.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},L.sibling=m.sibling,L.index=m.index,L.ref=m.ref,L}function r0(m,_,L,W,se,ge){var Ze=2;if(W=m,typeof m=="function")qf(m)&&(Ze=1);else if(typeof m=="string")Ze=5;else e:switch(m){case N:return gf(L.children,se,ge,_);case ie:Ze=8,se|=8;break;case he:return m=Zu(12,L,_,se|2),m.elementType=he,m.lanes=ge,m;case Ce:return m=Zu(13,L,_,se),m.elementType=Ce,m.lanes=ge,m;case Pe:return m=Zu(19,L,_,se),m.elementType=Pe,m.lanes=ge,m;case ze:return mm(L,se,ge,_);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case ce:Ze=10;break e;case we:Ze=9;break e;case pe:Ze=11;break e;case de:Ze=14;break e;case rt:Ze=16,W=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return _=Zu(Ze,L,_,se),_.elementType=m,_.type=W,_.lanes=ge,_}function gf(m,_,L,W){return m=Zu(7,m,W,_),m.lanes=L,m}function mm(m,_,L,W){return m=Zu(22,m,W,_),m.elementType=ze,m.lanes=L,m.stateNode={isHidden:!1},m}function Q0(m,_,L){return m=Zu(6,m,null,_),m.lanes=L,m}function i0(m,_,L){return _=Zu(4,m.children!==null?m.children:[],m.key,_),_.lanes=L,_.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},_}function Yg(m,_,L,W,se){this.tag=_,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ci(0),this.expirationTimes=ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.identifierPrefix=W,this.onRecoverableError=se,this.mutableSourceEagerHydrationData=null}function gm(m,_,L,W,se,ge,Ze,kt,Wt){return m=new Yg(m,_,L,kt,Wt),_===1?(_=1,ge===!0&&(_|=8)):_=0,ge=Zu(3,null,null,_),m.current=ge,ge.stateNode=m,ge.memoizedState={element:W,isDehydrated:L,cache:null,transitions:null,pendingSuspenseBoundaries:null},wh(ge),m}function q0(m,_,L){var W=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:W==null?null:""+W,children:m,containerInfo:_,implementation:L}}function $g(m){if(!m)return uA;m=m._reactInternals;e:{if(ji(m)!==m||m.tag!==1)throw Error(t(170));var _=m;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Ba(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(t(171))}if(m.tag===1){var L=m.type;if(Ba(L))return _h(m,L,_)}return _}function Vg(m,_,L,W,se,ge,Ze,kt,Wt){return m=gm(L,W,!0,m,se,ge,Ze,kt,Wt),m.context=$g(null),L=m.current,W=hA(),se=Kd(L),ge=l(W,se),ge.callback=_??null,c(L,ge,se),m.current.lanes=se,ca(m,se,W),sc(m,W),m}function ym(m,_,L,W){var se=_.current,ge=hA(),Ze=Kd(se);return L=$g(L),_.context===null?_.context=L:_.pendingContext=L,_=l(ge,Ze),_.payload={element:m},W=W===void 0?null:W,W!==null&&(_.callback=W),m=c(se,_,Ze),m!==null&&(Jc(m,se,Ze,ge),C(m,se,Ze)),Ze}function vm(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function Ip(m,_){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var L=m.retryLane;m.retryLane=L!==0&&L<_?L:_}}function eh(m,_){Ip(m,_),(m=m.alternate)&&Ip(m,_)}var Fd=typeof reportError=="function"?reportError:function(m){console.error(m)};function o0(m){this._internalRoot=m}Yf.prototype.render=o0.prototype.render=function(m){var _=this._internalRoot;if(_===null)throw Error(t(409));ym(m,_,null,null)},Yf.prototype.unmount=o0.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var _=m.containerInfo;Qf(function(){ym(null,m,null,null)}),_[_u]=null}};function Yf(m){this._internalRoot=m}Yf.prototype.unstable_scheduleHydration=function(m){if(m){var _=Ns();m={blockedOn:null,target:m,priority:_};for(var L=0;L<Rs.length&&_!==0&&_<Rs[L].priority;L++);Rs.splice(L,0,m),L===0&&Fi(m)}};function s0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function a0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function _m(){}function Y0(m,_,L,W,se){if(se){if(typeof W=="function"){var ge=W;W=function(){var Cn=vm(Ze);ge.call(Cn)}}var Ze=Vg(_,W,m,0,null,!1,!1,"",_m);return m._reactRootContainer=Ze,m[_u]=Ze.current,Fu(m.nodeType===8?m.parentNode:m),Qf(),Ze}for(;se=m.lastChild;)m.removeChild(se);if(typeof W=="function"){var kt=W;W=function(){var Cn=vm(Wt);kt.call(Cn)}}var Wt=gm(m,0,!1,null,null,!1,!1,"",_m);return m._reactRootContainer=Wt,m[_u]=Wt.current,Fu(m.nodeType===8?m.parentNode:m),Qf(function(){ym(_,Wt,L,W)}),Wt}function l0(m,_,L,W,se){var ge=L._reactRootContainer;if(ge){var Ze=ge;if(typeof se=="function"){var kt=se;se=function(){var Wt=vm(Ze);kt.call(Wt)}}ym(_,Ze,m,se)}else Ze=Y0(L,_,m,se,W);return vm(Ze)}Za=function(m){switch(m.tag){case 3:var _=m.stateNode;if(_.current.memoizedState.isDehydrated){var L=vs(_.pendingLanes);L!==0&&(ls(_,L|1),sc(_,ao()),!(yi&6)&&(Nf=ao()+500,AA()))}break;case 13:Qf(function(){var W=Yu(m,1);if(W!==null){var se=hA();Jc(W,m,1,se)}}),eh(m,1)}},Ps=function(m){if(m.tag===13){var _=Yu(m,134217728);if(_!==null){var L=hA();Jc(_,m,134217728,L)}eh(m,134217728)}},Mo=function(m){if(m.tag===13){var _=Kd(m),L=Yu(m,_);if(L!==null){var W=hA();Jc(L,m,_,W)}eh(m,_)}},Ns=function(){return Dr},du=function(m,_){var L=Dr;try{return Dr=m,_()}finally{Dr=L}},dt=function(m,_,L){switch(_){case"input":if(Sn(m,L),_=L.name,L.type==="radio"&&_!=null){for(L=m;L.parentNode;)L=L.parentNode;for(L=L.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<L.length;_++){var W=L[_];if(W!==m&&W.form===m.form){var se=Ss(W);if(!se)throw Error(t(90));Mt(W),Sn(W,se)}}}break;case"textarea":Mr(m,L);break;case"select":_=L.value,_!=null&&fr(m,!!L.multiple,_,!1)}},Gt=Zm,bt=Qf;var kp={usingClientEntryPoint:!1,Events:[Ri,$r,Ss,rn,Zt,Zm]},$f={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tp={bundleType:$f.bundleType,version:$f.version,rendererPackageName:$f.rendererPackageName,rendererConfig:$f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=Ni(m),m===null?null:m.stateNode},findFiberByHostInstance:$f.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cm.isDisabled&&Cm.supportsFiber)try{ia=Cm.inject(Tp),We=Cm}catch{}}return hd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kp,hd.createPortal=function(m,_){var L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s0(_))throw Error(t(200));return q0(m,_,null,L)},hd.createRoot=function(m,_){if(!s0(m))throw Error(t(299));var L=!1,W="",se=Fd;return _!=null&&(_.unstable_strictMode===!0&&(L=!0),_.identifierPrefix!==void 0&&(W=_.identifierPrefix),_.onRecoverableError!==void 0&&(se=_.onRecoverableError)),_=gm(m,1,!1,null,null,L,!1,W,se),m[_u]=_.current,Fu(m.nodeType===8?m.parentNode:m),new o0(_)},hd.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var _=m._reactInternals;if(_===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=Ni(_),m=m===null?null:m.stateNode,m},hd.flushSync=function(m){return Qf(m)},hd.hydrate=function(m,_,L){if(!a0(_))throw Error(t(200));return l0(null,m,_,!0,L)},hd.hydrateRoot=function(m,_,L){if(!s0(m))throw Error(t(405));var W=L!=null&&L.hydratedSources||null,se=!1,ge="",Ze=Fd;if(L!=null&&(L.unstable_strictMode===!0&&(se=!0),L.identifierPrefix!==void 0&&(ge=L.identifierPrefix),L.onRecoverableError!==void 0&&(Ze=L.onRecoverableError)),_=Vg(_,null,m,1,L??null,se,!1,ge,Ze),m[_u]=_.current,Fu(m),W)for(m=0;m<W.length;m++)L=W[m],se=L._getVersion,se=se(L._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[L,se]:_.mutableSourceEagerHydrationData.push(L,se);return new Yf(_)},hd.render=function(m,_,L){if(!a0(_))throw Error(t(200));return l0(null,m,_,!1,L)},hd.unmountComponentAtNode=function(m){if(!a0(m))throw Error(t(40));return m._reactRootContainer?(Qf(function(){l0(null,null,m,!1,function(){m._reactRootContainer=null,m[_u]=null})}),!0):!1},hd.unstable_batchedUpdates=Zm,hd.unstable_renderSubtreeIntoContainer=function(m,_,L,W){if(!a0(L))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return l0(m,_,L,!1,W)},hd.version="18.3.1-next-f1338f8080-20240426",hd}var WI;function O_(){if(WI)return k3.exports;WI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),k3.exports=AW(),k3.exports}var QI;function cW(){if(QI)return BC;QI=1;var n=O_();return BC.createRoot=n.createRoot,BC.hydrateRoot=n.hydrateRoot,BC}var hW=cW();const dW="modulepreload",fW=function(n){return"/maputnik/"+n},qI={},tv=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(h=>{if(h=fW(h),h in qI)return;qI[h]=!0;const g=h.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const B=document.createElement("link");if(B.rel=g?"stylesheet":dW,g||(B.as="script"),B.crossOrigin="",B.href=h,s&&B.setAttribute("nonce",s),document.head.appendChild(B),g)return new Promise((S,I)=>{B.addEventListener("load",S),B.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})},pW=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},wo=n=>typeof n=="string",nv=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},YI=n=>n==null?"":""+n,mW=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},gW=/###/g,$I=n=>n&&n.indexOf("###")>-1?n.replace(gW,"."):n,VI=n=>!n||wo(n),Lv=(n,e,t)=>{const r=wo(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(VI(n))return{};const o=$I(r[i]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++i}return VI(n)?{}:{obj:n,k:$I(r[i])}},HI=(n,e,t)=>{const{obj:r,k:i}=Lv(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let o=e[e.length-1],a=e.slice(0,e.length-1),s=Lv(n,a,Object);for(;s.obj===void 0&&a.length;)o=`${a[a.length-1]}.${o}`,a=a.slice(0,a.length-1),s=Lv(n,a,Object),s!=null&&s.obj&&typeof s.obj[`${s.k}.${o}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${o}`]=t},yW=(n,e,t,r)=>{const{obj:i,k:o}=Lv(n,e,Object);i[o]=i[o]||[],i[o].push(t)},Db=(n,e)=>{const{obj:t,k:r}=Lv(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},vW=(n,e,t)=>{const r=Db(n,t);return r!==void 0?r:Db(e,t)},sL=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?wo(n[r])||n[r]instanceof String||wo(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):sL(n[r],e[r],t):n[r]=e[r]);return n},n1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const CW=n=>wo(n)?n.replace(/[&<>"'\/]/g,e=>_W[e]):n;class bW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const xW=[" ",",","?","!",";"],wW=new bW(20),MW=(n,e,t)=>{e=e||"",t=t||"";const r=xW.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const i=wW.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let o=!i.test(n);if(!o){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(o=!0)}return o},RE=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let a,s="";for(let h=o;h<r.length;++h)if(h!==o&&(s+=t),s+=r[h],a=i[s],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&h<r.length-1)continue;o+=h-o+1;break}i=a}return i},Lb=n=>n==null?void 0:n.replace("_","-"),SW={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class Fb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||SW,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(wo(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Fb(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Fb(this.logger,e)}}var Qp=new Fb;class $2{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[s,h]=a;for(let g=0;g<h;g++)s(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[s,h]=a;for(let g=0;g<h;g++)s.apply(s,[e,...r])})}}class ZI extends $2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var g,b;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,t],r&&(Array.isArray(r)?s.push(...r):wo(r)&&o?s.push(...r.split(o)):s.push(r)));const h=Db(this.data,s);return!h&&!t&&!r&&e.indexOf(".")>-1&&(e=s[0],t=s[1],r=s.slice(2).join(".")),h||!a||!wo(r)?h:RE((b=(g=this.data)==null?void 0:g[e])==null?void 0:b[t],r,o)}addResource(e,t,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let s=[e,t];r&&(s=s.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(s=e.split("."),i=t,t=s[1]),this.addNamespaces(t),HI(this.data,s,i),o.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in r)(wo(r[o])||Array.isArray(r[o]))&&this.addResource(e,t,o,r[o],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,o){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),i=r,r=t,t=s[1]),this.addNamespaces(t);let h=Db(this.data,s)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?sL(h,r,o):h={...h,...r},HI(this.data,s,h),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var aL={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(o=>{var a;e=((a=this.processors[o])==null?void 0:a.process(e,t,r,i))??e}),e}};const XI={};class Ub extends $2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),mW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Qp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!MW(e,r,i);if(a&&!s){const h=e.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:e,namespaces:wo(o)?[o]:o};const g=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(g[0])>-1)&&(o=g.shift()),e=g.join(i)}return{key:e,namespaces:wo(o)?[o]:o}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,o=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:s}=this.extractFromKey(e[e.length-1],t),h=s[s.length-1],g=t.lng||this.language,b=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode"){if(b){const X=t.nsSeparator||this.options.nsSeparator;return i?{res:`${h}${X}${a}`,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(t)}:`${h}${X}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(t)}:a}const B=this.resolve(e,t);let S=B==null?void 0:B.res;const I=(B==null?void 0:B.usedKey)||a,k=(B==null?void 0:B.exactUsedKey)||a,U=Object.prototype.toString.apply(S),z=["[object Number]","[object Function]","[object RegExp]"],Y=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,Q=!this.i18nFormat||this.i18nFormat.handleAsObject,ne=!wo(S)&&typeof S!="boolean"&&typeof S!="number";if(Q&&S&&ne&&z.indexOf(U)<0&&!(wo(Y)&&Array.isArray(S))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const X=this.options.returnedObjectHandler?this.options.returnedObjectHandler(I,S,{...t,ns:s}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(B.res=X,B.usedParams=this.getUsedParamsDetails(t),B):X}if(o){const X=Array.isArray(S),q=X?[]:{},J=X?k:I;for(const N in S)if(Object.prototype.hasOwnProperty.call(S,N)){const ie=`${J}${o}${N}`;q[N]=this.translate(ie,{...t,joinArrays:!1,ns:s}),q[N]===ie&&(q[N]=S[N])}S=q}}else if(Q&&wo(Y)&&Array.isArray(S))S=S.join(Y),S&&(S=this.extendTranslation(S,e,t,r));else{let X=!1,q=!1;const J=t.count!==void 0&&!wo(t.count),N=Ub.hasDefaultValue(t),ie=J?this.pluralResolver.getSuffix(g,t.count,t):"",he=t.ordinal&&J?this.pluralResolver.getSuffix(g,t.count,{ordinal:!1}):"",ce=J&&!t.ordinal&&t.count===0,we=ce&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${ie}`]||t[`defaultValue${he}`]||t.defaultValue;!this.isValidLookup(S)&&N&&(X=!0,S=we),this.isValidLookup(S)||(q=!0,S=a);const Ce=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&q?void 0:S,Pe=N&&we!==S&&this.options.updateMissing;if(q||X||Pe){if(this.logger.log(Pe?"updateKey":"missingKey",g,h,a,Pe?we:S),o){const Qe=this.resolve(a,{...t,keySeparator:!1});Qe&&Qe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let de=[];const rt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&rt&&rt[0])for(let Qe=0;Qe<rt.length;Qe++)de.push(rt[Qe]);else this.options.saveMissingTo==="all"?de=this.languageUtils.toResolveHierarchy(t.lng||this.language):de.push(t.lng||this.language);const ze=(Qe,ut,Te)=>{var st;const Ue=N&&Te!==S?Te:Ce;this.options.missingKeyHandler?this.options.missingKeyHandler(Qe,h,ut,Ue,Pe,t):(st=this.backendConnector)!=null&&st.saveMissing&&this.backendConnector.saveMissing(Qe,h,ut,Ue,Pe,t),this.emit("missingKey",Qe,h,ut,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&J?de.forEach(Qe=>{const ut=this.pluralResolver.getSuffixes(Qe,t);ce&&t[`defaultValue${this.options.pluralSeparator}zero`]&&ut.indexOf(`${this.options.pluralSeparator}zero`)<0&&ut.push(`${this.options.pluralSeparator}zero`),ut.forEach(Te=>{ze([Qe],a+Te,t[`defaultValue${Te}`]||we)})}):ze(de,a,we))}S=this.extendTranslation(S,e,t,B,r),q&&S===a&&this.options.appendNamespaceToMissingKey&&(S=`${h}:${a}`),(q||X)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}:${a}`:a,X?S:void 0))}return i?(B.res=S,B.usedParams=this.getUsedParamsDetails(t),B):S}extendTranslation(e,t,r,i,o){var g,b;var a=this;if((g=this.i18nFormat)!=null&&g.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const B=wo(e)&&(((b=r==null?void 0:r.interpolation)==null?void 0:b.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let S;if(B){const k=e.match(this.interpolator.nestingRegexp);S=k&&k.length}let I=r.replace&&!wo(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(I={...this.options.interpolation.defaultVariables,...I}),e=this.interpolator.interpolate(e,I,r.lng||this.language||i.usedLng,r),B){const k=e.match(this.interpolator.nestingRegexp),U=k&&k.length;S<U&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var k=arguments.length,U=new Array(k),z=0;z<k;z++)U[z]=arguments[z];return(o==null?void 0:o[0])===U[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${U[0]} in key: ${t[0]}`),null):a.translate(...U,t)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,h=wo(s)?[s]:s;return e!=null&&(h!=null&&h.length)&&r.applyPostProcessor!==!1&&(e=aL.handle(h,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,o,a,s;return wo(e)&&(e=[e]),e.forEach(h=>{if(this.isValidLookup(r))return;const g=this.extractFromKey(h,t),b=g.key;i=b;let B=g.namespaces;this.options.fallbackNS&&(B=B.concat(this.options.fallbackNS));const S=t.count!==void 0&&!wo(t.count),I=S&&!t.ordinal&&t.count===0,k=t.context!==void 0&&(wo(t.context)||typeof t.context=="number")&&t.context!=="",U=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);B.forEach(z=>{var Y,Q;this.isValidLookup(r)||(s=z,!XI[`${U[0]}-${z}`]&&((Y=this.utils)!=null&&Y.hasLoadedNamespace)&&!((Q=this.utils)!=null&&Q.hasLoadedNamespace(s))&&(XI[`${U[0]}-${z}`]=!0,this.logger.warn(`key "${i}" for languages "${U.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),U.forEach(ne=>{var J;if(this.isValidLookup(r))return;a=ne;const X=[b];if((J=this.i18nFormat)!=null&&J.addLookupKeys)this.i18nFormat.addLookupKeys(X,b,ne,z,t);else{let N;S&&(N=this.pluralResolver.getSuffix(ne,t.count,t));const ie=`${this.options.pluralSeparator}zero`,he=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(S&&(X.push(b+N),t.ordinal&&N.indexOf(he)===0&&X.push(b+N.replace(he,this.options.pluralSeparator)),I&&X.push(b+ie)),k){const ce=`${b}${this.options.contextSeparator}${t.context}`;X.push(ce),S&&(X.push(ce+N),t.ordinal&&N.indexOf(he)===0&&X.push(ce+N.replace(he,this.options.pluralSeparator)),I&&X.push(ce+ie))}}let q;for(;q=X.pop();)this.isValidLookup(r)||(o=q,r=this.getResource(ne,z,q,t))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:a,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var o;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!wo(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of t)delete i[o]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class JI{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Qp.create("languageUtils")}getScriptPartFromCode(e){if(e=Lb(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Lb(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(wo(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),wo(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return wo(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):wo(e)&&o(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&o(this.formatLanguageCode(a))}),i}}const e8={zero:0,one:1,two:2,few:3,many:4,other:5},t8={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class EW{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Qp.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Lb(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let a;try{a=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),t8;if(!e.match(/-|_/))return t8;const h=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(h,t)}return this.pluralRulesCache[o]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>e8[i]-e8[o]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const n8=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=vW(n,e,t);return!o&&i&&wo(t)&&(o=RE(n,t,r),o===void 0&&(o=RE(e,t,r))),o},R3=n=>n.replace(/\$/g,"$$$$");class BW{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Qp.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:a,suffix:s,suffixEscaped:h,formatSeparator:g,unescapeSuffix:b,unescapePrefix:B,nestingPrefix:S,nestingPrefixEscaped:I,nestingSuffix:k,nestingSuffixEscaped:U,nestingOptionsSeparator:z,maxReplaces:Y,alwaysFormat:Q}=e.interpolation;this.escape=t!==void 0?t:CW,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?n1(o):a||"{{",this.suffix=s?n1(s):h||"}}",this.formatSeparator=g||",",this.unescapePrefix=b?"":B||"-",this.unescapeSuffix=this.unescapePrefix?"":b||"",this.nestingPrefix=S?n1(S):I||n1("$t("),this.nestingSuffix=k?n1(k):U||n1(")"),this.nestingOptionsSeparator=z||",",this.maxReplaces=Y||1e3,this.alwaysFormat=Q!==void 0?Q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var I;let o,a,s;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=k=>{if(k.indexOf(this.formatSeparator)<0){const Q=n8(t,h,k,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Q,void 0,r,{...i,...t,interpolationkey:k}):Q}const U=k.split(this.formatSeparator),z=U.shift().trim(),Y=U.join(this.formatSeparator).trim();return this.format(n8(t,h,z,this.options.keySeparator,this.options.ignoreJSONStructure),Y,r,{...i,...t,interpolationkey:z})};this.resetRegExp();const b=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,B=((I=i==null?void 0:i.interpolation)==null?void 0:I.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:k=>R3(k)},{regex:this.regexp,safeValue:k=>this.escapeValue?R3(this.escape(k)):R3(k)}].forEach(k=>{for(s=0;o=k.regex.exec(e);){const U=o[1].trim();if(a=g(U),a===void 0)if(typeof b=="function"){const Y=b(e,o,i);a=wo(Y)?Y:""}else if(i&&Object.prototype.hasOwnProperty.call(i,U))a="";else if(B){a=o[0];continue}else this.logger.warn(`missed to pass in variable ${U} for interpolating ${e}`),a="";else!wo(a)&&!this.useRawValueToEscape&&(a=YI(a));const z=k.safeValue(a);if(e=e.replace(o[0],z),B?(k.regex.lastIndex+=a.length,k.regex.lastIndex-=o[0].length):k.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,o,a;const s=(h,g)=>{const b=this.nestingOptionsSeparator;if(h.indexOf(b)<0)return h;const B=h.split(new RegExp(`${b}[ ]*{`));let S=`{${B[1]}`;h=B[0],S=this.interpolate(S,a);const I=S.match(/'/g),k=S.match(/"/g);(((I==null?void 0:I.length)??0)%2===0&&!k||k.length%2!==0)&&(S=S.replace(/'/g,'"'));try{a=JSON.parse(S),g&&(a={...g,...a})}catch(U){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,U),`${h}${b}${S}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,h};for(;i=this.nestingRegexp.exec(e);){let h=[];a={...r},a=a.replace&&!wo(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let g=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const b=i[1].split(this.formatSeparator).map(B=>B.trim());i[1]=b.shift(),h=b,g=!0}if(o=t(s.call(this,i[1].trim(),a),a),o&&i[0]===e&&!wo(o))return o;wo(o)||(o=YI(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),g&&(o=h.reduce((b,B)=>this.format(b,B,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const OW=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[s,...h]=a.split(":"),g=h.join(":").trim().replace(/^'+|'+$/g,""),b=s.trim();t[b]||(t[b]=g),g==="false"&&(t[b]=!1),g==="true"&&(t[b]=!0),isNaN(g)||(t[b]=parseInt(g,10))}})}return{formatName:e,formatOptions:t}},r1=n=>{const e={};return(t,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const a=r+JSON.stringify(o);let s=e[a];return s||(s=n(Lb(r),i),e[a]=s),s(t)}};class IW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Qp.create("formatter"),this.options=e,this.formats={number:r1((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return o=>i.format(o)}),currency:r1((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return o=>i.format(o)}),datetime:r1((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return o=>i.format(o)}),relativetime:r1((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return o=>i.format(o,r.range||"day")}),list:r1((t,r)=>{const i=new Intl.ListFormat(t,{...r});return o=>i.format(o)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=r1(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(s=>s.indexOf(")")>-1)){const s=o.findIndex(h=>h.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,s)].join(this.formatSeparator)}return o.reduce((s,h)=>{var B;const{formatName:g,formatOptions:b}=OW(h);if(this.formats[g]){let S=s;try{const I=((B=i==null?void 0:i.formatParams)==null?void 0:B[i.interpolationkey])||{},k=I.locale||I.lng||i.locale||i.lng||r;S=this.formats[g](s,k,{...b,...i,...I})}catch(I){this.logger.warn(I)}return S}else this.logger.warn(`there was no format function for ${g}`);return s},e)}}const kW=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class TW extends $2{constructor(e,t,r){var o,a;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Qp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(a=(o=this.backend)==null?void 0:o.init)==null||a.call(o,r,i.backend,i)}queueLoad(e,t,r,i){const o={},a={},s={},h={};return e.forEach(g=>{let b=!0;t.forEach(B=>{const S=`${g}|${B}`;!r.reload&&this.store.hasResourceBundle(g,B)?this.state[S]=2:this.state[S]<0||(this.state[S]===1?a[S]===void 0&&(a[S]=!0):(this.state[S]=1,b=!1,a[S]===void 0&&(a[S]=!0),o[S]===void 0&&(o[S]=!0),h[B]===void 0&&(h[B]=!0)))}),b||(s[g]=!0)}),(Object.keys(o).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(a),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(h)}}loaded(e,t,r){const i=e.split("|"),o=i[0],a=i[1];t&&this.emit("failedLoading",o,a,t),!t&&r&&this.store.addResourceBundle(o,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const s={};this.queue.forEach(h=>{yW(h.loaded,[o],a),kW(h,e),t&&h.errors.push(t),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(g=>{s[g]||(s[g]={});const b=h.loaded[g];b.length&&b.forEach(B=>{s[g][B]===void 0&&(s[g][B]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(h=>!h.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:o,callback:a});return}this.readingCalls++;const s=(g,b)=>{if(this.readingCalls--,this.waitingReads.length>0){const B=this.waitingReads.shift();this.read(B.lng,B.ns,B.fcName,B.tried,B.wait,B.callback)}if(g&&b&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,o*2,a)},o);return}a(g,b)},h=this.backend[r].bind(this.backend);if(h.length===2){try{const g=h(e,t);g&&typeof g.then=="function"?g.then(b=>s(null,b)).catch(s):s(null,g)}catch(g){s(g)}return}return h(e,t,s)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();wo(e)&&(e=this.languageUtils.toResolveHierarchy(e)),wo(t)&&(t=[t]);const o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(a,s)=>{a&&this.logger.warn(`${t}loading namespace ${o} for language ${i} failed`,a),!a&&s&&this.logger.log(`${t}loaded namespace ${o} for language ${i}`,s),this.loaded(e,a,s)})}saveMissing(e,t,r,i,o){var h,g,b,B,S;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((g=(h=this.services)==null?void 0:h.utils)!=null&&g.hasLoadedNamespace&&!((B=(b=this.services)==null?void 0:b.utils)!=null&&B.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((S=this.backend)!=null&&S.create){const I={...a,isUpdate:o},k=this.backend.create.bind(this.backend);if(k.length<6)try{let U;k.length===5?U=k(e,t,r,i,I):U=k(e,t,r,i),U&&typeof U.then=="function"?U.then(z=>s(null,z)).catch(s):s(null,U)}catch(U){s(U)}else k(e,t,r,i,s,I)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const r8=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),wo(n[1])&&(e.defaultValue=n[1]),wo(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),i8=n=>{var e,t;return wo(n.ns)&&(n.ns=[n.ns]),wo(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),wo(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},OC=()=>{},PW=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Vv extends $2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=i8(e),this.services={},this.logger=Qp,this.modules={external:[]},PW(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(wo(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=r8();this.options={...i,...this.options,...i8(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const o=b=>b?typeof b=="function"?new b:b:null;if(!this.options.isClone){this.modules.logger?Qp.init(o(this.modules.logger),this.options):Qp.init(null,this.options);let b;this.modules.formatter?b=this.modules.formatter:b=IW;const B=new JI(this.options);this.store=new ZI(this.options.resources,this.options);const S=this.services;S.logger=Qp,S.resourceStore=this.store,S.languageUtils=B,S.pluralResolver=new EW(B,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(S.formatter=o(b),S.formatter.init(S,this.options),this.options.interpolation.format=S.formatter.format.bind(S.formatter)),S.interpolator=new BW(this.options),S.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},S.backendConnector=new TW(o(this.modules.backend),S.resourceStore,S,this.options),S.backendConnector.on("*",function(I){for(var k=arguments.length,U=new Array(k>1?k-1:0),z=1;z<k;z++)U[z-1]=arguments[z];e.emit(I,...U)}),this.modules.languageDetector&&(S.languageDetector=o(this.modules.languageDetector),S.languageDetector.init&&S.languageDetector.init(S,this.options.detection,this.options)),this.modules.i18nFormat&&(S.i18nFormat=o(this.modules.i18nFormat),S.i18nFormat.init&&S.i18nFormat.init(this)),this.translator=new Ub(this.services,this.options),this.translator.on("*",function(I){for(var k=arguments.length,U=new Array(k>1?k-1:0),z=1;z<k;z++)U[z-1]=arguments[z];e.emit(I,...U)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,r||(r=OC),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.length>0&&b[0]!=="dev"&&(this.options.lng=b[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(b=>{this[b]=function(){return e.store[b](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(b=>{this[b]=function(){return e.store[b](...arguments),e}});const h=nv(),g=()=>{const b=(B,S)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(S),r(B,S)};if(this.languages&&!this.isInitialized)return b(null,this.t.bind(this));this.changeLanguage(this.options.lng,b)};return this.options.resources||!this.options.initAsync?g():setTimeout(g,0),h}loadResources(e){var o,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OC;const i=wo(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],h=g=>{if(!g||g==="cimode")return;this.services.languageUtils.toResolveHierarchy(g).forEach(B=>{B!=="cimode"&&s.indexOf(B)<0&&s.push(B)})};i?h(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(b=>h(b)),(a=(o=this.options.preload)==null?void 0:o.forEach)==null||a.call(o,g=>h(g)),this.services.backendConnector.load(s,this.options.ns,g=>{!g&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(g)})}else r(null)}reloadResources(e,t,r){const i=nv();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=OC),this.services.backendConnector.reload(e,t,o=>{i.resolve(),r(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&aL.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=nv();this.emit("languageChanging",e);const o=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},a=(h,g)=>{g?(o(g),this.translator.changeLanguage(g),this.isLanguageChangingTo=void 0,this.emit("languageChanged",g),this.logger.log("languageChanged",g)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(h,function(){return r.t(...arguments)})},s=h=>{var b,B;!e&&!h&&this.services.languageDetector&&(h=[]);const g=wo(h)?h:this.services.languageUtils.getBestMatchFromCodes(h);g&&(this.language||o(g),this.translator.language||this.translator.changeLanguage(g),(B=(b=this.services.languageDetector)==null?void 0:b.cacheUserLanguage)==null||B.call(b,g)),this.loadResources(g,S=>{a(S,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,r){var i=this;const o=function(a,s){let h;if(typeof s!="object"){for(var g=arguments.length,b=new Array(g>2?g-2:0),B=2;B<g;B++)b[B-2]=arguments[B];h=i.options.overloadTranslationOptionHandler([a,s].concat(b))}else h={...s};h.lng=h.lng||o.lng,h.lngs=h.lngs||o.lngs,h.ns=h.ns||o.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||r||o.keyPrefix);const S=i.options.keySeparator||".";let I;return h.keyPrefix&&Array.isArray(a)?I=a.map(k=>`${h.keyPrefix}${S}${k}`):I=h.keyPrefix?`${h.keyPrefix}${S}${a}`:a,i.t(I,h)};return wo(e)?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=r,o}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(s,h)=>{const g=this.services.backendConnector.state[`${s}|${h}`];return g===-1||g===0||g===2};if(t.precheck){const s=t.precheck(this,a);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(o,e)))}loadNamespaces(e,t){const r=nv();return this.options.ns?(wo(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=nv();wo(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return o.length?(this.options.preload=i.concat(o),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){var i,o;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((o=this.services)==null?void 0:o.languageUtils)||new JI(r8());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Vv(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OC;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new Vv(i);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(s=>{o[s]=this[s]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const s=Object.keys(this.store.data).reduce((h,g)=>(h[g]={...this.store.data[g]},Object.keys(h[g]).reduce((b,B)=>(b[B]={...h[g][B]},b),{})),{});o.store=new ZI(s,i),o.services.resourceStore=o.store}return o.translator=new Ub(o.services,i),o.translator.on("*",function(s){for(var h=arguments.length,g=new Array(h>1?h-1:0),b=1;b<h;b++)g[b-1]=arguments[b];o.emit(s,...g)}),o.init(i,t),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Dc=Vv.createInstance();Dc.createInstance=Vv.createInstance;Dc.createInstance;Dc.dir;Dc.init;Dc.loadResources;Dc.reloadResources;Dc.use;Dc.changeLanguage;Dc.getFixedT;Dc.t;Dc.exists;Dc.setDefaultNamespace;Dc.hasLoadedNamespace;Dc.loadNamespaces;Dc.loadLanguages;const{slice:RW,forEach:KW}=[];function DW(n){return KW.call(RW.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}const o8=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,LW=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let o=`${n}=${i}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!o8.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!o8.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},s8={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=LW(n,encodeURIComponent(e),i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n){this.create(n,"",-1)}};var FW={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return s8.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=e;t&&typeof document<"u"&&s8.create(t,n,r,i,o)}},UW={name:"querystring",lookup(n){var r;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const a=i.substring(1).split("&");for(let s=0;s<a.length;s++){const h=a[s].indexOf("=");h>0&&a[s].substring(0,h)===e&&(t=a[s].substring(h+1))}}return t}};let rv=null;const a8=()=>{if(rv!==null)return rv;try{rv=window!=="undefined"&&window.localStorage!==null;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{rv=!1}return rv};var zW={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&a8())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&a8()&&window.localStorage.setItem(t,n)}};let iv=null;const l8=()=>{if(iv!==null)return iv;try{iv=window!=="undefined"&&window.sessionStorage!==null;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{iv=!1}return iv};var jW={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&l8())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&l8()&&window.sessionStorage.setItem(t,n)}},NW={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},GW={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},WW={name:"path",lookup(n){var i;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(i=t[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},QW={name:"subdomain",lookup(n){var i,o;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&((o=(i=window.location)==null?void 0:i.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[t]}};let lL=!1;try{document.cookie,lL=!0}catch{}const uL=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];lL||uL.splice(1,1);const qW=()=>({order:uL,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class AL{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=DW(t,this.options||{},qW()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(FW),this.addDetector(UW),this.addDetector(zW),this.addDetector(jW),this.addDetector(NW),this.addDetector(GW),this.addDetector(WW),this.addDetector(QW)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}AL.type="languageDetector";var YW=function(e){return{type:"backend",init:function(r,i,o){},read:function(r,i,o){if(typeof e=="function"){if(e.length<3){try{var a=e(r,i);a&&typeof a.then=="function"?a.then(function(s){return o(null,s&&s.default||s)}).catch(o):o(null,a)}catch(s){o(s)}return}e(r,i,o);return}o(null,e[r]&&e[r][i])}}},K3,u8;function $W(){return u8||(u8=1,K3={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),K3}var VW=$W();const HW=Ka(VW);var ZW=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function A8(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(HW[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(ZW),o=null;(o=i.exec(n))!==null;)if(o[0].trim())if(o[1]){var a=o[1].trim(),s=[a,""];a.indexOf("=")>-1&&(s=a.split("=")),e.attrs[s[0]]=s[1],i.lastIndex--}else o[2]&&(e.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}var XW=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,JW=/^\s*$/,eQ=Object.create(null);function cL(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(cL,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var tQ={parse:function(n,e){e||(e={}),e.components||(e.components=eQ);var t,r=[],i=[],o=-1,a=!1;if(n.indexOf("<")!==0){var s=n.indexOf("<");r.push({type:"text",content:s===-1?n:n.substring(0,s)})}return n.replace(XW,function(h,g){if(a){if(h!=="</"+t.name+">")return;a=!1}var b,B=h.charAt(1)!=="/",S=h.startsWith("<!--"),I=g+h.length,k=n.charAt(I);if(S){var U=A8(h);return o<0?(r.push(U),r):((b=i[o]).children.push(U),r)}if(B&&(o++,(t=A8(h)).type==="tag"&&e.components[t.name]&&(t.type="component",a=!0),t.voidElement||a||!k||k==="<"||t.children.push({type:"text",content:n.slice(I,n.indexOf("<",I))}),o===0&&r.push(t),(b=i[o-1])&&b.children.push(t),i[o]=t),(!B||t.voidElement)&&(o>-1&&(t.voidElement||t.name===h.slice(2,-1))&&(o--,t=o===-1?r:i[o]),!a&&k!=="<"&&k)){b=o===-1?r:i[o].children;var z=n.indexOf("<",I),Y=n.slice(I,z===-1?void 0:z);JW.test(Y)&&(Y=" "),(z>-1&&o+b.length>=0||Y!==" ")&&b.push({type:"text",content:Y})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+cL("",t)},"")}};const yb=(...n)=>{console!=null&&console.warn&&(Hd(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),console.warn(...n))},c8={},zb=(...n)=>{Hd(n[0])&&c8[n[0]]||(Hd(n[0])&&(c8[n[0]]=new Date),yb(...n))},hL=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},h8=(n,e,t)=>{n.loadNamespaces(e,hL(n,t))},d8=(n,e,t,r)=>{Hd(t)&&(t=[t]),t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,hL(n,r))},nQ=(n,e,t={})=>!e.languages||!e.languages.length?(zb("i18n.languages were undefined or empty",e.languages),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{var o;if(((o=t.bindI18n)==null?void 0:o.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),rQ=n=>n.displayName||n.name||(Hd(n)&&n.length>0?n:"Unknown"),Hd=n=>typeof n=="string",j1=n=>typeof n=="object"&&n!==null,iQ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,oQ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},sQ=n=>oQ[n],aQ=n=>n.replace(iQ,sQ);let KE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:aQ};const lQ=(n={})=>{KE={...KE,...n}},dL=()=>KE;let fL;const uQ=n=>{fL=n},nB=()=>fL,D3=(n,e)=>{var r;if(!n)return!1;const t=((r=n.props)==null?void 0:r.children)??n.children;return e?t.length>0:!!t},L3=n=>{var t,r;if(!n)return[];const e=((t=n.props)==null?void 0:t.children)??n.children;return(r=n.props)!=null&&r.i18nIsDynamicList?N1(e):e},AQ=n=>Array.isArray(n)&&n.every(Ai.isValidElement),N1=n=>Array.isArray(n)?n:[n],cQ=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},pL=(n,e)=>{if(!n)return"";let t="";const r=N1(n),i=e!=null&&e.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return r.forEach((o,a)=>{if(Hd(o))t+=`${o}`;else if(Ai.isValidElement(o)){const{props:s,type:h}=o,g=Object.keys(s).length,b=i.indexOf(h)>-1,B=s.children;if(!B&&b&&!g)t+=`<${h}/>`;else if(!B&&(!b||g)||s.i18nIsDynamicList)t+=`<${a}></${a}>`;else if(b&&g===1&&Hd(B))t+=`<${h}>${B}</${h}>`;else{const S=pL(B,e);t+=`<${a}>${S}</${a}>`}}else if(o===null)yb("Trans: the passed in value is invalid - seems you passed in a null child.");else if(j1(o)){const{format:s,...h}=o,g=Object.keys(h);if(g.length===1){const b=s?`${g[0]}, ${s}`:g[0];t+=`{{${b}}}`}else yb("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",o)}else yb("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",o)}),t},hQ=(n,e,t,r,i,o)=>{if(e==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],s=e&&new RegExp(a.map(z=>`<${z}`).join("|")).test(e);if(!n&&!s&&!o)return[e];const h={},g=z=>{N1(z).forEach(Q=>{Hd(Q)||(D3(Q)?g(L3(Q)):j1(Q)&&!Ai.isValidElement(Q)&&Object.assign(h,Q))})};g(n);const b=tQ.parse(`<0>${e}</0>`),B={...h,...i},S=(z,Y,Q)=>{var q;const ne=L3(z),X=k(ne,Y.children,Q);return AQ(ne)&&X.length===0||(q=z.props)!=null&&q.i18nIsDynamicList?ne:X},I=(z,Y,Q,ne,X)=>{z.dummy?(z.children=Y,Q.push(Ai.cloneElement(z,{key:ne},X?void 0:Y))):Q.push(...Ai.Children.map([z],q=>{const J={...q.props};return delete J.i18nIsDynamicList,Ai.createElement(q.type,{...J,key:ne,ref:q.ref},X?null:Y)}))},k=(z,Y,Q)=>{const ne=N1(z);return N1(Y).reduce((q,J,N)=>{var he,ce;const ie=((ce=(he=J.children)==null?void 0:he[0])==null?void 0:ce.content)&&t.services.interpolator.interpolate(J.children[0].content,B,t.language);if(J.type==="tag"){let we=ne[parseInt(J.name,10)];Q.length===1&&!we&&(we=Q[0][J.name]),we||(we={});const pe=Object.keys(J.attrs).length!==0?cQ({props:J.attrs},we):we,Ce=Ai.isValidElement(pe),Pe=Ce&&D3(J,!0)&&!J.voidElement,de=s&&j1(pe)&&pe.dummy&&!Ce,rt=j1(n)&&Object.hasOwnProperty.call(n,J.name);if(Hd(pe)){const ze=t.services.interpolator.interpolate(pe,B,t.language);q.push(ze)}else if(D3(pe)||Pe){const ze=S(pe,J,Q);I(pe,ze,q,N)}else if(de){const ze=k(ne,J.children,Q);I(pe,ze,q,N)}else if(Number.isNaN(parseFloat(J.name)))if(rt){const ze=S(pe,J,Q);I(pe,ze,q,N,J.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(J.name)>-1)if(J.voidElement)q.push(Ai.createElement(J.name,{key:`${J.name}-${N}`}));else{const ze=k(ne,J.children,Q);q.push(Ai.createElement(J.name,{key:`${J.name}-${N}`},ze))}else if(J.voidElement)q.push(`<${J.name} />`);else{const ze=k(ne,J.children,Q);q.push(`<${J.name}>${ze}</${J.name}>`)}else if(j1(pe)&&!Ce){const ze=J.children[0]?ie:null;ze&&q.push(ze)}else I(pe,ie,q,N,J.children.length!==1||!ie)}else if(J.type==="text"){const we=r.transWrapTextNodes,pe=o?r.unescape(t.services.interpolator.interpolate(J.content,B,t.language)):t.services.interpolator.interpolate(J.content,B,t.language);we?q.push(Ai.createElement(we,{key:`${J.name}-${N}`},pe)):q.push(pe)}return q},[])},U=k([{dummy:!0,children:n||[]}],b,N1(n||[]));return L3(U[0])};function dQ({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:o={},values:a,defaults:s,components:h,ns:g,i18n:b,t:B,shouldUnescape:S,...I}){var we,pe,Ce,Pe;const k=b||nB();if(!k)return zb("You will need to pass in an i18next instance by using i18nextReactModule"),n;const U=B||k.t.bind(k)||(de=>de),z={...dL(),...(we=k.options)==null?void 0:we.react};let Y=g||U.ns||((pe=k.options)==null?void 0:pe.defaultNS);Y=Hd(Y)?[Y]:Y||["translation"];const Q=pL(n,z),ne=s||Q||z.transEmptyNodeValue||r,{hashTransKey:X}=z,q=r||(X?X(Q||ne):Q||ne);(Pe=(Ce=k.options)==null?void 0:Ce.interpolation)!=null&&Pe.defaultVariables&&(a=a&&Object.keys(a).length>0?{...a,...k.options.interpolation.defaultVariables}:{...k.options.interpolation.defaultVariables});const J=a||e!==void 0||!n?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},N={...o,context:i||o.context,count:e,...a,...J,defaultValue:ne,ns:Y},ie=q?U(q,N):ne;h&&Object.keys(h).forEach(de=>{const rt=h[de];if(typeof rt.type=="function"||!rt.props||!rt.props.children||ie.indexOf(`${de}/>`)<0&&ie.indexOf(`${de} />`)<0)return;function ze(){return Ai.createElement(Ai.Fragment,null,rt)}h[de]=Ai.createElement(ze)});const he=hQ(h||n,ie,k,z,N,S),ce=t??z.defaultTransParent;return ce?Ai.createElement(ce,I,he):he}const fQ={type:"3rdParty",init(n){lQ(n.options.react),uQ(n)}},mL=Ai.createContext();class pQ{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{var r;(r=this.usedNamespaces)[t]??(r[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function M0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:o={},values:a,defaults:s,components:h,ns:g,i18n:b,t:B,shouldUnescape:S,...I}){var Q;const{i18n:k,defaultNS:U}=Ai.useContext(mL)||{},z=b||k||nB(),Y=B||(z==null?void 0:z.t.bind(z));return dQ({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:o,values:a,defaults:s,components:h,ns:g||(Y==null?void 0:Y.ns)||U||((Q=z==null?void 0:z.options)==null?void 0:Q.defaultNS),i18n:z,t:B,shouldUnescape:S,...I})}const mQ=(n,e)=>{const t=Ai.useRef();return Ai.useEffect(()=>{t.current=n},[n,e]),t.current},gL=(n,e,t,r)=>n.getFixedT(e,t,r),gQ=(n,e,t,r)=>Ai.useCallback(gL(n,e,t,r),[n,e,t,r]),yQ=(n,e={})=>{var X,q,J,N;const{i18n:t}=e,{i18n:r,defaultNS:i}=Ai.useContext(mL)||{},o=t||r||nB();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new pQ),!o){zb("You will need to pass in an i18next instance by using initReactI18next");const ie=(ce,we)=>Hd(we)?we:j1(we)&&Hd(we.defaultValue)?we.defaultValue:Array.isArray(ce)?ce[ce.length-1]:ce,he=[ie,{},!1];return he.t=ie,he.i18n={},he.ready=!1,he}(X=o.options.react)!=null&&X.wait&&zb("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...dL(),...o.options.react,...e},{useSuspense:s,keyPrefix:h}=a;let g=i||((q=o.options)==null?void 0:q.defaultNS);g=Hd(g)?[g]:g||["translation"],(N=(J=o.reportNamespaces).addUsedNamespaces)==null||N.call(J,g);const b=(o.isInitialized||o.initializedStoreOnce)&&g.every(ie=>nQ(ie,o,a)),B=gQ(o,e.lng||null,a.nsMode==="fallback"?g:g[0],h),S=()=>B,I=()=>gL(o,e.lng||null,a.nsMode==="fallback"?g:g[0],h),[k,U]=Ai.useState(S);let z=g.join();e.lng&&(z=`${e.lng}${z}`);const Y=mQ(z),Q=Ai.useRef(!0);Ai.useEffect(()=>{const{bindI18n:ie,bindI18nStore:he}=a;Q.current=!0,!b&&!s&&(e.lng?d8(o,e.lng,g,()=>{Q.current&&U(I)}):h8(o,g,()=>{Q.current&&U(I)})),b&&Y&&Y!==z&&Q.current&&U(I);const ce=()=>{Q.current&&U(I)};return ie&&(o==null||o.on(ie,ce)),he&&(o==null||o.store.on(he,ce)),()=>{Q.current=!1,o&&(ie==null||ie.split(" ").forEach(we=>o.off(we,ce))),he&&o&&he.split(" ").forEach(we=>o.store.off(we,ce))}},[o,z]),Ai.useEffect(()=>{Q.current&&b&&U(S)},[o,h,b]);const ne=[k,o,b];if(ne.t=k,ne.i18n=o,ne.ready=b,b||!b&&!s)return ne;throw new Promise(ie=>{e.lng?d8(o,e.lng,g,()=>ie()):h8(o,g,()=>ie())})},$s=(n,e={})=>function(r){function i({forwardedRef:a,...s}){const[h,g,b]=yQ(n,{...s,keyPrefix:e.keyPrefix}),B={...s,t:h,i18n:g,tReady:b};return e.withRef&&a?B.ref=a:!e.withRef&&a&&(B.forwardedRef=a),Ai.createElement(r,B)}i.displayName=`withI18nextTranslation(${rQ(r)})`,i.WrappedComponent=r;const o=(a,s)=>Ai.createElement(i,Object.assign({},a,{forwardedRef:s}));return e.withRef?Ai.forwardRef(o):i};function Sl(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="d8f26cf16d2bfe94f6075e04546db610e7ce65b5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:12,column:1}},1:{start:{line:13,column:0},end:{line:39,column:3}},2:{start:{line:15,column:4},end:{line:17,column:5}},3:{start:{line:16,column:6},end:{line:16,column:16}},4:{start:{line:18,column:4},end:{line:18,column:514}},5:{start:{line:18,column:119},end:{line:18,column:158}},6:{start:{line:18,column:198},end:{line:18,column:237}},7:{start:{line:18,column:277},end:{line:18,column:316}},8:{start:{line:18,column:356},end:{line:18,column:395}},9:{start:{line:18,column:435},end:{line:18,column:474}},10:{start:{line:34,column:4},end:{line:36,column:5}},11:{start:{line:35,column:6},end:{line:35,column:13}},12:{start:{line:37,column:4},end:{line:37,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:21},end:{line:14,column:22}},loc:{start:{line:14,column:35},end:{line:19,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:18,column:113},end:{line:18,column:114}},loc:{start:{line:18,column:119},end:{line:18,column:158}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:18,column:192},end:{line:18,column:193}},loc:{start:{line:18,column:198},end:{line:18,column:237}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:18,column:271},end:{line:18,column:272}},loc:{start:{line:18,column:277},end:{line:18,column:316}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:18,column:350},end:{line:18,column:351}},loc:{start:{line:18,column:356},end:{line:18,column:395}},line:18},5:{name:"(anonymous_5)",decl:{start:{line:18,column:429},end:{line:18,column:430}},loc:{start:{line:18,column:435},end:{line:18,column:474}},line:18},6:{name:"(anonymous_6)",decl:{start:{line:33,column:21},end:{line:33,column:22}},loc:{start:{line:33,column:41},end:{line:38,column:3}},line:33}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:17,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAU,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAc,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAwB,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAwB,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAqB,CAAA,CAAA,CAAA;AAAA,CAAA,CAChC,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IACG,CAAA,GAAA,CAAI,QAAQ,CACZ,CAAA,GAAA;AAAA,CACC,CAAA,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAM,EAAA,CAAA,CAAA,CAAA;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CACV,CAAA,CAAA,CAAA;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAA8B,CAAA,CAAA,2aAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACvC,CAAC;AACH,CACC,CAAA,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAK,CAAA;AAAA,CACJ,CAAA,aAAA,CAAA,CAAe,MAAO,CAAA,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAc,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CACb,aAAe,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACb,WAAa,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CACf,CAAA,CAAA;AAAA,CAAA,CACA,WAAa,CAAA,CAAA,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAmB,CAAA,CAAA,CAAC,IAAM,CAAA,CAAA,GAAA,CAAA,CAAK,GAAQ,CAAA,CAAA,CAAA,CAAA,CAAA;AACrC,CAAI,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAM,EAAA,CAAA,CAAA,CAAA;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAQ,CAAA,CAAA,CAAA;AAChC,CAAQ,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAK,CAAA,CAAA,CAAA,CAAA,CAAI,CAAC,CAAG,CAAA,CAAA,CAAA;AAAA,CACzE,CAAA;AACF,CAAC,CAAA;AAEH,MAAe,CAAA,OAAA,CAAA,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d8f26cf16d2bfe94f6075e04546db610e7ce65b5"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Sl=function(){return a},a}Sl();const yL=(Sl().s[0]++,{de:"Deutsch",en:"English",fr:"Français",he:"עברית",ja:"日本語",zh:"简体中文"});Sl().s[1]++;Dc.use(AL).use(YW((n,e)=>(Sl().f[0]++,Sl().s[2]++,n==="en"?(Sl().b[0][0]++,Sl().s[3]++,{}):(Sl().b[0][1]++,Sl().s[4]++,pW(Object.assign({"./locales/de/translation.json":()=>(Sl().f[1]++,Sl().s[5]++,tv(()=>import("./translation-jw99Nxvk.js"),[])),"./locales/fr/translation.json":()=>(Sl().f[2]++,Sl().s[6]++,tv(()=>import("./translation-BG6vn6wi.js"),[])),"./locales/he/translation.json":()=>(Sl().f[3]++,Sl().s[7]++,tv(()=>import("./translation-y_pBWWYu.js"),[])),"./locales/ja/translation.json":()=>(Sl().f[4]++,Sl().s[8]++,tv(()=>import("./translation-CM4Rn8lU.js"),[])),"./locales/zh/translation.json":()=>(Sl().f[5]++,Sl().s[9]++,tv(()=>import("./translation-DHsMJ3Qo.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(fQ).init({supportedLngs:Object.keys(yL),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Sl().f[6]++,Sl().s[10]++,n[0]==="en"){Sl().b[1][0]++,Sl().s[11]++;return}else Sl().b[1][1]++;Sl().s[12]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var IC={exports:{}},f8;function vQ(){return f8||(f8=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],r=[];function i(a){if(a===void 0){console.error("Autobind error: No context provided.");return}var s=Object.getPrototypeOf(a);arguments.length>1?r=Array.prototype.slice.call(arguments,1):r=Object.getOwnPropertyNames(s),r.forEach(function(h){var g=Object.getOwnPropertyDescriptor(s,h);if(g===void 0){console.warn('Autobind: "'+h+'" method not found in class.');return}t.indexOf(h)!==-1||typeof g.value!="function"||Object.defineProperty(s,h,o(s,h,g))})}function o(a,s,h){var g=h.value;return{configurable:!0,get:function(){if(this===a||this.hasOwnProperty(s))return g;var B=g.bind(this);return Object.defineProperty(this,s,{value:B,configurable:!0,writable:!0}),B}}}n.exports=e.default}(IC,IC.exports)),IC.exports}var F3,p8;function _Q(){return p8||(p8=1,F3=vQ()),F3}var CQ=_Q();const bQ=Ka(CQ);var gv={exports:{}};gv.exports;var m8;function xQ(){return m8||(m8=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",h="[object Date]",g="[object Error]",b="[object Function]",B="[object GeneratorFunction]",S="[object Map]",I="[object Number]",k="[object Object]",U="[object Promise]",z="[object RegExp]",Y="[object Set]",Q="[object String]",ne="[object Symbol]",X="[object WeakMap]",q="[object ArrayBuffer]",J="[object DataView]",N="[object Float32Array]",ie="[object Float64Array]",he="[object Int8Array]",ce="[object Int16Array]",we="[object Int32Array]",pe="[object Uint8Array]",Ce="[object Uint8ClampedArray]",Pe="[object Uint16Array]",de="[object Uint32Array]",rt=/[\\^$.*+?()[\]{}|]/g,ze=/\w*$/,Qe=/^\[object .+?Constructor\]$/,ut=/^(?:0|[1-9]\d*)$/,Te={};Te[o]=Te[a]=Te[q]=Te[J]=Te[s]=Te[h]=Te[N]=Te[ie]=Te[he]=Te[ce]=Te[we]=Te[S]=Te[I]=Te[k]=Te[z]=Te[Y]=Te[Q]=Te[ne]=Te[pe]=Te[Ce]=Te[Pe]=Te[de]=!0,Te[g]=Te[b]=Te[X]=!1;var Ue=typeof window=="object"&&window&&window.Object===Object&&window,st=typeof self=="object"&&self&&self.Object===Object&&self,wt=Ue||st||Function("return this")(),mt=e&&!e.nodeType&&e,ft=mt&&!0&&n&&!n.nodeType&&n,Ut=ft&&ft.exports===mt;function Lt(ee,Se){return ee.set(Se[0],Se[1]),ee}function De(ee,Se){return ee.add(Se),ee}function ke(ee,Se){for(var tt=-1,$t=ee?ee.length:0;++tt<$t&&Se(ee[tt],tt,ee)!==!1;);return ee}function Oe(ee,Se){for(var tt=-1,$t=Se.length,Or=ee.length;++tt<$t;)ee[Or+tt]=Se[tt];return ee}function Je(ee,Se,tt,$t){for(var Or=-1,Gn=ee?ee.length:0;++Or<Gn;)tt=Se(tt,ee[Or],Or,ee);return tt}function Mt(ee,Se){for(var tt=-1,$t=Array(ee);++tt<ee;)$t[tt]=Se(tt);return $t}function gt(ee,Se){return ee==null?void 0:ee[Se]}function Nt(ee){var Se=!1;if(ee!=null&&typeof ee.toString!="function")try{Se=!!(ee+"")}catch{}return Se}function nn(ee){var Se=-1,tt=Array(ee.size);return ee.forEach(function($t,Or){tt[++Se]=[Or,$t]}),tt}function en(ee,Se){return function(tt){return ee(Se(tt))}}function Sn(ee){var Se=-1,tt=Array(ee.size);return ee.forEach(function($t){tt[++Se]=$t}),tt}var Yn=Array.prototype,Qr=Function.prototype,cr=Object.prototype,fr=wt["__core-js_shared__"],br=function(){var ee=/[^.]+$/.exec(fr&&fr.keys&&fr.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Cr=Qr.toString,Mr=cr.hasOwnProperty,Qn=cr.toString,Sr=RegExp("^"+Cr.call(Mr).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=Ut?wt.Buffer:void 0,ue=wt.Symbol,me=wt.Uint8Array,Xe=en(Object.getPrototypeOf,Object),Bt=Object.create,Yt=cr.propertyIsEnumerable,it=Yn.splice,Kt=Object.getOwnPropertySymbols,Ye=Ge?Ge.isBuffer:void 0,fe=en(Object.keys,Object),xe=Dr(wt,"DataView"),p=Dr(wt,"Map"),Ne=Dr(wt,"Promise"),dt=Dr(wt,"Set"),pt=Dr(wt,"WeakMap"),Ot=Dr(Object,"create"),_t=fo(xe),rn=fo(p),Zt=fo(Ne),Gt=fo(dt),bt=fo(pt),Pn=ue?ue.prototype:void 0,En=Pn?Pn.valueOf:void 0;function lr(ee){var Se=-1,tt=ee?ee.length:0;for(this.clear();++Se<tt;){var $t=ee[Se];this.set($t[0],$t[1])}}function wr(){this.__data__=Ot?Ot(null):{}}function on(ee){return this.has(ee)&&delete this.__data__[ee]}function zn(ee){var Se=this.__data__;if(Ot){var tt=Se[ee];return tt===r?void 0:tt}return Mr.call(Se,ee)?Se[ee]:void 0}function Dn(ee){var Se=this.__data__;return Ot?Se[ee]!==void 0:Mr.call(Se,ee)}function Br(ee,Se){var tt=this.__data__;return tt[ee]=Ot&&Se===void 0?r:Se,this}lr.prototype.clear=wr,lr.prototype.delete=on,lr.prototype.get=zn,lr.prototype.has=Dn,lr.prototype.set=Br;function xr(ee){var Se=-1,tt=ee?ee.length:0;for(this.clear();++Se<tt;){var $t=ee[Se];this.set($t[0],$t[1])}}function Rr(){this.__data__=[]}function rr(ee){var Se=this.__data__,tt=Va(Se,ee);if(tt<0)return!1;var $t=Se.length-1;return tt==$t?Se.pop():it.call(Se,tt,1),!0}function co(ee){var Se=this.__data__,tt=Va(Se,ee);return tt<0?void 0:Se[tt][1]}function $a(ee){return Va(this.__data__,ee)>-1}function ji(ee,Se){var tt=this.__data__,$t=Va(tt,ee);return $t<0?tt.push([ee,Se]):tt[$t][1]=Se,this}xr.prototype.clear=Rr,xr.prototype.delete=rr,xr.prototype.get=co,xr.prototype.has=$a,xr.prototype.set=ji;function ui(ee){var Se=-1,tt=ee?ee.length:0;for(this.clear();++Se<tt;){var $t=ee[Se];this.set($t[0],$t[1])}}function Vi(){this.__data__={hash:new lr,map:new(p||xr),string:new lr}}function as(ee){return ls(this,ee).delete(ee)}function Ni(ee){return ls(this,ee).get(ee)}function ll(ee){return ls(this,ee).has(ee)}function ul(ee,Se){return ls(this,ee).set(ee,Se),this}ui.prototype.clear=Vi,ui.prototype.delete=as,ui.prototype.get=Ni,ui.prototype.has=ll,ui.prototype.set=ul;function ts(ee){this.__data__=new xr(ee)}function Aa(){this.__data__=new xr}function Al(ee){return this.__data__.delete(ee)}function ao(ee){return this.__data__.get(ee)}function Pu(ee){return this.__data__.has(ee)}function tu(ee,Se){var tt=this.__data__;if(tt instanceof xr){var $t=tt.__data__;if(!p||$t.length<t-1)return $t.push([ee,Se]),this;tt=this.__data__=new ui($t)}return tt.set(ee,Se),this}ts.prototype.clear=Aa,ts.prototype.delete=Al,ts.prototype.get=ao,ts.prototype.has=Pu,ts.prototype.set=tu;function so(ee,Se){var tt=Rs(ee)||Xa(ee)?Mt(ee.length,String):[],$t=tt.length,Or=!!$t;for(var Gn in ee)Mr.call(ee,Gn)&&!(Or&&(Gn=="length"||du(Gn,$t)))&&tt.push(Gn);return tt}function Kr(ee,Se,tt){var $t=ee[Se];(!(Mr.call(ee,Se)&&ws($t,tt))||tt===void 0&&!(Se in ee))&&(ee[Se]=tt)}function Va(ee,Se){for(var tt=ee.length;tt--;)if(ws(ee[tt][0],Se))return tt;return-1}function Ts(ee,Se){return ee&&ci(Se,Gi(Se),ee)}function ia(ee,Se,tt,$t,Or,Gn,si){var hi;if($t&&(hi=Gn?$t(ee,Or,Gn,si):$t(ee)),hi!==void 0)return hi;if(!Jr(ee))return ee;var pr=Rs(ee);if(pr){if(hi=Ps(ee),!Se)return Ha(ee,hi)}else{var Ir=Za(ee),vi=Ir==b||Ir==B;if(Hi(ee))return er(ee,Se);if(Ir==k||Ir==o||vi&&!Gn){if(Nt(ee))return Gn?ee:{};if(hi=Mo(vi?{}:ee),!Se)return ca(ee,Ts(hi,ee))}else{if(!Te[Ir])return Gn?ee:{};hi=Ns(ee,Ir,ia,Se)}}si||(si=new ts);var So=si.get(ee);if(So)return So;if(si.set(ee,hi),!pr)var ki=tt?iA(ee):Gi(ee);return ke(ki||ee,function(qr,Zi){ki&&(Zi=qr,qr=ee[Zi]),Kr(hi,Zi,ia(qr,Se,tt,$t,Zi,ee,si))}),hi}function We(ee){return Jr(ee)?Bt(ee):{}}function Ct(ee,Se,tt){var $t=Se(ee);return Rs(ee)?$t:Oe($t,tt(ee))}function pn(ee){return Qn.call(ee)}function Nn(ee){if(!Jr(ee)||ns(ee))return!1;var Se=nu(ee)||Nt(ee)?Sr:Qe;return Se.test(fo(ee))}function An(ee){if(!Vs(ee))return fe(ee);var Se=[];for(var tt in Object(ee))Mr.call(ee,tt)&&tt!="constructor"&&Se.push(tt);return Se}function er(ee,Se){if(Se)return ee.slice();var tt=new ee.constructor(ee.length);return ee.copy(tt),tt}function Ti(ee){var Se=new ee.constructor(ee.byteLength);return new me(Se).set(new me(ee)),Se}function ho(ee,Se){var tt=Se?Ti(ee.buffer):ee.buffer;return new ee.constructor(tt,ee.byteOffset,ee.byteLength)}function vs(ee,Se,tt){var $t=Se?tt(nn(ee),!0):nn(ee);return Je($t,Lt,new ee.constructor)}function js(ee){var Se=new ee.constructor(ee.source,ze.exec(ee));return Se.lastIndex=ee.lastIndex,Se}function vA(ee,Se,tt){var $t=Se?tt(Sn(ee),!0):Sn(ee);return Je($t,De,new ee.constructor)}function ri(ee){return En?Object(En.call(ee)):{}}function wi(ee,Se){var tt=Se?Ti(ee.buffer):ee.buffer;return new ee.constructor(tt,ee.byteOffset,ee.length)}function Ha(ee,Se){var tt=-1,$t=ee.length;for(Se||(Se=Array($t));++tt<$t;)Se[tt]=ee[tt];return Se}function ci(ee,Se,tt,$t){tt||(tt={});for(var Or=-1,Gn=Se.length;++Or<Gn;){var si=Se[Or],hi=void 0;Kr(tt,si,hi===void 0?ee[si]:hi)}return tt}function ca(ee,Se){return ci(ee,Ei(ee),Se)}function iA(ee){return Ct(ee,Gi,Ei)}function ls(ee,Se){var tt=ee.__data__;return zl(Se)?tt[typeof Se=="string"?"string":"hash"]:tt.map}function Dr(ee,Se){var tt=gt(ee,Se);return Nn(tt)?tt:void 0}var Ei=Kt?en(Kt,Object):lo,Za=pn;(xe&&Za(new xe(new ArrayBuffer(1)))!=J||p&&Za(new p)!=S||Ne&&Za(Ne.resolve())!=U||dt&&Za(new dt)!=Y||pt&&Za(new pt)!=X)&&(Za=function(ee){var Se=Qn.call(ee),tt=Se==k?ee.constructor:void 0,$t=tt?fo(tt):void 0;if($t)switch($t){case _t:return J;case rn:return S;case Zt:return U;case Gt:return Y;case bt:return X}return Se});function Ps(ee){var Se=ee.length,tt=ee.constructor(Se);return Se&&typeof ee[0]=="string"&&Mr.call(ee,"index")&&(tt.index=ee.index,tt.input=ee.input),tt}function Mo(ee){return typeof ee.constructor=="function"&&!Vs(ee)?We(Xe(ee)):{}}function Ns(ee,Se,tt,$t){var Or=ee.constructor;switch(Se){case q:return Ti(ee);case s:case h:return new Or(+ee);case J:return ho(ee,$t);case N:case ie:case he:case ce:case we:case pe:case Ce:case Pe:case de:return wi(ee,$t);case S:return vs(ee,$t,tt);case I:case Q:return new Or(ee);case z:return js(ee);case Y:return vA(ee,$t,tt);case ne:return ri(ee)}}function du(ee,Se){return Se=Se??i,!!Se&&(typeof ee=="number"||ut.test(ee))&&ee>-1&&ee%1==0&&ee<Se}function zl(ee){var Se=typeof ee;return Se=="string"||Se=="number"||Se=="symbol"||Se=="boolean"?ee!=="__proto__":ee===null}function ns(ee){return!!br&&br in ee}function Vs(ee){var Se=ee&&ee.constructor,tt=typeof Se=="function"&&Se.prototype||cr;return ee===tt}function fo(ee){if(ee!=null){try{return Cr.call(ee)}catch{}try{return ee+""}catch{}}return""}function ms(ee){return ia(ee,!0,!0)}function ws(ee,Se){return ee===Se||ee!==ee&&Se!==Se}function Xa(ee){return oA(ee)&&Mr.call(ee,"callee")&&(!Yt.call(ee,"callee")||Qn.call(ee)==o)}var Rs=Array.isArray;function El(ee){return ee!=null&&Fi(ee.length)&&!nu(ee)}function oA(ee){return ru(ee)&&El(ee)}var Hi=Ye||Pi;function nu(ee){var Se=Jr(ee)?Qn.call(ee):"";return Se==b||Se==B}function Fi(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=i}function Jr(ee){var Se=typeof ee;return!!ee&&(Se=="object"||Se=="function")}function ru(ee){return!!ee&&typeof ee=="object"}function Gi(ee){return El(ee)?so(ee):An(ee)}function lo(){return[]}function Pi(){return!1}n.exports=ms}(gv,gv.exports)),gv.exports}var wQ=xQ();const g8=Ka(wQ);var U3,y8;function MQ(){if(y8)return U3;y8=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s=Object.prototype,h=s.toString;function g(U,z,Y){return U===U&&(Y!==void 0&&(U=U<=Y?U:Y),z!==void 0&&(U=U>=z?U:z)),U}function b(U){var z=typeof U;return!!U&&(z=="object"||z=="function")}function B(U){return!!U&&typeof U=="object"}function S(U){return typeof U=="symbol"||B(U)&&h.call(U)==e}function I(U){if(typeof U=="number")return U;if(S(U))return n;if(b(U)){var z=typeof U.valueOf=="function"?U.valueOf():U;U=b(z)?z+"":z}if(typeof U!="string")return U===0?U:+U;U=U.replace(t,"");var Y=i.test(U);return Y||o.test(U)?a(U.slice(2),Y?2:8):r.test(U)?n:+U}function k(U,z,Y){return Y===void 0&&(Y=z,z=void 0),Y!==void 0&&(Y=I(Y),Y=Y===Y?Y:0),z!==void 0&&(z=I(z),z=z===z?z:0),g(I(U),z,Y)}return U3=k,U3}var SQ=MQ();const v8=Ka(SQ);var z3={},ov={},_8;function EQ(){if(_8)return ov;_8=1,ov.byteLength=s,ov.toByteArray=g,ov.fromByteArray=S;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(I){var k=I.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=I.indexOf("=");U===-1&&(U=k);var z=U===k?0:4-U%4;return[U,z]}function s(I){var k=a(I),U=k[0],z=k[1];return(U+z)*3/4-z}function h(I,k,U){return(k+U)*3/4-U}function g(I){var k,U=a(I),z=U[0],Y=U[1],Q=new t(h(I,z,Y)),ne=0,X=Y>0?z-4:z,q;for(q=0;q<X;q+=4)k=e[I.charCodeAt(q)]<<18|e[I.charCodeAt(q+1)]<<12|e[I.charCodeAt(q+2)]<<6|e[I.charCodeAt(q+3)],Q[ne++]=k>>16&255,Q[ne++]=k>>8&255,Q[ne++]=k&255;return Y===2&&(k=e[I.charCodeAt(q)]<<2|e[I.charCodeAt(q+1)]>>4,Q[ne++]=k&255),Y===1&&(k=e[I.charCodeAt(q)]<<10|e[I.charCodeAt(q+1)]<<4|e[I.charCodeAt(q+2)]>>2,Q[ne++]=k>>8&255,Q[ne++]=k&255),Q}function b(I){return n[I>>18&63]+n[I>>12&63]+n[I>>6&63]+n[I&63]}function B(I,k,U){for(var z,Y=[],Q=k;Q<U;Q+=3)z=(I[Q]<<16&16711680)+(I[Q+1]<<8&65280)+(I[Q+2]&255),Y.push(b(z));return Y.join("")}function S(I){for(var k,U=I.length,z=U%3,Y=[],Q=16383,ne=0,X=U-z;ne<X;ne+=Q)Y.push(B(I,ne,ne+Q>X?X:ne+Q));return z===1?(k=I[U-1],Y.push(n[k>>2]+n[k<<4&63]+"==")):z===2&&(k=(I[U-2]<<8)+I[U-1],Y.push(n[k>>10]+n[k>>4&63]+n[k<<2&63]+"=")),Y.join("")}return ov}var kC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var C8;function BQ(){return C8||(C8=1,kC.read=function(n,e,t,r,i){var o,a,s=i*8-r-1,h=(1<<s)-1,g=h>>1,b=-7,B=t?i-1:0,S=t?-1:1,I=n[e+B];for(B+=S,o=I&(1<<-b)-1,I>>=-b,b+=s;b>0;o=o*256+n[e+B],B+=S,b-=8);for(a=o&(1<<-b)-1,o>>=-b,b+=r;b>0;a=a*256+n[e+B],B+=S,b-=8);if(o===0)o=1-g;else{if(o===h)return a?NaN:(I?-1:1)*(1/0);a=a+Math.pow(2,r),o=o-g}return(I?-1:1)*a*Math.pow(2,o-r)},kC.write=function(n,e,t,r,i,o){var a,s,h,g=o*8-i-1,b=(1<<g)-1,B=b>>1,S=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=r?0:o-1,k=r?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=b):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+B>=1?e+=S/h:e+=S*Math.pow(2,1-B),e*h>=2&&(a++,h/=2),a+B>=b?(s=0,a=b):a+B>=1?(s=(e*h-1)*Math.pow(2,i),a=a+B):(s=e*Math.pow(2,B-1)*Math.pow(2,i),a=0));i>=8;n[t+I]=s&255,I+=k,s/=256,i-=8);for(a=a<<i|s,g+=i;g>0;n[t+I]=a&255,I+=k,a/=256,g-=8);n[t+I-k]|=U*128}),kC}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var b8;function OQ(){return b8||(b8=1,function(n){const e=EQ(),t=BQ(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=s,n.SlowBuffer=Q,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const Ge=new Uint8Array(1),ue={foo:function(){return 42}};return Object.setPrototypeOf(ue,Uint8Array.prototype),Object.setPrototypeOf(Ge,ue),Ge.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(Ge){if(Ge>i)throw new RangeError('The value "'+Ge+'" is invalid for option "size"');const ue=new Uint8Array(Ge);return Object.setPrototypeOf(ue,s.prototype),ue}function s(Ge,ue,me){if(typeof Ge=="number"){if(typeof ue=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(Ge)}return h(Ge,ue,me)}s.poolSize=8192;function h(Ge,ue,me){if(typeof Ge=="string")return S(Ge,ue);if(ArrayBuffer.isView(Ge))return k(Ge);if(Ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge);if(br(Ge,ArrayBuffer)||Ge&&br(Ge.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(br(Ge,SharedArrayBuffer)||Ge&&br(Ge.buffer,SharedArrayBuffer)))return U(Ge,ue,me);if(typeof Ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Xe=Ge.valueOf&&Ge.valueOf();if(Xe!=null&&Xe!==Ge)return s.from(Xe,ue,me);const Bt=z(Ge);if(Bt)return Bt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ge[Symbol.toPrimitive]=="function")return s.from(Ge[Symbol.toPrimitive]("string"),ue,me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge)}s.from=function(Ge,ue,me){return h(Ge,ue,me)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function g(Ge){if(typeof Ge!="number")throw new TypeError('"size" argument must be of type number');if(Ge<0)throw new RangeError('The value "'+Ge+'" is invalid for option "size"')}function b(Ge,ue,me){return g(Ge),Ge<=0?a(Ge):ue!==void 0?typeof me=="string"?a(Ge).fill(ue,me):a(Ge).fill(ue):a(Ge)}s.alloc=function(Ge,ue,me){return b(Ge,ue,me)};function B(Ge){return g(Ge),a(Ge<0?0:Y(Ge)|0)}s.allocUnsafe=function(Ge){return B(Ge)},s.allocUnsafeSlow=function(Ge){return B(Ge)};function S(Ge,ue){if((typeof ue!="string"||ue==="")&&(ue="utf8"),!s.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);const me=ne(Ge,ue)|0;let Xe=a(me);const Bt=Xe.write(Ge,ue);return Bt!==me&&(Xe=Xe.slice(0,Bt)),Xe}function I(Ge){const ue=Ge.length<0?0:Y(Ge.length)|0,me=a(ue);for(let Xe=0;Xe<ue;Xe+=1)me[Xe]=Ge[Xe]&255;return me}function k(Ge){if(br(Ge,Uint8Array)){const ue=new Uint8Array(Ge);return U(ue.buffer,ue.byteOffset,ue.byteLength)}return I(Ge)}function U(Ge,ue,me){if(ue<0||Ge.byteLength<ue)throw new RangeError('"offset" is outside of buffer bounds');if(Ge.byteLength<ue+(me||0))throw new RangeError('"length" is outside of buffer bounds');let Xe;return ue===void 0&&me===void 0?Xe=new Uint8Array(Ge):me===void 0?Xe=new Uint8Array(Ge,ue):Xe=new Uint8Array(Ge,ue,me),Object.setPrototypeOf(Xe,s.prototype),Xe}function z(Ge){if(s.isBuffer(Ge)){const ue=Y(Ge.length)|0,me=a(ue);return me.length===0||Ge.copy(me,0,0,ue),me}if(Ge.length!==void 0)return typeof Ge.length!="number"||Cr(Ge.length)?a(0):I(Ge);if(Ge.type==="Buffer"&&Array.isArray(Ge.data))return I(Ge.data)}function Y(Ge){if(Ge>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return Ge|0}function Q(Ge){return+Ge!=Ge&&(Ge=0),s.alloc(+Ge)}s.isBuffer=function(ue){return ue!=null&&ue._isBuffer===!0&&ue!==s.prototype},s.compare=function(ue,me){if(br(ue,Uint8Array)&&(ue=s.from(ue,ue.offset,ue.byteLength)),br(me,Uint8Array)&&(me=s.from(me,me.offset,me.byteLength)),!s.isBuffer(ue)||!s.isBuffer(me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ue===me)return 0;let Xe=ue.length,Bt=me.length;for(let Yt=0,it=Math.min(Xe,Bt);Yt<it;++Yt)if(ue[Yt]!==me[Yt]){Xe=ue[Yt],Bt=me[Yt];break}return Xe<Bt?-1:Bt<Xe?1:0},s.isEncoding=function(ue){switch(String(ue).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(ue,me){if(!Array.isArray(ue))throw new TypeError('"list" argument must be an Array of Buffers');if(ue.length===0)return s.alloc(0);let Xe;if(me===void 0)for(me=0,Xe=0;Xe<ue.length;++Xe)me+=ue[Xe].length;const Bt=s.allocUnsafe(me);let Yt=0;for(Xe=0;Xe<ue.length;++Xe){let it=ue[Xe];if(br(it,Uint8Array))Yt+it.length>Bt.length?(s.isBuffer(it)||(it=s.from(it)),it.copy(Bt,Yt)):Uint8Array.prototype.set.call(Bt,it,Yt);else if(s.isBuffer(it))it.copy(Bt,Yt);else throw new TypeError('"list" argument must be an Array of Buffers');Yt+=it.length}return Bt};function ne(Ge,ue){if(s.isBuffer(Ge))return Ge.length;if(ArrayBuffer.isView(Ge)||br(Ge,ArrayBuffer))return Ge.byteLength;if(typeof Ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ge);const me=Ge.length,Xe=arguments.length>2&&arguments[2]===!0;if(!Xe&&me===0)return 0;let Bt=!1;for(;;)switch(ue){case"ascii":case"latin1":case"binary":return me;case"utf8":case"utf-8":return Sn(Ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me*2;case"hex":return me>>>1;case"base64":return cr(Ge).length;default:if(Bt)return Xe?-1:Sn(Ge).length;ue=(""+ue).toLowerCase(),Bt=!0}}s.byteLength=ne;function X(Ge,ue,me){let Xe=!1;if((ue===void 0||ue<0)&&(ue=0),ue>this.length||((me===void 0||me>this.length)&&(me=this.length),me<=0)||(me>>>=0,ue>>>=0,me<=ue))return"";for(Ge||(Ge="utf8");;)switch(Ge){case"hex":return ut(this,ue,me);case"utf8":case"utf-8":return Pe(this,ue,me);case"ascii":return ze(this,ue,me);case"latin1":case"binary":return Qe(this,ue,me);case"base64":return Ce(this,ue,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,ue,me);default:if(Xe)throw new TypeError("Unknown encoding: "+Ge);Ge=(Ge+"").toLowerCase(),Xe=!0}}s.prototype._isBuffer=!0;function q(Ge,ue,me){const Xe=Ge[ue];Ge[ue]=Ge[me],Ge[me]=Xe}s.prototype.swap16=function(){const ue=this.length;if(ue%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let me=0;me<ue;me+=2)q(this,me,me+1);return this},s.prototype.swap32=function(){const ue=this.length;if(ue%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let me=0;me<ue;me+=4)q(this,me,me+3),q(this,me+1,me+2);return this},s.prototype.swap64=function(){const ue=this.length;if(ue%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let me=0;me<ue;me+=8)q(this,me,me+7),q(this,me+1,me+6),q(this,me+2,me+5),q(this,me+3,me+4);return this},s.prototype.toString=function(){const ue=this.length;return ue===0?"":arguments.length===0?Pe(this,0,ue):X.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(ue){if(!s.isBuffer(ue))throw new TypeError("Argument must be a Buffer");return this===ue?!0:s.compare(this,ue)===0},s.prototype.inspect=function(){let ue="";const me=n.INSPECT_MAX_BYTES;return ue=this.toString("hex",0,me).replace(/(.{2})/g,"$1 ").trim(),this.length>me&&(ue+=" ... "),"<Buffer "+ue+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(ue,me,Xe,Bt,Yt){if(br(ue,Uint8Array)&&(ue=s.from(ue,ue.offset,ue.byteLength)),!s.isBuffer(ue))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ue);if(me===void 0&&(me=0),Xe===void 0&&(Xe=ue?ue.length:0),Bt===void 0&&(Bt=0),Yt===void 0&&(Yt=this.length),me<0||Xe>ue.length||Bt<0||Yt>this.length)throw new RangeError("out of range index");if(Bt>=Yt&&me>=Xe)return 0;if(Bt>=Yt)return-1;if(me>=Xe)return 1;if(me>>>=0,Xe>>>=0,Bt>>>=0,Yt>>>=0,this===ue)return 0;let it=Yt-Bt,Kt=Xe-me;const Ye=Math.min(it,Kt),fe=this.slice(Bt,Yt),xe=ue.slice(me,Xe);for(let p=0;p<Ye;++p)if(fe[p]!==xe[p]){it=fe[p],Kt=xe[p];break}return it<Kt?-1:Kt<it?1:0};function J(Ge,ue,me,Xe,Bt){if(Ge.length===0)return-1;if(typeof me=="string"?(Xe=me,me=0):me>2147483647?me=2147483647:me<-2147483648&&(me=-2147483648),me=+me,Cr(me)&&(me=Bt?0:Ge.length-1),me<0&&(me=Ge.length+me),me>=Ge.length){if(Bt)return-1;me=Ge.length-1}else if(me<0)if(Bt)me=0;else return-1;if(typeof ue=="string"&&(ue=s.from(ue,Xe)),s.isBuffer(ue))return ue.length===0?-1:N(Ge,ue,me,Xe,Bt);if(typeof ue=="number")return ue=ue&255,typeof Uint8Array.prototype.indexOf=="function"?Bt?Uint8Array.prototype.indexOf.call(Ge,ue,me):Uint8Array.prototype.lastIndexOf.call(Ge,ue,me):N(Ge,[ue],me,Xe,Bt);throw new TypeError("val must be string, number or Buffer")}function N(Ge,ue,me,Xe,Bt){let Yt=1,it=Ge.length,Kt=ue.length;if(Xe!==void 0&&(Xe=String(Xe).toLowerCase(),Xe==="ucs2"||Xe==="ucs-2"||Xe==="utf16le"||Xe==="utf-16le")){if(Ge.length<2||ue.length<2)return-1;Yt=2,it/=2,Kt/=2,me/=2}function Ye(xe,p){return Yt===1?xe[p]:xe.readUInt16BE(p*Yt)}let fe;if(Bt){let xe=-1;for(fe=me;fe<it;fe++)if(Ye(Ge,fe)===Ye(ue,xe===-1?0:fe-xe)){if(xe===-1&&(xe=fe),fe-xe+1===Kt)return xe*Yt}else xe!==-1&&(fe-=fe-xe),xe=-1}else for(me+Kt>it&&(me=it-Kt),fe=me;fe>=0;fe--){let xe=!0;for(let p=0;p<Kt;p++)if(Ye(Ge,fe+p)!==Ye(ue,p)){xe=!1;break}if(xe)return fe}return-1}s.prototype.includes=function(ue,me,Xe){return this.indexOf(ue,me,Xe)!==-1},s.prototype.indexOf=function(ue,me,Xe){return J(this,ue,me,Xe,!0)},s.prototype.lastIndexOf=function(ue,me,Xe){return J(this,ue,me,Xe,!1)};function ie(Ge,ue,me,Xe){me=Number(me)||0;const Bt=Ge.length-me;Xe?(Xe=Number(Xe),Xe>Bt&&(Xe=Bt)):Xe=Bt;const Yt=ue.length;Xe>Yt/2&&(Xe=Yt/2);let it;for(it=0;it<Xe;++it){const Kt=parseInt(ue.substr(it*2,2),16);if(Cr(Kt))return it;Ge[me+it]=Kt}return it}function he(Ge,ue,me,Xe){return fr(Sn(ue,Ge.length-me),Ge,me,Xe)}function ce(Ge,ue,me,Xe){return fr(Yn(ue),Ge,me,Xe)}function we(Ge,ue,me,Xe){return fr(cr(ue),Ge,me,Xe)}function pe(Ge,ue,me,Xe){return fr(Qr(ue,Ge.length-me),Ge,me,Xe)}s.prototype.write=function(ue,me,Xe,Bt){if(me===void 0)Bt="utf8",Xe=this.length,me=0;else if(Xe===void 0&&typeof me=="string")Bt=me,Xe=this.length,me=0;else if(isFinite(me))me=me>>>0,isFinite(Xe)?(Xe=Xe>>>0,Bt===void 0&&(Bt="utf8")):(Bt=Xe,Xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Yt=this.length-me;if((Xe===void 0||Xe>Yt)&&(Xe=Yt),ue.length>0&&(Xe<0||me<0)||me>this.length)throw new RangeError("Attempt to write outside buffer bounds");Bt||(Bt="utf8");let it=!1;for(;;)switch(Bt){case"hex":return ie(this,ue,me,Xe);case"utf8":case"utf-8":return he(this,ue,me,Xe);case"ascii":case"latin1":case"binary":return ce(this,ue,me,Xe);case"base64":return we(this,ue,me,Xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,ue,me,Xe);default:if(it)throw new TypeError("Unknown encoding: "+Bt);Bt=(""+Bt).toLowerCase(),it=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ce(Ge,ue,me){return ue===0&&me===Ge.length?e.fromByteArray(Ge):e.fromByteArray(Ge.slice(ue,me))}function Pe(Ge,ue,me){me=Math.min(Ge.length,me);const Xe=[];let Bt=ue;for(;Bt<me;){const Yt=Ge[Bt];let it=null,Kt=Yt>239?4:Yt>223?3:Yt>191?2:1;if(Bt+Kt<=me){let Ye,fe,xe,p;switch(Kt){case 1:Yt<128&&(it=Yt);break;case 2:Ye=Ge[Bt+1],(Ye&192)===128&&(p=(Yt&31)<<6|Ye&63,p>127&&(it=p));break;case 3:Ye=Ge[Bt+1],fe=Ge[Bt+2],(Ye&192)===128&&(fe&192)===128&&(p=(Yt&15)<<12|(Ye&63)<<6|fe&63,p>2047&&(p<55296||p>57343)&&(it=p));break;case 4:Ye=Ge[Bt+1],fe=Ge[Bt+2],xe=Ge[Bt+3],(Ye&192)===128&&(fe&192)===128&&(xe&192)===128&&(p=(Yt&15)<<18|(Ye&63)<<12|(fe&63)<<6|xe&63,p>65535&&p<1114112&&(it=p))}}it===null?(it=65533,Kt=1):it>65535&&(it-=65536,Xe.push(it>>>10&1023|55296),it=56320|it&1023),Xe.push(it),Bt+=Kt}return rt(Xe)}const de=4096;function rt(Ge){const ue=Ge.length;if(ue<=de)return String.fromCharCode.apply(String,Ge);let me="",Xe=0;for(;Xe<ue;)me+=String.fromCharCode.apply(String,Ge.slice(Xe,Xe+=de));return me}function ze(Ge,ue,me){let Xe="";me=Math.min(Ge.length,me);for(let Bt=ue;Bt<me;++Bt)Xe+=String.fromCharCode(Ge[Bt]&127);return Xe}function Qe(Ge,ue,me){let Xe="";me=Math.min(Ge.length,me);for(let Bt=ue;Bt<me;++Bt)Xe+=String.fromCharCode(Ge[Bt]);return Xe}function ut(Ge,ue,me){const Xe=Ge.length;(!ue||ue<0)&&(ue=0),(!me||me<0||me>Xe)&&(me=Xe);let Bt="";for(let Yt=ue;Yt<me;++Yt)Bt+=Mr[Ge[Yt]];return Bt}function Te(Ge,ue,me){const Xe=Ge.slice(ue,me);let Bt="";for(let Yt=0;Yt<Xe.length-1;Yt+=2)Bt+=String.fromCharCode(Xe[Yt]+Xe[Yt+1]*256);return Bt}s.prototype.slice=function(ue,me){const Xe=this.length;ue=~~ue,me=me===void 0?Xe:~~me,ue<0?(ue+=Xe,ue<0&&(ue=0)):ue>Xe&&(ue=Xe),me<0?(me+=Xe,me<0&&(me=0)):me>Xe&&(me=Xe),me<ue&&(me=ue);const Bt=this.subarray(ue,me);return Object.setPrototypeOf(Bt,s.prototype),Bt};function Ue(Ge,ue,me){if(Ge%1!==0||Ge<0)throw new RangeError("offset is not uint");if(Ge+ue>me)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(ue,me,Xe){ue=ue>>>0,me=me>>>0,Xe||Ue(ue,me,this.length);let Bt=this[ue],Yt=1,it=0;for(;++it<me&&(Yt*=256);)Bt+=this[ue+it]*Yt;return Bt},s.prototype.readUintBE=s.prototype.readUIntBE=function(ue,me,Xe){ue=ue>>>0,me=me>>>0,Xe||Ue(ue,me,this.length);let Bt=this[ue+--me],Yt=1;for(;me>0&&(Yt*=256);)Bt+=this[ue+--me]*Yt;return Bt},s.prototype.readUint8=s.prototype.readUInt8=function(ue,me){return ue=ue>>>0,me||Ue(ue,1,this.length),this[ue]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(ue,me){return ue=ue>>>0,me||Ue(ue,2,this.length),this[ue]|this[ue+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(ue,me){return ue=ue>>>0,me||Ue(ue,2,this.length),this[ue]<<8|this[ue+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(ue,me){return ue=ue>>>0,me||Ue(ue,4,this.length),(this[ue]|this[ue+1]<<8|this[ue+2]<<16)+this[ue+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(ue,me){return ue=ue>>>0,me||Ue(ue,4,this.length),this[ue]*16777216+(this[ue+1]<<16|this[ue+2]<<8|this[ue+3])},s.prototype.readBigUInt64LE=Qn(function(ue){ue=ue>>>0,gt(ue,"offset");const me=this[ue],Xe=this[ue+7];(me===void 0||Xe===void 0)&&Nt(ue,this.length-8);const Bt=me+this[++ue]*2**8+this[++ue]*2**16+this[++ue]*2**24,Yt=this[++ue]+this[++ue]*2**8+this[++ue]*2**16+Xe*2**24;return BigInt(Bt)+(BigInt(Yt)<<BigInt(32))}),s.prototype.readBigUInt64BE=Qn(function(ue){ue=ue>>>0,gt(ue,"offset");const me=this[ue],Xe=this[ue+7];(me===void 0||Xe===void 0)&&Nt(ue,this.length-8);const Bt=me*2**24+this[++ue]*2**16+this[++ue]*2**8+this[++ue],Yt=this[++ue]*2**24+this[++ue]*2**16+this[++ue]*2**8+Xe;return(BigInt(Bt)<<BigInt(32))+BigInt(Yt)}),s.prototype.readIntLE=function(ue,me,Xe){ue=ue>>>0,me=me>>>0,Xe||Ue(ue,me,this.length);let Bt=this[ue],Yt=1,it=0;for(;++it<me&&(Yt*=256);)Bt+=this[ue+it]*Yt;return Yt*=128,Bt>=Yt&&(Bt-=Math.pow(2,8*me)),Bt},s.prototype.readIntBE=function(ue,me,Xe){ue=ue>>>0,me=me>>>0,Xe||Ue(ue,me,this.length);let Bt=me,Yt=1,it=this[ue+--Bt];for(;Bt>0&&(Yt*=256);)it+=this[ue+--Bt]*Yt;return Yt*=128,it>=Yt&&(it-=Math.pow(2,8*me)),it},s.prototype.readInt8=function(ue,me){return ue=ue>>>0,me||Ue(ue,1,this.length),this[ue]&128?(255-this[ue]+1)*-1:this[ue]},s.prototype.readInt16LE=function(ue,me){ue=ue>>>0,me||Ue(ue,2,this.length);const Xe=this[ue]|this[ue+1]<<8;return Xe&32768?Xe|4294901760:Xe},s.prototype.readInt16BE=function(ue,me){ue=ue>>>0,me||Ue(ue,2,this.length);const Xe=this[ue+1]|this[ue]<<8;return Xe&32768?Xe|4294901760:Xe},s.prototype.readInt32LE=function(ue,me){return ue=ue>>>0,me||Ue(ue,4,this.length),this[ue]|this[ue+1]<<8|this[ue+2]<<16|this[ue+3]<<24},s.prototype.readInt32BE=function(ue,me){return ue=ue>>>0,me||Ue(ue,4,this.length),this[ue]<<24|this[ue+1]<<16|this[ue+2]<<8|this[ue+3]},s.prototype.readBigInt64LE=Qn(function(ue){ue=ue>>>0,gt(ue,"offset");const me=this[ue],Xe=this[ue+7];(me===void 0||Xe===void 0)&&Nt(ue,this.length-8);const Bt=this[ue+4]+this[ue+5]*2**8+this[ue+6]*2**16+(Xe<<24);return(BigInt(Bt)<<BigInt(32))+BigInt(me+this[++ue]*2**8+this[++ue]*2**16+this[++ue]*2**24)}),s.prototype.readBigInt64BE=Qn(function(ue){ue=ue>>>0,gt(ue,"offset");const me=this[ue],Xe=this[ue+7];(me===void 0||Xe===void 0)&&Nt(ue,this.length-8);const Bt=(me<<24)+this[++ue]*2**16+this[++ue]*2**8+this[++ue];return(BigInt(Bt)<<BigInt(32))+BigInt(this[++ue]*2**24+this[++ue]*2**16+this[++ue]*2**8+Xe)}),s.prototype.readFloatLE=function(ue,me){return ue=ue>>>0,me||Ue(ue,4,this.length),t.read(this,ue,!0,23,4)},s.prototype.readFloatBE=function(ue,me){return ue=ue>>>0,me||Ue(ue,4,this.length),t.read(this,ue,!1,23,4)},s.prototype.readDoubleLE=function(ue,me){return ue=ue>>>0,me||Ue(ue,8,this.length),t.read(this,ue,!0,52,8)},s.prototype.readDoubleBE=function(ue,me){return ue=ue>>>0,me||Ue(ue,8,this.length),t.read(this,ue,!1,52,8)};function st(Ge,ue,me,Xe,Bt,Yt){if(!s.isBuffer(Ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(ue>Bt||ue<Yt)throw new RangeError('"value" argument is out of bounds');if(me+Xe>Ge.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(ue,me,Xe,Bt){if(ue=+ue,me=me>>>0,Xe=Xe>>>0,!Bt){const Kt=Math.pow(2,8*Xe)-1;st(this,ue,me,Xe,Kt,0)}let Yt=1,it=0;for(this[me]=ue&255;++it<Xe&&(Yt*=256);)this[me+it]=ue/Yt&255;return me+Xe},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(ue,me,Xe,Bt){if(ue=+ue,me=me>>>0,Xe=Xe>>>0,!Bt){const Kt=Math.pow(2,8*Xe)-1;st(this,ue,me,Xe,Kt,0)}let Yt=Xe-1,it=1;for(this[me+Yt]=ue&255;--Yt>=0&&(it*=256);)this[me+Yt]=ue/it&255;return me+Xe},s.prototype.writeUint8=s.prototype.writeUInt8=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,1,255,0),this[me]=ue&255,me+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,2,65535,0),this[me]=ue&255,this[me+1]=ue>>>8,me+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,2,65535,0),this[me]=ue>>>8,this[me+1]=ue&255,me+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,4,4294967295,0),this[me+3]=ue>>>24,this[me+2]=ue>>>16,this[me+1]=ue>>>8,this[me]=ue&255,me+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,4,4294967295,0),this[me]=ue>>>24,this[me+1]=ue>>>16,this[me+2]=ue>>>8,this[me+3]=ue&255,me+4};function wt(Ge,ue,me,Xe,Bt){Mt(ue,Xe,Bt,Ge,me,7);let Yt=Number(ue&BigInt(4294967295));Ge[me++]=Yt,Yt=Yt>>8,Ge[me++]=Yt,Yt=Yt>>8,Ge[me++]=Yt,Yt=Yt>>8,Ge[me++]=Yt;let it=Number(ue>>BigInt(32)&BigInt(4294967295));return Ge[me++]=it,it=it>>8,Ge[me++]=it,it=it>>8,Ge[me++]=it,it=it>>8,Ge[me++]=it,me}function mt(Ge,ue,me,Xe,Bt){Mt(ue,Xe,Bt,Ge,me,7);let Yt=Number(ue&BigInt(4294967295));Ge[me+7]=Yt,Yt=Yt>>8,Ge[me+6]=Yt,Yt=Yt>>8,Ge[me+5]=Yt,Yt=Yt>>8,Ge[me+4]=Yt;let it=Number(ue>>BigInt(32)&BigInt(4294967295));return Ge[me+3]=it,it=it>>8,Ge[me+2]=it,it=it>>8,Ge[me+1]=it,it=it>>8,Ge[me]=it,me+8}s.prototype.writeBigUInt64LE=Qn(function(ue,me=0){return wt(this,ue,me,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Qn(function(ue,me=0){return mt(this,ue,me,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(ue,me,Xe,Bt){if(ue=+ue,me=me>>>0,!Bt){const Ye=Math.pow(2,8*Xe-1);st(this,ue,me,Xe,Ye-1,-Ye)}let Yt=0,it=1,Kt=0;for(this[me]=ue&255;++Yt<Xe&&(it*=256);)ue<0&&Kt===0&&this[me+Yt-1]!==0&&(Kt=1),this[me+Yt]=(ue/it>>0)-Kt&255;return me+Xe},s.prototype.writeIntBE=function(ue,me,Xe,Bt){if(ue=+ue,me=me>>>0,!Bt){const Ye=Math.pow(2,8*Xe-1);st(this,ue,me,Xe,Ye-1,-Ye)}let Yt=Xe-1,it=1,Kt=0;for(this[me+Yt]=ue&255;--Yt>=0&&(it*=256);)ue<0&&Kt===0&&this[me+Yt+1]!==0&&(Kt=1),this[me+Yt]=(ue/it>>0)-Kt&255;return me+Xe},s.prototype.writeInt8=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,1,127,-128),ue<0&&(ue=255+ue+1),this[me]=ue&255,me+1},s.prototype.writeInt16LE=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,2,32767,-32768),this[me]=ue&255,this[me+1]=ue>>>8,me+2},s.prototype.writeInt16BE=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,2,32767,-32768),this[me]=ue>>>8,this[me+1]=ue&255,me+2},s.prototype.writeInt32LE=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,4,2147483647,-2147483648),this[me]=ue&255,this[me+1]=ue>>>8,this[me+2]=ue>>>16,this[me+3]=ue>>>24,me+4},s.prototype.writeInt32BE=function(ue,me,Xe){return ue=+ue,me=me>>>0,Xe||st(this,ue,me,4,2147483647,-2147483648),ue<0&&(ue=4294967295+ue+1),this[me]=ue>>>24,this[me+1]=ue>>>16,this[me+2]=ue>>>8,this[me+3]=ue&255,me+4},s.prototype.writeBigInt64LE=Qn(function(ue,me=0){return wt(this,ue,me,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Qn(function(ue,me=0){return mt(this,ue,me,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ft(Ge,ue,me,Xe,Bt,Yt){if(me+Xe>Ge.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("Index out of range")}function Ut(Ge,ue,me,Xe,Bt){return ue=+ue,me=me>>>0,Bt||ft(Ge,ue,me,4),t.write(Ge,ue,me,Xe,23,4),me+4}s.prototype.writeFloatLE=function(ue,me,Xe){return Ut(this,ue,me,!0,Xe)},s.prototype.writeFloatBE=function(ue,me,Xe){return Ut(this,ue,me,!1,Xe)};function Lt(Ge,ue,me,Xe,Bt){return ue=+ue,me=me>>>0,Bt||ft(Ge,ue,me,8),t.write(Ge,ue,me,Xe,52,8),me+8}s.prototype.writeDoubleLE=function(ue,me,Xe){return Lt(this,ue,me,!0,Xe)},s.prototype.writeDoubleBE=function(ue,me,Xe){return Lt(this,ue,me,!1,Xe)},s.prototype.copy=function(ue,me,Xe,Bt){if(!s.isBuffer(ue))throw new TypeError("argument should be a Buffer");if(Xe||(Xe=0),!Bt&&Bt!==0&&(Bt=this.length),me>=ue.length&&(me=ue.length),me||(me=0),Bt>0&&Bt<Xe&&(Bt=Xe),Bt===Xe||ue.length===0||this.length===0)return 0;if(me<0)throw new RangeError("targetStart out of bounds");if(Xe<0||Xe>=this.length)throw new RangeError("Index out of range");if(Bt<0)throw new RangeError("sourceEnd out of bounds");Bt>this.length&&(Bt=this.length),ue.length-me<Bt-Xe&&(Bt=ue.length-me+Xe);const Yt=Bt-Xe;return this===ue&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(me,Xe,Bt):Uint8Array.prototype.set.call(ue,this.subarray(Xe,Bt),me),Yt},s.prototype.fill=function(ue,me,Xe,Bt){if(typeof ue=="string"){if(typeof me=="string"?(Bt=me,me=0,Xe=this.length):typeof Xe=="string"&&(Bt=Xe,Xe=this.length),Bt!==void 0&&typeof Bt!="string")throw new TypeError("encoding must be a string");if(typeof Bt=="string"&&!s.isEncoding(Bt))throw new TypeError("Unknown encoding: "+Bt);if(ue.length===1){const it=ue.charCodeAt(0);(Bt==="utf8"&&it<128||Bt==="latin1")&&(ue=it)}}else typeof ue=="number"?ue=ue&255:typeof ue=="boolean"&&(ue=Number(ue));if(me<0||this.length<me||this.length<Xe)throw new RangeError("Out of range index");if(Xe<=me)return this;me=me>>>0,Xe=Xe===void 0?this.length:Xe>>>0,ue||(ue=0);let Yt;if(typeof ue=="number")for(Yt=me;Yt<Xe;++Yt)this[Yt]=ue;else{const it=s.isBuffer(ue)?ue:s.from(ue,Bt),Kt=it.length;if(Kt===0)throw new TypeError('The value "'+ue+'" is invalid for argument "value"');for(Yt=0;Yt<Xe-me;++Yt)this[Yt+me]=it[Yt%Kt]}return this};const De={};function ke(Ge,ue,me){De[Ge]=class extends me{constructor(){super(),Object.defineProperty(this,"message",{value:ue.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ge}]`,this.stack,delete this.name}get code(){return Ge}set code(Bt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Bt,writable:!0})}toString(){return`${this.name} [${Ge}]: ${this.message}`}}}ke("ERR_BUFFER_OUT_OF_BOUNDS",function(Ge){return Ge?`${Ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ke("ERR_INVALID_ARG_TYPE",function(Ge,ue){return`The "${Ge}" argument must be of type number. Received type ${typeof ue}`},TypeError),ke("ERR_OUT_OF_RANGE",function(Ge,ue,me){let Xe=`The value of "${Ge}" is out of range.`,Bt=me;return Number.isInteger(me)&&Math.abs(me)>2**32?Bt=Oe(String(me)):typeof me=="bigint"&&(Bt=String(me),(me>BigInt(2)**BigInt(32)||me<-(BigInt(2)**BigInt(32)))&&(Bt=Oe(Bt)),Bt+="n"),Xe+=` It must be ${ue}. Received ${Bt}`,Xe},RangeError);function Oe(Ge){let ue="",me=Ge.length;const Xe=Ge[0]==="-"?1:0;for(;me>=Xe+4;me-=3)ue=`_${Ge.slice(me-3,me)}${ue}`;return`${Ge.slice(0,me)}${ue}`}function Je(Ge,ue,me){gt(ue,"offset"),(Ge[ue]===void 0||Ge[ue+me]===void 0)&&Nt(ue,Ge.length-(me+1))}function Mt(Ge,ue,me,Xe,Bt,Yt){if(Ge>me||Ge<ue){const it=typeof ue=="bigint"?"n":"";let Kt;throw ue===0||ue===BigInt(0)?Kt=`>= 0${it} and < 2${it} ** ${(Yt+1)*8}${it}`:Kt=`>= -(2${it} ** ${(Yt+1)*8-1}${it}) and < 2 ** ${(Yt+1)*8-1}${it}`,new De.ERR_OUT_OF_RANGE("value",Kt,Ge)}Je(Xe,Bt,Yt)}function gt(Ge,ue){if(typeof Ge!="number")throw new De.ERR_INVALID_ARG_TYPE(ue,"number",Ge)}function Nt(Ge,ue,me){throw Math.floor(Ge)!==Ge?(gt(Ge,me),new De.ERR_OUT_OF_RANGE("offset","an integer",Ge)):ue<0?new De.ERR_BUFFER_OUT_OF_BOUNDS:new De.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ue}`,Ge)}const nn=/[^+/0-9A-Za-z-_]/g;function en(Ge){if(Ge=Ge.split("=")[0],Ge=Ge.trim().replace(nn,""),Ge.length<2)return"";for(;Ge.length%4!==0;)Ge=Ge+"=";return Ge}function Sn(Ge,ue){ue=ue||1/0;let me;const Xe=Ge.length;let Bt=null;const Yt=[];for(let it=0;it<Xe;++it){if(me=Ge.charCodeAt(it),me>55295&&me<57344){if(!Bt){if(me>56319){(ue-=3)>-1&&Yt.push(239,191,189);continue}else if(it+1===Xe){(ue-=3)>-1&&Yt.push(239,191,189);continue}Bt=me;continue}if(me<56320){(ue-=3)>-1&&Yt.push(239,191,189),Bt=me;continue}me=(Bt-55296<<10|me-56320)+65536}else Bt&&(ue-=3)>-1&&Yt.push(239,191,189);if(Bt=null,me<128){if((ue-=1)<0)break;Yt.push(me)}else if(me<2048){if((ue-=2)<0)break;Yt.push(me>>6|192,me&63|128)}else if(me<65536){if((ue-=3)<0)break;Yt.push(me>>12|224,me>>6&63|128,me&63|128)}else if(me<1114112){if((ue-=4)<0)break;Yt.push(me>>18|240,me>>12&63|128,me>>6&63|128,me&63|128)}else throw new Error("Invalid code point")}return Yt}function Yn(Ge){const ue=[];for(let me=0;me<Ge.length;++me)ue.push(Ge.charCodeAt(me)&255);return ue}function Qr(Ge,ue){let me,Xe,Bt;const Yt=[];for(let it=0;it<Ge.length&&!((ue-=2)<0);++it)me=Ge.charCodeAt(it),Xe=me>>8,Bt=me%256,Yt.push(Bt),Yt.push(Xe);return Yt}function cr(Ge){return e.toByteArray(en(Ge))}function fr(Ge,ue,me,Xe){let Bt;for(Bt=0;Bt<Xe&&!(Bt+me>=ue.length||Bt>=Ge.length);++Bt)ue[Bt+me]=Ge[Bt];return Bt}function br(Ge,ue){return Ge instanceof ue||Ge!=null&&Ge.constructor!=null&&Ge.constructor.name!=null&&Ge.constructor.name===ue.name}function Cr(Ge){return Ge!==Ge}const Mr=function(){const Ge="0123456789abcdef",ue=new Array(256);for(let me=0;me<16;++me){const Xe=me*16;for(let Bt=0;Bt<16;++Bt)ue[Xe+Bt]=Ge[me]+Ge[Bt]}return ue}();function Qn(Ge){return typeof BigInt>"u"?Sr:Ge}function Sr(){throw new Error("BigInt not supported")}}(z3)),z3}var IQ=OQ();const kQ=Ka(IQ);var j3,x8;function TQ(){if(x8)return j3;x8=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,s=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/[\\^$.*+?()[\]{}|]/g,b=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,S=typeof window=="object"&&window&&window.Object===Object&&window,I=typeof self=="object"&&self&&self.Object===Object&&self,k=S||I||Function("return this")();function U(fe,xe){return fe==null?void 0:fe[xe]}function z(fe){var xe=!1;if(fe!=null&&typeof fe.toString!="function")try{xe=!!(fe+"")}catch{}return xe}var Y=Array.prototype,Q=Function.prototype,ne=Object.prototype,X=k["__core-js_shared__"],q=function(){var fe=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return fe?"Symbol(src)_1."+fe:""}(),J=Q.toString,N=ne.hasOwnProperty,ie=ne.toString,he=RegExp("^"+J.call(N).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ce=k.Symbol,we=Y.splice,pe=cr(k,"Map"),Ce=cr(Object,"create"),Pe=ce?ce.prototype:void 0,de=Pe?Pe.toString:void 0;function rt(fe){var xe=-1,p=fe?fe.length:0;for(this.clear();++xe<p;){var Ne=fe[xe];this.set(Ne[0],Ne[1])}}function ze(){this.__data__=Ce?Ce(null):{}}function Qe(fe){return this.has(fe)&&delete this.__data__[fe]}function ut(fe){var xe=this.__data__;if(Ce){var p=xe[fe];return p===e?void 0:p}return N.call(xe,fe)?xe[fe]:void 0}function Te(fe){var xe=this.__data__;return Ce?xe[fe]!==void 0:N.call(xe,fe)}function Ue(fe,xe){var p=this.__data__;return p[fe]=Ce&&xe===void 0?e:xe,this}rt.prototype.clear=ze,rt.prototype.delete=Qe,rt.prototype.get=ut,rt.prototype.has=Te,rt.prototype.set=Ue;function st(fe){var xe=-1,p=fe?fe.length:0;for(this.clear();++xe<p;){var Ne=fe[xe];this.set(Ne[0],Ne[1])}}function wt(){this.__data__=[]}function mt(fe){var xe=this.__data__,p=Nt(xe,fe);if(p<0)return!1;var Ne=xe.length-1;return p==Ne?xe.pop():we.call(xe,p,1),!0}function ft(fe){var xe=this.__data__,p=Nt(xe,fe);return p<0?void 0:xe[p][1]}function Ut(fe){return Nt(this.__data__,fe)>-1}function Lt(fe,xe){var p=this.__data__,Ne=Nt(p,fe);return Ne<0?p.push([fe,xe]):p[Ne][1]=xe,this}st.prototype.clear=wt,st.prototype.delete=mt,st.prototype.get=ft,st.prototype.has=Ut,st.prototype.set=Lt;function De(fe){var xe=-1,p=fe?fe.length:0;for(this.clear();++xe<p;){var Ne=fe[xe];this.set(Ne[0],Ne[1])}}function ke(){this.__data__={hash:new rt,map:new(pe||st),string:new rt}}function Oe(fe){return Qr(this,fe).delete(fe)}function Je(fe){return Qr(this,fe).get(fe)}function Mt(fe){return Qr(this,fe).has(fe)}function gt(fe,xe){return Qr(this,fe).set(fe,xe),this}De.prototype.clear=ke,De.prototype.delete=Oe,De.prototype.get=Je,De.prototype.has=Mt,De.prototype.set=gt;function Nt(fe,xe){for(var p=fe.length;p--;)if(ue(fe[p][0],xe))return p;return-1}function nn(fe,xe){xe=fr(xe,fe)?[xe]:Yn(xe);for(var p=0,Ne=xe.length;fe!=null&&p<Ne;)fe=fe[Qn(xe[p++])];return p&&p==Ne?fe:void 0}function en(fe){if(!Bt(fe)||Cr(fe))return!1;var xe=Xe(fe)||z(fe)?he:B;return xe.test(Sr(fe))}function Sn(fe){if(typeof fe=="string")return fe;if(it(fe))return de?de.call(fe):"";var xe=fe+"";return xe=="0"&&1/fe==-1/0?"-0":xe}function Yn(fe){return me(fe)?fe:Mr(fe)}function Qr(fe,xe){var p=fe.__data__;return br(xe)?p[typeof xe=="string"?"string":"hash"]:p.map}function cr(fe,xe){var p=U(fe,xe);return en(p)?p:void 0}function fr(fe,xe){if(me(fe))return!1;var p=typeof fe;return p=="number"||p=="symbol"||p=="boolean"||fe==null||it(fe)?!0:a.test(fe)||!o.test(fe)||xe!=null&&fe in Object(xe)}function br(fe){var xe=typeof fe;return xe=="string"||xe=="number"||xe=="symbol"||xe=="boolean"?fe!=="__proto__":fe===null}function Cr(fe){return!!q&&q in fe}var Mr=Ge(function(fe){fe=Kt(fe);var xe=[];return s.test(fe)&&xe.push(""),fe.replace(h,function(p,Ne,dt,pt){xe.push(dt?pt.replace(b,"$1"):Ne||p)}),xe});function Qn(fe){if(typeof fe=="string"||it(fe))return fe;var xe=fe+"";return xe=="0"&&1/fe==-1/0?"-0":xe}function Sr(fe){if(fe!=null){try{return J.call(fe)}catch{}try{return fe+""}catch{}}return""}function Ge(fe,xe){if(typeof fe!="function"||xe&&typeof xe!="function")throw new TypeError(n);var p=function(){var Ne=arguments,dt=xe?xe.apply(this,Ne):Ne[0],pt=p.cache;if(pt.has(dt))return pt.get(dt);var Ot=fe.apply(this,Ne);return p.cache=pt.set(dt,Ot),Ot};return p.cache=new(Ge.Cache||De),p}Ge.Cache=De;function ue(fe,xe){return fe===xe||fe!==fe&&xe!==xe}var me=Array.isArray;function Xe(fe){var xe=Bt(fe)?ie.call(fe):"";return xe==t||xe==r}function Bt(fe){var xe=typeof fe;return!!fe&&(xe=="object"||xe=="function")}function Yt(fe){return!!fe&&typeof fe=="object"}function it(fe){return typeof fe=="symbol"||Yt(fe)&&ie.call(fe)==i}function Kt(fe){return fe==null?"":Sn(fe)}function Ye(fe,xe,p){var Ne=fe==null?void 0:nn(fe,xe);return Ne===void 0?p:Ne}return j3=Ye,j3}var PQ=TQ();const RQ=Ka(PQ);var yv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var KQ=yv.exports,w8;function DQ(){return w8||(w8=1,function(n,e){(function(){var t,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",g=500,b="__lodash_placeholder__",B=1,S=2,I=4,k=1,U=2,z=1,Y=2,Q=4,ne=8,X=16,q=32,J=64,N=128,ie=256,he=512,ce=30,we="...",pe=800,Ce=16,Pe=1,de=2,rt=3,ze=1/0,Qe=9007199254740991,ut=17976931348623157e292,Te=NaN,Ue=4294967295,st=Ue-1,wt=Ue>>>1,mt=[["ary",N],["bind",z],["bindKey",Y],["curry",ne],["curryRight",X],["flip",he],["partial",q],["partialRight",J],["rearg",ie]],ft="[object Arguments]",Ut="[object Array]",Lt="[object AsyncFunction]",De="[object Boolean]",ke="[object Date]",Oe="[object DOMException]",Je="[object Error]",Mt="[object Function]",gt="[object GeneratorFunction]",Nt="[object Map]",nn="[object Number]",en="[object Null]",Sn="[object Object]",Yn="[object Promise]",Qr="[object Proxy]",cr="[object RegExp]",fr="[object Set]",br="[object String]",Cr="[object Symbol]",Mr="[object Undefined]",Qn="[object WeakMap]",Sr="[object WeakSet]",Ge="[object ArrayBuffer]",ue="[object DataView]",me="[object Float32Array]",Xe="[object Float64Array]",Bt="[object Int8Array]",Yt="[object Int16Array]",it="[object Int32Array]",Kt="[object Uint8Array]",Ye="[object Uint8ClampedArray]",fe="[object Uint16Array]",xe="[object Uint32Array]",p=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39);/g,Ot=/[&<>"']/g,_t=RegExp(pt.source),rn=RegExp(Ot.source),Zt=/<%-([\s\S]+?)%>/g,Gt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,Pn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,En=/^\w*$/,lr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wr=/[\\^$.*+?()[\]{}|]/g,on=RegExp(wr.source),zn=/^\s+/,Dn=/\s/,Br=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xr=/\{\n\/\* \[wrapped with (.+)\] \*/,Rr=/,? & /,rr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,co=/[()=,{}\[\]\/\s]/,$a=/\\(\\)?/g,ji=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ui=/\w*$/,Vi=/^[-+]0x[0-9a-f]+$/i,as=/^0b[01]+$/i,Ni=/^\[object .+?Constructor\]$/,ll=/^0o[0-7]+$/i,ul=/^(?:0|[1-9]\d*)$/,ts=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Aa=/($^)/,Al=/['\n\r\u2028\u2029\\]/g,ao="\\ud800-\\udfff",Pu="\\u0300-\\u036f",tu="\\ufe20-\\ufe2f",so="\\u20d0-\\u20ff",Kr=Pu+tu+so,Va="\\u2700-\\u27bf",Ts="a-z\\xdf-\\xf6\\xf8-\\xff",ia="\\xac\\xb1\\xd7\\xf7",We="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ct="\\u2000-\\u206f",pn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nn="A-Z\\xc0-\\xd6\\xd8-\\xde",An="\\ufe0e\\ufe0f",er=ia+We+Ct+pn,Ti="['’]",ho="["+ao+"]",vs="["+er+"]",js="["+Kr+"]",vA="\\d+",ri="["+Va+"]",wi="["+Ts+"]",Ha="[^"+ao+er+vA+Va+Ts+Nn+"]",ci="\\ud83c[\\udffb-\\udfff]",ca="(?:"+js+"|"+ci+")",iA="[^"+ao+"]",ls="(?:\\ud83c[\\udde6-\\uddff]){2}",Dr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ei="["+Nn+"]",Za="\\u200d",Ps="(?:"+wi+"|"+Ha+")",Mo="(?:"+Ei+"|"+Ha+")",Ns="(?:"+Ti+"(?:d|ll|m|re|s|t|ve))?",du="(?:"+Ti+"(?:D|LL|M|RE|S|T|VE))?",zl=ca+"?",ns="["+An+"]?",Vs="(?:"+Za+"(?:"+[iA,ls,Dr].join("|")+")"+ns+zl+")*",fo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ms="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ws=ns+zl+Vs,Xa="(?:"+[ri,ls,Dr].join("|")+")"+ws,Rs="(?:"+[iA+js+"?",js,ls,Dr,ho].join("|")+")",El=RegExp(Ti,"g"),oA=RegExp(js,"g"),Hi=RegExp(ci+"(?="+ci+")|"+Rs+ws,"g"),nu=RegExp([Ei+"?"+wi+"+"+Ns+"(?="+[vs,Ei,"$"].join("|")+")",Mo+"+"+du+"(?="+[vs,Ei+Ps,"$"].join("|")+")",Ei+"?"+Ps+"+"+Ns,Ei+"+"+du,ms,fo,vA,Xa].join("|"),"g"),Fi=RegExp("["+Za+ao+Kr+An+"]"),Jr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ru=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gi=-1,lo={};lo[me]=lo[Xe]=lo[Bt]=lo[Yt]=lo[it]=lo[Kt]=lo[Ye]=lo[fe]=lo[xe]=!0,lo[ft]=lo[Ut]=lo[Ge]=lo[De]=lo[ue]=lo[ke]=lo[Je]=lo[Mt]=lo[Nt]=lo[nn]=lo[Sn]=lo[cr]=lo[fr]=lo[br]=lo[Qn]=!1;var Pi={};Pi[ft]=Pi[Ut]=Pi[Ge]=Pi[ue]=Pi[De]=Pi[ke]=Pi[me]=Pi[Xe]=Pi[Bt]=Pi[Yt]=Pi[it]=Pi[Nt]=Pi[nn]=Pi[Sn]=Pi[cr]=Pi[fr]=Pi[br]=Pi[Cr]=Pi[Kt]=Pi[Ye]=Pi[fe]=Pi[xe]=!0,Pi[Je]=Pi[Mt]=Pi[Qn]=!1;var ee={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Or=parseFloat,Gn=parseInt,si=typeof window=="object"&&window&&window.Object===Object&&window,hi=typeof self=="object"&&self&&self.Object===Object&&self,pr=si||hi||Function("return this")(),Ir=e&&!e.nodeType&&e,vi=Ir&&!0&&n&&!n.nodeType&&n,So=vi&&vi.exports===Ir,ki=So&&si.process,qr=function(){try{var Vt=vi&&vi.require&&vi.require("util").types;return Vt||ki&&ki.binding&&ki.binding("util")}catch{}}(),Zi=qr&&qr.isArrayBuffer,Xi=qr&&qr.isDate,us=qr&&qr.isMap,ya=qr&&qr.isRegExp,La=qr&&qr.isSet,fu=qr&&qr.isTypedArray;function Hs(Vt,Tn,an){switch(an.length){case 0:return Vt.call(Tn);case 1:return Vt.call(Tn,an[0]);case 2:return Vt.call(Tn,an[0],an[1]);case 3:return Vt.call(Tn,an[0],an[1],an[2])}return Vt.apply(Tn,an)}function hc(Vt,Tn,an,Fr){for(var _i=-1,Co=Vt==null?0:Vt.length;++_i<Co;){var oa=Vt[_i];Tn(Fr,oa,an(oa),Vt)}return Fr}function Sa(Vt,Tn){for(var an=-1,Fr=Vt==null?0:Vt.length;++an<Fr&&Tn(Vt[an],an,Vt)!==!1;);return Vt}function cl(Vt,Tn){for(var an=Vt==null?0:Vt.length;an--&&Tn(Vt[an],an,Vt)!==!1;);return Vt}function lh(Vt,Tn){for(var an=-1,Fr=Vt==null?0:Vt.length;++an<Fr;)if(!Tn(Vt[an],an,Vt))return!1;return!0}function Ru(Vt,Tn){for(var an=-1,Fr=Vt==null?0:Vt.length,_i=0,Co=[];++an<Fr;){var oa=Vt[an];Tn(oa,an,Vt)&&(Co[_i++]=oa)}return Co}function Ku(Vt,Tn){var an=Vt==null?0:Vt.length;return!!an&&Zs(Vt,Tn,0)>-1}function bd(Vt,Tn,an){for(var Fr=-1,_i=Vt==null?0:Vt.length;++Fr<_i;)if(an(Tn,Vt[Fr]))return!0;return!1}function Ms(Vt,Tn){for(var an=-1,Fr=Vt==null?0:Vt.length,_i=Array(Fr);++an<Fr;)_i[an]=Tn(Vt[an],an,Vt);return _i}function Du(Vt,Tn){for(var an=-1,Fr=Tn.length,_i=Vt.length;++an<Fr;)Vt[_i+an]=Tn[an];return Vt}function uh(Vt,Tn,an,Fr){var _i=-1,Co=Vt==null?0:Vt.length;for(Fr&&Co&&(an=Vt[++_i]);++_i<Co;)an=Tn(an,Vt[_i],_i,Vt);return an}function gp(Vt,Tn,an,Fr){var _i=Vt==null?0:Vt.length;for(Fr&&_i&&(an=Vt[--_i]);_i--;)an=Tn(an,Vt[_i],_i,Vt);return an}function sA(Vt,Tn){for(var an=-1,Fr=Vt==null?0:Vt.length;++an<Fr;)if(Tn(Vt[an],an,Vt))return!0;return!1}var qh=tf("length");function Lc(Vt){return Vt.split("")}function yp(Vt){return Vt.match(rr)||[]}function Rf(Vt,Tn,an){var Fr;return an(Vt,function(_i,Co,oa){if(Tn(_i,Co,oa))return Fr=Co,!1}),Fr}function dc(Vt,Tn,an,Fr){for(var _i=Vt.length,Co=an+(Fr?1:-1);Fr?Co--:++Co<_i;)if(Tn(Vt[Co],Co,Vt))return Co;return-1}function Zs(Vt,Tn,an){return Tn===Tn?Ed(Vt,Tn,an):dc(Vt,ef,an)}function xd(Vt,Tn,an,Fr){for(var _i=an-1,Co=Vt.length;++_i<Co;)if(Fr(Vt[_i],Tn))return _i;return-1}function ef(Vt){return Vt!==Vt}function Ah(Vt,Tn){var an=Vt==null?0:Vt.length;return an?Md(Vt,Tn)/an:Te}function tf(Vt){return function(Tn){return Tn==null?t:Tn[Vt]}}function ch(Vt){return function(Tn){return Vt==null?t:Vt[Tn]}}function fc(Vt,Tn,an,Fr,_i){return _i(Vt,function(Co,oa,$o){an=Fr?(Fr=!1,Co):Tn(an,Co,oa,$o)}),an}function wd(Vt,Tn){var an=Vt.length;for(Vt.sort(Tn);an--;)Vt[an]=Vt[an].value;return Vt}function Md(Vt,Tn){for(var an,Fr=-1,_i=Vt.length;++Fr<_i;){var Co=Tn(Vt[Fr]);Co!==t&&(an=an===t?Co:an+Co)}return an}function hh(Vt,Tn){for(var an=-1,Fr=Array(Vt);++an<Vt;)Fr[an]=Tn(an);return Fr}function am(Vt,Tn){return Ms(Tn,function(an){return[an,Vt[an]]})}function Fc(Vt){return Vt&&Vt.slice(0,$h(Vt)+1).replace(zn,"")}function pu(Vt){return function(Tn){return Vt(Tn)}}function Sd(Vt,Tn){return Ms(Tn,function(an){return Vt[an]})}function mu(Vt,Tn){return Vt.has(Tn)}function aA(Vt,Tn){for(var an=-1,Fr=Vt.length;++an<Fr&&Zs(Tn,Vt[an],0)>-1;);return an}function Uc(Vt,Tn){for(var an=Vt.length;an--&&Zs(Tn,Vt[an],0)>-1;);return an}function Yh(Vt,Tn){for(var an=Vt.length,Fr=0;an--;)Vt[an]===Tn&&++Fr;return Fr}var nf=ch(ee),iu=ch(Se);function Bl(Vt){return"\\"+$t[Vt]}function WA(Vt,Tn){return Vt==null?t:Vt[Tn]}function zc(Vt){return Fi.test(Vt)}function rf(Vt){return Jr.test(Vt)}function Kf(Vt){for(var Tn,an=[];!(Tn=Vt.next()).done;)an.push(Tn.value);return an}function dh(Vt){var Tn=-1,an=Array(Vt.size);return Vt.forEach(function(Fr,_i){an[++Tn]=[_i,Fr]}),an}function _A(Vt,Tn){return function(an){return Vt(Tn(an))}}function Ja(Vt,Tn){for(var an=-1,Fr=Vt.length,_i=0,Co=[];++an<Fr;){var oa=Vt[an];(oa===Tn||oa===b)&&(Vt[an]=b,Co[_i++]=an)}return Co}function Ol(Vt){var Tn=-1,an=Array(Vt.size);return Vt.forEach(function(Fr){an[++Tn]=Fr}),an}function Yo(Vt){var Tn=-1,an=Array(Vt.size);return Vt.forEach(function(Fr){an[++Tn]=[Fr,Fr]}),an}function Ed(Vt,Tn,an){for(var Fr=an-1,_i=Vt.length;++Fr<_i;)if(Vt[Fr]===Tn)return Fr;return-1}function lm(Vt,Tn,an){for(var Fr=an+1;Fr--;)if(Vt[Fr]===Tn)return Fr;return Fr}function jc(Vt){return zc(Vt)?pc(Vt):qh(Vt)}function Lu(Vt){return zc(Vt)?Hh(Vt):Lc(Vt)}function $h(Vt){for(var Tn=Vt.length;Tn--&&Dn.test(Vt.charAt(Tn)););return Tn}var Vh=ch(tt);function pc(Vt){for(var Tn=Hi.lastIndex=0;Hi.test(Vt);)++Tn;return Tn}function Hh(Vt){return Vt.match(Hi)||[]}function of(Vt){return Vt.match(nu)||[]}var mc=function Vt(Tn){Tn=Tn==null?pr:gu.defaults(pr.Object(),Tn,gu.pick(pr,ru));var an=Tn.Array,Fr=Tn.Date,_i=Tn.Error,Co=Tn.Function,oa=Tn.Math,$o=Tn.Object,QA=Tn.RegExp,vp=Tn.String,Il=Tn.TypeError,yu=an.prototype,qA=Co.prototype,kl=$o.prototype,Wi=Tn["__core-js_shared__"],YA=qA.toString,Fo=kl.hasOwnProperty,Nc=0,$A=function(){var x=/[^.]+$/.exec(Wi&&Wi.keys&&Wi.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),CA=kl.toString,lA=YA.call($o),Tl=pr._,gc=QA("^"+YA.call(Fo).replace(wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vu=So?Tn.Buffer:t,jl=Tn.Symbol,Gc=Tn.Uint8Array,Zh=vu?vu.allocUnsafe:t,Fa=_A($o.getPrototypeOf,$o),fh=$o.create,yc=kl.propertyIsEnumerable,VA=yu.splice,sf=jl?jl.isConcatSpreadable:t,bA=jl?jl.iterator:t,HA=jl?jl.toStringTag:t,Wc=function(){try{var x=Th($o,"defineProperty");return x({},"",{}),x}catch{}}(),Xh=Tn.clearTimeout!==pr.clearTimeout&&Tn.clearTimeout,Vo=Fr&&Fr.now!==pr.Date.now&&Fr.now,Qc=Tn.setTimeout!==pr.setTimeout&&Tn.setTimeout,ZA=oa.ceil,Fu=oa.floor,qc=$o.getOwnPropertySymbols,Jh=vu?vu.isBuffer:t,Yc=Tn.isFinite,vc=yu.join,As=_A($o.keys,$o),Uo=oa.max,cs=oa.min,Df=Fr.now,ph=Tn.parseInt,mh=oa.random,Uu=yu.reverse,XA=Th(Tn,"DataView"),Nl=Th(Tn,"Map"),xA=Th(Tn,"Promise"),hl=Th(Tn,"Set"),JA=Th(Tn,"WeakMap"),zu=Th($o,"create"),gh=JA&&new JA,ju={},ed=ba(XA),ec=ba(Nl),Nu=ba(xA),Gu=ba(hl),wA=ba(JA),_c=jl?jl.prototype:t,_u=_c?_c.valueOf:t,$c=_c?_c.toString:t;function et(x){if(xl(x)&&!vo(x)&&!(x instanceof $r)){if(x instanceof Ri)return x;if(Fo.call(x,"__wrapped__"))return Yl(x)}return new Ri(x)}var Ua=function(){function x(){}return function(P){if(!bl(P))return{};if(fh)return fh(P);x.prototype=P;var V=new x;return x.prototype=t,V}}();function Eo(){}function Ri(x,P){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!P,this.__index__=0,this.__values__=t}et.templateSettings={escape:Zt,evaluate:Gt,interpolate:bt,variable:"",imports:{_:et}},et.prototype=Eo.prototype,et.prototype.constructor=et,Ri.prototype=Ua(Eo.prototype),Ri.prototype.constructor=Ri;function $r(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ue,this.__views__=[]}function Ss(){var x=new $r(this.__wrapped__);return x.__actions__=Ia(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=Ia(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=Ia(this.__views__),x}function yh(){if(this.__filtered__){var x=new $r(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function td(){var x=this.__wrapped__.value(),P=this.__dir__,V=vo(x),ye=P<0,$e=V?x.length:0,lt=cm(0,$e,this.__views__),Dt=lt.start,qt=lt.end,sn=qt-Dt,Wn=ye?qt:Dt-1,qn=this.__iteratees__,ur=qn.length,Zr=0,xi=cs(sn,this.__takeCount__);if(!V||!ye&&$e==sn&&xi==sn)return pl(x,this.__actions__);var eo=[];e:for(;sn--&&Zr<xi;){Wn+=P;for(var is=-1,to=x[Wn];++is<ur;){var xs=qn[is],Ls=xs.iteratee,Nd=xs.type,zh=Ls(to);if(Nd==de)to=zh;else if(!zh){if(Nd==Pe)continue e;break e}}eo[Zr++]=to}return eo}$r.prototype=Ua(Eo.prototype),$r.prototype.constructor=$r;function Ea(x){var P=-1,V=x==null?0:x.length;for(this.clear();++P<V;){var ye=x[P];this.set(ye[0],ye[1])}}function Gs(){this.__data__=zu?zu(null):{},this.size=0}function _s(x){var P=this.has(x)&&delete this.__data__[x];return this.size-=P?1:0,P}function uA(x){var P=this.__data__;if(zu){var V=P[x];return V===h?t:V}return Fo.call(P,x)?P[x]:t}function Es(x){var P=this.__data__;return zu?P[x]!==t:Fo.call(P,x)}function dr(x,P){var V=this.__data__;return this.size+=this.has(x)?0:1,V[x]=zu&&P===t?h:P,this}Ea.prototype.clear=Gs,Ea.prototype.delete=_s,Ea.prototype.get=uA,Ea.prototype.has=Es,Ea.prototype.set=dr;function va(x){var P=-1,V=x==null?0:x.length;for(this.clear();++P<V;){var ye=x[P];this.set(ye[0],ye[1])}}function Vc(){this.__data__=[],this.size=0}function Ba(x){var P=this.__data__,V=gs(P,x);if(V<0)return!1;var ye=P.length-1;return V==ye?P.pop():VA.call(P,V,1),--this.size,!0}function tc(x){var P=this.__data__,V=gs(P,x);return V<0?t:P[V][1]}function vh(x){return gs(this.__data__,x)>-1}function _h(x,P){var V=this.__data__,ye=gs(V,x);return ye<0?(++this.size,V.push([x,P])):V[ye][1]=P,this}va.prototype.clear=Vc,va.prototype.delete=Ba,va.prototype.get=tc,va.prototype.has=vh,va.prototype.set=_h;function Mi(x){var P=-1,V=x==null?0:x.length;for(this.clear();++P<V;){var ye=x[P];this.set(ye[0],ye[1])}}function Ch(){this.size=0,this.__data__={hash:new Ea,map:new(Nl||va),string:new Ea}}function Gl(x){var P=Zc(this,x).delete(x);return this.size-=P?1:0,P}function bh(x){return Zc(this,x).get(x)}function xh(x){return Zc(this,x).has(x)}function MA(x,P){var V=Zc(this,x),ye=V.size;return V.set(x,P),this.size+=V.size==ye?0:1,this}Mi.prototype.clear=Ch,Mi.prototype.delete=Gl,Mi.prototype.get=bh,Mi.prototype.has=xh,Mi.prototype.set=MA;function nc(x){var P=-1,V=x==null?0:x.length;for(this.__data__=new Mi;++P<V;)this.add(x[P])}function AA(x){return this.__data__.set(x,h),this}function Cc(x){return this.__data__.has(x)}nc.prototype.add=nc.prototype.push=AA,nc.prototype.has=Cc;function Bs(x){var P=this.__data__=new va(x);this.size=P.size}function bo(){this.__data__=new va,this.size=0}function Cu(x){var P=this.__data__,V=P.delete(x);return this.size=P.size,V}function za(x){return this.__data__.get(x)}function Ks(x){return this.__data__.has(x)}function Ho(x,P){var V=this.__data__;if(V instanceof va){var ye=V.__data__;if(!Nl||ye.length<i-1)return ye.push([x,P]),this.size=++V.size,this;V=this.__data__=new Mi(ye)}return V.set(x,P),this.size=V.size,this}Bs.prototype.clear=bo,Bs.prototype.delete=Cu,Bs.prototype.get=za,Bs.prototype.has=Ks,Bs.prototype.set=Ho;function ou(x,P){var V=vo(x),ye=!V&&bm(x),$e=!V&&!ye&&zd(x),lt=!V&&!ye&&!$e&&Kp(x),Dt=V||ye||$e||lt,qt=Dt?hh(x.length,vp):[],sn=qt.length;for(var Wn in x)(P||Fo.call(x,Wn))&&!(Dt&&(Wn=="length"||$e&&(Wn=="offset"||Wn=="parent")||lt&&(Wn=="buffer"||Wn=="byteLength"||Wn=="byteOffset")||O(Wn,sn)))&&qt.push(Wn);return qt}function Wu(x){var P=x.length;return P?x[vn(0,P-1)]:t}function bc(x,P){return Ga(Ia(x),bu(P,0,x.length))}function nd(x){return Ga(Ia(x))}function SA(x,P,V){(V!==t&&!ld(x[P],V)||V===t&&!(P in x))&&Qu(x,P,V)}function xc(x,P,V){var ye=x[P];(!(Fo.call(x,P)&&ld(ye,V))||V===t&&!(P in x))&&Qu(x,P,V)}function gs(x,P){for(var V=x.length;V--;)if(ld(x[V][0],P))return V;return-1}function ha(x,P,V,ye){return To(x,function($e,lt,Dt){P(ye,$e,V($e),Dt)}),ye}function hr(x,P){return x&&Au(P,jr(P),x)}function Hr(x,P){return x&&Au(P,Wr(P),x)}function Qu(x,P,V){P=="__proto__"&&Wc?Wc(x,P,{configurable:!0,enumerable:!0,value:V,writable:!0}):x[P]=V}function rc(x,P){for(var V=-1,ye=P.length,$e=an(ye),lt=x==null;++V<ye;)$e[V]=lt?t:bn(x,P[V]);return $e}function bu(x,P,V){return x===x&&(V!==t&&(x=x<=V?x:V),P!==t&&(x=x>=P?x:P)),x}function Cs(x,P,V,ye,$e,lt){var Dt,qt=P&B,sn=P&S,Wn=P&I;if(V&&(Dt=$e?V(x,ye,$e,lt):V(x)),Dt!==t)return Dt;if(!bl(x))return x;var qn=vo(x);if(qn){if(Dt=cf(x),!qt)return Ia(x,Dt)}else{var ur=gl(x),Zr=ur==Mt||ur==gt;if(zd(x))return bs(x,qt);if(ur==Sn||ur==ft||Zr&&!$e){if(Dt=sn||Zr?{}:nl(x),!qt)return sn?_p(x,Hr(Dt,x)):Eh(x,hr(Dt,x))}else{if(!Pi[ur])return $e?x:{};Dt=Ep(x,ur,qt)}}lt||(lt=new Bs);var xi=lt.get(x);if(xi)return xi;lt.set(x,Dt),e1(x)?x.forEach(function(to){Dt.add(Cs(to,P,V,to,x,lt))}):fC(x)&&x.forEach(function(to,xs){Dt.set(xs,Cs(to,P,V,xs,x,lt))});var eo=Wn?sn?Af:uf:sn?Wr:jr,is=qn?t:eo(x);return Sa(is||x,function(to,xs){is&&(xs=to,to=x[xs]),xc(Dt,xs,Cs(to,P,V,xs,x,lt))}),Dt}function Lf(x){var P=jr(x);return function(V){return su(V,x,P)}}function su(x,P,V){var ye=V.length;if(x==null)return!ye;for(x=$o(x);ye--;){var $e=V[ye],lt=P[$e],Dt=x[$e];if(Dt===t&&!($e in x)||!lt(Dt))return!1}return!0}function Ff(x,P,V){if(typeof x!="function")throw new Il(a);return ai(function(){x.apply(t,V)},P)}function xu(x,P,V,ye){var $e=-1,lt=Ku,Dt=!0,qt=x.length,sn=[],Wn=P.length;if(!qt)return sn;V&&(P=Ms(P,pu(V))),ye?(lt=bd,Dt=!1):P.length>=i&&(lt=mu,Dt=!1,P=new nc(P));e:for(;++$e<qt;){var qn=x[$e],ur=V==null?qn:V(qn);if(qn=ye||qn!==0?qn:0,Dt&&ur===ur){for(var Zr=Wn;Zr--;)if(P[Zr]===ur)continue e;sn.push(qn)}else lt(P,ur,ye)||sn.push(qn)}return sn}var To=Na(dl),Os=Na(qu,!0);function rd(x,P){var V=!0;return To(x,function(ye,$e,lt){return V=!!P(ye,$e,lt),V}),V}function EA(x,P,V){for(var ye=-1,$e=x.length;++ye<$e;){var lt=x[ye],Dt=P(lt);if(Dt!=null&&(qt===t?Dt===Dt&&!KA(Dt):V(Dt,qt)))var qt=Dt,sn=lt}return sn}function id(x,P,V,ye){var $e=x.length;for(V=w(V),V<0&&(V=-V>$e?0:$e+V),ye=ye===t||ye>$e?$e:w(ye),ye<0&&(ye+=$e),ye=V>ye?0:D(ye);V<ye;)x[V++]=P;return x}function BA(x,P){var V=[];return To(x,function(ye,$e,lt){P(ye,$e,lt)&&V.push(ye)}),V}function Ws(x,P,V,ye,$e){var lt=-1,Dt=x.length;for(V||(V=y),$e||($e=[]);++lt<Dt;){var qt=x[lt];P>0&&V(qt)?P>1?Ws(qt,P-1,V,ye,$e):Du($e,qt):ye||($e[$e.length]=qt)}return $e}var wc=Cp(),Wl=Cp(!0);function dl(x,P){return x&&wc(x,P,jr)}function qu(x,P){return x&&Wl(x,P,jr)}function Mc(x,P){return Ru(P,function(V){return ac(x[V])})}function wu(x,P){P=Js(P,x);for(var V=0,ye=P.length;x!=null&&V<ye;)x=x[Ca(P[V++])];return V&&V==ye?x:t}function _a(x,P,V){var ye=P(x);return vo(x)?ye:Du(ye,V(x))}function Xs(x){return x==null?x===t?Mr:en:HA&&HA in $o(x)?Sp(x):Rn(x)}function au(x,P){return x>P}function lu(x,P){return x!=null&&Fo.call(x,P)}function cA(x,P){return x!=null&&P in $o(x)}function Mu(x,P,V){return x>=cs(P,V)&&x<Uo(P,V)}function Sc(x,P,V){for(var ye=V?bd:Ku,$e=x[0].length,lt=x.length,Dt=lt,qt=an(lt),sn=1/0,Wn=[];Dt--;){var qn=x[Dt];Dt&&P&&(qn=Ms(qn,pu(P))),sn=cs(qn.length,sn),qt[Dt]=!V&&(P||$e>=120&&qn.length>=120)?new nc(Dt&&qn):t}qn=x[0];var ur=-1,Zr=qt[0];e:for(;++ur<$e&&Wn.length<sn;){var xi=qn[ur],eo=P?P(xi):xi;if(xi=V||xi!==0?xi:0,!(Zr?mu(Zr,eo):ye(Wn,eo,V))){for(Dt=lt;--Dt;){var is=qt[Dt];if(!(is?mu(is,eo):ye(x[Dt],eo,V)))continue e}Zr&&Zr.push(eo),Wn.push(xi)}}return Wn}function Yu(x,P,V,ye){return dl(x,function($e,lt,Dt){P(ye,V($e),lt,Dt)}),ye}function Ql(x,P,V){P=Js(P,x),x=Jn(x,P);var ye=x==null?x:x[Ca(RA(P))];return ye==null?t:Hs(ye,x,V)}function wh(x){return xl(x)&&Xs(x)==ft}function T(x){return xl(x)&&Xs(x)==Ge}function l(x){return xl(x)&&Xs(x)==ke}function c(x,P,V,ye,$e){return x===P?!0:x==null||P==null||!xl(x)&&!xl(P)?x!==x&&P!==P:C(x,P,V,ye,c,$e)}function C(x,P,V,ye,$e,lt){var Dt=vo(x),qt=vo(P),sn=Dt?Ut:gl(x),Wn=qt?Ut:gl(P);sn=sn==ft?Sn:sn,Wn=Wn==ft?Sn:Wn;var qn=sn==Sn,ur=Wn==Sn,Zr=sn==Wn;if(Zr&&zd(x)){if(!zd(P))return!1;Dt=!0,qn=!1}if(Zr&&!qn)return lt||(lt=new Bs),Dt||Kp(x)?TA(x,P,V,ye,$e,lt):Pd(x,P,sn,V,ye,$e,lt);if(!(V&k)){var xi=qn&&Fo.call(x,"__wrapped__"),eo=ur&&Fo.call(P,"__wrapped__");if(xi||eo){var is=xi?x.value():x,to=eo?P.value():P;return lt||(lt=new Bs),$e(is,to,V,ye,lt)}}return Zr?(lt||(lt=new Bs),Mp(x,P,V,ye,$e,lt)):!1}function M(x){return xl(x)&&gl(x)==Nt}function R(x,P,V,ye){var $e=V.length,lt=$e,Dt=!ye;if(x==null)return!lt;for(x=$o(x);$e--;){var qt=V[$e];if(Dt&&qt[2]?qt[1]!==x[qt[0]]:!(qt[0]in x))return!1}for(;++$e<lt;){qt=V[$e];var sn=qt[0],Wn=x[sn],qn=qt[1];if(Dt&&qt[2]){if(Wn===t&&!(sn in x))return!1}else{var ur=new Bs;if(ye)var Zr=ye(Wn,qn,sn,x,P,ur);if(!(Zr===t?c(qn,Wn,k|U,ye,ur):Zr))return!1}}return!0}function j(x){if(!bl(x)||ve(x))return!1;var P=ac(x)?gc:Ni;return P.test(ba(x))}function $(x){return xl(x)&&Xs(x)==cr}function te(x){return xl(x)&&gl(x)==fr}function oe(x){return xl(x)&&V0(x.length)&&!!lo[Xs(x)]}function be(x){return typeof x=="function"?x:x==null?cd:typeof x=="object"?vo(x)?ot(x[0],x[1]):At(x):RI(x)}function Ee(x){if(!Fe(x))return As(x);var P=[];for(var V in $o(x))Fo.call(x,V)&&V!="constructor"&&P.push(V);return P}function Ie(x){if(!bl(x))return xn(x);var P=Fe(x),V=[];for(var ye in x)ye=="constructor"&&(P||!Fo.call(x,ye))||V.push(ye);return V}function qe(x,P){return x<P}function Ve(x,P){var V=-1,ye=Ic(x)?an(x.length):[];return To(x,function($e,lt,Dt){ye[++V]=P($e,lt,Dt)}),ye}function At(x){var P=rs(x);return P.length==1&&P[0][2]?xt(P[0][0],P[0][1]):function(V){return V===x||R(V,x,P)}}function ot(x,P){return K(x)&&ht(P)?xt(Ca(x),P):function(V){var ye=bn(V,x);return ye===t&&ye===P?Ln(V,x):c(P,ye,k|U)}}function ct(x,P,V,ye,$e){x!==P&&wc(P,function(lt,Dt){if($e||($e=new Bs),bl(lt))yt(x,P,Dt,V,ct,ye,$e);else{var qt=ye?ye(ar(x,Dt),lt,Dt+"",x,P,$e):t;qt===t&&(qt=lt),SA(x,Dt,qt)}},Wr)}function yt(x,P,V,ye,$e,lt,Dt){var qt=ar(x,V),sn=ar(P,V),Wn=Dt.get(sn);if(Wn){SA(x,V,Wn);return}var qn=lt?lt(qt,sn,V+"",x,P,Dt):t,ur=qn===t;if(ur){var Zr=vo(sn),xi=!Zr&&zd(sn),eo=!Zr&&!xi&&Kp(sn);qn=sn,Zr||xi||eo?vo(qt)?qn=qt:Cl(qt)?qn=Ia(qt):xi?(ur=!1,qn=bs(sn,!0)):eo?(ur=!1,qn=Bd(sn,!0)):qn=[]:Vf(sn)||bm(sn)?(qn=qt,bm(qt)?qn=G(qt):(!bl(qt)||ac(qt))&&(qn=nl(sn))):ur=!1}ur&&(Dt.set(sn,qn),$e(qn,sn,ye,lt,Dt),Dt.delete(sn)),SA(x,V,qn)}function Et(x,P){var V=x.length;if(V)return P+=P<0?V:0,O(P,V)?x[P]:t}function Tt(x,P,V){P.length?P=Ms(P,function(lt){return vo(lt)?function(Dt){return wu(Dt,lt.length===1?lt[0]:lt)}:lt}):P=[cd];var ye=-1;P=Ms(P,pu(di()));var $e=Ve(x,function(lt,Dt,qt){var sn=Ms(P,function(Wn){return Wn(lt)});return{criteria:sn,index:++ye,value:lt}});return wd($e,function(lt,Dt){return Sh(lt,Dt,V)})}function Rt(x,P){return zt(x,P,function(V,ye){return Ln(x,ye)})}function zt(x,P,V){for(var ye=-1,$e=P.length,lt={};++ye<$e;){var Dt=P[ye],qt=wu(x,Dt);V(qt,Dt)&&kr(lt,Js(Dt,x),qt)}return lt}function Pt(x){return function(P){return wu(P,x)}}function tn(x,P,V,ye){var $e=ye?xd:Zs,lt=-1,Dt=P.length,qt=x;for(x===P&&(P=Ia(P)),V&&(qt=Ms(x,pu(V)));++lt<Dt;)for(var sn=0,Wn=P[lt],qn=V?V(Wn):Wn;(sn=$e(qt,qn,sn,ye))>-1;)qt!==x&&VA.call(qt,sn,1),VA.call(x,sn,1);return x}function Ht(x,P){for(var V=x?P.length:0,ye=V-1;V--;){var $e=P[V];if(V==ye||$e!==lt){var lt=$e;O($e)?VA.call(x,$e,1):ja(x,$e)}}return x}function vn(x,P){return x+Fu(mh()*(P-x+1))}function _n(x,P,V,ye){for(var $e=-1,lt=Uo(ZA((P-x)/(V||1)),0),Dt=an(lt);lt--;)Dt[ye?lt:++$e]=x,x+=V;return Dt}function gn(x,P){var V="";if(!x||P<1||P>Qe)return V;do P%2&&(V+=x),P=Fu(P/2),P&&(x+=x);while(P);return V}function On(x,P){return Nr($n(x,P,cd),x+"")}function Un(x){return Wu(Ko(x))}function wn(x,P){var V=Ko(x);return Ga(V,bu(P,0,V.length))}function kr(x,P,V,ye){if(!bl(x))return x;P=Js(P,x);for(var $e=-1,lt=P.length,Dt=lt-1,qt=x;qt!=null&&++$e<lt;){var sn=Ca(P[$e]),Wn=V;if(sn==="__proto__"||sn==="constructor"||sn==="prototype")return x;if($e!=Dt){var qn=qt[sn];Wn=ye?ye(qn,sn,qt):t,Wn===t&&(Wn=bl(qn)?qn:O(P[$e+1])?[]:{})}xc(qt,sn,Wn),qt=qt[sn]}return x}var Bi=gh?function(x,P){return gh.set(x,P),x}:cd,$i=Wc?function(x,P){return Wc(x,"toString",{configurable:!0,enumerable:!1,value:Uh(P),writable:!0})}:cd;function Bo(x){return Ga(Ko(x))}function Si(x,P,V){var ye=-1,$e=x.length;P<0&&(P=-P>$e?0:$e+P),V=V>$e?$e:V,V<0&&(V+=$e),$e=P>V?0:V-P>>>0,P>>>=0;for(var lt=an($e);++ye<$e;)lt[ye]=x[ye+P];return lt}function zo(x,P){var V;return To(x,function(ye,$e,lt){return V=P(ye,$e,lt),!V}),!!V}function jo(x,P,V){var ye=0,$e=x==null?ye:x.length;if(typeof P=="number"&&P===P&&$e<=wt){for(;ye<$e;){var lt=ye+$e>>>1,Dt=x[lt];Dt!==null&&!KA(Dt)&&(V?Dt<=P:Dt<P)?ye=lt+1:$e=lt}return $e}return xo(x,P,cd,V)}function xo(x,P,V,ye){var $e=0,lt=x==null?0:x.length;if(lt===0)return 0;P=V(P);for(var Dt=P!==P,qt=P===null,sn=KA(P),Wn=P===t;$e<lt;){var qn=Fu(($e+lt)/2),ur=V(x[qn]),Zr=ur!==t,xi=ur===null,eo=ur===ur,is=KA(ur);if(Dt)var to=ye||eo;else Wn?to=eo&&(ye||Zr):qt?to=eo&&Zr&&(ye||!xi):sn?to=eo&&Zr&&!xi&&(ye||!is):xi||is?to=!1:to=ye?ur<=P:ur<P;to?$e=qn+1:lt=qn}return cs(lt,st)}function yo(x,P){for(var V=-1,ye=x.length,$e=0,lt=[];++V<ye;){var Dt=x[V],qt=P?P(Dt):Dt;if(!V||!ld(qt,sn)){var sn=qt;lt[$e++]=Dt===0?0:Dt}}return lt}function Oa(x){return typeof x=="number"?x:KA(x)?Te:+x}function No(x){if(typeof x=="string")return x;if(vo(x))return Ms(x,No)+"";if(KA(x))return $c?$c.call(x):"";var P=x+"";return P=="0"&&1/x==-1/0?"-0":P}function hs(x,P,V){var ye=-1,$e=Ku,lt=x.length,Dt=!0,qt=[],sn=qt;if(V)Dt=!1,$e=bd;else if(lt>=i){var Wn=P?null:Am(x);if(Wn)return Ol(Wn);Dt=!1,$e=mu,sn=new nc}else sn=P?[]:qt;e:for(;++ye<lt;){var qn=x[ye],ur=P?P(qn):qn;if(qn=V||qn!==0?qn:0,Dt&&ur===ur){for(var Zr=sn.length;Zr--;)if(sn[Zr]===ur)continue e;P&&sn.push(ur),qt.push(qn)}else $e(sn,ur,V)||(sn!==qt&&sn.push(ur),qt.push(qn))}return qt}function ja(x,P){return P=Js(P,x),x=Jn(x,P),x==null||delete x[Ca(RA(P))]}function $u(x,P,V,ye){return kr(x,P,V(wu(x,P)),ye)}function fl(x,P,V,ye){for(var $e=x.length,lt=ye?$e:-1;(ye?lt--:++lt<$e)&&P(x[lt],lt,x););return V?Si(x,ye?0:lt,ye?lt+1:$e):Si(x,ye?lt+1:0,ye?$e:lt)}function pl(x,P){var V=x;return V instanceof $r&&(V=V.value()),uh(P,function(ye,$e){return $e.func.apply($e.thisArg,Du([ye],$e.args))},V)}function uu(x,P,V){var ye=x.length;if(ye<2)return ye?hs(x[0]):[];for(var $e=-1,lt=an(ye);++$e<ye;)for(var Dt=x[$e],qt=-1;++qt<ye;)qt!=$e&&(lt[$e]=xu(lt[$e]||Dt,x[qt],P,V));return hs(Ws(lt,1),P,V)}function OA(x,P,V){for(var ye=-1,$e=x.length,lt=P.length,Dt={};++ye<$e;){var qt=ye<lt?P[ye]:t;V(Dt,x[ye],qt)}return Dt}function IA(x){return Cl(x)?x:[]}function Vu(x){return typeof x=="function"?x:cd}function Js(x,P){return vo(x)?x:K(x,P)?[x]:aa(re(x))}var ml=On;function sa(x,P,V){var ye=x.length;return V=V===t?ye:V,!P&&V>=ye?x:Si(x,P,V)}var Pl=Xh||function(x){return pr.clearTimeout(x)};function bs(x,P){if(P)return x.slice();var V=x.length,ye=Zh?Zh(V):new x.constructor(V);return x.copy(ye),ye}function Qs(x){var P=new x.constructor(x.byteLength);return new Gc(P).set(new Gc(x)),P}function el(x,P){var V=P?Qs(x.buffer):x.buffer;return new x.constructor(V,x.byteOffset,x.byteLength)}function tl(x){var P=new x.constructor(x.source,ui.exec(x));return P.lastIndex=x.lastIndex,P}function Mh(x){return _u?$o(_u.call(x)):{}}function Bd(x,P){var V=P?Qs(x.buffer):x.buffer;return new x.constructor(V,x.byteOffset,x.length)}function Od(x,P){if(x!==P){var V=x!==t,ye=x===null,$e=x===x,lt=KA(x),Dt=P!==t,qt=P===null,sn=P===P,Wn=KA(P);if(!qt&&!Wn&&!lt&&x>P||lt&&Dt&&sn&&!qt&&!Wn||ye&&Dt&&sn||!V&&sn||!$e)return 1;if(!ye&&!lt&&!Wn&&x<P||Wn&&V&&$e&&!ye&&!lt||qt&&V&&$e||!Dt&&$e||!sn)return-1}return 0}function Sh(x,P,V){for(var ye=-1,$e=x.criteria,lt=P.criteria,Dt=$e.length,qt=V.length;++ye<Dt;){var sn=Od($e[ye],lt[ye]);if(sn){if(ye>=qt)return sn;var Wn=V[ye];return sn*(Wn=="desc"?-1:1)}}return x.index-P.index}function ic(x,P,V,ye){for(var $e=-1,lt=x.length,Dt=V.length,qt=-1,sn=P.length,Wn=Uo(lt-Dt,0),qn=an(sn+Wn),ur=!ye;++qt<sn;)qn[qt]=P[qt];for(;++$e<Dt;)(ur||$e<lt)&&(qn[V[$e]]=x[$e]);for(;Wn--;)qn[qt++]=x[$e++];return qn}function Id(x,P,V,ye){for(var $e=-1,lt=x.length,Dt=-1,qt=V.length,sn=-1,Wn=P.length,qn=Uo(lt-qt,0),ur=an(qn+Wn),Zr=!ye;++$e<qn;)ur[$e]=x[$e];for(var xi=$e;++sn<Wn;)ur[xi+sn]=P[sn];for(;++Dt<qt;)(Zr||$e<lt)&&(ur[xi+V[Dt]]=x[$e++]);return ur}function Ia(x,P){var V=-1,ye=x.length;for(P||(P=an(ye));++V<ye;)P[V]=x[V];return P}function Au(x,P,V,ye){var $e=!V;V||(V={});for(var lt=-1,Dt=P.length;++lt<Dt;){var qt=P[lt],sn=ye?ye(V[qt],x[qt],qt,V,x):t;sn===t&&(sn=x[qt]),$e?Qu(V,qt,sn):xc(V,qt,sn)}return V}function Eh(x,P){return Au(x,Su(x),P)}function _p(x,P){return Au(x,Ym(x),P)}function Ec(x,P){return function(V,ye){var $e=vo(V)?hc:ha,lt=P?P():{};return $e(V,x,di(ye,2),lt)}}function kA(x){return On(function(P,V){var ye=-1,$e=V.length,lt=$e>1?V[$e-1]:t,Dt=$e>2?V[2]:t;for(lt=x.length>3&&typeof lt=="function"?($e--,lt):t,Dt&&E(V[0],V[1],Dt)&&(lt=$e<3?t:lt,$e=1),P=$o(P);++ye<$e;){var qt=V[ye];qt&&x(P,qt,ye,lt)}return P})}function Na(x,P){return function(V,ye){if(V==null)return V;if(!Ic(V))return x(V,ye);for(var $e=V.length,lt=P?$e:-1,Dt=$o(V);(P?lt--:++lt<$e)&&ye(Dt[lt],lt,Dt)!==!1;);return V}}function Cp(x){return function(P,V,ye){for(var $e=-1,lt=$o(P),Dt=ye(P),qt=Dt.length;qt--;){var sn=Dt[x?qt:++$e];if(V(lt[sn],sn,lt)===!1)break}return P}}function kd(x,P,V){var ye=P&z,$e=Bc(x);function lt(){var Dt=this&&this!==pr&&this instanceof lt?$e:x;return Dt.apply(ye?V:this,arguments)}return lt}function bp(x){return function(P){P=re(P);var V=zc(P)?Lu(P):t,ye=V?V[0]:P.charAt(0),$e=V?sa(V,1).join(""):P.slice(1);return ye[x]()+$e}}function od(x){return function(P){return uh(SC(Z0(P).replace(El,"")),x,"")}}function Bc(x){return function(){var P=arguments;switch(P.length){case 0:return new x;case 1:return new x(P[0]);case 2:return new x(P[0],P[1]);case 3:return new x(P[0],P[1],P[2]);case 4:return new x(P[0],P[1],P[2],P[3]);case 5:return new x(P[0],P[1],P[2],P[3],P[4]);case 6:return new x(P[0],P[1],P[2],P[3],P[4],P[5]);case 7:return new x(P[0],P[1],P[2],P[3],P[4],P[5],P[6])}var V=Ua(x.prototype),ye=x.apply(V,P);return bl(ye)?ye:V}}function um(x,P,V){var ye=Bc(x);function $e(){for(var lt=arguments.length,Dt=an(lt),qt=lt,sn=Hc($e);qt--;)Dt[qt]=arguments[qt];var Wn=lt<3&&Dt[0]!==sn&&Dt[lt-1]!==sn?[]:Ja(Dt,sn);if(lt-=Wn.length,lt<V)return ql(x,P,Bh,$e.placeholder,t,Dt,Wn,t,t,V-lt);var qn=this&&this!==pr&&this instanceof $e?ye:x;return Hs(qn,this,Dt)}return $e}function oc(x){return function(P,V,ye){var $e=$o(P);if(!Ic(P)){var lt=di(V,3);P=jr(P),V=function(qt){return lt($e[qt],qt,$e)}}var Dt=x(P,V,ye);return Dt>-1?$e[lt?P[Dt]:Dt]:t}}function Td(x){return Oc(function(P){var V=P.length,ye=V,$e=Ri.prototype.thru;for(x&&P.reverse();ye--;){var lt=P[ye];if(typeof lt!="function")throw new Il(a);if($e&&!Dt&&kh(lt)=="wrapper")var Dt=new Ri([],!0)}for(ye=Dt?ye:V;++ye<V;){lt=P[ye];var qt=kh(lt),sn=qt=="wrapper"?ad(lt):t;sn&&le(sn[0])&&sn[1]==(N|ne|q|ie)&&!sn[4].length&&sn[9]==1?Dt=Dt[kh(sn[0])].apply(Dt,sn[3]):Dt=lt.length==1&&le(lt)?Dt[qt]():Dt.thru(lt)}return function(){var Wn=arguments,qn=Wn[0];if(Dt&&Wn.length==1&&vo(qn))return Dt.plant(qn).value();for(var ur=0,Zr=V?P[ur].apply(this,Wn):qn;++ur<V;)Zr=P[ur].call(this,Zr);return Zr}})}function Bh(x,P,V,ye,$e,lt,Dt,qt,sn,Wn){var qn=P&N,ur=P&z,Zr=P&Y,xi=P&(ne|X),eo=P&he,is=Zr?t:Bc(x);function to(){for(var xs=arguments.length,Ls=an(xs),Nd=xs;Nd--;)Ls[Nd]=arguments[Nd];if(xi)var zh=Hc(to),Gd=Yh(Ls,zh);if(ye&&(Ls=ic(Ls,ye,$e,xi)),lt&&(Ls=Id(Ls,lt,Dt,xi)),xs-=Gd,xi&&xs<Wn){var eA=Ja(Ls,zh);return ql(x,P,Bh,to.placeholder,V,Ls,eA,qt,sn,Wn-xs)}var Xf=ur?V:this,Em=Zr?Xf[x]:x;return xs=Ls.length,qt?Ls=yr(Ls,qt):eo&&xs>1&&Ls.reverse(),qn&&sn<xs&&(Ls.length=sn),this&&this!==pr&&this instanceof to&&(Em=is||Bc(Em)),Em.apply(Xf,Ls)}return to}function xp(x,P){return function(V,ye){return Yu(V,x,P(ye),{})}}function sd(x,P){return function(V,ye){var $e;if(V===t&&ye===t)return P;if(V!==t&&($e=V),ye!==t){if($e===t)return ye;typeof V=="string"||typeof ye=="string"?(V=No(V),ye=No(ye)):(V=Oa(V),ye=Oa(ye)),$e=x(V,ye)}return $e}}function Uf(x){return Oc(function(P){return P=Ms(P,pu(di())),On(function(V){var ye=this;return x(P,function($e){return Hs($e,ye,V)})})})}function zf(x,P){P=P===t?" ":No(P);var V=P.length;if(V<2)return V?gn(P,x):P;var ye=gn(P,ZA(x/jc(P)));return zc(P)?sa(Lu(ye),0,x).join(""):ye.slice(0,x)}function wp(x,P,V,ye){var $e=P&z,lt=Bc(x);function Dt(){for(var qt=-1,sn=arguments.length,Wn=-1,qn=ye.length,ur=an(qn+sn),Zr=this&&this!==pr&&this instanceof Dt?lt:x;++Wn<qn;)ur[Wn]=ye[Wn];for(;sn--;)ur[Wn++]=arguments[++qt];return Hs(Zr,$e?V:this,ur)}return Dt}function Oh(x){return function(P,V,ye){return ye&&typeof ye!="number"&&E(P,V,ye)&&(V=ye=t),P=v(P),V===t?(V=P,P=0):V=v(V),ye=ye===t?P<V?1:-1:v(ye),_n(P,V,ye,x)}}function af(x){return function(P,V){return typeof P=="string"&&typeof V=="string"||(P=F(P),V=F(V)),x(P,V)}}function ql(x,P,V,ye,$e,lt,Dt,qt,sn,Wn){var qn=P&ne,ur=qn?Dt:t,Zr=qn?t:Dt,xi=qn?lt:t,eo=qn?t:lt;P|=qn?q:J,P&=~(qn?J:q),P&Q||(P&=-4);var is=[x,P,$e,xi,ur,eo,Zr,qt,sn,Wn],to=V.apply(t,is);return le(x)&&Lr(to,is),to.placeholder=ye,Ji(to,x,P)}function Rl(x){var P=oa[x];return function(V,ye){if(V=F(V),ye=ye==null?0:cs(w(ye),292),ye&&Yc(V)){var $e=(re(V)+"e").split("e"),lt=P($e[0]+"e"+(+$e[1]+ye));return $e=(re(lt)+"e").split("e"),+($e[0]+"e"+(+$e[1]-ye))}return P(V)}}var Am=hl&&1/Ol(new hl([,-0]))[1]==ze?function(x){return new hl(x)}:S3;function jf(x){return function(P){var V=gl(P);return V==Nt?dh(P):V==fr?Yo(P):am(P,x(P))}}function Oo(x,P,V,ye,$e,lt,Dt,qt){var sn=P&Y;if(!sn&&typeof x!="function")throw new Il(a);var Wn=ye?ye.length:0;if(Wn||(P&=-97,ye=$e=t),Dt=Dt===t?Dt:Uo(w(Dt),0),qt=qt===t?qt:w(qt),Wn-=$e?$e.length:0,P&J){var qn=ye,ur=$e;ye=$e=t}var Zr=sn?t:ad(x),xi=[x,P,V,ye,$e,qn,ur,lt,Dt,qt];if(Zr&&Qt(xi,Zr),x=xi[0],P=xi[1],V=xi[2],ye=xi[3],$e=xi[4],qt=xi[9]=xi[9]===t?sn?0:x.length:Uo(xi[9]-Wn,0),!qt&&P&(ne|X)&&(P&=-25),!P||P==z)var eo=kd(x,P,V);else P==ne||P==X?eo=um(x,P,qt):(P==q||P==(z|q))&&!$e.length?eo=wp(x,P,V,ye):eo=Bh.apply(t,xi);var is=Zr?Bi:Lr;return Ji(is(eo,xi),x,P)}function Hu(x,P,V,ye){return x===t||ld(x,kl[V])&&!Fo.call(ye,V)?P:x}function lf(x,P,V,ye,$e,lt){return bl(x)&&bl(P)&&(lt.set(P,x),ct(x,P,t,lf,lt),lt.delete(P)),x}function Ih(x){return Vf(x)?t:x}function TA(x,P,V,ye,$e,lt){var Dt=V&k,qt=x.length,sn=P.length;if(qt!=sn&&!(Dt&&sn>qt))return!1;var Wn=lt.get(x),qn=lt.get(P);if(Wn&&qn)return Wn==P&&qn==x;var ur=-1,Zr=!0,xi=V&U?new nc:t;for(lt.set(x,P),lt.set(P,x);++ur<qt;){var eo=x[ur],is=P[ur];if(ye)var to=Dt?ye(is,eo,ur,P,x,lt):ye(eo,is,ur,x,P,lt);if(to!==t){if(to)continue;Zr=!1;break}if(xi){if(!sA(P,function(xs,Ls){if(!mu(xi,Ls)&&(eo===xs||$e(eo,xs,V,ye,lt)))return xi.push(Ls)})){Zr=!1;break}}else if(!(eo===is||$e(eo,is,V,ye,lt))){Zr=!1;break}}return lt.delete(x),lt.delete(P),Zr}function Pd(x,P,V,ye,$e,lt,Dt){switch(V){case ue:if(x.byteLength!=P.byteLength||x.byteOffset!=P.byteOffset)return!1;x=x.buffer,P=P.buffer;case Ge:return!(x.byteLength!=P.byteLength||!lt(new Gc(x),new Gc(P)));case De:case ke:case nn:return ld(+x,+P);case Je:return x.name==P.name&&x.message==P.message;case cr:case br:return x==P+"";case Nt:var qt=dh;case fr:var sn=ye&k;if(qt||(qt=Ol),x.size!=P.size&&!sn)return!1;var Wn=Dt.get(x);if(Wn)return Wn==P;ye|=U,Dt.set(x,P);var qn=TA(qt(x),qt(P),ye,$e,lt,Dt);return Dt.delete(x),qn;case Cr:if(_u)return _u.call(x)==_u.call(P)}return!1}function Mp(x,P,V,ye,$e,lt){var Dt=V&k,qt=uf(x),sn=qt.length,Wn=uf(P),qn=Wn.length;if(sn!=qn&&!Dt)return!1;for(var ur=sn;ur--;){var Zr=qt[ur];if(!(Dt?Zr in P:Fo.call(P,Zr)))return!1}var xi=lt.get(x),eo=lt.get(P);if(xi&&eo)return xi==P&&eo==x;var is=!0;lt.set(x,P),lt.set(P,x);for(var to=Dt;++ur<sn;){Zr=qt[ur];var xs=x[Zr],Ls=P[Zr];if(ye)var Nd=Dt?ye(Ls,xs,Zr,P,x,lt):ye(xs,Ls,Zr,x,P,lt);if(!(Nd===t?xs===Ls||$e(xs,Ls,V,ye,lt):Nd)){is=!1;break}to||(to=Zr=="constructor")}if(is&&!to){var zh=x.constructor,Gd=P.constructor;zh!=Gd&&"constructor"in x&&"constructor"in P&&!(typeof zh=="function"&&zh instanceof zh&&typeof Gd=="function"&&Gd instanceof Gd)&&(is=!1)}return lt.delete(x),lt.delete(P),is}function Oc(x){return Nr($n(x,t,Xc),x+"")}function uf(x){return _a(x,jr,Su)}function Af(x){return _a(x,Wr,Ym)}var ad=gh?function(x){return gh.get(x)}:S3;function kh(x){for(var P=x.name+"",V=ju[P],ye=Fo.call(ju,P)?V.length:0;ye--;){var $e=V[ye],lt=$e.func;if(lt==null||lt==x)return $e.name}return P}function Hc(x){var P=Fo.call(et,"placeholder")?et:x;return P.placeholder}function di(){var x=et.iteratee||w3;return x=x===w3?be:x,arguments.length?x(arguments[0],arguments[1]):x}function Zc(x,P){var V=x.__data__;return H(P)?V[typeof P=="string"?"string":"hash"]:V.map}function rs(x){for(var P=jr(x),V=P.length;V--;){var ye=P[V],$e=x[ye];P[V]=[ye,$e,ht($e)]}return P}function Th(x,P){var V=WA(x,P);return j(V)?V:t}function Sp(x){var P=Fo.call(x,HA),V=x[HA];try{x[HA]=t;var ye=!0}catch{}var $e=CA.call(x);return ye&&(P?x[HA]=V:delete x[HA]),$e}var Su=qc?function(x){return x==null?[]:(x=$o(x),Ru(qc(x),function(P){return yc.call(x,P)}))}:E3,Ym=qc?function(x){for(var P=[];x;)Du(P,Su(x)),x=Fa(x);return P}:E3,gl=Xs;(XA&&gl(new XA(new ArrayBuffer(1)))!=ue||Nl&&gl(new Nl)!=Nt||xA&&gl(xA.resolve())!=Yn||hl&&gl(new hl)!=fr||JA&&gl(new JA)!=Qn)&&(gl=function(x){var P=Xs(x),V=P==Sn?x.constructor:t,ye=V?ba(V):"";if(ye)switch(ye){case ed:return ue;case ec:return Nt;case Nu:return Yn;case Gu:return fr;case wA:return Qn}return P});function cm(x,P,V){for(var ye=-1,$e=V.length;++ye<$e;){var lt=V[ye],Dt=lt.size;switch(lt.type){case"drop":x+=Dt;break;case"dropRight":P-=Dt;break;case"take":P=cs(P,x+Dt);break;case"takeRight":x=Uo(x,P-Dt);break}}return{start:x,end:P}}function da(x){var P=x.match(xr);return P?P[1].split(Rr):[]}function hm(x,P,V){P=Js(P,x);for(var ye=-1,$e=P.length,lt=!1;++ye<$e;){var Dt=Ca(P[ye]);if(!(lt=x!=null&&V(x,Dt)))break;x=x[Dt]}return lt||++ye!=$e?lt:($e=x==null?0:x.length,!!$e&&V0($e)&&O(Dt,$e)&&(vo(x)||bm(x)))}function cf(x){var P=x.length,V=new x.constructor(P);return P&&typeof x[0]=="string"&&Fo.call(x,"index")&&(V.index=x.index,V.input=x.input),V}function nl(x){return typeof x.constructor=="function"&&!Fe(x)?Ua(Fa(x)):{}}function Ep(x,P,V){var ye=x.constructor;switch(P){case Ge:return Qs(x);case De:case ke:return new ye(+x);case ue:return el(x,V);case me:case Xe:case Bt:case Yt:case it:case Kt:case Ye:case fe:case xe:return Bd(x,V);case Nt:return new ye;case nn:case br:return new ye(x);case cr:return tl(x);case fr:return new ye;case Cr:return Mh(x)}}function A(x,P){var V=P.length;if(!V)return x;var ye=V-1;return P[ye]=(V>1?"& ":"")+P[ye],P=P.join(V>2?", ":" "),x.replace(Br,`{
/* [wrapped with `+P+`] */
`)}function y(x){return vo(x)||bm(x)||!!(sf&&x&&x[sf])}function O(x,P){var V=typeof x;return P=P??Qe,!!P&&(V=="number"||V!="symbol"&&ul.test(x))&&x>-1&&x%1==0&&x<P}function E(x,P,V){if(!bl(V))return!1;var ye=typeof P;return(ye=="number"?Ic(V)&&O(P,V.length):ye=="string"&&P in V)?ld(V[P],x):!1}function K(x,P){if(vo(x))return!1;var V=typeof x;return V=="number"||V=="symbol"||V=="boolean"||x==null||KA(x)?!0:En.test(x)||!Pn.test(x)||P!=null&&x in $o(P)}function H(x){var P=typeof x;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?x!=="__proto__":x===null}function le(x){var P=kh(x),V=et[P];if(typeof V!="function"||!(P in $r.prototype))return!1;if(x===V)return!0;var ye=ad(V);return!!ye&&x===ye[0]}function ve(x){return!!$A&&$A in x}var Be=Wi?ac:B3;function Fe(x){var P=x&&x.constructor,V=typeof P=="function"&&P.prototype||kl;return x===V}function ht(x){return x===x&&!bl(x)}function xt(x,P){return function(V){return V==null?!1:V[x]===P&&(P!==t||x in $o(V))}}function Xt(x){var P=mr(x,function(ye){return V.size===g&&V.clear(),ye}),V=P.cache;return P}function Qt(x,P){var V=x[1],ye=P[1],$e=V|ye,lt=$e<(z|Y|N),Dt=ye==N&&V==ne||ye==N&&V==ie&&x[7].length<=P[8]||ye==(N|ie)&&P[7].length<=P[8]&&V==ne;if(!(lt||Dt))return x;ye&z&&(x[2]=P[2],$e|=V&z?0:Q);var qt=P[3];if(qt){var sn=x[3];x[3]=sn?ic(sn,qt,P[4]):qt,x[4]=sn?Ja(x[3],b):P[4]}return qt=P[5],qt&&(sn=x[5],x[5]=sn?Id(sn,qt,P[6]):qt,x[6]=sn?Ja(x[5],b):P[6]),qt=P[7],qt&&(x[7]=qt),ye&N&&(x[8]=x[8]==null?P[8]:cs(x[8],P[8])),x[9]==null&&(x[9]=P[9]),x[0]=P[0],x[1]=$e,x}function xn(x){var P=[];if(x!=null)for(var V in $o(x))P.push(V);return P}function Rn(x){return CA.call(x)}function $n(x,P,V){return P=Uo(P===t?x.length-1:P,0),function(){for(var ye=arguments,$e=-1,lt=Uo(ye.length-P,0),Dt=an(lt);++$e<lt;)Dt[$e]=ye[P+$e];$e=-1;for(var qt=an(P+1);++$e<P;)qt[$e]=ye[$e];return qt[P]=V(Dt),Hs(x,this,qt)}}function Jn(x,P){return P.length<2?x:wu(x,Si(P,0,-1))}function yr(x,P){for(var V=x.length,ye=cs(P.length,V),$e=Ia(x);ye--;){var lt=P[ye];x[ye]=O(lt,V)?$e[lt]:t}return x}function ar(x,P){if(!(P==="constructor"&&typeof x[P]=="function")&&P!="__proto__")return x[P]}var Lr=Io(Bi),ai=Qc||function(x,P){return pr.setTimeout(x,P)},Nr=Io($i);function Ji(x,P,V){var ye=P+"";return Nr(x,A(ye,ka(da(ye),V)))}function Io(x){var P=0,V=0;return function(){var ye=Df(),$e=Ce-(ye-V);if(V=ye,$e>0){if(++P>=pe)return arguments[0]}else P=0;return x.apply(t,arguments)}}function Ga(x,P){var V=-1,ye=x.length,$e=ye-1;for(P=P===t?ye:P;++V<P;){var lt=vn(V,$e),Dt=x[lt];x[lt]=x[V],x[V]=Dt}return x.length=P,x}var aa=Xt(function(x){var P=[];return x.charCodeAt(0)===46&&P.push(""),x.replace(lr,function(V,ye,$e,lt){P.push($e?lt.replace($a,"$1"):ye||V)}),P});function Ca(x){if(typeof x=="string"||KA(x))return x;var P=x+"";return P=="0"&&1/x==-1/0?"-0":P}function ba(x){if(x!=null){try{return YA.call(x)}catch{}try{return x+""}catch{}}return""}function ka(x,P){return Sa(mt,function(V){var ye="_."+V[0];P&V[1]&&!Ku(x,ye)&&x.push(ye)}),x.sort()}function Yl(x){if(x instanceof $r)return x.clone();var P=new Ri(x.__wrapped__,x.__chain__);return P.__actions__=Ia(x.__actions__),P.__index__=x.__index__,P.__values__=x.__values__,P}function Wa(x,P,V){(V?E(x,P,V):P===t)?P=1:P=Uo(w(P),0);var ye=x==null?0:x.length;if(!ye||P<1)return[];for(var $e=0,lt=0,Dt=an(ZA(ye/P));$e<ye;)Dt[lt++]=Si(x,$e,$e+=P);return Dt}function xa(x){for(var P=-1,V=x==null?0:x.length,ye=0,$e=[];++P<V;){var lt=x[P];lt&&($e[ye++]=lt)}return $e}function ds(){var x=arguments.length;if(!x)return[];for(var P=an(x-1),V=arguments[0],ye=x;ye--;)P[ye-1]=arguments[ye];return Du(vo(V)?Ia(V):[V],Ws(P,1))}var yi=On(function(x,P){return Cl(x)?xu(x,Ws(P,1,Cl,!0)):[]}),Zo=On(function(x,P){var V=RA(P);return Cl(V)&&(V=t),Cl(x)?xu(x,Ws(P,1,Cl,!0),di(V,2)):[]}),la=On(function(x,P){var V=RA(P);return Cl(V)&&(V=t),Cl(x)?xu(x,Ws(P,1,Cl,!0),t,V):[]});function fa(x,P,V){var ye=x==null?0:x.length;return ye?(P=V||P===t?1:w(P),Si(x,P<0?0:P,ye)):[]}function Is(x,P,V){var ye=x==null?0:x.length;return ye?(P=V||P===t?1:w(P),P=ye-P,Si(x,0,P<0?0:P)):[]}function Kl(x,P){return x&&x.length?fl(x,di(P,3),!0,!0):[]}function Po(x,P){return x&&x.length?fl(x,di(P,3),!0):[]}function Ph(x,P,V,ye){var $e=x==null?0:x.length;return $e?(V&&typeof V!="number"&&E(x,P,V)&&(V=0,ye=$e),id(x,P,V,ye)):[]}function yl(x,P,V){var ye=x==null?0:x.length;if(!ye)return-1;var $e=V==null?0:w(V);return $e<0&&($e=Uo(ye+$e,0)),dc(x,di(P,3),$e)}function PA(x,P,V){var ye=x==null?0:x.length;if(!ye)return-1;var $e=ye-1;return V!==t&&($e=w(V),$e=V<0?Uo(ye+$e,0):cs($e,ye-1)),dc(x,di(P,3),$e,!0)}function Xc(x){var P=x==null?0:x.length;return P?Ws(x,1):[]}function vl(x){var P=x==null?0:x.length;return P?Ws(x,ze):[]}function _l(x,P){var V=x==null?0:x.length;return V?(P=P===t?1:w(P),Ws(x,P)):[]}function hf(x){for(var P=-1,V=x==null?0:x.length,ye={};++P<V;){var $e=x[P];ye[$e[0]]=$e[1]}return ye}function Nf(x){return x&&x.length?x[0]:t}function Rd(x,P,V){var ye=x==null?0:x.length;if(!ye)return-1;var $e=V==null?0:w(V);return $e<0&&($e=Uo(ye+$e,0)),Zs(x,P,$e)}function df(x){var P=x==null?0:x.length;return P?Si(x,0,-1):[]}var $m=On(function(x){var P=Ms(x,IA);return P.length&&P[0]===x[0]?Sc(P):[]}),ff=On(function(x){var P=RA(x),V=Ms(x,IA);return P===RA(V)?P=t:V.pop(),V.length&&V[0]===x[0]?Sc(V,di(P,2)):[]}),Vm=On(function(x){var P=RA(x),V=Ms(x,IA);return P=typeof P=="function"?P:t,P&&V.pop(),V.length&&V[0]===x[0]?Sc(V,t,P):[]});function pf(x,P){return x==null?"":vc.call(x,P)}function RA(x){var P=x==null?0:x.length;return P?x[P-1]:t}function dm(x,P,V){var ye=x==null?0:x.length;if(!ye)return-1;var $e=ye;return V!==t&&($e=w(V),$e=$e<0?Uo(ye+$e,0):cs($e,ye-1)),P===P?lm(x,P,$e):dc(x,ef,$e,!0)}function F0(x,P){return x&&x.length?Et(x,w(P)):t}var fm=On(Gf);function Gf(x,P){return x&&x.length&&P&&P.length?tn(x,P):x}function hA(x,P,V){return x&&x.length&&P&&P.length?tn(x,P,di(V,2)):x}function Kd(x,P,V){return x&&x.length&&P&&P.length?tn(x,P,t,V):x}var Jc=Oc(function(x,P){var V=x==null?0:x.length,ye=rc(x,P);return Ht(x,Ms(P,function($e){return O($e,V)?+$e:$e}).sort(Od)),ye});function sc(x,P){var V=[];if(!(x&&x.length))return V;var ye=-1,$e=[],lt=x.length;for(P=di(P,3);++ye<lt;){var Dt=x[ye];P(Dt,ye,x)&&(V.push(Dt),$e.push(ye))}return Ht(x,$e),V}function Wf(x){return x==null?x:Uu.call(x)}function U0(x,P,V){var ye=x==null?0:x.length;return ye?(V&&typeof V!="number"&&E(x,P,V)?(P=0,V=ye):(P=P==null?0:w(P),V=V===t?ye:w(V)),Si(x,P,V)):[]}function Hm(x,P){return jo(x,P)}function Gy(x,P,V){return xo(x,P,di(V,2))}function mf(x,P){var V=x==null?0:x.length;if(V){var ye=jo(x,P);if(ye<V&&ld(x[ye],P))return ye}return-1}function Wg(x,P){return jo(x,P,!0)}function Zm(x,P,V){return xo(x,P,di(V,2),!0)}function Qf(x,P){var V=x==null?0:x.length;if(V){var ye=jo(x,P,!0)-1;if(ld(x[ye],P))return ye}return-1}function z0(x){return x&&x.length?yo(x):[]}function Rh(x,P){return x&&x.length?yo(x,di(P,2)):[]}function j0(x){var P=x==null?0:x.length;return P?Si(x,1,P):[]}function Xm(x,P,V){return x&&x.length?(P=V||P===t?1:w(P),Si(x,0,P<0?0:P)):[]}function Jm(x,P,V){var ye=x==null?0:x.length;return ye?(P=V||P===t?1:w(P),P=ye-P,Si(x,P<0?0:P,ye)):[]}function Qa(x,P){return x&&x.length?fl(x,di(P,3),!1,!0):[]}function N0(x,P){return x&&x.length?fl(x,di(P,3)):[]}var Wy=On(function(x){return hs(Ws(x,1,Cl,!0))}),G0=On(function(x){var P=RA(x);return Cl(P)&&(P=t),hs(Ws(x,1,Cl,!0),di(P,2))}),e0=On(function(x){var P=RA(x);return P=typeof P=="function"?P:t,hs(Ws(x,1,Cl,!0),t,P)});function Dd(x){return x&&x.length?hs(x):[]}function Qy(x,P){return x&&x.length?hs(x,di(P,2)):[]}function Bp(x,P){return P=typeof P=="function"?P:t,x&&x.length?hs(x,t,P):[]}function t0(x){if(!(x&&x.length))return[];var P=0;return x=Ru(x,function(V){if(Cl(V))return P=Uo(V.length,P),!0}),hh(P,function(V){return Ms(x,tf(V))})}function rl(x,P){if(!(x&&x.length))return[];var V=t0(x);return P==null?V:Ms(V,function(ye){return Hs(P,t,ye)})}var Qg=On(function(x,P){return Cl(x)?xu(x,P):[]}),dA=On(function(x){return uu(Ru(x,Cl))}),W0=On(function(x){var P=RA(x);return Cl(P)&&(P=t),uu(Ru(x,Cl),di(P,2))}),qg=On(function(x){var P=RA(x);return P=typeof P=="function"?P:t,uu(Ru(x,Cl),t,P)}),Ld=On(t0);function Op(x,P){return OA(x||[],P||[],xc)}function pm(x,P){return OA(x||[],P||[],kr)}var Zu=On(function(x){var P=x.length,V=P>1?x[P-1]:t;return V=typeof V=="function"?(x.pop(),V):t,rl(x,V)});function qf(x){var P=et(x);return P.__chain__=!0,P}function n0(x,P){return P(x),x}function Kh(x,P){return P(x)}var r0=Oc(function(x){var P=x.length,V=P?x[0]:0,ye=this.__wrapped__,$e=function(lt){return rc(lt,x)};return P>1||this.__actions__.length||!(ye instanceof $r)||!O(V)?this.thru($e):(ye=ye.slice(V,+V+(P?1:0)),ye.__actions__.push({func:Kh,args:[$e],thisArg:t}),new Ri(ye,this.__chain__).thru(function(lt){return P&&!lt.length&&lt.push(t),lt}))});function gf(){return qf(this)}function mm(){return new Ri(this.value(),this.__chain__)}function Q0(){this.__values__===t&&(this.__values__=d(this.value()));var x=this.__index__>=this.__values__.length,P=x?t:this.__values__[this.__index__++];return{done:x,value:P}}function i0(){return this}function Yg(x){for(var P,V=this;V instanceof Eo;){var ye=Yl(V);ye.__index__=0,ye.__values__=t,P?$e.__wrapped__=ye:P=ye;var $e=ye;V=V.__wrapped__}return $e.__wrapped__=x,P}function gm(){var x=this.__wrapped__;if(x instanceof $r){var P=x;return this.__actions__.length&&(P=new $r(this)),P=P.reverse(),P.__actions__.push({func:Kh,args:[Wf],thisArg:t}),new Ri(P,this.__chain__)}return this.thru(Wf)}function q0(){return pl(this.__wrapped__,this.__actions__)}var $g=Ec(function(x,P,V){Fo.call(x,V)?++x[V]:Qu(x,V,1)});function Vg(x,P,V){var ye=vo(x)?lh:rd;return V&&E(x,P,V)&&(P=t),ye(x,di(P,3))}function ym(x,P){var V=vo(x)?Ru:BA;return V(x,di(P,3))}var vm=oc(yl),Ip=oc(PA);function eh(x,P){return Ws(kp(x,P),1)}function Fd(x,P){return Ws(kp(x,P),ze)}function o0(x,P,V){return V=V===t?1:w(V),Ws(kp(x,P),V)}function Yf(x,P){var V=vo(x)?Sa:To;return V(x,di(P,3))}function s0(x,P){var V=vo(x)?cl:Os;return V(x,di(P,3))}var a0=Ec(function(x,P,V){Fo.call(x,V)?x[V].push(P):Qu(x,V,[P])});function _m(x,P,V,ye){x=Ic(x)?x:Ko(x),V=V&&!ye?w(V):0;var $e=x.length;return V<0&&(V=Uo($e+V,0)),xm(x)?V<=$e&&x.indexOf(P,V)>-1:!!$e&&Zs(x,P,V)>-1}var Y0=On(function(x,P,V){var ye=-1,$e=typeof P=="function",lt=Ic(x)?an(x.length):[];return To(x,function(Dt){lt[++ye]=$e?Hs(P,Dt,V):Ql(Dt,P,V)}),lt}),l0=Ec(function(x,P,V){Qu(x,V,P)});function kp(x,P){var V=vo(x)?Ms:Ve;return V(x,di(P,3))}function $f(x,P,V,ye){return x==null?[]:(vo(P)||(P=P==null?[]:[P]),V=ye?t:V,vo(V)||(V=V==null?[]:[V]),Tt(x,P,V))}var Tp=Ec(function(x,P,V){x[V?0:1].push(P)},function(){return[[],[]]});function Cm(x,P,V){var ye=vo(x)?uh:fc,$e=arguments.length<3;return ye(x,di(P,4),V,$e,To)}function m(x,P,V){var ye=vo(x)?gp:fc,$e=arguments.length<3;return ye(x,di(P,4),V,$e,Os)}function _(x,P){var V=vo(x)?Ru:BA;return V(x,ni(di(P,3)))}function L(x){var P=vo(x)?Wu:Un;return P(x)}function W(x,P,V){(V?E(x,P,V):P===t)?P=1:P=w(P);var ye=vo(x)?bc:wn;return ye(x,P)}function se(x){var P=vo(x)?nd:Bo;return P(x)}function ge(x){if(x==null)return 0;if(Ic(x))return xm(x)?jc(x):x.length;var P=gl(x);return P==Nt||P==fr?x.size:Ee(x).length}function Ze(x,P,V){var ye=vo(x)?sA:zo;return V&&E(x,P,V)&&(P=t),ye(x,di(P,3))}var kt=On(function(x,P){if(x==null)return[];var V=P.length;return V>1&&E(x,P[0],P[1])?P=[]:V>2&&E(P[0],P[1],P[2])&&(P=[P[0]]),Tt(x,Ws(P,1),[])}),Wt=Vo||function(){return pr.Date.now()};function Cn(x,P){if(typeof P!="function")throw new Il(a);return x=w(x),function(){if(--x<1)return P.apply(this,arguments)}}function or(x,P,V){return P=V?t:P,P=x&&P==null?x.length:P,Oo(x,N,t,t,t,t,P)}function Ar(x,P){var V;if(typeof P!="function")throw new Il(a);return x=w(x),function(){return--x>0&&(V=P.apply(this,arguments)),x<=1&&(P=t),V}}var Vn=On(function(x,P,V){var ye=z;if(V.length){var $e=Ja(V,Hc(Vn));ye|=q}return Oo(x,ye,P,V,$e)}),Ur=On(function(x,P,V){var ye=z|Y;if(V.length){var $e=Ja(V,Hc(Ur));ye|=q}return Oo(P,ye,x,V,$e)});function ii(x,P,V){P=V?t:P;var ye=Oo(x,ne,t,t,t,t,t,P);return ye.placeholder=ii.placeholder,ye}function li(x,P,V){P=V?t:P;var ye=Oo(x,X,t,t,t,t,t,P);return ye.placeholder=li.placeholder,ye}function il(x,P,V){var ye,$e,lt,Dt,qt,sn,Wn=0,qn=!1,ur=!1,Zr=!0;if(typeof x!="function")throw new Il(a);P=F(P)||0,bl(V)&&(qn=!!V.leading,ur="maxWait"in V,lt=ur?Uo(F(V.maxWait)||0,P):lt,Zr="trailing"in V?!!V.trailing:Zr);function xi(eA){var Xf=ye,Em=$e;return ye=$e=t,Wn=eA,Dt=x.apply(Em,Xf),Dt}function eo(eA){return Wn=eA,qt=ai(xs,P),qn?xi(eA):Dt}function is(eA){var Xf=eA-sn,Em=eA-Wn,KI=P-Xf;return ur?cs(KI,lt-Em):KI}function to(eA){var Xf=eA-sn,Em=eA-Wn;return sn===t||Xf>=P||Xf<0||ur&&Em>=lt}function xs(){var eA=Wt();if(to(eA))return Ls(eA);qt=ai(xs,is(eA))}function Ls(eA){return qt=t,Zr&&ye?xi(eA):(ye=$e=t,Dt)}function Nd(){qt!==t&&Pl(qt),Wn=0,ye=sn=$e=qt=t}function zh(){return qt===t?Dt:Ls(Wt())}function Gd(){var eA=Wt(),Xf=to(eA);if(ye=arguments,$e=this,sn=eA,Xf){if(qt===t)return eo(sn);if(ur)return Pl(qt),qt=ai(xs,P),xi(sn)}return qt===t&&(qt=ai(xs,P)),Dt}return Gd.cancel=Nd,Gd.flush=zh,Gd}var ln=On(function(x,P){return Ff(x,1,P)}),Jt=On(function(x,P,V){return Ff(x,F(P)||0,V)});function cn(x){return Oo(x,he)}function mr(x,P){if(typeof x!="function"||P!=null&&typeof P!="function")throw new Il(a);var V=function(){var ye=arguments,$e=P?P.apply(this,ye):ye[0],lt=V.cache;if(lt.has($e))return lt.get($e);var Dt=x.apply(this,ye);return V.cache=lt.set($e,Dt)||lt,Dt};return V.cache=new(mr.Cache||Mi),V}mr.Cache=Mi;function ni(x){if(typeof x!="function")throw new Il(a);return function(){var P=arguments;switch(P.length){case 0:return!x.call(this);case 1:return!x.call(this,P[0]);case 2:return!x.call(this,P[0],P[1]);case 3:return!x.call(this,P[0],P[1],P[2])}return!x.apply(this,P)}}function Ii(x){return Ar(2,x)}var Oi=ml(function(x,P){P=P.length==1&&vo(P[0])?Ms(P[0],pu(di())):Ms(Ws(P,1),pu(di()));var V=P.length;return On(function(ye){for(var $e=-1,lt=cs(ye.length,V);++$e<lt;)ye[$e]=P[$e].call(this,ye[$e]);return Hs(x,this,ye)})}),Ui=On(function(x,P){var V=Ja(P,Hc(Ui));return Oo(x,q,t,P,V)}),Ds=On(function(x,P){var V=Ja(P,Hc(Ds));return Oo(x,J,t,P,V)}),Xo=Oc(function(x,P){return Oo(x,ie,t,t,t,P)});function Ud(x,P){if(typeof x!="function")throw new Il(a);return P=P===t?P:w(P),On(x,P)}function Hg(x,P){if(typeof x!="function")throw new Il(a);return P=P==null?0:Uo(w(P),0),On(function(V){var ye=V[P],$e=sa(V,0,P);return ye&&Du($e,ye),Hs(x,this,$e)})}function oC(x,P,V){var ye=!0,$e=!0;if(typeof x!="function")throw new Il(a);return bl(V)&&(ye="leading"in V?!!V.leading:ye,$e="trailing"in V?!!V.trailing:$e),il(x,P,{leading:ye,maxWait:P,trailing:$e})}function sC(x){return or(x,1)}function aC(x,P){return Ui(Vu(P),x)}function lC(){if(!arguments.length)return[];var x=arguments[0];return vo(x)?x:[x]}function u3(x){return Cs(x,I)}function uC(x,P){return P=typeof P=="function"?P:t,Cs(x,I,P)}function Pp(x){return Cs(x,B|I)}function AC(x,P){return P=typeof P=="function"?P:t,Cs(x,B|I,P)}function cC(x,P){return P==null||su(x,P,jr(P))}function ld(x,P){return x===P||x!==x&&P!==P}var hC=af(au),A3=af(function(x,P){return x>=P}),bm=wh(function(){return arguments}())?wh:function(x){return xl(x)&&Fo.call(x,"callee")&&!yc.call(x,"callee")},vo=an.isArray,$0=Zi?pu(Zi):T;function Ic(x){return x!=null&&V0(x.length)&&!ac(x)}function Cl(x){return xl(x)&&Ic(x)}function dC(x){return x===!0||x===!1||xl(x)&&Xs(x)==De}var zd=Jh||B3,Zg=Xi?pu(Xi):l;function Xg(x){return xl(x)&&x.nodeType===1&&!Vf(x)}function c3(x){if(x==null)return!0;if(Ic(x)&&(vo(x)||typeof x=="string"||typeof x.splice=="function"||zd(x)||Kp(x)||bm(x)))return!x.length;var P=gl(x);if(P==Nt||P==fr)return!x.size;if(Fe(x))return!Ee(x).length;for(var V in x)if(Fo.call(x,V))return!1;return!0}function h3(x,P){return c(x,P)}function d3(x,P,V){V=typeof V=="function"?V:t;var ye=V?V(x,P):t;return ye===t?c(x,P,t,V):!!ye}function Rp(x){if(!xl(x))return!1;var P=Xs(x);return P==Je||P==Oe||typeof x.message=="string"&&typeof x.name=="string"&&!Vf(x)}function fA(x){return typeof x=="number"&&Yc(x)}function ac(x){if(!bl(x))return!1;var P=Xs(x);return P==Mt||P==gt||P==Lt||P==Qr}function Jg(x){return typeof x=="number"&&x==w(x)}function V0(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=Qe}function bl(x){var P=typeof x;return x!=null&&(P=="object"||P=="function")}function xl(x){return x!=null&&typeof x=="object"}var fC=us?pu(us):M;function pC(x,P){return x===P||R(x,P,rs(P))}function mC(x,P,V){return V=typeof V=="function"?V:t,R(x,P,rs(P),V)}function f3(x){return $y(x)&&x!=+x}function gC(x){if(Be(x))throw new _i(o);return j(x)}function qy(x){return x===null}function Yy(x){return x==null}function $y(x){return typeof x=="number"||xl(x)&&Xs(x)==nn}function Vf(x){if(!xl(x)||Xs(x)!=Sn)return!1;var P=Fa(x);if(P===null)return!0;var V=Fo.call(P,"constructor")&&P.constructor;return typeof V=="function"&&V instanceof V&&YA.call(V)==lA}var H0=ya?pu(ya):$;function yC(x){return Jg(x)&&x>=-9007199254740991&&x<=Qe}var e1=La?pu(La):te;function xm(x){return typeof x=="string"||!vo(x)&&xl(x)&&Xs(x)==br}function KA(x){return typeof x=="symbol"||xl(x)&&Xs(x)==Cr}var Kp=fu?pu(fu):oe;function Vy(x){return x===t}function Hy(x){return xl(x)&&gl(x)==Qn}function p3(x){return xl(x)&&Xs(x)==Sr}var f=af(qe),u=af(function(x,P){return x<=P});function d(x){if(!x)return[];if(Ic(x))return xm(x)?Lu(x):Ia(x);if(bA&&x[bA])return Kf(x[bA]());var P=gl(x),V=P==Nt?dh:P==fr?Ol:Ko;return V(x)}function v(x){if(!x)return x===0?x:0;if(x=F(x),x===ze||x===-1/0){var P=x<0?-1:1;return P*ut}return x===x?x:0}function w(x){var P=v(x),V=P%1;return P===P?V?P-V:P:0}function D(x){return x?bu(w(x),0,Ue):0}function F(x){if(typeof x=="number")return x;if(KA(x))return Te;if(bl(x)){var P=typeof x.valueOf=="function"?x.valueOf():x;x=bl(P)?P+"":P}if(typeof x!="string")return x===0?x:+x;x=Fc(x);var V=as.test(x);return V||ll.test(x)?Gn(x.slice(2),V?2:8):Vi.test(x)?Te:+x}function G(x){return Au(x,Wr(x))}function Z(x){return x?bu(w(x),-9007199254740991,Qe):x===0?x:0}function re(x){return x==null?"":No(x)}var Ae=kA(function(x,P){if(Fe(P)||Ic(P)){Au(P,jr(P),x);return}for(var V in P)Fo.call(P,V)&&xc(x,V,P[V])}),_e=kA(function(x,P){Au(P,Wr(P),x)}),Re=kA(function(x,P,V,ye){Au(P,Wr(P),x,ye)}),Le=kA(function(x,P,V,ye){Au(P,jr(P),x,ye)}),je=Oc(rc);function He(x,P){var V=Ua(x);return P==null?V:hr(V,P)}var at=On(function(x,P){x=$o(x);var V=-1,ye=P.length,$e=ye>2?P[2]:t;for($e&&E(P[0],P[1],$e)&&(ye=1);++V<ye;)for(var lt=P[V],Dt=Wr(lt),qt=-1,sn=Dt.length;++qt<sn;){var Wn=Dt[qt],qn=x[Wn];(qn===t||ld(qn,kl[Wn])&&!Fo.call(x,Wn))&&(x[Wn]=lt[Wn])}return x}),vt=On(function(x){return x.push(t,lf),Hs($l,t,x)});function jt(x,P){return Rf(x,di(P,3),dl)}function St(x,P){return Rf(x,di(P,3),qu)}function Ke(x,P){return x==null?x:wc(x,di(P,3),Wr)}function nt(x,P){return x==null?x:Wl(x,di(P,3),Wr)}function It(x,P){return x&&dl(x,di(P,3))}function un(x,P){return x&&qu(x,di(P,3))}function Fn(x){return x==null?[]:Mc(x,jr(x))}function mn(x){return x==null?[]:Mc(x,Wr(x))}function bn(x,P,V){var ye=x==null?t:wu(x,P);return ye===t?V:ye}function Hn(x,P){return x!=null&&hm(x,P,lu)}function Ln(x,P){return x!=null&&hm(x,P,cA)}var sr=xp(function(x,P,V){P!=null&&typeof P.toString!="function"&&(P=CA.call(P)),x[P]=V},Uh(cd)),Bn=xp(function(x,P,V){P!=null&&typeof P.toString!="function"&&(P=CA.call(P)),Fo.call(x,P)?x[P].push(V):x[P]=[V]},di),Gr=On(Ql);function jr(x){return Ic(x)?ou(x):Ee(x)}function Wr(x){return Ic(x)?ou(x,!0):Ie(x)}function ei(x,P){var V={};return P=di(P,3),dl(x,function(ye,$e,lt){Qu(V,P(ye,$e,lt),ye)}),V}function Ro(x,P){var V={};return P=di(P,3),dl(x,function(ye,$e,lt){Qu(V,$e,P(ye,$e,lt))}),V}var ol=kA(function(x,P,V){ct(x,P,V)}),$l=kA(function(x,P,V,ye){ct(x,P,V,ye)}),Xu=Oc(function(x,P){var V={};if(x==null)return V;var ye=!1;P=Ms(P,function(lt){return lt=Js(lt,x),ye||(ye=lt.length>1),lt}),Au(x,Af(x),V),ye&&(V=Cs(V,B|S|I,Ih));for(var $e=P.length;$e--;)ja(V,P[$e]);return V});function ud(x,P){return Eu(x,ni(di(P)))}var lc=Oc(function(x,P){return x==null?{}:Rt(x,P)});function Eu(x,P){if(x==null)return{};var V=Ms(Af(x),function(ye){return[ye]});return P=di(P),zt(x,V,function(ye,$e){return P(ye,$e[0])})}function pA(x,P,V){P=Js(P,x);var ye=-1,$e=P.length;for($e||($e=1,x=t);++ye<$e;){var lt=x==null?t:x[Ca(P[ye])];lt===t&&(ye=$e,lt=V),x=ac(lt)?lt.call(x):lt}return x}function wl(x,P,V){return x==null?x:kr(x,P,V)}function cu(x,P,V,ye){return ye=typeof ye=="function"?ye:t,x==null?x:kr(x,P,V,ye)}var DA=jf(jr),LA=jf(Wr);function uc(x,P,V){var ye=vo(x),$e=ye||zd(x)||Kp(x);if(P=di(P,4),V==null){var lt=x&&x.constructor;$e?V=ye?new lt:[]:bl(x)?V=ac(lt)?Ua(Fa(x)):{}:V={}}return($e?Sa:dl)(x,function(Dt,qt,sn){return P(V,Dt,qt,sn)}),V}function hu(x,P){return x==null?!0:ja(x,P)}function Dh(x,P,V){return x==null?x:$u(x,P,Vu(V))}function kc(x,P,V,ye){return ye=typeof ye=="function"?ye:t,x==null?x:$u(x,P,Vu(V),ye)}function Ko(x){return x==null?[]:Sd(x,jr(x))}function mA(x){return x==null?[]:Sd(x,Wr(x))}function qa(x,P,V){return V===t&&(V=P,P=t),V!==t&&(V=F(V),V=V===V?V:0),P!==t&&(P=F(P),P=P===P?P:0),bu(F(x),P,V)}function sl(x,P,V){return P=v(P),V===t?(V=P,P=0):V=v(V),x=F(x),Mu(x,P,V)}function Bu(x,P,V){if(V&&typeof V!="boolean"&&E(x,P,V)&&(P=V=t),V===t&&(typeof P=="boolean"?(V=P,P=t):typeof x=="boolean"&&(V=x,x=t)),x===t&&P===t?(x=0,P=1):(x=v(x),P===t?(P=x,x=0):P=v(P)),x>P){var ye=x;x=P,P=ye}if(V||x%1||P%1){var $e=mh();return cs(x+$e*(P-x+Or("1e-"+(($e+"").length-1))),P)}return vn(x,P)}var wm=od(function(x,P,V){return P=P.toLowerCase(),x+(V?th(P):P)});function th(x){return Jy(re(x).toLowerCase())}function Z0(x){return x=re(x),x&&x.replace(ts,nf).replace(oA,"")}function Ad(x,P,V){x=re(x),P=No(P);var ye=x.length;V=V===t?ye:bu(w(V),0,ye);var $e=V;return V-=P.length,V>=0&&x.slice(V,$e)==P}function nh(x){return x=re(x),x&&rn.test(x)?x.replace(Ot,iu):x}function Ju(x){return x=re(x),x&&on.test(x)?x.replace(wr,"\\$&"):x}var Lh=od(function(x,P,V){return x+(V?"-":"")+P.toLowerCase()}),Hf=od(function(x,P,V){return x+(V?" ":"")+P.toLowerCase()}),vC=bp("toLowerCase");function _C(x,P,V){x=re(x),P=w(P);var ye=P?jc(x):0;if(!P||ye>=P)return x;var $e=(P-ye)/2;return zf(Fu($e),V)+x+zf(ZA($e),V)}function CC(x,P,V){x=re(x),P=w(P);var ye=P?jc(x):0;return P&&ye<P?x+zf(P-ye,V):x}function bC(x,P,V){x=re(x),P=w(P);var ye=P?jc(x):0;return P&&ye<P?zf(P-ye,V)+x:x}function Zy(x,P,V){return V||P==null?P=0:P&&(P=+P),ph(re(x).replace(zn,""),P||0)}function Xy(x,P,V){return(V?E(x,P,V):P===t)?P=1:P=w(P),gn(re(x),P)}function Zf(){var x=arguments,P=re(x[0]);return x.length<3?P:P.replace(x[1],x[2])}var xC=od(function(x,P,V){return x+(V?"_":"")+P.toLowerCase()});function wC(x,P,V){return V&&typeof V!="number"&&E(x,P,V)&&(P=V=t),V=V===t?Ue:V>>>0,V?(x=re(x),x&&(typeof P=="string"||P!=null&&!H0(P))&&(P=No(P),!P&&zc(x))?sa(Lu(x),0,V):x.split(P,V)):[]}var m3=od(function(x,P,V){return x+(V?" ":"")+Jy(P)});function g3(x,P,V){return x=re(x),V=V==null?0:bu(w(V),0,x.length),P=No(P),x.slice(V,V+P.length)==P}function y3(x,P,V){var ye=et.templateSettings;V&&E(x,P,V)&&(P=t),x=re(x),P=Re({},P,ye,Hu);var $e=Re({},P.imports,ye.imports,Hu),lt=jr($e),Dt=Sd($e,lt),qt,sn,Wn=0,qn=P.interpolate||Aa,ur="__p += '",Zr=QA((P.escape||Aa).source+"|"+qn.source+"|"+(qn===bt?ji:Aa).source+"|"+(P.evaluate||Aa).source+"|$","g"),xi="//# sourceURL="+(Fo.call(P,"sourceURL")?(P.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gi+"]")+`
`;x.replace(Zr,function(to,xs,Ls,Nd,zh,Gd){return Ls||(Ls=Nd),ur+=x.slice(Wn,Gd).replace(Al,Bl),xs&&(qt=!0,ur+=`' +
__e(`+xs+`) +
'`),zh&&(sn=!0,ur+=`';
`+zh+`;
__p += '`),Ls&&(ur+=`' +
((__t = (`+Ls+`)) == null ? '' : __t) +
'`),Wn=Gd+to.length,to}),ur+=`';
`;var eo=Fo.call(P,"variable")&&P.variable;if(!eo)ur=`with (obj) {
`+ur+`
}
`;else if(co.test(eo))throw new _i(s);ur=(sn?ur.replace(p,""):ur).replace(Ne,"$1").replace(dt,"$1;"),ur="function("+(eo||"obj")+`) {
`+(eo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(qt?", __e = _.escape":"")+(sn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ur+`return __p
}`;var is=EC(function(){return Co(lt,xi+"return "+ur).apply(t,Dt)});if(is.source=ur,Rp(is))throw is;return is}function v3(x){return re(x).toLowerCase()}function _3(x){return re(x).toUpperCase()}function C3(x,P,V){if(x=re(x),x&&(V||P===t))return Fc(x);if(!x||!(P=No(P)))return x;var ye=Lu(x),$e=Lu(P),lt=aA(ye,$e),Dt=Uc(ye,$e)+1;return sa(ye,lt,Dt).join("")}function b3(x,P,V){if(x=re(x),x&&(V||P===t))return x.slice(0,$h(x)+1);if(!x||!(P=No(P)))return x;var ye=Lu(x),$e=Uc(ye,Lu(P))+1;return sa(ye,0,$e).join("")}function x3(x,P,V){if(x=re(x),x&&(V||P===t))return x.replace(zn,"");if(!x||!(P=No(P)))return x;var ye=Lu(x),$e=aA(ye,Lu(P));return sa(ye,$e).join("")}function jd(x,P){var V=ce,ye=we;if(bl(P)){var $e="separator"in P?P.separator:$e;V="length"in P?w(P.length):V,ye="omission"in P?No(P.omission):ye}x=re(x);var lt=x.length;if(zc(x)){var Dt=Lu(x);lt=Dt.length}if(V>=lt)return x;var qt=V-jc(ye);if(qt<1)return ye;var sn=Dt?sa(Dt,0,qt).join(""):x.slice(0,qt);if($e===t)return sn+ye;if(Dt&&(qt+=sn.length-qt),H0($e)){if(x.slice(qt).search($e)){var Wn,qn=sn;for($e.global||($e=QA($e.source,re(ui.exec($e))+"g")),$e.lastIndex=0;Wn=$e.exec(qn);)var ur=Wn.index;sn=sn.slice(0,ur===t?qt:ur)}}else if(x.indexOf(No($e),qt)!=qt){var Zr=sn.lastIndexOf($e);Zr>-1&&(sn=sn.slice(0,Zr))}return sn+ye}function t1(x){return x=re(x),x&&_t.test(x)?x.replace(pt,Vh):x}var MC=od(function(x,P,V){return x+(V?" ":"")+P.toUpperCase()}),Jy=bp("toUpperCase");function SC(x,P,V){return x=re(x),P=V?t:P,P===t?rf(x)?of(x):yp(x):x.match(P)||[]}var EC=On(function(x,P){try{return Hs(x,t,P)}catch(V){return Rp(V)?V:new _i(V)}}),FA=Oc(function(x,P){return Sa(P,function(V){V=Ca(V),Qu(x,V,Vn(x[V],x))}),x});function Fh(x){var P=x==null?0:x.length,V=di();return x=P?Ms(x,function(ye){if(typeof ye[1]!="function")throw new Il(a);return[V(ye[0]),ye[1]]}):[],On(function(ye){for(var $e=-1;++$e<P;){var lt=x[$e];if(Hs(lt[0],this,ye))return Hs(lt[1],this,ye)}})}function Mm(x){return Lf(Cs(x,B))}function Uh(x){return function(){return x}}function Sm(x,P){return x==null||x!==x?P:x}var yf=Td(),mG=Td(!0);function cd(x){return x}function w3(x){return be(typeof x=="function"?x:Cs(x,B))}function gG(x){return At(Cs(x,B))}function yG(x,P){return ot(x,Cs(P,B))}var vG=On(function(x,P){return function(V){return Ql(V,x,P)}}),_G=On(function(x,P){return function(V){return Ql(x,V,P)}});function M3(x,P,V){var ye=jr(P),$e=Mc(P,ye);V==null&&!(bl(P)&&($e.length||!ye.length))&&(V=P,P=x,x=this,$e=Mc(P,jr(P)));var lt=!(bl(V)&&"chain"in V)||!!V.chain,Dt=ac(x);return Sa($e,function(qt){var sn=P[qt];x[qt]=sn,Dt&&(x.prototype[qt]=function(){var Wn=this.__chain__;if(lt||Wn){var qn=x(this.__wrapped__),ur=qn.__actions__=Ia(this.__actions__);return ur.push({func:sn,args:arguments,thisArg:x}),qn.__chain__=Wn,qn}return sn.apply(x,Du([this.value()],arguments))})}),x}function CG(){return pr._===this&&(pr._=Tl),this}function S3(){}function bG(x){return x=w(x),On(function(P){return Et(P,x)})}var xG=Uf(Ms),wG=Uf(lh),MG=Uf(sA);function RI(x){return K(x)?tf(Ca(x)):Pt(x)}function SG(x){return function(P){return x==null?t:wu(x,P)}}var EG=Oh(),BG=Oh(!0);function E3(){return[]}function B3(){return!1}function OG(){return{}}function IG(){return""}function kG(){return!0}function TG(x,P){if(x=w(x),x<1||x>Qe)return[];var V=Ue,ye=cs(x,Ue);P=di(P),x-=Ue;for(var $e=hh(ye,P);++V<x;)P(V);return $e}function PG(x){return vo(x)?Ms(x,Ca):KA(x)?[x]:Ia(aa(re(x)))}function RG(x){var P=++Nc;return re(x)+P}var KG=sd(function(x,P){return x+P},0),DG=Rl("ceil"),LG=sd(function(x,P){return x/P},1),FG=Rl("floor");function UG(x){return x&&x.length?EA(x,cd,au):t}function zG(x,P){return x&&x.length?EA(x,di(P,2),au):t}function jG(x){return Ah(x,cd)}function NG(x,P){return Ah(x,di(P,2))}function GG(x){return x&&x.length?EA(x,cd,qe):t}function WG(x,P){return x&&x.length?EA(x,di(P,2),qe):t}var QG=sd(function(x,P){return x*P},1),qG=Rl("round"),YG=sd(function(x,P){return x-P},0);function $G(x){return x&&x.length?Md(x,cd):0}function VG(x,P){return x&&x.length?Md(x,di(P,2)):0}return et.after=Cn,et.ary=or,et.assign=Ae,et.assignIn=_e,et.assignInWith=Re,et.assignWith=Le,et.at=je,et.before=Ar,et.bind=Vn,et.bindAll=FA,et.bindKey=Ur,et.castArray=lC,et.chain=qf,et.chunk=Wa,et.compact=xa,et.concat=ds,et.cond=Fh,et.conforms=Mm,et.constant=Uh,et.countBy=$g,et.create=He,et.curry=ii,et.curryRight=li,et.debounce=il,et.defaults=at,et.defaultsDeep=vt,et.defer=ln,et.delay=Jt,et.difference=yi,et.differenceBy=Zo,et.differenceWith=la,et.drop=fa,et.dropRight=Is,et.dropRightWhile=Kl,et.dropWhile=Po,et.fill=Ph,et.filter=ym,et.flatMap=eh,et.flatMapDeep=Fd,et.flatMapDepth=o0,et.flatten=Xc,et.flattenDeep=vl,et.flattenDepth=_l,et.flip=cn,et.flow=yf,et.flowRight=mG,et.fromPairs=hf,et.functions=Fn,et.functionsIn=mn,et.groupBy=a0,et.initial=df,et.intersection=$m,et.intersectionBy=ff,et.intersectionWith=Vm,et.invert=sr,et.invertBy=Bn,et.invokeMap=Y0,et.iteratee=w3,et.keyBy=l0,et.keys=jr,et.keysIn=Wr,et.map=kp,et.mapKeys=ei,et.mapValues=Ro,et.matches=gG,et.matchesProperty=yG,et.memoize=mr,et.merge=ol,et.mergeWith=$l,et.method=vG,et.methodOf=_G,et.mixin=M3,et.negate=ni,et.nthArg=bG,et.omit=Xu,et.omitBy=ud,et.once=Ii,et.orderBy=$f,et.over=xG,et.overArgs=Oi,et.overEvery=wG,et.overSome=MG,et.partial=Ui,et.partialRight=Ds,et.partition=Tp,et.pick=lc,et.pickBy=Eu,et.property=RI,et.propertyOf=SG,et.pull=fm,et.pullAll=Gf,et.pullAllBy=hA,et.pullAllWith=Kd,et.pullAt=Jc,et.range=EG,et.rangeRight=BG,et.rearg=Xo,et.reject=_,et.remove=sc,et.rest=Ud,et.reverse=Wf,et.sampleSize=W,et.set=wl,et.setWith=cu,et.shuffle=se,et.slice=U0,et.sortBy=kt,et.sortedUniq=z0,et.sortedUniqBy=Rh,et.split=wC,et.spread=Hg,et.tail=j0,et.take=Xm,et.takeRight=Jm,et.takeRightWhile=Qa,et.takeWhile=N0,et.tap=n0,et.throttle=oC,et.thru=Kh,et.toArray=d,et.toPairs=DA,et.toPairsIn=LA,et.toPath=PG,et.toPlainObject=G,et.transform=uc,et.unary=sC,et.union=Wy,et.unionBy=G0,et.unionWith=e0,et.uniq=Dd,et.uniqBy=Qy,et.uniqWith=Bp,et.unset=hu,et.unzip=t0,et.unzipWith=rl,et.update=Dh,et.updateWith=kc,et.values=Ko,et.valuesIn=mA,et.without=Qg,et.words=SC,et.wrap=aC,et.xor=dA,et.xorBy=W0,et.xorWith=qg,et.zip=Ld,et.zipObject=Op,et.zipObjectDeep=pm,et.zipWith=Zu,et.entries=DA,et.entriesIn=LA,et.extend=_e,et.extendWith=Re,M3(et,et),et.add=KG,et.attempt=EC,et.camelCase=wm,et.capitalize=th,et.ceil=DG,et.clamp=qa,et.clone=u3,et.cloneDeep=Pp,et.cloneDeepWith=AC,et.cloneWith=uC,et.conformsTo=cC,et.deburr=Z0,et.defaultTo=Sm,et.divide=LG,et.endsWith=Ad,et.eq=ld,et.escape=nh,et.escapeRegExp=Ju,et.every=Vg,et.find=vm,et.findIndex=yl,et.findKey=jt,et.findLast=Ip,et.findLastIndex=PA,et.findLastKey=St,et.floor=FG,et.forEach=Yf,et.forEachRight=s0,et.forIn=Ke,et.forInRight=nt,et.forOwn=It,et.forOwnRight=un,et.get=bn,et.gt=hC,et.gte=A3,et.has=Hn,et.hasIn=Ln,et.head=Nf,et.identity=cd,et.includes=_m,et.indexOf=Rd,et.inRange=sl,et.invoke=Gr,et.isArguments=bm,et.isArray=vo,et.isArrayBuffer=$0,et.isArrayLike=Ic,et.isArrayLikeObject=Cl,et.isBoolean=dC,et.isBuffer=zd,et.isDate=Zg,et.isElement=Xg,et.isEmpty=c3,et.isEqual=h3,et.isEqualWith=d3,et.isError=Rp,et.isFinite=fA,et.isFunction=ac,et.isInteger=Jg,et.isLength=V0,et.isMap=fC,et.isMatch=pC,et.isMatchWith=mC,et.isNaN=f3,et.isNative=gC,et.isNil=Yy,et.isNull=qy,et.isNumber=$y,et.isObject=bl,et.isObjectLike=xl,et.isPlainObject=Vf,et.isRegExp=H0,et.isSafeInteger=yC,et.isSet=e1,et.isString=xm,et.isSymbol=KA,et.isTypedArray=Kp,et.isUndefined=Vy,et.isWeakMap=Hy,et.isWeakSet=p3,et.join=pf,et.kebabCase=Lh,et.last=RA,et.lastIndexOf=dm,et.lowerCase=Hf,et.lowerFirst=vC,et.lt=f,et.lte=u,et.max=UG,et.maxBy=zG,et.mean=jG,et.meanBy=NG,et.min=GG,et.minBy=WG,et.stubArray=E3,et.stubFalse=B3,et.stubObject=OG,et.stubString=IG,et.stubTrue=kG,et.multiply=QG,et.nth=F0,et.noConflict=CG,et.noop=S3,et.now=Wt,et.pad=_C,et.padEnd=CC,et.padStart=bC,et.parseInt=Zy,et.random=Bu,et.reduce=Cm,et.reduceRight=m,et.repeat=Xy,et.replace=Zf,et.result=pA,et.round=qG,et.runInContext=Vt,et.sample=L,et.size=ge,et.snakeCase=xC,et.some=Ze,et.sortedIndex=Hm,et.sortedIndexBy=Gy,et.sortedIndexOf=mf,et.sortedLastIndex=Wg,et.sortedLastIndexBy=Zm,et.sortedLastIndexOf=Qf,et.startCase=m3,et.startsWith=g3,et.subtract=YG,et.sum=$G,et.sumBy=VG,et.template=y3,et.times=TG,et.toFinite=v,et.toInteger=w,et.toLength=D,et.toLower=v3,et.toNumber=F,et.toSafeInteger=Z,et.toString=re,et.toUpper=_3,et.trim=C3,et.trimEnd=b3,et.trimStart=x3,et.truncate=jd,et.unescape=t1,et.uniqueId=RG,et.upperCase=MC,et.upperFirst=Jy,et.each=Yf,et.eachRight=s0,et.first=Nf,M3(et,function(){var x={};return dl(et,function(P,V){Fo.call(et.prototype,V)||(x[V]=P)}),x}(),{chain:!1}),et.VERSION=r,Sa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){et[x].placeholder=et}),Sa(["drop","take"],function(x,P){$r.prototype[x]=function(V){V=V===t?1:Uo(w(V),0);var ye=this.__filtered__&&!P?new $r(this):this.clone();return ye.__filtered__?ye.__takeCount__=cs(V,ye.__takeCount__):ye.__views__.push({size:cs(V,Ue),type:x+(ye.__dir__<0?"Right":"")}),ye},$r.prototype[x+"Right"]=function(V){return this.reverse()[x](V).reverse()}}),Sa(["filter","map","takeWhile"],function(x,P){var V=P+1,ye=V==Pe||V==rt;$r.prototype[x]=function($e){var lt=this.clone();return lt.__iteratees__.push({iteratee:di($e,3),type:V}),lt.__filtered__=lt.__filtered__||ye,lt}}),Sa(["head","last"],function(x,P){var V="take"+(P?"Right":"");$r.prototype[x]=function(){return this[V](1).value()[0]}}),Sa(["initial","tail"],function(x,P){var V="drop"+(P?"":"Right");$r.prototype[x]=function(){return this.__filtered__?new $r(this):this[V](1)}}),$r.prototype.compact=function(){return this.filter(cd)},$r.prototype.find=function(x){return this.filter(x).head()},$r.prototype.findLast=function(x){return this.reverse().find(x)},$r.prototype.invokeMap=On(function(x,P){return typeof x=="function"?new $r(this):this.map(function(V){return Ql(V,x,P)})}),$r.prototype.reject=function(x){return this.filter(ni(di(x)))},$r.prototype.slice=function(x,P){x=w(x);var V=this;return V.__filtered__&&(x>0||P<0)?new $r(V):(x<0?V=V.takeRight(-x):x&&(V=V.drop(x)),P!==t&&(P=w(P),V=P<0?V.dropRight(-P):V.take(P-x)),V)},$r.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},$r.prototype.toArray=function(){return this.take(Ue)},dl($r.prototype,function(x,P){var V=/^(?:filter|find|map|reject)|While$/.test(P),ye=/^(?:head|last)$/.test(P),$e=et[ye?"take"+(P=="last"?"Right":""):P],lt=ye||/^find/.test(P);$e&&(et.prototype[P]=function(){var Dt=this.__wrapped__,qt=ye?[1]:arguments,sn=Dt instanceof $r,Wn=qt[0],qn=sn||vo(Dt),ur=function(xs){var Ls=$e.apply(et,Du([xs],qt));return ye&&Zr?Ls[0]:Ls};qn&&V&&typeof Wn=="function"&&Wn.length!=1&&(sn=qn=!1);var Zr=this.__chain__,xi=!!this.__actions__.length,eo=lt&&!Zr,is=sn&&!xi;if(!lt&&qn){Dt=is?Dt:new $r(this);var to=x.apply(Dt,qt);return to.__actions__.push({func:Kh,args:[ur],thisArg:t}),new Ri(to,Zr)}return eo&&is?x.apply(this,qt):(to=this.thru(ur),eo?ye?to.value()[0]:to.value():to)})}),Sa(["pop","push","shift","sort","splice","unshift"],function(x){var P=yu[x],V=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",ye=/^(?:pop|shift)$/.test(x);et.prototype[x]=function(){var $e=arguments;if(ye&&!this.__chain__){var lt=this.value();return P.apply(vo(lt)?lt:[],$e)}return this[V](function(Dt){return P.apply(vo(Dt)?Dt:[],$e)})}}),dl($r.prototype,function(x,P){var V=et[P];if(V){var ye=V.name+"";Fo.call(ju,ye)||(ju[ye]=[]),ju[ye].push({name:P,func:V})}}),ju[Bh(t,Y).name]=[{name:"wrapper",func:t}],$r.prototype.clone=Ss,$r.prototype.reverse=yh,$r.prototype.value=td,et.prototype.at=r0,et.prototype.chain=gf,et.prototype.commit=mm,et.prototype.next=Q0,et.prototype.plant=Yg,et.prototype.reverse=gm,et.prototype.toJSON=et.prototype.valueOf=et.prototype.value=q0,et.prototype.first=et.prototype.head,bA&&(et.prototype[bA]=i0),et},gu=mc();vi?((vi.exports=gu)._=gu,Ir._=gu):pr._=gu}).call(KQ)}(yv,yv.exports)),yv.exports}var V2=DQ();const DE=Ka(V2);function LQ(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[o]=n.splice(e,1);n.splice(i,0,o)}}var N3,M8;function FQ(){if(M8)return N3;M8=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return N3=n,N3}var UQ=FQ();const S8=Ka(UQ);var zQ=8,jQ={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},NQ={"*":{type:"source"}},GQ=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],WQ={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},QQ={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},qQ={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},YQ={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},$Q={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},VQ={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},HQ={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},ZQ=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],XQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},JQ={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},eq={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},tq={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},nq={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rq={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},iq={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},oq={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},sq={type:"array",value:"*"},aq={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},lq={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},uq={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Aq={type:"array",value:"*",minimum:1},cq={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},hq={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},dq={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},fq={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},pq=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],mq={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},gq={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},yq={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},vq={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},_q={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Cq={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},bq={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},xq={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wq={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Mq={"*":{type:"string"}},Ys={$version:zQ,$root:jQ,sources:NQ,source:GQ,source_vector:WQ,source_raster:QQ,source_raster_dem:qQ,source_geojson:YQ,source_video:$Q,source_image:VQ,layer:HQ,layout:ZQ,layout_background:XQ,layout_fill:JQ,layout_circle:eq,layout_heatmap:tq,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:nq,layout_symbol:rq,layout_raster:iq,layout_hillshade:oq,filter:sq,filter_operator:aq,geometry_type:lq,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:uq,expression:Aq,light:cq,sky:hq,terrain:dq,projection:fq,paint:pq,paint_fill:mq,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:gq,paint_circle:yq,paint_heatmap:vq,paint_symbol:_q,paint_raster:Cq,paint_hillshade:bq,paint_background:xq,transition:wq,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Mq};const Sq=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Eq(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return Sq.forEach(r=>{r in e&&(t[r]=e[r])}),t}function Bq(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Eq(n[t],e[n[t].ref]));return n}function wa(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!wa(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!wa(n[r],e[r]))return!1;return!0}return n===e}function Cf(n,e){n.push(e)}function vL(n,e,t){Cf(t,{command:"addSource",args:[n,e[n]]})}function _L(n,e,t){Cf(e,{command:"removeSource",args:[n]}),t[n]=!0}function Oq(n,e,t,r){_L(n,t,r),vL(n,e,t)}function Iq(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!wa(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!wa(n[t][r],e[t][r]))return!1;return!0}function kq(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||_L(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?wa(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&Iq(n,e,i)?Cf(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):Oq(i,e,t,r)):vL(i,e,t))}function TC(n,e,t,r,i,o){n=n||{},e=e||{};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(wa(n[a],e[a])||t.push({command:o,args:[r,a,e[a],i]}));for(const a in e)!Object.prototype.hasOwnProperty.call(e,a)||Object.prototype.hasOwnProperty.call(n,a)||wa(n[a],e[a])||t.push({command:o,args:[r,a,e[a],i]})}function E8(n){return n.id}function B8(n,e){return n[e.id]=e,n}function Tq(n,e,t){n=n||[],e=e||[];const r=n.map(E8),i=e.map(E8),o=n.reduce(B8,{}),a=e.reduce(B8,{}),s=r.slice(),h=Object.create(null);let g,b,B,S,I;for(let k=0,U=0;k<r.length;k++)g=r[k],Object.prototype.hasOwnProperty.call(a,g)?U++:(Cf(t,{command:"removeLayer",args:[g]}),s.splice(s.indexOf(g,U),1));for(let k=0,U=0;k<i.length;k++)g=i[i.length-1-k],s[s.length-1-k]!==g&&(Object.prototype.hasOwnProperty.call(o,g)?(Cf(t,{command:"removeLayer",args:[g]}),s.splice(s.lastIndexOf(g,s.length-U),1)):U++,S=s[s.length-k],Cf(t,{command:"addLayer",args:[a[g],S]}),s.splice(s.length-k,0,g),h[g]=!0);for(let k=0;k<i.length;k++)if(g=i[k],b=o[g],B=a[g],!(h[g]||wa(b,B))){if(!wa(b.source,B.source)||!wa(b["source-layer"],B["source-layer"])||!wa(b.type,B.type)){Cf(t,{command:"removeLayer",args:[g]}),S=s[s.lastIndexOf(g)+1],Cf(t,{command:"addLayer",args:[B,S]});continue}TC(b.layout,B.layout,t,g,null,"setLayoutProperty"),TC(b.paint,B.paint,t,g,null,"setPaintProperty"),wa(b.filter,B.filter)||Cf(t,{command:"setFilter",args:[g,B.filter]}),(!wa(b.minzoom,B.minzoom)||!wa(b.maxzoom,B.maxzoom))&&Cf(t,{command:"setLayerZoomRange",args:[g,B.minzoom,B.maxzoom]});for(I in b)Object.prototype.hasOwnProperty.call(b,I)&&(I==="layout"||I==="paint"||I==="filter"||I==="metadata"||I==="minzoom"||I==="maxzoom"||(I.indexOf("paint.")===0?TC(b[I],B[I],t,g,I.slice(6),"setPaintProperty"):wa(b[I],B[I])||Cf(t,{command:"setLayerProperty",args:[g,I,B[I]]})));for(I in B)!Object.prototype.hasOwnProperty.call(B,I)||Object.prototype.hasOwnProperty.call(b,I)||I==="layout"||I==="paint"||I==="filter"||I==="metadata"||I==="minzoom"||I==="maxzoom"||(I.indexOf("paint.")===0?TC(b[I],B[I],t,g,I.slice(6),"setPaintProperty"):wa(b[I],B[I])||Cf(t,{command:"setLayerProperty",args:[g,I,B[I]]}))}}function Pq(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!wa(n.version,e.version))return[{command:"setStyle",args:[e]}];wa(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),wa(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),wa(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),wa(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),wa(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),wa(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),wa(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),wa(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),wa(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),wa(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),wa(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),wa(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),wa(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];kq(n.sources,e.sources,i,r);const o=[];n.layers&&n.layers.forEach(a=>{"source"in a&&r[a.source]?t.push({command:"removeLayer",args:[a.id]}):o.push(a)}),t=t.concat(i),Tq(o,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class Er{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function py(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class Gp extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}let Rq=class CL{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new CL(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const H2={kind:"null"},Pr={kind:"number"},os={kind:"string"},Go={kind:"boolean"},Vp={kind:"color"},Z2={kind:"projectionDefinition"},J1={kind:"object"},Qo={kind:"value"},Kq={kind:"error"},X2={kind:"collator"},J2={kind:"formatted"},ex={kind:"padding"},I_={kind:"resolvedImage"},tx={kind:"variableAnchorOffsetCollection"};function Yd(n,e){return{kind:"array",itemType:n,N:e}}function Zl(n){if(n.kind==="array"){const e=Zl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Dq=[H2,Pr,os,Go,Vp,Z2,J2,J1,Yd(Qo),ex,I_,tx];function Hv(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Hv(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Dq)if(!Hv(t,e))return null}}return`Expected ${Zl(n)} but found ${Zl(e)} instead.`}function rB(n,e){return e.some(t=>t.kind===n.kind)}function _g(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function i1(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const bL=.96422,xL=1,wL=.82521,ML=4/29,ey=6/29,SL=3*ey*ey,Lq=ey*ey*ey,Fq=Math.PI/180,Uq=180/Math.PI;function EL(n){return n=n%360,n<0&&(n+=360),n}function BL([n,e,t,r]){n=G3(n),e=G3(e),t=G3(t);let i,o;const a=W3((.2225045*n+.7168786*e+.0606169*t)/xL);n===e&&e===t?i=o=a:(i=W3((.4360747*n+.3850649*e+.1430804*t)/bL),o=W3((.0139322*n+.0971045*e+.7141733*t)/wL));const s=116*a-16;return[s<0?0:s,500*(i-a),200*(a-o),r]}function G3(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function W3(n){return n>Lq?Math.pow(n,1/3):n/SL+ML}function OL([n,e,t,r]){let i=(n+16)/116,o=isNaN(e)?i:i+e/500,a=isNaN(t)?i:i-t/200;return i=xL*q3(i),o=bL*q3(o),a=wL*q3(a),[Q3(3.1338561*o-1.6168667*i-.4906146*a),Q3(-.9787684*o+1.9161415*i+.033454*a),Q3(.0719453*o-.2289914*i+1.4052427*a),r]}function Q3(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function q3(n){return n>ey?n*n*n:SL*(n-ML)}function zq(n){const[e,t,r,i]=BL(n),o=Math.sqrt(t*t+r*r);return[Math.round(o*1e4)?EL(Math.atan2(r,t)*Uq):NaN,o,e,i]}function jq([n,e,t,r]){return n=isNaN(n)?0:n*Fq,OL([t,Math.cos(n)*e,Math.sin(n)*e,r])}function Nq([n,e,t,r]){n=EL(n),e/=100,t/=100;function i(o){const a=(o+n/30)%12,s=e*Math.min(t,1-t);return t-s*Math.max(-1,Math.min(a-3,9-a,1))}return[i(0),i(8),i(4),r]}function Gq(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=Wq[n];if(e){const[i,o,a]=e;return[i/255,o/255,a/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let a=1;return[PC(n.slice(a,a+=o)),PC(n.slice(a,a+=o)),PC(n.slice(a,a+=o)),PC(n.slice(a,a+o)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(i);if(o){const[a,s,h,g,b,B,S,I,k,U,z,Y]=o,Q=[g||" ",S||" ",U].join("");if(Q==="  "||Q==="  /"||Q===",,"||Q===",,,"){const ne=[h,B,k].join(""),X=ne==="%%%"?100:ne===""?255:0;if(X){const q=[P1(+s/X,0,1),P1(+b/X,0,1),P1(+I/X,0,1),z?O8(+z,Y):1];if(I8(q))return q}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,o,a,s,h,g,b,B,S]=r,I=[a||" ",h||" ",b].join("");if(I==="  "||I==="  /"||I===",,"||I===",,,"){const k=[+o,P1(+s,0,100),P1(+g,0,100),B?O8(+B,S):1];if(I8(k))return Nq(k)}}}function PC(n){return parseInt(n.padEnd(2,n),16)/255}function O8(n,e){return P1(e?n/100:n,0,1)}function P1(n,e,t){return Math.min(Math.max(e,n),t)}function I8(n){return!n.some(Number.isNaN)}const Wq={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function S0(n,e,t){return n+t*(e-n)}function Zv(n,e,t){return n.map((r,i)=>S0(r,e[i],t))}function Qq(n){return n==="rgb"||n==="hcl"||n==="lab"}let Ul=class R1{constructor(e,t,r,i=1,o=!0){this.r=e,this.g=t,this.b=r,this.a=i,o||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof R1)return e;if(typeof e!="string")return;const t=Gq(e);if(t)return new R1(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,o=i||1/0;return this.overwriteGetter("rgb",[e/o,t/o,r/o,i])}get hcl(){return this.overwriteGetter("hcl",zq(this.rgb))}get lab(){return this.overwriteGetter("lab",BL(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(o=>Math.round(o*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[o,a,s,h]=Zv(e.rgb,t.rgb,r);return new R1(o,a,s,h,!1)}case"hcl":{const[o,a,s,h]=e.hcl,[g,b,B,S]=t.hcl;let I,k;if(!isNaN(o)&&!isNaN(g)){let ne=g-o;g>o&&ne>180?ne-=360:g<o&&o-g>180&&(ne+=360),I=o+r*ne}else isNaN(o)?isNaN(g)?I=NaN:(I=g,(s===1||s===0)&&(k=b)):(I=o,(B===1||B===0)&&(k=a));const[U,z,Y,Q]=jq([I,k??S0(a,b,r),S0(s,B,r),S0(h,S,r)]);return new R1(U,z,Y,Q,!1)}case"lab":{const[o,a,s,h]=OL(Zv(e.lab,t.lab,r));return new R1(o,a,s,h,!1)}}}};Ul.black=new Ul(0,0,0,1);Ul.white=new Ul(1,1,1,1);Ul.transparent=new Ul(0,0,0,0);Ul.red=new Ul(1,0,0,1);let iB=class{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const qq=["bottom","center","top"];let LE=class{constructor(e,t,r,i,o,a){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=o,this.verticalAlign=a}},Ey=class vb{constructor(e){this.sections=e}static fromString(e){return new vb([new LE(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof vb?e:vb.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}};class Wh{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Wh)return e;if(typeof e=="number")return new Wh([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Wh(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Wh(Zv(e.values,t.values,r))}}let rA=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const Yq=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Bf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Bf)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!Yq.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new Bf(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,o=t.values;if(i.length!==o.length)throw new rA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const a=[];for(let s=0;s<i.length;s+=2){if(i[s]!==o[s])throw new rA(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${i[s]}, to[${s}]: ${o[s]}`);a.push(i[s]);const[h,g]=i[s+1],[b,B]=o[s+1];a.push([S0(h,b,r),S0(g,B,r)])}return new Bf(a)}}let Kg=class IL{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new IL({name:e,available:!1}):null}};class xf{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new xf(e,t,r)}static parse(e){if(e instanceof xf)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new xf(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new xf(e.from,e.to,e.transition);if(typeof e=="string")return new xf(e,e,1)}}function kL(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Xv(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof xf||n instanceof Ul||n instanceof iB||n instanceof Ey||n instanceof Wh||n instanceof Bf||n instanceof Kg)return!0;if(Array.isArray(n)){for(const e of n)if(!Xv(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!Xv(n[e]))return!1;return!0}else return!1}function NA(n){if(n===null)return H2;if(typeof n=="string")return os;if(typeof n=="boolean")return Go;if(typeof n=="number")return Pr;if(n instanceof Ul)return Vp;if(n instanceof xf)return Z2;if(n instanceof iB)return X2;if(n instanceof Ey)return J2;if(n instanceof Wh)return ex;if(n instanceof Bf)return tx;if(n instanceof Kg)return I_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=NA(r);if(!t)t=i;else{if(t===i)continue;t=Qo;break}}return Yd(t||Qo,e)}else return J1}function Fv(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Ul||n instanceof xf||n instanceof Ey||n instanceof Wh||n instanceof Bf||n instanceof Kg?n.toString():JSON.stringify(n)}let jb=class TL{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Xv(e[1]))return t.error("invalid value");const r=e[1];let i=NA(r);const o=t.expectedType;return i.kind==="array"&&i.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(i=o),new TL(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const RC={string:os,number:Pr,boolean:Go,object:J1};let Rm=class PL{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const o=e[0];if(o==="array"){let s;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in RC)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);s=RC[g],r++}else s=Qo;let h;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);h=e[2],r++}i=Yd(s,h)}else{if(!RC[o])throw new Error(`Types doesn't contain name = ${o}`);i=RC[o]}const a=[];for(;r<e.length;r++){const s=t.parse(e[r],r,Qo);if(!s)return null;a.push(s)}return new PL(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(Hv(this.type,NA(r))){if(t===this.args.length-1)throw new rA(`Expected value to be of type ${Zl(this.type)}, but found ${Zl(NA(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const k8={"to-boolean":Go,"to-color":Vp,"to-number":Pr,"to-string":os};let G1=class RL{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!k8[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=k8[r],o=[];for(let a=1;a<e.length;a++){const s=t.parse(e[a],a,Qo);if(!s)return null;o.push(s)}return new RL(i,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Ul)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=kL(t[0],t[1],t[2],t[3]),!r))return new Ul(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new rA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Wh.parse(t);if(i)return i}throw new rA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=Bf.parse(t);if(i)return i}throw new rA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new rA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Ey.fromString(Fv(this.args[0].evaluate(e)));case"resolvedImage":return Kg.fromString(Fv(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Fv(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const $q=["Unknown","Point","LineString","Polygon"];let KL=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?$q[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ul.parse(e)),t}},DL=class LL{constructor(e,t,r=[],i,o=new Rq,a=[]){this.registry=e,this.path=r,this.key=r.map(s=>`[${s}]`).join(""),this.scope=o,this.errors=a,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,o={}){return t?this.concat(t,r,i)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,o,a){return a==="assert"?new Rm(o,[i]):a==="coerce"?new G1(o,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[i];if(o){let a=o.parse(e,this);if(!a)return null;if(this.expectedType){const s=this.expectedType,h=a.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&h.kind==="value")a=r(a,s,t.typeAnnotation||"assert");else if(s.kind==="projectionDefinition"&&(h.kind==="string"||h.kind==="array"))a=r(a,s,t.typeAnnotation||"coerce");else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(h.kind==="value"||h.kind==="string"))a=r(a,s,t.typeAnnotation||"coerce");else if(s.kind==="padding"&&(h.kind==="value"||h.kind==="number"||h.kind==="array"))a=r(a,s,t.typeAnnotation||"coerce");else if(s.kind==="variableAnchorOffsetCollection"&&(h.kind==="value"||h.kind==="array"))a=r(a,s,t.typeAnnotation||"coerce");else if(this.checkSubtype(s,h))return null}if(!(a instanceof jb)&&a.type.kind!=="resolvedImage"&&this._isConstant(a)){const s=new KL;try{a=new jb(a.type,a.evaluate(s))}catch(h){return this.error(h.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,o=r?this.scope.concat(r):this.scope;return new LL(this.registry,this._isConstant,i,t||null,o,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Gp(r,e))}checkSubtype(e,t){const r=Hv(e,t);return r&&this.error(r),r}},FL=class UL{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let o=1;o<e.length-1;o+=2){const a=e[o];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,o);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const s=t.parse(e[o+1],o+1);if(!s)return null;r.push([a,s])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new UL(r,i):null}outputDefined(){return this.result.outputDefined()}},zL=class jL{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new jL(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},Vq=class NL{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Pr),i=t.parse(e[2],2,Yd(t.expectedType||Qo));if(!r||!i)return null;const o=i.type;return new NL(o.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new rA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new rA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new rA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},Hq=class GL{constructor(e,t){this.type=Go,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Qo),i=t.parse(e[2],2,Qo);return!r||!i?null:rB(r.type,[Go,os,Pr,H2,Qo])?new GL(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!_g(t,["boolean","string","number","null"]))throw new rA(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(NA(t))} instead.`);if(!_g(r,["string","array"]))throw new rA(`Expected second argument to be of type array or string, but found ${Zl(NA(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},Zq=class FE{constructor(e,t,r){this.type=Pr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Qo),i=t.parse(e[2],2,Qo);if(!r||!i)return null;if(!rB(r.type,[Go,os,Pr,H2,Qo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(r.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Pr);return o?new FE(r,i,o):null}else return new FE(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!_g(t,["boolean","string","number","null"]))throw new rA(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(NA(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),_g(r,["string"])){const o=r.indexOf(t,i);return o===-1?-1:[...r.slice(0,o)].length}else{if(_g(r,["array"]))return r.indexOf(t,i);throw new rA(`Expected second argument to be of type array or string, but found ${Zl(NA(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},Xq=class WL{constructor(e,t,r,i,o,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=o,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const o={},a=[];for(let g=2;g<e.length-1;g+=2){let b=e[g];const B=e[g+1];Array.isArray(b)||(b=[b]);const S=t.concat(g);if(b.length===0)return S.error("Expected at least one branch label.");for(const k of b){if(typeof k!="number"&&typeof k!="string")return S.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return S.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return S.error("Numeric branch labels must be integer values.");if(!r)r=NA(k);else if(S.checkSubtype(r,NA(k)))return null;if(typeof o[String(k)]<"u")return S.error("Branch labels must be unique.");o[String(k)]=a.length}const I=t.parse(B,g,i);if(!I)return null;i=i||I.type,a.push(I)}const s=t.parse(e[1],1,Qo);if(!s)return null;const h=t.parse(e[e.length-1],e.length-1,i);return!h||s.type.kind!=="value"&&t.concat(1).checkSubtype(r,s.type)?null:new WL(r,i,s,o,a,h)}evaluate(e){const t=this.input.evaluate(e);return(NA(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},Jq=class QL{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const s=t.parse(e[a],a,Go);if(!s)return null;const h=t.parse(e[a+1],a+1,r);if(!h)return null;i.push([s,h]),r=r||h.type}const o=t.parse(e[e.length-1],e.length-1,r);if(!o)return null;if(!r)throw new Error("Can't infer output type");return new QL(r,i,o)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},eY=class UE{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Qo),i=t.parse(e[2],2,Pr);if(!r||!i)return null;if(!rB(r.type,[Yd(Qo),os,Qo]))return t.error(`Expected first argument to be of type array or string, but found ${Zl(r.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Pr);return o?new UE(r.type,r,i,o):null}else return new UE(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),_g(t,["string"]))return[...t].slice(r,i).join("");if(_g(t,["array"]))return t.slice(r,i);throw new rA(`Expected first argument to be of type array or string, but found ${Zl(NA(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function nx(n,e){const t=n.length-1;let r=0,i=t,o=0,a,s;for(;r<=i;)if(o=Math.floor((r+i)/2),a=n[o],s=n[o+1],a<=e){if(o===t||e<s)return o;r=o+1}else if(a>e)i=o-1;else throw new rA("Input is not a number.");return 0}let qL=class YL{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,o]of r)this.labels.push(i),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Pr);if(!r)return null;const i=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let a=1;a<e.length;a+=2){const s=a===1?-1/0:e[a],h=e[a+1],g=a,b=a+1;if(typeof s!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const B=t.parse(h,b,o);if(!B)return null;o=o||B.type,i.push([s,B])}return new YL(o,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const o=t.length;if(i>=t[o-1])return r[o-1].evaluate(e);const a=nx(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function tY(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Y3,T8;function nY(){if(T8)return Y3;T8=1,Y3=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var o=this.sampleCurveX(r)-e;if(Math.abs(o)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r=r-o/a}var s=0,h=1;for(r=e,i=0;i<20&&(o=this.sampleCurveX(r),!(Math.abs(o-e)<t));i++)e>o?s=r:h=r,r=(h-s)*.5+s;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},Y3}var rY=nY(),iY=tY(rY);let Lm=class zE{constructor(e,t,r,i,o){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,s]of o)this.labels.push(a),this.outputs.push(s)}static interpolationFactor(e,t,r,i){let o=0;if(e.name==="exponential")o=$3(t,e.base,r,i);else if(e.name==="linear")o=$3(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;o=new iY(a[0],a[1],a[2],a[3]).solve($3(t,1,r,i))}return o}static parse(e,t){let[r,i,o,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Pr),!o)return null;const s=[];let h=null;r==="interpolate-hcl"||r==="interpolate-lab"?h=Vp:t.expectedType&&t.expectedType.kind!=="value"&&(h=t.expectedType);for(let g=0;g<a.length;g+=2){const b=a[g],B=a[g+1],S=g+3,I=g+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(s.length&&s[s.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',S);const k=t.parse(B,I,h);if(!k)return null;h=h||k.type,s.push([b,k])}return!i1(h,Pr)&&!i1(h,Z2)&&!i1(h,Vp)&&!i1(h,ex)&&!i1(h,tx)&&!i1(h,Yd(Pr))?t.error(`Type ${Zl(h)} is not interpolatable.`):new zE(h,r,i,o,s)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const o=t.length;if(i>=t[o-1])return r[o-1].evaluate(e);const a=nx(t,i),s=t[a],h=t[a+1],g=zE.interpolationFactor(this.interpolation,i,s,h),b=r[a].evaluate(e),B=r[a+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return S0(b,B,g);case"color":return Ul.interpolate(b,B,g);case"padding":return Wh.interpolate(b,B,g);case"variableAnchorOffsetCollection":return Bf.interpolate(b,B,g);case"array":return Zv(b,B,g);case"projectionDefinition":return xf.interpolate(b,B,g)}case"interpolate-hcl":return Ul.interpolate(b,B,g,"hcl");case"interpolate-lab":return Ul.interpolate(b,B,g,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function $3(n,e,t,r){const i=r-t,o=n-t;return i===0?0:e===1?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}const oY={color:Ul.interpolate,number:S0,padding:Wh.interpolate,variableAnchorOffsetCollection:Bf.interpolate,array:Zv};let $L=class jE{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const o=[];for(const s of e.slice(1)){const h=t.parse(s,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!h)return null;r=r||h.type,o.push(h)}if(!r)throw new Error("No output type");return i&&o.some(s=>Hv(i,s.type))?new jE(Qo,o):new jE(r,o)}evaluate(e){let t=null,r=0,i;for(const o of this.args)if(r++,t=o.evaluate(e),t&&t instanceof Kg&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function P8(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function sY(n,e,t){return e===t}function aY(n,e,t){return e!==t}function lY(n,e,t){return e<t}function uY(n,e,t){return e>t}function AY(n,e,t){return e<=t}function cY(n,e,t){return e>=t}function VL(n,e,t,r){return r.compare(e,t)===0}function hY(n,e,t,r){return!VL(n,e,t,r)}function dY(n,e,t,r){return r.compare(e,t)<0}function fY(n,e,t,r){return r.compare(e,t)>0}function pY(n,e,t,r){return r.compare(e,t)<=0}function mY(n,e,t,r){return r.compare(e,t)>=0}function By(n,e,t){const r=n!=="=="&&n!=="!=";return class HL{constructor(o,a,s){this.type=Go,this.lhs=o,this.rhs=a,this.collator=s,this.hasUntypedArgument=o.type.kind==="value"||a.type.kind==="value"}static parse(o,a){if(o.length!==3&&o.length!==4)return a.error("Expected two or three arguments.");const s=o[0];let h=a.parse(o[1],1,Qo);if(!h)return null;if(!P8(s,h.type))return a.concat(1).error(`"${s}" comparisons are not supported for type '${Zl(h.type)}'.`);let g=a.parse(o[2],2,Qo);if(!g)return null;if(!P8(s,g.type))return a.concat(2).error(`"${s}" comparisons are not supported for type '${Zl(g.type)}'.`);if(h.type.kind!==g.type.kind&&h.type.kind!=="value"&&g.type.kind!=="value")return a.error(`Cannot compare types '${Zl(h.type)}' and '${Zl(g.type)}'.`);r&&(h.type.kind==="value"&&g.type.kind!=="value"?h=new Rm(g.type,[h]):h.type.kind!=="value"&&g.type.kind==="value"&&(g=new Rm(h.type,[g])));let b=null;if(o.length===4){if(h.type.kind!=="string"&&g.type.kind!=="string"&&h.type.kind!=="value"&&g.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(b=a.parse(o[3],3,X2),!b)return null}return new HL(h,g,b)}evaluate(o){const a=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(r&&this.hasUntypedArgument){const h=NA(a),g=NA(s);if(h.kind!==g.kind||!(h.kind==="string"||h.kind==="number"))throw new rA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${h.kind}, ${g.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const h=NA(a),g=NA(s);if(h.kind!=="string"||g.kind!=="string")return e(o,a,s)}return this.collator?t(o,a,s,this.collator.evaluate(o)):e(o,a,s)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const gY=By("==",sY,VL),yY=By("!=",aY,hY),vY=By("<",lY,dY),_Y=By(">",uY,fY),CY=By("<=",AY,pY),bY=By(">=",cY,mY);let ZL=class XL{constructor(e,t,r){this.type=X2,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Go);if(!i)return null;const o=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Go);if(!o)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,os),!a)?null:new XL(i,o,a)}evaluate(e){return new iB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},xY=class JL{constructor(e,t,r,i,o){this.type=os,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Pr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let o=null;if(i.locale&&(o=t.parse(i.locale,1,os),!o))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,os),!a))return null;let s=null;if(i["min-fraction-digits"]&&(s=t.parse(i["min-fraction-digits"],1,Pr),!s))return null;let h=null;return i["max-fraction-digits"]&&(h=t.parse(i["max-fraction-digits"],1,Pr),!h)?null:new JL(r,o,a,s,h)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},wY=class eF{constructor(e){this.type=J2,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let o=!1;for(let a=1;a<=e.length-1;++a){const s=e[a];if(o&&typeof s=="object"&&!Array.isArray(s)){o=!1;let h=null;if(s["font-scale"]&&(h=t.parse(s["font-scale"],1,Pr),!h))return null;let g=null;if(s["text-font"]&&(g=t.parse(s["text-font"],1,Yd(os)),!g))return null;let b=null;if(s["text-color"]&&(b=t.parse(s["text-color"],1,Vp),!b))return null;let B=null;if(s["vertical-align"]){if(typeof s["vertical-align"]=="string"&&!qq.includes(s["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(B=t.parse(s["vertical-align"],1,os),!B)return null}const S=i[i.length-1];S.scale=h,S.font=g,S.textColor=b,S.verticalAlign=B}else{const h=t.parse(e[a],1,Qo);if(!h)return null;const g=h.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:h,scale:null,font:null,textColor:null,verticalAlign:null})}}return new eF(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return NA(i)===I_?new LE("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new LE(Fv(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new Ey(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},MY=class tF{constructor(e){this.type=I_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,os);return r?new tF(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Kg.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}},SY=class nF{constructor(e){this.type=Pr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Zl(r.type)} instead.`):new nF(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new rA(`Expected value to be of type string or array, but found ${Zl(NA(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const Hp=8192;function EY(n,e){const t=BY(n[0]),r=IY(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*Hp),Math.round(r*i*Hp)]}function oB(n,e){const t=Math.pow(2,e.z),r=(n[0]/Hp+e.x)/t,i=(n[1]/Hp+e.y)/t;return[OY(r),kY(i)]}function BY(n){return(180+n)/360}function OY(n){return n*360-180}function IY(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function kY(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function k_(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function Jv(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function TY(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function PY(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],o=n[0]-t[0],a=n[1]-t[1];return r*a-o*i===0&&r*o<=0&&i*a<=0}function rx(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],o=[r[0]-t[0],r[1]-t[1]];return LY(o,i)===0?!1:!!(R8(n,e,t,r)&&R8(t,r,n,e))}function RY(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(rx(n,e,r[i],r[i+1]))return!0;return!1}function Oy(n,e,t=!1){let r=!1;for(const i of e)for(let o=0;o<i.length-1;o++){if(PY(n,i[o],i[o+1]))return t;TY(n,i[o],i[o+1])&&(r=!r)}return r}function KY(n,e){for(const t of e)if(Oy(n,t))return!0;return!1}function rF(n,e){for(const t of n)if(!Oy(t,e))return!1;for(let t=0;t<n.length-1;++t)if(RY(n[t],n[t+1],e))return!1;return!0}function DY(n,e){for(const t of e)if(rF(n,t))return!0;return!1}function LY(n,e){return n[0]*e[1]-n[1]*e[0]}function R8(n,e,t,r){const i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1],h=r[0]-t[0],g=r[1]-t[1],b=i*g-h*o,B=a*g-h*s;return b>0&&B<0||b<0&&B>0}function sB(n,e,t){const r=[];for(let i=0;i<n.length;i++){const o=[];for(let a=0;a<n[i].length;a++){const s=EY(n[i][a],t);k_(e,s),o.push(s)}r.push(o)}return r}function iF(n,e,t){const r=[];for(let i=0;i<n.length;i++){const o=sB(n[i],e,t);r.push(o)}return r}function oF(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let o=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;o===0&&(o=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=o}k_(e,n)}function FY(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function K8(n,e,t,r){const i=Math.pow(2,r.z)*Hp,o=[r.x*Hp,r.y*Hp],a=[];for(const s of n)for(const h of s){const g=[h.x+o[0],h.y+o[1]];oF(g,e,t,i),a.push(g)}return a}function D8(n,e,t,r){const i=Math.pow(2,r.z)*Hp,o=[r.x*Hp,r.y*Hp],a=[];for(const s of n){const h=[];for(const g of s){const b=[g.x+o[0],g.y+o[1]];k_(e,b),h.push(b)}a.push(h)}if(e[2]-e[0]<=i/2){FY(e);for(const s of a)for(const h of s)oF(h,e,t,i)}return a}function UY(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const o=sB(e.coordinates,r,i),a=K8(n.geometry(),t,r,i);if(!Jv(t,r))return!1;for(const s of a)if(!Oy(s,o))return!1}if(e.type==="MultiPolygon"){const o=iF(e.coordinates,r,i),a=K8(n.geometry(),t,r,i);if(!Jv(t,r))return!1;for(const s of a)if(!KY(s,o))return!1}return!0}function zY(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const o=sB(e.coordinates,r,i),a=D8(n.geometry(),t,r,i);if(!Jv(t,r))return!1;for(const s of a)if(!rF(s,o))return!1}if(e.type==="MultiPolygon"){const o=iF(e.coordinates,r,i),a=D8(n.geometry(),t,r,i);if(!Jv(t,r))return!1;for(const s of a)if(!DY(s,o))return!1}return!0}let aB=class _b{constructor(e,t){this.type=Go,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Xv(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const o of r.features){const{type:a,coordinates:s}=o.geometry;a==="Polygon"&&i.push(s),a==="MultiPolygon"&&i.push(...s)}if(i.length){const o={type:"MultiPolygon",coordinates:i};return new _b(r,o)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new _b(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new _b(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return UY(e,this.geometries);if(e.geometryType()==="LineString")return zY(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}};class sF{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const o=e-1>>1,a=t[o];if(r(i,a)>=0)break;t[e]=a,e=o}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,o=t[e];for(;e<i;){let a=(e<<1)+1;const s=a+1;if(s<this.length&&r(t[s],t[a])<0&&(a=s),r(t[a],o)>=0)break;t[e]=t[a],e=a}t[e]=o}}function jY(n,e){if(n.length<=1)return[n];const r=[];let i,o;for(const a of n){const s=NY(a);s!==0&&(a.area=Math.abs(s),o===void 0&&(o=s<0),o===s<0?(i&&r.push(i),i=[a]):i.push(a))}return i&&r.push(i),r}function NY(n){let e=0;for(let t=0,r=n.length,i=r-1,o,a;t<r;i=t++)o=n[t],a=n[i],e+=(a.x-o.x)*(o.y+a.y);return e}const GY=6378.137,L8=1/298.257223563,F8=L8*(2-L8),U8=Math.PI/180;class lB{constructor(e){const t=U8*GY*1e3,r=Math.cos(e*U8),i=1/(1-F8*(1-r*r)),o=Math.sqrt(i);this.kx=t*o*r,this.ky=t*o*i*(1-F8)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,o,a,s;for(let h=0;h<e.length-1;h++){let g=e[h][0],b=e[h][1],B=this.wrap(e[h+1][0]-g)*this.kx,S=(e[h+1][1]-b)*this.ky,I=0;(B!==0||S!==0)&&(I=(this.wrap(t[0]-g)*this.kx*B+(t[1]-b)*this.ky*S)/(B*B+S*S),I>1?(g=e[h+1][0],b=e[h+1][1]):I>0&&(g+=B/this.kx*I,b+=S/this.ky*I)),B=this.wrap(t[0]-g)*this.kx,S=(t[1]-b)*this.ky;const k=B*B+S*S;k<r&&(r=k,i=g,o=b,a=h,s=I)}return{point:[i,o],index:a,t:Math.max(0,Math.min(1,s))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const NE=100,GE=50;function aF(n,e){return e[0]-n[0]}function Nb(n){return n[1]-n[0]+1}function Nm(n,e){return n[1]>=n[0]&&n[1]<e}function WE(n,e){if(n[0]>n[1])return[null,null];const t=Nb(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function QE(n,e){if(!Nm(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)k_(t,n[r]);return t}function qE(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)k_(e,r);return e}function z8(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function uB(n,e,t){if(!z8(n)||!z8(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function dg(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function AB(n,e,t,r,i){const o=Math.min(dg(n,[t,r],i),dg(e,[t,r],i)),a=Math.min(dg(t,[n,e],i),dg(r,[n,e],i));return Math.min(o,a)}function WY(n,e,t,r,i){if(!(Nm(e,n.length)&&Nm(r,t.length)))return 1/0;let a=1/0;for(let s=e[0];s<e[1];++s){const h=n[s],g=n[s+1];for(let b=r[0];b<r[1];++b){const B=t[b],S=t[b+1];if(rx(h,g,B,S))return 0;a=Math.min(a,AB(h,g,B,S,i))}}return a}function QY(n,e,t,r,i){if(!(Nm(e,n.length)&&Nm(r,t.length)))return NaN;let a=1/0;for(let s=e[0];s<=e[1];++s)for(let h=r[0];h<=r[1];++h)if(a=Math.min(a,i.distance(n[s],t[h])),a===0)return a;return a}function qY(n,e,t){if(Oy(n,e,!0))return 0;let r=1/0;for(const i of e){const o=i[0],a=i[i.length-1];if(o!==a&&(r=Math.min(r,dg(n,[a,o],t)),r===0))return r;const s=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,s.point)),r===0)return r}return r}function YY(n,e,t,r){if(!Nm(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Oy(n[o],t,!0))return 0;let i=1/0;for(let o=e[0];o<e[1];++o){const a=n[o],s=n[o+1];for(const h of t)for(let g=0,b=h.length,B=b-1;g<b;B=g++){const S=h[B],I=h[g];if(rx(a,s,S,I))return 0;i=Math.min(i,AB(a,s,S,I,r))}}return i}function j8(n,e){for(const t of n)for(const r of t)if(Oy(r,e,!0))return!0;return!1}function $Y(n,e,t,r=1/0){const i=qE(n),o=qE(e);if(r!==1/0&&uB(i,o,t)>=r)return r;if(Jv(i,o)){if(j8(n,e))return 0}else if(j8(e,n))return 0;let a=1/0;for(const s of n)for(let h=0,g=s.length,b=g-1;h<g;b=h++){const B=s[b],S=s[h];for(const I of e)for(let k=0,U=I.length,z=U-1;k<U;z=k++){const Y=I[z],Q=I[k];if(rx(B,S,Y,Q))return 0;a=Math.min(a,AB(B,S,Y,Q,t))}}return a}function N8(n,e,t,r,i,o){if(!o)return;const a=uB(QE(r,o),i,t);a<e&&n.push([a,o,[0,0]])}function KC(n,e,t,r,i,o,a){if(!o||!a)return;const s=uB(QE(r,o),QE(i,a),t);s<e&&n.push([s,o,a])}function Gb(n,e,t,r,i=1/0){let o=Math.min(r.distance(n[0],t[0][0]),i);if(o===0)return o;const a=new sF([[0,[0,n.length-1],[0,0]]],aF),s=qE(t);for(;a.length>0;){const h=a.pop();if(h[0]>=o)continue;const g=h[1],b=e?GE:NE;if(Nb(g)<=b){if(!Nm(g,n.length))return NaN;if(e){const B=YY(n,g,t,r);if(isNaN(B)||B===0)return B;o=Math.min(o,B)}else for(let B=g[0];B<=g[1];++B){const S=qY(n[B],t,r);if(o=Math.min(o,S),o===0)return 0}}else{const B=WE(g,e);N8(a,o,r,n,s,B[0]),N8(a,o,r,n,s,B[1])}}return o}function Wb(n,e,t,r,i,o=1/0){let a=Math.min(o,i.distance(n[0],t[0]));if(a===0)return a;const s=new sF([[0,[0,n.length-1],[0,t.length-1]]],aF);for(;s.length>0;){const h=s.pop();if(h[0]>=a)continue;const g=h[1],b=h[2],B=e?GE:NE,S=r?GE:NE;if(Nb(g)<=B&&Nb(b)<=S){if(!Nm(g,n.length)&&Nm(b,t.length))return NaN;let I;if(e&&r)I=WY(n,g,t,b,i),a=Math.min(a,I);else if(e&&!r){const k=n.slice(g[0],g[1]+1);for(let U=b[0];U<=b[1];++U)if(I=dg(t[U],k,i),a=Math.min(a,I),a===0)return a}else if(!e&&r){const k=t.slice(b[0],b[1]+1);for(let U=g[0];U<=g[1];++U)if(I=dg(n[U],k,i),a=Math.min(a,I),a===0)return a}else I=QY(n,g,t,b,i),a=Math.min(a,I)}else{const I=WE(g,e),k=WE(b,r);KC(s,a,i,n,t,I[0],k[0]),KC(s,a,i,n,t,I[0],k[1]),KC(s,a,i,n,t,I[1],k[0]),KC(s,a,i,n,t,I[1],k[1])}}return a}function VY(n,e){const t=n.geometry(),r=t.flat().map(a=>oB([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new lB(r[0][1]);let o=1/0;for(const a of e){switch(a.type){case"Point":o=Math.min(o,Wb(r,!1,[a.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,Wb(r,!1,a.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,Gb(r,!1,a.coordinates,i,o));break}if(o===0)return o}return o}function HY(n,e){const t=n.geometry(),r=t.flat().map(a=>oB([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new lB(r[0][1]);let o=1/0;for(const a of e){switch(a.type){case"Point":o=Math.min(o,Wb(r,!0,[a.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,Wb(r,!0,a.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,Gb(r,!0,a.coordinates,i,o));break}if(o===0)return o}return o}function ZY(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=jY(t).map(a=>a.map(s=>s.map(h=>oB([h.x,h.y],n.canonical)))),i=new lB(r[0][0][0][1]);let o=1/0;for(const a of e)for(const s of r){switch(a.type){case"Point":o=Math.min(o,Gb([a.coordinates],!1,s,i,o));break;case"LineString":o=Math.min(o,Gb(a.coordinates,!0,s,i,o));break;case"Polygon":o=Math.min(o,$Y(s,a.coordinates,i,o));break}if(o===0)return o}return o}function V3(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Cg{constructor(e,t){this.type=Pr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Xv(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new Cg(r,r.features.map(i=>V3(i.geometry)).flat());if(r.type==="Feature")return new Cg(r,V3(r.geometry));if("type"in r&&"coordinates"in r)return new Cg(r,V3(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return VY(e,this.geometries);if(e.geometryType()==="LineString")return HY(e,this.geometries);if(e.geometryType()==="Polygon")return ZY(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const cB={"==":gY,"!=":yY,">":_Y,"<":vY,">=":bY,"<=":CY,array:Rm,at:Vq,boolean:Rm,case:Jq,coalesce:$L,collator:ZL,format:wY,image:MY,in:Hq,"index-of":Zq,interpolate:Lm,"interpolate-hcl":Lm,"interpolate-lab":Lm,length:SY,let:FL,literal:jb,match:Xq,number:Rm,"number-format":xY,object:Rm,slice:eY,step:qL,string:Rm,"to-boolean":G1,"to-color":G1,"to-number":G1,"to-string":G1,var:zL,within:aB,distance:Cg};let Iy=class vv{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=vv.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let h=null;for(const[g,b]of s){h=new DL(t.registry,Qb,t.path,null,t.scope);const B=[];let S=!1;for(let I=1;I<e.length;I++){const k=e[I],U=Array.isArray(g)?g[I-1]:g.type,z=h.parse(k,1+B.length,U);if(!z){S=!0;break}B.push(z)}if(!S){if(Array.isArray(g)&&g.length!==B.length){h.error(`Expected ${g.length} arguments, but found ${B.length} instead.`);continue}for(let I=0;I<B.length;I++){const k=Array.isArray(g)?g[I]:g.type,U=B[I];h.concat(I+1).checkSubtype(k,U.type)}if(h.errors.length===0)return new vv(r,o,b,B)}}if(s.length===1)t.errors.push(...h.errors);else{const b=(s.length?s:a).map(([S])=>JY(S)).join(" | "),B=[];for(let S=1;S<e.length;S++){const I=t.parse(e[S],1+B.length);if(!I)return null;B.push(Zl(I.type))}t.error(`Expected arguments of type ${b}, but found (${B.join(", ")}) instead.`)}return null}static register(e,t){vv.definitions=t;for(const r in t)e[r]=vv}};function G8(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const o=i?i.evaluate(n):1,a=kL(e,t,r,o);if(a)throw new rA(a);return new Ul(e/255,t/255,r/255,o,!1)}function W8(n,e){return n in e}function H3(n,e){const t=e[n];return typeof t>"u"?null:t}function XY(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function X0(n){return{type:n}}Iy.register(cB,{error:[Kq,[os],(n,[e])=>{throw new rA(e.evaluate(n))}],typeof:[os,[Qo],(n,[e])=>Zl(NA(e.evaluate(n)))],"to-rgba":[Yd(Pr,4),[Vp],(n,[e])=>{const[t,r,i,o]=e.evaluate(n).rgb;return[t*255,r*255,i*255,o]}],rgb:[Vp,[Pr,Pr,Pr],G8],rgba:[Vp,[Pr,Pr,Pr,Pr],G8],has:{type:Go,overloads:[[[os],(n,[e])=>W8(e.evaluate(n),n.properties())],[[os,J1],(n,[e,t])=>W8(e.evaluate(n),t.evaluate(n))]]},get:{type:Qo,overloads:[[[os],(n,[e])=>H3(e.evaluate(n),n.properties())],[[os,J1],(n,[e,t])=>H3(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Qo,[os],(n,[e])=>H3(e.evaluate(n),n.featureState||{})],properties:[J1,[],n=>n.properties()],"geometry-type":[os,[],n=>n.geometryType()],id:[Qo,[],n=>n.id()],zoom:[Pr,[],n=>n.globals.zoom],"heatmap-density":[Pr,[],n=>n.globals.heatmapDensity||0],"line-progress":[Pr,[],n=>n.globals.lineProgress||0],accumulated:[Qo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Pr,X0(Pr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Pr,X0(Pr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Pr,overloads:[[[Pr,Pr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Pr],(n,[e])=>-e.evaluate(n)]]},"/":[Pr,[Pr,Pr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Pr,[Pr,Pr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Pr,[],()=>Math.LN2],pi:[Pr,[],()=>Math.PI],e:[Pr,[],()=>Math.E],"^":[Pr,[Pr,Pr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Pr,[Pr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Pr,[Pr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Pr,[Pr],(n,[e])=>Math.log(e.evaluate(n))],log2:[Pr,[Pr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Pr,[Pr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Pr,[Pr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Pr,[Pr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Pr,[Pr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Pr,[Pr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Pr,[Pr],(n,[e])=>Math.atan(e.evaluate(n))],min:[Pr,X0(Pr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Pr,X0(Pr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Pr,[Pr],(n,[e])=>Math.abs(e.evaluate(n))],round:[Pr,[Pr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Pr,[Pr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Pr,[Pr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Go,[os,Qo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Go,[Qo],(n,[e])=>n.id()===e.value],"filter-type-==":[Go,[os],(n,[e])=>n.geometryType()===e.value],"filter-<":[Go,[os,Qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Go,[Qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[Go,[os,Qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[Go,[Qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[Go,[os,Qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Go,[Qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[Go,[os,Qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Go,[Qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[Go,[Qo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Go,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Go,[Yd(os)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Go,[Yd(Qo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Go,[os,Yd(Qo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Go,[os,Yd(Qo)],(n,[e,t])=>XY(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Go,overloads:[[[Go,Go],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[X0(Go),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Go,overloads:[[[Go,Go],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[X0(Go),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Go,[Go],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Go,[os],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[os,[os],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[os,[os],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[os,X0(Qo),(n,e)=>e.map(t=>Fv(t.evaluate(n))).join("")],"resolved-locale":[os,[X2],(n,[e])=>e.evaluate(n).resolvedLocale()]});function JY(n){return Array.isArray(n)?`(${n.map(Zl).join(", ")})`:`(${Zl(n.type)}...)`}function Qb(n){if(n instanceof zL)return Qb(n.boundExpression);if(n instanceof Iy&&n.name==="error")return!1;if(n instanceof ZL)return!1;if(n instanceof aB)return!1;if(n instanceof Cg)return!1;const e=n instanceof G1||n instanceof Rm;let t=!0;return n.eachChild(r=>{e?t=t&&Qb(r):t=t&&r instanceof jb}),t?ix(n)&&ox(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function ix(n){if(n instanceof Iy){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof aB||n instanceof Cg)return!1;let e=!0;return n.eachChild(t=>{e&&!ix(t)&&(e=!1)}),e}function e_(n){if(n instanceof Iy&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!e_(t)&&(e=!1)}),e}function ox(n,e){if(n instanceof Iy&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!ox(r,e)&&(t=!1)}),t}function YE(n){return{result:"success",value:n}}function K1(n){return{result:"error",value:n}}function qb(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function lF(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function hB(n){return!!n.expression&&n.expression.interpolated}function zs(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function T_(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function e$(n){return n}function dB(n,e){const t=e.type==="color",r=n.stops&&typeof n.stops[0][0]=="object",i=r||n.property!==void 0,o=r||!i,a=n.type||(hB(e)?"exponential":"interval");if(t||e.type==="padding"){const b=t?Ul.parse:Wh.parse;n=py({},n),n.stops&&(n.stops=n.stops.map(B=>[B[0],b(B[1])])),n.default?n.default=b(n.default):n.default=b(e.default)}if(n.colorSpace&&!Qq(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);let s,h,g;if(a==="exponential")s=Q8;else if(a==="interval")s=n$;else if(a==="categorical"){s=t$,h=Object.create(null);for(const b of n.stops)h[b[0]]=b[1];g=typeof n.stops[0][0]}else if(a==="identity")s=r$;else throw new Error(`Unknown function type "${a}"`);if(r){const b={},B=[];for(let k=0;k<n.stops.length;k++){const U=n.stops[k],z=U[0].zoom;b[z]===void 0&&(b[z]={zoom:z,type:n.type,property:n.property,default:n.default,stops:[]},B.push(z)),b[z].stops.push([U[0].value,U[1]])}const S=[];for(const k of B)S.push([b[k].zoom,dB(b[k],e)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:Lm.interpolationFactor.bind(void 0,I),zoomStops:S.map(k=>k[0]),evaluate({zoom:k},U){return Q8({stops:S,base:n.base},e,k).evaluate(k,U)}}}else if(o){const b=a==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:Lm.interpolationFactor.bind(void 0,b),zoomStops:n.stops.map(B=>B[0]),evaluate:({zoom:B})=>s(n,e,B,h,g)}}else return{kind:"source",evaluate(b,B){const S=B&&B.properties?B.properties[n.property]:void 0;return S===void 0?P_(n.default,e.default):s(n,e,S,h,g)}}}function P_(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function t$(n,e,t,r,i){const o=typeof t===i?r[t]:void 0;return P_(o,n.default,e.default)}function n$(n,e,t){if(zs(t)!=="number")return P_(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=nx(n.stops.map(o=>o[0]),t);return n.stops[i][1]}function Q8(n,e,t){const r=n.base!==void 0?n.base:1;if(zs(t)!=="number")return P_(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const o=nx(n.stops.map(b=>b[0]),t),a=i$(t,r,n.stops[o][0],n.stops[o+1][0]),s=n.stops[o][1],h=n.stops[o+1][1],g=oY[e.type]||e$;return typeof s.evaluate=="function"?{evaluate(...b){const B=s.evaluate.apply(void 0,b),S=h.evaluate.apply(void 0,b);if(!(B===void 0||S===void 0))return g(B,S,a,n.colorSpace)}}:g(s,h,a,n.colorSpace)}function r$(n,e,t){switch(e.type){case"color":t=Ul.parse(t);break;case"formatted":t=Ey.fromString(t.toString());break;case"resolvedImage":t=Kg.fromString(t.toString());break;case"padding":t=Wh.parse(t);break;default:zs(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return P_(t,n.default,e.default)}function i$(n,e,t,r){const i=r-t,o=n-t;return i===0?0:e===1?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}let uF=class{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new KL,this._defaultValue=t?l$(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,o,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,o,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a||null;try{const s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new rA(`Expected value to be one of ${Object.keys(this._enumValues).map(h=>JSON.stringify(h)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}};function R_(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in cB}function fB(n,e){const t=new DL(cB,Qb,[],e?a$(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?YE(new uF(r,e)):K1(t.errors)}let $E=class{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!e_(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,o,a)}evaluate(e,t,r,i,o,a){return this._styleExpression.evaluate(e,t,r,i,o,a)}},VE=class{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!e_(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,o,a)}evaluate(e,t,r,i,o,a){return this._styleExpression.evaluate(e,t,r,i,o,a)}interpolationFactor(e,t,r){return this.interpolationType?Lm.interpolationFactor(this.interpolationType,e,t,r):0}};function o$(n){return n._styleExpression!==void 0}function pB(n,e){const t=fB(n,e);if(t.result==="error")return t;const r=t.value.expression,i=ix(r);if(!i&&!qb(e))return K1([new Gp("","data expressions not supported")]);const o=ox(r,["zoom"]);if(!o&&!lF(e))return K1([new Gp("","zoom expressions not supported")]);const a=Cb(r);if(!a&&!o)return K1([new Gp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Gp)return K1([a]);if(a instanceof Lm&&!hB(e))return K1([new Gp("",'"interpolate" expressions cannot be used with this property')]);if(!a)return YE(i?new $E("constant",t.value):new $E("source",t.value));const s=a instanceof Lm?a.interpolation:void 0;return YE(i?new VE("camera",t.value,a.labels,s):new VE("composite",t.value,a.labels,s))}class sx{constructor(e,t){this._parameters=e,this._specification=t,py(this,dB(this._parameters,this._specification))}static deserialize(e){return new sx(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function s$(n,e){if(T_(n))return new sx(n,e);if(R_(n)){const t=pB(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=Ul.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=Wh.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=Bf.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=xf.parse(n)),{kind:"constant",evaluate:()=>t}}}function Cb(n){let e=null;if(n instanceof FL)e=Cb(n.result);else if(n instanceof $L){for(const t of n.args)if(e=Cb(t),e)break}else(n instanceof qL||n instanceof Lm)&&n.input instanceof Iy&&n.input.name==="zoom"&&(e=n);return e instanceof Gp||n.eachChild(t=>{const r=Cb(t);r instanceof Gp?e=r:!e&&r?e=new Gp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Gp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function a$(n){const e={color:Vp,string:os,number:Pr,enum:os,boolean:Go,formatted:J2,padding:ex,projectionDefinition:Z2,resolvedImage:I_,variableAnchorOffsetCollection:tx};return n.type==="array"?Yd(e[n.value]||Qo,n.length):e[n.type]}function l$(n){return n.type==="color"&&T_(n.default)?new Ul(0,0,0,0):n.type==="color"?Ul.parse(n.default)||null:n.type==="padding"?Wh.parse(n.default)||null:n.type==="variableAnchorOffsetCollection"?Bf.parse(n.default)||null:n.type==="projectionDefinition"?xf.parse(n.default)||null:n.default===void 0?null:n.default}function ax(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!ax(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Uv(n,e={}){if(ax(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,o]=n;return A$(i,o,r,e)}case"any":{const[,...i]=t;return["any",...i.map(a=>{const s={},h=Uv(a,s),g=u$(s);return g===!0?h:["case",g,h,!1]})]}case"all":{const[,...i]=t,o=i.map(a=>Uv(a,e));return o.length>1?["all",...o]:o[0]}case"none":{const[,...i]=t;return["!",Uv(["any",...i],{})]}case"in":{const[,i,...o]=t;return q8(i,o)}case"!in":{const[,i,...o]=t;return q8(i,o,!0)}case"has":return Y8(t[1]);case"!has":return["!",Y8(t[1])];default:return!0}}function u$(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function A$(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const o=typeof e;r[n]=o}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function q8(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const o=typeof e[0];for(const a of e)if(typeof a!==o){i=!1;break}if(i&&(o==="string"||o==="number")){const a=e.sort().filter((s,h)=>h===0||e[h-1]!==s);return["match",r,a,!t,t]}return t?["all",...e.map(a=>["!=",r,a])]:["any",...e.map(a=>["==",r,a])]}function Y8(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function t_(n){return typeof n=="object"?["literal",n]:n}function AF(n,e){let t=n.stops;if(!t)return c$(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,o=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],cF(a[1])]:[a[0],t_(a[1])]),r?h$(n,e,t):o?f$(n,e,t):HE(n,e,t)}function c$(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,t_(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function mB(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function h$(n,e,t){const r={},i={},o=[];for(let s=0;s<t.length;s++){const h=t[s],g=h[0].zoom;r[g]===void 0&&(r[g]={zoom:g,type:n.type,property:n.property,default:n.default},i[g]=[],o.push(g)),i[g].push([h[0].value,h[1]])}if(yB({},e)==="exponential"){const s=[mB(n),["linear"],["zoom"]];for(const h of o){const g=HE(r[h],e,i[h]);ty(s,h,g,!1)}return s}else{const s=["step",["zoom"]];for(const h of o){const g=HE(r[h],e,i[h]);ty(s,h,g,!0)}return gB(s),s}}function d$(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function $8(n,e){const t=t_(d$(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function HE(n,e,t){const r=yB(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const a of t)o.push(["==",i,a[0]],a[1]);return o.push($8(n,e)),o}else if(r==="categorical"){const o=["match",i];for(const a of t)ty(o,a[0],a[1],!1);return o.push($8(n,e)),o}else if(r==="interval"){const o=["step",["number",i]];for(const a of t)ty(o,a[0],a[1],!0);return gB(o),n.default===void 0?o:["case",["==",["typeof",i],"number"],o,t_(n.default)]}else if(r==="exponential"){const o=n.base!==void 0?n.base:1,a=[mB(n),o===1?["linear"]:["exponential",o],["number",i]];for(const s of t)ty(a,s[0],s[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,t_(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function f$(n,e,t,r=["zoom"]){const i=yB(n,e);let o,a=!1;if(i==="interval")o=["step",r],a=!0;else if(i==="exponential"){const s=n.base!==void 0?n.base:1;o=[mB(n),s===1?["linear"]:["exponential",s],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const s of t)ty(o,s[0],s[1],a);return gB(o),o}function gB(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function ty(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function yB(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function cF(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const o=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function p$(n){for(let e=0;e<Ys.layout.length;e++)for(const t in Ys[Ys.layout[e]])if(t===n)return Ys[Ys.layout[e]][t];for(let e=0;e<Ys.paint.length;e++)for(const t in Ys[Ys.paint[e]])if(t===n)return Ys[Ys.paint[e]][t];return null}function m$(n,e){for(const t in n.sources)e(n.sources[t])}function zv(n,e){for(const t of n.layers)e(t)}function vB(n,e,t){function r(i,o){const a=i[o];a&&Object.keys(a).forEach(s=>{t({path:[i.id,o,s],key:s,value:a[s],reference:p$(s),set(h){a[s]=h}})})}zv(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function hF(n){const e=n.key,t=n.value;return t?[new Er(e,t,"constants have been deprecated as of v8")]:[]}function Iu(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Eg(n){if(Array.isArray(n))return n.map(Eg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Eg(n[t]);return e}return Iu(n)}function Mf(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},o=n.style,a=n.styleSpec,s=n.validateSpec;let h=[];const g=zs(t);if(g!=="object")return[new Er(e,t,`object expected, ${g} found`)];for(const b in t){const B=b.split(".")[0],S=r[B]||r["*"];let I;if(i[B])I=i[B];else if(r[B])I=s;else if(i["*"])I=i["*"];else if(r["*"])I=s;else{h.push(new Er(e,t[b],`unknown property "${b}"`));continue}h=h.concat(I({key:(e&&`${e}.`)+b,value:t[b],valueSpec:S,style:o,styleSpec:a,object:t,objectKey:b,validateSpec:s},t))}for(const b in r)i[b]||r[b].required&&r[b].default===void 0&&t[b]===void 0&&h.push(new Er(e,t,`missing required property "${b}"`));return h}function _B(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,o=n.styleSpec,a=n.key,s=n.arrayElementValidator||r;if(zs(e)!=="array")return[new Er(a,e,`array expected, ${zs(e)} found`)];if(t.length&&e.length!==t.length)return[new Er(a,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Er(a,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let h={type:t.value,values:t.values};o.$version<7&&(h.function=t.function),zs(t.value)==="object"&&(h=t.value);let g=[];for(let b=0;b<e.length;b++)g=g.concat(s({array:e,arrayIndex:b,value:e[b],valueSpec:h,validateSpec:n.validateSpec,style:i,styleSpec:o,key:`${a}[${b}]`}));return g}function CB(n){const e=n.key,t=n.value,r=n.valueSpec;let i=zs(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new Er(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new Er(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new Er(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function dF(n){const e=n.valueSpec,t=Iu(n.value.type);let r,i={},o,a;const s=t!=="categorical"&&n.value.property===void 0,h=!s,g=zs(n.value.stops)==="array"&&zs(n.value.stops[0])==="array"&&zs(n.value.stops[0][0])==="object",b=Mf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:B,default:k}});return t==="identity"&&s&&b.push(new Er(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&b.push(new Er(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!hB(n.valueSpec)&&b.push(new Er(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(h&&!qb(n.valueSpec)?b.push(new Er(n.key,n.value,"property functions not supported")):s&&!lF(n.valueSpec)&&b.push(new Er(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||g)&&n.value.property===void 0&&b.push(new Er(n.key,n.value,'"property" property is required')),b;function B(U){if(t==="identity")return[new Er(U.key,U.value,'identity function may not have a "stops" property')];let z=[];const Y=U.value;return z=z.concat(_B({key:U.key,value:Y,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:S})),zs(Y)==="array"&&Y.length===0&&z.push(new Er(U.key,Y,"array must have at least one stop")),z}function S(U){let z=[];const Y=U.value,Q=U.key;if(zs(Y)!=="array")return[new Er(Q,Y,`array expected, ${zs(Y)} found`)];if(Y.length!==2)return[new Er(Q,Y,`array length 2 expected, length ${Y.length} found`)];if(g){if(zs(Y[0])!=="object")return[new Er(Q,Y,`object expected, ${zs(Y[0])} found`)];if(Y[0].zoom===void 0)return[new Er(Q,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new Er(Q,Y,"object stop key must have value")];if(a&&a>Iu(Y[0].zoom))return[new Er(Q,Y[0].zoom,"stop zoom values must appear in ascending order")];Iu(Y[0].zoom)!==a&&(a=Iu(Y[0].zoom),o=void 0,i={}),z=z.concat(Mf({key:`${Q}[0]`,value:Y[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:CB,value:I}}))}else z=z.concat(I({key:`${Q}[0]`,value:Y[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},Y));return R_(Eg(Y[1]))?z.concat([new Er(`${Q}[1]`,Y[1],"expressions are not allowed in function stops.")]):z.concat(U.validateSpec({key:`${Q}[1]`,value:Y[1],valueSpec:e,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function I(U,z){const Y=zs(U.value),Q=Iu(U.value),ne=U.value!==null?U.value:z;if(!r)r=Y;else if(Y!==r)return[new Er(U.key,ne,`${Y} stop domain type must match previous stop domain type ${r}`)];if(Y!=="number"&&Y!=="string"&&Y!=="boolean")return[new Er(U.key,ne,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&t!=="categorical"){let X=`number expected, ${Y} found`;return qb(e)&&t===void 0&&(X+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Er(U.key,ne,X)]}return t==="categorical"&&Y==="number"&&(!isFinite(Q)||Math.floor(Q)!==Q)?[new Er(U.key,ne,`integer expected, found ${Q}`)]:t!=="categorical"&&Y==="number"&&o!==void 0&&Q<o?[new Er(U.key,ne,"stop domain values must appear in ascending order")]:(o=Q,t==="categorical"&&Q in i?[new Er(U.key,ne,"stop domain values must be unique")]:(i[Q]=!0,[]))}function k(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:e,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}function my(n){const e=(n.expressionContext==="property"?pB:fB)(Eg(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new Er(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Er(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!e_(t))return[new Er(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!e_(t))return[new Er(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!ox(t,["zoom","feature-state"]))return[new Er(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!ix(t))return[new Er(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function g$(n){const e=n.value,t=n.key,r=zs(e);return r!=="boolean"?[new Er(t,e,`boolean expected, ${r} found`)]:[]}function y$(n){const e=n.key,t=n.value,r=zs(t);return r!=="string"?[new Er(e,t,`color expected, ${r} found`)]:Ul.parse(String(t))?[]:[new Er(e,t,`color expected, "${t}" found`)]}function n_(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(Iu(t))===-1&&i.push(new Er(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(Iu(t))===-1&&i.push(new Er(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function bB(n){return ax(Eg(n.value))?my(py({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):fF(n)}function fF(n){const e=n.value,t=n.key;if(zs(e)!=="array")return[new Er(t,e,`array expected, ${zs(e)} found`)];const r=n.styleSpec;let i,o=[];if(e.length<1)return[new Er(t,e,"filter array must have at least 1 element")];switch(o=o.concat(n_({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),Iu(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Iu(e[1])==="$type"&&o.push(new Er(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new Er(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=zs(e[1]),i!=="string"&&o.push(new Er(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=zs(e[a]),Iu(e[1])==="$type"?o=o.concat(n_({key:`${t}[${a}]`,value:e[a],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&o.push(new Er(`${t}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let a=1;a<e.length;a++)o=o.concat(fF({key:`${t}[${a}]`,value:e[a],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=zs(e[1]),e.length!==2?o.push(new Er(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&o.push(new Er(`${t}[1]`,e[1],`string expected, ${i} found`));break}return o}function pF(n,e){const t=n.key,r=n.validateSpec,i=n.style,o=n.styleSpec,a=n.value,s=n.objectKey,h=o[`${e}_${n.layerType}`];if(!h)return[];const g=s.match(/^(.*)-transition$/);if(e==="paint"&&g&&h[g[1]]&&h[g[1]].transition)return r({key:t,value:a,valueSpec:o.transition,style:i,styleSpec:o});const b=n.valueSpec||h[s];if(!b)return[new Er(t,a,`unknown property "${s}"`)];let B;if(zs(a)==="string"&&qb(b)&&!b.tokens&&(B=/^{([^}]+)}$/.exec(a)))return[new Er(t,a,`"${s}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const S=[];return n.layerType==="symbol"&&(s==="text-field"&&i&&!i.glyphs&&S.push(new Er(t,a,'use of "text-field" requires a style "glyphs" property')),s==="text-font"&&T_(Eg(a))&&Iu(a.type)==="identity"&&S.push(new Er(t,a,'"text-font" does not support identity functions'))),S.concat(r({key:n.key,value:a,valueSpec:b,style:i,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:s}))}function mF(n){return pF(n,"paint")}function gF(n){return pF(n,"layout")}function yF(n){let e=[];const t=n.value,r=n.key,i=n.style,o=n.styleSpec;!t.type&&!t.ref&&e.push(new Er(r,t,'either "type" or "ref" is required'));let a=Iu(t.type);const s=Iu(t.ref);if(t.id){const h=Iu(t.id);for(let g=0;g<n.arrayIndex;g++){const b=i.layers[g];Iu(b.id)===h&&e.push(new Er(r,t.id,`duplicate layer id "${t.id}", previously used at line ${b.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(g=>{g in t&&e.push(new Er(r,t[g],`"${g}" is prohibited for ref layers`))});let h;i.layers.forEach(g=>{Iu(g.id)===s&&(h=g)}),h?h.ref?e.push(new Er(r,t.ref,"ref cannot reference another ref layer")):a=Iu(h.type):e.push(new Er(r,t.ref,`ref layer "${s}" not found`))}else if(a!=="background")if(!t.source)e.push(new Er(r,t,'missing required property "source"'));else{const h=i.sources&&i.sources[t.source],g=h&&Iu(h.type);h?g==="vector"&&a==="raster"?e.push(new Er(r,t.source,`layer "${t.id}" requires a raster source`)):g!=="raster-dem"&&a==="hillshade"?e.push(new Er(r,t.source,`layer "${t.id}" requires a raster-dem source`)):g==="raster"&&a!=="raster"?e.push(new Er(r,t.source,`layer "${t.id}" requires a vector source`)):g==="vector"&&!t["source-layer"]?e.push(new Er(r,t,`layer "${t.id}" must specify a "source-layer"`)):g==="raster-dem"&&a!=="hillshade"?e.push(new Er(r,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):a==="line"&&t.paint&&t.paint["line-gradient"]&&(g!=="geojson"||!h.lineMetrics)&&e.push(new Er(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Er(r,t.source,`source "${t.source}" not found`))}return e=e.concat(Mf({key:r,value:t,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:bB,layout(h){return Mf({layer:t,key:h.key,value:h.value,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*"(g){return gF(py({layerType:a},g))}}})},paint(h){return Mf({layer:t,key:h.key,value:h.value,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*"(g){return mF(py({layerType:a},g))}}})}}})),e}function Bg(n){const e=n.value,t=n.key,r=zs(e);return r!=="string"?[new Er(t,e,`string expected, ${r} found`)]:[]}function v$(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,o=i.source_raster_dem,a=n.style;let s=[];const h=zs(r);if(r===void 0)return s;if(h!=="object")return s.push(new Er("source_raster_dem",r,`object expected, ${h} found`)),s;const b=Iu(r.encoding)==="custom",B=["redFactor","greenFactor","blueFactor","baseShift"],S=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const I in r)!b&&B.includes(I)?s.push(new Er(I,r[I],`In "${t}": "${I}" is only valid when "encoding" is set to "custom". ${S} encoding found`)):o[I]?s=s.concat(n.validateSpec({key:I,value:r[I],valueSpec:o[I],validateSpec:n.validateSpec,style:a,styleSpec:i})):s.push(new Er(I,r[I],`unknown property "${I}"`));return s}const V8={promoteId:_$};function vF(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,o=n.validateSpec;if(!e.type)return[new Er(t,e,'"type" is required')];const a=Iu(e.type);let s;switch(a){case"vector":case"raster":return s=Mf({key:t,value:e,valueSpec:r[`source_${a.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:V8,validateSpec:o}),s;case"raster-dem":return s=v$({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:o}),s;case"geojson":if(s=Mf({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:o,objectElementValidators:V8}),e.cluster)for(const h in e.clusterProperties){const[g,b]=e.clusterProperties[h],B=typeof g=="string"?[g,["accumulated"],["get",h]]:g;s.push(...my({key:`${t}.${h}.map`,value:b,validateSpec:o,expressionContext:"cluster-map"})),s.push(...my({key:`${t}.${h}.reduce`,value:B,validateSpec:o,expressionContext:"cluster-reduce"}))}return s;case"video":return Mf({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:o,styleSpec:r});case"image":return Mf({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:o,styleSpec:r});case"canvas":return[new Er(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return n_({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:o,styleSpec:r})}}function _$({key:n,value:e}){if(zs(e)==="string")return Bg({key:n,value:e});{const t=[];for(const r in e)t.push(...Bg({key:`${n}.${r}`,value:e[r]}));return t}}function _F(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let o=[];const a=zs(e);if(e===void 0)return o;if(a!=="object")return o=o.concat([new Er("light",e,`object expected, ${a} found`)]),o;for(const s in e){const h=s.match(/^(.*)-transition$/);h&&r[h[1]]&&r[h[1]].transition?o=o.concat(n.validateSpec({key:s,value:e[s],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[s]?o=o.concat(n.validateSpec({key:s,value:e[s],valueSpec:r[s],validateSpec:n.validateSpec,style:i,styleSpec:t})):o=o.concat([new Er(s,e[s],`unknown property "${s}"`)])}return o}function CF(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,o=zs(e);if(e===void 0)return[];if(o!=="object")return[new Er("sky",e,`object expected, ${o} found`)];let a=[];for(const s in e)r[s]?a=a.concat(n.validateSpec({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:t})):a=a.concat([new Er(s,e[s],`unknown property "${s}"`)]);return a}function bF(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let o=[];const a=zs(e);if(e===void 0)return o;if(a!=="object")return o=o.concat([new Er("terrain",e,`object expected, ${a} found`)]),o;for(const s in e)r[s]?o=o.concat(n.validateSpec({key:s,value:e[s],valueSpec:r[s],validateSpec:n.validateSpec,style:i,styleSpec:t})):o=o.concat([new Er(s,e[s],`unknown property "${s}"`)]);return o}function C$(n){return Bg(n).length===0?[]:my(n)}function b$(n){return Bg(n).length===0?[]:my(n)}function x$(n){const e=n.key,t=n.value;if(zs(t)==="array"){if(t.length<1||t.length>4)return[new Er(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let o=[];for(let a=0;a<t.length;a++)o=o.concat(n.validateSpec({key:`${e}[${a}]`,value:t[a],validateSpec:n.validateSpec,valueSpec:i}));return o}else return CB({key:e,value:t,valueSpec:{}})}function w$(n){const e=n.key,t=n.value,r=zs(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new Er(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let a=0;a<t.length;a+=2)o=o.concat(n_({key:`${e}[${a}]`,value:t[a],valueSpec:i.layout_symbol["text-anchor"]})),o=o.concat(_B({key:`${e}[${a+1}]`,value:t[a+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return o}function xF(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],o=[];for(const a in t){t[a].id&&i.includes(t[a].id)&&e.push(new Er(r,t,`all the sprites' ids must be unique, but ${t[a].id} is duplicated`)),i.push(t[a].id),t[a].url&&o.includes(t[a].url)&&e.push(new Er(r,t,`all the sprites' URLs must be unique, but ${t[a].url} is duplicated`)),o.push(t[a].url);const s={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Mf({key:`${r}[${a}]`,value:t[a],valueSpec:s,validateSpec:n.validateSpec}))}return e}else return Bg({key:r,value:t})}function M$(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,o=zs(e);if(e===void 0)return[];if(o!=="object")return[new Er("projection",e,`object expected, ${o} found`)];let a=[];for(const s in e)r[s]?a=a.concat(n.validateSpec({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:t})):a=a.concat([new Er(s,e[s],`unknown property "${s}"`)]);return a}function S$(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=zs(t);return r==="array"&&!B$(t)&&!E$(t)?[new Er(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new Er(e,t,`projection expected, invalid type "${r}" found`)]}function E$(n){return!!["interpolate","step","literal"].includes(n[0])}function B$(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}const H8={"*"(){return[]},array:_B,boolean:g$,number:CB,color:y$,constants:hF,enum:n_,filter:bB,function:dF,layer:yF,object:Mf,source:vF,light:_F,sky:CF,terrain:bF,projection:M$,projectionDefinition:S$,string:Bg,formatted:C$,resolvedImage:b$,padding:x$,variableAnchorOffsetCollection:w$,sprite:xF};function jv(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=jv,t.expression&&T_(Iu(e))?dF(n):t.expression&&R_(Eg(e))?my(n):t.type&&H8[t.type]?H8[t.type](n):Mf(py({},n,{valueSpec:t.type?r[t.type]:t}))}function wF(n){const e=n.value,t=n.key,r=Bg(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new Er(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new Er(t,e,'"glyphs" url must include a "{range}" token'))),r}function Tf(n,e=Ys){let t=[];return t=t.concat(jv({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:jv,objectElementValidators:{glyphs:wF,"*"(){return[]}}})),n.constants&&(t=t.concat(hF({key:"constants",value:n.constants,style:n,styleSpec:e,validateSpec:jv}))),MF(t)}Tf.source=om(im(vF));Tf.sprite=om(im(xF));Tf.glyphs=om(im(wF));Tf.light=om(im(_F));Tf.sky=om(im(CF));Tf.terrain=om(im(bF));Tf.layer=om(im(yF));Tf.filter=om(im(bB));Tf.paintProperty=om(im(mF));Tf.layoutProperty=om(im(gF));function im(n){return function(e){return n({...e,validateSpec:jv})}}function MF(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function om(n){return function(...e){return MF(n.apply(this,e))}}const O$=/("(?:[^\\"]|\\.)*")|[:,]/g;function I$(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function o(a,s,h){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const g=JSON.stringify(a,i);if(g===void 0)return g;const b=r-s.length-h;if(g.length<=b){const B=g.replace(O$,(S,I)=>I||`${S} `);if(B.length<=b)return B}if(i!=null&&(a=JSON.parse(g),i=void 0),typeof a=="object"&&a!==null){const B=s+t,S=[];let I=0,k,U;if(Array.isArray(a)){k="[",U="]";const{length:z}=a;for(;I<z;I++)S.push(o(a[I],B,I===z-1?0:1)||"null")}else{k="{",U="}";const z=Object.keys(a),{length:Y}=z;for(;I<Y;I++){const Q=z[I],ne=`${JSON.stringify(Q)}: `,X=o(a[Q],B,ne.length+(I===Y-1?0:1));X!==void 0&&S.push(ne+X)}}if(S.length>0)return[k,t+S.join(`,
${B}`),U].join(`
${s}`)}return g}(n,"",0)}function Z8(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function SF(n,e=2){return n=Z8(n,Ys.$root),n.layers&&(n.layers=n.layers.map(t=>Z8(t,Ys.layer))),I$(n,{indent:e})}function Z3(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function X8(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function ZE(n,e){return typeof e=="string"&&e[0]==="@"?ZE(n,n.constants[e]):e}function k$(n){return Array.isArray(n.stops)}function sv(n,e,t){n[t]=n[e],delete n[e]}function T$(n){n.version=8,m$(n,i=>{i.type==="video"&&i.url!==void 0&&sv(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(o=>o.reverse())}),zv(n,i=>{Z3(i,o=>{o["symbol-min-distance"]!==void 0&&sv(o,"symbol-min-distance","symbol-spacing")}),X8(i,o=>{o["background-image"]!==void 0&&sv(o,"background-image","background-pattern"),o["line-image"]!==void 0&&sv(o,"line-image","line-pattern"),o["fill-image"]!==void 0&&sv(o,"fill-image","fill-pattern")})}),vB(n,{paint:!0,layout:!0},i=>{const o=ZE(n,i.value);k$(o)&&o.stops.forEach(a=>{a[1]=ZE(n,a[1])}),i.set(o)}),delete n.constants,zv(n,i=>{Z3(i,o=>{delete o["text-max-size"],delete o["icon-max-size"]}),X8(i,o=>{o["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=o["text-size"],delete o["text-size"]),o["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=o["icon-size"],delete o["icon-size"])})});function e(i){function o(a){return a.split(",").map(s=>s.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return o(i);if(typeof i=="object")return i.stops.forEach(a=>{a[1]=o(a[1])}),i;throw new Error("unexpected font value")}zv(n,i=>{Z3(i,o=>{o["text-font"]&&(o["text-font"]=e(o["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function P$(n){const e=[];return zv(n,t=>{t.filter&&(t.filter=Uv(t.filter))}),vB(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:o})=>{R_(r)||(typeof r=="object"&&!Array.isArray(r)?(o(AF(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&o(cF(r)))}),n}function R$(n){return JSON.parse(K$(JSON.stringify(n)))}function K$(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,o,a,s]=r.slice(1);return[o,a]=[o,a].map(h=>h.endsWith("%")?h:`${parseFloat(h)*100}%`),`"hsl${typeof s=="string"?"a":""}(${[i,o,a,s].filter(Boolean).join(",")})"`}return e})}function D$(n){let e=!1;if(n.version===7&&(n=T$(n),e=!0),n.version===8&&(e=!!P$(n),e=!0),vB(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(R$(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const L$={StyleExpression:uF,StylePropertyFunction:sx,ZoomConstantExpression:$E,ZoomDependentExpression:VE,createExpression:fB,createPropertyExpression:pB,isExpression:R_,isExpressionFilter:ax,isZoomExpression:o$,normalizePropertyExpression:s$},F$={convertFunction:AF,createFunction:dB,isFunction:T_};var lx=O_();const U$=Ka(lx);var bb={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.0.1/LICENSE.txt
 */var z$=bb.exports,J8;function j$(){return J8||(J8=1,function(n,e){(function(t,r){n.exports=r()})(z$,function(){var t={},r={};function i(a,s,h){if(r[a]=h,a==="index"){var g="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",b={};return r.shared(b),r.index(t,b),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),t}}i("shared",["exports"],function(a){function s(f,u,d,v){return new(d||(d=Promise))(function(w,D){function F(re){try{Z(v.next(re))}catch(Ae){D(Ae)}}function G(re){try{Z(v.throw(re))}catch(Ae){D(Ae)}}function Z(re){var Ae;re.done?w(re.value):(Ae=re.value,Ae instanceof d?Ae:new d(function(_e){_e(Ae)})).then(F,G)}Z((v=v.apply(f,u||[])).next())})}function h(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var g,b;function B(){if(b)return g;function f(u,d){this.x=u,this.y=d}return b=1,g=f,f.prototype={clone:function(){return new f(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,d){return this.clone()._rotateAround(u,d)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var d=u.x-this.x,v=u.y-this.y;return d*d+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,d){return Math.atan2(this.x*d-this.y*u,this.x*u+this.y*d)},_matMult:function(u){var d=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=d,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var d=Math.cos(u),v=Math.sin(u),w=v*this.x+d*this.y;return this.x=d*this.x-v*this.y,this.y=w,this},_rotateAround:function(u,d){var v=Math.cos(u),w=Math.sin(u),D=d.y+w*(this.x-d.x)+v*(this.y-d.y);return this.x=d.x+v*(this.x-d.x)-w*(this.y-d.y),this.y=D,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(u){return u instanceof f?u:Array.isArray(u)?new f(u[0],u[1]):u},g}typeof SuppressedError=="function"&&SuppressedError;var S,I,k=h(B()),U=function(){if(I)return S;function f(u,d,v,w){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(w-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=v,this.p2y=w}return I=1,S=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,w=0;w<8;w++){var D=this.sampleCurveX(v)-u;if(Math.abs(D)<d)return v;var F=this.sampleCurveDerivativeX(v);if(Math.abs(F)<1e-6)break;v-=D/F}var G=0,Z=1;for(v=u,w=0;w<20&&(D=this.sampleCurveX(v),!(Math.abs(D-u)<d));w++)u>D?G=v:Z=v,v=.5*(Z-G)+G;return v},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},S}(),z=h(U);let Y,Q;function ne(){return Y==null&&(Y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function X(){if(Q==null&&(Q=!1,ne())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let v=0;v<5*5;v++){const w=4*v;u.fillStyle=`rgb(${w},${w+1},${w+2})`,u.fillRect(v%5,Math.floor(v/5),1,1)}const d=u.getImageData(0,0,5,5).data;for(let v=0;v<5*5*4;v++)if(v%4!=3&&d[v]!==v){Q=!0;break}}}return Q||!1}var q,J=1e-6,N=typeof Float32Array<"u"?Float32Array:Array;function ie(){var f=new N(9);return N!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function he(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function ce(){var f=new N(3);return N!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function we(f,u,d){var v=new N(3);return v[0]=f,v[1]=u,v[2]=d,v}function pe(f,u,d){var v=u[0],w=u[1],D=u[2],F=u[3];return f[0]=d[0]*v+d[4]*w+d[8]*D+d[12]*F,f[1]=d[1]*v+d[5]*w+d[9]*D+d[13]*F,f[2]=d[2]*v+d[6]*w+d[10]*D+d[14]*F,f[3]=d[3]*v+d[7]*w+d[11]*D+d[15]*F,f}function Ce(){var f=new N(4);return N!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Pe(){var f=new N(2);return N!=Float32Array&&(f[0]=0,f[1]=0),f}function de(f,u){var d=new N(2);return d[0]=f,d[1]=u,d}Math.hypot||(Math.hypot=function(){for(var f=0,u=arguments.length;u--;)f+=arguments[u]*arguments[u];return Math.sqrt(f)}),ce(),q=new N(4),N!=Float32Array&&(q[0]=0,q[1]=0,q[2]=0,q[3]=0),ce(),we(1,0,0),we(0,1,0),Ce(),Ce(),ie(),Pe();const rt=8192;function ze(f,u,d){return u*(rt/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function Qe(f,u){return(f%u+u)%u}function ut(f,u,d){return f*(1-d)+u*d}function Te(f){if(f<=0)return 0;if(f>=1)return 1;const u=f*f,d=u*f;return 4*(f<.5?d:3*(f-u)+d-.75)}function Ue(f,u,d,v){const w=new z(f,u,d,v);return D=>w.solve(D)}const st=Ue(.25,.1,.25,1);function wt(f,u,d){return Math.min(d,Math.max(u,f))}function mt(f,u,d){const v=d-u,w=((f-u)%v+v)%v+u;return w===u?d:w}function ft(f,...u){for(const d of u)for(const v in d)f[v]=d[v];return f}let Ut=1;function Lt(f,u,d){const v={};for(const w in f)v[w]=u.call(this,f[w],w,f);return v}function De(f,u,d){const v={};for(const w in f)u.call(this,f[w],w,f)&&(v[w]=f[w]);return v}function ke(f){return Array.isArray(f)?f.map(ke):typeof f=="object"&&f?Lt(f,ke):f}const Oe={};function Je(f){Oe[f]||(typeof console<"u"&&console.warn(f),Oe[f]=!0)}function Mt(f,u,d){return(d.y-f.y)*(u.x-f.x)>(u.y-f.y)*(d.x-f.x)}function gt(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let Nt=null;function nn(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const en="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Sn(f,u,d,v,w){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const D=new VideoFrame(f,{timestamp:0});try{const F=D==null?void 0:D.format;if(!F||!F.startsWith("BGR")&&!F.startsWith("RGB"))throw new Error(`Unrecognized format ${F}`);const G=F.startsWith("BGR"),Z=new Uint8ClampedArray(v*w*4);if(yield D.copyTo(Z,function(re,Ae,_e,Re,Le){const je=4*Math.max(1,0),He=(Math.max(0,_e)-_e)*Re*4+je,at=4*Re,vt=Math.max(0,Ae),jt=Math.max(0,_e);return{rect:{x:vt,y:jt,width:Math.min(re.width,Ae+Re)-vt,height:Math.min(re.height,_e+Le)-jt},layout:[{offset:He,stride:at}]}}(f,u,d,v,w)),G)for(let re=0;re<Z.length;re+=4){const Ae=Z[re];Z[re]=Z[re+2],Z[re+2]=Ae}return Z}finally{D.close()}})}let Yn,Qr;function cr(f){return f/Math.PI*180}const fr="AbortError";function br(){return new Error(fr)}const Cr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Mr(f){return Cr.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Qn="global-dispatcher";class Sr extends Error{constructor(u,d,v,w){super(`AJAXError: ${d} (${u}): ${v}`),this.status=u,this.statusText=d,this.url=v,this.body=w}}const Ge=()=>gt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ue=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const v=Mr(f.url);if(v)return v(f,u);if(gt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Qn},u)}if(!(/^file:/.test(d=f.url)||/^file:/.test(Ge())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(v,w){return s(this,void 0,void 0,function*(){const D=new Request(v.url,{method:v.method||"GET",body:v.body,credentials:v.credentials,headers:v.headers,cache:v.cache,referrer:Ge(),signal:w.signal});let F,G;v.type!=="json"||D.headers.has("Accept")||D.headers.set("Accept","application/json");try{F=yield fetch(D)}catch(re){throw new Sr(0,re.message,v.url,new Blob)}if(!F.ok){const re=yield F.blob();throw new Sr(F.status,F.statusText,v.url,re)}G=v.type==="arrayBuffer"||v.type==="image"?F.arrayBuffer():v.type==="json"?F.json():F.text();const Z=yield G;if(w.signal.aborted)throw br();return{data:Z,cacheControl:F.headers.get("Cache-Control"),expires:F.headers.get("Expires")}})}(f,u);if(gt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Qn},u)}var d;return function(v,w){return new Promise((D,F)=>{var G;const Z=new XMLHttpRequest;Z.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(Z.responseType="arraybuffer");for(const re in v.headers)Z.setRequestHeader(re,v.headers[re]);v.type==="json"&&(Z.responseType="text",!((G=v.headers)===null||G===void 0)&&G.Accept||Z.setRequestHeader("Accept","application/json")),Z.withCredentials=v.credentials==="include",Z.onerror=()=>{F(new Error(Z.statusText))},Z.onload=()=>{if(!w.signal.aborted)if((Z.status>=200&&Z.status<300||Z.status===0)&&Z.response!==null){let re=Z.response;if(v.type==="json")try{re=JSON.parse(Z.response)}catch(Ae){return void F(Ae)}D({data:re,cacheControl:Z.getResponseHeader("Cache-Control"),expires:Z.getResponseHeader("Expires")})}else{const re=new Blob([Z.response],{type:Z.getResponseHeader("Content-Type")});F(new Sr(Z.status,Z.statusText,v.url,re))}},w.signal.addEventListener("abort",()=>{Z.abort(),F(br())}),Z.send(v.body)})}(f,u)};function me(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),d=window.location;return u.protocol===d.protocol&&u.host===d.host}function Xe(f,u,d){d[f]&&d[f].indexOf(u)!==-1||(d[f]=d[f]||[],d[f].push(u))}function Bt(f,u,d){if(d&&d[f]){const v=d[f].indexOf(u);v!==-1&&d[f].splice(v,1)}}class Yt{constructor(u,d={}){ft(this,d),this.type=u}}class it extends Yt{constructor(u,d={}){super("error",ft({error:u},d))}}class Kt{on(u,d){return this._listeners=this._listeners||{},Xe(u,d,this._listeners),{unsubscribe:()=>{this.off(u,d)}}}off(u,d){return Bt(u,d,this._listeners),Bt(u,d,this._oneTimeListeners),this}once(u,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},Xe(u,d,this._oneTimeListeners),this):new Promise(v=>this.once(u,v))}fire(u,d){typeof u=="string"&&(u=new Yt(u,d||{}));const v=u.type;if(this.listens(v)){u.target=this;const w=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const G of w)G.call(this,u);const D=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const G of D)Bt(v,G,this._oneTimeListeners),G.call(this,u);const F=this._eventedParent;F&&(ft(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(u))}else u instanceof it&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,d){return this._eventedParent=u,this._eventedParentData=d,this}}var Ye={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const fe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xe(f,u){const d={};for(const v in f)v!=="ref"&&(d[v]=f[v]);return fe.forEach(v=>{v in u&&(d[v]=u[v])}),d}function p(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let d=0;d<f.length;d++)if(!p(f[d],u[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const d in f)if(!p(f[d],u[d]))return!1;return!0}return f===u}function Ne(f,u){f.push(u)}function dt(f,u,d){Ne(d,{command:"addSource",args:[f,u[f]]})}function pt(f,u,d){Ne(u,{command:"removeSource",args:[f]}),d[f]=!0}function Ot(f,u,d,v){pt(f,d,v),dt(f,u,d)}function _t(f,u,d){let v;for(v in f[d])if(Object.prototype.hasOwnProperty.call(f[d],v)&&v!=="data"&&!p(f[d][v],u[d][v]))return!1;for(v in u[d])if(Object.prototype.hasOwnProperty.call(u[d],v)&&v!=="data"&&!p(f[d][v],u[d][v]))return!1;return!0}function rn(f,u,d,v,w,D){f=f||{},u=u||{};for(const F in f)Object.prototype.hasOwnProperty.call(f,F)&&(p(f[F],u[F])||d.push({command:D,args:[v,F,u[F],w]}));for(const F in u)Object.prototype.hasOwnProperty.call(u,F)&&!Object.prototype.hasOwnProperty.call(f,F)&&(p(f[F],u[F])||d.push({command:D,args:[v,F,u[F],w]}))}function Zt(f){return f.id}function Gt(f,u){return f[u.id]=u,f}class bt{constructor(u,d,v,w){this.message=(u?`${u}: `:"")+v,w&&(this.identifier=w),d!=null&&d.__line__&&(this.line=d.__line__)}}function Pn(f,...u){for(const d of u)for(const v in d)f[v]=d[v];return f}class En extends Error{constructor(u,d){super(d),this.message=d,this.key=u}}class lr{constructor(u,d=[]){this.parent=u,this.bindings={};for(const[v,w]of d)this.bindings[v]=w}concat(u){return new lr(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const wr={kind:"null"},on={kind:"number"},zn={kind:"string"},Dn={kind:"boolean"},Br={kind:"color"},xr={kind:"projectionDefinition"},Rr={kind:"object"},rr={kind:"value"},co={kind:"collator"},$a={kind:"formatted"},ji={kind:"padding"},ui={kind:"resolvedImage"},Vi={kind:"variableAnchorOffsetCollection"};function as(f,u){return{kind:"array",itemType:f,N:u}}function Ni(f){if(f.kind==="array"){const u=Ni(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const ll=[wr,on,zn,Dn,Br,xr,$a,Rr,as(rr),ji,ui,Vi];function ul(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!ul(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const d of ll)if(!ul(d,u))return null}}return`Expected ${Ni(f)} but found ${Ni(u)} instead.`}function ts(f,u){return u.some(d=>d.kind===f.kind)}function Aa(f,u){return u.some(d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f)}function Al(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const ao=.96422,Pu=.82521,tu=4/29,so=6/29,Kr=3*so*so,Va=so*so*so,Ts=Math.PI/180,ia=180/Math.PI;function We(f){return(f%=360)<0&&(f+=360),f}function Ct([f,u,d,v]){let w,D;const F=Nn((.2225045*(f=pn(f))+.7168786*(u=pn(u))+.0606169*(d=pn(d)))/1);f===u&&u===d?w=D=F:(w=Nn((.4360747*f+.3850649*u+.1430804*d)/ao),D=Nn((.0139322*f+.0971045*u+.7141733*d)/Pu));const G=116*F-16;return[G<0?0:G,500*(w-F),200*(F-D),v]}function pn(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Nn(f){return f>Va?Math.pow(f,1/3):f/Kr+tu}function An([f,u,d,v]){let w=(f+16)/116,D=isNaN(u)?w:w+u/500,F=isNaN(d)?w:w-d/200;return w=1*Ti(w),D=ao*Ti(D),F=Pu*Ti(F),[er(3.1338561*D-1.6168667*w-.4906146*F),er(-.9787684*D+1.9161415*w+.033454*F),er(.0719453*D-.2289914*w+1.4052427*F),v]}function er(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Ti(f){return f>so?f*f*f:Kr*(f-tu)}function ho(f){return parseInt(f.padEnd(2,f),16)/255}function vs(f,u){return js(u?f/100:f,0,1)}function js(f,u,d){return Math.min(Math.max(u,f),d)}function vA(f){return!f.some(Number.isNaN)}const ri={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function wi(f,u,d){return f+d*(u-f)}function Ha(f,u,d){return f.map((v,w)=>wi(v,u[w],d))}class ci{constructor(u,d,v,w=1,D=!0){this.r=u,this.g=d,this.b=v,this.a=w,D||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[u,d,v,w]))}static parse(u){if(u instanceof ci)return u;if(typeof u!="string")return;const d=function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=ri[v];if(w){const[F,G,Z]=w;return[F/255,G/255,Z/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const F=v.length<6?1:2;let G=1;return[ho(v.slice(G,G+=F)),ho(v.slice(G,G+=F)),ho(v.slice(G,G+=F)),ho(v.slice(G,G+F)||"ff")]}if(v.startsWith("rgb")){const F=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(F){const[G,Z,re,Ae,_e,Re,Le,je,He,at,vt,jt]=F,St=[Ae||" ",Le||" ",at].join("");if(St==="  "||St==="  /"||St===",,"||St===",,,"){const Ke=[re,Re,He].join(""),nt=Ke==="%%%"?100:Ke===""?255:0;if(nt){const It=[js(+Z/nt,0,1),js(+_e/nt,0,1),js(+je/nt,0,1),vt?vs(+vt,jt):1];if(vA(It))return It}}return}}const D=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(D){const[F,G,Z,re,Ae,_e,Re,Le,je]=D,He=[Z||" ",Ae||" ",Re].join("");if(He==="  "||He==="  /"||He===",,"||He===",,,"){const at=[+G,js(+re,0,100),js(+_e,0,100),Le?vs(+Le,je):1];if(vA(at))return function([vt,jt,St,Ke]){function nt(It){const un=(It+vt/30)%12,Fn=jt*Math.min(St,1-St);return St-Fn*Math.max(-1,Math.min(un-3,9-un,1))}return vt=We(vt),jt/=100,St/=100,[nt(0),nt(8),nt(4),Ke]}(at)}}}(u);return d?new ci(...d,!1):void 0}get rgb(){const{r:u,g:d,b:v,a:w}=this,D=w||1/0;return this.overwriteGetter("rgb",[u/D,d/D,v/D,w])}get hcl(){return this.overwriteGetter("hcl",function(u){const[d,v,w,D]=Ct(u),F=Math.sqrt(v*v+w*w);return[Math.round(1e4*F)?We(Math.atan2(w,v)*ia):NaN,F,d,D]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ct(this.rgb))}overwriteGetter(u,d){return Object.defineProperty(this,u,{value:d}),d}toString(){const[u,d,v,w]=this.rgb;return`rgba(${[u,d,v].map(D=>Math.round(255*D)).join(",")},${w})`}static interpolate(u,d,v,w="rgb"){switch(w){case"rgb":{const[D,F,G,Z]=Ha(u.rgb,d.rgb,v);return new ci(D,F,G,Z,!1)}case"hcl":{const[D,F,G,Z]=u.hcl,[re,Ae,_e,Re]=d.hcl;let Le,je;if(isNaN(D)||isNaN(re))isNaN(D)?isNaN(re)?Le=NaN:(Le=re,G!==1&&G!==0||(je=Ae)):(Le=D,_e!==1&&_e!==0||(je=F));else{let St=re-D;re>D&&St>180?St-=360:re<D&&D-re>180&&(St+=360),Le=D+v*St}const[He,at,vt,jt]=function([St,Ke,nt,It]){return St=isNaN(St)?0:St*Ts,An([nt,Math.cos(St)*Ke,Math.sin(St)*Ke,It])}([Le,je??wi(F,Ae,v),wi(G,_e,v),wi(Z,Re,v)]);return new ci(He,at,vt,jt,!1)}case"lab":{const[D,F,G,Z]=An(Ha(u.lab,d.lab,v));return new ci(D,F,G,Z,!1)}}}}ci.black=new ci(0,0,0,1),ci.white=new ci(1,1,1,1),ci.transparent=new ci(0,0,0,0),ci.red=new ci(1,0,0,1);class ca{constructor(u,d,v){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,d){return this.collator.compare(u,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class iA{constructor(u,d,v,w,D){this.text=u,this.image=d,this.scale=v,this.fontStack=w,this.textColor=D}}class ls{constructor(u){this.sections=u}static fromString(u){return new ls([new iA(u,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof ls?u:ls.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class Dr{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Dr)return u;if(typeof u=="number")return new Dr([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const d of u)if(typeof d!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Dr(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,v){return new Dr(Ha(u.values,d.values,v))}}class Ei{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const Za=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ps{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Ps)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let d=0;d<u.length;d+=2){const v=u[d],w=u[d+1];if(typeof v!="string"||!Za.has(v)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new Ps(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,v){const w=u.values,D=d.values;if(w.length!==D.length)throw new Ei(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${d.toString()}`);const F=[];for(let G=0;G<w.length;G+=2){if(w[G]!==D[G])throw new Ei(`Cannot interpolate values containing mismatched anchors. from[${G}]: ${w[G]}, to[${G}]: ${D[G]}`);F.push(w[G]);const[Z,re]=w[G+1],[Ae,_e]=D[G+1];F.push([wi(Z,Ae,v),wi(re,_e,v)])}return new Ps(F)}}class Mo{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Mo({name:u,available:!1}):null}}class Ns{constructor(u,d,v){this.from=u,this.to=d,this.transition=v}static interpolate(u,d,v){return new Ns(u,d,v)}static parse(u){return u instanceof Ns?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new Ns(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new Ns(u.from,u.to,u.transition):typeof u=="string"?new Ns(u,u,1):void 0}}function du(f,u,d,v){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[f,u,d,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[f,u,d,v]:[f,u,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function zl(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Ns||f instanceof ci||f instanceof ca||f instanceof ls||f instanceof Dr||f instanceof Ps||f instanceof Mo)return!0;if(Array.isArray(f)){for(const u of f)if(!zl(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!zl(f[u]))return!1;return!0}return!1}function ns(f){if(f===null)return wr;if(typeof f=="string")return zn;if(typeof f=="boolean")return Dn;if(typeof f=="number")return on;if(f instanceof ci)return Br;if(f instanceof Ns)return xr;if(f instanceof ca)return co;if(f instanceof ls)return $a;if(f instanceof Dr)return ji;if(f instanceof Ps)return Vi;if(f instanceof Mo)return ui;if(Array.isArray(f)){const u=f.length;let d;for(const v of f){const w=ns(v);if(d){if(d===w)continue;d=rr;break}d=w}return as(d||rr,u)}return Rr}function Vs(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof ci||f instanceof Ns||f instanceof ls||f instanceof Dr||f instanceof Ps||f instanceof Mo?f.toString():JSON.stringify(f)}class fo{constructor(u,d){this.type=u,this.value=d}static parse(u,d){if(u.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!zl(u[1]))return d.error("invalid value");const v=u[1];let w=ns(v);const D=d.expectedType;return w.kind!=="array"||w.N!==0||!D||D.kind!=="array"||typeof D.N=="number"&&D.N!==0||(w=D),new fo(w,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ms={string:zn,number:on,boolean:Dn,object:Rr};class ws{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let v,w=1;const D=u[0];if(D==="array"){let G,Z;if(u.length>2){const re=u[1];if(typeof re!="string"||!(re in ms)||re==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);G=ms[re],w++}else G=rr;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);Z=u[2],w++}v=as(G,Z)}else{if(!ms[D])throw new Error(`Types doesn't contain name = ${D}`);v=ms[D]}const F=[];for(;w<u.length;w++){const G=d.parse(u[w],w,rr);if(!G)return null;F.push(G)}return new ws(v,F)}evaluate(u){for(let d=0;d<this.args.length;d++){const v=this.args[d].evaluate(u);if(!ul(this.type,ns(v)))return v;if(d===this.args.length-1)throw new Ei(`Expected value to be of type ${Ni(this.type)}, but found ${Ni(ns(v))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Xa={"to-boolean":Dn,"to-color":Br,"to-number":on,"to-string":zn};class Rs{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const v=u[0];if(!Xa[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&u.length!==2)return d.error("Expected one argument.");const w=Xa[v],D=[];for(let F=1;F<u.length;F++){const G=d.parse(u[F],F,rr);if(!G)return null;D.push(G)}return new Rs(w,D)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let d,v;for(const w of this.args){if(d=w.evaluate(u),v=null,d instanceof ci)return d;if(typeof d=="string"){const D=u.parseColor(d);if(D)return D}else if(Array.isArray(d)&&(v=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:du(d[0],d[1],d[2],d[3]),!v))return new ci(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Ei(v||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const v of this.args){d=v.evaluate(u);const w=Dr.parse(d);if(w)return w}throw new Ei(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const v of this.args){d=v.evaluate(u);const w=Ps.parse(d);if(w)return w}throw new Ei(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const v of this.args){if(d=v.evaluate(u),d===null)return 0;const w=Number(d);if(!isNaN(w))return w}throw new Ei(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return ls.fromString(Vs(this.args[0].evaluate(u)));case"resolvedImage":return Mo.fromString(Vs(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Vs(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const El=["Unknown","Point","LineString","Polygon"];class oA{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?El[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let d=this._parseColorCache[u];return d||(d=this._parseColorCache[u]=ci.parse(u)),d}}class Hi{constructor(u,d,v=[],w,D=new lr,F=[]){this.registry=u,this.path=v,this.key=v.map(G=>`[${G}]`).join(""),this.scope=D,this.errors=F,this.expectedType=w,this._isConstant=d}parse(u,d,v,w,D={}){return d?this.concat(d,v,w)._parse(u,D):this._parse(u,D)}_parse(u,d){function v(w,D,F){return F==="assert"?new ws(D,[w]):F==="coerce"?new Rs(D,[w]):w}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=u[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const D=this.registry[w];if(D){let F=D.parse(u,this);if(!F)return null;if(this.expectedType){const G=this.expectedType,Z=F.type;if(G.kind!=="string"&&G.kind!=="number"&&G.kind!=="boolean"&&G.kind!=="object"&&G.kind!=="array"||Z.kind!=="value")if(G.kind!=="projectionDefinition"||Z.kind!=="string"&&Z.kind!=="array")if(G.kind!=="color"&&G.kind!=="formatted"&&G.kind!=="resolvedImage"||Z.kind!=="value"&&Z.kind!=="string")if(G.kind!=="padding"||Z.kind!=="value"&&Z.kind!=="number"&&Z.kind!=="array")if(G.kind!=="variableAnchorOffsetCollection"||Z.kind!=="value"&&Z.kind!=="array"){if(this.checkSubtype(G,Z))return null}else F=v(F,G,d.typeAnnotation||"coerce");else F=v(F,G,d.typeAnnotation||"coerce");else F=v(F,G,d.typeAnnotation||"coerce");else F=v(F,G,d.typeAnnotation||"coerce");else F=v(F,G,d.typeAnnotation||"assert")}if(!(F instanceof fo)&&F.type.kind!=="resolvedImage"&&this._isConstant(F)){const G=new oA;try{F=new fo(F.type,F.evaluate(G))}catch(Z){return this.error(Z.message),null}}return F}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,d,v){const w=typeof u=="number"?this.path.concat(u):this.path,D=v?this.scope.concat(v):this.scope;return new Hi(this.registry,this._isConstant,w,d||null,D,this.errors)}error(u,...d){const v=`${this.key}${d.map(w=>`[${w}]`).join("")}`;this.errors.push(new En(v,u))}checkSubtype(u,d){const v=ul(u,d);return v&&this.error(v),v}}class nu{constructor(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const d of this.bindings)u(d[1]);u(this.result)}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const v=[];for(let D=1;D<u.length-1;D+=2){const F=u[D];if(typeof F!="string")return d.error(`Expected string, but found ${typeof F} instead.`,D);if(/[^a-zA-Z0-9_]/.test(F))return d.error("Variable names must contain only alphanumeric characters or '_'.",D);const G=d.parse(u[D+1],D+1);if(!G)return null;v.push([F,G])}const w=d.parse(u[u.length-1],u.length-1,d.expectedType,v);return w?new nu(v,w):null}outputDefined(){return this.result.outputDefined()}}class Fi{constructor(u,d){this.type=d.type,this.name=u,this.boundExpression=d}static parse(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const v=u[1];return d.scope.has(v)?new Fi(v,d.scope.get(v)):d.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Jr{constructor(u,d,v){this.type=u,this.index=d,this.input=v}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=d.parse(u[1],1,on),w=d.parse(u[2],2,as(d.expectedType||rr));return v&&w?new Jr(w.type.itemType,v,w):null}evaluate(u){const d=this.index.evaluate(u),v=this.input.evaluate(u);if(d<0)throw new Ei(`Array index out of bounds: ${d} < 0.`);if(d>=v.length)throw new Ei(`Array index out of bounds: ${d} > ${v.length-1}.`);if(d!==Math.floor(d))throw new Ei(`Array index must be an integer, but found ${d} instead.`);return v[d]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class ru{constructor(u,d){this.type=Dn,this.needle=u,this.haystack=d}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=d.parse(u[1],1,rr),w=d.parse(u[2],2,rr);return v&&w?ts(v.type,[Dn,zn,on,wr,rr])?new ru(v,w):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ni(v.type)} instead`):null}evaluate(u){const d=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!v)return!1;if(!Aa(d,["boolean","string","number","null"]))throw new Ei(`Expected first argument to be of type boolean, string, number or null, but found ${Ni(ns(d))} instead.`);if(!Aa(v,["string","array"]))throw new Ei(`Expected second argument to be of type array or string, but found ${Ni(ns(v))} instead.`);return v.indexOf(d)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class Gi{constructor(u,d,v){this.type=on,this.needle=u,this.haystack=d,this.fromIndex=v}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=d.parse(u[1],1,rr),w=d.parse(u[2],2,rr);if(!v||!w)return null;if(!ts(v.type,[Dn,zn,on,wr,rr]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ni(v.type)} instead`);if(u.length===4){const D=d.parse(u[3],3,on);return D?new Gi(v,w,D):null}return new Gi(v,w)}evaluate(u){const d=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!Aa(d,["boolean","string","number","null"]))throw new Ei(`Expected first argument to be of type boolean, string, number or null, but found ${Ni(ns(d))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(u)),Aa(v,["string"])){const D=v.indexOf(d,w);return D===-1?-1:[...v.slice(0,D)].length}if(Aa(v,["array"]))return v.indexOf(d,w);throw new Ei(`Expected second argument to be of type array or string, but found ${Ni(ns(v))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class lo{constructor(u,d,v,w,D,F){this.inputType=u,this.type=d,this.input=v,this.cases=w,this.outputs=D,this.otherwise=F}static parse(u,d){if(u.length<5)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return d.error("Expected an even number of arguments.");let v,w;d.expectedType&&d.expectedType.kind!=="value"&&(w=d.expectedType);const D={},F=[];for(let re=2;re<u.length-1;re+=2){let Ae=u[re];const _e=u[re+1];Array.isArray(Ae)||(Ae=[Ae]);const Re=d.concat(re);if(Ae.length===0)return Re.error("Expected at least one branch label.");for(const je of Ae){if(typeof je!="number"&&typeof je!="string")return Re.error("Branch labels must be numbers or strings.");if(typeof je=="number"&&Math.abs(je)>Number.MAX_SAFE_INTEGER)return Re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof je=="number"&&Math.floor(je)!==je)return Re.error("Numeric branch labels must be integer values.");if(v){if(Re.checkSubtype(v,ns(je)))return null}else v=ns(je);if(D[String(je)]!==void 0)return Re.error("Branch labels must be unique.");D[String(je)]=F.length}const Le=d.parse(_e,re,w);if(!Le)return null;w=w||Le.type,F.push(Le)}const G=d.parse(u[1],1,rr);if(!G)return null;const Z=d.parse(u[u.length-1],u.length-1,w);return Z?G.type.kind!=="value"&&d.concat(1).checkSubtype(v,G.type)?null:new lo(v,w,G,D,F,Z):null}evaluate(u){const d=this.input.evaluate(u);return(ns(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class Pi{constructor(u,d,v){this.type=u,this.branches=d,this.otherwise=v}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return d.error("Expected an odd number of arguments.");let v;d.expectedType&&d.expectedType.kind!=="value"&&(v=d.expectedType);const w=[];for(let F=1;F<u.length-1;F+=2){const G=d.parse(u[F],F,Dn);if(!G)return null;const Z=d.parse(u[F+1],F+1,v);if(!Z)return null;w.push([G,Z]),v=v||Z.type}const D=d.parse(u[u.length-1],u.length-1,v);if(!D)return null;if(!v)throw new Error("Can't infer output type");return new Pi(v,w,D)}evaluate(u){for(const[d,v]of this.branches)if(d.evaluate(u))return v.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[d,v]of this.branches)u(d),u(v);u(this.otherwise)}outputDefined(){return this.branches.every(([u,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class ee{constructor(u,d,v,w){this.type=u,this.input=d,this.beginIndex=v,this.endIndex=w}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=d.parse(u[1],1,rr),w=d.parse(u[2],2,on);if(!v||!w)return null;if(!ts(v.type,[as(rr),zn,rr]))return d.error(`Expected first argument to be of type array or string, but found ${Ni(v.type)} instead`);if(u.length===4){const D=d.parse(u[3],3,on);return D?new ee(v.type,v,w,D):null}return new ee(v.type,v,w)}evaluate(u){const d=this.input.evaluate(u),v=this.beginIndex.evaluate(u);let w;if(this.endIndex&&(w=this.endIndex.evaluate(u)),Aa(d,["string"]))return[...d].slice(v,w).join("");if(Aa(d,["array"]))return d.slice(v,w);throw new Ei(`Expected first argument to be of type array or string, but found ${Ni(ns(d))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Se(f,u){const d=f.length-1;let v,w,D=0,F=d,G=0;for(;D<=F;)if(G=Math.floor((D+F)/2),v=f[G],w=f[G+1],v<=u){if(G===d||u<w)return G;D=G+1}else{if(!(v>u))throw new Ei("Input is not a number.");F=G-1}return 0}class tt{constructor(u,d,v){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(const[w,D]of v)this.labels.push(w),this.outputs.push(D)}static parse(u,d){if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");const v=d.parse(u[1],1,on);if(!v)return null;const w=[];let D=null;d.expectedType&&d.expectedType.kind!=="value"&&(D=d.expectedType);for(let F=1;F<u.length;F+=2){const G=F===1?-1/0:u[F],Z=u[F+1],re=F,Ae=F+1;if(typeof G!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(w.length&&w[w.length-1][0]>=G)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',re);const _e=d.parse(Z,Ae,D);if(!_e)return null;D=D||_e.type,w.push([G,_e])}return new tt(D,v,w)}evaluate(u){const d=this.labels,v=this.outputs;if(d.length===1)return v[0].evaluate(u);const w=this.input.evaluate(u);if(w<=d[0])return v[0].evaluate(u);const D=d.length;return w>=d[D-1]?v[D-1].evaluate(u):v[Se(d,w)].evaluate(u)}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function $t(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Or,Gn,si=function(){if(Gn)return Or;function f(u,d,v,w){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(w-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=v,this.p2y=w}return Gn=1,Or=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,w=0;w<8;w++){var D=this.sampleCurveX(v)-u;if(Math.abs(D)<d)return v;var F=this.sampleCurveDerivativeX(v);if(Math.abs(F)<1e-6)break;v-=D/F}var G=0,Z=1;for(v=u,w=0;w<20&&(D=this.sampleCurveX(v),!(Math.abs(D-u)<d));w++)u>D?G=v:Z=v,v=.5*(Z-G)+G;return v},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},Or}(),hi=$t(si);class pr{constructor(u,d,v,w,D){this.type=u,this.operator=d,this.interpolation=v,this.input=w,this.labels=[],this.outputs=[];for(const[F,G]of D)this.labels.push(F),this.outputs.push(G)}static interpolationFactor(u,d,v,w){let D=0;if(u.name==="exponential")D=Ir(d,u.base,v,w);else if(u.name==="linear")D=Ir(d,1,v,w);else if(u.name==="cubic-bezier"){const F=u.controlPoints;D=new hi(F[0],F[1],F[2],F[3]).solve(Ir(d,1,v,w))}return D}static parse(u,d){let[v,w,D,...F]=u;if(!Array.isArray(w)||w.length===0)return d.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const re=w[1];if(typeof re!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:re}}else{if(w[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const re=w.slice(1);if(re.length!==4||re.some(Ae=>typeof Ae!="number"||Ae<0||Ae>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:re}}}if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(D=d.parse(D,2,on),!D)return null;const G=[];let Z=null;v==="interpolate-hcl"||v==="interpolate-lab"?Z=Br:d.expectedType&&d.expectedType.kind!=="value"&&(Z=d.expectedType);for(let re=0;re<F.length;re+=2){const Ae=F[re],_e=F[re+1],Re=re+3,Le=re+4;if(typeof Ae!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Re);if(G.length&&G[G.length-1][0]>=Ae)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Re);const je=d.parse(_e,Le,Z);if(!je)return null;Z=Z||je.type,G.push([Ae,je])}return Al(Z,on)||Al(Z,xr)||Al(Z,Br)||Al(Z,ji)||Al(Z,Vi)||Al(Z,as(on))?new pr(Z,v,w,D,G):d.error(`Type ${Ni(Z)} is not interpolatable.`)}evaluate(u){const d=this.labels,v=this.outputs;if(d.length===1)return v[0].evaluate(u);const w=this.input.evaluate(u);if(w<=d[0])return v[0].evaluate(u);const D=d.length;if(w>=d[D-1])return v[D-1].evaluate(u);const F=Se(d,w),G=pr.interpolationFactor(this.interpolation,w,d[F],d[F+1]),Z=v[F].evaluate(u),re=v[F+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return wi(Z,re,G);case"color":return ci.interpolate(Z,re,G);case"padding":return Dr.interpolate(Z,re,G);case"variableAnchorOffsetCollection":return Ps.interpolate(Z,re,G);case"array":return Ha(Z,re,G);case"projectionDefinition":return Ns.interpolate(Z,re,G)}case"interpolate-hcl":return ci.interpolate(Z,re,G,"hcl");case"interpolate-lab":return ci.interpolate(Z,re,G,"lab")}}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Ir(f,u,d,v){const w=v-d,D=f-d;return w===0?0:u===1?D/w:(Math.pow(u,D)-1)/(Math.pow(u,w)-1)}const vi={color:ci.interpolate,number:wi,padding:Dr.interpolate,variableAnchorOffsetCollection:Ps.interpolate,array:Ha};class So{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let v=null;const w=d.expectedType;w&&w.kind!=="value"&&(v=w);const D=[];for(const G of u.slice(1)){const Z=d.parse(G,1+D.length,v,void 0,{typeAnnotation:"omit"});if(!Z)return null;v=v||Z.type,D.push(Z)}if(!v)throw new Error("No output type");const F=w&&D.some(G=>ul(w,G.type));return new So(F?rr:v,D)}evaluate(u){let d,v=null,w=0;for(const D of this.args)if(w++,v=D.evaluate(u),v&&v instanceof Mo&&!v.available&&(d||(d=v.name),v=null,w===this.args.length&&(v=d)),v!==null)break;return v}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function ki(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function qr(f,u,d,v){return v.compare(u,d)===0}function Zi(f,u,d){const v=f!=="=="&&f!=="!=";return class EF{constructor(D,F,G){this.type=Dn,this.lhs=D,this.rhs=F,this.collator=G,this.hasUntypedArgument=D.type.kind==="value"||F.type.kind==="value"}static parse(D,F){if(D.length!==3&&D.length!==4)return F.error("Expected two or three arguments.");const G=D[0];let Z=F.parse(D[1],1,rr);if(!Z)return null;if(!ki(G,Z.type))return F.concat(1).error(`"${G}" comparisons are not supported for type '${Ni(Z.type)}'.`);let re=F.parse(D[2],2,rr);if(!re)return null;if(!ki(G,re.type))return F.concat(2).error(`"${G}" comparisons are not supported for type '${Ni(re.type)}'.`);if(Z.type.kind!==re.type.kind&&Z.type.kind!=="value"&&re.type.kind!=="value")return F.error(`Cannot compare types '${Ni(Z.type)}' and '${Ni(re.type)}'.`);v&&(Z.type.kind==="value"&&re.type.kind!=="value"?Z=new ws(re.type,[Z]):Z.type.kind!=="value"&&re.type.kind==="value"&&(re=new ws(Z.type,[re])));let Ae=null;if(D.length===4){if(Z.type.kind!=="string"&&re.type.kind!=="string"&&Z.type.kind!=="value"&&re.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(Ae=F.parse(D[3],3,co),!Ae)return null}return new EF(Z,re,Ae)}evaluate(D){const F=this.lhs.evaluate(D),G=this.rhs.evaluate(D);if(v&&this.hasUntypedArgument){const Z=ns(F),re=ns(G);if(Z.kind!==re.kind||Z.kind!=="string"&&Z.kind!=="number")throw new Ei(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${Z.kind}, ${re.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const Z=ns(F),re=ns(G);if(Z.kind!=="string"||re.kind!=="string")return u(D,F,G)}return this.collator?d(D,F,G,this.collator.evaluate(D)):u(D,F,G)}eachChild(D){D(this.lhs),D(this.rhs),this.collator&&D(this.collator)}outputDefined(){return!0}}}const Xi=Zi("==",function(f,u,d){return u===d},qr),us=Zi("!=",function(f,u,d){return u!==d},function(f,u,d,v){return!qr(0,u,d,v)}),ya=Zi("<",function(f,u,d){return u<d},function(f,u,d,v){return v.compare(u,d)<0}),La=Zi(">",function(f,u,d){return u>d},function(f,u,d,v){return v.compare(u,d)>0}),fu=Zi("<=",function(f,u,d){return u<=d},function(f,u,d,v){return v.compare(u,d)<=0}),Hs=Zi(">=",function(f,u,d){return u>=d},function(f,u,d,v){return v.compare(u,d)>=0});class hc{constructor(u,d,v){this.type=co,this.locale=v,this.caseSensitive=u,this.diacriticSensitive=d}static parse(u,d){if(u.length!==2)return d.error("Expected one argument.");const v=u[1];if(typeof v!="object"||Array.isArray(v))return d.error("Collator options argument must be an object.");const w=d.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,Dn);if(!w)return null;const D=d.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,Dn);if(!D)return null;let F=null;return v.locale&&(F=d.parse(v.locale,1,zn),!F)?null:new hc(w,D,F)}evaluate(u){return new ca(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class Sa{constructor(u,d,v,w,D){this.type=zn,this.number=u,this.locale=d,this.currency=v,this.minFractionDigits=w,this.maxFractionDigits=D}static parse(u,d){if(u.length!==3)return d.error("Expected two arguments.");const v=d.parse(u[1],1,on);if(!v)return null;const w=u[2];if(typeof w!="object"||Array.isArray(w))return d.error("NumberFormat options argument must be an object.");let D=null;if(w.locale&&(D=d.parse(w.locale,1,zn),!D))return null;let F=null;if(w.currency&&(F=d.parse(w.currency,1,zn),!F))return null;let G=null;if(w["min-fraction-digits"]&&(G=d.parse(w["min-fraction-digits"],1,on),!G))return null;let Z=null;return w["max-fraction-digits"]&&(Z=d.parse(w["max-fraction-digits"],1,on),!Z)?null:new Sa(v,D,F,G,Z)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class cl{constructor(u){this.type=$a,this.sections=u}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const v=u[1];if(!Array.isArray(v)&&typeof v=="object")return d.error("First argument must be an image or text section.");const w=[];let D=!1;for(let F=1;F<=u.length-1;++F){const G=u[F];if(D&&typeof G=="object"&&!Array.isArray(G)){D=!1;let Z=null;if(G["font-scale"]&&(Z=d.parse(G["font-scale"],1,on),!Z))return null;let re=null;if(G["text-font"]&&(re=d.parse(G["text-font"],1,as(zn)),!re))return null;let Ae=null;if(G["text-color"]&&(Ae=d.parse(G["text-color"],1,Br),!Ae))return null;const _e=w[w.length-1];_e.scale=Z,_e.font=re,_e.textColor=Ae}else{const Z=d.parse(u[F],1,rr);if(!Z)return null;const re=Z.type.kind;if(re!=="string"&&re!=="value"&&re!=="null"&&re!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");D=!0,w.push({content:Z,scale:null,font:null,textColor:null})}}return new cl(w)}evaluate(u){return new ls(this.sections.map(d=>{const v=d.content.evaluate(u);return ns(v)===ui?new iA("",v,null,null,null):new iA(Vs(v),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null)}))}eachChild(u){for(const d of this.sections)u(d.content),d.scale&&u(d.scale),d.font&&u(d.font),d.textColor&&u(d.textColor)}outputDefined(){return!1}}class lh{constructor(u){this.type=ui,this.input=u}static parse(u,d){if(u.length!==2)return d.error("Expected two arguments.");const v=d.parse(u[1],1,zn);return v?new lh(v):d.error("No image name provided.")}evaluate(u){const d=this.input.evaluate(u),v=Mo.fromString(d);return v&&u.availableImages&&(v.available=u.availableImages.indexOf(d)>-1),v}eachChild(u){u(this.input)}outputDefined(){return!1}}class Ru{constructor(u){this.type=on,this.input=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const v=d.parse(u[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${Ni(v.type)} instead.`):new Ru(v):null}evaluate(u){const d=this.input.evaluate(u);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new Ei(`Expected value to be of type string or array, but found ${Ni(ns(d))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Ku=8192;function bd(f,u){const d=(180+f[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,w=Math.pow(2,u.z);return[Math.round(d*w*Ku),Math.round(v*w*Ku)]}function Ms(f,u){const d=Math.pow(2,u.z);return[(w=(f[0]/Ku+u.x)/d,360*w-180),(v=(f[1]/Ku+u.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90)];var v,w}function Du(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function uh(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function gp(f,u,d){const v=f[0]-u[0],w=f[1]-u[1],D=f[0]-d[0],F=f[1]-d[1];return v*F-D*w==0&&v*D<=0&&w*F<=0}function sA(f,u,d,v){return(w=[v[0]-d[0],v[1]-d[1]])[0]*(D=[u[0]-f[0],u[1]-f[1]])[1]-w[1]*D[0]!=0&&!(!Zs(f,u,d,v)||!Zs(d,v,f,u));var w,D}function qh(f,u,d){for(const v of d)for(let w=0;w<v.length-1;++w)if(sA(f,u,v[w],v[w+1]))return!0;return!1}function Lc(f,u,d=!1){let v=!1;for(const G of u)for(let Z=0;Z<G.length-1;Z++){if(gp(f,G[Z],G[Z+1]))return d;(D=G[Z])[1]>(w=f)[1]!=(F=G[Z+1])[1]>w[1]&&w[0]<(F[0]-D[0])*(w[1]-D[1])/(F[1]-D[1])+D[0]&&(v=!v)}var w,D,F;return v}function yp(f,u){for(const d of u)if(Lc(f,d))return!0;return!1}function Rf(f,u){for(const d of f)if(!Lc(d,u))return!1;for(let d=0;d<f.length-1;++d)if(qh(f[d],f[d+1],u))return!1;return!0}function dc(f,u){for(const d of u)if(Rf(f,d))return!0;return!1}function Zs(f,u,d,v){const w=v[0]-d[0],D=v[1]-d[1],F=(f[0]-d[0])*D-w*(f[1]-d[1]),G=(u[0]-d[0])*D-w*(u[1]-d[1]);return F>0&&G<0||F<0&&G>0}function xd(f,u,d){const v=[];for(let w=0;w<f.length;w++){const D=[];for(let F=0;F<f[w].length;F++){const G=bd(f[w][F],d);Du(u,G),D.push(G)}v.push(D)}return v}function ef(f,u,d){const v=[];for(let w=0;w<f.length;w++){const D=xd(f[w],u,d);v.push(D)}return v}function Ah(f,u,d,v){if(f[0]<d[0]||f[0]>d[2]){const w=.5*v;let D=f[0]-d[0]>w?-v:d[0]-f[0]>w?v:0;D===0&&(D=f[0]-d[2]>w?-v:d[2]-f[0]>w?v:0),f[0]+=D}Du(u,f)}function tf(f,u,d,v){const w=Math.pow(2,v.z)*Ku,D=[v.x*Ku,v.y*Ku],F=[];for(const G of f)for(const Z of G){const re=[Z.x+D[0],Z.y+D[1]];Ah(re,u,d,w),F.push(re)}return F}function ch(f,u,d,v){const w=Math.pow(2,v.z)*Ku,D=[v.x*Ku,v.y*Ku],F=[];for(const Z of f){const re=[];for(const Ae of Z){const _e=[Ae.x+D[0],Ae.y+D[1]];Du(u,_e),re.push(_e)}F.push(re)}if(u[2]-u[0]<=w/2){(G=u)[0]=G[1]=1/0,G[2]=G[3]=-1/0;for(const Z of F)for(const re of Z)Ah(re,u,d,w)}var G;return F}class fc{constructor(u,d){this.type=Dn,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(zl(u[1])){const v=u[1];if(v.type==="FeatureCollection"){const w=[];for(const D of v.features){const{type:F,coordinates:G}=D.geometry;F==="Polygon"&&w.push(G),F==="MultiPolygon"&&w.push(...G)}if(w.length)return new fc(v,{type:"MultiPolygon",coordinates:w})}else if(v.type==="Feature"){const w=v.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new fc(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new fc(v,v)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(d,v){const w=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(v.type==="Polygon"){const G=xd(v.coordinates,D,F),Z=tf(d.geometry(),w,D,F);if(!uh(w,D))return!1;for(const re of Z)if(!Lc(re,G))return!1}if(v.type==="MultiPolygon"){const G=ef(v.coordinates,D,F),Z=tf(d.geometry(),w,D,F);if(!uh(w,D))return!1;for(const re of Z)if(!yp(re,G))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(d,v){const w=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(v.type==="Polygon"){const G=xd(v.coordinates,D,F),Z=ch(d.geometry(),w,D,F);if(!uh(w,D))return!1;for(const re of Z)if(!Rf(re,G))return!1}if(v.type==="MultiPolygon"){const G=ef(v.coordinates,D,F),Z=ch(d.geometry(),w,D,F);if(!uh(w,D))return!1;for(const re of Z)if(!dc(re,G))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let wd=class{constructor(f=[],u=(d,v)=>d<v?-1:d>v?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:d}=this,v=u[f];for(;f>0;){const w=f-1>>1,D=u[w];if(d(v,D)>=0)break;u[f]=D,f=w}u[f]=v}_down(f){const{data:u,compare:d}=this,v=this.length>>1,w=u[f];for(;f<v;){let D=1+(f<<1);const F=D+1;if(F<this.length&&d(u[F],u[D])<0&&(D=F),d(u[D],w)>=0)break;u[f]=u[D],f=D}u[f]=w}};function Md(f,u,d=0,v=f.length-1,w=am){for(;v>d;){if(v-d>600){const Z=v-d+1,re=u-d+1,Ae=Math.log(Z),_e=.5*Math.exp(2*Ae/3),Re=.5*Math.sqrt(Ae*_e*(Z-_e)/Z)*(re-Z/2<0?-1:1);Md(f,u,Math.max(d,Math.floor(u-re*_e/Z+Re)),Math.min(v,Math.floor(u+(Z-re)*_e/Z+Re)),w)}const D=f[u];let F=d,G=v;for(hh(f,d,u),w(f[v],D)>0&&hh(f,d,v);F<G;){for(hh(f,F,G),F++,G--;w(f[F],D)<0;)F++;for(;w(f[G],D)>0;)G--}w(f[d],D)===0?hh(f,d,G):(G++,hh(f,G,v)),G<=u&&(d=G+1),u<=G&&(v=G-1)}}function hh(f,u,d){const v=f[u];f[u]=f[d],f[d]=v}function am(f,u){return f<u?-1:f>u?1:0}function Fc(f,u){if(f.length<=1)return[f];const d=[];let v,w;for(const D of f){const F=Sd(D);F!==0&&(D.area=Math.abs(F),w===void 0&&(w=F<0),w===F<0?(v&&d.push(v),v=[D]):v.push(D))}if(v&&d.push(v),u>1)for(let D=0;D<d.length;D++)d[D].length<=u||(Md(d[D],u,1,d[D].length-1,pu),d[D]=d[D].slice(0,u));return d}function pu(f,u){return u.area-f.area}function Sd(f){let u=0;for(let d,v,w=0,D=f.length,F=D-1;w<D;F=w++)d=f[w],v=f[F],u+=(v.x-d.x)*(d.y+v.y);return u}const mu=1/298.257223563,aA=mu*(2-mu),Uc=Math.PI/180;class Yh{constructor(u){const d=6378.137*Uc*1e3,v=Math.cos(u*Uc),w=1/(1-aA*(1-v*v)),D=Math.sqrt(w);this.kx=d*D*v,this.ky=d*D*w*(1-aA)}distance(u,d){const v=this.wrap(u[0]-d[0])*this.kx,w=(u[1]-d[1])*this.ky;return Math.sqrt(v*v+w*w)}pointOnLine(u,d){let v,w,D,F,G=1/0;for(let Z=0;Z<u.length-1;Z++){let re=u[Z][0],Ae=u[Z][1],_e=this.wrap(u[Z+1][0]-re)*this.kx,Re=(u[Z+1][1]-Ae)*this.ky,Le=0;_e===0&&Re===0||(Le=(this.wrap(d[0]-re)*this.kx*_e+(d[1]-Ae)*this.ky*Re)/(_e*_e+Re*Re),Le>1?(re=u[Z+1][0],Ae=u[Z+1][1]):Le>0&&(re+=_e/this.kx*Le,Ae+=Re/this.ky*Le)),_e=this.wrap(d[0]-re)*this.kx,Re=(d[1]-Ae)*this.ky;const je=_e*_e+Re*Re;je<G&&(G=je,v=re,w=Ae,D=Z,F=Le)}return{point:[v,w],index:D,t:Math.max(0,Math.min(1,F))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function nf(f,u){return u[0]-f[0]}function iu(f){return f[1]-f[0]+1}function Bl(f,u){return f[1]>=f[0]&&f[1]<u}function WA(f,u){if(f[0]>f[1])return[null,null];const d=iu(f);if(u){if(d===2)return[f,null];const w=Math.floor(d/2);return[[f[0],f[0]+w],[f[0]+w,f[1]]]}if(d===1)return[f,null];const v=Math.floor(d/2)-1;return[[f[0],f[0]+v],[f[0]+v+1,f[1]]]}function zc(f,u){if(!Bl(u,f.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let v=u[0];v<=u[1];++v)Du(d,f[v]);return d}function rf(f){const u=[1/0,1/0,-1/0,-1/0];for(const d of f)for(const v of d)Du(u,v);return u}function Kf(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function dh(f,u,d){if(!Kf(f)||!Kf(u))return NaN;let v=0,w=0;return f[2]<u[0]&&(v=u[0]-f[2]),f[0]>u[2]&&(v=f[0]-u[2]),f[1]>u[3]&&(w=f[1]-u[3]),f[3]<u[1]&&(w=u[1]-f[3]),d.distance([0,0],[v,w])}function _A(f,u,d){const v=d.pointOnLine(u,f);return d.distance(f,v.point)}function Ja(f,u,d,v,w){const D=Math.min(_A(f,[d,v],w),_A(u,[d,v],w)),F=Math.min(_A(d,[f,u],w),_A(v,[f,u],w));return Math.min(D,F)}function Ol(f,u,d,v,w){if(!Bl(u,f.length)||!Bl(v,d.length))return 1/0;let D=1/0;for(let F=u[0];F<u[1];++F){const G=f[F],Z=f[F+1];for(let re=v[0];re<v[1];++re){const Ae=d[re],_e=d[re+1];if(sA(G,Z,Ae,_e))return 0;D=Math.min(D,Ja(G,Z,Ae,_e,w))}}return D}function Yo(f,u,d,v,w){if(!Bl(u,f.length)||!Bl(v,d.length))return NaN;let D=1/0;for(let F=u[0];F<=u[1];++F)for(let G=v[0];G<=v[1];++G)if(D=Math.min(D,w.distance(f[F],d[G])),D===0)return D;return D}function Ed(f,u,d){if(Lc(f,u,!0))return 0;let v=1/0;for(const w of u){const D=w[0],F=w[w.length-1];if(D!==F&&(v=Math.min(v,_A(f,[F,D],d)),v===0))return v;const G=d.pointOnLine(w,f);if(v=Math.min(v,d.distance(f,G.point)),v===0)return v}return v}function lm(f,u,d,v){if(!Bl(u,f.length))return NaN;for(let D=u[0];D<=u[1];++D)if(Lc(f[D],d,!0))return 0;let w=1/0;for(let D=u[0];D<u[1];++D){const F=f[D],G=f[D+1];for(const Z of d)for(let re=0,Ae=Z.length,_e=Ae-1;re<Ae;_e=re++){const Re=Z[_e],Le=Z[re];if(sA(F,G,Re,Le))return 0;w=Math.min(w,Ja(F,G,Re,Le,v))}}return w}function jc(f,u){for(const d of f)for(const v of d)if(Lc(v,u,!0))return!0;return!1}function Lu(f,u,d,v=1/0){const w=rf(f),D=rf(u);if(v!==1/0&&dh(w,D,d)>=v)return v;if(uh(w,D)){if(jc(f,u))return 0}else if(jc(u,f))return 0;let F=1/0;for(const G of f)for(let Z=0,re=G.length,Ae=re-1;Z<re;Ae=Z++){const _e=G[Ae],Re=G[Z];for(const Le of u)for(let je=0,He=Le.length,at=He-1;je<He;at=je++){const vt=Le[at],jt=Le[je];if(sA(_e,Re,vt,jt))return 0;F=Math.min(F,Ja(_e,Re,vt,jt,d))}}return F}function $h(f,u,d,v,w,D){if(!D)return;const F=dh(zc(v,D),w,d);F<u&&f.push([F,D,[0,0]])}function Vh(f,u,d,v,w,D,F){if(!D||!F)return;const G=dh(zc(v,D),zc(w,F),d);G<u&&f.push([G,D,F])}function pc(f,u,d,v,w=1/0){let D=Math.min(v.distance(f[0],d[0][0]),w);if(D===0)return D;const F=new wd([[0,[0,f.length-1],[0,0]]],nf),G=rf(d);for(;F.length>0;){const Z=F.pop();if(Z[0]>=D)continue;const re=Z[1],Ae=u?50:100;if(iu(re)<=Ae){if(!Bl(re,f.length))return NaN;if(u){const _e=lm(f,re,d,v);if(isNaN(_e)||_e===0)return _e;D=Math.min(D,_e)}else for(let _e=re[0];_e<=re[1];++_e){const Re=Ed(f[_e],d,v);if(D=Math.min(D,Re),D===0)return 0}}else{const _e=WA(re,u);$h(F,D,v,f,G,_e[0]),$h(F,D,v,f,G,_e[1])}}return D}function Hh(f,u,d,v,w,D=1/0){let F=Math.min(D,w.distance(f[0],d[0]));if(F===0)return F;const G=new wd([[0,[0,f.length-1],[0,d.length-1]]],nf);for(;G.length>0;){const Z=G.pop();if(Z[0]>=F)continue;const re=Z[1],Ae=Z[2],_e=u?50:100,Re=v?50:100;if(iu(re)<=_e&&iu(Ae)<=Re){if(!Bl(re,f.length)&&Bl(Ae,d.length))return NaN;let Le;if(u&&v)Le=Ol(f,re,d,Ae,w),F=Math.min(F,Le);else if(u&&!v){const je=f.slice(re[0],re[1]+1);for(let He=Ae[0];He<=Ae[1];++He)if(Le=_A(d[He],je,w),F=Math.min(F,Le),F===0)return F}else if(!u&&v){const je=d.slice(Ae[0],Ae[1]+1);for(let He=re[0];He<=re[1];++He)if(Le=_A(f[He],je,w),F=Math.min(F,Le),F===0)return F}else Le=Yo(f,re,d,Ae,w),F=Math.min(F,Le)}else{const Le=WA(re,u),je=WA(Ae,v);Vh(G,F,w,f,d,Le[0],je[0]),Vh(G,F,w,f,d,Le[0],je[1]),Vh(G,F,w,f,d,Le[1],je[0]),Vh(G,F,w,f,d,Le[1],je[1])}}return F}function of(f){return f.type==="MultiPolygon"?f.coordinates.map(u=>({type:"Polygon",coordinates:u})):f.type==="MultiLineString"?f.coordinates.map(u=>({type:"LineString",coordinates:u})):f.type==="MultiPoint"?f.coordinates.map(u=>({type:"Point",coordinates:u})):[f]}class mc{constructor(u,d){this.type=on,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(zl(u[1])){const v=u[1];if(v.type==="FeatureCollection")return new mc(v,v.features.map(w=>of(w.geometry)).flat());if(v.type==="Feature")return new mc(v,of(v.geometry));if("type"in v&&"coordinates"in v)return new mc(v,of(v))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(d,v){const w=d.geometry(),D=w.flat().map(Z=>Ms([Z.x,Z.y],d.canonical));if(w.length===0)return NaN;const F=new Yh(D[0][1]);let G=1/0;for(const Z of v){switch(Z.type){case"Point":G=Math.min(G,Hh(D,!1,[Z.coordinates],!1,F,G));break;case"LineString":G=Math.min(G,Hh(D,!1,Z.coordinates,!0,F,G));break;case"Polygon":G=Math.min(G,pc(D,!1,Z.coordinates,F,G))}if(G===0)return G}return G}(u,this.geometries);if(u.geometryType()==="LineString")return function(d,v){const w=d.geometry(),D=w.flat().map(Z=>Ms([Z.x,Z.y],d.canonical));if(w.length===0)return NaN;const F=new Yh(D[0][1]);let G=1/0;for(const Z of v){switch(Z.type){case"Point":G=Math.min(G,Hh(D,!0,[Z.coordinates],!1,F,G));break;case"LineString":G=Math.min(G,Hh(D,!0,Z.coordinates,!0,F,G));break;case"Polygon":G=Math.min(G,pc(D,!0,Z.coordinates,F,G))}if(G===0)return G}return G}(u,this.geometries);if(u.geometryType()==="Polygon")return function(d,v){const w=d.geometry();if(w.length===0||w[0].length===0)return NaN;const D=Fc(w,0).map(Z=>Z.map(re=>re.map(Ae=>Ms([Ae.x,Ae.y],d.canonical)))),F=new Yh(D[0][0][0][1]);let G=1/0;for(const Z of v)for(const re of D){switch(Z.type){case"Point":G=Math.min(G,pc([Z.coordinates],!1,re,F,G));break;case"LineString":G=Math.min(G,pc(Z.coordinates,!0,re,F,G));break;case"Polygon":G=Math.min(G,Lu(re,Z.coordinates,F,G))}if(G===0)return G}return G}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const gu={"==":Xi,"!=":us,">":La,"<":ya,">=":Hs,"<=":fu,array:ws,at:Jr,boolean:ws,case:Pi,coalesce:So,collator:hc,format:cl,image:lh,in:ru,"index-of":Gi,interpolate:pr,"interpolate-hcl":pr,"interpolate-lab":pr,length:Ru,let:nu,literal:fo,match:lo,number:ws,"number-format":Sa,object:ws,slice:ee,step:tt,string:ws,"to-boolean":Rs,"to-color":Rs,"to-number":Rs,"to-string":Rs,var:Fi,within:fc,distance:mc};class Vt{constructor(u,d,v,w){this.name=u,this.type=d,this._evaluate=v,this.args=w}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,d){const v=u[0],w=Vt.definitions[v];if(!w)return d.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const D=Array.isArray(w)?w[0]:w.type,F=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,G=F.filter(([re])=>!Array.isArray(re)||re.length===u.length-1);let Z=null;for(const[re,Ae]of G){Z=new Hi(d.registry,Co,d.path,null,d.scope);const _e=[];let Re=!1;for(let Le=1;Le<u.length;Le++){const je=u[Le],He=Array.isArray(re)?re[Le-1]:re.type,at=Z.parse(je,1+_e.length,He);if(!at){Re=!0;break}_e.push(at)}if(!Re)if(Array.isArray(re)&&re.length!==_e.length)Z.error(`Expected ${re.length} arguments, but found ${_e.length} instead.`);else{for(let Le=0;Le<_e.length;Le++){const je=Array.isArray(re)?re[Le]:re.type,He=_e[Le];Z.concat(Le+1).checkSubtype(je,He.type)}if(Z.errors.length===0)return new Vt(v,D,Ae,_e)}}if(G.length===1)d.errors.push(...Z.errors);else{const re=(G.length?G:F).map(([_e])=>{return Re=_e,Array.isArray(Re)?`(${Re.map(Ni).join(", ")})`:`(${Ni(Re.type)}...)`;var Re}).join(" | "),Ae=[];for(let _e=1;_e<u.length;_e++){const Re=d.parse(u[_e],1+Ae.length);if(!Re)return null;Ae.push(Ni(Re.type))}d.error(`Expected arguments of type ${re}, but found (${Ae.join(", ")}) instead.`)}return null}static register(u,d){Vt.definitions=d;for(const v in d)u[v]=Vt}}function Tn(f,[u,d,v,w]){u=u.evaluate(f),d=d.evaluate(f),v=v.evaluate(f);const D=w?w.evaluate(f):1,F=du(u,d,v,D);if(F)throw new Ei(F);return new ci(u/255,d/255,v/255,D,!1)}function an(f,u){return f in u}function Fr(f,u){const d=u[f];return d===void 0?null:d}function _i(f){return{type:f}}function Co(f){if(f instanceof Fi)return Co(f.boundExpression);if(f instanceof Vt&&f.name==="error"||f instanceof hc||f instanceof fc||f instanceof mc)return!1;const u=f instanceof Rs||f instanceof ws;let d=!0;return f.eachChild(v=>{d=u?d&&Co(v):d&&v instanceof fo}),!!d&&oa(f)&&QA(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function oa(f){if(f instanceof Vt&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof fc||f instanceof mc)return!1;let u=!0;return f.eachChild(d=>{u&&!oa(d)&&(u=!1)}),u}function $o(f){if(f instanceof Vt&&f.name==="feature-state")return!1;let u=!0;return f.eachChild(d=>{u&&!$o(d)&&(u=!1)}),u}function QA(f,u){if(f instanceof Vt&&u.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild(v=>{d&&!QA(v,u)&&(d=!1)}),d}function vp(f){return{result:"success",value:f}}function Il(f){return{result:"error",value:f}}function yu(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function qA(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function kl(f){return!!f.expression&&f.expression.interpolated}function Wi(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function YA(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function Fo(f){return f}function Nc(f,u){const d=u.type==="color",v=f.stops&&typeof f.stops[0][0]=="object",w=v||!(v||f.property!==void 0),D=f.type||(kl(u)?"exponential":"interval");if(d||u.type==="padding"){const Ae=d?ci.parse:Dr.parse;(f=Pn({},f)).stops&&(f.stops=f.stops.map(_e=>[_e[0],Ae(_e[1])])),f.default=Ae(f.default?f.default:u.default)}if(f.colorSpace&&(F=f.colorSpace)!=="rgb"&&F!=="hcl"&&F!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var F;let G,Z,re;if(D==="exponential")G=Tl;else if(D==="interval")G=lA;else if(D==="categorical"){G=CA,Z=Object.create(null);for(const Ae of f.stops)Z[Ae[0]]=Ae[1];re=typeof f.stops[0][0]}else{if(D!=="identity")throw new Error(`Unknown function type "${D}"`);G=gc}if(v){const Ae={},_e=[];for(let je=0;je<f.stops.length;je++){const He=f.stops[je],at=He[0].zoom;Ae[at]===void 0&&(Ae[at]={zoom:at,type:f.type,property:f.property,default:f.default,stops:[]},_e.push(at)),Ae[at].stops.push([He[0].value,He[1]])}const Re=[];for(const je of _e)Re.push([Ae[je].zoom,Nc(Ae[je],u)]);const Le={name:"linear"};return{kind:"composite",interpolationType:Le,interpolationFactor:pr.interpolationFactor.bind(void 0,Le),zoomStops:Re.map(je=>je[0]),evaluate:({zoom:je},He)=>Tl({stops:Re,base:f.base},u,je).evaluate(je,He)}}if(w){const Ae=D==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:Ae,interpolationFactor:pr.interpolationFactor.bind(void 0,Ae),zoomStops:f.stops.map(_e=>_e[0]),evaluate:({zoom:_e})=>G(f,u,_e,Z,re)}}return{kind:"source",evaluate(Ae,_e){const Re=_e&&_e.properties?_e.properties[f.property]:void 0;return Re===void 0?$A(f.default,u.default):G(f,u,Re,Z,re)}}}function $A(f,u,d){return f!==void 0?f:u!==void 0?u:d!==void 0?d:void 0}function CA(f,u,d,v,w){return $A(typeof d===w?v[d]:void 0,f.default,u.default)}function lA(f,u,d){if(Wi(d)!=="number")return $A(f.default,u.default);const v=f.stops.length;if(v===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[v-1][0])return f.stops[v-1][1];const w=Se(f.stops.map(D=>D[0]),d);return f.stops[w][1]}function Tl(f,u,d){const v=f.base!==void 0?f.base:1;if(Wi(d)!=="number")return $A(f.default,u.default);const w=f.stops.length;if(w===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[w-1][0])return f.stops[w-1][1];const D=Se(f.stops.map(Ae=>Ae[0]),d),F=function(Ae,_e,Re,Le){const je=Le-Re,He=Ae-Re;return je===0?0:_e===1?He/je:(Math.pow(_e,He)-1)/(Math.pow(_e,je)-1)}(d,v,f.stops[D][0],f.stops[D+1][0]),G=f.stops[D][1],Z=f.stops[D+1][1],re=vi[u.type]||Fo;return typeof G.evaluate=="function"?{evaluate(...Ae){const _e=G.evaluate.apply(void 0,Ae),Re=Z.evaluate.apply(void 0,Ae);if(_e!==void 0&&Re!==void 0)return re(_e,Re,F,f.colorSpace)}}:re(G,Z,F,f.colorSpace)}function gc(f,u,d){switch(u.type){case"color":d=ci.parse(d);break;case"formatted":d=ls.fromString(d.toString());break;case"resolvedImage":d=Mo.fromString(d.toString());break;case"padding":d=Dr.parse(d);break;default:Wi(d)===u.type||u.type==="enum"&&u.values[d]||(d=void 0)}return $A(d,f.default,u.default)}Vt.register(gu,{error:[{kind:"error"},[zn],(f,[u])=>{throw new Ei(u.evaluate(f))}],typeof:[zn,[rr],(f,[u])=>Ni(ns(u.evaluate(f)))],"to-rgba":[as(on,4),[Br],(f,[u])=>{const[d,v,w,D]=u.evaluate(f).rgb;return[255*d,255*v,255*w,D]}],rgb:[Br,[on,on,on],Tn],rgba:[Br,[on,on,on,on],Tn],has:{type:Dn,overloads:[[[zn],(f,[u])=>an(u.evaluate(f),f.properties())],[[zn,Rr],(f,[u,d])=>an(u.evaluate(f),d.evaluate(f))]]},get:{type:rr,overloads:[[[zn],(f,[u])=>Fr(u.evaluate(f),f.properties())],[[zn,Rr],(f,[u,d])=>Fr(u.evaluate(f),d.evaluate(f))]]},"feature-state":[rr,[zn],(f,[u])=>Fr(u.evaluate(f),f.featureState||{})],properties:[Rr,[],f=>f.properties()],"geometry-type":[zn,[],f=>f.geometryType()],id:[rr,[],f=>f.id()],zoom:[on,[],f=>f.globals.zoom],"heatmap-density":[on,[],f=>f.globals.heatmapDensity||0],"line-progress":[on,[],f=>f.globals.lineProgress||0],accumulated:[rr,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[on,_i(on),(f,u)=>{let d=0;for(const v of u)d+=v.evaluate(f);return d}],"*":[on,_i(on),(f,u)=>{let d=1;for(const v of u)d*=v.evaluate(f);return d}],"-":{type:on,overloads:[[[on,on],(f,[u,d])=>u.evaluate(f)-d.evaluate(f)],[[on],(f,[u])=>-u.evaluate(f)]]},"/":[on,[on,on],(f,[u,d])=>u.evaluate(f)/d.evaluate(f)],"%":[on,[on,on],(f,[u,d])=>u.evaluate(f)%d.evaluate(f)],ln2:[on,[],()=>Math.LN2],pi:[on,[],()=>Math.PI],e:[on,[],()=>Math.E],"^":[on,[on,on],(f,[u,d])=>Math.pow(u.evaluate(f),d.evaluate(f))],sqrt:[on,[on],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[on,[on],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[on,[on],(f,[u])=>Math.log(u.evaluate(f))],log2:[on,[on],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[on,[on],(f,[u])=>Math.sin(u.evaluate(f))],cos:[on,[on],(f,[u])=>Math.cos(u.evaluate(f))],tan:[on,[on],(f,[u])=>Math.tan(u.evaluate(f))],asin:[on,[on],(f,[u])=>Math.asin(u.evaluate(f))],acos:[on,[on],(f,[u])=>Math.acos(u.evaluate(f))],atan:[on,[on],(f,[u])=>Math.atan(u.evaluate(f))],min:[on,_i(on),(f,u)=>Math.min(...u.map(d=>d.evaluate(f)))],max:[on,_i(on),(f,u)=>Math.max(...u.map(d=>d.evaluate(f)))],abs:[on,[on],(f,[u])=>Math.abs(u.evaluate(f))],round:[on,[on],(f,[u])=>{const d=u.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[on,[on],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[on,[on],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[Dn,[zn,rr],(f,[u,d])=>f.properties()[u.value]===d.value],"filter-id-==":[Dn,[rr],(f,[u])=>f.id()===u.value],"filter-type-==":[Dn,[zn],(f,[u])=>f.geometryType()===u.value],"filter-<":[Dn,[zn,rr],(f,[u,d])=>{const v=f.properties()[u.value],w=d.value;return typeof v==typeof w&&v<w}],"filter-id-<":[Dn,[rr],(f,[u])=>{const d=f.id(),v=u.value;return typeof d==typeof v&&d<v}],"filter->":[Dn,[zn,rr],(f,[u,d])=>{const v=f.properties()[u.value],w=d.value;return typeof v==typeof w&&v>w}],"filter-id->":[Dn,[rr],(f,[u])=>{const d=f.id(),v=u.value;return typeof d==typeof v&&d>v}],"filter-<=":[Dn,[zn,rr],(f,[u,d])=>{const v=f.properties()[u.value],w=d.value;return typeof v==typeof w&&v<=w}],"filter-id-<=":[Dn,[rr],(f,[u])=>{const d=f.id(),v=u.value;return typeof d==typeof v&&d<=v}],"filter->=":[Dn,[zn,rr],(f,[u,d])=>{const v=f.properties()[u.value],w=d.value;return typeof v==typeof w&&v>=w}],"filter-id->=":[Dn,[rr],(f,[u])=>{const d=f.id(),v=u.value;return typeof d==typeof v&&d>=v}],"filter-has":[Dn,[rr],(f,[u])=>u.value in f.properties()],"filter-has-id":[Dn,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Dn,[as(zn)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[Dn,[as(rr)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[Dn,[zn,as(rr)],(f,[u,d])=>d.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[Dn,[zn,as(rr)],(f,[u,d])=>function(v,w,D,F){for(;D<=F;){const G=D+F>>1;if(w[G]===v)return!0;w[G]>v?F=G-1:D=G+1}return!1}(f.properties()[u.value],d.value,0,d.value.length-1)],all:{type:Dn,overloads:[[[Dn,Dn],(f,[u,d])=>u.evaluate(f)&&d.evaluate(f)],[_i(Dn),(f,u)=>{for(const d of u)if(!d.evaluate(f))return!1;return!0}]]},any:{type:Dn,overloads:[[[Dn,Dn],(f,[u,d])=>u.evaluate(f)||d.evaluate(f)],[_i(Dn),(f,u)=>{for(const d of u)if(d.evaluate(f))return!0;return!1}]]},"!":[Dn,[Dn],(f,[u])=>!u.evaluate(f)],"is-supported-script":[Dn,[zn],(f,[u])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(u.evaluate(f))}],upcase:[zn,[zn],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[zn,[zn],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[zn,_i(rr),(f,u)=>u.map(d=>Vs(d.evaluate(f))).join("")],"resolved-locale":[zn,[co],(f,[u])=>u.evaluate(f).resolvedLocale()]});class vu{constructor(u,d){var v;this.expression=u,this._warningHistory={},this._evaluator=new oA,this._defaultValue=d?(v=d).type==="color"&&YA(v.default)?new ci(0,0,0,0):v.type==="color"?ci.parse(v.default)||null:v.type==="padding"?Dr.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?Ps.parse(v.default)||null:v.type==="projectionDefinition"?Ns.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(u,d,v,w,D,F){return this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=v,this._evaluator.canonical=w,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)}evaluate(u,d,v,w,D,F){this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=v||null,this._evaluator.canonical=w,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=F||null;try{const G=this.expression.evaluate(this._evaluator);if(G==null||typeof G=="number"&&G!=G)return this._defaultValue;if(this._enumValues&&!(G in this._enumValues))throw new Ei(`Expected value to be one of ${Object.keys(this._enumValues).map(Z=>JSON.stringify(Z)).join(", ")}, but found ${JSON.stringify(G)} instead.`);return G}catch(G){return this._warningHistory[G.message]||(this._warningHistory[G.message]=!0,typeof console<"u"&&console.warn(G.message)),this._defaultValue}}}function jl(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in gu}function Gc(f,u){const d=new Hi(gu,Co,[],u?function(w){const D={color:Br,string:zn,number:on,enum:zn,boolean:Dn,formatted:$a,padding:ji,projectionDefinition:xr,resolvedImage:ui,variableAnchorOffsetCollection:Vi};return w.type==="array"?as(D[w.value]||rr,w.length):D[w.type]}(u):void 0),v=d.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?vp(new vu(v,u)):Il(d.errors)}class Zh{constructor(u,d){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!$o(d.expression)}evaluateWithoutErrorHandling(u,d,v,w,D,F){return this._styleExpression.evaluateWithoutErrorHandling(u,d,v,w,D,F)}evaluate(u,d,v,w,D,F){return this._styleExpression.evaluate(u,d,v,w,D,F)}}class Fa{constructor(u,d,v,w){this.kind=u,this.zoomStops=v,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!$o(d.expression),this.interpolationType=w}evaluateWithoutErrorHandling(u,d,v,w,D,F){return this._styleExpression.evaluateWithoutErrorHandling(u,d,v,w,D,F)}evaluate(u,d,v,w,D,F){return this._styleExpression.evaluate(u,d,v,w,D,F)}interpolationFactor(u,d,v){return this.interpolationType?pr.interpolationFactor(this.interpolationType,u,d,v):0}}function fh(f,u){const d=Gc(f,u);if(d.result==="error")return d;const v=d.value.expression,w=oa(v);if(!w&&!yu(u))return Il([new En("","data expressions not supported")]);const D=QA(v,["zoom"]);if(!D&&!qA(u))return Il([new En("","zoom expressions not supported")]);const F=VA(v);return F||D?F instanceof En?Il([F]):F instanceof pr&&!kl(u)?Il([new En("",'"interpolate" expressions cannot be used with this property')]):vp(F?new Fa(w?"camera":"composite",d.value,F.labels,F instanceof pr?F.interpolation:void 0):new Zh(w?"constant":"source",d.value)):Il([new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yc{constructor(u,d){this._parameters=u,this._specification=d,Pn(this,Nc(this._parameters,this._specification))}static deserialize(u){return new yc(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function VA(f){let u=null;if(f instanceof nu)u=VA(f.result);else if(f instanceof So){for(const d of f.args)if(u=VA(d),u)break}else(f instanceof tt||f instanceof pr)&&f.input instanceof Vt&&f.input.name==="zoom"&&(u=f);return u instanceof En||f.eachChild(d=>{const v=VA(d);v instanceof En?u=v:!u&&v?u=new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&v&&u!==v&&(u=new En("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function sf(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!sf(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const bA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function HA(f){if(f==null)return{filter:()=>!0,needGeometry:!1};sf(f)||(f=Vo(f));const u=Gc(f,bA);if(u.result==="error")throw new Error(u.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,v,w)=>u.value.evaluate(d,v,{},w),needGeometry:Xh(f)}}function Wc(f,u){return f<u?-1:f>u?1:0}function Xh(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(Xh(f[u]))return!0;return!1}function Vo(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?Qc(f[1],f[2],"=="):u==="!="?qc(Qc(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Qc(f[1],f[2],u):u==="any"?(d=f.slice(1),["any"].concat(d.map(Vo))):u==="all"?["all"].concat(f.slice(1).map(Vo)):u==="none"?["all"].concat(f.slice(1).map(Vo).map(qc)):u==="in"?ZA(f[1],f.slice(2)):u==="!in"?qc(ZA(f[1],f.slice(2))):u==="has"?Fu(f[1]):u!=="!has"||qc(Fu(f[1]));var d}function Qc(f,u,d){switch(f){case"$type":return[`filter-type-${d}`,u];case"$id":return[`filter-id-${d}`,u];default:return[`filter-${d}`,f,u]}}function ZA(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(d=>typeof d!=typeof u[0])?["filter-in-large",f,["literal",u.sort(Wc)]]:["filter-in-small",f,["literal",u]]}}function Fu(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function qc(f){return["!",f]}function Jh(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let w="[";for(const D of f)w+=`${Jh(D)},`;return`${w}]`}const d=Object.keys(f).sort();let v="{";for(let w=0;w<d.length;w++)v+=`${JSON.stringify(d[w])}:${Jh(f[d[w]])},`;return`${v}}`}function Yc(f){let u="";for(const d of fe)u+=`/${Jh(f[d])}`;return u}function vc(f){const u=f.value;return u?[new bt(f.key,u,"constants have been deprecated as of v8")]:[]}function As(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Uo(f){if(Array.isArray(f))return f.map(Uo);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const d in f)u[d]=Uo(f[d]);return u}return As(f)}function cs(f){const u=f.key,d=f.value,v=f.valueSpec||{},w=f.objectElementValidators||{},D=f.style,F=f.styleSpec,G=f.validateSpec;let Z=[];const re=Wi(d);if(re!=="object")return[new bt(u,d,`object expected, ${re} found`)];for(const Ae in d){const _e=Ae.split(".")[0],Re=v[_e]||v["*"];let Le;if(w[_e])Le=w[_e];else if(v[_e])Le=G;else if(w["*"])Le=w["*"];else{if(!v["*"]){Z.push(new bt(u,d[Ae],`unknown property "${Ae}"`));continue}Le=G}Z=Z.concat(Le({key:(u&&`${u}.`)+Ae,value:d[Ae],valueSpec:Re,style:D,styleSpec:F,object:d,objectKey:Ae,validateSpec:G},d))}for(const Ae in v)w[Ae]||v[Ae].required&&v[Ae].default===void 0&&d[Ae]===void 0&&Z.push(new bt(u,d,`missing required property "${Ae}"`));return Z}function Df(f){const u=f.value,d=f.valueSpec,v=f.style,w=f.styleSpec,D=f.key,F=f.arrayElementValidator||f.validateSpec;if(Wi(u)!=="array")return[new bt(D,u,`array expected, ${Wi(u)} found`)];if(d.length&&u.length!==d.length)return[new bt(D,u,`array length ${d.length} expected, length ${u.length} found`)];if(d["min-length"]&&u.length<d["min-length"])return[new bt(D,u,`array length at least ${d["min-length"]} expected, length ${u.length} found`)];let G={type:d.value,values:d.values};w.$version<7&&(G.function=d.function),Wi(d.value)==="object"&&(G=d.value);let Z=[];for(let re=0;re<u.length;re++)Z=Z.concat(F({array:u,arrayIndex:re,value:u[re],valueSpec:G,validateSpec:f.validateSpec,style:v,styleSpec:w,key:`${D}[${re}]`}));return Z}function ph(f){const u=f.key,d=f.value,v=f.valueSpec;let w=Wi(d);return w==="number"&&d!=d&&(w="NaN"),w!=="number"?[new bt(u,d,`number expected, ${w} found`)]:"minimum"in v&&d<v.minimum?[new bt(u,d,`${d} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&d>v.maximum?[new bt(u,d,`${d} is greater than the maximum value ${v.maximum}`)]:[]}function mh(f){const u=f.valueSpec,d=As(f.value.type);let v,w,D,F={};const G=d!=="categorical"&&f.value.property===void 0,Z=!G,re=Wi(f.value.stops)==="array"&&Wi(f.value.stops[0])==="array"&&Wi(f.value.stops[0][0])==="object",Ae=cs({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(Le){if(d==="identity")return[new bt(Le.key,Le.value,'identity function may not have a "stops" property')];let je=[];const He=Le.value;return je=je.concat(Df({key:Le.key,value:He,valueSpec:Le.valueSpec,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec,arrayElementValidator:_e})),Wi(He)==="array"&&He.length===0&&je.push(new bt(Le.key,He,"array must have at least one stop")),je},default:function(Le){return Le.validateSpec({key:Le.key,value:Le.value,valueSpec:u,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec})}}});return d==="identity"&&G&&Ae.push(new bt(f.key,f.value,'missing required property "property"')),d==="identity"||f.value.stops||Ae.push(new bt(f.key,f.value,'missing required property "stops"')),d==="exponential"&&f.valueSpec.expression&&!kl(f.valueSpec)&&Ae.push(new bt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(Z&&!yu(f.valueSpec)?Ae.push(new bt(f.key,f.value,"property functions not supported")):G&&!qA(f.valueSpec)&&Ae.push(new bt(f.key,f.value,"zoom functions not supported"))),d!=="categorical"&&!re||f.value.property!==void 0||Ae.push(new bt(f.key,f.value,'"property" property is required')),Ae;function _e(Le){let je=[];const He=Le.value,at=Le.key;if(Wi(He)!=="array")return[new bt(at,He,`array expected, ${Wi(He)} found`)];if(He.length!==2)return[new bt(at,He,`array length 2 expected, length ${He.length} found`)];if(re){if(Wi(He[0])!=="object")return[new bt(at,He,`object expected, ${Wi(He[0])} found`)];if(He[0].zoom===void 0)return[new bt(at,He,"object stop key must have zoom")];if(He[0].value===void 0)return[new bt(at,He,"object stop key must have value")];if(D&&D>As(He[0].zoom))return[new bt(at,He[0].zoom,"stop zoom values must appear in ascending order")];As(He[0].zoom)!==D&&(D=As(He[0].zoom),w=void 0,F={}),je=je.concat(cs({key:`${at}[0]`,value:He[0],valueSpec:{zoom:{}},validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec,objectElementValidators:{zoom:ph,value:Re}}))}else je=je.concat(Re({key:`${at}[0]`,value:He[0],valueSpec:{},validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec},He));return jl(Uo(He[1]))?je.concat([new bt(`${at}[1]`,He[1],"expressions are not allowed in function stops.")]):je.concat(Le.validateSpec({key:`${at}[1]`,value:He[1],valueSpec:u,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec}))}function Re(Le,je){const He=Wi(Le.value),at=As(Le.value),vt=Le.value!==null?Le.value:je;if(v){if(He!==v)return[new bt(Le.key,vt,`${He} stop domain type must match previous stop domain type ${v}`)]}else v=He;if(He!=="number"&&He!=="string"&&He!=="boolean")return[new bt(Le.key,vt,"stop domain value must be a number, string, or boolean")];if(He!=="number"&&d!=="categorical"){let jt=`number expected, ${He} found`;return yu(u)&&d===void 0&&(jt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new bt(Le.key,vt,jt)]}return d!=="categorical"||He!=="number"||isFinite(at)&&Math.floor(at)===at?d!=="categorical"&&He==="number"&&w!==void 0&&at<w?[new bt(Le.key,vt,"stop domain values must appear in ascending order")]:(w=at,d==="categorical"&&at in F?[new bt(Le.key,vt,"stop domain values must be unique")]:(F[at]=!0,[])):[new bt(Le.key,vt,`integer expected, found ${at}`)]}}function Uu(f){const u=(f.expressionContext==="property"?fh:Gc)(Uo(f.value),f.valueSpec);if(u.result==="error")return u.value.map(v=>new bt(`${f.key}${v.key}`,f.value,v.message));const d=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!d.outputDefined())return[new bt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!$o(d))return[new bt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!$o(d))return[new bt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!QA(d,["zoom","feature-state"]))return[new bt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!oa(d))return[new bt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function XA(f){const u=f.key,d=f.value,v=f.valueSpec,w=[];return Array.isArray(v.values)?v.values.indexOf(As(d))===-1&&w.push(new bt(u,d,`expected one of [${v.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(v.values).indexOf(As(d))===-1&&w.push(new bt(u,d,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(d)} found`)),w}function Nl(f){return sf(Uo(f.value))?Uu(Pn({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xA(f)}function xA(f){const u=f.value,d=f.key;if(Wi(u)!=="array")return[new bt(d,u,`array expected, ${Wi(u)} found`)];const v=f.styleSpec;let w,D=[];if(u.length<1)return[new bt(d,u,"filter array must have at least 1 element")];switch(D=D.concat(XA({key:`${d}[0]`,value:u[0],valueSpec:v.filter_operator,style:f.style,styleSpec:f.styleSpec})),As(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&As(u[1])==="$type"&&D.push(new bt(d,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&D.push(new bt(d,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(w=Wi(u[1]),w!=="string"&&D.push(new bt(`${d}[1]`,u[1],`string expected, ${w} found`)));for(let F=2;F<u.length;F++)w=Wi(u[F]),As(u[1])==="$type"?D=D.concat(XA({key:`${d}[${F}]`,value:u[F],valueSpec:v.geometry_type,style:f.style,styleSpec:f.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&D.push(new bt(`${d}[${F}]`,u[F],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let F=1;F<u.length;F++)D=D.concat(xA({key:`${d}[${F}]`,value:u[F],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":w=Wi(u[1]),u.length!==2?D.push(new bt(d,u,`filter array for "${u[0]}" operator must have 2 elements`)):w!=="string"&&D.push(new bt(`${d}[1]`,u[1],`string expected, ${w} found`))}return D}function hl(f,u){const d=f.key,v=f.validateSpec,w=f.style,D=f.styleSpec,F=f.value,G=f.objectKey,Z=D[`${u}_${f.layerType}`];if(!Z)return[];const re=G.match(/^(.*)-transition$/);if(u==="paint"&&re&&Z[re[1]]&&Z[re[1]].transition)return v({key:d,value:F,valueSpec:D.transition,style:w,styleSpec:D});const Ae=f.valueSpec||Z[G];if(!Ae)return[new bt(d,F,`unknown property "${G}"`)];let _e;if(Wi(F)==="string"&&yu(Ae)&&!Ae.tokens&&(_e=/^{([^}]+)}$/.exec(F)))return[new bt(d,F,`"${G}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(_e[1])} }\`.`)];const Re=[];return f.layerType==="symbol"&&(G==="text-field"&&w&&!w.glyphs&&Re.push(new bt(d,F,'use of "text-field" requires a style "glyphs" property')),G==="text-font"&&YA(Uo(F))&&As(F.type)==="identity"&&Re.push(new bt(d,F,'"text-font" does not support identity functions'))),Re.concat(v({key:f.key,value:F,valueSpec:Ae,style:w,styleSpec:D,expressionContext:"property",propertyType:u,propertyKey:G}))}function JA(f){return hl(f,"paint")}function zu(f){return hl(f,"layout")}function gh(f){let u=[];const d=f.value,v=f.key,w=f.style,D=f.styleSpec;d.type||d.ref||u.push(new bt(v,d,'either "type" or "ref" is required'));let F=As(d.type);const G=As(d.ref);if(d.id){const Z=As(d.id);for(let re=0;re<f.arrayIndex;re++){const Ae=w.layers[re];As(Ae.id)===Z&&u.push(new bt(v,d.id,`duplicate layer id "${d.id}", previously used at line ${Ae.id.__line__}`))}}if("ref"in d){let Z;["type","source","source-layer","filter","layout"].forEach(re=>{re in d&&u.push(new bt(v,d[re],`"${re}" is prohibited for ref layers`))}),w.layers.forEach(re=>{As(re.id)===G&&(Z=re)}),Z?Z.ref?u.push(new bt(v,d.ref,"ref cannot reference another ref layer")):F=As(Z.type):u.push(new bt(v,d.ref,`ref layer "${G}" not found`))}else if(F!=="background")if(d.source){const Z=w.sources&&w.sources[d.source],re=Z&&As(Z.type);Z?re==="vector"&&F==="raster"?u.push(new bt(v,d.source,`layer "${d.id}" requires a raster source`)):re!=="raster-dem"&&F==="hillshade"?u.push(new bt(v,d.source,`layer "${d.id}" requires a raster-dem source`)):re==="raster"&&F!=="raster"?u.push(new bt(v,d.source,`layer "${d.id}" requires a vector source`)):re!=="vector"||d["source-layer"]?re==="raster-dem"&&F!=="hillshade"?u.push(new bt(v,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="line"||!d.paint||!d.paint["line-gradient"]||re==="geojson"&&Z.lineMetrics||u.push(new bt(v,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new bt(v,d,`layer "${d.id}" must specify a "source-layer"`)):u.push(new bt(v,d.source,`source "${d.source}" not found`))}else u.push(new bt(v,d,'missing required property "source"'));return u=u.concat(cs({key:v,value:d,valueSpec:D.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${v}.type`,value:d.type,valueSpec:D.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:d,objectKey:"type"}),filter:Nl,layout:Z=>cs({layer:d,key:Z.key,value:Z.value,style:Z.style,styleSpec:Z.styleSpec,validateSpec:Z.validateSpec,objectElementValidators:{"*":re=>zu(Pn({layerType:F},re))}}),paint:Z=>cs({layer:d,key:Z.key,value:Z.value,style:Z.style,styleSpec:Z.styleSpec,validateSpec:Z.validateSpec,objectElementValidators:{"*":re=>JA(Pn({layerType:F},re))}})}})),u}function ju(f){const u=f.value,d=f.key,v=Wi(u);return v!=="string"?[new bt(d,u,`string expected, ${v} found`)]:[]}const ed={promoteId:function({key:f,value:u}){if(Wi(u)==="string")return ju({key:f,value:u});{const d=[];for(const v in u)d.push(...ju({key:`${f}.${v}`,value:u[v]}));return d}}};function ec(f){const u=f.value,d=f.key,v=f.styleSpec,w=f.style,D=f.validateSpec;if(!u.type)return[new bt(d,u,'"type" is required')];const F=As(u.type);let G;switch(F){case"vector":case"raster":return G=cs({key:d,value:u,valueSpec:v[`source_${F.replace("-","_")}`],style:f.style,styleSpec:v,objectElementValidators:ed,validateSpec:D}),G;case"raster-dem":return G=function(Z){var re;const Ae=(re=Z.sourceName)!==null&&re!==void 0?re:"",_e=Z.value,Re=Z.styleSpec,Le=Re.source_raster_dem,je=Z.style;let He=[];const at=Wi(_e);if(_e===void 0)return He;if(at!=="object")return He.push(new bt("source_raster_dem",_e,`object expected, ${at} found`)),He;const vt=As(_e.encoding)==="custom",jt=["redFactor","greenFactor","blueFactor","baseShift"],St=Z.value.encoding?`"${Z.value.encoding}"`:"Default";for(const Ke in _e)!vt&&jt.includes(Ke)?He.push(new bt(Ke,_e[Ke],`In "${Ae}": "${Ke}" is only valid when "encoding" is set to "custom". ${St} encoding found`)):Le[Ke]?He=He.concat(Z.validateSpec({key:Ke,value:_e[Ke],valueSpec:Le[Ke],validateSpec:Z.validateSpec,style:je,styleSpec:Re})):He.push(new bt(Ke,_e[Ke],`unknown property "${Ke}"`));return He}({sourceName:d,value:u,style:f.style,styleSpec:v,validateSpec:D}),G;case"geojson":if(G=cs({key:d,value:u,valueSpec:v.source_geojson,style:w,styleSpec:v,validateSpec:D,objectElementValidators:ed}),u.cluster)for(const Z in u.clusterProperties){const[re,Ae]=u.clusterProperties[Z],_e=typeof re=="string"?[re,["accumulated"],["get",Z]]:re;G.push(...Uu({key:`${d}.${Z}.map`,value:Ae,validateSpec:D,expressionContext:"cluster-map"})),G.push(...Uu({key:`${d}.${Z}.reduce`,value:_e,validateSpec:D,expressionContext:"cluster-reduce"}))}return G;case"video":return cs({key:d,value:u,valueSpec:v.source_video,style:w,validateSpec:D,styleSpec:v});case"image":return cs({key:d,value:u,valueSpec:v.source_image,style:w,validateSpec:D,styleSpec:v});case"canvas":return[new bt(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return XA({key:`${d}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:w,validateSpec:D,styleSpec:v})}}function Nu(f){const u=f.value,d=f.styleSpec,v=d.light,w=f.style;let D=[];const F=Wi(u);if(u===void 0)return D;if(F!=="object")return D=D.concat([new bt("light",u,`object expected, ${F} found`)]),D;for(const G in u){const Z=G.match(/^(.*)-transition$/);D=D.concat(Z&&v[Z[1]]&&v[Z[1]].transition?f.validateSpec({key:G,value:u[G],valueSpec:d.transition,validateSpec:f.validateSpec,style:w,styleSpec:d}):v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],validateSpec:f.validateSpec,style:w,styleSpec:d}):[new bt(G,u[G],`unknown property "${G}"`)])}return D}function Gu(f){const u=f.value,d=f.styleSpec,v=d.sky,w=f.style,D=Wi(u);if(u===void 0)return[];if(D!=="object")return[new bt("sky",u,`object expected, ${D} found`)];let F=[];for(const G in u)F=F.concat(v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],style:w,styleSpec:d}):[new bt(G,u[G],`unknown property "${G}"`)]);return F}function wA(f){const u=f.value,d=f.styleSpec,v=d.terrain,w=f.style;let D=[];const F=Wi(u);if(u===void 0)return D;if(F!=="object")return D=D.concat([new bt("terrain",u,`object expected, ${F} found`)]),D;for(const G in u)D=D.concat(v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],validateSpec:f.validateSpec,style:w,styleSpec:d}):[new bt(G,u[G],`unknown property "${G}"`)]);return D}function _c(f){let u=[];const d=f.value,v=f.key;if(Array.isArray(d)){const w=[],D=[];for(const F in d)d[F].id&&w.includes(d[F].id)&&u.push(new bt(v,d,`all the sprites' ids must be unique, but ${d[F].id} is duplicated`)),w.push(d[F].id),d[F].url&&D.includes(d[F].url)&&u.push(new bt(v,d,`all the sprites' URLs must be unique, but ${d[F].url} is duplicated`)),D.push(d[F].url),u=u.concat(cs({key:`${v}[${F}]`,value:d[F],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return ju({key:v,value:d})}const _u={"*":()=>[],array:Df,boolean:function(f){const u=f.value,d=f.key,v=Wi(u);return v!=="boolean"?[new bt(d,u,`boolean expected, ${v} found`)]:[]},number:ph,color:function(f){const u=f.key,d=f.value,v=Wi(d);return v!=="string"?[new bt(u,d,`color expected, ${v} found`)]:ci.parse(String(d))?[]:[new bt(u,d,`color expected, "${d}" found`)]},constants:vc,enum:XA,filter:Nl,function:mh,layer:gh,object:cs,source:ec,light:Nu,sky:Gu,terrain:wA,projection:function(f){const u=f.value,d=f.styleSpec,v=d.projection,w=f.style,D=Wi(u);if(u===void 0)return[];if(D!=="object")return[new bt("projection",u,`object expected, ${D} found`)];let F=[];for(const G in u)F=F.concat(v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],style:w,styleSpec:d}):[new bt(G,u[G],`unknown property "${G}"`)]);return F},projectionDefinition:function(f){const u=f.key;let d=f.value;d=d instanceof String?d.valueOf():d;const v=Wi(d);return v!=="array"||function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"}(d)||function(w){return!!["interpolate","step","literal"].includes(w[0])}(d)?["array","string"].includes(v)?[]:[new bt(u,d,`projection expected, invalid type "${v}" found`)]:[new bt(u,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:ju,formatted:function(f){return ju(f).length===0?[]:Uu(f)},resolvedImage:function(f){return ju(f).length===0?[]:Uu(f)},padding:function(f){const u=f.key,d=f.value;if(Wi(d)==="array"){if(d.length<1||d.length>4)return[new bt(u,d,`padding requires 1 to 4 values; ${d.length} values found`)];const v={type:"number"};let w=[];for(let D=0;D<d.length;D++)w=w.concat(f.validateSpec({key:`${u}[${D}]`,value:d[D],validateSpec:f.validateSpec,valueSpec:v}));return w}return ph({key:u,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(f){const u=f.key,d=f.value,v=Wi(d),w=f.styleSpec;if(v!=="array"||d.length<1||d.length%2!=0)return[new bt(u,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let D=[];for(let F=0;F<d.length;F+=2)D=D.concat(XA({key:`${u}[${F}]`,value:d[F],valueSpec:w.layout_symbol["text-anchor"]})),D=D.concat(Df({key:`${u}[${F+1}]`,value:d[F+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:w}));return D},sprite:_c};function $c(f){const u=f.value,d=f.valueSpec,v=f.styleSpec;return f.validateSpec=$c,d.expression&&YA(As(u))?mh(f):d.expression&&jl(Uo(u))?Uu(f):d.type&&_u[d.type]?_u[d.type](f):cs(Pn({},f,{valueSpec:d.type?v[d.type]:d}))}function et(f){const u=f.value,d=f.key,v=ju(f);return v.length||(u.indexOf("{fontstack}")===-1&&v.push(new bt(d,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&v.push(new bt(d,u,'"glyphs" url must include a "{range}" token'))),v}function Ua(f,u=Ye){let d=[];return d=d.concat($c({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:$c,objectElementValidators:{glyphs:et,"*":()=>[]}})),f.constants&&(d=d.concat(vc({key:"constants",value:f.constants,style:f,styleSpec:u,validateSpec:$c}))),Ri(d)}function Eo(f){return function(u){return f({...u,validateSpec:$c})}}function Ri(f){return[].concat(f).sort((u,d)=>u.line-d.line)}function $r(f){return function(...u){return Ri(f.apply(this,u))}}Ua.source=$r(Eo(ec)),Ua.sprite=$r(Eo(_c)),Ua.glyphs=$r(Eo(et)),Ua.light=$r(Eo(Nu)),Ua.sky=$r(Eo(Gu)),Ua.terrain=$r(Eo(wA)),Ua.layer=$r(Eo(gh)),Ua.filter=$r(Eo(Nl)),Ua.paintProperty=$r(Eo(JA)),Ua.layoutProperty=$r(Eo(zu));const Ss=Ua,yh=Ss.light,td=Ss.sky,Ea=Ss.paintProperty,Gs=Ss.layoutProperty;function _s(f,u){let d=!1;if(u&&u.length)for(const v of u)f.fire(new it(new Error(v.message))),d=!0;return d}class uA{constructor(u,d,v){const w=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const F=new Int32Array(this.arrayBuffer);u=F[0],this.d=(d=F[1])+2*(v=F[2]);for(let Z=0;Z<this.d*this.d;Z++){const re=F[3+Z],Ae=F[3+Z+1];w.push(re===Ae?null:F.subarray(re,Ae))}const G=F[3+w.length+1];this.keys=F.subarray(F[3+w.length],G),this.bboxes=F.subarray(G),this.insert=this._insertReadonly}else{this.d=d+2*v;for(let F=0;F<this.d*this.d;F++)w.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=v,this.scale=d/u,this.uid=0;const D=v/d*u;this.min=-D,this.max=u+D}insert(u,d,v,w,D){this._forEachCell(d,v,w,D,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(w),this.bboxes.push(D)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,d,v,w,D,F){this.cells[D].push(F)}query(u,d,v,w,D){const F=this.min,G=this.max;if(u<=F&&d<=F&&G<=v&&G<=w&&!D)return Array.prototype.slice.call(this.keys);{const Z=[];return this._forEachCell(u,d,v,w,this._queryCell,Z,{},D),Z}}_queryCell(u,d,v,w,D,F,G,Z){const re=this.cells[D];if(re!==null){const Ae=this.keys,_e=this.bboxes;for(let Re=0;Re<re.length;Re++){const Le=re[Re];if(G[Le]===void 0){const je=4*Le;(Z?Z(_e[je+0],_e[je+1],_e[je+2],_e[je+3]):u<=_e[je+2]&&d<=_e[je+3]&&v>=_e[je+0]&&w>=_e[je+1])?(G[Le]=!0,F.push(Ae[Le])):G[Le]=!1}}}}_forEachCell(u,d,v,w,D,F,G,Z){const re=this._convertToCellCoord(u),Ae=this._convertToCellCoord(d),_e=this._convertToCellCoord(v),Re=this._convertToCellCoord(w);for(let Le=re;Le<=_e;Le++)for(let je=Ae;je<=Re;je++){const He=this.d*je+Le;if((!Z||Z(this._convertFromCellCoord(Le),this._convertFromCellCoord(je),this._convertFromCellCoord(Le+1),this._convertFromCellCoord(je+1)))&&D.call(this,u,d,v,w,He,F,G,Z))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,d=3+this.cells.length+1+1;let v=0;for(let F=0;F<this.cells.length;F++)v+=this.cells[F].length;const w=new Int32Array(d+v+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let D=d;for(let F=0;F<u.length;F++){const G=u[F];w[3+F]=D,w.set(G,D),D+=G.length}return w[3+u.length]=D,w.set(this.keys,D),D+=this.keys.length,w[3+u.length+1]=D,w.set(this.bboxes,D),D+=this.bboxes.length,w.buffer}static serialize(u,d){const v=u.toArrayBuffer();return d&&d.push(v),{buffer:v}}static deserialize(u){return new uA(u.buffer)}}const Es={};function dr(f,u,d={}){if(Es[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),Es[f]={klass:u,omit:d.omit||[],shallow:d.shallow||[]}}dr("Object",Object),dr("TransferableGridIndex",uA),dr("Color",ci),dr("Error",Error),dr("AJAXError",Sr),dr("ResolvedImage",Mo),dr("StylePropertyFunction",yc),dr("StyleExpression",vu,{omit:["_evaluator"]}),dr("ZoomDependentExpression",Fa),dr("ZoomConstantExpression",Zh),dr("CompoundExpression",Vt,{omit:["_evaluate"]});for(const f in gu)gu[f]._classRegistryKey||dr(`Expression_${f}`,gu[f]);function va(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Vc(f){return f.$name||f.constructor._classRegistryKey}function Ba(f){return!function(u){if(u===null||typeof u!="object")return!1;const d=Vc(u);return!(!d||d==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||va(f)||nn(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function tc(f,u){if(Ba(f))return(va(f)||nn(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const D=[];for(const F of f)D.push(tc(F,u));return D}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const d=Vc(f);if(!d)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Es[d])throw new Error(`${d} is not registered.`);const{klass:v}=Es[d],w=v.serialize?v.serialize(f,u):{};if(v.serialize){if(u&&w===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const D in f){if(!f.hasOwnProperty(D)||Es[d].omit.indexOf(D)>=0)continue;const F=f[D];w[D]=Es[d].shallow.indexOf(D)>=0?F:tc(F,u)}f instanceof Error&&(w.message=f.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(w.$name=d),w}function vh(f){if(Ba(f))return f;if(Array.isArray(f))return f.map(vh);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=Vc(f)||"Object";if(!Es[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:d}=Es[u];if(!d)throw new Error(`can't deserialize unregistered class ${u}`);if(d.deserialize)return d.deserialize(f);const v=Object.create(d.prototype);for(const w of Object.keys(f)){if(w==="$name")continue;const D=f[w];v[w]=Es[u].shallow.indexOf(w)>=0?D:vh(D)}return v}class _h{constructor(){this.first=!0}update(u,d){const v=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=v,!0))}}const Mi={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Ch(f){for(const u of f)if(AA(u.charCodeAt(0)))return!0;return!1}function Gl(f){for(const u of f)if(!MA(u.charCodeAt(0)))return!1;return!0}function bh(f){const u=f.map(d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}}).filter(d=>d);return new RegExp(u.join("|"),"u")}const xh=bh(["Arab","Dupl","Mong","Ougr","Syrc"]);function MA(f){return!xh.test(String.fromCodePoint(f))}const nc=bh(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function AA(f){return!(f!==746&&f!==747&&(f<4352||!(Mi["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Mi["CJK Compatibility"](f)||Mi["CJK Strokes"](f)||!(!Mi["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Mi["Enclosed CJK Letters and Months"](f)||Mi["Ideographic Description Characters"](f)||Mi.Kanbun(f)||Mi.Katakana(f)&&f!==12540||!(!Mi["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Mi["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Mi["Vertical Forms"](f)||Mi["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||nc.test(String.fromCodePoint(f)))))}function Cc(f){return!(AA(f)||function(u){return!!(Mi["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Mi["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Mi["Letterlike Symbols"](u)||Mi["Number Forms"](u)||Mi["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Mi["Control Pictures"](u)&&u!==9251||Mi["Optical Character Recognition"](u)||Mi["Enclosed Alphanumerics"](u)||Mi["Geometric Shapes"](u)||Mi["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Mi["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Mi["CJK Symbols and Punctuation"](u)||Mi.Katakana(u)||Mi["Private Use Area"](u)||Mi["CJK Compatibility Forms"](u)||Mi["Small Form Variants"](u)||Mi["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(f))}const Bs=bh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function bo(f){return Bs.test(String.fromCodePoint(f))}function Cu(f,u){return!(!u&&bo(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Mi.Khmer(f))}function za(f){for(const u of f)if(bo(u.charCodeAt(0)))return!0;return!1}const Ks=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Ks.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,u){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const d=f.pluginURL,v=new Promise(D=>{this.loadScriptResolve=D});u(d);const w=new Promise(D=>setTimeout(()=>D(),this.TIMEOUT));if(yield Promise.race([v,w]),this.isParsed()){const D={pluginStatus:"loaded",pluginURL:d};return this.setState(D),D}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)})}};class Ho{constructor(u,d){this.zoom=u,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _h,this.transition={})}isSupportedScript(u){return function(d,v){for(const w of d)if(!Cu(w.charCodeAt(0),v))return!1;return!0}(u,Ks.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,d=u-Math.floor(u),v=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*d}}}class ou{constructor(u,d){this.property=u,this.value=d,this.expression=function(v,w){if(YA(v))return new yc(v,w);if(jl(v)){const D=fh(v,w);if(D.result==="error")throw new Error(D.value.map(F=>`${F.key}: ${F.message}`).join(", "));return D.value}{let D=v;return w.type==="color"&&typeof v=="string"?D=ci.parse(v):w.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?D=Ps.parse(v):w.type==="projectionDefinition"&&typeof v=="string"&&(D=Ns.parse(v)):D=Dr.parse(v),{kind:"constant",evaluate:()=>D}}}(d===void 0?u.specification.default:d,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,d,v){return this.property.possiblyEvaluate(this,u,d,v)}}class Wu{constructor(u){this.property=u,this.value=new ou(u,void 0)}transitioned(u,d){return new nd(this.property,this.value,d,ft({},u.transition,this.transition),u.now)}untransitioned(){return new nd(this.property,this.value,null,{},0)}}class bc{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return ke(this._values[u].value.value)}setValue(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Wu(this._values[u].property)),this._values[u].value=new ou(this._values[u].property,d===null?void 0:ke(d))}getTransition(u){return ke(this._values[u].transition)}setTransition(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Wu(this._values[u].property)),this._values[u].transition=ke(d)||void 0}serialize(){const u={};for(const d of Object.keys(this._values)){const v=this.getValue(d);v!==void 0&&(u[d]=v);const w=this.getTransition(d);w!==void 0&&(u[`${d}-transition`]=w)}return u}transitioned(u,d){const v=new SA(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].transitioned(u,d._values[w]);return v}untransitioned(){const u=new SA(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].untransitioned();return u}}class nd{constructor(u,d,v,w,D){this.property=u,this.value=d,this.begin=D+w.delay||0,this.end=this.begin+w.duration||0,u.specification.transition&&(w.delay||w.duration)&&(this.prior=v)}possiblyEvaluate(u,d,v){const w=u.now||0,D=this.value.possiblyEvaluate(u,d,v),F=this.prior;if(F){if(w>this.end)return this.prior=null,D;if(this.value.isDataDriven())return this.prior=null,D;if(w<this.begin)return F.possiblyEvaluate(u,d,v);{const G=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(u,d,v),D,Te(G))}}return D}}class SA{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,d,v){const w=new ha(this._properties);for(const D of Object.keys(this._values))w._values[D]=this._values[D].possiblyEvaluate(u,d,v);return w}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class xc{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return ke(this._values[u].value)}setValue(u,d){this._values[u]=new ou(this._values[u].property,d===null?void 0:ke(d))}serialize(){const u={};for(const d of Object.keys(this._values)){const v=this.getValue(d);v!==void 0&&(u[d]=v)}return u}possiblyEvaluate(u,d,v){const w=new ha(this._properties);for(const D of Object.keys(this._values))w._values[D]=this._values[D].possiblyEvaluate(u,d,v);return w}}class gs{constructor(u,d,v){this.property=u,this.value=d,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,d,v,w){return this.property.evaluate(this.value,this.parameters,u,d,v,w)}}class ha{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class hr{constructor(u){this.specification=u}possiblyEvaluate(u,d){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(d)}interpolate(u,d,v){const w=vi[this.specification.type];return w?w(u,d,v):u}}class Hr{constructor(u,d){this.specification=u,this.overrides=d}possiblyEvaluate(u,d,v,w){return new gs(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},v,w)}:u.expression,d)}interpolate(u,d,v){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new gs(this,{kind:"constant",value:void 0},u.parameters);const w=vi[this.specification.type];if(w){const D=w(u.value.value,d.value.value,v);return new gs(this,{kind:"constant",value:D},u.parameters)}return u}evaluate(u,d,v,w,D,F){return u.kind==="constant"?u.value:u.evaluate(d,v,w,D,F)}}class Qu extends Hr{possiblyEvaluate(u,d,v,w){if(u.value===void 0)return new gs(this,{kind:"constant",value:void 0},d);if(u.expression.kind==="constant"){const D=u.expression.evaluate(d,null,{},v,w),F=u.property.specification.type==="resolvedImage"&&typeof D!="string"?D.name:D,G=this._calculate(F,F,F,d);return new gs(this,{kind:"constant",value:G},d)}if(u.expression.kind==="camera"){const D=this._calculate(u.expression.evaluate({zoom:d.zoom-1}),u.expression.evaluate({zoom:d.zoom}),u.expression.evaluate({zoom:d.zoom+1}),d);return new gs(this,{kind:"constant",value:D},d)}return new gs(this,u.expression,d)}evaluate(u,d,v,w,D,F){if(u.kind==="source"){const G=u.evaluate(d,v,w,D,F);return this._calculate(G,G,G,d)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(d.zoom)-1},v,w),u.evaluate({zoom:Math.floor(d.zoom)},v,w),u.evaluate({zoom:Math.floor(d.zoom)+1},v,w),d):u.value}_calculate(u,d,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:v,to:d}}interpolate(u){return u}}class rc{constructor(u){this.specification=u}possiblyEvaluate(u,d,v,w){if(u.value!==void 0){if(u.expression.kind==="constant"){const D=u.expression.evaluate(d,null,{},v,w);return this._calculate(D,D,D,d)}return this._calculate(u.expression.evaluate(new Ho(Math.floor(d.zoom-1),d)),u.expression.evaluate(new Ho(Math.floor(d.zoom),d)),u.expression.evaluate(new Ho(Math.floor(d.zoom+1),d)),d)}}_calculate(u,d,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:v,to:d}}interpolate(u){return u}}class bu{constructor(u){this.specification=u}possiblyEvaluate(u,d,v,w){return!!u.expression.evaluate(d,null,{},v,w)}interpolate(){return!1}}class Cs{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in u){const v=u[d];v.specification.overridable&&this.overridableProperties.push(d);const w=this.defaultPropertyValues[d]=new ou(v,void 0),D=this.defaultTransitionablePropertyValues[d]=new Wu(v);this.defaultTransitioningPropertyValues[d]=D.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=w.possiblyEvaluate({})}}}dr("DataDrivenProperty",Hr),dr("DataConstantProperty",hr),dr("CrossFadedDataDrivenProperty",Qu),dr("CrossFadedProperty",rc),dr("ColorRampProperty",bu);const Lf="-transition";class su extends Kt{constructor(u,d){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),d.layout&&(this._unevaluatedLayout=new xc(d.layout)),d.paint)){this._transitionablePaint=new bc(d.paint);for(const v in u.paint)this.setPaintProperty(v,u.paint[v],{validate:!1});for(const v in u.layout)this.setLayoutProperty(v,u.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ha(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,d,v={}){d!=null&&this._validate(Gs,`layers.${this.id}.layout.${u}`,u,d,v)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,d):this.visibility=d)}getPaintProperty(u){return u.endsWith(Lf)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,d,v={}){if(d!=null&&this._validate(Ea,`layers.${this.id}.paint.${u}`,u,d,v))return!1;if(u.endsWith(Lf))return this._transitionablePaint.setTransition(u.slice(0,-11),d||void 0),!1;{const w=this._transitionablePaint._values[u],D=w.property.specification["property-type"]==="cross-faded-data-driven",F=w.value.isDataDriven(),G=w.value;this._transitionablePaint.setValue(u,d),this._handleSpecialPaintPropertyUpdate(u);const Z=this._transitionablePaint._values[u].value;return Z.isDataDriven()||F||D||this._handleOverridablePaintPropertyUpdate(u,G,Z)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,d,v){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,d){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,d)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),De(u,(d,v)=>!(d===void 0||v==="layout"&&!Object.keys(d).length||v==="paint"&&!Object.keys(d).length))}_validate(u,d,v,w,D={}){return(!D||D.validate!==!1)&&_s(this,u.call(Ss,{key:d,layerType:this.type,objectKey:v,value:w,styleSpec:Ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const d=this.paint.get(u);if(d instanceof gs&&yu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const Ff={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class xu{constructor(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class To{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Os(f,u=1){let d=0,v=0;return{members:f.map(w=>{const D=Ff[w.type].BYTES_PER_ELEMENT,F=d=rd(d,Math.max(u,D)),G=w.components||1;return v=Math.max(v,D),d+=D*G,{name:w.name,type:w.type,components:G,offset:F}}),size:rd(d,Math.max(v,u)),alignment:u}}function rd(f,u){return Math.ceil(f/u)*u}class EA extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d){const v=this.length;return this.resize(v+1),this.emplace(v,u,d)}emplace(u,d,v){const w=2*u;return this.int16[w+0]=d,this.int16[w+1]=v,u}}EA.prototype.bytesPerElement=4,dr("StructArrayLayout2i4",EA);class id extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,v)}emplace(u,d,v,w){const D=3*u;return this.int16[D+0]=d,this.int16[D+1]=v,this.int16[D+2]=w,u}}id.prototype.bytesPerElement=6,dr("StructArrayLayout3i6",id);class BA extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,v,w){const D=this.length;return this.resize(D+1),this.emplace(D,u,d,v,w)}emplace(u,d,v,w,D){const F=4*u;return this.int16[F+0]=d,this.int16[F+1]=v,this.int16[F+2]=w,this.int16[F+3]=D,u}}BA.prototype.bytesPerElement=8,dr("StructArrayLayout4i8",BA);class Ws extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,d,v,w,D,F)}emplace(u,d,v,w,D,F,G){const Z=6*u;return this.int16[Z+0]=d,this.int16[Z+1]=v,this.int16[Z+2]=w,this.int16[Z+3]=D,this.int16[Z+4]=F,this.int16[Z+5]=G,u}}Ws.prototype.bytesPerElement=12,dr("StructArrayLayout2i4i12",Ws);class wc extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,d,v,w,D,F)}emplace(u,d,v,w,D,F,G){const Z=4*u,re=8*u;return this.int16[Z+0]=d,this.int16[Z+1]=v,this.uint8[re+4]=w,this.uint8[re+5]=D,this.uint8[re+6]=F,this.uint8[re+7]=G,u}}wc.prototype.bytesPerElement=8,dr("StructArrayLayout2i4ub8",wc);class Wl extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d){const v=this.length;return this.resize(v+1),this.emplace(v,u,d)}emplace(u,d,v){const w=2*u;return this.float32[w+0]=d,this.float32[w+1]=v,u}}Wl.prototype.bytesPerElement=8,dr("StructArrayLayout2f8",Wl);class dl extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D,F,G,Z,re,Ae){const _e=this.length;return this.resize(_e+1),this.emplace(_e,u,d,v,w,D,F,G,Z,re,Ae)}emplace(u,d,v,w,D,F,G,Z,re,Ae,_e){const Re=10*u;return this.uint16[Re+0]=d,this.uint16[Re+1]=v,this.uint16[Re+2]=w,this.uint16[Re+3]=D,this.uint16[Re+4]=F,this.uint16[Re+5]=G,this.uint16[Re+6]=Z,this.uint16[Re+7]=re,this.uint16[Re+8]=Ae,this.uint16[Re+9]=_e,u}}dl.prototype.bytesPerElement=20,dr("StructArrayLayout10ui20",dl);class qu extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D,F,G,Z,re,Ae,_e,Re){const Le=this.length;return this.resize(Le+1),this.emplace(Le,u,d,v,w,D,F,G,Z,re,Ae,_e,Re)}emplace(u,d,v,w,D,F,G,Z,re,Ae,_e,Re,Le){const je=12*u;return this.int16[je+0]=d,this.int16[je+1]=v,this.int16[je+2]=w,this.int16[je+3]=D,this.uint16[je+4]=F,this.uint16[je+5]=G,this.uint16[je+6]=Z,this.uint16[je+7]=re,this.int16[je+8]=Ae,this.int16[je+9]=_e,this.int16[je+10]=Re,this.int16[je+11]=Le,u}}qu.prototype.bytesPerElement=24,dr("StructArrayLayout4i4ui4i24",qu);class Mc extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,v)}emplace(u,d,v,w){const D=3*u;return this.float32[D+0]=d,this.float32[D+1]=v,this.float32[D+2]=w,u}}Mc.prototype.bytesPerElement=12,dr("StructArrayLayout3f12",Mc);class wu extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint32[1*u+0]=d,u}}wu.prototype.bytesPerElement=4,dr("StructArrayLayout1ul4",wu);class _a extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D,F,G,Z,re){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,u,d,v,w,D,F,G,Z,re)}emplace(u,d,v,w,D,F,G,Z,re,Ae){const _e=10*u,Re=5*u;return this.int16[_e+0]=d,this.int16[_e+1]=v,this.int16[_e+2]=w,this.int16[_e+3]=D,this.int16[_e+4]=F,this.int16[_e+5]=G,this.uint32[Re+3]=Z,this.uint16[_e+8]=re,this.uint16[_e+9]=Ae,u}}_a.prototype.bytesPerElement=20,dr("StructArrayLayout6i1ul2ui20",_a);class Xs extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,d,v,w,D,F)}emplace(u,d,v,w,D,F,G){const Z=6*u;return this.int16[Z+0]=d,this.int16[Z+1]=v,this.int16[Z+2]=w,this.int16[Z+3]=D,this.int16[Z+4]=F,this.int16[Z+5]=G,u}}Xs.prototype.bytesPerElement=12,dr("StructArrayLayout2i2i2i12",Xs);class au extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D){const F=this.length;return this.resize(F+1),this.emplace(F,u,d,v,w,D)}emplace(u,d,v,w,D,F){const G=4*u,Z=8*u;return this.float32[G+0]=d,this.float32[G+1]=v,this.float32[G+2]=w,this.int16[Z+6]=D,this.int16[Z+7]=F,u}}au.prototype.bytesPerElement=16,dr("StructArrayLayout2f1f2i16",au);class lu extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,d,v,w,D,F)}emplace(u,d,v,w,D,F,G){const Z=16*u,re=4*u,Ae=8*u;return this.uint8[Z+0]=d,this.uint8[Z+1]=v,this.float32[re+1]=w,this.float32[re+2]=D,this.int16[Ae+6]=F,this.int16[Ae+7]=G,u}}lu.prototype.bytesPerElement=16,dr("StructArrayLayout2ub2f2i16",lu);class cA extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,v)}emplace(u,d,v,w){const D=3*u;return this.uint16[D+0]=d,this.uint16[D+1]=v,this.uint16[D+2]=w,u}}cA.prototype.bytesPerElement=6,dr("StructArrayLayout3ui6",cA);class Mu extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D,F,G,Z,re,Ae,_e,Re,Le,je,He,at,vt){const jt=this.length;return this.resize(jt+1),this.emplace(jt,u,d,v,w,D,F,G,Z,re,Ae,_e,Re,Le,je,He,at,vt)}emplace(u,d,v,w,D,F,G,Z,re,Ae,_e,Re,Le,je,He,at,vt,jt){const St=24*u,Ke=12*u,nt=48*u;return this.int16[St+0]=d,this.int16[St+1]=v,this.uint16[St+2]=w,this.uint16[St+3]=D,this.uint32[Ke+2]=F,this.uint32[Ke+3]=G,this.uint32[Ke+4]=Z,this.uint16[St+10]=re,this.uint16[St+11]=Ae,this.uint16[St+12]=_e,this.float32[Ke+7]=Re,this.float32[Ke+8]=Le,this.uint8[nt+36]=je,this.uint8[nt+37]=He,this.uint8[nt+38]=at,this.uint32[Ke+10]=vt,this.int16[St+22]=jt,u}}Mu.prototype.bytesPerElement=48,dr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Mu);class Sc extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,v,w,D,F,G,Z,re,Ae,_e,Re,Le,je,He,at,vt,jt,St,Ke,nt,It,un,Fn,mn,bn,Hn,Ln){const sr=this.length;return this.resize(sr+1),this.emplace(sr,u,d,v,w,D,F,G,Z,re,Ae,_e,Re,Le,je,He,at,vt,jt,St,Ke,nt,It,un,Fn,mn,bn,Hn,Ln)}emplace(u,d,v,w,D,F,G,Z,re,Ae,_e,Re,Le,je,He,at,vt,jt,St,Ke,nt,It,un,Fn,mn,bn,Hn,Ln,sr){const Bn=32*u,Gr=16*u;return this.int16[Bn+0]=d,this.int16[Bn+1]=v,this.int16[Bn+2]=w,this.int16[Bn+3]=D,this.int16[Bn+4]=F,this.int16[Bn+5]=G,this.int16[Bn+6]=Z,this.int16[Bn+7]=re,this.uint16[Bn+8]=Ae,this.uint16[Bn+9]=_e,this.uint16[Bn+10]=Re,this.uint16[Bn+11]=Le,this.uint16[Bn+12]=je,this.uint16[Bn+13]=He,this.uint16[Bn+14]=at,this.uint16[Bn+15]=vt,this.uint16[Bn+16]=jt,this.uint16[Bn+17]=St,this.uint16[Bn+18]=Ke,this.uint16[Bn+19]=nt,this.uint16[Bn+20]=It,this.uint16[Bn+21]=un,this.uint16[Bn+22]=Fn,this.uint32[Gr+12]=mn,this.float32[Gr+13]=bn,this.float32[Gr+14]=Hn,this.uint16[Bn+30]=Ln,this.uint16[Bn+31]=sr,u}}Sc.prototype.bytesPerElement=64,dr("StructArrayLayout8i15ui1ul2f2ui64",Sc);class Yu extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.float32[1*u+0]=d,u}}Yu.prototype.bytesPerElement=4,dr("StructArrayLayout1f4",Yu);class Ql extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,v)}emplace(u,d,v,w){const D=3*u;return this.uint16[6*u+0]=d,this.float32[D+1]=v,this.float32[D+2]=w,u}}Ql.prototype.bytesPerElement=12,dr("StructArrayLayout1ui2f12",Ql);class wh extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,d,v)}emplace(u,d,v,w){const D=4*u;return this.uint32[2*u+0]=d,this.uint16[D+2]=v,this.uint16[D+3]=w,u}}wh.prototype.bytesPerElement=8,dr("StructArrayLayout1ul2ui8",wh);class T extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d){const v=this.length;return this.resize(v+1),this.emplace(v,u,d)}emplace(u,d,v){const w=2*u;return this.uint16[w+0]=d,this.uint16[w+1]=v,u}}T.prototype.bytesPerElement=4,dr("StructArrayLayout2ui4",T);class l extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint16[1*u+0]=d,u}}l.prototype.bytesPerElement=2,dr("StructArrayLayout1ui2",l);class c extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,v,w){const D=this.length;return this.resize(D+1),this.emplace(D,u,d,v,w)}emplace(u,d,v,w,D){const F=4*u;return this.float32[F+0]=d,this.float32[F+1]=v,this.float32[F+2]=w,this.float32[F+3]=D,u}}c.prototype.bytesPerElement=16,dr("StructArrayLayout4f16",c);class C extends xu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}C.prototype.size=20;class M extends _a{get(u){return new C(this,u)}}dr("CollisionBoxArray",M);class R extends xu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}R.prototype.size=48;class j extends Mu{get(u){return new R(this,u)}}dr("PlacedSymbolArray",j);class $ extends xu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}$.prototype.size=64;class te extends Sc{get(u){return new $(this,u)}}dr("SymbolInstanceArray",te);class oe extends Yu{getoffsetX(u){return this.float32[1*u+0]}}dr("GlyphOffsetArray",oe);class be extends id{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}dr("SymbolLineVertexArray",be);class Ee extends xu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ee.prototype.size=12;class Ie extends Ql{get(u){return new Ee(this,u)}}dr("TextAnchorOffsetArray",Ie);class qe extends xu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}qe.prototype.size=8;class Ve extends wh{get(u){return new qe(this,u)}}dr("FeatureIndexArray",Ve);class At extends EA{}class ot extends EA{}class ct extends EA{}class yt extends Ws{}class Et extends wc{}class Tt extends Wl{}class Rt extends dl{}class zt extends qu{}class Pt extends Mc{}class tn extends wu{}class Ht extends Xs{}class vn extends lu{}class _n extends cA{}class gn extends T{}const On=Os([{name:"a_pos",components:2,type:"Int16"}],4),{members:Un}=On;class wn{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,d,v,w){const D=this.segments[this.segments.length-1];return u>wn.MAX_VERTEX_ARRAY_LENGTH&&Je(`Max vertices per segment is ${wn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${wn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!D||D.vertexLength+u>wn.MAX_VERTEX_ARRAY_LENGTH||D.sortKey!==w?this.createNewSegment(d,v,w):D}createNewSegment(u,d,v){const w={vertexOffset:u.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return v!==void 0&&(w.sortKey=v),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(u,d,v){return this.prepareSegment(0,u,d,v)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const d in u.vaos)u.vaos[d].destroy()}static simpleSegment(u,d,v,w){return new wn([{vertexOffset:u,primitiveOffset:d,vertexLength:v,primitiveLength:w,vaos:{},sortKey:0}])}}function kr(f,u){return 256*(f=wt(Math.floor(f),0,255))+wt(Math.floor(u),0,255)}wn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dr("SegmentVector",wn);const Bi=Os([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var $i,Bo,Si,zo={exports:{}},jo={exports:{}},xo={exports:{}},yo=function(){if(Si)return zo.exports;Si=1;var f=($i||($i=1,jo.exports=function(d,v){var w,D,F,G,Z,re,Ae,_e;for(D=d.length-(w=3&d.length),F=v,Z=3432918353,re=461845907,_e=0;_e<D;)Ae=255&d.charCodeAt(_e)|(255&d.charCodeAt(++_e))<<8|(255&d.charCodeAt(++_e))<<16|(255&d.charCodeAt(++_e))<<24,++_e,F=27492+(65535&(G=5*(65535&(F=(F^=Ae=(65535&(Ae=(Ae=(65535&Ae)*Z+(((Ae>>>16)*Z&65535)<<16)&4294967295)<<15|Ae>>>17))*re+(((Ae>>>16)*re&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(G>>>16)&65535)<<16);switch(Ae=0,w){case 3:Ae^=(255&d.charCodeAt(_e+2))<<16;case 2:Ae^=(255&d.charCodeAt(_e+1))<<8;case 1:F^=Ae=(65535&(Ae=(Ae=(65535&(Ae^=255&d.charCodeAt(_e)))*Z+(((Ae>>>16)*Z&65535)<<16)&4294967295)<<15|Ae>>>17))*re+(((Ae>>>16)*re&65535)<<16)&4294967295}return F^=d.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}),jo.exports),u=(Bo||(Bo=1,xo.exports=function(d,v){for(var w,D=d.length,F=v^D,G=0;D>=4;)w=1540483477*(65535&(w=255&d.charCodeAt(G)|(255&d.charCodeAt(++G))<<8|(255&d.charCodeAt(++G))<<16|(255&d.charCodeAt(++G))<<24))+((1540483477*(w>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),D-=4,++G;switch(D){case 3:F^=(255&d.charCodeAt(G+2))<<16;case 2:F^=(255&d.charCodeAt(G+1))<<8;case 1:F=1540483477*(65535&(F^=255&d.charCodeAt(G)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}),xo.exports);return zo.exports=f,zo.exports.murmur3=f,zo.exports.murmur2=u,zo.exports}(),Oa=h(yo);class No{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,d,v,w){this.ids.push(hs(u)),this.positions.push(d,v,w)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=hs(u);let v=0,w=this.ids.length-1;for(;v<w;){const F=v+w>>1;this.ids[F]>=d?w=F:v=F+1}const D=[];for(;this.ids[v]===d;)D.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return D}static serialize(u,d){const v=new Float64Array(u.ids),w=new Uint32Array(u.positions);return ja(v,w,0,v.length-1),d&&d.push(v.buffer,w.buffer),{ids:v,positions:w}}static deserialize(u){const d=new No;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d}}function hs(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:Oa(String(f))}function ja(f,u,d,v){for(;d<v;){const w=f[d+v>>1];let D=d-1,F=v+1;for(;;){do D++;while(f[D]<w);do F--;while(f[F]>w);if(D>=F)break;$u(f,D,F),$u(u,3*D,3*F),$u(u,3*D+1,3*F+1),$u(u,3*D+2,3*F+2)}F-d<v-F?(ja(f,u,d,F),d=F+1):(ja(f,u,F+1,v),v=F)}}function $u(f,u,d){const v=f[u];f[u]=f[d],f[d]=v}dr("FeaturePositionMap",No);class fl{constructor(u,d){this.gl=u.gl,this.location=d}}class pl extends fl{constructor(u,d){super(u,d),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class uu extends fl{constructor(u,d){super(u,d),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class OA extends fl{constructor(u,d){super(u,d),this.current=ci.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const IA=new Float32Array(16);function Vu(f){return[kr(255*f.r,255*f.g),kr(255*f.b,255*f.a)]}class Js{constructor(u,d,v){this.value=u,this.uniformNames=d.map(w=>`u_${w}`),this.type=v}setUniform(u,d,v){u.set(v.constantOr(this.value))}getBinding(u,d,v){return this.type==="color"?new OA(u,d):new pl(u,d)}}class ml{constructor(u,d){this.uniformNames=d.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr}setUniform(u,d,v,w){const D=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;D&&u.set(D)}getBinding(u,d,v){return v.substr(0,9)==="u_pattern"?new uu(u,d):new pl(u,d)}}class sa{constructor(u,d,v,w){this.expression=u,this.type=v,this.maxValue=0,this.paintVertexAttributes=d.map(D=>({name:`a_${D}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(u,d,v,w,D){const F=this.paintVertexArray.length,G=this.expression.evaluate(new Ho(0),d,{},w,[],D);this.paintVertexArray.resize(u),this._setPaintValue(F,u,G)}updatePaintArray(u,d,v,w){const D=this.expression.evaluate({zoom:0},v,w);this._setPaintValue(u,d,D)}_setPaintValue(u,d,v){if(this.type==="color"){const w=Vu(v);for(let D=u;D<d;D++)this.paintVertexArray.emplace(D,w[0],w[1])}else{for(let w=u;w<d;w++)this.paintVertexArray.emplace(w,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Pl{constructor(u,d,v,w,D,F){this.expression=u,this.uniformNames=d.map(G=>`u_${G}_t`),this.type=v,this.useIntegerZoom=w,this.zoom=D,this.maxValue=0,this.paintVertexAttributes=d.map(G=>({name:`a_${G}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new F}populatePaintArray(u,d,v,w,D){const F=this.expression.evaluate(new Ho(this.zoom),d,{},w,[],D),G=this.expression.evaluate(new Ho(this.zoom+1),d,{},w,[],D),Z=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(Z,u,F,G)}updatePaintArray(u,d,v,w){const D=this.expression.evaluate({zoom:this.zoom},v,w),F=this.expression.evaluate({zoom:this.zoom+1},v,w);this._setPaintValue(u,d,D,F)}_setPaintValue(u,d,v,w){if(this.type==="color"){const D=Vu(v),F=Vu(w);for(let G=u;G<d;G++)this.paintVertexArray.emplace(G,D[0],D[1],F[0],F[1])}else{for(let D=u;D<d;D++)this.paintVertexArray.emplace(D,v,w);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(w))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,d){const v=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,w=wt(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);u.set(w)}getBinding(u,d,v){return new pl(u,d)}}class bs{constructor(u,d,v,w,D,F){this.expression=u,this.type=d,this.useIntegerZoom=v,this.zoom=w,this.layerId=F,this.zoomInPaintVertexArray=new D,this.zoomOutPaintVertexArray=new D}populatePaintArray(u,d,v){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(w,u,d.patterns&&d.patterns[this.layerId],v)}updatePaintArray(u,d,v,w,D){this._setPaintValues(u,d,v.patterns&&v.patterns[this.layerId],D)}_setPaintValues(u,d,v,w){if(!w||!v)return;const{min:D,mid:F,max:G}=v,Z=w[D],re=w[F],Ae=w[G];if(Z&&re&&Ae)for(let _e=u;_e<d;_e++)this.zoomInPaintVertexArray.emplace(_e,re.tl[0],re.tl[1],re.br[0],re.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],re.pixelRatio,Z.pixelRatio),this.zoomOutPaintVertexArray.emplace(_e,re.tl[0],re.tl[1],re.br[0],re.br[1],Ae.tl[0],Ae.tl[1],Ae.br[0],Ae.br[1],re.pixelRatio,Ae.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Bi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Bi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Qs{constructor(u,d,v){this.binders={},this._buffers=[];const w=[];for(const D in u.paint._values){if(!v(D))continue;const F=u.paint.get(D);if(!(F instanceof gs&&yu(F.property.specification)))continue;const G=tl(D,u.type),Z=F.value,re=F.property.specification.type,Ae=F.property.useIntegerZoom,_e=F.property.specification["property-type"],Re=_e==="cross-faded"||_e==="cross-faded-data-driven";if(Z.kind==="constant")this.binders[D]=Re?new ml(Z.value,G):new Js(Z.value,G,re),w.push(`/u_${D}`);else if(Z.kind==="source"||Re){const Le=Mh(D,re,"source");this.binders[D]=Re?new bs(Z,re,Ae,d,Le,u.id):new sa(Z,G,re,Le),w.push(`/a_${D}`)}else{const Le=Mh(D,re,"composite");this.binders[D]=new Pl(Z,G,re,Ae,d,Le),w.push(`/z_${D}`)}}this.cacheKey=w.sort().join("")}getMaxValue(u){const d=this.binders[u];return d instanceof sa||d instanceof Pl?d.maxValue:0}populatePaintArrays(u,d,v,w,D){for(const F in this.binders){const G=this.binders[F];(G instanceof sa||G instanceof Pl||G instanceof bs)&&G.populatePaintArray(u,d,v,w,D)}}setConstantPatternPositions(u,d){for(const v in this.binders){const w=this.binders[v];w instanceof ml&&w.setConstantPatternPositions(u,d)}}updatePaintArrays(u,d,v,w,D){let F=!1;for(const G in u){const Z=d.getPositions(G);for(const re of Z){const Ae=v.feature(re.index);for(const _e in this.binders){const Re=this.binders[_e];if((Re instanceof sa||Re instanceof Pl||Re instanceof bs)&&Re.expression.isStateDependent===!0){const Le=w.paint.get(_e);Re.expression=Le.value,Re.updatePaintArray(re.start,re.end,Ae,u[G],D),F=!0}}}}return F}defines(){const u=[];for(const d in this.binders){const v=this.binders[d];(v instanceof Js||v instanceof ml)&&u.push(...v.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return u}getBinderAttributes(){const u=[];for(const d in this.binders){const v=this.binders[d];if(v instanceof sa||v instanceof Pl)for(let w=0;w<v.paintVertexAttributes.length;w++)u.push(v.paintVertexAttributes[w].name);else if(v instanceof bs)for(let w=0;w<Bi.members.length;w++)u.push(Bi.members[w].name)}return u}getBinderUniforms(){const u=[];for(const d in this.binders){const v=this.binders[d];if(v instanceof Js||v instanceof ml||v instanceof Pl)for(const w of v.uniformNames)u.push(w)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,d){const v=[];for(const w in this.binders){const D=this.binders[w];if(D instanceof Js||D instanceof ml||D instanceof Pl){for(const F of D.uniformNames)if(d[F]){const G=D.getBinding(u,d[F],F);v.push({name:F,property:w,binding:G})}}}return v}setUniforms(u,d,v,w){for(const{name:D,property:F,binding:G}of d)this.binders[F].setUniform(G,w,v.get(F),D)}updatePaintBuffers(u){this._buffers=[];for(const d in this.binders){const v=this.binders[d];if(u&&v instanceof bs){const w=u.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(v instanceof sa||v instanceof Pl)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(u){for(const d in this.binders){const v=this.binders[d];(v instanceof sa||v instanceof Pl||v instanceof bs)&&v.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const d=this.binders[u];(d instanceof sa||d instanceof Pl||d instanceof bs)&&d.destroy()}}}class el{constructor(u,d,v=()=>!0){this.programConfigurations={};for(const w of u)this.programConfigurations[w.id]=new Qs(w,d,v);this.needsUpload=!1,this._featureMap=new No,this._bufferOffset=0}populatePaintArrays(u,d,v,w,D,F){for(const G in this.programConfigurations)this.programConfigurations[G].populatePaintArrays(u,d,w,D,F);d.id!==void 0&&this._featureMap.add(d.id,v,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,d,v,w){for(const D of v)this.needsUpload=this.programConfigurations[D.id].updatePaintArrays(u,this._featureMap,d,D,w)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function tl(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function Mh(f,u,d){const v={color:{source:Wl,composite:c},number:{source:Yu,composite:Wl}},w=function(D){return{"line-pattern":{source:Rt,composite:Rt},"fill-pattern":{source:Rt,composite:Rt},"fill-extrusion-pattern":{source:Rt,composite:Rt}}[D]}(f);return w&&w[d]||v[u][d]}dr("ConstantBinder",Js),dr("CrossFadedConstantBinder",ml),dr("SourceExpressionBinder",sa),dr("CrossFadedCompositeBinder",bs),dr("CompositeExpressionBinder",Pl),dr("ProgramConfiguration",Qs,{omit:["_buffers"]}),dr("ProgramConfigurationSet",el);const Bd=Math.pow(2,14)-1,Od=-Bd-1;function Sh(f){const u=rt/f.extent,d=f.loadGeometry();for(let v=0;v<d.length;v++){const w=d[v];for(let D=0;D<w.length;D++){const F=w[D],G=Math.round(F.x*u),Z=Math.round(F.y*u);F.x=wt(G,Od,Bd),F.y=wt(Z,Od,Bd),(G<F.x||G>F.x+1||Z<F.y||Z>F.y+1)&&Je("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function ic(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?Sh(f):[]}}const Id=-32768;function Ia(f,u,d,v,w){f.emplaceBack(Id+8*u+v,Id+8*d+w)}class Au{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(d=>d.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new ot,this.indexArray=new _n,this.segments=new wn,this.programConfigurations=new el(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(u,d,v){const w=this.layers[0],D=[];let F=null,G=!1,Z=w.type==="heatmap";if(w.type==="circle"){const Ae=w;F=Ae.layout.get("circle-sort-key"),G=!F.isConstant(),Z=Z||Ae.paint.get("circle-pitch-alignment")==="map"}const re=Z?d.subdivisionGranularity.circle:1;for(const{feature:Ae,id:_e,index:Re,sourceLayerIndex:Le}of u){const je=this.layers[0]._featureFilter.needGeometry,He=ic(Ae,je);if(!this.layers[0]._featureFilter.filter(new Ho(this.zoom),He,v))continue;const at=G?F.evaluate(He,{},v):void 0,vt={id:_e,properties:Ae.properties,type:Ae.type,sourceLayerIndex:Le,index:Re,geometry:je?He.geometry:Sh(Ae),patterns:{},sortKey:at};D.push(vt)}G&&D.sort((Ae,_e)=>Ae.sortKey-_e.sortKey);for(const Ae of D){const{geometry:_e,index:Re,sourceLayerIndex:Le}=Ae,je=u[Re].feature;this.addFeature(Ae,_e,Re,v,re),d.featureIndex.insert(je,_e,Re,Le,this.index)}}update(u,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Un),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,d,v,w,D=1){let F;switch(D){case 1:F=[0,7];break;case 3:F=[0,2,5,7];break;case 5:F=[0,1,3,4,6,7];break;case 7:F=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${D}; valid values are 1, 3, 5, 7.`)}const G=F.length;for(const Z of d)for(const re of Z){const Ae=re.x,_e=re.y;if(Ae<0||Ae>=rt||_e<0||_e>=rt)continue;const Re=this.segments.prepareSegment(G*G,this.layoutVertexArray,this.indexArray,u.sortKey),Le=Re.vertexLength;for(let je=0;je<G;je++)for(let He=0;He<G;He++)Ia(this.layoutVertexArray,Ae,_e,F[He],F[je]);for(let je=0;je<G-1;je++)for(let He=0;He<G-1;He++){const at=Le+je*G+He,vt=Le+(je+1)*G+He;this.indexArray.emplaceBack(at,vt+1,at+1),this.indexArray.emplaceBack(at,vt,vt+1)}Re.vertexLength+=G*G,Re.primitiveLength+=(G-1)*(G-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,{},w)}}function Eh(f,u){for(let d=0;d<f.length;d++)if(Bc(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(Bc(f,u[d]))return!0;return!!Na(f,u)}function _p(f,u,d){return!!Bc(f,u)||!!kd(u,f,d)}function Ec(f,u){if(f.length===1)return od(u,f[0]);for(let d=0;d<u.length;d++){const v=u[d];for(let w=0;w<v.length;w++)if(Bc(f,v[w]))return!0}for(let d=0;d<f.length;d++)if(od(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(Na(f,u[d]))return!0;return!1}function kA(f,u,d){if(f.length>1){if(Na(f,u))return!0;for(let v=0;v<u.length;v++)if(kd(u[v],f,d))return!0}for(let v=0;v<f.length;v++)if(kd(f[v],u,d))return!0;return!1}function Na(f,u){if(f.length===0||u.length===0)return!1;for(let d=0;d<f.length-1;d++){const v=f[d],w=f[d+1];for(let D=0;D<u.length-1;D++)if(Cp(v,w,u[D],u[D+1]))return!0}return!1}function Cp(f,u,d,v){return Mt(f,d,v)!==Mt(u,d,v)&&Mt(f,u,d)!==Mt(f,u,v)}function kd(f,u,d){const v=d*d;if(u.length===1)return f.distSqr(u[0])<v;for(let w=1;w<u.length;w++)if(bp(f,u[w-1],u[w])<v)return!0;return!1}function bp(f,u,d){const v=u.distSqr(d);if(v===0)return f.distSqr(u);const w=((f.x-u.x)*(d.x-u.x)+(f.y-u.y)*(d.y-u.y))/v;return f.distSqr(w<0?u:w>1?d:d.sub(u)._mult(w)._add(u))}function od(f,u){let d,v,w,D=!1;for(let F=0;F<f.length;F++){d=f[F];for(let G=0,Z=d.length-1;G<d.length;Z=G++)v=d[G],w=d[Z],v.y>u.y!=w.y>u.y&&u.x<(w.x-v.x)*(u.y-v.y)/(w.y-v.y)+v.x&&(D=!D)}return D}function Bc(f,u){let d=!1;for(let v=0,w=f.length-1;v<f.length;w=v++){const D=f[v],F=f[w];D.y>u.y!=F.y>u.y&&u.x<(F.x-D.x)*(u.y-D.y)/(F.y-D.y)+D.x&&(d=!d)}return d}function um(f,u,d){const v=d[0],w=d[2];if(f.x<v.x&&u.x<v.x||f.x>w.x&&u.x>w.x||f.y<v.y&&u.y<v.y||f.y>w.y&&u.y>w.y)return!1;const D=Mt(f,u,d[0]);return D!==Mt(f,u,d[1])||D!==Mt(f,u,d[2])||D!==Mt(f,u,d[3])}function oc(f,u,d){const v=u.paint.get(f).value;return v.kind==="constant"?v.value:d.programConfigurations.get(u.id).getMaxValue(f)}function Td(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Bh(f,u,d,v,w){if(!u[0]&&!u[1])return f;const D=k.convert(u)._mult(w);d==="viewport"&&D._rotate(-v);const F=[];for(let G=0;G<f.length;G++)F.push(f[G].sub(D));return F}let xp,sd;dr("CircleBucket",Au,{omit:["layers"]});var Uf={get paint(){return sd=sd||new Cs({"circle-radius":new Hr(Ye.paint_circle["circle-radius"]),"circle-color":new Hr(Ye.paint_circle["circle-color"]),"circle-blur":new Hr(Ye.paint_circle["circle-blur"]),"circle-opacity":new Hr(Ye.paint_circle["circle-opacity"]),"circle-translate":new hr(Ye.paint_circle["circle-translate"]),"circle-translate-anchor":new hr(Ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new hr(Ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new hr(Ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Hr(Ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Hr(Ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Hr(Ye.paint_circle["circle-stroke-opacity"])})},get layout(){return xp=xp||new Cs({"circle-sort-key":new Hr(Ye.layout_circle["circle-sort-key"])})}};class zf extends su{constructor(u){super(u,Uf)}createBucket(u){return new Au(u)}queryRadius(u){const d=u;return oc("circle-radius",this,d)+oc("circle-stroke-width",this,d)+Td(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:v,geometry:w,transform:D,pixelsToTileUnits:F,pixelPosMatrix:G}){const Z=Bh(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-D.bearingInRadians,F),re=this.paint.get("circle-radius").evaluate(d,v)+this.paint.get("circle-stroke-width").evaluate(d,v),Ae=this.paint.get("circle-pitch-alignment")==="map",_e=Ae?Z:function(Le,je){return Le.map(He=>wp(He,je))}(Z,G),Re=Ae?re*F:re;for(const Le of w)for(const je of Le){const He=Ae?je:wp(je,G);let at=Re;const vt=pe([],[je.x,je.y,0,1],G);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?at*=vt[3]/D.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(at*=D.cameraToCenterDistance/vt[3]),_p(_e,He,at))return!0}return!1}}function wp(f,u){const d=pe([],[f.x,f.y,0,1],u);return new k(d[0]/d[3],d[1]/d[3])}class Oh extends Au{}let af;dr("HeatmapBucket",Oh,{omit:["layers"]});var ql={get paint(){return af=af||new Cs({"heatmap-radius":new Hr(Ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Hr(Ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new hr(Ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bu(Ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new hr(Ye.paint_heatmap["heatmap-opacity"])})}};function Rl(f,{width:u,height:d},v,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==u*d*v)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${u*d*v}`)}else w=new Uint8Array(u*d*v);return f.width=u,f.height=d,f.data=w,f}function Am(f,{width:u,height:d},v){if(u===f.width&&d===f.height)return;const w=Rl({},{width:u,height:d},v);jf(f,w,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,d)},v),f.width=u,f.height=d,f.data=w.data}function jf(f,u,d,v,w,D){if(w.width===0||w.height===0)return u;if(w.width>f.width||w.height>f.height||d.x>f.width-w.width||d.y>f.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>u.width||w.height>u.height||v.x>u.width-w.width||v.y>u.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const F=f.data,G=u.data;if(F===G)throw new Error("srcData equals dstData, so image is already copied");for(let Z=0;Z<w.height;Z++){const re=((d.y+Z)*f.width+d.x)*D,Ae=((v.y+Z)*u.width+v.x)*D;for(let _e=0;_e<w.width*D;_e++)G[Ae+_e]=F[re+_e]}return u}class Oo{constructor(u,d){Rl(this,u,1,d)}resize(u){Am(this,u,1)}clone(){return new Oo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,v,w,D){jf(u,d,v,w,D,1)}}class Hu{constructor(u,d){Rl(this,u,4,d)}resize(u){Am(this,u,4)}replace(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Hu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,v,w,D){jf(u,d,v,w,D,4)}}function lf(f){const u={},d=f.resolution||256,v=f.clips?f.clips.length:1,w=f.image||new Hu({width:d,height:v});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const D=(F,G,Z)=>{u[f.evaluationKey]=Z;const re=f.expression.evaluate(u);w.data[F+G+0]=Math.floor(255*re.r/re.a),w.data[F+G+1]=Math.floor(255*re.g/re.a),w.data[F+G+2]=Math.floor(255*re.b/re.a),w.data[F+G+3]=Math.floor(255*re.a)};if(f.clips)for(let F=0,G=0;F<v;++F,G+=4*d)for(let Z=0,re=0;Z<d;Z++,re+=4){const Ae=Z/(d-1),{start:_e,end:Re}=f.clips[F];D(G,re,_e*(1-Ae)+Re*Ae)}else for(let F=0,G=0;F<d;F++,G+=4)D(0,G,F/(d-1));return w}dr("AlphaImage",Oo),dr("RGBAImage",Hu);const Ih="big-fb";class TA extends su{createBucket(u){return new Oh(u)}constructor(u){super(u,ql),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=lf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Ih)&&this.heatmapFbos.delete(Ih)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Pd;var Mp={get paint(){return Pd=Pd||new Cs({"hillshade-illumination-direction":new hr(Ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new hr(Ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new hr(Ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new hr(Ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new hr(Ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new hr(Ye.paint_hillshade["hillshade-accent-color"])})}};class Oc extends su{constructor(u){super(u,Mp)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const uf=Os([{name:"a_pos",components:2,type:"Int16"}],4),{members:Af}=uf;function ad(f,u,d){const v=d.patternDependencies;let w=!1;for(const D of u){const F=D.paint.get(`${f}-pattern`);F.isConstant()||(w=!0);const G=F.constantOr(null);G&&(w=!0,v[G.to]=!0,v[G.from]=!0)}return w}function kh(f,u,d,v,w){const D=w.patternDependencies;for(const F of u){const G=F.paint.get(`${f}-pattern`).value;if(G.kind!=="constant"){let Z=G.evaluate({zoom:v-1},d,{},w.availableImages),re=G.evaluate({zoom:v},d,{},w.availableImages),Ae=G.evaluate({zoom:v+1},d,{},w.availableImages);Z=Z&&Z.name?Z.name:Z,re=re&&re.name?re.name:re,Ae=Ae&&Ae.name?Ae.name:Ae,D[Z]=!0,D[re]=!0,D[Ae]=!0,d.patterns[F.id]={min:Z,mid:re,max:Ae}}}return d}function Hc(f,u,d,v,w){let D;if(w===function(F,G,Z,re){let Ae=0;for(let _e=G,Re=Z-re;_e<Z;_e+=re)Ae+=(F[Re]-F[_e])*(F[_e+1]+F[Re+1]),Re=_e;return Ae}(f,u,d,v)>0)for(let F=u;F<d;F+=v)D=ve(F/v|0,f[F],f[F+1],D);else for(let F=d-v;F>=u;F-=v)D=ve(F/v|0,f[F],f[F+1],D);return D&&y(D,D.next)&&(Be(D),D=D.next),D}function di(f,u){if(!f)return f;u||(u=f);let d,v=f;do if(d=!1,v.steiner||!y(v,v.next)&&A(v.prev,v,v.next)!==0)v=v.next;else{if(Be(v),v=u=v.prev,v===v.next)break;d=!0}while(d||v!==u);return u}function Zc(f,u,d,v,w,D,F){if(!f)return;!F&&D&&function(Z,re,Ae,_e){let Re=Z;do Re.z===0&&(Re.z=da(Re.x,Re.y,re,Ae,_e)),Re.prevZ=Re.prev,Re.nextZ=Re.next,Re=Re.next;while(Re!==Z);Re.prevZ.nextZ=null,Re.prevZ=null,function(Le){let je,He=1;do{let at,vt=Le;Le=null;let jt=null;for(je=0;vt;){je++;let St=vt,Ke=0;for(let It=0;It<He&&(Ke++,St=St.nextZ,St);It++);let nt=He;for(;Ke>0||nt>0&&St;)Ke!==0&&(nt===0||!St||vt.z<=St.z)?(at=vt,vt=vt.nextZ,Ke--):(at=St,St=St.nextZ,nt--),jt?jt.nextZ=at:Le=at,at.prevZ=jt,jt=at;vt=St}jt.nextZ=null,He*=2}while(je>1)}(Re)}(f,v,w,D);let G=f;for(;f.prev!==f.next;){const Z=f.prev,re=f.next;if(D?Th(f,v,w,D):rs(f))u.push(Z.i,f.i,re.i),Be(f),f=re.next,G=re.next;else if((f=re)===G){F?F===1?Zc(f=Sp(di(f),u),u,d,v,w,D,2):F===2&&Su(f,u,d,v,w,D):Zc(di(f),u,d,v,w,D,1);break}}}function rs(f){const u=f.prev,d=f,v=f.next;if(A(u,d,v)>=0)return!1;const w=u.x,D=d.x,F=v.x,G=u.y,Z=d.y,re=v.y,Ae=Math.min(w,D,F),_e=Math.min(G,Z,re),Re=Math.max(w,D,F),Le=Math.max(G,Z,re);let je=v.next;for(;je!==u;){if(je.x>=Ae&&je.x<=Re&&je.y>=_e&&je.y<=Le&&nl(w,G,D,Z,F,re,je.x,je.y)&&A(je.prev,je,je.next)>=0)return!1;je=je.next}return!0}function Th(f,u,d,v){const w=f.prev,D=f,F=f.next;if(A(w,D,F)>=0)return!1;const G=w.x,Z=D.x,re=F.x,Ae=w.y,_e=D.y,Re=F.y,Le=Math.min(G,Z,re),je=Math.min(Ae,_e,Re),He=Math.max(G,Z,re),at=Math.max(Ae,_e,Re),vt=da(Le,je,u,d,v),jt=da(He,at,u,d,v);let St=f.prevZ,Ke=f.nextZ;for(;St&&St.z>=vt&&Ke&&Ke.z<=jt;){if(St.x>=Le&&St.x<=He&&St.y>=je&&St.y<=at&&St!==w&&St!==F&&nl(G,Ae,Z,_e,re,Re,St.x,St.y)&&A(St.prev,St,St.next)>=0||(St=St.prevZ,Ke.x>=Le&&Ke.x<=He&&Ke.y>=je&&Ke.y<=at&&Ke!==w&&Ke!==F&&nl(G,Ae,Z,_e,re,Re,Ke.x,Ke.y)&&A(Ke.prev,Ke,Ke.next)>=0))return!1;Ke=Ke.nextZ}for(;St&&St.z>=vt;){if(St.x>=Le&&St.x<=He&&St.y>=je&&St.y<=at&&St!==w&&St!==F&&nl(G,Ae,Z,_e,re,Re,St.x,St.y)&&A(St.prev,St,St.next)>=0)return!1;St=St.prevZ}for(;Ke&&Ke.z<=jt;){if(Ke.x>=Le&&Ke.x<=He&&Ke.y>=je&&Ke.y<=at&&Ke!==w&&Ke!==F&&nl(G,Ae,Z,_e,re,Re,Ke.x,Ke.y)&&A(Ke.prev,Ke,Ke.next)>=0)return!1;Ke=Ke.nextZ}return!0}function Sp(f,u){let d=f;do{const v=d.prev,w=d.next.next;!y(v,w)&&O(v,d,d.next,w)&&H(v,w)&&H(w,v)&&(u.push(v.i,d.i,w.i),Be(d),Be(d.next),d=f=w),d=d.next}while(d!==f);return di(d)}function Su(f,u,d,v,w,D){let F=f;do{let G=F.next.next;for(;G!==F.prev;){if(F.i!==G.i&&Ep(F,G)){let Z=le(F,G);return F=di(F,F.next),Z=di(Z,Z.next),Zc(F,u,d,v,w,D,0),void Zc(Z,u,d,v,w,D,0)}G=G.next}F=F.next}while(F!==f)}function Ym(f,u){let d=f.x-u.x;return d===0&&(d=f.y-u.y,d===0)&&(d=(f.next.y-f.y)/(f.next.x-f.x)-(u.next.y-u.y)/(u.next.x-u.x)),d}function gl(f,u){const d=function(w,D){let F=D;const G=w.x,Z=w.y;let re,Ae=-1/0;if(y(w,F))return F;do{if(y(w,F.next))return F.next;if(Z<=F.y&&Z>=F.next.y&&F.next.y!==F.y){const He=F.x+(Z-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(He<=G&&He>Ae&&(Ae=He,re=F.x<F.next.x?F:F.next,He===G))return re}F=F.next}while(F!==D);if(!re)return null;const _e=re,Re=re.x,Le=re.y;let je=1/0;F=re;do{if(G>=F.x&&F.x>=Re&&G!==F.x&&cf(Z<Le?G:Ae,Z,Re,Le,Z<Le?Ae:G,Z,F.x,F.y)){const He=Math.abs(Z-F.y)/(G-F.x);H(F,w)&&(He<je||He===je&&(F.x>re.x||F.x===re.x&&cm(re,F)))&&(re=F,je=He)}F=F.next}while(F!==_e);return re}(f,u);if(!d)return u;const v=le(d,f);return di(v,v.next),di(d,d.next)}function cm(f,u){return A(f.prev,f,u.prev)<0&&A(u.next,f,f.next)<0}function da(f,u,d,v,w){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*w|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-v)*w|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function hm(f){let u=f,d=f;do(u.x<d.x||u.x===d.x&&u.y<d.y)&&(d=u),u=u.next;while(u!==f);return d}function cf(f,u,d,v,w,D,F,G){return(w-F)*(u-G)>=(f-F)*(D-G)&&(f-F)*(v-G)>=(d-F)*(u-G)&&(d-F)*(D-G)>=(w-F)*(v-G)}function nl(f,u,d,v,w,D,F,G){return!(f===F&&u===G)&&cf(f,u,d,v,w,D,F,G)}function Ep(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!function(d,v){let w=d;do{if(w.i!==d.i&&w.next.i!==d.i&&w.i!==v.i&&w.next.i!==v.i&&O(w,w.next,d,v))return!0;w=w.next}while(w!==d);return!1}(f,u)&&(H(f,u)&&H(u,f)&&function(d,v){let w=d,D=!1;const F=(d.x+v.x)/2,G=(d.y+v.y)/2;do w.y>G!=w.next.y>G&&w.next.y!==w.y&&F<(w.next.x-w.x)*(G-w.y)/(w.next.y-w.y)+w.x&&(D=!D),w=w.next;while(w!==d);return D}(f,u)&&(A(f.prev,f,u.prev)||A(f,u.prev,u))||y(f,u)&&A(f.prev,f,f.next)>0&&A(u.prev,u,u.next)>0)}function A(f,u,d){return(u.y-f.y)*(d.x-u.x)-(u.x-f.x)*(d.y-u.y)}function y(f,u){return f.x===u.x&&f.y===u.y}function O(f,u,d,v){const w=K(A(f,u,d)),D=K(A(f,u,v)),F=K(A(d,v,f)),G=K(A(d,v,u));return w!==D&&F!==G||!(w!==0||!E(f,d,u))||!(D!==0||!E(f,v,u))||!(F!==0||!E(d,f,v))||!(G!==0||!E(d,u,v))}function E(f,u,d){return u.x<=Math.max(f.x,d.x)&&u.x>=Math.min(f.x,d.x)&&u.y<=Math.max(f.y,d.y)&&u.y>=Math.min(f.y,d.y)}function K(f){return f>0?1:f<0?-1:0}function H(f,u){return A(f.prev,f,f.next)<0?A(f,u,f.next)>=0&&A(f,f.prev,u)>=0:A(f,u,f.prev)<0||A(f,f.next,u)<0}function le(f,u){const d=Fe(f.i,f.x,f.y),v=Fe(u.i,u.x,u.y),w=f.next,D=u.prev;return f.next=u,u.prev=f,d.next=w,w.prev=d,v.next=d,d.prev=v,D.next=v,v.prev=D,v}function ve(f,u,d,v){const w=Fe(f,u,d);return v?(w.next=v.next,w.prev=v,v.next.prev=w,v.next=w):(w.prev=w,w.next=w),w}function Be(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Fe(f,u,d){return{i:f,x:u,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class ht{constructor(u,d){if(d>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=d}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class xt{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}xt.noSubdivision=new xt({fill:new ht(0,0),line:new ht(0,0),tile:new ht(0,0),stencil:new ht(0,0),circle:1}),dr("SubdivisionGranularityExpression",ht),dr("SubdivisionGranularitySetting",xt);const Xt=-32768,Qt=32767;class xn{constructor(u,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=rt/u,this._canonical=d}_getKey(u,d){return(u+=32768)<<16|(d+=32768)<<0}_vertexToIndex(u,d){if(u<-32768||d<-32768||u>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const v=0|Math.round(u),w=0|Math.round(d),D=this._getKey(v,w);if(this._vertexDictionary.has(D))return this._vertexDictionary.get(D);const F=this._vertexBuffer.length/2;return this._vertexDictionary.set(D,F),this._vertexBuffer.push(v,w),F}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(w,D){const F=[];for(let G=0;G<D.length;G+=3){const Z=D[G],re=D[G+1],Ae=D[G+2],_e=w[2*Z],Re=w[2*Z+1];(w[2*re]-_e)*(w[2*Ae+1]-Re)-(w[2*re+1]-Re)*(w[2*Ae]-_e)>0?(F.push(Z),F.push(Ae),F.push(re)):(F.push(Z),F.push(re),F.push(Ae))}return F}(this._vertexBuffer,u);const d=[],v=u.length;for(let w=0;w<v;w+=3){const D=[u[w+0],u[w+1],u[w+2]],F=[this._vertexBuffer[2*u[w+0]+0],this._vertexBuffer[2*u[w+0]+1],this._vertexBuffer[2*u[w+1]+0],this._vertexBuffer[2*u[w+1]+1],this._vertexBuffer[2*u[w+2]+0],this._vertexBuffer[2*u[w+2]+1]];let G=1/0,Z=1/0,re=-1/0,Ae=-1/0;for(let He=0;He<3;He++){const at=F[2*He],vt=F[2*He+1];G=Math.min(G,at),re=Math.max(re,at),Z=Math.min(Z,vt),Ae=Math.max(Ae,vt)}if(G===re||Z===Ae)continue;const _e=Math.floor(G/this._granularityCellSize),Re=Math.ceil(re/this._granularityCellSize),Le=Math.floor(Z/this._granularityCellSize),je=Math.ceil(Ae/this._granularityCellSize);if(_e!==Re||Le!==je)for(let He=Le;He<je;He++){const at=this._scanlineGenerateVertexRingForCellRow(He,F,D);Jn(this._vertexBuffer,at,d)}else d.push(...D)}return d}_scanlineGenerateVertexRingForCellRow(u,d,v){const w=u*this._granularityCellSize,D=w+this._granularityCellSize,F=[];for(let G=0;G<3;G++){const Z=d[2*G],re=d[2*G+1],Ae=d[2*(G+1)%6],_e=d[(2*(G+1)+1)%6],Re=d[2*(G+2)%6],Le=d[(2*(G+2)+1)%6],je=Ae-Z,He=_e-re,at=je===0,vt=He===0,jt=(w-re)/He,St=(D-re)/He,Ke=Math.min(jt,St),nt=Math.max(jt,St);if(!vt&&(Ke>=1||nt<=0)||vt&&(re<w||re>D)){_e>=w&&_e<=D&&F.push(v[(G+1)%3]);continue}!vt&&Ke>0&&F.push(this._vertexToIndex(Z+je*Ke,re+He*Ke));const It=Z+je*Math.max(Ke,0),un=Z+je*Math.min(nt,1);at||this._generateIntraEdgeVertices(F,Z,re,Ae,_e,It,un),!vt&&nt<1&&F.push(this._vertexToIndex(Z+je*nt,re+He*nt)),(vt||_e>=w&&_e<=D)&&F.push(v[(G+1)%3]),!vt&&(_e<=w||_e>=D)&&this._generateInterEdgeVertices(F,Z,re,Ae,_e,Re,Le,un,w,D)}return F}_generateIntraEdgeVertices(u,d,v,w,D,F,G){const Z=w-d,re=D-v,Ae=re===0,_e=Ae?Math.min(d,w):Math.min(F,G),Re=Ae?Math.max(d,w):Math.max(F,G),Le=Math.floor(_e/this._granularityCellSize)+1,je=Math.ceil(Re/this._granularityCellSize)-1;if(Ae?d<w:F<G)for(let He=Le;He<=je;He++){const at=He*this._granularityCellSize;u.push(this._vertexToIndex(at,v+re*(at-d)/Z))}else for(let He=je;He>=Le;He--){const at=He*this._granularityCellSize;u.push(this._vertexToIndex(at,v+re*(at-d)/Z))}}_generateInterEdgeVertices(u,d,v,w,D,F,G,Z,re,Ae){const _e=D-v,Re=F-w,Le=G-D,je=(re-D)/Le,He=(Ae-D)/Le,at=Math.min(je,He),vt=Math.max(je,He),jt=w+Re*at;let St=Math.floor(Math.min(jt,Z)/this._granularityCellSize)+1,Ke=Math.ceil(Math.max(jt,Z)/this._granularityCellSize)-1,nt=Z<jt;const It=Le===0;if(It&&(G===re||G===Ae))return;if(It||at>=1||vt<=0){const Fn=v-G,mn=F+(d-F)*Math.min((re-G)/Fn,(Ae-G)/Fn);St=Math.floor(Math.min(mn,Z)/this._granularityCellSize)+1,Ke=Math.ceil(Math.max(mn,Z)/this._granularityCellSize)-1,nt=Z<mn}const un=_e>0?Ae:re;if(nt)for(let Fn=St;Fn<=Ke;Fn++)u.push(this._vertexToIndex(Fn*this._granularityCellSize,un));else for(let Fn=Ke;Fn>=St;Fn--)u.push(this._vertexToIndex(Fn*this._granularityCellSize,un))}_generateOutline(u){const d=[];for(const v of u){const w=$n(v,this._granularity,!0),D=this._pointArrayToIndices(w),F=[];for(let G=1;G<D.length;G++)F.push(D[G-1]),F.push(D[G]);d.push(F)}return d}_handlePoles(u){let d=!1,v=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(v=!0)),(d||v)&&this._fillPoles(u,d,v)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let d=0;d<u.length;d+=2){const v=u[d+1];v===Xt&&(u[d+1]=-32767),v===Qt&&(u[d+1]=32766)}}_generatePoleQuad(u,d,v,w,D,F){w>D!=(F===Xt)?(u.push(d),u.push(v),u.push(this._vertexToIndex(w,F)),u.push(v),u.push(this._vertexToIndex(D,F)),u.push(this._vertexToIndex(w,F))):(u.push(v),u.push(d),u.push(this._vertexToIndex(w,F)),u.push(this._vertexToIndex(D,F)),u.push(v),u.push(this._vertexToIndex(w,F)))}_fillPoles(u,d,v){const w=this._vertexBuffer,D=rt,F=u.length;for(let G=2;G<F;G+=3){const Z=u[G-2],re=u[G-1],Ae=u[G],_e=w[2*Z],Re=w[2*Z+1],Le=w[2*re],je=w[2*re+1],He=w[2*Ae],at=w[2*Ae+1];d&&(Re===0&&je===0&&this._generatePoleQuad(u,Z,re,_e,Le,Xt),je===0&&at===0&&this._generatePoleQuad(u,re,Ae,Le,He,Xt),at===0&&Re===0&&this._generatePoleQuad(u,Ae,Z,He,_e,Xt)),v&&(Re===D&&je===D&&this._generatePoleQuad(u,Z,re,_e,Le,Qt),je===D&&at===D&&this._generatePoleQuad(u,re,Ae,Le,He,Qt),at===D&&Re===D&&this._generatePoleQuad(u,Ae,Z,He,_e,Qt))}}_initializeVertices(u){for(let d=0;d<u.length;d+=2)this._vertexToIndex(u[d],u[d+1])}subdividePolygonInternal(u,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:v,holeIndices:w}=function(G){const Z=[],re=[];for(const Ae of G)if(Ae.length!==0){Ae!==G[0]&&Z.push(re.length/2);for(let _e=0;_e<Ae.length;_e++)re.push(Ae[_e].x),re.push(Ae[_e].y)}return{flattened:re,holeIndices:Z}}(u);let D;this._initializeVertices(v);try{const G=function(re,Ae,_e=2){const Re=Ae&&Ae.length,Le=Re?Ae[0]*_e:re.length;let je=Hc(re,0,Le,_e,!0);const He=[];if(!je||je.next===je.prev)return He;let at,vt,jt;if(Re&&(je=function(St,Ke,nt,It){const un=[];for(let Fn=0,mn=Ke.length;Fn<mn;Fn++){const bn=Hc(St,Ke[Fn]*It,Fn<mn-1?Ke[Fn+1]*It:St.length,It,!1);bn===bn.next&&(bn.steiner=!0),un.push(hm(bn))}un.sort(Ym);for(let Fn=0;Fn<un.length;Fn++)nt=gl(un[Fn],nt);return nt}(re,Ae,je,_e)),re.length>80*_e){at=1/0,vt=1/0;let St=-1/0,Ke=-1/0;for(let nt=_e;nt<Le;nt+=_e){const It=re[nt],un=re[nt+1];It<at&&(at=It),un<vt&&(vt=un),It>St&&(St=It),un>Ke&&(Ke=un)}jt=Math.max(St-at,Ke-vt),jt=jt!==0?32767/jt:0}return Zc(je,He,_e,at,vt,jt,0),He}(v,w),Z=this._convertIndices(v,G);D=this._subdivideTrianglesScanline(Z)}catch(G){console.error(G)}let F=[];return d&&(F=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(D),{verticesFlattened:this._vertexBuffer,indicesTriangles:D,indicesLineList:F}}_convertIndices(u,d){const v=[];for(let w=0;w<d.length;w++)v.push(this._vertexToIndex(u[2*d[w]],u[2*d[w]+1]));return v}_pointArrayToIndices(u){const d=[];for(let v=0;v<u.length;v++){const w=u[v];d.push(this._vertexToIndex(w.x,w.y))}return d}}function Rn(f,u,d,v=!0){return new xn(d,u).subdividePolygonInternal(f,v)}function $n(f,u,d=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const v=f[0],w=f[f.length-1],D=d&&(v.x!==w.x||v.y!==w.y);if(u<2)return D?[...f,f[0]]:[...f];const F=Math.floor(rt/u),G=[];G.push(new k(f[0].x,f[0].y));const Z=f.length,re=D?Z:Z-1;for(let Ae=0;Ae<re;Ae++){const _e=f[Ae],Re=Ae<Z-1?f[Ae+1]:f[0],Le=_e.x,je=_e.y,He=Re.x,at=Re.y,vt=Le!==He,jt=je!==at;if(!vt&&!jt)continue;const St=He-Le,Ke=at-je,nt=Math.abs(St),It=Math.abs(Ke);let un=Le,Fn=je;for(;;){const bn=St>0?(Math.floor(un/F)+1)*F:(Math.ceil(un/F)-1)*F,Hn=Ke>0?(Math.floor(Fn/F)+1)*F:(Math.ceil(Fn/F)-1)*F,Ln=Math.abs(un-bn),sr=Math.abs(Fn-Hn),Bn=Math.abs(un-He),Gr=Math.abs(Fn-at),jr=vt?Ln/nt:Number.POSITIVE_INFINITY,Wr=jt?sr/It:Number.POSITIVE_INFINITY;if((Bn<=Ln||!vt)&&(Gr<=sr||!jt))break;if(jr<Wr&&vt||!jt){un=bn,Fn+=Ke*jr;const ei=new k(un,Math.round(Fn));G[G.length-1].x===ei.x&&G[G.length-1].y===ei.y||G.push(ei)}else{un+=St*Wr,Fn=Hn;const ei=new k(Math.round(un),Fn);G[G.length-1].x===ei.x&&G[G.length-1].y===ei.y||G.push(ei)}}const mn=new k(He,at);G[G.length-1].x===mn.x&&G[G.length-1].y===mn.y||G.push(mn)}return G}function Jn(f,u,d){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let v=0,w=f[2*u[0]];for(let Z=1;Z<u.length;Z++){const re=f[2*u[Z]];re<w&&(w=re,v=Z)}const D=u.length;let F=v,G=(F+1)%D;for(;;){const Z=F-1>=0?F-1:D-1,re=(G+1)%D,Ae=f[2*u[Z]],_e=f[2*u[re]],Re=f[2*u[F]],Le=f[2*u[F]+1],je=f[2*u[G]+1];let He=!1;if(Ae<_e)He=!0;else if(Ae>_e)He=!1;else{const at=je-Le,vt=-(f[2*u[G]]-Re),jt=Le<je?1:-1;((Ae-Re)*at+(f[2*u[Z]+1]-Le)*vt)*jt>((_e-Re)*at+(f[2*u[re]+1]-Le)*vt)*jt&&(He=!0)}if(He){const at=u[Z],vt=u[F],jt=u[G];at!==vt&&at!==jt&&vt!==jt&&d.push(jt,vt,at),F--,F<0&&(F=D-1)}else{const at=u[re],vt=u[F],jt=u[G];at!==vt&&at!==jt&&vt!==jt&&d.push(jt,vt,at),G++,G>=D&&(G=0)}if(Z===re)break}}function yr(f,u,d,v,w,D,F,G,Z){const re=w.length/2,Ae=F&&G&&Z;if(re<wn.MAX_VERTEX_ARRAY_LENGTH){const _e=u.prepareSegment(re,d,v),Re=_e.vertexLength;for(let He=0;He<D.length;He+=3)v.emplaceBack(Re+D[He],Re+D[He+1],Re+D[He+2]);let Le,je;_e.vertexLength+=re,_e.primitiveLength+=D.length/3,Ae&&(je=F.prepareSegment(re,d,G),Le=je.vertexLength,je.vertexLength+=re);for(let He=0;He<w.length;He+=2)f(w[He],w[He+1]);if(Ae)for(let He=0;He<Z.length;He++){const at=Z[He];for(let vt=1;vt<at.length;vt+=2)G.emplaceBack(Le+at[vt-1],Le+at[vt]);je.primitiveLength+=at.length/2}}else(function(_e,Re,Le,je,He,at){const vt=[];for(let It=0;It<je.length/2;It++)vt.push(-1);const jt={count:0};let St=0,Ke=_e.getOrCreateLatestSegment(Re,Le),nt=Ke.vertexLength;for(let It=2;It<He.length;It+=3){const un=He[It-2],Fn=He[It-1],mn=He[It];let bn=vt[un]<St,Hn=vt[Fn]<St,Ln=vt[mn]<St;Ke.vertexLength+((bn?1:0)+(Hn?1:0)+(Ln?1:0))>wn.MAX_VERTEX_ARRAY_LENGTH&&(Ke=_e.createNewSegment(Re,Le),St=jt.count,bn=!0,Hn=!0,Ln=!0,nt=0);const sr=ar(vt,je,at,jt,un,bn,Ke),Bn=ar(vt,je,at,jt,Fn,Hn,Ke),Gr=ar(vt,je,at,jt,mn,Ln,Ke);Le.emplaceBack(nt+sr-St,nt+Bn-St,nt+Gr-St),Ke.primitiveLength++}})(u,d,v,w,D,f),Ae&&function(_e,Re,Le,je,He,at){const vt=[];for(let It=0;It<je.length/2;It++)vt.push(-1);const jt={count:0};let St=0,Ke=_e.getOrCreateLatestSegment(Re,Le),nt=Ke.vertexLength;for(let It=0;It<He.length;It++){const un=He[It];for(let Fn=1;Fn<He[It].length;Fn+=2){const mn=un[Fn-1],bn=un[Fn];let Hn=vt[mn]<St,Ln=vt[bn]<St;Ke.vertexLength+((Hn?1:0)+(Ln?1:0))>wn.MAX_VERTEX_ARRAY_LENGTH&&(Ke=_e.createNewSegment(Re,Le),St=jt.count,Hn=!0,Ln=!0,nt=0);const sr=ar(vt,je,at,jt,mn,Hn,Ke),Bn=ar(vt,je,at,jt,bn,Ln,Ke);Le.emplaceBack(nt+sr-St,nt+Bn-St),Ke.primitiveLength++}}}(F,d,G,w,Z,f),u.forceNewSegmentOnNextPrepare(),F==null||F.forceNewSegmentOnNextPrepare()}function ar(f,u,d,v,w,D,F){if(D){const G=v.count;return d(u[2*w],u[2*w+1]),f[w]=v.count,v.count++,F.vertexLength++,G}return f[w]}class Lr{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(d=>d.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ct,this.indexArray=new _n,this.indexArray2=new gn,this.programConfigurations=new el(u.layers,u.zoom),this.segments=new wn,this.segments2=new wn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(u,d,v){this.hasPattern=ad("fill",this.layers,d);const w=this.layers[0].layout.get("fill-sort-key"),D=!w.isConstant(),F=[];for(const{feature:G,id:Z,index:re,sourceLayerIndex:Ae}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=ic(G,_e);if(!this.layers[0]._featureFilter.filter(new Ho(this.zoom),Re,v))continue;const Le=D?w.evaluate(Re,{},v,d.availableImages):void 0,je={id:Z,properties:G.properties,type:G.type,sourceLayerIndex:Ae,index:re,geometry:_e?Re.geometry:Sh(G),patterns:{},sortKey:Le};F.push(je)}D&&F.sort((G,Z)=>G.sortKey-Z.sortKey);for(const G of F){const{geometry:Z,index:re,sourceLayerIndex:Ae}=G;if(this.hasPattern){const _e=kh("fill",this.layers,G,this.zoom,d);this.patternFeatures.push(_e)}else this.addFeature(G,Z,re,v,{},d.subdivisionGranularity);d.featureIndex.insert(u[re].feature,Z,re,Ae,this.index)}}update(u,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,v)}addFeatures(u,d,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Af),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,d,v,w,D,F){for(const G of Fc(d,500)){const Z=Rn(G,w,F.fill.getGranularityForZoomLevel(w.z)),re=this.layoutVertexArray;yr((Ae,_e)=>{re.emplaceBack(Ae,_e)},this.segments,this.layoutVertexArray,this.indexArray,Z.verticesFlattened,Z.indicesTriangles,this.segments2,this.indexArray2,Z.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,D,w)}}let ai,Nr;dr("FillBucket",Lr,{omit:["layers","patternFeatures"]});var Ji={get paint(){return Nr=Nr||new Cs({"fill-antialias":new hr(Ye.paint_fill["fill-antialias"]),"fill-opacity":new Hr(Ye.paint_fill["fill-opacity"]),"fill-color":new Hr(Ye.paint_fill["fill-color"]),"fill-outline-color":new Hr(Ye.paint_fill["fill-outline-color"]),"fill-translate":new hr(Ye.paint_fill["fill-translate"]),"fill-translate-anchor":new hr(Ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qu(Ye.paint_fill["fill-pattern"])})},get layout(){return ai=ai||new Cs({"fill-sort-key":new Hr(Ye.layout_fill["fill-sort-key"])})}};class Io extends su{constructor(u){super(u,Ji)}recalculate(u,d){super.recalculate(u,d);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Lr(u)}queryRadius(){return Td(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:d,transform:v,pixelsToTileUnits:w}){return Ec(Bh(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-v.bearingInRadians,w),d)}isTileClipped(){return!0}}const Ga=Os([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),aa=Os([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ca}=Ga;var ba,ka,Yl,Wa,xa,ds,yi,Zo={};function la(){if(ka)return ba;ka=1;var f=B();function u(w,D,F,G,Z){this.properties={},this.extent=F,this.type=0,this._pbf=w,this._geometry=-1,this._keys=G,this._values=Z,w.readFields(d,this,D)}function d(w,D,F){w==1?D.id=F.readVarint():w==2?function(G,Z){for(var re=G.readVarint()+G.pos;G.pos<re;){var Ae=Z._keys[G.readVarint()],_e=Z._values[G.readVarint()];Z.properties[Ae]=_e}}(F,D):w==3?D.type=F.readVarint():w==4&&(D._geometry=F.pos)}function v(w){for(var D,F,G=0,Z=0,re=w.length,Ae=re-1;Z<re;Ae=Z++)G+=((F=w[Ae]).x-(D=w[Z]).x)*(D.y+F.y);return G}return ba=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var D,F=w.readVarint()+w.pos,G=1,Z=0,re=0,Ae=0,_e=[];w.pos<F;){if(Z<=0){var Re=w.readVarint();G=7&Re,Z=Re>>3}if(Z--,G===1||G===2)re+=w.readSVarint(),Ae+=w.readSVarint(),G===1&&(D&&_e.push(D),D=[]),D.push(new f(re,Ae));else{if(G!==7)throw new Error("unknown command "+G);D&&D.push(D[0].clone())}}return D&&_e.push(D),_e},u.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var D=w.readVarint()+w.pos,F=1,G=0,Z=0,re=0,Ae=1/0,_e=-1/0,Re=1/0,Le=-1/0;w.pos<D;){if(G<=0){var je=w.readVarint();F=7&je,G=je>>3}if(G--,F===1||F===2)(Z+=w.readSVarint())<Ae&&(Ae=Z),Z>_e&&(_e=Z),(re+=w.readSVarint())<Re&&(Re=re),re>Le&&(Le=re);else if(F!==7)throw new Error("unknown command "+F)}return[Ae,Re,_e,Le]},u.prototype.toGeoJSON=function(w,D,F){var G,Z,re=this.extent*Math.pow(2,F),Ae=this.extent*w,_e=this.extent*D,Re=this.loadGeometry(),Le=u.types[this.type];function je(vt){for(var jt=0;jt<vt.length;jt++){var St=vt[jt];vt[jt]=[360*(St.x+Ae)/re-180,360/Math.PI*Math.atan(Math.exp((180-360*(St.y+_e)/re)*Math.PI/180))-90]}}switch(this.type){case 1:var He=[];for(G=0;G<Re.length;G++)He[G]=Re[G][0];je(Re=He);break;case 2:for(G=0;G<Re.length;G++)je(Re[G]);break;case 3:for(Re=function(vt){var jt=vt.length;if(jt<=1)return[vt];for(var St,Ke,nt=[],It=0;It<jt;It++){var un=v(vt[It]);un!==0&&(Ke===void 0&&(Ke=un<0),Ke===un<0?(St&&nt.push(St),St=[vt[It]]):St.push(vt[It]))}return St&&nt.push(St),nt}(Re),G=0;G<Re.length;G++)for(Z=0;Z<Re[G].length;Z++)je(Re[G][Z])}Re.length===1?Re=Re[0]:Le="Multi"+Le;var at={type:"Feature",geometry:{type:Le,coordinates:Re},properties:this.properties};return"id"in this&&(at.id=this.id),at},ba}function fa(){if(Wa)return Yl;Wa=1;var f=la();function u(v,w){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=v,this._keys=[],this._values=[],this._features=[],v.readFields(d,this,w),this.length=this._features.length}function d(v,w,D){v===15?w.version=D.readVarint():v===1?w.name=D.readString():v===5?w.extent=D.readVarint():v===2?w._features.push(D.pos):v===3?w._keys.push(D.readString()):v===4&&w._values.push(function(F){for(var G=null,Z=F.readVarint()+F.pos;F.pos<Z;){var re=F.readVarint()>>3;G=re===1?F.readString():re===2?F.readFloat():re===3?F.readDouble():re===4?F.readVarint64():re===5?F.readVarint():re===6?F.readSVarint():re===7?F.readBoolean():null}return G}(D))}return Yl=u,u.prototype.feature=function(v){if(v<0||v>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[v];var w=this._pbf.readVarint()+this._pbf.pos;return new f(this._pbf,w,this.extent,this._keys,this._values)},Yl}function Is(){return yi||(yi=1,Zo.VectorTile=function(){if(ds)return xa;ds=1;var f=fa();function u(d,v,w){if(d===3){var D=new f(w,w.readVarint()+w.pos);D.length&&(v[D.name]=D)}}return xa=function(d,v){this.layers=d.readFields(u,{},v)},xa}(),Zo.VectorTileFeature=la(),Zo.VectorTileLayer=fa()),Zo}var Kl=h(Is());const Po=Kl.VectorTileFeature.types,Ph=Math.pow(2,13);function yl(f,u,d,v,w,D,F,G){f.emplaceBack(u,d,2*Math.floor(v*Ph)+F,w*Ph*2,D*Ph*2,Math.round(G))}class PA{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(d=>d.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new yt,this.centroidVertexArray=new At,this.indexArray=new _n,this.programConfigurations=new el(u.layers,u.zoom),this.segments=new wn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(u,d,v){this.features=[],this.hasPattern=ad("fill-extrusion",this.layers,d);for(const{feature:w,id:D,index:F,sourceLayerIndex:G}of u){const Z=this.layers[0]._featureFilter.needGeometry,re=ic(w,Z);if(!this.layers[0]._featureFilter.filter(new Ho(this.zoom),re,v))continue;const Ae={id:D,sourceLayerIndex:G,index:F,geometry:Z?re.geometry:Sh(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(kh("fill-extrusion",this.layers,Ae,this.zoom,d)):this.addFeature(Ae,Ae.geometry,F,v,{},d.subdivisionGranularity),d.featureIndex.insert(w,Ae.geometry,F,G,this.index,!0)}}addFeatures(u,d,v){for(const w of this.features){const{geometry:D}=w;this.addFeature(w,D,w.index,d,v,u.subdivisionGranularity)}}update(u,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ca),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,aa.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,d,v,w,D,F){for(const G of Fc(d,500)){const Z={x:0,y:0,sampleCount:0},re=this.layoutVertexArray.length;this.processPolygon(Z,w,u,G,F);const Ae=this.layoutVertexArray.length-re,_e=Math.floor(Z.x/Z.sampleCount),Re=Math.floor(Z.y/Z.sampleCount);for(let Le=0;Le<Ae;Le++)this.centroidVertexArray.emplaceBack(_e,Re)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,D,w)}processPolygon(u,d,v,w,D){if(w.length<1||_l(w[0]))return;for(const _e of w)_e.length!==0&&Xc(u,_e);const F={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},G=D.fill.getGranularityForZoomLevel(d.z),Z=Po[v.type]==="Polygon";for(const _e of w){if(_e.length===0||_l(_e))continue;const Re=$n(_e,G,Z);this._generateSideFaces(Re,F)}if(!Z)return;const re=Rn(w,d,G,!1),Ae=this.layoutVertexArray;yr((_e,Re)=>{yl(Ae,_e,Re,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,re.verticesFlattened,re.indicesTriangles)}_generateSideFaces(u,d){let v=0;for(let w=1;w<u.length;w++){const D=u[w],F=u[w-1];if(vl(D,F))continue;d.segment.vertexLength+4>wn.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const G=D.sub(F)._perp()._unit(),Z=F.dist(D);v+Z>32768&&(v=0),yl(this.layoutVertexArray,D.x,D.y,G.x,G.y,0,0,v),yl(this.layoutVertexArray,D.x,D.y,G.x,G.y,0,1,v),v+=Z,yl(this.layoutVertexArray,F.x,F.y,G.x,G.y,0,0,v),yl(this.layoutVertexArray,F.x,F.y,G.x,G.y,0,1,v);const re=d.segment.vertexLength;this.indexArray.emplaceBack(re,re+2,re+1),this.indexArray.emplaceBack(re+1,re+2,re+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function Xc(f,u){for(let d=0;d<u.length;d++){const v=u[d];d===u.length-1&&u[0].x===v.x&&u[0].y===v.y||(f.x+=v.x,f.y+=v.y,f.sampleCount++)}}function vl(f,u){return f.x===u.x&&(f.x<0||f.x>rt)||f.y===u.y&&(f.y<0||f.y>rt)}function _l(f){return f.every(u=>u.x<0)||f.every(u=>u.x>rt)||f.every(u=>u.y<0)||f.every(u=>u.y>rt)}let hf;dr("FillExtrusionBucket",PA,{omit:["layers","features"]});var Nf={get paint(){return hf=hf||new Cs({"fill-extrusion-opacity":new hr(Ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Hr(Ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new hr(Ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new hr(Ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qu(Ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Hr(Ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Hr(Ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new hr(Ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Rd extends su{constructor(u){super(u,Nf)}createBucket(u){return new PA(u)}queryRadius(){return Td(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:v,geometry:w,transform:D,pixelsToTileUnits:F,pixelPosMatrix:G}){const Z=Bh(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-D.bearingInRadians,F),re=this.paint.get("fill-extrusion-height").evaluate(d,v),Ae=this.paint.get("fill-extrusion-base").evaluate(d,v),_e=function(Le,je,He){const at=[];for(const vt of Le){const jt=[vt.x,vt.y,0,1];pe(jt,jt,je),at.push(new k(jt[0]/jt[3],jt[1]/jt[3]))}return at}(Z,G),Re=function(Le,je,He,at){const vt=[],jt=[],St=at[8]*je,Ke=at[9]*je,nt=at[10]*je,It=at[11]*je,un=at[8]*He,Fn=at[9]*He,mn=at[10]*He,bn=at[11]*He;for(const Hn of Le){const Ln=[],sr=[];for(const Bn of Hn){const Gr=Bn.x,jr=Bn.y,Wr=at[0]*Gr+at[4]*jr+at[12],ei=at[1]*Gr+at[5]*jr+at[13],Ro=at[2]*Gr+at[6]*jr+at[14],ol=at[3]*Gr+at[7]*jr+at[15],$l=Ro+nt,Xu=ol+It,ud=Wr+un,lc=ei+Fn,Eu=Ro+mn,pA=ol+bn,wl=new k((Wr+St)/Xu,(ei+Ke)/Xu);wl.z=$l/Xu,Ln.push(wl);const cu=new k(ud/pA,lc/pA);cu.z=Eu/pA,sr.push(cu)}vt.push(Ln),jt.push(sr)}return[vt,jt]}(w,Ae,re,G);return function(Le,je,He){let at=1/0;Ec(He,je)&&(at=$m(He,je[0]));for(let vt=0;vt<je.length;vt++){const jt=je[vt],St=Le[vt];for(let Ke=0;Ke<jt.length-1;Ke++){const nt=jt[Ke],It=[nt,jt[Ke+1],St[Ke+1],St[Ke],nt];Eh(He,It)&&(at=Math.min(at,$m(He,It)))}}return at!==1/0&&at}(Re[0],Re[1],_e)}}function df(f,u){return f.x*u.x+f.y*u.y}function $m(f,u){if(f.length===1){let d=0;const v=u[d++];let w;for(;!w||v.equals(w);)if(w=u[d++],!w)return 1/0;for(;d<u.length;d++){const D=u[d],F=f[0],G=w.sub(v),Z=D.sub(v),re=F.sub(v),Ae=df(G,G),_e=df(G,Z),Re=df(Z,Z),Le=df(re,G),je=df(re,Z),He=Ae*Re-_e*_e,at=(Re*Le-_e*je)/He,vt=(Ae*je-_e*Le)/He,jt=v.z*(1-at-vt)+w.z*at+D.z*vt;if(isFinite(jt))return jt}return 1/0}{let d=1/0;for(const v of u)d=Math.min(d,v.z);return d}}const ff=Os([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Vm}=ff,pf=Os([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:RA}=pf,dm=Kl.VectorTileFeature.types,F0=Math.cos(Math.PI/180*37.5),fm=Math.pow(2,14)/.5;class Gf{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(d=>d.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new Et,this.layoutVertexArray2=new Tt,this.indexArray=new _n,this.programConfigurations=new el(u.layers,u.zoom),this.segments=new wn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(u,d,v){this.hasPattern=ad("line",this.layers,d);const w=this.layers[0].layout.get("line-sort-key"),D=!w.isConstant(),F=[];for(const{feature:G,id:Z,index:re,sourceLayerIndex:Ae}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=ic(G,_e);if(!this.layers[0]._featureFilter.filter(new Ho(this.zoom),Re,v))continue;const Le=D?w.evaluate(Re,{},v):void 0,je={id:Z,properties:G.properties,type:G.type,sourceLayerIndex:Ae,index:re,geometry:_e?Re.geometry:Sh(G),patterns:{},sortKey:Le};F.push(je)}D&&F.sort((G,Z)=>G.sortKey-Z.sortKey);for(const G of F){const{geometry:Z,index:re,sourceLayerIndex:Ae}=G;if(this.hasPattern){const _e=kh("line",this.layers,G,this.zoom,d);this.patternFeatures.push(_e)}else this.addFeature(G,Z,re,v,{},d.subdivisionGranularity);d.featureIndex.insert(u[re].feature,Z,re,Ae,this.index)}}update(u,d,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,v)}addFeatures(u,d,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,RA)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Vm),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,d,v,w,D,F){const G=this.layers[0].layout,Z=G.get("line-join").evaluate(u,{}),re=G.get("line-cap"),Ae=G.get("line-miter-limit"),_e=G.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Re of d)this.addLine(Re,u,Z,re,Ae,_e,w,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,D,w)}addLine(u,d,v,w,D,F,G,Z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=$n(u,G?Z.line.getGranularityForZoomLevel(G.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let St=0;St<u.length-1;St++)this.totalDistance+=u[St].dist(u[St+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const re=dm[d.type]==="Polygon";let Ae=u.length;for(;Ae>=2&&u[Ae-1].equals(u[Ae-2]);)Ae--;let _e=0;for(;_e<Ae-1&&u[_e].equals(u[_e+1]);)_e++;if(Ae<(re?3:2))return;v==="bevel"&&(D=1.05);const Re=this.overscaling<=16?15*rt/(512*this.overscaling):0,Le=this.segments.prepareSegment(10*Ae,this.layoutVertexArray,this.indexArray);let je,He,at,vt,jt;this.e1=this.e2=-1,re&&(je=u[Ae-2],jt=u[_e].sub(je)._unit()._perp());for(let St=_e;St<Ae;St++){if(at=St===Ae-1?re?u[_e+1]:void 0:u[St+1],at&&u[St].equals(at))continue;jt&&(vt=jt),je&&(He=je),je=u[St],jt=at?at.sub(je)._unit()._perp():vt,vt=vt||jt;let Ke=vt.add(jt);Ke.x===0&&Ke.y===0||Ke._unit();const nt=vt.x*jt.x+vt.y*jt.y,It=Ke.x*jt.x+Ke.y*jt.y,un=It!==0?1/It:1/0,Fn=2*Math.sqrt(2-2*It),mn=It<F0&&He&&at,bn=vt.x*jt.y-vt.y*jt.x>0;if(mn&&St>_e){const sr=je.dist(He);if(sr>2*Re){const Bn=je.sub(je.sub(He)._mult(Re/sr)._round());this.updateDistance(He,Bn),this.addCurrentVertex(Bn,vt,0,0,Le),He=Bn}}const Hn=He&&at;let Ln=Hn?v:re?"butt":w;if(Hn&&Ln==="round"&&(un<F?Ln="miter":un<=2&&(Ln="fakeround")),Ln==="miter"&&un>D&&(Ln="bevel"),Ln==="bevel"&&(un>2&&(Ln="flipbevel"),un<D&&(Ln="miter")),He&&this.updateDistance(He,je),Ln==="miter")Ke._mult(un),this.addCurrentVertex(je,Ke,0,0,Le);else if(Ln==="flipbevel"){if(un>100)Ke=jt.mult(-1);else{const sr=un*vt.add(jt).mag()/vt.sub(jt).mag();Ke._perp()._mult(sr*(bn?-1:1))}this.addCurrentVertex(je,Ke,0,0,Le),this.addCurrentVertex(je,Ke.mult(-1),0,0,Le)}else if(Ln==="bevel"||Ln==="fakeround"){const sr=-Math.sqrt(un*un-1),Bn=bn?sr:0,Gr=bn?0:sr;if(He&&this.addCurrentVertex(je,vt,Bn,Gr,Le),Ln==="fakeround"){const jr=Math.round(180*Fn/Math.PI/20);for(let Wr=1;Wr<jr;Wr++){let ei=Wr/jr;if(ei!==.5){const ol=ei-.5;ei+=ei*ol*(ei-1)*((1.0904+nt*(nt*(3.55645-1.43519*nt)-3.2452))*ol*ol+(.848013+nt*(.215638*nt-1.06021)))}const Ro=jt.sub(vt)._mult(ei)._add(vt)._unit()._mult(bn?-1:1);this.addHalfVertex(je,Ro.x,Ro.y,!1,bn,0,Le)}}at&&this.addCurrentVertex(je,jt,-Bn,-Gr,Le)}else if(Ln==="butt")this.addCurrentVertex(je,Ke,0,0,Le);else if(Ln==="square"){const sr=He?1:-1;this.addCurrentVertex(je,Ke,sr,sr,Le)}else Ln==="round"&&(He&&(this.addCurrentVertex(je,vt,0,0,Le),this.addCurrentVertex(je,vt,1,1,Le,!0)),at&&(this.addCurrentVertex(je,jt,-1,-1,Le,!0),this.addCurrentVertex(je,jt,0,0,Le)));if(mn&&St<Ae-1){const sr=je.dist(at);if(sr>2*Re){const Bn=je.add(at.sub(je)._mult(Re/sr)._round());this.updateDistance(je,Bn),this.addCurrentVertex(Bn,jt,0,0,Le),je=Bn}}}}addCurrentVertex(u,d,v,w,D,F=!1){const G=d.y*w-d.x,Z=-d.y-d.x*w;this.addHalfVertex(u,d.x+d.y*v,d.y-d.x*v,F,!1,v,D),this.addHalfVertex(u,G,Z,F,!0,-w,D),this.distance>fm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,d,v,w,D,F))}addHalfVertex({x:u,y:d},v,w,D,F,G,Z){const re=.5*(this.lineClips?this.scaledDistance*(fm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(D?1:0),(d<<1)+(F?1:0),Math.round(63*v)+128,Math.round(63*w)+128,1+(G===0?0:G<0?-1:1)|(63&re)<<2,re>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ae=Z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Ae,this.e2),Z.primitiveLength++),F?this.e2=Ae:this.e1=Ae}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,d){this.distance+=u.dist(d),this.updateScaledDistance()}}let hA,Kd;dr("LineBucket",Gf,{omit:["layers","patternFeatures"]});var Jc={get paint(){return Kd=Kd||new Cs({"line-opacity":new Hr(Ye.paint_line["line-opacity"]),"line-color":new Hr(Ye.paint_line["line-color"]),"line-translate":new hr(Ye.paint_line["line-translate"]),"line-translate-anchor":new hr(Ye.paint_line["line-translate-anchor"]),"line-width":new Hr(Ye.paint_line["line-width"]),"line-gap-width":new Hr(Ye.paint_line["line-gap-width"]),"line-offset":new Hr(Ye.paint_line["line-offset"]),"line-blur":new Hr(Ye.paint_line["line-blur"]),"line-dasharray":new rc(Ye.paint_line["line-dasharray"]),"line-pattern":new Qu(Ye.paint_line["line-pattern"]),"line-gradient":new bu(Ye.paint_line["line-gradient"])})},get layout(){return hA=hA||new Cs({"line-cap":new hr(Ye.layout_line["line-cap"]),"line-join":new Hr(Ye.layout_line["line-join"]),"line-miter-limit":new hr(Ye.layout_line["line-miter-limit"]),"line-round-limit":new hr(Ye.layout_line["line-round-limit"]),"line-sort-key":new Hr(Ye.layout_line["line-sort-key"])})}};class sc extends Hr{possiblyEvaluate(u,d){return d=new Ho(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(u,d)}evaluate(u,d,v,w){return d=ft({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(u,d,v,w)}}let Wf;class U0 extends su{constructor(u){super(u,Jc),this.gradientVersion=0,Wf||(Wf=new sc(Jc.paint.properties["line-width"].specification),Wf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!function(v){return v._styleExpression!==void 0}(d)&&d._styleExpression.expression instanceof tt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,d){super.recalculate(u,d),this.paint._values["line-floorwidth"]=Wf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Gf(u)}queryRadius(u){const d=u,v=Hm(oc("line-width",this,d),oc("line-gap-width",this,d)),w=oc("line-offset",this,d);return v/2+Math.abs(w)+Td(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:v,geometry:w,transform:D,pixelsToTileUnits:F}){const G=Bh(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-D.bearingInRadians,F),Z=F/2*Hm(this.paint.get("line-width").evaluate(d,v),this.paint.get("line-gap-width").evaluate(d,v)),re=this.paint.get("line-offset").evaluate(d,v);return re&&(w=function(Ae,_e){const Re=[];for(let Le=0;Le<Ae.length;Le++){const je=Ae[Le],He=[];for(let at=0;at<je.length;at++){const vt=je[at-1],jt=je[at],St=je[at+1],Ke=at===0?new k(0,0):jt.sub(vt)._unit()._perp(),nt=at===je.length-1?new k(0,0):St.sub(jt)._unit()._perp(),It=Ke._add(nt)._unit(),un=It.x*nt.x+It.y*nt.y;un!==0&&It._mult(1/un),He.push(It._mult(_e)._add(jt))}Re.push(He)}return Re}(w,re*F)),function(Ae,_e,Re){for(let Le=0;Le<_e.length;Le++){const je=_e[Le];if(Ae.length>=3){for(let He=0;He<je.length;He++)if(Bc(Ae,je[He]))return!0}if(kA(Ae,je,Re))return!0}return!1}(G,w,Z)}isTileClipped(){return!0}}function Hm(f,u){return u>0?u+2*f:f}const Gy=Os([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mf=Os([{name:"a_projected_pos",components:3,type:"Float32"}],4);Os([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Wg=Os([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Os([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Zm=Os([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Qf=Os([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function z0(f,u,d){return f.sections.forEach(v=>{v.text=function(w,D,F){const G=D.layout.get("text-transform").evaluate(F,{});return G==="uppercase"?w=w.toLocaleUpperCase():G==="lowercase"&&(w=w.toLocaleLowerCase()),Ks.applyArabicShaping&&(w=Ks.applyArabicShaping(w)),w}(v.text,u,d)}),f}Os([{name:"triangle",components:3,type:"Uint16"}]),Os([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Os([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Os([{type:"Float32",name:"offsetX"}]),Os([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Os([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Rh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var j0,Xm,Jm,Qa=24,N0={};function Wy(){return j0||(j0=1,N0.read=function(f,u,d,v,w){var D,F,G=8*w-v-1,Z=(1<<G)-1,re=Z>>1,Ae=-7,_e=d?w-1:0,Re=d?-1:1,Le=f[u+_e];for(_e+=Re,D=Le&(1<<-Ae)-1,Le>>=-Ae,Ae+=G;Ae>0;D=256*D+f[u+_e],_e+=Re,Ae-=8);for(F=D&(1<<-Ae)-1,D>>=-Ae,Ae+=v;Ae>0;F=256*F+f[u+_e],_e+=Re,Ae-=8);if(D===0)D=1-re;else{if(D===Z)return F?NaN:1/0*(Le?-1:1);F+=Math.pow(2,v),D-=re}return(Le?-1:1)*F*Math.pow(2,D-v)},N0.write=function(f,u,d,v,w,D){var F,G,Z,re=8*D-w-1,Ae=(1<<re)-1,_e=Ae>>1,Re=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,Le=v?0:D-1,je=v?1:-1,He=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(G=isNaN(u)?1:0,F=Ae):(F=Math.floor(Math.log(u)/Math.LN2),u*(Z=Math.pow(2,-F))<1&&(F--,Z*=2),(u+=F+_e>=1?Re/Z:Re*Math.pow(2,1-_e))*Z>=2&&(F++,Z/=2),F+_e>=Ae?(G=0,F=Ae):F+_e>=1?(G=(u*Z-1)*Math.pow(2,w),F+=_e):(G=u*Math.pow(2,_e-1)*Math.pow(2,w),F=0));w>=8;f[d+Le]=255&G,Le+=je,G/=256,w-=8);for(F=F<<w|G,re+=w;re>0;f[d+Le]=255&F,Le+=je,F/=256,re-=8);f[d+Le-je]|=128*He}),N0}function G0(){if(Jm)return Xm;Jm=1,Xm=u;var f=Wy();function u(Ke){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Ke)?Ke:new Uint8Array(Ke||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var d=4294967296,v=1/d,w=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function D(Ke){return Ke.type===u.Bytes?Ke.readVarint()+Ke.pos:Ke.pos+1}function F(Ke,nt,It){return It?4294967296*nt+(Ke>>>0):4294967296*(nt>>>0)+(Ke>>>0)}function G(Ke,nt,It){var un=nt<=16383?1:nt<=2097151?2:nt<=268435455?3:Math.floor(Math.log(nt)/(7*Math.LN2));It.realloc(un);for(var Fn=It.pos-1;Fn>=Ke;Fn--)It.buf[Fn+un]=It.buf[Fn]}function Z(Ke,nt){for(var It=0;It<Ke.length;It++)nt.writeVarint(Ke[It])}function re(Ke,nt){for(var It=0;It<Ke.length;It++)nt.writeSVarint(Ke[It])}function Ae(Ke,nt){for(var It=0;It<Ke.length;It++)nt.writeFloat(Ke[It])}function _e(Ke,nt){for(var It=0;It<Ke.length;It++)nt.writeDouble(Ke[It])}function Re(Ke,nt){for(var It=0;It<Ke.length;It++)nt.writeBoolean(Ke[It])}function Le(Ke,nt){for(var It=0;It<Ke.length;It++)nt.writeFixed32(Ke[It])}function je(Ke,nt){for(var It=0;It<Ke.length;It++)nt.writeSFixed32(Ke[It])}function He(Ke,nt){for(var It=0;It<Ke.length;It++)nt.writeFixed64(Ke[It])}function at(Ke,nt){for(var It=0;It<Ke.length;It++)nt.writeSFixed64(Ke[It])}function vt(Ke,nt){return(Ke[nt]|Ke[nt+1]<<8|Ke[nt+2]<<16)+16777216*Ke[nt+3]}function jt(Ke,nt,It){Ke[It]=nt,Ke[It+1]=nt>>>8,Ke[It+2]=nt>>>16,Ke[It+3]=nt>>>24}function St(Ke,nt){return(Ke[nt]|Ke[nt+1]<<8|Ke[nt+2]<<16)+(Ke[nt+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(Ke,nt,It){for(It=It||this.length;this.pos<It;){var un=this.readVarint(),Fn=un>>3,mn=this.pos;this.type=7&un,Ke(Fn,nt,this),this.pos===mn&&this.skip(un)}return nt},readMessage:function(Ke,nt){return this.readFields(Ke,nt,this.readVarint()+this.pos)},readFixed32:function(){var Ke=vt(this.buf,this.pos);return this.pos+=4,Ke},readSFixed32:function(){var Ke=St(this.buf,this.pos);return this.pos+=4,Ke},readFixed64:function(){var Ke=vt(this.buf,this.pos)+vt(this.buf,this.pos+4)*d;return this.pos+=8,Ke},readSFixed64:function(){var Ke=vt(this.buf,this.pos)+St(this.buf,this.pos+4)*d;return this.pos+=8,Ke},readFloat:function(){var Ke=f.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Ke},readDouble:function(){var Ke=f.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Ke},readVarint:function(Ke){var nt,It,un=this.buf;return nt=127&(It=un[this.pos++]),It<128?nt:(nt|=(127&(It=un[this.pos++]))<<7,It<128?nt:(nt|=(127&(It=un[this.pos++]))<<14,It<128?nt:(nt|=(127&(It=un[this.pos++]))<<21,It<128?nt:function(Fn,mn,bn){var Hn,Ln,sr=bn.buf;if(Hn=(112&(Ln=sr[bn.pos++]))>>4,Ln<128||(Hn|=(127&(Ln=sr[bn.pos++]))<<3,Ln<128)||(Hn|=(127&(Ln=sr[bn.pos++]))<<10,Ln<128)||(Hn|=(127&(Ln=sr[bn.pos++]))<<17,Ln<128)||(Hn|=(127&(Ln=sr[bn.pos++]))<<24,Ln<128)||(Hn|=(1&(Ln=sr[bn.pos++]))<<31,Ln<128))return F(Fn,Hn,mn);throw new Error("Expected varint not more than 10 bytes")}(nt|=(15&(It=un[this.pos]))<<28,Ke,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Ke=this.readVarint();return Ke%2==1?(Ke+1)/-2:Ke/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Ke=this.readVarint()+this.pos,nt=this.pos;return this.pos=Ke,Ke-nt>=12&&w?function(It,un,Fn){return w.decode(It.subarray(un,Fn))}(this.buf,nt,Ke):function(It,un,Fn){for(var mn="",bn=un;bn<Fn;){var Hn,Ln,sr,Bn=It[bn],Gr=null,jr=Bn>239?4:Bn>223?3:Bn>191?2:1;if(bn+jr>Fn)break;jr===1?Bn<128&&(Gr=Bn):jr===2?(192&(Hn=It[bn+1]))==128&&(Gr=(31&Bn)<<6|63&Hn)<=127&&(Gr=null):jr===3?(Ln=It[bn+2],(192&(Hn=It[bn+1]))==128&&(192&Ln)==128&&((Gr=(15&Bn)<<12|(63&Hn)<<6|63&Ln)<=2047||Gr>=55296&&Gr<=57343)&&(Gr=null)):jr===4&&(Ln=It[bn+2],sr=It[bn+3],(192&(Hn=It[bn+1]))==128&&(192&Ln)==128&&(192&sr)==128&&((Gr=(15&Bn)<<18|(63&Hn)<<12|(63&Ln)<<6|63&sr)<=65535||Gr>=1114112)&&(Gr=null)),Gr===null?(Gr=65533,jr=1):Gr>65535&&(Gr-=65536,mn+=String.fromCharCode(Gr>>>10&1023|55296),Gr=56320|1023&Gr),mn+=String.fromCharCode(Gr),bn+=jr}return mn}(this.buf,nt,Ke)},readBytes:function(){var Ke=this.readVarint()+this.pos,nt=this.buf.subarray(this.pos,Ke);return this.pos=Ke,nt},readPackedVarint:function(Ke,nt){if(this.type!==u.Bytes)return Ke.push(this.readVarint(nt));var It=D(this);for(Ke=Ke||[];this.pos<It;)Ke.push(this.readVarint(nt));return Ke},readPackedSVarint:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readSVarint());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readSVarint());return Ke},readPackedBoolean:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readBoolean());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readBoolean());return Ke},readPackedFloat:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readFloat());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readFloat());return Ke},readPackedDouble:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readDouble());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readDouble());return Ke},readPackedFixed32:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readFixed32());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readFixed32());return Ke},readPackedSFixed32:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readSFixed32());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readSFixed32());return Ke},readPackedFixed64:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readFixed64());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readFixed64());return Ke},readPackedSFixed64:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readSFixed64());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readSFixed64());return Ke},skip:function(Ke){var nt=7&Ke;if(nt===u.Varint)for(;this.buf[this.pos++]>127;);else if(nt===u.Bytes)this.pos=this.readVarint()+this.pos;else if(nt===u.Fixed32)this.pos+=4;else{if(nt!==u.Fixed64)throw new Error("Unimplemented type: "+nt);this.pos+=8}},writeTag:function(Ke,nt){this.writeVarint(Ke<<3|nt)},realloc:function(Ke){for(var nt=this.length||16;nt<this.pos+Ke;)nt*=2;if(nt!==this.length){var It=new Uint8Array(nt);It.set(this.buf),this.buf=It,this.length=nt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Ke){this.realloc(4),jt(this.buf,Ke,this.pos),this.pos+=4},writeSFixed32:function(Ke){this.realloc(4),jt(this.buf,Ke,this.pos),this.pos+=4},writeFixed64:function(Ke){this.realloc(8),jt(this.buf,-1&Ke,this.pos),jt(this.buf,Math.floor(Ke*v),this.pos+4),this.pos+=8},writeSFixed64:function(Ke){this.realloc(8),jt(this.buf,-1&Ke,this.pos),jt(this.buf,Math.floor(Ke*v),this.pos+4),this.pos+=8},writeVarint:function(Ke){(Ke=+Ke||0)>268435455||Ke<0?function(nt,It){var un,Fn;if(nt>=0?(un=nt%4294967296|0,Fn=nt/4294967296|0):(Fn=~(-nt/4294967296),4294967295^(un=~(-nt%4294967296))?un=un+1|0:(un=0,Fn=Fn+1|0)),nt>=18446744073709552e3||nt<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");It.realloc(10),function(mn,bn,Hn){Hn.buf[Hn.pos++]=127&mn|128,mn>>>=7,Hn.buf[Hn.pos++]=127&mn|128,mn>>>=7,Hn.buf[Hn.pos++]=127&mn|128,mn>>>=7,Hn.buf[Hn.pos++]=127&mn|128,Hn.buf[Hn.pos]=127&(mn>>>=7)}(un,0,It),function(mn,bn){var Hn=(7&mn)<<4;bn.buf[bn.pos++]|=Hn|((mn>>>=3)?128:0),mn&&(bn.buf[bn.pos++]=127&mn|((mn>>>=7)?128:0),mn&&(bn.buf[bn.pos++]=127&mn|((mn>>>=7)?128:0),mn&&(bn.buf[bn.pos++]=127&mn|((mn>>>=7)?128:0),mn&&(bn.buf[bn.pos++]=127&mn|((mn>>>=7)?128:0),mn&&(bn.buf[bn.pos++]=127&mn)))))}(Fn,It)}(Ke,this):(this.realloc(4),this.buf[this.pos++]=127&Ke|(Ke>127?128:0),Ke<=127||(this.buf[this.pos++]=127&(Ke>>>=7)|(Ke>127?128:0),Ke<=127||(this.buf[this.pos++]=127&(Ke>>>=7)|(Ke>127?128:0),Ke<=127||(this.buf[this.pos++]=Ke>>>7&127))))},writeSVarint:function(Ke){this.writeVarint(Ke<0?2*-Ke-1:2*Ke)},writeBoolean:function(Ke){this.writeVarint(!!Ke)},writeString:function(Ke){Ke=String(Ke),this.realloc(4*Ke.length),this.pos++;var nt=this.pos;this.pos=function(un,Fn,mn){for(var bn,Hn,Ln=0;Ln<Fn.length;Ln++){if((bn=Fn.charCodeAt(Ln))>55295&&bn<57344){if(!Hn){bn>56319||Ln+1===Fn.length?(un[mn++]=239,un[mn++]=191,un[mn++]=189):Hn=bn;continue}if(bn<56320){un[mn++]=239,un[mn++]=191,un[mn++]=189,Hn=bn;continue}bn=Hn-55296<<10|bn-56320|65536,Hn=null}else Hn&&(un[mn++]=239,un[mn++]=191,un[mn++]=189,Hn=null);bn<128?un[mn++]=bn:(bn<2048?un[mn++]=bn>>6|192:(bn<65536?un[mn++]=bn>>12|224:(un[mn++]=bn>>18|240,un[mn++]=bn>>12&63|128),un[mn++]=bn>>6&63|128),un[mn++]=63&bn|128)}return mn}(this.buf,Ke,this.pos);var It=this.pos-nt;It>=128&&G(nt,It,this),this.pos=nt-1,this.writeVarint(It),this.pos+=It},writeFloat:function(Ke){this.realloc(4),f.write(this.buf,Ke,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Ke){this.realloc(8),f.write(this.buf,Ke,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Ke){var nt=Ke.length;this.writeVarint(nt),this.realloc(nt);for(var It=0;It<nt;It++)this.buf[this.pos++]=Ke[It]},writeRawMessage:function(Ke,nt){this.pos++;var It=this.pos;Ke(nt,this);var un=this.pos-It;un>=128&&G(It,un,this),this.pos=It-1,this.writeVarint(un),this.pos+=un},writeMessage:function(Ke,nt,It){this.writeTag(Ke,u.Bytes),this.writeRawMessage(nt,It)},writePackedVarint:function(Ke,nt){nt.length&&this.writeMessage(Ke,Z,nt)},writePackedSVarint:function(Ke,nt){nt.length&&this.writeMessage(Ke,re,nt)},writePackedBoolean:function(Ke,nt){nt.length&&this.writeMessage(Ke,Re,nt)},writePackedFloat:function(Ke,nt){nt.length&&this.writeMessage(Ke,Ae,nt)},writePackedDouble:function(Ke,nt){nt.length&&this.writeMessage(Ke,_e,nt)},writePackedFixed32:function(Ke,nt){nt.length&&this.writeMessage(Ke,Le,nt)},writePackedSFixed32:function(Ke,nt){nt.length&&this.writeMessage(Ke,je,nt)},writePackedFixed64:function(Ke,nt){nt.length&&this.writeMessage(Ke,He,nt)},writePackedSFixed64:function(Ke,nt){nt.length&&this.writeMessage(Ke,at,nt)},writeBytesField:function(Ke,nt){this.writeTag(Ke,u.Bytes),this.writeBytes(nt)},writeFixed32Field:function(Ke,nt){this.writeTag(Ke,u.Fixed32),this.writeFixed32(nt)},writeSFixed32Field:function(Ke,nt){this.writeTag(Ke,u.Fixed32),this.writeSFixed32(nt)},writeFixed64Field:function(Ke,nt){this.writeTag(Ke,u.Fixed64),this.writeFixed64(nt)},writeSFixed64Field:function(Ke,nt){this.writeTag(Ke,u.Fixed64),this.writeSFixed64(nt)},writeVarintField:function(Ke,nt){this.writeTag(Ke,u.Varint),this.writeVarint(nt)},writeSVarintField:function(Ke,nt){this.writeTag(Ke,u.Varint),this.writeSVarint(nt)},writeStringField:function(Ke,nt){this.writeTag(Ke,u.Bytes),this.writeString(nt)},writeFloatField:function(Ke,nt){this.writeTag(Ke,u.Fixed32),this.writeFloat(nt)},writeDoubleField:function(Ke,nt){this.writeTag(Ke,u.Fixed64),this.writeDouble(nt)},writeBooleanField:function(Ke,nt){this.writeVarintField(Ke,!!nt)}},Xm}var e0=h(G0());const Dd=3;function Qy(f,u,d){f===1&&d.readMessage(Bp,u)}function Bp(f,u,d){if(f===3){const{id:v,bitmap:w,width:D,height:F,left:G,top:Z,advance:re}=d.readMessage(t0,{});u.push({id:v,bitmap:new Oo({width:D+2*Dd,height:F+2*Dd},w),metrics:{width:D,height:F,left:G,top:Z,advance:re}})}}function t0(f,u,d){f===1?u.id=d.readVarint():f===2?u.bitmap=d.readBytes():f===3?u.width=d.readVarint():f===4?u.height=d.readVarint():f===5?u.left=d.readSVarint():f===6?u.top=d.readSVarint():f===7&&(u.advance=d.readVarint())}const rl=Dd;function Qg(f){let u=0,d=0;for(const F of f)u+=F.w*F.h,d=Math.max(d,F.w);f.sort((F,G)=>G.h-F.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),d),h:1/0}];let w=0,D=0;for(const F of f)for(let G=v.length-1;G>=0;G--){const Z=v[G];if(!(F.w>Z.w||F.h>Z.h)){if(F.x=Z.x,F.y=Z.y,D=Math.max(D,F.y+F.h),w=Math.max(w,F.x+F.w),F.w===Z.w&&F.h===Z.h){const re=v.pop();G<v.length&&(v[G]=re)}else F.h===Z.h?(Z.x+=F.w,Z.w-=F.w):F.w===Z.w?(Z.y+=F.h,Z.h-=F.h):(v.push({x:Z.x+F.w,y:Z.y,w:Z.w-F.w,h:F.h}),Z.y+=F.h,Z.h-=F.h);break}}return{w,h:D,fill:u/(w*D)||0}}const dA=1;class W0{constructor(u,{pixelRatio:d,version:v,stretchX:w,stretchY:D,content:F,textFitWidth:G,textFitHeight:Z}){this.paddedRect=u,this.pixelRatio=d,this.stretchX=w,this.stretchY=D,this.content=F,this.version=v,this.textFitWidth=G,this.textFitHeight=Z}get tl(){return[this.paddedRect.x+dA,this.paddedRect.y+dA]}get br(){return[this.paddedRect.x+this.paddedRect.w-dA,this.paddedRect.y+this.paddedRect.h-dA]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*dA)/this.pixelRatio,(this.paddedRect.h-2*dA)/this.pixelRatio]}}class qg{constructor(u,d){const v={},w={};this.haveRenderCallbacks=[];const D=[];this.addImages(u,v,D),this.addImages(d,w,D);const{w:F,h:G}=Qg(D),Z=new Hu({width:F||1,height:G||1});for(const re in u){const Ae=u[re],_e=v[re].paddedRect;Hu.copy(Ae.data,Z,{x:0,y:0},{x:_e.x+dA,y:_e.y+dA},Ae.data)}for(const re in d){const Ae=d[re],_e=w[re].paddedRect,Re=_e.x+dA,Le=_e.y+dA,je=Ae.data.width,He=Ae.data.height;Hu.copy(Ae.data,Z,{x:0,y:0},{x:Re,y:Le},Ae.data),Hu.copy(Ae.data,Z,{x:0,y:He-1},{x:Re,y:Le-1},{width:je,height:1}),Hu.copy(Ae.data,Z,{x:0,y:0},{x:Re,y:Le+He},{width:je,height:1}),Hu.copy(Ae.data,Z,{x:je-1,y:0},{x:Re-1,y:Le},{width:1,height:He}),Hu.copy(Ae.data,Z,{x:0,y:0},{x:Re+je,y:Le},{width:1,height:He})}this.image=Z,this.iconPositions=v,this.patternPositions=w}addImages(u,d,v){for(const w in u){const D=u[w],F={x:0,y:0,w:D.data.width+2*dA,h:D.data.height+2*dA};v.push(F),d[w]=new W0(F,D),D.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(u,d){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in u.updatedImages)this.patchUpdatedImage(this.iconPositions[v],u.getImage(v),d),this.patchUpdatedImage(this.patternPositions[v],u.getImage(v),d)}patchUpdatedImage(u,d,v){if(!u||!d||u.version===d.version)return;u.version=d.version;const[w,D]=u.tl;v.update(d.data,void 0,{x:w,y:D})}}var Ld;dr("ImagePosition",W0),dr("ImageAtlas",qg),a.ai=void 0,(Ld=a.ai||(a.ai={}))[Ld.none=0]="none",Ld[Ld.horizontal=1]="horizontal",Ld[Ld.vertical=2]="vertical",Ld[Ld.horizontalOnly=3]="horizontalOnly";const Op=-17;class pm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(u,d){const v=new pm;return v.scale=u||1,v.fontStack=d,v}static forImage(u){const d=new pm;return d.imageName=u,d}}class Zu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,d){const v=new Zu;for(let w=0;w<u.sections.length;w++){const D=u.sections[w];D.image?v.addImageSection(D):v.addTextSection(D,d)}return v}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let d="";for(let v=0;v<u.length;v++){const w=u.charCodeAt(v+1)||null,D=u.charCodeAt(v-1)||null;d+=w&&Cc(w)&&!Rh[u[v+1]]||D&&Cc(D)&&!Rh[u[v-1]]||!Rh[u[v]]?u[v]:Rh[u[v]]}return d}(this.text)}trim(){let u=0;for(let v=0;v<this.text.length&&n0[this.text.charCodeAt(v)];v++)u++;let d=this.text.length;for(let v=this.text.length-1;v>=0&&v>=u&&n0[this.text.charCodeAt(v)];v--)d--;this.text=this.text.substring(u,d),this.sectionIndex=this.sectionIndex.slice(u,d)}substring(u,d){const v=new Zu;return v.text=this.text.substring(u,d),v.sectionIndex=this.sectionIndex.slice(u,d),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,d)=>Math.max(u,this.sections[d].scale),0)}addTextSection(u,d){this.text+=u.text,this.sections.push(pm.forText(u.scale,u.fontStack||d));const v=this.sections.length-1;for(let w=0;w<u.text.length;++w)this.sectionIndex.push(v)}addImageSection(u){const d=u.image?u.image.name:"";if(d.length===0)return void Je("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(pm.forImage(d)),this.sectionIndex.push(this.sections.length-1)):Je("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qf(f,u,d,v,w,D,F,G,Z,re,Ae,_e,Re,Le,je){const He=Zu.fromFeature(f,w);let at;_e===a.ai.vertical&&He.verticalizePunctuation();const{processBidirectionalText:vt,processStyledBidirectionalText:jt}=Ks;if(vt&&He.sections.length===1){at=[];const nt=vt(He.toString(),gm(He,re,D,u,v,Le));for(const It of nt){const un=new Zu;un.text=It,un.sections=He.sections;for(let Fn=0;Fn<It.length;Fn++)un.sectionIndex.push(0);at.push(un)}}else if(jt){at=[];const nt=jt(He.text,He.sectionIndex,gm(He,re,D,u,v,Le));for(const It of nt){const un=new Zu;un.text=It[0],un.sectionIndex=It[1],un.sections=He.sections,at.push(un)}}else at=function(nt,It){const un=[],Fn=nt.text;let mn=0;for(const bn of It)un.push(nt.substring(mn,bn)),mn=bn;return mn<Fn.length&&un.push(nt.substring(mn,Fn.length)),un}(He,gm(He,re,D,u,v,Le));const St=[],Ke={positionedLines:St,text:He.toString(),top:Ae[1],bottom:Ae[1],left:Ae[0],right:Ae[0],writingMode:_e,iconsInText:!1,verticalizable:!1};return function(nt,It,un,Fn,mn,bn,Hn,Ln,sr,Bn,Gr,jr){let Wr=0,ei=Op,Ro=0,ol=0;const $l=Ln==="right"?1:Ln==="left"?0:.5;let Xu=0;for(const wl of mn){wl.trim();const cu=wl.getMaxScale(),DA=(cu-1)*Qa,LA={positionedGlyphs:[],lineOffset:0};nt.positionedLines[Xu]=LA;const uc=LA.positionedGlyphs;let hu=0;if(!wl.length()){ei+=bn,++Xu;continue}for(let kc=0;kc<wl.length();kc++){const Ko=wl.getSection(kc),mA=wl.getSectionIndex(kc),qa=wl.getCharCode(kc);let sl=0,Bu=null,wm=null,th=null,Z0=Qa;const Ad=!(sr===a.ai.horizontal||!Gr&&!AA(qa)||Gr&&(n0[qa]||(ud=qa,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(ud)))));if(Ko.imageName){const nh=Fn[Ko.imageName];if(!nh)continue;th=Ko.imageName,nt.iconsInText=nt.iconsInText||!0,wm=nh.paddedRect;const Ju=nh.displaySize;Ko.scale=Ko.scale*Qa/jr,Bu={width:Ju[0],height:Ju[1],left:dA,top:-3,advance:Ad?Ju[1]:Ju[0]},sl=DA+(Qa-Ju[1]*Ko.scale),Z0=Bu.advance;const Lh=Ad?Ju[0]*Ko.scale-Qa*cu:Ju[1]*Ko.scale-Qa*cu;Lh>0&&Lh>hu&&(hu=Lh)}else{const nh=un[Ko.fontStack],Ju=nh&&nh[qa];if(Ju&&Ju.rect)wm=Ju.rect,Bu=Ju.metrics;else{const Lh=It[Ko.fontStack],Hf=Lh&&Lh[qa];if(!Hf)continue;Bu=Hf.metrics}sl=(cu-Ko.scale)*Qa}Ad?(nt.verticalizable=!0,uc.push({glyph:qa,imageName:th,x:Wr,y:ei+sl,vertical:Ad,scale:Ko.scale,fontStack:Ko.fontStack,sectionIndex:mA,metrics:Bu,rect:wm}),Wr+=Z0*Ko.scale+Bn):(uc.push({glyph:qa,imageName:th,x:Wr,y:ei+sl,vertical:Ad,scale:Ko.scale,fontStack:Ko.fontStack,sectionIndex:mA,metrics:Bu,rect:wm}),Wr+=Bu.advance*Ko.scale+Bn)}uc.length!==0&&(Ro=Math.max(Wr-Bn,Ro),$g(uc,0,uc.length-1,$l,hu)),Wr=0;const Dh=bn*cu+hu;LA.lineOffset=Math.max(hu,DA),ei+=Dh,ol=Math.max(Dh,ol),++Xu}var ud;const lc=ei-Op,{horizontalAlign:Eu,verticalAlign:pA}=q0(Hn);(function(wl,cu,DA,LA,uc,hu,Dh,kc,Ko){const mA=(cu-DA)*uc;let qa=0;qa=hu!==Dh?-kc*LA-Op:(-LA*Ko+.5)*Dh;for(const sl of wl)for(const Bu of sl.positionedGlyphs)Bu.x+=mA,Bu.y+=qa})(nt.positionedLines,$l,Eu,pA,Ro,ol,bn,lc,mn.length),nt.top+=-pA*lc,nt.bottom=nt.top+lc,nt.left+=-Eu*Ro,nt.right=nt.left+Ro}(Ke,u,d,v,at,F,G,Z,_e,re,Re,je),!function(nt){for(const It of nt)if(It.positionedGlyphs.length!==0)return!1;return!0}(St)&&Ke}const n0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kh={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},r0={40:!0};function gf(f,u,d,v,w,D){if(u.imageName){const F=v[u.imageName];return F?F.displaySize[0]*u.scale*Qa/D+w:0}{const F=d[u.fontStack],G=F&&F[f];return G?G.metrics.advance*u.scale+w:0}}function mm(f,u,d,v){const w=Math.pow(f-u,2);return v?f<u?w/2:2*w:w+Math.abs(d)*d}function Q0(f,u,d){let v=0;return f===10&&(v-=1e4),d&&(v+=150),f!==40&&f!==65288||(v+=50),u!==41&&u!==65289||(v+=50),v}function i0(f,u,d,v,w,D){let F=null,G=mm(u,d,w,D);for(const Z of v){const re=mm(u-Z.x,d,w,D)+Z.badness;re<=G&&(F=Z,G=re)}return{index:f,x:u,priorBreak:F,badness:G}}function Yg(f){return f?Yg(f.priorBreak).concat(f.index):[]}function gm(f,u,d,v,w,D){if(!f)return[];const F=[],G=function(_e,Re,Le,je,He,at){let vt=0;for(let jt=0;jt<_e.length();jt++){const St=_e.getSection(jt);vt+=gf(_e.getCharCode(jt),St,je,He,Re,at)}return vt/Math.max(1,Math.ceil(vt/Le))}(f,u,d,v,w,D),Z=f.text.indexOf("​")>=0;let re=0;for(let _e=0;_e<f.length();_e++){const Re=f.getSection(_e),Le=f.getCharCode(_e);if(n0[Le]||(re+=gf(Le,Re,v,w,u,D)),_e<f.length()-1){const je=!((Ae=Le)<11904)&&(!!Mi["CJK Compatibility Forms"](Ae)||!!Mi["CJK Compatibility"](Ae)||!!Mi["CJK Strokes"](Ae)||!!Mi["CJK Symbols and Punctuation"](Ae)||!!Mi["Enclosed CJK Letters and Months"](Ae)||!!Mi["Halfwidth and Fullwidth Forms"](Ae)||!!Mi["Ideographic Description Characters"](Ae)||!!Mi["Vertical Forms"](Ae)||nc.test(String.fromCodePoint(Ae)));(Kh[Le]||je||Re.imageName||_e!==f.length()-2&&r0[f.getCharCode(_e+1)])&&F.push(i0(_e+1,re,G,F,Q0(Le,f.getCharCode(_e+1),je&&Z),!1))}}var Ae;return Yg(i0(f.length(),re,G,F,0,!0))}function q0(f){let u=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:u,verticalAlign:d}}function $g(f,u,d,v,w){if(!v&&!w)return;const D=f[d],F=(f[d].x+D.metrics.advance*D.scale)*v;for(let G=u;G<=d;G++)f[G].x-=F,f[G].y+=w}function Vg(f,u,d){const{horizontalAlign:v,verticalAlign:w}=q0(d),D=u[0]-f.displaySize[0]*v,F=u[1]-f.displaySize[1]*w;return{image:f,top:F,bottom:F+f.displaySize[1],left:D,right:D+f.displaySize[0]}}function ym(f){var u,d;let v=f.left,w=f.top,D=f.right-v,F=f.bottom-w;const G=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",Z=(d=f.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",re=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(Z==="proportional"){if(G==="stretchOnly"&&D/F<re||G==="proportional"){const Ae=Math.ceil(F*re);v*=Ae/D,D=Ae}}else if(G==="proportional"&&Z==="stretchOnly"&&re!==0&&D/F>re){const Ae=Math.ceil(D/re);w*=Ae/F,F=Ae}return{x1:v,y1:w,x2:v+D,y2:w+F}}function vm(f,u,d,v,w,D){const F=f.image;let G;if(F.content){const at=F.content,vt=F.pixelRatio||1;G=[at[0]/vt,at[1]/vt,F.displaySize[0]-at[2]/vt,F.displaySize[1]-at[3]/vt]}const Z=u.left*D,re=u.right*D;let Ae,_e,Re,Le;d==="width"||d==="both"?(Le=w[0]+Z-v[3],_e=w[0]+re+v[1]):(Le=w[0]+(Z+re-F.displaySize[0])/2,_e=Le+F.displaySize[0]);const je=u.top*D,He=u.bottom*D;return d==="height"||d==="both"?(Ae=w[1]+je-v[0],Re=w[1]+He+v[2]):(Ae=w[1]+(je+He-F.displaySize[1])/2,Re=Ae+F.displaySize[1]),{image:F,top:Ae,right:_e,bottom:Re,left:Le,collisionPadding:G}}const Ip=255,eh=128,Fd=Ip*eh;function o0(f,u){const{expression:d}=u;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Ho(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:w}=d;let D=0;for(;D<v.length&&v[D]<=f;)D++;D=Math.max(0,D-1);let F=D;for(;F<v.length&&v[F]<f+1;)F++;F=Math.min(v.length-1,F);const G=v[D],Z=v[F];return d.kind==="composite"?{kind:"composite",minZoom:G,maxZoom:Z,interpolationType:w}:{kind:"camera",minZoom:G,maxZoom:Z,minSize:d.evaluate(new Ho(G)),maxSize:d.evaluate(new Ho(Z)),interpolationType:w}}}function Yf(f,u,d){let v="never";const w=f.get(u);return w?v=w:f.get(d)&&(v="always"),v}const s0=Kl.VectorTileFeature.types,a0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _m(f,u,d,v,w,D,F,G,Z,re,Ae,_e,Re){const Le=G?Math.min(Fd,Math.round(G[0])):0,je=G?Math.min(Fd,Math.round(G[1])):0;f.emplaceBack(u,d,Math.round(32*v),Math.round(32*w),D,F,(Le<<1)+(Z?1:0),je,16*re,16*Ae,256*_e,256*Re)}function Y0(f,u,d){f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d)}function l0(f){for(const u of f.sections)if(za(u.text))return!0;return!1}class kp{constructor(u){this.layoutVertexArray=new zt,this.indexArray=new _n,this.programConfigurations=u,this.segments=new wn,this.dynamicLayoutVertexArray=new Pt,this.opacityVertexArray=new tn,this.hasVisibleVertices=!1,this.placedSymbolArray=new j}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,d,v,w){this.isEmpty()||(v&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Gy.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,mf.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,a0,!0),this.opacityVertexBuffer.itemSize=1),(v||w)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}dr("SymbolBuffers",kp);class $f{constructor(u,d,v){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new v,this.segments=new wn,this.collisionVertexArray=new vn}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Wg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}dr("CollisionBuffers",$f);class Tp{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(F=>F.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=o0(this.zoom,d["text-size"]),this.iconSizeData=o0(this.zoom,d["icon-size"]);const v=this.layers[0].layout,w=v.get("symbol-sort-key"),D=v.get("symbol-z-order");this.canOverlap=Yf(v,"text-overlap","text-allow-overlap")!=="never"||Yf(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=D!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(D==="viewport-y"||D==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(F=>a.ai[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=u.sourceID}createArrays(){this.text=new kp(new el(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new kp(new el(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new oe,this.lineVertexArray=new be,this.symbolInstances=new te,this.textAnchorOffsets=new Ie}calculateGlyphDependencies(u,d,v,w,D){for(let F=0;F<u.length;F++)if(d[u.charCodeAt(F)]=!0,(v||w)&&D){const G=Rh[u.charAt(F)];G&&(d[G.charCodeAt(0)]=!0)}}populate(u,d,v){const w=this.layers[0],D=w.layout,F=D.get("text-font"),G=D.get("text-field"),Z=D.get("icon-image"),re=(G.value.kind!=="constant"||G.value.value instanceof ls&&!G.value.value.isEmpty()||G.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),Ae=Z.value.kind!=="constant"||!!Z.value.value||Object.keys(Z.parameters).length>0,_e=D.get("symbol-sort-key");if(this.features=[],!re&&!Ae)return;const Re=d.iconDependencies,Le=d.glyphDependencies,je=d.availableImages,He=new Ho(this.zoom);for(const{feature:at,id:vt,index:jt,sourceLayerIndex:St}of u){const Ke=w._featureFilter.needGeometry,nt=ic(at,Ke);if(!w._featureFilter.filter(He,nt,v))continue;let It,un;if(Ke||(nt.geometry=Sh(at)),re){const mn=w.getValueAndResolveTokens("text-field",nt,v,je),bn=ls.factory(mn),Hn=this.hasRTLText=this.hasRTLText||l0(bn);(!Hn||Ks.getRTLTextPluginStatus()==="unavailable"||Hn&&Ks.isParsed())&&(It=z0(bn,w,nt))}if(Ae){const mn=w.getValueAndResolveTokens("icon-image",nt,v,je);un=mn instanceof Mo?mn:Mo.fromString(mn)}if(!It&&!un)continue;const Fn=this.sortFeaturesByKey?_e.evaluate(nt,{},v):void 0;if(this.features.push({id:vt,text:It,icon:un,index:jt,sourceLayerIndex:St,geometry:nt.geometry,properties:at.properties,type:s0[at.type],sortKey:Fn}),un&&(Re[un.name]=!0),It){const mn=F.evaluate(nt,{},v).join(","),bn=D.get("text-rotation-alignment")!=="viewport"&&D.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const Hn of It.sections)if(Hn.image)Re[Hn.image.name]=!0;else{const Ln=Ch(It.toString()),sr=Hn.fontStack||mn,Bn=Le[sr]=Le[sr]||{};this.calculateGlyphDependencies(Hn.text,Bn,bn,this.allowVerticalPlacement,Ln)}}}D.get("symbol-placement")==="line"&&(this.features=function(at){const vt={},jt={},St=[];let Ke=0;function nt(mn){St.push(at[mn]),Ke++}function It(mn,bn,Hn){const Ln=jt[mn];return delete jt[mn],jt[bn]=Ln,St[Ln].geometry[0].pop(),St[Ln].geometry[0]=St[Ln].geometry[0].concat(Hn[0]),Ln}function un(mn,bn,Hn){const Ln=vt[bn];return delete vt[bn],vt[mn]=Ln,St[Ln].geometry[0].shift(),St[Ln].geometry[0]=Hn[0].concat(St[Ln].geometry[0]),Ln}function Fn(mn,bn,Hn){const Ln=Hn?bn[0][bn[0].length-1]:bn[0][0];return`${mn}:${Ln.x}:${Ln.y}`}for(let mn=0;mn<at.length;mn++){const bn=at[mn],Hn=bn.geometry,Ln=bn.text?bn.text.toString():null;if(!Ln){nt(mn);continue}const sr=Fn(Ln,Hn),Bn=Fn(Ln,Hn,!0);if(sr in jt&&Bn in vt&&jt[sr]!==vt[Bn]){const Gr=un(sr,Bn,Hn),jr=It(sr,Bn,St[Gr].geometry);delete vt[sr],delete jt[Bn],jt[Fn(Ln,St[jr].geometry,!0)]=jr,St[Gr].geometry=null}else sr in jt?It(sr,Bn,Hn):Bn in vt?un(sr,Bn,Hn):(nt(mn),vt[sr]=Ke-1,jt[Bn]=Ke-1)}return St.filter(mn=>mn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((at,vt)=>at.sortKey-vt.sortKey)}update(u,d,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,v),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,d){const v=this.lineVertexArray.length;if(u.segment!==void 0){let w=u.dist(d[u.segment+1]),D=u.dist(d[u.segment]);const F={};for(let G=u.segment+1;G<d.length;G++)F[G]={x:d[G].x,y:d[G].y,tileUnitDistanceFromAnchor:w},G<d.length-1&&(w+=d[G+1].dist(d[G]));for(let G=u.segment||0;G>=0;G--)F[G]={x:d[G].x,y:d[G].y,tileUnitDistanceFromAnchor:D},G>0&&(D+=d[G-1].dist(d[G]));for(let G=0;G<d.length;G++){const Z=F[G];this.lineVertexArray.emplaceBack(Z.x,Z.y,Z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(u,d,v,w,D,F,G,Z,re,Ae,_e,Re){const Le=u.indexArray,je=u.layoutVertexArray,He=u.segments.prepareSegment(4*d.length,je,Le,this.canOverlap?F.sortKey:void 0),at=this.glyphOffsetArray.length,vt=He.vertexLength,jt=this.allowVerticalPlacement&&G===a.ai.vertical?Math.PI/2:0,St=F.text&&F.text.sections;for(let Ke=0;Ke<d.length;Ke++){const{tl:nt,tr:It,bl:un,br:Fn,tex:mn,pixelOffsetTL:bn,pixelOffsetBR:Hn,minFontScaleX:Ln,minFontScaleY:sr,glyphOffset:Bn,isSDF:Gr,sectionIndex:jr}=d[Ke],Wr=He.vertexLength,ei=Bn[1];_m(je,Z.x,Z.y,nt.x,ei+nt.y,mn.x,mn.y,v,Gr,bn.x,bn.y,Ln,sr),_m(je,Z.x,Z.y,It.x,ei+It.y,mn.x+mn.w,mn.y,v,Gr,Hn.x,bn.y,Ln,sr),_m(je,Z.x,Z.y,un.x,ei+un.y,mn.x,mn.y+mn.h,v,Gr,bn.x,Hn.y,Ln,sr),_m(je,Z.x,Z.y,Fn.x,ei+Fn.y,mn.x+mn.w,mn.y+mn.h,v,Gr,Hn.x,Hn.y,Ln,sr),Y0(u.dynamicLayoutVertexArray,Z,jt),Le.emplaceBack(Wr,Wr+2,Wr+1),Le.emplaceBack(Wr+1,Wr+2,Wr+3),He.vertexLength+=4,He.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Bn[0]),Ke!==d.length-1&&jr===d[Ke+1].sectionIndex||u.programConfigurations.populatePaintArrays(je.length,F,F.index,{},Re,St&&St[jr])}u.placedSymbolArray.emplaceBack(Z.x,Z.y,at,this.glyphOffsetArray.length-at,vt,re,Ae,Z.segment,v?v[0]:0,v?v[1]:0,w[0],w[1],G,0,!1,0,_e)}_addCollisionDebugVertex(u,d,v,w,D,F){return d.emplaceBack(0,0),u.emplaceBack(v.x,v.y,w,D,Math.round(F.x),Math.round(F.y))}addCollisionDebugVertices(u,d,v,w,D,F,G){const Z=D.segments.prepareSegment(4,D.layoutVertexArray,D.indexArray),re=Z.vertexLength,Ae=D.layoutVertexArray,_e=D.collisionVertexArray,Re=G.anchorX,Le=G.anchorY;this._addCollisionDebugVertex(Ae,_e,F,Re,Le,new k(u,d)),this._addCollisionDebugVertex(Ae,_e,F,Re,Le,new k(v,d)),this._addCollisionDebugVertex(Ae,_e,F,Re,Le,new k(v,w)),this._addCollisionDebugVertex(Ae,_e,F,Re,Le,new k(u,w)),Z.vertexLength+=4;const je=D.indexArray;je.emplaceBack(re,re+1),je.emplaceBack(re+1,re+2),je.emplaceBack(re+2,re+3),je.emplaceBack(re+3,re),Z.primitiveLength+=4}addDebugCollisionBoxes(u,d,v,w){for(let D=u;D<d;D++){const F=this.collisionBoxArray.get(D);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,w?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $f(Ht,Zm.members,gn),this.iconCollisionBox=new $f(Ht,Zm.members,gn);for(let u=0;u<this.symbolInstances.length;u++){const d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(u,d,v,w,D,F,G,Z,re){const Ae={};for(let _e=d;_e<v;_e++){const Re=u.get(_e);Ae.textBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},Ae.textFeatureIndex=Re.featureIndex;break}for(let _e=w;_e<D;_e++){const Re=u.get(_e);Ae.verticalTextBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},Ae.verticalTextFeatureIndex=Re.featureIndex;break}for(let _e=F;_e<G;_e++){const Re=u.get(_e);Ae.iconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},Ae.iconFeatureIndex=Re.featureIndex;break}for(let _e=Z;_e<re;_e++){const Re=u.get(_e);Ae.verticalIconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},Ae.verticalIconFeatureIndex=Re.featureIndex;break}return Ae}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const v=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,d){const v=u.placedSymbolArray.get(d),w=v.vertexStartIndex+4*v.numGlyphs;for(let D=v.vertexStartIndex;D<w;D+=4)u.indexArray.emplaceBack(D,D+2,D+1),u.indexArray.emplaceBack(D+1,D+2,D+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(u),v=Math.cos(u),w=[],D=[],F=[];for(let G=0;G<this.symbolInstances.length;++G){F.push(G);const Z=this.symbolInstances.get(G);w.push(0|Math.round(d*Z.anchorX+v*Z.anchorY)),D.push(Z.featureIndex)}return F.sort((G,Z)=>w[G]-w[Z]||D[Z]-D[G]),F}addToSortKeyRanges(u,d){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===d?v.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const v=this.symbolInstances.get(d);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((w,D,F)=>{w>=0&&F.indexOf(w)===D&&this.addIndicesForPlacedSymbol(this.text,w)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Cm,m;dr("SymbolBucket",Tp,{omit:["layers","collisionBoxArray","features","compareText"]}),Tp.MAX_GLYPHS=65535,Tp.addDynamicAttributes=Y0;var _={get paint(){return m=m||new Cs({"icon-opacity":new Hr(Ye.paint_symbol["icon-opacity"]),"icon-color":new Hr(Ye.paint_symbol["icon-color"]),"icon-halo-color":new Hr(Ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new Hr(Ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Hr(Ye.paint_symbol["icon-halo-blur"]),"icon-translate":new hr(Ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new hr(Ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new Hr(Ye.paint_symbol["text-opacity"]),"text-color":new Hr(Ye.paint_symbol["text-color"],{runtimeType:Br,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Hr(Ye.paint_symbol["text-halo-color"]),"text-halo-width":new Hr(Ye.paint_symbol["text-halo-width"]),"text-halo-blur":new Hr(Ye.paint_symbol["text-halo-blur"]),"text-translate":new hr(Ye.paint_symbol["text-translate"]),"text-translate-anchor":new hr(Ye.paint_symbol["text-translate-anchor"])})},get layout(){return Cm=Cm||new Cs({"symbol-placement":new hr(Ye.layout_symbol["symbol-placement"]),"symbol-spacing":new hr(Ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new hr(Ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Hr(Ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new hr(Ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new hr(Ye.layout_symbol["icon-allow-overlap"]),"icon-overlap":new hr(Ye.layout_symbol["icon-overlap"]),"icon-ignore-placement":new hr(Ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new hr(Ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new hr(Ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new Hr(Ye.layout_symbol["icon-size"]),"icon-text-fit":new hr(Ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new hr(Ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new Hr(Ye.layout_symbol["icon-image"]),"icon-rotate":new Hr(Ye.layout_symbol["icon-rotate"]),"icon-padding":new Hr(Ye.layout_symbol["icon-padding"]),"icon-keep-upright":new hr(Ye.layout_symbol["icon-keep-upright"]),"icon-offset":new Hr(Ye.layout_symbol["icon-offset"]),"icon-anchor":new Hr(Ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new hr(Ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new hr(Ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new hr(Ye.layout_symbol["text-rotation-alignment"]),"text-field":new Hr(Ye.layout_symbol["text-field"]),"text-font":new Hr(Ye.layout_symbol["text-font"]),"text-size":new Hr(Ye.layout_symbol["text-size"]),"text-max-width":new Hr(Ye.layout_symbol["text-max-width"]),"text-line-height":new hr(Ye.layout_symbol["text-line-height"]),"text-letter-spacing":new Hr(Ye.layout_symbol["text-letter-spacing"]),"text-justify":new Hr(Ye.layout_symbol["text-justify"]),"text-radial-offset":new Hr(Ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new hr(Ye.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Hr(Ye.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Hr(Ye.layout_symbol["text-anchor"]),"text-max-angle":new hr(Ye.layout_symbol["text-max-angle"]),"text-writing-mode":new hr(Ye.layout_symbol["text-writing-mode"]),"text-rotate":new Hr(Ye.layout_symbol["text-rotate"]),"text-padding":new hr(Ye.layout_symbol["text-padding"]),"text-keep-upright":new hr(Ye.layout_symbol["text-keep-upright"]),"text-transform":new Hr(Ye.layout_symbol["text-transform"]),"text-offset":new Hr(Ye.layout_symbol["text-offset"]),"text-allow-overlap":new hr(Ye.layout_symbol["text-allow-overlap"]),"text-overlap":new hr(Ye.layout_symbol["text-overlap"]),"text-ignore-placement":new hr(Ye.layout_symbol["text-ignore-placement"]),"text-optional":new hr(Ye.layout_symbol["text-optional"])})}};class L{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:wr,this.defaultValue=u}evaluate(u){if(u.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}dr("FormatSectionOverride",L,{omit:["defaultValue"]});class W extends su{constructor(u){super(u,_)}recalculate(u,d){if(super.recalculate(u,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const w=[];for(const D of v)w.indexOf(D)<0&&w.push(D);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,d,v,w){const D=this.layout.get(u).evaluate(d,{},v,w),F=this._unevaluatedLayout._values[u];return F.isDataDriven()||jl(F.value)||!D?D:function(G,Z){return Z.replace(/{([^{}]+)}/g,(re,Ae)=>G&&Ae in G?String(G[Ae]):"")}(d.properties,D)}createBucket(u){return new Tp(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of _.paint.overridableProperties){if(!W.hasPaintOverride(this.layout,u))continue;const d=this.paint.get(u),v=new L(d),w=new vu(v,d.property.specification);let D=null;D=d.value.kind==="constant"||d.value.kind==="source"?new Zh("source",w):new Fa("composite",w,d.value.zoomStops),this.paint._values[u]=new gs(d.property,D,d.parameters)}}_handleOverridablePaintPropertyUpdate(u,d,v){return!(!this.layout||d.isDataDriven()||v.isDataDriven())&&W.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,d){const v=u.get("text-field"),w=_.paint.properties[d];let D=!1;const F=G=>{for(const Z of G)if(w.overrides&&w.overrides.hasOverride(Z))return void(D=!0)};if(v.value.kind==="constant"&&v.value.value instanceof ls)F(v.value.value.sections);else if(v.value.kind==="source"){const G=re=>{D||(re instanceof fo&&ns(re.value)===$a?F(re.value.sections):re instanceof cl?F(re.sections):re.eachChild(G))},Z=v.value;Z._styleExpression&&G(Z._styleExpression.expression)}return D}}let se;var ge={get paint(){return se=se||new Cs({"background-color":new hr(Ye.paint_background["background-color"]),"background-pattern":new rc(Ye.paint_background["background-pattern"]),"background-opacity":new hr(Ye.paint_background["background-opacity"])})}};class Ze extends su{constructor(u){super(u,ge)}}let kt;var Wt={get paint(){return kt=kt||new Cs({"raster-opacity":new hr(Ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new hr(Ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new hr(Ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new hr(Ye.paint_raster["raster-brightness-max"]),"raster-saturation":new hr(Ye.paint_raster["raster-saturation"]),"raster-contrast":new hr(Ye.paint_raster["raster-contrast"]),"raster-resampling":new hr(Ye.paint_raster["raster-resampling"]),"raster-fade-duration":new hr(Ye.paint_raster["raster-fade-duration"])})}};class Cn extends su{constructor(u){super(u,Wt)}}class or extends su{constructor(u){super(u,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Ar{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Vn=63710088e-1;class Ur{constructor(u,d){if(isNaN(u)||isNaN(d))throw new Error(`Invalid LngLat object: (${u}, ${d})`);if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ur(mt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const d=Math.PI/180,v=this.lat*d,w=u.lat*d,D=Math.sin(v)*Math.sin(w)+Math.cos(v)*Math.cos(w)*Math.cos((u.lng-this.lng)*d);return Vn*Math.acos(Math.min(D,1))}static convert(u){if(u instanceof Ur)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Ur(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Ur(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ii=2*Math.PI*Vn;function li(f){return ii*Math.cos(f*Math.PI/180)}function il(f){return(180+f)/360}function ln(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function Jt(f,u){return f/li(u)}function cn(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function mr(f,u){return f*li(cn(u))}class ni{constructor(u,d,v=0){this.x=+u,this.y=+d,this.z=+v}static fromLngLat(u,d=0){const v=Ur.convert(u);return new ni(il(v.lng),ln(v.lat),Jt(d,v.lat))}toLngLat(){return new Ur(360*this.x-180,cn(this.y))}toAltitude(){return mr(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ii*(u=cn(this.y),1/Math.cos(u*Math.PI/180));var u}}function Ii(f,u,d){var v=2*Math.PI*6378137/256/Math.pow(2,d);return[f*v-2*Math.PI*6378137/2,u*v-2*Math.PI*6378137/2]}class Oi{constructor(u,d,v){if(!function(w,D,F){return!(w<0||w>25||F<0||F>=Math.pow(2,w)||D<0||D>=Math.pow(2,w))}(u,d,v))throw new Error(`x=${d}, y=${v}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=d,this.y=v,this.key=Xo(0,u,u,d,v)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,d,v){const w=(F=this.y,G=this.z,Z=Ii(256*(D=this.x),256*(F=Math.pow(2,G)-F-1),G),re=Ii(256*(D+1),256*(F+1),G),Z[0]+","+Z[1]+","+re[0]+","+re[1]);var D,F,G,Z,re;const Ae=function(_e,Re,Le){let je,He="";for(let at=_e;at>0;at--)je=1<<at-1,He+=(Re&je?1:0)+(Le&je?2:0);return He}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,Ae).replace(/{bbox-epsg-3857}/g,w)}isChildOf(u){const d=this.z-u.z;return d>0&&u.x===this.x>>d&&u.y===this.y>>d}getTilePoint(u){const d=Math.pow(2,this.z);return new k((u.x*d-this.x)*rt,(u.y*d-this.y)*rt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ui{constructor(u,d){this.wrap=u,this.canonical=d,this.key=Xo(u,d.z,d.z,d.x,d.y)}}class Ds{constructor(u,d,v,w,D){if(this.terrainRttPosMatrix32f=null,u<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${v}`);this.overscaledZ=u,this.wrap=d,this.canonical=new Oi(v,+w,+D),this.key=Xo(d,u,v,w,D)}clone(){return new Ds(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-u;return u>this.canonical.z?new Ds(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ds(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(u,d){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-u;return u>this.canonical.z?Xo(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):Xo(this.wrap*+d,u,u,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const d=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d}children(u){if(this.overscaledZ>=u)return[new Ds(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,v=2*this.canonical.x,w=2*this.canonical.y;return[new Ds(d,this.wrap,d,v,w),new Ds(d,this.wrap,d,v+1,w),new Ds(d,this.wrap,d,v,w+1),new Ds(d,this.wrap,d,v+1,w+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Ds(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Ds(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ui(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new ni(u.x-this.wrap,u.y))}}function Xo(f,u,d,v,w){(f*=2)<0&&(f=-1*f-1);const D=1<<d;return(D*D*f+D*w+v).toString(36)+d.toString(36)+u.toString(36)}dr("CanonicalTileID",Oi),dr("OverscaledTileID",Ds,{omit:["terrainRttPosMatrix32f"]});class Ud{constructor(u,d,v,w=1,D=1,F=1,G=0){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void Je(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const Z=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=D,this.blueFactor=F,this.baseShift=G;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let re=0;re<Z;re++)this.data[this._idx(-1,re)]=this.data[this._idx(0,re)],this.data[this._idx(Z,re)]=this.data[this._idx(Z-1,re)],this.data[this._idx(re,-1)]=this.data[this._idx(re,0)],this.data[this._idx(re,Z)]=this.data[this._idx(re,Z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z-1,0)],this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z-1)],this.data[this._idx(Z,Z)]=this.data[this._idx(Z-1,Z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let re=0;re<Z;re++)for(let Ae=0;Ae<Z;Ae++){const _e=this.get(re,Ae);_e>this.max&&(this.max=_e),_e<this.min&&(this.min=_e)}}get(u,d){const v=new Uint8Array(this.data.buffer),w=4*this._idx(u,d);return this.unpack(v[w],v[w+1],v[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)}unpack(u,d,v){return u*this.redFactor+d*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new Hu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,d,v){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let w=d*this.dim,D=d*this.dim+this.dim,F=v*this.dim,G=v*this.dim+this.dim;switch(d){case-1:w=D-1;break;case 1:D=w+1}switch(v){case-1:F=G-1;break;case 1:G=F+1}const Z=-d*this.dim,re=-v*this.dim;for(let Ae=F;Ae<G;Ae++)for(let _e=w;_e<D;_e++)this.data[this._idx(_e,Ae)]=u.data[this._idx(_e+Z,Ae+re)]}}dr("DEMData",Ud);class Hg{constructor(u){this._stringToNumber={},this._numberToString=[];for(let d=0;d<u.length;d++){const v=u[d];this._stringToNumber[v]=d,this._numberToString[d]=v}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class oC{constructor(u,d,v,w,D){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=v,u._y=w,this.properties=u.properties,this.id=D}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u}}class sC{constructor(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new uA(rt,16,0),this.grid3D=new uA(rt,16,0),this.featureIndexArray=new Ve,this.promoteId=d}insert(u,d,v,w,D,F){const G=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,w,D);const Z=F?this.grid3D:this.grid;for(let re=0;re<d.length;re++){const Ae=d[re],_e=[1/0,1/0,-1/0,-1/0];for(let Re=0;Re<Ae.length;Re++){const Le=Ae[Re];_e[0]=Math.min(_e[0],Le.x),_e[1]=Math.min(_e[1],Le.y),_e[2]=Math.max(_e[2],Le.x),_e[3]=Math.max(_e[3],Le.y)}_e[0]<rt&&_e[1]<rt&&_e[2]>=0&&_e[3]>=0&&Z.insert(G,_e[0],_e[1],_e[2],_e[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Kl.VectorTile(new e0(this.rawTileData)).layers,this.sourceLayerCoder=new Hg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,d,v,w){this.loadVTLayers();const D=u.params,F=rt/u.tileSize/u.scale,G=HA(D.filter),Z=u.queryGeometry,re=u.queryPadding*F,Ae=lC(Z),_e=this.grid.query(Ae.minX-re,Ae.minY-re,Ae.maxX+re,Ae.maxY+re),Re=lC(u.cameraQueryGeometry),Le=this.grid3D.query(Re.minX-re,Re.minY-re,Re.maxX+re,Re.maxY+re,(at,vt,jt,St)=>function(Ke,nt,It,un,Fn){for(const bn of Ke)if(nt<=bn.x&&It<=bn.y&&un>=bn.x&&Fn>=bn.y)return!0;const mn=[new k(nt,It),new k(nt,Fn),new k(un,Fn),new k(un,It)];if(Ke.length>2){for(const bn of mn)if(Bc(Ke,bn))return!0}for(let bn=0;bn<Ke.length-1;bn++)if(um(Ke[bn],Ke[bn+1],mn))return!0;return!1}(u.cameraQueryGeometry,at-re,vt-re,jt+re,St+re));for(const at of Le)_e.push(at);_e.sort(u3);const je={};let He;for(let at=0;at<_e.length;at++){const vt=_e[at];if(vt===He)continue;He=vt;const jt=this.featureIndexArray.get(vt);let St=null;this.loadMatchingFeature(je,jt.bucketIndex,jt.sourceLayerIndex,jt.featureIndex,G,D.layers,D.availableImages,d,v,w,(Ke,nt,It)=>(St||(St=Sh(Ke)),nt.queryIntersectsFeature({queryGeometry:Z,feature:Ke,featureState:It,geometry:St,zoom:this.z,transform:u.transform,pixelsToTileUnits:F,pixelPosMatrix:u.pixelPosMatrix})))}return je}loadMatchingFeature(u,d,v,w,D,F,G,Z,re,Ae,_e){const Re=this.bucketLayerIDs[d];if(F&&!Re.some(at=>F.has(at)))return;const Le=this.sourceLayerCoder.decode(v),je=this.vtLayers[Le].feature(w);if(D.needGeometry){const at=ic(je,!0);if(!D.filter(new Ho(this.tileID.overscaledZ),at,this.tileID.canonical))return}else if(!D.filter(new Ho(this.tileID.overscaledZ),je))return;const He=this.getId(je,Le);for(let at=0;at<Re.length;at++){const vt=Re[at];if(F&&!F.has(vt))continue;const jt=Z[vt];if(!jt)continue;let St={};He&&Ae&&(St=Ae.getState(jt.sourceLayer||"_geojsonTileLayer",He));const Ke=ft({},re[vt]);Ke.paint=aC(Ke.paint,jt.paint,je,St,G),Ke.layout=aC(Ke.layout,jt.layout,je,St,G);const nt=!_e||_e(je,jt,St);if(!nt)continue;const It=new oC(je,this.z,this.x,this.y,He);It.layer=Ke;let un=u[vt];un===void 0&&(un=u[vt]=[]),un.push({featureIndex:w,feature:It,intersectionZ:nt})}}lookupSymbolFeatures(u,d,v,w,D,F,G,Z){const re={};this.loadVTLayers();const Ae=HA(D);for(const _e of u)this.loadMatchingFeature(re,v,w,_e,Ae,F,G,Z,d);return re}hasLayer(u){for(const d of this.bucketLayerIDs)for(const v of d)if(u===v)return!0;return!1}getId(u,d){var v;let w=u.id;return this.promoteId&&(w=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((v=u.properties)===null||v===void 0)&&v.cluster)&&this.promoteId&&(w=Number(u.properties.cluster_id))),w}}function aC(f,u,d,v,w){return Lt(f,(D,F)=>{const G=u instanceof ha?u.get(F):null;return G&&G.evaluate?G.evaluate(d,v,w):G})}function lC(f){let u=1/0,d=1/0,v=-1/0,w=-1/0;for(const D of f)u=Math.min(u,D.x),d=Math.min(d,D.y),v=Math.max(v,D.x),w=Math.max(w,D.y);return{minX:u,minY:d,maxX:v,maxY:w}}function u3(f,u){return u-f}function uC(f,u,d,v,w){const D=[];for(let F=0;F<f.length;F++){const G=f[F];let Z;for(let re=0;re<G.length-1;re++){let Ae=G[re],_e=G[re+1];Ae.x<u&&_e.x<u||(Ae.x<u?Ae=new k(u,Ae.y+(u-Ae.x)/(_e.x-Ae.x)*(_e.y-Ae.y))._round():_e.x<u&&(_e=new k(u,Ae.y+(u-Ae.x)/(_e.x-Ae.x)*(_e.y-Ae.y))._round()),Ae.y<d&&_e.y<d||(Ae.y<d?Ae=new k(Ae.x+(d-Ae.y)/(_e.y-Ae.y)*(_e.x-Ae.x),d)._round():_e.y<d&&(_e=new k(Ae.x+(d-Ae.y)/(_e.y-Ae.y)*(_e.x-Ae.x),d)._round()),Ae.x>=v&&_e.x>=v||(Ae.x>=v?Ae=new k(v,Ae.y+(v-Ae.x)/(_e.x-Ae.x)*(_e.y-Ae.y))._round():_e.x>=v&&(_e=new k(v,Ae.y+(v-Ae.x)/(_e.x-Ae.x)*(_e.y-Ae.y))._round()),Ae.y>=w&&_e.y>=w||(Ae.y>=w?Ae=new k(Ae.x+(w-Ae.y)/(_e.y-Ae.y)*(_e.x-Ae.x),w)._round():_e.y>=w&&(_e=new k(Ae.x+(w-Ae.y)/(_e.y-Ae.y)*(_e.x-Ae.x),w)._round()),Z&&Ae.equals(Z[Z.length-1])||(Z=[Ae],D.push(Z)),Z.push(_e)))))}}return D}dr("FeatureIndex",sC,{omit:["rawTileData","sourceLayerCoder"]});class Pp extends k{constructor(u,d,v,w){super(u,d),this.angle=v,w!==void 0&&(this.segment=w)}clone(){return new Pp(this.x,this.y,this.angle,this.segment)}}function AC(f,u,d,v,w){if(u.segment===void 0||d===0)return!0;let D=u,F=u.segment+1,G=0;for(;G>-d/2;){if(F--,F<0)return!1;G-=f[F].dist(D),D=f[F]}G+=f[F].dist(f[F+1]),F++;const Z=[];let re=0;for(;G<d/2;){const Ae=f[F],_e=f[F+1];if(!_e)return!1;let Re=f[F-1].angleTo(Ae)-Ae.angleTo(_e);for(Re=Math.abs((Re+3*Math.PI)%(2*Math.PI)-Math.PI),Z.push({distance:G,angleDelta:Re}),re+=Re;G-Z[0].distance>v;)re-=Z.shift().angleDelta;if(re>w)return!1;F++,G+=Ae.dist(_e)}return!0}function cC(f){let u=0;for(let d=0;d<f.length-1;d++)u+=f[d].dist(f[d+1]);return u}function ld(f,u,d){return f?.6*u*d:0}function hC(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function A3(f,u,d,v,w,D){const F=ld(d,w,D),G=hC(d,v)*D;let Z=0;const re=cC(f)/2;for(let Ae=0;Ae<f.length-1;Ae++){const _e=f[Ae],Re=f[Ae+1],Le=_e.dist(Re);if(Z+Le>re){const je=(re-Z)/Le,He=vi.number(_e.x,Re.x,je),at=vi.number(_e.y,Re.y,je),vt=new Pp(He,at,Re.angleTo(_e),Ae);return vt._round(),!F||AC(f,vt,G,F,u)?vt:void 0}Z+=Le}}function bm(f,u,d,v,w,D,F,G,Z){const re=ld(v,D,F),Ae=hC(v,w),_e=Ae*F,Re=f[0].x===0||f[0].x===Z||f[0].y===0||f[0].y===Z;return u-_e<u/4&&(u=_e+u/4),vo(f,Re?u/2*G%u:(Ae/2+2*D)*F*G%u,u,re,d,_e,Re,!1,Z)}function vo(f,u,d,v,w,D,F,G,Z){const re=D/2,Ae=cC(f);let _e=0,Re=u-d,Le=[];for(let je=0;je<f.length-1;je++){const He=f[je],at=f[je+1],vt=He.dist(at),jt=at.angleTo(He);for(;Re+d<_e+vt;){Re+=d;const St=(Re-_e)/vt,Ke=vi.number(He.x,at.x,St),nt=vi.number(He.y,at.y,St);if(Ke>=0&&Ke<Z&&nt>=0&&nt<Z&&Re-re>=0&&Re+re<=Ae){const It=new Pp(Ke,nt,jt,je);It._round(),v&&!AC(f,It,D,v,w)||Le.push(It)}}_e+=vt}return G||Le.length||F||(Le=vo(f,_e/2,d,v,w,D,F,!0,Z)),Le}dr("Anchor",Pp);const $0=dA;function Ic(f,u,d,v){const w=[],D=f.image,F=D.pixelRatio,G=D.paddedRect.w-2*$0,Z=D.paddedRect.h-2*$0;let re={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const Ae=D.stretchX||[[0,G]],_e=D.stretchY||[[0,Z]],Re=(Bn,Gr)=>Bn+Gr[1]-Gr[0],Le=Ae.reduce(Re,0),je=_e.reduce(Re,0),He=G-Le,at=Z-je;let vt=0,jt=Le,St=0,Ke=je,nt=0,It=He,un=0,Fn=at;if(D.content&&v){const Bn=D.content,Gr=Bn[2]-Bn[0],jr=Bn[3]-Bn[1];(D.textFitWidth||D.textFitHeight)&&(re=ym(f)),vt=Cl(Ae,0,Bn[0]),St=Cl(_e,0,Bn[1]),jt=Cl(Ae,Bn[0],Bn[2]),Ke=Cl(_e,Bn[1],Bn[3]),nt=Bn[0]-vt,un=Bn[1]-St,It=Gr-jt,Fn=jr-Ke}const mn=re.x1,bn=re.y1,Hn=re.x2-mn,Ln=re.y2-bn,sr=(Bn,Gr,jr,Wr)=>{const ei=zd(Bn.stretch-vt,jt,Hn,mn),Ro=Zg(Bn.fixed-nt,It,Bn.stretch,Le),ol=zd(Gr.stretch-St,Ke,Ln,bn),$l=Zg(Gr.fixed-un,Fn,Gr.stretch,je),Xu=zd(jr.stretch-vt,jt,Hn,mn),ud=Zg(jr.fixed-nt,It,jr.stretch,Le),lc=zd(Wr.stretch-St,Ke,Ln,bn),Eu=Zg(Wr.fixed-un,Fn,Wr.stretch,je),pA=new k(ei,ol),wl=new k(Xu,ol),cu=new k(Xu,lc),DA=new k(ei,lc),LA=new k(Ro/F,$l/F),uc=new k(ud/F,Eu/F),hu=u*Math.PI/180;if(hu){const Ko=Math.sin(hu),mA=Math.cos(hu),qa=[mA,-Ko,Ko,mA];pA._matMult(qa),wl._matMult(qa),DA._matMult(qa),cu._matMult(qa)}const Dh=Bn.stretch+Bn.fixed,kc=Gr.stretch+Gr.fixed;return{tl:pA,tr:wl,bl:DA,br:cu,tex:{x:D.paddedRect.x+$0+Dh,y:D.paddedRect.y+$0+kc,w:jr.stretch+jr.fixed-Dh,h:Wr.stretch+Wr.fixed-kc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:LA,pixelOffsetBR:uc,minFontScaleX:It/F/Hn,minFontScaleY:Fn/F/Ln,isSDF:d}};if(v&&(D.stretchX||D.stretchY)){const Bn=dC(Ae,He,Le),Gr=dC(_e,at,je);for(let jr=0;jr<Bn.length-1;jr++){const Wr=Bn[jr],ei=Bn[jr+1];for(let Ro=0;Ro<Gr.length-1;Ro++)w.push(sr(Wr,Gr[Ro],ei,Gr[Ro+1]))}}else w.push(sr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:G+1},{fixed:0,stretch:Z+1}));return w}function Cl(f,u,d){let v=0;for(const w of f)v+=Math.max(u,Math.min(d,w[1]))-Math.max(u,Math.min(d,w[0]));return v}function dC(f,u,d){const v=[{fixed:-1,stretch:0}];for(const[w,D]of f){const F=v[v.length-1];v.push({fixed:w-F.stretch,stretch:F.stretch}),v.push({fixed:w-F.stretch,stretch:F.stretch+(D-w)})}return v.push({fixed:u+$0,stretch:d}),v}function zd(f,u,d,v){return f/u*d+v}function Zg(f,u,d,v){return f-u*d/v}class Xg{constructor(u,d,v,w,D,F,G,Z,re,Ae){var _e;if(this.boxStartIndex=u.length,re){let Re=F.top,Le=F.bottom;const je=F.collisionPadding;je&&(Re-=je[1],Le+=je[3]);let He=Le-Re;He>0&&(He=Math.max(10,He),this.circleDiameter=He)}else{const Re=!((_e=F.image)===null||_e===void 0)&&_e.content&&(F.image.textFitWidth||F.image.textFitHeight)?ym(F):{x1:F.left,y1:F.top,x2:F.right,y2:F.bottom};Re.y1=Re.y1*G-Z[0],Re.y2=Re.y2*G+Z[2],Re.x1=Re.x1*G-Z[3],Re.x2=Re.x2*G+Z[1];const Le=F.collisionPadding;if(Le&&(Re.x1-=Le[0]*G,Re.y1-=Le[1]*G,Re.x2+=Le[2]*G,Re.y2+=Le[3]*G),Ae){const je=new k(Re.x1,Re.y1),He=new k(Re.x2,Re.y1),at=new k(Re.x1,Re.y2),vt=new k(Re.x2,Re.y2),jt=Ae*Math.PI/180;je._rotate(jt),He._rotate(jt),at._rotate(jt),vt._rotate(jt),Re.x1=Math.min(je.x,He.x,at.x,vt.x),Re.x2=Math.max(je.x,He.x,at.x,vt.x),Re.y1=Math.min(je.y,He.y,at.y,vt.y),Re.y2=Math.max(je.y,He.y,at.y,vt.y)}u.emplaceBack(d.x,d.y,Re.x1,Re.y1,Re.x2,Re.y2,v,w,D)}this.boxEndIndex=u.length}}class c3{constructor(u=[],d=(v,w)=>v<w?-1:v>w?1:0){if(this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:d,compare:v}=this,w=d[u];for(;u>0;){const D=u-1>>1,F=d[D];if(v(w,F)>=0)break;d[u]=F,u=D}d[u]=w}_down(u){const{data:d,compare:v}=this,w=this.length>>1,D=d[u];for(;u<w;){let F=1+(u<<1);const G=F+1;if(G<this.length&&v(d[G],d[F])<0&&(F=G),v(d[F],D)>=0)break;d[u]=d[F],u=F}d[u]=D}}function h3(f,u=1,d=!1){let v=1/0,w=1/0,D=-1/0,F=-1/0;const G=f[0];for(let Le=0;Le<G.length;Le++){const je=G[Le];(!Le||je.x<v)&&(v=je.x),(!Le||je.y<w)&&(w=je.y),(!Le||je.x>D)&&(D=je.x),(!Le||je.y>F)&&(F=je.y)}const Z=Math.min(D-v,F-w);let re=Z/2;const Ae=new c3([],d3);if(Z===0)return new k(v,w);for(let Le=v;Le<D;Le+=Z)for(let je=w;je<F;je+=Z)Ae.push(new Rp(Le+re,je+re,re,f));let _e=function(Le){let je=0,He=0,at=0;const vt=Le[0];for(let jt=0,St=vt.length,Ke=St-1;jt<St;Ke=jt++){const nt=vt[jt],It=vt[Ke],un=nt.x*It.y-It.x*nt.y;He+=(nt.x+It.x)*un,at+=(nt.y+It.y)*un,je+=3*un}return new Rp(He/je,at/je,0,Le)}(f),Re=Ae.length;for(;Ae.length;){const Le=Ae.pop();(Le.d>_e.d||!_e.d)&&(_e=Le,d&&console.log("found best %d after %d probes",Math.round(1e4*Le.d)/1e4,Re)),Le.max-_e.d<=u||(re=Le.h/2,Ae.push(new Rp(Le.p.x-re,Le.p.y-re,re,f)),Ae.push(new Rp(Le.p.x+re,Le.p.y-re,re,f)),Ae.push(new Rp(Le.p.x-re,Le.p.y+re,re,f)),Ae.push(new Rp(Le.p.x+re,Le.p.y+re,re,f)),Re+=4)}return d&&(console.log(`num probes: ${Re}`),console.log(`best distance: ${_e.d}`)),_e.p}function d3(f,u){return u.max-f.max}function Rp(f,u,d,v){this.p=new k(f,u),this.h=d,this.d=function(w,D){let F=!1,G=1/0;for(let Z=0;Z<D.length;Z++){const re=D[Z];for(let Ae=0,_e=re.length,Re=_e-1;Ae<_e;Re=Ae++){const Le=re[Ae],je=re[Re];Le.y>w.y!=je.y>w.y&&w.x<(je.x-Le.x)*(w.y-Le.y)/(je.y-Le.y)+Le.x&&(F=!F),G=Math.min(G,bp(w,Le,je))}}return(F?1:-1)*Math.sqrt(G)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}var fA;a.av=void 0,(fA=a.av||(a.av={}))[fA.center=1]="center",fA[fA.left=2]="left",fA[fA.right=3]="right",fA[fA.top=4]="top",fA[fA.bottom=5]="bottom",fA[fA["top-left"]=6]="top-left",fA[fA["top-right"]=7]="top-right",fA[fA["bottom-left"]=8]="bottom-left",fA[fA["bottom-right"]=9]="bottom-right";const ac=7,Jg=Number.POSITIVE_INFINITY;function V0(f,u){return u[1]!==Jg?function(d,v,w){let D=0,F=0;switch(v=Math.abs(v),w=Math.abs(w),d){case"top-right":case"top-left":case"top":F=w-ac;break;case"bottom-right":case"bottom-left":case"bottom":F=-w+ac}switch(d){case"top-right":case"bottom-right":case"right":D=-v;break;case"top-left":case"bottom-left":case"left":D=v}return[D,F]}(f,u[0],u[1]):function(d,v){let w=0,D=0;v<0&&(v=0);const F=v/Math.SQRT2;switch(d){case"top-right":case"top-left":D=F-ac;break;case"bottom-right":case"bottom-left":D=-F+ac;break;case"bottom":D=-v+ac;break;case"top":D=v-ac}switch(d){case"top-right":case"bottom-right":w=-F;break;case"top-left":case"bottom-left":w=F;break;case"left":w=v;break;case"right":w=-v}return[w,D]}(f,u[0])}function bl(f,u,d){var v;const w=f.layout,D=(v=w.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(u,{},d);if(D){const G=D.values,Z=[];for(let re=0;re<G.length;re+=2){const Ae=Z[re]=G[re],_e=G[re+1].map(Re=>Re*Qa);Ae.startsWith("top")?_e[1]-=ac:Ae.startsWith("bottom")&&(_e[1]+=ac),Z[re+1]=_e}return new Ps(Z)}const F=w.get("text-variable-anchor");if(F){let G;G=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(u,{},d)*Qa,Jg]:w.get("text-offset").evaluate(u,{},d).map(re=>re*Qa);const Z=[];for(const re of F)Z.push(re,V0(re,G));return new Ps(Z)}return null}function xl(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function fC(f,u,d,v,w,D,F,G,Z,re,Ae,_e){let Re=D.textMaxSize.evaluate(u,{});Re===void 0&&(Re=F);const Le=f.layers[0].layout,je=Le.get("icon-offset").evaluate(u,{},Ae),He=mC(d.horizontal),at=F/24,vt=f.tilePixelRatio*at,jt=f.tilePixelRatio*Re/24,St=f.tilePixelRatio*G,Ke=f.tilePixelRatio*Le.get("symbol-spacing"),nt=Le.get("text-padding")*f.tilePixelRatio,It=function(jr,Wr,ei,Ro=1){const ol=jr.get("icon-padding").evaluate(Wr,{},ei),$l=ol&&ol.values;return[$l[0]*Ro,$l[1]*Ro,$l[2]*Ro,$l[3]*Ro]}(Le,u,Ae,f.tilePixelRatio),un=Le.get("text-max-angle")/180*Math.PI,Fn=Le.get("text-rotation-alignment")!=="viewport"&&Le.get("symbol-placement")!=="point",mn=Le.get("icon-rotation-alignment")==="map"&&Le.get("symbol-placement")!=="point",bn=Le.get("symbol-placement"),Hn=Ke/2,Ln=Le.get("icon-text-fit");let sr;v&&Ln!=="none"&&(f.allowVerticalPlacement&&d.vertical&&(sr=vm(v,d.vertical,Ln,Le.get("icon-text-fit-padding"),je,at)),He&&(v=vm(v,He,Ln,Le.get("icon-text-fit-padding"),je,at)));const Bn=Ae?_e.line.getGranularityForZoomLevel(Ae.z):1,Gr=(jr,Wr)=>{Wr.x<0||Wr.x>=rt||Wr.y<0||Wr.y>=rt||function(ei,Ro,ol,$l,Xu,ud,lc,Eu,pA,wl,cu,DA,LA,uc,hu,Dh,kc,Ko,mA,qa,sl,Bu,wm,th,Z0){const Ad=ei.addToLineVertexArray(Ro,ol);let nh,Ju,Lh,Hf,vC=0,_C=0,CC=0,bC=0,Zy=-1,Xy=-1;const Zf={};let xC=Oa("");if(ei.allowVerticalPlacement&&$l.vertical){const FA=Eu.layout.get("text-rotate").evaluate(sl,{},th)+90;Lh=new Xg(pA,Ro,wl,cu,DA,$l.vertical,LA,uc,hu,FA),lc&&(Hf=new Xg(pA,Ro,wl,cu,DA,lc,kc,Ko,hu,FA))}if(Xu){const FA=Eu.layout.get("icon-rotate").evaluate(sl,{}),Fh=Eu.layout.get("icon-text-fit")!=="none",Mm=Ic(Xu,FA,wm,Fh),Uh=lc?Ic(lc,FA,wm,Fh):void 0;Ju=new Xg(pA,Ro,wl,cu,DA,Xu,kc,Ko,!1,FA),vC=4*Mm.length;const Sm=ei.iconSizeData;let yf=null;Sm.kind==="source"?(yf=[eh*Eu.layout.get("icon-size").evaluate(sl,{})],yf[0]>Fd&&Je(`${ei.layerIds[0]}: Value for "icon-size" is >= ${Ip}. Reduce your "icon-size".`)):Sm.kind==="composite"&&(yf=[eh*Bu.compositeIconSizes[0].evaluate(sl,{},th),eh*Bu.compositeIconSizes[1].evaluate(sl,{},th)],(yf[0]>Fd||yf[1]>Fd)&&Je(`${ei.layerIds[0]}: Value for "icon-size" is >= ${Ip}. Reduce your "icon-size".`)),ei.addSymbols(ei.icon,Mm,yf,qa,mA,sl,a.ai.none,Ro,Ad.lineStartIndex,Ad.lineLength,-1,th),Zy=ei.icon.placedSymbolArray.length-1,Uh&&(_C=4*Uh.length,ei.addSymbols(ei.icon,Uh,yf,qa,mA,sl,a.ai.vertical,Ro,Ad.lineStartIndex,Ad.lineLength,-1,th),Xy=ei.icon.placedSymbolArray.length-1)}const wC=Object.keys($l.horizontal);for(const FA of wC){const Fh=$l.horizontal[FA];if(!nh){xC=Oa(Fh.text);const Uh=Eu.layout.get("text-rotate").evaluate(sl,{},th);nh=new Xg(pA,Ro,wl,cu,DA,Fh,LA,uc,hu,Uh)}const Mm=Fh.positionedLines.length===1;if(CC+=pC(ei,Ro,Fh,ud,Eu,hu,sl,Dh,Ad,$l.vertical?a.ai.horizontal:a.ai.horizontalOnly,Mm?wC:[FA],Zf,Zy,Bu,th),Mm)break}$l.vertical&&(bC+=pC(ei,Ro,$l.vertical,ud,Eu,hu,sl,Dh,Ad,a.ai.vertical,["vertical"],Zf,Xy,Bu,th));const m3=nh?nh.boxStartIndex:ei.collisionBoxArray.length,g3=nh?nh.boxEndIndex:ei.collisionBoxArray.length,y3=Lh?Lh.boxStartIndex:ei.collisionBoxArray.length,v3=Lh?Lh.boxEndIndex:ei.collisionBoxArray.length,_3=Ju?Ju.boxStartIndex:ei.collisionBoxArray.length,C3=Ju?Ju.boxEndIndex:ei.collisionBoxArray.length,b3=Hf?Hf.boxStartIndex:ei.collisionBoxArray.length,x3=Hf?Hf.boxEndIndex:ei.collisionBoxArray.length;let jd=-1;const t1=(FA,Fh)=>FA&&FA.circleDiameter?Math.max(FA.circleDiameter,Fh):Fh;jd=t1(nh,jd),jd=t1(Lh,jd),jd=t1(Ju,jd),jd=t1(Hf,jd);const MC=jd>-1?1:0;MC&&(jd*=Z0/Qa),ei.glyphOffsetArray.length>=Tp.MAX_GLYPHS&&Je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),sl.sortKey!==void 0&&ei.addToSortKeyRanges(ei.symbolInstances.length,sl.sortKey);const Jy=bl(Eu,sl,th),[SC,EC]=function(FA,Fh){const Mm=FA.length,Uh=Fh==null?void 0:Fh.values;if((Uh==null?void 0:Uh.length)>0)for(let Sm=0;Sm<Uh.length;Sm+=2){const yf=Uh[Sm+1];FA.emplaceBack(a.av[Uh[Sm]],yf[0],yf[1])}return[Mm,FA.length]}(ei.textAnchorOffsets,Jy);ei.symbolInstances.emplaceBack(Ro.x,Ro.y,Zf.right>=0?Zf.right:-1,Zf.center>=0?Zf.center:-1,Zf.left>=0?Zf.left:-1,Zf.vertical||-1,Zy,Xy,xC,m3,g3,y3,v3,_3,C3,b3,x3,wl,CC,bC,vC,_C,MC,0,LA,jd,SC,EC)}(f,Wr,jr,d,v,w,sr,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,vt,[nt,nt,nt,nt],Fn,Z,St,It,mn,je,u,D,re,Ae,F)};if(bn==="line")for(const jr of uC(u.geometry,0,0,rt,rt)){const Wr=$n(jr,Bn),ei=bm(Wr,Ke,un,d.vertical||He,v,24,jt,f.overscaling,rt);for(const Ro of ei)He&&f3(f,He.text,Hn,Ro)||Gr(Wr,Ro)}else if(bn==="line-center"){for(const jr of u.geometry)if(jr.length>1){const Wr=$n(jr,Bn),ei=A3(Wr,un,d.vertical||He,v,24,jt);ei&&Gr(Wr,ei)}}else if(u.type==="Polygon")for(const jr of Fc(u.geometry,0)){const Wr=h3(jr,16);Gr($n(jr[0],Bn,!0),new Pp(Wr.x,Wr.y,0))}else if(u.type==="LineString")for(const jr of u.geometry){const Wr=$n(jr,Bn);Gr(Wr,new Pp(Wr[0].x,Wr[0].y,0))}else if(u.type==="Point")for(const jr of u.geometry)for(const Wr of jr)Gr([Wr],new Pp(Wr.x,Wr.y,0))}function pC(f,u,d,v,w,D,F,G,Z,re,Ae,_e,Re,Le,je){const He=function(jt,St,Ke,nt,It,un,Fn,mn){const bn=nt.layout.get("text-rotate").evaluate(un,{})*Math.PI/180,Hn=[];for(const Ln of St.positionedLines)for(const sr of Ln.positionedGlyphs){if(!sr.rect)continue;const Bn=sr.rect||{};let Gr=rl+1,jr=!0,Wr=1,ei=0;const Ro=(It||mn)&&sr.vertical,ol=sr.metrics.advance*sr.scale/2;if(mn&&St.verticalizable&&(ei=Ln.lineOffset/2-(sr.imageName?-(Qa-sr.metrics.width*sr.scale)/2:(sr.scale-1)*Qa)),sr.imageName){const Ko=Fn[sr.imageName];jr=Ko.sdf,Wr=Ko.pixelRatio,Gr=dA/Wr}const $l=It?[sr.x+ol,sr.y]:[0,0];let Xu=It?[0,0]:[sr.x+ol+Ke[0],sr.y+Ke[1]-ei],ud=[0,0];Ro&&(ud=Xu,Xu=[0,0]);const lc=sr.metrics.isDoubleResolution?2:1,Eu=(sr.metrics.left-Gr)*sr.scale-ol+Xu[0],pA=(-sr.metrics.top-Gr)*sr.scale+Xu[1],wl=Eu+Bn.w/lc*sr.scale/Wr,cu=pA+Bn.h/lc*sr.scale/Wr,DA=new k(Eu,pA),LA=new k(wl,pA),uc=new k(Eu,cu),hu=new k(wl,cu);if(Ro){const Ko=new k(-ol,ol-Op),mA=-Math.PI/2,qa=Qa/2-ol,sl=new k(5-Op-qa,-(sr.imageName?qa:0)),Bu=new k(...ud);DA._rotateAround(mA,Ko)._add(sl)._add(Bu),LA._rotateAround(mA,Ko)._add(sl)._add(Bu),uc._rotateAround(mA,Ko)._add(sl)._add(Bu),hu._rotateAround(mA,Ko)._add(sl)._add(Bu)}if(bn){const Ko=Math.sin(bn),mA=Math.cos(bn),qa=[mA,-Ko,Ko,mA];DA._matMult(qa),LA._matMult(qa),uc._matMult(qa),hu._matMult(qa)}const Dh=new k(0,0),kc=new k(0,0);Hn.push({tl:DA,tr:LA,bl:uc,br:hu,tex:Bn,writingMode:St.writingMode,glyphOffset:$l,sectionIndex:sr.sectionIndex,isSDF:jr,pixelOffsetTL:Dh,pixelOffsetBR:kc,minFontScaleX:0,minFontScaleY:0})}return Hn}(0,d,G,w,D,F,v,f.allowVerticalPlacement),at=f.textSizeData;let vt=null;at.kind==="source"?(vt=[eh*w.layout.get("text-size").evaluate(F,{})],vt[0]>Fd&&Je(`${f.layerIds[0]}: Value for "text-size" is >= ${Ip}. Reduce your "text-size".`)):at.kind==="composite"&&(vt=[eh*Le.compositeTextSizes[0].evaluate(F,{},je),eh*Le.compositeTextSizes[1].evaluate(F,{},je)],(vt[0]>Fd||vt[1]>Fd)&&Je(`${f.layerIds[0]}: Value for "text-size" is >= ${Ip}. Reduce your "text-size".`)),f.addSymbols(f.text,He,vt,G,D,F,re,u,Z.lineStartIndex,Z.lineLength,Re,je);for(const jt of Ae)_e[jt]=f.text.placedSymbolArray.length-1;return 4*He.length}function mC(f){for(const u in f)return f[u];return null}function f3(f,u,d,v){const w=f.compareText;if(u in w){const D=w[u];for(let F=D.length-1;F>=0;F--)if(v.dist(D[F])<d)return!0}else w[u]=[];return w[u].push(v),!1}const gC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class qy{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,v]=new Uint8Array(u,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=v>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const D=gC[15&v];if(!D)throw new Error("Unrecognized array type.");const[F]=new Uint16Array(u,2,1),[G]=new Uint32Array(u,4,1);return new qy(G,F,D,u)}constructor(u,d=64,v=Float64Array,w){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=v,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const D=gC.indexOf(this.ArrayType),F=2*u*this.ArrayType.BYTES_PER_ELEMENT,G=u*this.IndexArrayType.BYTES_PER_ELEMENT,Z=(8-G%8)%8;if(D<0)throw new Error(`Unexpected typed array class: ${v}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+G+Z,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+F+G+Z),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+G+Z,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+D]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=u)}add(u,d){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=u,this.coords[this._pos++]=d,v}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return Yy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,d,v,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:D,coords:F,nodeSize:G}=this,Z=[0,D.length-1,0],re=[];for(;Z.length;){const Ae=Z.pop()||0,_e=Z.pop()||0,Re=Z.pop()||0;if(_e-Re<=G){for(let at=Re;at<=_e;at++){const vt=F[2*at],jt=F[2*at+1];vt>=u&&vt<=v&&jt>=d&&jt<=w&&re.push(D[at])}continue}const Le=Re+_e>>1,je=F[2*Le],He=F[2*Le+1];je>=u&&je<=v&&He>=d&&He<=w&&re.push(D[Le]),(Ae===0?u<=je:d<=He)&&(Z.push(Re),Z.push(Le-1),Z.push(1-Ae)),(Ae===0?v>=je:w>=He)&&(Z.push(Le+1),Z.push(_e),Z.push(1-Ae))}return re}within(u,d,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:D,nodeSize:F}=this,G=[0,w.length-1,0],Z=[],re=v*v;for(;G.length;){const Ae=G.pop()||0,_e=G.pop()||0,Re=G.pop()||0;if(_e-Re<=F){for(let at=Re;at<=_e;at++)yC(D[2*at],D[2*at+1],u,d)<=re&&Z.push(w[at]);continue}const Le=Re+_e>>1,je=D[2*Le],He=D[2*Le+1];yC(je,He,u,d)<=re&&Z.push(w[Le]),(Ae===0?u-v<=je:d-v<=He)&&(G.push(Re),G.push(Le-1),G.push(1-Ae)),(Ae===0?u+v>=je:d+v>=He)&&(G.push(Le+1),G.push(_e),G.push(1-Ae))}return Z}}function Yy(f,u,d,v,w,D){if(w-v<=d)return;const F=v+w>>1;$y(f,u,F,v,w,D),Yy(f,u,d,v,F-1,1-D),Yy(f,u,d,F+1,w,1-D)}function $y(f,u,d,v,w,D){for(;w>v;){if(w-v>600){const re=w-v+1,Ae=d-v+1,_e=Math.log(re),Re=.5*Math.exp(2*_e/3),Le=.5*Math.sqrt(_e*Re*(re-Re)/re)*(Ae-re/2<0?-1:1);$y(f,u,d,Math.max(v,Math.floor(d-Ae*Re/re+Le)),Math.min(w,Math.floor(d+(re-Ae)*Re/re+Le)),D)}const F=u[2*d+D];let G=v,Z=w;for(Vf(f,u,v,d),u[2*w+D]>F&&Vf(f,u,v,w);G<Z;){for(Vf(f,u,G,Z),G++,Z--;u[2*G+D]<F;)G++;for(;u[2*Z+D]>F;)Z--}u[2*v+D]===F?Vf(f,u,v,Z):(Z++,Vf(f,u,Z,w)),Z<=d&&(v=Z+1),d<=Z&&(w=Z-1)}}function Vf(f,u,d,v){H0(f,d,v),H0(u,2*d,2*v),H0(u,2*d+1,2*v+1)}function H0(f,u,d){const v=f[u];f[u]=f[d],f[d]=v}function yC(f,u,d,v){const w=f-d,D=u-v;return w*w+D*D}var e1;a.ce=void 0,(e1=a.ce||(a.ce={})).create="create",e1.load="load",e1.fullLoad="fullLoad";let xm=null,KA=[];const Kp=1e3/60,Vy="loadTime",Hy="fullLoadTime",p3={mark(f){performance.mark(f)},frame(f){const u=f;xm!=null&&KA.push(u-xm),xm=u},clearMetrics(){xm=null,KA=[],performance.clearMeasures(Vy),performance.clearMeasures(Hy);for(const f in a.ce)performance.clearMarks(a.ce[f])},getPerformanceMetrics(){performance.measure(Vy,a.ce.create,a.ce.load),performance.measure(Hy,a.ce.create,a.ce.fullLoad);const f=performance.getEntriesByName(Vy)[0].duration,u=performance.getEntriesByName(Hy)[0].duration,d=KA.length,v=1/(KA.reduce((D,F)=>D+F,0)/d/1e3),w=KA.filter(D=>D>Kp).reduce((D,F)=>D+(F-Kp)/Kp,0);return{loadTime:f,fullLoadTime:u,fps:v,percentDroppedFrames:w/(d+w)*100,totalFrames:d}}};a.$=bt,a.A=N,a.B=td,a.C=function(f){if(Nt==null){const u=f.navigator?f.navigator.userAgent:null;Nt=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Nt},a.D=hr,a.E=Kt,a.F=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Ar(()=>this.process()),this.subscription=function(d,v,w,D){return d.addEventListener(v,w,!1),{unsubscribe:()=>{d.removeEventListener(v,w,!1)}}}(this.target,"message",d=>this.receive(d)),this.globalScope=gt(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise((d,v)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[w]={resolve:d,reject:v},u&&u.signal.addEventListener("abort",()=>{delete this.resolveRejects[w];const G={id:w,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(G)},{once:!0});const D=[],F=Object.assign(Object.assign({},f),{id:w,sourceMapId:this.mapId,origin:location.origin,data:tc(f.data,D)});this.target.postMessage(F,{transfer:D})})}receive(f){const u=f.data,d=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[d];const v=this.abortControllers[d];return delete this.abortControllers[d],void(v&&v.abort())}if(gt(self)||u.mustQueue)return this.tasks[d]=u,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return s(this,void 0,void 0,function*(){if(u.type==="<response>"){const w=this.resolveRejects[f];return delete this.resolveRejects[f],w?void(u.error?w.reject(vh(u.error)):w.resolve(vh(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=vh(u.data),v=new AbortController;this.abortControllers[f]=v;try{const w=yield this.messageHandlers[u.type](u.sourceMapId,d,v);this.completeTask(f,null,w)}catch(w){this.completeTask(f,w)}})}completeTask(f,u,d){const v=[];delete this.abortControllers[f];const w={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?tc(u):null,data:tc(d,v)};this.target.postMessage(w,{transfer:v})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.G=Qn,a.H=function(){var f=new N(16);return N!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},a.I=W0,a.J=function(f,u,d){var v,w,D,F,G,Z,re,Ae,_e,Re,Le,je,He=d[0],at=d[1],vt=d[2];return u===f?(f[12]=u[0]*He+u[4]*at+u[8]*vt+u[12],f[13]=u[1]*He+u[5]*at+u[9]*vt+u[13],f[14]=u[2]*He+u[6]*at+u[10]*vt+u[14],f[15]=u[3]*He+u[7]*at+u[11]*vt+u[15]):(w=u[1],D=u[2],F=u[3],G=u[4],Z=u[5],re=u[6],Ae=u[7],_e=u[8],Re=u[9],Le=u[10],je=u[11],f[0]=v=u[0],f[1]=w,f[2]=D,f[3]=F,f[4]=G,f[5]=Z,f[6]=re,f[7]=Ae,f[8]=_e,f[9]=Re,f[10]=Le,f[11]=je,f[12]=v*He+G*at+_e*vt+u[12],f[13]=w*He+Z*at+Re*vt+u[13],f[14]=D*He+re*at+Le*vt+u[14],f[15]=F*He+Ae*at+je*vt+u[15]),f},a.K=function(f,u,d){var v=d[0],w=d[1],D=d[2];return f[0]=u[0]*v,f[1]=u[1]*v,f[2]=u[2]*v,f[3]=u[3]*v,f[4]=u[4]*w,f[5]=u[5]*w,f[6]=u[6]*w,f[7]=u[7]*w,f[8]=u[8]*D,f[9]=u[9]*D,f[10]=u[10]*D,f[11]=u[11]*D,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},a.L=function(f,u,d){var v=u[0],w=u[1],D=u[2],F=u[3],G=u[4],Z=u[5],re=u[6],Ae=u[7],_e=u[8],Re=u[9],Le=u[10],je=u[11],He=u[12],at=u[13],vt=u[14],jt=u[15],St=d[0],Ke=d[1],nt=d[2],It=d[3];return f[0]=St*v+Ke*G+nt*_e+It*He,f[1]=St*w+Ke*Z+nt*Re+It*at,f[2]=St*D+Ke*re+nt*Le+It*vt,f[3]=St*F+Ke*Ae+nt*je+It*jt,f[4]=(St=d[4])*v+(Ke=d[5])*G+(nt=d[6])*_e+(It=d[7])*He,f[5]=St*w+Ke*Z+nt*Re+It*at,f[6]=St*D+Ke*re+nt*Le+It*vt,f[7]=St*F+Ke*Ae+nt*je+It*jt,f[8]=(St=d[8])*v+(Ke=d[9])*G+(nt=d[10])*_e+(It=d[11])*He,f[9]=St*w+Ke*Z+nt*Re+It*at,f[10]=St*D+Ke*re+nt*Le+It*vt,f[11]=St*F+Ke*Ae+nt*je+It*jt,f[12]=(St=d[12])*v+(Ke=d[13])*G+(nt=d[14])*_e+(It=d[15])*He,f[13]=St*w+Ke*Z+nt*Re+It*at,f[14]=St*D+Ke*re+nt*Le+It*vt,f[15]=St*F+Ke*Ae+nt*je+It*jt,f},a.M=function(f,u){const d={};for(let v=0;v<u.length;v++){const w=u[v];w in f&&(d[w]=f[w])}return d},a.N=Ur,a.O=il,a.P=k,a.Q=ln,a.R=Hu,a.S=Ds,a.T=bc,a.U=ne,a.V=X,a.W=Sn,a.X=rt,a.Y=ni,a.Z=Oi,a._=s,a.a=Cr,a.a$=function(){return new Float64Array(16)},a.a0=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(d=>{u.onloadstart=()=>{d(u)};for(const v of f){const w=window.document.createElement("source");me(v)||(u.crossOrigin="Anonymous"),w.src=v,u.appendChild(w)}})},a.a1=function(){return Ut++},a.a2=M,a.a3=Tp,a.a4=HA,a.a5=ic,a.a6=oC,a.a7=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,v,w,D)=>{const F=w||D;return u[v]=!F||F.toLowerCase(),""}),u["max-age"]){const d=parseInt(u["max-age"],10);isNaN(d)?delete u["max-age"]:u["max-age"]=d}return u},a.a8=function(f){return Math.log(f)/Math.LN2},a.a9=function(f){var u=f[0],d=f[1];return u*u+d*d},a.aA=Os,a.aB=xt,a.aC=At,a.aD=wn,a.aE=_n,a.aF=85.051129,a.aG=function(f){return Math.pow(2,f)},a.aH=Jt,a.aI=mt,a.aJ=cr,a.aK=mr,a.aL=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f},a.aM=function(f,u,d){return f[0]=u[0]+d[0],f[1]=u[1]+d[1],f[2]=u[2]+d[2],f},a.aN=function(f){var u=new N(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},a.aO=function(f,u,d){return f[0]=u[0]*d[0],f[1]=u[1]*d[1],f[2]=u[2]*d[2],f[3]=u[3]*d[3],f},a.aP=function(f,u,d){return f[0]=u[0]-d[0],f[1]=u[1]-d[1],f[2]=u[2]-d[2],f},a.aQ=function(f,u){var d=u[0],v=u[1],w=u[2],D=d*d+v*v+w*w;return D>0&&(D=1/Math.sqrt(D)),f[0]=u[0]*D,f[1]=u[1]*D,f[2]=u[2]*D,f},a.aR=function(f,u,d){var v=u[0],w=u[1],D=u[2],F=d[0],G=d[1],Z=d[2];return f[0]=w*Z-D*G,f[1]=D*F-v*Z,f[2]=v*G-w*F,f},a.aS=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},a.aT=Ui,a.aU=Xo,a.aV=function(f,u,d,v,w){var D,F=1/Math.tan(u/2);return f[0]=F/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=F,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,w!=null&&w!==1/0?(f[10]=(w+v)*(D=1/(v-w)),f[14]=2*w*v*D):(f[10]=-1,f[14]=-2*v),f},a.aW=function(f){var u=new N(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},a.aX=function(f,u,d){var v=Math.sin(d),w=Math.cos(d),D=u[0],F=u[1],G=u[2],Z=u[3],re=u[4],Ae=u[5],_e=u[6],Re=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=D*w+re*v,f[1]=F*w+Ae*v,f[2]=G*w+_e*v,f[3]=Z*w+Re*v,f[4]=re*w-D*v,f[5]=Ae*w-F*v,f[6]=_e*w-G*v,f[7]=Re*w-Z*v,f},a.aY=function(f,u,d){var v=Math.sin(d),w=Math.cos(d),D=u[4],F=u[5],G=u[6],Z=u[7],re=u[8],Ae=u[9],_e=u[10],Re=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=D*w+re*v,f[5]=F*w+Ae*v,f[6]=G*w+_e*v,f[7]=Z*w+Re*v,f[8]=re*w-D*v,f[9]=Ae*w-F*v,f[10]=_e*w-G*v,f[11]=Re*w-Z*v,f},a.aZ=function(){const f=new Float32Array(16);return he(f),f},a.a_=function(){const f=new Float64Array(16);return he(f),f},a.aa=function(f){return f*Math.PI/180},a.ab=wt,a.ac=function(f,u){const d=[];for(const v in f)v in u||d.push(v);return d},a.ad=Pe,a.ae=function(f){return Math.hypot(f[0],f[1])},a.af=function(f){return f[0]=0,f[1]=0,f},a.ag=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f},a.ah=function(f,u){let d=0,v=0;if(f.kind==="constant")v=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:w,minZoom:D,maxZoom:F}=f,G=w?wt(pr.interpolationFactor(w,u,D,F),0,1):0;f.kind==="camera"?v=vi.number(f.minSize,f.maxSize,G):d=G}return{uSizeT:d,uSize:v}},a.aj=function(f,{uSize:u,uSizeT:d},{lowerSize:v,upperSize:w}){return f.kind==="source"?v/eh:f.kind==="composite"?vi.number(v/eh,w/eh,d):u},a.ak=Y0,a.al=pe,a.am=function(f,u,d,v){const w=u.y-f.y,D=u.x-f.x,F=v.y-d.y,G=v.x-d.x,Z=F*D-G*w;if(Z===0)return null;const re=(G*(f.y-d.y)-F*(f.x-d.x))/Z;return new k(f.x+re*D,f.y+re*w)},a.an=function(f,u){var d=u[0],v=u[1],w=u[2],D=u[3],F=u[4],G=u[5],Z=u[6],re=u[7],Ae=u[8],_e=u[9],Re=u[10],Le=u[11],je=u[12],He=u[13],at=u[14],vt=u[15],jt=d*G-v*F,St=d*Z-w*F,Ke=d*re-D*F,nt=v*Z-w*G,It=v*re-D*G,un=w*re-D*Z,Fn=Ae*He-_e*je,mn=Ae*at-Re*je,bn=Ae*vt-Le*je,Hn=_e*at-Re*He,Ln=_e*vt-Le*He,sr=Re*vt-Le*at,Bn=jt*sr-St*Ln+Ke*Hn+nt*bn-It*mn+un*Fn;return Bn?(f[0]=(G*sr-Z*Ln+re*Hn)*(Bn=1/Bn),f[1]=(w*Ln-v*sr-D*Hn)*Bn,f[2]=(He*un-at*It+vt*nt)*Bn,f[3]=(Re*It-_e*un-Le*nt)*Bn,f[4]=(Z*bn-F*sr-re*mn)*Bn,f[5]=(d*sr-w*bn+D*mn)*Bn,f[6]=(at*Ke-je*un-vt*St)*Bn,f[7]=(Ae*un-Re*Ke+Le*St)*Bn,f[8]=(F*Ln-G*bn+re*Fn)*Bn,f[9]=(v*bn-d*Ln-D*Fn)*Bn,f[10]=(je*It-He*Ke+vt*jt)*Bn,f[11]=(_e*Ke-Ae*It-Le*jt)*Bn,f[12]=(G*mn-F*Hn-Z*Fn)*Bn,f[13]=(d*Hn-v*mn+w*Fn)*Bn,f[14]=(He*St-je*nt-at*jt)*Bn,f[15]=(Ae*nt-_e*St+Re*jt)*Bn,f):null},a.ao=uC,a.ap=Eh,a.aq=he,a.ar=function(f){let u=1/0,d=1/0,v=-1/0,w=-1/0;for(const D of f)u=Math.min(u,D.x),d=Math.min(d,D.y),v=Math.max(v,D.x),w=Math.max(w,D.y);return[u,d,v,w]},a.as=Qa,a.at=ze,a.au=function(f,u,d,v,w=!1){if(!d[0]&&!d[1])return[0,0];const D=w?v==="map"?-f.bearingInRadians:0:v==="viewport"?f.bearingInRadians:0;if(D){const F=Math.sin(D),G=Math.cos(D);d=[d[0]*G-d[1]*F,d[0]*F+d[1]*G]}return[w?d[0]:ze(u,d[0],f.zoom),w?d[1]:ze(u,d[1],f.zoom)]},a.aw=Yf,a.ax=xl,a.ay=q0,a.az=qy,a.b=nn,a.b$=f=>f.type==="line",a.b0=function(f,u,d){const v=new Float64Array(4);return function(w,D,F,G){var Z=.5*Math.PI/180;D*=Z,F*=Z,G*=Z;var re=Math.sin(D),Ae=Math.cos(D),_e=Math.sin(F),Re=Math.cos(F),Le=Math.sin(G),je=Math.cos(G);w[0]=re*Re*je-Ae*_e*Le,w[1]=Ae*_e*je+re*Re*Le,w[2]=Ae*Re*Le-re*_e*je,w[3]=Ae*Re*je+re*_e*Le}(v,f,u-90,d),v},a.b1=function(f,u,d,v){var w,D,F,G,Z,re=u[0],Ae=u[1],_e=u[2],Re=u[3],Le=d[0],je=d[1],He=d[2],at=d[3];return(D=re*Le+Ae*je+_e*He+Re*at)<0&&(D=-D,Le=-Le,je=-je,He=-He,at=-at),1-D>J?(w=Math.acos(D),F=Math.sin(w),G=Math.sin((1-v)*w)/F,Z=Math.sin(v*w)/F):(G=1-v,Z=v),f[0]=G*re+Z*Le,f[1]=G*Ae+Z*je,f[2]=G*_e+Z*He,f[3]=G*Re+Z*at,f},a.b2=function(f){const u=new Float64Array(9);var d,v,w,D,F,G,Z,re,Ae,_e,Re,Le,je,He,at,vt,jt,St;_e=(w=(v=f)[0])*(Z=w+w),Re=(D=v[1])*Z,je=(F=v[2])*Z,He=F*(re=D+D),vt=(G=v[3])*Z,jt=G*re,St=G*(Ae=F+F),(d=u)[0]=1-(Le=D*re)-(at=F*Ae),d[3]=Re-St,d[6]=je+jt,d[1]=Re+St,d[4]=1-_e-at,d[7]=He-vt,d[2]=je-jt,d[5]=He+vt,d[8]=1-_e-Le;const Ke=cr(-Math.asin(wt(u[2],-1,1)));let nt,It;return Math.hypot(u[5],u[8])<.001?(nt=0,It=-cr(Math.atan2(u[3],u[4]))):(nt=cr(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),It=cr(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:nt,pitch:Ke+90,bearing:It}},a.b3=function(f,u){return f.roll==u.roll&&f.pitch==u.pitch&&f.bearing==u.bearing},a.b4=ci,a.b5=pl,a.b6=Xt,a.b7=Qt,a.b8=ht,a.b9=ut,a.bA=Lt,a.bB=De,a.bC=class extends fl{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},a.bD=class extends fl{constructor(f,u){super(f,u),this.current=IA}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},a.bE=uu,a.bF=OA,a.bG=class extends fl{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},a.bH=class extends fl{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},a.bI=ie,a.bJ=function(f,u){var d=Math.sin(u),v=Math.cos(u);return f[0]=v,f[1]=d,f[2]=0,f[3]=-d,f[4]=v,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},a.bK=function(f,u,d){var v=u[0],w=u[1],D=u[2];return f[0]=v*d[0]+w*d[3]+D*d[6],f[1]=v*d[1]+w*d[4]+D*d[7],f[2]=v*d[2]+w*d[5]+D*d[8],f},a.bL=function(f,u,d,v,w,D,F){var G=1/(u-d),Z=1/(v-w),re=1/(D-F);return f[0]=-2*G,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*Z,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*re,f[11]=0,f[12]=(u+d)*G,f[13]=(w+v)*Z,f[14]=(F+D)*re,f[15]=1,f},a.bM=class extends au{},a.bN=Qf,a.bO=class extends cA{},a.bP=Ih,a.bQ=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},a.bR=lf,a.bS=function(f,u,d){var v=u[0],w=u[1],D=u[2],F=d[3]*v+d[7]*w+d[11]*D+d[15];return f[0]=(d[0]*v+d[4]*w+d[8]*D+d[12])/(F=F||1),f[1]=(d[1]*v+d[5]*w+d[9]*D+d[13])/F,f[2]=(d[2]*v+d[6]*w+d[10]*D+d[14])/F,f},a.bT=class extends BA{},a.bU=class extends l{},a.bV=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},a.bW=function(f,u){var d=f[0],v=f[1],w=f[2],D=f[3],F=f[4],G=f[5],Z=f[6],re=f[7],Ae=f[8],_e=f[9],Re=f[10],Le=f[11],je=f[12],He=f[13],at=f[14],vt=f[15],jt=u[0],St=u[1],Ke=u[2],nt=u[3],It=u[4],un=u[5],Fn=u[6],mn=u[7],bn=u[8],Hn=u[9],Ln=u[10],sr=u[11],Bn=u[12],Gr=u[13],jr=u[14],Wr=u[15];return Math.abs(d-jt)<=J*Math.max(1,Math.abs(d),Math.abs(jt))&&Math.abs(v-St)<=J*Math.max(1,Math.abs(v),Math.abs(St))&&Math.abs(w-Ke)<=J*Math.max(1,Math.abs(w),Math.abs(Ke))&&Math.abs(D-nt)<=J*Math.max(1,Math.abs(D),Math.abs(nt))&&Math.abs(F-It)<=J*Math.max(1,Math.abs(F),Math.abs(It))&&Math.abs(G-un)<=J*Math.max(1,Math.abs(G),Math.abs(un))&&Math.abs(Z-Fn)<=J*Math.max(1,Math.abs(Z),Math.abs(Fn))&&Math.abs(re-mn)<=J*Math.max(1,Math.abs(re),Math.abs(mn))&&Math.abs(Ae-bn)<=J*Math.max(1,Math.abs(Ae),Math.abs(bn))&&Math.abs(_e-Hn)<=J*Math.max(1,Math.abs(_e),Math.abs(Hn))&&Math.abs(Re-Ln)<=J*Math.max(1,Math.abs(Re),Math.abs(Ln))&&Math.abs(Le-sr)<=J*Math.max(1,Math.abs(Le),Math.abs(sr))&&Math.abs(je-Bn)<=J*Math.max(1,Math.abs(je),Math.abs(Bn))&&Math.abs(He-Gr)<=J*Math.max(1,Math.abs(He),Math.abs(Gr))&&Math.abs(at-jr)<=J*Math.max(1,Math.abs(at),Math.abs(jr))&&Math.abs(vt-Wr)<=J*Math.max(1,Math.abs(vt),Math.abs(Wr))},a.bX=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},a.bY=f=>f.type==="symbol",a.bZ=f=>f.type==="circle",a.b_=f=>f.type==="heatmap",a.ba=Te,a.bb=Ns,a.bc=function(f,u,d,v,w){return ut(v,w,wt((f-u)/(d-u),0,1))},a.bd=Qe,a.be=function(){return new Float64Array(4)},a.bf=function(){return new Float64Array(3)},a.bg=function(f,u,d,v){var w=[],D=[];return w[0]=u[0]-d[0],w[1]=u[1]-d[1],w[2]=u[2]-d[2],D[0]=w[0]*Math.cos(v)-w[1]*Math.sin(v),D[1]=w[0]*Math.sin(v)+w[1]*Math.cos(v),D[2]=w[2],f[0]=D[0]+d[0],f[1]=D[1]+d[1],f[2]=D[2]+d[2],f},a.bh=function(f,u,d,v){var w=[],D=[];return w[0]=u[0]-d[0],w[1]=u[1]-d[1],w[2]=u[2]-d[2],D[0]=w[0],D[1]=w[1]*Math.cos(v)-w[2]*Math.sin(v),D[2]=w[1]*Math.sin(v)+w[2]*Math.cos(v),f[0]=D[0]+d[0],f[1]=D[1]+d[1],f[2]=D[2]+d[2],f},a.bi=function(f,u,d,v){var w=[],D=[];return w[0]=u[0]-d[0],w[1]=u[1]-d[1],w[2]=u[2]-d[2],D[0]=w[2]*Math.sin(v)+w[0]*Math.cos(v),D[1]=w[1],D[2]=w[2]*Math.cos(v)-w[0]*Math.sin(v),f[0]=D[0]+d[0],f[1]=D[1]+d[1],f[2]=D[2]+d[2],f},a.bj=function(f,u,d){var v=Math.sin(d),w=Math.cos(d),D=u[0],F=u[1],G=u[2],Z=u[3],re=u[8],Ae=u[9],_e=u[10],Re=u[11];return u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=D*w-re*v,f[1]=F*w-Ae*v,f[2]=G*w-_e*v,f[3]=Z*w-Re*v,f[8]=D*v+re*w,f[9]=F*v+Ae*w,f[10]=G*v+_e*w,f[11]=Z*v+Re*w,f},a.bk=function(f,u){const d=Qe(f,360),v=Qe(u,360),w=v-d,D=v>d?w-360:w+360;return Math.abs(w)<Math.abs(D)?w:D},a.bl=function(f){return f[0]=0,f[1]=0,f[2]=0,f},a.bm=function(f,u,d,v){const w=Math.sqrt(f*f+u*u),D=Math.sqrt(d*d+v*v);f/=w,u/=w,d/=D,v/=D;const F=Math.acos(f*d+u*v);return-u*d+f*v>0?F:-F},a.bn=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]},a.bo=Vn,a.bp=function(f,u){const d=Qe(f,2*Math.PI),v=Qe(u,2*Math.PI);return Math.min(Math.abs(d-v),Math.abs(d-v+2*Math.PI),Math.abs(d-v-2*Math.PI))},a.bq=function(f){return Math.hypot(f[0],f[1],f[2])},a.br=function(){const f={},u=Ye.$version;for(const d in Ye.$root){const v=Ye.$root[d];if(v.required){let w=null;w=d==="version"?u:v.type==="array"?[]:{},w!=null&&(f[d]=w)}}return f},a.bs=_h,a.bt=Ge,a.bu=function(f){f=f.slice();const u=Object.create(null);for(let d=0;d<f.length;d++)u[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=xe(f[d],u[f[d].ref]));return f},a.bv=function(f){if(f.type==="custom")return new or(f);switch(f.type){case"background":return new Ze(f);case"circle":return new zf(f);case"fill":return new Io(f);case"fill-extrusion":return new Rd(f);case"heatmap":return new TA(f);case"hillshade":return new Oc(f);case"line":return new U0(f);case"raster":return new Cn(f);case"symbol":return new W(f)}},a.bw=ke,a.bx=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let d=[];try{if(!p(f.version,u.version))return[{command:"setStyle",args:[u]}];p(f.center,u.center)||d.push({command:"setCenter",args:[u.center]}),p(f.centerAltitude,u.centerAltitude)||d.push({command:"setCenterAltitude",args:[u.centerAltitude]}),p(f.zoom,u.zoom)||d.push({command:"setZoom",args:[u.zoom]}),p(f.bearing,u.bearing)||d.push({command:"setBearing",args:[u.bearing]}),p(f.pitch,u.pitch)||d.push({command:"setPitch",args:[u.pitch]}),p(f.roll,u.roll)||d.push({command:"setRoll",args:[u.roll]}),p(f.sprite,u.sprite)||d.push({command:"setSprite",args:[u.sprite]}),p(f.glyphs,u.glyphs)||d.push({command:"setGlyphs",args:[u.glyphs]}),p(f.transition,u.transition)||d.push({command:"setTransition",args:[u.transition]}),p(f.light,u.light)||d.push({command:"setLight",args:[u.light]}),p(f.terrain,u.terrain)||d.push({command:"setTerrain",args:[u.terrain]}),p(f.sky,u.sky)||d.push({command:"setSky",args:[u.sky]}),p(f.projection,u.projection)||d.push({command:"setProjection",args:[u.projection]});const v={},w=[];(function(F,G,Z,re){let Ae;for(Ae in G=G||{},F=F||{})Object.prototype.hasOwnProperty.call(F,Ae)&&(Object.prototype.hasOwnProperty.call(G,Ae)||pt(Ae,Z,re));for(Ae in G)Object.prototype.hasOwnProperty.call(G,Ae)&&(Object.prototype.hasOwnProperty.call(F,Ae)?p(F[Ae],G[Ae])||(F[Ae].type==="geojson"&&G[Ae].type==="geojson"&&_t(F,G,Ae)?Ne(Z,{command:"setGeoJSONSourceData",args:[Ae,G[Ae].data]}):Ot(Ae,G,Z,re)):dt(Ae,G,Z))})(f.sources,u.sources,w,v);const D=[];f.layers&&f.layers.forEach(F=>{"source"in F&&v[F.source]?d.push({command:"removeLayer",args:[F.id]}):D.push(F)}),d=d.concat(w),function(F,G,Z){G=G||[];const re=(F=F||[]).map(Zt),Ae=G.map(Zt),_e=F.reduce(Gt,{}),Re=G.reduce(Gt,{}),Le=re.slice(),je=Object.create(null);let He,at,vt,jt,St;for(let Ke=0,nt=0;Ke<re.length;Ke++)He=re[Ke],Object.prototype.hasOwnProperty.call(Re,He)?nt++:(Ne(Z,{command:"removeLayer",args:[He]}),Le.splice(Le.indexOf(He,nt),1));for(let Ke=0,nt=0;Ke<Ae.length;Ke++)He=Ae[Ae.length-1-Ke],Le[Le.length-1-Ke]!==He&&(Object.prototype.hasOwnProperty.call(_e,He)?(Ne(Z,{command:"removeLayer",args:[He]}),Le.splice(Le.lastIndexOf(He,Le.length-nt),1)):nt++,jt=Le[Le.length-Ke],Ne(Z,{command:"addLayer",args:[Re[He],jt]}),Le.splice(Le.length-Ke,0,He),je[He]=!0);for(let Ke=0;Ke<Ae.length;Ke++)if(He=Ae[Ke],at=_e[He],vt=Re[He],!je[He]&&!p(at,vt))if(p(at.source,vt.source)&&p(at["source-layer"],vt["source-layer"])&&p(at.type,vt.type)){for(St in rn(at.layout,vt.layout,Z,He,null,"setLayoutProperty"),rn(at.paint,vt.paint,Z,He,null,"setPaintProperty"),p(at.filter,vt.filter)||Ne(Z,{command:"setFilter",args:[He,vt.filter]}),p(at.minzoom,vt.minzoom)&&p(at.maxzoom,vt.maxzoom)||Ne(Z,{command:"setLayerZoomRange",args:[He,vt.minzoom,vt.maxzoom]}),at)Object.prototype.hasOwnProperty.call(at,St)&&St!=="layout"&&St!=="paint"&&St!=="filter"&&St!=="metadata"&&St!=="minzoom"&&St!=="maxzoom"&&(St.indexOf("paint.")===0?rn(at[St],vt[St],Z,He,St.slice(6),"setPaintProperty"):p(at[St],vt[St])||Ne(Z,{command:"setLayerProperty",args:[He,St,vt[St]]}));for(St in vt)Object.prototype.hasOwnProperty.call(vt,St)&&!Object.prototype.hasOwnProperty.call(at,St)&&St!=="layout"&&St!=="paint"&&St!=="filter"&&St!=="metadata"&&St!=="minzoom"&&St!=="maxzoom"&&(St.indexOf("paint.")===0?rn(at[St],vt[St],Z,He,St.slice(6),"setPaintProperty"):p(at[St],vt[St])||Ne(Z,{command:"setLayerProperty",args:[He,St,vt[St]]}))}else Ne(Z,{command:"removeLayer",args:[He]}),jt=Le[Le.lastIndexOf(He)+1],Ne(Z,{command:"addLayer",args:[vt,jt]})}(D,u.layers,d)}catch(v){console.warn("Unable to compute style diff:",v),d=[{command:"setStyle",args:[u]}]}return d},a.by=function(f){const u=[],d=f.id;return d===void 0&&u.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),u},a.bz=function f(u,d){if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(let v=0;v<u.length;v++)if(!f(u[v],d[v]))return!1;return!0}if(typeof u=="object"&&u!==null&&d!==null){if(typeof d!="object"||Object.keys(u).length!==Object.keys(d).length)return!1;for(const v in u)if(!f(u[v],d[v]))return!1;return!0}return u===d},a.c=br,a.c0=f=>f.type==="fill",a.c1=f=>f.type==="fill-extrusion",a.c2=f=>f.type==="hillshade",a.c3=f=>f.type==="raster",a.c4=f=>f.type==="background",a.c5=f=>f.type==="custom",a.c6=Ue,a.c7=function(f,u,d){const v=de(u.x-d.x,u.y-d.y),w=de(f.x-d.x,f.y-d.y);var D,F;return cr(Math.atan2(v[0]*w[1]-v[1]*w[0],(D=v)[0]*(F=w)[0]+D[1]*F[1]))},a.c8=st,a.c9=function(f,u,d){var v=u[0],w=u[1];return f[0]=d[0]*v+d[4]*w+d[12],f[1]=d[1]*v+d[5]*w+d[13],f},a.cA=G0,a.cB=Gc,a.cC=Ks,a.ca=function(f,u){const{x:d,y:v}=ni.fromLngLat(u);return!(f<0||f>25||v<0||v>=1||d<0||d>=1)},a.cb=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},a.cc=class extends id{},a.cd=p3,a.cf=function(f){return f.message===fr},a.cg=Sr,a.ch=function(f,u){Cr.REGISTERED_PROTOCOLS[f]=u},a.ci=function(f){delete Cr.REGISTERED_PROTOCOLS[f]},a.cj=function(f,u){const d={};for(let w=0;w<f.length;w++){const D=u&&u[f[w].id]||Yc(f[w]);u&&(u[f[w].id]=D);let F=d[D];F||(F=d[D]=[]),F.push(f[w])}const v=[];for(const w in d)v.push(d[w]);return v},a.ck=dr,a.cl=Hg,a.cm=sC,a.cn=qg,a.co=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=rt/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],d=u.layout,v=u._unevaluatedLayout._values,w={layoutIconSize:v["icon-size"].possiblyEvaluate(new Ho(f.bucket.zoom+1),f.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Ho(f.bucket.zoom+1),f.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Ho(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:re,maxZoom:Ae}=f.bucket.textSizeData;w.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Ho(re),f.canonical),v["text-size"].possiblyEvaluate(new Ho(Ae),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:re,maxZoom:Ae}=f.bucket.iconSizeData;w.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Ho(re),f.canonical),v["icon-size"].possiblyEvaluate(new Ho(Ae),f.canonical)]}const D=d.get("text-line-height")*Qa,F=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",G=d.get("text-keep-upright"),Z=d.get("text-size");for(const re of f.bucket.features){const Ae=d.get("text-font").evaluate(re,{},f.canonical).join(","),_e=Z.evaluate(re,{},f.canonical),Re=w.layoutTextSize.evaluate(re,{},f.canonical),Le=w.layoutIconSize.evaluate(re,{},f.canonical),je={horizontal:{},vertical:void 0},He=re.text;let at,vt=[0,0];if(He){const Ke=He.toString(),nt=d.get("text-letter-spacing").evaluate(re,{},f.canonical)*Qa,It=Gl(Ke)?nt:0,un=d.get("text-anchor").evaluate(re,{},f.canonical),Fn=bl(u,re,f.canonical);if(!Fn){const Ln=d.get("text-radial-offset").evaluate(re,{},f.canonical);vt=Ln?V0(un,[Ln*Qa,Jg]):d.get("text-offset").evaluate(re,{},f.canonical).map(sr=>sr*Qa)}let mn=F?"center":d.get("text-justify").evaluate(re,{},f.canonical);const bn=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(re,{},f.canonical)*Qa:1/0,Hn=()=>{f.bucket.allowVerticalPlacement&&Ch(Ke)&&(je.vertical=qf(He,f.glyphMap,f.glyphPositions,f.imagePositions,Ae,bn,D,un,"left",It,vt,a.ai.vertical,!0,Re,_e))};if(!F&&Fn){const Ln=new Set;if(mn==="auto")for(let Bn=0;Bn<Fn.values.length;Bn+=2)Ln.add(xl(Fn.values[Bn]));else Ln.add(mn);let sr=!1;for(const Bn of Ln)if(!je.horizontal[Bn])if(sr)je.horizontal[Bn]=je.horizontal[0];else{const Gr=qf(He,f.glyphMap,f.glyphPositions,f.imagePositions,Ae,bn,D,"center",Bn,It,vt,a.ai.horizontal,!1,Re,_e);Gr&&(je.horizontal[Bn]=Gr,sr=Gr.positionedLines.length===1)}Hn()}else{mn==="auto"&&(mn=xl(un));const Ln=qf(He,f.glyphMap,f.glyphPositions,f.imagePositions,Ae,bn,D,un,mn,It,vt,a.ai.horizontal,!1,Re,_e);Ln&&(je.horizontal[mn]=Ln),Hn(),Ch(Ke)&&F&&G&&(je.vertical=qf(He,f.glyphMap,f.glyphPositions,f.imagePositions,Ae,bn,D,un,mn,It,vt,a.ai.vertical,!1,Re,_e))}}let jt=!1;if(re.icon&&re.icon.name){const Ke=f.imageMap[re.icon.name];Ke&&(at=Vg(f.imagePositions[re.icon.name],d.get("icon-offset").evaluate(re,{},f.canonical),d.get("icon-anchor").evaluate(re,{},f.canonical)),jt=!!Ke.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=jt:f.bucket.sdfIcons!==jt&&Je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ke.pixelRatio!==f.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const St=mC(je.horizontal)||je.vertical;f.bucket.iconsInText=!!St&&St.iconsInText,(St||at)&&fC(f.bucket,re,je,at,f.imageMap,w,Re,Le,vt,jt,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},a.cp=Gf,a.cq=Lr,a.cr=PA,a.cs=Kl,a.ct=e0,a.cu=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},a.cv=function(f,u,d,v,w){return s(this,void 0,void 0,function*(){if(X())try{return yield Sn(f,u,d,v,w)}catch{}return function(D,F,G,Z,re){const Ae=D.width,_e=D.height;Yn&&Qr||(Yn=new OffscreenCanvas(Ae,_e),Qr=Yn.getContext("2d",{willReadFrequently:!0})),Yn.width=Ae,Yn.height=_e,Qr.drawImage(D,0,0,Ae,_e);const Re=Qr.getImageData(F,G,Z,re);return Qr.clearRect(0,0,Ae,_e),Re.data}(f,u,d,v,w)})},a.cw=Ud,a.cx=h,a.cy=B,a.cz=Is,a.d=f=>s(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=ft,a.f=f=>new Promise((u,d)=>{const v=new Image;v.onload=()=>{u(v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame(()=>{v.src=en})},v.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(f)],{type:"image/png"});v.src=f.byteLength?URL.createObjectURL(w):en}),a.g=Mr,a.h=(f,u)=>ue(ft(f,{type:"json"}),u),a.i=gt,a.j=it,a.k=Yt,a.l=(f,u)=>ue(ft(f,{type:"arrayBuffer"}),u),a.m=ue,a.n=function(f){return new e0(f).readFields(Qy,[])},a.o=Oo,a.p=Qg,a.q=Cs,a.r=yh,a.s=me,a.t=_s,a.u=Ss,a.v=Ye,a.w=Je,a.x=function([f,u,d]){return u+=90,u*=Math.PI/180,d*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(d),y:f*Math.sin(u)*Math.sin(d),z:f*Math.cos(d)}},a.y=vi,a.z=Ho}),i("worker",["./shared"],function(a){class s{constructor(fe){this.keyCache={},fe&&this.replace(fe)}replace(fe){this._layerConfigs={},this._layers={},this.update(fe,[])}update(fe,xe){for(const Ne of fe){this._layerConfigs[Ne.id]=Ne;const dt=this._layers[Ne.id]=a.bv(Ne);dt._featureFilter=a.a4(dt.filter),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id]}for(const Ne of xe)delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne];this.familiesBySource={};const p=a.cj(Object.values(this._layerConfigs),this.keyCache);for(const Ne of p){const dt=Ne.map(Gt=>this._layers[Gt.id]),pt=dt[0];if(pt.visibility==="none")continue;const Ot=pt.source||"";let _t=this.familiesBySource[Ot];_t||(_t=this.familiesBySource[Ot]={});const rn=pt.sourceLayer||"_geojsonTileLayer";let Zt=_t[rn];Zt||(Zt=_t[rn]=[]),Zt.push(dt)}}}class h{constructor(fe){const xe={},p=[];for(const Ot in fe){const _t=fe[Ot],rn=xe[Ot]={};for(const Zt in _t){const Gt=_t[+Zt];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const bt={x:0,y:0,w:Gt.bitmap.width+2,h:Gt.bitmap.height+2};p.push(bt),rn[Zt]={rect:bt,metrics:Gt.metrics}}}const{w:Ne,h:dt}=a.p(p),pt=new a.o({width:Ne||1,height:dt||1});for(const Ot in fe){const _t=fe[Ot];for(const rn in _t){const Zt=_t[+rn];if(!Zt||Zt.bitmap.width===0||Zt.bitmap.height===0)continue;const Gt=xe[Ot][rn].rect;a.o.copy(Zt.bitmap,pt,{x:0,y:0},{x:Gt.x+1,y:Gt.y+1},Zt.bitmap)}}this.image=pt,this.positions=xe}}a.ck("GlyphAtlas",h);class g{constructor(fe){this.tileID=new a.S(fe.tileID.overscaledZ,fe.tileID.wrap,fe.tileID.canonical.z,fe.tileID.canonical.x,fe.tileID.canonical.y),this.uid=fe.uid,this.zoom=fe.zoom,this.pixelRatio=fe.pixelRatio,this.tileSize=fe.tileSize,this.source=fe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=fe.showCollisionBoxes,this.collectResourceTiming=!!fe.collectResourceTiming,this.returnDependencies=!!fe.returnDependencies,this.promoteId=fe.promoteId,this.inFlightDependencies=[]}parse(fe,xe,p,Ne,dt){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=fe,this.collisionBoxArray=new a.a2;const pt=new a.cl(Object.keys(fe.layers).sort()),Ot=new a.cm(this.tileID,this.promoteId);Ot.bucketLayerIDs=[];const _t={},rn={featureIndex:Ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:p,subdivisionGranularity:dt},Zt=xe.familiesBySource[this.source];for(const Rr in Zt){const rr=fe.layers[Rr];if(!rr)continue;rr.version===1&&a.w(`Vector tile source "${this.source}" layer "${Rr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const co=pt.encode(Rr),$a=[];for(let ji=0;ji<rr.length;ji++){const ui=rr.feature(ji),Vi=Ot.getId(ui,Rr);$a.push({feature:ui,id:Vi,index:ji,sourceLayerIndex:co})}for(const ji of Zt[Rr]){const ui=ji[0];ui.source!==this.source&&a.w(`layer.source = ${ui.source} does not equal this.source = ${this.source}`),ui.minzoom&&this.zoom<Math.floor(ui.minzoom)||ui.maxzoom&&this.zoom>=ui.maxzoom||ui.visibility!=="none"&&(b(ji,this.zoom,p),(_t[ui.id]=ui.createBucket({index:Ot.bucketLayerIDs.length,layers:ji,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:co,sourceID:this.source})).populate($a,rn,this.tileID.canonical),Ot.bucketLayerIDs.push(ji.map(Vi=>Vi.id)))}}const Gt=a.bA(rn.glyphDependencies,Rr=>Object.keys(Rr).map(Number));this.inFlightDependencies.forEach(Rr=>Rr==null?void 0:Rr.abort()),this.inFlightDependencies=[];let bt=Promise.resolve({});if(Object.keys(Gt).length){const Rr=new AbortController;this.inFlightDependencies.push(Rr),bt=Ne.sendAsync({type:"GG",data:{stacks:Gt,source:this.source,tileID:this.tileID,type:"glyphs"}},Rr)}const Pn=Object.keys(rn.iconDependencies);let En=Promise.resolve({});if(Pn.length){const Rr=new AbortController;this.inFlightDependencies.push(Rr),En=Ne.sendAsync({type:"GI",data:{icons:Pn,source:this.source,tileID:this.tileID,type:"icons"}},Rr)}const lr=Object.keys(rn.patternDependencies);let wr=Promise.resolve({});if(lr.length){const Rr=new AbortController;this.inFlightDependencies.push(Rr),wr=Ne.sendAsync({type:"GI",data:{icons:lr,source:this.source,tileID:this.tileID,type:"patterns"}},Rr)}const[on,zn,Dn]=yield Promise.all([bt,En,wr]),Br=new h(on),xr=new a.cn(zn,Dn);for(const Rr in _t){const rr=_t[Rr];rr instanceof a.a3?(b(rr.layers,this.zoom,p),a.co({bucket:rr,glyphMap:on,glyphPositions:Br.positions,imageMap:zn,imagePositions:xr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:rn.subdivisionGranularity})):rr.hasPattern&&(rr instanceof a.cp||rr instanceof a.cq||rr instanceof a.cr)&&(b(rr.layers,this.zoom,p),rr.addFeatures(rn,this.tileID.canonical,xr.patternPositions))}return this.status="done",{buckets:Object.values(_t).filter(Rr=>!Rr.isEmpty()),featureIndex:Ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Br.image,imageAtlas:xr,glyphMap:this.returnDependencies?on:null,iconMap:this.returnDependencies?zn:null,glyphPositions:this.returnDependencies?Br.positions:null}})}}function b(Ye,fe,xe){const p=new a.z(fe);for(const Ne of Ye)Ne.recalculate(p,xe)}class B{constructor(fe,xe,p){this.actor=fe,this.layerIndex=xe,this.availableImages=p,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(fe,xe){return a._(this,void 0,void 0,function*(){const p=yield a.l(fe.request,xe);try{return{vectorTile:new a.cs.VectorTile(new a.ct(p.data)),rawData:p.data,cacheControl:p.cacheControl,expires:p.expires}}catch(Ne){const dt=new Uint8Array(p.data);let pt=`Unable to parse the tile at ${fe.request.url}, `;throw pt+=dt[0]===31&&dt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ne.message}`,new Error(pt)}})}loadTile(fe){return a._(this,void 0,void 0,function*(){const xe=fe.uid,p=!!(fe&&fe.request&&fe.request.collectResourceTiming)&&new a.cu(fe.request),Ne=new g(fe);this.loading[xe]=Ne;const dt=new AbortController;Ne.abort=dt;try{const pt=yield this.loadVectorTile(fe,dt);if(delete this.loading[xe],!pt)return null;const Ot=pt.rawData,_t={};pt.expires&&(_t.expires=pt.expires),pt.cacheControl&&(_t.cacheControl=pt.cacheControl);const rn={};if(p){const Gt=p.finish();Gt&&(rn.resourceTiming=JSON.parse(JSON.stringify(Gt)))}Ne.vectorTile=pt.vectorTile;const Zt=Ne.parse(pt.vectorTile,this.layerIndex,this.availableImages,this.actor,fe.subdivisionGranularity);this.loaded[xe]=Ne,this.fetching[xe]={rawTileData:Ot,cacheControl:_t,resourceTiming:rn};try{const Gt=yield Zt;return a.e({rawTileData:Ot.slice(0)},Gt,_t,rn)}finally{delete this.fetching[xe]}}catch(pt){throw delete this.loading[xe],Ne.status="done",this.loaded[xe]=Ne,pt}})}reloadTile(fe){return a._(this,void 0,void 0,function*(){const xe=fe.uid;if(!this.loaded||!this.loaded[xe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const p=this.loaded[xe];if(p.showCollisionBoxes=fe.showCollisionBoxes,p.status==="parsing"){const Ne=yield p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,fe.subdivisionGranularity);let dt;if(this.fetching[xe]){const{rawTileData:pt,cacheControl:Ot,resourceTiming:_t}=this.fetching[xe];delete this.fetching[xe],dt=a.e({rawTileData:pt.slice(0)},Ne,Ot,_t)}else dt=Ne;return dt}if(p.status==="done"&&p.vectorTile)return p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,fe.subdivisionGranularity)})}abortTile(fe){return a._(this,void 0,void 0,function*(){const xe=this.loading,p=fe.uid;xe&&xe[p]&&xe[p].abort&&(xe[p].abort.abort(),delete xe[p])})}removeTile(fe){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[fe.uid]&&delete this.loaded[fe.uid]})}}class S{constructor(){this.loaded={}}loadTile(fe){return a._(this,void 0,void 0,function*(){const{uid:xe,encoding:p,rawImageData:Ne,redFactor:dt,greenFactor:pt,blueFactor:Ot,baseShift:_t}=fe,rn=Ne.width+2,Zt=Ne.height+2,Gt=a.b(Ne)?new a.R({width:rn,height:Zt},yield a.cv(Ne,-1,-1,rn,Zt)):Ne,bt=new a.cw(xe,Gt,p,dt,pt,Ot,_t);return this.loaded=this.loaded||{},this.loaded[xe]=bt,bt})}removeTile(fe){const xe=this.loaded,p=fe.uid;xe&&xe[p]&&delete xe[p]}}var I,k,U=function(){if(k)return I;function Ye(xe,p){if(xe.length!==0){fe(xe[0],p);for(var Ne=1;Ne<xe.length;Ne++)fe(xe[Ne],!p)}}function fe(xe,p){for(var Ne=0,dt=0,pt=0,Ot=xe.length,_t=Ot-1;pt<Ot;_t=pt++){var rn=(xe[pt][0]-xe[_t][0])*(xe[_t][1]+xe[pt][1]),Zt=Ne+rn;dt+=Math.abs(Ne)>=Math.abs(rn)?Ne-Zt+rn:rn-Zt+Ne,Ne=Zt}Ne+dt>=0!=!!p&&xe.reverse()}return k=1,I=function xe(p,Ne){var dt,pt=p&&p.type;if(pt==="FeatureCollection")for(dt=0;dt<p.features.length;dt++)xe(p.features[dt],Ne);else if(pt==="GeometryCollection")for(dt=0;dt<p.geometries.length;dt++)xe(p.geometries[dt],Ne);else if(pt==="Feature")xe(p.geometry,Ne);else if(pt==="Polygon")Ye(p.coordinates,Ne);else if(pt==="MultiPolygon")for(dt=0;dt<p.coordinates.length;dt++)Ye(p.coordinates[dt],Ne);return p}}(),z=a.cx(U);const Y=a.cs.VectorTileFeature.prototype.toGeoJSON;class Q{constructor(fe){this._feature=fe,this.extent=a.X,this.type=fe.type,this.properties=fe.tags,"id"in fe&&!isNaN(fe.id)&&(this.id=parseInt(fe.id,10))}loadGeometry(){if(this._feature.type===1){const fe=[];for(const xe of this._feature.geometry)fe.push([new a.P(xe[0],xe[1])]);return fe}{const fe=[];for(const xe of this._feature.geometry){const p=[];for(const Ne of xe)p.push(new a.P(Ne[0],Ne[1]));fe.push(p)}return fe}}toGeoJSON(fe,xe,p){return Y.call(this,fe,xe,p)}}class ne{constructor(fe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.X,this.length=fe.length,this._features=fe}feature(fe){return new Q(this._features[fe])}}var X,q,J,N={exports:{}},ie=function(){if(J)return N.exports;J=1;var Ye=a.cA(),fe=function(){if(q)return X;q=1;var Zt=a.cy(),Gt=a.cz().VectorTileFeature;function bt(En,lr){this.options=lr||{},this.features=En,this.length=En.length}function Pn(En,lr){this.id=typeof En.id=="number"?En.id:void 0,this.type=En.type,this.rawGeometry=En.type===1?[En.geometry]:En.geometry,this.properties=En.tags,this.extent=lr||4096}return X=bt,bt.prototype.feature=function(En){return new Pn(this.features[En],this.options.extent)},Pn.prototype.loadGeometry=function(){var En=this.rawGeometry;this.geometry=[];for(var lr=0;lr<En.length;lr++){for(var wr=En[lr],on=[],zn=0;zn<wr.length;zn++)on.push(new Zt(wr[zn][0],wr[zn][1]));this.geometry.push(on)}return this.geometry},Pn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var En=this.geometry,lr=1/0,wr=-1/0,on=1/0,zn=-1/0,Dn=0;Dn<En.length;Dn++)for(var Br=En[Dn],xr=0;xr<Br.length;xr++){var Rr=Br[xr];lr=Math.min(lr,Rr.x),wr=Math.max(wr,Rr.x),on=Math.min(on,Rr.y),zn=Math.max(zn,Rr.y)}return[lr,on,wr,zn]},Pn.prototype.toGeoJSON=Gt.prototype.toGeoJSON,X}();function xe(Zt){var Gt=new Ye;return function(bt,Pn){for(var En in bt.layers)Pn.writeMessage(3,p,bt.layers[En])}(Zt,Gt),Gt.finish()}function p(Zt,Gt){var bt;Gt.writeVarintField(15,Zt.version||1),Gt.writeStringField(1,Zt.name||""),Gt.writeVarintField(5,Zt.extent||4096);var Pn={keys:[],values:[],keycache:{},valuecache:{}};for(bt=0;bt<Zt.length;bt++)Pn.feature=Zt.feature(bt),Gt.writeMessage(2,Ne,Pn);var En=Pn.keys;for(bt=0;bt<En.length;bt++)Gt.writeStringField(3,En[bt]);var lr=Pn.values;for(bt=0;bt<lr.length;bt++)Gt.writeMessage(4,rn,lr[bt])}function Ne(Zt,Gt){var bt=Zt.feature;bt.id!==void 0&&Gt.writeVarintField(1,bt.id),Gt.writeMessage(2,dt,Zt),Gt.writeVarintField(3,bt.type),Gt.writeMessage(4,_t,bt)}function dt(Zt,Gt){var bt=Zt.feature,Pn=Zt.keys,En=Zt.values,lr=Zt.keycache,wr=Zt.valuecache;for(var on in bt.properties){var zn=bt.properties[on],Dn=lr[on];if(zn!==null){Dn===void 0&&(Pn.push(on),lr[on]=Dn=Pn.length-1),Gt.writeVarint(Dn);var Br=typeof zn;Br!=="string"&&Br!=="boolean"&&Br!=="number"&&(zn=JSON.stringify(zn));var xr=Br+":"+zn,Rr=wr[xr];Rr===void 0&&(En.push(zn),wr[xr]=Rr=En.length-1),Gt.writeVarint(Rr)}}}function pt(Zt,Gt){return(Gt<<3)+(7&Zt)}function Ot(Zt){return Zt<<1^Zt>>31}function _t(Zt,Gt){for(var bt=Zt.loadGeometry(),Pn=Zt.type,En=0,lr=0,wr=bt.length,on=0;on<wr;on++){var zn=bt[on],Dn=1;Pn===1&&(Dn=zn.length),Gt.writeVarint(pt(1,Dn));for(var Br=Pn===3?zn.length-1:zn.length,xr=0;xr<Br;xr++){xr===1&&Pn!==1&&Gt.writeVarint(pt(2,Br-1));var Rr=zn[xr].x-En,rr=zn[xr].y-lr;Gt.writeVarint(Ot(Rr)),Gt.writeVarint(Ot(rr)),En+=Rr,lr+=rr}Pn===3&&Gt.writeVarint(pt(7,1))}}function rn(Zt,Gt){var bt=typeof Zt;bt==="string"?Gt.writeStringField(1,Zt):bt==="boolean"?Gt.writeBooleanField(7,Zt):bt==="number"&&(Zt%1!=0?Gt.writeDoubleField(3,Zt):Zt<0?Gt.writeSVarintField(6,Zt):Gt.writeVarintField(5,Zt))}return N.exports=xe,N.exports.fromVectorTileJs=xe,N.exports.fromGeojsonVt=function(Zt,Gt){Gt=Gt||{};var bt={};for(var Pn in Zt)bt[Pn]=new fe(Zt[Pn].features,Gt),bt[Pn].name=Pn,bt[Pn].version=Gt.version,bt[Pn].extent=Gt.extent;return xe({layers:bt})},N.exports.GeoJSONWrapper=fe,N.exports}(),he=a.cx(ie);const ce={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ye=>Ye},we=Math.fround||(pe=new Float32Array(1),Ye=>(pe[0]=+Ye,pe[0]));var pe;const Ce=3,Pe=5,de=6;class rt{constructor(fe){this.options=Object.assign(Object.create(ce),fe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(fe){const{log:xe,minZoom:p,maxZoom:Ne}=this.options;xe&&console.time("total time");const dt=`prepare ${fe.length} points`;xe&&console.time(dt),this.points=fe;const pt=[];for(let _t=0;_t<fe.length;_t++){const rn=fe[_t];if(!rn.geometry)continue;const[Zt,Gt]=rn.geometry.coordinates,bt=we(ut(Zt)),Pn=we(Te(Gt));pt.push(bt,Pn,1/0,_t,-1,1),this.options.reduce&&pt.push(0)}let Ot=this.trees[Ne+1]=this._createTree(pt);xe&&console.timeEnd(dt);for(let _t=Ne;_t>=p;_t--){const rn=+Date.now();Ot=this.trees[_t]=this._createTree(this._cluster(Ot,_t)),xe&&console.log("z%d: %d clusters in %dms",_t,Ot.numItems,+Date.now()-rn)}return xe&&console.timeEnd("total time"),this}getClusters(fe,xe){let p=((fe[0]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,fe[1]));let dt=fe[2]===180?180:((fe[2]+180)%360+360)%360-180;const pt=Math.max(-90,Math.min(90,fe[3]));if(fe[2]-fe[0]>=360)p=-180,dt=180;else if(p>dt){const Gt=this.getClusters([p,Ne,180,pt],xe),bt=this.getClusters([-180,Ne,dt,pt],xe);return Gt.concat(bt)}const Ot=this.trees[this._limitZoom(xe)],_t=Ot.range(ut(p),Te(pt),ut(dt),Te(Ne)),rn=Ot.data,Zt=[];for(const Gt of _t){const bt=this.stride*Gt;Zt.push(rn[bt+Pe]>1?ze(rn,bt,this.clusterProps):this.points[rn[bt+Ce]])}return Zt}getChildren(fe){const xe=this._getOriginId(fe),p=this._getOriginZoom(fe),Ne="No cluster with the specified id.",dt=this.trees[p];if(!dt)throw new Error(Ne);const pt=dt.data;if(xe*this.stride>=pt.length)throw new Error(Ne);const Ot=this.options.radius/(this.options.extent*Math.pow(2,p-1)),_t=dt.within(pt[xe*this.stride],pt[xe*this.stride+1],Ot),rn=[];for(const Zt of _t){const Gt=Zt*this.stride;pt[Gt+4]===fe&&rn.push(pt[Gt+Pe]>1?ze(pt,Gt,this.clusterProps):this.points[pt[Gt+Ce]])}if(rn.length===0)throw new Error(Ne);return rn}getLeaves(fe,xe,p){const Ne=[];return this._appendLeaves(Ne,fe,xe=xe||10,p=p||0,0),Ne}getTile(fe,xe,p){const Ne=this.trees[this._limitZoom(fe)],dt=Math.pow(2,fe),{extent:pt,radius:Ot}=this.options,_t=Ot/pt,rn=(p-_t)/dt,Zt=(p+1+_t)/dt,Gt={features:[]};return this._addTileFeatures(Ne.range((xe-_t)/dt,rn,(xe+1+_t)/dt,Zt),Ne.data,xe,p,dt,Gt),xe===0&&this._addTileFeatures(Ne.range(1-_t/dt,rn,1,Zt),Ne.data,dt,p,dt,Gt),xe===dt-1&&this._addTileFeatures(Ne.range(0,rn,_t/dt,Zt),Ne.data,-1,p,dt,Gt),Gt.features.length?Gt:null}getClusterExpansionZoom(fe){let xe=this._getOriginZoom(fe)-1;for(;xe<=this.options.maxZoom;){const p=this.getChildren(fe);if(xe++,p.length!==1)break;fe=p[0].properties.cluster_id}return xe}_appendLeaves(fe,xe,p,Ne,dt){const pt=this.getChildren(xe);for(const Ot of pt){const _t=Ot.properties;if(_t&&_t.cluster?dt+_t.point_count<=Ne?dt+=_t.point_count:dt=this._appendLeaves(fe,_t.cluster_id,p,Ne,dt):dt<Ne?dt++:fe.push(Ot),fe.length===p)break}return dt}_createTree(fe){const xe=new a.az(fe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let p=0;p<fe.length;p+=this.stride)xe.add(fe[p],fe[p+1]);return xe.finish(),xe.data=fe,xe}_addTileFeatures(fe,xe,p,Ne,dt,pt){for(const Ot of fe){const _t=Ot*this.stride,rn=xe[_t+Pe]>1;let Zt,Gt,bt;if(rn)Zt=Qe(xe,_t,this.clusterProps),Gt=xe[_t],bt=xe[_t+1];else{const lr=this.points[xe[_t+Ce]];Zt=lr.properties;const[wr,on]=lr.geometry.coordinates;Gt=ut(wr),bt=Te(on)}const Pn={type:1,geometry:[[Math.round(this.options.extent*(Gt*dt-p)),Math.round(this.options.extent*(bt*dt-Ne))]],tags:Zt};let En;En=rn||this.options.generateId?xe[_t+Ce]:this.points[xe[_t+Ce]].id,En!==void 0&&(Pn.id=En),pt.features.push(Pn)}}_limitZoom(fe){return Math.max(this.options.minZoom,Math.min(Math.floor(+fe),this.options.maxZoom+1))}_cluster(fe,xe){const{radius:p,extent:Ne,reduce:dt,minPoints:pt}=this.options,Ot=p/(Ne*Math.pow(2,xe)),_t=fe.data,rn=[],Zt=this.stride;for(let Gt=0;Gt<_t.length;Gt+=Zt){if(_t[Gt+2]<=xe)continue;_t[Gt+2]=xe;const bt=_t[Gt],Pn=_t[Gt+1],En=fe.within(_t[Gt],_t[Gt+1],Ot),lr=_t[Gt+Pe];let wr=lr;for(const on of En){const zn=on*Zt;_t[zn+2]>xe&&(wr+=_t[zn+Pe])}if(wr>lr&&wr>=pt){let on,zn=bt*lr,Dn=Pn*lr,Br=-1;const xr=((Gt/Zt|0)<<5)+(xe+1)+this.points.length;for(const Rr of En){const rr=Rr*Zt;if(_t[rr+2]<=xe)continue;_t[rr+2]=xe;const co=_t[rr+Pe];zn+=_t[rr]*co,Dn+=_t[rr+1]*co,_t[rr+4]=xr,dt&&(on||(on=this._map(_t,Gt,!0),Br=this.clusterProps.length,this.clusterProps.push(on)),dt(on,this._map(_t,rr)))}_t[Gt+4]=xr,rn.push(zn/wr,Dn/wr,1/0,xr,-1,wr),dt&&rn.push(Br)}else{for(let on=0;on<Zt;on++)rn.push(_t[Gt+on]);if(wr>1)for(const on of En){const zn=on*Zt;if(!(_t[zn+2]<=xe)){_t[zn+2]=xe;for(let Dn=0;Dn<Zt;Dn++)rn.push(_t[zn+Dn])}}}}return rn}_getOriginId(fe){return fe-this.points.length>>5}_getOriginZoom(fe){return(fe-this.points.length)%32}_map(fe,xe,p){if(fe[xe+Pe]>1){const pt=this.clusterProps[fe[xe+de]];return p?Object.assign({},pt):pt}const Ne=this.points[fe[xe+Ce]].properties,dt=this.options.map(Ne);return p&&dt===Ne?Object.assign({},dt):dt}}function ze(Ye,fe,xe){return{type:"Feature",id:Ye[fe+Ce],properties:Qe(Ye,fe,xe),geometry:{type:"Point",coordinates:[(p=Ye[fe],360*(p-.5)),Ue(Ye[fe+1])]}};var p}function Qe(Ye,fe,xe){const p=Ye[fe+Pe],Ne=p>=1e4?`${Math.round(p/1e3)}k`:p>=1e3?Math.round(p/100)/10+"k":p,dt=Ye[fe+de],pt=dt===-1?{}:Object.assign({},xe[dt]);return Object.assign(pt,{cluster:!0,cluster_id:Ye[fe+Ce],point_count:p,point_count_abbreviated:Ne})}function ut(Ye){return Ye/360+.5}function Te(Ye){const fe=Math.sin(Ye*Math.PI/180),xe=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return xe<0?0:xe>1?1:xe}function Ue(Ye){const fe=(180-360*Ye)*Math.PI/180;return 360*Math.atan(Math.exp(fe))/Math.PI-90}function st(Ye,fe,xe,p){let Ne=p;const dt=fe+(xe-fe>>1);let pt,Ot=xe-fe;const _t=Ye[fe],rn=Ye[fe+1],Zt=Ye[xe],Gt=Ye[xe+1];for(let bt=fe+3;bt<xe;bt+=3){const Pn=wt(Ye[bt],Ye[bt+1],_t,rn,Zt,Gt);if(Pn>Ne)pt=bt,Ne=Pn;else if(Pn===Ne){const En=Math.abs(bt-dt);En<Ot&&(pt=bt,Ot=En)}}Ne>p&&(pt-fe>3&&st(Ye,fe,pt,p),Ye[pt+2]=Ne,xe-pt>3&&st(Ye,pt,xe,p))}function wt(Ye,fe,xe,p,Ne,dt){let pt=Ne-xe,Ot=dt-p;if(pt!==0||Ot!==0){const _t=((Ye-xe)*pt+(fe-p)*Ot)/(pt*pt+Ot*Ot);_t>1?(xe=Ne,p=dt):_t>0&&(xe+=pt*_t,p+=Ot*_t)}return pt=Ye-xe,Ot=fe-p,pt*pt+Ot*Ot}function mt(Ye,fe,xe,p){const Ne={id:Ye??null,type:fe,geometry:xe,tags:p,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")ft(Ne,xe);else if(fe==="Polygon")ft(Ne,xe[0]);else if(fe==="MultiLineString")for(const dt of xe)ft(Ne,dt);else if(fe==="MultiPolygon")for(const dt of xe)ft(Ne,dt[0]);return Ne}function ft(Ye,fe){for(let xe=0;xe<fe.length;xe+=3)Ye.minX=Math.min(Ye.minX,fe[xe]),Ye.minY=Math.min(Ye.minY,fe[xe+1]),Ye.maxX=Math.max(Ye.maxX,fe[xe]),Ye.maxY=Math.max(Ye.maxY,fe[xe+1])}function Ut(Ye,fe,xe,p){if(!fe.geometry)return;const Ne=fe.geometry.coordinates;if(Ne&&Ne.length===0)return;const dt=fe.geometry.type,pt=Math.pow(xe.tolerance/((1<<xe.maxZoom)*xe.extent),2);let Ot=[],_t=fe.id;if(xe.promoteId?_t=fe.properties[xe.promoteId]:xe.generateId&&(_t=p||0),dt==="Point")Lt(Ne,Ot);else if(dt==="MultiPoint")for(const rn of Ne)Lt(rn,Ot);else if(dt==="LineString")De(Ne,Ot,pt,!1);else if(dt==="MultiLineString"){if(xe.lineMetrics){for(const rn of Ne)Ot=[],De(rn,Ot,pt,!1),Ye.push(mt(_t,"LineString",Ot,fe.properties));return}ke(Ne,Ot,pt,!1)}else if(dt==="Polygon")ke(Ne,Ot,pt,!0);else{if(dt!=="MultiPolygon"){if(dt==="GeometryCollection"){for(const rn of fe.geometry.geometries)Ut(Ye,{id:_t,geometry:rn,properties:fe.properties},xe,p);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const rn of Ne){const Zt=[];ke(rn,Zt,pt,!0),Ot.push(Zt)}}Ye.push(mt(_t,dt,Ot,fe.properties))}function Lt(Ye,fe){fe.push(Oe(Ye[0]),Je(Ye[1]),0)}function De(Ye,fe,xe,p){let Ne,dt,pt=0;for(let _t=0;_t<Ye.length;_t++){const rn=Oe(Ye[_t][0]),Zt=Je(Ye[_t][1]);fe.push(rn,Zt,0),_t>0&&(pt+=p?(Ne*Zt-rn*dt)/2:Math.sqrt(Math.pow(rn-Ne,2)+Math.pow(Zt-dt,2))),Ne=rn,dt=Zt}const Ot=fe.length-3;fe[2]=1,st(fe,0,Ot,xe),fe[Ot+2]=1,fe.size=Math.abs(pt),fe.start=0,fe.end=fe.size}function ke(Ye,fe,xe,p){for(let Ne=0;Ne<Ye.length;Ne++){const dt=[];De(Ye[Ne],dt,xe,p),fe.push(dt)}}function Oe(Ye){return Ye/360+.5}function Je(Ye){const fe=Math.sin(Ye*Math.PI/180),xe=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return xe<0?0:xe>1?1:xe}function Mt(Ye,fe,xe,p,Ne,dt,pt,Ot){if(p/=fe,dt>=(xe/=fe)&&pt<p)return Ye;if(pt<xe||dt>=p)return null;const _t=[];for(const rn of Ye){const Zt=rn.geometry;let Gt=rn.type;const bt=Ne===0?rn.minX:rn.minY,Pn=Ne===0?rn.maxX:rn.maxY;if(bt>=xe&&Pn<p){_t.push(rn);continue}if(Pn<xe||bt>=p)continue;let En=[];if(Gt==="Point"||Gt==="MultiPoint")gt(Zt,En,xe,p,Ne);else if(Gt==="LineString")Nt(Zt,En,xe,p,Ne,!1,Ot.lineMetrics);else if(Gt==="MultiLineString")en(Zt,En,xe,p,Ne,!1);else if(Gt==="Polygon")en(Zt,En,xe,p,Ne,!0);else if(Gt==="MultiPolygon")for(const lr of Zt){const wr=[];en(lr,wr,xe,p,Ne,!0),wr.length&&En.push(wr)}if(En.length){if(Ot.lineMetrics&&Gt==="LineString"){for(const lr of En)_t.push(mt(rn.id,Gt,lr,rn.tags));continue}Gt!=="LineString"&&Gt!=="MultiLineString"||(En.length===1?(Gt="LineString",En=En[0]):Gt="MultiLineString"),Gt!=="Point"&&Gt!=="MultiPoint"||(Gt=En.length===3?"Point":"MultiPoint"),_t.push(mt(rn.id,Gt,En,rn.tags))}}return _t.length?_t:null}function gt(Ye,fe,xe,p,Ne){for(let dt=0;dt<Ye.length;dt+=3){const pt=Ye[dt+Ne];pt>=xe&&pt<=p&&Sn(fe,Ye[dt],Ye[dt+1],Ye[dt+2])}}function Nt(Ye,fe,xe,p,Ne,dt,pt){let Ot=nn(Ye);const _t=Ne===0?Yn:Qr;let rn,Zt,Gt=Ye.start;for(let wr=0;wr<Ye.length-3;wr+=3){const on=Ye[wr],zn=Ye[wr+1],Dn=Ye[wr+2],Br=Ye[wr+3],xr=Ye[wr+4],Rr=Ne===0?on:zn,rr=Ne===0?Br:xr;let co=!1;pt&&(rn=Math.sqrt(Math.pow(on-Br,2)+Math.pow(zn-xr,2))),Rr<xe?rr>xe&&(Zt=_t(Ot,on,zn,Br,xr,xe),pt&&(Ot.start=Gt+rn*Zt)):Rr>p?rr<p&&(Zt=_t(Ot,on,zn,Br,xr,p),pt&&(Ot.start=Gt+rn*Zt)):Sn(Ot,on,zn,Dn),rr<xe&&Rr>=xe&&(Zt=_t(Ot,on,zn,Br,xr,xe),co=!0),rr>p&&Rr<=p&&(Zt=_t(Ot,on,zn,Br,xr,p),co=!0),!dt&&co&&(pt&&(Ot.end=Gt+rn*Zt),fe.push(Ot),Ot=nn(Ye)),pt&&(Gt+=rn)}let bt=Ye.length-3;const Pn=Ye[bt],En=Ye[bt+1],lr=Ne===0?Pn:En;lr>=xe&&lr<=p&&Sn(Ot,Pn,En,Ye[bt+2]),bt=Ot.length-3,dt&&bt>=3&&(Ot[bt]!==Ot[0]||Ot[bt+1]!==Ot[1])&&Sn(Ot,Ot[0],Ot[1],Ot[2]),Ot.length&&fe.push(Ot)}function nn(Ye){const fe=[];return fe.size=Ye.size,fe.start=Ye.start,fe.end=Ye.end,fe}function en(Ye,fe,xe,p,Ne,dt){for(const pt of Ye)Nt(pt,fe,xe,p,Ne,dt,!1)}function Sn(Ye,fe,xe,p){Ye.push(fe,xe,p)}function Yn(Ye,fe,xe,p,Ne,dt){const pt=(dt-fe)/(p-fe);return Sn(Ye,dt,xe+(Ne-xe)*pt,1),pt}function Qr(Ye,fe,xe,p,Ne,dt){const pt=(dt-xe)/(Ne-xe);return Sn(Ye,fe+(p-fe)*pt,dt,1),pt}function cr(Ye,fe){const xe=[];for(let p=0;p<Ye.length;p++){const Ne=Ye[p],dt=Ne.type;let pt;if(dt==="Point"||dt==="MultiPoint"||dt==="LineString")pt=fr(Ne.geometry,fe);else if(dt==="MultiLineString"||dt==="Polygon"){pt=[];for(const Ot of Ne.geometry)pt.push(fr(Ot,fe))}else if(dt==="MultiPolygon"){pt=[];for(const Ot of Ne.geometry){const _t=[];for(const rn of Ot)_t.push(fr(rn,fe));pt.push(_t)}}xe.push(mt(Ne.id,dt,pt,Ne.tags))}return xe}function fr(Ye,fe){const xe=[];xe.size=Ye.size,Ye.start!==void 0&&(xe.start=Ye.start,xe.end=Ye.end);for(let p=0;p<Ye.length;p+=3)xe.push(Ye[p]+fe,Ye[p+1],Ye[p+2]);return xe}function br(Ye,fe){if(Ye.transformed)return Ye;const xe=1<<Ye.z,p=Ye.x,Ne=Ye.y;for(const dt of Ye.features){const pt=dt.geometry,Ot=dt.type;if(dt.geometry=[],Ot===1)for(let _t=0;_t<pt.length;_t+=2)dt.geometry.push(Cr(pt[_t],pt[_t+1],fe,xe,p,Ne));else for(let _t=0;_t<pt.length;_t++){const rn=[];for(let Zt=0;Zt<pt[_t].length;Zt+=2)rn.push(Cr(pt[_t][Zt],pt[_t][Zt+1],fe,xe,p,Ne));dt.geometry.push(rn)}}return Ye.transformed=!0,Ye}function Cr(Ye,fe,xe,p,Ne,dt){return[Math.round(xe*(Ye*p-Ne)),Math.round(xe*(fe*p-dt))]}function Mr(Ye,fe,xe,p,Ne){const dt=fe===Ne.maxZoom?0:Ne.tolerance/((1<<fe)*Ne.extent),pt={features:[],numPoints:0,numSimplified:0,numFeatures:Ye.length,source:null,x:xe,y:p,z:fe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ot of Ye)Qn(pt,Ot,dt,Ne);return pt}function Qn(Ye,fe,xe,p){const Ne=fe.geometry,dt=fe.type,pt=[];if(Ye.minX=Math.min(Ye.minX,fe.minX),Ye.minY=Math.min(Ye.minY,fe.minY),Ye.maxX=Math.max(Ye.maxX,fe.maxX),Ye.maxY=Math.max(Ye.maxY,fe.maxY),dt==="Point"||dt==="MultiPoint")for(let Ot=0;Ot<Ne.length;Ot+=3)pt.push(Ne[Ot],Ne[Ot+1]),Ye.numPoints++,Ye.numSimplified++;else if(dt==="LineString")Sr(pt,Ne,Ye,xe,!1,!1);else if(dt==="MultiLineString"||dt==="Polygon")for(let Ot=0;Ot<Ne.length;Ot++)Sr(pt,Ne[Ot],Ye,xe,dt==="Polygon",Ot===0);else if(dt==="MultiPolygon")for(let Ot=0;Ot<Ne.length;Ot++){const _t=Ne[Ot];for(let rn=0;rn<_t.length;rn++)Sr(pt,_t[rn],Ye,xe,!0,rn===0)}if(pt.length){let Ot=fe.tags||null;if(dt==="LineString"&&p.lineMetrics){Ot={};for(const rn in fe.tags)Ot[rn]=fe.tags[rn];Ot.mapbox_clip_start=Ne.start/Ne.size,Ot.mapbox_clip_end=Ne.end/Ne.size}const _t={geometry:pt,type:dt==="Polygon"||dt==="MultiPolygon"?3:dt==="LineString"||dt==="MultiLineString"?2:1,tags:Ot};fe.id!==null&&(_t.id=fe.id),Ye.features.push(_t)}}function Sr(Ye,fe,xe,p,Ne,dt){const pt=p*p;if(p>0&&fe.size<(Ne?pt:p))return void(xe.numPoints+=fe.length/3);const Ot=[];for(let _t=0;_t<fe.length;_t+=3)(p===0||fe[_t+2]>pt)&&(xe.numSimplified++,Ot.push(fe[_t],fe[_t+1])),xe.numPoints++;Ne&&function(_t,rn){let Zt=0;for(let Gt=0,bt=_t.length,Pn=bt-2;Gt<bt;Pn=Gt,Gt+=2)Zt+=(_t[Gt]-_t[Pn])*(_t[Gt+1]+_t[Pn+1]);if(Zt>0===rn)for(let Gt=0,bt=_t.length;Gt<bt/2;Gt+=2){const Pn=_t[Gt],En=_t[Gt+1];_t[Gt]=_t[bt-2-Gt],_t[Gt+1]=_t[bt-1-Gt],_t[bt-2-Gt]=Pn,_t[bt-1-Gt]=En}}(Ot,dt),Ye.push(Ot)}const Ge={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ue{constructor(fe,xe){const p=(xe=this.options=function(dt,pt){for(const Ot in pt)dt[Ot]=pt[Ot];return dt}(Object.create(Ge),xe)).debug;if(p&&console.time("preprocess data"),xe.maxZoom<0||xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(xe.promoteId&&xe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ne=function(dt,pt){const Ot=[];if(dt.type==="FeatureCollection")for(let _t=0;_t<dt.features.length;_t++)Ut(Ot,dt.features[_t],pt,_t);else Ut(Ot,dt.type==="Feature"?dt:{geometry:dt},pt);return Ot}(fe,xe);this.tiles={},this.tileCoords=[],p&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",xe.indexMaxZoom,xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ne=function(dt,pt){const Ot=pt.buffer/pt.extent;let _t=dt;const rn=Mt(dt,1,-1-Ot,Ot,0,-1,2,pt),Zt=Mt(dt,1,1-Ot,2+Ot,0,-1,2,pt);return(rn||Zt)&&(_t=Mt(dt,1,-Ot,1+Ot,0,-1,2,pt)||[],rn&&(_t=cr(rn,1).concat(_t)),Zt&&(_t=_t.concat(cr(Zt,-1)))),_t}(Ne,xe),Ne.length&&this.splitTile(Ne,0,0,0),p&&(Ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(fe,xe,p,Ne,dt,pt,Ot){const _t=[fe,xe,p,Ne],rn=this.options,Zt=rn.debug;for(;_t.length;){Ne=_t.pop(),p=_t.pop(),xe=_t.pop(),fe=_t.pop();const Gt=1<<xe,bt=me(xe,p,Ne);let Pn=this.tiles[bt];if(!Pn&&(Zt>1&&console.time("creation"),Pn=this.tiles[bt]=Mr(fe,xe,p,Ne,rn),this.tileCoords.push({z:xe,x:p,y:Ne}),Zt)){Zt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",xe,p,Ne,Pn.numFeatures,Pn.numPoints,Pn.numSimplified),console.timeEnd("creation"));const co=`z${xe}`;this.stats[co]=(this.stats[co]||0)+1,this.total++}if(Pn.source=fe,dt==null){if(xe===rn.indexMaxZoom||Pn.numPoints<=rn.indexMaxPoints)continue}else{if(xe===rn.maxZoom||xe===dt)continue;if(dt!=null){const co=dt-xe;if(p!==pt>>co||Ne!==Ot>>co)continue}}if(Pn.source=null,fe.length===0)continue;Zt>1&&console.time("clipping");const En=.5*rn.buffer/rn.extent,lr=.5-En,wr=.5+En,on=1+En;let zn=null,Dn=null,Br=null,xr=null,Rr=Mt(fe,Gt,p-En,p+wr,0,Pn.minX,Pn.maxX,rn),rr=Mt(fe,Gt,p+lr,p+on,0,Pn.minX,Pn.maxX,rn);fe=null,Rr&&(zn=Mt(Rr,Gt,Ne-En,Ne+wr,1,Pn.minY,Pn.maxY,rn),Dn=Mt(Rr,Gt,Ne+lr,Ne+on,1,Pn.minY,Pn.maxY,rn),Rr=null),rr&&(Br=Mt(rr,Gt,Ne-En,Ne+wr,1,Pn.minY,Pn.maxY,rn),xr=Mt(rr,Gt,Ne+lr,Ne+on,1,Pn.minY,Pn.maxY,rn),rr=null),Zt>1&&console.timeEnd("clipping"),_t.push(zn||[],xe+1,2*p,2*Ne),_t.push(Dn||[],xe+1,2*p,2*Ne+1),_t.push(Br||[],xe+1,2*p+1,2*Ne),_t.push(xr||[],xe+1,2*p+1,2*Ne+1)}}getTile(fe,xe,p){fe=+fe,xe=+xe,p=+p;const Ne=this.options,{extent:dt,debug:pt}=Ne;if(fe<0||fe>24)return null;const Ot=1<<fe,_t=me(fe,xe=xe+Ot&Ot-1,p);if(this.tiles[_t])return br(this.tiles[_t],dt);pt>1&&console.log("drilling down to z%d-%d-%d",fe,xe,p);let rn,Zt=fe,Gt=xe,bt=p;for(;!rn&&Zt>0;)Zt--,Gt>>=1,bt>>=1,rn=this.tiles[me(Zt,Gt,bt)];return rn&&rn.source?(pt>1&&(console.log("found parent tile z%d-%d-%d",Zt,Gt,bt),console.time("drilling down")),this.splitTile(rn.source,Zt,Gt,bt,fe,xe,p),pt>1&&console.timeEnd("drilling down"),this.tiles[_t]?br(this.tiles[_t],dt):null):null}}function me(Ye,fe,xe){return 32*((1<<Ye)*xe+fe)+Ye}function Xe(Ye,fe){return fe?Ye.properties[fe]:Ye.id}function Bt(Ye,fe){if(Ye==null)return!0;if(Ye.type==="Feature")return Xe(Ye,fe)!=null;if(Ye.type==="FeatureCollection"){const xe=new Set;for(const p of Ye.features){const Ne=Xe(p,fe);if(Ne==null||xe.has(Ne))return!1;xe.add(Ne)}return!0}return!1}function Yt(Ye,fe){const xe=new Map;if(Ye!=null)if(Ye.type==="Feature")xe.set(Xe(Ye,fe),Ye);else for(const p of Ye.features)xe.set(Xe(p,fe),p);return xe}class it extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(fe,xe){return a._(this,void 0,void 0,function*(){const p=fe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ne=this._geoJSONIndex.getTile(p.z,p.x,p.y);if(!Ne)return null;const dt=new ne(Ne.features);let pt=he(dt);return pt.byteOffset===0&&pt.byteLength===pt.buffer.byteLength||(pt=new Uint8Array(pt)),{vectorTile:dt,rawData:pt.buffer}})}loadData(fe){return a._(this,void 0,void 0,function*(){var xe;(xe=this._pendingRequest)===null||xe===void 0||xe.abort();const p=!!(fe&&fe.request&&fe.request.collectResourceTiming)&&new a.cu(fe.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(fe,this._pendingRequest),this._geoJSONIndex=fe.cluster?new rt(function({superclusterOptions:pt,clusterProperties:Ot}){if(!Ot||!pt)return pt;const _t={},rn={},Zt={accumulated:null,zoom:0},Gt={properties:null},bt=Object.keys(Ot);for(const Pn of bt){const[En,lr]=Ot[Pn],wr=a.cB(lr),on=a.cB(typeof En=="string"?[En,["accumulated"],["get",Pn]]:En);_t[Pn]=wr.value,rn[Pn]=on.value}return pt.map=Pn=>{Gt.properties=Pn;const En={};for(const lr of bt)En[lr]=_t[lr].evaluate(Zt,Gt);return En},pt.reduce=(Pn,En)=>{Gt.properties=En;for(const lr of bt)Zt.accumulated=Pn[lr],Pn[lr]=rn[lr].evaluate(Zt,Gt)},pt}(fe)).load((yield this._pendingData).features):(Ne=yield this._pendingData,new ue(Ne,fe.geojsonVtOptions)),this.loaded={};const dt={};if(p){const pt=p.finish();pt&&(dt.resourceTiming={},dt.resourceTiming[fe.source]=JSON.parse(JSON.stringify(pt)))}return dt}catch(dt){if(delete this._pendingRequest,a.cf(dt))return{abandoned:!0};throw dt}var Ne})}getData(){return a._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(fe){const xe=this.loaded;return xe&&xe[fe.uid]?super.reloadTile(fe):this.loadTile(fe)}loadAndProcessGeoJSON(fe,xe){return a._(this,void 0,void 0,function*(){let p=yield this.loadGeoJSON(fe,xe);if(delete this._pendingRequest,typeof p!="object")throw new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`);if(z(p,!0),fe.filter){const Ne=a.cB(fe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(pt=>`${pt.key}: ${pt.message}`).join(", "));p={type:"FeatureCollection",features:p.features.filter(pt=>Ne.value.evaluate({zoom:0},pt))}}return p})}loadGeoJSON(fe,xe){return a._(this,void 0,void 0,function*(){const{promoteId:p}=fe;if(fe.request){const Ne=yield a.h(fe.request,xe);return this._dataUpdateable=Bt(Ne.data,p)?Yt(Ne.data,p):void 0,Ne.data}if(typeof fe.data=="string")try{const Ne=JSON.parse(fe.data);return this._dataUpdateable=Bt(Ne,p)?Yt(Ne,p):void 0,Ne}catch{throw new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`)}if(!fe.dataDiff)throw new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${fe.source}`);return function(Ne,dt,pt){var Ot,_t,rn,Zt;if(dt.removeAll&&Ne.clear(),dt.remove)for(const Gt of dt.remove)Ne.delete(Gt);if(dt.add)for(const Gt of dt.add){const bt=Xe(Gt,pt);bt!=null&&Ne.set(bt,Gt)}if(dt.update)for(const Gt of dt.update){let bt=Ne.get(Gt.id);if(bt==null)continue;const Pn=!Gt.removeAllProperties&&(((Ot=Gt.removeProperties)===null||Ot===void 0?void 0:Ot.length)>0||((_t=Gt.addOrUpdateProperties)===null||_t===void 0?void 0:_t.length)>0);if((Gt.newGeometry||Gt.removeAllProperties||Pn)&&(bt=Object.assign({},bt),Ne.set(Gt.id,bt),Pn&&(bt.properties=Object.assign({},bt.properties))),Gt.newGeometry&&(bt.geometry=Gt.newGeometry),Gt.removeAllProperties)bt.properties={};else if(((rn=Gt.removeProperties)===null||rn===void 0?void 0:rn.length)>0)for(const En of Gt.removeProperties)Object.prototype.hasOwnProperty.call(bt.properties,En)&&delete bt.properties[En];if(((Zt=Gt.addOrUpdateProperties)===null||Zt===void 0?void 0:Zt.length)>0)for(const{key:En,value:lr}of Gt.addOrUpdateProperties)bt.properties[En]=lr}}(this._dataUpdateable,fe.dataDiff,p),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(fe){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(fe){return this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId)}getClusterChildren(fe){return this._geoJSONIndex.getChildren(fe.clusterId)}getClusterLeaves(fe){return this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset)}}class Kt{constructor(fe){this.self=fe,this.actor=new a.F(fe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(xe,p)=>{if(this.externalWorkerSourceTypes[xe])throw new Error(`Worker source with name "${xe}" already registered.`);this.externalWorkerSourceTypes[xe]=p},this.self.addProtocol=a.ch,this.self.removeProtocol=a.ci,this.self.registerRTLTextPlugin=xe=>{a.cC.setMethods(xe)},this.actor.registerMessageHandler("LDT",(xe,p)=>this._getDEMWorkerSource(xe,p.source).loadTile(p)),this.actor.registerMessageHandler("RDT",(xe,p)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(xe,p.source).removeTile(p)})),this.actor.registerMessageHandler("GCEZ",(xe,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(xe,p.type,p.source).getClusterExpansionZoom(p)})),this.actor.registerMessageHandler("GCC",(xe,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(xe,p.type,p.source).getClusterChildren(p)})),this.actor.registerMessageHandler("GCL",(xe,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(xe,p.type,p.source).getClusterLeaves(p)})),this.actor.registerMessageHandler("LD",(xe,p)=>this._getWorkerSource(xe,p.type,p.source).loadData(p)),this.actor.registerMessageHandler("GD",(xe,p)=>this._getWorkerSource(xe,p.type,p.source).getData()),this.actor.registerMessageHandler("LT",(xe,p)=>this._getWorkerSource(xe,p.type,p.source).loadTile(p)),this.actor.registerMessageHandler("RT",(xe,p)=>this._getWorkerSource(xe,p.type,p.source).reloadTile(p)),this.actor.registerMessageHandler("AT",(xe,p)=>this._getWorkerSource(xe,p.type,p.source).abortTile(p)),this.actor.registerMessageHandler("RMT",(xe,p)=>this._getWorkerSource(xe,p.type,p.source).removeTile(p)),this.actor.registerMessageHandler("RS",(xe,p)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[xe]||!this.workerSources[xe][p.type]||!this.workerSources[xe][p.type][p.source])return;const Ne=this.workerSources[xe][p.type][p.source];delete this.workerSources[xe][p.type][p.source],Ne.removeSource!==void 0&&Ne.removeSource(p)})),this.actor.registerMessageHandler("RM",xe=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[xe],delete this.availableImages[xe],delete this.workerSources[xe],delete this.demWorkerSources[xe]})),this.actor.registerMessageHandler("SR",(xe,p)=>a._(this,void 0,void 0,function*(){this.referrer=p})),this.actor.registerMessageHandler("SRPS",(xe,p)=>this._syncRTLPluginState(xe,p)),this.actor.registerMessageHandler("IS",(xe,p)=>a._(this,void 0,void 0,function*(){this.self.importScripts(p)})),this.actor.registerMessageHandler("SI",(xe,p)=>this._setImages(xe,p)),this.actor.registerMessageHandler("UL",(xe,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(xe).update(p.layers,p.removedIds)})),this.actor.registerMessageHandler("SL",(xe,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(xe).replace(p)}))}_setImages(fe,xe){return a._(this,void 0,void 0,function*(){this.availableImages[fe]=xe;for(const p in this.workerSources[fe]){const Ne=this.workerSources[fe][p];for(const dt in Ne)Ne[dt].availableImages=xe}})}_syncRTLPluginState(fe,xe){return a._(this,void 0,void 0,function*(){return yield a.cC.syncState(xe,this.self.importScripts)})}_getAvailableImages(fe){let xe=this.availableImages[fe];return xe||(xe=[]),xe}_getLayerIndex(fe){let xe=this.layerIndexes[fe];return xe||(xe=this.layerIndexes[fe]=new s),xe}_getWorkerSource(fe,xe,p){if(this.workerSources[fe]||(this.workerSources[fe]={}),this.workerSources[fe][xe]||(this.workerSources[fe][xe]={}),!this.workerSources[fe][xe][p]){const Ne={sendAsync:(dt,pt)=>(dt.targetMapId=fe,this.actor.sendAsync(dt,pt))};switch(xe){case"vector":this.workerSources[fe][xe][p]=new B(Ne,this._getLayerIndex(fe),this._getAvailableImages(fe));break;case"geojson":this.workerSources[fe][xe][p]=new it(Ne,this._getLayerIndex(fe),this._getAvailableImages(fe));break;default:this.workerSources[fe][xe][p]=new this.externalWorkerSourceTypes[xe](Ne,this._getLayerIndex(fe),this._getAvailableImages(fe))}}return this.workerSources[fe][xe][p]}_getDEMWorkerSource(fe,xe){return this.demWorkerSources[fe]||(this.demWorkerSources[fe]={}),this.demWorkerSources[fe][xe]||(this.demWorkerSources[fe][xe]=new S),this.demWorkerSources[fe][xe]}}return a.i(self)&&(self.worker=new Kt(self)),Kt}),i("index",["exports","./shared"],function(a,s){var h="5.0.1";function g(){var T=new s.A(4);return s.A!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T}let b,B;const S={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:T=>new Promise((l,c)=>{const C=requestAnimationFrame(l);T.signal.addEventListener("abort",()=>{cancelAnimationFrame(C),c(s.c())})}),getImageData(T,l=0){return this.getImageCanvasContext(T).getImageData(-l,-l,T.width+2*l,T.height+2*l)},getImageCanvasContext(T){const l=window.document.createElement("canvas"),c=l.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return l.width=T.width,l.height=T.height,c.drawImage(T,0,0,T.width,T.height),c},resolveURL:T=>(b||(b=document.createElement("a")),b.href=T,b.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class I{static testProp(l){if(!I.docStyle)return l[0];for(let c=0;c<l.length;c++)if(l[c]in I.docStyle)return l[c];return l[0]}static create(l,c,C){const M=window.document.createElement(l);return c!==void 0&&(M.className=c),C&&C.appendChild(M),M}static createNS(l,c){return window.document.createElementNS(l,c)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(l,c){l.style[I.transformProp]=c}static addEventListener(l,c,C,M={}){l.addEventListener(c,C,"passive"in M?M:M.capture)}static removeEventListener(l,c,C,M={}){l.removeEventListener(c,C,"passive"in M?M:M.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static getScale(l){const c=l.getBoundingClientRect();return{x:c.width/l.offsetWidth||1,y:c.height/l.offsetHeight||1,boundingClientRect:c}}static getPoint(l,c,C){const M=c.boundingClientRect;return new s.P((C.clientX-M.left)/c.x-l.clientLeft,(C.clientY-M.top)/c.y-l.clientTop)}static mousePos(l,c){const C=I.getScale(l);return I.getPoint(l,C,c)}static touchPos(l,c){const C=[],M=I.getScale(l);for(let R=0;R<c.length;R++)C.push(I.getPoint(l,M,c[R]));return C}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const c=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),C=c.querySelectorAll("script");for(const M of C)M.remove();return I.clean(c),c.innerHTML}static isPossiblyDangerous(l,c){const C=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!C.includes("javascript:")&&!C.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const c=l.children;for(const C of c)I.removeAttributes(C),I.clean(C)}static removeAttributes(l){for(const{name:c,value:C}of l.attributes)I.isPossiblyDangerous(c,C)&&l.removeAttribute(c)}}I.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);const k={supported:!1,testSupport:function(T){!Y&&z&&(Q?ne(T):U=T)}};let U,z,Y=!1,Q=!1;function ne(T){const l=T.createTexture();T.bindTexture(T.TEXTURE_2D,l);try{if(T.texImage2D(T.TEXTURE_2D,0,T.RGBA,T.RGBA,T.UNSIGNED_BYTE,z),T.isContextLost())return;k.supported=!0}catch{}T.deleteTexture(l),Y=!0}var X;typeof document<"u"&&(z=document.createElement("img"),z.onload=()=>{U&&ne(U),U=null,Q=!0},z.onerror=()=>{Y=!0,U=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(T){let l,c,C,M;T.resetRequestQueue=()=>{l=[],c=0,C=0,M={}},T.addThrottleControl=te=>{const oe=C++;return M[oe]=te,oe},T.removeThrottleControl=te=>{delete M[te],j()},T.getImage=(te,oe,be=!0)=>new Promise((Ee,Ie)=>{k.supported&&(te.headers||(te.headers={}),te.headers.accept="image/webp,*/*"),s.e(te,{type:"image"}),l.push({abortController:oe,requestParameters:te,supportImageRefresh:be,state:"queued",onError:qe=>{Ie(qe)},onSuccess:qe=>{Ee(qe)}}),j()});const R=te=>s._(this,void 0,void 0,function*(){te.state="running";const{requestParameters:oe,supportImageRefresh:be,onError:Ee,onSuccess:Ie,abortController:qe}=te,Ve=be===!1&&!s.i(self)&&!s.g(oe.url)&&(!oe.headers||Object.keys(oe.headers).reduce((ct,yt)=>ct&&yt==="accept",!0));c++;const At=Ve?$(oe,qe):s.m(oe,qe);try{const ct=yield At;delete te.abortController,te.state="completed",ct.data instanceof HTMLImageElement||s.b(ct.data)?Ie(ct):ct.data&&Ie({data:yield(ot=ct.data,typeof createImageBitmap=="function"?s.d(ot):s.f(ot)),cacheControl:ct.cacheControl,expires:ct.expires})}catch(ct){delete te.abortController,Ee(ct)}finally{c--,j()}var ot}),j=()=>{const te=(()=>{for(const oe of Object.keys(M))if(M[oe]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let oe=c;oe<te&&l.length>0;oe++){const be=l.shift();be.abortController.signal.aborted?oe--:R(be)}},$=(te,oe)=>new Promise((be,Ee)=>{const Ie=new Image,qe=te.url,Ve=te.credentials;Ve&&Ve==="include"?Ie.crossOrigin="use-credentials":(Ve&&Ve==="same-origin"||!s.s(qe))&&(Ie.crossOrigin="anonymous"),oe.signal.addEventListener("abort",()=>{Ie.src="",Ee(s.c())}),Ie.fetchPriority="high",Ie.onload=()=>{Ie.onerror=Ie.onload=null,be({data:Ie})},Ie.onerror=()=>{Ie.onerror=Ie.onload=null,oe.signal.aborted||Ee(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Ie.src=qe})}(X||(X={})),X.resetRequestQueue();class q{constructor(l){this._transformRequestFn=l}transformRequest(l,c){return this._transformRequestFn&&this._transformRequestFn(l,c)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function J(T){const l=[];if(typeof T=="string")l.push({id:"default",url:T});else if(T&&T.length>0){const c=[];for(const{id:C,url:M}of T){const R=`${C}${M}`;c.indexOf(R)===-1&&(c.push(R),l.push({id:C,url:M}))}}return l}function N(T,l,c){try{const C=new URL(T);return C.pathname+=`${l}${c}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${T}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class ie{constructor(l,c,C,M){this.context=l,this.format=C,this.texture=l.gl.createTexture(),this.update(c,M)}update(l,c,C){const{width:M,height:R}=l,j=!(this.size&&this.size[0]===M&&this.size[1]===R||C),{context:$}=this,{gl:te}=$;if(this.useMipmap=!!(c&&c.useMipmap),te.bindTexture(te.TEXTURE_2D,this.texture),$.pixelStoreUnpackFlipY.set(!1),$.pixelStoreUnpack.set(1),$.pixelStoreUnpackPremultiplyAlpha.set(this.format===te.RGBA&&(!c||c.premultiply!==!1)),j)this.size=[M,R],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||s.b(l)?te.texImage2D(te.TEXTURE_2D,0,this.format,this.format,te.UNSIGNED_BYTE,l):te.texImage2D(te.TEXTURE_2D,0,this.format,M,R,0,this.format,te.UNSIGNED_BYTE,l.data);else{const{x:oe,y:be}=C||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||s.b(l)?te.texSubImage2D(te.TEXTURE_2D,0,oe,be,te.RGBA,te.UNSIGNED_BYTE,l):te.texSubImage2D(te.TEXTURE_2D,0,oe,be,M,R,te.RGBA,te.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&te.generateMipmap(te.TEXTURE_2D)}bind(l,c,C){const{context:M}=this,{gl:R}=M;R.bindTexture(R.TEXTURE_2D,this.texture),C!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=R.LINEAR),l!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,l),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,C||l),this.filter=l),c!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,c),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function he(T){const{userImage:l}=T;return!!(l&&l.render&&l.render())&&(T.data.replace(new Uint8Array(l.data.buffer)),!0)}class ce extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:c,promiseResolve:C}of this.requestors)C(this._getImagesForIds(c));this.requestors=[]}}getImage(l){const c=this.images[l];if(c&&!c.data&&c.spriteData){const C=c.spriteData;c.data=new s.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),c.spriteData=null}return c}addImage(l,c){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,c)&&(this.images[l]=c)}_validate(l,c){let C=!0;const M=c.data||c.spriteData;return this._validateStretch(c.stretchX,M&&M.width)||(this.fire(new s.j(new Error(`Image "${l}" has invalid "stretchX" value`))),C=!1),this._validateStretch(c.stretchY,M&&M.height)||(this.fire(new s.j(new Error(`Image "${l}" has invalid "stretchY" value`))),C=!1),this._validateContent(c.content,c)||(this.fire(new s.j(new Error(`Image "${l}" has invalid "content" value`))),C=!1),C}_validateStretch(l,c){if(!l)return!0;let C=0;for(const M of l){if(M[0]<C||M[1]<M[0]||c<M[1])return!1;C=M[1]}return!0}_validateContent(l,c){if(!l)return!0;if(l.length!==4)return!1;const C=c.spriteData,M=C&&C.width||c.data.width,R=C&&C.height||c.data.height;return!(l[0]<0||M<l[0]||l[1]<0||R<l[1]||l[2]<0||M<l[2]||l[3]<0||R<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,c,C=!0){const M=this.getImage(l);if(C&&(M.data.width!==c.data.width||M.data.height!==c.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=M.version+1,this.images[l]=c,this.updatedImages[l]=!0}removeImage(l){const c=this.images[l];delete this.images[l],delete this.patterns[l],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise((c,C)=>{let M=!0;if(!this.isLoaded())for(const R of l)this.images[R]||(M=!1);this.isLoaded()||M?c(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:c})})}_getImagesForIds(l){const c={};for(const C of l){let M=this.getImage(C);M||(this.fire(new s.k("styleimagemissing",{id:C})),M=this.getImage(C)),M?c[C]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,textFitWidth:M.textFitWidth,textFitHeight:M.textFitHeight,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:s.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:l,height:c}=this.atlasImage;return{width:l,height:c}}getPattern(l){const c=this.patterns[l],C=this.getImage(l);if(!C)return null;if(c&&c.position.version===C.version)return c.position;if(c)c.position.version=C.version;else{const M={w:C.data.width+2,h:C.data.height+2,x:0,y:0},R=new s.I(M,C);this.patterns[l]={bin:M,position:R}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const c=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ie(l,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const R in this.patterns)l.push(this.patterns[R].bin);const{w:c,h:C}=s.p(l),M=this.atlasImage;M.resize({width:c||1,height:C||1});for(const R in this.patterns){const{bin:j}=this.patterns[R],$=j.x+1,te=j.y+1,oe=this.getImage(R).data,be=oe.width,Ee=oe.height;s.R.copy(oe,M,{x:0,y:0},{x:$,y:te},{width:be,height:Ee}),s.R.copy(oe,M,{x:0,y:Ee-1},{x:$,y:te-1},{width:be,height:1}),s.R.copy(oe,M,{x:0,y:0},{x:$,y:te+Ee},{width:be,height:1}),s.R.copy(oe,M,{x:be-1,y:0},{x:$-1,y:te},{width:1,height:Ee}),s.R.copy(oe,M,{x:0,y:0},{x:$+be,y:te},{width:1,height:Ee})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const c of l){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const C=this.getImage(c);C||s.w(`Image with ID: "${c}" was not found`),he(C)&&this.updateImage(c,C)}}}const we=1e20;function pe(T,l,c,C,M,R,j,$,te){for(let oe=l;oe<l+C;oe++)Ce(T,c*R+oe,R,M,j,$,te);for(let oe=c;oe<c+M;oe++)Ce(T,oe*R+l,1,C,j,$,te)}function Ce(T,l,c,C,M,R,j){R[0]=0,j[0]=-1e20,j[1]=we,M[0]=T[l];for(let $=1,te=0,oe=0;$<C;$++){M[$]=T[l+$*c];const be=$*$;do{const Ee=R[te];oe=(M[$]-M[Ee]+be-Ee*Ee)/($-Ee)/2}while(oe<=j[te]&&--te>-1);te++,R[te]=$,j[te]=oe,j[te+1]=we}for(let $=0,te=0;$<C;$++){for(;j[te+1]<$;)te++;const oe=R[te],be=$-oe;T[l+$*c]=M[oe]+be*be}}class Pe{constructor(l,c){this.requestManager=l,this.localIdeographFontFamily=c,this.entries={}}setURL(l){this.url=l}getGlyphs(l){return s._(this,void 0,void 0,function*(){const c=[];for(const R in l)for(const j of l[R])c.push(this._getAndCacheGlyphsPromise(R,j));const C=yield Promise.all(c),M={};for(const{stack:R,id:j,glyph:$}of C)M[R]||(M[R]={}),M[R][j]=$&&{id:$.id,bitmap:$.bitmap.clone(),metrics:$.metrics};return M})}_getAndCacheGlyphsPromise(l,c){return s._(this,void 0,void 0,function*(){let C=this.entries[l];C||(C=this.entries[l]={glyphs:{},requests:{},ranges:{}});let M=C.glyphs[c];if(M!==void 0)return{stack:l,id:c,glyph:M};if(M=this._tinySDF(C,l,c),M)return C.glyphs[c]=M,{stack:l,id:c,glyph:M};const R=Math.floor(c/256);if(256*R>65535)throw new Error("glyphs > 65535 not supported");if(C.ranges[R])return{stack:l,id:c,glyph:M};if(!this.url)throw new Error("glyphsUrl is not set");if(!C.requests[R]){const $=Pe.loadGlyphRange(l,R,this.url,this.requestManager);C.requests[R]=$}const j=yield C.requests[R];for(const $ in j)this._doesCharSupportLocalGlyph(+$)||(C.glyphs[+$]=j[+$]);return C.ranges[R]=!0,{stack:l,id:c,glyph:j[c]||null}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))}_tinySDF(l,c,C){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(C))return;let R=l.tinySDF;if(!R){let $="400";/bold/i.test(c)?$="900":/medium/i.test(c)?$="500":/light/i.test(c)&&($="200"),R=l.tinySDF=new Pe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:$})}const j=R.draw(String.fromCharCode(C));return{id:C,bitmap:new s.o({width:j.width||60,height:j.height||60},j.data),metrics:{width:j.glyphWidth/2||24,height:j.glyphHeight/2||24,left:j.glyphLeft/2+.5||0,top:j.glyphTop/2-27.5||-8,advance:j.glyphAdvance/2||24,isDoubleResolution:!0}}}}Pe.loadGlyphRange=function(T,l,c,C){return s._(this,void 0,void 0,function*(){const M=256*l,R=M+255,j=C.transformRequest(c.replace("{fontstack}",T).replace("{range}",`${M}-${R}`),"Glyphs"),$=yield s.l(j,new AbortController);if(!$||!$.data)throw new Error(`Could not load glyph range. range: ${l}, ${M}-${R}`);const te={};for(const oe of s.n($.data))te[oe.id]=oe;return te})},Pe.TinySDF=class{constructor({fontSize:T=24,buffer:l=3,radius:c=8,cutoff:C=.25,fontFamily:M="sans-serif",fontWeight:R="normal",fontStyle:j="normal"}={}){this.buffer=l,this.cutoff=C,this.radius=c;const $=this.size=T+4*l,te=this._createCanvas($),oe=this.ctx=te.getContext("2d",{willReadFrequently:!0});oe.font=`${j} ${R} ${T}px ${M}`,oe.textBaseline="alphabetic",oe.textAlign="left",oe.fillStyle="black",this.gridOuter=new Float64Array($*$),this.gridInner=new Float64Array($*$),this.f=new Float64Array($),this.z=new Float64Array($+1),this.v=new Uint16Array($)}_createCanvas(T){const l=document.createElement("canvas");return l.width=l.height=T,l}draw(T){const{width:l,actualBoundingBoxAscent:c,actualBoundingBoxDescent:C,actualBoundingBoxLeft:M,actualBoundingBoxRight:R}=this.ctx.measureText(T),j=Math.ceil(c),$=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(R-M))),te=Math.min(this.size-this.buffer,j+Math.ceil(C)),oe=$+2*this.buffer,be=te+2*this.buffer,Ee=Math.max(oe*be,0),Ie=new Uint8ClampedArray(Ee),qe={data:Ie,width:oe,height:be,glyphWidth:$,glyphHeight:te,glyphTop:j,glyphLeft:0,glyphAdvance:l};if($===0||te===0)return qe;const{ctx:Ve,buffer:At,gridInner:ot,gridOuter:ct}=this;Ve.clearRect(At,At,$,te),Ve.fillText(T,At,At+j);const yt=Ve.getImageData(At,At,$,te);ct.fill(we,0,Ee),ot.fill(0,0,Ee);for(let Et=0;Et<te;Et++)for(let Tt=0;Tt<$;Tt++){const Rt=yt.data[4*(Et*$+Tt)+3]/255;if(Rt===0)continue;const zt=(Et+At)*oe+Tt+At;if(Rt===1)ct[zt]=0,ot[zt]=we;else{const Pt=.5-Rt;ct[zt]=Pt>0?Pt*Pt:0,ot[zt]=Pt<0?Pt*Pt:0}}pe(ct,0,0,oe,be,oe,this.f,this.v,this.z),pe(ot,At,At,$,te,oe,this.f,this.v,this.z);for(let Et=0;Et<Ee;Et++){const Tt=Math.sqrt(ct[Et])-Math.sqrt(ot[Et]);Ie[Et]=Math.round(255-255*(Tt/this.radius+this.cutoff))}return qe}};class de{constructor(){this.specification=s.v.light.position}possiblyEvaluate(l,c){return s.x(l.expression.evaluate(c))}interpolate(l,c,C){return{x:s.y.number(l.x,c.x,C),y:s.y.number(l.y,c.y,C),z:s.y.number(l.z,c.z,C)}}}let rt;class ze extends s.E{constructor(l){super(),rt=rt||new s.q({anchor:new s.D(s.v.light.anchor),position:new de,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(rt),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,c={}){if(!this._validate(s.r,l,c))for(const C in l){const M=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),M):this._transitionable.setValue(C,M)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,C){return(!C||C.validate!==!1)&&s.t(this,l.call(s.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const Qe=new s.q({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class ut extends s.E{constructor(l){super(),this._transitionable=new s.T(Qe),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.z(0))}setSky(l,c={}){if(!this._validate(s.B,l,c)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in l){const M=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),M):this._transitionable.setValue(C,M)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,C={}){return(C==null?void 0:C.validate)!==!1&&s.t(this,l.call(s.u,s.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Te{constructor(l,c){this.width=l,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,c){const C=l.join(",")+String(c);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(l,c)),this.dashEntry[C]}getDashRanges(l,c,C){const M=[];let R=l.length%2==1?-l[l.length-1]*C:0,j=l[0]*C,$=!0;M.push({left:R,right:j,isDash:$,zeroLength:l[0]===0});let te=l[0];for(let oe=1;oe<l.length;oe++){$=!$;const be=l[oe];R=te*C,te+=be,j=te*C,M.push({left:R,right:j,isDash:$,zeroLength:be===0})}return M}addRoundDash(l,c,C){const M=c/2;for(let R=-C;R<=C;R++){const j=this.width*(this.nextRow+C+R);let $=0,te=l[$];for(let oe=0;oe<this.width;oe++){oe/te.right>1&&(te=l[++$]);const be=Math.abs(oe-te.left),Ee=Math.abs(oe-te.right),Ie=Math.min(be,Ee);let qe;const Ve=R/C*(M+1);if(te.isDash){const At=M-Math.abs(Ve);qe=Math.sqrt(Ie*Ie+At*At)}else qe=M-Math.sqrt(Ie*Ie+Ve*Ve);this.data[j+oe]=Math.max(0,Math.min(255,qe+128))}}}addRegularDash(l){for(let $=l.length-1;$>=0;--$){const te=l[$],oe=l[$+1];te.zeroLength?l.splice($,1):oe&&oe.isDash===te.isDash&&(oe.left=te.left,l.splice($,1))}const c=l[0],C=l[l.length-1];c.isDash===C.isDash&&(c.left=C.left-this.width,C.right=c.right+this.width);const M=this.width*this.nextRow;let R=0,j=l[R];for(let $=0;$<this.width;$++){$/j.right>1&&(j=l[++R]);const te=Math.abs($-j.left),oe=Math.abs($-j.right),be=Math.min(te,oe);this.data[M+$]=Math.max(0,Math.min(255,(j.isDash?be:-be)+128))}}addDash(l,c){const C=c?7:0,M=2*C+1;if(this.nextRow+M>this.height)return s.w("LineAtlas out of space"),null;let R=0;for(let $=0;$<l.length;$++)R+=l[$];if(R!==0){const $=this.width/R,te=this.getDashRanges(l,this.width,$);c?this.addRoundDash(te,$,C):this.addRegularDash(te)}const j={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:R};return this.nextRow+=M,this.dirty=!0,j}bind(l){const c=l.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Ue="maplibre_preloaded_worker_pool";class st{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<st.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ue]}numActive(){return Object.keys(this.active).length}}const wt=Math.floor(S.hardwareConcurrency/2);let mt,ft;function Ut(){return mt||(mt=new st),mt}st.workerCount=s.C(globalThis)?Math.max(Math.min(wt,3),1):1;class Lt{constructor(l,c){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=c;const C=this.workerPool.acquire(c);for(let M=0;M<C.length;M++){const R=new s.F(C[M],c);R.name=`Worker ${M}`,this.actors.push(R)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,c){const C=[];for(const M of this.actors)C.push(M.sendAsync({type:l,data:c}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,c){for(const C of this.actors)C.registerMessageHandler(l,c)}}function De(){return ft||(ft=new Lt(Ut(),s.G),ft.registerMessageHandler("GR",(T,l,c)=>s.m(l,c))),ft}function ke(T,l){const c=s.H();return s.J(c,c,[1,1,0]),s.K(c,c,[.5*T.width,.5*T.height,1]),T.calculatePosMatrix?s.L(c,c,T.calculatePosMatrix(l.toUnwrapped())):c}function Oe(T,l,c,C,M,R){var j;const $=function(Ee,Ie,qe){if(Ee)for(const Ve of Ee){const At=Ie[Ve];if(At&&At.source===qe&&At.type==="fill-extrusion")return!0}else for(const Ve in Ie){const At=Ie[Ve];if(At.source===qe&&At.type==="fill-extrusion")return!0}return!1}((j=M==null?void 0:M.layers)!==null&&j!==void 0?j:null,l,T.id),te=R.maxPitchScaleFactor(),oe=T.tilesIn(C,te,$);oe.sort(Je);const be=[];for(const Ee of oe)be.push({wrappedTileID:Ee.tileID.wrapped().key,queryResults:Ee.tile.queryRenderedFeatures(l,c,T._state,Ee.queryGeometry,Ee.cameraQueryGeometry,Ee.scale,M,R,te,ke(T.transform,Ee.tileID))});return function(Ee,Ie){for(const qe in Ee)for(const Ve of Ee[qe])Mt(Ve,Ie);return Ee}(function(Ee){const Ie={},qe={};for(const Ve of Ee){const At=Ve.queryResults,ot=Ve.wrappedTileID,ct=qe[ot]=qe[ot]||{};for(const yt in At){const Et=At[yt],Tt=ct[yt]=ct[yt]||{},Rt=Ie[yt]=Ie[yt]||[];for(const zt of Et)Tt[zt.featureIndex]||(Tt[zt.featureIndex]=!0,Rt.push(zt))}}return Ie}(be),T)}function Je(T,l){const c=T.tileID,C=l.tileID;return c.overscaledZ-C.overscaledZ||c.canonical.y-C.canonical.y||c.wrap-C.wrap||c.canonical.x-C.canonical.x}function Mt(T,l){const c=T.feature,C=l.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=C}function gt(T,l,c){return s._(this,void 0,void 0,function*(){let C=T;if(T.url?C=(yield s.h(l.transformRequest(T.url,"Source"),c)).data:yield S.frameAsync(c),!C)return null;const M=s.M(s.e(C,T),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(M.vectorLayerIds=C.vector_layers.map(R=>R.id)),M})}class Nt{constructor(l,c){l&&(c?this.setSouthWest(l).setNorthEast(c):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof s.N?new s.N(l.lng,l.lat):s.N.convert(l),this}setSouthWest(l){return this._sw=l instanceof s.N?new s.N(l.lng,l.lat):s.N.convert(l),this}extend(l){const c=this._sw,C=this._ne;let M,R;if(l instanceof s.N)M=l,R=l;else{if(!(l instanceof Nt))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Nt.convert(l)):this.extend(s.N.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(s.N.convert(l)):this;if(M=l._sw,R=l._ne,!M||!R)return this}return c||C?(c.lng=Math.min(M.lng,c.lng),c.lat=Math.min(M.lat,c.lat),C.lng=Math.max(R.lng,C.lng),C.lat=Math.max(R.lat,C.lat)):(this._sw=new s.N(M.lng,M.lat),this._ne=new s.N(R.lng,R.lat)),this}getCenter(){return new s.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.N(this.getWest(),this.getNorth())}getSouthEast(){return new s.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:c,lat:C}=s.N.convert(l);let M=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&M}static convert(l){return l instanceof Nt?l:l&&new Nt(l)}static fromLngLat(l,c=0){const C=360*c/40075017,M=C/Math.cos(Math.PI/180*l.lat);return new Nt(new s.N(l.lng-M,l.lat-C),new s.N(l.lng+M,l.lat+C))}adjustAntiMeridian(){const l=new s.N(this._sw.lng,this._sw.lat),c=new s.N(this._ne.lng,this._ne.lat);return new Nt(l,l.lng>c.lng?new s.N(c.lng+360,c.lat):c)}}class nn{constructor(l,c,C){this.bounds=Nt.convert(this.validateBounds(l)),this.minzoom=c||0,this.maxzoom=C||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const c=Math.pow(2,l.z),C=Math.floor(s.O(this.bounds.getWest())*c),M=Math.floor(s.Q(this.bounds.getNorth())*c),R=Math.ceil(s.O(this.bounds.getEast())*c),j=Math.ceil(s.Q(this.bounds.getSouth())*c);return l.x>=C&&l.x<R&&l.y>=M&&l.y<j}}class en extends s.E{constructor(l,c,C,M){if(super(),this.id=l,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.M(c,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield gt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(s.e(this,l),l.bounds&&(this.tileBounds=new nn(l.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new s.j(l))}})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(l){return s._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(c,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};C.request.collectResourceTiming=this._collectResourceTiming;let M="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise((R,j)=>{l.reloadPromise={resolve:R,reject:j}})}else l.actor=this.dispatcher.getActor(),M="LT";l.abortController=new AbortController;try{const R=yield l.actor.sendAsync({type:M,data:C},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,R)}catch(R){if(delete l.abortController,l.aborted)return;if(R&&R.status!==404)throw R;this._afterTileLoadWorkerResponse(l,null)}})}_afterTileLoadWorkerResponse(l,c){if(c&&c.resourceTiming&&(l.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&l.setExpiryData(c),l.loadVectorData(c,this.map.painter),l.reloadPromise){const C=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(C.resolve).catch(C.reject)}}abortTile(l){return s._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))})}unloadTile(l){return s._(this,void 0,void 0,function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Sn extends s.E{constructor(l,c,C,M){super(),this.id=l,this.dispatcher=C,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},c),s.e(this,s.M(c,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(l=!1){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield gt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(s.e(this,c),c.bounds&&(this.tileBounds=new nn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(c){this._tileJSONRequest=null,this.fire(new s.j(c))}})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}serialize(){return s.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return s._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const C=yield X.getImage(this.map._requestManager.transformRequest(c,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&C.cacheControl&&C.expires&&l.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const M=this.map.painter.context,R=M.gl,j=C.data;l.texture=this.map.painter.getTileTexture(j.width),l.texture?l.texture.update(j,{useMipmap:!0}):(l.texture=new ie(M,j,R.RGBA,{useMipmap:!0}),l.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(C){if(delete l.abortController,l.aborted)l.state="unloaded";else if(C)throw l.state="errored",C}})}abortTile(l){return s._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)})}unloadTile(l){return s._(this,void 0,void 0,function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)})}hasTransition(){return!1}}class Yn extends Sn{constructor(l,c,C,M){super(l,c,C,M),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(l){return s._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(c,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const M=yield X.getImage(C,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(M&&M.data){const R=M.data;this.map._refreshExpiredTiles&&M.cacheControl&&M.expires&&l.setExpiryData({cacheControl:M.cacheControl,expires:M.expires});const j=s.b(R)&&s.U()?R:yield this.readImageNow(R),$={type:this.type,uid:l.uid,source:this.id,rawImageData:j,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const te=yield l.actor.sendAsync({type:"LDT",data:$});l.dem=te,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(M){if(delete l.abortController,l.aborted)l.state="unloaded";else if(M)throw l.state="errored",M}})}readImageNow(l){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.V()){const c=l.width+2,C=l.height+2;try{return new s.R({width:c,height:C},yield s.W(l,-1,-1,c,C))}catch{}}return S.getImageData(l,1)})}_getNeighboringTiles(l){const c=l.canonical,C=Math.pow(2,c.z),M=(c.x-1+C)%C,R=c.x===0?l.wrap-1:l.wrap,j=(c.x+1+C)%C,$=c.x+1===C?l.wrap+1:l.wrap,te={};return te[new s.S(l.overscaledZ,R,c.z,M,c.y).key]={backfilled:!1},te[new s.S(l.overscaledZ,$,c.z,j,c.y).key]={backfilled:!1},c.y>0&&(te[new s.S(l.overscaledZ,R,c.z,M,c.y-1).key]={backfilled:!1},te[new s.S(l.overscaledZ,l.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},te[new s.S(l.overscaledZ,$,c.z,j,c.y-1).key]={backfilled:!1}),c.y+1<C&&(te[new s.S(l.overscaledZ,R,c.z,M,c.y+1).key]={backfilled:!1},te[new s.S(l.overscaledZ,l.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},te[new s.S(l.overscaledZ,$,c.z,j,c.y+1).key]={backfilled:!1}),te}unloadTile(l){return s._(this,void 0,void 0,function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))})}}class Qr extends s.E{constructor(l,c,C,M){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=C.getActor(),this.setEventedParent(M),this._data=c.data,this._options=s.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:s.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:s.X,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(l){return l*(s.X/this.tileSize)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}getData(){return s._(this,void 0,void 0,function*(){const l=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})})}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,c,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:c,offset:C}})}_updateWorkerData(l){return s._(this,void 0,void 0,function*(){const c=s.e({type:this.type},this.workerOptions);l?c.dataDiff=l:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(S.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{const C=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||C.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let M=null;C.resourceTiming&&C.resourceTiming[this.id]&&(M=C.resourceTiming[this.id].slice(0));const R={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&s.e(R,{resourceTiming:M}),this.fire(new s.k("data",Object.assign(Object.assign({},R),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},R),{sourceDataType:"content"})))}catch(C){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(C))}})}loaded(){return this._pendingLoads===0}loadTile(l){return s._(this,void 0,void 0,function*(){const c=l.actor?"RT":"LT";l.actor=this.actor;const C={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const M=yield this.actor.sendAsync({type:c,data:C},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(M,this.map.painter,c==="RT")})}abortTile(l){return s._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0})}unloadTile(l){return s._(this,void 0,void 0,function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class cr extends s.E{constructor(l,c,C,M){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=C,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=c}load(l){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield X.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,l&&(this.coordinates=l),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new s.j(c))}})}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const c=l.map(s.Y.fromLngLat);var C;return this.tileID=function(M){let R=1/0,j=1/0,$=-1/0,te=-1/0;for(const Ie of M)R=Math.min(R,Ie.x),j=Math.min(j,Ie.y),$=Math.max($,Ie.x),te=Math.max(te,Ie.y);const oe=Math.max($-R,te-j),be=Math.max(0,Math.floor(-Math.log(oe)/Math.LN2)),Ee=Math.pow(2,be);return new s.Z(be,Math.floor((R+$)/2*Ee),Math.floor((j+te)/2*Ee))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(M=>this.tileID.getTilePoint(M)._round()),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,c=l.gl;this.texture||(this.texture=new ie(l,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let C=!1;for(const M in this.tiles){const R=this.tiles[M];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,C=!0)}C&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class fr extends cr{constructor(l,c,C,M){super(l,c,C,M),this.roundZoom=!0,this.type="video",this.options=c}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const c of l.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield s.a0(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new s.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const c=this.video.seekable;l<c.start(0)||l>c.end(0)?this.fire(new s.j(new s.$(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,c=l.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new ie(l,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let C=!1;for(const M in this.tiles){const R=this.tiles[M];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,C=!0)}C&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class br extends cr{constructor(l,c,C,M){super(l,c,C,M),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(j=>typeof j!="number"))||this.fire(new s.j(new s.$(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.$(`sources.${l}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new s.j(new s.$(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.$(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.$(`sources.${l}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,C=c.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ie(c,this.canvas,C.RGBA,{premultiply:!0});let M=!1;for(const R in this.tiles){const j=this.tiles[R];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,M=!0)}M&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Cr={},Mr=T=>{switch(T){case"geojson":return Qr;case"image":return cr;case"raster":return Sn;case"raster-dem":return Yn;case"vector":return en;case"video":return fr;case"canvas":return br}return Cr[T]},Qn="RTLPluginLoaded";class Sr extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=De()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return s._(this,arguments,void 0,function*(c,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=S.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.k(Qn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ge=null;function ue(){return Ge||(Ge=new Sr),Ge}class me{constructor(l,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=s.a1(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const c=l+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,c,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(M,R){const j={};if(!R)return j;for(const $ of M){const te=$.layerIds.map(oe=>R.getLayer(oe)).filter(Boolean);if(te.length!==0){$.layers=te,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(oe=>te.filter(be=>be.id===oe)[0]));for(const oe of te)j[oe.id]=$}}return j}(l.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const R=this.buckets[M];if(R instanceof s.a3){if(this.hasSymbolBuckets=!0,!C)break;R.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const R=this.buckets[M];if(R instanceof s.a3&&R.hasRTLText){this.hasRTLText=!0,ue().lazyLoad();break}}this.queryPadding=0;for(const M in this.buckets){const R=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(M).queryRadius(R))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new s.a2}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const C in this.buckets){const M=this.buckets[C];M.uploadPending()&&M.upload(l)}const c=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ie(l,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ie(l,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,c,C,M,R,j,$,te,oe,be){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:R,scale:j,tileSize:this.tileSize,pixelPosMatrix:be,transform:te,params:$,queryPadding:this.queryPadding*oe},l,c,C):{}}querySourceFeatures(l,c){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const M=C.loadVTLayers(),R=c&&c.sourceLayer?c.sourceLayer:"",j=M._geojsonTileLayer||M[R];if(!j)return;const $=s.a4(c&&c.filter),{z:te,x:oe,y:be}=this.tileID.canonical,Ee={z:te,x:oe,y:be};for(let Ie=0;Ie<j.length;Ie++){const qe=j.feature(Ie);if($.needGeometry){const ot=s.a5(qe,!0);if(!$.filter(new s.z(this.tileID.overscaledZ),ot,this.tileID.canonical))continue}else if(!$.filter(new s.z(this.tileID.overscaledZ),qe))continue;const Ve=C.getId(qe,R),At=new s.a6(qe,te,oe,be,Ve);At.tile=Ee,l.push(At)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const c=this.expirationTime;if(l.cacheControl){const C=s.a7(l.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const C=Date.now();let M=!1;if(this.expirationTime>C)M=!1;else if(c)if(this.expirationTime<c)M=!0;else{const R=this.expirationTime-c;R?this.expirationTime=C+Math.max(R,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!c.style.hasLayer(M))continue;const R=this.buckets[M],j=R.layers[0].sourceLayer||"_geojsonTileLayer",$=C[j],te=l[j];if(!$||!te||Object.keys(te).length===0)continue;R.update(te,$,this.imageAtlas&&this.imageAtlas.patternPositions||{});const oe=c&&c.style&&c.style.getLayer(M);oe&&(this.queryPadding=Math.max(this.queryPadding,oe.queryRadius(R)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<S.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=S.now()+l}setDependencies(l,c){const C={};for(const M of c)C[M]=!0;this.dependencies[l]=C}hasDependency(l,c){for(const C of l){const M=this.dependencies[C];if(M){for(const R of c)if(M[R])return!0}}return!1}}class Xe{constructor(l,c){this.max=l,this.onRemove=c,this.reset()}reset(){for(const l in this.data)for(const c of this.data[l])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(l,c,C){const M=l.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const R={value:c,timeout:void 0};if(C!==void 0&&(R.timeout=setTimeout(()=>{this.remove(l,R)},C)),this.data[M].push(R),this.order.push(M),this.order.length>this.max){const j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const c=this.data[l].shift();return c.timeout&&clearTimeout(c.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),c.value}getByKey(l){const c=this.data[l];return c?c[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,c){if(!this.has(l))return this;const C=l.wrapped().key,M=c===void 0?0:this.data[C].indexOf(c),R=this.data[C][M];return this.data[C].splice(M,1),R.timeout&&clearTimeout(R.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(R.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(l){const c=[];for(const C in this.data)for(const M of this.data[C])l(M.value)||c.push(M);for(const C of c)this.remove(C.value.tileID,C)}}class Bt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,c,C){const M=String(c);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][M]=this.stateChanges[l][M]||{},s.e(this.stateChanges[l][M],C),this.deletedStates[l]===null){this.deletedStates[l]={};for(const R in this.state[l])R!==M&&(this.deletedStates[l][R]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][M]===null){this.deletedStates[l][M]={};for(const R in this.state[l][M])C[R]||(this.deletedStates[l][M][R]=null)}else for(const R in C)this.deletedStates[l]&&this.deletedStates[l][M]&&this.deletedStates[l][M][R]===null&&delete this.deletedStates[l][M][R]}removeFeatureState(l,c,C){if(this.deletedStates[l]===null)return;const M=String(c);if(this.deletedStates[l]=this.deletedStates[l]||{},C&&c!==void 0)this.deletedStates[l][M]!==null&&(this.deletedStates[l][M]=this.deletedStates[l][M]||{},this.deletedStates[l][M][C]=null);else if(c!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][M])for(C in this.deletedStates[l][M]={},this.stateChanges[l][M])this.deletedStates[l][M][C]=null;else this.deletedStates[l][M]=null;else this.deletedStates[l]=null}getState(l,c){const C=String(c),M=s.e({},(this.state[l]||{})[C],(this.stateChanges[l]||{})[C]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const R=this.deletedStates[l][c];if(R===null)return{};for(const j in R)delete M[j]}return M}initializeTileState(l,c){l.setFeatureState(this.state,c)}coalesceChanges(l,c){const C={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const R={};for(const j in this.stateChanges[M])this.state[M][j]||(this.state[M][j]={}),s.e(this.state[M][j],this.stateChanges[M][j]),R[j]=this.state[M][j];C[M]=R}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const R={};if(this.deletedStates[M]===null)for(const j in this.state[M])R[j]={},this.state[M][j]={};else for(const j in this.deletedStates[M]){if(this.deletedStates[M][j]===null)this.state[M][j]={};else for(const $ of Object.keys(this.deletedStates[M][j]))delete this.state[M][j][$];R[j]=this.state[M][j]}C[M]=C[M]||{},s.e(C[M],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const M in l)l[M].setFeatureState(C,c)}}function Yt(T,l,c){const C=l.intersectsFrustum(T);if(!c)return C;const M=l.intersectsPlane(c);return C===0||M===0?0:C===2&&M===2?2:1}function it(T,l,c,C,M){let R=T;const j=Math.atan(l/c),$=Math.hypot(l,c);return R=T+s.a8(C/$/Math.max(.5,Math.cos(s.aa(M/2)))),R+=1*s.a8(Math.cos(j))/2,R+=s.ab(T-R,-0,0),R}function Kt(T,l){const c=(l.roundZoom?Math.round:Math.floor)(T.zoom+s.a8(T.tileSize/l.tileSize));return Math.max(0,c)}function Ye(T,l){const c=T.getCameraFrustum(),C=T.getClippingPlane(),M=T.screenPointToMercatorCoordinate(T.getCameraPoint()),R=s.Y.fromLngLat(T.center,T.elevation);M.z=R.z+Math.cos(T.pitchInRadians)*T.cameraToCenterDistance/T.worldSize;const j=T.getCoveringTilesDetailsProvider(),$=j.allowVariableZoom(T,l),te=Kt(T,l),oe=l.minzoom||0,be=l.maxzoom!==void 0?l.maxzoom:T.maxZoom,Ee=Math.min(Math.max(0,te),be),Ie=Math.pow(2,Ee),qe=[Ie*M.x,Ie*M.y,0],Ve=[Ie*R.x,Ie*R.y,0],At=Math.hypot(R.x-M.x,R.y-M.y),ot=Math.abs(R.z-M.z),ct=Math.hypot(At,ot),yt=Rt=>({zoom:0,x:0,y:0,wrap:Rt,fullyVisible:!1}),Et=[],Tt=[];if(T.renderWorldCopies&&j.allowWorldCopies())for(let Rt=1;Rt<=3;Rt++)Et.push(yt(-Rt)),Et.push(yt(Rt));for(Et.push(yt(0));Et.length>0;){const Rt=Et.pop(),zt=Rt.x,Pt=Rt.y;let tn=Rt.fullyVisible;const Ht={x:zt,y:Pt,z:Rt.zoom},vn=j.getTileAABB(Ht,Rt.wrap,T.elevation,l);if(!tn){const Un=Yt(c,vn,C);if(Un===0)continue;tn=Un===2}const _n=j.distanceToTile2d(M.x,M.y,Ht,vn);let gn=te;$&&(gn=(l.calculateTileZoom||it)(T.zoom+s.a8(T.tileSize/l.tileSize),_n,ot,ct,T.fov)),gn=(l.roundZoom?Math.round:Math.floor)(gn),gn=Math.max(0,gn);const On=Math.min(gn,be);if(Rt.wrap=j.getWrap(R,Ht,Rt.wrap),Rt.zoom>=On){if(Rt.zoom<oe)continue;const Un=Ee-Rt.zoom,wn=qe[0]-.5-(zt<<Un),kr=qe[1]-.5-(Pt<<Un),Bi=l.reparseOverscaled?Math.max(Rt.zoom,gn):Rt.zoom;Tt.push({tileID:new s.S(Rt.zoom===be?Bi:Rt.zoom,Rt.wrap,Rt.zoom,zt,Pt),distanceSq:s.a9([Ve[0]-.5-zt,Ve[1]-.5-Pt]),tileDistanceToCamera:Math.sqrt(wn*wn+kr*kr)})}else for(let Un=0;Un<4;Un++)Et.push({zoom:Rt.zoom+1,x:(zt<<1)+Un%2,y:(Pt<<1)+(Un>>1),wrap:Rt.wrap,fullyVisible:tn})}return Tt.sort((Rt,zt)=>Rt.distanceSq-zt.distanceSq).map(Rt=>Rt.tileID)}class fe extends s.E{constructor(l,c,C){super(),this.id=l,this.dispatcher=C,this.on("data",M=>this._dataHandler(M)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((M,R,j,$)=>{const te=new(Mr(R.type))(M,R,j,$);if(te.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${te.id}`);return te})(l,c,C,this),this._tiles={},this._cache=new Xe(0,M=>this._unloadTile(M)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Bt,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const c=this._tiles[l];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,c,C){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,c,C)}catch(M){l.state="errored",M.status!==404?this._source.fire(new s.j(M,{tile:l})):this.update(this.transform,this.terrain)}})}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new s.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const C=this._tiles[c];C.upload(l),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(xe).map(l=>l.key)}getRenderableIds(l){const c=[];for(const C in this._tiles)this._isIdRenderable(C,l)&&c.push(this._tiles[C]);return l?c.sort((C,M)=>{const R=C.tileID,j=M.tileID,$=new s.P(R.canonical.x,R.canonical.y)._rotate(-this.transform.bearingInRadians),te=new s.P(j.canonical.x,j.canonical.y)._rotate(-this.transform.bearingInRadians);return R.overscaledZ-j.overscaledZ||te.y-$.y||te.x-$.x}).map(C=>C.tileID.key):c.map(C=>C.tileID).sort(xe).map(C=>C.key)}hasRenderableParent(l){const c=this.findLoadedParent(l,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(l,c){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(c||!this._tiles[l].holdingForFade())}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(l||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(l,c){return s._(this,void 0,void 0,function*(){const C=this._tiles[l];C&&(C.state!=="loading"&&(C.state=c),yield this._loadTile(C,l,c))})}_tileLoaded(l,c,C){l.timeAdded=S.now(),C==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(c,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const c=this.getRenderableIds();for(let M=0;M<c.length;M++){const R=c[M];if(l.neighboringTiles&&l.neighboringTiles[R]){const j=this.getTileByID(R);C(l,j),C(j,l)}}function C(M,R){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let j=R.tileID.canonical.x-M.tileID.canonical.x;const $=R.tileID.canonical.y-M.tileID.canonical.y,te=Math.pow(2,M.tileID.canonical.z),oe=R.tileID.key;j===0&&$===0||Math.abs($)>1||(Math.abs(j)>1&&(Math.abs(j+te)===1?j+=te:Math.abs(j-te)===1&&(j-=te)),R.dem&&M.dem&&(M.dem.backfillBorder(R.dem,j,$),M.neighboringTiles&&M.neighboringTiles[oe]&&(M.neighboringTiles[oe].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,c,C,M){for(const R in this._tiles){let j=this._tiles[R];if(M[R]||!j.hasData()||j.tileID.overscaledZ<=c||j.tileID.overscaledZ>C)continue;let $=j.tileID;for(;j&&j.tileID.overscaledZ>c+1;){const oe=j.tileID.scaledTo(j.tileID.overscaledZ-1);j=this._tiles[oe.key],j&&j.hasData()&&($=oe)}let te=$;for(;te.overscaledZ>c;)if(te=te.scaledTo(te.overscaledZ-1),l[te.key]||l[te.canonical.key]){M[$.key]=$;break}}}findLoadedParent(l,c){if(l.key in this._loadedParentTiles){const C=this._loadedParentTiles[l.key];return C&&C.tileID.overscaledZ>=c?C:null}for(let C=l.overscaledZ-1;C>=c;C--){const M=l.scaledTo(C),R=this._getLoadedTile(M);if(R)return R}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const c=this._tiles[l.key];return c&&c.hasData()?c:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const c=Math.ceil(l.width/this._source.tileSize)+1,C=Math.ceil(l.height/this._source.tileSize)+1,M=Math.floor(c*C*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(R)}handleWrapJump(l){const c=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,c){const C={};for(const M in this._tiles){const R=this._tiles[M];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+c),C[R.tileID.key]=R}this._tiles=C;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}_updateCoveredAndRetainedTiles(l,c,C,M,R,j){const $={},te={},oe=Object.keys(l),be=S.now();for(const Ee of oe){const Ie=l[Ee],qe=this._tiles[Ee];if(!qe||qe.fadeEndTime!==0&&qe.fadeEndTime<=be)continue;const Ve=this.findLoadedParent(Ie,c),At=this.findLoadedSibling(Ie),ot=Ve||At||null;ot&&(this._addTile(ot.tileID),$[ot.tileID.key]=ot.tileID),te[Ee]=Ie}this._retainLoadedChildren(te,M,C,l);for(const Ee in $)l[Ee]||(this._coveredTiles[Ee]=!0,l[Ee]=$[Ee]);if(j){const Ee={},Ie={};for(const qe of R)this._tiles[qe.key].hasData()?Ee[qe.key]=qe:Ie[qe.key]=qe;for(const qe in Ie){const Ve=Ie[qe].children(this._source.maxzoom);this._tiles[Ve[0].key]&&this._tiles[Ve[1].key]&&this._tiles[Ve[2].key]&&this._tiles[Ve[3].key]&&(Ee[Ve[0].key]=l[Ve[0].key]=Ve[0],Ee[Ve[1].key]=l[Ve[1].key]=Ve[1],Ee[Ve[2].key]=l[Ve[2].key]=Ve[2],Ee[Ve[3].key]=l[Ve[3].key]=Ve[3],delete Ie[qe])}for(const qe in Ie){const Ve=Ie[qe],At=this.findLoadedParent(Ve,this._source.minzoom),ot=this.findLoadedSibling(Ve),ct=At||ot||null;if(ct){Ee[ct.tileID.key]=l[ct.tileID.key]=ct.tileID;for(const yt in Ee)Ee[yt].isChildOf(ct.tileID)&&delete Ee[yt]}}for(const qe in this._tiles)Ee[qe]||(this._coveredTiles[qe]=!0)}}update(l,c){if(!this._sourceLoaded||this._paused)return;let C;this.transform=l,this.terrain=c,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?C=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(be=>new s.S(be.canonical.z,be.wrap,be.canonical.z,be.canonical.x,be.canonical.y)):(C=Ye(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter(be=>this._source.hasTile(be)))):C=[];const M=Kt(l,this._source),R=Math.max(M-fe.maxOverzooming,this._source.minzoom),j=Math.max(M+fe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const be={};for(const Ee of C)if(Ee.canonical.z>this._source.minzoom){const Ie=Ee.scaledTo(Ee.canonical.z-1);be[Ie.key]=Ie;const qe=Ee.scaledTo(Math.max(this._source.minzoom,Math.min(Ee.canonical.z,5)));be[qe.key]=qe}C=C.concat(Object.values(be))}const $=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,$&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const te=this._updateRetainedTiles(C,M);p(this._source.type)&&this._updateCoveredAndRetainedTiles(te,R,j,M,C,c);for(const be in te)this._tiles[be].clearFadeHold();const oe=s.ac(this._tiles,te);for(const be of oe){const Ee=this._tiles[be];Ee.hasSymbolBuckets&&!Ee.holdingForFade()?Ee.setHoldDuration(this.map._fadeDuration):Ee.hasSymbolBuckets&&!Ee.symbolFadeFinished()||this._removeTile(be)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,c){var C;const M={},R={},j=Math.max(c-fe.maxOverzooming,this._source.minzoom),$=Math.max(c+fe.maxUnderzooming,this._source.minzoom),te={};for(const oe of l){const be=this._addTile(oe);M[oe.key]=oe,be.hasData()||c<this._source.maxzoom&&(te[oe.key]=oe)}this._retainLoadedChildren(te,c,$,M);for(const oe of l){let be=this._tiles[oe.key];if(be.hasData())continue;if(c+1>this._source.maxzoom){const Ie=oe.children(this._source.maxzoom)[0],qe=this.getTile(Ie);if(qe&&qe.hasData()){M[Ie.key]=Ie;continue}}else{const Ie=oe.children(this._source.maxzoom);if(M[Ie[0].key]&&M[Ie[1].key]&&M[Ie[2].key]&&M[Ie[3].key])continue}let Ee=be.wasRequested();for(let Ie=oe.overscaledZ-1;Ie>=j;--Ie){const qe=oe.scaledTo(Ie);if(R[qe.key])break;if(R[qe.key]=!0,be=this.getTile(qe),!be&&Ee&&(be=this._addTile(qe)),be){const Ve=be.hasData();if((Ve||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||Ee)&&(M[qe.key]=qe),Ee=be.wasRequested(),Ve)break}}}return M}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const c=[];let C,M=this._tiles[l].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){C=this._loadedParentTiles[M.key];break}c.push(M.key);const R=M.scaledTo(M.overscaledZ-1);if(C=this._getLoadedTile(R),C)break;M=R}for(const R of c)this._loadedParentTiles[R]=C}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const c=this._tiles[l].tileID,C=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=C}}_addTile(l){let c=this._tiles[l.key];if(c)return c;c=this._cache.getAndRemove(l),c&&(this._setTileReloadTimer(l.key,c),c.tileID=l,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,c)));const C=c;return c||(c=new me(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(c,l.key,c.state)),c.uses++,this._tiles[l.key]=c,C||this._source.fire(new s.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(l,c){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const C=c.getExpiryTimeout();C&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},C))}_removeTile(l){const c=this._tiles[l];c&&(c.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(l){const c=l.sourceDataType;l.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&c==="content"&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,c,C){const M=[],R=this.transform;if(!R)return M;const j=C?R.getCameraQueryGeometry(l):l,$=l.map(Ve=>R.screenPointToMercatorCoordinate(Ve,this.terrain)),te=j.map(Ve=>R.screenPointToMercatorCoordinate(Ve,this.terrain)),oe=this.getIds();let be=1/0,Ee=1/0,Ie=-1/0,qe=-1/0;for(const Ve of te)be=Math.min(be,Ve.x),Ee=Math.min(Ee,Ve.y),Ie=Math.max(Ie,Ve.x),qe=Math.max(qe,Ve.y);for(let Ve=0;Ve<oe.length;Ve++){const At=this._tiles[oe[Ve]];if(At.holdingForFade())continue;const ot=At.tileID,ct=Math.pow(2,R.zoom-At.tileID.overscaledZ),yt=c*At.queryPadding*s.X/At.tileSize/ct,Et=[ot.getTilePoint(new s.Y(be,Ee)),ot.getTilePoint(new s.Y(Ie,qe))];if(Et[0].x-yt<s.X&&Et[0].y-yt<s.X&&Et[1].x+yt>=0&&Et[1].y+yt>=0){const Tt=$.map(zt=>ot.getTilePoint(zt)),Rt=te.map(zt=>ot.getTilePoint(zt));M.push({tile:At,tileID:ot,queryGeometry:Tt,cameraQueryGeometry:Rt,scale:ct})}}return M}getVisibleCoordinates(l){const c=this.getRenderableIds(l).map(C=>this._tiles[C].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(p(this._source.type)){const l=S.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=l)return!0}return!1}setFeatureState(l,c,C){this._state.updateState(l=l||"_geojsonTileLayer",c,C)}removeFeatureState(l,c,C){this._state.removeFeatureState(l=l||"_geojsonTileLayer",c,C)}getFeatureState(l,c){return this._state.getState(l=l||"_geojsonTileLayer",c)}setDependencies(l,c,C){const M=this._tiles[l];M&&M.setDependencies(c,C)}reloadTilesForDependencies(l,c){for(const C in this._tiles)this._tiles[C].hasDependency(l,c)&&this._reloadTile(C,"reloading");this._cache.filter(C=>!C.hasDependency(l,c))}}function xe(T,l){const c=Math.abs(2*T.wrap)-+(T.wrap<0),C=Math.abs(2*l.wrap)-+(l.wrap<0);return T.overscaledZ-l.overscaledZ||C-c||l.canonical.y-T.canonical.y||l.canonical.x-T.canonical.x}function p(T){return T==="raster"||T==="image"||T==="video"}fe.maxOverzooming=10,fe.maxUnderzooming=3;class Ne{constructor(l,c){this.reset(l,c)}reset(l,c){this.points=l||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=s.ab(l,0,1);let c=1,C=this._distances[c];const M=l*this.paddedLength+this.padding;for(;C<M&&c<this._distances.length;)C=this._distances[++c];const R=c-1,j=this._distances[R],$=C-j,te=$>0?(M-j)/$:0;return this.points[R].mult(1-te).add(this.points[c].mult(te))}}function dt(T,l){let c=!0;return T==="always"||T!=="never"&&l!=="never"||(c=!1),c}class pt{constructor(l,c,C){const M=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(l/C),this.yCellCount=Math.ceil(c/C);for(let j=0;j<this.xCellCount*this.yCellCount;j++)M.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=c,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,c,C,M,R){this._forEachCell(c,C,M,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(c),this.bboxes.push(C),this.bboxes.push(M),this.bboxes.push(R)}insertCircle(l,c,C,M){this._forEachCell(c-M,C-M,c+M,C+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(c),this.circles.push(C),this.circles.push(M)}_insertBoxCell(l,c,C,M,R,j){this.boxCells[R].push(j)}_insertCircleCell(l,c,C,M,R,j){this.circleCells[R].push(j)}_query(l,c,C,M,R,j,$){if(C<0||l>this.width||M<0||c>this.height)return[];const te=[];if(l<=0&&c<=0&&this.width<=C&&this.height<=M){if(R)return[{key:null,x1:l,y1:c,x2:C,y2:M}];for(let oe=0;oe<this.boxKeys.length;oe++)te.push({key:this.boxKeys[oe],x1:this.bboxes[4*oe],y1:this.bboxes[4*oe+1],x2:this.bboxes[4*oe+2],y2:this.bboxes[4*oe+3]});for(let oe=0;oe<this.circleKeys.length;oe++){const be=this.circles[3*oe],Ee=this.circles[3*oe+1],Ie=this.circles[3*oe+2];te.push({key:this.circleKeys[oe],x1:be-Ie,y1:Ee-Ie,x2:be+Ie,y2:Ee+Ie})}}else this._forEachCell(l,c,C,M,this._queryCell,te,{hitTest:R,overlapMode:j,seenUids:{box:{},circle:{}}},$);return te}query(l,c,C,M){return this._query(l,c,C,M,!1,null)}hitTest(l,c,C,M,R,j){return this._query(l,c,C,M,!0,R,j).length>0}hitTestCircle(l,c,C,M,R){const j=l-C,$=l+C,te=c-C,oe=c+C;if($<0||j>this.width||oe<0||te>this.height)return!1;const be=[];return this._forEachCell(j,te,$,oe,this._queryCellCircle,be,{hitTest:!0,overlapMode:M,circle:{x:l,y:c,radius:C},seenUids:{box:{},circle:{}}},R),be.length>0}_queryCell(l,c,C,M,R,j,$,te){const{seenUids:oe,hitTest:be,overlapMode:Ee}=$,Ie=this.boxCells[R];if(Ie!==null){const Ve=this.bboxes;for(const At of Ie)if(!oe.box[At]){oe.box[At]=!0;const ot=4*At,ct=this.boxKeys[At];if(l<=Ve[ot+2]&&c<=Ve[ot+3]&&C>=Ve[ot+0]&&M>=Ve[ot+1]&&(!te||te(ct))&&(!be||!dt(Ee,ct.overlapMode))&&(j.push({key:ct,x1:Ve[ot],y1:Ve[ot+1],x2:Ve[ot+2],y2:Ve[ot+3]}),be))return!0}}const qe=this.circleCells[R];if(qe!==null){const Ve=this.circles;for(const At of qe)if(!oe.circle[At]){oe.circle[At]=!0;const ot=3*At,ct=this.circleKeys[At];if(this._circleAndRectCollide(Ve[ot],Ve[ot+1],Ve[ot+2],l,c,C,M)&&(!te||te(ct))&&(!be||!dt(Ee,ct.overlapMode))){const yt=Ve[ot],Et=Ve[ot+1],Tt=Ve[ot+2];if(j.push({key:ct,x1:yt-Tt,y1:Et-Tt,x2:yt+Tt,y2:Et+Tt}),be)return!0}}}return!1}_queryCellCircle(l,c,C,M,R,j,$,te){const{circle:oe,seenUids:be,overlapMode:Ee}=$,Ie=this.boxCells[R];if(Ie!==null){const Ve=this.bboxes;for(const At of Ie)if(!be.box[At]){be.box[At]=!0;const ot=4*At,ct=this.boxKeys[At];if(this._circleAndRectCollide(oe.x,oe.y,oe.radius,Ve[ot+0],Ve[ot+1],Ve[ot+2],Ve[ot+3])&&(!te||te(ct))&&!dt(Ee,ct.overlapMode))return j.push(!0),!0}}const qe=this.circleCells[R];if(qe!==null){const Ve=this.circles;for(const At of qe)if(!be.circle[At]){be.circle[At]=!0;const ot=3*At,ct=this.circleKeys[At];if(this._circlesCollide(Ve[ot],Ve[ot+1],Ve[ot+2],oe.x,oe.y,oe.radius)&&(!te||te(ct))&&!dt(Ee,ct.overlapMode))return j.push(!0),!0}}}_forEachCell(l,c,C,M,R,j,$,te){const oe=this._convertToXCellCoord(l),be=this._convertToYCellCoord(c),Ee=this._convertToXCellCoord(C),Ie=this._convertToYCellCoord(M);for(let qe=oe;qe<=Ee;qe++)for(let Ve=be;Ve<=Ie;Ve++)if(R.call(this,l,c,C,M,this.xCellCount*Ve+qe,j,$,te))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,c,C,M,R,j){const $=M-l,te=R-c,oe=C+j;return oe*oe>$*$+te*te}_circleAndRectCollide(l,c,C,M,R,j,$){const te=(j-M)/2,oe=Math.abs(l-(M+te));if(oe>te+C)return!1;const be=($-R)/2,Ee=Math.abs(c-(R+be));if(Ee>be+C)return!1;if(oe<=te||Ee<=be)return!0;const Ie=oe-te,qe=Ee-be;return Ie*Ie+qe*qe<=C*C}}function Ot(T,l,c){const C=s.H();if(!T){const{vecSouth:Ee,vecEast:Ie}=rn(l),qe=g();qe[0]=Ie[0],qe[1]=Ie[1],qe[2]=Ee[0],qe[3]=Ee[1],M=qe,(be=(j=(R=qe)[0])*(oe=R[3])-(te=R[2])*($=R[1]))&&(M[0]=oe*(be=1/be),M[1]=-$*be,M[2]=-te*be,M[3]=j*be),C[0]=qe[0],C[1]=qe[1],C[4]=qe[2],C[5]=qe[3]}var M,R,j,$,te,oe,be;return s.K(C,C,[1/c,1/c,1]),C}function _t(T,l,c,C){if(T){const M=s.H();if(!l){const{vecSouth:R,vecEast:j}=rn(c);M[0]=j[0],M[1]=j[1],M[4]=R[0],M[5]=R[1]}return s.K(M,M,[C,C,1]),M}return c.pixelsToClipSpaceMatrix}function rn(T){const l=Math.cos(T.rollInRadians),c=Math.sin(T.rollInRadians),C=Math.cos(T.pitchInRadians),M=Math.cos(T.bearingInRadians),R=Math.sin(T.bearingInRadians),j=s.ad();j[0]=-M*C*c-R*l,j[1]=-R*C*c+M*l;const $=s.ae(j);$<1e-9?s.af(j):s.ag(j,j,1/$);const te=s.ad();te[0]=M*C*l-R*c,te[1]=R*C*l+M*c;const oe=s.ae(te);return oe<1e-9?s.af(te):s.ag(te,te,1/oe),{vecEast:te,vecSouth:j}}function Zt(T,l,c,C){let M;C?(M=[T,l,C(T,l),1],s.al(M,M,c)):(M=[T,l,0,1],ui(M,M,c));const R=M[3];return{point:new s.P(M[0]/R,M[1]/R),signedDistanceFromCamera:R,isOccluded:!1}}function Gt(T,l){return .5+T/l*.5}function bt(T,l){return T.x>=-l[0]&&T.x<=l[0]&&T.y>=-l[1]&&T.y<=l[1]}function Pn(T,l,c,C,M,R,j,$,te,oe,be,Ee,Ie){const qe=c?T.textSizeData:T.iconSizeData,Ve=s.ah(qe,l.transform.zoom),At=[256/l.width*2+1,256/l.height*2+1],ot=c?T.text.dynamicLayoutVertexArray:T.icon.dynamicLayoutVertexArray;ot.clear();const ct=T.lineVertexArray,yt=c?T.text.placedSymbolArray:T.icon.placedSymbolArray,Et=l.transform.width/l.transform.height;let Tt=!1;for(let Rt=0;Rt<yt.length;Rt++){const zt=yt.get(Rt);if(zt.hidden||zt.writingMode===s.ai.vertical&&!Tt){ji(zt.numGlyphs,ot);continue}Tt=!1;const Pt=new s.P(zt.anchorX,zt.anchorY),tn={getElevation:Ie,pitchedLabelPlaneMatrix:C,lineVertexArray:ct,pitchWithMap:R,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:Pt,unwrappedTileID:te,width:oe,height:be,translation:Ee},Ht=xr(zt.anchorX,zt.anchorY,tn);if(!bt(Ht.point,At)){ji(zt.numGlyphs,ot);continue}const vn=Gt(l.transform.cameraToCenterDistance,Ht.signedDistanceFromCamera),_n=s.aj(qe,Ve,zt),gn=R?_n*l.transform.getPitchedTextCorrection(zt.anchorX,zt.anchorY,te)/vn:_n*vn,On=wr({projectionContext:tn,pitchedLabelPlaneMatrixInverse:M,symbol:zt,fontSize:gn,flip:!1,keepUpright:j,glyphOffsetArray:T.glyphOffsetArray,dynamicLayoutVertexArray:ot,aspectRatio:Et,rotateToLine:$});Tt=On.useVertical,(On.notEnoughRoom||Tt||On.needsFlipping&&wr({projectionContext:tn,pitchedLabelPlaneMatrixInverse:M,symbol:zt,fontSize:gn,flip:!0,keepUpright:j,glyphOffsetArray:T.glyphOffsetArray,dynamicLayoutVertexArray:ot,aspectRatio:Et,rotateToLine:$}).notEnoughRoom)&&ji(zt.numGlyphs,ot)}c?T.text.dynamicLayoutVertexBuffer.updateData(ot):T.icon.dynamicLayoutVertexBuffer.updateData(ot)}function En(T,l,c,C,M,R,j,$){const te=R.glyphStartIndex+R.numGlyphs,oe=R.lineStartIndex,be=R.lineStartIndex+R.lineLength,Ee=l.getoffsetX(R.glyphStartIndex),Ie=l.getoffsetX(te-1),qe=co(T*Ee,c,C,M,R.segment,oe,be,$,j);if(!qe)return null;const Ve=co(T*Ie,c,C,M,R.segment,oe,be,$,j);return Ve?$.projectionCache.anyProjectionOccluded?null:{first:qe,last:Ve}:null}function lr(T,l,c,C){return T===s.ai.horizontal&&Math.abs(c.y-l.y)>Math.abs(c.x-l.x)*C?{useVertical:!0}:(T===s.ai.vertical?l.y<c.y:l.x>c.x)?{needsFlipping:!0}:null}function wr(T){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:c,symbol:C,fontSize:M,flip:R,keepUpright:j,glyphOffsetArray:$,dynamicLayoutVertexArray:te,aspectRatio:oe,rotateToLine:be}=T,Ee=M/24,Ie=C.lineOffsetX*Ee,qe=C.lineOffsetY*Ee;let Ve;if(C.numGlyphs>1){const At=C.glyphStartIndex+C.numGlyphs,ot=C.lineStartIndex,ct=C.lineStartIndex+C.lineLength,yt=En(Ee,$,Ie,qe,R,C,be,l);if(!yt)return{notEnoughRoom:!0};const Et=Br(yt.first.point.x,yt.first.point.y,l,c),Tt=Br(yt.last.point.x,yt.last.point.y,l,c);if(j&&!R){const Rt=lr(C.writingMode,Et,Tt,oe);if(Rt)return Rt}Ve=[yt.first];for(let Rt=C.glyphStartIndex+1;Rt<At-1;Rt++)Ve.push(co(Ee*$.getoffsetX(Rt),Ie,qe,R,C.segment,ot,ct,l,be));Ve.push(yt.last)}else{if(j&&!R){const ot=Dn(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,ct=C.lineStartIndex+C.segment+1,yt=new s.P(l.lineVertexArray.getx(ct),l.lineVertexArray.gety(ct)),Et=Dn(yt.x,yt.y,l),Tt=Et.signedDistanceFromCamera>0?Et.point:on(l.tileAnchorPoint,yt,ot,1,l),Rt=Br(ot.x,ot.y,l,c),zt=Br(Tt.x,Tt.y,l,c),Pt=lr(C.writingMode,Rt,zt,oe);if(Pt)return Pt}const At=co(Ee*$.getoffsetX(C.glyphStartIndex),Ie,qe,R,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,l,be);if(!At||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ve=[At]}for(const At of Ve)s.ak(te,At.point,At.angle);return{}}function on(T,l,c,C,M){const R=T.add(T.sub(l)._unit()),j=Dn(R.x,R.y,M).point,$=c.sub(j);return c.add($._mult(C/$.mag()))}function zn(T,l,c){const C=l.projectionCache;if(C.projections[T])return C.projections[T];const M=new s.P(l.lineVertexArray.getx(T),l.lineVertexArray.gety(T)),R=Dn(M.x,M.y,l);if(R.signedDistanceFromCamera>0)return C.projections[T]=R.point,C.anyProjectionOccluded=C.anyProjectionOccluded||R.isOccluded,R.point;const j=T-c.direction;return on(c.distanceFromAnchor===0?l.tileAnchorPoint:new s.P(l.lineVertexArray.getx(j),l.lineVertexArray.gety(j)),M,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,l)}function Dn(T,l,c){const C=T+c.translation[0],M=l+c.translation[1];let R;return c.pitchWithMap?(R=Zt(C,M,c.pitchedLabelPlaneMatrix,c.getElevation),R.isOccluded=!1):(R=c.transform.projectTileCoordinates(C,M,c.unwrappedTileID,c.getElevation),R.point.x=(.5*R.point.x+.5)*c.width,R.point.y=(.5*-R.point.y+.5)*c.height),R}function Br(T,l,c,C){if(c.pitchWithMap){const M=[T,l,0,1];return s.al(M,M,C),c.transform.projectTileCoordinates(M[0]/M[3],M[1]/M[3],c.unwrappedTileID,c.getElevation).point}return{x:T/c.width*2-1,y:l/c.height*2-1}}function xr(T,l,c){return c.transform.projectTileCoordinates(T,l,c.unwrappedTileID,c.getElevation)}function Rr(T,l,c){return T._unit()._perp()._mult(l*c)}function rr(T,l,c,C,M,R,j,$,te){if($.projectionCache.offsets[T])return $.projectionCache.offsets[T];const oe=c.add(l);if(T+te.direction<C||T+te.direction>=M)return $.projectionCache.offsets[T]=oe,oe;const be=zn(T+te.direction,$,te),Ee=Rr(be.sub(c),j,te.direction),Ie=c.add(Ee),qe=be.add(Ee);return $.projectionCache.offsets[T]=s.am(R,oe,Ie,qe)||oe,$.projectionCache.offsets[T]}function co(T,l,c,C,M,R,j,$,te){const oe=C?T-l:T+l;let be=oe>0?1:-1,Ee=0;C&&(be*=-1,Ee=Math.PI),be<0&&(Ee+=Math.PI);let Ie,qe=be>0?R+M:R+M+1;$.projectionCache.cachedAnchorPoint?Ie=$.projectionCache.cachedAnchorPoint:(Ie=Dn($.tileAnchorPoint.x,$.tileAnchorPoint.y,$).point,$.projectionCache.cachedAnchorPoint=Ie);let Ve,At,ot=Ie,ct=Ie,yt=0,Et=0;const Tt=Math.abs(oe),Rt=[];let zt;for(;yt+Et<=Tt;){if(qe+=be,qe<R||qe>=j)return null;yt+=Et,ct=ot,At=Ve;const Ht={absOffsetX:Tt,direction:be,distanceFromAnchor:yt,previousVertex:ct};if(ot=zn(qe,$,Ht),c===0)Rt.push(ct),zt=ot.sub(ct);else{let vn;const _n=ot.sub(ct);vn=_n.mag()===0?Rr(zn(qe+be,$,Ht).sub(ot),c,be):Rr(_n,c,be),At||(At=ct.add(vn)),Ve=rr(qe,vn,ot,R,j,At,c,$,Ht),Rt.push(At),zt=Ve.sub(At)}Et=zt.mag()}const Pt=zt._mult((Tt-yt)/Et)._add(At||ct),tn=Ee+Math.atan2(ot.y-ct.y,ot.x-ct.x);return Rt.push(Pt),{point:Pt,angle:te?tn:0,path:Rt}}const $a=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ji(T,l){for(let c=0;c<T;c++){const C=l.length;l.resize(C+4),l.float32.set($a,3*C)}}function ui(T,l,c){const C=l[0],M=l[1];return T[0]=c[0]*C+c[4]*M+c[12],T[1]=c[1]*C+c[5]*M+c[13],T[3]=c[3]*C+c[7]*M+c[15],T}const Vi=100;class as{constructor(l,c=new pt(l.width+200,l.height+200,25),C=new pt(l.width+200,l.height+200,25)){this.transform=l,this.grid=c,this.ignoredGrid=C,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Vi,this.screenBottomBoundary=l.height+Vi,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,c,C,M,R,j,$,te,oe,be,Ee,Ie){const qe=this.projectAndGetPerspectiveRatio(l.anchorPointX+te[0],l.anchorPointY+te[1],R,be,Ie),Ve=C*qe.perspectiveRatio;let At;if(j||$)At=this._projectCollisionBox(l,Ve,M,R,j,$,te,qe,be,Ee,Ie);else{const zt=qe.x+(Ee?Ee.x*Ve:0),Pt=qe.y+(Ee?Ee.y*Ve:0);At={allPointsOccluded:!1,box:[zt+l.x1*Ve,Pt+l.y1*Ve,zt+l.x2*Ve,Pt+l.y2*Ve]}}const[ot,ct,yt,Et]=At.box,Tt=j?At.allPointsOccluded:qe.isOccluded;let Rt=Tt;return Rt||(Rt=qe.perspectiveRatio<this.perspectiveRatioCutoff),Rt||(Rt=!this.isInsideGrid(ot,ct,yt,Et)),Rt||c!=="always"&&this.grid.hitTest(ot,ct,yt,Et,c,oe)?{box:[ot,ct,yt,Et],placeable:!1,offscreen:!1,occluded:Tt}:{box:[ot,ct,yt,Et],placeable:!0,offscreen:this.isOffscreen(ot,ct,yt,Et),occluded:Tt}}placeCollisionCircles(l,c,C,M,R,j,$,te,oe,be,Ee,Ie,qe,Ve){const At=[],ot=new s.P(c.anchorX,c.anchorY),ct=this.getPerspectiveRatio(ot.x,ot.y,j,Ve),yt=(oe?R*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,j)/ct:R*ct)/s.as,Et={getElevation:Ve,pitchedLabelPlaneMatrix:$,lineVertexArray:C,pitchWithMap:oe,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ot,unwrappedTileID:j,width:this.transform.width,height:this.transform.height,translation:qe},Tt=En(yt,M,c.lineOffsetX*yt,c.lineOffsetY*yt,!1,c,!1,Et);let Rt=!1,zt=!1,Pt=!0;if(Tt){const tn=.5*Ee*ct+Ie,Ht=new s.P(-100,-100),vn=new s.P(this.screenRightBoundary,this.screenBottomBoundary),_n=new Ne,gn=Tt.first,On=Tt.last;let Un=[];for(let Bi=gn.path.length-1;Bi>=1;Bi--)Un.push(gn.path[Bi]);for(let Bi=1;Bi<On.path.length;Bi++)Un.push(On.path[Bi]);const wn=2.5*tn;if(oe){const Bi=this.projectPathToScreenSpace(Un,Et);Un=Bi.some($i=>$i.signedDistanceFromCamera<=0)?[]:Bi.map($i=>$i.point)}let kr=[];if(Un.length>0){const Bi=Un[0].clone(),$i=Un[0].clone();for(let Bo=1;Bo<Un.length;Bo++)Bi.x=Math.min(Bi.x,Un[Bo].x),Bi.y=Math.min(Bi.y,Un[Bo].y),$i.x=Math.max($i.x,Un[Bo].x),$i.y=Math.max($i.y,Un[Bo].y);kr=Bi.x>=Ht.x&&$i.x<=vn.x&&Bi.y>=Ht.y&&$i.y<=vn.y?[Un]:$i.x<Ht.x||Bi.x>vn.x||$i.y<Ht.y||Bi.y>vn.y?[]:s.ao([Un],Ht.x,Ht.y,vn.x,vn.y)}for(const Bi of kr){_n.reset(Bi,.25*tn);let $i=0;$i=_n.length<=.5*tn?1:Math.ceil(_n.paddedLength/wn)+1;for(let Bo=0;Bo<$i;Bo++){const Si=Bo/Math.max($i-1,1),zo=_n.lerp(Si),jo=zo.x+Vi,xo=zo.y+Vi;At.push(jo,xo,tn,0);const yo=jo-tn,Oa=xo-tn,No=jo+tn,hs=xo+tn;if(Pt=Pt&&this.isOffscreen(yo,Oa,No,hs),zt=zt||this.isInsideGrid(yo,Oa,No,hs),l!=="always"&&this.grid.hitTestCircle(jo,xo,tn,l,be)&&(Rt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:Rt}}}}return{circles:!te&&Rt||!zt||ct<this.perspectiveRatioCutoff?[]:At,offscreen:Pt,collisionDetected:Rt}}projectPathToScreenSpace(l,c){const C=function(M,R){const j=s.H();return s.an(j,R.pitchedLabelPlaneMatrix),M.map($=>{const te=Zt($.x,$.y,j,R.getElevation),oe=R.transform.projectTileCoordinates(te.point.x,te.point.y,R.unwrappedTileID,R.getElevation);return oe.point.x=(.5*oe.point.x+.5)*R.width,oe.point.y=(.5*-oe.point.y+.5)*R.height,oe})}(l,c);return function(M){let R=0,j=0,$=0,te=0;for(let oe=0;oe<M.length;oe++)M[oe].isOccluded?($=oe+1,te=0):(te++,te>j&&(j=te,R=$));return M.slice(R,R+j)}(C)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let C=1/0,M=1/0,R=-1/0,j=-1/0;for(const be of l){const Ee=new s.P(be.x+Vi,be.y+Vi);C=Math.min(C,Ee.x),M=Math.min(M,Ee.y),R=Math.max(R,Ee.x),j=Math.max(j,Ee.y),c.push(Ee)}const $=this.grid.query(C,M,R,j).concat(this.ignoredGrid.query(C,M,R,j)),te={},oe={};for(const be of $){const Ee=be.key;if(te[Ee.bucketInstanceId]===void 0&&(te[Ee.bucketInstanceId]={}),te[Ee.bucketInstanceId][Ee.featureIndex])continue;const Ie=[new s.P(be.x1,be.y1),new s.P(be.x2,be.y1),new s.P(be.x2,be.y2),new s.P(be.x1,be.y2)];s.ap(c,Ie)&&(te[Ee.bucketInstanceId][Ee.featureIndex]=!0,oe[Ee.bucketInstanceId]===void 0&&(oe[Ee.bucketInstanceId]=[]),oe[Ee.bucketInstanceId].push(Ee.featureIndex))}return oe}insertCollisionBox(l,c,C,M,R,j){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:R,collisionGroupID:j,overlapMode:c},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,c,C,M,R,j){const $=C?this.ignoredGrid:this.grid,te={bucketInstanceId:M,featureIndex:R,collisionGroupID:j,overlapMode:c};for(let oe=0;oe<l.length;oe+=4)$.insertCircle(te,l[oe],l[oe+1],l[oe+2])}projectAndGetPerspectiveRatio(l,c,C,M,R){if(R){let j;M?(j=[l,c,M(l,c),1],s.al(j,j,R)):(j=[l,c,0,1],ui(j,j,R));const $=j[3];return{x:(j[0]/$+1)/2*this.transform.width+Vi,y:(-j[1]/$+1)/2*this.transform.height+Vi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/$*.5,isOccluded:!1,signedDistanceFromCamera:$}}{const j=this.transform.projectTileCoordinates(l,c,C,M);return{x:(j.point.x+1)/2*this.transform.width+Vi,y:(1-j.point.y)/2*this.transform.height+Vi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/j.signedDistanceFromCamera*.5,isOccluded:j.isOccluded,signedDistanceFromCamera:j.signedDistanceFromCamera}}}getPerspectiveRatio(l,c,C,M){const R=this.transform.projectTileCoordinates(l,c,C,M);return .5+this.transform.cameraToCenterDistance/R.signedDistanceFromCamera*.5}isOffscreen(l,c,C,M){return C<Vi||l>=this.screenRightBoundary||M<Vi||c>this.screenBottomBoundary}isInsideGrid(l,c,C,M){return C>=0&&l<this.gridRightBoundary&&M>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const l=s.aq([]);return s.J(l,l,[-100,-100,0]),l}_projectCollisionBox(l,c,C,M,R,j,$,te,oe,be,Ee){let Ie=1,qe=0,Ve=0,At=1;const ot=l.anchorPointX+$[0],ct=l.anchorPointY+$[1];if(j&&!R){const Un=this.projectAndGetPerspectiveRatio(ot+1,ct,M,oe,Ee),wn=Un.x-te.x,kr=Math.atan((Un.y-te.y)/wn)+(wn<0?Math.PI:0),Bi=Math.sin(kr),$i=Math.cos(kr);Ie=$i,qe=Bi,Ve=-Bi,At=$i}else if(!j&&R){const Un=rn(this.transform);Ie=Un.vecEast[0],qe=Un.vecEast[1],Ve=Un.vecSouth[0],At=Un.vecSouth[1]}let yt=te.x,Et=te.y,Tt=c;R&&(yt=ot,Et=ct,Tt=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),Tt*=this.transform.getPitchedTextCorrection(ot,ct,M),be||(Tt*=s.ab(.5+te.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),be&&(yt+=Ie*be.x*Tt+Ve*be.y*Tt,Et+=qe*be.x*Tt+At*be.y*Tt);const Rt=l.x1*Tt,zt=l.x2*Tt,Pt=(Rt+zt)/2,tn=l.y1*Tt,Ht=l.y2*Tt,vn=(tn+Ht)/2,_n=[{offsetX:Rt,offsetY:tn},{offsetX:Pt,offsetY:tn},{offsetX:zt,offsetY:tn},{offsetX:zt,offsetY:vn},{offsetX:zt,offsetY:Ht},{offsetX:Pt,offsetY:Ht},{offsetX:Rt,offsetY:Ht},{offsetX:Rt,offsetY:vn}];let gn=[];for(const{offsetX:Un,offsetY:wn}of _n)gn.push(new s.P(yt+Ie*Un+Ve*wn,Et+qe*Un+At*wn));let On=!1;if(R){const Un=gn.map(wn=>this.projectAndGetPerspectiveRatio(wn.x,wn.y,M,oe,Ee));On=Un.some(wn=>!wn.isOccluded),gn=Un.map(wn=>new s.P(wn.x,wn.y))}else On=!0;return{box:s.ar(gn),allPointsOccluded:!On}}}class Ni{constructor(l,c,C,M){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?c:-c))):M&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class ll{constructor(l,c,C,M,R){this.text=new Ni(l?l.text:null,c,C,R),this.icon=new Ni(l?l.icon:null,c,M,R)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ul{constructor(l,c,C){this.text=l,this.icon=c,this.skipFade=C}}class ts{constructor(l,c,C,M,R){this.bucketInstanceId=l,this.featureIndex=c,this.sourceLayerIndex=C,this.bucketIndex=M,this.tileID=R}}class Aa{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const c=++this.maxGroupID;this.collisionGroups[l]={ID:c,predicate:C=>C.collisionGroupID===c}}return this.collisionGroups[l]}}function Al(T,l,c,C,M){const{horizontalAlign:R,verticalAlign:j}=s.ay(T);return new s.P(-(R-.5)*l+C[0]*M,-(j-.5)*c+C[1]*M)}class ao{constructor(l,c,C,M,R){this.transform=l.clone(),this.terrain=c,this.collisionIndex=new as(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new Aa(M),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const c=this.terrain;return c?(C,M)=>c.getElevation(l,C,M):null}getBucketParts(l,c,C,M){const R=C.getBucket(c),j=C.latestFeatureIndex;if(!R||!j||c.id!==R.layerIds[0])return;const $=C.collisionBoxArray,te=R.layers[0].layout,oe=R.layers[0].paint,be=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Ee=C.tileSize/s.X,Ie=C.tileID.toUnwrapped(),qe=te.get("text-rotation-alignment")==="map",Ve=s.at(C,1,this.transform.zoom),At=s.au(this.collisionIndex.transform,C,oe.get("text-translate"),oe.get("text-translate-anchor")),ot=s.au(this.collisionIndex.transform,C,oe.get("icon-translate"),oe.get("icon-translate-anchor")),ct=Ot(qe,this.transform,Ve);this.retainedQueryData[R.bucketInstanceId]=new ts(R.bucketInstanceId,j,R.sourceLayerIndex,R.index,C.tileID);const yt={bucket:R,layout:te,translationText:At,translationIcon:ot,unwrappedTileID:Ie,pitchedLabelPlaneMatrix:ct,scale:be,textPixelRatio:Ee,holdingForFade:C.holdingForFade(),collisionBoxArray:$,partiallyEvaluatedTextSize:s.ah(R.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(M)for(const Et of R.sortKeyRanges){const{sortKey:Tt,symbolInstanceStart:Rt,symbolInstanceEnd:zt}=Et;l.push({sortKey:Tt,symbolInstanceStart:Rt,symbolInstanceEnd:zt,parameters:yt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:yt})}attemptAnchorPlacement(l,c,C,M,R,j,$,te,oe,be,Ee,Ie,qe,Ve,At,ot,ct,yt,Et,Tt){const Rt=s.av[l.textAnchor],zt=[l.textOffset0,l.textOffset1],Pt=Al(Rt,C,M,zt,R),tn=this.collisionIndex.placeCollisionBox(c,Ie,te,oe,be,$,j,ot,Ee.predicate,Et,Pt,Tt);if((!yt||this.collisionIndex.placeCollisionBox(yt,Ie,te,oe,be,$,j,ct,Ee.predicate,Et,Pt,Tt).placeable)&&tn.placeable){let Ht;if(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(Ht=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[qe.crossTileID]={textOffset:zt,width:C,height:M,anchor:Rt,textBoxScale:R,prevAnchor:Ht},this.markUsedJustification(Ve,Rt,qe,At),Ve.allowVerticalPlacement&&(this.markUsedOrientation(Ve,At,qe),this.placedOrientations[qe.crossTileID]=At),{shift:Pt,placedGlyphBoxes:tn}}}placeLayerBucketPart(l,c,C){const{bucket:M,layout:R,translationText:j,translationIcon:$,unwrappedTileID:te,pitchedLabelPlaneMatrix:oe,textPixelRatio:be,holdingForFade:Ee,collisionBoxArray:Ie,partiallyEvaluatedTextSize:qe,collisionGroup:Ve}=l.parameters,At=R.get("text-optional"),ot=R.get("icon-optional"),ct=s.aw(R,"text-overlap","text-allow-overlap"),yt=ct==="always",Et=s.aw(R,"icon-overlap","icon-allow-overlap"),Tt=Et==="always",Rt=R.get("text-rotation-alignment")==="map",zt=R.get("text-pitch-alignment")==="map",Pt=R.get("icon-text-fit")!=="none",tn=R.get("symbol-z-order")==="viewport-y",Ht=yt&&(Tt||!M.hasIconData()||ot),vn=Tt&&(yt||!M.hasTextData()||At);!M.collisionArrays&&Ie&&M.deserializeCollisionBoxes(Ie);const _n=this.retainedQueryData[M.bucketInstanceId].tileID,gn=this._getTerrainElevationFunc(_n),On=this.transform.getFastPathSimpleProjectionMatrix(_n),Un=(wn,kr,Bi)=>{var $i,Bo;if(c[wn.crossTileID])return;if(Ee)return void(this.placements[wn.crossTileID]=new ul(!1,!1,!1));let Si=!1,zo=!1,jo=!0,xo=null,yo={box:null,placeable:!1,offscreen:null,occluded:!1},Oa={box:null,placeable:!1,offscreen:null},No=null,hs=null,ja=null,$u=0,fl=0,pl=0;kr.textFeatureIndex?$u=kr.textFeatureIndex:wn.useRuntimeCollisionCircles&&($u=wn.featureIndex),kr.verticalTextFeatureIndex&&(fl=kr.verticalTextFeatureIndex);const uu=kr.textBox;if(uu){const Js=bs=>{let Qs=s.ai.horizontal;if(M.allowVerticalPlacement&&!bs&&this.prevPlacement){const el=this.prevPlacement.placedOrientations[wn.crossTileID];el&&(this.placedOrientations[wn.crossTileID]=el,Qs=el,this.markUsedOrientation(M,Qs,wn))}return Qs},ml=(bs,Qs)=>{if(M.allowVerticalPlacement&&wn.numVerticalGlyphVertices>0&&kr.verticalTextBox){for(const el of M.writingModes)if(el===s.ai.vertical?(yo=Qs(),Oa=yo):yo=bs(),yo&&yo.placeable)break}else yo=bs()},sa=wn.textAnchorOffsetStartIndex,Pl=wn.textAnchorOffsetEndIndex;if(Pl===sa){const bs=(Qs,el)=>{const tl=this.collisionIndex.placeCollisionBox(Qs,ct,be,_n,te,zt,Rt,j,Ve.predicate,gn,void 0,On);return tl&&tl.placeable&&(this.markUsedOrientation(M,el,wn),this.placedOrientations[wn.crossTileID]=el),tl};ml(()=>bs(uu,s.ai.horizontal),()=>{const Qs=kr.verticalTextBox;return M.allowVerticalPlacement&&wn.numVerticalGlyphVertices>0&&Qs?bs(Qs,s.ai.vertical):{box:null,offscreen:null}}),Js(yo&&yo.placeable)}else{let bs=s.av[(Bo=($i=this.prevPlacement)===null||$i===void 0?void 0:$i.variableOffsets[wn.crossTileID])===null||Bo===void 0?void 0:Bo.anchor];const Qs=(tl,Mh,Bd)=>{const Od=tl.x2-tl.x1,Sh=tl.y2-tl.y1,ic=wn.textBoxScale,Id=Pt&&Et==="never"?Mh:null;let Ia=null,Au=ct==="never"?1:2,Eh="never";bs&&Au++;for(let _p=0;_p<Au;_p++){for(let Ec=sa;Ec<Pl;Ec++){const kA=M.textAnchorOffsets.get(Ec);if(bs&&kA.textAnchor!==bs)continue;const Na=this.attemptAnchorPlacement(kA,tl,Od,Sh,ic,Rt,zt,be,_n,te,Ve,Eh,wn,M,Bd,j,$,Id,gn);if(Na&&(Ia=Na.placedGlyphBoxes,Ia&&Ia.placeable))return Si=!0,xo=Na.shift,Ia}bs?bs=null:Eh=ct}return C&&!Ia&&(Ia={box:this.collisionIndex.placeCollisionBox(uu,"always",be,_n,te,zt,Rt,j,Ve.predicate,gn,void 0,On).box,offscreen:!1,placeable:!1,occluded:!1}),Ia};ml(()=>Qs(uu,kr.iconBox,s.ai.horizontal),()=>{const tl=kr.verticalTextBox;return M.allowVerticalPlacement&&(!yo||!yo.placeable)&&wn.numVerticalGlyphVertices>0&&tl?Qs(tl,kr.verticalIconBox,s.ai.vertical):{box:null,occluded:!0,offscreen:null}}),yo&&(Si=yo.placeable,jo=yo.offscreen);const el=Js(yo&&yo.placeable);if(!Si&&this.prevPlacement){const tl=this.prevPlacement.variableOffsets[wn.crossTileID];tl&&(this.variableOffsets[wn.crossTileID]=tl,this.markUsedJustification(M,tl.anchor,wn,el))}}}if(No=yo,Si=No&&No.placeable,jo=No&&No.offscreen,wn.useRuntimeCollisionCircles){const Js=M.text.placedSymbolArray.get(wn.centerJustifiedTextSymbolIndex),ml=s.aj(M.textSizeData,qe,Js),sa=R.get("text-padding");hs=this.collisionIndex.placeCollisionCircles(ct,Js,M.lineVertexArray,M.glyphOffsetArray,ml,te,oe,C,zt,Ve.predicate,wn.collisionCircleDiameter,sa,j,gn),hs.circles.length&&hs.collisionDetected&&!C&&s.w("Collisions detected, but collision boxes are not shown"),Si=yt||hs.circles.length>0&&!hs.collisionDetected,jo=jo&&hs.offscreen}if(kr.iconFeatureIndex&&(pl=kr.iconFeatureIndex),kr.iconBox){const Js=ml=>this.collisionIndex.placeCollisionBox(ml,Et,be,_n,te,zt,Rt,$,Ve.predicate,gn,Pt&&xo?xo:void 0,On);Oa&&Oa.placeable&&kr.verticalIconBox?(ja=Js(kr.verticalIconBox),zo=ja.placeable):(ja=Js(kr.iconBox),zo=ja.placeable),jo=jo&&ja.offscreen}const OA=At||wn.numHorizontalGlyphVertices===0&&wn.numVerticalGlyphVertices===0,IA=ot||wn.numIconVertices===0;OA||IA?IA?OA||(zo=zo&&Si):Si=zo&&Si:zo=Si=zo&&Si;const Vu=zo&&ja.placeable;if(Si&&No.placeable&&this.collisionIndex.insertCollisionBox(No.box,ct,R.get("text-ignore-placement"),M.bucketInstanceId,Oa&&Oa.placeable&&fl?fl:$u,Ve.ID),Vu&&this.collisionIndex.insertCollisionBox(ja.box,Et,R.get("icon-ignore-placement"),M.bucketInstanceId,pl,Ve.ID),hs&&Si&&this.collisionIndex.insertCollisionCircles(hs.circles,ct,R.get("text-ignore-placement"),M.bucketInstanceId,$u,Ve.ID),C&&this.storeCollisionData(M.bucketInstanceId,Bi,kr,No,ja,hs),wn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[wn.crossTileID]=new ul((Si||Ht)&&!(No!=null&&No.occluded),(zo||vn)&&!(ja!=null&&ja.occluded),jo||M.justReloaded),c[wn.crossTileID]=!0};if(tn){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const wn=M.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let kr=wn.length-1;kr>=0;--kr){const Bi=wn[kr];Un(M.symbolInstances.get(Bi),M.collisionArrays[Bi],Bi)}}else for(let wn=l.symbolInstanceStart;wn<l.symbolInstanceEnd;wn++)Un(M.symbolInstances.get(wn),M.collisionArrays[wn],wn);M.justReloaded=!1}storeCollisionData(l,c,C,M,R,j){if(C.textBox||C.iconBox){let $,te;this.collisionBoxArrays.has(l)?$=this.collisionBoxArrays.get(l):($=new Map,this.collisionBoxArrays.set(l,$)),$.has(c)?te=$.get(c):(te={text:null,icon:null},$.set(c,te)),C.textBox&&(te.text=M.box),C.iconBox&&(te.icon=R.box)}if(j){let $=this.collisionCircleArrays[l];$===void 0&&($=this.collisionCircleArrays[l]=[]);for(let te=0;te<j.circles.length;te+=4)$.push(j.circles[te+0]-Vi),$.push(j.circles[te+1]-Vi),$.push(j.circles[te+2]),$.push(j.collisionDetected?1:0)}}markUsedJustification(l,c,C,M){let R;R=M===s.ai.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[s.ax(c)];const j=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const $ of j)$>=0&&(l.text.placedSymbolArray.get($).crossTileID=R>=0&&$!==R?0:C.crossTileID)}markUsedOrientation(l,c,C){const M=c===s.ai.horizontal||c===s.ai.horizontalOnly?c:0,R=c===s.ai.vertical?c:0,j=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const $ of j)l.text.placedSymbolArray.get($).placedOrientation=M;C.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=R)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let C=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const M=c?c.symbolFadeChange(l):1,R=c?c.opacities:{},j=c?c.variableOffsets:{},$=c?c.placedOrientations:{};for(const te in this.placements){const oe=this.placements[te],be=R[te];be?(this.opacities[te]=new ll(be,M,oe.text,oe.icon),C=C||oe.text!==be.text.placed||oe.icon!==be.icon.placed):(this.opacities[te]=new ll(null,M,oe.text,oe.icon,oe.skipFade),C=C||oe.text||oe.icon)}for(const te in R){const oe=R[te];if(!this.opacities[te]){const be=new ll(oe,M,!1,!1);be.isHidden()||(this.opacities[te]=be,C=C||oe.text.placed||oe.icon.placed)}}for(const te in j)this.variableOffsets[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.variableOffsets[te]=j[te]);for(const te in $)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=$[te]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:l)}updateLayerOpacities(l,c){const C={};for(const M of c){const R=M.getBucket(l);R&&M.latestFeatureIndex&&l.id===R.layerIds[0]&&this.updateBucketOpacities(R,M.tileID,C,M.collisionBoxArray)}}updateBucketOpacities(l,c,C,M){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const R=l.layers[0],j=R.layout,$=new ll(null,0,!1,!1,!0),te=j.get("text-allow-overlap"),oe=j.get("icon-allow-overlap"),be=R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ee=j.get("text-rotation-alignment")==="map",Ie=j.get("text-pitch-alignment")==="map",qe=j.get("icon-text-fit")!=="none",Ve=new ll(null,0,te&&(oe||!l.hasIconData()||j.get("icon-optional")),oe&&(te||!l.hasTextData()||j.get("text-optional")),!0);!l.collisionArrays&&M&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(M);const At=(ct,yt,Et)=>{for(let Tt=0;Tt<yt/4;Tt++)ct.opacityVertexArray.emplaceBack(Et);ct.hasVisibleVertices=ct.hasVisibleVertices||Et!==pn},ot=this.collisionBoxArrays.get(l.bucketInstanceId);for(let ct=0;ct<l.symbolInstances.length;ct++){const yt=l.symbolInstances.get(ct),{numHorizontalGlyphVertices:Et,numVerticalGlyphVertices:Tt,crossTileID:Rt}=yt;let zt=this.opacities[Rt];C[Rt]?zt=$:zt||(zt=Ve,this.opacities[Rt]=zt),C[Rt]=!0;const Pt=yt.numIconVertices>0,tn=this.placedOrientations[yt.crossTileID],Ht=tn===s.ai.vertical,vn=tn===s.ai.horizontal||tn===s.ai.horizontalOnly;if(Et>0||Tt>0){const gn=Ct(zt.text);At(l.text,Et,Ht?pn:gn),At(l.text,Tt,vn?pn:gn);const On=zt.text.isHidden();[yt.rightJustifiedTextSymbolIndex,yt.centerJustifiedTextSymbolIndex,yt.leftJustifiedTextSymbolIndex].forEach(kr=>{kr>=0&&(l.text.placedSymbolArray.get(kr).hidden=On||Ht?1:0)}),yt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(yt.verticalPlacedTextSymbolIndex).hidden=On||vn?1:0);const Un=this.variableOffsets[yt.crossTileID];Un&&this.markUsedJustification(l,Un.anchor,yt,tn);const wn=this.placedOrientations[yt.crossTileID];wn&&(this.markUsedJustification(l,"left",yt,wn),this.markUsedOrientation(l,wn,yt))}if(Pt){const gn=Ct(zt.icon),On=!(qe&&yt.verticalPlacedIconSymbolIndex&&Ht);yt.placedIconSymbolIndex>=0&&(At(l.icon,yt.numIconVertices,On?gn:pn),l.icon.placedSymbolArray.get(yt.placedIconSymbolIndex).hidden=zt.icon.isHidden()),yt.verticalPlacedIconSymbolIndex>=0&&(At(l.icon,yt.numVerticalIconVertices,On?pn:gn),l.icon.placedSymbolArray.get(yt.verticalPlacedIconSymbolIndex).hidden=zt.icon.isHidden())}const _n=ot&&ot.has(ct)?ot.get(ct):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const gn=l.collisionArrays[ct];if(gn){let On=new s.P(0,0);if(gn.textBox||gn.verticalTextBox){let Un=!0;if(be){const wn=this.variableOffsets[Rt];wn?(On=Al(wn.anchor,wn.width,wn.height,wn.textOffset,wn.textBoxScale),Ee&&On._rotate(Ie?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Un=!1}if(gn.textBox||gn.verticalTextBox){let wn;gn.textBox&&(wn=Ht),gn.verticalTextBox&&(wn=vn),Pu(l.textCollisionBox.collisionVertexArray,zt.text.placed,!Un||wn,_n.text,On.x,On.y)}}if(gn.iconBox||gn.verticalIconBox){const Un=!!(!vn&&gn.verticalIconBox);let wn;gn.iconBox&&(wn=Un),gn.verticalIconBox&&(wn=!Un),Pu(l.iconCollisionBox.collisionVertexArray,zt.icon.placed,wn,_n.icon,qe?On.x:0,qe?On.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,c){const C=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*C>l}setStale(){this.stale=!0}}function Pu(T,l,c,C,M,R){C&&C.length!==0||(C=[0,0,0,0]);const j=C[0]-Vi,$=C[1]-Vi,te=C[2]-Vi,oe=C[3]-Vi;T.emplaceBack(l?1:0,c?1:0,M||0,R||0,j,$),T.emplaceBack(l?1:0,c?1:0,M||0,R||0,te,$),T.emplaceBack(l?1:0,c?1:0,M||0,R||0,te,oe),T.emplaceBack(l?1:0,c?1:0,M||0,R||0,j,oe)}const tu=Math.pow(2,25),so=Math.pow(2,24),Kr=Math.pow(2,17),Va=Math.pow(2,16),Ts=Math.pow(2,9),ia=Math.pow(2,8),We=Math.pow(2,1);function Ct(T){if(T.opacity===0&&!T.placed)return 0;if(T.opacity===1&&T.placed)return 4294967295;const l=T.placed?1:0,c=Math.floor(127*T.opacity);return c*tu+l*so+c*Kr+l*Va+c*Ts+l*ia+c*We+l}const pn=0;class Nn{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,c,C,M,R){const j=this._bucketParts;for(;this._currentTileIndex<l.length;)if(c.getBucketParts(j,M,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,j.sort(($,te)=>$.sortKey-te.sortKey));this._currentPartIndex<j.length;)if(c.placeLayerBucketPart(j[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,R())return!0;return!1}}class An{constructor(l,c,C,M,R,j,$,te){this.placement=new ao(l,c,j,$,te),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(l,c,C){const M=S.now(),R=()=>!this._forceFullPlacement&&S.now()-M>2;for(;this._currentPlacementIndex>=0;){const j=c[l[this._currentPlacementIndex]],$=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=$)&&(!j.maxzoom||j.maxzoom>$)){if(this._inProgressLayer||(this._inProgressLayer=new Nn(j)),this._inProgressLayer.continuePlacement(C[j.source],this.placement,this._showCollisionBoxes,j,R))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const er=512/s.X/2;class Ti{constructor(l,c,C){this.tileID=l,this.bucketInstanceId=C,this._symbolsByKey={};const M=new Map;for(let R=0;R<c.length;R++){const j=c.get(R),$=j.key,te=M.get($);te?te.push(j):M.set($,[j])}for(const[R,j]of M){const $={positions:j.map(te=>({x:Math.floor(te.anchorX*er),y:Math.floor(te.anchorY*er)})),crossTileIDs:j.map(te=>te.crossTileID)};if($.positions.length>128){const te=new s.az($.positions.length,16,Uint16Array);for(const{x:oe,y:be}of $.positions)te.add(oe,be);te.finish(),delete $.positions,$.index=te}this._symbolsByKey[R]=$}}getScaledCoordinates(l,c){const{x:C,y:M,z:R}=this.tileID.canonical,{x:j,y:$,z:te}=c.canonical,oe=er/Math.pow(2,te-R),be=($*s.X+l.anchorY)*oe,Ee=M*s.X*er;return{x:Math.floor((j*s.X+l.anchorX)*oe-C*s.X*er),y:Math.floor(be-Ee)}}findMatches(l,c,C){const M=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let R=0;R<l.length;R++){const j=l.get(R);if(j.crossTileID)continue;const $=this._symbolsByKey[j.key];if(!$)continue;const te=this.getScaledCoordinates(j,c);if($.index){const oe=$.index.range(te.x-M,te.y-M,te.x+M,te.y+M).sort();for(const be of oe){const Ee=$.crossTileIDs[be];if(!C[Ee]){C[Ee]=!0,j.crossTileID=Ee;break}}}else if($.positions)for(let oe=0;oe<$.positions.length;oe++){const be=$.positions[oe],Ee=$.crossTileIDs[oe];if(Math.abs(be.x-te.x)<=M&&Math.abs(be.y-te.y)<=M&&!C[Ee]){C[Ee]=!0,j.crossTileID=Ee;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class ho{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const c=Math.round((l-this.lng)/360);if(c!==0)for(const C in this.indexes){const M=this.indexes[C],R={};for(const j in M){const $=M[j];$.tileID=$.tileID.unwrapTo($.tileID.wrap+c),R[$.tileID.key]=$}this.indexes[C]=R}this.lng=l}addBucket(l,c,C){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let R=0;R<c.symbolInstances.length;R++)c.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const M=this.usedCrossTileIDs[l.overscaledZ];for(const R in this.indexes){const j=this.indexes[R];if(Number(R)>l.overscaledZ)for(const $ in j){const te=j[$];te.tileID.isChildOf(l)&&te.findMatches(c.symbolInstances,l,M)}else{const $=j[l.scaledTo(Number(R)).key];$&&$.findMatches(c.symbolInstances,l,M)}}for(let R=0;R<c.symbolInstances.length;R++){const j=c.symbolInstances.get(R);j.crossTileID||(j.crossTileID=C.generate(),M[j.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Ti(l,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(l,c){for(const C of c.getCrossTileIDsLists())for(const M of C)delete this.usedCrossTileIDs[l][M]}removeStaleBuckets(l){let c=!1;for(const C in this.indexes){const M=this.indexes[C];for(const R in M)l[M[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,M[R]),delete M[R],c=!0)}return c}}class js{constructor(){this.layerIndexes={},this.crossTileIDs=new ho,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,c,C){let M=this.layerIndexes[l.id];M===void 0&&(M=this.layerIndexes[l.id]=new vs);let R=!1;const j={};M.handleWrapJump(C);for(const $ of c){const te=$.getBucket(l);te&&l.id===te.layerIds[0]&&(te.bucketInstanceId||(te.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket($.tileID,te,this.crossTileIDs)&&(R=!0),j[te.bucketInstanceId]=!0)}return M.removeStaleBuckets(j)&&(R=!0),R}pruneUnusedLayers(l){const c={};l.forEach(C=>{c[C]=!0});for(const C in this.layerIndexes)c[C]||delete this.layerIndexes[C]}}var vA="void main() {fragColor=vec4(1.0);}";const ri={prelude:wi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:wi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:wi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:wi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:wi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:wi(vA,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:wi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:wi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:wi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:wi(vA,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:wi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:wi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:wi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:wi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:wi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:wi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:wi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:wi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:wi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:wi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:wi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:wi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:wi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:wi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:wi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:wi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:wi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:wi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function wi(T,l){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=l.match(/in ([\w]+) ([\w]+)/g),M=T.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=R?R.concat(M):M,$={};return{fragmentSource:T=T.replace(c,(te,oe,be,Ee,Ie)=>($[Ie]=!0,oe==="define"?`
#ifndef HAS_UNIFORM_u_${Ie}
in ${be} ${Ee} ${Ie};
#else
uniform ${be} ${Ee} u_${Ie};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ie}
    ${be} ${Ee} ${Ie} = u_${Ie};
#endif
`)),vertexSource:l=l.replace(c,(te,oe,be,Ee,Ie)=>{const qe=Ee==="float"?"vec2":"vec4",Ve=Ie.match(/color/)?"color":qe;return $[Ie]?oe==="define"?`
#ifndef HAS_UNIFORM_u_${Ie}
uniform lowp float u_${Ie}_t;
in ${be} ${qe} a_${Ie};
out ${be} ${Ee} ${Ie};
#else
uniform ${be} ${Ee} u_${Ie};
#endif
`:Ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ie}
    ${Ie} = a_${Ie};
#else
    ${be} ${Ee} ${Ie} = u_${Ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ie}
    ${Ie} = unpack_mix_${Ve}(a_${Ie}, u_${Ie}_t);
#else
    ${be} ${Ee} ${Ie} = u_${Ie};
#endif
`:oe==="define"?`
#ifndef HAS_UNIFORM_u_${Ie}
uniform lowp float u_${Ie}_t;
in ${be} ${qe} a_${Ie};
#else
uniform ${be} ${Ee} u_${Ie};
#endif
`:Ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ie}
    ${be} ${Ee} ${Ie} = a_${Ie};
#else
    ${be} ${Ee} ${Ie} = u_${Ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ie}
    ${be} ${Ee} ${Ie} = unpack_mix_${Ve}(a_${Ie}, u_${Ie}_t);
#else
    ${be} ${Ee} ${Ie} = u_${Ie};
#endif
`}),staticAttributes:C,staticUniforms:j}}class Ha{constructor(l,c,C){this.vertexBuffer=l,this.indexBuffer=c,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ci=s.aA([{name:"a_pos",type:"Int16",components:2}]);const ca="#define PROJECTION_MERCATOR",iA="mercator";class ls{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return iA}get shaderDefine(){return ca}get shaderPreludeCode(){return ri.projectionMercator}get vertexShaderPreludeCode(){return ri.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aB.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,c,C,M,R){if(this._cachedMesh)return this._cachedMesh;const j=new s.aC;j.emplaceBack(0,0),j.emplaceBack(s.X,0),j.emplaceBack(0,s.X),j.emplaceBack(s.X,s.X);const $=l.createVertexBuffer(j,ci.members),te=s.aD.simpleSegment(0,0,4,2),oe=new s.aE;oe.emplaceBack(1,0,2),oe.emplaceBack(1,2,3);const be=l.createIndexBuffer(oe);return this._cachedMesh=new Ha($,be,te),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}function Dr(T,l){const c=s.ab(l.lat,-85.051129,s.aF);return new s.P(s.O(l.lng)*T,s.Q(c)*T)}function Ei(T,l){return new s.Y(l.x/T,l.y/T).toLngLat()}function Za(T){return T.cameraToCenterDistance*Math.min(.85*Math.tan(s.aa(90-T.pitch)),Math.tan(s.aa(89.25-T.pitch)))}function Ps(T,l){const c=T.canonical,C=l/s.aG(c.z),M=c.x+Math.pow(2,c.z)*T.wrap,R=s.aq(new Float64Array(16));return s.J(R,R,[M*C,c.y*C,0]),s.K(R,R,[C/s.X,C/s.X,1]),R}function Mo(T,l,c,C,M){const R=s.Y.fromLngLat(T,l),j=M*s.aH(1,T.lat),$=j*Math.cos(s.aa(c)),te=Math.sqrt(j*j-$*$),oe=te*Math.sin(s.aa(-C)),be=te*Math.cos(s.aa(-C));return new s.Y(R.x+oe,R.y+be,R.z+$)}class Ns{constructor(l=0,c=0,C=0,M=0){if(isNaN(l)||l<0||isNaN(c)||c<0||isNaN(C)||C<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=c,this.left=C,this.right=M}interpolate(l,c,C){return c.top!=null&&l.top!=null&&(this.top=s.y.number(l.top,c.top,C)),c.bottom!=null&&l.bottom!=null&&(this.bottom=s.y.number(l.bottom,c.bottom,C)),c.left!=null&&l.left!=null&&(this.left=s.y.number(l.left,c.left,C)),c.right!=null&&l.right!=null&&(this.right=s.y.number(l.right,c.right,C)),this}getCenter(l,c){const C=s.ab((this.left+l-this.right)/2,0,l),M=s.ab((this.top+c-this.bottom)/2,0,c);return new s.P(C,M)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Ns(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function du(T,l){if(!T.renderWorldCopies||T.lngRange)return;const c=l.lng-T.center.lng;l.lng+=c>180?-360:c<-180?360:0}function zl(T){return Math.max(0,Math.floor(T))}class ns{constructor(l,c,C,M,R,j){this._callbacks=l,this._tileSize=512,this._renderWorldCopies=j===void 0||!!j,this._minZoom=c||0,this._maxZoom=C||22,this._minPitch=M??0,this._maxPitch=R??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.N(0,0),this._elevation=0,this._zoom=0,this._tileZoom=zl(this._zoom),this._scale=s.aG(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ns,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,c,C){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=zl(this._zoom),this._scale=s.aG(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new Ns(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!C&&l.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const c=s.aI(l,-180,180)*Math.PI/180;var C,M,R,j,$,te,oe,be,Ee;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=g(),C=this._rotationMatrix,R=-this._bearingInRadians,j=(M=this._rotationMatrix)[0],$=M[1],te=M[2],oe=M[3],be=Math.sin(R),Ee=Math.cos(R),C[0]=j*Ee+te*be,C[1]=$*Ee+oe*be,C[2]=j*-be+te*Ee,C[3]=$*-be+oe*Ee)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const c=s.ab(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const c=l/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aJ(this._fovInRadians)}setFov(l){l=s.ab(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=s.aa(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const c=this.getConstrained(this._center,l).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=s.aG(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,c){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,c,C){this._unmodified=!1,this._edgeInsets.interpolate(l,c,C),this._constrain(),this._calcMatrices()}resize(l,c,C=!0){this._width=l,this._height=c,C&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Nt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,s.aF])}getConstrained(l,c){return this._callbacks.getConstrained(l,c)}getCameraQueryGeometry(l,c){if(c.length===1)return[c[0],l];{let C=l.x,M=l.y,R=l.x,j=l.y;for(const $ of c)C=Math.min(C,$.x),M=Math.min(M,$.y),R=Math.max(R,$.x),j=Math.max(j,$.y);return[new s.P(C,M),new s.P(R,M),new s.P(R,j),new s.P(C,j),new s.P(C,M)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:c,zoom:C}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(C),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=s.aq(new Float64Array(16));s.K(l,l,[this._width/2,-this._height/2,1]),s.J(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=s.aq(new Float64Array(16)),s.K(l,l,[1,-1,1]),s.J(l,l,[-1,-1,0]),s.K(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,c,C,M){const R=C!==void 0?C:this.bearing,j=M=M!==void 0?M:this.pitch,$=s.Y.fromLngLat(l,c),te=-Math.cos(s.aa(j)),oe=Math.sin(s.aa(j)),be=oe*Math.sin(s.aa(R)),Ee=-oe*Math.cos(s.aa(R));let Ie=this.elevation;const qe=c-Ie;let Ve;te*qe>=0||Math.abs(te)<.1?(Ve=1e4,Ie=c+Ve*te):Ve=-qe/te;let At,ot,ct=s.aK(1,$.y),yt=0;do{if(yt+=1,yt>10)break;ot=Ve/ct,At=new s.Y($.x+be*ot,$.y+Ee*ot),ct=1/At.meterInMercatorCoordinateUnits()}while(Math.abs(Ve-ot*ct)>1e-12);return{center:At.toLngLat(),elevation:Ie,zoom:s.a8(this.height/2/Math.tan(this.fovInRadians/2)/ot/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const c=s.aH(1,this.center.lat)*this.worldSize,C=this.cameraToCenterDistance/c,M=s.Y.fromLngLat(this.center,this.elevation),R=Mo(this.center,this.elevation,this.pitch,this.bearing,C);this._elevation=l;const j=this.calculateCenterFromCameraLngLatAlt(R.toLngLat(),s.aK(R.z,M.y),this.bearing,this.pitch);this._elevation=j.elevation,this._center=j.center,this.setZoom(j.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=s.aH(1,this.center.lat)*this.worldSize;return Mo(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const c=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/c,l.canonical.y/c,1/c/s.X,1/c/s.X]}}class Vs{constructor(l,c){this.min=l,this.max=c,this.center=s.aL([],s.aM([],this.min,this.max),.5)}quadrant(l){const c=[l%2==0,l<2],C=s.aN(this.min),M=s.aN(this.max);for(let R=0;R<c.length;R++)C[R]=c[R]?this.min[R]:this.center[R],M[R]=c[R]?this.center[R]:this.max[R];return M[2]=this.max[2],new Vs(C,M)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let c=!0;for(let C=0;C<l.planes.length;C++){const M=this.intersectsPlane(l.planes[C]);if(M===0)return 0;M===1&&(c=!1)}return c?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let c=l[3],C=l[3];for(let M=0;M<3;M++)l[M]>0?(c+=l[M]*this.min[M],C+=l[M]*this.max[M]):(C+=l[M]*this.min[M],c+=l[M]*this.max[M]);return c>=0?2:C<0?0:1}}class fo{distanceToTile2d(l,c,C,M){const R=M.distanceX([l,c]),j=M.distanceY([l,c]);return Math.hypot(R,j)}getWrap(l,c,C){return C}getTileAABB(l,c,C,M){var R,j;let $=C,te=C;if(M.terrain){const be=new s.S(l.z,c,l.z,l.x,l.y),Ee=M.terrain.getMinMaxElevation(be);$=(R=Ee.minElevation)!==null&&R!==void 0?R:C,te=(j=Ee.maxElevation)!==null&&j!==void 0?j:C}const oe=1<<l.z;return new Vs([c+l.x/oe,l.y/oe,$],[c+(l.x+1)/oe,(l.y+1)/oe,te])}allowVariableZoom(l,c){const C=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,M=s.ab(78.5-C/2,0,60);return!!c.terrain||l.pitch>M||l.padding.top>=.1}allowWorldCopies(){return!0}recalculateCache(){}}class ms{constructor(l,c,C){this.points=l,this.planes=c,this.aabb=C}static fromInvProjectionMatrix(l,c=1,C=0){const M=Math.pow(2,C),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(oe=>{const be=1/(oe=s.al([],oe,l))[3]/c*M;return s.aO(oe,oe,[be,be,1/oe[3],be])}),j=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(oe=>{const be=s.aP([],R[oe[0]],R[oe[1]]),Ee=s.aP([],R[oe[2]],R[oe[1]]),Ie=s.aQ([],s.aR([],be,Ee)),qe=-s.aS(Ie,R[oe[1]]);return Ie.concat(qe)}),$=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],te=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const oe of R)for(let be=0;be<3;be++)$[be]=Math.min($[be],oe[be]),te[be]=Math.max(te[be],oe[be]);return new ms(R,j,new Vs($,te))}}class ws{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,C){return this._helper.interpolatePadding(l,c,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,C=!0){this._helper.resize(l,c,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,c){}constructor(l,c,C,M,R){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new ns({calcMatrices:()=>{this._calcMatrices()},getConstrained:(j,$)=>this.getConstrained(j,$)},l,c,C,M,R),this._coveringTilesDetailsProvider=new fo}clone(){const l=new ws;return l.apply(this),l}apply(l,c,C){this._helper.apply(l,c,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const c=[new s.aT(0,l)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new s.P(0,0)),M=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),R=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),j=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),$=Math.floor(Math.min(C.x,M.x,R.x,j.x)),te=Math.floor(Math.max(C.x,M.x,R.x,j.x)),oe=1;for(let be=$-oe;be<=te+oe;be++)be!==0&&c.push(new s.aT(be,l))}return c}getCameraFrustum(){return ms.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const c=this.screenPointToLocation(this.centerPoint,l),C=l?l.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(l,c){const C=s.aH(this.elevation,this.center.lat),M=this.screenPointToMercatorCoordinateAtZ(c,C),R=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),j=s.Y.fromLngLat(l),$=new s.Y(j.x-(M.x-R.x),j.y-(M.y-R.y));this.setCenter($==null?void 0:$.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,c){return c?this.coordinatePoint(s.Y.fromLngLat(l),c.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.Y.fromLngLat(l))}screenPointToLocation(l,c){var C;return(C=this.screenPointToMercatorCoordinate(l,c))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(l,c){if(c){const C=c.pointCoordinate(l);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,c){const C=c||0,M=[l.x,l.y,0,1],R=[l.x,l.y,1,1];s.al(M,M,this._pixelMatrixInverse),s.al(R,R,this._pixelMatrixInverse);const j=M[3],$=R[3],te=M[1]/j,oe=R[1]/$,be=M[2]/j,Ee=R[2]/$,Ie=be===Ee?0:(C-be)/(Ee-be);return new s.Y(s.y.number(M[0]/j,R[0]/$,Ie)/this.worldSize,s.y.number(te,oe,Ie)/this.worldSize,C)}coordinatePoint(l,c=0,C=this._pixelMatrix){const M=[l.x*this.worldSize,l.y*this.worldSize,c,1];return s.al(M,M,C),new s.P(M[0]/M[3],M[1]/M[3])}getBounds(){const l=Math.max(0,this._helper._height/2-Za(this));return new Nt().extend(this.screenPointToLocation(new s.P(0,l))).extend(this.screenPointToLocation(new s.P(this._helper._width,l))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(l,c){return c?c.pointCoordinate(l)!=null:l.y>this.height/2-Za(this)}calculatePosMatrix(l,c=!1,C){var M;const R=(M=l.key)!==null&&M!==void 0?M:s.aU(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),j=c?this._alignedPosMatrixCache:this._posMatrixCache;if(j.has(R)){const oe=j.get(R);return C?oe.f32:oe.f64}const $=Ps(l,this.worldSize);s.L($,c?this._alignedProjMatrix:this._viewProjMatrix,$);const te={f64:$,f32:new Float32Array($)};return j.set(R,te),C?te.f32:te.f64}calculateFogMatrix(l){const c=l.key,C=this._fogMatrixCacheF32;if(C.has(c))return C.get(c);const M=Ps(l,this.worldSize);return s.L(M,this._fogMatrix,M),C.set(c,new Float32Array(M)),C.get(c)}getConstrained(l,c){c=s.ab(+c,this.minZoom,this.maxZoom);const C={center:new s.N(l.lng,l.lat),zoom:c};let M=this._helper._lngRange;this._helper._renderWorldCopies||M!==null||(M=[-179.9999999999,180-1e-10]);const R=this.tileSize*s.aG(C.zoom);let j=0,$=R,te=0,oe=R,be=0,Ee=0;const{x:Ie,y:qe}=this.size;if(this._helper._latRange){const Et=this._helper._latRange;j=s.Q(Et[1])*R,$=s.Q(Et[0])*R,$-j<qe&&(be=qe/($-j))}M&&(te=s.aI(s.O(M[0])*R,0,R),oe=s.aI(s.O(M[1])*R,0,R),oe<te&&(oe+=R),oe-te<Ie&&(Ee=Ie/(oe-te)));const{x:Ve,y:At}=Dr(R,l);let ot,ct;const yt=Math.max(Ee||0,be||0);if(yt){const Et=new s.P(Ee?(oe+te)/2:Ve,be?($+j)/2:At);return C.center=Ei(R,Et).wrap(),C.zoom+=s.a8(yt),C}if(this._helper._latRange){const Et=qe/2;At-Et<j&&(ct=j+Et),At+Et>$&&(ct=$-Et)}if(M){const Et=(te+oe)/2;let Tt=Ve;this._helper._renderWorldCopies&&(Tt=s.aI(Ve,Et-R/2,Et+R/2));const Rt=Ie/2;Tt-Rt<te&&(ot=te+Rt),Tt+Rt>oe&&(ot=oe-Rt)}if(ot!==void 0||ct!==void 0){const Et=new s.P(ot??Ve,ct??At);C.center=Ei(R,Et).wrap()}return C}calculateCenterFromCameraLngLatAlt(l,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,C,M)}_calculateNearFarZIfNeeded(l,c,C){if(!this._helper.autoCalculateNearFarZ)return;const M=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),R=l-M*this._helper._pixelPerMeter/Math.cos(c),j=M<0?R:l,$=Math.PI/2+this.pitchInRadians,te=s.aa(this.fov)*(Math.abs(Math.cos(s.aa(this.roll)))*this.height+Math.abs(Math.sin(s.aa(this.roll)))*this.width)/this.height*(.5+C.y/this.height),oe=Math.sin(te)*j/Math.sin(s.ab(Math.PI-$-te,.01,Math.PI-.01)),be=Za(this),Ee=Math.atan(be/this._helper.cameraToCenterDistance),Ie=s.aa(.75),qe=Ee>Ie?2*Ee*(.5+C.y/(2*be)):Ie,Ve=Math.sin(qe)*j/Math.sin(s.ab(Math.PI-$-qe,.01,Math.PI-.01)),At=Math.min(oe,Ve);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*At+j),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,c=Dr(this.worldSize,this.center),C=c.x,M=c.y;this._helper._pixelPerMeter=s.aH(1,this.center.lat)*this.worldSize;const R=s.aa(Math.min(this.pitch,89.25)),j=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(R));let $;this._calculateNearFarZIfNeeded(j,R,l),$=new Float64Array(16),s.aV($,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.an(this._invProjMatrix,$),$[8]=2*-l.x/this._helper._width,$[9]=2*l.y/this._helper._height,this._projectionMatrix=s.aW($),s.K($,$,[1,-1,1]),s.J($,$,[0,0,-this._helper.cameraToCenterDistance]),s.aX($,$,-this.rollInRadians),s.aY($,$,this.pitchInRadians),s.aX($,$,-this.bearingInRadians),s.J($,$,[-C,-M,0]),this._mercatorMatrix=s.K([],$,[this.worldSize,this.worldSize,this.worldSize]),s.K($,$,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,$),s.J($,$,[0,0,-this.elevation]),this._viewProjMatrix=$,this._invViewProjMatrix=s.an([],$);const te=[0,0,-1,1];s.al(te,te,this._invViewProjMatrix),this._cameraPosition=[te[0]/te[3],te[1]/te[3],te[2]/te[3]],this._fogMatrix=new Float64Array(16),s.aV(this._fogMatrix,this.fovInRadians,this.width/this.height,j,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,s.K(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.J(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.aX(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.aY(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.aX(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.J(this._fogMatrix,this._fogMatrix,[-C,-M,0]),s.K(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.J(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,$);const oe=this._helper._width%2/2,be=this._helper._height%2/2,Ee=Math.cos(this.bearingInRadians),Ie=Math.sin(-this.bearingInRadians),qe=C-Math.round(C)+Ee*oe+Ie*be,Ve=M-Math.round(M)+Ee*be+Ie*oe,At=new Float64Array($);if(s.J(At,At,[qe>.5?qe-1:qe,Ve>.5?Ve-1:Ve,0]),this._alignedProjMatrix=At,$=s.an(new Float64Array(16),this._pixelMatrix),!$)throw new Error("failed to invert matrix");this._pixelMatrixInverse=$,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new s.P(0,0)),c=[l.x*this.worldSize,l.y*this.worldSize,0,1];return s.al(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=s.aH(1,this.center.lat)*this.worldSize;return Mo(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,c){const C=s.Y.fromLngLat(l),M=[C.x*this.worldSize,C.y*this.worldSize,c,1];return s.al(M,M,this._viewProjMatrix),M[2]/M[3]}getProjectionData(l){const{overscaledTileID:c,aligned:C,applyTerrainMatrix:M}=l,R=this._helper.getMercatorTileCoordinates(c),j=c?this.calculatePosMatrix(c,C,!0):null;let $;return $=c&&c.terrainRttPosMatrix32f&&M?c.terrainRttPosMatrix32f:j||s.aZ(),{mainMatrix:$,tileMercatorCoords:R,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:$}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,c,C){return 1}transformLightDirection(l){return s.aN(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,c,C,M){const R=this.calculatePosMatrix(C);let j;M?(j=[l,c,M(l,c),1],s.al(j,j,R)):(j=[l,c,0,1],ui(j,j,R));const $=j[3];return{point:new s.P(j[0]/$,j[1]/$),signedDistanceFromCamera:$,isOccluded:!1}}populateCache(l){for(const c of l)this.calculatePosMatrix(c)}getMatrixForModel(l,c){const C=s.Y.fromLngLat(l,c),M=C.meterInMercatorCoordinateUnits(),R=s.a_();return s.J(R,R,[C.x,C.y,C.z]),s.aX(R,R,Math.PI),s.aY(R,R,Math.PI/2),s.K(R,R,[-M,M,M]),R}getProjectionDataForCustomLayer(l=!0){const c=new s.S(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:l}),M=Ps(c,this.worldSize);s.L(M,this._viewProjMatrix,M),C.tileMercatorCoords=[0,0,1,1];const R=[s.X,s.X,this.worldSize/this._helper.pixelsPerMeter],j=s.a$();return s.K(j,M,R),C.fallbackMatrix=j,C.mainMatrix=j,C}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function Xa(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Rs(T){if(T.useSlerp)if(T.k<1){const l=s.b0(T.startEulerAngles.roll,T.startEulerAngles.pitch,T.startEulerAngles.bearing),c=s.b0(T.endEulerAngles.roll,T.endEulerAngles.pitch,T.endEulerAngles.bearing),C=new Float64Array(4);s.b1(C,l,c,T.k);const M=s.b2(C);T.tr.setRoll(M.roll),T.tr.setPitch(M.pitch),T.tr.setBearing(M.bearing)}else T.tr.setRoll(T.endEulerAngles.roll),T.tr.setPitch(T.endEulerAngles.pitch),T.tr.setBearing(T.endEulerAngles.bearing);else T.tr.setRoll(s.y.number(T.startEulerAngles.roll,T.endEulerAngles.roll,T.k)),T.tr.setPitch(s.y.number(T.startEulerAngles.pitch,T.endEulerAngles.pitch,T.k)),T.tr.setBearing(s.y.number(T.startEulerAngles.bearing,T.endEulerAngles.bearing,T.k))}function El(T,l,c,C,M){const R=M.padding,j=Dr(M.worldSize,c.getNorthWest()),$=Dr(M.worldSize,c.getNorthEast()),te=Dr(M.worldSize,c.getSouthEast()),oe=Dr(M.worldSize,c.getSouthWest()),be=s.aa(-C),Ee=j.rotate(be),Ie=$.rotate(be),qe=te.rotate(be),Ve=oe.rotate(be),At=new s.P(Math.max(Ee.x,Ie.x,Ve.x,qe.x),Math.max(Ee.y,Ie.y,Ve.y,qe.y)),ot=new s.P(Math.min(Ee.x,Ie.x,Ve.x,qe.x),Math.min(Ee.y,Ie.y,Ve.y,qe.y)),ct=At.sub(ot),yt=(M.width-(R.left+R.right+l.left+l.right))/ct.x,Et=(M.height-(R.top+R.bottom+l.top+l.bottom))/ct.y;if(Et<0||yt<0)return void Xa();const Tt=Math.min(s.a8(M.scale*Math.min(yt,Et)),T.maxZoom),Rt=s.P.convert(T.offset),zt=new s.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(s.aa(C)),Pt=Rt.add(zt).mult(M.scale/s.aG(Tt));return{center:Ei(M.worldSize,j.add(te).div(2).sub(Pt)),zoom:Tt,bearing:C}}class oA{get useGlobeControls(){return!1}handlePanInertia(l,c){return{easingOffset:l,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(l,c){l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta),l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta)}handleMapControlsPan(l,c,C){l.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(C,l.around)}cameraForBoxAndBearing(l,c,C,M,R){return El(l,c,C,M,R)}handleJumpToCenterZoom(l,c){l.zoom!==(c.zoom!==void 0?+c.zoom:l.zoom)&&l.setZoom(+c.zoom),c.center!==void 0&&l.setCenter(s.N.convert(c.center))}handleEaseTo(l,c){const C=l.zoom,M=l.padding,R={roll:l.roll,pitch:l.pitch,bearing:l.bearing},j={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},$=c.zoom!==void 0,te=!l.isPaddingEqual(c.padding);let oe=!1;const be=$?+c.zoom:l.zoom;let Ee=l.centerPoint.add(c.offsetAsPoint);const Ie=l.screenPointToLocation(Ee),{center:qe,zoom:Ve}=l.getConstrained(s.N.convert(c.center||Ie),be??C);du(l,qe);const At=Dr(l.worldSize,Ie),ot=Dr(l.worldSize,qe).sub(At),ct=s.aG(Ve-C);return oe=Ve!==C,{easeFunc:yt=>{if(oe&&l.setZoom(s.y.number(C,Ve,yt)),s.b3(R,j)||Rs({startEulerAngles:R,endEulerAngles:j,tr:l,k:yt,useSlerp:R.roll!=j.roll}),te&&(l.interpolatePadding(M,c.padding,yt),Ee=l.centerPoint.add(c.offsetAsPoint)),c.around)l.setLocationAtPoint(c.around,c.aroundPoint);else{const Et=s.aG(l.zoom-C),Tt=Ve>C?Math.min(2,ct):Math.max(.5,ct),Rt=Math.pow(Tt,1-yt),zt=Ei(l.worldSize,At.add(ot.mult(yt*Rt)).mult(Et));l.setLocationAtPoint(l.renderWorldCopies?zt.wrap():zt,Ee)}},isZooming:oe,elevationCenter:qe}}handleFlyTo(l,c){const C=c.zoom!==void 0,M=l.zoom,R=l.getConstrained(s.N.convert(c.center||c.locationAtOffset),C?+c.zoom:M),j=R.center,$=R.zoom;du(l,j);const te=Dr(l.worldSize,c.locationAtOffset),oe=Dr(l.worldSize,j).sub(te),be=oe.mag(),Ee=s.aG($-M);let Ie;if(c.minZoom!==void 0){const qe=Math.min(+c.minZoom,M,$),Ve=l.getConstrained(j,qe).zoom;Ie=s.aG(Ve-M)}return{easeFunc:(qe,Ve,At,ot)=>{l.setZoom(qe===1?$:M+s.a8(Ve));const ct=qe===1?j:Ei(l.worldSize,te.add(oe.mult(At)).mult(Ve));l.setLocationAtPoint(l.renderWorldCopies?ct.wrap():ct,ot)},scaleOfZoom:Ee,targetCenter:j,scaleOfMinZoom:Ie,pixelPathLength:be}}}class Hi{constructor(l,c,C){this.blendFunction=l,this.blendColor=c,this.mask=C}}Hi.Replace=[1,0],Hi.disabled=new Hi(Hi.Replace,s.b4.transparent,[!1,!1,!1,!1]),Hi.unblended=new Hi(Hi.Replace,s.b4.transparent,[!0,!0,!0,!0]),Hi.alphaBlended=new Hi([1,771],s.b4.transparent,[!0,!0,!0,!0]);const nu=2305;class Fi{constructor(l,c,C){this.enable=l,this.mode=c,this.frontFace=C}}Fi.disabled=new Fi(!1,1029,nu),Fi.backCCW=new Fi(!0,1029,nu),Fi.frontCCW=new Fi(!0,1028,nu);class Jr{constructor(l,c,C){this.func=l,this.mask=c,this.range=C}}Jr.ReadOnly=!1,Jr.ReadWrite=!0,Jr.disabled=new Jr(519,Jr.ReadOnly,[0,1]);const ru=7680;class Gi{constructor(l,c,C,M,R,j){this.test=l,this.ref=c,this.mask=C,this.fail=M,this.depthFail=R,this.pass=j}}Gi.disabled=new Gi({func:519,mask:0},0,0,ru,ru,ru);const lo=new WeakMap;function Pi(T){var l;if(lo.has(T))return lo.get(T);{const c=(l=T.getParameter(T.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return lo.set(T,c),c}}class ee{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const c=l.context,C=c.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const M=new s.aC;M.emplaceBack(-1,-1),M.emplaceBack(2,-1),M.emplaceBack(-1,2);const R=new s.aE;R.emplaceBack(0,1,2),this._fullscreenTriangle=new Ha(c.createVertexBuffer(M,ci.members),c.createIndexBuffer(R),s.aD.simpleSegment(0,0,M.length,R.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(C.TEXTURE1);const j=C.createTexture();C.bindTexture(C.TEXTURE_2D,j),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(j),Pi(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,c){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,c=l.gl;l.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,c){const C=this._cachedRenderContext.context,M=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:s.b4.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,M.TRIANGLES,Jr.disabled,Gi.disabled,Hi.unblended,Fi.disabled,((R,j)=>({u_input:R,u_output_expected:j}))(l,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Pi(M)){M.bindBuffer(M.PIXEL_PACK_BUFFER,this._pbo),M.readBuffer(M.COLOR_ATTACHMENT0),M.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),M.bindBuffer(M.PIXEL_PACK_BUFFER,null);const R=M.fenceSync(M.SYNC_GPU_COMMANDS_COMPLETE,0);M.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:R}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Pi(l)){const c=l.clientWaitSync(this._readbackQueue.sync,0,0);if(c===l.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ee._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let c=0;return c+=l[0]/256,c+=l[1]/65536,c+=l[2]/16777216,l[3]<127&&(c=-c),c/128}}const Se=s.X/128;function tt(T,l){const c=T.granularity!==void 0?Math.max(T.granularity,1):1,C=c+(T.generateBorders?2:0),M=c+(T.extendToNorthPole||T.generateBorders?1:0)+(T.extendToSouthPole||T.generateBorders?1:0),R=C+1,j=M+1,$=T.generateBorders?-1:0,te=T.generateBorders||T.extendToNorthPole?-1:0,oe=c+(T.generateBorders?1:0),be=c+(T.generateBorders||T.extendToSouthPole?1:0),Ee=R*j,Ie=C*M*6,qe=R*j>65536;if(qe&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ve=qe||l==="32bit",At=new Int16Array(2*Ee);let ot=0;for(let Et=te;Et<=be;Et++)for(let Tt=$;Tt<=oe;Tt++){let Rt=Tt/c*s.X;Tt===-1&&(Rt=-64),Tt===c+1&&(Rt=s.X+Se);let zt=Et/c*s.X;Et===-1&&(zt=T.extendToNorthPole?s.b6:-64),Et===c+1&&(zt=T.extendToSouthPole?s.b7:s.X+Se),At[ot++]=Rt,At[ot++]=zt}const ct=Ve?new Uint32Array(Ie):new Uint16Array(Ie);let yt=0;for(let Et=0;Et<M;Et++)for(let Tt=0;Tt<C;Tt++){const Rt=Tt+1+Et*R,zt=Tt+(Et+1)*R,Pt=Tt+1+(Et+1)*R;ct[yt++]=Tt+Et*R,ct[yt++]=zt,ct[yt++]=Rt,ct[yt++]=Rt,ct[yt++]=zt,ct[yt++]=Pt}return{vertices:At.buffer.slice(0),indices:ct.buffer.slice(0),uses32bitIndices:Ve}}const $t=new s.aB({fill:new s.b8(128,2),line:new s.b8(512,0),tile:new s.b8(128,32),stencil:new s.b8(128,1),circle:3});class Or{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ri.projectionGlobe}get vertexShaderPreludeCode(){return ri.projectionMercator.vertexSource}get subdivisionGranularity(){return $t}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new ee(l));const c=s.Q(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,M=this._errorMeasurement.updateErrorLoop(c,C),R=S.now();M!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=M,this._errorMeasurementLastChangeTime=R);const j=Math.min(Math.max((R-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.b9(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.ba(j))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,c,C,M,R){const j=(R==="stencil"?$t.stencil:$t.tile).getGranularityForZoomLevel(c.z);return this._getMesh(l,{granularity:j,generateBorders:C,extendToNorthPole:c.y===0&&M,extendToSouthPole:c.y===(1<<c.z)-1&&M})}_getMesh(l,c){const C=this._getMeshKey(c);if(C in this._tileMeshCache)return this._tileMeshCache[C];const M=function(R,j){const $=tt(j,"16bit"),te=s.aC.deserialize({arrayBuffer:$.vertices,length:$.vertices.byteLength/2/2}),oe=s.aE.deserialize({arrayBuffer:$.indices,length:$.indices.byteLength/2/3});return new Ha(R.createVertexBuffer(te,ci.members),R.createIndexBuffer(oe),s.aD.simpleSegment(0,0,te.length,oe.length))}(l,c);return this._tileMeshCache[C]=M,M}recalculate(l){}hasTransition(){const l=S.now();let c=!1;return c=c||(l-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const Gn=new s.q({type:new s.D(s.v.projection.type)});class si extends s.E{constructor(l){super(),this._transitionable=new s.T(Gn),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.z(0)),this._mercatorProjection=new ls,this._verticalPerspectiveProjection=new Or}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof s.bb){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,c,C,M,R){return this.currentProjection.getMeshFromTileID(l,c,C,M,R)}setProjection(l){this._transitionable.setValue("type",(l==null?void 0:l.type)||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function hi(T){const l=vi(T.worldSize,T.center.lat);return 2*Math.PI*l}function pr(T,l,c,C,M){const R=1/(1<<M),j=l/s.X*R+C*R,$=s.bd((T/s.X*R+c*R)*Math.PI*2+Math.PI,2*Math.PI),te=2*Math.atan(Math.exp(Math.PI-j*Math.PI*2))-.5*Math.PI,oe=Math.cos(te),be=new Float64Array(3);return be[0]=Math.sin($)*oe,be[1]=Math.sin(te),be[2]=Math.cos($)*oe,be}function Ir(T){return function(l,c){const C=Math.cos(c),M=new Float64Array(3);return M[0]=Math.sin(l)*C,M[1]=Math.sin(c),M[2]=Math.cos(l)*C,M}(T.lng*Math.PI/180,T.lat*Math.PI/180)}function vi(T,l){return T/(2*Math.PI)/Math.cos(l*Math.PI/180)}function So(T){const l=Math.asin(T[1])/Math.PI*180,c=Math.sqrt(T[0]*T[0]+T[2]*T[2]);if(c>1e-6){const C=T[0]/c,M=Math.acos(T[2]/c),R=(C>0?M:-M)/Math.PI*180;return new s.N(s.aI(R,-180,180),l)}return new s.N(0,l)}function ki(T){return Math.cos(T*Math.PI/180)}function qr(T,l){const c=ki(T),C=ki(l);return s.a8(C/c)}function Zi(T,l){const c=T.rotate(l.bearingInRadians),C=l.zoom+qr(l.center.lat,0),M=s.b9(1/ki(l.center.lat),1/ki(Math.min(Math.abs(l.center.lat),60)),s.bc(C,7,3,0,1)),R=360/hi({worldSize:l.worldSize,center:{lat:l.center.lat}});return new s.N(l.center.lng-c.x*R*M,s.ab(l.center.lat+c.y*R,-85.051129,s.aF))}function Xi(T){const l=.5*T,c=Math.sin(l),C=Math.cos(l);return Math.log(c+C)-Math.log(C-c)}function us(T,l,c,C){const M=T.lat+c*C;if(Math.abs(c)>1){const R=(Math.sign(T.lat+c)!==Math.sign(T.lat)?-Math.abs(T.lat):Math.abs(T.lat))*Math.PI/180,j=Math.abs(T.lat+c)*Math.PI/180,$=Xi(R+C*(j-R)),te=Xi(R),oe=Xi(j);return new s.N(T.lng+l*(($-te)/(oe-te)),M)}return new s.N(T.lng+l*C,M)}class ya{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=l}recalculateCache(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(l,c,C,M){const R=`${l.z}_${l.x}_${l.y}`,j=this._cache.get(R);if(j)return j;const $=this._cachePrevious.get(R);if($)return this._cache.set(R,$),$;const te=this._aabbFactory(l,c,C,M);return this._cache.set(R,te),this._hadAnyChanges=!0,te}}function La(T,l,c){const C=T-l;return C<0?-C:Math.max(0,C-c)}function fu(T,l,c,C,M){const R=T-c;let j;return j=R<0?Math.min(-R,1+R-M):R>1?Math.min(Math.max(R-M,0),1-R):0,Math.max(j,La(l,C,M))}class Hs{constructor(){this._aabbCache=new ya(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(l,c,C,M){const R=1<<C.z,j=1/R,$=C.x/R,te=C.y/R;let oe=2;return oe=Math.min(oe,fu(l,c,$,te,j)),oe=Math.min(oe,fu(l,c,$+.5,-te-j,j)),oe=Math.min(oe,fu(l,c,$+.5,2-te-j,j)),oe}getWrap(l,c,C){const M=1<<c.z,R=1/M,j=c.x/M,$=La(l.x,j,R),te=La(l.x,j-1,R),oe=La(l.x,j+1,R),be=Math.min($,te,oe);return be===oe?1:be===te?-1:0}allowVariableZoom(l,c){return Kt(l,c)>4}allowWorldCopies(){return!1}getTileAABB(l,c,C,M){return this._aabbCache.getTileAABB(l,c,C,M)}_computeTileAABB(l,c,C,M){if(l.z<=0)return new Vs([-1,-1,-1],[1,1,1]);if(l.z===1)return new Vs([l.x===0?-1:0,l.y===0?0:-1,-1],[l.x===0?0:1,l.y===0?1:0,1]);{const R=[pr(0,0,l.x,l.y,l.z),pr(s.X,0,l.x,l.y,l.z),pr(s.X,s.X,l.x,l.y,l.z),pr(0,s.X,l.x,l.y,l.z)],j=[1,1,1],$=[-1,-1,-1];for(const te of R)for(let oe=0;oe<3;oe++)j[oe]=Math.min(j[oe],te[oe]),$[oe]=Math.max($[oe],te[oe]);if(l.y===0||l.y===(1<<l.z)-1){const te=[0,l.y===0?1:-1,0];for(let oe=0;oe<3;oe++)j[oe]=Math.min(j[oe],te[oe]),$[oe]=Math.max($[oe],te[oe])}return new Vs(j,$)}}}class hc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,C){return this._helper.interpolatePadding(l,c,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c){this._helper.resize(l,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(){this._cachedClippingPlane=s.be(),this._projectionMatrix=s.a_(),this._globeViewProjMatrix32f=s.aZ(),this._globeViewProjMatrixNoCorrection=s.a_(),this._globeViewProjMatrixNoCorrectionInverted=s.a_(),this._globeProjMatrixInverted=s.a_(),this._cameraPosition=s.bf(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new ns({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._coveringTilesDetailsProvider=new Hs}clone(){const l=new hc;return l.apply(this),l}apply(l,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=s.bf();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:c,applyGlobeMatrix:C}=l,M=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:M,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const c=this.pitchInRadians,C=this.cameraToCenterDistance/l,M=Math.sin(c)*C,R=Math.cos(c)*C+1,j=1/Math.sqrt(M*M+R*R)*1;let $=-M,te=R;const oe=Math.sqrt($*$+te*te);$/=oe,te/=oe;const be=[0,$,te];return s.bg(be,be,[0,0,0],-this.bearingInRadians),s.bh(be,be,[0,0,0],-1*this.center.lat*Math.PI/180),s.bi(be,be,[0,0,0],this.center.lng*Math.PI/180),s.aL(be,be,.25),[...be,.25*-j]}isLocationOccluded(l){return!this.isSurfacePointVisible(Ir(l))}transformLightDirection(l){const c=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,M=Math.cos(C),R=[Math.sin(c)*M,Math.sin(C),Math.cos(c)*M],j=[R[2],0,-R[0]],$=[0,0,0];s.aR($,j,R),s.aQ(j,j),s.aQ($,$);const te=[0,0,0];return s.aQ(te,[j[0]*l[0]+$[0]*l[1]+R[0]*l[2],j[1]*l[0]+$[1]*l[1]+R[1]*l[2],j[2]*l[0]+$[2]*l[1]+R[2]*l[2]]),te}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,c,C){const M=function($,te,oe){const be=1/(1<<oe.z);return new s.Y($/s.X*be+oe.x*be,te/s.X*be+oe.y*be)}(l,c,C.canonical),R=(j=M.y,[s.bd(M.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-j*Math.PI*2))-.5*Math.PI]);var j;return this.getCircleRadiusCorrection()/Math.cos(R[1])}projectTileCoordinates(l,c,C,M){const R=C.canonical,j=pr(l,c,R.x,R.y,R.z),$=1+(M?M(l,c):0)/s.bo,te=[j[0]*$,j[1]*$,j[2]*$,1];s.al(te,te,this._globeViewProjMatrixNoCorrection);const oe=this._cachedClippingPlane,be=oe[0]*j[0]+oe[1]*j[1]+oe[2]*j[2]+oe[3]<0;return{point:new s.P(te[0]/te[3],te[1]/te[3]),signedDistanceFromCamera:te[3],isOccluded:be}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=vi(this.worldSize,this.center.lat),c=s.a$(),C=s.a$();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),s.aV(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const M=this.centerOffset;c[8]=2*-M.x/this._helper._width,c[9]=2*M.y/this._helper._height,this._projectionMatrix=s.aW(c),this._globeProjMatrixInverted=s.a$(),s.an(this._globeProjMatrixInverted,c),s.J(c,c,[0,0,-this.cameraToCenterDistance]),s.aX(c,c,this.rollInRadians),s.aY(c,c,-this.pitchInRadians),s.aX(c,c,this.bearingInRadians),s.J(c,c,[0,0,-l]);const R=s.bf();R[0]=l,R[1]=l,R[2]=l,s.aY(C,c,this.center.lat*Math.PI/180),s.bj(C,C,-this.center.lng*Math.PI/180),s.K(C,C,R),this._globeViewProjMatrixNoCorrection=C,s.aY(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bj(c,c,-this.center.lng*Math.PI/180),s.K(c,c,R),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=s.a$(),s.an(this._globeViewProjMatrixNoCorrectionInverted,C);const j=s.bf();this._cameraPosition=s.bf(),this._cameraPosition[2]=this.cameraToCenterDistance/l,s.bg(this._cameraPosition,this._cameraPosition,j,-this.rollInRadians),s.bh(this._cameraPosition,this._cameraPosition,j,this.pitchInRadians),s.bg(this._cameraPosition,this._cameraPosition,j,-this.bearingInRadians),s.aM(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bh(this._cameraPosition,this._cameraPosition,j,-this.center.lat*Math.PI/180),s.bi(this._cameraPosition,this._cameraPosition,j,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const $=s.aW(this._globeViewProjMatrixNoCorrectionInverted);s.K($,$,[1,1,-1]),this._cachedFrustum=ms.fromInvProjectionMatrix($)}calculateFogMatrix(l){s.w("calculateFogMatrix is not supported on globe projection.");const c=s.a$();return s.aq(c),c}getVisibleUnwrappedCoordinates(l){return[new s.aT(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=Ir(l);s.aL(C,C,1+c/s.bo);const M=s.be();return s.al(M,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),M[2]/M[3]}populateCache(l){}getBounds(){const l=.5*this.width,c=.5*this.height,C=[new s.P(0,0),new s.P(l,0),new s.P(this.width,0),new s.P(this.width,c),new s.P(this.width,this.height),new s.P(l,this.height),new s.P(0,this.height),new s.P(0,c)],M=[];for(const Ee of C)M.push(this.unprojectScreenPoint(Ee));let R=0,j=0,$=0,te=0;const oe=this.center;for(const Ee of M){const Ie=s.bk(oe.lng,Ee.lng),qe=s.bk(oe.lat,Ee.lat);Ie<j&&(j=Ie),Ie>R&&(R=Ie),qe<te&&(te=qe),qe>$&&($=qe)}const be=[oe.lng+j,oe.lat+te,oe.lng+R,oe.lat+$];return this.isSurfacePointOnScreen([0,1,0])&&(be[3]=90,be[0]=-180,be[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(be[1]=-90,be[0]=-180,be[2]=180),new Nt(be)}getConstrained(l,c){const C=s.ab(l.lat,-85.051129,s.aF),M=s.ab(+c,this.minZoom+qr(0,C),this.maxZoom);return{center:new s.N(l.lng,C),zoom:M}}calculateCenterFromCameraLngLatAlt(l,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,C,M)}setLocationAtPoint(l,c){const C=Ir(this.unprojectScreenPoint(c)),M=Ir(l),R=s.bf();s.bl(R);const j=s.bf();s.bi(j,C,R,-this.center.lng*Math.PI/180),s.bh(j,j,R,this.center.lat*Math.PI/180);const $=M[0]*M[0]+M[2]*M[2],te=j[0]*j[0];if($<te)return;const oe=Math.sqrt($-te),be=-oe,Ee=s.bm(M[0],M[2],j[0],oe),Ie=s.bm(M[0],M[2],j[0],be),qe=s.bf();s.bi(qe,M,R,-Ee);const Ve=s.bm(qe[1],qe[2],j[1],j[2]),At=s.bf();s.bi(At,M,R,-Ie);const ot=s.bm(At[1],At[2],j[1],j[2]),ct=.5*Math.PI,yt=Ve>=-ct&&Ve<=ct,Et=ot>=-ct&&ot<=ct;let Tt,Rt;if(yt&&Et){const Ht=this.center.lng*Math.PI/180,vn=this.center.lat*Math.PI/180;s.bp(Ee,Ht)+s.bp(Ve,vn)<s.bp(Ie,Ht)+s.bp(ot,vn)?(Tt=Ee,Rt=Ve):(Tt=Ie,Rt=ot)}else if(yt)Tt=Ee,Rt=Ve;else{if(!Et)return;Tt=Ie,Rt=ot}const zt=Tt/Math.PI*180,Pt=Rt/Math.PI*180,tn=this.center.lat;this.setCenter(new s.N(zt,s.ab(Pt,-90,90))),this.setZoom(this.zoom+qr(tn,this.center.lat))}locationToScreenPoint(l,c){const C=Ir(l);if(c){const M=c.getElevationForLngLatZoom(l,this._helper._tileZoom);s.aL(C,C,1+M/s.bo)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(l){const c=s.be();return s.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new s.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,c){if(c){const C=c.pointCoordinate(l);if(C)return C}return s.Y.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,c){var C;return(C=this.screenPointToMercatorCoordinate(l,c))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(l,c){const C=this._cameraPosition,M=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(C,M)}getRayDirectionFromPixel(l){const c=s.be();c[0]=l.x/this.width*2-1,c[1]=-1*(l.y/this.height*2-1),c[2]=1,c[3]=1,s.al(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const C=s.bf();C[0]=c[0]-this._cameraPosition[0],C[1]=c[1]-this._cameraPosition[1],C[2]=c[2]-this._cameraPosition[2];const M=s.bf();return s.aQ(M,C),M}isSurfacePointVisible(l){const c=this._cachedClippingPlane;return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const c=s.be();return s.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(l,c){const C=s.aS(l,c),M=s.bf(),R=s.bf();s.aL(R,c,C),s.aP(M,l,R);const j=1-s.aS(M,M);if(j<0)return null;const $=s.aS(l,l)-1,te=-C+(C<0?1:-1)*Math.sqrt(j),oe=$/te,be=te;return{tMin:Math.min(oe,be),tMax:Math.max(oe,be)}}unprojectScreenPoint(l){const c=this._cameraPosition,C=this.getRayDirectionFromPixel(l),M=this.rayPlanetIntersection(c,C);if(M){const oe=s.bf();s.aM(oe,c,[C[0]*M.tMin,C[1]*M.tMin,C[2]*M.tMin]);const be=s.bf();return s.aQ(be,oe),So(be)}const R=this._cachedClippingPlane[0]*C[0]+this._cachedClippingPlane[1]*C[1]+this._cachedClippingPlane[2]*C[2],j=-s.bn(this._cachedClippingPlane,c)/R,$=s.bf();if(j>0)s.aM($,c,[C[0]*j,C[1]*j,C[2]*j]);else{const oe=s.bf();s.aM(oe,c,[2*C[0],2*C[1],2*C[2]]);const be=s.bn(this._cachedClippingPlane,oe);s.aP($,oe,[this._cachedClippingPlane[0]*be,this._cachedClippingPlane[1]*be,this._cachedClippingPlane[2]*be])}const te=s.bf();return s.aQ(te,$),So(te)}getMatrixForModel(l,c){const C=s.N.convert(l),M=1/s.bo,R=s.a_();return s.bj(R,R,C.lng/180*Math.PI),s.aY(R,R,-C.lat/180*Math.PI),s.J(R,R,[0,0,1+c/s.bo]),s.aY(R,R,.5*Math.PI),s.K(R,R,[M,M,M]),R}getProjectionDataForCustomLayer(l=!0){const c=this.getProjectionData({overscaledTileID:new s.S(0,0,0,0,0),applyGlobeMatrix:l});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(l){}}class Sa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,C){return this._helper.interpolatePadding(l,c,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,C=!0){this._helper.resize(l,c,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,c){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new ns({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._globeness=1,this._mercatorTransform=new ws,this._verticalPerspectiveTransform=new hc}clone(){const l=new Sa;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const c=this._mercatorTransform.getProjectionData(l),C=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:c.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return s.b9(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.b9(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,c,C){const M=this._mercatorTransform.getPitchedTextCorrection(l,c,C),R=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,c,C);return s.b9(M,R,this._globeness)}projectTileCoordinates(l,c,C,M){return this.currentTransform.projectTileCoordinates(l,c,C,M)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){return this.currentTransform.lngLatToCameraDepth(l,c)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}getConstrained(l,c){return this.currentTransform.getConstrained(l,c)}calculateCenterFromCameraLngLatAlt(l,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,C,M)}setLocationAtPoint(l,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,c){return this.currentTransform.locationToScreenPoint(l,c)}screenPointToMercatorCoordinate(l,c){return this.currentTransform.screenPointToMercatorCoordinate(l,c)}screenPointToLocation(l,c){return this.currentTransform.screenPointToLocation(l,c)}isPointOnMapSurface(l,c){return this.currentTransform.isPointOnMapSurface(l,c)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,c){return this.currentTransform.getMatrixForModel(l,c)}getProjectionDataForCustomLayer(l=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return c;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return C.fallbackMatrix=c.mainMatrix,C}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class cl{get useGlobeControls(){return!0}handlePanInertia(l,c){const C=Zi(l,c);return Math.abs(C.lng-c.center.lng)>180&&(C.lng=c.center.lng+179.5*Math.sign(C.lng-c.center.lng)),{easingCenter:C,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,c){const C=l.around,M=c.screenPointToLocation(C);l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta);const R=c.zoom;l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta);const j=c.zoom-R;if(j===0)return;const $=s.bk(c.center.lng,M.lng),te=$/(Math.abs($/180)+1),oe=s.bk(c.center.lat,M.lat),be=c.getRayDirectionFromPixel(C),Ee=c.cameraPosition,Ie=-1*s.aS(Ee,be),qe=s.bf();s.aM(qe,Ee,[be[0]*Ie,be[1]*Ie,be[2]*Ie]);const Ve=s.bq(qe)-1,At=Math.exp(.5*-Math.max(Ve-.3,0)),ot=vi(c.worldSize,c.center.lat)/Math.min(c.width,c.height),ct=s.bc(ot,.9,.5,1,.25),yt=(1-s.aG(-j))*Math.min(At,ct),Et=c.center.lat,Tt=c.zoom,Rt=new s.N(c.center.lng+te*yt,s.ab(c.center.lat+oe*yt,-85.051129,s.aF));c.setLocationAtPoint(M,C);const zt=c.center,Pt=s.bc(Math.abs($),45,85,0,1),tn=s.bc(ot,.75,.35,0,1),Ht=Math.pow(Math.max(Pt,tn),.25),vn=s.bk(zt.lng,Rt.lng),_n=s.bk(zt.lat,Rt.lat);c.setCenter(new s.N(zt.lng+vn*Ht,zt.lat+_n*Ht).wrap()),c.setZoom(Tt+qr(Et,c.center.lat))}handleMapControlsPan(l,c,C){if(!l.panDelta)return;const M=c.center.lat,R=c.zoom;c.setCenter(Zi(l.panDelta,c).wrap()),c.setZoom(R+qr(M,c.center.lat))}cameraForBoxAndBearing(l,c,C,M,R){const j=El(l,c,C,M,R),$=c.left/R.width*2-1,te=(R.width-c.right)/R.width*2-1,oe=c.top/R.height*-2+1,be=(R.height-c.bottom)/R.height*-2+1,Ee=s.bk(C.getWest(),C.getEast())<0,Ie=Ee?C.getEast():C.getWest(),qe=Ee?C.getWest():C.getEast(),Ve=Math.max(C.getNorth(),C.getSouth()),At=Math.min(C.getNorth(),C.getSouth()),ot=Ie+.5*s.bk(Ie,qe),ct=Ve+.5*s.bk(Ve,At),yt=R.clone();yt.setCenter(j.center),yt.setBearing(j.bearing),yt.setPitch(0),yt.setRoll(0),yt.setZoom(j.zoom);const Et=yt.modelViewProjectionMatrix,Tt=[Ir(C.getNorthWest()),Ir(C.getNorthEast()),Ir(C.getSouthWest()),Ir(C.getSouthEast()),Ir(new s.N(qe,ct)),Ir(new s.N(Ie,ct)),Ir(new s.N(ot,Ve)),Ir(new s.N(ot,At))],Rt=Ir(j.center);let zt=Number.POSITIVE_INFINITY;for(const Pt of Tt)$<0&&(zt=cl.getLesserNonNegativeNonNull(zt,cl.solveVectorScale(Pt,Rt,Et,"x",$))),te>0&&(zt=cl.getLesserNonNegativeNonNull(zt,cl.solveVectorScale(Pt,Rt,Et,"x",te))),oe>0&&(zt=cl.getLesserNonNegativeNonNull(zt,cl.solveVectorScale(Pt,Rt,Et,"y",oe))),be<0&&(zt=cl.getLesserNonNegativeNonNull(zt,cl.solveVectorScale(Pt,Rt,Et,"y",be)));if(Number.isFinite(zt)&&zt!==0)return j.zoom=yt.zoom+s.a8(zt),j;Xa()}handleJumpToCenterZoom(l,c){const C=l.center.lat,M=l.getConstrained(c.center?s.N.convert(c.center):l.center,l.zoom).center;l.setCenter(M.wrap());const R=c.zoom!==void 0?+c.zoom:l.zoom+qr(C,M.lat);l.zoom!==R&&l.setZoom(R)}handleEaseTo(l,c){const C=l.zoom,M=l.center,R=l.padding,j={roll:l.roll,pitch:l.pitch,bearing:l.bearing},$={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},te=c.zoom!==void 0,oe=!l.isPaddingEqual(c.padding);let be=!1;const Ee=c.center?s.N.convert(c.center):M,Ie=l.getConstrained(Ee,C).center;du(l,Ie);const qe=l.clone();qe.setCenter(Ie),qe.setZoom(te?+c.zoom:C+qr(M.lat,Ee.lat)),qe.setBearing(c.bearing);const Ve=new s.P(s.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),s.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));qe.setLocationAtPoint(Ie,Ve);const At=(c.offset&&c.offsetAsPoint.mag())>0?qe.center:Ie,ot=te?+c.zoom:C+qr(M.lat,At.lat),ct=C+qr(M.lat,0),yt=ot+qr(At.lat,0),Et=s.bk(M.lng,At.lng),Tt=s.bk(M.lat,At.lat),Rt=s.aG(yt-ct);return be=ot!==C,{easeFunc:zt=>{if(s.b3(j,$)||Rs({startEulerAngles:j,endEulerAngles:$,tr:l,k:zt,useSlerp:j.roll!=$.roll}),oe&&l.interpolatePadding(R,c.padding,zt),c.around)s.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(c.around,c.aroundPoint);else{const Pt=yt>ct?Math.min(2,Rt):Math.max(.5,Rt),tn=Math.pow(Pt,1-zt),Ht=us(M,Et,Tt,zt*tn);l.setCenter(Ht.wrap())}if(be){const Pt=s.y.number(ct,yt,zt)+qr(0,l.center.lat);l.setZoom(Pt)}},isZooming:be,elevationCenter:At}}handleFlyTo(l,c){const C=c.zoom!==void 0,M=l.center,R=l.zoom,j=!l.isPaddingEqual(c.padding),$=l.getConstrained(s.N.convert(c.center||c.locationAtOffset),R).center,te=C?+c.zoom:l.zoom+qr(l.center.lat,$.lat),oe=l.clone();oe.setCenter($),j&&oe.setPadding(c.padding),oe.setZoom(te),oe.setBearing(c.bearing);const be=new s.P(s.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),s.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));oe.setLocationAtPoint($,be);const Ee=oe.center;du(l,Ee);const Ie=function(Et,Tt,Rt){const zt=Ir(Tt),Pt=Ir(Rt),tn=s.aS(zt,Pt),Ht=Math.acos(tn),vn=hi(Et);return Ht/(2*Math.PI)*vn}(l,M,Ee),qe=R+qr(M.lat,0),Ve=te+qr(Ee.lat,0),At=s.aG(Ve-qe);let ot;if(typeof c.minZoom=="number"){const Et=+c.minZoom+qr(Ee.lat,0),Tt=Math.min(Et,qe,Ve)+qr(0,Ee.lat),Rt=l.getConstrained(Ee,Tt).zoom+qr(Ee.lat,0);ot=s.aG(Rt-qe)}const ct=s.bk(M.lng,Ee.lng),yt=s.bk(M.lat,Ee.lat);return{easeFunc:(Et,Tt,Rt,zt)=>{const Pt=us(M,ct,yt,Rt),tn=Et===1?Ee:Pt;l.setCenter(tn.wrap());const Ht=qe+s.a8(Tt);l.setZoom(Et===1?te:Ht+qr(0,tn.lat))},scaleOfZoom:At,targetCenter:Ee,scaleOfMinZoom:ot,pixelPathLength:Ie}}static solveVectorScale(l,c,C,M,R){const j=M==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],$=[C[3],C[7],C[11],C[15]],te=l[0]*j[0]+l[1]*j[1]+l[2]*j[2],oe=l[0]*$[0]+l[1]*$[1]+l[2]*$[2],be=c[0]*j[0]+c[1]*j[1]+c[2]*j[2],Ee=c[0]*$[0]+c[1]*$[1]+c[2]*$[2];return be+R*oe===te+R*Ee||$[3]*(te-be)+j[3]*(Ee-oe)+te*Ee==be*oe?null:(be+j[3]-R*Ee-R*$[3])/(be-te-R*Ee+R*oe)}static getLesserNonNegativeNonNull(l,c){return c!==null&&c>=0&&c<l?c:l}}class lh{constructor(l){this._globe=l,this._mercatorCameraHelper=new oA,this._verticalPerspectiveCameraHelper=new cl}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,c){return this.currentHelper.handlePanInertia(l,c)}handleMapControlsRollPitchBearingZoom(l,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,c)}handleMapControlsPan(l,c,C){this.currentHelper.handleMapControlsPan(l,c,C)}cameraForBoxAndBearing(l,c,C,M,R){return this.currentHelper.cameraForBoxAndBearing(l,c,C,M,R)}handleJumpToCenterZoom(l,c){this.currentHelper.handleJumpToCenterZoom(l,c)}handleEaseTo(l,c){return this.currentHelper.handleEaseTo(l,c)}handleFlyTo(l,c){return this.currentHelper.handleFlyTo(l,c)}}const Ru=(T,l)=>s.t(T,l&&l.filter(c=>c.identifier!=="source.canvas")),Ku=s.br();class bd extends s.E{constructor(l,c={}){super(),this._rtlPluginLoaded=()=>{for(const C in this.sourceCaches){const M=this.sourceCaches[C].getSource().type;M!=="vector"&&M!=="geojson"||this.sourceCaches[C].reload()}},this.map=l,this.dispatcher=new Lt(Ut(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",(C,M)=>this.getGlyphs(C,M)),this.dispatcher.registerMessageHandler("GI",(C,M)=>this.getImages(C,M)),this.imageManager=new ce,this.imageManager.setEventedParent(this),this.glyphManager=new Pe(l._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Te(256,512),this.crossTileSymbolIndex=new js,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bs,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.bt()),ue().on(Qn,this._rtlPluginLoaded),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;const M=this.sourceCaches[C.sourceId];if(!M)return;const R=M.getSource();if(R&&R.vectorLayerIds)for(const j in this._layers){const $=this._layers[j];$.source===R.id&&this._validateLayer($)}})}loadURL(l,c={},C){this.fire(new s.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const M=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const R=this._loadStyleRequest;s.h(M,this._loadStyleRequest).then(j=>{this._loadStyleRequest=null,this._load(j.data,c,C)}).catch(j=>{this._loadStyleRequest=null,j&&!R.signal.aborted&&this.fire(new s.j(j))})}loadJSON(l,c={},C){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(l,c,C)}).catch(()=>{})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(Ku,{validate:!1})}_load(l,c,C){var M,R;const j=c.transformStyle?c.transformStyle(C,l):l;if(!c.validate||!Ru(this,s.u(j))){this._loaded=!0,this.stylesheet=j;for(const $ in j.sources)this.addSource($,j.sources[$],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs),this._createLayers(),this.light=new ze(this.stylesheet.light),this._setProjectionInternal(((M=this.stylesheet.projection)===null||M===void 0?void 0:M.type)||"mercator"),this.sky=new ut(this.stylesheet.sky),this.map.setTerrain((R=this.stylesheet.terrain)!==null&&R!==void 0?R:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){const l=s.bu(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of l){const C=s.bv(c);C.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=C}}_loadSprite(l,c=!1,C=void 0){let M;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(R,j,$,te){return s._(this,void 0,void 0,function*(){const oe=J(R),be=$>1?"@2x":"",Ee={},Ie={};for(const{id:qe,url:Ve}of oe){const At=j.transformRequest(N(Ve,be,".json"),"SpriteJSON");Ee[qe]=s.h(At,te);const ot=j.transformRequest(N(Ve,be,".png"),"SpriteImage");Ie[qe]=X.getImage(ot,te)}return yield Promise.all([...Object.values(Ee),...Object.values(Ie)]),function(qe,Ve){return s._(this,void 0,void 0,function*(){const At={};for(const ot in qe){At[ot]={};const ct=S.getImageCanvasContext((yield Ve[ot]).data),yt=(yield qe[ot]).data;for(const Et in yt){const{width:Tt,height:Rt,x:zt,y:Pt,sdf:tn,pixelRatio:Ht,stretchX:vn,stretchY:_n,content:gn,textFitWidth:On,textFitHeight:Un}=yt[Et];At[ot][Et]={data:null,pixelRatio:Ht,sdf:tn,stretchX:vn,stretchY:_n,content:gn,textFitWidth:On,textFitHeight:Un,spriteData:{width:Tt,height:Rt,x:zt,y:Pt,context:ct}}}}return At})}(Ee,Ie)})}(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(R=>{if(this._spriteRequest=null,R)for(const j in R){this._spritesImagesIds[j]=[];const $=this._spritesImagesIds[j]?this._spritesImagesIds[j].filter(te=>!(te in R)):[];for(const te of $)this.imageManager.removeImage(te),this._changedImages[te]=!0;for(const te in R[j]){const oe=j==="default"?te:`${j}:${te}`;this._spritesImagesIds[j].push(oe),oe in this.imageManager.images?this.imageManager.updateImage(oe,R[j][te],!1):this.imageManager.addImage(oe,R[j][te]),c&&(this._changedImages[oe]=!0)}}}).catch(R=>{this._spriteRequest=null,M=R,this.fire(new s.j(M))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),C&&C(M)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(l){const c=this.sourceCaches[l.source];if(!c)return;const C=l.sourceLayer;if(!C)return;const M=c.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(C)===-1)&&this.fire(new s.j(new Error(`Source layer "${C}" does not exist on source "${M.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,c=!1){const C=this._serializedAllLayers();if(!l||l.length===0)return Object.values(c?s.bw(C):C);const M=[];for(const R of l)if(C[R]){const j=c?s.bw(C[R]):C[R];M.push(j)}return M}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const c=Object.keys(this._layers);for(const C of c){const M=this._layers[C];M.type!=="custom"&&(l[C]=M.serialize())}return l}hasTransitions(){var l,c,C;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const M in this.sourceCaches)if(this.sourceCaches[M].hasTransition())return!0;for(const M in this._layers)if(this._layers[M].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const c=this._changed;if(c){const M=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(M.length||R.length)&&this._updateWorkerLayers(M,R);for(const j in this._updatedSources){const $=this._updatedSources[j];if($==="reload")this._reloadSource(j);else{if($!=="clear")throw new Error(`Invalid action ${$}`);this._clearSource(j)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const j in this._updatedPaintProps)this._layers[j].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const C={};for(const M in this.sourceCaches){const R=this.sourceCaches[M];C[M]=R.used,R.used=!1}for(const M of this._order){const R=this._layers[M];R.recalculate(l,this._availableImages),!R.isHidden(l.zoom)&&R.source&&(this.sourceCaches[R.source].used=!0)}for(const M in C){const R=this.sourceCaches[M];!!C[M]!=!!R.used&&R.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,c&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,c={}){var C;this._checkLoaded();const M=this.serialize();if(l=c.transformStyle?c.transformStyle(M,l):l,((C=c.validate)===null||C===void 0||C)&&Ru(this,s.u(l)))return!1;(l=s.bw(l)).layers=s.bu(l.layers);const R=s.bx(M,l),j=this._getOperationsToPerform(R);if(j.unimplemented.length>0)throw new Error(`Unimplemented: ${j.unimplemented.join(", ")}.`);if(j.operations.length===0)return!1;for(const $ of j.operations)$();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const c=[],C=[];for(const M of l)switch(M.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,M.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,M.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,M.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,M.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,M.args));break;case"addSource":c.push(()=>this.addSource.apply(this,M.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,M.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,M.args));break;case"setLight":c.push(()=>this.setLight.apply(this,M.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,M.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,M.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,M.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,M.args));break;case"setSky":c.push(()=>this.setSky.apply(this,M.args));break;case"setProjection":this.setProjection.apply(this,M.args);break;case"setTransition":c.push(()=>{});break;default:C.push(M.command)}return{operations:c,unimplemented:C}}addImage(l,c){if(this.getImage(l))return this.fire(new s.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,c),this._afterImageUpdated(l)}updateImage(l,c){this.imageManager.updateImage(l,c)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new s.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,c,C={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(s.u.source,`sources.${l}`,c,null,C))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const M=this.sourceCaches[l]=new fe(l,c,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:l})),M.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===l)return this.fire(new s.j(new Error(`Source "${l}" cannot be removed while layer "${C}" is using it.`)));const c=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],c.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,c){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const C=this.sourceCaches[l].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(c),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,c,C={}){this._checkLoaded();const M=l.id;if(this.getLayer(M))return void this.fire(new s.j(new Error(`Layer "${M}" already exists on this map.`)));let R;if(l.type==="custom"){if(Ru(this,s.by(l)))return;R=s.bv(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(M,l.source),l=s.bw(l),l=s.e(l,{source:M})),this._validate(s.u.layer,`layers.${M}`,l,{arrayIndex:-1},C))return;R=s.bv(l),this._validateLayer(R),R.setEventedParent(this,{layer:{id:M}})}const j=c?this._order.indexOf(c):this._order.length;if(c&&j===-1)this.fire(new s.j(new Error(`Cannot add layer "${M}" before non-existing layer "${c}".`)));else{if(this._order.splice(j,0,M),this._layerOrderChanged=!0,this._layers[M]=R,this._removedLayers[M]&&R.source&&R.type!=="custom"){const $=this._removedLayers[M];delete this._removedLayers[M],$.type!==R.type?this._updatedSources[R.source]="clear":(this._updatedSources[R.source]="reload",this.sourceCaches[R.source].pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map)}}moveLayer(l,c){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new s.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===c)return;const C=this._order.indexOf(l);this._order.splice(C,1);const M=c?this._order.indexOf(c):this._order.length;c&&M===-1?this.fire(new s.j(new Error(`Cannot move layer "${l}" before non-existing layer "${c}".`))):(this._order.splice(M,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const c=this._layers[l];if(!c)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${l}".`)));c.setEventedParent(null);const C=this._order.indexOf(l);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=c,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],c.onRemove&&c.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,c,C){this._checkLoaded();const M=this.getLayer(l);M?M.minzoom===c&&M.maxzoom===C||(c!=null&&(M.minzoom=c),C!=null&&(M.maxzoom=C),this._updateLayer(M)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,c,C={}){this._checkLoaded();const M=this.getLayer(l);if(M){if(!s.bz(M.filter,c))return c==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(s.u.filter,`layers.${M.id}.filter`,c,null,C)||(M.filter=s.bw(c),this._updateLayer(M)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return s.bw(this.getLayer(l).filter)}setLayoutProperty(l,c,C,M={}){this._checkLoaded();const R=this.getLayer(l);R?s.bz(R.getLayoutProperty(c),C)||(R.setLayoutProperty(c,C,M),this._updateLayer(R)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,c){const C=this.getLayer(l);if(C)return C.getLayoutProperty(c);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,c,C,M={}){this._checkLoaded();const R=this.getLayer(l);R?s.bz(R.getPaintProperty(c),C)||(R.setPaintProperty(c,C,M)&&this._updateLayer(R),this._changed=!0,this._updatedPaintProps[l]=!0,this._serializedLayers=null):this.fire(new s.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,c){return this.getLayer(l).getPaintProperty(c)}setFeatureState(l,c){this._checkLoaded();const C=l.source,M=l.sourceLayer,R=this.sourceCaches[C];if(R===void 0)return void this.fire(new s.j(new Error(`The source '${C}' does not exist in the map's style.`)));const j=R.getSource().type;j==="geojson"&&M?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):j!=="vector"||M?(l.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),R.setFeatureState(M,l.id,c)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,c){this._checkLoaded();const C=l.source,M=this.sourceCaches[C];if(M===void 0)return void this.fire(new s.j(new Error(`The source '${C}' does not exist in the map's style.`)));const R=M.getSource().type,j=R==="vector"?l.sourceLayer:void 0;R!=="vector"||j?c&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(j,l.id,c):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const c=l.source,C=l.sourceLayer,M=this.sourceCaches[c];if(M!==void 0)return M.getSource().type!=="vector"||C?(l.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),M.getFeatureState(C,l.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=s.bA(this.sourceCaches,R=>R.serialize()),c=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,M=this.stylesheet;return s.bB({version:M.version,name:M.name,metadata:M.metadata,light:M.light,sky:M.sky,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,projection:M.projection,sources:l,layers:c,terrain:C},R=>R!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const c=j=>this._layers[j].type==="fill-extrusion",C={},M=[];for(let j=this._order.length-1;j>=0;j--){const $=this._order[j];if(c($)){C[$]=j;for(const te of l){const oe=te[$];if(oe)for(const be of oe)M.push(be)}}}M.sort((j,$)=>$.intersectionZ-j.intersectionZ);const R=[];for(let j=this._order.length-1;j>=0;j--){const $=this._order[j];if(c($))for(let te=M.length-1;te>=0;te--){const oe=M[te].feature;if(C[oe.layer.id]<j)break;R.push(oe),M.pop()}else for(const te of l){const oe=te[$];if(oe)for(const be of oe)R.push(be.feature)}}return R}queryRenderedFeatures(l,c,C){c&&c.filter&&this._validate(s.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);const M={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new s.j(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const oe of c.layers){const be=this._layers[oe];if(!be)return this.fire(new s.j(new Error(`The layer '${oe}' does not exist in the map's style and cannot be queried for features.`))),[];M[be.source]=!0}}const R=[];c.availableImages=this._availableImages;const j=this._serializedAllLayers(),$=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,te=Object.assign(Object.assign({},c),{layers:$});for(const oe in this.sourceCaches)c.layers&&!M[oe]||R.push(Oe(this.sourceCaches[oe],this._layers,j,l,te,C));return this.placement&&R.push(function(oe,be,Ee,Ie,qe,Ve,At){const ot={},ct=Ve.queryRenderedSymbols(Ie),yt=[];for(const Et of Object.keys(ct).map(Number))yt.push(At[Et]);yt.sort(Je);for(const Et of yt){const Tt=Et.featureIndex.lookupSymbolFeatures(ct[Et.bucketInstanceId],be,Et.bucketIndex,Et.sourceLayerIndex,qe.filter,qe.layers,qe.availableImages,oe);for(const Rt in Tt){const zt=ot[Rt]=ot[Rt]||[],Pt=Tt[Rt];Pt.sort((tn,Ht)=>{const vn=Et.featureSortOrder;if(vn){const _n=vn.indexOf(tn.featureIndex);return vn.indexOf(Ht.featureIndex)-_n}return Ht.featureIndex-tn.featureIndex});for(const tn of Pt)zt.push(tn)}}return function(Et,Tt,Rt){for(const zt in Et)for(const Pt of Et[zt])Mt(Pt,Rt[Tt[zt].source]);return Et}(ot,oe,Ee)}(this._layers,j,this.sourceCaches,l,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(l,c){c&&c.filter&&this._validate(s.u.filter,"querySourceFeatures.filter",c.filter,null,c);const C=this.sourceCaches[l];return C?function(M,R){const j=M.getRenderableIds().map(oe=>M.getTileByID(oe)),$=[],te={};for(let oe=0;oe<j.length;oe++){const be=j[oe],Ee=be.tileID.canonical.key;te[Ee]||(te[Ee]=!0,be.querySourceFeatures($,R))}return $}(C,c):[]}getLight(){return this.light.getLight()}setLight(l,c={}){this._checkLoaded();const C=this.light.getLight();let M=!1;for(const j in l)if(!s.bz(l[j],C[j])){M=!0;break}if(!M)return;const R={now:S.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,c),this.light.updateTransitions(R)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,c={}){this._checkLoaded();const C=this.getSky();let M=!1;if(!l&&!C)return;if(l&&!C)M=!0;else if(!l&&C)M=!0;else for(const j in l)if(!s.bz(l[j],C[j])){M=!0;break}if(!M)return;const R={now:S.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,c),this.sky.updateTransitions(R)}_setProjectionInternal(l){const c=function(C){if(Array.isArray(C)){const M=new si({type:C});return{projection:M,transform:new Sa,cameraHelper:new lh(M)}}switch(C){case"mercator":return{projection:new ls,transform:new ws,cameraHelper:new oA};case"globe":{const M=new si({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new Sa,cameraHelper:new lh(M)}}case"vertical-perspective":return{projection:new Or,transform:new hc,cameraHelper:new cl};default:return s.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new ls,transform:new ws,cameraHelper:new oA}}}(l);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const C in this.sourceCaches)this.sourceCaches[C].reload()}_validate(l,c,C,M,R={}){return(!R||R.validate!==!1)&&Ru(this,l.call(s.u,s.e({key:c,style:this.serialize(),value:C,styleSpec:s.v},M)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ue().off(Qn,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const C=this.sourceCaches[c];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const c in this.sourceCaches)this.sourceCaches[c].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,c,C,M,R=!1){let j=!1,$=!1;const te={};for(const oe of this._order){const be=this._layers[oe];if(be.type!=="symbol")continue;if(!te[be.source]){const Ie=this.sourceCaches[be.source];te[be.source]=Ie.getRenderableIds(!0).map(qe=>Ie.getTileByID(qe)).sort((qe,Ve)=>Ve.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(Ve.tileID)?-1:1))}const Ee=this.crossTileSymbolIndex.addLayer(be,te[be.source],l.center.lng);j=j||Ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((R=R||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(S.now(),l.zoom))&&(this.pauseablePlacement=new An(l,this.map.terrain,this._order,R,c,C,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,te),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(S.now()),$=!0),j&&this.pauseablePlacement.placement.setStale()),$||j)for(const oe of this._order){const be=this._layers[oe];be.type==="symbol"&&this.placement.updateLayerOpacities(be,te[be.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(S.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,c){return s._(this,void 0,void 0,function*(){const C=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,c.icons),C})}getGlyphs(l,c){return s._(this,void 0,void 0,function*(){const C=yield this.glyphManager.getGlyphs(c.stacks),M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,[""]),C})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,c={}){this._checkLoaded(),l&&this._validate(s.u.glyphs,"glyphs",l,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,c,C={},M){this._checkLoaded();const R=[{id:l,url:c}],j=[...J(this.stylesheet.sprite),...R];this._validate(s.u.sprite,"sprite",j,null,C)||(this.stylesheet.sprite=j,this._loadSprite(R,!0,M))}removeSprite(l){this._checkLoaded();const c=J(this.stylesheet.sprite);if(c.find(C=>C.id===l)){if(this._spritesImagesIds[l])for(const C of this._spritesImagesIds[l])this.imageManager.removeImage(C),this._changedImages[C]=!0;c.splice(c.findIndex(C=>C.id===l),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return J(this.stylesheet.sprite)}setSprite(l,c={},C){this._checkLoaded(),l&&this._validate(s.u.sprite,"sprite",l,null,c)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,C):(this._unloadSprite(),C&&C(null)))}}var Ms=s.aA([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Du{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,c,C,M,R,j,$,te,oe){this.context=l;let be=this.boundPaintVertexBuffers.length!==M.length;for(let Ee=0;!be&&Ee<M.length;Ee++)this.boundPaintVertexBuffers[Ee]!==M[Ee]&&(be=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==C||be||this.boundIndexBuffer!==R||this.boundVertexOffset!==j||this.boundDynamicVertexBuffer!==$||this.boundDynamicVertexBuffer2!==te||this.boundDynamicVertexBuffer3!==oe?this.freshBind(c,C,M,R,j,$,te,oe):(l.bindVertexArray.set(this.vao),$&&$.bind(),R&&R.dynamicDraw&&R.bind(),te&&te.bind(),oe&&oe.bind())}freshBind(l,c,C,M,R,j,$,te){const oe=l.numAttributes,be=this.context,Ee=be.gl;this.vao&&this.destroy(),this.vao=be.createVertexArray(),be.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=M,this.boundVertexOffset=R,this.boundDynamicVertexBuffer=j,this.boundDynamicVertexBuffer2=$,this.boundDynamicVertexBuffer3=te,c.enableAttributes(Ee,l);for(const Ie of C)Ie.enableAttributes(Ee,l);j&&j.enableAttributes(Ee,l),$&&$.enableAttributes(Ee,l),te&&te.enableAttributes(Ee,l),c.bind(),c.setVertexAttribPointers(Ee,l,R);for(const Ie of C)Ie.bind(),Ie.setVertexAttribPointers(Ee,l,R);j&&(j.bind(),j.setVertexAttribPointers(Ee,l,R)),M&&M.bind(),$&&($.bind(),$.setVertexAttribPointers(Ee,l,R)),te&&(te.bind(),te.setVertexAttribPointers(Ee,l,R)),be.currentNumAttributes=oe}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const uh=(T,l,c,C,M)=>({u_texture:0,u_ele_delta:T,u_fog_matrix:l,u_fog_color:c?c.properties.get("fog-color"):s.b4.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:M?0:c?c.calculateFogBlendOpacity(C):0,u_horizon_color:c?c.properties.get("horizon-color"):s.b4.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:M?1:0}),gp={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function sA(T){const l=[];for(let c=0;c<T.length;c++){if(T[c]===null)continue;const C=T[c].split(" ");l.push(C.pop())}return l}class qh{constructor(l,c,C,M,R,j,$,te){const oe=l.gl;this.program=oe.createProgram();const be=sA(c.staticAttributes),Ee=C?C.getBinderAttributes():[],Ie=be.concat(Ee),qe=ri.prelude.staticUniforms?sA(ri.prelude.staticUniforms):[],Ve=$.staticUniforms?sA($.staticUniforms):[],At=c.staticUniforms?sA(c.staticUniforms):[],ot=C?C.getBinderUniforms():[],ct=qe.concat(Ve).concat(At).concat(ot),yt=[];for(const Ht of ct)yt.indexOf(Ht)<0&&yt.push(Ht);const Et=C?C.defines():[];Pi(oe)&&Et.unshift("#version 300 es"),R&&Et.push("#define OVERDRAW_INSPECTOR;"),j&&Et.push("#define TERRAIN3D;"),te&&Et.push(te);let Tt=Et.concat(ri.prelude.fragmentSource,$.fragmentSource,c.fragmentSource).join(`
`),Rt=Et.concat(ri.prelude.vertexSource,$.vertexSource,c.vertexSource).join(`
`);Pi(oe)||(Tt=function(Ht){return Ht.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Tt),Rt=function(Ht){return Ht.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Rt));const zt=oe.createShader(oe.FRAGMENT_SHADER);if(oe.isContextLost())return void(this.failedToCreate=!0);if(oe.shaderSource(zt,Tt),oe.compileShader(zt),!oe.getShaderParameter(zt,oe.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${oe.getShaderInfoLog(zt)}`);oe.attachShader(this.program,zt);const Pt=oe.createShader(oe.VERTEX_SHADER);if(oe.isContextLost())return void(this.failedToCreate=!0);if(oe.shaderSource(Pt,Rt),oe.compileShader(Pt),!oe.getShaderParameter(Pt,oe.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${oe.getShaderInfoLog(Pt)}`);oe.attachShader(this.program,Pt),this.attributes={};const tn={};this.numAttributes=Ie.length;for(let Ht=0;Ht<this.numAttributes;Ht++)Ie[Ht]&&(oe.bindAttribLocation(this.program,Ht,Ie[Ht]),this.attributes[Ie[Ht]]=Ht);if(oe.linkProgram(this.program),!oe.getProgramParameter(this.program,oe.LINK_STATUS))throw new Error(`Program failed to link: ${oe.getProgramInfoLog(this.program)}`);oe.deleteShader(Pt),oe.deleteShader(zt);for(let Ht=0;Ht<yt.length;Ht++){const vn=yt[Ht];if(vn&&!tn[vn]){const _n=oe.getUniformLocation(this.program,vn);_n&&(tn[vn]=_n)}}this.fixedUniforms=M(l,tn),this.terrainUniforms=((Ht,vn)=>({u_depth:new s.bC(Ht,vn.u_depth),u_terrain:new s.bC(Ht,vn.u_terrain),u_terrain_dim:new s.b5(Ht,vn.u_terrain_dim),u_terrain_matrix:new s.bD(Ht,vn.u_terrain_matrix),u_terrain_unpack:new s.bE(Ht,vn.u_terrain_unpack),u_terrain_exaggeration:new s.b5(Ht,vn.u_terrain_exaggeration)}))(l,tn),this.projectionUniforms=((Ht,vn)=>({u_projection_matrix:new s.bD(Ht,vn.u_projection_matrix),u_projection_tile_mercator_coords:new s.bE(Ht,vn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bE(Ht,vn.u_projection_clipping_plane),u_projection_transition:new s.b5(Ht,vn.u_projection_transition),u_projection_fallback_matrix:new s.bD(Ht,vn.u_projection_fallback_matrix)}))(l,tn),this.binderUniforms=C?C.getUniforms(l,tn):[]}draw(l,c,C,M,R,j,$,te,oe,be,Ee,Ie,qe,Ve,At,ot,ct,yt,Et){const Tt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(C),l.setStencilMode(M),l.setColorMode(R),l.setCullFace(j),te){l.activeTexture.set(Tt.TEXTURE2),Tt.bindTexture(Tt.TEXTURE_2D,te.depthTexture),l.activeTexture.set(Tt.TEXTURE3),Tt.bindTexture(Tt.TEXTURE_2D,te.texture);for(const zt in this.terrainUniforms)this.terrainUniforms[zt].set(te[zt])}if(oe)for(const zt in oe)this.projectionUniforms[gp[zt]].set(oe[zt]);if($)for(const zt in this.fixedUniforms)this.fixedUniforms[zt].set($[zt]);ot&&ot.setUniforms(l,this.binderUniforms,Ve,{zoom:At});let Rt=0;switch(c){case Tt.LINES:Rt=2;break;case Tt.TRIANGLES:Rt=3;break;case Tt.LINE_STRIP:Rt=1}for(const zt of qe.get()){const Pt=zt.vaos||(zt.vaos={});(Pt[be]||(Pt[be]=new Du)).bind(l,this,Ee,ot?ot.getPaintVertexBuffers():[],Ie,zt.vertexOffset,ct,yt,Et),Tt.drawElements(c,zt.primitiveLength*Rt,Tt.UNSIGNED_SHORT,zt.primitiveOffset*Rt*2)}}}function Lc(T,l,c){const C=1/s.at(c,1,l.transform.tileZoom),M=Math.pow(2,c.tileID.overscaledZ),R=c.tileSize*Math.pow(2,l.transform.tileZoom)/M,j=R*(c.tileID.canonical.x+c.tileID.wrap*M),$=R*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[C,T.fromScale,T.toScale],u_fade:T.t,u_pixel_coord_upper:[j>>16,$>>16],u_pixel_coord_lower:[65535&j,65535&$]}}const yp=(T,l,c,C)=>{const M=T.style.light,R=M.properties.get("position"),j=[R.x,R.y,R.z],$=s.bI();M.properties.get("anchor")==="viewport"&&s.bJ($,T.transform.bearingInRadians),s.bK(j,j,$);const te=T.transform.transformLightDirection(j),oe=M.properties.get("color");return{u_lightpos:j,u_lightpos_globe:te,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[oe.r,oe.g,oe.b],u_vertical_gradient:+l,u_opacity:c,u_fill_translate:C}},Rf=(T,l,c,C,M,R,j)=>s.e(yp(T,l,c,C),Lc(R,T,j),{u_height_factor:-Math.pow(2,M.overscaledZ)/j.tileSize/8}),dc=(T,l,c,C)=>s.e(Lc(l,T,c),{u_fill_translate:C}),Zs=(T,l)=>({u_world:T,u_fill_translate:l}),xd=(T,l,c,C,M)=>s.e(dc(T,l,c,M),{u_world:C}),ef=(T,l,c,C,M)=>{const R=T.transform;let j,$,te=0;if(c.paint.get("circle-pitch-alignment")==="map"){const oe=s.at(l,1,R.zoom);j=!0,$=[oe,oe],te=oe/(s.X*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*M}else j=!1,$=R.pixelsToGLUnits;return{u_camera_to_center_distance:R.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+j,u_device_pixel_ratio:T.pixelRatio,u_extrude_scale:$,u_globe_extrude_scale:te,u_translate:C}},Ah=T=>({u_pixel_extrude_scale:[1/T.width,1/T.height]}),tf=T=>({u_viewport_size:[T.width,T.height]}),ch=(T,l=1)=>({u_color:T,u_overlay:0,u_overlay_scale:l}),fc=(T,l,c,C)=>{const M=s.at(T,1,l)/(s.X*Math.pow(2,T.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:s.at(T,1,l),u_intensity:c,u_globe_extrude_scale:M}},wd=(T,l,c,C)=>{const M=s.H();s.bL(M,0,T.width,T.height,0,0,1);const R=T.context.gl;return{u_matrix:M,u_world:[R.drawingBufferWidth,R.drawingBufferHeight],u_image:c,u_color_ramp:C,u_opacity:l.paint.get("heatmap-opacity")}},Md=(T,l,c)=>{const C=c.paint.get("hillshade-shadow-color"),M=c.paint.get("hillshade-highlight-color"),R=c.paint.get("hillshade-accent-color");let j=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(j+=T.transform.bearingInRadians),{u_image:0,u_latrange:am(0,l.tileID),u_light:[c.paint.get("hillshade-exaggeration"),j],u_shadow:C,u_highlight:M,u_accent:R}},hh=(T,l)=>{const c=l.stride,C=s.H();return s.bL(C,0,s.X,-8192,0,0,1),s.J(C,C,[0,-8192,0]),{u_matrix:C,u_image:1,u_dimension:[c,c],u_zoom:T.overscaledZ,u_unpack:l.getUnpackVector()}};function am(T,l){const c=Math.pow(2,l.canonical.z),C=l.canonical.y;return[new s.Y(0,C/c).toLngLat().lat,new s.Y(0,(C+1)/c).toLngLat().lat]}const Fc=(T,l,c,C)=>{const M=T.transform;return{u_translation:Uc(T,l,c),u_ratio:C/s.at(l,1,M.zoom),u_device_pixel_ratio:T.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},pu=(T,l,c,C,M)=>s.e(Fc(T,l,c,C),{u_image:0,u_image_height:M}),Sd=(T,l,c,C,M)=>{const R=T.transform,j=aA(l,R);return{u_translation:Uc(T,l,c),u_texsize:l.imageAtlasTexture.size,u_ratio:C/s.at(l,1,R.zoom),u_device_pixel_ratio:T.pixelRatio,u_image:0,u_scale:[j,M.fromScale,M.toScale],u_fade:M.t,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]]}},mu=(T,l,c,C,M,R)=>{const j=T.lineAtlas,$=aA(l,T.transform),te=c.layout.get("line-cap")==="round",oe=j.getDash(M.from,te),be=j.getDash(M.to,te),Ee=oe.width*R.fromScale,Ie=be.width*R.toScale;return s.e(Fc(T,l,c,C),{u_patternscale_a:[$/Ee,-oe.height/2],u_patternscale_b:[$/Ie,-be.height/2],u_sdfgamma:j.width/(256*Math.min(Ee,Ie)*T.pixelRatio)/2,u_image:0,u_tex_y_a:oe.y,u_tex_y_b:be.y,u_mix:R.t})};function aA(T,l){return 1/s.at(T,1,l.tileZoom)}function Uc(T,l,c){return s.au(T.transform,l,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Yh=(T,l,c,C,M)=>{return{u_tl_parent:T,u_scale_parent:l,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(j=C.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(R=C.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:nf(C.paint.get("raster-hue-rotate")),u_coords_top:[M[0].x,M[0].y,M[1].x,M[1].y],u_coords_bottom:[M[3].x,M[3].y,M[2].x,M[2].y]};var R,j};function nf(T){T*=Math.PI/180;const l=Math.sin(T),c=Math.cos(T);return[(2*c+1)/3,(-Math.sqrt(3)*l-c+1)/3,(Math.sqrt(3)*l-c+1)/3]}const iu=(T,l,c,C,M,R,j,$,te,oe,be,Ee,Ie)=>{const qe=j.transform;return{u_is_size_zoom_constant:+(T==="constant"||T==="source"),u_is_size_feature_constant:+(T==="constant"||T==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:qe.cameraToCenterDistance,u_pitch:qe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:qe.width/qe.height,u_fade_change:j.options.fadeDuration?j.symbolFadeChange:1,u_label_plane_matrix:$,u_coord_matrix:te,u_is_text:+be,u_pitch_with_map:+C,u_is_along_line:M,u_is_variable_anchor:R,u_texsize:Ee,u_texture:0,u_translation:oe,u_pitched_scale:Ie}},Bl=(T,l,c,C,M,R,j,$,te,oe,be,Ee,Ie,qe)=>{const Ve=j.transform;return s.e(iu(T,l,c,C,M,R,j,$,te,oe,be,Ee,qe),{u_gamma_scale:C?Math.cos(Ve.pitch*Math.PI/180)*Ve.cameraToCenterDistance:1,u_device_pixel_ratio:j.pixelRatio,u_is_halo:1})},WA=(T,l,c,C,M,R,j,$,te,oe,be,Ee,Ie)=>s.e(Bl(T,l,c,C,M,R,j,$,te,oe,!0,be,0,Ie),{u_texsize_icon:Ee,u_texture_icon:1}),zc=(T,l)=>({u_opacity:T,u_color:l}),rf=(T,l,c,C,M)=>s.e(function(R,j,$,te){const oe=$.imageManager.getPattern(R.from.toString()),be=$.imageManager.getPattern(R.to.toString()),{width:Ee,height:Ie}=$.imageManager.getPixelSize(),qe=Math.pow(2,te.tileID.overscaledZ),Ve=te.tileSize*Math.pow(2,$.transform.tileZoom)/qe,At=Ve*(te.tileID.canonical.x+te.tileID.wrap*qe),ot=Ve*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:oe.tl,u_pattern_br_a:oe.br,u_pattern_tl_b:be.tl,u_pattern_br_b:be.br,u_texsize:[Ee,Ie],u_mix:j.t,u_pattern_size_a:oe.displaySize,u_pattern_size_b:be.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/s.at(te,1,$.transform.tileZoom),u_pixel_coord_upper:[At>>16,ot>>16],u_pixel_coord_lower:[65535&At,65535&ot]}}(c,M,l,C),{u_opacity:T}),Kf=(T,l)=>{},dh={fillExtrusion:(T,l)=>({u_lightpos:new s.bG(T,l.u_lightpos),u_lightpos_globe:new s.bG(T,l.u_lightpos_globe),u_lightintensity:new s.b5(T,l.u_lightintensity),u_lightcolor:new s.bG(T,l.u_lightcolor),u_vertical_gradient:new s.b5(T,l.u_vertical_gradient),u_opacity:new s.b5(T,l.u_opacity),u_fill_translate:new s.bH(T,l.u_fill_translate)}),fillExtrusionPattern:(T,l)=>({u_lightpos:new s.bG(T,l.u_lightpos),u_lightpos_globe:new s.bG(T,l.u_lightpos_globe),u_lightintensity:new s.b5(T,l.u_lightintensity),u_lightcolor:new s.bG(T,l.u_lightcolor),u_vertical_gradient:new s.b5(T,l.u_vertical_gradient),u_height_factor:new s.b5(T,l.u_height_factor),u_opacity:new s.b5(T,l.u_opacity),u_fill_translate:new s.bH(T,l.u_fill_translate),u_image:new s.bC(T,l.u_image),u_texsize:new s.bH(T,l.u_texsize),u_pixel_coord_upper:new s.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.bH(T,l.u_pixel_coord_lower),u_scale:new s.bG(T,l.u_scale),u_fade:new s.b5(T,l.u_fade)}),fill:(T,l)=>({u_fill_translate:new s.bH(T,l.u_fill_translate)}),fillPattern:(T,l)=>({u_image:new s.bC(T,l.u_image),u_texsize:new s.bH(T,l.u_texsize),u_pixel_coord_upper:new s.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.bH(T,l.u_pixel_coord_lower),u_scale:new s.bG(T,l.u_scale),u_fade:new s.b5(T,l.u_fade),u_fill_translate:new s.bH(T,l.u_fill_translate)}),fillOutline:(T,l)=>({u_world:new s.bH(T,l.u_world),u_fill_translate:new s.bH(T,l.u_fill_translate)}),fillOutlinePattern:(T,l)=>({u_world:new s.bH(T,l.u_world),u_image:new s.bC(T,l.u_image),u_texsize:new s.bH(T,l.u_texsize),u_pixel_coord_upper:new s.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.bH(T,l.u_pixel_coord_lower),u_scale:new s.bG(T,l.u_scale),u_fade:new s.b5(T,l.u_fade),u_fill_translate:new s.bH(T,l.u_fill_translate)}),circle:(T,l)=>({u_camera_to_center_distance:new s.b5(T,l.u_camera_to_center_distance),u_scale_with_map:new s.bC(T,l.u_scale_with_map),u_pitch_with_map:new s.bC(T,l.u_pitch_with_map),u_extrude_scale:new s.bH(T,l.u_extrude_scale),u_device_pixel_ratio:new s.b5(T,l.u_device_pixel_ratio),u_globe_extrude_scale:new s.b5(T,l.u_globe_extrude_scale),u_translate:new s.bH(T,l.u_translate)}),collisionBox:(T,l)=>({u_pixel_extrude_scale:new s.bH(T,l.u_pixel_extrude_scale)}),collisionCircle:(T,l)=>({u_viewport_size:new s.bH(T,l.u_viewport_size)}),debug:(T,l)=>({u_color:new s.bF(T,l.u_color),u_overlay:new s.bC(T,l.u_overlay),u_overlay_scale:new s.b5(T,l.u_overlay_scale)}),depth:Kf,clippingMask:Kf,heatmap:(T,l)=>({u_extrude_scale:new s.b5(T,l.u_extrude_scale),u_intensity:new s.b5(T,l.u_intensity),u_globe_extrude_scale:new s.b5(T,l.u_globe_extrude_scale)}),heatmapTexture:(T,l)=>({u_matrix:new s.bD(T,l.u_matrix),u_world:new s.bH(T,l.u_world),u_image:new s.bC(T,l.u_image),u_color_ramp:new s.bC(T,l.u_color_ramp),u_opacity:new s.b5(T,l.u_opacity)}),hillshade:(T,l)=>({u_image:new s.bC(T,l.u_image),u_latrange:new s.bH(T,l.u_latrange),u_light:new s.bH(T,l.u_light),u_shadow:new s.bF(T,l.u_shadow),u_highlight:new s.bF(T,l.u_highlight),u_accent:new s.bF(T,l.u_accent)}),hillshadePrepare:(T,l)=>({u_matrix:new s.bD(T,l.u_matrix),u_image:new s.bC(T,l.u_image),u_dimension:new s.bH(T,l.u_dimension),u_zoom:new s.b5(T,l.u_zoom),u_unpack:new s.bE(T,l.u_unpack)}),line:(T,l)=>({u_translation:new s.bH(T,l.u_translation),u_ratio:new s.b5(T,l.u_ratio),u_device_pixel_ratio:new s.b5(T,l.u_device_pixel_ratio),u_units_to_pixels:new s.bH(T,l.u_units_to_pixels)}),lineGradient:(T,l)=>({u_translation:new s.bH(T,l.u_translation),u_ratio:new s.b5(T,l.u_ratio),u_device_pixel_ratio:new s.b5(T,l.u_device_pixel_ratio),u_units_to_pixels:new s.bH(T,l.u_units_to_pixels),u_image:new s.bC(T,l.u_image),u_image_height:new s.b5(T,l.u_image_height)}),linePattern:(T,l)=>({u_translation:new s.bH(T,l.u_translation),u_texsize:new s.bH(T,l.u_texsize),u_ratio:new s.b5(T,l.u_ratio),u_device_pixel_ratio:new s.b5(T,l.u_device_pixel_ratio),u_image:new s.bC(T,l.u_image),u_units_to_pixels:new s.bH(T,l.u_units_to_pixels),u_scale:new s.bG(T,l.u_scale),u_fade:new s.b5(T,l.u_fade)}),lineSDF:(T,l)=>({u_translation:new s.bH(T,l.u_translation),u_ratio:new s.b5(T,l.u_ratio),u_device_pixel_ratio:new s.b5(T,l.u_device_pixel_ratio),u_units_to_pixels:new s.bH(T,l.u_units_to_pixels),u_patternscale_a:new s.bH(T,l.u_patternscale_a),u_patternscale_b:new s.bH(T,l.u_patternscale_b),u_sdfgamma:new s.b5(T,l.u_sdfgamma),u_image:new s.bC(T,l.u_image),u_tex_y_a:new s.b5(T,l.u_tex_y_a),u_tex_y_b:new s.b5(T,l.u_tex_y_b),u_mix:new s.b5(T,l.u_mix)}),raster:(T,l)=>({u_tl_parent:new s.bH(T,l.u_tl_parent),u_scale_parent:new s.b5(T,l.u_scale_parent),u_buffer_scale:new s.b5(T,l.u_buffer_scale),u_fade_t:new s.b5(T,l.u_fade_t),u_opacity:new s.b5(T,l.u_opacity),u_image0:new s.bC(T,l.u_image0),u_image1:new s.bC(T,l.u_image1),u_brightness_low:new s.b5(T,l.u_brightness_low),u_brightness_high:new s.b5(T,l.u_brightness_high),u_saturation_factor:new s.b5(T,l.u_saturation_factor),u_contrast_factor:new s.b5(T,l.u_contrast_factor),u_spin_weights:new s.bG(T,l.u_spin_weights),u_coords_top:new s.bE(T,l.u_coords_top),u_coords_bottom:new s.bE(T,l.u_coords_bottom)}),symbolIcon:(T,l)=>({u_is_size_zoom_constant:new s.bC(T,l.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bC(T,l.u_is_size_feature_constant),u_size_t:new s.b5(T,l.u_size_t),u_size:new s.b5(T,l.u_size),u_camera_to_center_distance:new s.b5(T,l.u_camera_to_center_distance),u_pitch:new s.b5(T,l.u_pitch),u_rotate_symbol:new s.bC(T,l.u_rotate_symbol),u_aspect_ratio:new s.b5(T,l.u_aspect_ratio),u_fade_change:new s.b5(T,l.u_fade_change),u_label_plane_matrix:new s.bD(T,l.u_label_plane_matrix),u_coord_matrix:new s.bD(T,l.u_coord_matrix),u_is_text:new s.bC(T,l.u_is_text),u_pitch_with_map:new s.bC(T,l.u_pitch_with_map),u_is_along_line:new s.bC(T,l.u_is_along_line),u_is_variable_anchor:new s.bC(T,l.u_is_variable_anchor),u_texsize:new s.bH(T,l.u_texsize),u_texture:new s.bC(T,l.u_texture),u_translation:new s.bH(T,l.u_translation),u_pitched_scale:new s.b5(T,l.u_pitched_scale)}),symbolSDF:(T,l)=>({u_is_size_zoom_constant:new s.bC(T,l.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bC(T,l.u_is_size_feature_constant),u_size_t:new s.b5(T,l.u_size_t),u_size:new s.b5(T,l.u_size),u_camera_to_center_distance:new s.b5(T,l.u_camera_to_center_distance),u_pitch:new s.b5(T,l.u_pitch),u_rotate_symbol:new s.bC(T,l.u_rotate_symbol),u_aspect_ratio:new s.b5(T,l.u_aspect_ratio),u_fade_change:new s.b5(T,l.u_fade_change),u_label_plane_matrix:new s.bD(T,l.u_label_plane_matrix),u_coord_matrix:new s.bD(T,l.u_coord_matrix),u_is_text:new s.bC(T,l.u_is_text),u_pitch_with_map:new s.bC(T,l.u_pitch_with_map),u_is_along_line:new s.bC(T,l.u_is_along_line),u_is_variable_anchor:new s.bC(T,l.u_is_variable_anchor),u_texsize:new s.bH(T,l.u_texsize),u_texture:new s.bC(T,l.u_texture),u_gamma_scale:new s.b5(T,l.u_gamma_scale),u_device_pixel_ratio:new s.b5(T,l.u_device_pixel_ratio),u_is_halo:new s.bC(T,l.u_is_halo),u_translation:new s.bH(T,l.u_translation),u_pitched_scale:new s.b5(T,l.u_pitched_scale)}),symbolTextAndIcon:(T,l)=>({u_is_size_zoom_constant:new s.bC(T,l.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bC(T,l.u_is_size_feature_constant),u_size_t:new s.b5(T,l.u_size_t),u_size:new s.b5(T,l.u_size),u_camera_to_center_distance:new s.b5(T,l.u_camera_to_center_distance),u_pitch:new s.b5(T,l.u_pitch),u_rotate_symbol:new s.bC(T,l.u_rotate_symbol),u_aspect_ratio:new s.b5(T,l.u_aspect_ratio),u_fade_change:new s.b5(T,l.u_fade_change),u_label_plane_matrix:new s.bD(T,l.u_label_plane_matrix),u_coord_matrix:new s.bD(T,l.u_coord_matrix),u_is_text:new s.bC(T,l.u_is_text),u_pitch_with_map:new s.bC(T,l.u_pitch_with_map),u_is_along_line:new s.bC(T,l.u_is_along_line),u_is_variable_anchor:new s.bC(T,l.u_is_variable_anchor),u_texsize:new s.bH(T,l.u_texsize),u_texsize_icon:new s.bH(T,l.u_texsize_icon),u_texture:new s.bC(T,l.u_texture),u_texture_icon:new s.bC(T,l.u_texture_icon),u_gamma_scale:new s.b5(T,l.u_gamma_scale),u_device_pixel_ratio:new s.b5(T,l.u_device_pixel_ratio),u_is_halo:new s.bC(T,l.u_is_halo),u_translation:new s.bH(T,l.u_translation),u_pitched_scale:new s.b5(T,l.u_pitched_scale)}),background:(T,l)=>({u_opacity:new s.b5(T,l.u_opacity),u_color:new s.bF(T,l.u_color)}),backgroundPattern:(T,l)=>({u_opacity:new s.b5(T,l.u_opacity),u_image:new s.bC(T,l.u_image),u_pattern_tl_a:new s.bH(T,l.u_pattern_tl_a),u_pattern_br_a:new s.bH(T,l.u_pattern_br_a),u_pattern_tl_b:new s.bH(T,l.u_pattern_tl_b),u_pattern_br_b:new s.bH(T,l.u_pattern_br_b),u_texsize:new s.bH(T,l.u_texsize),u_mix:new s.b5(T,l.u_mix),u_pattern_size_a:new s.bH(T,l.u_pattern_size_a),u_pattern_size_b:new s.bH(T,l.u_pattern_size_b),u_scale_a:new s.b5(T,l.u_scale_a),u_scale_b:new s.b5(T,l.u_scale_b),u_pixel_coord_upper:new s.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.bH(T,l.u_pixel_coord_lower),u_tile_units_to_pixels:new s.b5(T,l.u_tile_units_to_pixels)}),terrain:(T,l)=>({u_texture:new s.bC(T,l.u_texture),u_ele_delta:new s.b5(T,l.u_ele_delta),u_fog_matrix:new s.bD(T,l.u_fog_matrix),u_fog_color:new s.bF(T,l.u_fog_color),u_fog_ground_blend:new s.b5(T,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.b5(T,l.u_fog_ground_blend_opacity),u_horizon_color:new s.bF(T,l.u_horizon_color),u_horizon_fog_blend:new s.b5(T,l.u_horizon_fog_blend),u_is_globe_mode:new s.b5(T,l.u_is_globe_mode)}),terrainDepth:(T,l)=>({u_ele_delta:new s.b5(T,l.u_ele_delta)}),terrainCoords:(T,l)=>({u_texture:new s.bC(T,l.u_texture),u_terrain_coords_id:new s.b5(T,l.u_terrain_coords_id),u_ele_delta:new s.b5(T,l.u_ele_delta)}),projectionErrorMeasurement:(T,l)=>({u_input:new s.b5(T,l.u_input),u_output_expected:new s.b5(T,l.u_output_expected)}),atmosphere:(T,l)=>({u_sun_pos:new s.bG(T,l.u_sun_pos),u_atmosphere_blend:new s.b5(T,l.u_atmosphere_blend),u_globe_position:new s.bG(T,l.u_globe_position),u_globe_radius:new s.b5(T,l.u_globe_radius),u_inv_proj_matrix:new s.bD(T,l.u_inv_proj_matrix)}),sky:(T,l)=>({u_sky_color:new s.bF(T,l.u_sky_color),u_horizon_color:new s.bF(T,l.u_horizon_color),u_horizon:new s.bH(T,l.u_horizon),u_horizon_normal:new s.bH(T,l.u_horizon_normal),u_sky_horizon_blend:new s.b5(T,l.u_sky_horizon_blend),u_sky_blend:new s.b5(T,l.u_sky_blend)})};class _A{constructor(l,c,C){this.context=l;const M=l.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ja={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ol{constructor(l,c,C,M){this.length=c.length,this.attributes=C,this.itemSize=c.bytesPerElement,this.dynamicDraw=M,this.context=l;const R=l.gl;this.buffer=R.createBuffer(),l.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,c){for(let C=0;C<this.attributes.length;C++){const M=c.attributes[this.attributes[C].name];M!==void 0&&l.enableVertexAttribArray(M)}}setVertexAttribPointers(l,c,C){for(let M=0;M<this.attributes.length;M++){const R=this.attributes[M],j=c.attributes[R.name];j!==void 0&&l.vertexAttribPointer(j,R.components,l[Ja[R.type]],!1,this.itemSize,R.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Yo{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ed extends Yo{getDefault(){return s.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class lm extends Yo{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class jc extends Yo{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Lu extends Yo{getDefault(){return[!0,!0,!0,!0]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class $h extends Yo{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Vh extends Yo{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class pc extends Yo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const c=this.current;(l.func!==c.func||l.ref!==c.ref||l.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Hh extends Yo{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class of extends Yo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=l,this.dirty=!1}}class mc extends Yo{getDefault(){return[0,1]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class gu extends Yo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=l,this.dirty=!1}}class Vt extends Yo{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Tn extends Yo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.BLEND):c.disable(c.BLEND),this.current=l,this.dirty=!1}}class an extends Yo{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Fr extends Yo{getDefault(){return s.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class _i extends Yo{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Co extends Yo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=l,this.dirty=!1}}class oa extends Yo{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class $o extends Yo{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class QA extends Yo{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class vp extends Yo{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Il extends Yo{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class yu extends Yo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class qA extends Yo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class kl extends Yo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Wi extends Yo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class YA extends Yo{getDefault(){return null}set(l){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Fo extends Yo{getDefault(){return null}set(l){var c;if(l===this.current&&!this.dirty)return;const C=this.gl;Pi(C)?C.bindVertexArray(l):(c=C.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class Nc extends Yo{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class $A extends Yo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class CA extends Yo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class lA extends Yo{constructor(l,c){super(l),this.context=l,this.parent=c}getDefault(){return null}}class Tl extends lA{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class gc extends lA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class vu extends lA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const jl="Framebuffer is not complete";class Gc{constructor(l,c,C,M,R){this.context=l,this.width=c,this.height=C;const j=l.gl,$=this.framebuffer=j.createFramebuffer();if(this.colorAttachment=new Tl(l,$),M)this.depthAttachment=R?new vu(l,$):new gc(l,$);else if(R)throw new Error("Stencil cannot be set without depth");if(j.checkFramebufferStatus(j.FRAMEBUFFER)!==j.FRAMEBUFFER_COMPLETE)throw new Error(jl)}destroy(){const l=this.context.gl,c=this.colorAttachment.get();if(c&&l.deleteTexture(c),this.depthAttachment){const C=this.depthAttachment.get();C&&l.deleteRenderbuffer(C)}l.deleteFramebuffer(this.framebuffer)}}class Zh{constructor(l){var c,C;if(this.gl=l,this.clearColor=new Ed(this),this.clearDepth=new lm(this),this.clearStencil=new jc(this),this.colorMask=new Lu(this),this.depthMask=new $h(this),this.stencilMask=new Vh(this),this.stencilFunc=new pc(this),this.stencilOp=new Hh(this),this.stencilTest=new of(this),this.depthRange=new mc(this),this.depthTest=new gu(this),this.depthFunc=new Vt(this),this.blend=new Tn(this),this.blendFunc=new an(this),this.blendColor=new Fr(this),this.blendEquation=new _i(this),this.cullFace=new Co(this),this.cullFaceSide=new oa(this),this.frontFace=new $o(this),this.program=new QA(this),this.activeTexture=new vp(this),this.viewport=new Il(this),this.bindFramebuffer=new yu(this),this.bindRenderbuffer=new qA(this),this.bindTexture=new kl(this),this.bindVertexBuffer=new Wi(this),this.bindElementBuffer=new YA(this),this.bindVertexArray=new Fo(this),this.pixelStoreUnpack=new Nc(this),this.pixelStoreUnpackPremultiplyAlpha=new $A(this),this.pixelStoreUnpackFlipY=new CA(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Pi(l)){this.HALF_FLOAT=l.HALF_FLOAT;const M=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=l.RGBA16F)!==null&&c!==void 0?c:M==null?void 0:M.RGBA16F_EXT,this.RGB16F=(C=l.RGB16F)!==null&&C!==void 0?C:M==null?void 0:M.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const M=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=M==null?void 0:M.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,c){return new _A(this,l,c)}createVertexBuffer(l,c,C){return new Ol(this,l,c,C)}createRenderbuffer(l,c,C){const M=this.gl,R=M.createRenderbuffer();return this.bindRenderbuffer.set(R),M.renderbufferStorage(M.RENDERBUFFER,l,c,C),this.bindRenderbuffer.set(null),R}createFramebuffer(l,c,C,M){return new Gc(this,l,c,C,M)}clear({color:l,depth:c,stencil:C}){const M=this.gl;let R=0;l&&(R|=M.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(R|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),C!==void 0&&(R|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),M.clear(R)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){s.bz(l.blendFunction,Hi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Pi(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var c;return Pi(this.gl)?this.gl.deleteVertexArray(l):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let Fa;function fh(T,l,c,C,M){const R=T.context,j=T.transform,$=R.gl,te=T.useProgram("collisionBox"),oe=[];let be=0,Ee=0;for(let ct=0;ct<C.length;ct++){const yt=C[ct],Et=l.getTile(yt).getBucket(c);if(!Et)continue;const Tt=M?Et.textCollisionBox:Et.iconCollisionBox,Rt=Et.collisionCircleArray;Rt.length>0&&(oe.push({circleArray:Rt,circleOffset:Ee,coord:yt}),be+=Rt.length/4,Ee=be),Tt&&te.draw(R,$.LINES,Jr.disabled,Gi.disabled,T.colorModeForRenderPass(),Fi.disabled,Ah(T.transform),T.style.map.terrain&&T.style.map.terrain.getTerrainData(yt),j.getProjectionData({overscaledTileID:yt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,T.transform.zoom,null,null,Tt.collisionVertexBuffer)}if(!M||!oe.length)return;const Ie=T.useProgram("collisionCircle"),qe=new s.bM;qe.resize(4*be),qe._trim();let Ve=0;for(const ct of oe)for(let yt=0;yt<ct.circleArray.length/4;yt++){const Et=4*yt,Tt=ct.circleArray[Et+0],Rt=ct.circleArray[Et+1],zt=ct.circleArray[Et+2],Pt=ct.circleArray[Et+3];qe.emplace(Ve++,Tt,Rt,zt,Pt,0),qe.emplace(Ve++,Tt,Rt,zt,Pt,1),qe.emplace(Ve++,Tt,Rt,zt,Pt,2),qe.emplace(Ve++,Tt,Rt,zt,Pt,3)}(!Fa||Fa.length<2*be)&&(Fa=function(ct){const yt=2*ct,Et=new s.bO;Et.resize(yt),Et._trim();for(let Tt=0;Tt<yt;Tt++){const Rt=6*Tt;Et.uint16[Rt+0]=4*Tt+0,Et.uint16[Rt+1]=4*Tt+1,Et.uint16[Rt+2]=4*Tt+2,Et.uint16[Rt+3]=4*Tt+2,Et.uint16[Rt+4]=4*Tt+3,Et.uint16[Rt+5]=4*Tt+0}return Et}(be));const At=R.createIndexBuffer(Fa,!0),ot=R.createVertexBuffer(qe,s.bN.members,!0);for(const ct of oe){const yt=tf(T.transform);Ie.draw(R,$.TRIANGLES,Jr.disabled,Gi.disabled,T.colorModeForRenderPass(),Fi.disabled,yt,T.style.map.terrain&&T.style.map.terrain.getTerrainData(ct.coord),null,c.id,ot,At,s.aD.simpleSegment(0,2*ct.circleOffset,ct.circleArray.length,ct.circleArray.length/2),null,T.transform.zoom,null,null,null)}ot.destroy(),At.destroy()}const yc=s.aq(new Float32Array(16));function VA(T,l,c,C,M,R){const{horizontalAlign:j,verticalAlign:$}=s.ay(T);return new s.P((-(j-.5)*l/M+C[0])*R,(-($-.5)*c/M+C[1])*R)}function sf(T,l,c,C,M,R){const j=l.tileAnchorPoint.add(new s.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let $=C.mult(R);c||($=$.rotate(-M));const te=j.add($);return Zt(te.x,te.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(c){const $=Dn(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(T),te=Math.atan($.y/$.x)+($.x<0?Math.PI:0);return T.add(C.rotate(te))}return T.add(C)}function bA(T,l,c,C,M,R,j,$,te,oe,be,Ee){const Ie=T.text.placedSymbolArray,qe=T.text.dynamicLayoutVertexArray,Ve=T.icon.dynamicLayoutVertexArray,At={};qe.clear();for(let ot=0;ot<Ie.length;ot++){const ct=Ie.get(ot),yt=ct.hidden||!ct.crossTileID||T.allowVerticalPlacement&&!ct.placedOrientation?null:C[ct.crossTileID];if(yt){const Et=new s.P(ct.anchorX,ct.anchorY),Tt={getElevation:Ee,width:M.width,height:M.height,pitchedLabelPlaneMatrix:R,lineVertexArray:null,pitchWithMap:c,transform:M,projectionCache:null,tileAnchorPoint:Et,translation:oe,unwrappedTileID:be},Rt=c?xr(Et.x,Et.y,Tt):Dn(Et.x,Et.y,Tt),zt=Gt(M.cameraToCenterDistance,Rt.signedDistanceFromCamera);let Pt=s.aj(T.textSizeData,$,ct)*zt/s.as;c&&(Pt*=T.tilePixelRatio/j);const{width:tn,height:Ht,anchor:vn,textOffset:_n,textBoxScale:gn}=yt,On=VA(vn,tn,Ht,_n,gn,Pt),Un=M.getPitchedTextCorrection(Et.x+oe[0],Et.y+oe[1],be),wn=sf(Rt.point,Tt,l,On,-M.bearingInRadians,Un),kr=T.allowVerticalPlacement&&ct.placedOrientation===s.ai.vertical?Math.PI/2:0;for(let Bi=0;Bi<ct.numGlyphs;Bi++)s.ak(qe,wn,kr);te&&ct.associatedIconIndex>=0&&(At[ct.associatedIconIndex]={shiftedAnchor:wn,angle:kr})}else ji(ct.numGlyphs,qe)}if(te){Ve.clear();const ot=T.icon.placedSymbolArray;for(let ct=0;ct<ot.length;ct++){const yt=ot.get(ct);if(yt.hidden)ji(yt.numGlyphs,Ve);else{const Et=At[ct];if(Et)for(let Tt=0;Tt<yt.numGlyphs;Tt++)s.ak(Ve,Et.shiftedAnchor,Et.angle);else ji(yt.numGlyphs,Ve)}}T.icon.dynamicLayoutVertexBuffer.updateData(Ve)}T.text.dynamicLayoutVertexBuffer.updateData(qe)}function HA(T,l,c){return c.iconsInText&&l?"symbolTextAndIcon":T?"symbolSDF":"symbolIcon"}function Wc(T,l,c,C,M,R,j,$,te,oe,be,Ee,Ie){const qe=T.context,Ve=qe.gl,At=T.transform,ot=$==="map",ct=te==="map",yt=$!=="viewport"&&c.layout.get("symbol-placement")!=="point",Et=ot&&!ct&&!yt,Tt=!c.layout.get("symbol-sort-key").isConstant();let Rt=!1;const zt=T.getDepthModeForSublayer(0,Jr.ReadOnly),Pt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),tn=[],Ht=At.getCircleRadiusCorrection();for(const vn of C){const _n=l.getTile(vn),gn=_n.getBucket(c);if(!gn)continue;const On=M?gn.text:gn.icon;if(!On||!On.segments.get().length||!On.hasVisibleVertices)continue;const Un=On.programConfigurations.get(c.id),wn=M||gn.sdfIcons,kr=M?gn.textSizeData:gn.iconSizeData,Bi=ct||At.pitch!==0,$i=T.useProgram(HA(wn,M,gn),Un),Bo=s.ah(kr,At.zoom),Si=T.style.map.terrain&&T.style.map.terrain.getTerrainData(vn);let zo,jo,xo,yo,Oa=[0,0],No=null;if(M)jo=_n.glyphAtlasTexture,xo=Ve.LINEAR,zo=_n.glyphAtlasTexture.size,gn.iconsInText&&(Oa=_n.imageAtlasTexture.size,No=_n.imageAtlasTexture,yo=Bi||T.options.rotating||T.options.zooming||kr.kind==="composite"||kr.kind==="camera"?Ve.LINEAR:Ve.NEAREST);else{const bs=c.layout.get("icon-size").constantOr(0)!==1||gn.iconsNeedLinear;jo=_n.imageAtlasTexture,xo=wn||T.options.rotating||T.options.zooming||bs||Bi?Ve.LINEAR:Ve.NEAREST,zo=_n.imageAtlasTexture.size}const hs=s.at(_n,1,T.transform.zoom),ja=Ot(ot,T.transform,hs),$u=s.H();s.an($u,ja);const fl=_t(ct,ot,T.transform,hs),pl=s.au(At,_n,R,j),uu=At.getProjectionData({overscaledTileID:vn,applyGlobeMatrix:!Ie,applyTerrainMatrix:!0}),OA=Pt&&gn.hasTextData(),IA=c.layout.get("icon-text-fit")!=="none"&&OA&&gn.hasIconData();if(yt){const bs=T.style.map.terrain?(el,tl)=>T.style.map.terrain.getElevation(vn,el,tl):null,Qs=c.layout.get("text-rotation-alignment")==="map";Pn(gn,T,M,ja,$u,ct,oe,Qs,vn.toUnwrapped(),At.width,At.height,pl,bs)}const Vu=M&&Pt||IA,Js=yt||Vu?yc:ct?ja:T.transform.clipSpaceToPixelsMatrix,ml=wn&&c.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let sa;sa=wn?gn.iconsInText?WA(kr.kind,Bo,Et,ct,yt,Vu,T,Js,fl,pl,zo,Oa,Ht):Bl(kr.kind,Bo,Et,ct,yt,Vu,T,Js,fl,pl,M,zo,0,Ht):iu(kr.kind,Bo,Et,ct,yt,Vu,T,Js,fl,pl,M,zo,Ht);const Pl={program:$i,buffers:On,uniformValues:sa,projectionData:uu,atlasTexture:jo,atlasTextureIcon:No,atlasInterpolation:xo,atlasInterpolationIcon:yo,isSDF:wn,hasHalo:ml};if(Tt&&gn.canOverlap){Rt=!0;const bs=On.segments.get();for(const Qs of bs)tn.push({segments:new s.aD([Qs]),sortKey:Qs.sortKey,state:Pl,terrainData:Si})}else tn.push({segments:On.segments,sortKey:0,state:Pl,terrainData:Si})}Rt&&tn.sort((vn,_n)=>vn.sortKey-_n.sortKey);for(const vn of tn){const _n=vn.state;if(qe.activeTexture.set(Ve.TEXTURE0),_n.atlasTexture.bind(_n.atlasInterpolation,Ve.CLAMP_TO_EDGE),_n.atlasTextureIcon&&(qe.activeTexture.set(Ve.TEXTURE1),_n.atlasTextureIcon&&_n.atlasTextureIcon.bind(_n.atlasInterpolationIcon,Ve.CLAMP_TO_EDGE)),_n.isSDF){const gn=_n.uniformValues;_n.hasHalo&&(gn.u_is_halo=1,Xh(_n.buffers,vn.segments,c,T,_n.program,zt,be,Ee,gn,_n.projectionData,vn.terrainData)),gn.u_is_halo=0}Xh(_n.buffers,vn.segments,c,T,_n.program,zt,be,Ee,_n.uniformValues,_n.projectionData,vn.terrainData)}}function Xh(T,l,c,C,M,R,j,$,te,oe,be){const Ee=C.context;M.draw(Ee,Ee.gl.TRIANGLES,R,j,$,Fi.backCCW,te,be,oe,c.id,T.layoutVertexBuffer,T.indexBuffer,l,c.paint,C.transform.zoom,T.programConfigurations.get(c.id),T.dynamicLayoutVertexBuffer,T.opacityVertexBuffer)}function Vo(T,l,c,C,M){const R=T.context,j=R.gl,$=Gi.disabled,te=new Hi([j.ONE,j.ONE],s.b4.transparent,[!0,!0,!0,!0]),oe=l.getBucket(c);if(!oe)return;const be=C.key;let Ee=c.heatmapFbos.get(be);Ee||(Ee=ZA(R,l.tileSize,l.tileSize),c.heatmapFbos.set(be,Ee)),R.bindFramebuffer.set(Ee.framebuffer),R.viewport.set([0,0,l.tileSize,l.tileSize]),R.clear({color:s.b4.transparent});const Ie=oe.programConfigurations.get(c.id),qe=T.useProgram("heatmap",Ie,!M),Ve=T.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),At=T.style.map.terrain.getTerrainData(C);qe.draw(R,j.TRIANGLES,Jr.disabled,$,te,Fi.disabled,fc(l,T.transform.zoom,c.paint.get("heatmap-intensity"),1),At,Ve,c.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,c.paint,T.transform.zoom,Ie)}function Qc(T,l,c,C,M){const R=T.context,j=R.gl,$=T.transform;R.setColorMode(T.colorModeForRenderPass());const te=Fu(R,l),oe=c.key,be=l.heatmapFbos.get(oe);if(!be)return;R.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,be.colorAttachment.get()),R.activeTexture.set(j.TEXTURE1),te.bind(j.LINEAR,j.CLAMP_TO_EDGE);const Ee=$.getProjectionData({overscaledTileID:c,applyTerrainMatrix:M,applyGlobeMatrix:!C});T.useProgram("heatmapTexture").draw(R,j.TRIANGLES,Jr.disabled,Gi.disabled,T.colorModeForRenderPass(),Fi.disabled,wd(T,l,0,1),null,Ee,l.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments,l.paint,$.zoom),be.destroy(),l.heatmapFbos.delete(oe)}function ZA(T,l,c){var C,M;const R=T.gl,j=R.createTexture();R.bindTexture(R.TEXTURE_2D,j),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR);const $=(C=T.HALF_FLOAT)!==null&&C!==void 0?C:R.UNSIGNED_BYTE,te=(M=T.RGBA16F)!==null&&M!==void 0?M:R.RGBA;R.texImage2D(R.TEXTURE_2D,0,te,l,c,0,R.RGBA,$,null);const oe=T.createFramebuffer(l,c,!1,!1);return oe.colorAttachment.set(j),oe}function Fu(T,l){return l.colorRampTexture||(l.colorRampTexture=new ie(T,l.colorRamp,T.gl.RGBA)),l.colorRampTexture}function qc(T,l,c,C,M){if(!c||!C||!C.imageAtlas)return;const R=C.imageAtlas.patternPositions;let j=R[c.to.toString()],$=R[c.from.toString()];if(!j&&$&&(j=$),!$&&j&&($=j),!j||!$){const te=M.getPaintProperty(l);j=R[te],$=R[te]}j&&$&&T.setConstantPatternPositions(j,$)}function Jh(T,l,c,C,M,R,j,$){const te=T.context.gl,oe="fill-pattern",be=c.paint.get(oe),Ee=be&&be.constantOr(1),Ie=c.getCrossfadeParameters();let qe,Ve,At,ot,ct;const yt=T.transform,Et=c.paint.get("fill-translate"),Tt=c.paint.get("fill-translate-anchor");j?(Ve=Ee&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",qe=te.LINES):(Ve=Ee?"fillPattern":"fill",qe=te.TRIANGLES);const Rt=be.constantOr(null);for(const zt of C){const Pt=l.getTile(zt);if(Ee&&!Pt.patternsLoaded())continue;const tn=Pt.getBucket(c);if(!tn)continue;const Ht=tn.programConfigurations.get(c.id),vn=T.useProgram(Ve,Ht),_n=T.style.map.terrain&&T.style.map.terrain.getTerrainData(zt);Ee&&(T.context.activeTexture.set(te.TEXTURE0),Pt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),Ht.updatePaintBuffers(Ie)),qc(Ht,oe,Rt,Pt,c);const gn=yt.getProjectionData({overscaledTileID:zt,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),On=s.au(yt,Pt,Et,Tt);if(j){ot=tn.indexBuffer2,ct=tn.segments2;const wn=[te.drawingBufferWidth,te.drawingBufferHeight];At=Ve==="fillOutlinePattern"&&Ee?xd(T,Ie,Pt,wn,On):Zs(wn,On)}else ot=tn.indexBuffer,ct=tn.segments,At=Ee?dc(T,Ie,Pt,On):{u_fill_translate:On};let Un;if(T.renderPass==="translucent"&&$){const[wn]=T.getStencilConfigForOverlapAndUpdateStencilID(C);Un=wn[zt.overscaledZ]}else Un=T.stencilModeForClipping(zt);vn.draw(T.context,qe,M,Un,R,Fi.backCCW,At,_n,gn,c.id,tn.layoutVertexBuffer,ot,ct,c.paint,T.transform.zoom,Ht)}}function Yc(T,l,c,C,M,R,j,$){const te=T.context,oe=te.gl,be="fill-extrusion-pattern",Ee=c.paint.get(be),Ie=Ee.constantOr(1),qe=c.getCrossfadeParameters(),Ve=c.paint.get("fill-extrusion-opacity"),At=Ee.constantOr(null),ot=T.transform;for(const ct of C){const yt=l.getTile(ct),Et=yt.getBucket(c);if(!Et)continue;const Tt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(ct),Rt=Et.programConfigurations.get(c.id),zt=T.useProgram(Ie?"fillExtrusionPattern":"fillExtrusion",Rt);Ie&&(T.context.activeTexture.set(oe.TEXTURE0),yt.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Rt.updatePaintBuffers(qe));const Pt=ot.getProjectionData({overscaledTileID:ct,applyGlobeMatrix:!$,applyTerrainMatrix:!0});qc(Rt,be,At,yt,c);const tn=s.au(ot,yt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ht=c.paint.get("fill-extrusion-vertical-gradient"),vn=Ie?Rf(T,Ht,Ve,tn,ct,qe,yt):yp(T,Ht,Ve,tn);zt.draw(te,te.gl.TRIANGLES,M,R,j,Fi.backCCW,vn,Tt,Pt,c.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,c.paint,T.transform.zoom,Rt,T.style.map.terrain&&Et.centroidVertexBuffer)}}function vc(T,l,c,C,M,R,j,$,te){var oe;const be=T.style.projection,Ee=T.context,Ie=T.transform,qe=Ee.gl,Ve=T.useProgram("hillshade"),At=!T.options.moving;for(const ot of C){const ct=l.getTile(ot),yt=ct.fbo;if(!yt)continue;const Et=be.getMeshFromTileID(Ee,ot.canonical,$,!0,"raster"),Tt=(oe=T.style.map.terrain)===null||oe===void 0?void 0:oe.getTerrainData(ot);Ee.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,yt.colorAttachment.get());const Rt=Ie.getProjectionData({overscaledTileID:ot,aligned:At,applyGlobeMatrix:!te,applyTerrainMatrix:!0});Ve.draw(Ee,qe.TRIANGLES,R,M[ot.overscaledZ],j,Fi.backCCW,Md(T,ct,c),Tt,Rt,c.id,Et.vertexBuffer,Et.indexBuffer,Et.segments)}}const As=[new s.P(0,0),new s.P(s.X,0),new s.P(s.X,s.X),new s.P(0,s.X)];function Uo(T,l,c,C,M,R,j,$,te=!1,oe=!1){const be=C[C.length-1].overscaledZ,Ee=T.context,Ie=Ee.gl,qe=T.useProgram("raster"),Ve=T.transform,At=T.style.projection,ot=T.colorModeForRenderPass(),ct=!T.options.moving;for(const yt of C){const Et=T.getDepthModeForSublayer(yt.overscaledZ-be,c.paint.get("raster-opacity")===1?Jr.ReadWrite:Jr.ReadOnly,Ie.LESS),Tt=l.getTile(yt);Tt.registerFadeDuration(c.paint.get("raster-fade-duration"));const Rt=l.findLoadedParent(yt,0),zt=l.findLoadedSibling(yt),Pt=cs(Tt,Rt||zt||null,l,c,T.transform,T.style.map.terrain);let tn,Ht;const vn=c.paint.get("raster-resampling")==="nearest"?Ie.NEAREST:Ie.LINEAR;Ee.activeTexture.set(Ie.TEXTURE0),Tt.texture.bind(vn,Ie.CLAMP_TO_EDGE,Ie.LINEAR_MIPMAP_NEAREST),Ee.activeTexture.set(Ie.TEXTURE1),Rt?(Rt.texture.bind(vn,Ie.CLAMP_TO_EDGE,Ie.LINEAR_MIPMAP_NEAREST),tn=Math.pow(2,Rt.tileID.overscaledZ-Tt.tileID.overscaledZ),Ht=[Tt.tileID.canonical.x*tn%1,Tt.tileID.canonical.y*tn%1]):Tt.texture.bind(vn,Ie.CLAMP_TO_EDGE,Ie.LINEAR_MIPMAP_NEAREST),Tt.texture.useMipmap&&Ee.extTextureFilterAnisotropic&&T.transform.pitch>20&&Ie.texParameterf(Ie.TEXTURE_2D,Ee.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ee.extTextureFilterAnisotropicMax);const _n=T.style.map.terrain&&T.style.map.terrain.getTerrainData(yt),gn=Ve.getProjectionData({overscaledTileID:yt,aligned:ct,applyGlobeMatrix:!oe,applyTerrainMatrix:!0}),On=Yh(Ht||[0,0],tn||1,Pt,c,$),Un=At.getMeshFromTileID(Ee,yt.canonical,R,j,"raster");qe.draw(Ee,Ie.TRIANGLES,Et,M?M[yt.overscaledZ]:Gi.disabled,ot,te?Fi.frontCCW:Fi.backCCW,On,_n,gn,c.id,Un.vertexBuffer,Un.indexBuffer,Un.segments)}}function cs(T,l,c,C,M,R){const j=C.paint.get("raster-fade-duration");if(!R&&j>0){const $=S.now(),te=($-T.timeAdded)/j,oe=l?($-l.timeAdded)/j:-1,be=c.getSource(),Ee=Kt(M,{tileSize:be.tileSize,roundZoom:be.roundZoom}),Ie=!l||Math.abs(l.tileID.overscaledZ-Ee)>Math.abs(T.tileID.overscaledZ-Ee),qe=Ie&&T.refreshedUponExpiration?1:s.ab(Ie?te:1-oe,0,1);return T.refreshedUponExpiration&&te>=1&&(T.refreshedUponExpiration=!1),l?{opacity:1,mix:1-qe}:{opacity:qe,mix:0}}return{opacity:1,mix:0}}const Df=new s.b4(1,0,0,1),ph=new s.b4(0,1,0,1),mh=new s.b4(0,0,1,1),Uu=new s.b4(1,0,1,1),XA=new s.b4(0,1,1,1);function Nl(T,l,c,C){hl(T,0,l+c/2,T.transform.width,c,C)}function xA(T,l,c,C){hl(T,l-c/2,0,c,T.transform.height,C)}function hl(T,l,c,C,M,R){const j=T.context,$=j.gl;$.enable($.SCISSOR_TEST),$.scissor(l*T.pixelRatio,c*T.pixelRatio,C*T.pixelRatio,M*T.pixelRatio),j.clear({color:R}),$.disable($.SCISSOR_TEST)}function JA(T,l,c){const C=T.context,M=C.gl,R=T.useProgram("debug"),j=Jr.disabled,$=Gi.disabled,te=T.colorModeForRenderPass(),oe="$debug",be=T.style.map.terrain&&T.style.map.terrain.getTerrainData(c);C.activeTexture.set(M.TEXTURE0);const Ee=l.getTileByID(c.key).latestRawTileData,Ie=Math.floor((Ee&&Ee.byteLength||0)/1024),qe=l.getTile(c).tileSize,Ve=512/Math.min(qe,512)*(c.overscaledZ/T.transform.zoom)*.5;let At=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(At+=` => ${c.overscaledZ}`),function(ct,yt){ct.initDebugOverlayCanvas();const Et=ct.debugOverlayCanvas,Tt=ct.context.gl,Rt=ct.debugOverlayCanvas.getContext("2d");Rt.clearRect(0,0,Et.width,Et.height),Rt.shadowColor="white",Rt.shadowBlur=2,Rt.lineWidth=1.5,Rt.strokeStyle="white",Rt.textBaseline="top",Rt.font="bold 36px Open Sans, sans-serif",Rt.fillText(yt,5,5),Rt.strokeText(yt,5,5),ct.debugOverlayTexture.update(Et),ct.debugOverlayTexture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE)}(T,`${At} ${Ie}kB`);const ot=T.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});R.draw(C,M.TRIANGLES,j,$,Hi.alphaBlended,Fi.disabled,ch(s.b4.transparent,Ve),null,ot,oe,T.debugBuffer,T.quadTriangleIndexBuffer,T.debugSegments),R.draw(C,M.LINE_STRIP,j,$,te,Fi.disabled,ch(s.b4.red),be,ot,oe,T.debugBuffer,T.tileBorderIndexBuffer,T.debugSegments)}function zu(T,l,c,C){const{isRenderingGlobe:M}=C,R=T.context,j=R.gl,$=T.transform,te=T.colorModeForRenderPass(),oe=T.getDepthModeFor3D(),be=T.useProgram("terrain");R.bindFramebuffer.set(null),R.viewport.set([0,0,T.width,T.height]);for(const Ee of c){const Ie=l.getTerrainMesh(Ee.tileID),qe=T.renderToTexture.getTexture(Ee),Ve=l.getTerrainData(Ee.tileID);R.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,qe.texture);const At=l.getMeshFrameDelta($.zoom),ot=$.calculateFogMatrix(Ee.tileID.toUnwrapped()),ct=uh(At,ot,T.style.sky,$.pitch,M),yt=$.getProjectionData({overscaledTileID:Ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});be.draw(R,j.TRIANGLES,oe,Gi.disabled,te,Fi.backCCW,ct,Ve,yt,"terrain",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}}function gh(T,l){if(!l.mesh){const c=new s.aC;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const C=new s.aE;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),l.mesh=new Ha(T.createVertexBuffer(c,ci.members),T.createIndexBuffer(C),s.aD.simpleSegment(0,0,c.length,C.length))}return l.mesh}class ju{constructor(l,c){this.context=new Zh(l),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.aq(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=fe.maxUnderzooming+fe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new js}resize(l,c,C){if(this.width=Math.floor(l*C),this.height=Math.floor(c*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const l=this.context,c=new s.aC;c.emplaceBack(0,0),c.emplaceBack(s.X,0),c.emplaceBack(0,s.X),c.emplaceBack(s.X,s.X),this.tileExtentBuffer=l.createVertexBuffer(c,ci.members),this.tileExtentSegments=s.aD.simpleSegment(0,0,4,2);const C=new s.aC;C.emplaceBack(0,0),C.emplaceBack(s.X,0),C.emplaceBack(0,s.X),C.emplaceBack(s.X,s.X),this.debugBuffer=l.createVertexBuffer(C,ci.members),this.debugSegments=s.aD.simpleSegment(0,0,4,5);const M=new s.bT;M.emplaceBack(0,0,0,0),M.emplaceBack(s.X,0,s.X,0),M.emplaceBack(0,s.X,0,s.X),M.emplaceBack(s.X,s.X,s.X,s.X),this.rasterBoundsBuffer=l.createVertexBuffer(M,Ms.members),this.rasterBoundsSegments=s.aD.simpleSegment(0,0,4,2);const R=new s.aC;R.emplaceBack(0,0),R.emplaceBack(s.X,0),R.emplaceBack(0,s.X),R.emplaceBack(s.X,s.X),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(R,ci.members),this.rasterBoundsSegmentsPosOnly=s.aD.simpleSegment(0,0,4,5);const j=new s.aC;j.emplaceBack(0,0),j.emplaceBack(1,0),j.emplaceBack(0,1),j.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(j,ci.members),this.viewportSegments=s.aD.simpleSegment(0,0,4,2);const $=new s.bU;$.emplaceBack(0),$.emplaceBack(1),$.emplaceBack(3),$.emplaceBack(2),$.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer($);const te=new s.aE;te.emplaceBack(1,0,2),te.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(te);const oe=this.context.gl;this.stencilClearMode=new Gi({func:oe.ALWAYS,mask:0},0,255,oe.ZERO,oe.ZERO,oe.ZERO),this.tileExtentMesh=new Ha(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,c=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=s.H();s.bL(C,0,this.width,this.height,0,0,1),s.K(C,C,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const M={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(l,c.TRIANGLES,Jr.disabled,this.stencilClearMode,Hi.disabled,Fi.disabled,null,null,M,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,c,C){if(this.currentStencilSource===l.source||!l.isTileClipped()||!c||!c.length)return;this.currentStencilSource=l.source,this.nextStencilID+c.length>256&&this.clearStencil();const M=this.context;M.setColorMode(Hi.disabled),M.setDepthMode(Jr.disabled);const R={};for(const j of c)R[j.key]=this.nextStencilID++;this._renderTileMasks(R,c,C,!0),this._renderTileMasks(R,c,C,!1),this._tileClippingMaskIDs=R}_renderTileMasks(l,c,C,M){const R=this.context,j=R.gl,$=this.style.projection,te=this.transform,oe=this.useProgram("clippingMask");for(const be of c){const Ee=l[be.key],Ie=this.style.map.terrain&&this.style.map.terrain.getTerrainData(be),qe=$.getMeshFromTileID(this.context,be.canonical,M,!0,"stencil"),Ve=te.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!0,applyTerrainMatrix:!0});oe.draw(R,j.TRIANGLES,Jr.disabled,new Gi({func:j.ALWAYS,mask:0},Ee,255,j.KEEP,j.KEEP,j.REPLACE),Hi.disabled,C?Fi.disabled:Fi.backCCW,null,Ie,Ve,"$clipping",qe.vertexBuffer,qe.indexBuffer,qe.segments)}}_renderTilesDepthBuffer(){const l=this.context,c=l.gl,C=this.style.projection,M=this.transform,R=this.useProgram("depth"),j=this.getDepthModeFor3D(),$=Ye(M,{tileSize:M.tileSize});for(const te of $){const oe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(te),be=C.getMeshFromTileID(this.context,te.canonical,!0,!0,"raster"),Ee=M.getProjectionData({overscaledTileID:te,applyGlobeMatrix:!0,applyTerrainMatrix:!0});R.draw(l,c.TRIANGLES,j,Gi.disabled,Hi.disabled,Fi.backCCW,null,oe,Ee,"$clipping",be.vertexBuffer,be.indexBuffer,be.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,c=this.context.gl;return new Gi({func:c.NOTEQUAL,mask:255},l,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(l){const c=this.context.gl;return new Gi({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const c=this.context.gl,C=l.sort((j,$)=>$.overscaledZ-j.overscaledZ),M=C[C.length-1].overscaledZ,R=C[0].overscaledZ-M+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const j={};for(let $=0;$<R;$++)j[$+M]=new Gi({func:c.GEQUAL,mask:255},$+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=R,[j,C]}return[{[M]:Gi.disabled},C]}stencilConfigForOverlapTwoPass(l){const c=this.context.gl,C=l.sort((j,$)=>$.overscaledZ-j.overscaledZ),M=C[C.length-1].overscaledZ,R=C[0].overscaledZ-M+1;if(this.clearStencil(),R>1){const j={},$={};for(let te=0;te<R;te++)j[te+M]=new Gi({func:c.GREATER,mask:255},R+1+te,255,c.KEEP,c.KEEP,c.REPLACE),$[te+M]=new Gi({func:c.GREATER,mask:255},1+te,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*R+1,[j,$,C]}return this.nextStencilID=3,[{[M]:new Gi({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[M]:new Gi({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},C]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Hi([l.CONSTANT_COLOR,l.ONE],new s.b4(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Hi.unblended:Hi.alphaBlended}getDepthModeForSublayer(l,c,C){if(!this.opaquePassEnabledForLayer())return Jr.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Jr(C||this.context.gl.LEQUAL,c,[M,M])}getDepthModeFor3D(){return new Jr(this.context.gl.LEQUAL,Jr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,c){var C,M;this.style=l,this.options=c,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(S.now()),this.imageManager.beginFrame();const R=this.style._order,j=this.style.sourceCaches,$={},te={},oe={},be={isRenderingToTexture:!1,isRenderingGlobe:((C=l.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const Ie in j){const qe=j[Ie];qe.used&&qe.prepare(this.context),$[Ie]=qe.getVisibleCoordinates(!1),te[Ie]=$[Ie].slice().reverse(),oe[Ie]=qe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ie=0;Ie<R.length;Ie++)if(this.style._layers[R[Ie]].is3D()){this.opaquePassCutoff=Ie;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Ie of R){const qe=this.style._layers[Ie];if(!qe.hasOffscreenPass()||qe.isHidden(this.transform.zoom))continue;const Ve=te[qe.source];(qe.type==="custom"||Ve.length)&&this.renderLayer(this,j[qe.source],qe,Ve,be)}if((M=this.style.projection)===null||M===void 0||M.updateGPUdependent({context:this.context,useProgram:Ie=>this.useProgram(Ie)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?s.b4.black:s.b4.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Ie,qe){const Ve=Ie.context,At=Ve.gl,ot=((zt,Pt,tn)=>{const Ht=Math.cos(Pt.rollInRadians),vn=Math.sin(Pt.rollInRadians),_n=Za(Pt),gn=Pt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:zt.properties.get("sky-color"),u_horizon_color:zt.properties.get("horizon-color"),u_horizon:[(Pt.width/2-_n*vn)*tn,(Pt.height/2+_n*Ht)*tn],u_horizon_normal:[-vn,Ht],u_sky_horizon_blend:zt.properties.get("sky-horizon-blend")*Pt.height/2*tn,u_sky_blend:gn}})(qe,Ie.style.map.transform,Ie.pixelRatio),ct=new Jr(At.LEQUAL,Jr.ReadWrite,[0,1]),yt=Gi.disabled,Et=Ie.colorModeForRenderPass(),Tt=Ie.useProgram("sky"),Rt=gh(Ve,qe);Tt.draw(Ve,At.TRIANGLES,ct,yt,Et,Fi.disabled,ot,null,void 0,"sky",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=R.length-1;this.currentLayer>=0;this.currentLayer--){const Ie=this.style._layers[R[this.currentLayer]],qe=j[Ie.source],Ve=$[Ie.source];this._renderTileClippingMasks(Ie,Ve,!1),this.renderLayer(this,qe,Ie,Ve,be)}this.renderPass="translucent";let Ee=!1;for(this.currentLayer=0;this.currentLayer<R.length;this.currentLayer++){const Ie=this.style._layers[R[this.currentLayer]],qe=j[Ie.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Ie,be))continue;this.opaquePassEnabledForLayer()||Ee||(Ee=!0,be.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ve=(Ie.type==="symbol"?oe:te)[Ie.source];this._renderTileClippingMasks(Ie,$[Ie.source],!1),this.renderLayer(this,qe,Ie,Ve,be)}if(be.isRenderingGlobe&&function(Ie,qe,Ve){const At=Ie.context,ot=At.gl,ct=Ie.useProgram("atmosphere"),yt=new Jr(ot.LEQUAL,Jr.ReadOnly,[0,1]),Et=Ie.transform,Tt=function(gn,On){const Un=gn.properties.get("position"),wn=[-Un.x,-Un.y,-Un.z],kr=s.aq(new Float64Array(16));return gn.properties.get("anchor")==="map"&&(s.aX(kr,kr,On.rollInRadians),s.aY(kr,kr,-On.pitchInRadians),s.aX(kr,kr,On.bearingInRadians),s.aY(kr,kr,On.center.lat*Math.PI/180),s.bj(kr,kr,-On.center.lng*Math.PI/180)),s.bS(wn,wn,kr),wn}(Ve,Ie.transform),Rt=Et.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),zt=qe.properties.get("atmosphere-blend")*Rt.projectionTransition;if(zt===0)return;const Pt=vi(Et.worldSize,Et.center.lat),tn=Et.inverseProjectionMatrix,Ht=new Float64Array(4);Ht[3]=1,s.al(Ht,Ht,Et.modelViewProjectionMatrix),Ht[0]/=Ht[3],Ht[1]/=Ht[3],Ht[2]/=Ht[3],Ht[3]=1,s.al(Ht,Ht,tn),Ht[0]/=Ht[3],Ht[1]/=Ht[3],Ht[2]/=Ht[3],Ht[3]=1;const vn=((gn,On,Un,wn,kr)=>({u_sun_pos:gn,u_atmosphere_blend:On,u_globe_position:Un,u_globe_radius:wn,u_inv_proj_matrix:kr}))(Tt,zt,[Ht[0],Ht[1],Ht[2]],Pt,tn),_n=gh(At,qe);ct.draw(At,ot.TRIANGLES,yt,Gi.disabled,Hi.alphaBlended,Fi.disabled,vn,null,null,"atmosphere",_n.vertexBuffer,_n.indexBuffer,_n.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Ie=function(qe,Ve){let At=null;const ot=Object.values(qe._layers).flatMap(Tt=>Tt.source&&!Tt.isHidden(Ve)?[qe.sourceCaches[Tt.source]]:[]),ct=ot.filter(Tt=>Tt.getSource().type==="vector"),yt=ot.filter(Tt=>Tt.getSource().type!=="vector"),Et=Tt=>{(!At||At.getSource().maxzoom<Tt.getSource().maxzoom)&&(At=Tt)};return ct.forEach(Tt=>Et(Tt)),At||yt.forEach(Tt=>Et(Tt)),At}(this.style,this.transform.zoom);Ie&&function(qe,Ve,At){for(let ot=0;ot<At.length;ot++)JA(qe,Ve,At[ot])}(this,Ie,Ie.getVisibleCoordinates())}this.options.showPadding&&function(Ie){const qe=Ie.transform.padding;Nl(Ie,Ie.transform.height-(qe.top||0),3,Df),Nl(Ie,qe.bottom||0,3,ph),xA(Ie,qe.left||0,3,mh),xA(Ie,Ie.transform.width-(qe.right||0),3,Uu);const Ve=Ie.transform.centerPoint;(function(At,ot,ct,yt){hl(At,ot-1,ct-10,2,20,yt),hl(At,ot-10,ct-1,20,2,yt)})(Ie,Ve.x,Ie.transform.height-Ve.y,XA)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let M=this.terrainFacilitator.dirty;M||(M=l?!s.bV(c,C):!s.bW(c,C)),M||(M=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),M&&(s.bX(c,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(R,j){const $=R.context,te=$.gl,oe=R.transform,be=Hi.unblended,Ee=new Jr(te.LEQUAL,Jr.ReadWrite,[0,1]),Ie=j.sourceCache.getRenderableTiles(),qe=R.useProgram("terrainDepth");$.bindFramebuffer.set(j.getFramebuffer("depth").framebuffer),$.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),$.clear({color:s.b4.transparent,depth:1});for(const Ve of Ie){const At=j.getTerrainMesh(Ve.tileID),ot=j.getTerrainData(Ve.tileID),ct=oe.getProjectionData({overscaledTileID:Ve.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),yt={u_ele_delta:j.getMeshFrameDelta(oe.zoom)};qe.draw($,te.TRIANGLES,Ee,Gi.disabled,be,Fi.backCCW,yt,ot,ct,"terrain",At.vertexBuffer,At.indexBuffer,At.segments)}$.bindFramebuffer.set(null),$.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain),function(R,j){const $=R.context,te=$.gl,oe=R.transform,be=Hi.unblended,Ee=new Jr(te.LEQUAL,Jr.ReadWrite,[0,1]),Ie=j.getCoordsTexture(),qe=j.sourceCache.getRenderableTiles(),Ve=R.useProgram("terrainCoords");$.bindFramebuffer.set(j.getFramebuffer("coords").framebuffer),$.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),$.clear({color:s.b4.transparent,depth:1}),j.coordsIndex=[];for(const At of qe){const ot=j.getTerrainMesh(At.tileID),ct=j.getTerrainData(At.tileID);$.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,Ie.texture);const yt={u_terrain_coords_id:(255-j.coordsIndex.length)/255,u_texture:0,u_ele_delta:j.getMeshFrameDelta(oe.zoom)},Et=oe.getProjectionData({overscaledTileID:At.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ve.draw($,te.TRIANGLES,Ee,Gi.disabled,be,Fi.backCCW,yt,ct,Et,"terrain",ot.vertexBuffer,ot.indexBuffer,ot.segments),j.coordsIndex.push(At.tileID.key)}$.bindFramebuffer.set(null),$.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain))}renderLayer(l,c,C,M,R){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(M||[]).length)&&(this.id=C.id,s.bY(C)?function(j,$,te,oe,be,Ee){if(j.renderPass!=="translucent")return;const{isRenderingToTexture:Ie}=Ee,qe=Gi.disabled,Ve=j.colorModeForRenderPass();(te._unevaluatedLayout.hasValue("text-variable-anchor")||te._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(At,ot,ct,yt,Et,Tt,Rt,zt,Pt){const tn=ot.transform,Ht=ot.style.map.terrain,vn=Et==="map",_n=Tt==="map";for(const gn of At){const On=yt.getTile(gn),Un=On.getBucket(ct);if(!Un||!Un.text||!Un.text.segments.get().length)continue;const wn=s.ah(Un.textSizeData,tn.zoom),kr=s.at(On,1,ot.transform.zoom),Bi=Ot(vn,ot.transform,kr),$i=ct.layout.get("icon-text-fit")!=="none"&&Un.hasIconData();{const Bo=Math.pow(2,tn.zoom-On.tileID.overscaledZ),Si=Ht?(zo,jo)=>Ht.getElevation(gn,zo,jo):null;bA(Un,vn,_n,Pt,tn,Bi,Bo,wn,$i,s.au(tn,On,Rt,zt),gn.toUnwrapped(),Si)}}}(oe,j,te,$,te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),be),te.paint.get("icon-opacity").constantOr(1)!==0&&Wc(j,$,te,oe,!1,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),te.layout.get("icon-rotation-alignment"),te.layout.get("icon-pitch-alignment"),te.layout.get("icon-keep-upright"),qe,Ve,Ie),te.paint.get("text-opacity").constantOr(1)!==0&&Wc(j,$,te,oe,!0,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.layout.get("text-keep-upright"),qe,Ve,Ie),$.map.showCollisionBoxes&&(fh(j,$,te,oe,!0),fh(j,$,te,oe,!1))}(l,c,C,M,this.style.placement.variableOffsets,R):s.bZ(C)?function(j,$,te,oe,be){if(j.renderPass!=="translucent")return;const{isRenderingToTexture:Ee}=be,Ie=te.paint.get("circle-opacity"),qe=te.paint.get("circle-stroke-width"),Ve=te.paint.get("circle-stroke-opacity"),At=!te.layout.get("circle-sort-key").isConstant();if(Ie.constantOr(1)===0&&(qe.constantOr(1)===0||Ve.constantOr(1)===0))return;const ot=j.context,ct=ot.gl,yt=j.transform,Et=j.getDepthModeForSublayer(0,Jr.ReadOnly),Tt=Gi.disabled,Rt=j.colorModeForRenderPass(),zt=[],Pt=yt.getCircleRadiusCorrection();for(let tn=0;tn<oe.length;tn++){const Ht=oe[tn],vn=$.getTile(Ht),_n=vn.getBucket(te);if(!_n)continue;const gn=te.paint.get("circle-translate"),On=te.paint.get("circle-translate-anchor"),Un=s.au(yt,vn,gn,On),wn=_n.programConfigurations.get(te.id),kr=j.useProgram("circle",wn),Bi=_n.layoutVertexBuffer,$i=_n.indexBuffer,Bo=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Ht),Si={programConfiguration:wn,program:kr,layoutVertexBuffer:Bi,indexBuffer:$i,uniformValues:ef(j,vn,te,Un,Pt),terrainData:Bo,projectionData:yt.getProjectionData({overscaledTileID:Ht,applyGlobeMatrix:!Ee,applyTerrainMatrix:!0})};if(At){const zo=_n.segments.get();for(const jo of zo)zt.push({segments:new s.aD([jo]),sortKey:jo.sortKey,state:Si})}else zt.push({segments:_n.segments,sortKey:0,state:Si})}At&&zt.sort((tn,Ht)=>tn.sortKey-Ht.sortKey);for(const tn of zt){const{programConfiguration:Ht,program:vn,layoutVertexBuffer:_n,indexBuffer:gn,uniformValues:On,terrainData:Un,projectionData:wn}=tn.state;vn.draw(ot,ct.TRIANGLES,Et,Tt,Rt,Fi.backCCW,On,Un,wn,te.id,_n,gn,tn.segments,te.paint,j.transform.zoom,Ht)}}(l,c,C,M,R):s.b_(C)?function(j,$,te,oe,be){if(te.paint.get("heatmap-opacity")===0)return;const Ee=j.context,{isRenderingToTexture:Ie,isRenderingGlobe:qe}=be;if(j.style.map.terrain){for(const Ve of oe){const At=$.getTile(Ve);$.hasRenderableParent(Ve)||(j.renderPass==="offscreen"?Vo(j,At,te,Ve,qe):j.renderPass==="translucent"&&Qc(j,te,Ve,Ie,qe))}Ee.viewport.set([0,0,j.width,j.height])}else j.renderPass==="offscreen"?function(Ve,At,ot,ct){const yt=Ve.context,Et=yt.gl,Tt=Ve.transform,Rt=Gi.disabled,zt=new Hi([Et.ONE,Et.ONE],s.b4.transparent,[!0,!0,!0,!0]);(function(Pt,tn,Ht){const vn=Pt.gl;Pt.activeTexture.set(vn.TEXTURE1),Pt.viewport.set([0,0,tn.width/4,tn.height/4]);let _n=Ht.heatmapFbos.get(s.bP);_n?(vn.bindTexture(vn.TEXTURE_2D,_n.colorAttachment.get()),Pt.bindFramebuffer.set(_n.framebuffer)):(_n=ZA(Pt,tn.width/4,tn.height/4),Ht.heatmapFbos.set(s.bP,_n))})(yt,Ve,ot),yt.clear({color:s.b4.transparent});for(let Pt=0;Pt<ct.length;Pt++){const tn=ct[Pt];if(At.hasRenderableParent(tn))continue;const Ht=At.getTile(tn),vn=Ht.getBucket(ot);if(!vn)continue;const _n=vn.programConfigurations.get(ot.id),gn=Ve.useProgram("heatmap",_n),On=Tt.getProjectionData({overscaledTileID:tn,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Un=Tt.getCircleRadiusCorrection();gn.draw(yt,Et.TRIANGLES,Jr.disabled,Rt,zt,Fi.backCCW,fc(Ht,Tt.zoom,ot.paint.get("heatmap-intensity"),Un),null,On,ot.id,vn.layoutVertexBuffer,vn.indexBuffer,vn.segments,ot.paint,Tt.zoom,_n)}yt.viewport.set([0,0,Ve.width,Ve.height])}(j,$,te,oe):j.renderPass==="translucent"&&function(Ve,At){const ot=Ve.context,ct=ot.gl;ot.setColorMode(Ve.colorModeForRenderPass());const yt=At.heatmapFbos.get(s.bP);yt&&(ot.activeTexture.set(ct.TEXTURE0),ct.bindTexture(ct.TEXTURE_2D,yt.colorAttachment.get()),ot.activeTexture.set(ct.TEXTURE1),Fu(ot,At).bind(ct.LINEAR,ct.CLAMP_TO_EDGE),Ve.useProgram("heatmapTexture").draw(ot,ct.TRIANGLES,Jr.disabled,Gi.disabled,Ve.colorModeForRenderPass(),Fi.disabled,wd(Ve,At,0,1),null,null,At.id,Ve.viewportBuffer,Ve.quadTriangleIndexBuffer,Ve.viewportSegments,At.paint,Ve.transform.zoom))}(j,te)}(l,c,C,M,R):s.b$(C)?function(j,$,te,oe,be){if(j.renderPass!=="translucent")return;const{isRenderingToTexture:Ee}=be,Ie=te.paint.get("line-opacity"),qe=te.paint.get("line-width");if(Ie.constantOr(1)===0||qe.constantOr(1)===0)return;const Ve=j.getDepthModeForSublayer(0,Jr.ReadOnly),At=j.colorModeForRenderPass(),ot=te.paint.get("line-dasharray"),ct=te.paint.get("line-pattern"),yt=ct.constantOr(1),Et=te.paint.get("line-gradient"),Tt=te.getCrossfadeParameters(),Rt=yt?"linePattern":ot?"lineSDF":Et?"lineGradient":"line",zt=j.context,Pt=zt.gl,tn=j.transform;let Ht=!0;for(const vn of oe){const _n=$.getTile(vn);if(yt&&!_n.patternsLoaded())continue;const gn=_n.getBucket(te);if(!gn)continue;const On=gn.programConfigurations.get(te.id),Un=j.context.program.get(),wn=j.useProgram(Rt,On),kr=Ht||wn.program!==Un,Bi=j.style.map.terrain&&j.style.map.terrain.getTerrainData(vn),$i=ct.constantOr(null);if($i&&_n.imageAtlas){const xo=_n.imageAtlas,yo=xo.patternPositions[$i.to.toString()],Oa=xo.patternPositions[$i.from.toString()];yo&&Oa&&On.setConstantPatternPositions(yo,Oa)}const Bo=tn.getProjectionData({overscaledTileID:vn,applyGlobeMatrix:!Ee,applyTerrainMatrix:!0}),Si=tn.getPixelScale(),zo=yt?Sd(j,_n,te,Si,Tt):ot?mu(j,_n,te,Si,ot,Tt):Et?pu(j,_n,te,Si,gn.lineClipsArray.length):Fc(j,_n,te,Si);if(yt)zt.activeTexture.set(Pt.TEXTURE0),_n.imageAtlasTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE),On.updatePaintBuffers(Tt);else if(ot&&(kr||j.lineAtlas.dirty))zt.activeTexture.set(Pt.TEXTURE0),j.lineAtlas.bind(zt);else if(Et){const xo=gn.gradients[te.id];let yo=xo.texture;if(te.gradientVersion!==xo.version){let Oa=256;if(te.stepInterpolant){const No=$.getSource().maxzoom,hs=vn.canonical.z===No?Math.ceil(1<<j.transform.maxZoom-vn.canonical.z):1;Oa=s.ab(s.bQ(gn.maxLineLength/s.X*1024*hs),256,zt.maxTextureSize)}xo.gradient=s.bR({expression:te.gradientExpression(),evaluationKey:"lineProgress",resolution:Oa,image:xo.gradient||void 0,clips:gn.lineClipsArray}),xo.texture?xo.texture.update(xo.gradient):xo.texture=new ie(zt,xo.gradient,Pt.RGBA),xo.version=te.gradientVersion,yo=xo.texture}zt.activeTexture.set(Pt.TEXTURE0),yo.bind(te.stepInterpolant?Pt.NEAREST:Pt.LINEAR,Pt.CLAMP_TO_EDGE)}let jo;if(Ee){const[xo]=j.getStencilConfigForOverlapAndUpdateStencilID(oe);jo=xo[vn.overscaledZ]}else jo=j.stencilModeForClipping(vn);wn.draw(zt,Pt.TRIANGLES,Ve,jo,At,Fi.disabled,zo,Bi,Bo,te.id,gn.layoutVertexBuffer,gn.indexBuffer,gn.segments,te.paint,j.transform.zoom,On,gn.layoutVertexBuffer2),Ht=!1}}(l,c,C,M,R):s.c0(C)?function(j,$,te,oe,be){const Ee=te.paint.get("fill-color"),Ie=te.paint.get("fill-opacity");if(Ie.constantOr(1)===0)return;const{isRenderingToTexture:qe}=be,Ve=j.colorModeForRenderPass(),At=te.paint.get("fill-pattern"),ot=j.opaquePassEnabledForLayer()&&!At.constantOr(1)&&Ee.constantOr(s.b4.transparent).a===1&&Ie.constantOr(0)===1?"opaque":"translucent";if(j.renderPass===ot){const ct=j.getDepthModeForSublayer(1,j.renderPass==="opaque"?Jr.ReadWrite:Jr.ReadOnly);Jh(j,$,te,oe,ct,Ve,!1,qe)}if(j.renderPass==="translucent"&&te.paint.get("fill-antialias")){const ct=j.getDepthModeForSublayer(te.getPaintProperty("fill-outline-color")?2:0,Jr.ReadOnly);Jh(j,$,te,oe,ct,Ve,!0,qe)}}(l,c,C,M,R):s.c1(C)?function(j,$,te,oe,be){const Ee=te.paint.get("fill-extrusion-opacity");if(Ee===0)return;const{isRenderingToTexture:Ie}=be;if(j.renderPass==="translucent"){const qe=new Jr(j.context.gl.LEQUAL,Jr.ReadWrite,j.depthRangeFor3D);if(Ee!==1||te.paint.get("fill-extrusion-pattern").constantOr(1))Yc(j,$,te,oe,qe,Gi.disabled,Hi.disabled,Ie),Yc(j,$,te,oe,qe,j.stencilModeFor3D(),j.colorModeForRenderPass(),Ie);else{const Ve=j.colorModeForRenderPass();Yc(j,$,te,oe,qe,Gi.disabled,Ve,Ie)}}}(l,c,C,M,R):s.c2(C)?function(j,$,te,oe,be){if(j.renderPass!=="offscreen"&&j.renderPass!=="translucent")return;const{isRenderingToTexture:Ee}=be,Ie=j.context,qe=j.style.projection.useSubdivision,Ve=j.getDepthModeForSublayer(0,Jr.ReadOnly),At=j.colorModeForRenderPass();if(j.renderPass==="offscreen")(function(ot,ct,yt,Et,Tt,Rt,zt){const Pt=ot.context,tn=Pt.gl;for(const Ht of yt){const vn=ct.getTile(Ht),_n=vn.dem;if(!_n||!_n.data||!vn.needsHillshadePrepare)continue;const gn=_n.dim,On=_n.stride,Un=_n.getPixels();if(Pt.activeTexture.set(tn.TEXTURE1),Pt.pixelStoreUnpackPremultiplyAlpha.set(!1),vn.demTexture=vn.demTexture||ot.getTileTexture(On),vn.demTexture){const kr=vn.demTexture;kr.update(Un,{premultiply:!1}),kr.bind(tn.NEAREST,tn.CLAMP_TO_EDGE)}else vn.demTexture=new ie(Pt,Un,tn.RGBA,{premultiply:!1}),vn.demTexture.bind(tn.NEAREST,tn.CLAMP_TO_EDGE);Pt.activeTexture.set(tn.TEXTURE0);let wn=vn.fbo;if(!wn){const kr=new ie(Pt,{width:gn,height:gn,data:null},tn.RGBA);kr.bind(tn.LINEAR,tn.CLAMP_TO_EDGE),wn=vn.fbo=Pt.createFramebuffer(gn,gn,!0,!1),wn.colorAttachment.set(kr.texture)}Pt.bindFramebuffer.set(wn.framebuffer),Pt.viewport.set([0,0,gn,gn]),ot.useProgram("hillshadePrepare").draw(Pt,tn.TRIANGLES,Tt,Rt,zt,Fi.disabled,hh(vn.tileID,_n),null,null,Et.id,ot.rasterBoundsBuffer,ot.quadTriangleIndexBuffer,ot.rasterBoundsSegments),vn.needsHillshadePrepare=!1}})(j,$,oe,te,Ve,Gi.disabled,At),Ie.viewport.set([0,0,j.width,j.height]);else if(j.renderPass==="translucent")if(qe){const[ot,ct,yt]=j.stencilConfigForOverlapTwoPass(oe);vc(j,$,te,yt,ot,Ve,At,!1,Ee),vc(j,$,te,yt,ct,Ve,At,!0,Ee)}else{const[ot,ct]=j.getStencilConfigForOverlapAndUpdateStencilID(oe);vc(j,$,te,ct,ot,Ve,At,!1,Ee)}}(l,c,C,M,R):s.c3(C)?function(j,$,te,oe,be){if(j.renderPass!=="translucent"||te.paint.get("raster-opacity")===0||!oe.length)return;const{isRenderingToTexture:Ee}=be,Ie=$.getSource(),qe=j.style.projection.useSubdivision;if(Ie instanceof cr)Uo(j,$,te,oe,null,!1,!1,Ie.tileCoords,Ie.flippedWindingOrder,Ee);else if(qe){const[Ve,At,ot]=j.stencilConfigForOverlapTwoPass(oe);Uo(j,$,te,ot,Ve,!1,!0,As,!1,Ee),Uo(j,$,te,ot,At,!0,!0,As,!1,Ee)}else{const[Ve,At]=j.getStencilConfigForOverlapAndUpdateStencilID(oe);Uo(j,$,te,At,Ve,!1,!0,As,!1,Ee)}}(l,c,C,M,R):s.c4(C)?function(j,$,te,oe,be){const Ee=te.paint.get("background-color"),Ie=te.paint.get("background-opacity");if(Ie===0)return;const{isRenderingToTexture:qe}=be,Ve=j.context,At=Ve.gl,ot=j.style.projection,ct=j.transform,yt=ct.tileSize,Et=te.paint.get("background-pattern");if(j.isPatternMissing(Et))return;const Tt=!Et&&Ee.a===1&&Ie===1&&j.opaquePassEnabledForLayer()?"opaque":"translucent";if(j.renderPass!==Tt)return;const Rt=Gi.disabled,zt=j.getDepthModeForSublayer(0,Tt==="opaque"?Jr.ReadWrite:Jr.ReadOnly),Pt=j.colorModeForRenderPass(),tn=j.useProgram(Et?"backgroundPattern":"background"),Ht=oe||Ye(ct,{tileSize:yt,terrain:j.style.map.terrain});Et&&(Ve.activeTexture.set(At.TEXTURE0),j.imageManager.bind(j.context));const vn=te.getCrossfadeParameters();for(const _n of Ht){const gn=ct.getProjectionData({overscaledTileID:_n,applyGlobeMatrix:!qe,applyTerrainMatrix:!0}),On=Et?rf(Ie,j,Et,{tileID:_n,tileSize:yt},vn):zc(Ie,Ee),Un=j.style.map.terrain&&j.style.map.terrain.getTerrainData(_n),wn=ot.getMeshFromTileID(Ve,_n.canonical,!1,!0,"raster");tn.draw(Ve,At.TRIANGLES,zt,Rt,Pt,Fi.backCCW,On,Un,gn,te.id,wn.vertexBuffer,wn.indexBuffer,wn.segments)}}(l,0,C,M,R):s.c5(C)&&function(j,$,te,oe){const{isRenderingGlobe:be}=oe,Ee=j.context,Ie=te.implementation,qe=j.style.projection,Ve=j.transform,At=Ve.getProjectionDataForCustomLayer(be),ot={farZ:Ve.farZ,nearZ:Ve.nearZ,fov:Ve.fov*Math.PI/180,modelViewProjectionMatrix:Ve.modelViewProjectionMatrix,projectionMatrix:Ve.projectionMatrix,shaderData:{variantName:qe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${qe.shaderPreludeCode.vertexSource}`,define:qe.shaderDefine},defaultProjectionData:At},ct=Ie.renderingMode?Ie.renderingMode:"2d";if(j.renderPass==="offscreen"){const yt=Ie.prerender;yt&&(j.setCustomLayerDefaults(),Ee.setColorMode(j.colorModeForRenderPass()),yt.call(Ie,Ee.gl,ot),Ee.setDirty(),j.setBaseState())}else if(j.renderPass==="translucent"){j.setCustomLayerDefaults(),Ee.setColorMode(j.colorModeForRenderPass()),Ee.setStencilMode(Gi.disabled);const yt=ct==="3d"?j.getDepthModeFor3D():j.getDepthModeForSublayer(0,Jr.ReadOnly);Ee.setDepthMode(yt),Ie.render(Ee.gl,ot),Ee.setDirty(),j.setBaseState(),Ee.bindFramebuffer.set(null)}}(l,0,C,R))}saveTileTexture(l){const c=this._tileTextures[l.size[0]];c?c.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const c=this._tileTextures[l];return c&&c.length>0?c.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const c=this.imageManager.getPattern(l.from.toString()),C=this.imageManager.getPattern(l.to.toString());return!c||!C}useProgram(l,c,C=!1){this.cache=this.cache||{};const M=!!this.style.map.terrain,R=this.style.projection,j=l+(c?c.cacheKey:"")+`/${C?iA:R.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(M?"/terrain":"");return this.cache[j]||(this.cache[j]=new qh(this.context,ri[l],c,dh[l],this._showOverdrawInspector,M,C?ri.projectionMercator:R.shaderPreludeCode,C?ca:R.shaderDefine)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ie(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:c}=this.context.gl;return this.width!==l||this.height!==c}}function ed(T,l){let c,C=!1,M=null,R=null;const j=()=>{M=null,C&&(T.apply(R,c),M=setTimeout(j,l),C=!1)};return(...$)=>(C=!0,R=this,c=$,M||j(),M)}class ec{constructor(l){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let C;return c.split("&").map(M=>M.split("=")).forEach(M=>{M[0]===this._hashName&&(C=M)}),(C&&C[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:C,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const C=c.join("/");let M=C;M.split("&").length>0&&(M=M.split("&")[0]),this._hashName&&(M=`${this._hashName}=${C}`);let R=window.location.hash.replace(M,"");R.startsWith("#&")?R=R.slice(0,1)+R.slice(2):R==="#"&&(R="");let j=window.location.href.replace(/(#.+)?$/,R);j=j.replace("&&","&"),window.history.replaceState(window.history.state,null,j)},this._updateHash=ed(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const c=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,M=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,M),j=Math.round(c.lng*R)/R,$=Math.round(c.lat*R)/R,te=this._map.getBearing(),oe=this._map.getPitch();let be="";if(be+=l?`/${j}/${$}/${C}`:`${C}/${$}/${j}`,(te||oe)&&(be+="/"+Math.round(10*te)/10),oe&&(be+=`/${Math.round(oe)}`),this._hashName){const Ee=this._hashName;let Ie=!1;const qe=window.location.hash.slice(1).split("&").map(Ve=>{const At=Ve.split("=")[0];return At===Ee?(Ie=!0,`${At}=${be}`):Ve}).filter(Ve=>Ve);return Ie||qe.push(`${Ee}=${be}`),`#${qe.join("&")}`}return`#${be}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new s.N(+l[2],+l[1])}catch{return!1}const c=+l[0],C=+(l[3]||0),M=+(l[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&C>=0&&C<=180&&M>=this._map.getMinPitch()&&M<=this._map.getMaxPitch()}}const Nu={linearity:.3,easing:s.c6(0,0,.3,1)},Gu=s.e({deceleration:2500,maxSpeed:1400},Nu),wA=s.e({deceleration:20,maxSpeed:1400},Nu),_c=s.e({deceleration:1e3,maxSpeed:360},Nu),_u=s.e({deceleration:1e3,maxSpeed:90},Nu),$c=s.e({deceleration:1e3,maxSpeed:360},Nu);class et{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:S.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,c=S.now();for(;l.length>0&&c-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)c.zoom+=R.zoomDelta||0,c.bearing+=R.bearingDelta||0,c.pitch+=R.pitchDelta||0,c.roll+=R.rollDelta||0,R.panDelta&&c.pan._add(R.panDelta),R.around&&(c.around=R.around),R.pinchAround&&(c.pinchAround=R.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(c.pan.mag()){const R=Eo(c.pan.mag(),C,s.e({},Gu,l||{})),j=c.pan.mult(R.amount/c.pan.mag()),$=this._map.cameraHelper.handlePanInertia(j,this._map.transform);M.center=$.easingCenter,M.offset=$.easingOffset,Ua(M,R)}if(c.zoom){const R=Eo(c.zoom,C,wA);M.zoom=this._map.transform.zoom+R.amount,Ua(M,R)}if(c.bearing){const R=Eo(c.bearing,C,_c);M.bearing=this._map.transform.bearing+s.ab(R.amount,-179,179),Ua(M,R)}if(c.pitch){const R=Eo(c.pitch,C,_u);M.pitch=this._map.transform.pitch+R.amount,Ua(M,R)}if(c.roll){const R=Eo(c.roll,C,$c);M.roll=this._map.transform.roll+s.ab(R.amount,-179,179),Ua(M,R)}if(M.zoom||M.bearing){const R=c.pinchAround===void 0?c.around:c.pinchAround;M.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),s.e(M,{noMoveStart:!0})}}function Ua(T,l){(!T.duration||T.duration<l.duration)&&(T.duration=l.duration,T.easing=l.easing)}function Eo(T,l,c){const{maxSpeed:C,linearity:M,deceleration:R}=c,j=s.ab(T*M/(l/1e3),-C,C),$=Math.abs(j)/(R*M);return{easing:c.easing,duration:1e3*$,amount:j*($/2)}}class Ri extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,C,M={}){const R=I.mousePos(c.getCanvas(),C),j=c.unproject(R);super(l,s.e({point:R,lngLat:j,originalEvent:C},M)),this._defaultPrevented=!1,this.target=c}}class $r extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,C){const M=l==="touchend"?C.changedTouches:C.touches,R=I.touchPos(c.getCanvasContainer(),M),j=R.map(te=>c.unproject(te)),$=R.reduce((te,oe,be,Ee)=>te.add(oe.div(Ee.length)),new s.P(0,0));super(l,{points:R,point:$,lngLats:j,lngLat:c.unproject($),originalEvent:C}),this._defaultPrevented=!1}}class Ss extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,C){super(l,{originalEvent:C}),this._defaultPrevented=!1}}class yh{constructor(l,c){this._map=l,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Ss(l.type,this._map,l))}mousedown(l,c){return this._mousedownPos=c,this._firePreventable(new Ri(l.type,this._map,l))}mouseup(l){this._map.fire(new Ri(l.type,this._map,l))}click(l,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ri(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Ri(l.type,this._map,l))}mouseover(l){this._map.fire(new Ri(l.type,this._map,l))}mouseout(l){this._map.fire(new Ri(l.type,this._map,l))}touchstart(l){return this._firePreventable(new $r(l.type,this._map,l))}touchmove(l){this._map.fire(new $r(l.type,this._map,l))}touchend(l){this._map.fire(new $r(l.type,this._map,l))}touchcancel(l){this._map.fire(new $r(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class td{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Ri(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Ri(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ea{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(s.P.convert(l),this._map.terrain)}}class Gs{constructor(l,c){this._map=l,this._tr=new Ea(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,c){this.isEnabled()&&l.shiftKey&&l.button===0&&(I.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(l,c){if(!this._active)return;const C=c;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=C,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const R=Math.min(M.x,C.x),j=Math.max(M.x,C.x),$=Math.min(M.y,C.y),te=Math.max(M.y,C.y);I.setTransform(this._box,`translate(${R}px,${$}px)`),this._box.style.width=j-R+"px",this._box.style.height=te-$+"px"}mouseupWindow(l,c){if(!this._active||l.button!==0)return;const C=this._startPos,M=c;if(this.reset(),I.suppressClick(),C.x!==M.x||C.y!==M.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:l})),{cameraAnimation:R=>R.fitScreenCoordinates(C,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,c){return this._map.fire(new s.k(l,{originalEvent:c}))}}function _s(T,l){if(T.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${T.length}, points ${l.length}`);const c={};for(let C=0;C<T.length;C++)c[T[C].identifier]=l[C];return c}class uA{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,c,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),C.length===this.numTouches&&(this.centroid=function(M){const R=new s.P(0,0);for(const j of M)R._add(j);return R.div(M.length)}(c),this.touches=_s(C,c)))}touchmove(l,c,C){if(this.aborted||!this.centroid)return;const M=_s(C,c);for(const R in this.touches){const j=M[R];(!j||j.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(l,c,C){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class Es{constructor(l){this.singleTap=new uA(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,c,C){this.singleTap.touchstart(l,c,C)}touchmove(l,c,C){this.singleTap.touchmove(l,c,C)}touchend(l,c,C){const M=this.singleTap.touchend(l,c,C);if(M){const R=l.timeStamp-this.lastTime<500,j=!this.lastTap||this.lastTap.dist(M)<30;if(R&&j||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class dr{constructor(l){this._tr=new Ea(l),this._zoomIn=new Es({numTouches:1,numTaps:2}),this._zoomOut=new Es({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,c,C){this._zoomIn.touchstart(l,c,C),this._zoomOut.touchstart(l,c,C)}touchmove(l,c,C){this._zoomIn.touchmove(l,c,C),this._zoomOut.touchmove(l,c,C)}touchend(l,c,C){const M=this._zoomIn.touchend(l,c,C),R=this._zoomOut.touchend(l,c,C),j=this._tr;return M?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:j.zoom+1,around:j.unproject(M)},{originalEvent:l})}):R?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:j.zoom-1,around:j.unproject(R)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class va{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const c=this._moveFunction(...l);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(l,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,c){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const M=Array.isArray(c)?c[0]:c;return!this._moved&&M.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(C,M))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&I.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vc={0:1,2:2};class Ba{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const c=I.mouseButton(l);this._eventButton=c}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(c,C){const M=Vc[C];return c.buttons===void 0||(c.buttons&M)!==M}(l,this._eventButton)}isValidEndEvent(l){return I.mouseButton(l)===this._eventButton}}class tc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class vh{constructor(l=new Ba({checkCorrectEvent:()=>!0}),c=new tc){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(l,c,C){return l instanceof MouseEvent?c(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?C(l):void 0}startMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const _h=T=>{T.mousedown=T.dragStart,T.mousemoveWindow=T.dragMove,T.mouseup=T.dragEnd,T.contextmenu=l=>{l.preventDefault()}};class Mi{constructor(l,c){this._clickTolerance=l.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,c,C){return this._calculateTransform(l,c,C)}touchmove(l,c,C){if(this._active){if(!this._shouldBePrevented(C.length))return l.preventDefault(),this._calculateTransform(l,c,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,c,C){this._calculateTransform(l,c,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,c,C){C.length>0&&(this._active=!0);const M=_s(C,c),R=new s.P(0,0),j=new s.P(0,0);let $=0;for(const oe in M){const be=M[oe],Ee=this._touches[oe];Ee&&(R._add(be),j._add(be.sub(Ee)),$++,M[oe]=be)}if(this._touches=M,this._shouldBePrevented($)||!j.mag())return;const te=j.div($);return this._sum._add(te),this._sum.mag()<this._clickTolerance?void 0:{around:R.div($),panDelta:te}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ch{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,c,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([c[0],c[1]]))}touchmove(l,c,C){if(!this._firstTwoTouches)return;l.preventDefault();const[M,R]=this._firstTwoTouches,j=Gl(C,c,M),$=Gl(C,c,R);if(!j||!$)return;const te=this._aroundCenter?null:j.add($).div(2);return this._move([j,$],te,l)}touchend(l,c,C){if(!this._firstTwoTouches)return;const[M,R]=this._firstTwoTouches,j=Gl(C,c,M),$=Gl(C,c,R);j&&$||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Gl(T,l,c){for(let C=0;C<T.length;C++)if(T[C].identifier===c)return l[C]}function bh(T,l){return Math.log(T/l)/Math.LN2}class xh extends Ch{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,c){const C=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(bh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bh(this._distance,C),pinchAround:c}}}function MA(T,l){return 180*T.angleWith(l)/Math.PI}class nc extends Ch{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,c,C){const M=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:MA(this._vector,M),pinchAround:c}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const c=25/(Math.PI*this._minDiameter)*360,C=MA(l,this._startVector);return Math.abs(C)<c}}function AA(T){return Math.abs(T.y)>Math.abs(T.x)}class Cc extends Ch{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,c,C){super.touchstart(l,c,C),this._currentTouchCount=C.length}_start(l){this._lastPoints=l,AA(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,c,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const M=l[0].sub(this._lastPoints[0]),R=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,R,C.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(M.y+R.y)/2*-.5}):void 0}gestureBeginsVertically(l,c,C){if(this._valid!==void 0)return this._valid;const M=l.mag()>=2,R=c.mag()>=2;if(!M&&!R)return;if(!M||!R)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const j=l.y>0==c.y>0;return AA(l)&&AA(c)&&j}}const Bs={panStep:100,bearingStep:15,pitchStep:10};class bo{constructor(l){this._tr=new Ea(l);const c=Bs;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let c=0,C=0,M=0,R=0,j=0;switch(l.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:l.shiftKey?C=-1:(l.preventDefault(),R=-1);break;case 39:l.shiftKey?C=1:(l.preventDefault(),R=1);break;case 38:l.shiftKey?M=1:(l.preventDefault(),j=-1);break;case 40:l.shiftKey?M=-1:(l.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(C=0,M=0),{cameraAnimation:$=>{const te=this._tr;$.easeTo({duration:300,easeId:"keyboardHandler",easing:Cu,zoom:c?Math.round(te.zoom)+c*(l.shiftKey?2:1):te.zoom,bearing:te.bearing+C*this._bearingStep,pitch:te.pitch+M*this._pitchStep,offset:[-R*this._panStep,-j*this._panStep],center:te.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Cu(T){return T*(2-T)}const za=4.000244140625;class Ks{constructor(l,c){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=l,this._tr=new Ea(l),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let c=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const C=S.now(),M=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,c!==0&&c%za==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(M*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),l.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=l,this._delta-=c,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=I.mousePos(this._map.getCanvas(),l),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(s.N.convert(C.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const $=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=$),typeof this._targetZoom=="number"&&(this._targetZoom+=$)}if(this._delta!==0){const $=this._type==="wheel"&&Math.abs(this._delta)>za?this._wheelZoomRate:this._defaultZoomRate;let te=2/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&te!==0&&(te=1/te);const oe=typeof this._targetZoom!="number"?l.scale:s.aG(this._targetZoom);this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,s.a8(oe*te))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,C=this._startZoom,M=this._easing;let R,j=!1;if(this._type==="wheel"&&C&&M){const $=S.now()-this._lastWheelEventTime,te=Math.min(($+5)/200,1),oe=M(te);R=s.y.number(C,c,oe),te<1?this._frameId||(this._frameId=!0):j=!0}else R=c,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=R,{noInertia:!0,needsRenderFrame:!j,zoomDelta:R-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let c=s.c8;if(this._prevEase){const C=this._prevEase,M=(S.now()-C.start)/C.duration,R=C.easing(M+.01)-C.easing(M),j=.27/Math.sqrt(R*R+1e-4)*.01,$=Math.sqrt(.0729-j*j);c=s.c6(j,$,.25,1)}return this._prevEase={start:S.now(),duration:l,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ho{constructor(l,c){this._clickZoom=l,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ou{constructor(l){this._tr=new Ea(l),this.reset()}reset(){this._active=!1}dblclick(l,c){return l.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wu{constructor(){this._tap=new Es({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,c,C){if(!this._swipePoint)if(this._tapTime){const M=c[0],R=l.timeStamp-this._tapTime<500,j=this._tapPoint.dist(M)<30;R&&j?C.length>0&&(this._swipePoint=M,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(l,c,C)}touchmove(l,c,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const M=c[0],R=M.y-this._swipePoint.y;return this._swipePoint=M,l.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(l,c,C)}touchend(l,c,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const M=this._tap.touchend(l,c,C);M&&(this._tapTime=l.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bc{constructor(l,c,C){this._el=l,this._mousePan=c,this._touchPan=C}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class nd{constructor(l,c,C,M){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=c,this._mousePitch=C,this._mouseRoll=M}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class SA{constructor(l,c,C,M){this._el=l,this._touchZoom=c,this._touchRotate=C,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class xc{constructor(l,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",l);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),M=document.createElement("div");M.className="maplibregl-desktop-message",M.textContent=c,this._container.appendChild(M);const R=document.createElement("div");R.className="maplibregl-mobile-message",R.textContent=C,this._container.appendChild(R),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,c){this._enabled&&(this._map.fire(new s.k("cooperativegestureprevented",{gestureType:l,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const gs=T=>T.zoom||T.drag||T.roll||T.pitch||T.rotate;class ha extends s.k{}function hr(T){return T.panDelta&&T.panDelta.mag()||T.zoomDelta||T.bearingDelta||T.pitchDelta||T.rollDelta}class Hr{constructor(l,c){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,R)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const j=M.type==="renderFrame"?void 0:M,$={needsRenderFrame:!1},te={},oe={},be=M.touches,Ee=be?this._getMapTouches(be):void 0,Ie=Ee?I.touchPos(this._map.getCanvas(),Ee):I.mousePos(this._map.getCanvas(),M);for(const{handlerName:At,handler:ot,allowed:ct}of this._handlers){if(!ot.isEnabled())continue;let yt;this._blockedByActive(oe,ct,At)?ot.reset():ot[R||M.type]&&(yt=ot[R||M.type](M,Ie,Ee),this.mergeHandlerResult($,te,yt,At,j),yt&&yt.needsRenderFrame&&this._triggerRenderFrame()),(yt||ot.isActive())&&(oe[At]=ot)}const qe={};for(const At in this._previousActiveHandlers)oe[At]||(qe[At]=j);this._previousActiveHandlers=oe,(Object.keys(qe).length||hr($))&&(this._changes.push([$,te,qe]),this._triggerRenderFrame()),(Object.keys(oe).length||hr($))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ve}=$;Ve&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ve(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new et(l),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,R,j]of this._listeners)I.addEventListener(M,R,M===document?this.handleWindowEvent:this.handleEvent,j)}destroy(){for(const[l,c,C]of this._listeners)I.removeEventListener(l,c,l===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(l){const c=this._map,C=c.getCanvasContainer();this._add("mapEvent",new yh(c,l));const M=c.boxZoom=new Gs(c,l);this._add("boxZoom",M),l.interactive&&l.boxZoom&&M.enable();const R=c.cooperativeGestures=new xc(c,l.cooperativeGestures);this._add("cooperativeGestures",R),l.cooperativeGestures&&R.enable();const j=new dr(c),$=new ou(c);c.doubleClickZoom=new Ho($,j),this._add("tapZoom",j),this._add("clickZoom",$),l.interactive&&l.doubleClickZoom&&c.doubleClickZoom.enable();const te=new Wu;this._add("tapDragZoom",te);const oe=c.touchPitch=new Cc(c);this._add("touchPitch",oe),l.interactive&&l.touchPitch&&c.touchPitch.enable(l.touchPitch);const be=()=>c.project(c.getCenter()),Ee=function({enable:Tt,clickTolerance:Rt,aroundCenter:zt=!0,minPixelCenterThreshold:Pt=100,rotateDegreesPerPixelMoved:tn=.8},Ht){const vn=new Ba({checkCorrectEvent:_n=>I.mouseButton(_n)===0&&_n.ctrlKey||I.mouseButton(_n)===2&&!_n.ctrlKey});return new va({clickTolerance:Rt,move:(_n,gn)=>{const On=Ht();if(zt&&Math.abs(On.y-_n.y)>Pt)return{bearingDelta:s.c7(new s.P(_n.x,gn.y),gn,On)};let Un=(gn.x-_n.x)*tn;return zt&&gn.y<On.y&&(Un=-Un),{bearingDelta:Un}},moveStateManager:vn,enable:Tt,assignEvents:_h})}(l,be),Ie=function({enable:Tt,clickTolerance:Rt,pitchDegreesPerPixelMoved:zt=-.5}){const Pt=new Ba({checkCorrectEvent:tn=>I.mouseButton(tn)===0&&tn.ctrlKey||I.mouseButton(tn)===2});return new va({clickTolerance:Rt,move:(tn,Ht)=>({pitchDelta:(Ht.y-tn.y)*zt}),moveStateManager:Pt,enable:Tt,assignEvents:_h})}(l),qe=function({enable:Tt,clickTolerance:Rt,rollDegreesPerPixelMoved:zt=.3},Pt){const tn=new Ba({checkCorrectEvent:Ht=>I.mouseButton(Ht)===2&&Ht.ctrlKey});return new va({clickTolerance:Rt,move:(Ht,vn)=>{const _n=Pt();let gn=(vn.x-Ht.x)*zt;return vn.y<_n.y&&(gn=-gn),{rollDelta:gn}},moveStateManager:tn,enable:Tt,assignEvents:_h})}(l,be);c.dragRotate=new nd(l,Ee,Ie,qe),this._add("mouseRotate",Ee,["mousePitch"]),this._add("mousePitch",Ie,["mouseRotate","mouseRoll"]),this._add("mouseRoll",qe,["mousePitch"]),l.interactive&&l.dragRotate&&c.dragRotate.enable();const Ve=function({enable:Tt,clickTolerance:Rt}){const zt=new Ba({checkCorrectEvent:Pt=>I.mouseButton(Pt)===0&&!Pt.ctrlKey});return new va({clickTolerance:Rt,move:(Pt,tn)=>({around:tn,panDelta:tn.sub(Pt)}),activateOnStart:!0,moveStateManager:zt,enable:Tt,assignEvents:_h})}(l),At=new Mi(l,c);c.dragPan=new bc(C,Ve,At),this._add("mousePan",Ve),this._add("touchPan",At,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&c.dragPan.enable(l.dragPan);const ot=new nc,ct=new xh;c.touchZoomRotate=new SA(C,ct,ot,te),this._add("touchRotate",ot,["touchPan","touchZoom"]),this._add("touchZoom",ct,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&c.touchZoomRotate.enable(l.touchZoomRotate);const yt=c.scrollZoom=new Ks(c,()=>this._triggerRenderFrame());this._add("scrollZoom",yt,["mousePan"]),l.interactive&&l.scrollZoom&&c.scrollZoom.enable(l.scrollZoom);const Et=c.keyboard=new bo(c);this._add("keyboard",Et),l.interactive&&l.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new td(c))}_add(l,c,C){this._handlers.push({handlerName:l,handler:c,allowed:C}),this._handlersById[l]=c}stop(l){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!gs(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,c,C){for(const M in l)if(M!==C&&(!c||c.indexOf(M)<0))return!0;return!1}_getMapTouches(l){const c=[];for(const C of l)this._el.contains(C.target)&&c.push(C);return c}mergeHandlerResult(l,c,C,M,R){if(!C)return;s.e(l,C);const j={handlerName:M,originalEvent:C.originalEvent||R};C.zoomDelta!==void 0&&(c.zoom=j),C.panDelta!==void 0&&(c.drag=j),C.rollDelta!==void 0&&(c.roll=j),C.pitchDelta!==void 0&&(c.pitch=j),C.bearingDelta!==void 0&&(c.rotate=j)}_applyChanges(){const l={},c={},C={};for(const[M,R,j]of this._changes)M.panDelta&&(l.panDelta=(l.panDelta||new s.P(0,0))._add(M.panDelta)),M.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+M.pitchDelta),M.rollDelta&&(l.rollDelta=(l.rollDelta||0)+M.rollDelta),M.around!==void 0&&(l.around=M.around),M.pinchAround!==void 0&&(l.pinchAround=M.pinchAround),M.noInertia&&(l.noInertia=M.noInertia),s.e(c,R),s.e(C,j);this._updateMapTransform(l,c,C),this._changes=[]}_updateMapTransform(l,c,C){const M=this._map,R=M._getTransformForUpdate(),j=M.terrain;if(!(hr(l)||j&&this._terrainMovement))return this._fireEvents(c,C,!0);M._stop(!0);let{panDelta:$,zoomDelta:te,bearingDelta:oe,pitchDelta:be,rollDelta:Ee,around:Ie,pinchAround:qe}=l;qe!==void 0&&(Ie=qe),Ie=Ie||M.transform.centerPoint,j&&!R.isPointOnMapSurface(Ie)&&(Ie=R.centerPoint);const Ve={panDelta:$,zoomDelta:te,rollDelta:Ee,pitchDelta:be,bearingDelta:oe,around:Ie};this._map.cameraHelper.useGlobeControls&&!R.isPointOnMapSurface(Ie)&&(Ie=R.centerPoint);const At=Ie.distSqr(R.centerPoint)<.01?R.center:R.screenPointToLocation($?Ie.sub($):Ie);j?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ve,R),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?R.setCenter(R.screenPointToLocation(R.centerPoint.sub($))):this._map.cameraHelper.handleMapControlsPan(Ve,R,At):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Ve,R,At))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ve,R),this._map.cameraHelper.handleMapControlsPan(Ve,R,At)),M._applyUpdatedTransform(R),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(c,C,!0)}_fireEvents(l,c,C){const M=gs(this._eventsInProgress),R=gs(l),j={};for(const Ee in l){const{originalEvent:Ie}=l[Ee];this._eventsInProgress[Ee]||(j[`${Ee}start`]=Ie),this._eventsInProgress[Ee]=l[Ee]}!M&&R&&this._fireEvent("movestart",R.originalEvent);for(const Ee in j)this._fireEvent(Ee,j[Ee]);R&&this._fireEvent("move",R.originalEvent);for(const Ee in l){const{originalEvent:Ie}=l[Ee];this._fireEvent(Ee,Ie)}const $={};let te;for(const Ee in this._eventsInProgress){const{handlerName:Ie,originalEvent:qe}=this._eventsInProgress[Ee];this._handlersById[Ie].isActive()||(delete this._eventsInProgress[Ee],te=c[Ie]||qe,$[`${Ee}end`]=te)}for(const Ee in $)this._fireEvent(Ee,$[Ee]);const oe=gs(this._eventsInProgress),be=(M||R)&&!oe;if(be&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Ee=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Ee.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Ee)}if(C&&be){this._updatingCamera=!0;const Ee=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ie=qe=>qe!==0&&-this._bearingSnap<qe&&qe<this._bearingSnap;!Ee||!Ee.essential&&S.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:te})),Ie(this._map.getBearing())&&this._map.resetNorth()):(Ie(Ee.bearing||this._map.getBearing())&&(Ee.bearing=0),Ee.freezeElevation=!0,this._map.easeTo(Ee,{originalEvent:te})),this._updatingCamera=!1}}_fireEvent(l,c){this._map.fire(new s.k(l,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new ha("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Qu extends s.E{constructor(l,c,C){super(),this._renderFrameCallback=()=>{const M=Math.min((S.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(M)),M<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=C.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(l,c){l.apply(this.transform),this.transform=l,this.cameraHelper=c}getCenter(){return new s.N(this.transform.center.lng,this.transform.center.lat)}setCenter(l,c){return this.jumpTo({center:l},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,c){return this.jumpTo({elevation:l},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,c,C){return l=s.P.convert(l).mult(-1),this.panTo(this.transform.center,s.e({offset:l},c),C)}panTo(l,c,C){return this.easeTo(s.e({center:l},c),C)}getZoom(){return this.transform.zoom}setZoom(l,c){return this.jumpTo({zoom:l},c),this}zoomTo(l,c,C){return this.easeTo(s.e({zoom:l},c),C)}zoomIn(l,c){return this.zoomTo(this.getZoom()+1,l,c),this}zoomOut(l,c){return this.zoomTo(this.getZoom()-1,l,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,c){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new s.k("movestart",c)).fire(new s.k("move",c)).fire(new s.k("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(l,c){return this.jumpTo({bearing:l},c),this}getPadding(){return this.transform.padding}setPadding(l,c){return this.jumpTo({padding:l},c),this}rotateTo(l,c,C){return this.easeTo(s.e({bearing:l},c),C)}resetNorth(l,c){return this.rotateTo(0,s.e({duration:1e3},l),c),this}resetNorthPitch(l,c){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},l),c),this}snapToNorth(l,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,c):this}getPitch(){return this.transform.pitch}setPitch(l,c){return this.jumpTo({pitch:l},c),this}getRoll(){return this.transform.roll}setRoll(l,c){return this.jumpTo({roll:l},c),this}cameraForBounds(l,c){l=Nt.convert(l).adjustAntiMeridian();const C=c&&c.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),C,c)}_cameraForBoxAndBearing(l,c,C,M){const R={top:0,bottom:0,right:0,left:0};if(typeof(M=s.e({padding:R,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const oe=M.padding;M.padding={top:oe,bottom:oe,right:oe,left:oe}}const j=s.e(R,M.padding);M.padding=j;const $=this.transform,te=new Nt(l,c);return this.cameraHelper.cameraForBoxAndBearing(M,j,te,C,$)}fitBounds(l,c,C){return this._fitInternal(this.cameraForBounds(l,c),c,C)}fitScreenCoordinates(l,c,C,M,R){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(l)),this.transform.screenPointToLocation(s.P.convert(c)),C,M),M,R)}_fitInternal(l,c,C){return l?(delete(c=s.e(l,c)).padding,c.linear?this.easeTo(c,C):this.flyTo(c,C)):this}jumpTo(l,c){this.stop();const C=this._getTransformForUpdate();let M=!1,R=!1,j=!1;const $=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,l);const te=C.zoom!==$;return"elevation"in l&&C.elevation!==+l.elevation&&C.setElevation(+l.elevation),"bearing"in l&&C.bearing!==+l.bearing&&(M=!0,C.setBearing(+l.bearing)),"pitch"in l&&C.pitch!==+l.pitch&&(R=!0,C.setPitch(+l.pitch)),"roll"in l&&C.roll!==+l.roll&&(j=!0,C.setRoll(+l.roll)),l.padding==null||C.isPaddingEqual(l.padding)||C.setPadding(l.padding),this._applyUpdatedTransform(C),this.fire(new s.k("movestart",c)).fire(new s.k("move",c)),te&&this.fire(new s.k("zoomstart",c)).fire(new s.k("zoom",c)).fire(new s.k("zoomend",c)),M&&this.fire(new s.k("rotatestart",c)).fire(new s.k("rotate",c)).fire(new s.k("rotateend",c)),R&&this.fire(new s.k("pitchstart",c)).fire(new s.k("pitch",c)).fire(new s.k("pitchend",c)),j&&this.fire(new s.k("rollstart",c)).fire(new s.k("roll",c)).fire(new s.k("rollend",c)),this.fire(new s.k("moveend",c))}calculateCameraOptionsFromTo(l,c,C,M=0){const R=s.Y.fromLngLat(l,c),j=s.Y.fromLngLat(C,M),$=j.x-R.x,te=j.y-R.y,oe=j.z-R.z,be=Math.hypot($,te,oe);if(be===0)throw new Error("Can't calculate camera options with same From and To");const Ee=Math.hypot($,te),Ie=s.a8(this.transform.cameraToCenterDistance/be/this.transform.tileSize),qe=180*Math.atan2($,-te)/Math.PI;let Ve=180*Math.acos(Ee/be)/Math.PI;return Ve=oe<0?90-Ve:90+Ve,{center:j.toLngLat(),elevation:M,zoom:Ie,pitch:Ve,bearing:qe}}calculateCameraOptionsFromCameraLngLatAltRotation(l,c,C,M,R){const j=this.transform.calculateCenterFromCameraLngLatAlt(l,c,C,M);return{center:j.center,elevation:j.elevation,zoom:j.zoom,bearing:C,pitch:M,roll:R}}easeTo(l,c){this._stop(!1,l.easeId),((l=s.e({offset:[0,0],duration:500,easing:s.c8},l)).animate===!1||!l.essential&&S.prefersReducedMotion)&&(l.duration=0);const C=this._getTransformForUpdate(),M=this.getBearing(),R=C.pitch,j=C.roll,$="bearing"in l?this._normalizeBearing(l.bearing,M):M,te="pitch"in l?+l.pitch:R,oe="roll"in l?this._normalizeBearing(l.roll,j):j,be="padding"in l?l.padding:C.padding,Ee=s.P.convert(l.offset);let Ie,qe;l.around&&(Ie=s.N.convert(l.around),qe=C.locationToScreenPoint(Ie));const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},At=this.cameraHelper.handleEaseTo(C,{bearing:$,pitch:te,roll:oe,padding:be,around:Ie,aroundPoint:qe,offsetAsPoint:Ee,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||M!==$,this._pitching=this._pitching||te!==R,this._rolling=this._rolling||oe!==j,this._padding=!C.isPaddingEqual(be),this._zooming=this._zooming||At.isZooming,this._easeId=l.easeId,this._prepareEase(c,l.noMoveStart,Ve),this.terrain&&this._prepareElevation(At.elevationCenter),this._ease(ot=>{At.easeFunc(ot),this.terrain&&!l.freezeElevation&&this._updateElevation(ot),this._applyUpdatedTransform(C),this._fireMoveEvents(c)},ot=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ot)},l),this}_prepareEase(l,c,C={}){this._moving=!0,c||C.moving||this.fire(new s.k("movestart",l)),this._zooming&&!C.zooming&&this.fire(new s.k("zoomstart",l)),this._rotating&&!C.rotating&&this.fire(new s.k("rotatestart",l)),this._pitching&&!C.pitching&&this.fire(new s.k("pitchstart",l)),this._rolling&&!C.rolling&&this.fire(new s.k("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&c!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(C-(c-(C*l+this._elevationStart))/(1-l)),this._elevationTarget=c}this.transform.setElevation(s.y.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const c=l.getCameraLngLat(),C=l.getCameraAltitude(),M=this.terrain?this.terrain.getElevationForLngLatZoom(c,l.zoom):0;if(C<M){const R=this.calculateCameraOptionsFromTo(c,M,l.center,l.elevation);return{pitch:R.pitch,zoom:R.zoom}}return{}}_applyUpdatedTransform(l){const c=[];if(c.push(M=>this._elevateCameraIfInsideTerrain(M)),this.transformCameraUpdate&&c.push(M=>this.transformCameraUpdate(M)),!c.length)return;const C=l.clone();for(const M of c){const R=C.clone(),{center:j,zoom:$,roll:te,pitch:oe,bearing:be,elevation:Ee}=M(R);j&&R.setCenter(j),Ee!==void 0&&R.setElevation(Ee),$!==void 0&&R.setZoom($),te!==void 0&&R.setRoll(te),oe!==void 0&&R.setPitch(oe),be!==void 0&&R.setBearing(be),C.apply(R)}this.transform.apply(C)}_fireMoveEvents(l){this.fire(new s.k("move",l)),this._zooming&&this.fire(new s.k("zoom",l)),this._rotating&&this.fire(new s.k("rotate",l)),this._pitching&&this.fire(new s.k("pitch",l)),this._rolling&&this.fire(new s.k("roll",l))}_afterEase(l,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const C=this._zooming,M=this._rotating,R=this._pitching,j=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new s.k("zoomend",l)),M&&this.fire(new s.k("rotateend",l)),R&&this.fire(new s.k("pitchend",l)),j&&this.fire(new s.k("rollend",l)),this.fire(new s.k("moveend",l))}flyTo(l,c){if(!l.essential&&S.prefersReducedMotion){const gn=s.M(l,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(gn,c)}this.stop(),l=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.c8},l);const C=this._getTransformForUpdate(),M=C.bearing,R=C.pitch,j=C.roll,$=C.padding,te="bearing"in l?this._normalizeBearing(l.bearing,M):M,oe="pitch"in l?+l.pitch:R,be="roll"in l?this._normalizeBearing(l.roll,j):j,Ee="padding"in l?l.padding:C.padding,Ie=s.P.convert(l.offset);let qe=C.centerPoint.add(Ie);const Ve=C.screenPointToLocation(qe),At=this.cameraHelper.handleFlyTo(C,{bearing:te,pitch:oe,roll:be,padding:Ee,locationAtOffset:Ve,offsetAsPoint:Ie,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let ot=l.curve;const ct=Math.max(C.width,C.height),yt=ct/At.scaleOfZoom,Et=At.pixelPathLength;typeof At.scaleOfMinZoom=="number"&&(ot=Math.sqrt(ct/At.scaleOfMinZoom/Et*2));const Tt=ot*ot;function Rt(gn){const On=(yt*yt-ct*ct+(gn?-1:1)*Tt*Tt*Et*Et)/(2*(gn?yt:ct)*Tt*Et);return Math.log(Math.sqrt(On*On+1)-On)}function zt(gn){return(Math.exp(gn)-Math.exp(-gn))/2}function Pt(gn){return(Math.exp(gn)+Math.exp(-gn))/2}const tn=Rt(!1);let Ht=function(gn){return Pt(tn)/Pt(tn+ot*gn)},vn=function(gn){return ct*((Pt(tn)*(zt(On=tn+ot*gn)/Pt(On))-zt(tn))/Tt)/Et;var On},_n=(Rt(!0)-tn)/ot;if(Math.abs(Et)<2e-6||!isFinite(_n)){if(Math.abs(ct-yt)<1e-6)return this.easeTo(l,c);const gn=yt<ct?-1:1;_n=Math.abs(Math.log(yt/ct))/ot,vn=()=>0,Ht=On=>Math.exp(gn*ot*On)}return l.duration="duration"in l?+l.duration:1e3*_n/("screenSpeed"in l?+l.screenSpeed/ot:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=M!==te,this._pitching=oe!==R,this._rolling=be!==j,this._padding=!C.isPaddingEqual(Ee),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(At.targetCenter),this._ease(gn=>{const On=gn*_n,Un=1/Ht(On),wn=vn(On);this._rotating&&C.setBearing(s.y.number(M,te,gn)),this._pitching&&C.setPitch(s.y.number(R,oe,gn)),this._rolling&&C.setRoll(s.y.number(j,be,gn)),this._padding&&(C.interpolatePadding($,Ee,gn),qe=C.centerPoint.add(Ie)),At.easeFunc(gn,Un,wn,qe),this.terrain&&!l.freezeElevation&&this._updateElevation(gn),this._applyUpdatedTransform(C),this._fireMoveEvents(c)},()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,c){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const M=this._onEaseEnd;delete this._onEaseEnd,M.call(this,c)}return l||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(l,c,C){C.animate===!1||C.duration===0?(l(1),c()):(this._easeStart=S.now(),this._easeOptions=C,this._onEaseFrame=l,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,c){l=s.aI(l,-180,180);const C=Math.abs(l-c);return Math.abs(l-360-c)<C&&(l-=360),Math.abs(l+360-c)<C&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(s.N.convert(l),this.transform.tileZoom):null}}const rc={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class bu{constructor(l=rc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._sanitizedAttributionHTML=void 0}_setElementTitle(l,c){const C=this._map._getUIString(`AttributionControl.${c}`);l.title=C,l.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const c=this._map.style.sourceCaches;for(const M in c){const R=c[M];if(R.used||R.usedForTerrain){const j=R.getSource();j.attribution&&l.indexOf(j.attribution)<0&&l.push(j.attribution)}}l=l.filter(M=>String(M).trim()),l.sort((M,R)=>M.length-R.length),l=l.filter((M,R)=>{for(let j=R+1;j<l.length;j++)if(l[j].indexOf(M)>=0)return!1;return!0});const C=l.join(" | ");C!==this._sanitizedAttributionHTML&&(this._sanitizedAttributionHTML=I.sanitize(C),l.length?(this._innerContainer.innerHTML=this._sanitizedAttributionHTML,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Cs{constructor(l={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const C=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");const c=I.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Lf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const c=++this._id;return this._queue.push({callback:l,id:c,cancelled:!1}),c}remove(l){const c=this._currentlyRunning,C=c?this._queue.concat(c):this._queue;for(const M of C)if(M.id===l)return void(M.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const C of c)if(!C.cancelled&&(C.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var su=s.aA([{name:"a_pos3d",type:"Int16",components:3}]);class Ff extends s.E{constructor(l){super(),this._lastTilesetChange=S.now(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,c){this.sourceCache.update(l,c),this._renderableTilesKeys=[];const C={};for(const M of Ye(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))C[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.terrainRttPosMatrix32f=new Float64Array(16),s.bL(M.terrainRttPosMatrix32f,0,s.X,s.X,0,0,1),this._tiles[M.key]=new me(M,this.tileSize),this._lastTilesetChange=S.now());for(const M in this._tiles)C[M]||delete this._tiles[M]}freeRtt(l){for(const c in this._tiles){const C=this._tiles[c];(!l||C.tileID.equals(l)||C.tileID.isChildOf(l)||l.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const c={};for(const C of this._renderableTilesKeys){const M=this._tiles[C].tileID,R=l.clone(),j=s.a$();if(M.canonical.equals(l.canonical))s.bL(j,0,s.X,s.X,0,0,1);else if(M.canonical.isChildOf(l.canonical)){const $=M.canonical.z-l.canonical.z,te=M.canonical.x-(M.canonical.x>>$<<$),oe=M.canonical.y-(M.canonical.y>>$<<$),be=s.X>>$;s.bL(j,0,be,be,0,0,1),s.J(j,j,[-te*be,-oe*be,0])}else{if(!l.canonical.isChildOf(M.canonical))continue;{const $=l.canonical.z-M.canonical.z,te=l.canonical.x-(l.canonical.x>>$<<$),oe=l.canonical.y-(l.canonical.y>>$<<$),be=s.X>>$;s.bL(j,0,s.X,s.X,0,0,1),s.J(j,j,[te*be,oe*be,0]),s.K(j,j,[1/2**$,1/2**$,0])}}R.terrainRttPosMatrix32f=new Float32Array(j),c[C]=R}return c}getSourceTile(l,c){const C=this.sourceCache._source;let M=l.overscaledZ-this.deltaZoom;if(M>C.maxzoom&&(M=C.maxzoom),M<C.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(M).key);let R=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!R||!R.dem)&&c)for(;M>=C.minzoom&&(!R||!R.dem);)R=this.sourceCache.getTileByID(l.scaledTo(M--).key);return R}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}}class xu{constructor(l,c,C){this._meshCache={},this.painter=l,this.sourceCache=new Ff(c),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,c,C,M=s.X){var R;if(!(c>=0&&c<M&&C>=0&&C<M))return 0;const j=this.getTerrainData(l),$=(R=j.tile)===null||R===void 0?void 0:R.dem;if(!$)return 0;const te=s.c9([],[c/M*s.X,C/M*s.X],j.u_terrain_matrix),oe=[te[0]*$.dim,te[1]*$.dim],be=Math.floor(oe[0]),Ee=Math.floor(oe[1]),Ie=oe[0]-be,qe=oe[1]-Ee;return $.get(be,Ee)*(1-Ie)*(1-qe)+$.get(be+1,Ee)*Ie*(1-qe)+$.get(be,Ee+1)*(1-Ie)*qe+$.get(be+1,Ee+1)*Ie*qe}getElevationForLngLatZoom(l,c){if(!s.ca(c,l.wrap()))return 0;const{tileID:C,mercatorX:M,mercatorY:R}=this._getOverscaledTileIDFromLngLatZoom(l,c);return this.getElevation(C,M%s.X,R%s.X,s.X)}getElevation(l,c,C,M=s.X){return this.getDEMElevation(l,c,C,M)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const M=this.painter.context,R=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ie(M,R,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ie(M,new s.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.aq([])}const c=this.sourceCache.getSourceTile(l,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const M=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new ie(M,c.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),c.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const C=c&&c+c.tileID.key+l.key;if(C&&!this._demMatrixCache[C]){const M=this.sourceCache.sourceCache._source.maxzoom;let R=l.canonical.z-c.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=M?R=l.canonical.z-M:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const j=l.canonical.x-(l.canonical.x>>R<<R),$=l.canonical.y-(l.canonical.y>>R<<R),te=s.cb(new Float64Array(16),[1/(s.X<<R),1/(s.X<<R),0]);s.J(te,te,[j*s.X,$*s.X,0]),this._demMatrixCache[l.key]={matrix:te,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(l){const c=this.painter,C=c.width/devicePixelRatio,M=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ie(c.context,{width:C,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ie(c.context,{width:C,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(C,M,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,C,M))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let R=0,j=0;R<this._coordsTextureSize;R++)for(let $=0;$<this._coordsTextureSize;$++,j+=4)c[j+0]=255&$,c[j+1]=255&R,c[j+2]=$>>8<<4|R>>8,c[j+3]=0;const C=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),M=new ie(l,C,l.gl.RGBA,{premultiply:!1});return M.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),C=this.painter.context,M=C.gl,R=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),j=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),$=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(R,$-j-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),C.bindFramebuffer.set(null);const te=c[0]+(c[2]>>4<<8),oe=c[1]+((15&c[2])<<8),be=this.coordsIndex[255-c[3]],Ee=be&&this.sourceCache.getTileByID(be);if(!Ee)return null;const Ie=this._coordsTextureSize,qe=(1<<Ee.tileID.canonical.z)*Ie;return new s.Y((Ee.tileID.canonical.x*Ie+te)/qe+Ee.tileID.wrap,(Ee.tileID.canonical.y*Ie+oe)/qe,this.getElevation(Ee.tileID,te,oe,Ie))}depthAtPoint(l){const c=new Uint8Array(4),C=this.painter.context,M=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),M.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),C.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(l){var c;const C=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,M=C&&l.canonical.y===0,R=C&&l.canonical.y===(1<<l.canonical.z)-1,j=`m_${M?"n":""}_${R?"s":""}`;if(this._meshCache[j])return this._meshCache[j];const $=this.painter.context,te=new s.cc,oe=new s.aE,be=this.meshSize,Ee=s.X/be,Ie=be*be;for(let Pt=0;Pt<=be;Pt++)for(let tn=0;tn<=be;tn++)te.emplaceBack(tn*Ee,Pt*Ee,0);for(let Pt=0;Pt<Ie;Pt+=be+1)for(let tn=0;tn<be;tn++)oe.emplaceBack(tn+Pt,be+tn+Pt+1,be+tn+Pt+2),oe.emplaceBack(tn+Pt,be+tn+Pt+2,tn+Pt+1);const qe=te.length,Ve=qe+(be+1),At=(be+1)*be,ot=M?s.b6:0,ct=M?0:1,yt=R?s.b7:s.X,Et=R?0:1;for(let Pt=0;Pt<=be;Pt++)te.emplaceBack(Pt*Ee,ot,ct);for(let Pt=0;Pt<=be;Pt++)te.emplaceBack(Pt*Ee,yt,Et);for(let Pt=0;Pt<be;Pt++)oe.emplaceBack(At+Pt,Ve+Pt,Ve+Pt+1),oe.emplaceBack(At+Pt,Ve+Pt+1,At+Pt+1),oe.emplaceBack(0+Pt,qe+Pt+1,qe+Pt),oe.emplaceBack(0+Pt,0+Pt+1,qe+Pt+1);const Tt=te.length,Rt=Tt+2*(be+1);for(const Pt of[0,1])for(let tn=0;tn<=be;tn++)for(const Ht of[0,1])te.emplaceBack(Pt*s.X,tn*Ee,Ht);for(let Pt=0;Pt<2*be;Pt+=2)oe.emplaceBack(Tt+Pt,Tt+Pt+1,Tt+Pt+3),oe.emplaceBack(Tt+Pt,Tt+Pt+3,Tt+Pt+2),oe.emplaceBack(Rt+Pt,Rt+Pt+3,Rt+Pt+1),oe.emplaceBack(Rt+Pt,Rt+Pt+2,Rt+Pt+3);const zt=new Ha($.createVertexBuffer(te,su.members),$.createIndexBuffer(oe),s.aD.simpleSegment(0,0,te.length,oe.length));return this._meshCache[j]=zt,zt}getMeshFrameDelta(l){return 2*Math.PI*s.bo/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,c){var C;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(l,c);return(C=this.getMinMaxElevation(M).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(l){const c=this.getTerrainData(l).tile,C={minElevation:null,maxElevation:null};return c&&c.dem&&(C.minElevation=c.dem.min*this.exaggeration,C.maxElevation=c.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(l,c){const C=s.Y.fromLngLat(l.wrap()),M=(1<<c)*s.X,R=C.x*M,j=C.y*M,$=Math.floor(R/s.X),te=Math.floor(j/s.X);return{tileID:new s.S(c,0,c,$,te),mercatorX:R,mercatorY:j}}}class To{constructor(l,c,C){this._context=l,this._size=c,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new ie(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(C.texture),{id:l,fbo:c,texture:C,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>l.id!==c),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const Os={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class rd{constructor(l,c){this.painter=l,this.terrain=c,this.pool=new To(l.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(C=>!l._layers[C].isHidden(c)),this._coordsAscending={};for(const C in l.sourceCaches){this._coordsAscending[C]={};const M=l.sourceCaches[C].getVisibleCoordinates();for(const R of M){const j=this.terrain.sourceCache.getTerrainCoords(R);for(const $ in j)this._coordsAscending[C][$]||(this._coordsAscending[C][$]=[]),this._coordsAscending[C][$].push(j[$])}}this._coordsAscendingStr={};for(const C of l._order){const M=l._layers[C],R=M.source;if(Os[M.type]&&!this._coordsAscendingStr[R]){this._coordsAscendingStr[R]={};for(const j in this._coordsAscending[R])this._coordsAscendingStr[R][j]=this._coordsAscending[R][j].map($=>$.key).sort().join()}}for(const C of this._renderableTiles)for(const M in this._coordsAscendingStr){const R=this._coordsAscendingStr[M][C.tileID.key];R&&R!==C.rttCoords[M]&&(C.rtt=[])}}renderLayer(l,c){if(l.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),M=l.type,R=this.painter,j=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(Os[M]&&(this._prevType&&Os[this._prevType]||this._stacks.push([]),this._prevType=M,this._stacks[this._stacks.length-1].push(l.id),!j))return!0;if(Os[this._prevType]||Os[M]&&j){this._prevType=M;const $=this._stacks.length-1,te=this._stacks[$]||[];for(const oe of this._renderableTiles){if(this.pool.isFull()&&(zu(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(oe),oe.rtt[$]){const Ee=this.pool.getObjectForId(oe.rtt[$].id);if(Ee.stamp===oe.rtt[$].stamp){this.pool.useObject(Ee);continue}}const be=this.pool.getOrCreateFreeObject();this.pool.useObject(be),this.pool.stampObject(be),oe.rtt[$]={id:be.id,stamp:be.stamp},R.context.bindFramebuffer.set(be.fbo.framebuffer),R.context.clear({color:s.b4.transparent,stencil:0}),R.currentStencilSource=void 0;for(let Ee=0;Ee<te.length;Ee++){const Ie=R.style._layers[te[Ee]],qe=Ie.source?this._coordsAscending[Ie.source][oe.tileID.key]:[oe.tileID];R.context.viewport.set([0,0,be.fbo.width,be.fbo.height]),R._renderTileClippingMasks(Ie,qe,!0),R.renderLayer(R,R.style.sourceCaches[Ie.source],Ie,qe,C),Ie.source&&(oe.rttCoords[Ie.source]=this._coordsAscendingStr[Ie.source][oe.tileID.key])}}return zu(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),Os[M]}return!1}}const EA={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},id=h,BA={hash:!1,interactive:!0,bearingSnap:7,attributionControl:rc,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ws={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class wc{constructor(l,c,C=!1){this.mousedown=R=>{this.startMove(R,I.mousePos(this.element,R)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=R=>{this.move(R,I.mousePos(this.element,R))},this.mouseup=R=>{this._rotatePitchHanlder.dragEnd(R),this.offTemp()},this.touchstart=R=>{R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,R.targetTouches)[0],this.startMove(R,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=R=>{R.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,R.targetTouches)[0],this.move(R,this._lastPos))},this.touchend=R=>{R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const M=new vh;this._rotatePitchHanlder=new va({clickTolerance:3,move:(R,j)=>{const $=c.getBoundingClientRect(),te=new s.P(($.bottom-$.top)/2,($.right-$.left)/2);return{bearingDelta:s.c7(new s.P(R.x,j.y),j,te),pitchDelta:C?-.5*(j.y-R.y):void 0}},moveStateManager:M,enable:!0,assignEvents:()=>{}}),this.map=l,I.addEventListener(c,"mousedown",this.mousedown),I.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(c,"touchcancel",this.reset)}startMove(l,c){this._rotatePitchHanlder.dragStart(l,c),I.disableDrag()}move(l,c){const C=this.map,{bearingDelta:M,pitchDelta:R}=this._rotatePitchHanlder.dragMove(l,c)||{};M&&C.setBearing(C.getBearing()+M),R&&C.setPitch(C.getPitch()+R)}off(){const l=this.element;I.removeEventListener(l,"mousedown",this.mousedown),I.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let Wl;function dl(T,l,c){const C=new s.N(T.lng,T.lat);if(T=new s.N(T.lng,T.lat),l){const M=new s.N(T.lng-360,T.lat),R=new s.N(T.lng+360,T.lat),j=c.locationToScreenPoint(T).distSqr(l);c.locationToScreenPoint(M).distSqr(l)<j?T=M:c.locationToScreenPoint(R).distSqr(l)<j&&(T=R)}for(;Math.abs(T.lng-c.center.lng)>180;){const M=c.locationToScreenPoint(T);if(M.x>=0&&M.y>=0&&M.x<=c.width&&M.y<=c.height)break;T.lng>c.center.lng?T.lng-=360:T.lng+=360}return T.lng!==C.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(T))?T:C}const qu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Mc(T,l,c){const C=T.classList;for(const M in qu)C.remove(`maplibregl-${c}-anchor-${M}`);C.add(`maplibregl-${c}-anchor-${l}`)}class wu extends s.E{constructor(l){if(super(),this._onKeyPress=c=>{const C=c.code,M=c.charCode||c.keyCode;C!=="Space"&&C!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=c=>{const C=c.originalEvent.target,M=this._element;this._popup&&(C===M||M.contains(C))&&this.togglePopup()},this._update=c=>{var C;if(!this._map)return;const M=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!M)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?dl(this._lngLat,this._flatPos,this._map.transform):(C=this._lngLat)===null||C===void 0?void 0:C.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let R="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?R=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(R=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let j="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?j="rotateX(0deg)":this._pitchAlignment==="map"&&(j=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${qu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${j} ${R}`),S.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(l==null?void 0:l.opacity,l==null?void 0:l.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=s.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div");const c=I.createNS("http://www.w3.org/2000/svg","svg"),C=41,M=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${C}px`),c.setAttributeNS(null,"width",`${M}px`),c.setAttributeNS(null,"viewBox",`0 0 ${M} ${C}`);const R=I.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"stroke","none"),R.setAttributeNS(null,"stroke-width","1"),R.setAttributeNS(null,"fill","none"),R.setAttributeNS(null,"fill-rule","evenodd");const j=I.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill-rule","nonzero");const $=I.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(3.0, 29.0)"),$.setAttributeNS(null,"fill","#000000");const te=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ct of te){const yt=I.createNS("http://www.w3.org/2000/svg","ellipse");yt.setAttributeNS(null,"opacity","0.04"),yt.setAttributeNS(null,"cx","10.5"),yt.setAttributeNS(null,"cy","5.80029008"),yt.setAttributeNS(null,"rx",ct.rx),yt.setAttributeNS(null,"ry",ct.ry),$.appendChild(yt)}const oe=I.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"fill",this._color);const be=I.createNS("http://www.w3.org/2000/svg","path");be.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),oe.appendChild(be);const Ee=I.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"opacity","0.25"),Ee.setAttributeNS(null,"fill","#000000");const Ie=I.createNS("http://www.w3.org/2000/svg","path");Ie.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ee.appendChild(Ie);const qe=I.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),qe.setAttributeNS(null,"fill","#FFFFFF");const Ve=I.createNS("http://www.w3.org/2000/svg","g");Ve.setAttributeNS(null,"transform","translate(8.0, 8.0)");const At=I.createNS("http://www.w3.org/2000/svg","circle");At.setAttributeNS(null,"fill","#000000"),At.setAttributeNS(null,"opacity","0.25"),At.setAttributeNS(null,"cx","5.5"),At.setAttributeNS(null,"cy","5.5"),At.setAttributeNS(null,"r","5.4999962");const ot=I.createNS("http://www.w3.org/2000/svg","circle");ot.setAttributeNS(null,"fill","#FFFFFF"),ot.setAttributeNS(null,"cx","5.5"),ot.setAttributeNS(null,"cy","5.5"),ot.setAttributeNS(null,"r","5.4999962"),Ve.appendChild(At),Ve.appendChild(ot),j.appendChild($),j.appendChild(oe),j.appendChild(Ee),j.appendChild(qe),j.appendChild(Ve),c.appendChild(j),c.setAttributeNS(null,"height",C*this._scale+"px"),c.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(c),this._offset=s.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Mc(this._element,this._anchor,"marker"),l&&l.className)for(const c of l.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=s.N.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const M=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var c,C;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const Ee=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ee&&(this._element.style.opacity=Ee))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,R=M.terrain.depthAtPoint(this._pos),j=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,j)-R<.006)return void(this._element.style.opacity=this._opacity);const $=-this._offset.y/M.transform.pixelsPerMeter,te=Math.sin(M.getPitch()*Math.PI/180)*$,oe=M.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),be=M.transform.lngLatToCameraDepth(this._lngLat,j+te)-oe>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&be&&this._popup.remove(),this._element.style.opacity=be?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=s.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,c){return l===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const _a={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Xs=0,au=!1;const lu={maxWidth:100,unit:"metric"};function cA(T,l,c){const C=c&&c.maxWidth||100,M=T._container.clientHeight/2,R=T._container.clientWidth/2,j=T.unproject([R-C/2,M]),$=T.unproject([R+C/2,M]),te=Math.round(T.project($).x-T.project(j).x),oe=Math.min(C,te,T._container.clientWidth),be=j.distanceTo($);if(c&&c.unit==="imperial"){const Ee=3.2808*be;Ee>5280?Mu(l,oe,Ee/5280,T._getUIString("ScaleControl.Miles")):Mu(l,oe,Ee,T._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Mu(l,oe,be/1852,T._getUIString("ScaleControl.NauticalMiles")):be>=1e3?Mu(l,oe,be/1e3,T._getUIString("ScaleControl.Kilometers")):Mu(l,oe,be,T._getUIString("ScaleControl.Meters"))}function Mu(T,l,c,C){const M=function(R){const j=Math.pow(10,`${Math.floor(R)}`.length-1);let $=R/j;return $=$>=10?10:$>=5?5:$>=3?3:$>=2?2:$>=1?1:function(te){const oe=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10));return Math.round(te*oe)/oe}($),j*$}(c);T.style.width=l*(M/c)+"px",T.innerHTML=`${M}&nbsp;${C}`}const Sc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Yu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ql(T){if(T){if(typeof T=="number"){const l=Math.round(Math.abs(T)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,T),"top-left":new s.P(l,l),"top-right":new s.P(-l,l),bottom:new s.P(0,-T),"bottom-left":new s.P(l,-l),"bottom-right":new s.P(-l,-l),left:new s.P(T,0),right:new s.P(-T,0)}}if(T instanceof s.P||Array.isArray(T)){const l=s.P.convert(T);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:s.P.convert(T.center||[0,0]),top:s.P.convert(T.top||[0,0]),"top-left":s.P.convert(T["top-left"]||[0,0]),"top-right":s.P.convert(T["top-right"]||[0,0]),bottom:s.P.convert(T.bottom||[0,0]),"bottom-left":s.P.convert(T["bottom-left"]||[0,0]),"bottom-right":s.P.convert(T["bottom-right"]||[0,0]),left:s.P.convert(T.left||[0,0]),right:s.P.convert(T.right||[0,0])}}return Ql(new s.P(0,0))}const wh=h;a.AJAXError=s.cg,a.Event=s.k,a.Evented=s.E,a.LngLat=s.N,a.MercatorCoordinate=s.Y,a.Point=s.P,a.addProtocol=s.ch,a.config=s.a,a.removeProtocol=s.ci,a.AttributionControl=bu,a.BoxZoomHandler=Gs,a.CanvasSource=br,a.CooperativeGesturesHandler=xc,a.DoubleClickZoomHandler=Ho,a.DragPanHandler=bc,a.DragRotateHandler=nd,a.EdgeInsets=Ns,a.FullscreenControl=class extends s.E{constructor(T={}){super(),this._onFullscreenChange=()=>{var l;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=c==null?void 0:c.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,T&&T.container&&(T.container instanceof HTMLElement?this._container=T.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(T){return this._map=T,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const T=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",T).setAttribute("aria-hidden","true"),T.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const T=this._getTitle();this._fullscreenButton.setAttribute("aria-label",T),this._fullscreenButton.title=T}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=Qr,a.GeolocateControl=class extends s.E{constructor(T){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const c=new s.N(l.coords.longitude,l.coords.latitude),C=l.coords.accuracy,M=this._map.getBearing(),R=s.e({bearing:M},this.options.fitBoundsOptions),j=Nt.fromLngLat(c,C);this._map.fitBounds(j,R,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const c=new s.N(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&au)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new wu({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")),this.fire(new s.k("userlocationlostfocus")))})}},this.options=s.e({},_a,T)}onAdd(T){return this._map=T,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(l=!1){if(Wl!==void 0&&!l)return Wl;if(window.navigator.permissions===void 0)return Wl=!!window.navigator.geolocation,Wl;try{Wl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Wl=!!window.navigator.geolocation}return Wl})}().then(l=>this._finishSetupUI(l)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Xs=0,au=!1}_isOutOfMapMaxBounds(T){const l=this._map.getMaxBounds(),c=T.coords;return l&&(c.longitude<l.getWest()||c.longitude>l.getEast()||c.latitude<l.getSouth()||c.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const T=this._map.getBounds(),l=T.getSouthEast(),c=T.getNorthEast(),C=l.distanceTo(c),M=Math.ceil(this._accuracy/(C/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Xs--,au=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart")),this.fire(new s.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let T;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Xs++,Xs>1?(T={maximumAge:6e5,timeout:0},au=!0):(T=this.options.positionOptions,au=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,T)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.GlobeControl=class{constructor(){this._toggleProjection=()=>{var T;const l=(T=this._map.getProjection())===null||T===void 0?void 0:T.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var T;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((T=this._map.getProjection())===null||T===void 0?void 0:T.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(T){return this._map=T,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=I.create("button","maplibregl-ctrl-globe",this._container),I.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},a.Hash=ec,a.ImageSource=cr,a.KeyboardHandler=bo,a.LngLatBounds=Nt,a.LogoControl=Cs,a.Map=class extends Qu{constructor(T){var l,c;s.cd.mark(s.ce.create);const C=Object.assign(Object.assign(Object.assign({},BA),T),{canvasContextAttributes:Object.assign(Object.assign({},BA.canvasContextAttributes),T.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const M=new ws,R=new oA;if(C.minZoom!==void 0&&M.setMinZoom(C.minZoom),C.maxZoom!==void 0&&M.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&M.setMinPitch(C.minPitch),C.maxPitch!==void 0&&M.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&M.setRenderWorldCopies(C.renderWorldCopies),super(M,R,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Lf,this._controls=[],this._mapId=s.a1(),this._contextLost=$=>{$.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:$}))},this._contextRestored=$=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:$}))},this._onMapScroll=$=>{if($.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},EA),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=X.addThrottleControl(()=>this.isMoving()),this._requestManager=new q(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let $=!1;const te=ed(oe=>{this._trackResize&&!this._removed&&(this.resize(oe),this.redraw())},50);this._resizeObserver=new ResizeObserver(oe=>{$?te(oe):$=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Hr(this,C),this._hash=C.hash&&new ec(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,s.e({},C.fitBoundsOptions,{duration:0}))));const j=typeof C.style=="string"||((c=(l=C.style)===null||l===void 0?void 0:l.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,j),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new bu(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new Cs,C.logoPosition),this.on("style.load",()=>{if(j||this._resizeTransform(),this.transform.unmodified){const $=s.M(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo($)}}),this.on("data",$=>{this._update($.dataType==="style"),this.fire(new s.k(`${$.dataType}data`,$))}),this.on("dataloading",$=>{this.fire(new s.k(`${$.dataType}dataloading`,$))}),this.on("dataabort",$=>{this.fire(new s.k("sourcedataabort",$))})}_getMapId(){return this._mapId}addControl(T,l){if(l===void 0&&(l=T.getDefaultPosition?T.getDefaultPosition():"top-right"),!T||!T.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=T.onAdd(this);this._controls.push(T);const C=this._controlPositions[l];return l.indexOf("bottom")!==-1?C.insertBefore(c,C.firstChild):C.appendChild(c),this}removeControl(T){if(!T||!T.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(T);return l>-1&&this._controls.splice(l,1),T.onRemove(this),this}hasControl(T){return this._controls.indexOf(T)>-1}calculateCameraOptionsFromTo(T,l,c,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(T,l,c,C)}resize(T,l=!0){const[c,C]=this._containerDimensions(),M=this._getClampedPixelRatio(c,C);if(this._resizeCanvas(c,C,M),this.painter.resize(c,C,M),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const $=this._getClampedPixelRatio(c,C);this._resizeCanvas(c,C,$),this.painter.resize(c,C,$)}this._resizeTransform(l);const R=!this._moving;return R&&(this.stop(),this.fire(new s.k("movestart",T)).fire(new s.k("move",T))),this.fire(new s.k("resize",T)),R&&this.fire(new s.k("moveend",T)),this}_resizeTransform(T=!0){var l;const[c,C]=this._containerDimensions();this.transform.resize(c,C,T),(l=this._requestedCameraState)===null||l===void 0||l.resize(c,C,T)}_getClampedPixelRatio(T,l){const{0:c,1:C}=this._maxCanvasSize,M=this.getPixelRatio(),R=T*M,j=l*M;return Math.min(R>c?c/R:1,j>C?C/j:1)*M}getPixelRatio(){var T;return(T=this._overridePixelRatio)!==null&&T!==void 0?T:devicePixelRatio}setPixelRatio(T){this._overridePixelRatio=T,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(T){return this.transform.setMaxBounds(Nt.convert(T)),this._update()}setMinZoom(T){if((T=T??-2)>=-2&&T<=this.transform.maxZoom)return this.transform.setMinZoom(T),this._update(),this.getZoom()<T&&this.setZoom(T),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(T){if((T=T??22)>=this.transform.minZoom)return this.transform.setMaxZoom(T),this._update(),this.getZoom()>T&&this.setZoom(T),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(T){if((T=T??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(T>=0&&T<=this.transform.maxPitch)return this.transform.setMinPitch(T),this._update(),this.getPitch()<T&&this.setPitch(T),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(T){if((T=T??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(T>=this.transform.minPitch)return this.transform.setMaxPitch(T),this._update(),this.getPitch()>T&&this.setPitch(T),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(T){return this.transform.setRenderWorldCopies(T),this._update()}project(T){return this.transform.locationToScreenPoint(s.N.convert(T),this.style&&this.terrain)}unproject(T){return this.transform.screenPointToLocation(s.P.convert(T),this.terrain)}isMoving(){var T;return this._moving||((T=this.handlers)===null||T===void 0?void 0:T.isMoving())}isZooming(){var T;return this._zooming||((T=this.handlers)===null||T===void 0?void 0:T.isZooming())}isRotating(){var T;return this._rotating||((T=this.handlers)===null||T===void 0?void 0:T.isRotating())}_createDelegatedListener(T,l,c){if(T==="mouseenter"||T==="mouseover"){let C=!1;return{layers:l,listener:c,delegates:{mousemove:R=>{const j=l.filter(te=>this.getLayer(te)),$=j.length!==0?this.queryRenderedFeatures(R.point,{layers:j}):[];$.length?C||(C=!0,c.call(this,new Ri(T,this,R.originalEvent,{features:$}))):C=!1},mouseout:()=>{C=!1}}}}if(T==="mouseleave"||T==="mouseout"){let C=!1;return{layers:l,listener:c,delegates:{mousemove:j=>{const $=l.filter(te=>this.getLayer(te));($.length!==0?this.queryRenderedFeatures(j.point,{layers:$}):[]).length?C=!0:C&&(C=!1,c.call(this,new Ri(T,this,j.originalEvent)))},mouseout:j=>{C&&(C=!1,c.call(this,new Ri(T,this,j.originalEvent)))}}}}{const C=M=>{const R=l.filter($=>this.getLayer($)),j=R.length!==0?this.queryRenderedFeatures(M.point,{layers:R}):[];j.length&&(M.features=j,c.call(this,M),delete M.features)};return{layers:l,listener:c,delegates:{[T]:C}}}}_saveDelegatedListener(T,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[T]=this._delegatedListeners[T]||[],this._delegatedListeners[T].push(l)}_removeDelegatedListener(T,l,c){if(!this._delegatedListeners||!this._delegatedListeners[T])return;const C=this._delegatedListeners[T];for(let M=0;M<C.length;M++){const R=C[M];if(R.listener===c&&R.layers.length===l.length&&R.layers.every(j=>l.includes(j))){for(const j in R.delegates)this.off(j,R.delegates[j]);return void C.splice(M,1)}}}on(T,l,c){if(c===void 0)return super.on(T,l);const C=typeof l=="string"?[l]:l,M=this._createDelegatedListener(T,C,c);this._saveDelegatedListener(T,M);for(const R in M.delegates)this.on(R,M.delegates[R]);return{unsubscribe:()=>{this._removeDelegatedListener(T,C,c)}}}once(T,l,c){if(c===void 0)return super.once(T,l);const C=typeof l=="string"?[l]:l,M=this._createDelegatedListener(T,C,c);for(const R in M.delegates){const j=M.delegates[R];M.delegates[R]=(...$)=>{this._removeDelegatedListener(T,C,c),j(...$)}}this._saveDelegatedListener(T,M);for(const R in M.delegates)this.once(R,M.delegates[R]);return this}off(T,l,c){return c===void 0?super.off(T,l):(this._removeDelegatedListener(T,typeof l=="string"?[l]:l,c),this)}queryRenderedFeatures(T,l){if(!this.style)return[];let c;const C=T instanceof s.P||Array.isArray(T),M=C?T:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(C?{}:T)||{},M instanceof s.P||typeof M[0]=="number")c=[s.P.convert(M)];else{const R=s.P.convert(M[0]),j=s.P.convert(M[1]);c=[R,new s.P(j.x,R.y),j,new s.P(R.x,j.y),R]}return this.style.queryRenderedFeatures(c,l,this.transform)}querySourceFeatures(T,l){return this.style.querySourceFeatures(T,l)}setStyle(T,l){return(l=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&T?(this._diffStyle(T,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(T,l))}setTransformRequest(T){return this._requestManager.setTransformRequest(T),this}_getUIString(T){const l=this._locale[T];if(l==null)throw new Error(`Missing UI string '${T}'`);return l}_updateStyle(T,l){var c,C;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(T,l));const M=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!T)),T?(this.style=new bd(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof T=="string"?this.style.loadURL(T,l,M):this.style.loadJSON(T,l,M),this):((C=(c=this.style)===null||c===void 0?void 0:c.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new bd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(T,l){if(typeof T=="string"){const c=this._requestManager.transformRequest(T,"Style");s.h(c,new AbortController).then(C=>{this._updateDiff(C.data,l)}).catch(C=>{C&&this.fire(new s.j(C))})}else typeof T=="object"&&this._updateDiff(T,l)}_updateDiff(T,l){try{this.style.setState(T,l)&&this._update(!0)}catch(c){s.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(T,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(T,l){return this._lazyInitEmptyStyle(),this.style.addSource(T,l),this._update(!0)}isSourceLoaded(T){const l=this.style&&this.style.sourceCaches[T];if(l!==void 0)return l.loaded();this.fire(new s.j(new Error(`There is no source with ID '${T}'`)))}setTerrain(T){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),T){const l=this.style.sourceCaches[T.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${T.source}`);this.terrain===null&&l.reload();for(const c in this.style._layers){const C=this.style._layers[c];C.type==="hillshade"&&C.source===T.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new xu(this.painter,l,T),this.painter.renderToTexture=new rd(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==T.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.k("terrain",{terrain:T})),this}getTerrain(){var T,l;return(l=(T=this.terrain)===null||T===void 0?void 0:T.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const T=this.style&&this.style.sourceCaches;for(const l in T){const c=T[l]._tiles;for(const C in c){const M=c[C];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}removeSource(T){return this.style.removeSource(T),this._update(!0)}getSource(T){return this.style.getSource(T)}addImage(T,l,c={}){const{pixelRatio:C=1,sdf:M=!1,stretchX:R,stretchY:j,content:$,textFitWidth:te,textFitHeight:oe}=c;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||s.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:be,height:Ee,data:Ie}=l,qe=l;return this.style.addImage(T,{data:new s.R({width:be,height:Ee},new Uint8Array(Ie)),pixelRatio:C,stretchX:R,stretchY:j,content:$,textFitWidth:te,textFitHeight:oe,sdf:M,version:0,userImage:qe}),qe.onAdd&&qe.onAdd(this,T),this}}{const{width:be,height:Ee,data:Ie}=S.getImageData(l);this.style.addImage(T,{data:new s.R({width:be,height:Ee},Ie),pixelRatio:C,stretchX:R,stretchY:j,content:$,textFitWidth:te,textFitHeight:oe,sdf:M,version:0})}}updateImage(T,l){const c=this.style.getImage(T);if(!c)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=l instanceof HTMLImageElement||s.b(l)?S.getImageData(l):l,{width:M,height:R,data:j}=C;if(M===void 0||R===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==c.data.width||R!==c.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const $=!(l instanceof HTMLImageElement||s.b(l));return c.data.replace(j,$),this.style.updateImage(T,c),this}getImage(T){return this.style.getImage(T)}hasImage(T){return T?!!this.style.getImage(T):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(T){this.style.removeImage(T)}loadImage(T){return X.getImage(this._requestManager.transformRequest(T,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(T,l){return this._lazyInitEmptyStyle(),this.style.addLayer(T,l),this._update(!0)}moveLayer(T,l){return this.style.moveLayer(T,l),this._update(!0)}removeLayer(T){return this.style.removeLayer(T),this._update(!0)}getLayer(T){return this.style.getLayer(T)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(T,l,c){return this.style.setLayerZoomRange(T,l,c),this._update(!0)}setFilter(T,l,c={}){return this.style.setFilter(T,l,c),this._update(!0)}getFilter(T){return this.style.getFilter(T)}setPaintProperty(T,l,c,C={}){return this.style.setPaintProperty(T,l,c,C),this._update(!0)}getPaintProperty(T,l){return this.style.getPaintProperty(T,l)}setLayoutProperty(T,l,c,C={}){return this.style.setLayoutProperty(T,l,c,C),this._update(!0)}getLayoutProperty(T,l){return this.style.getLayoutProperty(T,l)}setGlyphs(T,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(T,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(T,l,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(T,l,c,C=>{C||this._update(!0)}),this}removeSprite(T){return this._lazyInitEmptyStyle(),this.style.removeSprite(T),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(T,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(T,l,c=>{c||this._update(!0)}),this}setLight(T,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(T,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(T,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(T,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(T,l){return this.style.setFeatureState(T,l),this._update()}removeFeatureState(T,l){return this.style.removeFeatureState(T,l),this._update()}getFeatureState(T){return this.style.getFeatureState(T)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let T=0,l=0;return this._container&&(T=this._container.clientWidth||400,l=this._container.clientHeight||300),[T,l]}_setupContainer(){const T=this._container;T.classList.add("maplibregl-map");const l=this._canvasContainer=I.create("div","maplibregl-canvas-container",T);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),C=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],C);const M=this._controlContainer=I.create("div","maplibregl-control-container",T),R=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(j=>{R[j]=I.create("div",`maplibregl-ctrl-${j} `,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(T,l,c){this._canvas.width=Math.floor(c*T),this._canvas.height=Math.floor(c*l),this._canvas.style.width=`${T}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const T=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",C=>{l={requestedAttributes:T},C&&(l.statusMessage=C.statusMessage,l.type=C.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,T):this._canvas.getContext("webgl2",T)||this._canvas.getContext("webgl",T),!c){const C="Failed to initialize WebGL";throw l?(l.message=C,new Error(JSON.stringify(l))):new Error(C)}this.painter=new ju(c,this.transform),k.testSupport(c)}migrateProjection(T,l){super.migrateProjection(T,l),this.painter.transform=T,this.fire(new s.k("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(T){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||T,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(T){return this._update(),this._renderTaskQueue.add(T)}_cancelRenderFrame(T){this._renderTaskQueue.remove(T)}_render(T){var l,c,C,M,R;const j=this._idleTriggered?this._fadeDuration:0,$=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(T),this._removed)return;let te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ee=this.transform.zoom,Ie=S.now();this.style.zoomHistory.update(Ee,Ie);const qe=new s.z(Ee,{now:Ie,fadeDuration:j,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ve=qe.crossFadingFactor();Ve===1&&Ve===this._crossFadingFactor||(te=!0,this._crossFadingFactor=Ve),this.style.update(qe)}const oe=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==$;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((M=this.style.projection)===null||M===void 0?void 0:M.transitionState,(R=this.style.projection)===null||R===void 0?void 0:R.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||oe)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,j,this._crossSourceCollisions,oe),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:j,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cd.mark(s.ce.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const be=this._sourcesDirty||this._styleDirty||this._placementDirty;return be||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||be||(this._fullyLoaded=!0,s.cd.mark(s.ce.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var T;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(T=this._resizeObserver)===null||T===void 0||T.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l!=null&&l.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cd.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then(T=>{s.cd.frame(T),this._frameRequest=null,this._render(T)}).catch(T=>{if(!s.cf(T)&&!function(l){return l.message===jl}(T))throw T}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(T){this._showTileBoundaries!==T&&(this._showTileBoundaries=T,this._update())}get showPadding(){return!!this._showPadding}set showPadding(T){this._showPadding!==T&&(this._showPadding=T,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(T){this._showCollisionBoxes!==T&&(this._showCollisionBoxes=T,T?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(T){this._showOverdrawInspector!==T&&(this._showOverdrawInspector=T,this._update())}get repaint(){return!!this._repaint}set repaint(T){this._repaint!==T&&(this._repaint=T,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(T){this._vertices=T,this._update()}get version(){return id}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(T){return this._lazyInitEmptyStyle(),this.style.setProjection(T),this._update(!0)}},a.MapMouseEvent=Ri,a.MapTouchEvent=$r,a.MapWheelEvent=Ss,a.Marker=wu,a.NavigationControl=class{constructor(T){this._updateZoomButtons=()=>{const l=this._map.getZoom(),c=l===this._map.getMaxZoom(),C=l===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,c)=>{const C=this._map._getUIString(`NavigationControl.${c}`);l.title=C,l.setAttribute("aria-label",C)},this.options=s.e({},Ws,T),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(T){return this._map=T,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(T,l){const c=I.create("button",T,this._container);return c.type="button",c.addEventListener("click",l),c}},a.Popup=class extends s.E{constructor(T){super(),this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.k("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const $ of this.options.className.split(" "))this._container.classList.add($);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?dl(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!l)return;const C=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let M=this.options.anchor;const R=Ql(this.options.offset);if(!M){const $=this._container.offsetWidth,te=this._container.offsetHeight;let oe;oe=C.y+R.bottom.y<te?["top"]:C.y>this._map.transform.height-te?["bottom"]:[],C.x<$/2?oe.push("left"):C.x>this._map.transform.width-$/2&&oe.push("right"),M=oe.length===0?"bottom":oe.join("-")}let j=C.add(R[M]);this.options.subpixelPositioning||(j=j.round()),I.setTransform(this._container,`${qu[M]} translate(${j.x}px,${j.y}px)`),Mc(this._container,M,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Sc),T)}addTo(T){return this._map&&this.remove(),this._map=T,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(T){return this._lngLat=s.N.convert(T),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(T){return this.setDOMContent(document.createTextNode(T))}setHTML(T){const l=document.createDocumentFragment(),c=document.createElement("body");let C;for(c.innerHTML=T;C=c.firstChild,C;)l.appendChild(C);return this.setDOMContent(l)}getMaxWidth(){var T;return(T=this._container)===null||T===void 0?void 0:T.style.maxWidth}setMaxWidth(T){return this.options.maxWidth=T,this._update(),this}setDOMContent(T){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(T),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(T){return this._container&&this._container.classList.add(T),this}removeClassName(T){return this._container&&this._container.classList.remove(T),this}setOffset(T){return this.options.offset=T,this._update(),this}toggleClassName(T){if(this._container)return this._container.classList.toggle(T)}setSubpixelPositioning(T){this.options.subpixelPositioning=T}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const T=this._container.querySelector(Yu);T&&T.focus()}},a.RasterDEMTileSource=Yn,a.RasterTileSource=Sn,a.ScaleControl=class{constructor(T){this._onMove=()=>{cA(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,cA(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},lu),T)}getDefaultPosition(){return"bottom-left"}onAdd(T){return this._map=T,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",T.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=Ks,a.Style=bd,a.TerrainControl=class{constructor(T){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=T}onAdd(T){return this._map=T,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=Cc,a.TwoFingersTouchRotateHandler=nc,a.TwoFingersTouchZoomHandler=xh,a.TwoFingersTouchZoomRotateHandler=SA,a.VectorTileSource=en,a.VideoSource=fr,a.addSourceType=(T,l)=>s._(void 0,void 0,void 0,function*(){if(Mr(T))throw new Error(`A source type called "${T}" already exists.`);((c,C)=>{Cr[c]=C})(T,l)}),a.clearPrewarmedResources=function(){const T=mt;T&&(T.isPreloaded()&&T.numActive()===1?(T.release(Ue),mt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.createTileMesh=tt,a.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return ue().getRTLTextPluginStatus()},a.getVersion=function(){return wh},a.getWorkerCount=function(){return st.workerCount},a.getWorkerUrl=function(){return s.a.WORKER_URL},a.importScriptInWorkers=function(T){return De().broadcast("IS",T)},a.prewarm=function(){Ut().acquire(Ue)},a.setMaxParallelImageRequests=function(T){s.a.MAX_PARALLEL_IMAGE_REQUESTS=T},a.setRTLTextPlugin=function(T,l){return ue().setRTLTextPlugin(T,l)},a.setWorkerCount=function(T){st.workerCount=T},a.setWorkerUrl=function(T){s.a.WORKER_URL=T}});var o=t;return o})}(bb)),bb.exports}var N$=j$();const _v=Ka(N$);var DC=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function BF(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cv={exports:{}};Cv.exports;var e7;function G$(){return e7||(e7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",h="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",B="[object Date]",S="[object Error]",I="[object Function]",k="[object GeneratorFunction]",U="[object Map]",z="[object Number]",Y="[object Null]",Q="[object Object]",ne="[object Promise]",X="[object Proxy]",q="[object RegExp]",J="[object Set]",N="[object String]",ie="[object Symbol]",he="[object Undefined]",ce="[object WeakMap]",we="[object ArrayBuffer]",pe="[object DataView]",Ce="[object Float32Array]",Pe="[object Float64Array]",de="[object Int8Array]",rt="[object Int16Array]",ze="[object Int32Array]",Qe="[object Uint8Array]",ut="[object Uint8ClampedArray]",Te="[object Uint16Array]",Ue="[object Uint32Array]",st=/[\\^$.*+?()[\]{}|]/g,wt=/^\[object .+?Constructor\]$/,mt=/^(?:0|[1-9]\d*)$/,ft={};ft[Ce]=ft[Pe]=ft[de]=ft[rt]=ft[ze]=ft[Qe]=ft[ut]=ft[Te]=ft[Ue]=!0,ft[s]=ft[h]=ft[we]=ft[b]=ft[pe]=ft[B]=ft[S]=ft[I]=ft[U]=ft[z]=ft[Q]=ft[q]=ft[J]=ft[N]=ft[ce]=!1;var Ut=typeof DC=="object"&&DC&&DC.Object===Object&&DC,Lt=typeof self=="object"&&self&&self.Object===Object&&self,De=Ut||Lt||Function("return this")(),ke=e&&!e.nodeType&&e,Oe=ke&&!0&&n&&!n.nodeType&&n,Je=Oe&&Oe.exports===ke,Mt=Je&&Ut.process,gt=function(){try{return Mt&&Mt.binding&&Mt.binding("util")}catch{}}(),Nt=gt&&gt.isTypedArray;function nn(ee,Se){for(var tt=-1,$t=ee==null?0:ee.length,Or=0,Gn=[];++tt<$t;){var si=ee[tt];Se(si,tt,ee)&&(Gn[Or++]=si)}return Gn}function en(ee,Se){for(var tt=-1,$t=Se.length,Or=ee.length;++tt<$t;)ee[Or+tt]=Se[tt];return ee}function Sn(ee,Se){for(var tt=-1,$t=ee==null?0:ee.length;++tt<$t;)if(Se(ee[tt],tt,ee))return!0;return!1}function Yn(ee,Se){for(var tt=-1,$t=Array(ee);++tt<ee;)$t[tt]=Se(tt);return $t}function Qr(ee){return function(Se){return ee(Se)}}function cr(ee,Se){return ee.has(Se)}function fr(ee,Se){return ee==null?void 0:ee[Se]}function br(ee){var Se=-1,tt=Array(ee.size);return ee.forEach(function($t,Or){tt[++Se]=[Or,$t]}),tt}function Cr(ee,Se){return function(tt){return ee(Se(tt))}}function Mr(ee){var Se=-1,tt=Array(ee.size);return ee.forEach(function($t){tt[++Se]=$t}),tt}var Qn=Array.prototype,Sr=Function.prototype,Ge=Object.prototype,ue=De["__core-js_shared__"],me=Sr.toString,Xe=Ge.hasOwnProperty,Bt=function(){var ee=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Yt=Ge.toString,it=RegExp("^"+me.call(Xe).replace(st,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kt=Je?De.Buffer:void 0,Ye=De.Symbol,fe=De.Uint8Array,xe=Ge.propertyIsEnumerable,p=Qn.splice,Ne=Ye?Ye.toStringTag:void 0,dt=Object.getOwnPropertySymbols,pt=Kt?Kt.isBuffer:void 0,Ot=Cr(Object.keys,Object),_t=Ei(De,"DataView"),rn=Ei(De,"Map"),Zt=Ei(De,"Promise"),Gt=Ei(De,"Set"),bt=Ei(De,"WeakMap"),Pn=Ei(Object,"create"),En=fo(_t),lr=fo(rn),wr=fo(Zt),on=fo(Gt),zn=fo(bt),Dn=Ye?Ye.prototype:void 0,Br=Dn?Dn.valueOf:void 0;function xr(ee){var Se=-1,tt=ee==null?0:ee.length;for(this.clear();++Se<tt;){var $t=ee[Se];this.set($t[0],$t[1])}}function Rr(){this.__data__=Pn?Pn(null):{},this.size=0}function rr(ee){var Se=this.has(ee)&&delete this.__data__[ee];return this.size-=Se?1:0,Se}function co(ee){var Se=this.__data__;if(Pn){var tt=Se[ee];return tt===r?void 0:tt}return Xe.call(Se,ee)?Se[ee]:void 0}function $a(ee){var Se=this.__data__;return Pn?Se[ee]!==void 0:Xe.call(Se,ee)}function ji(ee,Se){var tt=this.__data__;return this.size+=this.has(ee)?0:1,tt[ee]=Pn&&Se===void 0?r:Se,this}xr.prototype.clear=Rr,xr.prototype.delete=rr,xr.prototype.get=co,xr.prototype.has=$a,xr.prototype.set=ji;function ui(ee){var Se=-1,tt=ee==null?0:ee.length;for(this.clear();++Se<tt;){var $t=ee[Se];this.set($t[0],$t[1])}}function Vi(){this.__data__=[],this.size=0}function as(ee){var Se=this.__data__,tt=er(Se,ee);if(tt<0)return!1;var $t=Se.length-1;return tt==$t?Se.pop():p.call(Se,tt,1),--this.size,!0}function Ni(ee){var Se=this.__data__,tt=er(Se,ee);return tt<0?void 0:Se[tt][1]}function ll(ee){return er(this.__data__,ee)>-1}function ul(ee,Se){var tt=this.__data__,$t=er(tt,ee);return $t<0?(++this.size,tt.push([ee,Se])):tt[$t][1]=Se,this}ui.prototype.clear=Vi,ui.prototype.delete=as,ui.prototype.get=Ni,ui.prototype.has=ll,ui.prototype.set=ul;function ts(ee){var Se=-1,tt=ee==null?0:ee.length;for(this.clear();++Se<tt;){var $t=ee[Se];this.set($t[0],$t[1])}}function Aa(){this.size=0,this.__data__={hash:new xr,map:new(rn||ui),string:new xr}}function Al(ee){var Se=Dr(this,ee).delete(ee);return this.size-=Se?1:0,Se}function ao(ee){return Dr(this,ee).get(ee)}function Pu(ee){return Dr(this,ee).has(ee)}function tu(ee,Se){var tt=Dr(this,ee),$t=tt.size;return tt.set(ee,Se),this.size+=tt.size==$t?0:1,this}ts.prototype.clear=Aa,ts.prototype.delete=Al,ts.prototype.get=ao,ts.prototype.has=Pu,ts.prototype.set=tu;function so(ee){var Se=-1,tt=ee==null?0:ee.length;for(this.__data__=new ts;++Se<tt;)this.add(ee[Se])}function Kr(ee){return this.__data__.set(ee,r),this}function Va(ee){return this.__data__.has(ee)}so.prototype.add=so.prototype.push=Kr,so.prototype.has=Va;function Ts(ee){var Se=this.__data__=new ui(ee);this.size=Se.size}function ia(){this.__data__=new ui,this.size=0}function We(ee){var Se=this.__data__,tt=Se.delete(ee);return this.size=Se.size,tt}function Ct(ee){return this.__data__.get(ee)}function pn(ee){return this.__data__.has(ee)}function Nn(ee,Se){var tt=this.__data__;if(tt instanceof ui){var $t=tt.__data__;if(!rn||$t.length<t-1)return $t.push([ee,Se]),this.size=++tt.size,this;tt=this.__data__=new ts($t)}return tt.set(ee,Se),this.size=tt.size,this}Ts.prototype.clear=ia,Ts.prototype.delete=We,Ts.prototype.get=Ct,Ts.prototype.has=pn,Ts.prototype.set=Nn;function An(ee,Se){var tt=Xa(ee),$t=!tt&&ws(ee),Or=!tt&&!$t&&El(ee),Gn=!tt&&!$t&&!Or&&ru(ee),si=tt||$t||Or||Gn,hi=si?Yn(ee.length,String):[],pr=hi.length;for(var Ir in ee)Xe.call(ee,Ir)&&!(si&&(Ir=="length"||Or&&(Ir=="offset"||Ir=="parent")||Gn&&(Ir=="buffer"||Ir=="byteLength"||Ir=="byteOffset")||Ns(Ir,pr)))&&hi.push(Ir);return hi}function er(ee,Se){for(var tt=ee.length;tt--;)if(ms(ee[tt][0],Se))return tt;return-1}function Ti(ee,Se,tt){var $t=Se(ee);return Xa(ee)?$t:en($t,tt(ee))}function ho(ee){return ee==null?ee===void 0?he:Y:Ne&&Ne in Object(ee)?Za(ee):Vs(ee)}function vs(ee){return Jr(ee)&&ho(ee)==s}function js(ee,Se,tt,$t,Or){return ee===Se?!0:ee==null||Se==null||!Jr(ee)&&!Jr(Se)?ee!==ee&&Se!==Se:vA(ee,Se,tt,$t,js,Or)}function vA(ee,Se,tt,$t,Or,Gn){var si=Xa(ee),hi=Xa(Se),pr=si?h:Mo(ee),Ir=hi?h:Mo(Se);pr=pr==s?Q:pr,Ir=Ir==s?Q:Ir;var vi=pr==Q,So=Ir==Q,ki=pr==Ir;if(ki&&El(ee)){if(!El(Se))return!1;si=!0,vi=!1}if(ki&&!vi)return Gn||(Gn=new Ts),si||ru(ee)?ci(ee,Se,tt,$t,Or,Gn):ca(ee,Se,pr,tt,$t,Or,Gn);if(!(tt&i)){var qr=vi&&Xe.call(ee,"__wrapped__"),Zi=So&&Xe.call(Se,"__wrapped__");if(qr||Zi){var Xi=qr?ee.value():ee,us=Zi?Se.value():Se;return Gn||(Gn=new Ts),Or(Xi,us,tt,$t,Gn)}}return ki?(Gn||(Gn=new Ts),iA(ee,Se,tt,$t,Or,Gn)):!1}function ri(ee){if(!Fi(ee)||zl(ee))return!1;var Se=Hi(ee)?it:wt;return Se.test(fo(ee))}function wi(ee){return Jr(ee)&&nu(ee.length)&&!!ft[ho(ee)]}function Ha(ee){if(!ns(ee))return Ot(ee);var Se=[];for(var tt in Object(ee))Xe.call(ee,tt)&&tt!="constructor"&&Se.push(tt);return Se}function ci(ee,Se,tt,$t,Or,Gn){var si=tt&i,hi=ee.length,pr=Se.length;if(hi!=pr&&!(si&&pr>hi))return!1;var Ir=Gn.get(ee);if(Ir&&Gn.get(Se))return Ir==Se;var vi=-1,So=!0,ki=tt&o?new so:void 0;for(Gn.set(ee,Se),Gn.set(Se,ee);++vi<hi;){var qr=ee[vi],Zi=Se[vi];if($t)var Xi=si?$t(Zi,qr,vi,Se,ee,Gn):$t(qr,Zi,vi,ee,Se,Gn);if(Xi!==void 0){if(Xi)continue;So=!1;break}if(ki){if(!Sn(Se,function(us,ya){if(!cr(ki,ya)&&(qr===us||Or(qr,us,tt,$t,Gn)))return ki.push(ya)})){So=!1;break}}else if(!(qr===Zi||Or(qr,Zi,tt,$t,Gn))){So=!1;break}}return Gn.delete(ee),Gn.delete(Se),So}function ca(ee,Se,tt,$t,Or,Gn,si){switch(tt){case pe:if(ee.byteLength!=Se.byteLength||ee.byteOffset!=Se.byteOffset)return!1;ee=ee.buffer,Se=Se.buffer;case we:return!(ee.byteLength!=Se.byteLength||!Gn(new fe(ee),new fe(Se)));case b:case B:case z:return ms(+ee,+Se);case S:return ee.name==Se.name&&ee.message==Se.message;case q:case N:return ee==Se+"";case U:var hi=br;case J:var pr=$t&i;if(hi||(hi=Mr),ee.size!=Se.size&&!pr)return!1;var Ir=si.get(ee);if(Ir)return Ir==Se;$t|=o,si.set(ee,Se);var vi=ci(hi(ee),hi(Se),$t,Or,Gn,si);return si.delete(ee),vi;case ie:if(Br)return Br.call(ee)==Br.call(Se)}return!1}function iA(ee,Se,tt,$t,Or,Gn){var si=tt&i,hi=ls(ee),pr=hi.length,Ir=ls(Se),vi=Ir.length;if(pr!=vi&&!si)return!1;for(var So=pr;So--;){var ki=hi[So];if(!(si?ki in Se:Xe.call(Se,ki)))return!1}var qr=Gn.get(ee);if(qr&&Gn.get(Se))return qr==Se;var Zi=!0;Gn.set(ee,Se),Gn.set(Se,ee);for(var Xi=si;++So<pr;){ki=hi[So];var us=ee[ki],ya=Se[ki];if($t)var La=si?$t(ya,us,ki,Se,ee,Gn):$t(us,ya,ki,ee,Se,Gn);if(!(La===void 0?us===ya||Or(us,ya,tt,$t,Gn):La)){Zi=!1;break}Xi||(Xi=ki=="constructor")}if(Zi&&!Xi){var fu=ee.constructor,Hs=Se.constructor;fu!=Hs&&"constructor"in ee&&"constructor"in Se&&!(typeof fu=="function"&&fu instanceof fu&&typeof Hs=="function"&&Hs instanceof Hs)&&(Zi=!1)}return Gn.delete(ee),Gn.delete(Se),Zi}function ls(ee){return Ti(ee,Gi,Ps)}function Dr(ee,Se){var tt=ee.__data__;return du(Se)?tt[typeof Se=="string"?"string":"hash"]:tt.map}function Ei(ee,Se){var tt=fr(ee,Se);return ri(tt)?tt:void 0}function Za(ee){var Se=Xe.call(ee,Ne),tt=ee[Ne];try{ee[Ne]=void 0;var $t=!0}catch{}var Or=Yt.call(ee);return $t&&(Se?ee[Ne]=tt:delete ee[Ne]),Or}var Ps=dt?function(ee){return ee==null?[]:(ee=Object(ee),nn(dt(ee),function(Se){return xe.call(ee,Se)}))}:lo,Mo=ho;(_t&&Mo(new _t(new ArrayBuffer(1)))!=pe||rn&&Mo(new rn)!=U||Zt&&Mo(Zt.resolve())!=ne||Gt&&Mo(new Gt)!=J||bt&&Mo(new bt)!=ce)&&(Mo=function(ee){var Se=ho(ee),tt=Se==Q?ee.constructor:void 0,$t=tt?fo(tt):"";if($t)switch($t){case En:return pe;case lr:return U;case wr:return ne;case on:return J;case zn:return ce}return Se});function Ns(ee,Se){return Se=Se??a,!!Se&&(typeof ee=="number"||mt.test(ee))&&ee>-1&&ee%1==0&&ee<Se}function du(ee){var Se=typeof ee;return Se=="string"||Se=="number"||Se=="symbol"||Se=="boolean"?ee!=="__proto__":ee===null}function zl(ee){return!!Bt&&Bt in ee}function ns(ee){var Se=ee&&ee.constructor,tt=typeof Se=="function"&&Se.prototype||Ge;return ee===tt}function Vs(ee){return Yt.call(ee)}function fo(ee){if(ee!=null){try{return me.call(ee)}catch{}try{return ee+""}catch{}}return""}function ms(ee,Se){return ee===Se||ee!==ee&&Se!==Se}var ws=vs(function(){return arguments}())?vs:function(ee){return Jr(ee)&&Xe.call(ee,"callee")&&!xe.call(ee,"callee")},Xa=Array.isArray;function Rs(ee){return ee!=null&&nu(ee.length)&&!Hi(ee)}var El=pt||Pi;function oA(ee,Se){return js(ee,Se)}function Hi(ee){if(!Fi(ee))return!1;var Se=ho(ee);return Se==I||Se==k||Se==g||Se==X}function nu(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=a}function Fi(ee){var Se=typeof ee;return ee!=null&&(Se=="object"||Se=="function")}function Jr(ee){return ee!=null&&typeof ee=="object"}var ru=Nt?Qr(Nt):wi;function Gi(ee){return Rs(ee)?An(ee):Ha(ee)}function lo(){return[]}function Pi(){return!1}n.exports=oA}(Cv,Cv.exports)),Cv.exports}var W$=G$(),Q$=BF(W$);function XE(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function JE(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function e6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function q$(n,e){const t=[],r=[],i=[];function o(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const s=n[a];if(!s||s.length===0){const h=o(a);r.push(XE(h.circle,a)),i.push(e6(h.line,a)),t.push(JE(h.polygon,h.polygonOutline,a))}else s.forEach(h=>{const g=o(h);r.push(XE(g.circle,a,h)),i.push(e6(g.line,a,h)),t.push(JE(g.polygon,g.polygonOutline,a,h))})}),t.concat(i).concat(r)}function Y$(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(o=>{const a=n.sources[o];(a.type==="vector"||a.type==="geojson")&&(i[o]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var t7={polygonLayer:JE,lineLayer:e6,circleLayer:XE,generateInspectStyle:Y$,generateColoredLayers:q$};class $${constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function V$(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function X3(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${V$(e)}</div></div>`}function H$(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function Z$(n){const e=H$(n.layer["source-layer"]||n.layer.source),t=X3("$id",n.id),r=X3("$type",n.geometry.type),i=Object.keys(n.properties).map(o=>X3(o,n.properties[o]));return[e,t,r].concat(i).join("")}function X$(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${Z$(e)}</div>`).join("")}function J$(n){return`<div class="maplibregl-inspect_popup">${X$(n)}</div>`}var bv={exports:{}},eV=bv.exports,n7;function tV(){return n7||(n7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(eV,function(){var t=null,r={};Y();var i=[],o=function(N){if(N=N||{},N.seed!==void 0&&N.seed!==null&&N.seed===parseInt(N.seed,10))t=N.seed;else if(typeof N.seed=="string")t=q(N.seed);else{if(N.seed!==void 0&&N.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ie,he,ce;if(N.count!==null&&N.count!==void 0){for(var we=N.count,pe=[],Ce=0;Ce<N.count;Ce++)i.push(!1);for(N.count=null;we>pe.length;){var Pe=o(N);t!==null&&(N.seed=t),pe.push(Pe)}return N.count=we,pe}return ie=a(N),he=s(ie,N),ce=h(ie,he,N),g([ie,he,ce],N)};function a(N){if(i.length>0){var ie=J(N.hue),he=k(ie),ce=(ie[1]-ie[0])/i.length,we=parseInt((he-ie[0])/ce);i[we]===!0?we=(we+2)%i.length:i[we]=!0;var pe=(ie[0]+we*ce)%359,Ce=(ie[0]+(we+1)*ce)%359;return ie=[pe,Ce],he=k(ie),he<0&&(he=360+he),he}else{var ie=B(N.hue);return he=k(ie),he<0&&(he=360+he),he}}function s(N,ie){if(ie.hue==="monochrome")return 0;if(ie.luminosity==="random")return k([0,100]);var he=S(N),ce=he[0],we=he[1];switch(ie.luminosity){case"bright":ce=55;break;case"dark":ce=we-10;break;case"light":we=55;break}return k([ce,we])}function h(N,ie,he){var ce=b(N,ie),we=100;switch(he.luminosity){case"dark":we=ce+20;break;case"light":ce=(we+ce)/2;break;case"random":ce=0,we=100;break}return k([ce,we])}function g(N,ie){switch(ie.format){case"hsvArray":return N;case"hslArray":return X(N);case"hsl":var he=X(N);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var ce=X(N),Ce=ie.alpha||Math.random();return"hsla("+ce[0]+", "+ce[1]+"%, "+ce[2]+"%, "+Ce+")";case"rgbArray":return Q(N);case"rgb":var we=Q(N);return"rgb("+we.join(", ")+")";case"rgba":var pe=Q(N),Ce=ie.alpha||Math.random();return"rgba("+pe.join(", ")+", "+Ce+")";default:return U(N)}}function b(N,ie){for(var he=I(N).lowerBounds,ce=0;ce<he.length-1;ce++){var we=he[ce][0],pe=he[ce][1],Ce=he[ce+1][0],Pe=he[ce+1][1];if(ie>=we&&ie<=Ce){var de=(Pe-pe)/(Ce-we),rt=pe-de*we;return de*ie+rt}}return 0}function B(N){if(typeof parseInt(N)=="number"){var ie=parseInt(N);if(ie<360&&ie>0)return[ie,ie]}if(typeof N=="string"){if(r[N]){var he=r[N];if(he.hueRange)return he.hueRange}else if(N.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ce=ne(N)[0];return[ce,ce]}}return[0,360]}function S(N){return I(N).saturationRange}function I(N){N>=334&&N<=360&&(N-=360);for(var ie in r){var he=r[ie];if(he.hueRange&&N>=he.hueRange[0]&&N<=he.hueRange[1])return r[ie]}return"Color not found"}function k(N){if(t===null){var ie=.618033988749895,he=Math.random();return he+=ie,he%=1,Math.floor(N[0]+he*(N[1]+1-N[0]))}else{var ce=N[1]||1,we=N[0]||0;t=(t*9301+49297)%233280;var pe=t/233280;return Math.floor(we+pe*(ce-we))}}function U(N){var ie=Q(N);function he(we){var pe=we.toString(16);return pe.length==1?"0"+pe:pe}var ce="#"+he(ie[0])+he(ie[1])+he(ie[2]);return ce}function z(N,ie,he){var ce=he[0][0],we=he[he.length-1][0],pe=he[he.length-1][1],Ce=he[0][1];r[N]={hueRange:ie,lowerBounds:he,saturationRange:[ce,we],brightnessRange:[pe,Ce]}}function Y(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Q(N){var ie=N[0];ie===0&&(ie=1),ie===360&&(ie=359),ie=ie/360;var he=N[1]/100,ce=N[2]/100,we=Math.floor(ie*6),pe=ie*6-we,Ce=ce*(1-he),Pe=ce*(1-pe*he),de=ce*(1-(1-pe)*he),rt=256,ze=256,Qe=256;switch(we){case 0:rt=ce,ze=de,Qe=Ce;break;case 1:rt=Pe,ze=ce,Qe=Ce;break;case 2:rt=Ce,ze=ce,Qe=de;break;case 3:rt=Ce,ze=Pe,Qe=ce;break;case 4:rt=de,ze=Ce,Qe=ce;break;case 5:rt=ce,ze=Ce,Qe=Pe;break}var ut=[Math.floor(rt*255),Math.floor(ze*255),Math.floor(Qe*255)];return ut}function ne(N){N=N.replace(/^#/,""),N=N.length===3?N.replace(/(.)/g,"$1$1"):N;var ie=parseInt(N.substr(0,2),16)/255,he=parseInt(N.substr(2,2),16)/255,ce=parseInt(N.substr(4,2),16)/255,we=Math.max(ie,he,ce),pe=we-Math.min(ie,he,ce),Ce=we?pe/we:0;switch(we){case ie:return[60*((he-ce)/pe%6)||0,Ce,we];case he:return[60*((ce-ie)/pe+2)||0,Ce,we];case ce:return[60*((ie-he)/pe+4)||0,Ce,we]}}function X(N){var ie=N[0],he=N[1]/100,ce=N[2]/100,we=(2-he)*ce;return[ie,Math.round(he*ce/(we<1?we:2-we)*1e4)/100,we/2*100]}function q(N){for(var ie=0,he=0;he!==N.length&&!(ie>=Number.MAX_SAFE_INTEGER);he++)ie+=N.charCodeAt(he);return ie}function J(N){if(isNaN(N)){if(typeof N=="string"){if(r[N]){var he=r[N];if(he.hueRange)return he.hueRange}else if(N.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ce=ne(N)[0];return I(ce).hueRange}}}else{var ie=parseInt(N);if(ie<360&&ie>0)return I(N).hueRange}return[0,360]}return o})}(bv,bv.exports)),bv.exports}var nV=tV(),rV=BF(nV);function iV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${rV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var oV={brightColor:iV};function sV(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function aV(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class xB{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!Q$(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();sV(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const o=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=o.length?"pointer":"",!o.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const a=this.options.renderPopup(o);typeof a=="string"?this._popup.setHTML(a):this._popup.setDOMContent(a),this._popup.addTo(this._map)}}},!(this instanceof xB))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:oV.brightColor,buildInspectStyle:t7.generateInspectStyle,renderPopup:J$,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new $$({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=t7.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(aV(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var xv={exports:{}},lV=xv.exports,r7;function uV(){return r7||(r7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(lV,function(){var t=null,r={};Y();var i=[],o=function(N){if(N=N||{},N.seed!==void 0&&N.seed!==null&&N.seed===parseInt(N.seed,10))t=N.seed;else if(typeof N.seed=="string")t=q(N.seed);else{if(N.seed!==void 0&&N.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ie,he,ce;if(N.count!==null&&N.count!==void 0){for(var we=N.count,pe=[],Ce=0;Ce<N.count;Ce++)i.push(!1);for(N.count=null;we>pe.length;){var Pe=o(N);t!==null&&(N.seed=t),pe.push(Pe)}return N.count=we,pe}return ie=a(N),he=s(ie,N),ce=h(ie,he,N),g([ie,he,ce],N)};function a(N){if(i.length>0){var ie=J(N.hue),he=k(ie),ce=(ie[1]-ie[0])/i.length,we=parseInt((he-ie[0])/ce);i[we]===!0?we=(we+2)%i.length:i[we]=!0;var pe=(ie[0]+we*ce)%359,Ce=(ie[0]+(we+1)*ce)%359;return ie=[pe,Ce],he=k(ie),he<0&&(he=360+he),he}else{var ie=B(N.hue);return he=k(ie),he<0&&(he=360+he),he}}function s(N,ie){if(ie.hue==="monochrome")return 0;if(ie.luminosity==="random")return k([0,100]);var he=S(N),ce=he[0],we=he[1];switch(ie.luminosity){case"bright":ce=55;break;case"dark":ce=we-10;break;case"light":we=55;break}return k([ce,we])}function h(N,ie,he){var ce=b(N,ie),we=100;switch(he.luminosity){case"dark":we=ce+20;break;case"light":ce=(we+ce)/2;break;case"random":ce=0,we=100;break}return k([ce,we])}function g(N,ie){switch(ie.format){case"hsvArray":return N;case"hslArray":return X(N);case"hsl":var he=X(N);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var ce=X(N),Ce=ie.alpha||Math.random();return"hsla("+ce[0]+", "+ce[1]+"%, "+ce[2]+"%, "+Ce+")";case"rgbArray":return Q(N);case"rgb":var we=Q(N);return"rgb("+we.join(", ")+")";case"rgba":var pe=Q(N),Ce=ie.alpha||Math.random();return"rgba("+pe.join(", ")+", "+Ce+")";default:return U(N)}}function b(N,ie){for(var he=I(N).lowerBounds,ce=0;ce<he.length-1;ce++){var we=he[ce][0],pe=he[ce][1],Ce=he[ce+1][0],Pe=he[ce+1][1];if(ie>=we&&ie<=Ce){var de=(Pe-pe)/(Ce-we),rt=pe-de*we;return de*ie+rt}}return 0}function B(N){if(typeof parseInt(N)=="number"){var ie=parseInt(N);if(ie<360&&ie>0)return[ie,ie]}if(typeof N=="string"){if(r[N]){var he=r[N];if(he.hueRange)return he.hueRange}else if(N.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ce=ne(N)[0];return[ce,ce]}}return[0,360]}function S(N){return I(N).saturationRange}function I(N){N>=334&&N<=360&&(N-=360);for(var ie in r){var he=r[ie];if(he.hueRange&&N>=he.hueRange[0]&&N<=he.hueRange[1])return r[ie]}return"Color not found"}function k(N){if(t===null){var ie=.618033988749895,he=Math.random();return he+=ie,he%=1,Math.floor(N[0]+he*(N[1]+1-N[0]))}else{var ce=N[1]||1,we=N[0]||0;t=(t*9301+49297)%233280;var pe=t/233280;return Math.floor(we+pe*(ce-we))}}function U(N){var ie=Q(N);function he(we){var pe=we.toString(16);return pe.length==1?"0"+pe:pe}var ce="#"+he(ie[0])+he(ie[1])+he(ie[2]);return ce}function z(N,ie,he){var ce=he[0][0],we=he[he.length-1][0],pe=he[he.length-1][1],Ce=he[0][1];r[N]={hueRange:ie,lowerBounds:he,saturationRange:[ce,we],brightnessRange:[pe,Ce]}}function Y(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Q(N){var ie=N[0];ie===0&&(ie=1),ie===360&&(ie=359),ie=ie/360;var he=N[1]/100,ce=N[2]/100,we=Math.floor(ie*6),pe=ie*6-we,Ce=ce*(1-he),Pe=ce*(1-pe*he),de=ce*(1-(1-pe)*he),rt=256,ze=256,Qe=256;switch(we){case 0:rt=ce,ze=de,Qe=Ce;break;case 1:rt=Pe,ze=ce,Qe=Ce;break;case 2:rt=Ce,ze=ce,Qe=de;break;case 3:rt=Ce,ze=Pe,Qe=ce;break;case 4:rt=de,ze=Ce,Qe=ce;break;case 5:rt=ce,ze=Ce,Qe=Pe;break}var ut=[Math.floor(rt*255),Math.floor(ze*255),Math.floor(Qe*255)];return ut}function ne(N){N=N.replace(/^#/,""),N=N.length===3?N.replace(/(.)/g,"$1$1"):N;var ie=parseInt(N.substr(0,2),16)/255,he=parseInt(N.substr(2,2),16)/255,ce=parseInt(N.substr(4,2),16)/255,we=Math.max(ie,he,ce),pe=we-Math.min(ie,he,ce),Ce=we?pe/we:0;switch(we){case ie:return[60*((he-ce)/pe%6)||0,Ce,we];case he:return[60*((ce-ie)/pe+2)||0,Ce,we];case ce:return[60*((ie-he)/pe+4)||0,Ce,we]}}function X(N){var ie=N[0],he=N[1]/100,ce=N[2]/100,we=(2-he)*ce;return[ie,Math.round(he*ce/(we<1?we:2-we)*1e4)/100,we/2*100]}function q(N){for(var ie=0,he=0;he!==N.length&&!(ie>=Number.MAX_SAFE_INTEGER);he++)ie+=N.charCodeAt(he);return ie}function J(N){if(isNaN(N)){if(typeof N=="string"){if(r[N]){var he=r[N];if(he.hueRange)return he.hueRange}else if(N.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ce=ne(N)[0];return I(ce).hueRange}}}else{var ie=parseInt(N);if(ie<360&&ie>0)return I(N).hueRange}return[0,360]}return o})}(xv,xv.exports)),xv.exports}var AV=uV();const cV=Ka(AV);function hV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${cV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const OF={brightColor:hV};var J3={exports:{}},e4,i7;function dV(){if(i7)return e4;i7=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return e4=n,e4}var t4,o7;function fV(){if(o7)return t4;o7=1;var n=dV();function e(){}function t(){}return t.resetWarningCache=e,t4=function(){function r(a,s,h,g,b,B){if(B!==n){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},t4}var s7;function hp(){return s7||(s7=1,J3.exports=fV()()),J3.exports}var pV=hp();const pi=Ka(pV);var a7=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function mV(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var k0=function(e,t){var r=e.children,i=e.color,o=e.size,a=e.style,s=e.width,h=e.height,g=mV(e,["children","color","size","style","width","height"]),b=t.reactIconBase,B=b===void 0?{}:b,S=o||B.size||"1em";return Xn.createElement("svg",a7({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:h||S,width:s||S},B,g,{style:a7({verticalAlign:"middle",color:i||B.color},B.style||{},a)}))};k0.propTypes={color:pi.string,size:pi.oneOfType([pi.string,pi.number]),width:pi.oneOfType([pi.string,pi.number]),height:pi.oneOfType([pi.string,pi.number]),style:pi.object};k0.contextTypes={reactIconBase:pi.shape(k0.propTypes)};function Yb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Yb=function(){return a},a}Yb();class gV extends Xn.Component{render(){return Yb().f[0]++,Yb().s[0]++,ae.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:ae.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function $b(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return $b=function(){return a},a}$b();class LC extends Xn.Component{render(){return $b().f[0]++,$b().s[0]++,ae.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:ae.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function Vb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Vb=function(){return a},a}Vb();class yV extends Xn.Component{render(){return Vb().f[0]++,Vb().s[0]++,ae.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:ae.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:ae.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function Hb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Hb=function(){return a},a}Hb();class l7 extends Xn.Component{render(){return Hb().f[0]++,Hb().s[0]++,ae.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:ae.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function Zb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Zb=function(){return a},a}Zb();class vV extends Xn.Component{render(){return Zb().f[0]++,Zb().s[0]++,ae.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:ae.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function ky(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function _V(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function CV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function bV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function xV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function wV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function MV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function SV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function EV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function BV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function IF(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function OV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function t6(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function IV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function kV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function TV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function u7(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function PV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function RV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function KV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function DV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function LV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function FV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function UV(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function Xb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Xb=function(){return a},a}Xb();class zV extends Xn.Component{render(){return Xb().f[0]++,Xb().s[0]++,ae.jsx(UV,{...this.props})}}function Dl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Dl=function(){return a},a}Dl();class kF extends Xn.Component{render(){Dl().f[0]++;const e=(Dl().s[0]++,{style:this.props.style});switch(Dl().s[1]++,this.props.type){case"fill-extrusion":return Dl().b[0][0]++,Dl().s[2]++,ae.jsx(l7,{...e});case"raster":return Dl().b[0][1]++,Dl().s[3]++,ae.jsx(LC,{...e});case"hillshade":return Dl().b[0][2]++,Dl().s[4]++,ae.jsx(LC,{...e});case"heatmap":return Dl().b[0][3]++,Dl().s[5]++,ae.jsx(LC,{...e});case"fill":return Dl().b[0][4]++,Dl().s[6]++,ae.jsx(LC,{...e});case"background":return Dl().b[0][5]++,Dl().s[7]++,ae.jsx(l7,{...e});case"line":return Dl().b[0][6]++,Dl().s[8]++,ae.jsx(gV,{...e});case"symbol":return Dl().b[0][7]++,Dl().s[9]++,ae.jsx(yV,{...e});case"circle":return Dl().b[0][8]++,Dl().s[10]++,ae.jsx(vV,{...e});default:return Dl().b[0][9]++,Dl().s[11]++,ae.jsx(zV,{...e})}}}function ti(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return ti=function(){return a},a}ti();function jV(n){ti().f[0]++;const e=(ti().s[0]++,{}),t=(ti().s[1]++,{});return ti().s[2]++,n.forEach(r=>{ti().f[1]++;const i=(ti().s[3]++,r.layer["source-layer"]);if(ti().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){ti().b[0][0]++,ti().s[5]++,t[r.layer.id]++;const o=(ti().s[6]++,e[i].find(a=>(ti().f[2]++,ti().s[7]++,a.layer.id===r.layer.id)));ti().s[8]++,o.counter=t[r.layer.id]}else ti().b[0][1]++,ti().s[9]++,e[i]=(ti().b[1][0]++,e[i]||(ti().b[1][1]++,[])),ti().s[10]++,e[i].push(r),ti().s[11]++,t[r.layer.id]=1}),ti().s[12]++,e}class TF extends Xn.Component{_getFeatureColor(e,t){if(ti().f[3]++,ti().s[13]++,e.layer.paint)ti().b[2][1]++;else{ti().b[2][0]++,ti().s[14]++;return}ti().s[15]++;try{const r=(ti().s[16]++,e.layer.paint);return ti().s[17]++,ti().b[4][0]++,"text-color"in r&&(ti().b[4][1]++,r["text-color"])?(ti().b[3][0]++,ti().s[18]++,String(r["text-color"])):(ti().b[3][1]++,ti().s[19]++,ti().b[6][0]++,"fill-color"in r&&(ti().b[6][1]++,r["fill-color"])?(ti().b[5][0]++,ti().s[20]++,String(r["fill-color"])):(ti().b[5][1]++,ti().s[21]++,ti().b[8][0]++,"line-color"in r&&(ti().b[8][1]++,r["line-color"])?(ti().b[7][0]++,ti().s[22]++,String(r["line-color"])):(ti().b[7][1]++,ti().s[23]++,ti().b[10][0]++,"fill-extrusion-color"in r&&(ti().b[10][1]++,r["fill-extrusion-color"])?(ti().b[9][0]++,ti().s[24]++,String(r["fill-extrusion-color"])):(ti().b[9][1]++,ti().s[25]++,"black"))))}catch(r){return ti().s[26]++,console.warn("Unable to get feature color, error:",r),ti().s[27]++,"black"}}render(){ti().f[4]++;const e=(ti().s[28]++,jV(this.props.features)),t=(ti().s[29]++,Object.keys(e).map(r=>{ti().f[5]++;const i=(ti().s[30]++,e[r].map((o,a)=>{ti().f[6]++;const s=(ti().s[31]++,this._getFeatureColor(o,this.props.zoom));return ti().s[32]++,ae.jsxs("div",{className:"maputnik-popup-layer",children:[ae.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:s}}),ae.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{ti().f[7]++,ti().s[33]++,this.props.onLayerSelect(o.layer.id)},children:[(ti().b[11][0]++,o.layer.type&&(ti().b[11][1]++,ae.jsx(kF,{type:o.layer.type,style:{width:14,height:14,paddingRight:3}}))),o.layer.id,(ti().b[12][0]++,o.counter&&(ti().b[12][1]++,ae.jsxs("span",{children:[" × ",o.counter]})))]})]},a)}));return ti().s[34]++,ae.jsxs("div",{children:[ae.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return ti().s[35]++,ae.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function Yi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Yi=function(){return a},a}Yi();function A7(n){return Yi().f[0]++,Yi().s[0]++,Yi().b[1][0]++,typeof n>"u"||(Yi().b[1][1]++,n===null)?(Yi().b[0][0]++,Yi().s[1]++,n):(Yi().b[0][1]++,Yi().s[2]++,n instanceof Date?(Yi().b[2][0]++,Yi().s[3]++,n.toLocaleString()):(Yi().b[2][1]++,Yi().s[4]++,Yi().b[4][0]++,typeof n=="object"||(Yi().b[4][1]++,typeof n=="number")||(Yi().b[4][2]++,typeof n=="string")?(Yi().b[3][0]++,Yi().s[5]++,n.toString()):(Yi().b[3][1]++,Yi().s[6]++,n)))}function n4(n,e){return Yi().f[1]++,Yi().s[7]++,ae.jsxs("tr",{children:[ae.jsx("td",{className:"maputnik-popup-table-cell",children:n}),ae.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function NV(n,e){return Yi().f[2]++,Yi().s[8]++,ae.jsxs(Xn.Fragment,{children:[ae.jsx("tr",{children:ae.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(Yi().b[5][0]++,n.inspectModeCounter&&(Yi().b[5][1]++,ae.jsxs("span",{children:[" × ",n.inspectModeCounter]})))]})}),n4("$type",n.geometry.type),n4("$id",A7(n.id)),Object.keys(n.properties).map(t=>{Yi().f[3]++;const r=(Yi().s[9]++,n.properties[t]);return Yi().s[10]++,n4(t,A7(r))})]},e)}function GV(n){Yi().f[4]++;const e=(Yi().s[11]++,[]);return Yi().s[12]++,n.forEach(t=>{Yi().f[5]++;const r=(Yi().s[13]++,e.findIndex(i=>(Yi().f[6]++,Yi().s[14]++,Yi().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&(Yi().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));Yi().s[15]++,r===-1?(Yi().b[7][0]++,Yi().s[16]++,e.push(t)):(Yi().b[7][1]++,Yi().s[17]++,"inspectModeCounter"in e[r]?(Yi().b[8][0]++,Yi().s[18]++,e[r].inspectModeCounter++):(Yi().b[8][1]++,Yi().s[19]++,e[r].inspectModeCounter=2))}),Yi().s[20]++,e}class WV extends Xn.Component{render(){Yi().f[7]++;const e=(Yi().s[21]++,GV(this.props.features));return Yi().s[22]++,ae.jsx("div",{className:"maputnik-feature-property-popup",children:ae.jsx("table",{className:"maputnik-popup-table",children:ae.jsx("tbody",{children:e.map(NV)})})})}}var r4={exports:{}},i4,c7;function PF(){return c7||(c7=1,i4={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),i4}var o4={exports:{}},s4,h7;function QV(){return h7||(h7=1,s4=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}),s4}var d7;function qV(){if(d7)return o4.exports;d7=1;var n=QV(),e=Array.prototype.concat,t=Array.prototype.slice,r=o4.exports=function(o){for(var a=[],s=0,h=o.length;s<h;s++){var g=o[s];n(g)?a=e.call(a,t.call(g)):a.push(g)}return a};return r.wrap=function(i){return function(){return i(r(arguments))}},o4.exports}var f7;function YV(){if(f7)return r4.exports;f7=1;var n=PF(),e=qV(),t=Object.hasOwnProperty,r=Object.create(null);for(var i in n)t.call(n,i)&&(r[n[i]]=i);var o=r4.exports={to:{},get:{}};o.get=function(h){var g=h.substring(0,3).toLowerCase(),b,B;switch(g){case"hsl":b=o.get.hsl(h),B="hsl";break;case"hwb":b=o.get.hwb(h),B="hwb";break;default:b=o.get.rgb(h),B="rgb";break}return b?{model:B,value:b}:null},o.get.rgb=function(h){if(!h)return null;var g=/^#([a-f0-9]{3,4})$/i,b=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,B=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,S=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,I=/^(\w+)$/,k=[0,0,0,1],U,z,Y;if(U=h.match(b)){for(Y=U[2],U=U[1],z=0;z<3;z++){var Q=z*2;k[z]=parseInt(U.slice(Q,Q+2),16)}Y&&(k[3]=parseInt(Y,16)/255)}else if(U=h.match(g)){for(U=U[1],Y=U[3],z=0;z<3;z++)k[z]=parseInt(U[z]+U[z],16);Y&&(k[3]=parseInt(Y+Y,16)/255)}else if(U=h.match(B)){for(z=0;z<3;z++)k[z]=parseInt(U[z+1],0);U[4]&&(U[5]?k[3]=parseFloat(U[4])*.01:k[3]=parseFloat(U[4]))}else if(U=h.match(S)){for(z=0;z<3;z++)k[z]=Math.round(parseFloat(U[z+1])*2.55);U[4]&&(U[5]?k[3]=parseFloat(U[4])*.01:k[3]=parseFloat(U[4]))}else return(U=h.match(I))?U[1]==="transparent"?[0,0,0,0]:t.call(n,U[1])?(k=n[U[1]],k[3]=1,k):null:null;for(z=0;z<3;z++)k[z]=a(k[z],0,255);return k[3]=a(k[3],0,1),k},o.get.hsl=function(h){if(!h)return null;var g=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,b=h.match(g);if(b){var B=parseFloat(b[4]),S=(parseFloat(b[1])%360+360)%360,I=a(parseFloat(b[2]),0,100),k=a(parseFloat(b[3]),0,100),U=a(isNaN(B)?1:B,0,1);return[S,I,k,U]}return null},o.get.hwb=function(h){if(!h)return null;var g=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,b=h.match(g);if(b){var B=parseFloat(b[4]),S=(parseFloat(b[1])%360+360)%360,I=a(parseFloat(b[2]),0,100),k=a(parseFloat(b[3]),0,100),U=a(isNaN(B)?1:B,0,1);return[S,I,k,U]}return null},o.to.hex=function(){var h=e(arguments);return"#"+s(h[0])+s(h[1])+s(h[2])+(h[3]<1?s(Math.round(h[3]*255)):"")},o.to.rgb=function(){var h=e(arguments);return h.length<4||h[3]===1?"rgb("+Math.round(h[0])+", "+Math.round(h[1])+", "+Math.round(h[2])+")":"rgba("+Math.round(h[0])+", "+Math.round(h[1])+", "+Math.round(h[2])+", "+h[3]+")"},o.to.rgb.percent=function(){var h=e(arguments),g=Math.round(h[0]/255*100),b=Math.round(h[1]/255*100),B=Math.round(h[2]/255*100);return h.length<4||h[3]===1?"rgb("+g+"%, "+b+"%, "+B+"%)":"rgba("+g+"%, "+b+"%, "+B+"%, "+h[3]+")"},o.to.hsl=function(){var h=e(arguments);return h.length<4||h[3]===1?"hsl("+h[0]+", "+h[1]+"%, "+h[2]+"%)":"hsla("+h[0]+", "+h[1]+"%, "+h[2]+"%, "+h[3]+")"},o.to.hwb=function(){var h=e(arguments),g="";return h.length>=4&&h[3]!==1&&(g=", "+h[3]),"hwb("+h[0]+", "+h[1]+"%, "+h[2]+"%"+g+")"},o.to.keyword=function(h){return r[h.slice(0,3)]};function a(h,g,b){return Math.min(Math.max(g,h),b)}function s(h){var g=Math.round(h).toString(16).toUpperCase();return g.length<2?"0"+g:g}return r4.exports}var a4,p7;function RF(){if(p7)return a4;p7=1;const n=PF(),e={};for(const i of Object.keys(n))e[n[i]]=i;const t={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};a4=t;for(const i of Object.keys(t)){if(!("channels"in t[i]))throw new Error("missing channels property: "+i);if(!("labels"in t[i]))throw new Error("missing channel labels property: "+i);if(t[i].labels.length!==t[i].channels)throw new Error("channel and label counts mismatch: "+i);const{channels:o,labels:a}=t[i];delete t[i].channels,delete t[i].labels,Object.defineProperty(t[i],"channels",{value:o}),Object.defineProperty(t[i],"labels",{value:a})}t.rgb.hsl=function(i){const o=i[0]/255,a=i[1]/255,s=i[2]/255,h=Math.min(o,a,s),g=Math.max(o,a,s),b=g-h;let B,S;g===h?B=0:o===g?B=(a-s)/b:a===g?B=2+(s-o)/b:s===g&&(B=4+(o-a)/b),B=Math.min(B*60,360),B<0&&(B+=360);const I=(h+g)/2;return g===h?S=0:I<=.5?S=b/(g+h):S=b/(2-g-h),[B,S*100,I*100]},t.rgb.hsv=function(i){let o,a,s,h,g;const b=i[0]/255,B=i[1]/255,S=i[2]/255,I=Math.max(b,B,S),k=I-Math.min(b,B,S),U=function(z){return(I-z)/6/k+1/2};return k===0?(h=0,g=0):(g=k/I,o=U(b),a=U(B),s=U(S),b===I?h=s-a:B===I?h=1/3+o-s:S===I&&(h=2/3+a-o),h<0?h+=1:h>1&&(h-=1)),[h*360,g*100,I*100]},t.rgb.hwb=function(i){const o=i[0],a=i[1];let s=i[2];const h=t.rgb.hsl(i)[0],g=1/255*Math.min(o,Math.min(a,s));return s=1-1/255*Math.max(o,Math.max(a,s)),[h,g*100,s*100]},t.rgb.cmyk=function(i){const o=i[0]/255,a=i[1]/255,s=i[2]/255,h=Math.min(1-o,1-a,1-s),g=(1-o-h)/(1-h)||0,b=(1-a-h)/(1-h)||0,B=(1-s-h)/(1-h)||0;return[g*100,b*100,B*100,h*100]};function r(i,o){return(i[0]-o[0])**2+(i[1]-o[1])**2+(i[2]-o[2])**2}return t.rgb.keyword=function(i){const o=e[i];if(o)return o;let a=1/0,s;for(const h of Object.keys(n)){const g=n[h],b=r(i,g);b<a&&(a=b,s=h)}return s},t.keyword.rgb=function(i){return n[i]},t.rgb.xyz=function(i){let o=i[0]/255,a=i[1]/255,s=i[2]/255;o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;const h=o*.4124+a*.3576+s*.1805,g=o*.2126+a*.7152+s*.0722,b=o*.0193+a*.1192+s*.9505;return[h*100,g*100,b*100]},t.rgb.lab=function(i){const o=t.rgb.xyz(i);let a=o[0],s=o[1],h=o[2];a/=95.047,s/=100,h/=108.883,a=a>.008856?a**(1/3):7.787*a+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,h=h>.008856?h**(1/3):7.787*h+16/116;const g=116*s-16,b=500*(a-s),B=200*(s-h);return[g,b,B]},t.hsl.rgb=function(i){const o=i[0]/360,a=i[1]/100,s=i[2]/100;let h,g,b;if(a===0)return b=s*255,[b,b,b];s<.5?h=s*(1+a):h=s+a-s*a;const B=2*s-h,S=[0,0,0];for(let I=0;I<3;I++)g=o+1/3*-(I-1),g<0&&g++,g>1&&g--,6*g<1?b=B+(h-B)*6*g:2*g<1?b=h:3*g<2?b=B+(h-B)*(2/3-g)*6:b=B,S[I]=b*255;return S},t.hsl.hsv=function(i){const o=i[0];let a=i[1]/100,s=i[2]/100,h=a;const g=Math.max(s,.01);s*=2,a*=s<=1?s:2-s,h*=g<=1?g:2-g;const b=(s+a)/2,B=s===0?2*h/(g+h):2*a/(s+a);return[o,B*100,b*100]},t.hsv.rgb=function(i){const o=i[0]/60,a=i[1]/100;let s=i[2]/100;const h=Math.floor(o)%6,g=o-Math.floor(o),b=255*s*(1-a),B=255*s*(1-a*g),S=255*s*(1-a*(1-g));switch(s*=255,h){case 0:return[s,S,b];case 1:return[B,s,b];case 2:return[b,s,S];case 3:return[b,B,s];case 4:return[S,b,s];case 5:return[s,b,B]}},t.hsv.hsl=function(i){const o=i[0],a=i[1]/100,s=i[2]/100,h=Math.max(s,.01);let g,b;b=(2-a)*s;const B=(2-a)*h;return g=a*h,g/=B<=1?B:2-B,g=g||0,b/=2,[o,g*100,b*100]},t.hwb.rgb=function(i){const o=i[0]/360;let a=i[1]/100,s=i[2]/100;const h=a+s;let g;h>1&&(a/=h,s/=h);const b=Math.floor(6*o),B=1-s;g=6*o-b,b&1&&(g=1-g);const S=a+g*(B-a);let I,k,U;switch(b){default:case 6:case 0:I=B,k=S,U=a;break;case 1:I=S,k=B,U=a;break;case 2:I=a,k=B,U=S;break;case 3:I=a,k=S,U=B;break;case 4:I=S,k=a,U=B;break;case 5:I=B,k=a,U=S;break}return[I*255,k*255,U*255]},t.cmyk.rgb=function(i){const o=i[0]/100,a=i[1]/100,s=i[2]/100,h=i[3]/100,g=1-Math.min(1,o*(1-h)+h),b=1-Math.min(1,a*(1-h)+h),B=1-Math.min(1,s*(1-h)+h);return[g*255,b*255,B*255]},t.xyz.rgb=function(i){const o=i[0]/100,a=i[1]/100,s=i[2]/100;let h,g,b;return h=o*3.2406+a*-1.5372+s*-.4986,g=o*-.9689+a*1.8758+s*.0415,b=o*.0557+a*-.204+s*1.057,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,b=b>.0031308?1.055*b**(1/2.4)-.055:b*12.92,h=Math.min(Math.max(0,h),1),g=Math.min(Math.max(0,g),1),b=Math.min(Math.max(0,b),1),[h*255,g*255,b*255]},t.xyz.lab=function(i){let o=i[0],a=i[1],s=i[2];o/=95.047,a/=100,s/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const h=116*a-16,g=500*(o-a),b=200*(a-s);return[h,g,b]},t.lab.xyz=function(i){const o=i[0],a=i[1],s=i[2];let h,g,b;g=(o+16)/116,h=a/500+g,b=g-s/200;const B=g**3,S=h**3,I=b**3;return g=B>.008856?B:(g-16/116)/7.787,h=S>.008856?S:(h-16/116)/7.787,b=I>.008856?I:(b-16/116)/7.787,h*=95.047,g*=100,b*=108.883,[h,g,b]},t.lab.lch=function(i){const o=i[0],a=i[1],s=i[2];let h;h=Math.atan2(s,a)*360/2/Math.PI,h<0&&(h+=360);const b=Math.sqrt(a*a+s*s);return[o,b,h]},t.lch.lab=function(i){const o=i[0],a=i[1],h=i[2]/360*2*Math.PI,g=a*Math.cos(h),b=a*Math.sin(h);return[o,g,b]},t.rgb.ansi16=function(i,o=null){const[a,s,h]=i;let g=o===null?t.rgb.hsv(i)[2]:o;if(g=Math.round(g/50),g===0)return 30;let b=30+(Math.round(h/255)<<2|Math.round(s/255)<<1|Math.round(a/255));return g===2&&(b+=60),b},t.hsv.ansi16=function(i){return t.rgb.ansi16(t.hsv.rgb(i),i[2])},t.rgb.ansi256=function(i){const o=i[0],a=i[1],s=i[2];return o===a&&a===s?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(a/255*5)+Math.round(s/255*5)},t.ansi16.rgb=function(i){let o=i%10;if(o===0||o===7)return i>50&&(o+=3.5),o=o/10.5*255,[o,o,o];const a=(~~(i>50)+1)*.5,s=(o&1)*a*255,h=(o>>1&1)*a*255,g=(o>>2&1)*a*255;return[s,h,g]},t.ansi256.rgb=function(i){if(i>=232){const g=(i-232)*10+8;return[g,g,g]}i-=16;let o;const a=Math.floor(i/36)/5*255,s=Math.floor((o=i%36)/6)/5*255,h=o%6/5*255;return[a,s,h]},t.rgb.hex=function(i){const a=(((Math.round(i[0])&255)<<16)+((Math.round(i[1])&255)<<8)+(Math.round(i[2])&255)).toString(16).toUpperCase();return"000000".substring(a.length)+a},t.hex.rgb=function(i){const o=i.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!o)return[0,0,0];let a=o[0];o[0].length===3&&(a=a.split("").map(B=>B+B).join(""));const s=parseInt(a,16),h=s>>16&255,g=s>>8&255,b=s&255;return[h,g,b]},t.rgb.hcg=function(i){const o=i[0]/255,a=i[1]/255,s=i[2]/255,h=Math.max(Math.max(o,a),s),g=Math.min(Math.min(o,a),s),b=h-g;let B,S;return b<1?B=g/(1-b):B=0,b<=0?S=0:h===o?S=(a-s)/b%6:h===a?S=2+(s-o)/b:S=4+(o-a)/b,S/=6,S%=1,[S*360,b*100,B*100]},t.hsl.hcg=function(i){const o=i[1]/100,a=i[2]/100,s=a<.5?2*o*a:2*o*(1-a);let h=0;return s<1&&(h=(a-.5*s)/(1-s)),[i[0],s*100,h*100]},t.hsv.hcg=function(i){const o=i[1]/100,a=i[2]/100,s=o*a;let h=0;return s<1&&(h=(a-s)/(1-s)),[i[0],s*100,h*100]},t.hcg.rgb=function(i){const o=i[0]/360,a=i[1]/100,s=i[2]/100;if(a===0)return[s*255,s*255,s*255];const h=[0,0,0],g=o%1*6,b=g%1,B=1-b;let S=0;switch(Math.floor(g)){case 0:h[0]=1,h[1]=b,h[2]=0;break;case 1:h[0]=B,h[1]=1,h[2]=0;break;case 2:h[0]=0,h[1]=1,h[2]=b;break;case 3:h[0]=0,h[1]=B,h[2]=1;break;case 4:h[0]=b,h[1]=0,h[2]=1;break;default:h[0]=1,h[1]=0,h[2]=B}return S=(1-a)*s,[(a*h[0]+S)*255,(a*h[1]+S)*255,(a*h[2]+S)*255]},t.hcg.hsv=function(i){const o=i[1]/100,a=i[2]/100,s=o+a*(1-o);let h=0;return s>0&&(h=o/s),[i[0],h*100,s*100]},t.hcg.hsl=function(i){const o=i[1]/100,s=i[2]/100*(1-o)+.5*o;let h=0;return s>0&&s<.5?h=o/(2*s):s>=.5&&s<1&&(h=o/(2*(1-s))),[i[0],h*100,s*100]},t.hcg.hwb=function(i){const o=i[1]/100,a=i[2]/100,s=o+a*(1-o);return[i[0],(s-o)*100,(1-s)*100]},t.hwb.hcg=function(i){const o=i[1]/100,s=1-i[2]/100,h=s-o;let g=0;return h<1&&(g=(s-h)/(1-h)),[i[0],h*100,g*100]},t.apple.rgb=function(i){return[i[0]/65535*255,i[1]/65535*255,i[2]/65535*255]},t.rgb.apple=function(i){return[i[0]/255*65535,i[1]/255*65535,i[2]/255*65535]},t.gray.rgb=function(i){return[i[0]/100*255,i[0]/100*255,i[0]/100*255]},t.gray.hsl=function(i){return[0,0,i[0]]},t.gray.hsv=t.gray.hsl,t.gray.hwb=function(i){return[0,100,i[0]]},t.gray.cmyk=function(i){return[0,0,0,i[0]]},t.gray.lab=function(i){return[i[0],0,0]},t.gray.hex=function(i){const o=Math.round(i[0]/100*255)&255,s=((o<<16)+(o<<8)+o).toString(16).toUpperCase();return"000000".substring(s.length)+s},t.rgb.gray=function(i){return[(i[0]+i[1]+i[2])/3/255*100]},a4}var l4,m7;function $V(){if(m7)return l4;m7=1;const n=RF();function e(){const o={},a=Object.keys(n);for(let s=a.length,h=0;h<s;h++)o[a[h]]={distance:-1,parent:null};return o}function t(o){const a=e(),s=[o];for(a[o].distance=0;s.length;){const h=s.pop(),g=Object.keys(n[h]);for(let b=g.length,B=0;B<b;B++){const S=g[B],I=a[S];I.distance===-1&&(I.distance=a[h].distance+1,I.parent=h,s.unshift(S))}}return a}function r(o,a){return function(s){return a(o(s))}}function i(o,a){const s=[a[o].parent,o];let h=n[a[o].parent][o],g=a[o].parent;for(;a[g].parent;)s.unshift(a[g].parent),h=r(n[a[g].parent][g],h),g=a[g].parent;return h.conversion=s,h}return l4=function(o){const a=t(o),s={},h=Object.keys(a);for(let g=h.length,b=0;b<g;b++){const B=h[b];a[B].parent!==null&&(s[B]=i(B,a))}return s},l4}var u4,g7;function VV(){if(g7)return u4;g7=1;const n=RF(),e=$V(),t={},r=Object.keys(n);function i(a){const s=function(...h){const g=h[0];return g==null?g:(g.length>1&&(h=g),a(h))};return"conversion"in a&&(s.conversion=a.conversion),s}function o(a){const s=function(...h){const g=h[0];if(g==null)return g;g.length>1&&(h=g);const b=a(h);if(typeof b=="object")for(let B=b.length,S=0;S<B;S++)b[S]=Math.round(b[S]);return b};return"conversion"in a&&(s.conversion=a.conversion),s}return r.forEach(a=>{t[a]={},Object.defineProperty(t[a],"channels",{value:n[a].channels}),Object.defineProperty(t[a],"labels",{value:n[a].labels});const s=e(a);Object.keys(s).forEach(g=>{const b=s[g];t[a][g]=o(b),t[a][g].raw=i(b)})}),u4=t,u4}var A4,y7;function HV(){if(y7)return A4;y7=1;const n=YV(),e=VV(),t=["keyword","gray","hex"],r={};for(const S of Object.keys(e))r[[...e[S].labels].sort().join("")]=S;const i={};function o(S,I){if(!(this instanceof o))return new o(S,I);if(I&&I in t&&(I=null),I&&!(I in e))throw new Error("Unknown model: "+I);let k,U;if(S==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(S instanceof o)this.model=S.model,this.color=[...S.color],this.valpha=S.valpha;else if(typeof S=="string"){const z=n.get(S);if(z===null)throw new Error("Unable to parse color from string: "+S);this.model=z.model,U=e[this.model].channels,this.color=z.value.slice(0,U),this.valpha=typeof z.value[U]=="number"?z.value[U]:1}else if(S.length>0){this.model=I||"rgb",U=e[this.model].channels;const z=Array.prototype.slice.call(S,0,U);this.color=B(z,U),this.valpha=typeof S[U]=="number"?S[U]:1}else if(typeof S=="number")this.model="rgb",this.color=[S>>16&255,S>>8&255,S&255],this.valpha=1;else{this.valpha=1;const z=Object.keys(S);"alpha"in S&&(z.splice(z.indexOf("alpha"),1),this.valpha=typeof S.alpha=="number"?S.alpha:0);const Y=z.sort().join("");if(!(Y in r))throw new Error("Unable to parse color from object: "+JSON.stringify(S));this.model=r[Y];const{labels:Q}=e[this.model],ne=[];for(k=0;k<Q.length;k++)ne.push(S[Q[k]]);this.color=B(ne)}if(i[this.model])for(U=e[this.model].channels,k=0;k<U;k++){const z=i[this.model][k];z&&(this.color[k]=z(this.color[k]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}o.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(S){let I=this.model in n.to?this:this.rgb();I=I.round(typeof S=="number"?S:1);const k=I.valpha===1?I.color:[...I.color,this.valpha];return n.to[I.model](k)},percentString(S){const I=this.rgb().round(typeof S=="number"?S:1),k=I.valpha===1?I.color:[...I.color,this.valpha];return n.to.rgb.percent(k)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const S={},{channels:I}=e[this.model],{labels:k}=e[this.model];for(let U=0;U<I;U++)S[k[U]]=this.color[U];return this.valpha!==1&&(S.alpha=this.valpha),S},unitArray(){const S=this.rgb().color;return S[0]/=255,S[1]/=255,S[2]/=255,this.valpha!==1&&S.push(this.valpha),S},unitObject(){const S=this.rgb().object();return S.r/=255,S.g/=255,S.b/=255,this.valpha!==1&&(S.alpha=this.valpha),S},round(S){return S=Math.max(S||0,0),new o([...this.color.map(s(S)),this.valpha],this.model)},alpha(S){return S!==void 0?new o([...this.color,Math.max(0,Math.min(1,S))],this.model):this.valpha},red:h("rgb",0,g(255)),green:h("rgb",1,g(255)),blue:h("rgb",2,g(255)),hue:h(["hsl","hsv","hsl","hwb","hcg"],0,S=>(S%360+360)%360),saturationl:h("hsl",1,g(100)),lightness:h("hsl",2,g(100)),saturationv:h("hsv",1,g(100)),value:h("hsv",2,g(100)),chroma:h("hcg",1,g(100)),gray:h("hcg",2,g(100)),white:h("hwb",1,g(100)),wblack:h("hwb",2,g(100)),cyan:h("cmyk",0,g(100)),magenta:h("cmyk",1,g(100)),yellow:h("cmyk",2,g(100)),black:h("cmyk",3,g(100)),x:h("xyz",0,g(95.047)),y:h("xyz",1,g(100)),z:h("xyz",2,g(108.833)),l:h("lab",0,g(100)),a:h("lab",1),b:h("lab",2),keyword(S){return S!==void 0?new o(S):e[this.model].keyword(this.color)},hex(S){return S!==void 0?new o(S):n.to.hex(this.rgb().round().color)},hexa(S){if(S!==void 0)return new o(S);const I=this.rgb().round().color;let k=Math.round(this.valpha*255).toString(16).toUpperCase();return k.length===1&&(k="0"+k),n.to.hex(I)+k},rgbNumber(){const S=this.rgb().color;return(S[0]&255)<<16|(S[1]&255)<<8|S[2]&255},luminosity(){const S=this.rgb().color,I=[];for(const[k,U]of S.entries()){const z=U/255;I[k]=z<=.04045?z/12.92:((z+.055)/1.055)**2.4}return .2126*I[0]+.7152*I[1]+.0722*I[2]},contrast(S){const I=this.luminosity(),k=S.luminosity();return I>k?(I+.05)/(k+.05):(k+.05)/(I+.05)},level(S){const I=this.contrast(S);return I>=7?"AAA":I>=4.5?"AA":""},isDark(){const S=this.rgb().color;return(S[0]*2126+S[1]*7152+S[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const S=this.rgb();for(let I=0;I<3;I++)S.color[I]=255-S.color[I];return S},lighten(S){const I=this.hsl();return I.color[2]+=I.color[2]*S,I},darken(S){const I=this.hsl();return I.color[2]-=I.color[2]*S,I},saturate(S){const I=this.hsl();return I.color[1]+=I.color[1]*S,I},desaturate(S){const I=this.hsl();return I.color[1]-=I.color[1]*S,I},whiten(S){const I=this.hwb();return I.color[1]+=I.color[1]*S,I},blacken(S){const I=this.hwb();return I.color[2]+=I.color[2]*S,I},grayscale(){const S=this.rgb().color,I=S[0]*.3+S[1]*.59+S[2]*.11;return o.rgb(I,I,I)},fade(S){return this.alpha(this.valpha-this.valpha*S)},opaquer(S){return this.alpha(this.valpha+this.valpha*S)},rotate(S){const I=this.hsl();let k=I.color[0];return k=(k+S)%360,k=k<0?360+k:k,I.color[0]=k,I},mix(S,I){if(!S||!S.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof S);const k=S.rgb(),U=this.rgb(),z=I===void 0?.5:I,Y=2*z-1,Q=k.alpha()-U.alpha(),ne=((Y*Q===-1?Y:(Y+Q)/(1+Y*Q))+1)/2,X=1-ne;return o.rgb(ne*k.red()+X*U.red(),ne*k.green()+X*U.green(),ne*k.blue()+X*U.blue(),k.alpha()*z+U.alpha()*(1-z))}};for(const S of Object.keys(e)){if(t.includes(S))continue;const{channels:I}=e[S];o.prototype[S]=function(...k){return this.model===S?new o(this):k.length>0?new o(k,S):new o([...b(e[this.model][S].raw(this.color)),this.valpha],S)},o[S]=function(...k){let U=k[0];return typeof U=="number"&&(U=B(k,I)),new o(U,S)}}function a(S,I){return Number(S.toFixed(I))}function s(S){return function(I){return a(I,S)}}function h(S,I,k){S=Array.isArray(S)?S:[S];for(const U of S)(i[U]||(i[U]=[]))[I]=k;return S=S[0],function(U){let z;return U!==void 0?(k&&(U=k(U)),z=this[S](),z.color[I]=U,z):(z=this[S]().color[I],k&&(z=k(z)),z)}}function g(S){return function(I){return Math.max(0,Math.min(S,I))}}function b(S){return Array.isArray(S)?S:[S]}function B(S,I){for(let k=0;k<I;k++)typeof S[k]!="number"&&(S[k]=0);return S}return A4=o,A4}var ZV=HV();const n6=Ka(ZV);function ea(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return ea=function(){return a},a}ea();class XV{constructor(){In(this,"_map",(ea().s[0]++,void 0));In(this,"_container",(ea().s[1]++,void 0));In(this,"_textEl",(ea().s[2]++,null));ea().f[0]++}onAdd(e){return ea().f[1]++,ea().s[3]++,this._map=e,ea().s[4]++,this._container=document.createElement("div"),ea().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",ea().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),ea().s[7]++,this.setLabel("Zoom:"),ea().s[8]++,this.addEventListeners(),ea().s[9]++,this._container}updateZoomLevel(){ea().f[2]++,ea().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){ea().f[3]++,ea().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,ea().s[12]++,this._textEl=this._container.querySelector("span"),ea().s[13]++,this.updateZoomLevel()}addEventListeners(){ea().f[4]++,ea().s[14]++,this._map.on("render",()=>(ea().f[5]++,ea().s[15]++,this.updateZoomLevel())),ea().s[16]++,this._map.on("zoomIn",()=>(ea().f[6]++,ea().s[17]++,this.updateZoomLevel())),ea().s[18]++,this._map.on("zoomOut",()=>(ea().f[7]++,ea().s[19]++,this.updateZoomLevel()))}onRemove(){ea().f[8]++,ea().s[20]++,this._container.parentNode.removeChild(this._container),ea().s[21]++,this._map=void 0}}function r6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function i6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function o6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function JV(n,e){const t=[],r=[],i=[];function o(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const s=n[a];if(!s||s.length===0){const h=o(a);r.push(r6(h.circle,a)),i.push(o6(h.line,a)),t.push(i6(h.polygon,h.polygonOutline,a))}else s.forEach(h=>{const g=o(h);r.push(r6(g.circle,a,h)),i.push(o6(g.line,a,h)),t.push(i6(g.polygon,g.polygonOutline,a,h))})}),t.concat(i).concat(r)}function eH(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(o=>{const a=n.sources[o];(a.type==="vector"||a.type==="geojson")&&(i[o]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const c4={polygonLayer:i6,lineLayer:o6,circleLayer:r6,generateInspectStyle:eH,generateColoredLayers:JV};function mo(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return mo=function(){return a},a}mo();function h4(n,e){return mo().f[0]++,mo().s[0]++,n.type==="circle"?(mo().b[0][0]++,mo().s[1]++,n.paint["circle-radius"]=3):(mo().b[0][1]++,mo().s[2]++,n.type==="line"?(mo().b[1][0]++,mo().s[3]++,n.paint["line-width"]=2):mo().b[1][1]++),mo().s[4]++,"filter"in e?(mo().b[2][0]++,mo().s[5]++,n.filter=e.filter):(mo().b[2][1]++,mo().s[6]++,delete n.filter),mo().s[7]++,n.id=n.id+"_highlight",mo().s[8]++,n}function tH(n){if(mo().f[1]++,mo().s[9]++,mo().b[4][0]++,!n||(mo().b[4][1]++,n.type==="background")||(mo().b[4][2]++,n.type==="raster"))return mo().b[3][0]++,mo().s[10]++,null;mo().b[3][1]++;const e=(mo().s[11]++,mo().b[5][0]++,n["source-layer"]||(mo().b[5][1]++,"")),t=(mo().s[12]++,OF.brightColor(e,1));return mo().s[13]++,mo().b[7][0]++,n.type==="fill"||(mo().b[7][1]++,n.type==="fill-extrusion")?(mo().b[6][0]++,mo().s[14]++,h4(c4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(mo().b[6][1]++,mo().s[15]++,mo().b[9][0]++,n.type==="symbol"||(mo().b[9][1]++,n.type==="circle")?(mo().b[8][0]++,mo().s[16]++,h4(c4.circleLayer(t,n.source,n["source-layer"]),n)):(mo().b[8][1]++,mo().s[17]++,n.type==="line"?(mo().b[10][0]++,mo().s[18]++,h4(c4.lineLayer(t,n.source,n["source-layer"]),n)):(mo().b[10][1]++,mo().s[19]++,null)))}function wB(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return wB=function(){return a},a}wB();wB().s[0]++;_v.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function d4(n,e,t,r){return new(t||(t=Promise))(function(i,o){function a(g){try{h(r.next(g))}catch(b){o(b)}}function s(g){try{h(r.throw(g))}catch(b){o(b)}}function h(g){g.done?i(g.value):new t(function(b){b(g.value)}).then(a,s)}h((r=r.apply(n,e||[])).next())})}var FC=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function ux(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var f4,v7;function KF(){if(v7)return f4;v7=1,f4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var o in i)n.call(i,o)&&(t[o]=i[o])}return t}return f4}var p4={exports:{}},_7;function nH(){return _7||(_7=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(o){return t.test(r,o)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,o){o=o||{};var a=0,s=[],h=i.length,g=0,b=0,B=o.pre||"",S=o.post||"",I=o.caseSensitive&&i||i.toLowerCase(),k;r=o.caseSensitive&&r||r.toLowerCase();for(var U=0;U<h;U++)k=i[U],I[U]===r[a]?(k=B+k+S,a+=1,b+=1+b):b=0,g+=b,s[s.length]=k;return a===r.length?(g=I===r?1/0:g,{rendered:s.join(""),score:g}):null},t.filter=function(r,i,o){return!i||i.length===0?[]:typeof r!="string"?i:(o=o||{},i.reduce(function(a,s,h,g){var b=s;o.extract&&(b=o.extract(s));var B=t.match(r,b,o);return B!=null&&(a[a.length]={string:B.rendered,score:B.score,index:h,original:s}),a},[]).sort(function(a,s){var h=s.score-a.score;return h||a.index-s.index}))}})()}(p4)),p4.exports}var m4,C7;function rH(){if(C7)return m4;C7=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},m4=n,m4}var g4,b7;function iH(){if(b7)return g4;b7=1;var n=KF(),e=nH(),t=rH(),r=function(i,o,a){return a=a||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},a),this.el=i,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(s){this.handleKeyUp(s.keyCode,s)}).bind(this),!1),this.el.addEventListener("keydown",(function(s){this.handleKeyDown(s)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(s){this.handlePaste(s)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,o){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(o){for(var a=0;a<o.length&&(this.list.add(o[a]),a!==this.options.limit-1);a++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,o){return i.indexOf(o)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var o={pre:"<strong>",post:"</strong>",extract:(function(s){return this.getItemValue(s)}).bind(this)},a;this.options.filter?(a=e.filter(this.query,this.data,o),a=a.map((function(s){return{original:s.original,string:this.render(s.original,s.string)}}).bind(this))):a=this.data.map((function(s){var h=this.render(s);return{original:s,string:h}}).bind(this)),i(a)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,o){if(o)return o;for(var a=i.original?this.getItemValue(i.original):this.getItemValue(i),s=this.normalize(a),h=s.lastIndexOf(this.query);h>-1;){var g=h+this.query.length;a=a.slice(0,h)+"<strong>"+a.slice(h,g)+"</strong>"+a.slice(g),h=s.slice(0,h).lastIndexOf(this.query)}return a},r.prototype.renderError=function(i){this.list.drawError(i)},g4=r,g4}var y4,x7;function oH(){if(x7)return y4;x7=1;var n=iH();return y4=n,typeof window<"u"&&(window.Suggestions=n),y4}var sH=oH(),aH=ux(sH),xb={exports:{}},lH=xb.exports,w7;function uH(){return w7||(w7=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(lH,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(h){return h.match(t)||[]}function i(h){return r(h).filter(function(g,b){return g&&b})}function o(h){return h=r(h),{language:h[1]||e,extlang:h[2]||e,script:h[3]||e,region:h[4]||e}}function a(h,g,b){Object.defineProperty(h,g,{value:b,enumerable:!0})}function s(h,g,b){function B(S){return r(S)[h]||e}a(B,"pattern",g),a(o,b,B)}return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),a(o,"split",i),o})}(xb)),xb.exports}var AH=uH(),cH=ux(AH),v4,M7;function hH(){if(M7)return v4;M7=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,h=typeof FC=="object"&&FC&&FC.Object===Object&&FC,g=typeof self=="object"&&self&&self.Object===Object&&self,b=h||g||Function("return this")(),B=Object.prototype,S=B.toString,I=Math.max,k=Math.min,U=function(){return b.Date.now()};function z(q,J,N){var ie,he,ce,we,pe,Ce,Pe=0,de=!1,rt=!1,ze=!0;if(typeof q!="function")throw new TypeError(n);J=X(J)||0,Y(N)&&(de=!!N.leading,rt="maxWait"in N,ce=rt?I(X(N.maxWait)||0,J):ce,ze="trailing"in N?!!N.trailing:ze);function Qe(Lt){var De=ie,ke=he;return ie=he=void 0,Pe=Lt,we=q.apply(ke,De),we}function ut(Lt){return Pe=Lt,pe=setTimeout(st,J),de?Qe(Lt):we}function Te(Lt){var De=Lt-Ce,ke=Lt-Pe,Oe=J-De;return rt?k(Oe,ce-ke):Oe}function Ue(Lt){var De=Lt-Ce,ke=Lt-Pe;return Ce===void 0||De>=J||De<0||rt&&ke>=ce}function st(){var Lt=U();if(Ue(Lt))return wt(Lt);pe=setTimeout(st,Te(Lt))}function wt(Lt){return pe=void 0,ze&&ie?Qe(Lt):(ie=he=void 0,we)}function mt(){pe!==void 0&&clearTimeout(pe),Pe=0,ie=Ce=he=pe=void 0}function ft(){return pe===void 0?we:wt(U())}function Ut(){var Lt=U(),De=Ue(Lt);if(ie=arguments,he=this,Ce=Lt,De){if(pe===void 0)return ut(Ce);if(rt)return pe=setTimeout(st,J),Qe(Ce)}return pe===void 0&&(pe=setTimeout(st,J)),we}return Ut.cancel=mt,Ut.flush=ft,Ut}function Y(q){var J=typeof q;return!!q&&(J=="object"||J=="function")}function Q(q){return!!q&&typeof q=="object"}function ne(q){return typeof q=="symbol"||Q(q)&&S.call(q)==t}function X(q){if(typeof q=="number")return q;if(ne(q))return e;if(Y(q)){var J=typeof q.valueOf=="function"?q.valueOf():q;q=Y(J)?J+"":J}if(typeof q!="string")return q===0?q:+q;q=q.replace(r,"");var N=o.test(q);return N||a.test(q)?s(q.slice(2),N?2:8):i.test(q)?e:+q}return v4=z,v4}var dH=hH(),fH=ux(dH),pH=KF(),Jf=ux(pH),UC={exports:{}},S7;function mH(){if(S7)return UC.exports;S7=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(q,J,N){return Function.prototype.apply.call(q,J,N)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(q){return Object.getOwnPropertyNames(q).concat(Object.getOwnPropertySymbols(q))}:t=function(q){return Object.getOwnPropertyNames(q)};function r(X){console&&console.warn&&console.warn(X)}var i=Number.isNaN||function(q){return q!==q};function o(){o.init.call(this)}UC.exports=o,UC.exports.once=Y,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(X){if(typeof X!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof X)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(X){if(typeof X!="number"||X<0||i(X))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+X+".");a=X}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(q){if(typeof q!="number"||q<0||i(q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+q+".");return this._maxListeners=q,this};function h(X){return X._maxListeners===void 0?o.defaultMaxListeners:X._maxListeners}o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(q){for(var J=[],N=1;N<arguments.length;N++)J.push(arguments[N]);var ie=q==="error",he=this._events;if(he!==void 0)ie=ie&&he.error===void 0;else if(!ie)return!1;if(ie){var ce;if(J.length>0&&(ce=J[0]),ce instanceof Error)throw ce;var we=new Error("Unhandled error."+(ce?" ("+ce.message+")":""));throw we.context=ce,we}var pe=he[q];if(pe===void 0)return!1;if(typeof pe=="function")e(pe,this,J);else for(var Ce=pe.length,Pe=k(pe,Ce),N=0;N<Ce;++N)e(Pe[N],this,J);return!0};function g(X,q,J,N){var ie,he,ce;if(s(J),he=X._events,he===void 0?(he=X._events=Object.create(null),X._eventsCount=0):(he.newListener!==void 0&&(X.emit("newListener",q,J.listener?J.listener:J),he=X._events),ce=he[q]),ce===void 0)ce=he[q]=J,++X._eventsCount;else if(typeof ce=="function"?ce=he[q]=N?[J,ce]:[ce,J]:N?ce.unshift(J):ce.push(J),ie=h(X),ie>0&&ce.length>ie&&!ce.warned){ce.warned=!0;var we=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");we.name="MaxListenersExceededWarning",we.emitter=X,we.type=q,we.count=ce.length,r(we)}return X}o.prototype.addListener=function(q,J){return g(this,q,J,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(q,J){return g(this,q,J,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(X,q,J){var N={fired:!1,wrapFn:void 0,target:X,type:q,listener:J},ie=b.bind(N);return ie.listener=J,N.wrapFn=ie,ie}o.prototype.once=function(q,J){return s(J),this.on(q,B(this,q,J)),this},o.prototype.prependOnceListener=function(q,J){return s(J),this.prependListener(q,B(this,q,J)),this},o.prototype.removeListener=function(q,J){var N,ie,he,ce,we;if(s(J),ie=this._events,ie===void 0)return this;if(N=ie[q],N===void 0)return this;if(N===J||N.listener===J)--this._eventsCount===0?this._events=Object.create(null):(delete ie[q],ie.removeListener&&this.emit("removeListener",q,N.listener||J));else if(typeof N!="function"){for(he=-1,ce=N.length-1;ce>=0;ce--)if(N[ce]===J||N[ce].listener===J){we=N[ce].listener,he=ce;break}if(he<0)return this;he===0?N.shift():U(N,he),N.length===1&&(ie[q]=N[0]),ie.removeListener!==void 0&&this.emit("removeListener",q,we||J)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(q){var J,N,ie;if(N=this._events,N===void 0)return this;if(N.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):N[q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete N[q]),this;if(arguments.length===0){var he=Object.keys(N),ce;for(ie=0;ie<he.length;++ie)ce=he[ie],ce!=="removeListener"&&this.removeAllListeners(ce);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(J=N[q],typeof J=="function")this.removeListener(q,J);else if(J!==void 0)for(ie=J.length-1;ie>=0;ie--)this.removeListener(q,J[ie]);return this};function S(X,q,J){var N=X._events;if(N===void 0)return[];var ie=N[q];return ie===void 0?[]:typeof ie=="function"?J?[ie.listener||ie]:[ie]:J?z(ie):k(ie,ie.length)}o.prototype.listeners=function(q){return S(this,q,!0)},o.prototype.rawListeners=function(q){return S(this,q,!1)},o.listenerCount=function(X,q){return typeof X.listenerCount=="function"?X.listenerCount(q):I.call(X,q)},o.prototype.listenerCount=I;function I(X){var q=this._events;if(q!==void 0){var J=q[X];if(typeof J=="function")return 1;if(J!==void 0)return J.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function k(X,q){for(var J=new Array(q),N=0;N<q;++N)J[N]=X[N];return J}function U(X,q){for(;q+1<X.length;q++)X[q]=X[q+1];X.pop()}function z(X){for(var q=new Array(X.length),J=0;J<q.length;++J)q[J]=X[J].listener||X[J];return q}function Y(X,q){return new Promise(function(J,N){function ie(ce){X.removeListener(q,he),N(ce)}function he(){typeof X.removeListener=="function"&&X.removeListener("error",ie),J([].slice.call(arguments))}ne(X,q,he,{once:!0}),q!=="error"&&Q(X,ie,{once:!0})})}function Q(X,q,J){typeof X.on=="function"&&ne(X,"error",q,J)}function ne(X,q,J,N){if(typeof X.on=="function")N.once?X.once(q,J):X.on(q,J);else if(typeof X.addEventListener=="function")X.addEventListener(q,function ie(he){N.once&&X.removeEventListener(q,ie),J(he)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof X)}return UC.exports}var gH=mH();const E7={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},yH={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},vH=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class _H{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const o=r.text,a=o.toLowerCase().indexOf(this.query.toLowerCase()),s=this.query.length,h=o.substring(0,a),g=o.substring(a,a+s),b=o.substring(a+s);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+h+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+g+"</span>"+b+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new gH.EventEmitter,this.options=Jf({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=r.onAdd();i.appendChild(o)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",fH(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new aH(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const o=i.firstChild,a=o.firstChild;r.appendChild(a)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const o=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!(o?o.value:""))return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(o.value);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(o.value,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}o.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(o.value)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&E7[e.properties.short_code])t=Jf({},this.options.flyTo),this._map&&this._map.fitBounds(E7[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=Jf({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=Jf({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return d4(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),a=this._createGeocodeRequest(o,t,r,i),s=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const h=yield a;yield this._handleGeocodeResponse(h,o,t,r,s)}catch(h){this._handleGeocodeErrorResponse(h,s)}return a})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&vH.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,o){return d4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let a={};e?a=e:a={type:"FeatureCollection",features:[]},a.config=t,this.fresh&&(this.fresh=!1),a.features=a.features?o.concat(a.features):o;const s=this.options.externalGeocoder?this.options.externalGeocoder(r,a.features,t)||Promise.resolve([]):Promise.resolve([]);try{const g=yield s;a.features=a.features?g.concat(a.features):g}catch{}this.options.filter&&a.features.length&&(a.features=a.features.filter(this.options.filter));let h=[];"suggestions"in a?h=a.suggestions:"place"in a?h=[a.place]:h=a.features,h.length?(this._clearEl.style.display="block",this._typeahead.update(h),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(a.features.length>0||"place"in a)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",a))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return d4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){this._renderMessage("<div class='maplibre-gl-geocoder--error'>There was an error reaching the server</div>")}_renderNoResults(){this._renderMessage("<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_getPlaceholderText(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){const e=this.options.language.split(",")[0],t=cH.language(e),r=yH[t];if(r)return r}return"Search"}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=Jf({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const o of e)i.extend(o.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=Jf({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const a=Jf({},{},this.options.popup);i=new this._maplibregl.Popup(a).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=Jf({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),r=Jf(r,{element:o}));const a=new this._maplibregl.Marker(Jf({},r,{element:o}));let s;if(this.options.popup){const g=Jf({},{},this.options.popup);s=new this._maplibregl.Popup(g).setHTML(this.options.popupRender(i))}i.center?(a.setLngLat(i.center).addTo(this._map),this.options.popup&&a.setPopup(s)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(a.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&a.setPopup(s)),this.resultMarkers.push(a)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Mn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="3c5cfb4afb5483770f6919f2f66d47734075cb05",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:20,column:36}},1:{start:{line:21,column:2},end:{line:21,column:19}},2:{start:{line:24,column:26},end:{line:30,column:3}},3:{start:{line:31,column:16},end:{line:31,column:55}},4:{start:{line:32,column:2},end:{line:34,column:3}},5:{start:{line:33,column:4},end:{line:33,column:30}},6:{start:{line:35,column:18},end:{line:35,column:20}},7:{start:{line:36,column:2},end:{line:41,column:5}},8:{start:{line:37,column:19},end:{line:37,column:53}},9:{start:{line:38,column:4},end:{line:40,column:5}},10:{start:{line:39,column:6},end:{line:39,column:33}},11:{start:{line:42,column:23},end:{line:46,column:3}},12:{start:{line:47,column:2},end:{line:47,column:22}},13:{start:{line:50,column:24},end:{line:60,column:3}},14:{start:{line:61,column:14},end:{line:61,column:18}},15:{start:{line:63,column:4},end:{line:63,column:17}},16:{start:{line:64,column:4},end:{line:69,column:6}},17:{start:{line:70,column:4},end:{line:72,column:7}},18:{start:{line:71,column:6},end:{line:71,column:25}},19:{start:{line:75,column:17},end:{line:75,column:22}},20:{start:{line:76,column:4},end:{line:79,column:5}},21:{start:{line:77,column:6},end:{line:77,column:132}},22:{start:{line:80,column:4},end:{line:80,column:18}},23:{start:{line:83,column:16},end:{line:83,column:30}},24:{start:{line:84,column:28},end:{line:84,column:79}},25:{start:{line:85,column:4},end:{line:90,column:5}},26:{start:{line:86,column:6},end:{line:86,column:52}},27:{start:{line:87,column:6},end:{line:87,column:70}},28:{start:{line:88,column:6},end:{line:88,column:70}},29:{start:{line:89,column:6},end:{line:89,column:76}},30:{start:{line:91,column:4},end:{line:93,column:5}},31:{start:{line:92,column:6},end:{line:92,column:43}},32:{start:{line:94,column:4},end:{line:99,column:5}},33:{start:{line:95,column:6},end:{line:95,column:59}},34:{start:{line:96,column:6},end:{line:98,column:14}},35:{start:{line:97,column:8},end:{line:97,column:36}},36:{start:{line:102,column:20},end:{line:111,column:5}},37:{start:{line:112,column:16},end:{line:112,column:43}},38:{start:{line:113,column:26},end:{line:117,column:5}},39:{start:{line:114,column:21},end:{line:114,column:36}},40:{start:{line:115,column:19},end:{line:115,column:32}},41:{start:{line:116,column:6},end:{line:116,column:44}},42:{start:{line:118,column:4},end:{line:118,column:20}},43:{start:{line:119,column:4},end:{line:119,column:56}},44:{start:{line:120,column:4},end:{line:120,column:56}},45:{start:{line:121,column:4},end:{line:121,column:62}},46:{start:{line:122,column:19},end:{line:122,column:41}},47:{start:{line:123,column:24},end:{line:123,column:41}},48:{start:{line:124,column:4},end:{line:124,column:45}},49:{start:{line:125,column:16},end:{line:125,column:74}},50:{start:{line:126,column:4},end:{line:126,column:37}},51:{start:{line:127,column:20},end:{line:127,column:49}},52:{start:{line:128,column:20},end:{line:148,column:6}},53:{start:{line:138,column:8},end:{line:138,column:82}},54:{start:{line:140,column:62},end:{line:140,column:141}},55:{start:{line:142,column:8},end:{line:146,column:9}},56:{start:{line:143,column:10},end:{line:143,column:108}},57:{start:{line:145,column:10},end:{line:145,column:160}},58:{start:{line:149,column:4},end:{line:149,column:28}},59:{start:{line:150,column:4},end:{line:158,column:7}},60:{start:{line:151,column:6},end:{line:157,column:9}},61:{start:{line:159,column:4},end:{line:164,column:7}},62:{start:{line:160,column:6},end:{line:160,column:40}},63:{start:{line:160,column:33},end:{line:160,column:40}},64:{start:{line:161,column:6},end:{line:163,column:9}},65:{start:{line:165,column:4},end:{line:167,column:7}},66:{start:{line:166,column:6},end:{line:166,column:30}},67:{start:{line:168,column:4},end:{line:172,column:7}},68:{start:{line:169,column:6},end:{line:171,column:9}},69:{start:{line:173,column:4},end:{line:173,column:37}},70:{start:{line:174,column:4},end:{line:174,column:37}},71:{start:{line:176,column:22},end:{line:179,column:3}},72:{start:{line:177,column:18},end:{line:177,column:82}},73:{start:{line:177,column:66},end:{line:177,column:81}},74:{start:{line:178,column:4},end:{line:178,column:36}},75:{start:{line:181,column:27},end:{line:214,column:5}},76:{start:{line:183,column:25},end:{line:183,column:27}},77:{start:{line:184,column:8},end:{line:209,column:9}},78:{start:{line:185,column:26},end:{line:185,column:138}},79:{start:{line:186,column:27},end:{line:186,column:47}},80:{start:{line:187,column:26},end:{line:187,column:47}},81:{start:{line:188,column:10},end:{line:206,column:11}},82:{start:{line:189,column:27},end:{line:192,column:13}},83:{start:{line:193,column:26},end:{line:204,column:13}},84:{start:{line:205,column:12},end:{line:205,column:33}},85:{start:{line:208,column:10},end:{line:208,column:69}},86:{start:{line:210,column:8},end:{line:212,column:10}},87:{start:{line:215,column:21},end:{line:218,column:6}},88:{start:{line:219,column:4},end:{line:219,column:41}},89:{start:{line:220,column:4},end:{line:220,column:20}},90:{start:{line:223,column:14},end:{line:223,column:26}},91:{start:{line:224,column:4},end:{line:224,column:53}},92:{start:{line:225,column:4},end:{line:225,column:49}},93:{start:{line:226,column:4},end:{line:235,column:6}},94:{start:{line:232,column:20},end:{line:232,column:38}},95:{start:{line:238,column:22},end:{line:238,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:19,column:9},end:{line:19,column:20}},loc:{start:{line:19,column:39},end:{line:22,column:1}},line:19},1:{name:"buildInspectStyle",decl:{start:{line:23,column:9},end:{line:23,column:26}},loc:{start:{line:23,column:78},end:{line:48,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:36,column:48},end:{line:36,column:49}},loc:{start:{line:36,column:62},end:{line:41,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:51,column:17},end:{line:51,column:18}},loc:{start:{line:51,column:23},end:{line:52,column:5}},line:51},4:{name:"(anonymous_4)",decl:{start:{line:53,column:18},end:{line:53,column:19}},loc:{start:{line:53,column:24},end:{line:54,column:5}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:55,column:19},end:{line:55,column:20}},loc:{start:{line:55,column:25},end:{line:56,column:5}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:57,column:14},end:{line:57,column:15}},loc:{start:{line:57,column:20},end:{line:58,column:5}},line:57},7:{name:"(anonymous_7)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:21},end:{line:73,column:3}},line:62},8:{name:"(anonymous_8)",decl:{start:{line:70,column:34},end:{line:70,column:35}},loc:{start:{line:70,column:40},end:{line:72,column:5}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:46},end:{line:81,column:3}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:100,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:96,column:17},end:{line:96,column:18}},loc:{start:{line:96,column:23},end:{line:98,column:7}},line:96},12:{name:"(anonymous_12)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:22},end:{line:175,column:3}},line:101},13:{name:"(anonymous_13)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:32},end:{line:117,column:5}},line:113},14:{name:"(anonymous_14)",decl:{start:{line:137,column:24},end:{line:137,column:25}},loc:{start:{line:137,column:44},end:{line:139,column:7}},line:137},15:{name:"(anonymous_15)",decl:{start:{line:140,column:25},end:{line:140,column:26}},loc:{start:{line:140,column:62},end:{line:140,column:141}},line:140},16:{name:"(anonymous_16)",decl:{start:{line:141,column:19},end:{line:141,column:20}},loc:{start:{line:141,column:33},end:{line:147,column:7}},line:141},17:{name:"(anonymous_17)",decl:{start:{line:150,column:25},end:{line:150,column:26}},loc:{start:{line:150,column:31},end:{line:158,column:5}},line:150},18:{name:"(anonymous_18)",decl:{start:{line:159,column:19},end:{line:159,column:20}},loc:{start:{line:159,column:26},end:{line:164,column:5}},line:159},19:{name:"(anonymous_19)",decl:{start:{line:165,column:20},end:{line:165,column:21}},loc:{start:{line:165,column:27},end:{line:167,column:5}},line:165},20:{name:"(anonymous_20)",decl:{start:{line:168,column:19},end:{line:168,column:20}},loc:{start:{line:168,column:27},end:{line:172,column:5}},line:168},21:{name:"(anonymous_21)",decl:{start:{line:176,column:22},end:{line:176,column:23}},loc:{start:{line:176,column:30},end:{line:179,column:3}},line:176},22:{name:"(anonymous_22)",decl:{start:{line:177,column:55},end:{line:177,column:56}},loc:{start:{line:177,column:66},end:{line:177,column:81}},line:177},23:{name:"(anonymous_23)",decl:{start:{line:180,column:2},end:{line:180,column:3}},loc:{start:{line:180,column:20},end:{line:221,column:3}},line:180},24:{name:"(anonymous_24)",decl:{start:{line:182,column:22},end:{line:182,column:23}},loc:{start:{line:182,column:40},end:{line:213,column:7}},line:182},25:{name:"(anonymous_25)",decl:{start:{line:222,column:2},end:{line:222,column:3}},loc:{start:{line:222,column:11},end:{line:236,column:3}},line:222},26:{name:"(anonymous_26)",decl:{start:{line:232,column:13},end:{line:232,column:14}},loc:{start:{line:232,column:20},end:{line:232,column:38}},line:232}},branchMap:{0:{loc:{start:{line:32,column:2},end:{line:34,column:3}},type:"if",locations:[{start:{line:32,column:2},end:{line:34,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},1:{loc:{start:{line:38,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:38,column:8},end:{line:38,column:64}},type:"binary-expr",locations:[{start:{line:38,column:8},end:{line:38,column:32}},{start:{line:38,column:36},end:{line:38,column:64}}],line:38},3:{loc:{start:{line:77,column:15},end:{line:77,column:131}},type:"binary-expr",locations:[{start:{line:77,column:15},end:{line:77,column:71}},{start:{line:77,column:75},end:{line:77,column:131}}],line:77},4:{loc:{start:{line:85,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:85,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:85},5:{loc:{start:{line:91,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:93,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},6:{loc:{start:{line:91,column:8},end:{line:91,column:98}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:98}}],line:91},7:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:59}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:26}},{start:{line:94,column:30},end:{line:94,column:59}}],line:94},9:{loc:{start:{line:142,column:8},end:{line:146,column:9}},type:"if",locations:[{start:{line:142,column:8},end:{line:146,column:9}},{start:{line:144,column:15},end:{line:146,column:9}}],line:142},10:{loc:{start:{line:160,column:6},end:{line:160,column:40}},type:"if",locations:[{start:{line:160,column:6},end:{line:160,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA4L6B;AA5L7B,OAAO,WAAuB;AAC9B,OAAO,cAAc;AACrB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AAEpB,SAAS,YAAY,OAAoB,WAA4C;AACnF,WAAS,OAAO,OAAO,SAAS;AAChC,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,GAAG;AAAA,IAEX;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,QAAI,WAAW,KAAK,aAAa,GAAG;AAEpC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO,IAAI,WAAW,MAAM;AAAA,QAC1B,cAAc;AAAA,MAChB,CAAC;AAAA,MACD,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO,YAAY,oBAAC,qCAAkC,UAAoB,GAAI,OAAO;AAAA,QACvF,OAAO;AACL,iBAAO,YAAY,oBAAC,2BAAwB,UAAoB,eAAe,KAAK,mBAAmB,MAAM,KAAK,MAAM,MAAM,GAAI,OAAO;AAAA,QAC3I;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3c5cfb4afb5483770f6919f2f66d47734075cb05"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Mn=function(){return a},a}Mn();function B7(n,e){return Mn().f[0]++,Mn().s[0]++,U$.render(n,e),Mn().s[1]++,e}function CH(n,e,t){Mn().f[1]++;const r=(Mn().s[2]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(Mn().s[3]++,tH(t));Mn().s[4]++,i?(Mn().b[0][0]++,Mn().s[5]++,e.push(i)):Mn().b[0][1]++;const o=(Mn().s[6]++,{});Mn().s[7]++,Object.keys(n.sources).forEach(s=>{Mn().f[2]++;const h=(Mn().s[8]++,n.sources[s]);Mn().s[9]++,Mn().b[2][0]++,h.type!=="raster"&&(Mn().b[2][1]++,h.type!=="raster-dem")?(Mn().b[1][0]++,Mn().s[10]++,o[s]=h):Mn().b[1][1]++});const a=(Mn().s[11]++,{...n,sources:o,layers:[r].concat(e)});return Mn().s[12]++,a}class DF extends Xn.Component{constructor(t){Mn().f[7]++,Mn().s[15]++;super(t);In(this,"container",(Mn().s[14]++,null));In(this,"onLayerSelectById",(Mn().s[71]++,t=>{Mn().f[21]++;const r=(Mn().s[72]++,this.props.mapStyle.layers.findIndex(i=>(Mn().f[22]++,Mn().s[73]++,i.id===t)));Mn().s[74]++,this.props.onLayerSelect(r)}));Mn().s[16]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Mn().s[17]++,Dc.on("languageChanged",()=>{Mn().f[8]++,Mn().s[18]++,this.forceUpdate()})}shouldComponentUpdate(t,r){Mn().f[9]++;let i=(Mn().s[19]++,!1);Mn().s[20]++;try{Mn().s[21]++,i=(Mn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(t)||(Mn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(r)))}catch{}return Mn().s[22]++,i}componentDidUpdate(){var i,o,a;Mn().f[10]++;const t=(Mn().s[23]++,this.state.map),r=(Mn().s[24]++,this.props.replaceAccessTokens(this.props.mapStyle));Mn().s[25]++,t?(Mn().b[4][0]++,Mn().s[26]++,t.setStyle(r,{diff:!0}),Mn().s[27]++,t.showTileBoundaries=(i=this.props.options)==null?void 0:i.showTileBoundaries,Mn().s[28]++,t.showCollisionBoxes=(o=this.props.options)==null?void 0:o.showCollisionBoxes,Mn().s[29]++,t.showOverdrawInspector=(a=this.props.options)==null?void 0:a.showOverdrawInspector):Mn().b[4][1]++,Mn().s[30]++,Mn().b[6][0]++,this.state.inspect&&(Mn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Mn().b[5][0]++,Mn().s[31]++,this.state.inspect.toggleInspector()):Mn().b[5][1]++,Mn().s[32]++,Mn().b[8][0]++,this.state.inspect&&(Mn().b[8][1]++,this.props.inspectModeEnabled)?(Mn().b[7][0]++,Mn().s[33]++,this.state.inspect.setOriginalStyle(r),Mn().s[34]++,setTimeout(()=>{Mn().f[11]++,Mn().s[35]++,this.state.inspect.render()},500)):Mn().b[7][1]++}componentDidMount(){Mn().f[12]++;const t=(Mn().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),r=(Mn().s[37]++,new _v.Map(t));Mn().s[38]++;const i=()=>{Mn().f[13]++;const b=(Mn().s[39]++,r.getCenter()),B=(Mn().s[40]++,r.getZoom());Mn().s[41]++,this.props.onChange({center:b,zoom:B})};Mn().s[42]++,i(),Mn().s[43]++,r.showTileBoundaries=t.showTileBoundaries,Mn().s[44]++,r.showCollisionBoxes=t.showCollisionBoxes,Mn().s[45]++,r.showOverdrawInspector=t.showOverdrawInspector;let o=(Mn().s[46]++,this.initGeocoder(r));const a=(Mn().s[47]++,new XV);Mn().s[48]++,r.addControl(a,"top-right");const s=(Mn().s[49]++,new _v.NavigationControl({visualizePitch:!0}));Mn().s[50]++,r.addControl(s,"top-right");const h=(Mn().s[51]++,document.createElement("div")),g=(Mn().s[52]++,new xB({popup:new _v.Popup({closeOnClick:!1}),showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(b,B)=>(Mn().f[14]++,Mn().s[53]++,n6(OF.brightColor(b,B)).desaturate(.5).string()),buildInspectStyle:(b,B)=>(Mn().f[15]++,Mn().s[54]++,CH(b,B,this.props.highlightedLayer)),renderPopup:b=>(Mn().f[16]++,Mn().s[55]++,this.props.inspectModeEnabled?(Mn().b[9][0]++,Mn().s[56]++,B7(ae.jsx(WV,{features:b}),h)):(Mn().b[9][1]++,Mn().s[57]++,B7(ae.jsx(TF,{features:b,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),h)))}));Mn().s[58]++,r.addControl(g),Mn().s[59]++,r.on("style.load",()=>{Mn().f[17]++,Mn().s[60]++,this.setState({map:r,inspect:g,geocoder:o,zoomControl:a,zoom:r.getZoom()})}),Mn().s[61]++,r.on("data",b=>{if(Mn().f[18]++,Mn().s[62]++,b.dataType!=="tile"){Mn().b[10][0]++,Mn().s[63]++;return}else Mn().b[10][1]++;Mn().s[64]++,this.props.onDataChange({map:this.state.map})}),Mn().s[65]++,r.on("error",b=>{Mn().f[19]++,Mn().s[66]++,console.log("ERROR",b)}),Mn().s[67]++,r.on("zoom",b=>{Mn().f[20]++,Mn().s[68]++,this.setState({zoom:r.getZoom()})}),Mn().s[69]++,r.on("dragend",i),Mn().s[70]++,r.on("zoomend",i)}initGeocoder(t){Mn().f[23]++;const r=(Mn().s[75]++,{forwardGeocode:async o=>{Mn().f[24]++;const a=(Mn().s[76]++,[]);Mn().s[77]++;try{const s=(Mn().s[78]++,`https://nominatim.openstreetmap.org/search?q=${o.query}&format=geojson&polygon_geojson=1&addressdetails=1`),h=(Mn().s[79]++,await fetch(s)),g=(Mn().s[80]++,await h.json());Mn().s[81]++;for(const b of g.features){const B=(Mn().s[82]++,[b.bbox[0]+(b.bbox[2]-b.bbox[0])/2,b.bbox[1]+(b.bbox[3]-b.bbox[1])/2]),S=(Mn().s[83]++,{type:"Feature",geometry:{type:"Point",coordinates:B},place_name:b.properties.display_name,properties:b.properties,text:b.properties.display_name,place_type:["place"],center:B});Mn().s[84]++,a.push(S)}}catch(s){Mn().s[85]++,console.error(`Failed to forwardGeocode with error: ${s}`)}return Mn().s[86]++,{features:a}}}),i=(Mn().s[87]++,new _H(r,{placeholder:this.props.t("Search"),maplibregl:_v}));return Mn().s[88]++,t.addControl(i,"top-left"),Mn().s[89]++,i}render(){var r,i;Mn().f[25]++;const t=(Mn().s[90]++,this.props.t);return Mn().s[91]++,(r=this.state.geocoder)==null||r.setPlaceholder(t("Search")),Mn().s[92]++,(i=this.state.zoomControl)==null||i.setLabel(t("Zoom:")),Mn().s[93]++,ae.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":t("Map view"),ref:o=>(Mn().f[26]++,Mn().s[94]++,this.container=o),"data-wd-key":"maplibre:map"})}}In(DF,"defaultProps",(Mn().s[13]++,{onMapLoaded:()=>{Mn().f[3]++},onDataChange:()=>{Mn().f[4]++},onLayerSelect:()=>{Mn().f[5]++},onChange:()=>{Mn().f[6]++},options:{}}));const bH=(Mn().s[95]++,$s()(DF));class K_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}class dp{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function xH(n,e,t){let r,i;t=t||Fm;let o=0,a=n.length,s=!1;for(;o<a;)r=o+(a-o>>1),i=+t(n[r],e),i<0?o=r+1:(a=r,s=!i);return s?o:~o}function Fm(n,e){return n>e?1:n<e?-1:0}function wH(n,e){return n<e?1:n>e?-1:0}function Ax(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const o=n[i];if(o===e)return i;if(o<e)return t(e,n[i-1],o)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function MH(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function Zp(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function K0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function SH(n,e,t){const r=e;return n.every(function(i,o){if(o===0)return!0;const a=r(n[o-1],i);return!(a>0||a===0)})}function r_(){return!0}function cx(){return!1}function gy(){}function LF(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!K0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function yy(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function D_(n){for(const e in n)delete n[e]}function T0(n){let e;for(e in n)return!1;return!e}class L_ extends K_{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const o=t?new dp(e):e;o.target||(o.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,s[r]=0),++a[r];let h;for(let g=0,b=i.length;g<b;++g)if("handleEvent"in i[g]?h=i[g].handleEvent(o):h=i[g].call(this,o),h===!1||o.propagationStopped){h=!1;break}if(--a[r]===0){let g=s[r];for(delete s[r];g--;)this.removeEventListener(r,gy);delete a[r]}return h}disposeInternal(){this.listeners_&&D_(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=gy,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}const oo={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"},fi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},i_={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Pc={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Pc.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Pc.max=Pc.whitepoint[2].D65;Pc.rgb=function(n,e){e=e||Pc.whitepoint[2].E;var t=n[0]/e[0],r=n[1]/e[1],i=n[2]/e[2],o,a,s;return o=t*3.240969941904521+r*-1.537383177570093+i*-.498610760293,a=t*-.96924363628087+r*1.87596750150772+i*.041555057407175,s=t*.055630079696993+r*-.20397695888897+i*1.056971514242878,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),s=Math.min(Math.max(0,s),1),[o*255,a*255,s*255]};i_.xyz=function(n,e){var t=n[0]/255,r=n[1]/255,i=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var o=t*.41239079926595+r*.35758433938387+i*.18048078840183,a=t*.21263900587151+r*.71516867876775+i*.072192315360733,s=t*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||Pc.whitepoint[2].E,[o*e[0],a*e[1],s*e[2]]};const MB={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var r,i,o,a,s,h,g,b,B,S,I,k,U;if(o=n[0],a=n[1],s=n[2],o===0)return[0,0,0];var z=.0011070564598794539;return e=e||"D65",t=t||2,B=Pc.whitepoint[t][e][0],S=Pc.whitepoint[t][e][1],I=Pc.whitepoint[t][e][2],k=4*B/(B+15*S+3*I),U=9*S/(B+15*S+3*I),r=a/(13*o)+k||0,i=s/(13*o)+U||0,g=o>8?S*Math.pow((o+16)/116,3):S*o*z,h=g*9*r/(4*i)||0,b=g*(12-3*r-20*i)/(4*i)||0,[h,g,b]}};Pc.luv=function(n,e,t){var r,i,o,a,s,h,g,b,B,S,I,k,U,z=.008856451679035631,Y=903.2962962962961;e=e||"D65",t=t||2,B=Pc.whitepoint[t][e][0],S=Pc.whitepoint[t][e][1],I=Pc.whitepoint[t][e][2],k=4*B/(B+15*S+3*I),U=9*S/(B+15*S+3*I),h=n[0],g=n[1],b=n[2],r=4*h/(h+15*g+3*b)||0,i=9*g/(h+15*g+3*b)||0;var Q=g/S;return o=Q<=z?Y*Q:116*Math.pow(Q,1/3)-16,a=13*o*(r-k),s=13*o*(i-U),[o,a,s]};var FF={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],r=n[2],i,o,a;return a=r/360*2*Math.PI,i=t*Math.cos(a),o=t*Math.sin(a),[e,i,o]},xyz:function(n){return MB.xyz(FF.luv(n))}};MB.lchuv=function(n){var e=n[0],t=n[1],r=n[2],i=Math.sqrt(t*t+r*r),o=Math.atan2(r,t),a=o*360/2/Math.PI;return a<0&&(a+=360),[e,i,a]};Pc.lchuv=function(n){return MB.lchuv(Pc.luv(n))};const O7={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var I7={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function EH(n){var b,B;var e,t=[],r=1,i;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),O7[n])t=O7[n].slice(),i="rgb";else if(n==="transparent")r=0,i="rgb",t=[0,0,0];else if(n[0]==="#"){var o=n.slice(1),a=o.length,s=a<=4;r=1,s?(t=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],a===4&&(r=parseInt(o[3]+o[3],16)/255)):(t=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],a===8&&(r=parseInt(o[6]+o[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var h=e[1];i=h.replace(/a$/,"");var g=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(S,I){if(S[S.length-1]==="%")return S=parseFloat(S)/100,I===3?S:i==="rgb"?S*255:i[0]==="h"||i[0]==="l"&&!I?S*100:i==="lab"?S*125:i==="lch"?I<2?S*150:S*360:i[0]==="o"&&!I?S:i==="oklab"?S*.4:i==="oklch"?I<2?S*.4:S*360:S;if(i[I]==="h"||I===2&&i[i.length-1]==="h"){if(I7[S]!==void 0)return I7[S];if(S.endsWith("deg"))return parseFloat(S);if(S.endsWith("turn"))return parseFloat(S)*360;if(S.endsWith("grad"))return parseFloat(S)*360/400;if(S.endsWith("rad"))return parseFloat(S)*180/Math.PI}return S==="none"?0:parseFloat(S)}),r=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(S){return parseFloat(S)}),i=((B=(b=n.match(/([a-z])/ig))==null?void 0:b.join(""))==null?void 0:B.toLowerCase())||"rgb");return{space:i,values:t,alpha:r}}const _4={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,r=n[2]/100,i,o,a,s,h,g=0;if(t===0)return h=r*255,[h,h,h];for(o=r<.5?r*(1+t):r+t-r*t,i=2*r-o,s=[0,0,0];g<3;)a=e+1/3*-(g-1),a<0?a++:a>1&&a--,h=6*a<1?i+(o-i)*6*a:2*a<1?o:3*a<2?i+(o-i)*(2/3-a)*6:i,s[g++]=h*255;return s}};i_.hsl=function(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),o=Math.max(e,t,r),a=o-i,s,h,g;return o===i?s=0:e===o?s=(t-r)/a:t===o?s=2+(r-e)/a:r===o&&(s=4+(e-t)/a),s=Math.min(s*60,360),s<0&&(s+=360),g=(i+o)/2,o===i?h=0:g<=.5?h=a/(o+i):h=a/(2-o-i),[s,h*100,g*100]};function BH(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=EH(n);if(!t.space)return[];const r=t.space[0]==="h"?_4.min:i_.min,i=t.space[0]==="h"?_4.max:i_.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),i[2]),t.space[0]==="h"&&(e=_4.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function Tu(n,e,t){return Math.min(Math.max(n,e),t)}function OH(n,e,t,r,i,o){const a=i-t,s=o-r;if(a!==0||s!==0){const h=((n-t)*a+(e-r)*s)/(a*a+s*s);h>1?(t=i,r=o):h>0&&(t+=a*h,r+=s*h)}return bg(n,e,t,r)}function bg(n,e,t,r){const i=t-n,o=r-e;return i*i+o*o}function IH(n){const e=n.length;for(let r=0;r<e;r++){let i=r,o=Math.abs(n[r][r]);for(let s=r+1;s<e;s++){const h=Math.abs(n[s][r]);h>o&&(o=h,i=s)}if(o===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let s=r+1;s<e;s++){const h=-n[s][r]/n[r][r];for(let g=r;g<e+1;g++)r==g?n[s][g]=0:n[s][g]+=h*n[r][g]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function k7(n){return n*180/Math.PI}function E0(n){return n*Math.PI/180}function xg(n,e){const t=n%e;return t*e<0?t+e:t}function Qd(n,e,t){return n+t*(e-n)}function SB(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function zC(n,e){return Math.floor(SB(n,e))}function _0(n,e){return Math.ceil(SB(n,e))}function s6(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}const EB=[NaN,NaN,NaN,0];function kH(n){return typeof n=="string"?n:OB(n)}const TH=1024,av={};let C4=0;function PH(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function T7(n){const e=Pc.lchuv(i_.xyz(n));return e[3]=n[3],e}function RH(n){const e=Pc.rgb(FF.xyz(n));return e[3]=n[3],e}function BB(n){if(n==="none")return EB;if(av.hasOwnProperty(n))return av[n];if(C4>=TH){let t=0;for(const r in av)t++&3||(delete av[r],--C4)}const e=BH(n);if(e.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+n+'" as color');return UF(e),av[n]=e,++C4,e}function vy(n){return Array.isArray(n)?n:BB(n)}function UF(n){return n[0]=Tu(n[0]+.5|0,0,255),n[1]=Tu(n[1]+.5|0,0,255),n[2]=Tu(n[2]+.5|0,0,255),n[3]=Tu(n[3],0,1),n}function OB(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}const P0=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",KH=P0.includes("firefox"),DH=P0.includes("safari")&&!P0.includes("chrom");DH&&(P0.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(P0));const LH=P0.includes("webkit")&&!P0.includes("edge"),zF=P0.includes("macintosh"),jF=typeof devicePixelRatio<"u"?devicePixelRatio:1,IB=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,NF=typeof Image<"u"&&Image.prototype.decode,GF=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Jl(n,e,t,r){let i;return t&&t.length?i=t.shift():IB?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let b4;function Jb(){return b4||(b4=Jl(1,1)),b4}function F_(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function FH(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function UH(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function P7(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function WF(n){for(;n.lastChild;)n.lastChild.remove()}function zH(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],o=e[r];if(!i&&!o)break;if(i!==o){if(!i){n.appendChild(o);continue}if(!o){n.removeChild(i),--r;continue}n.insertBefore(o,i)}}}function ks(n,e,t,r,i){if(i){const a=t;t=function(){n.removeEventListener(e,t),a.apply(r??this,arguments)}}else r&&r!==n&&(t=t.bind(r));const o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function e2(n,e,t,r){return ks(n,e,t,r,!0)}function Ra(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),D_(n))}class kB extends L_{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?fi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(oo.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==fi.IDLE&&this.loader){this.state=fi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;yy(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=fi.LOADED}).catch(r=>{this.state=fi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function jH(n,e,t){const r=n;let i=!0,o=!1,a=!1;const s=[e2(r,oo.LOAD,function(){a=!0,o||e()})];return r.src&&NF?(o=!0,r.decode().then(function(){i&&e()}).catch(function(h){i&&(a?e():t())})):s.push(e2(r,oo.ERROR,t)),function(){i=!1,s.forEach(Ra)}}function NH(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function o(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",o)}n.addEventListener("load",i),n.addEventListener("error",o)})}function GH(n,e){return e&&(n.src=e),n.src&&NF?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):NH(n)}class WH{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];!(e++&3)&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=x4(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=x4(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,o){const a=x4(e,t,r),s=a in this.cache_;this.cache_[a]=i,o&&(i.getImageState()===fi.IDLE&&i.load(),i.getImageState()===fi.LOADING?i.ready().then(()=>{this.patternCache_[a]=Jb().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=Jb().createPattern(i.getImage(1),"repeat")),s||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function x4(n,e,t){const r=t?vy(t):"null";return e+":"+n+":"+r}const Sf=new WH;let lv=null;class QF extends L_{constructor(e,t,r,i,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.imageState_=i===void 0?fi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===fi.LOADED){lv||(lv=Jl(1,1,void 0,{willReadFrequently:!0})),lv.drawImage(this.image_,0,0);try{lv.getImageData(0,0,1,1),this.tainted_=!1}catch{lv=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(oo.CHANGE)}handleImageError_(){this.imageState_=fi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=fi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Jl(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===fi.IDLE){this.image_||this.initializeImage_(),this.imageState_=fi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&GH(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==fi.LOADED)return;const t=this.image_,r=Jl(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=kH(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)e();else{const t=()=>{(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)&&(this.removeEventListener(oo.CHANGE,t),e())};this.addEventListener(oo.CHANGE,t)}})),this.ready_}}function TB(n,e,t,r,i,o){let a=e===void 0?void 0:Sf.get(e,t,i);return a||(a=new QF(n,n&&"src"in n?n.src||void 0:e,t,r,i),Sf.set(e,t,i,a,o)),o&&a&&!Sf.getPattern(e,t,i)&&Sf.set(e,t,i,a,o),a}function go(){throw new Error("Unimplemented abstract method.")}let QH=0;function Lo(n){return n.ol_uid||(n.ol_uid=String(++QH))}function R7(n){return n[0]>0&&n[1]>0}function qH(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function ah(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class hx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ah(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new hx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return go()}getImage(e){return go()}getHitDetectionImage(){return go()}getPixelRatio(e){return 1}getImageState(){return go()}getImageSize(){return go()}getOrigin(){return go()}getSize(){return go()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ah(e)}listenImageChange(e){go()}load(){go()}unlistenImageChange(e){go()}ready(){return Promise.resolve()}}function qp(n){return n?Array.isArray(n)?OB(n):typeof n=="object"&&"src"in n?YH(n):n:null}function YH(n){if(!n.offset||!n.size)return Sf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Sf.getPattern(e,void 0,n.color);if(t)return t;const r=Sf.get(n.src,"anonymous",null);if(r.getImageState()!==fi.LOADED)return null;const i=Jl(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),TB(i.canvas,e,void 0,fi.LOADED,n.color,!0),Sf.getPattern(e,void 0,n.color)}const _y={PROPERTYCHANGE:"propertychange"};class U_ extends L_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(oo.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=ks(this,e[o],t);return i}return ks(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let o=0;o<i;++o)r[o]=e2(this,e[o],t)}else r=e2(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)$H(r);else if(Array.isArray(e))for(let i=0,o=e.length;i<o;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}U_.prototype.on;U_.prototype.once;U_.prototype.un;function $H(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ra(n[e]);else Ra(n)}class K7 extends dp{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class fp extends U_{constructor(e){super(),this.on,this.once,this.un,Lo(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new K7(r,e,t)),r=_y.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new K7(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const o=i[e];i[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],T0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const jC="ol-hidden",VH="ol-selectable",dx="ol-unselectable",PB="ol-control",D7="ol-collapsed",HH=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),L7=["style","variant","weight","size","lineHeight","family"],qF=function(n){const e=n.match(HH);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=L7.length;r<i;++r){const o=e[r+1];o!==void 0&&(t[L7[r]]=o)}return t.families=t.family.split(/,\s?/),t},YF="10px sans-serif",md="#000",Cy="round",Um=[],zm=0,by="round",o_=10,s_="#000",a_="center",t2="middle",fg=[0,0,0,0],l_=1,Dp=new fp;let D1=null,a6;const l6={},$F=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let o,a;function s(g,b,B){let S=!0;for(let I=0;I<r;++I){const k=t[I];if(a=n2(g+" "+b+" "+e+k,i),B!=k){const U=n2(g+" "+b+" "+e+B+","+k,i);S=S&&U!=a}}return!!S}function h(){let g=!0;const b=Dp.getKeys();for(let B=0,S=b.length;B<S;++B){const I=b[B];if(Dp.get(I)<100){const[k,U,z]=I.split(`
`);s(k,U,z)?(D_(l6),D1=null,a6=void 0,Dp.set(I,100)):(Dp.set(I,Dp.get(I)+1,!0),g=!1)}}g&&(clearInterval(o),o=void 0)}return function(g){const b=qF(g);if(!b)return;const B=b.families;for(let S=0,I=B.length;S<I;++S){const k=B[S],U=b.style+`
`+b.weight+`
`+k;Dp.get(U)===void 0&&(Dp.set(U,100,!0),s(b.style,b.weight,k)||(Dp.set(U,0,!0),o===void 0&&(o=setInterval(h,32))))}}}(),ZH=function(){let n;return function(e){let t=l6[e];if(t==null){if(IB){const r=qF(e),i=VF(e,"Žg");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);l6[e]=t}return t}}();function VF(n,e){return D1||(D1=Jl(1,1)),n!=a6&&(D1.font=n,a6=D1.font),D1.measureText(e)}function n2(n,e){return VF(n,e).width}function F7(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,o)=>Math.max(i,n2(n,o)),0);return t[e]=r,r}function XH(n,e){const t=[],r=[],i=[];let o=0,a=0,s=0,h=0;for(let g=0,b=e.length;g<=b;g+=2){const B=e[g];if(B===`
`||g===b){o=Math.max(o,a),i.push(a),a=0,s+=h,h=0;continue}const S=e[g+1]||n.font,I=n2(S,B);t.push(I),a+=I;const k=ZH(S);r.push(k),h=Math.max(h,k)}return{width:o,height:s,widths:t,heights:r,lineWidths:i}}function JH(n,e,t,r,i,o,a,s,h,g,b){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=B=>B.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(h,g),n.scale(b[0],b[1]),eZ(r,n)):b[0]<0||b[1]<0?(n.translate(h,g),n.scale(b[0],b[1]),n.drawImage(r,i,o,a,s,0,0,a,s)):n.drawImage(r,i,o,a,s,h,g,a*b[0],s*b[1]),n.restore()}function eZ(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class fx extends hx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?fi.LOADING:fi.LOADED,this.imageState_===fi.LOADING&&this.ready().then(()=>this.imageState_=fi.LOADED),this.render()}clone(){const e=this.getScale(),t=new fx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var o,a;const t=(o=this.fill_)==null?void 0:o.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(a=Sf.get(r,null,null))==null?void 0:a.getImage(1);if(!i){const s=this.renderOptions_,h=Math.ceil(s.size*e),g=Jl(h,h);this.draw_(s,g,e),i=g.canvas,Sf.set(r,null,null,new QF(i,void 0,null,fi.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,o=this.radius2_===void 0?i:this.radius2_;if(i<o){const J=i;i=o,o=J}const a=this.radius2_===void 0?this.points_:this.points_*2,s=2*Math.PI/a,h=o*Math.sin(s),g=Math.sqrt(o*o-h*h),b=i-g,B=Math.sqrt(h*h+b*b),S=B/h;if(e==="miter"&&S<=r)return S*t;const I=t/2/S,k=t/2*(b/B),z=Math.sqrt((i+I)*(i+I)+k*k)-i;if(this.radius2_===void 0||e==="bevel")return z*2;const Y=i*Math.sin(s),Q=Math.sqrt(i*i-Y*Y),ne=o-Q,q=Math.sqrt(Y*Y+ne*ne)/Y;if(q<=r){const J=q*t/2-o-i;return 2*Math.max(z,J)}return z*2}createRenderOptions(){let e=Cy,t=by,r=0,i=null,o=0,a,s=0;this.stroke_&&(a=qp(this.stroke_.getColor()??s_),s=this.stroke_.getWidth()??l_,i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??by,e=this.stroke_.getLineCap()??Cy,r=this.stroke_.getMiterLimit()??o_);const h=this.calculateLineJoinSize_(t,s,r),g=Math.max(this.radius,this.radius2_||0),b=Math.ceil(2*g+h);return{strokeStyle:a,strokeWidth:s,size:b,lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=md),t.fillStyle=qp(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=vy(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Jl(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let s=0;s<t;s++){const h=o+s*a,g=s%2===0?r:i;e.lineTo(g*Math.cos(h),g*Math.sin(h))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=md,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class z_ extends fx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new z_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Dm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Dm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=TB(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===fi.IDLE&&t.load(),t.getImageState()===fi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Lo(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:vy(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function ra(n,e){if(!n)throw new Error(e)}function U7(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let r2=class HF extends hx{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let s=e.src;ra(!(s!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(s===void 0||s.length===0)&&a&&(s=a.src||Lo(a)),ra(s!==void 0&&s.length>0,"A defined and non-empty `src` or `image` must be provided"),ra(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let h;if(e.src!==void 0?h=fi.IDLE:a!==void 0&&("complete"in a?a.complete?h=a.src?fi.LOADED:fi.IDLE:h=fi.LOADING:h=fi.LOADED),this.color_=e.color!==void 0?vy(e.color):null,this.iconImage_=TB(a,s,this.crossOrigin_,h,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,b;if(e.size)[g,b]=e.size;else{const B=this.getImage(1);if(B.width&&B.height)g=B.width,b=B.height;else if(B instanceof HTMLImageElement){this.initialOptions_=e;const S=()=>{if(this.unlistenImageChange(S),!this.initialOptions_)return;const I=this.iconImage_.getSize();this.setScale(U7(I[0],I[1],e.width,e.height))};this.listenImageChange(S);return}}g!==void 0&&this.setScale(U7(g,b,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new HF({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(oo.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(oo.CHANGE,e)}ready(){return this.iconImage_.ready()}};class px extends fp{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new px(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ra(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=ks(e,oo.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?tZ(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function tZ(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ra(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const ZF=new Array(6);function _d(){return[1,0,0,1,0,0]}function z7(n){return KB(n,1,0,0,1,0,0)}function RB(n,e){const t=n[0],r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],h=e[0],g=e[1],b=e[2],B=e[3],S=e[4],I=e[5];return n[0]=t*h+i*g,n[1]=r*h+o*g,n[2]=t*b+i*B,n[3]=r*b+o*B,n[4]=t*S+i*I+a,n[5]=r*S+o*I+s,n}function KB(n,e,t,r,i,o,a){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=o,n[5]=a,n}function nZ(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function yA(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function w4(n,e,t){return RB(n,KB(ZF,e,0,0,t,0,0))}function rZ(n,e,t){return RB(n,KB(ZF,1,0,0,1,e,t))}function em(n,e,t,r,i,o,a,s){const h=Math.sin(o),g=Math.cos(o);return n[0]=r*g,n[1]=i*h,n[2]=-r*h,n[3]=i*g,n[4]=a*r*g-s*r*h+e,n[5]=a*i*h+s*i*g+t,n}function XF(n,e){const t=iZ(e);ra(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],h=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-o/t,n[3]=r/t,n[4]=(o*h-a*s)/t,n[5]=-(r*h-i*s)/t,n}function iZ(n){return n[0]*n[3]-n[1]*n[2]}const j7=[1e6,1e6,1e6,1e6,2,2];function oZ(n){return"matrix("+n.map((t,r)=>Math.round(t*j7[r])/j7[r]).join(", ")+")"}const Ac={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function u6(n){const e=Zd();for(let t=0,r=n.length;t<r;++t)Nv(e,n[t]);return e}function sZ(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),o=Math.max.apply(null,n),a=Math.max.apply(null,e);return Gm(r,i,o,a,t)}function B0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function JF(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Dg(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Og(n,e){return DB(n,e[0],e[1])}function lp(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function DB(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function A6(n,e){const t=n[0],r=n[1],i=n[2],o=n[3],a=e[0],s=e[1];let h=Ac.UNKNOWN;return a<t?h=h|Ac.LEFT:a>i&&(h=h|Ac.RIGHT),s<r?h=h|Ac.BELOW:s>o&&(h=h|Ac.ABOVE),h===Ac.UNKNOWN&&(h=Ac.INTERSECTING),h}function Zd(){return[1/0,1/0,-1/0,-1/0]}function Gm(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Ty(n){return Gm(1/0,1/0,-1/0,-1/0,n)}function eU(n,e){const t=n[0],r=n[1];return Gm(t,r,t,r,e)}function LB(n,e,t,r,i){const o=Ty(i);return tU(o,n,e,t,r)}function Wm(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function FB(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Nv(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function tU(n,e,t,r,i){for(;t<r;t+=i)aZ(n,e[t],e[t+1]);return n}function aZ(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function nU(n,e){let t;return t=e(mx(n)),t||(t=e(gx(n)),t)||(t=e(yx(n)),t)||(t=e(Ap(n)),t)?t:!1}function u_(n){let e=0;return Lg(n)||(e=ps(n)*Hl(n)),e}function mx(n){return[n[0],n[1]]}function gx(n){return[n[2],n[1]]}function If(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function lZ(n,e){let t;if(e==="bottom-left")t=mx(n);else if(e==="bottom-right")t=gx(n);else if(e==="top-left")t=Ap(n);else if(e==="top-right")t=yx(n);else throw new Error("Invalid corner");return t}function i2(n,e,t,r,i){const[o,a,s,h,g,b,B,S]=uZ(n,e,t,r);return Gm(Math.min(o,s,g,B),Math.min(a,h,b,S),Math.max(o,s,g,B),Math.max(a,h,b,S),i)}function uZ(n,e,t,r){const i=e*r[0]/2,o=e*r[1]/2,a=Math.cos(t),s=Math.sin(t),h=i*a,g=i*s,b=o*a,B=o*s,S=n[0],I=n[1];return[S-h+B,I-g-b,S-h-B,I-g+b,S+h-B,I+g+b,S+h+B,I+g-b,S-h+B,I-g-b]}function Hl(n){return n[3]-n[1]}function Qh(n,e,t){const r=t||Zd();return ku(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Ty(r),r}function Ap(n){return[n[0],n[3]]}function yx(n){return[n[2],n[3]]}function ps(n){return n[2]-n[0]}function ku(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Lg(n){return n[2]<n[0]||n[3]<n[1]}function AZ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function cZ(n,e,t){let r=!1;const i=A6(n,e),o=A6(n,t);if(i===Ac.INTERSECTING||o===Ac.INTERSECTING)r=!0;else{const a=n[0],s=n[1],h=n[2],g=n[3],b=e[0],B=e[1],S=t[0],I=t[1],k=(I-B)/(S-b);let U,z;o&Ac.ABOVE&&!(i&Ac.ABOVE)&&(U=S-(I-g)/k,r=U>=a&&U<=h),!r&&o&Ac.RIGHT&&!(i&Ac.RIGHT)&&(z=I-(S-h)*k,r=z>=s&&z<=g),!r&&o&Ac.BELOW&&!(i&Ac.BELOW)&&(U=S-(I-s)/k,r=U>=a&&U<=h),!r&&o&Ac.LEFT&&!(i&Ac.LEFT)&&(z=I-(S-a)*k,r=z>=s&&z<=g)}return r}function hZ(n,e,t,r){if(Lg(n))return Ty(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const o=[],a=[];for(let s=0,h=i.length;s<h;s+=2)o.push(i[s]),a.push(i[s+1]);return sZ(o,a,t)}function rU(n,e){const t=e.getExtent(),r=If(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=ps(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function UB(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];rU(n,e);const i=ps(r);if(ps(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}const R0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class vx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||R0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const j_=6378137,W1=Math.PI*j_,dZ=[-W1,-W1,W1,W1],fZ=[-180,-85,180,85],NC=j_*Math.log(Math.tan(Math.PI/2));class o1 extends vx{constructor(e){super({code:e,units:"m",extent:dZ,global:!0,worldExtent:fZ,getPointResolution:function(t,r){return t/Math.cosh(r[1]/j_)}})}}const N7=[new o1("EPSG:3857"),new o1("EPSG:102100"),new o1("EPSG:102113"),new o1("EPSG:900913"),new o1("http://www.opengis.net/def/crs/EPSG/0/3857"),new o1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function pZ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let o=0;o<i;o+=r){e[o]=W1*n[o]/180;let a=j_*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));a>NC?a=NC:a<-NC&&(a=-NC),e[o+1]=a}return e}function mZ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let o=0;o<i;o+=r)e[o]=180*n[o]/W1,e[o+1]=360*Math.atan(Math.exp(n[o+1]/j_))/Math.PI-90;return e}const gZ=6378137,G7=[-180,-90,180,90],yZ=Math.PI*gZ/180;class J0 extends vx{constructor(e,t){super({code:e,units:"degrees",extent:G7,axisOrientation:t,global:!0,metersPerUnit:yZ,worldExtent:G7})}}const W7=[new J0("CRS:84"),new J0("EPSG:4326","neu"),new J0("urn:ogc:def:crs:OGC:1.3:CRS84"),new J0("urn:ogc:def:crs:OGC:2:84"),new J0("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new J0("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new J0("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let c6={};function vZ(n){return c6[n]||c6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function _Z(n,e){c6[n]=e}let ny={};function A_(n,e,t){const r=n.getCode(),i=e.getCode();r in ny||(ny[r]={}),ny[r][i]=t}function M4(n,e){return n in ny&&e in ny[n]?ny[n][e]:null}function CZ(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function o2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function zB(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,o=n[1]*t+n[0]*r;return n[0]=i,n[1]=o,n}function bZ(n,e){return n[0]*=e,n[1]*=e,n}function jB(n,e){if(e.canWrapX()){const t=ps(e.getExtent()),r=xZ(n,e,t);r&&(n[0]-=r*t)}return n}function xZ(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||ps(r),i=Math.floor((n[0]-r[0])/t)),i}const wZ=63710088e-1;function Q7(n,e,t){t=t||wZ;const r=E0(n[1]),i=E0(e[1]),o=(i-r)/2,a=E0(e[0]-n[0])/2,s=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}const s2=.9996,Of=.00669438,_x=Of*Of,Cx=_x*Of,pg=Of/(1-Of),q7=Math.sqrt(1-Of),xy=(1-q7)/(1+q7),iU=xy*xy,NB=iU*xy,GB=NB*xy,oU=GB*xy,sU=1-Of/4-3*_x/64-5*Cx/256,MZ=3*Of/8+3*_x/32+45*Cx/1024,SZ=15*_x/256+45*Cx/1024,EZ=35*Cx/3072,BZ=3/2*xy-27/32*NB+269/512*oU,OZ=21/16*iU-55/32*GB,IZ=151/96*NB-417/128*oU,kZ=1097/512*GB,a2=6378137;function TZ(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/s2/(a2*sU),s=a+BZ*Math.sin(2*a)+OZ*Math.sin(4*a)+IZ*Math.sin(6*a)+kZ*Math.sin(8*a),h=Math.sin(s),g=h*h,b=Math.cos(s),B=h/b,S=B*B,I=S*S,k=1-Of*g,U=Math.sqrt(1-Of*g),z=a2/U,Y=(1-Of)/k,Q=pg*b**2,ne=Q*Q,X=r/(z*s2),q=X*X,J=q*X,N=J*X,ie=N*X,he=ie*X,ce=s-B/Y*(q/2-N/24*(5+3*S+10*Q-4*ne-9*pg))+he/720*(61+90*S+298*Q+45*I-252*pg-3*ne);let we=(X-J/6*(1+2*S+Q)+ie/120*(5-2*Q+28*S-3*ne+8*pg+24*I))/b;return we=s6(we+E0(aU(t.number)),-Math.PI,Math.PI),[k7(we),k7(ce)]}const Y7=-80,$7=84,PZ=-180,RZ=180;function KZ(n,e,t){n=s6(n,PZ,RZ),e<Y7?e=Y7:e>$7&&(e=$7);const r=E0(e),i=Math.sin(r),o=Math.cos(r),a=i/o,s=a*a,h=s*s,g=E0(n),b=aU(t.number),B=E0(b),S=a2/Math.sqrt(1-Of*i**2),I=pg*o**2,k=o*s6(g-B,-Math.PI,Math.PI),U=k*k,z=U*k,Y=z*k,Q=Y*k,ne=Q*k,X=a2*(sU*r-MZ*Math.sin(2*r)+SZ*Math.sin(4*r)-EZ*Math.sin(6*r)),q=s2*S*(k+z/6*(1-s+I)+Q/120*(5-18*s+h+72*I-58*pg))+5e5;let J=s2*(X+S*a*(U/2+Y/24*(5-s+9*I+4*I**2)+ne/720*(61-58*s+h+600*I-330*pg)));return t.north||(J+=1e7),[q,J]}function aU(n){return(n-1)*6-180+3}const DZ=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function lU(n){let e=0;for(const i of DZ){const o=n.match(i);if(o){e=parseInt(o[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function V7(n,e){return function(t,r,i,o){const a=t.length;i=i>1?i:2,o=o??i,r||(i>2?r=t.slice():r=new Array(a));for(let s=0;s<a;s+=o){const h=t[s],g=t[s+1],b=n(h,g,e);r[s]=b[0],r[s+1]=b[1]}return r}}function LZ(n){return lU(n)?new vx({code:n,units:"m"}):null}function FZ(n){const e=lU(n.getCode());return e?{forward:V7(KZ,e),inverse:V7(TZ,e)}:null}function uU(...n){console.warn(...n)}const UZ=[FZ],zZ=[LZ];let h6=!0;function AU(n){h6=!1}function WB(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function d6(n){_Z(n.getCode(),n),A_(n,n,WB)}function jZ(n){n.forEach(d6)}function Ma(n){if(typeof n!="string")return n;const e=vZ(n);if(e)return e;for(const t of zZ){const r=t(n);if(r)return r}return null}function f6(n,e,t,r){n=Ma(n);let i;const o=n.getPointResolutionFunc();if(o){if(i=o(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/R0[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const s=N_(n,Ma("EPSG:4326"));if(!s&&a!=="degrees")i=e*n.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=s(g,g,2);const b=Q7(g.slice(0,2),g.slice(2,4)),B=Q7(g.slice(4,6),g.slice(6,8));i=(b+B)/2}const h=r?R0[r]:n.getMetersPerUnit();h!==void 0&&(i/=h)}}return i}function H7(n){jZ(n),n.forEach(function(e){n.forEach(function(t){e!==t&&A_(e,t,WB)})})}function NZ(n,e,t,r){n.forEach(function(i){e.forEach(function(o){A_(i,o,t),A_(o,i,r)})})}function QB(n,e){return n?typeof n=="string"?Ma(n):n:Ma(e)}function GZ(n){return function(e,t,r,i){const o=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(o);for(let a=0;a<o;a+=i){const s=n(e.slice(a,a+r)),h=s.length;for(let g=0,b=i;g<b;++g)t[a+g]=g>=h?e[a+g]:s[g]}return t}}function p6(n,e){return AU(),bx(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function S4(n,e){const t=bx(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=xg(r+180,360)-180),t}function wg(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||N_(n,e)===WB)&&t}function N_(n,e){const t=n.getCode(),r=e.getCode();let i=M4(t,r);if(i)return i;let o=null,a=null;for(const h of UZ)o||(o=h(n)),a||(a=h(e));if(!o&&!a)return null;const s="EPSG:4326";if(a)if(o)i=E4(o.inverse,a.forward);else{const h=M4(t,s);h&&(i=E4(h,a.forward))}else{const h=M4(s,r);h&&(i=E4(o.inverse,h))}return i&&(d6(n),d6(e),A_(n,e,i)),i}function E4(n,e){return function(t,r,i,o){return r=n(t,r,i,o),e(r,r,i,o)}}function c_(n,e){const t=Ma(n),r=Ma(e);return N_(t,r)}function bx(n,e,t){const r=c_(e,t);if(!r){const i=Ma(e).getCode(),o=Ma(t).getCode();throw new Error(`No transform available between ${i} and ${o}`)}return r(n,void 0,n.length)}let WZ=null;function QZ(){return WZ}function m6(n,e){return n}function km(n,e){return h6&&!o2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(h6=!1,uU("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function qB(n,e){return n}function Yp(n,e){return n}function qZ(){H7(N7),H7(W7),NZ(W7,N7,pZ,mZ)}qZ();function O0(n,e,t,r,i,o,a){o=o||[],a=a||2;let s=0;for(let h=e;h<t;h+=r){const g=n[h],b=n[h+1];o[s++]=i[0]*g+i[2]*b+i[4],o[s++]=i[1]*g+i[3]*b+i[5];for(let B=2;B<a;B++)o[s++]=n[h+B]}return o&&o.length!=s&&(o.length=s),o}function cU(n,e,t,r,i,o,a){a=a||[];const s=Math.cos(i),h=Math.sin(i),g=o[0],b=o[1];let B=0;for(let S=e;S<t;S+=r){const I=n[S]-g,k=n[S+1]-b;a[B++]=g+I*s-k*h,a[B++]=b+I*h+k*s;for(let U=S+2;U<S+r;++U)a[B++]=n[U]}return a&&a.length!=B&&(a.length=B),a}function YZ(n,e,t,r,i,o,a,s){s=s||[];const h=a[0],g=a[1];let b=0;for(let B=e;B<t;B+=r){const S=n[B]-h,I=n[B+1]-g;s[b++]=h+i*S,s[b++]=g+o*I;for(let k=B+2;k<B+r;++k)s[b++]=n[k]}return s&&s.length!=b&&(s.length=b),s}function $Z(n,e,t,r,i,o,a){a=a||[];let s=0;for(let h=e;h<t;h+=r){a[s++]=n[h]+i,a[s++]=n[h+1]+o;for(let g=h+2;g<h+r;++g)a[s++]=n[g]}return a&&a.length!=s&&(a.length=s),a}const Z7=_d();class hU extends fp{constructor(){super(),this.extent_=Zd(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=LF((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return go()}closestPointXY(e,t,r,i){return go()}containsXY(e,t){const r=this.getClosestPoint([e,t]);return r[0]===e&&r[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return go()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Ty(t),this.extentRevision_=this.getRevision()}return AZ(this.extent_,e)}rotate(e,t){go()}scale(e,t,r){go()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return go()}getType(){return go()}applyTransform(e){go()}intersectsExtent(e){return go()}translate(e,t){go()}transform(e,t){const r=Ma(e),i=r.getUnits()=="tile-pixels"?function(o,a,s){const h=r.getExtent(),g=r.getWorldExtent(),b=Hl(g)/Hl(h);em(Z7,g[0],g[3],b,-b,0,0,0);const B=O0(o,0,o.length,s,Z7,a),S=c_(r,t);return S?S(B,B,s):B}:c_(r,t);return this.applyTransform(i),this}}class Fg extends hU{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return LB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return go()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=X7(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){go()}setLayout(e,t,r){let i;if(e)i=X7(e);else{for(let o=0;o<r;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Ug(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();cU(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=If(this.getExtent()));const i=this.getFlatCoordinates();if(i){const o=this.getStride();YZ(i,0,i.length,o,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();$Z(r,0,r.length,i,e,t,r),this.changed()}}}function Ug(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function X7(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function VZ(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return O0(r,0,r.length,i,e,t)}function HZ(n,e,t,r){for(let i=0,o=t.length;i<o;++i)n[e++]=t[i];return e}function xx(n,e,t,r){for(let i=0,o=t.length;i<o;++i){const a=t[i];for(let s=0;s<r;++s)n[e++]=a[s]}return e}function G_(n,e,t,r,i){i=i||[];let o=0;for(let a=0,s=t.length;a<s;++a){const h=xx(n,e,t[a],r);i[o++]=h,e=h}return i.length=o,i}function dU(n,e,t,r,i){i=i||[];let o=0;for(let a=0,s=t.length;a<s;++a){const h=G_(n,e,t[a],r,i[o]);h.length===0&&(h[0]=e),i[o++]=h,e=h[h.length-1]}return i.length=o,i}class l2 extends hU{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ra),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(ks(e[t],oo.CHANGE,this.changed,this))}clone(){const e=new l2(B4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Dg(this.getExtent(),e,t))return i;const o=this.geometries_;for(let a=0,s=o.length;a<s;++a)i=o[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,o=r.length;i<o;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Ty(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)FB(e,t[r].getExtent());return e}getGeometries(){return B4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let o=0,a=r.length;o<a;++o){const s=r[o],h=s.getSimplifiedGeometry(e);t.push(h),h!==s&&(i=!0)}return i?new l2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,o=r.length;i<o;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=If(this.getExtent()));const i=this.geometries_;for(let o=0,a=i.length;o<a;++o)i[o].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(B4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,o=r.length;i<o;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function B4(n){return n.map(e=>e.clone())}function J7(n,e,t,r,i,o,a){const s=n[e],h=n[e+1],g=n[t]-s,b=n[t+1]-h;let B;if(g===0&&b===0)B=e;else{const S=((i-s)*g+(o-h)*b)/(g*g+b*b);if(S>1)B=t;else if(S>0){for(let I=0;I<r;++I)a[I]=Qd(n[e+I],n[t+I],S);a.length=r;return}else B=e}for(let S=0;S<r;++S)a[S]=n[B+S];a.length=r}function YB(n,e,t,r,i){let o=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const s=n[e],h=n[e+1],g=bg(o,a,s,h);g>i&&(i=g),o=s,a=h}return i}function $B(n,e,t,r,i){for(let o=0,a=t.length;o<a;++o){const s=t[o];i=YB(n,e,s,r,i),e=s}return i}function ZZ(n,e,t,r,i){for(let o=0,a=t.length;o<a;++o){const s=t[o];i=$B(n,e,s,r,i),e=s[s.length-1]}return i}function VB(n,e,t,r,i,o,a,s,h,g,b){if(e==t)return g;let B,S;if(i===0){if(S=bg(a,s,n[e],n[e+1]),S<g){for(B=0;B<r;++B)h[B]=n[e+B];return h.length=r,S}return g}b=b||[NaN,NaN];let I=e+r;for(;I<t;)if(J7(n,I-r,I,r,a,s,b),S=bg(a,s,b[0],b[1]),S<g){for(g=S,B=0;B<r;++B)h[B]=b[B];h.length=r,I+=r}else I+=r*Math.max((Math.sqrt(S)-Math.sqrt(g))/i|0,1);if(o&&(J7(n,t-r,e,r,a,s,b),S=bg(a,s,b[0],b[1]),S<g)){for(g=S,B=0;B<r;++B)h[B]=b[B];h.length=r}return g}function HB(n,e,t,r,i,o,a,s,h,g,b){b=b||[NaN,NaN];for(let B=0,S=t.length;B<S;++B){const I=t[B];g=VB(n,e,I,r,i,o,a,s,h,g,b),e=I}return g}function XZ(n,e,t,r,i,o,a,s,h,g,b){b=b||[NaN,NaN];for(let B=0,S=t.length;B<S;++B){const I=t[B];g=HB(n,e,I,r,i,o,a,s,h,g,b),e=I[I.length-1]}return g}function wx(n,e,t,r,i,o,a){const s=(t-e)/r;if(s<3){for(;e<t;e+=r)o[a++]=n[e],o[a++]=n[e+1];return a}const h=new Array(s);h[0]=1,h[s-1]=1;const g=[e,t-r];let b=0;for(;g.length>0;){const B=g.pop(),S=g.pop();let I=0;const k=n[S],U=n[S+1],z=n[B],Y=n[B+1];for(let Q=S+r;Q<B;Q+=r){const ne=n[Q],X=n[Q+1],q=OH(ne,X,k,U,z,Y);q>I&&(b=Q,I=q)}I>i&&(h[(b-e)/r]=1,S+r<b&&g.push(S,b),b+r<B&&g.push(b,B))}for(let B=0;B<s;++B)h[B]&&(o[a++]=n[e+B*r],o[a++]=n[e+B*r+1]);return a}function fU(n,e,t,r,i,o,a,s){for(let h=0,g=t.length;h<g;++h){const b=t[h];a=wx(n,e,b,r,i,o,a),s.push(a),e=b}return a}function lg(n,e){return e*Math.round(n/e)}function JZ(n,e,t,r,i,o,a){if(e==t)return a;let s=lg(n[e],i),h=lg(n[e+1],i);e+=r,o[a++]=s,o[a++]=h;let g,b;do if(g=lg(n[e],i),b=lg(n[e+1],i),e+=r,e==t)return o[a++]=g,o[a++]=b,a;while(g==s&&b==h);for(;e<t;){const B=lg(n[e],i),S=lg(n[e+1],i);if(e+=r,B==g&&S==b)continue;const I=g-s,k=b-h,U=B-s,z=S-h;if(I*z==k*U&&(I<0&&U<I||I==U||I>0&&U>I)&&(k<0&&z<k||k==z||k>0&&z>k)){g=B,b=S;continue}o[a++]=g,o[a++]=b,s=g,h=b,g=B,b=S}return o[a++]=g,o[a++]=b,a}function ZB(n,e,t,r,i,o,a,s){for(let h=0,g=t.length;h<g;++h){const b=t[h];a=JZ(n,e,b,r,i,o,a),s.push(a),e=b}return a}function eX(n,e,t,r,i,o,a,s){for(let h=0,g=t.length;h<g;++h){const b=t[h],B=[];a=ZB(n,e,b,r,i,o,a,B),s.push(B),e=b[b.length-1]}return a}function C0(n,e,t,r,i){i=i!==void 0?i:[];let o=0;for(let a=e;a<t;a+=r)i[o++]=n.slice(a,a+r);return i.length=o,i}function h_(n,e,t,r,i){i=i!==void 0?i:[];let o=0;for(let a=0,s=t.length;a<s;++a){const h=t[a];i[o++]=C0(n,e,h,r,i[o]),e=h}return i.length=o,i}function g6(n,e,t,r,i){i=i!==void 0?i:[];let o=0;for(let a=0,s=t.length;a<s;++a){const h=t[a];i[o++]=h.length===1&&h[0]===e?[]:h_(n,e,h,r,i[o]),e=h[h.length-1]}return i.length=o,i}function pU(n,e,t,r){let i=0;const o=n[t-r],a=n[t-r+1];let s=0,h=0;for(;e<t;e+=r){const g=n[e]-o,b=n[e+1]-a;i+=h*g-s*b,s=g,h=b}return i/2}function mU(n,e,t,r){let i=0;for(let o=0,a=t.length;o<a;++o){const s=t[o];i+=pU(n,e,s,r),e=s}return i}function tX(n,e,t,r){let i=0;for(let o=0,a=t.length;o<a;++o){const s=t[o];i+=mU(n,e,s,r),e=s[s.length-1]}return i}class d_ extends Fg{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new d_(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Dg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(YB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),VB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return pU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return C0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=wx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new d_(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xx(this.flatCoordinates,0,e,this.stride),this.changed()}}function gU(n,e,t,r,i){let o;for(e+=r;e<t;e+=r)if(o=i(n.slice(e-r,e),n.slice(e,e+r)),o)return o;return!1}function u2(n,e,t,r,i,o,a){let s,h;const g=(t-e)/r;if(g===1)s=e;else if(g===2)s=e,h=i;else if(g!==0){let b=n[e],B=n[e+1],S=0;const I=[0];for(let z=e+r;z<t;z+=r){const Y=n[z],Q=n[z+1];S+=Math.sqrt((Y-b)*(Y-b)+(Q-B)*(Q-B)),I.push(S),b=Y,B=Q}const k=i*S,U=xH(I,k);U<0?(h=(k-I[-U-2])/(I[-U-1]-I[-U-2]),s=e+(-U-2)*r):s=e+U*r}a=a>1?a:2,o=o||new Array(a);for(let b=0;b<a;++b)o[b]=s===void 0?NaN:h===void 0?n[s+b]:Qd(n[s+b],n[s+r+b],h);return o}function y6(n,e,t,r,i,o){if(t==e)return null;let a;if(i<n[e+r-1])return o?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return o?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let s=e/r,h=t/r;for(;s<h;){const S=s+h>>1;i<n[(S+1)*r-1]?h=S:s=S+1}const g=n[s*r-1];if(i==g)return n.slice((s-1)*r,(s-1)*r+r);const b=n[(s+1)*r-1],B=(i-g)/(b-g);a=[];for(let S=0;S<r-1;++S)a.push(Qd(n[(s-1)*r+S],n[s*r+S],B));return a.push(i),a}function nX(n,e,t,r,i,o,a){if(a)return y6(n,e,t[t.length-1],r,i,o);let s;if(i<n[r-1])return o?(s=n.slice(0,r),s[r-1]=i,s):null;if(n[n.length-1]<i)return o?(s=n.slice(n.length-r),s[r-1]=i,s):null;for(let h=0,g=t.length;h<g;++h){const b=t[h];if(e!=b){if(i<n[e+r-1])return null;if(i<=n[b-1])return y6(n,e,b,r,i,!1);e=b}}return null}function rX(n,e,t,r,i){return!nU(i,function(a){return!mg(n,e,t,r,a[0],a[1])})}function mg(n,e,t,r,i,o){let a=0,s=n[t-r],h=n[t-r+1];for(;e<t;e+=r){const g=n[e],b=n[e+1];h<=o?b>o&&(g-s)*(o-h)-(i-s)*(b-h)>0&&a++:b<=o&&(g-s)*(o-h)-(i-s)*(b-h)<0&&a--,s=g,h=b}return a!==0}function XB(n,e,t,r,i,o){if(t.length===0||!mg(n,e,t[0],r,i,o))return!1;for(let a=1,s=t.length;a<s;++a)if(mg(n,t[a-1],t[a],r,i,o))return!1;return!0}function iX(n,e,t,r,i,o){if(t.length===0)return!1;for(let a=0,s=t.length;a<s;++a){const h=t[a];if(XB(n,e,h,r,i,o))return!0;e=h[h.length-1]}return!1}function Mx(n,e,t,r,i){const o=tU(Zd(),n,e,t,r);return ku(i,o)?lp(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:gU(n,e,t,r,function(a,s){return cZ(i,a,s)}):!1}function oX(n,e,t,r,i){for(let o=0,a=t.length;o<a;++o){if(Mx(n,e,t[o],r,i))return!0;e=t[o]}return!1}function yU(n,e,t,r,i){return!!(Mx(n,e,t,r,i)||mg(n,e,t,r,i[0],i[1])||mg(n,e,t,r,i[0],i[3])||mg(n,e,t,r,i[2],i[1])||mg(n,e,t,r,i[2],i[3]))}function vU(n,e,t,r,i){if(!yU(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let o=1,a=t.length;o<a;++o)if(rX(n,t[o-1],t[o],r,i)&&!Mx(n,t[o-1],t[o],r,i))return!1;return!0}function sX(n,e,t,r,i){for(let o=0,a=t.length;o<a;++o){const s=t[o];if(vU(n,e,s,r,i))return!0;e=s[s.length-1]}return!1}function _U(n,e,t,r){let i=n[e],o=n[e+1],a=0;for(let s=e+r;s<t;s+=r){const h=n[s],g=n[s+1];a+=Math.sqrt((h-i)*(h-i)+(g-o)*(g-o)),i=h,o=g}return a}class Ig extends Fg{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Zp(this.flatCoordinates,e),this.changed()}clone(){const e=new Ig(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Dg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(YB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),VB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return gU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,y6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return C0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return u2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return _U(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=wx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ig(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Mx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xx(this.flatCoordinates,0,e,this.stride),this.changed()}}class f_ extends Fg{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,o=[],a=[];for(let h=0,g=i.length;h<g;++h){const b=i[h];Zp(o,b.getFlatCoordinates()),a.push(o.length)}const s=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(e){Zp(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new f_(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Dg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($B(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),HB(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,nX(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return h_(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Ig(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let o=0;for(let a=0,s=t.length;a<s;++a){const h=t[a],g=new Ig(e.slice(o,h),r);i.push(g),o=h}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,o=this.stride;for(let a=0,s=i.length;a<s;++a){const h=i[a],g=u2(t,r,h,o,.5);Zp(e,g),r=h}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=fU(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new f_(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return oX(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=G_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class kg extends Fg{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new kg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const o=this.flatCoordinates,a=bg(e,t,o[0],o[1]);if(a<i){const s=this.stride;for(let h=0;h<s;++h)r[h]=o[h];return r.length=s,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return eU(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return DB(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=HZ(this.flatCoordinates,0,e,this.stride),this.changed()}}class W_ extends Fg{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Zp(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new W_(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Dg(this.getExtent(),e,t))return i;const o=this.flatCoordinates,a=this.stride;for(let s=0,h=o.length;s<h;s+=a){const g=bg(e,t,o[s],o[s+1]);if(g<i){i=g;for(let b=0;b<a;++b)r[b]=o[s+b];r.length=a}}return i}getCoordinates(){return C0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new kg(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let o=0,a=e.length;o<a;o+=r){const s=new kg(e.slice(o,o+r),t);i.push(s)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,o=t.length;i<o;i+=r){const a=t[i],s=t[i+1];if(DB(e,a,s))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xx(this.flatCoordinates,0,e,this.stride),this.changed()}}function JB(n,e,t,r,i,o,a){let s,h,g,b,B,S,I;const k=i[o+1],U=[];for(let Q=0,ne=t.length;Q<ne;++Q){const X=t[Q];for(b=n[X-r],S=n[X-r+1],s=e;s<X;s+=r)B=n[s],I=n[s+1],(k<=S&&I<=k||S<=k&&k<=I)&&(g=(k-S)/(I-S)*(B-b)+b,U.push(g)),b=B,S=I}let z=NaN,Y=-1/0;for(U.sort(Fm),b=U[0],s=1,h=U.length;s<h;++s){B=U[s];const Q=Math.abs(B-b);Q>Y&&(g=(b+B)/2,XB(n,e,t,r,g,k)&&(z=g,Y=Q)),b=B}return isNaN(z)&&(z=i[o]),a?(a.push(z,k,Y),a):[z,k,Y]}function CU(n,e,t,r,i){let o=[];for(let a=0,s=t.length;a<s;++a){const h=t[a];o=JB(n,e,h,r,i,2*a,o),e=h[h.length-1]}return o}function aX(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const o=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=o}e+=r,t-=r}}function eO(n,e,t,r){let i=0,o=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const s=n[e],h=n[e+1];i+=(s-o)*(h+a),o=s,a=h}return i===0?void 0:i>0}function tO(n,e,t,r,i){i=i!==void 0?i:!1;for(let o=0,a=t.length;o<a;++o){const s=t[o],h=eO(n,e,s,r);if(o===0){if(i&&h||!i&&!h)return!1}else if(i&&!h||!i&&h)return!1;e=s}return!0}function bU(n,e,t,r,i){for(let o=0,a=t.length;o<a;++o){const s=t[o];if(!tO(n,e,s,r,i))return!1;s.length&&(e=s[s.length-1])}return!0}function A2(n,e,t,r,i){i=i!==void 0?i:!1;for(let o=0,a=t.length;o<a;++o){const s=t[o],h=eO(n,e,s,r);(o===0?i&&h||!i&&!h:i&&!h||!i&&h)&&aX(n,e,s,r),e=s}return e}function v6(n,e,t,r,i){for(let o=0,a=t.length;o<a;++o)e=A2(n,e,t[o],r,i);return e}function xU(n,e){const t=[];let r=0,i=0,o;for(let a=0,s=e.length;a<s;++a){const h=e[a],g=eO(n,r,h,2);if(o===void 0&&(o=g),g===o)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=h}return t}class Qm extends Fg{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Zp(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Qm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Dg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($B(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),HB(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return XB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return mU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),A2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,h_(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=If(this.getExtent());this.flatInteriorPoint_=JB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new kg(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new d_(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let o=0;for(let a=0,s=r.length;a<s;++a){const h=r[a],g=new d_(t.slice(o,h),e);i.push(g),o=h}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;tO(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=A2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=ZB(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Qm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return vU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=G_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function ek(n){if(Lg(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],o=[e,t,e,i,r,i,r,t,e,t];return new Qm(o,"XY",[o.length])}function wU(n,e,t,r){const i=[];let o=Zd();for(let a=0,s=t.length;a<s;++a){const h=t[a];o=LB(n,e,h[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=h[h.length-1]}return i}class p_ extends Fg{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,o=[],a=[];for(let s=0,h=i.length;s<h;++s){const g=i[s],b=o.length,B=g.getEnds();for(let S=0,I=B.length;S<I;++S)B[S]+=b;Zp(o,g.getFlatCoordinates()),a.push(B)}t=i.length===0?this.getLayout():i[0].getLayout(),e=o,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Zp(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,o=t.length;i<o;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new p_(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Dg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ZZ(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),XZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return iX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return tX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),v6(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,g6(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=wU(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=CU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new W_(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;bU(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=v6(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=eX(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new p_(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let o=0,a=r.length;o<a;++o)r[o]-=t;return new Qm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let o=0;for(let a=0,s=r.length;a<s;++a){const h=r[a].slice(),g=h[h.length-1];if(o!==0)for(let B=0,S=h.length;B<S;++B)h[B]-=o;const b=new Qm(t.slice(o,g),e,h);i.push(b),o=g}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return sX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=dU(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const tk=_d();class sh{constructor(e,t,r,i,o,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=o,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?eU(this.flatCoordinates_):LB(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=If(this.getExtent());this.flatInteriorPoints_=JB(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=xU(this.flatCoordinates_,this.ends_),t=wU(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=CU(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=u2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,o=r.length;i<o;++i){const a=r[i],s=u2(e,t,a,2,.5);Zp(this.flatMidpoints_,s),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ma(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=Hl(r)/Hl(t);em(tk,r[0],r[3],i,-i,0,0,0),O0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tk,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new sh(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=LF((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=wx(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=fU(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=ZB(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new sh(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}sh.prototype.getFlatCoordinates=sh.prototype.getOrientedFlatCoordinates;class b0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new b0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class qd{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=nk,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new qd({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=nk,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function lX(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ra(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let O4=null;function MU(n,e){if(!O4){const t=new Dm({color:"rgba(255,255,255,0.4)"}),r=new b0({color:"#3399CC",width:1.25});O4=[new qd({image:new z_({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return O4}function nk(n){return n.getGeometry()}const uX="#333";class Sx{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=ah(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Dm({color:uX}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Sx({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ah(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const vr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},gd={ADD:"add",REMOVE:"remove"},rk={LENGTH:"length"};class GC extends dp{constructor(e,t,r){super(e),this.element=t,this.index=r}}class $p extends fp{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(rk.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new GC(gd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new GC(gd.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new GC(gd.REMOVE,i,e)),this.dispatchEvent(new GC(gd.ADD,t,e))}updateLength_(){this.set(rk.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const Ef={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ta={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class SU extends fp{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ta.OPACITY]=e.opacity!==void 0?e.opacity:1,ra(typeof t[Ta.OPACITY]=="number","Layer opacity must be a number"),t[Ta.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ta.Z_INDEX]=e.zIndex,t[Ta.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ta.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ta.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ta.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Tu(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return go()}getLayerStatesArray(e){return go()}getExtent(){return this.get(Ta.EXTENT)}getMaxResolution(){return this.get(Ta.MAX_RESOLUTION)}getMinResolution(){return this.get(Ta.MIN_RESOLUTION)}getMinZoom(){return this.get(Ta.MIN_ZOOM)}getMaxZoom(){return this.get(Ta.MAX_ZOOM)}getOpacity(){return this.get(Ta.OPACITY)}getSourceState(){return go()}getVisible(){return this.get(Ta.VISIBLE)}getZIndex(){return this.get(Ta.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ta.EXTENT,e)}setMaxResolution(e){this.set(Ta.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ta.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ta.MAX_ZOOM,e)}setMinZoom(e){this.set(Ta.MIN_ZOOM,e)}setOpacity(e){ra(typeof e=="number","Layer opacity must be a number"),this.set(Ta.OPACITY,e)}setVisible(e){this.set(Ta.VISIBLE,e)}setZIndex(e){this.set(Ta.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Vl={ANIMATING:0,INTERACTING:1},ep={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},EU=42,nO=256;function ik(n,e,t){return function(r,i,o,a,s){if(!r)return;if(!i&&!e)return r;const h=e?0:o[0]*i,g=e?0:o[1]*i,b=s?s[0]:0,B=s?s[1]:0;let S=n[0]+h/2+b,I=n[2]-h/2+b,k=n[1]+g/2+B,U=n[3]-g/2+B;S>I&&(S=(I+S)/2,I=S),k>U&&(k=(U+k)/2,U=k);let z=Tu(r[0],S,I),Y=Tu(r[1],k,U);if(a&&t&&i){const Q=30*i;z+=-Q*Math.log(1+Math.max(0,S-r[0])/Q)+Q*Math.log(1+Math.max(0,r[0]-I)/Q),Y+=-Q*Math.log(1+Math.max(0,k-r[1])/Q)+Q*Math.log(1+Math.max(0,r[1]-U)/Q)}return[z,Y]}}function AX(n){return n}function rO(n,e,t,r){const i=ps(e)/t[0],o=Hl(e)/t[1];return r?Math.min(n,Math.max(i,o)):Math.min(n,Math.min(i,o))}function iO(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Tu(r,t/2,e*2)}function cX(n,e,t,r){return e=e!==void 0?e:!0,function(i,o,a,s){if(i!==void 0){const h=n[0],g=n[n.length-1],b=t?rO(h,t,a,r):h;if(s)return e?iO(i,b,g):Tu(i,g,b);const B=Math.min(b,i),S=Math.floor(Ax(n,B,o));return n[S]>b&&S<n.length-1?n[S+1]:n[S]}}}function hX(n,e,t,r,i,o){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(a,s,h,g){if(a!==void 0){const b=i?rO(e,i,h,o):e;if(g)return r?iO(a,b,t):Tu(a,t,b);const B=1e-9,S=Math.ceil(Math.log(e/b)/Math.log(n)-B),I=-s*(.5-B)+.5,k=Math.min(b,a),U=Math.floor(Math.log(e/k)/Math.log(n)+I),z=Math.max(S,U),Y=e/Math.pow(n,z);return Tu(Y,t,b)}}}function ok(n,e,t,r,i){return t=t!==void 0?t:!0,function(o,a,s,h){if(o!==void 0){const g=r?rO(n,r,s,i):n;return!t||!h?Tu(o,e,g):iO(o,g,e)}}}function oO(n){if(n!==void 0)return 0}function sk(n){if(n!==void 0)return n}function dX(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function fX(n){const e=E0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}function BU(n){return Math.pow(n,3)}function Py(n){return 1-BU(1-n)}function pX(n){return 3*n*n-2*n*n*n}function mX(n){return n}const I4=0;class sp extends fp{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=QB(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&AU(),e.center&&(e.center=km(e.center,this.projection_)),e.extent&&(e.extent=Yp(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const s in ep)delete t[s];this.setProperties(t,!0);const r=yX(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=gX(e),o=r.constraint,a=vX(e);this.constraints_={center:i,resolution:o,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),a=o/2*(i[3]-t[3]+t[1]-i[1]),s=o/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-s])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=km(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=km(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const b=arguments[i];b.center&&this.setCenterInternal(b.center),b.zoom!==void 0?this.setZoom(b.zoom):b.resolution&&this.setResolution(b.resolution),b.rotation!==void 0&&this.setRotation(b.rotation)}if(i===t){r&&WC(r,!0);return}let o=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,h=this.targetRotation_;const g=[];for(;i<t;++i){const b=arguments[i],B={start:o,complete:!1,anchor:b.anchor,duration:b.duration!==void 0?b.duration:1e3,easing:b.easing||pX,callback:r};if(b.center&&(B.sourceCenter=a,B.targetCenter=b.center.slice(),a=B.targetCenter),b.zoom!==void 0?(B.sourceResolution=s,B.targetResolution=this.getResolutionForZoom(b.zoom),s=B.targetResolution):b.resolution&&(B.sourceResolution=s,B.targetResolution=b.resolution,s=B.targetResolution),b.rotation!==void 0){B.sourceRotation=h;const S=xg(b.rotation-h+Math.PI,2*Math.PI)-Math.PI;B.targetRotation=h+S,h=B.targetRotation}_X(B)?B.complete=!0:o+=B.duration,g.push(B)}this.animations_.push(g),this.setHint(Vl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Vl.ANIMATING]>0}getInteracting(){return this.hints_[Vl.INTERACTING]>0}cancelAnimations(){this.setHint(Vl.ANIMATING,-this.hints_[Vl.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&WC(i[0].callback,!1),!e)for(let o=0,a=i.length;o<a;++o){const s=i[o];if(!s.complete){e=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let o=!0;for(let a=0,s=i.length;a<s;++a){const h=i[a];if(h.complete)continue;const g=e-h.start;let b=h.duration>0?g/h.duration:1;b>=1?(h.complete=!0,b=1):o=!1;const B=h.easing(b);if(h.sourceCenter){const S=h.sourceCenter[0],I=h.sourceCenter[1],k=h.targetCenter[0],U=h.targetCenter[1];this.nextCenter_=h.targetCenter;const z=S+B*(k-S),Y=I+B*(U-I);this.targetCenter_=[z,Y]}if(h.sourceResolution&&h.targetResolution){const S=B===1?h.targetResolution:h.sourceResolution+B*(h.targetResolution-h.sourceResolution);if(h.anchor){const I=this.getViewportSize_(this.getRotation()),k=this.constraints_.resolution(S,0,I,!0);this.targetCenter_=this.calculateCenterZoom(k,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=S,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){const S=B===1?xg(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+B*(h.targetRotation-h.sourceRotation);if(h.anchor){const I=this.constraints_.rotation(S,!0);this.targetCenter_=this.calculateCenterRotate(I,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=S}if(this.applyTargetState_(!0),t=!0,!h.complete)break}if(o){this.animations_[r]=null,this.setHint(Vl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&WC(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],zB(r,e-this.getRotation()),CZ(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),o=this.getResolution();if(i!==void 0&&o!==void 0){const a=t[0]-e*(t[0]-i[0])/o,s=t[1]-e*(t[1]-i[1])/o;r=[a,s]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&m6(e,this.getProjection())}getCenterInternal(){return this.get(ep.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return qB(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ra(t,"The view center is not defined");const r=this.getResolution();ra(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return ra(i!==void 0,"The view rotation is not defined"),i2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ep.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Yp(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=ps(e)/t[0],i=Hl(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(o){return t/Math.pow(e,o*i)}}getRotation(){return this.get(ep.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(r/i)/t;return function(a){return Math.log(r/a)/t/o}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const o=this.padding_;if(o){const a=this.getViewportSizeMinusPadding_();i=k4(i,this.getViewportSize_(),[a[0]/2+o[3],a[1]/2+o[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const o=Ax(this.resolutions_,e,1);t=o,r=this.resolutions_[o],o==this.resolutions_.length-1?i=2:i=r/this.resolutions_[o+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=Tu(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,Tu(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(ra(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ra(!Lg(e),"Cannot fit empty extent provided as `geometry`");const i=Yp(e,this.getProjection());r=ek(i)}else if(e.getType()==="Circle"){const i=Yp(e.getExtent(),this.getProjection());r=ek(i),r.rotate(this.getRotation(),If(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),o=e.getFlatCoordinates(),a=e.getStride();let s=1/0,h=1/0,g=-1/0,b=-1/0;for(let B=0,S=o.length;B<S;B+=a){const I=o[B]*r-o[B+1]*i,k=o[B]*i+o[B+1]*r;s=Math.min(s,I),h=Math.min(h,k),g=Math.max(g,I),b=Math.max(b,k)}return[s,h,g,b]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const s=this.rotatedExtentForGeometry(e);let h=this.getResolutionForExtentInternal(s,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);h=isNaN(h)?a:Math.max(h,a),h=this.getConstrainedResolution(h,o?0:1);const g=this.getRotation(),b=Math.sin(g),B=Math.cos(g),S=If(s);S[0]+=(i[1]-i[3])/2*h,S[1]+=(i[0]-i[2])/2*h;const I=S[0]*B-S[1]*b,k=S[1]*B+S[0]*b,U=this.getConstrainedCenter([I,k],h),z=t.callback?t.callback:gy;t.duration!==void 0?this.animateInternal({resolution:h,center:U,duration:t.duration,easing:t.easing},z):(this.targetResolution_=h,this.targetCenter_=U,this.applyTargetState_(!1,!0),WC(z,!0))}centerOn(e,t,r){this.centerOnInternal(km(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(k4(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let o;const a=this.padding_;if(a&&e){const s=this.getViewportSizeMinusPadding_(-r),h=k4(e,i,[s[0]/2+a[3],s[1]/2+a[0]],t,r);o=[e[0]-h[0],e[1]-h[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=m6(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&km(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=km(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&km(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,o,r),s=this.constraints_.center(this.targetCenter_,a,o,r,this.calculateCenterShift(this.targetCenter_,a,i,o));this.get(ep.ROTATION)!==i&&this.set(ep.ROTATION,i),this.get(ep.RESOLUTION)!==a&&(this.set(ep.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!s||!this.get(ep.CENTER)||!o2(this.get(ep.CENTER),s))&&this.set(ep.CENTER,s),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),h=this.constraints_.center(this.targetCenter_,s,a,!1,this.calculateCenterShift(this.targetCenter_,s,o,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=h,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==s||this.getRotation()!==o||!this.getCenterInternal()||!o2(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:h,resolution:s,duration:e,easing:Py,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Vl.INTERACTING,1)}endInteraction(e,t,r){r=r&&km(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Vl.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function WC(n,e){setTimeout(function(){n(e)},0)}function gX(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return ik(n.extent,n.constrainOnlyCenter,t)}const e=QB(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ik(t,!1,!1)}return AX}function yX(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:I4,s=n.maxZoom!==void 0?n.maxZoom:28;const h=n.zoomFactor!==void 0?n.zoomFactor:2,g=n.multiWorld!==void 0?n.multiWorld:!1,b=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,B=n.showFullExtent!==void 0?n.showFullExtent:!1,S=QB(n.projection,"EPSG:3857"),I=S.getExtent();let k=n.constrainOnlyCenter,U=n.extent;if(!g&&!U&&S.isGlobal()&&(k=!1,U=I),n.resolutions!==void 0){const z=n.resolutions;t=z[a],r=z[s]!==void 0?z[s]:z[z.length-1],n.constrainResolution?e=cX(z,b,!k&&U,B):e=ok(t,r,b,!k&&U,B)}else{const Y=(I?Math.max(ps(I),Hl(I)):360*R0.degrees/S.getMetersPerUnit())/nO/Math.pow(2,I4),Q=Y/Math.pow(2,28-I4);t=n.maxResolution,t!==void 0?a=0:t=Y/Math.pow(h,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(h,s):r=Y/Math.pow(h,s):r=Q),s=a+Math.floor(Math.log(t/r)/Math.log(h)),r=t/Math.pow(h,s-a),n.constrainResolution?e=hX(h,t,r,b,!k&&U,B):e=ok(t,r,b,!k&&U,B)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:h}}function vX(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?fX():t===!1?sk:typeof t=="number"?dX(t):sk}return oO}function _X(n){return!(n.sourceCenter&&n.targetCenter&&!o2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function k4(n,e,t,r,i){const o=Math.cos(-i);let a=Math.sin(-i),s=n[0]*o-n[1]*a,h=n[1]*o+n[0]*a;s+=(e[0]/2-t[0])*r,h+=(t[1]-e[1]/2)*r,a=-a;const g=s*o-h*a,b=h*o+s*a;return[g,b]}class Ry extends SU{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ta.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ta.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ra(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=ks(e,oo.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof sp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const o=this.getExtent();return sO(i,t.viewState)&&(!o||ku(o,t.extent))}getAttributions(e){var o;if(!this.isVisible(e))return[];const t=(o=this.getSource())==null?void 0:o.getAttributions();if(!t)return[];const r=e instanceof sp?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ta.MAP,e)}getMapInternal(){return this.get(Ta.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ra(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ra(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ks(e,Ef.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=ks(this,oo.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);ra(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Ta.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function sO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}function OU(n,e,t=0,r=n.length-1,i=CX){for(;r>t;){if(r-t>600){const h=r-t+1,g=e-t+1,b=Math.log(h),B=.5*Math.exp(2*b/3),S=.5*Math.sqrt(b*B*(h-B)/h)*(g-h/2<0?-1:1),I=Math.max(t,Math.floor(e-g*B/h+S)),k=Math.min(r,Math.floor(e+(h-g)*B/h+S));OU(n,e,I,k,i)}const o=n[e];let a=t,s=r;for(uv(n,t,e),i(n[r],o)>0&&uv(n,t,r);a<s;){for(uv(n,a,s),a++,s--;i(n[a],o)<0;)a++;for(;i(n[s],o)>0;)s--}i(n[t],o)===0?uv(n,t,s):(s++,uv(n,s,r)),s<=e&&(t=s+1),e<=s&&(r=s-1)}}function uv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function CX(n,e){return n<e?-1:n>e?1:0}let IU=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!qC(e,t))return r;const i=this.toBBox,o=[];for(;t;){for(let a=0;a<t.children.length;a++){const s=t.children[a],h=t.leaf?i(s):s;qC(e,h)&&(t.leaf?r.push(s):P4(e,h)?this._all(s,r):o.push(s))}t=o.pop()}return r}collides(e){let t=this.data;if(!qC(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const o=t.children[i],a=t.leaf?this.toBBox(o):o;if(qC(e,a)){if(t.leaf||P4(e,a))return!0;r.push(o)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=L1([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),o=[],a=[];let s,h,g;for(;r||o.length;){if(r||(r=o.pop(),h=o[o.length-1],s=a.pop(),g=!0),r.leaf){const b=bX(e,r.children,t);if(b!==-1)return r.children.splice(b,1),o.push(r),this._condense(o),this}!g&&!r.leaf&&P4(r,i)?(o.push(r),a.push(s),s=0,h=r,r=r.children[0]):h?(s++,r=h.children[s],g=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const o=r-t+1;let a=this._maxEntries,s;if(o<=a)return s=L1(e.slice(t,r+1)),s1(s,this.toBBox),s;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),s=L1([]),s.leaf=!1,s.height=i;const h=Math.ceil(o/a),g=h*Math.ceil(Math.sqrt(a));ak(e,t,r,g,this.compareMinX);for(let b=t;b<=r;b+=g){const B=Math.min(b+g-1,r);ak(e,b,B,h,this.compareMinY);for(let S=b;S<=B;S+=h){const I=Math.min(S+h-1,B);s.children.push(this._build(e,S,I,i-1))}}return s1(s,this.toBBox),s}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let o=1/0,a=1/0,s;for(let h=0;h<t.children.length;h++){const g=t.children[h],b=T4(g),B=MX(e,g)-b;B<a?(a=B,o=b<o?b:o,s=g):B===a&&b<o&&(o=b,s=g)}t=s||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),o=[],a=this._chooseSubtree(i,this.data,t,o);for(a.children.push(e),Mv(a,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)}_split(e,t){const r=e[t],i=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,i);const a=this._chooseSplitIndex(r,o,i),s=L1(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,s1(r,this.toBBox),s1(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)}_splitRoot(e,t){this.data=L1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,s1(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,o=1/0,a=1/0;for(let s=t;s<=r-t;s++){const h=wv(e,0,s,this.toBBox),g=wv(e,s,r,this.toBBox),b=SX(h,g),B=T4(h)+T4(g);b<o?(o=b,i=s,a=B<a?B:a):b===o&&B<a&&(a=B,i=s)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:xX,o=e.leaf?this.compareMinY:wX,a=this._allDistMargin(e,t,r,i),s=this._allDistMargin(e,t,r,o);a<s&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const o=this.toBBox,a=wv(e,0,t,o),s=wv(e,r-t,r,o);let h=QC(a)+QC(s);for(let g=t;g<r-t;g++){const b=e.children[g];Mv(a,e.leaf?o(b):b),h+=QC(a)}for(let g=r-t-1;g>=t;g--){const b=e.children[g];Mv(s,e.leaf?o(b):b),h+=QC(s)}return h}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Mv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():s1(e[t],this.toBBox)}};function bX(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function s1(n,e){wv(n,0,n.children.length,e,n)}function wv(n,e,t,r,i){i||(i=L1(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=e;o<t;o++){const a=n.children[o];Mv(i,n.leaf?r(a):a)}return i}function Mv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function xX(n,e){return n.minX-e.minX}function wX(n,e){return n.minY-e.minY}function T4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function QC(n){return n.maxX-n.minX+(n.maxY-n.minY)}function MX(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function SX(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,o-r)}function P4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function qC(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function L1(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ak(n,e,t,r,i){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;OU(n,a,e,t,i),o.push(e,a,a,t)}}let zg=0;const Nh=1<<zg++,Us=1<<zg++,yd=1<<zg++,ap=1<<zg++,Tg=1<<zg++,Sv=1<<zg++,YC=Math.pow(2,zg)-1,aO={[Nh]:"boolean",[Us]:"number",[yd]:"string",[ap]:"color",[Tg]:"number[]",[Sv]:"size"},EX=Object.keys(aO).map(Number).sort(Fm);function BX(n){return n in aO}function Ev(n){const e=[];for(const t of EX)Bv(n,t)&&e.push(aO[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Bv(n,e){return(n&e)===e}function u0(n,e){return n===e}class zA{constructor(e,t){if(!BX(e))throw new Error(`literal expressions must have a specific type, got ${Ev(e)}`);this.type=e,this.value=t}}class OX{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function kU(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Rc(n,e,t){switch(typeof n){case"boolean":{if(u0(e,yd))return new zA(yd,n?"true":"false");if(!Bv(e,Nh))throw new Error(`got a boolean, but expected ${Ev(e)}`);return new zA(Nh,n)}case"number":{if(u0(e,Sv))return new zA(Sv,ah(n));if(u0(e,Nh))return new zA(Nh,!!n);if(u0(e,yd))return new zA(yd,n.toString());if(!Bv(e,Us))throw new Error(`got a number, but expected ${Ev(e)}`);return new zA(Us,n)}case"string":{if(u0(e,ap))return new zA(ap,BB(n));if(u0(e,Nh))return new zA(Nh,!!n);if(!Bv(e,yd))throw new Error(`got a string, but expected ${Ev(e)}`);return new zA(yd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return zX(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(u0(e,Sv)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new zA(Sv,n)}if(u0(e,ap)){if(n.length===3)return new zA(ap,[...n,1]);if(n.length===4)return new zA(ap,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Bv(e,Tg))throw new Error(`got an array of numbers, but expected ${Ev(e)}`);return new zA(Tg,n)}const jn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},IX={[jn.Get]:po(Jo(1,1/0),lk),[jn.Var]:po(Jo(1,1),kX),[jn.Has]:po(Jo(1,1/0),lk),[jn.Id]:po(TX,a1),[jn.Concat]:po(Jo(2,1/0),pa(yd)),[jn.GeometryType]:po(PX,a1),[jn.LineMetric]:po(a1),[jn.Resolution]:po(a1),[jn.Zoom]:po(a1),[jn.Time]:po(a1),[jn.Any]:po(Jo(2,1/0),pa(Nh)),[jn.All]:po(Jo(2,1/0),pa(Nh)),[jn.Not]:po(Jo(1,1),pa(Nh)),[jn.Equal]:po(Jo(2,2),pa(YC)),[jn.NotEqual]:po(Jo(2,2),pa(YC)),[jn.GreaterThan]:po(Jo(2,2),pa(Us)),[jn.GreaterThanOrEqualTo]:po(Jo(2,2),pa(Us)),[jn.LessThan]:po(Jo(2,2),pa(Us)),[jn.LessThanOrEqualTo]:po(Jo(2,2),pa(Us)),[jn.Multiply]:po(Jo(2,1/0),uk),[jn.Coalesce]:po(Jo(2,1/0),uk),[jn.Divide]:po(Jo(2,2),pa(Us)),[jn.Add]:po(Jo(2,1/0),pa(Us)),[jn.Subtract]:po(Jo(2,2),pa(Us)),[jn.Clamp]:po(Jo(3,3),pa(Us)),[jn.Mod]:po(Jo(2,2),pa(Us)),[jn.Pow]:po(Jo(2,2),pa(Us)),[jn.Abs]:po(Jo(1,1),pa(Us)),[jn.Floor]:po(Jo(1,1),pa(Us)),[jn.Ceil]:po(Jo(1,1),pa(Us)),[jn.Round]:po(Jo(1,1),pa(Us)),[jn.Sin]:po(Jo(1,1),pa(Us)),[jn.Cos]:po(Jo(1,1),pa(Us)),[jn.Atan]:po(Jo(1,2),pa(Us)),[jn.Sqrt]:po(Jo(1,1),pa(Us)),[jn.Match]:po(Jo(4,1/0),Ak,KX),[jn.Between]:po(Jo(3,3),pa(Us)),[jn.Interpolate]:po(Jo(6,1/0),Ak,DX),[jn.Case]:po(Jo(3,1/0),RX,LX),[jn.In]:po(Jo(2,2),FX),[jn.Number]:po(Jo(1,1/0),pa(YC)),[jn.String]:po(Jo(1,1/0),pa(YC)),[jn.Array]:po(Jo(1,1/0),pa(Us)),[jn.Color]:po(Jo(1,4),pa(Us)),[jn.Band]:po(Jo(1,3),pa(Us)),[jn.Palette]:po(Jo(2,2),UX),[jn.ToString]:po(Jo(1,1),pa(Nh|Us|yd|ap))};function lk(n,e,t){const r=n.length-1,i=new Array(r);for(let o=0;o<r;++o){const a=n[o+1];switch(typeof a){case"number":{i[o]=new zA(Us,a);break}case"string":{i[o]=new zA(yd,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}o===0&&t.properties.add(String(a))}return i}function kX(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new zA(yd,r)]}function TX(n,e,t){t.featureId=!0}function PX(n,e,t){t.geometryType=!0}function a1(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Jo(n,e){return function(t,r,i){const o=t[0],a=t.length-1;if(n===e){if(a!==n){const s=n===1?"":"s";throw new Error(`expected ${n} argument${s} for ${o}, got ${a}`)}}else if(a<n||a>e){const s=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${s} arguments for ${o}, got ${a}`)}}}function uk(n,e,t){const r=n.length-1,i=new Array(r);for(let o=0;o<r;++o){const a=Rc(n[o+1],e,t);i[o]=a}return i}function pa(n){return function(e,t,r){const i=e.length-1,o=new Array(i);for(let a=0;a<i;++a){const s=Rc(e[a+1],n,r);o[a]=s}return o}}function RX(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function Ak(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function KX(n,e,t){const r=n.length-1,i=yd|Us|Nh,o=Rc(n[1],i,t),a=Rc(n[n.length-1],e,t),s=new Array(r-2);for(let h=0;h<r-2;h+=2){try{const g=Rc(n[h+2],o.type,t);s[h]=g}catch(g){throw new Error(`failed to parse argument ${h+1} of match expression: ${g.message}`)}try{const g=Rc(n[h+3],a.type,t);s[h+1]=g}catch(g){throw new Error(`failed to parse argument ${h+2} of match expression: ${g.message}`)}}return[o,...s,a]}function DX(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const h=r[1];if(typeof h!="number"||h<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(h)} instead`);i=h;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const o=new zA(Us,i);let a;try{a=Rc(n[2],Us,t)}catch(h){throw new Error(`failed to parse argument 1 in interpolate expression: ${h.message}`)}const s=new Array(n.length-3);for(let h=0;h<s.length;h+=2){try{const g=Rc(n[h+3],Us,t);s[h]=g}catch(g){throw new Error(`failed to parse argument ${h+2} for interpolate expression: ${g.message}`)}try{const g=Rc(n[h+4],e,t);s[h+1]=g}catch(g){throw new Error(`failed to parse argument ${h+3} for interpolate expression: ${g.message}`)}}return[o,a,...s]}function LX(n,e,t){const r=Rc(n[n.length-1],e,t),i=new Array(n.length-1);for(let o=0;o<i.length-1;o+=2){try{const a=Rc(n[o+1],Nh,t);i[o]=a}catch(a){throw new Error(`failed to parse argument ${o} of case expression: ${a.message}`)}try{const a=Rc(n[o+2],r.type,t);i[o+1]=a}catch(a){throw new Error(`failed to parse argument ${o+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function FX(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=yd}else i=Us;const o=new Array(r.length);for(let s=0;s<o.length;s++)try{const h=Rc(r[s],i,t);o[s]=h}catch(h){throw new Error(`failed to parse haystack item ${s} for "in" expression: ${h.message}`)}return[Rc(n[1],i,t),...o]}function UX(n,e,t){let r;try{r=Rc(n[1],Us,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const o=new Array(i.length);for(let a=0;a<o.length;a++){let s;try{s=Rc(i[a],ap,t)}catch(h){throw new Error(`failed to parse color at index ${a} in palette expression: ${h.message}`)}if(!(s instanceof zA))throw new Error(`the palette color at index ${a} must be a literal value`);o[a]=s}return[r,...o]}function po(...n){return function(e,t,r){const i=e[0];let o;for(let a=0;a<n.length;a++){const s=n[a](e,t,r);if(a==n.length-1){if(!s)throw new Error("expected last argument validator to return the parsed args");o=s}}return new OX(t,i,...o)}}function zX(n,e,t){const r=n[0],i=IX[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function TU(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return TU(n.getGeometries()[0]);default:return""}}function PU(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function qm(n,e,t){const r=Rc(n,e,t);return cp(r)}function cp(n,e){if(n instanceof zA){if(n.type===ap&&typeof n.value=="string"){const r=BB(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case jn.Number:case jn.String:case jn.Coalesce:return jX(n);case jn.Get:case jn.Var:case jn.Has:return NX(n);case jn.Id:return r=>r.featureId;case jn.GeometryType:return r=>r.geometryType;case jn.Concat:{const r=n.args.map(i=>cp(i));return i=>"".concat(...r.map(o=>o(i).toString()))}case jn.Resolution:return r=>r.resolution;case jn.Any:case jn.All:case jn.Between:case jn.In:case jn.Not:return WX(n);case jn.Equal:case jn.NotEqual:case jn.LessThan:case jn.LessThanOrEqualTo:case jn.GreaterThan:case jn.GreaterThanOrEqualTo:return GX(n);case jn.Multiply:case jn.Divide:case jn.Add:case jn.Subtract:case jn.Clamp:case jn.Mod:case jn.Pow:case jn.Abs:case jn.Floor:case jn.Ceil:case jn.Round:case jn.Sin:case jn.Cos:case jn.Atan:case jn.Sqrt:return QX(n);case jn.Case:return qX(n);case jn.Match:return YX(n);case jn.Interpolate:return $X(n);case jn.ToString:return VX(n);default:throw new Error(`Unsupported operator ${t}`)}}function jX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=cp(n.args[o]);switch(t){case jn.Coalesce:return o=>{for(let a=0;a<r;++a){const s=i[a](o);if(typeof s<"u"&&s!==null)return s}throw new Error("Expected one of the values to be non-null")};case jn.Number:case jn.String:return o=>{for(let a=0;a<r;++a){const s=i[a](o);if(typeof s===t)return s}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function NX(n,e){const r=n.args[0].value;switch(n.operator){case jn.Get:return i=>{const o=n.args;let a=i.properties[r];for(let s=1,h=o.length;s<h;++s){const b=o[s].value;a=a[b]}return a};case jn.Var:return i=>i.variables[r];case jn.Has:return i=>{const o=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let s=1,h=o.length;s<h;++s){const b=o[s].value;if(!a||!Object.hasOwn(a,b))return!1;a=a[b]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function GX(n,e){const t=n.operator,r=cp(n.args[0]),i=cp(n.args[1]);switch(t){case jn.Equal:return o=>r(o)===i(o);case jn.NotEqual:return o=>r(o)!==i(o);case jn.LessThan:return o=>r(o)<i(o);case jn.LessThanOrEqualTo:return o=>r(o)<=i(o);case jn.GreaterThan:return o=>r(o)>i(o);case jn.GreaterThanOrEqualTo:return o=>r(o)>=i(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function WX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=cp(n.args[o]);switch(t){case jn.Any:return o=>{for(let a=0;a<r;++a)if(i[a](o))return!0;return!1};case jn.All:return o=>{for(let a=0;a<r;++a)if(!i[a](o))return!1;return!0};case jn.Between:return o=>{const a=i[0](o),s=i[1](o),h=i[2](o);return a>=s&&a<=h};case jn.In:return o=>{const a=i[0](o);for(let s=1;s<r;++s)if(a===i[s](o))return!0;return!1};case jn.Not:return o=>!i[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function QX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=cp(n.args[o]);switch(t){case jn.Multiply:return o=>{let a=1;for(let s=0;s<r;++s)a*=i[s](o);return a};case jn.Divide:return o=>i[0](o)/i[1](o);case jn.Add:return o=>{let a=0;for(let s=0;s<r;++s)a+=i[s](o);return a};case jn.Subtract:return o=>i[0](o)-i[1](o);case jn.Clamp:return o=>{const a=i[0](o),s=i[1](o);if(a<s)return s;const h=i[2](o);return a>h?h:a};case jn.Mod:return o=>i[0](o)%i[1](o);case jn.Pow:return o=>Math.pow(i[0](o),i[1](o));case jn.Abs:return o=>Math.abs(i[0](o));case jn.Floor:return o=>Math.floor(i[0](o));case jn.Ceil:return o=>Math.ceil(i[0](o));case jn.Round:return o=>Math.round(i[0](o));case jn.Sin:return o=>Math.sin(i[0](o));case jn.Cos:return o=>Math.cos(i[0](o));case jn.Atan:return r===2?o=>Math.atan2(i[0](o),i[1](o)):o=>Math.atan(i[0](o));case jn.Sqrt:return o=>Math.sqrt(i[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function qX(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=cp(n.args[i]);return i=>{for(let o=0;o<t-1;o+=2)if(r[o](i))return r[o+1](i);return r[t-1](i)}}function YX(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=cp(n.args[i]);return i=>{const o=r[0](i);for(let a=1;a<t;a+=2)if(o===r[a](i))return r[a+1](i);return r[t-1](i)}}function $X(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=cp(n.args[i]);return i=>{const o=r[0](i),a=r[1](i);let s,h;for(let g=2;g<t;g+=2){const b=r[g](i);let B=r[g+1](i);const S=Array.isArray(B);if(S&&(B=PH(B)),b>=a)return g===2?B:S?HX(o,a,s,h,b,B):Ov(o,a,s,h,b,B);s=b,h=B}return h}}function VX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=cp(n.args[o]);switch(t){case jn.ToString:return o=>{const a=i[0](o);return n.args[0].type===ap?OB(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Ov(n,e,t,r,i,o){const a=i-t;if(a===0)return r;const s=e-t,h=n===1?s/a:(Math.pow(n,s)-1)/(Math.pow(n,a)-1);return r+h*(o-r)}function HX(n,e,t,r,i,o){if(i-t===0)return r;const s=T7(r),h=T7(o);let g=h[2]-s[2];g>180?g-=360:g<-180&&(g+=360);const b=[Ov(n,e,t,s[0],i,h[0]),Ov(n,e,t,s[1],i,h[1]),s[2]+Ov(n,e,t,0,i,g),Ov(n,e,t,r[3],i,o[3])];return UF(RH(b))}function ZX(n){return!0}function XX(n){const e=kU(),t=JX(n,e),r=PU();return function(i,o){if(r.properties=i.getPropertiesInternal(),r.resolution=o,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=TU(i.getGeometry())),t(r)}}function ck(n){const e=kU(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=_6(n[a],e);const i=PU(),o=new Array(t);return function(a,s){if(i.properties=a.getPropertiesInternal(),i.resolution=s,e.featureId){const g=a.getId();g!==void 0?i.featureId=g:i.featureId=null}let h=0;for(let g=0;g<t;++g){const b=r[g](i);b&&(o[h]=b,h+=1)}return o.length=h,o}}function JX(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const o=n[i],a="filter"in o?qm(o.filter,Nh,e):ZX;let s;if(Array.isArray(o.style)){const h=o.style.length;s=new Array(h);for(let g=0;g<h;++g)s[g]=_6(o.style[g],e)}else s=[_6(o.style,e)];r[i]={filter:a,styles:s}}return function(i){const o=[];let a=!1;for(let s=0;s<t;++s){const h=r[s].filter;if(h(i)&&!(n[s].else&&a)){a=!0;for(const g of r[s].styles){const b=g(i);b&&o.push(b)}}}return o}}function _6(n,e){const t=m_(n,"",e),r=g_(n,"",e),i=eJ(n,e),o=tJ(n,e),a=vd(n,"z-index",e);if(!t&&!r&&!i&&!o&&!T0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const s=new qd;return function(h){let g=!0;if(t){const b=t(h);b&&(g=!1),s.setFill(b)}if(r){const b=r(h);b&&(g=!1),s.setStroke(b)}if(i){const b=i(h);b&&(g=!1),s.setText(b)}if(o){const b=o(h);b&&(g=!1),s.setImage(b)}return a&&s.setZIndex(a(h)),g?null:s}}function m_(n,e,t){let r;if(e+"fill-pattern-src"in n)r=oJ(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;r=lO(n,e+"fill-color",t)}if(!r)return null;const i=new Dm;return function(o){const a=r(o);return a===EB?null:(i.setColor(a),i)}}function g_(n,e,t){const r=vd(n,e+"stroke-width",t),i=lO(n,e+"stroke-color",t);if(!r&&!i)return null;const o=Pm(n,e+"stroke-line-cap",t),a=Pm(n,e+"stroke-line-join",t),s=RU(n,e+"stroke-line-dash",t),h=vd(n,e+"stroke-line-dash-offset",t),g=vd(n,e+"stroke-miter-limit",t),b=new b0;return function(B){if(i){const S=i(B);if(S===EB)return null;b.setColor(S)}if(r&&b.setWidth(r(B)),o){const S=o(B);if(S!=="butt"&&S!=="round"&&S!=="square")throw new Error("Expected butt, round, or square line cap");b.setLineCap(S)}if(a){const S=a(B);if(S!=="bevel"&&S!=="round"&&S!=="miter")throw new Error("Expected bevel, round, or miter line join");b.setLineJoin(S)}return s&&b.setLineDash(s(B)),h&&b.setLineDashOffset(h(B)),g&&b.setMiterLimit(g(B)),b}}function eJ(n,e){const t="text-",r=Pm(n,t+"value",e);if(!r)return null;const i=m_(n,t,e),o=m_(n,t+"background-",e),a=g_(n,t,e),s=g_(n,t+"background-",e),h=Pm(n,t+"font",e),g=vd(n,t+"max-angle",e),b=vd(n,t+"offset-x",e),B=vd(n,t+"offset-y",e),S=ry(n,t+"overflow",e),I=Pm(n,t+"placement",e),k=vd(n,t+"repeat",e),U=Ex(n,t+"scale",e),z=ry(n,t+"rotate-with-view",e),Y=vd(n,t+"rotation",e),Q=Pm(n,t+"align",e),ne=Pm(n,t+"justify",e),X=Pm(n,t+"baseline",e),q=ry(n,t+"keep-upright",e),J=RU(n,t+"padding",e),N=Bx(n,t+"declutter-mode"),ie=new Sx({declutterMode:N});return function(he){if(ie.setText(r(he)),i&&ie.setFill(i(he)),o&&ie.setBackgroundFill(o(he)),a&&ie.setStroke(a(he)),s&&ie.setBackgroundStroke(s(he)),h&&ie.setFont(h(he)),g&&ie.setMaxAngle(g(he)),b&&ie.setOffsetX(b(he)),B&&ie.setOffsetY(B(he)),S&&ie.setOverflow(S(he)),I){const ce=I(he);if(ce!=="point"&&ce!=="line")throw new Error("Expected point or line for text-placement");ie.setPlacement(ce)}if(k&&ie.setRepeat(k(he)),U&&ie.setScale(U(he)),z&&ie.setRotateWithView(z(he)),Y&&ie.setRotation(Y(he)),Q){const ce=Q(he);if(ce!=="left"&&ce!=="center"&&ce!=="right"&&ce!=="end"&&ce!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ie.setTextAlign(ce)}if(ne){const ce=ne(he);if(ce!=="left"&&ce!=="right"&&ce!=="center")throw new Error("Expected left, right, or center for text-justify");ie.setJustify(ce)}if(X){const ce=X(he);if(ce!=="bottom"&&ce!=="top"&&ce!=="middle"&&ce!=="alphabetic"&&ce!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ie.setTextBaseline(ce)}return J&&ie.setPadding(J(he)),q&&ie.setKeepUpright(q(he)),ie}}function tJ(n,e){return"icon-src"in n?nJ(n,e):"shape-points"in n?rJ(n,e):"circle-radius"in n?iJ(n,e):null}function nJ(n,e){const t="icon-",r=t+"src",i=KU(n[r],r),o=c2(n,t+"anchor",e),a=Ex(n,t+"scale",e),s=vd(n,t+"opacity",e),h=c2(n,t+"displacement",e),g=vd(n,t+"rotation",e),b=ry(n,t+"rotate-with-view",e),B=dk(n,t+"anchor-origin"),S=fk(n,t+"anchor-x-units"),I=fk(n,t+"anchor-y-units"),k=uJ(n,t+"color"),U=aJ(n,t+"cross-origin"),z=lJ(n,t+"offset"),Y=dk(n,t+"offset-origin"),Q=h2(n,t+"width"),ne=h2(n,t+"height"),X=sJ(n,t+"size"),q=Bx(n,t+"declutter-mode"),J=new r2({src:i,anchorOrigin:B,anchorXUnits:S,anchorYUnits:I,color:k,crossOrigin:U,offset:z,offsetOrigin:Y,height:ne,width:Q,size:X,declutterMode:q});return function(N){return s&&J.setOpacity(s(N)),h&&J.setDisplacement(h(N)),g&&J.setRotation(g(N)),b&&J.setRotateWithView(b(N)),a&&J.setScale(a(N)),o&&J.setAnchor(o(N)),J}}function rJ(n,e){const t="shape-",r=t+"points",i=t+"radius",o=C6(n[r],r),a=C6(n[i],i),s=m_(n,t,e),h=g_(n,t,e),g=Ex(n,t+"scale",e),b=c2(n,t+"displacement",e),B=vd(n,t+"rotation",e),S=ry(n,t+"rotate-with-view",e),I=h2(n,t+"radius2"),k=h2(n,t+"angle"),U=Bx(n,t+"declutter-mode"),z=new fx({points:o,radius:a,radius2:I,angle:k,declutterMode:U});return function(Y){return s&&z.setFill(s(Y)),h&&z.setStroke(h(Y)),b&&z.setDisplacement(b(Y)),B&&z.setRotation(B(Y)),S&&z.setRotateWithView(S(Y)),g&&z.setScale(g(Y)),z}}function iJ(n,e){const t="circle-",r=m_(n,t,e),i=g_(n,t,e),o=vd(n,t+"radius",e),a=Ex(n,t+"scale",e),s=c2(n,t+"displacement",e),h=vd(n,t+"rotation",e),g=ry(n,t+"rotate-with-view",e),b=Bx(n,t+"declutter-mode"),B=new z_({radius:5,declutterMode:b});return function(S){return o&&B.setRadius(o(S)),r&&B.setFill(r(S)),i&&B.setStroke(i(S)),s&&B.setDisplacement(s(S)),h&&B.setRotation(h(S)),g&&B.setRotateWithView(g(S)),a&&B.setScale(a(S)),B}}function vd(n,e,t){if(!(e in n))return;const r=qm(n[e],Us,t);return function(i){return C6(r(i),e)}}function Pm(n,e,t){if(!(e in n))return null;const r=qm(n[e],yd,t);return function(i){return KU(r(i),e)}}function oJ(n,e,t){const r=Pm(n,e+"pattern-src",t),i=hk(n,e+"pattern-offset",t),o=hk(n,e+"pattern-size",t),a=lO(n,e+"color",t);return function(s){return{src:r(s),offset:i&&i(s),size:o&&o(s),color:a&&a(s)}}}function ry(n,e,t){if(!(e in n))return null;const r=qm(n[e],Nh,t);return function(i){const o=r(i);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function lO(n,e,t){if(!(e in n))return null;const r=qm(n[e],ap,t);return function(i){return DU(r(i),e)}}function RU(n,e,t){if(!(e in n))return null;const r=qm(n[e],Tg,t);return function(i){return Q_(r(i),e)}}function c2(n,e,t){if(!(e in n))return null;const r=qm(n[e],Tg,t);return function(i){const o=Q_(r(i),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function hk(n,e,t){if(!(e in n))return null;const r=qm(n[e],Tg,t);return function(i){return LU(r(i),e)}}function Ex(n,e,t){if(!(e in n))return null;const r=qm(n[e],Tg|Us,t);return function(i){return AJ(r(i),e)}}function h2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function sJ(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return ah(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function aJ(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function dk(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function fk(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function lJ(n,e){const t=n[e];if(t!==void 0)return Q_(t,e)}function Bx(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function uJ(n,e){const t=n[e];if(t!==void 0)return DU(t,e)}function Q_(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function KU(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function C6(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function DU(n,e){if(typeof n=="string")return n;const t=Q_(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function LU(n,e){const t=Q_(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function AJ(n,e){return typeof n=="number"?n:LU(n,e)}const pk={RENDER_ORDER:"renderOrder"};class uO extends Ry{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(pk.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new IU(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(pk.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?MU:e;const t=cJ(e);this.styleFunction_=e===null?void 0:lX(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function cJ(n){if(n===void 0)return MU;if(!n)return null;if(typeof n=="function"||n instanceof qd)return n;if(!Array.isArray(n))return ck([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof qd){const i=new Array(e);for(let o=0;o<e;++o){const a=n[o];if(!(a instanceof qd))throw new Error("Expected a list of style instances");i[o]=a}return i}if("style"in t){const i=new Array(e);for(let o=0;o<e;++o){const a=n[o];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[o]=a}return XX(i)}return ck(n)}const qi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},$C=[qi.FILL],x0=[qi.STROKE],gg=[qi.BEGIN_PATH],mk=[qi.CLOSE_PATH];class FU{drawCustom(e,t,r,i,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class q_ extends FU{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,o=this.coordinates;let a=o.length;for(let s=0,h=e.length;s<h;s+=t)i[0]=e[s],i[1]=e[s+1],Og(r,i)&&(o[a++]=i[0],o[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,o,a){const s=this.coordinates;let h=s.length;const g=this.getBufferedMaxExtent();a&&(t+=i);let b=e[t],B=e[t+1];const S=this.tmpCoordinate_;let I=!0,k,U,z;for(k=t+i;k<r;k+=i)S[0]=e[k],S[1]=e[k+1],z=A6(g,S),z!==U?(I&&(s[h++]=b,s[h++]=B,I=!1),s[h++]=S[0],s[h++]=S[1]):z===Ac.INTERSECTING?(s[h++]=S[0],s[h++]=S[1],I=!1):I=!0,b=S[0],B=S[1],U=z;return(o&&I||k===t+i)&&(s[h++]=b,s[h++]=B),h}drawCustomCoordinates_(e,t,r,i,o){for(let a=0,s=r.length;a<s;++a){const h=r[a],g=this.appendFlatLineCoordinates(e,t,h,i,!1,!1);o.push(g),t=h}return t}drawCustom(e,t,r,i,o){this.beginGeometry(e,t,o);const a=e.getType(),s=e.getStride(),h=this.coordinates.length;let g,b,B,S,I;switch(a){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),S=[];const k=e.getEndss();I=0;for(let U=0,z=k.length;U<z;++U){const Y=[];I=this.drawCustomCoordinates_(g,I,k[U],s,Y),S.push(Y)}this.instructions.push([qi.CUSTOM,h,S,e,r,g6,o]),this.hitDetectionInstructions.push([qi.CUSTOM,h,S,e,i||r,g6,o]);break;case"Polygon":case"MultiLineString":B=[],g=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),I=this.drawCustomCoordinates_(g,0,e.getEnds(),s,B),this.instructions.push([qi.CUSTOM,h,B,e,r,h_,o]),this.hitDetectionInstructions.push([qi.CUSTOM,h,B,e,i||r,h_,o]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),b=this.appendFlatLineCoordinates(g,0,g.length,s,!1,!1),this.instructions.push([qi.CUSTOM,h,b,e,r,C0,o]),this.hitDetectionInstructions.push([qi.CUSTOM,h,b,e,i||r,C0,o]);break;case"MultiPoint":g=e.getFlatCoordinates(),b=this.appendFlatPointCoordinates(g,s),b>h&&(this.instructions.push([qi.CUSTOM,h,b,e,r,C0,o]),this.hitDetectionInstructions.push([qi.CUSTOM,h,b,e,i||r,C0,o]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),b=this.coordinates.length,this.instructions.push([qi.CUSTOM,h,b,e,r,void 0,o]),this.hitDetectionInstructions.push([qi.CUSTOM,h,b,e,i||r,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[qi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[qi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,o,a=-1;for(t=0;t<r;++t)i=e[t],o=i[0],o==qi.END_GEOMETRY?a=t:o==qi.BEGIN_GEOMETRY&&(i[2]=t,MH(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(e,t){const r=this.state;if(e){const i=e.getColor();r.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,r.fillStyle=qp(i||md)}else r.fillStyle=void 0;if(t){const i=t.getColor();r.strokeStyle=qp(i||s_);const o=t.getLineCap();r.lineCap=o!==void 0?o:Cy;const a=t.getLineDash();r.lineDash=a?a.slice():Um;const s=t.getLineDashOffset();r.lineDashOffset=s||zm;const h=t.getLineJoin();r.lineJoin=h!==void 0?h:by;const g=t.getWidth();r.lineWidth=g!==void 0?g:l_;const b=t.getMiterLimit();r.miterLimit=b!==void 0?b:o_,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const t=e.fillStyle,r=[qi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[qi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,o=e.lineDash,a=e.lineDashOffset,s=e.lineJoin,h=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||o!=e.currentLineDash&&!K0(e.currentLineDash,o)||e.currentLineDashOffset!=a||e.currentLineJoin!=s||e.currentLineWidth!=h||e.currentMiterLimit!=g)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=o,e.currentLineDashOffset=a,e.currentLineJoin=s,e.currentLineWidth=h,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[qi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=JF(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;B0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class hJ extends q_{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Og(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),o=e.getStride(),a=this.coordinates.length,s=this.appendFlatPointCoordinates(i,o);this.instructions.push([qi.DRAW_IMAGE,a,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,a,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),o=[];for(let h=0,g=i.length;h<g;h+=e.getStride())(!this.maxExtent||Og(this.maxExtent,i.slice(h,h+2)))&&o.push(i[h],i[h+1]);const a=this.coordinates.length,s=this.appendFlatPointCoordinates(o,2);this.instructions.push([qi.DRAW_IMAGE,a,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,a,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class dJ extends q_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const o=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),s=[qi.MOVE_TO_LINE_TO,o,a];return this.instructions.push(s),this.hitDetectionInstructions.push(s),r}drawLineString(e,t,r){const i=this.state,o=i.strokeStyle,a=i.lineWidth;if(o===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm],gg);const s=e.getFlatCoordinates(),h=e.getStride();this.drawFlatCoordinates_(s,0,s.length,h),this.hitDetectionInstructions.push(x0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,o=i.strokeStyle,a=i.lineWidth;if(o===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm],gg);const s=e.getEnds(),h=e.getFlatCoordinates(),g=e.getStride();let b=0;for(let B=0,S=s.length;B<S;++B)b=this.drawFlatCoordinates_(h,b,s[B],g);this.hitDetectionInstructions.push(x0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(x0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(x0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(gg)}}class gk extends q_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const o=this.state,a=o.fillStyle!==void 0,s=o.strokeStyle!==void 0,h=r.length;this.instructions.push(gg),this.hitDetectionInstructions.push(gg);for(let g=0;g<h;++g){const b=r[g],B=this.coordinates.length,S=this.appendFlatLineCoordinates(e,t,b,i,!0,!s),I=[qi.MOVE_TO_LINE_TO,B,S];this.instructions.push(I),this.hitDetectionInstructions.push(I),s&&(this.instructions.push(mk),this.hitDetectionInstructions.push(mk)),t=b}return a&&(this.instructions.push($C),this.hitDetectionInstructions.push($C)),s&&(this.instructions.push(x0),this.hitDetectionInstructions.push(x0)),t}drawCircle(e,t,r){const i=this.state,o=i.fillStyle,a=i.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,md]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm]);const s=e.getFlatCoordinates(),h=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,h,!1,!1);const b=[qi.CIRCLE,g];this.instructions.push(gg,b),this.hitDetectionInstructions.push(gg,b),i.fillStyle!==void 0&&(this.instructions.push($C),this.hitDetectionInstructions.push($C)),i.strokeStyle!==void 0&&(this.instructions.push(x0),this.hitDetectionInstructions.push(x0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,o=i.fillStyle,a=i.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,md]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm]);const s=e.getEnds(),h=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(h,0,s,g),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,o=i.fillStyle,a=i.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,md]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm]);const s=e.getEndss(),h=e.getOrientedFlatCoordinates(),g=e.getStride();let b=0;for(let B=0,S=s.length;B<S;++B)b=this.drawFlatCoordinatess_(h,b,s[B],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=lg(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function fJ(n,e,t,r,i){const o=[];let a=t,s=0,h=e.slice(t,2);for(;s<n&&a+i<r;){const[g,b]=h.slice(-2),B=e[a+i],S=e[a+i+1],I=Math.sqrt((B-g)*(B-g)+(S-b)*(S-b));if(s+=I,s>=n){const k=(n-s+I)/I,U=Qd(g,B,k),z=Qd(b,S,k);h.push(U,z),o.push(h),h=[U,z],s==n&&(a+=i),s=0}else if(s<n)h.push(e[a+i],e[a+i+1]),a+=i;else{const k=I-s,U=Qd(g,B,k/I),z=Qd(b,S,k/I);h.push(U,z),o.push(h),h=[U,z],s=0,a+=i}}return s>0&&o.push(h),o}function pJ(n,e,t,r,i){let o=t,a=t,s=0,h=0,g=t,b,B,S,I,k,U,z,Y,Q,ne;for(B=t;B<r;B+=i){const X=e[B],q=e[B+1];k!==void 0&&(Q=X-k,ne=q-U,I=Math.sqrt(Q*Q+ne*ne),z!==void 0&&(h+=S,b=Math.acos((z*Q+Y*ne)/(S*I)),b>n&&(h>s&&(s=h,o=g,a=B),h=0,g=B-i)),S=I,z=Q,Y=ne),k=X,U=q}return h+=I,h>s?[g,B]:[o,a]}const d2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class mJ extends q_{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[md]={fillStyle:md},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,o=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!o)return;const s=this.coordinates;let h=s.length;const g=e.getType();let b=null,B=e.getStride();if(a.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!ku(this.maxExtent,e.getExtent()))return;let S;if(b=e.getFlatCoordinates(),g=="LineString")S=[b.length];else if(g=="MultiLineString")S=e.getEnds();else if(g=="Polygon")S=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const z=e.getEndss();S=[];for(let Y=0,Q=z.length;Y<Q;++Y)S.push(z[Y][0])}this.beginGeometry(e,t,r);const I=a.repeat,k=I?void 0:a.textAlign;let U=0;for(let z=0,Y=S.length;z<Y;++z){let Q;I?Q=fJ(I*this.resolution,b,U,S[z],B):Q=[b.slice(U,S[z])];for(let ne=0,X=Q.length;ne<X;++ne){const q=Q[ne];let J=0,N=q.length;if(k==null){const he=pJ(a.maxAngle,q,0,q.length,2);J=he[0],N=he[1]}for(let he=J;he<N;he+=B)s.push(q[he],q[he+1]);const ie=s.length;U=S[z],this.drawChars_(h,ie),h=ie}}this.endGeometry(t)}else{let S=a.overflow?null:[];switch(g){case"Point":case"MultiPoint":b=e.getFlatCoordinates();break;case"LineString":b=e.getFlatMidpoint();break;case"Circle":b=e.getCenter();break;case"MultiLineString":b=e.getFlatMidpoints(),B=2;break;case"Polygon":b=e.getFlatInteriorPoint(),a.overflow||S.push(b[2]/this.resolution),B=3;break;case"MultiPolygon":const Q=e.getFlatInteriorPoints();b=[];for(let ne=0,X=Q.length;ne<X;ne+=3)a.overflow||S.push(Q[ne+2]/this.resolution),b.push(Q[ne],Q[ne+1]);if(b.length===0)return;B=2;break}const I=this.appendFlatPointCoordinates(b,B);if(I===h)return;if(S&&(I-h)/2!==b.length/B){let Q=h/2;S=S.filter((ne,X)=>{const q=s[(Q+X)*2]===b[X*B]&&s[(Q+X)*2+1]===b[X*B+1];return q||--Q,q})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,r);let k=a.padding;if(k!=fg&&(a.scale[0]<0||a.scale[1]<0)){let Q=a.padding[0],ne=a.padding[1],X=a.padding[2],q=a.padding[3];a.scale[0]<0&&(ne=-ne,q=-q),a.scale[1]<0&&(Q=-Q,X=-X),k=[Q,ne,X,q]}const U=this.pixelRatio;this.instructions.push([qi.DRAW_IMAGE,h,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,k==fg?fg:k.map(function(Q){return Q*U}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]);const z=1/U,Y=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=md,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,h,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[z,z],NaN,this.declutterMode_,this.declutterImageWithText_,k,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?md:this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]),a.backgroundFill&&(this.state.fillStyle=Y,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||a_,justify:t.justify,textBaseline:t.textBaseline||t2,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,g=d2[i.textBaseline],b=this.textOffsetY_*h,B=this.text_,S=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([qi.DRAW_CHARS,e,t,g,i.overflow,s,i.maxAngle,h,b,o,S*h,B,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([qi.DRAW_CHARS,e,t,g,i.overflow,s&&md,i.maxAngle,h,b,o,S*h,B,a,1/h,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,o;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=qp(a.getColor()||md)):(i=null,this.textFillState_=i);const s=e.getStroke();if(!s)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const U=s.getLineDash(),z=s.getLineDashOffset(),Y=s.getWidth(),Q=s.getMiterLimit();o.lineCap=s.getLineCap()||Cy,o.lineDash=U?U.slice():Um,o.lineDashOffset=z===void 0?zm:z,o.lineJoin=s.getLineJoin()||by,o.lineWidth=Y===void 0?l_:Y,o.miterLimit=Q===void 0?o_:Q,o.strokeStyle=qp(s.getColor()||s_)}r=this.textState_;const h=e.getFont()||YF;$F(h);const g=e.getScaleArray();r.overflow=e.getOverflow(),r.font=h,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||t2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||fg,r.scale=g===void 0?[1,1]:g;const b=e.getOffsetX(),B=e.getOffsetY(),S=e.getRotateWithView(),I=e.getKeepUpright(),k=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=b===void 0?0:b,this.textOffsetY_=B===void 0?0:B,this.textRotateWithView_=S===void 0?!1:S,this.textKeepUpright_=I===void 0?!0:I,this.textRotation_=k===void 0?0:k,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Lo(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Lo(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const gJ={Circle:gk,Default:q_,Image:hJ,LineString:dJ,Polygon:gk,Text:mJ};class UU{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const o=r[i].finish();e[t][i]=o}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let o=i[t];if(o===void 0){const a=gJ[t];o=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=o}return o}}const yJ=5;class vJ extends U_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=yJ}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return go()}getData(e){return null}prepareFrame(e){return go()}renderFrame(e,t){return go()}forEachFeatureAtCoordinate(e,t,r,i,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===fi.LOADED||t.getState()===fi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=fi.LOADED&&t!=fi.ERROR&&e.addEventListener(oo.CHANGE,this.boundHandleImageChange_),t==fi.IDLE&&(e.load(),t=e.getState()),t==fi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class zU extends dp{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}class AO{constructor(){In(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Jb(),{get:(e,t)=>{if(typeof Jb()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const o=t[r];if(typeof o=="function"){o(e);continue}const a=t[++r];if(typeof e[o]=="function")e[o](...a);else{if(typeof a=="function"){e[o]=a(e);continue}e[o]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const yk=[];let F1=null;function _J(){F1=Jl(1,1,void 0,{willReadFrequently:!0})}class cO extends vJ{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=_d(),this.pixelTransform=_d(),this.inversePixelTransform=_d(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){F1||_J(),F1.clearRect(0,0,1,1);let i;try{F1.drawImage(e,t,r,1,1,0,0,1,1),i=F1.getImageData(0,0,1,1).data}catch{return F1=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let o,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&K0(vy(e.style.backgroundColor),vy(r)))){const s=e.firstElementChild;s instanceof HTMLCanvasElement&&(a=s.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=i;let s=o.style;s.position="absolute",s.width="100%",s.height="100%",a=Jl();const h=a.canvas;o.appendChild(h),s=h.style,s.position="absolute",s.left="0",s.transformOrigin="top left",this.container=o,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Ap(r),o=yx(r),a=gx(r),s=mx(r);yA(t.coordinateToPixelTransform,i),yA(t.coordinateToPixelTransform,o),yA(t.coordinateToPixelTransform,a),yA(t.coordinateToPixelTransform,s);const h=this.inversePixelTransform;yA(h,i),yA(h,o),yA(h,a),yA(h,s),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,o=e.viewState.rotation,a=e.pixelRatio,s=Math.round(ps(r)/i*a),h=Math.round(Hl(r)/i*a);em(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,o,-s/2,-h/2),XF(this.inversePixelTransform,this.pixelTransform);const g=oZ(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const b=this.context.canvas;b.width!=s||b.height!=h?(b.width=s,b.height=h):this.context.clearRect(0,0,s,h),g!==b.style.transform&&(b.style.transform=g)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const o=new zU(e,this.inversePixelTransform,r,t);i.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ef.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ef.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new AO),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ef.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ef.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,o,a,s){const h=o/2,g=a/2,b=i/t,B=-b,S=-e[0]+s,I=-e[1];return em(this.tempTransform,h,g,b,B,-r,S,I)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function CJ(n,e,t,r,i,o,a,s,h,g,b,B,S=!0){let I=n[e],k=n[e+1],U=0,z=0,Y=0,Q=0;function ne(){U=I,z=k,e+=r,I=n[e],k=n[e+1],Q+=Y,Y=Math.sqrt((I-U)*(I-U)+(k-z)*(k-z))}do ne();while(e<t-r&&Q+Y<o);let X=Y===0?0:(o-Q)/Y;const q=Qd(U,I,X),J=Qd(z,k,X),N=e-r,ie=Q,he=o+s*h(g,i,b);for(;e<t-r&&Q+Y<he;)ne();X=Y===0?0:(he-Q)/Y;const ce=Qd(U,I,X),we=Qd(z,k,X);let pe=!1;if(S)if(B){const ze=[q,J,ce,we];cU(ze,0,4,2,B,ze,ze),pe=ze[0]>ze[2]}else pe=q>ce;const Ce=Math.PI,Pe=[],de=N+r===e;e=N,Y=0,Q=ie,I=n[e],k=n[e+1];let rt;if(de){ne(),rt=Math.atan2(k-z,I-U),pe&&(rt+=rt>0?-Ce:Ce);const ze=(ce+q)/2,Qe=(we+J)/2;return Pe[0]=[ze,Qe,(he-o)/2,rt,i],Pe}i=i.replace(/\n/g," ");for(let ze=0,Qe=i.length;ze<Qe;){ne();let ut=Math.atan2(k-z,I-U);if(pe&&(ut+=ut>0?-Ce:Ce),rt!==void 0){let ft=ut-rt;if(ft+=ft>Ce?-2*Ce:ft<-Ce?2*Ce:0,Math.abs(ft)>a)return null}rt=ut;const Te=ze;let Ue=0;for(;ze<Qe;++ze){const ft=pe?Qe-ze-1:ze,Ut=s*h(g,i[ft],b);if(e+r<t&&Q+Y<o+Ue+Ut/2)break;Ue+=Ut}if(ze===Te)continue;const st=pe?i.substring(Qe-Te,Qe-ze):i.substring(Te,ze);X=Y===0?0:(o+Ue/2-Q)/Y;const wt=Qd(U,I,X),mt=Qd(z,k,X);Pe.push([wt,mt,Ue/2,ut,st]),o+=Ue}return Pe}const l1=Zd(),A0=[],Bm=[],Om=[],c0=[];function vk(n){return n[3].declutterBox}const _k=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function R4(n,e){return e==="start"?e=_k.test(n)?"right":"left":e==="end"&&(e=_k.test(n)?"left":"right"),d2[e]}function bJ(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class xJ{constructor(e,t,r,i,o){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=_d(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new AO:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const o=e+t+r+i;if(this.labels_[o])return this.labels_[o];const a=i?this.strokeStates[i]:null,s=r?this.fillStates[r]:null,h=this.textStates[t],g=this.pixelRatio,b=[h.scale[0]*g,h.scale[1]*g],B=h.justify?d2[h.justify]:R4(Array.isArray(e)?e[0]:e,h.textAlign||a_),S=i&&a.lineWidth?a.lineWidth:0,I=Array.isArray(e)?e:String(e).split(`
`).reduce(bJ,[]),{width:k,height:U,widths:z,heights:Y,lineWidths:Q}=XH(h,I),ne=k+S,X=[],q=(ne+2)*b[0],J=(U+S)*b[1],N={width:q<0?Math.floor(q):Math.ceil(q),height:J<0?Math.floor(J):Math.ceil(J),contextInstructions:X};(b[0]!=1||b[1]!=1)&&X.push("scale",b),i&&(X.push("strokeStyle",a.strokeStyle),X.push("lineWidth",S),X.push("lineCap",a.lineCap),X.push("lineJoin",a.lineJoin),X.push("miterLimit",a.miterLimit),X.push("setLineDash",[a.lineDash]),X.push("lineDashOffset",a.lineDashOffset)),r&&X.push("fillStyle",s.fillStyle),X.push("textBaseline","middle"),X.push("textAlign","center");const ie=.5-B;let he=B*ne+ie*S;const ce=[],we=[];let pe=0,Ce=0,Pe=0,de=0,rt;for(let ze=0,Qe=I.length;ze<Qe;ze+=2){const ut=I[ze];if(ut===`
`){Ce+=pe,pe=0,he=B*ne+ie*S,++de;continue}const Te=I[ze+1]||h.font;Te!==rt&&(i&&ce.push("font",Te),r&&we.push("font",Te),rt=Te),pe=Math.max(pe,Y[Pe]);const Ue=[ut,he+ie*z[Pe]+B*(z[Pe]-Q[de]),.5*(S+pe)+Ce];he+=z[Pe],i&&ce.push("strokeText",Ue),r&&we.push("fillText",Ue),++Pe}return Array.prototype.push.apply(X,ce),Array.prototype.push.apply(X,we),this.labels_[o]=N,N}replayTextBackground_(e,t,r,i,o,a,s){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),s&&(this.setStrokeStyle_(e,s),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,o,a,s,h,g,b,B,S,I,k,U,z){s*=S[0],h*=S[1];let Y=r-s,Q=i-h;const ne=o+g>e?e-g:o,X=a+b>t?t-b:a,q=k[3]+ne*S[0]+k[1],J=k[0]+X*S[1]+k[2],N=Y-k[3],ie=Q-k[0];(U||B!==0)&&(A0[0]=N,c0[0]=N,A0[1]=ie,Bm[1]=ie,Bm[0]=N+q,Om[0]=Bm[0],Om[1]=ie+J,c0[1]=Om[1]);let he;return B!==0?(he=em(_d(),r,i,1,1,B,-r,-i),yA(he,A0),yA(he,Bm),yA(he,Om),yA(he,c0),Gm(Math.min(A0[0],Bm[0],Om[0],c0[0]),Math.min(A0[1],Bm[1],Om[1],c0[1]),Math.max(A0[0],Bm[0],Om[0],c0[0]),Math.max(A0[1],Bm[1],Om[1],c0[1]),l1)):Gm(Math.min(N,N+q),Math.min(ie,ie+J),Math.max(N,N+q),Math.max(ie,ie+J),l1),I&&(Y=Math.round(Y),Q=Math.round(Q)),{drawImageX:Y,drawImageY:Q,drawImageW:ne,drawImageH:X,originX:g,originY:b,declutterBox:{minX:l1[0],minY:l1[1],maxX:l1[2],maxY:l1[3],value:z},canvasTransform:he,scale:S}}replayImageOrLabel_(e,t,r,i,o,a,s){const h=!!(a||s),g=i.declutterBox,b=s?s[2]*i.scale[0]/2:0;return g.minX-b<=t[0]&&g.maxX+b>=0&&g.minY-b<=t[1]&&g.maxY+b>=0&&(h&&this.replayTextBackground_(e,A0,Bm,Om,c0,a,s),JH(e,i.canvasTransform,o,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=yA(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const o=this.textStates[t],a=this.createLabel(e,t,i,r),s=this.strokeStates[r],h=this.pixelRatio,g=R4(Array.isArray(e)?e[0]:e,o.textAlign||a_),b=d2[o.textBaseline||t2],B=s&&s.lineWidth?s.lineWidth:0,S=a.width/h-2*o.scale[0],I=g*S+2*(.5-g)*B,k=b*a.height/h+2*(.5-b)*B;return{label:a,anchorX:I,anchorY:k}}execute_(e,t,r,i,o,a,s,h){const g=this.zIndexContext_;let b;this.pixelCoordinates_&&K0(r,this.renderedTransform_)?b=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),b=O0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),nZ(this.renderedTransform_,r));let B=0;const S=i.length;let I=0,k,U,z,Y,Q,ne,X,q,J,N,ie,he,ce,we=0,pe=0,Ce=null,Pe=null;const de=this.coordinateCache_,rt=this.viewRotation_,ze=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Qe={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:rt},ut=this.instructions!=i||this.overlaps?0:200;let Te,Ue,st,wt;for(;B<S;){const mt=i[B];switch(mt[0]){case qi.BEGIN_GEOMETRY:Te=mt[1],wt=mt[3],Te.getGeometry()?s!==void 0&&!ku(s,wt.getExtent())?B=mt[2]+1:++B:B=mt[2],g&&(g.zIndex=mt[4]);break;case qi.BEGIN_PATH:we>ut&&(this.fill_(e),we=0),pe>ut&&(e.stroke(),pe=0),!we&&!pe&&(e.beginPath(),Q=NaN,ne=NaN),++B;break;case qi.CIRCLE:I=mt[1];const Ut=b[I],Lt=b[I+1],De=b[I+2],ke=b[I+3],Oe=De-Ut,Je=ke-Lt,Mt=Math.sqrt(Oe*Oe+Je*Je);e.moveTo(Ut+Mt,Lt),e.arc(Ut,Lt,Mt,0,2*Math.PI,!0),++B;break;case qi.CLOSE_PATH:e.closePath(),++B;break;case qi.CUSTOM:I=mt[1],k=mt[2];const gt=mt[3],Nt=mt[4],nn=mt[5];Qe.geometry=gt,Qe.feature=Te,B in de||(de[B]=[]);const en=de[B];nn?nn(b,I,k,2,en):(en[0]=b[I],en[1]=b[I+1],en.length=2),g&&(g.zIndex=mt[6]),Nt(en,Qe),++B;break;case qi.DRAW_IMAGE:I=mt[1],k=mt[2],J=mt[3],U=mt[4],z=mt[5];let Sn=mt[6];const Yn=mt[7],Qr=mt[8],cr=mt[9],fr=mt[10];let br=mt[11];const Cr=mt[12];let Mr=mt[13];Y=mt[14]||"declutter";const Qn=mt[15];if(!J&&mt.length>=20){N=mt[19],ie=mt[20],he=mt[21],ce=mt[22];const bt=this.drawLabelWithPointPlacement_(N,ie,he,ce);J=bt.label,mt[3]=J;const Pn=mt[23];U=(bt.anchorX-Pn)*this.pixelRatio,mt[4]=U;const En=mt[24];z=(bt.anchorY-En)*this.pixelRatio,mt[5]=z,Sn=J.height,mt[6]=Sn,Mr=J.width,mt[13]=Mr}let Sr;mt.length>25&&(Sr=mt[25]);let Ge,ue,me;mt.length>17?(Ge=mt[16],ue=mt[17],me=mt[18]):(Ge=fg,ue=!1,me=!1),fr&&ze?br+=rt:!fr&&!ze&&(br-=rt);let Xe=0;for(;I<k;I+=2){if(Sr&&Sr[Xe++]<Mr/this.pixelRatio)continue;const bt=this.calculateImageOrLabelDimensions_(J.width,J.height,b[I],b[I+1],Mr,Sn,U,z,Qr,cr,br,Cr,o,Ge,ue||me,Te),Pn=[e,t,J,bt,Yn,ue?Ce:null,me?Pe:null];if(h){let En,lr,wr;if(Qn){const Dn=k-I;if(!Qn[Dn]){Qn[Dn]={args:Pn,declutterMode:Y};continue}const Br=Qn[Dn];En=Br.args,lr=Br.declutterMode,delete Qn[Dn],wr=vk(En)}let on,zn;if(En&&(lr!=="declutter"||!h.collides(wr))&&(on=!0),(Y!=="declutter"||!h.collides(bt.declutterBox))&&(zn=!0),lr==="declutter"&&Y==="declutter"){const Dn=on&&zn;on=Dn,zn=Dn}on&&(lr!=="none"&&h.insert(wr),this.replayImageOrLabel_.apply(this,En)),zn&&(Y!=="none"&&h.insert(bt.declutterBox),this.replayImageOrLabel_.apply(this,Pn))}else this.replayImageOrLabel_.apply(this,Pn)}++B;break;case qi.DRAW_CHARS:const Bt=mt[1],Yt=mt[2],it=mt[3],Kt=mt[4];ce=mt[5];const Ye=mt[6],fe=mt[7],xe=mt[8];he=mt[9];const p=mt[10];N=mt[11],ie=mt[12];const Ne=[mt[13],mt[13]];Y=mt[14]||"declutter";const dt=mt[15],pt=this.textStates[ie],Ot=pt.font,_t=[pt.scale[0]*fe,pt.scale[1]*fe];let rn;Ot in this.widths_?rn=this.widths_[Ot]:(rn={},this.widths_[Ot]=rn);const Zt=_U(b,Bt,Yt,2),Gt=Math.abs(_t[0])*F7(Ot,N,rn);if(Kt||Gt<=Zt){const bt=this.textStates[ie].textAlign,Pn=(Zt-Gt)*R4(N,bt),En=CJ(b,Bt,Yt,2,N,Pn,Ye,Math.abs(_t[0]),F7,Ot,rn,ze?0:this.viewRotation_,dt);e:if(En){const lr=[];let wr,on,zn,Dn,Br;if(he)for(wr=0,on=En.length;wr<on;++wr){Br=En[wr],zn=Br[4],Dn=this.createLabel(zn,ie,"",he),U=Br[2]+(_t[0]<0?-p:p),z=it*Dn.height+(.5-it)*2*p*_t[1]/_t[0]-xe;const xr=this.calculateImageOrLabelDimensions_(Dn.width,Dn.height,Br[0],Br[1],Dn.width,Dn.height,U,z,0,0,Br[3],Ne,!1,fg,!1,Te);if(h&&Y==="declutter"&&h.collides(xr.declutterBox))break e;lr.push([e,t,Dn,xr,1,null,null])}if(ce)for(wr=0,on=En.length;wr<on;++wr){Br=En[wr],zn=Br[4],Dn=this.createLabel(zn,ie,ce,""),U=Br[2],z=it*Dn.height-xe;const xr=this.calculateImageOrLabelDimensions_(Dn.width,Dn.height,Br[0],Br[1],Dn.width,Dn.height,U,z,0,0,Br[3],Ne,!1,fg,!1,Te);if(h&&Y==="declutter"&&h.collides(xr.declutterBox))break e;lr.push([e,t,Dn,xr,1,null,null])}h&&Y!=="none"&&h.load(lr.map(vk));for(let xr=0,Rr=lr.length;xr<Rr;++xr)this.replayImageOrLabel_.apply(this,lr[xr])}}++B;break;case qi.END_GEOMETRY:if(a!==void 0){Te=mt[1];const bt=a(Te,wt,Y);if(bt)return bt}++B;break;case qi.FILL:ut?we++:this.fill_(e),++B;break;case qi.MOVE_TO_LINE_TO:for(I=mt[1],k=mt[2],Ue=b[I],st=b[I+1],e.moveTo(Ue,st),Q=Ue+.5|0,ne=st+.5|0,I+=2;I<k;I+=2)Ue=b[I],st=b[I+1],X=Ue+.5|0,q=st+.5|0,(I==k-2||X!==Q||q!==ne)&&(e.lineTo(Ue,st),Q=X,ne=q);++B;break;case qi.SET_FILL_STYLE:Ce=mt,this.alignAndScaleFill_=mt[2],we&&(this.fill_(e),we=0,pe&&(e.stroke(),pe=0)),e.fillStyle=mt[1],++B;break;case qi.SET_STROKE_STYLE:Pe=mt,pe&&(e.stroke(),pe=0),this.setStrokeStyle_(e,mt),++B;break;case qi.STROKE:ut?pe++:e.stroke(),++B;break;default:++B;break}}we&&this.fill_(e),pe&&e.stroke()}execute(e,t,r,i,o,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,o,void 0,void 0,a)}executeHitDetection(e,t,r,i,o){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,o)}}const Q1=["Polygon","Circle","LineString","Image","Text","Default"],f2=["Image","Text"],wJ=Q1.filter(n=>!f2.includes(n));class jU{constructor(e,t,r,i,o,a,s){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=_d(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,s)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const o=e[r];for(const a in o){const s=o[a];i[a]=new xJ(this.resolution_,this.pixelRatio_,this.overlaps_,s,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,o=e.length;i<o;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,o,a){i=Math.round(i);const s=i*2+1,h=em(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=Jl(s,s,void 0,{willReadFrequently:!0}));const b=this.hitDetectionContext_;b.canvas.width!==s||b.canvas.height!==s?(b.canvas.width=s,b.canvas.height=s):g||b.clearRect(0,0,s,s);let B;this.renderBuffer_!==void 0&&(B=Zd(),Nv(B,e),B0(B,t*(this.renderBuffer_+i),B));const S=MJ(i);let I;function k(q,J,N){const ie=b.getImageData(0,0,s,s).data;for(let he=0,ce=S.length;he<ce;he++)if(ie[S[he]]>0){if(!a||N==="none"||I!=="Image"&&I!=="Text"||a.includes(q)){const we=(S[he]-3)/4,pe=i-we%s,Ce=i-(we/s|0),Pe=o(q,J,pe*pe+Ce*Ce);if(Pe)return Pe}b.clearRect(0,0,s,s);break}}const U=Object.keys(this.executorsByZIndex_).map(Number);U.sort(Fm);let z,Y,Q,ne,X;for(z=U.length-1;z>=0;--z){const q=U[z].toString();for(Q=this.executorsByZIndex_[q],Y=Q1.length-1;Y>=0;--Y)if(I=Q1[Y],ne=Q[I],ne!==void 0&&(X=ne.executeHitDetection(b,h,r,k,B),X))return X}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],o=t[2],a=t[3],s=[r,i,r,a,o,a,o,i];return O0(s,0,8,2,e,s),s}isEmpty(){return T0(this.executorsByZIndex_)}execute(e,t,r,i,o,a,s){const h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(s?wH:Fm),a=a||Q1;const g=Q1.length;for(let b=0,B=h.length;b<B;++b){const S=h[b].toString(),I=this.executorsByZIndex_[S];for(let k=0,U=a.length;k<U;++k){const z=a[k],Y=I[z];if(Y!==void 0){const Q=s===null?void 0:Y.getZIndexContext(),ne=Q?Q.getContext():e,X=this.maxExtent_&&z!=="Image"&&z!=="Text";if(X&&(ne.save(),this.clip(ne,r)),!Q||z==="Text"||z==="Image"?Y.execute(ne,t,r,i,o,s):Q.pushFunction(q=>Y.execute(q,t,r,i,o,s)),X&&ne.restore(),Q){Q.offset();const q=h[b]*g+k;this.deferredZIndexContexts_[q]||(this.deferredZIndexContexts_[q]=[]),this.deferredZIndexContexts_[q].push(Q)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Fm);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[r]].length=0}}const K4={};function MJ(n){if(K4[n]!==void 0)return K4[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let o=0;o<=n;++o)for(let a=0;a<=n;++a){const s=o*o+a*a;if(s>t)break;let h=r[s];h||(h=[],r[s]=h),h.push(((n+o)*e+(n+a))*4+3),o>0&&h.push(((n-o)*e+(n+a))*4+3),a>0&&(h.push(((n+o)*e+(n-a))*4+3),o>0&&h.push(((n-o)*e+(n-a))*4+3))}const i=[];for(let o=0,a=r.length;o<a;++o)r[o]&&i.push(...r[o]);return K4[n]=i,i}class SJ extends FU{constructor(e,t,r,i,o,a,s){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?SB(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=a,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=_d()}drawImages_(e,t,r,i){if(!this.image_)return;const o=O0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,s=this.tmpLocalTransform_,h=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=h*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let b=0,B=o.length;b<B;b+=2){const S=o[b]-this.imageAnchorX_,I=o[b+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const k=S+this.imageAnchorX_,U=I+this.imageAnchorY_;em(s,k,U,1,1,g,-k,-U),a.save(),a.transform.apply(a,s),a.translate(k,U),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,I,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=h)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=O0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let s=this.textRotation_;for(this.transformRotation_===0&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);t<r;t+=i){const h=o[t]+this.textOffsetX_,g=o[t+1]+this.textOffsetY_;s!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(h-this.textOffsetX_,g-this.textOffsetY_),a.rotate(s),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,h,g),this.textFillState_&&a.fillText(this.text_,h,g))}}moveToLineTo_(e,t,r,i,o){const a=this.context_,s=O0(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(s[0],s[1]);let h=s.length;o&&(h-=2);for(let g=2;g<h;g+=2)a.lineTo(s[g],s[g+1]);return o&&a.closePath(),r}drawRings_(e,t,r,i){for(let o=0,a=r.length;o<a;++o)t=this.moveToLineTo_(e,t,r[o],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ku(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=VZ(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],o=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ku(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(ku(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let o=0;const a=e.getEnds(),s=e.getStride();r.beginPath();for(let h=0,g=a.length;h<g;++h)o=this.moveToLineTo_(i,o,a[h],s,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ku(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ku(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const o=e.getEndss(),a=e.getStride();t.beginPath();for(let s=0,h=o.length;s<h;++s){const g=o[s];i=this.drawRings_(r,i,g,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),K0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:a_;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:qp(r||md)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),o=t.getLineDash(),a=t.getLineDashOffset(),s=t.getLineJoin(),h=t.getWidth(),g=t.getMiterLimit(),b=o||Um;this.strokeState_={lineCap:i!==void 0?i:Cy,lineDash:this.pixelRatio_===1?b:b.map(B=>B*this.pixelRatio_),lineDashOffset:(a||zm)*this.pixelRatio_,lineJoin:s!==void 0?s:by,lineWidth:(h!==void 0?h:l_)*this.pixelRatio_,miterLimit:g!==void 0?g:o_,strokeStyle:qp(r||s_)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const I=t.getColor();this.textFillState_={fillStyle:qp(I||md)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const I=r.getColor(),k=r.getLineCap(),U=r.getLineDash(),z=r.getLineDashOffset(),Y=r.getLineJoin(),Q=r.getWidth(),ne=r.getMiterLimit();this.textStrokeState_={lineCap:k!==void 0?k:Cy,lineDash:U||Um,lineDashOffset:z||zm,lineJoin:Y!==void 0?Y:by,lineWidth:Q!==void 0?Q:l_,miterLimit:ne!==void 0?ne:o_,strokeStyle:qp(I||s_)}}const i=e.getFont(),o=e.getOffsetX(),a=e.getOffsetY(),s=e.getRotateWithView(),h=e.getRotation(),g=e.getScaleArray(),b=e.getText(),B=e.getTextAlign(),S=e.getTextBaseline();this.textState_={font:i!==void 0?i:YF,textAlign:B!==void 0?B:a_,textBaseline:S!==void 0?S:t2},this.text_=b!==void 0?Array.isArray(b)?b.reduce((I,k,U)=>I+=U%2?" ":k,""):b:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=s!==void 0?s:!1,this.textRotation_=h!==void 0?h:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const $d=.5;function NU(n,e,t,r,i,o,a,s,h){const g=h?qB(i):i,b=n[0]*$d,B=n[1]*$d,S=Jl(b,B);S.imageSmoothingEnabled=!1;const I=S.canvas,k=new SJ(S,$d,i,null,a,s,h?N_(QZ(),h):null),U=t.length,z=Math.floor((256*256*256-1)/U),Y={};for(let ne=1;ne<=U;++ne){const X=t[ne-1],q=X.getStyleFunction()||r;if(!q)continue;let J=q(X,o);if(!J)continue;Array.isArray(J)||(J=[J]);const ie=(ne*z).toString(16).padStart(7,"#00000");for(let he=0,ce=J.length;he<ce;++he){const we=J[he],pe=we.getGeometryFunction()(X);if(!pe||!ku(g,pe.getExtent()))continue;const Ce=we.clone(),Pe=Ce.getFill();Pe&&Pe.setColor(ie);const de=Ce.getStroke();de&&(de.setColor(ie),de.setLineDash(null)),Ce.setText(void 0);const rt=we.getImage();if(rt){const Te=rt.getImageSize();if(!Te)continue;const Ue=Jl(Te[0],Te[1],void 0,{alpha:!1}),st=Ue.canvas;Ue.fillStyle=ie,Ue.fillRect(0,0,st.width,st.height),Ce.setImage(new r2({img:st,anchor:rt.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:rt.getOrigin(),opacity:1,size:rt.getSize(),scale:rt.getScale(),rotation:rt.getRotation(),rotateWithView:rt.getRotateWithView()}))}const ze=Ce.getZIndex()||0;let Qe=Y[ze];Qe||(Qe={},Y[ze]=Qe,Qe.Polygon=[],Qe.Circle=[],Qe.LineString=[],Qe.Point=[]);const ut=pe.getType();if(ut==="GeometryCollection"){const Te=pe.getGeometriesArrayRecursive();for(let Ue=0,st=Te.length;Ue<st;++Ue){const wt=Te[Ue];Qe[wt.getType().replace("Multi","")].push(wt,Ce)}}else Qe[ut.replace("Multi","")].push(pe,Ce)}}const Q=Object.keys(Y).map(Number).sort(Fm);for(let ne=0,X=Q.length;ne<X;++ne){const q=Y[Q[ne]];for(const J in q){const N=q[J];for(let ie=0,he=N.length;ie<he;ie+=2){k.setStyle(N[ie+1]);for(let ce=0,we=e.length;ce<we;++ce)k.setTransform(e[ce]),k.drawGeometry(N[ie])}}}return S.getImageData(0,0,I.width,I.height)}function GU(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*$d),o=Math.floor(Math.round(n[1])*$d),a=(Tu(i,0,t.width-1)+Tu(o,0,t.height-1)*t.width)*4,s=t.data[a],h=t.data[a+1],b=t.data[a+2]+256*(h+256*s),B=Math.floor((256*256*256-1)/e.length);b&&b%B===0&&r.push(e[b/B-1])}return r}const EJ=.5,WU={Point:KJ,LineString:TJ,Polygon:LJ,MultiPoint:DJ,MultiLineString:PJ,MultiPolygon:RJ,GeometryCollection:kJ,Circle:OJ};function BJ(n,e){return parseInt(Lo(n),10)-parseInt(Lo(e),10)}function b6(n,e){const t=QU(n,e);return t*t}function QU(n,e){return EJ*n/e}function OJ(n,e,t,r,i){const o=t.getFill(),a=t.getStroke();if(o||a){const h=n.getBuilder(t.getZIndex(),"Circle");h.setFillStrokeStyle(o,a),h.drawCircle(e,r,i)}const s=t.getText();if(s&&s.getText()){const h=n.getBuilder(t.getZIndex(),"Text");h.setTextStyle(s),h.drawText(e,r)}}function p2(n,e,t,r,i,o,a,s){const h=[],g=t.getImage();if(g){let S=!0;const I=g.getImageState();I==fi.LOADED||I==fi.ERROR?S=!1:I==fi.IDLE&&g.load(),S&&h.push(g.ready())}const b=t.getFill();b&&b.loading()&&h.push(b.ready());const B=h.length>0;return B&&Promise.all(h).then(()=>i(null)),IJ(n,e,t,r,o,a,s),B}function IJ(n,e,t,r,i,o,a){const s=t.getGeometryFunction()(e);if(!s)return;const h=s.simplifyTransformed(r,i);if(t.getRenderer())qU(n,h,t,e,a);else{const b=WU[h.getType()];b(n,h,t,e,a,o)}}function qU(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let s=0,h=a.length;s<h;++s)qU(n,a[s],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function kJ(n,e,t,r,i,o){const a=e.getGeometriesArray();let s,h;for(s=0,h=a.length;s<h;++s){const g=WU[a[s].getType()];g(n,a[s],t,r,i,o)}}function TJ(n,e,t,r,i){const o=t.getStroke();if(o){const s=n.getBuilder(t.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const s=n.getBuilder(t.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,r,i)}}function PJ(n,e,t,r,i){const o=t.getStroke();if(o){const s=n.getBuilder(t.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const s=n.getBuilder(t.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,r,i)}}function RJ(n,e,t,r,i){const o=t.getFill(),a=t.getStroke();if(a||o){const h=n.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(o,a),h.drawMultiPolygon(e,r,i)}const s=t.getText();if(s&&s.getText()){const h=n.getBuilder(t.getZIndex(),"Text");h.setTextStyle(s),h.drawText(e,r,i)}}function KJ(n,e,t,r,i,o){const a=t.getImage(),s=t.getText(),h=s&&s.getText(),g=o&&a&&h?{}:void 0;if(a){if(a.getImageState()!=fi.LOADED)return;const b=n.getBuilder(t.getZIndex(),"Image");b.setImageStyle(a,g),b.drawPoint(e,r,i)}if(h){const b=n.getBuilder(t.getZIndex(),"Text");b.setTextStyle(s,g),b.drawText(e,r,i)}}function DJ(n,e,t,r,i,o){const a=t.getImage(),s=a&&a.getOpacity()!==0,h=t.getText(),g=h&&h.getText(),b=o&&s&&g?{}:void 0;if(s){if(a.getImageState()!=fi.LOADED)return;const B=n.getBuilder(t.getZIndex(),"Image");B.setImageStyle(a,b),B.drawMultiPoint(e,r,i)}if(g){const B=n.getBuilder(t.getZIndex(),"Text");B.setTextStyle(h,b),B.drawText(e,r,i)}}function LJ(n,e,t,r,i){const o=t.getFill(),a=t.getStroke();if(o||a){const h=n.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(o,a),h.drawPolygon(e,r,i)}const s=t.getText();if(s&&s.getText()){const h=n.getBuilder(t.getZIndex(),"Text");h.setTextStyle(s),h.drawText(e,r,i)}}class FJ extends cO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Zd(),this.wrappedRenderedExtent_=Zd(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,o=t.viewState,a=o.center,s=o.resolution,h=o.projection,g=o.rotation,b=h.getExtent(),B=this.getLayer().getSource(),S=this.getLayer().getDeclutter(),I=t.pixelRatio,k=t.viewHints,U=!(k[Vl.ANIMATING]||k[Vl.INTERACTING]),z=this.context,Y=Math.round(ps(i)/s*I),Q=Math.round(Hl(i)/s*I),ne=B.getWrapX()&&h.canWrapX(),X=ne?ps(b):null,q=ne?Math.ceil((i[2]-b[2])/X)+1:1;let J=ne?Math.floor((i[0]-b[0])/X):0;do{let N=this.getRenderTransform(a,s,0,I,Y,Q,J*X);t.declutter&&(N=N.slice(0)),e.execute(z,[z.canvas.width,z.canvas.height],N,g,U,r===void 0?Q1:r?f2:wJ,r?S&&t.declutter[S]:void 0)}while(++J<q)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Jl(this.context.canvas.width,this.context.canvas.height,yk))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,F_(this.context),yk.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const o=this.context,a=this.replayGroup_;let s=a&&!a.isEmpty();if(!s&&!(this.getLayer().hasListener(Ef.PRERENDER)||this.getLayer().hasListener(Ef.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(o,e),i.projection,this.clipped_=!1,s&&r.extent&&this.clipping){const h=Yp(r.extent);s=ku(h,e.extent),this.clipped_=s&&!lp(h,e.extent),this.clipped_&&this.clipUnrotated(o,e,h)}return s&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,s=this.renderedProjection_,h=this.wrappedRenderedExtent_,g=this.getLayer(),b=[],B=r[0]*$d,S=r[1]*$d;b.push(this.getRenderTransform(i,o,a,$d,B,S,0).slice());const I=g.getSource(),k=s.getExtent();if(I.getWrapX()&&s.canWrapX()&&!lp(k,h)){let U=h[0];const z=ps(k);let Y=0,Q;for(;U<k[0];)--Y,Q=z*Y,b.push(this.getRenderTransform(i,o,a,$d,B,S,Q).slice()),U+=z;for(Y=0,U=h[2];U>k[2];)++Y,Q=z*Y,b.push(this.getRenderTransform(i,o,a,$d,B,S,Q).slice()),U-=z}this.hitDetectionImageData_=NU(r,b,this.renderedFeatures_,g.getStyleFunction(),h,o,a,b6(o,this.renderedPixelRatio_),null)}t(GU(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,o){if(!this.replayGroup_)return;const a=t.viewState.resolution,s=t.viewState.rotation,h=this.getLayer(),g={},b=function(S,I,k){const U=Lo(S),z=g[U];if(z){if(z!==!0&&k<z.distanceSq){if(k===0)return g[U]=!0,o.splice(o.lastIndexOf(z),1),i(S,h,I);z.geometry=I,z.distanceSq=k}}else{if(k===0)return g[U]=!0,i(S,h,I);o.push(g[U]={feature:S,layer:h,geometry:I,distanceSq:k,callback:i})}},B=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,s,r,b,B?t.declutter[B].all().map(S=>S.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Vl.ANIMATING],o=e.viewHints[Vl.INTERACTING],a=t.getUpdateWhileAnimating(),s=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!s&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const h=e.extent,g=e.viewState,b=g.projection,B=g.resolution,S=e.pixelRatio,I=t.getRevision(),k=t.getRenderBuffer();let U=t.getRenderOrder();U===void 0&&(U=BJ);const z=g.center.slice(),Y=B0(h,k*B),Q=Y.slice(),ne=[Y.slice()],X=b.getExtent();if(r.getWrapX()&&b.canWrapX()&&!lp(X,e.extent)){const Pe=ps(X),de=Math.max(ps(Y)/2,Pe);Y[0]=X[0]-de,Y[2]=X[2]+de,jB(z,b);const rt=rU(ne[0],b);rt[0]<X[0]&&rt[2]<X[2]?ne.push([rt[0]+Pe,rt[1],rt[2]+Pe,rt[3]]):rt[0]>X[0]&&rt[2]>X[2]&&ne.push([rt[0]-Pe,rt[1],rt[2]-Pe,rt[3]])}if(this.ready&&this.renderedResolution_==B&&this.renderedRevision_==I&&this.renderedRenderOrder_==U&&this.renderedFrameDeclutter_===!!e.declutter&&lp(this.wrappedRenderedExtent_,Y))return K0(this.renderedExtent_,Q)||(this.hitDetectionImageData_=null,this.renderedExtent_=Q),this.renderedCenter_=z,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const q=new UU(QU(B,S),Y,B,S);let J;for(let Pe=0,de=ne.length;Pe<de;++Pe)r.loadFeatures(ne[Pe],B,b);const N=b6(B,S);let ie=!0;const he=(Pe,de)=>{let rt;const ze=Pe.getStyleFunction()||t.getStyleFunction();if(ze&&(rt=ze(Pe,B)),rt){const Qe=this.renderFeature(Pe,N,rt,q,J,this.getLayer().getDeclutter(),de);ie=ie&&!Qe}},ce=qB(Y),we=r.getFeaturesInExtent(ce);U&&we.sort(U);for(let Pe=0,de=we.length;Pe<de;++Pe)he(we[Pe],Pe);this.renderedFeatures_=we,this.ready=ie;const pe=q.finish(),Ce=new jU(Y,B,S,r.getOverlaps(),pe,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=B,this.renderedRevision_=I,this.renderedRenderOrder_=U,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=Q,this.wrappedRenderedExtent_=Y,this.renderedCenter_=z,this.renderedProjection_=b,this.renderedPixelRatio_=S,this.replayGroup_=Ce,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,o,a,s){if(!r)return!1;let h=!1;if(Array.isArray(r))for(let g=0,b=r.length;g<b;++g)h=p2(i,e,r[g],t,this.boundHandleStyleImageChange_,o,a,s)||h;else h=p2(i,e,r,t,this.boundHandleStyleImageChange_,o,a,s);return h}}class hO extends uO{constructor(e){super(e)}createRenderer(){return new FJ(this)}}class Ck{constructor(e){this.rbush_=new IU(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Lo(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,o=t.length;i<o;i++){const a=e[i],s=t[i],h={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};r[i]=h,this.items_[Lo(s)]=h}this.rbush_.load(r)}remove(e){const t=Lo(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Lo(t)],i=[r.minX,r.minY,r.maxX,r.maxY];Wm(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,o=e.length;i<o;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return T0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Gm(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Ky extends fp{constructor(e){super(),this.projection=Ma(e.projection),this.attributions_=bk(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=bk(e),this.changed()}setState(e){this.state_=e,this.changed()}}function bk(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const vf={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function UJ(n,e){return[[-1/0,-1/0,1/0,1/0]]}function zJ(n,e){return[n]}let jJ=!1;function YU(n,e,t,r,i,o,a){const s=new XMLHttpRequest;s.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(s.responseType="arraybuffer"),s.withCredentials=jJ,s.onload=function(h){if(!s.status||s.status>=200&&s.status<300){const g=e.getType();try{let b;g=="text"||g=="json"?b=s.responseText:g=="xml"?b=s.responseXML||s.responseText:g=="arraybuffer"&&(b=s.response),b?o(e.readFeatures(b,{extent:t,featureProjection:i}),e.readProjection(b)):a()}catch{a()}}else a()},s.onerror=a,s.send()}function xk(n,e){return function(t,r,i,o,a){const s=this;YU(n,e,t,r,i,function(h,g){s.addFeatures(h),o!==void 0&&o(h)},a||gy)}}class h0 extends dp{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class wb extends Ky{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=gy,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ra(this.format_,"`format` must be set when `url` is set"),this.loader_=xk(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:UJ;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Ck:null,this.loadedExtentsRtree_=new Ck,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new $p(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Lo(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new h0(vf.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof sh||(this.featureChangeKeys_[e]=[ks(t,oo.CHANGE,this.handleFeatureChange_,this),ks(t,_y.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof sh){const o=this.idIndex_[i];o instanceof sh?Array.isArray(o)?o.push(t):this.idIndex_[i]=[o,t]:r=!1}else r=!1}return r&&(ra(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let o=0,a=e.length;o<a;o++){const s=e[o],h=Lo(s);this.addToIndex_(h,s)&&r.push(s)}for(let o=0,a=r.length;o<a;o++){const s=r[o],h=Lo(s);this.setupChangeEvents_(h,s);const g=s.getGeometry();if(g){const b=g.getExtent();t.push(b),i.push(s)}else this.nullGeometryFeatures_[h]=s}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(vf.ADDFEATURE))for(let o=0,a=r.length;o<a;o++)this.dispatchEvent(new h0(vf.ADDFEATURE,r[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(vf.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(vf.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(gd.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(gd.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Ra);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new h0(vf.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const o=i.getGeometry();if(o instanceof sh||o.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof sh||i.intersectsExtent(e)){const o=t(r);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),T0(this.nullGeometryFeatures_)||Zp(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=UB(e,t);return[].concat(...i.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let o=null;const a=[NaN,NaN];let s=1/0;const h=[-1/0,-1/0,1/0,1/0];return t=t||r_,this.featuresRtree_.forEachInExtent(h,function(g){if(t(g)){const b=g.getGeometry(),B=s;if(s=b instanceof sh?0:b.closestPointXY(r,i,a,s),s<B){o=g;const S=Math.sqrt(s);h[0]=r-S,h[1]=i-S,h[2]=r+S,h[3]=i+S}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Lo(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const o=t.getId();if(o!==void 0){const a=o.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new h0(vf.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Lo(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&T0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,o=this.strategy_(e,t,r);for(let a=0,s=o.length;a<s;++a){const h=o[a];i.forEachInExtent(h,function(b){return lp(b.extent,h)})||(++this.loadingExtentsCount_,this.dispatchEvent(new h0(vf.FEATURESLOADSTART)),this.loader_.call(this,h,t,r,b=>{--this.loadingExtentsCount_,this.dispatchEvent(new h0(vf.FEATURESLOADEND,void 0,b))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new h0(vf.FEATURESLOADERROR))}),i.insert(h,{extent:h.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(Wm(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Lo(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(Ra),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const o=i.toString(),a=this.idIndex_[o];a===e?delete this.idIndex_[o]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[o]=a[0]))}return delete this.uidIndex_[t],this.hasListener(vf.REMOVEFEATURE)&&this.dispatchEvent(new h0(vf.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ra(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xk(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class NJ extends kB{constructor(e,t,r,i,o){const a=o!==void 0?fi.IDLE:fi.LOADED;super(e,t,r,a),this.loader_=o!==void 0?o:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=fi.ERROR):this.state=fi.LOADED,this.changed()}load(){this.state==fi.IDLE&&(this.state=fi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class Y_ extends L_{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(oo.CHANGE)}release(){this.state===vr.ERROR&&this.setState(vr.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==vr.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){go()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:BU(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class $U extends Y_{constructor(e,t,r,i,o,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=vr.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=vr.ERROR,this.unlistenImage_(),this.image_=GJ(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=vr.LOADED:this.state=vr.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==vr.ERROR&&(this.state=vr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==vr.IDLE&&(this.state=vr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=jH(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function GJ(){const n=Jl(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class WJ{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const o=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class QJ extends K_{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){go()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;em(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),XF(i,r)}forEachFeatureAtCoordinate(e,t,r,i,o,a,s,h){let g;const b=t.viewState;function B(X,q,J,N){return o.call(a,q,X?J:null,N)}const S=b.projection,I=jB(e.slice(),S),k=[[0,0]];if(S.canWrapX()&&i){const X=S.getExtent(),q=ps(X);k.push([-q,0],[q,0])}const U=t.layerStatesArray,z=U.length,Y=[],Q=[];for(let X=0;X<k.length;X++)for(let q=z-1;q>=0;--q){const J=U[q],N=J.layer;if(N.hasRenderer()&&sO(J,b)&&s.call(h,N)){const ie=N.getRenderer(),he=N.getSource();if(ie&&he){const ce=he.getWrapX()?I:e,we=B.bind(null,J.managed);Q[0]=ce[0]+k[X][0],Q[1]=ce[1]+k[X][1],g=ie.forEachFeatureAtCoordinate(Q,t,r,we,Y)}if(g)return g}}if(Y.length===0)return;const ne=1/Y.length;return Y.forEach((X,q)=>X.distanceSq+=q*ne),Y.sort((X,q)=>X.distanceSq-q.distanceSq),Y.some(X=>g=X.callback(X.feature,X.layer,X.geometry)),g}hasFeatureAtCoordinate(e,t,r,i,o,a){return this.forEachFeatureAtCoordinate(e,t,r,i,r_,this,o,a)!==void 0}getMap(){return this.map_}renderFrame(e){go()}scheduleExpireIconCache(e){Sf.canExpireCache()&&e.postRenderFunctions.push(qJ)}}function qJ(n,e){Sf.expire()}class YJ extends QJ{constructor(e){super(e),this.fontChangeListenerKey_=ks(Dp,_y.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=dx+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new zU(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Ra(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ef.PRECOMPOSE,e);const t=e.layerStatesArray.sort((s,h)=>s.zIndex-h.zIndex);t.some(s=>s.layer instanceof uO&&s.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const o=[];let a=null;for(let s=0,h=t.length;s<h;++s){const g=t[s];e.layerIndex=s;const b=g.layer,B=b.getSourceState();if(!sO(g,i)||B!="ready"&&B!="undefined"){b.unrender();continue}const S=b.render(e,a);S&&(S!==a&&(this.children_.push(S),a=S),o.push(g))}this.declutter(e,o),zH(this.element_,this.children_),this.dispatchRenderEvent(Ef.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],o=i.layer;o.getDeclutter()&&o.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}class g0 extends dp{constructor(e,t){super(e),this.layer=t}}const D4={LAYERS:"layers"};class Dy extends SU{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(D4.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new $p(r.slice(),{unique:!0}):ra(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new $p(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ra),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(ks(e,gd.ADD,this.handleLayersAdd_,this),ks(e,gd.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Ra);D_(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const o=t[r];this.registerLayerListeners_(o),this.dispatchEvent(new g0("addlayer",o))}this.changed()}registerLayerListeners_(e){const t=[ks(e,_y.PROPERTYCHANGE,this.handleLayerChange_,this),ks(e,oo.CHANGE,this.handleLayerChange_,this)];e instanceof Dy&&t.push(ks(e,"addlayer",this.handleLayerGroupAdd_,this),ks(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Lo(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new g0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new g0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new g0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Lo(t);this.listenerKeys_[r].forEach(Ra),delete this.listenerKeys_[r],this.dispatchEvent(new g0("removelayer",t)),this.changed()}getLayers(){return this.get(D4.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,o=r.length;i<o;++i)this.dispatchEvent(new g0("removelayer",r[i]))}this.set(D4.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let o=i.zIndex;!e&&i.zIndex===void 0&&(o=0);for(let a=r,s=t.length;a<s;a++){const h=t[a];h.opacity*=i.opacity,h.visible=h.visible&&i.visible,h.maxResolution=Math.min(h.maxResolution,i.maxResolution),h.minResolution=Math.max(h.minResolution,i.minResolution),h.minZoom=Math.max(h.minZoom,i.minZoom),h.maxZoom=Math.min(h.maxZoom,i.maxZoom),i.extent!==void 0&&(h.extent!==void 0?h.extent=Qh(h.extent,i.extent):h.extent=i.extent),h.zIndex===void 0&&(h.zIndex=o)}return t}getSourceState(){return"ready"}}class U1 extends dp{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class p0 extends U1{constructor(e,t,r,i,o,a){super(e,t,o),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ou={SINGLECLICK:"singleclick",CLICK:oo.CLICK,DBLCLICK:oo.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},x6={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class $J extends L_{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=ks(r,x6.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ks(r,x6.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(oo.TOUCHMOVE,this.boundHandleTouchMove_,GF?{passive:!1}:!1)}emulateClick_(e){let t=new p0(Ou.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new p0(Ou.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new p0(Ou.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==Ou.POINTERUP||t.type==Ou.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==Ou.POINTERDOWN||t.type==Ou.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new p0(Ou.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ra),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new p0(Ou.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ks(r,Ou.POINTERMOVE,this.handlePointerMove_,this),ks(r,Ou.POINTERUP,this.handlePointerUp_,this),ks(this.element_,Ou.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(ks(this.element_.getRootNode(),Ou.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new p0(Ou.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new p0(Ou.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ra(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(oo.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ra(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ra),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Tm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ih={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},m2=1/0;class VJ{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,D_(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){ra(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=m2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,o=t[e],a=r[e],s=e;for(;e<i>>1;){const h=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),b=g<i&&r[g]<r[h]?g:h;t[e]=t[b],r[e]=r[b],e=b}t[e]=o,r[e]=a,this.siftDown_(s,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,o=r[t],a=i[t];for(;t>e;){const s=this.getParentIndex_(t);if(i[s]>a)r[t]=r[s],i[t]=i[s],t=s;else break}r[t]=o,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const o=t.length;let a,s,h;for(s=0;s<o;++s)a=t[s],h=e(a),h==m2?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=h,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class VU extends VJ{constructor(e,t){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(oo.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===vr.LOADED||r===vr.ERROR||r===vr.EMPTY){r!==vr.ERROR&&t.removeEventListener(oo.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],o=i.getKey();i.getState()===vr.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,i.load())}}}function HJ(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return m2;const o=n.viewState.center,a=r[0]-o[0],s=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}class dO extends fp{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)Ra(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==gy&&this.listenerKeys.push(ks(e,Tm.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class ZJ extends dO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=a):this.collapseLabel_=o;const s=e.label!==void 0?e.label:"i";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=i):this.label_=s;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(oo.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+dx+" "+PB+(this.collapsed_&&this.collapsible_?" "+D7:"")+(this.collapsible_?"":" ol-uncollapsible"),b=this.element;b.className=g,b.appendChild(this.toggleButton_),b.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(o=>{var a;return((a=o.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>yy(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!K0(t,this.renderedAttributions_)){WF(this.ulElement_);for(let i=0,o=t.length;i<o;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(D7),this.collapsed_?P7(this.collapseLabel_,this.label_):P7(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class XJ extends dO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"⇧",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const o=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=o,a.appendChild(this.label_),a.addEventListener(oo.CLICK,this.handleClick_.bind(this),!1);const s=t+" "+dx+" "+PB,h=this.element;h.className=s,h.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(jC)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Py}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const o=this.element.classList.contains(jC);!o&&r===0?this.element.classList.add(jC):o&&r!==0&&this.element.classList.remove(jC)}this.label_.style.transform=i}this.rotation_=r}}class JJ extends dO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",s=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",h=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",b=document.createElement("button");b.className=i,b.setAttribute("type","button"),b.title=h,b.appendChild(typeof a=="string"?document.createTextNode(a):a),b.addEventListener(oo.CLICK,this.handleClick_.bind(this,r),!1);const B=document.createElement("button");B.className=o,B.setAttribute("type","button"),B.title=g,B.appendChild(typeof s=="string"?document.createTextNode(s):s),B.addEventListener(oo.CLICK,this.handleClick_.bind(this,-r),!1);const S=t+" "+dx+" "+PB,I=this.element;I.className=S,I.appendChild(b),I.appendChild(B),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const o=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:Py})):r.setZoom(o)}}}function eee(n){n=n||{};const e=new $p;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new JJ(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new XJ(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new ZJ(n.attributionOptions)),e}const wk={ACTIVE:"active"};class $_ extends fp{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(wk.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(wk.ACTIVE,e)}setMap(e){this.map_=e}}function tee(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:mX,center:n.getConstrainedCenter(i)})}}function fO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const o=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:Py})}class nee extends $_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ou.DBLCLICK){const r=e.originalEvent,i=e.map,o=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,s=i.getView();fO(s,a,o,this.duration_),r.preventDefault(),t=!0}return!t}}class V_ extends $_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ou.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ou.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Ou.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Ou.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function pO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}function w6(n){const e=arguments;return function(t){let r=!0;for(let i=0,o=e.length;i<o&&(r=r&&e[i](t),!!r);++i);return r}}const ree=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},iee=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},HU=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?iee(n):!0},oee=r_,ZU=function(n){const e=n.originalEvent;return e.button==0&&!(LH&&zF&&e.ctrlKey)},XU=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},see=function(n){const e=n.originalEvent;return zF?e.metaKey:e.ctrlKey},aee=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},JU=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},L4=function(n){const e=n.originalEvent;return ra(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},lee=function(n){const e=n.originalEvent;return ra(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class uee extends V_{constructor(e){super({stopDown:cx}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:w6(XU,lee);this.condition_=e.onFocusOnly?w6(HU,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(pO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=e.map.getView();bZ(o,s.getResolution()),zB(o,s.getRotation()),s.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=r.getCenterInternal(),s=t.getPixelFromCoordinateInternal(a),h=t.getCoordinateFromPixelInternal([s[0]-i*Math.cos(o),s[1]-i*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(h),duration:500,easing:Py})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Aee extends V_{constructor(e){e=e||{},super({stopDown:cx}),this.condition_=e.condition?e.condition:ree,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!L4(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===oO)return;const i=t.getSize(),o=e.pixel,a=Math.atan2(i[1]/2-o[1],o[0]-i[0]/2);if(this.lastAngle_!==void 0){const s=a-this.lastAngle_;r.adjustRotationInternal(-s)}this.lastAngle_=a}handleUpEvent(e){return L4(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return L4(e)&&ZU(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class cee extends K_{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Qm([i])}getGeometry(){return this.geometry_}}const u1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Av extends dp{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class hee extends V_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new cee(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??ZU,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],o=r[1]-t[1];return i*i+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Av(u1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Av(t?u1.BOXEND:u1.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Av(u1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Av(u1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Av(u1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class dee extends hee{constructor(e){e=e||{};const t=e.condition?e.condition:aee;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const o=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(o),s=r.getResolution()/a;i=i.clone(),i.scale(s*s)}r.fitInternal(i,{duration:this.duration_,easing:Py})}}const eg={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class fee extends $_{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return XU(t)&&JU(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==oo.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==eg.DOWN||i==eg.LEFT||i==eg.RIGHT||i==eg.UP)){const a=e.map.getView(),s=a.getResolution()*this.pixelDelta_;let h=0,g=0;i==eg.DOWN?g=-s:i==eg.LEFT?h=-s:i==eg.RIGHT?h=s:g=s;const b=[h,g];zB(b,a.getRotation()),tee(a,b,this.duration_),r.preventDefault(),t=!0}}return!t}}class pee extends $_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!see(t)&&JU(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==oo.KEYDOWN||e.type==oo.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const o=e.map,a=i==="+"?this.delta_:-this.delta_,s=o.getView();fO(s,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class mee extends $_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:oee;this.condition_=e.onFocusOnly?w6(HU,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==oo.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o;if(e.type==oo.WHEEL&&(o=i.deltaY,KH&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=jF),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const s=r.getView();if(this.mode_==="trackpad"&&!(s.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=o;const h=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),h),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Tu(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),fO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class gee extends V_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=cx),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],o=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const h=o-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=h}this.lastAngle_=o;const a=e.map,s=a.getView();s.getConstraints().rotation!==oO&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(pO(this.targetPointers))),this.rotating_&&(a.render(),s.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class yee extends V_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=cx),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],o=r.clientX-i.clientX,a=r.clientY-i.clientY,s=Math.sqrt(o*o+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/s),this.lastDistance_=s;const h=e.map,g=h.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(pO(this.targetPointers))),h.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function vee(n){n=n||{};const e=new $p,t=new WJ(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new Aee),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new nee({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new uee({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new gee),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new yee({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new fee),e.push(new pee({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new mee({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new dee({duration:n.zoomDuration})),e}function ez(n){if(n instanceof Ry){n.setMapInternal(null);return}n instanceof Dy&&n.getLayers().forEach(ez)}function tz(n,e){if(n instanceof Ry){n.setMapInternal(e);return}if(n instanceof Dy){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)tz(t[r],e)}}let mO=class extends fp{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=_ee(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:jF,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=_d(),this.pixelToCoordinateTransform_=_d(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||eee(),this.interactions=t.interactions||vee({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new VU(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ih.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ih.VIEW,this.handleViewChanged_),this.addChangeListener(ih.SIZE,this.handleSizeChanged_),this.addChangeListener(ih.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof sp)&&e.view.then(function(i){r.setView(new sp(i))}),this.controls.addEventListener(gd.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(gd.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(gd.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(gd.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(gd.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(gd.REMOVE,i=>{const o=i.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){tz(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const o=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:r_,s=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,o,s,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Dy?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:r_,o=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),o=r.width/i[0],a=r.height/i[1],s="changedTouches"in e?e.changedTouches[0]:e;return[(s.clientX-r.left)/o,(s.clientY-r.top)/a]}getTarget(){return this.get(ih.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return m6(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?yA(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ih.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof $p){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const o=i.layer.getRenderer();if(o&&!o.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=km(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?yA(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ih.SIZE)}getView(){return this.get(ih.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return HJ(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new p0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===x6.POINTERDOWN||r===oo.WHEEL||r===oo.KEYDOWN){const i=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,s=o instanceof ShadowRoot?o.host===a?o.host.ownerDocument:o:o===i?i.documentElement:o;if(this.overlayContainerStopEvent_.contains(a)||!s.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,o=i;if(e){const a=e.viewHints;if(a[Vl.ANIMATING]||a[Vl.INTERACTING]){const s=Date.now()-e.time>8;i=s?0:8,o=s?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ef.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ef.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new U1(Tm.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new U1(Tm.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,o=r.length;i<o;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Ra(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(oo.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(oo.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new YJ(this)),this.mapBrowserEventHandler_=new $J(this,this.moveTolerance_);for(const o in Ou)this.mapBrowserEventHandler_.addEventListener(Ou[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(oo.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(oo.WHEEL,this.boundHandleBrowserEvent_,GF?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const o=t.getRootNode();r=o instanceof ShadowRoot?o.host:t}this.targetChangeHandlerKeys_=[ks(r,oo.KEYDOWN,this.handleBrowserEvent,this),ks(r,oo.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ra(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ra(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ks(e,_y.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ks(e,oo.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ra),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new g0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[ks(e,_y.PROPERTYCHANGE,this.render,this),ks(e,oo.CHANGE,this.render,this),ks(e,"addlayer",this.handleLayerAdd_,this),ks(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){ez(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let o=null;if(t!==void 0&&R7(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:i2(s.center,s.resolution,s.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{},mapId:Lo(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const h=isNaN(s.nextRotation)?s.rotation:s.nextRotation;o.nextExtent=i2(s.nextCenter,s.nextResolution,h,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i&&(!this.previousExtent_||!Lg(this.previousExtent_)&&!Wm(o.extent,this.previousExtent_))&&(this.dispatchEvent(new U1(Tm.MOVESTART,this,i)),this.previousExtent_=Ty(this.previousExtent_)),this.previousExtent_&&!o.viewHints[Vl.ANIMATING]&&!o.viewHints[Vl.INTERACTING]&&!Wm(o.extent,this.previousExtent_)&&(this.dispatchEvent(new U1(Tm.MOVEEND,this,o)),JF(o.extent,this.previousExtent_))),this.dispatchEvent(new U1(Tm.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(Tm.LOADSTART)||this.hasListener(Tm.LOADEND)||this.hasListener(Ef.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new g0("removelayer",t)),this.set(ih.LAYERGROUP,e)}setSize(e){this.set(ih.SIZE,e)}setTarget(e){this.set(ih.TARGET,e)}setView(e){if(!e||e instanceof sp){this.set(ih.VIEW,e);return}this.set(ih.VIEW,new sp);const t=this;e.then(function(r){t.setView(new sp(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),o=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(a)&&(t=[Math.max(0,o),Math.max(0,a)],!R7(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&uU("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!K0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function _ee(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Dy({layers:n.layers});t[ih.LAYERGROUP]=r,t[ih.TARGET]=n.target,t[ih.VIEW]=n.view instanceof sp?n.view:new sp;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new $p(n.controls.slice()):(ra(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new $p(n.interactions.slice()):(ra(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new $p(n.overlays.slice()):(ra(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new $p,{controls:i,interactions:o,keyboardEventTarget:e,overlays:a,values:t}}const rh={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Cee extends fp{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+VH,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(rh.ELEMENT,this.handleElementChanged),this.addChangeListener(rh.MAP,this.handleMapChanged),this.addChangeListener(rh.OFFSET,this.handleOffsetChanged),this.addChangeListener(rh.POSITION,this.handlePositionChanged),this.addChangeListener(rh.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(rh.ELEMENT)}getId(){return this.id}getMap(){return this.get(rh.MAP)||null}getOffset(){return this.get(rh.OFFSET)}getPosition(){return this.get(rh.POSITION)}getPositioning(){return this.get(rh.POSITIONING)}handleElementChanged(){WF(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),Ra(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=ks(e,Tm.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(rh.ELEMENT,e)}setMap(e){this.set(rh.MAP,e)}setOffset(e){this.set(rh.OFFSET,e)}setPosition(e){this.set(rh.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(rh.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),o=this.getRect(i,[FH(i),UH(i)]);e=e||{};const a=e.margin===void 0?20:e.margin;if(!lp(r,o)){const s=o[0]-r[0],h=r[2]-o[2],g=o[1]-r[1],b=r[3]-o[3],B=[0,0];if(s<0?B[0]=s-a:h<0&&(B[0]=Math.abs(h)+a),g<0?B[1]=g-a:b<0&&(B[1]=Math.abs(b)+a),B[0]!==0||B[1]!==0){const S=t.getView().getCenterInternal(),I=t.getPixelFromCoordinateInternal(S);if(!I)return;const k=[I[0]+B[0],I[1]+B[1]],U=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(k),duration:U.duration,easing:U.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[i,o,i+t[0],o+t[1]]}setPositioning(e){this.set(rh.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const a=Math.round(e[0]+i[0])+"px",s=Math.round(e[1]+i[1])+"px";let h="0%",g="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?h="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(h="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?g="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(g="-50%");const b=`translate(${h}, ${g}) translate(${a}, ${s})`;this.rendered.transform_!=b&&(this.rendered.transform_=b,r.transform=b)}getOptions(){return this.options}}class bee{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof K_&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return ra(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return ra(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ra(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function g2(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function xee(n,e,t){return n+"/"+e+"/"+t}function wee(n){return Mee(n[0],n[1],n[2])}function Mee(n,e,t){return(e<<n)+t}function See(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(r,i):!0}class gO{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function A1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new gO(n,e,t,r)}const Mk=[];class Eee extends Y_{constructor(e,t,r,i,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=Jl(1,1,Mk)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Lo(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(F_(this.context_),Mk.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let nz=class extends Y_{constructor(e,t,r,i,o,a){super(e,t,a),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==vr.IDLE&&(this.setState(vr.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(vr.ERROR)}setFeatures(e){this.features_=e,this.setState(vr.LOADED)}setLoader(e){this.loader_=e}};class rz{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=px,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Ma(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Ma(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return go()}readFeature(e,t){return go()}readFeatures(e,t){return go()}readGeometry(e,t){return go()}readProjection(e){return go()}writeFeature(e,t){return go()}writeFeatures(e,t){return go()}writeGeometry(e,t){return go()}}function Ox(n,e,t){const r=t?Ma(t.featureProjection):null,i=t?Ma(t.dataProjection):null;let o=n;if(r&&i&&!wg(r,i)){e&&(o=n.clone());const a=e?r:i,s=e?i:r;a.getUnits()==="tile-pixels"?o.transform(a,s):o.applyTransform(c_(a,s))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),s=function(h){for(let g=0,b=h.length;g<b;++g)h[g]=Math.round(h[g]*a)/a;return h};o===n&&(o=n.clone()),o.applyTransform(s)}return o}const Bee={Point:kg,LineString:Ig,Polygon:Qm,MultiPoint:W_,MultiLineString:f_,MultiPolygon:p_};function Oee(n,e,t){return Array.isArray(e[0])?(bU(n,0,e,t)||(n=n.slice(),v6(n,0,e,t)),n):(tO(n,0,e,t)||(n=n.slice(),A2(n,0,e,t)),n)}function iz(n,e){var o;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(a=>iz({...n,geometry:a})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return Ox(new sh(r,r==="Polygon"?Oee(t.flatCoordinates,t.ends,i):t.flatCoordinates,(o=t.ends)==null?void 0:o.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function yO(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>yO(i,e));return new l2(r)}const t=Bee[n.type];return Ox(new t(n.flatCoordinates,n.layout,n.ends),!1,e)}class Iee extends rz{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(VC(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(VC(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return go()}readFeaturesFromObject(e,t){return go()}readGeometry(e,t){return this.readGeometryFromObject(VC(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return go()}readProjection(e){return this.readProjectionFromObject(VC(e))}readProjectionFromObject(e){return go()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return go()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return go()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return go()}}function VC(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class Sk extends Iee{constructor(e){e=e||{},super(),this.dataProjection=Ma(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ma(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=vO(r.geometry);if(this.featureClass===sh)return iz({geometry:i,id:r.id,properties:r.properties},t);const o=new px;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&o.setGeometryName(r.geometry_name),o.setGeometry(yO(i,t)),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const o=e;i=[];const a=o.features;for(let s=0,h=a.length;s<h;++s){const g=this.readFeatureFromObject(a[s],t);g&&i.push(g)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return kee(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Ma(t.properties.name);else if(t.type==="EPSG")r=Ma("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const o=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=M6(a,t),delete o[e.getGeometryName()]),T0(o)||(r.properties=o),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,o=e.length;i<o;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return M6(e,this.adaptOptions(t))}}function vO(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Pee(n);break}case"LineString":{t=Ree(n);break}case"Polygon":{t=Fee(n);break}case"MultiPoint":{t=Dee(n);break}case"MultiLineString":{t=Kee(n);break}case"MultiPolygon":{t=Lee(n);break}case"GeometryCollection":{t=Tee(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function kee(n,e){const t=vO(n);return yO(t,e)}function Tee(n,e){return n.geometries.map(function(r){return vO(r)})}function Pee(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Ug(e.length)}}function Ree(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Ug(((r=e[0])==null?void 0:r.length)||2)}}function Kee(n){var o,a;const e=n.coordinates,t=((a=(o=e[0])==null?void 0:o[0])==null?void 0:a.length)||2,r=[],i=G_(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Ug(t)}}function Dee(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Ug(((t=e[0])==null?void 0:t.length)||2)}}function Lee(n){var o,a;const e=n.coordinates,t=[],r=((a=(o=e[0])==null?void 0:o[0])==null?void 0:a[0].length)||2,i=dU(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Ug(r)}}function Fee(n){var o,a;const e=n.coordinates,t=[],r=(a=(o=e[0])==null?void 0:o[0])==null?void 0:a.length,i=G_(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Ug(r)}}function M6(n,e){n=Ox(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=Wee(n);break}case"LineString":{r=zee(n);break}case"Polygon":{r=Qee(n,e);break}case"MultiPoint":{r=Nee(n);break}case"MultiLineString":{r=jee(n);break}case"MultiPolygon":{r=Gee(n,e);break}case"GeometryCollection":{r=Uee(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function Uee(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return M6(r,e)})}}function zee(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function jee(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Nee(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Gee(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Wee(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Qee(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}class qee extends Ry{constructor(e){e=e||{},super(e)}}class Yee extends cO{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,o=i.resolution,a=this.getLayer().getSource(),s=e.viewHints;let h=e.extent;if(t.extent!==void 0&&(h=Qh(h,Yp(t.extent,i.projection))),!s[Vl.ANIMATING]&&!s[Vl.INTERACTING]&&!Lg(h))if(a){const g=i.projection,b=a.getImage(h,o,r,g);b&&(this.loadImage(b)?this.image=b:b.getState()===fi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=yA(t.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!Og(o,i))return null;const a=this.image.getExtent(),s=this.image.getImage(),h=ps(a),g=Math.floor(s.width*((i[0]-a[0])/h));if(g<0||g>=s.width)return null;const b=Hl(a),B=Math.floor(s.height*((a[3]-i[1])/b));return B<0||B>=s.height?null:this.getImageData(s,g,B)}renderFrame(e,t){const r=this.image,i=r.getExtent(),o=r.getResolution(),[a,s]=Array.isArray(o)?o:[o,o],h=r.getPixelRatio(),g=e.layerStatesArray[e.layerIndex],b=e.pixelRatio,B=e.viewState,S=B.center,I=B.resolution,k=b*a/(I*h),U=b*s/(I*h);this.prepareContainer(e,t);const z=this.context.canvas.width,Y=this.context.canvas.height,Q=this.getRenderContext(e);let ne=!1,X=!0;if(g.extent){const he=Yp(g.extent,B.projection);X=ku(he,e.extent),ne=X&&!lp(he,e.extent),ne&&this.clipUnrotated(Q,e,he)}const q=r.getImage(),J=em(this.tempTransform,z/2,Y/2,k,U,0,h*(i[0]-S[0])/a,h*(S[1]-i[3])/s);this.renderedResolution=s*b/h;const N=q.width*J[0],ie=q.height*J[3];if(this.getLayer().getSource().getInterpolate()||(Q.imageSmoothingEnabled=!1),this.preRender(Q,e),X&&N>=.5&&ie>=.5){const he=J[4],ce=J[5],we=g.opacity;we!==1&&(Q.save(),Q.globalAlpha=we),Q.drawImage(q,0,0,+q.width,+q.height,he,ce,N,ie),we!==1&&Q.restore()}return this.postRender(this.context,e),ne&&Q.restore(),Q.imageSmoothingEnabled=!0,this.container}}class oz extends qee{constructor(e){super(e)}createRenderer(){return new Yee(this)}getData(e){return super.getData(e)}}const S6=65536*65536,Ek=1/S6,$ee=12,Bk=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),F4=0,HC=1,cv=2,ZC=5;class Vee{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),o=i>>3,a=this.pos;this.type=i&7,e(o,t,this),this.pos===a&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*S6;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*S6;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,Hee(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=$ee&&Bk?Bk.decode(this.buf.subarray(t,e)):ute(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===cv?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===F4)for(;this.buf[this.pos++]>127;);else if(t===cv)this.pos=this.readVarint()+this.pos;else if(t===ZC)this.pos+=4;else if(t===HC)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Ek),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Ek),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Zee(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Ate(this.buf,e,this.pos);const r=this.pos-t;r>=128&&Ok(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&Ok(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,cv),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,ete,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,tte,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,ite,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,nte,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,rte,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,ote,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,ste,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,ate,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,lte,t)}writeBytesField(e,t){this.writeTag(e,cv),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,ZC),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,ZC),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,HC),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,HC),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,F4),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,F4),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,cv),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,ZC),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,HC),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Hee(n,e,t){const r=t.buf;let i,o;if(o=r[t.pos++],i=(o&112)>>4,o<128||(o=r[t.pos++],i|=(o&127)<<3,o<128)||(o=r[t.pos++],i|=(o&127)<<10,o<128)||(o=r[t.pos++],i|=(o&127)<<17,o<128)||(o=r[t.pos++],i|=(o&127)<<24,o<128)||(o=r[t.pos++],i|=(o&1)<<31,o<128))return c1(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function c1(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function Zee(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Xee(t,r,e),Jee(r,e)}function Xee(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Jee(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function Ok(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function ete(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function tte(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function nte(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function rte(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function ite(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function ote(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function ste(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function ate(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function lte(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function ute(n,e,t){let r="",i=e;for(;i<t;){const o=n[i];let a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s>t)break;let h,g,b;s===1?o<128&&(a=o):s===2?(h=n[i+1],(h&192)===128&&(a=(o&31)<<6|h&63,a<=127&&(a=null))):s===3?(h=n[i+1],g=n[i+2],(h&192)===128&&(g&192)===128&&(a=(o&15)<<12|(h&63)<<6|g&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):s===4&&(h=n[i+1],g=n[i+2],b=n[i+3],(h&192)===128&&(g&192)===128&&(b&192)===128&&(a=(o&15)<<18|(h&63)<<12|(g&63)<<6|b&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,s=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),r+=String.fromCharCode(a),i+=s}return r}function Ate(n,e,t){for(let r=0,i,o;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(o)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=i;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class cte extends rz{constructor(e){super(),e=e||{},this.dataProjection=new vx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:sh,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const o=e.readVarint()+e.pos;let a=1,s=0,h=0,g=0,b=0,B=0;for(;e.pos<o;){if(!s){const S=e.readVarint();a=S&7,s=S>>3}if(s--,a===1||a===2)h+=e.readSVarint(),g+=e.readSVarint(),a===1&&b>B&&(i.push(b),B=b),r.push(h,g),b+=2;else if(a===7)b>B&&(r.push(r[B],r[B+1]),b+=2);else throw new Error("Invalid command found in the PBF")}b>B&&(i.push(b),B=b)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let o;const a=t.properties;let s;this.idProperty_?(s=a[this.idProperty_],delete a[this.idProperty_]):s=t.id,a[this.layerName_]=t.layer.name;const h=[],g=[];this.readRawGeometry_(e,t,h,g);const b=mte(i,g.length);if(this.featureClass===sh)o=new this.featureClass(b,h,g,2,a,s),o.transform(r.dataProjection);else{let B;if(b=="Polygon"){const k=xU(h,g);B=k.length>1?new p_(h,"XY",k):new Qm(h,"XY",g)}else B=b==="Point"?new kg(h,"XY"):b==="LineString"?new Ig(h,"XY"):b==="MultiPoint"?new W_(h,"XY"):b==="MultiLineString"?new f_(h,"XY",g):null;const S=this.featureClass;o=new S,this.geometryName_&&o.setGeometryName(this.geometryName_);const I=Ox(B,!1,r);o.setGeometry(I),s!==void 0&&o.setId(s),o.setProperties(a,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=Ma(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const o=new Vee(e),a=o.readFields(hte,{}),s=[];for(const h in a){if(r&&!r.includes(h))continue;const g=a[h],b=g?[0,0,g.extent,g.extent]:null;i.setExtent(b);for(let B=0,S=g.length;B<S;++B){const I=pte(o,g,B),k=this.createFeature_(o,I,t);k!==null&&s.push(k)}}return s}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function hte(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(dte,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function dte(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function fte(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[i]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function pte(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(fte,i,r),i}function mte(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}const _O=.5,gte=10,Ik=.25;class CO{constructor(e,t,r,i,o,a,s){this.sourceProj_=e,this.targetProj_=t;let h={};const g=s?GZ(ne=>yA(s,bx(ne,this.targetProj_,this.sourceProj_))):c_(this.targetProj_,this.sourceProj_);this.transformInv_=function(ne){const X=ne[0]+"/"+ne[1];return h[X]||(h[X]=g(ne)),h[X]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ps(i)>=ps(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ps(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ps(this.targetProj_.getExtent()):null;const b=Ap(r),B=yx(r),S=gx(r),I=mx(r),k=this.transformInv_(b),U=this.transformInv_(B),z=this.transformInv_(S),Y=this.transformInv_(I),Q=gte+(a?Math.max(0,Math.ceil(Math.log2(u_(r)/(a*a*256*256)))):0);if(this.addQuad_(b,B,S,I,k,U,z,Y,Q),this.wrapsXInSource_){let ne=1/0;this.triangles_.forEach(function(X,q,J){ne=Math.min(ne,X.source[0][0],X.source[1][0],X.source[2][0])}),this.triangles_.forEach(X=>{if(Math.max(X.source[0][0],X.source[1][0],X.source[2][0])-ne>this.sourceWorldWidth_/2){const q=[[X.source[0][0],X.source[0][1]],[X.source[1][0],X.source[1][1]],[X.source[2][0],X.source[2][1]]];q[0][0]-ne>this.sourceWorldWidth_/2&&(q[0][0]-=this.sourceWorldWidth_),q[1][0]-ne>this.sourceWorldWidth_/2&&(q[1][0]-=this.sourceWorldWidth_),q[2][0]-ne>this.sourceWorldWidth_/2&&(q[2][0]-=this.sourceWorldWidth_);const J=Math.min(q[0][0],q[1][0],q[2][0]);Math.max(q[0][0],q[1][0],q[2][0])-J<this.sourceWorldWidth_/2&&(X.source=q)}})}h={}}addTriangle_(e,t,r,i,o,a){this.triangles_.push({source:[i,o,a],target:[e,t,r]})}addQuad_(e,t,r,i,o,a,s,h,g){const b=u6([o,a,s,h]),B=this.sourceWorldWidth_?ps(b)/this.sourceWorldWidth_:null,S=this.sourceWorldWidth_,I=this.sourceProj_.canWrapX()&&B>.5&&B<1;let k=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=u6([e,t,r,i]);k=ps(z)/this.targetWorldWidth_>Ik||k}!I&&this.sourceProj_.isGlobal()&&B&&(k=B>Ik||k)}if(!k&&this.maxSourceExtent_&&isFinite(b[0])&&isFinite(b[1])&&isFinite(b[2])&&isFinite(b[3])&&!ku(b,this.maxSourceExtent_))return;let U=0;if(!k&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(h[0])||!isFinite(h[1]))){if(g>0)k=!0;else if(U=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),U!=1&&U!=2&&U!=4&&U!=8)return}if(g>0){if(!k){const z=[(e[0]+r[0])/2,(e[1]+r[1])/2],Y=this.transformInv_(z);let Q;I?Q=(xg(o[0],S)+xg(s[0],S))/2-xg(Y[0],S):Q=(o[0]+s[0])/2-Y[0];const ne=(o[1]+s[1])/2-Y[1];k=Q*Q+ne*ne>this.errorThresholdSquared_}if(k){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const z=[(t[0]+r[0])/2,(t[1]+r[1])/2],Y=this.transformInv_(z),Q=[(i[0]+e[0])/2,(i[1]+e[1])/2],ne=this.transformInv_(Q);this.addQuad_(e,t,z,Q,o,a,Y,ne,g-1),this.addQuad_(Q,z,r,i,ne,Y,s,h,g-1)}else{const z=[(e[0]+t[0])/2,(e[1]+t[1])/2],Y=this.transformInv_(z),Q=[(r[0]+i[0])/2,(r[1]+i[1])/2],ne=this.transformInv_(Q);this.addQuad_(e,z,Q,i,o,Y,ne,h,g-1),this.addQuad_(z,t,r,Q,Y,a,s,ne,g-1)}return}}if(I){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}U&11||this.addTriangle_(e,r,i,o,s,h),U&14||this.addTriangle_(e,r,t,o,s,a),U&&(U&13||this.addTriangle_(t,i,e,a,h,o),U&7||this.addTriangle_(t,i,r,a,h,s))}calculateSourceExtent(){const e=Zd();return this.triangles_.forEach(function(t,r,i){const o=t.source;Nv(e,o[0]),Nv(e,o[1]),Nv(e,o[2])}),e}getTriangles(){return this.triangles_}}let U4;const iy=[];function kk(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function z4(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function yte(){if(U4===void 0){const n=Jl(6,6,iy);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",kk(n,4,5,4,0),kk(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;U4=z4(e,0)||z4(e,4)||z4(e,8),F_(n),iy.push(n.canvas)}return U4}function E6(n,e,t,r){const i=bx(t,e,n);let o=f6(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(o*=a);const s=n.getMetersPerUnit();s!==void 0&&(o/=s);const h=n.getExtent();if(!h||Og(h,i)){const g=f6(n,o,i)/o;isFinite(g)&&g>0&&(o/=g)}return o}function sz(n,e,t,r){const i=If(t);let o=E6(n,e,i,r);return(!isFinite(o)||o<=0)&&nU(t,function(a){return o=E6(n,e,a,r),isFinite(o)&&o>0}),o}function az(n,e,t,r,i,o,a,s,h,g,b,B,S,I){const k=Jl(Math.round(t*n),Math.round(t*e),iy);if(B||(k.imageSmoothingEnabled=!1),h.length===0)return k.canvas;k.scale(t,t);function U(q){return Math.round(q*t)/t}k.globalCompositeOperation="lighter";const z=Zd();h.forEach(function(q,J,N){FB(z,q.extent)});let Y;const Q=t/r,ne=(B?1:1+Math.pow(2,-24))/Q;if(!S||h.length!==1||g!==0){if(Y=Jl(Math.round(ps(z)*Q),Math.round(Hl(z)*Q),iy),B||(Y.imageSmoothingEnabled=!1),i&&I){const q=(i[0]-z[0])*Q,J=-(i[3]-z[3])*Q,N=ps(i)*Q,ie=Hl(i)*Q;Y.rect(q,J,N,ie),Y.clip()}h.forEach(function(q,J,N){if(q.image.width>0&&q.image.height>0){if(q.clipExtent){Y.save();const pe=(q.clipExtent[0]-z[0])*Q,Ce=-(q.clipExtent[3]-z[3])*Q,Pe=ps(q.clipExtent)*Q,de=Hl(q.clipExtent)*Q;Y.rect(B?pe:Math.round(pe),B?Ce:Math.round(Ce),B?Pe:Math.round(pe+Pe)-Math.round(pe),B?de:Math.round(Ce+de)-Math.round(Ce)),Y.clip()}const ie=(q.extent[0]-z[0])*Q,he=-(q.extent[3]-z[3])*Q,ce=ps(q.extent)*Q,we=Hl(q.extent)*Q;Y.drawImage(q.image,g,g,q.image.width-2*g,q.image.height-2*g,B?ie:Math.round(ie),B?he:Math.round(he),B?ce:Math.round(ie+ce)-Math.round(ie),B?we:Math.round(he+we)-Math.round(he)),q.clipExtent&&Y.restore()}})}const X=Ap(a);return s.getTriangles().forEach(function(q,J,N){const ie=q.source,he=q.target;let ce=ie[0][0],we=ie[0][1],pe=ie[1][0],Ce=ie[1][1],Pe=ie[2][0],de=ie[2][1];const rt=U((he[0][0]-X[0])/o),ze=U(-(he[0][1]-X[1])/o),Qe=U((he[1][0]-X[0])/o),ut=U(-(he[1][1]-X[1])/o),Te=U((he[2][0]-X[0])/o),Ue=U(-(he[2][1]-X[1])/o),st=ce,wt=we;ce=0,we=0,pe-=st,Ce-=wt,Pe-=st,de-=wt;const mt=[[pe,Ce,0,0,Qe-rt],[Pe,de,0,0,Te-rt],[0,0,pe,Ce,ut-ze],[0,0,Pe,de,Ue-ze]],ft=IH(mt);if(!ft)return;if(k.save(),k.beginPath(),yte()||!B){k.moveTo(Qe,ut);const Lt=4,De=rt-Qe,ke=ze-ut;for(let Oe=0;Oe<Lt;Oe++)k.lineTo(Qe+U((Oe+1)*De/Lt),ut+U(Oe*ke/(Lt-1))),Oe!=Lt-1&&k.lineTo(Qe+U((Oe+1)*De/Lt),ut+U((Oe+1)*ke/(Lt-1)));k.lineTo(Te,Ue)}else k.moveTo(Qe,ut),k.lineTo(rt,ze),k.lineTo(Te,Ue);k.clip(),k.transform(ft[0],ft[2],ft[1],ft[3],rt,ze),k.translate(z[0]-st,z[3]-wt);let Ut;if(Y)Ut=Y.canvas,k.scale(ne,-ne);else{const Lt=h[0],De=Lt.extent;Ut=Lt.image,k.scale(ps(De)/Ut.width,-Hl(De)/Ut.height)}k.drawImage(Ut,0,0),k.restore()}),Y&&(F_(Y),iy.push(Y.canvas)),b&&(k.save(),k.globalCompositeOperation="source-over",k.strokeStyle="black",k.lineWidth=1,s.getTriangles().forEach(function(q,J,N){const ie=q.target,he=(ie[0][0]-X[0])/o,ce=-(ie[0][1]-X[1])/o,we=(ie[1][0]-X[0])/o,pe=-(ie[1][1]-X[1])/o,Ce=(ie[2][0]-X[0])/o,Pe=-(ie[2][1]-X[1])/o;k.beginPath(),k.moveTo(we,pe),k.lineTo(he,ce),k.lineTo(Ce,Pe),k.closePath(),k.stroke()}),k.restore()),k.canvas}function B6(n){return Array.isArray(n)?Math.min(...n):n}class vte extends kB{constructor(e,t,r,i,o,a,s){let h=e.getExtent();h&&e.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);let g=t.getExtent();g&&t.canWrapX()&&(g=g.slice(),g[0]=-1/0,g[2]=1/0);const b=g?Qh(r,g):r,B=If(b),S=E6(e,t,B,i),I=_O,k=new CO(e,t,b,h,S*I,i),U=k.calculateSourceExtent(),z=Lg(U)?null:a(U,S,o),Y=z?fi.IDLE:fi.EMPTY,Q=z?z.getPixelRatio():1;super(r,i,Q,Y),this.targetProj_=t,this.maxSourceExtent_=h,this.triangulation_=k,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=z,this.sourcePixelRatio_=Q,this.interpolate_=s,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==fi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==fi.LOADED){const t=ps(this.targetExtent_)/this.targetResolution_,r=Hl(this.targetExtent_)/this.targetResolution_;this.canvas_=az(t,r,this.sourcePixelRatio_,B6(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==fi.IDLE){this.state=fi.LOADING,this.changed();const e=this.sourceImage_.getState();e==fi.LOADED||e==fi.ERROR?this.reproject_():(this.sourceListenerKey_=ks(this.sourceImage_,oo.CHANGE,t=>{const r=this.sourceImage_.getState();(r==fi.LOADED||r==fi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Ra(this.sourceListenerKey_),this.sourceListenerKey_=null}}const XC=4,j4={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class _te extends dp{constructor(e,t){super(e),this.image=t}}class lz extends Ky{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Ax(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const o=this.getProjection();if(!o||!i||wg(o,i))return o&&(i=o),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&wg(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Wm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new vte(o,i,e,t,r,(a,s,h)=>this.getImageInternal(a,s,h,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const o=Cte(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&lp(this.wantedExtent_,o)||lp(this.image.getExtent(),o))&&(this.wantedResolution_&&B6(this.wantedResolution_)===a||B6(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=o,this.wantedResolution_=a,this.image=new kB(o,a,r,this.loader),this.image.addEventListener(oo.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case fi.LOADING:this.loading=!0,r=j4.IMAGELOADSTART;break;case fi.LOADED:this.loading=!1,r=j4.IMAGELOADEND;break;case fi.ERROR:this.loading=!1,r=j4.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new _te(r,t))}}function Cte(n,e,t,r){const i=e/t,o=If(n),a=_0(ps(n)/i,XC),s=_0(Hl(n)/i,XC),h=_0((r-1)*a/2,XC),g=a+2*h,b=_0((r-1)*s/2,XC),B=s+2*b;return i2(o,i,0,[g,B])}const w0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class bte extends Ry{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(w0.PRELOAD)}setPreload(e){this.set(w0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(w0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(w0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function y2(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}function xte(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Float32Array||n instanceof DataView?n:null}const wte=new Error("disposed");let h1=null;function Mte(n){h1||(h1=Jl(n.width,n.height,void 0,{willReadFrequently:!0}));const e=h1.canvas,t=n.width;e.width!==t&&(e.width=t);const r=n.height;return e.height!==r&&(e.height=r),h1.clearRect(0,0,t,r),h1.drawImage(n,0,0),h1.getImageData(0,0,t,r).data}const Ste=[256,256];class O6 extends Y_{constructor(e){const t=vr.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=y2(this.data_);return e?[e.width,e.height]:Ste}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==vr.IDLE&&this.state!==vr.ERROR)return;this.state=vr.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=vr.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=vr.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(wte),this.controller_=null),super.disposeInternal()}}function Ix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function I6(n,e,t,r,i,o,a){a=a??Ix();const s=1/(n-e),h=1/(t-r),g=1/(i-o);return a[0]=-2*s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*g,a[11]=0,a[12]=(n+e)*s,a[13]=(r+t)*h,a[14]=(o+i)*g,a[15]=1,a}function Tk(n,e,t,r,i){return i=i??Ix(),i[0]=n[0]*e,i[1]=n[1]*e,i[2]=n[2]*e,i[3]=n[3]*e,i[4]=n[4]*t,i[5]=n[5]*t,i[6]=n[6]*t,i[7]=n[7]*t,i[8]=n[8]*r,i[9]=n[9]*r,i[10]=n[10]*r,i[11]=n[11]*r,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function Ete(n,e,t,r,i){i=i??Ix();let o,a,s,h,g,b,B,S,I,k,U,z;return n===i?(i[12]=n[0]*e+n[4]*t+n[8]*r+n[12],i[13]=n[1]*e+n[5]*t+n[9]*r+n[13],i[14]=n[2]*e+n[6]*t+n[10]*r+n[14],i[15]=n[3]*e+n[7]*t+n[11]*r+n[15]):(o=n[0],a=n[1],s=n[2],h=n[3],g=n[4],b=n[5],B=n[6],S=n[7],I=n[8],k=n[9],U=n[10],z=n[11],i[0]=o,i[1]=a,i[2]=s,i[3]=h,i[4]=g,i[5]=b,i[6]=B,i[7]=S,i[8]=I,i[9]=k,i[10]=U,i[11]=z,i[12]=o*e+g*t+I*r+n[12],i[13]=a*e+b*t+k*r+n[13],i[14]=s*e+B*t+U*r+n[14],i[15]=h*e+S*t+z*r+n[15]),i}function Bte(n,e,t,r){return r=r??Ix(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n,r[13]=e,r[14]=t,r[15]=1,r}const Ote=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Ite=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class kte{constructor(e){this.gl_=e,this.program_=k6(e,Ite,Ote),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,r,i,o,a,s,h,g,b,B,S,I){const k=this.gl_;h===void 0&&(h=i),g===void 0&&(g=o),a===void 0&&(a=t),s===void 0&&(s=r),b===void 0&&(b=a),B===void 0&&(B=s),S===void 0&&(S=k.canvas.width),I===void 0&&(I=k.canvas.height),k.bindTexture(k.TEXTURE_2D,e),k.useProgram(this.program_),k.bindBuffer(k.ARRAY_BUFFER,this.positionBuffer),k.enableVertexAttribArray(this.positionLocation),k.vertexAttribPointer(this.positionLocation,2,k.FLOAT,!1,0,0),k.bindBuffer(k.ARRAY_BUFFER,this.texcoordBuffer),k.enableVertexAttribArray(this.texcoordLocation),k.vertexAttribPointer(this.texcoordLocation,2,k.FLOAT,!1,0,0);let U=I6(0,S,0,I,-1,1);U=Ete(U,h,g,0),U=Tk(U,b,B,1),k.uniformMatrix4fv(this.matrixLocation,!1,U);let z=Bte(i/t,o/r,0);z=Tk(z,a/t,s/r,1),k.uniformMatrix4fv(this.textureMatrixLocation,!1,z),k.uniform1i(this.textureLocation,0),k.drawArrays(k.TRIANGLES,0,this.positions.length/2)}}function Pk(n,e,t){const r=n.createShader(e);if(r===null)throw new Error("Shader compilation failed");if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){const i=n.getShaderInfoLog(r);throw i===null?new Error("Shader info log creation failed"):new Error(i)}return r}function k6(n,e,t){const r=n.createProgram(),i=Pk(n,n.VERTEX_SHADER,t),o=Pk(n,n.FRAGMENT_SHADER,e);if(r===null)throw new Error("Program creation failed");if(n.attachShader(r,i),n.attachShader(r,o),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw n.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}const Tte=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,Pte=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Rte=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,Kte=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function Dte(n,e,t,r){let i;return t.length?i=t.shift():IB?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("webgl",r)}function Lte(n){const e=n.canvas;e.width=1,e.height=1,n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)}const Rk=[];function Fte(n,e,t,r,i,o,a,s,h,g,b,B,S,I){const k=Math.round(r*e),U=Math.round(r*t);n.canvas.width=k,n.canvas.height=U;let z,Y;if(Y=n.createTexture(),n.bindTexture(n.TEXTURE_2D,Y),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),S?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,k,U,0,n.RGBA,b,null),z=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,z),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Y,0),z===null)throw new Error("Could not create framebuffer");if(Y===null)throw new Error("Could not create texture");if(h.length===0)return{width:k,height:U,framebuffer:z,texture:Y};const Q=Zd();h.forEach(function(ce,we,pe){FB(Q,ce.extent)});let ne,X,q;const J=1/i;{if(ne=n.createTexture(),Y===null)throw new Error("Could not create texture");X=Math.round(ps(Q)*J),q=Math.round(Hl(Q)*J);const ce=n.getParameter(n.MAX_TEXTURE_SIZE),we=Math.max(X,q),pe=we>ce?ce/we:1,Ce=Math.round(X*pe),Pe=Math.round(q*pe);n.bindTexture(n.TEXTURE_2D,ne),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),S?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,Ce,Pe,0,n.RGBA,b,null);const de=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,de),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ne,0);const rt=new kte(n);h.forEach(function(ze,Qe,ut){const Te=(ze.extent[0]-Q[0])*J*pe,Ue=-(ze.extent[3]-Q[3])*J*pe,st=ps(ze.extent)*J*pe,wt=Hl(ze.extent)*J*pe;if(n.bindFramebuffer(n.FRAMEBUFFER,de),n.viewport(0,0,Ce,Pe),ze.clipExtent){const mt=(ze.clipExtent[0]-Q[0])*J*pe,ft=-(ze.clipExtent[3]-Q[3])*J*pe,Ut=ps(ze.clipExtent)*J*pe,Lt=Hl(ze.clipExtent)*J*pe;n.enable(n.SCISSOR_TEST),n.scissor(S?mt:Math.round(mt),S?ft:Math.round(ft),S?Ut:Math.round(mt+Ut)-Math.round(mt),S?Lt:Math.round(ft+Lt)-Math.round(ft))}rt.drawImage(ze.texture,ze.width,ze.height,g,g,ze.width-2*g,ze.height-2*g,S?Te:Math.round(Te),S?Ue:Math.round(Ue),S?st:Math.round(Te+st)-Math.round(Te),S?wt:Math.round(Ue+wt)-Math.round(Ue),Ce,Pe),n.disable(n.SCISSOR_TEST)}),n.deleteFramebuffer(de)}const N=Ap(a),ie=Ap(Q),he=ce=>{const we=(ce[0][0]-N[0])/o*r,pe=-(ce[0][1]-N[1])/o*r,Ce=(ce[1][0]-N[0])/o*r,Pe=-(ce[1][1]-N[1])/o*r,de=(ce[2][0]-N[0])/o*r,rt=-(ce[2][1]-N[1])/o*r;return{u1:Ce,v1:Pe,u0:we,v0:pe,u2:de,v2:rt}};n.bindFramebuffer(n.FRAMEBUFFER,z),n.viewport(0,0,k,U);{const ce=[],we=[],pe=k6(n,Kte,Rte);n.useProgram(pe);const Ce=n.getUniformLocation(pe,"u_texture");n.bindTexture(n.TEXTURE_2D,ne),n.uniform1i(Ce,0),s.getTriangles().forEach(function(Te,Ue,st){const wt=Te.source,mt=Te.target,{u1:ft,v1:Ut,u0:Lt,v0:De,u2:ke,v2:Oe}=he(mt),Je=(wt[0][0]-ie[0])/i/X,Mt=-(wt[0][1]-ie[1])/i/q,gt=(wt[1][0]-ie[0])/i/X,Nt=-(wt[1][1]-ie[1])/i/q,nn=(wt[2][0]-ie[0])/i/X,en=-(wt[2][1]-ie[1])/i/q;ce.push(ft,Ut,Lt,De,ke,Oe),we.push(gt,Nt,Je,Mt,nn,en)});const Pe=I6(0,k,U,0,-1,1),de=n.getUniformLocation(pe,"u_matrix");n.uniformMatrix4fv(de,!1,Pe);const rt=n.getAttribLocation(pe,"a_position"),ze=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,ze),n.bufferData(n.ARRAY_BUFFER,new Float32Array(ce),n.STATIC_DRAW),n.vertexAttribPointer(rt,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(rt);const Qe=n.getAttribLocation(pe,"a_texcoord"),ut=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,ut),n.bufferData(n.ARRAY_BUFFER,new Float32Array(we),n.STATIC_DRAW),n.vertexAttribPointer(Qe,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(Qe),n.drawArrays(n.TRIANGLES,0,ce.length/2)}if(B){const ce=k6(n,Pte,Tte);n.useProgram(ce);const we=I6(0,k,U,0,-1,1),pe=n.getUniformLocation(ce,"u_matrix");n.uniformMatrix4fv(pe,!1,we);const Ce=Array.isArray(B)?B:[0,0,0,255],Pe=n.getUniformLocation(ce,"u_val");n.uniform4fv(Pe,Ce);const de=n.getAttribLocation(ce,"a_position"),rt=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,rt),n.vertexAttribPointer(de,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(de);const ze=s.getTriangles().reduce(function(Qe,ut){const Te=ut.target,{u1:Ue,v1:st,u0:wt,v0:mt,u2:ft,v2:Ut}=he(Te);return Qe.concat([Ue,st,wt,mt,wt,mt,ft,Ut,ft,Ut,Ue,st])},[]);n.bufferData(n.ARRAY_BUFFER,new Float32Array(ze),n.STATIC_DRAW),n.drawArrays(n.LINES,0,ze.length/2)}return{width:k,height:U,framebuffer:z,texture:Y}}class Ute extends O6{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,r=t.getExtent(),i=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?i?Qh(r,i):r:i;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let s=this.sourceTileGrid_.getExtent();const h=a?Qh(o,a):o;if(u_(h)===0){this.state=vr.EMPTY;return}r&&(s?s=Qh(s,r):s=r);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),b=e.targetProj,B=sz(t,b,h,g);if(!isFinite(B)||B<=0){this.state=vr.EMPTY;return}const S=e.errorThreshold!==void 0?e.errorThreshold:_O;if(this.triangulation_=new CO(t,b,h,s,B*S,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=vr.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(B);let I=this.triangulation_.calculateSourceExtent();if(s&&(t.canWrapX()?(I[1]=Tu(I[1],s[1],s[3]),I[3]=Tu(I[3],s[1],s[3])):I=Qh(I,s)),!u_(I))this.state=vr.EMPTY;else{let k=0,U=0;t.canWrapX()&&(k=ps(r),U=Math.floor((I[0]-r[0])/k)),UB(I.slice(),t,!0).forEach(Y=>{const Q=this.sourceTileGrid_.getTileRangeForExtentAndZ(Y,this.sourceZ_),ne=e.getTileFunction;for(let X=Q.minX;X<=Q.maxX;X++)for(let q=Q.minY;q<=Q.maxY;q++){const J=ne(this.sourceZ_,X,q,this.pixelRatio_);if(J){const N=U*k;this.sourceTiles_.push({tile:J,offset:N})}}++U}),this.sourceTiles_.length===0&&(this.state=vr.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(X=>{var Ue;const q=X.tile;if(!q||q.getState()!==vr.LOADED)return;const J=q.getSize(),N=this.gutter_;let ie;const he=xte(q.getData());he?ie=he:(t=!0,ie=Mte(y2(q.getData())));const ce=[J[0]+2*N,J[1]+2*N],we=ie instanceof Float32Array,pe=ce[0]*ce[1],Ce=we?Float32Array:Uint8ClampedArray,Pe=new Ce(ie.buffer),de=Ce.BYTES_PER_ELEMENT,rt=de*Pe.length/pe,ze=Pe.byteLength/ce[1],Qe=Math.floor(ze/de/ce[0]),ut=this.sourceTileGrid_.getTileCoordExtent(q.tileCoord);ut[0]+=X.offset,ut[2]+=X.offset;const Te=(Ue=this.clipExtent_)==null?void 0:Ue.slice();Te&&(Te[0]+=X.offset,Te[2]+=X.offset),e.push({extent:ut,clipExtent:Te,data:Pe,dataType:Ce,bytesPerPixel:rt,pixelSize:ce,bandCount:Qe})}),this.sourceTiles_.length=0,e.length===0){this.state=vr.ERROR,this.changed();return}const r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),o=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],s=o*this.pixelRatio_,h=a*this.pixelRatio_,g=this.targetTileGrid_.getResolution(r),b=this.sourceTileGrid_.getResolution(this.sourceZ_),B=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),S=e[0].bandCount,I=new e[0].dataType(S*s*h),k=Dte(s,h,Rk,{premultipliedAlpha:!1,antialias:!1});let U;const z=k.RGBA;let Y;e[0].dataType==Float32Array?(Y=k.FLOAT,k.getExtension("WEBGL_color_buffer_float"),k.getExtension("OES_texture_float"),k.getExtension("EXT_float_blend"),U=k.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(Y=k.UNSIGNED_BYTE,U=this.interpolate);const Q=4,ne=Math.ceil(S/Q);for(let X=ne-1;X>=0;--X){const q=[];for(let Ce=0,Pe=e.length;Ce<Pe;++Ce){const de=e[Ce],rt=de.pixelSize,ze=rt[0],Qe=rt[1],ut=new de.dataType(Q*ze*Qe),Te=de.data;let Ue=X*Q;for(let wt=0,mt=ut.length;wt<mt;wt+=Q)ut[wt]=Te[Ue],ut[wt+1]=Te[Ue+1],ut[wt+2]=Te[Ue+2],ut[wt+3]=Te[Ue+3],Ue+=S;const st=k.createTexture();k.bindTexture(k.TEXTURE_2D,st),U?(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR)):(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST)),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texImage2D(k.TEXTURE_2D,0,z,ze,Qe,0,z,Y,ut),q.push({extent:de.extent,clipExtent:de.clipExtent,texture:st,width:ze,height:Qe})}const{framebuffer:J,width:N,height:ie}=Fte(k,o,a,this.pixelRatio_,b,g,B,this.triangulation_,q,this.gutter_,Y,this.renderEdges_,U),he=N,ce=ie*Q,we=new e[0].dataType(he*ce);k.bindFramebuffer(k.FRAMEBUFFER,J),k.readPixels(0,0,N,ie,k.RGBA,Y,we);let pe=X*Q;for(let Ce=0,Pe=we.length;Ce<Pe;Ce+=Q){const de=(he-1-(Ce/ce|0))*ce+Ce%ce;I[pe]=we[de],I[pe+1]=we[de+1],I[pe+2]=we[de+2],I[pe+3]=we[de+3],pe+=S}}if(Lte(k),Rk.push(k.canvas),t){const X=Jl(o,a),q=new ImageData(I,o);X.putImageData(q,0,0),this.reprojData_=X.canvas}else this.reprojData_=I;this.reprojSize_=[Math.round(s),Math.round(h)],this.state=vr.LOADED,this.changed()}load(){if(this.state!==vr.IDLE&&this.state!==vr.ERROR)return;this.state=vr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r!==vr.IDLE&&r!==vr.LOADING)return;e++;const i=ks(t,oo.CHANGE,()=>{const o=t.getState();(o==vr.LOADED||o==vr.ERROR||o==vr.EMPTY)&&(Ra(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==vr.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ra),this.sourcesListenerKeys_=null}}class T6 extends Y_{constructor(e,t,r,i,o,a,s,h,g,b,B,S){super(o,vr.IDLE,S),this.renderEdges_=B!==void 0?B:!1,this.pixelRatio_=s,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const I=i.getTileCoordExtent(this.wrappedTileCoord_),k=this.targetTileGrid_.getExtent();let U=this.sourceTileGrid_.getExtent();const z=k?Qh(I,k):I;if(u_(z)===0){this.state=vr.EMPTY;return}const Y=e.getExtent();Y&&(U?U=Qh(U,Y):U=Y);const Q=i.getResolution(this.wrappedTileCoord_[0]),ne=sz(e,r,z,Q);if(!isFinite(ne)||ne<=0){this.state=vr.EMPTY;return}const X=b!==void 0?b:_O;if(this.triangulation_=new CO(e,r,z,U,ne*X,Q),this.triangulation_.getTriangles().length===0){this.state=vr.EMPTY;return}this.sourceZ_=t.getZForResolution(ne);let q=this.triangulation_.calculateSourceExtent();if(U&&(e.canWrapX()?(q[1]=Tu(q[1],U[1],U[3]),q[3]=Tu(q[3],U[1],U[3])):q=Qh(q,U)),!u_(q))this.state=vr.EMPTY;else{let J=0,N=0;e.canWrapX()&&(J=ps(Y),N=Math.floor((q[0]-Y[0])/J)),UB(q.slice(),e,!0).forEach(he=>{const ce=t.getTileRangeForExtentAndZ(he,this.sourceZ_);for(let we=ce.minX;we<=ce.maxX;we++)for(let pe=ce.minY;pe<=ce.maxY;pe++){const Ce=g(this.sourceZ_,we,pe,s);if(Ce){const Pe=N*J;this.sourceTiles_.push({tile:Ce,offset:Pe})}}++N}),this.sourceTiles_.length===0&&(this.state=vr.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==vr.LOADED){const o=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);o[0]+=t.offset,o[2]+=t.offset;const a=(i=this.clipExtent_)==null?void 0:i.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:o,clipExtent:a,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=vr.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),s=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=az(i,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,h,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=vr.LOADED}this.changed()}load(){if(this.state==vr.IDLE){this.state=vr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==vr.IDLE||r==vr.LOADING){e++;const i=ks(t,oo.CHANGE,o=>{const a=t.getState();(a==vr.LOADED||a==vr.ERROR||a==vr.EMPTY)&&(Ra(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==vr.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ra),this.sourcesListenerKeys_=null}release(){this.canvas_&&(F_(this.canvas_.getContext("2d")),iy.push(this.canvas_),this.canvas_=null),super.release()}}function N4(n,e,t,r){return`${n},${xee(e,t,r)}`}function G4(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function zte(n,e,t){const r=n[t];return r?r.delete(e):!1}function Kk(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Qh(e,Yp(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Qh(e,i))}return e}class uz extends cO{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Zd(),this.tempTileRange_=new gO(0,0,0,0),this.tempTileCoord_=g2(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new bee(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const o=this.tileCache_,s=this.getLayer().getSource(),h=N4(s.getKey(),e,t,r);let g;if(o.containsKey(h))g=o.get(h);else{if(g=s.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!g)return null;o.set(h,g)}return g}getTile(e,t,r,i){const o=this.getOrCreateTile(e,t,r,i);return o||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=yA(t.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!Og(o,i))return null;const a=t.viewState,s=r.getRenderSource(),h=s.getTileGridForProjection(a.projection),g=s.getTilePixelRatio(t.pixelRatio);for(let b=h.getZForResolution(a.resolution);b>=h.getMinZoom();--b){const B=h.getTileCoordForCoordAndZ(i,b),S=this.getTile(b,B[1],B[2],t);if(!S||S.getState()!==vr.LOADED)continue;const I=h.getOrigin(b),k=ah(h.getTileSize(b)),U=h.getResolution(b);let z;if(S instanceof $U||S instanceof T6)z=S.getImage();else if(S instanceof O6){if(z=y2(S.getData()),!z)continue}else continue;const Y=Math.floor(g*((i[0]-I[0])/U-B[1]*k[0])),Q=Math.floor(g*((I[1]-i[1])/U-B[2]*k[1])),ne=Math.round(g*s.getGutterForProjection(a.projection));return this.getImageData(z,Y+ne,Q+ne)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,o){const a=e.viewState,s=this.getLayer(),h=s.getRenderSource(),g=h.getTileGridForProjection(a.projection),b=Lo(h);b in e.wantedTiles||(e.wantedTiles[b]={});const B=e.wantedTiles[b],S=s.getMapInternal(),I=Math.max(r-o,g.getMinZoom(),g.getZForResolution(Math.min(s.getMaxResolution(),S?S.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):g.getResolution(0)),h.zDirection));for(let k=r;k>=I;--k){const U=g.getTileRangeForExtentAndZ(t,k,this.tempTileRange_),z=g.getResolution(k);for(let Y=U.minX;Y<=U.maxX;++Y)for(let Q=U.minY;Q<=U.maxY;++Q){const ne=this.getTile(k,Y,Q,e);if(!ne||!G4(i,ne,k))continue;const q=ne.getKey();if(B[q]=!0,ne.getState()===vr.IDLE&&!e.tileQueue.isKeyQueued(q)){const J=g2(k,Y,Q,this.tempTileCoord_);e.tileQueue.enqueue([ne,b,g.getTileCoordCenter(J),z])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],o=e[1],a=e[2],s=this.getStaleKeys();for(let h=0;h<s.length;++h){const g=N4(s[h],i,o,a);if(r.containsKey(g)){const b=r.get(g);if(b.getState()===vr.LOADED)return b.endTransition(Lo(this)),G4(t,b,i),!0}}return!1}findAltTiles_(e,t,r,i){const o=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!o)return!1;let a=!0;const s=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let b=o.minX;b<=o.maxX;++b)for(let B=o.minY;B<=o.maxY;++B){const S=N4(g,r,b,B);let I=!1;if(s.containsKey(S)){const k=s.get(S);k.getState()===vr.LOADED&&(G4(i,k,r),I=!0)}I||(a=!1)}return a}renderFrame(e,t){let r=!0;this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],o=e.viewState,a=o.projection,s=o.resolution,h=o.center,g=e.pixelRatio,b=this.getLayer(),B=b.getSource(),S=B.getRevision(),I=B.getTileGridForProjection(a),k=I.getZForResolution(s,B.zDirection),U=I.getResolution(k),z=B.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==z&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=z):this.renderedSourceKey_=z;let Y=e.extent;const Q=B.getTilePixelRatio(g);this.prepareContainer(e,t);const ne=this.context.canvas.width,X=this.context.canvas.height,q=i.extent&&Yp(i.extent);q&&(Y=Qh(Y,Yp(i.extent)));const J=U*ne/2/Q,N=U*X/2/Q,ie=[h[0]-J,h[1]-N,h[0]+J,h[1]+N],he={};this.renderedTiles.length=0;const ce=b.getPreload();if(e.nextExtent){const Te=I.getZForResolution(o.nextResolution,B.zDirection),Ue=Kk(e,e.nextExtent);this.enqueueTiles(e,Ue,Te,he,ce)}const we=Kk(e,Y);if(this.enqueueTiles(e,we,k,he,0),ce>0&&setTimeout(()=>{this.enqueueTiles(e,we,k-1,he,ce-1)},0),!(k in he))return this.container;const pe=Lo(this),Ce=e.time;for(const Te of he[k]){const Ue=Te.getState();if((Te instanceof T6||Te instanceof Ute)&&Ue===vr.EMPTY)continue;const st=Te.tileCoord;if(Ue===vr.LOADED&&Te.getAlpha(pe,Ce)===1){Te.endTransition(pe);continue}if(Ue!==vr.IDLE&&(r=!1),Ue!==vr.ERROR&&(this.renderComplete=!1),this.findStaleTile_(st,he)){zte(he,Te,k),e.animate=!0;continue}if(this.findAltTiles_(I,st,k+1,he))continue;const ft=I.getMinZoom();for(let Ut=k-1;Ut>=ft&&!this.findAltTiles_(I,st,Ut,he);--Ut);}const Pe=U/s*g/Q,de=this.getRenderContext(e);em(this.tempTransform,ne/2,X/2,Pe,Pe,0,-ne/2,-X/2),i.extent&&this.clipUnrotated(de,e,q),B.getInterpolate()||(de.imageSmoothingEnabled=!1),this.preRender(de,e);const rt=Object.keys(he).map(Number);rt.sort(Fm);let ze;const Qe=[],ut=[];for(let Te=rt.length-1;Te>=0;--Te){const Ue=rt[Te],st=B.getTilePixelSize(Ue,g,a),mt=I.getResolution(Ue)/U,ft=st[0]*mt*Pe,Ut=st[1]*mt*Pe,Lt=I.getTileCoordForCoordAndZ(Ap(ie),Ue),De=I.getTileCoordExtent(Lt),ke=yA(this.tempTransform,[Q*(De[0]-ie[0])/U,Q*(ie[3]-De[3])/U]),Oe=Q*B.getGutterForProjection(a);for(const Je of he[Ue]){if(Je.getState()!==vr.LOADED)continue;const Mt=Je.tileCoord,gt=Lt[1]-Mt[1],Nt=Math.round(ke[0]-(gt-1)*ft),nn=Lt[2]-Mt[2],en=Math.round(ke[1]-(nn-1)*Ut),Sn=Math.round(ke[0]-gt*ft),Yn=Math.round(ke[1]-nn*Ut),Qr=Nt-Sn,cr=en-Yn,fr=rt.length===1;let br=!1;ze=[Sn,Yn,Sn+Qr,Yn,Sn+Qr,Yn+cr,Sn,Yn+cr];for(let Cr=0,Mr=Qe.length;Cr<Mr;++Cr)if(!fr&&Ue<ut[Cr]){const Qn=Qe[Cr];ku([Sn,Yn,Sn+Qr,Yn+cr],[Qn[0],Qn[3],Qn[4],Qn[7]])&&(br||(de.save(),br=!0),de.beginPath(),de.moveTo(ze[0],ze[1]),de.lineTo(ze[2],ze[3]),de.lineTo(ze[4],ze[5]),de.lineTo(ze[6],ze[7]),de.moveTo(Qn[6],Qn[7]),de.lineTo(Qn[4],Qn[5]),de.lineTo(Qn[2],Qn[3]),de.lineTo(Qn[0],Qn[1]),de.clip())}Qe.push(ze),ut.push(Ue),this.drawTile(Je,e,Sn,Yn,Qr,cr,Oe,fr),br&&de.restore(),this.renderedTiles.unshift(Je),this.updateUsedTiles(e.usedTiles,B,Je)}}if(this.renderedRevision=S,this.renderedResolution=U,this.extentChanged=!this.renderedExtent_||!Wm(this.renderedExtent_,ie),this.renderedExtent_=ie,this.renderedPixelRatio=g,this.postRender(this.context,e),i.extent&&de.restore(),de.imageSmoothingEnabled=!0,this.renderComplete){const Te=(Ue,st)=>{const wt=Lo(B),mt=st.wantedTiles[wt],ft=mt?Object.keys(mt).length:0;this.updateCacheSize(ft),this.tileCache_.expireCache()};e.postRenderFunctions.push(Te)}return!this.renderComplete&&!r&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,o,a,s,h){let g;if(e instanceof O6){if(g=y2(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const b=this.getRenderContext(t),B=Lo(this),S=t.layerStatesArray[t.layerIndex],I=S.opacity*(h?e.getAlpha(B,t.time):1),k=I!==b.globalAlpha;k&&(b.save(),b.globalAlpha=I),b.drawImage(g,s,s,g.width-2*s,g.height-2*s,r,i,o,a),k&&b.restore(),I!==S.opacity?t.animate=!0:h&&e.endTransition(B)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Lo(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}class Az extends bte{constructor(e){super(e)}createRenderer(){return new uz(this,{cacheSize:this.getCacheSize()})}}const d1=[0,0,0],d0=5;class kx{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ra(SH(this.resolutions_,(i,o)=>o-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ra(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ap(r)),ra(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ra(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:nO,ra(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,o)=>{const a=new gO(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const s=this.getTileRangeForExtentAndZ(r,o);a.minX=Math.max(s.minX,a.minX),a.maxX=Math.min(s.maxX,a.maxX),a.minY=Math.max(s.minY,a.minY),a.maxY=Math.min(s.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let o=i.minX,a=i.maxX;o<=a;++o)for(let s=i.minY,h=i.maxY;s<=h;++s)r([t,o,s])}forEachTileCoordParentTileRange(e,t,r,i){let o,a,s,h=null,g=e[0]-1;for(this.zoomFactor_===2?(a=e[1],s=e[2]):h=this.getTileCoordExtent(e,i);g>=this.minZoom;){if(a!==void 0&&s!==void 0?(a=Math.floor(a/2),s=Math.floor(s/2),o=A1(a,a,s,s,r)):o=this.getTileRangeForExtentAndZ(h,g,r),t(g,o))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,a=e[2]*2;return A1(o,o+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],o=e[1],a=e[2];if(t===i)return A1(o,a,o,a,r);if(this.zoomFactor_){const h=Math.pow(this.zoomFactor_,t-i),g=Math.floor(o*h),b=Math.floor(a*h);if(t<i)return A1(g,g,b,b,r);const B=Math.floor(h*(o+1))-1,S=Math.floor(h*(a+1))-1;return A1(g,B,b,S,r)}const s=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,d1);const i=d1[1],o=d1[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,d1);const a=d1[1],s=d1[2];return A1(i,a,o,s,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=ah(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=ah(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*o[0]*i,s=r[1]-(e[2]+1)*o[1]*i,h=a+o[0]*i,g=s+o[1]*i;return Gm(a,s,h,g,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,o){const a=this.getZForResolution(r),s=r/this.getResolution(a),h=this.getOrigin(a),g=ah(this.getTileSize(a),this.tmpSize_);let b=s*(e-h[0])/r/g[0],B=s*(h[1]-t)/r/g[1];return i?(b=_0(b,d0)-1,B=_0(B,d0)-1):(b=zC(b,d0),B=zC(B,d0)),g2(a,b,B,o)}getTileCoordForXYAndZ_(e,t,r,i,o){const a=this.getOrigin(r),s=this.getResolution(r),h=ah(this.getTileSize(r),this.tmpSize_);let g=(e-a[0])/s/h[0],b=(a[1]-t)/s/h[1];return i?(g=_0(g,d0)-1,b=_0(b,d0)-1):(g=zC(g,d0),b=zC(b,d0)),g2(r,g,b,o)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Ax(this.resolutions_,e,t||0);return Tu(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return yU(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function cz(n){let e=n.getDefaultTileGrid();return e||(e=Gte(n),n.setDefaultTileGrid(e)),e}function jte(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),o=Tx(t);if(!Og(o,i)){const a=ps(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,n.getTileCoordForCoordAndZ(i,r)}return e}function Nte(n,e,t,r){r=r!==void 0?r:"top-left";const i=hz(n,e,t);return new kx({extent:n,origin:lZ(n,r),resolutions:i,tileSize:t})}function bO(n){const e=n||{},t=e.extent||Ma("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:hz(t,e.maxZoom,e.tileSize,e.maxResolution)};return new kx(r)}function hz(n,e,t,r){e=e!==void 0?e:EU,t=ah(t!==void 0?t:nO);const i=Hl(n),o=ps(n);r=r>0?r:Math.max(o/t[0],i/t[1]);const a=e+1,s=new Array(a);for(let h=0;h<a;++h)s[h]=r/Math.pow(2,h);return s}function Gte(n,e,t,r){const i=Tx(n);return Nte(i,e,t,r)}function Tx(n){n=Ma(n);let e=n.getExtent();if(!e){const t=180*R0.degrees/n.getMetersPerUnit();e=Gm(-t,-t,t,t)}return e}class dz extends Ky{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&ah(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Lo(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,o){return go()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:cz(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),o=this.getTilePixelRatio(t),a=ah(i.getTileSize(e),this.tmpSize);return o==1?a:qH(a,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=jte(i,e,r)),See(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Wte extends dp{constructor(e,t){super(e),this.tile=t}}function fz(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,o=e.width,a=e.height,s=t.length,h=t[0].byteLength;if(i){const S=new Array(s);for(let k=0;k<s;++k)S[k]=new ImageData(new Uint8ClampedArray(t[k]),o,a);return n(S,r).data.buffer}const g=new Uint8ClampedArray(h),b=new Array(s),B=new Array(s);for(let S=0;S<s;++S)b[S]=new Uint8ClampedArray(t[S]),B[S]=[0,0,0,0];for(let S=0;S<h;S+=4){for(let k=0;k<s;++k){const U=b[k];B[k][0]=U[S],B[k][1]=U[S+1],B[k][2]=U[S+2],B[k][3]=U[S+3]}const I=n(B,r);g[S]=I[0],g[S+1]=I[1],g[S+2]=I[2],g[S+3]=I[3]}return g.buffer}}function Qte(n,e){const r=Object.keys(n.lib||{}).map(function(o){return"const "+o+" = "+n.lib[o].toString()+";"}).concat(["const __minion__ = ("+fz.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function qte(n,e){const t=fz(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class Yte extends K_{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=Qte(e,this.onWorkerMessage_.bind(this,i));else r[0]=qte(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(h){return h.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const a=e.inputs[0].data.length,s=4*Math.ceil(a/4/o);for(let h=0;h<o;++h){const g=h*s,b=[];for(let B=0,S=i.length;B<S;++B)b.push(i[B].slice(g,g+s));this.workers_[h].postMessage({buffers:b,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},b)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;r=new Uint8ClampedArray(o),i=new Array(t);const a=4*Math.ceil(o/4/t);for(let s=0;s<t;++s){const h=this.dataLookup_[s].buffer,g=s*a;r.set(new Uint8ClampedArray(h),g),i[s]=this.dataLookup_[s].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const Dk={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Lk extends dp{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class pz extends lz{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=Hte(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(oo.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new VU(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:_d(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:Vte(this.layers_),pixelRatio:1,pixelToCoordinateTransform:_d(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Lo(this),renderTargets:{}},this.setAttributions(function(r){var o;const i=[];for(let a=0,s=e.sources.length;a<s;++a){const h=e.sources[a],g=h instanceof Ky?h:h.getSource();if(!g)continue;const b=(o=g.getAttributions())==null?void 0:o(r);typeof b=="string"?i.push(b):b!==void 0&&i.push(...b)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Yte({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const o=If(e);i.size[0]=Math.ceil(ps(e)/t),i.size[1]=Math.ceil(Hl(e)/t),i.extent=[o[0]-i.size[0]*t/2,o[1]-i.size[1]*t/2,o[0]+i.size[0]*t/2,o[1]+i.size[1]*t/2],i.time=Date.now();const a=i.viewState;return a.center=o,a.projection=r,a.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const a=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();(t!==a||!Wm(o.extent,s))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const a=$te(this.layers_[o],e);if(a)r[o]=a;else return}const i={};this.dispatchEvent(new Lk(Dk.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const o=e.extent,a=e.viewState.resolution;if(a!==this.requestedFrameState_.viewState.resolution||!Wm(o,this.requestedFrameState_.extent))return;let s;if(this.renderedImageCanvas_)s=this.renderedImageCanvas_.getImage().getContext("2d");else{const h=Math.round(ps(o)/a),g=Math.round(Hl(o)/a);s=Jl(h,g),this.renderedImageCanvas_=new NJ(o,a,1,s.canvas)}s.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Lk(Dk.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}pz.prototype.dispose;let tg=null;function $te(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const o=t.renderFrame(e,null);let a;if(o instanceof HTMLCanvasElement)a=o;else{if(o&&(a=o.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+a);if(a.width===r&&a.height===i)return a.getContext("2d").getImageData(0,0,r,i)}if(!tg)tg=Jl(r,i,void 0,{willReadFrequently:!0});else{const s=tg.canvas;s.width!==r||s.height!==i?tg=Jl(r,i,void 0,{willReadFrequently:!0}):tg.clearRect(0,0,r,i)}return tg.drawImage(a,0,0,r,i),tg.getImageData(0,0,r,i)}function Vte(n){return n.map(function(e){return e.getLayerState()})}function Hte(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=Zte(n[r]);return t}function Zte(n){let e;return n instanceof Ky?n instanceof dz?e=new Az({source:n}):n instanceof lz&&(e=new oz({source:n})):e=n,e}const W4={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Xte=/\{z\}/g,Jte=/\{x\}/g,ene=/\{y\}/g,tne=/\{-y\}/g;function nne(n,e,t,r,i){return n.replace(Xte,e.toString()).replace(Jte,t.toString()).replace(ene,r.toString()).replace(tne,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function rne(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let o;for(o=r;o<=i;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function ine(n,e){return function(t,r,i){if(!t)return;let o;const a=t[0];if(e){const s=e.getFullTileRange(a);s&&(o=s.getHeight()-1)}return nne(n,a,t[1],t[2],o)}}function mz(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=ine(n[i],e);return one(r)}function one(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=wee(e),o=xg(i,n.length);return n[o](e,t,r)}}class Px extends dz{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Px.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Lo(t),i=t.getState();let o;i==vr.LOADING?(this.tileLoadingKeys_[r]=!0,o=W4.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=i==vr.ERROR?W4.TILELOADERROR:i==vr.LOADED?W4.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new Wte(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=rne(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(mz(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class sne extends Px{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ane,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:$U,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!wg(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||wg(t,e)))return this.tileGrid;const r=Lo(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=cz(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,o,a){const s=[e,t,r],h=this.getTileCoordForTileUrlFunction(s,o),g=h?this.tileUrlFunction(h,i,o):void 0,b=new this.tileClass(s,g!==void 0?vr.IDLE:vr.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return b.key=a,b.addEventListener(oo.CHANGE,this.handleTileChange.bind(this)),b}getTile(e,t,r,i,o){const a=this.getProjection();if(!a||!o||wg(a,o))return this.getTileInternal(e,t,r,i,a||o);const s=[e,t,r],h=this.getKey(),g=this.getTileGridForProjection(a),b=this.getTileGridForProjection(o),B=this.getTileCoordForTileUrlFunction(s,o),S=new T6(a,g,o,b,s,B,this.getTilePixelRatio(i),this.getGutter(),(I,k,U,z)=>this.getTileInternal(I,k,U,z,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return S.key=h,S}getTileInternal(e,t,r,i,o){const a=this.getKey();return this.createTile_(e,t,r,i,o,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Ma(e);if(r){const i=Lo(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function ane(n,e){n.getImage().src=e}function lne(n,e,t,r){const i=document.createElement("script"),o="olc_"+Lo(e);function a(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+o;const s=setTimeout(function(){a(),t&&t()},1e4);window[o]=function(h){clearTimeout(s),a(),e(h)},document.head.appendChild(i)}class gz extends sne{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Ma("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)lne(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Ma("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const g=N_(t,r);i=hZ(e.bounds,g)}const o=Tx(r),a=e.minzoom||0,s=e.maxzoom||22,h=bO({extent:o,maxZoom:s,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=h,this.tileUrlFunction=mz(e.tiles,h),e.attribution&&!this.getAttributions()){const g=i!==void 0?i:o;this.setAttributions(function(b){return ku(g,b.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const une={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Fk={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Ane extends uz{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=_d(),this.tileClipContexts_=null}drawTile(e,t,r,i,o,a,s,h){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,o,a,s,h)}getTile(e,t,r,i){const o=this.getOrCreateTile(e,t,r,i);if(!o)return null;const s=i.viewState.resolution,h=i.viewHints;return(!(h[Vl.ANIMATING]||h[Vl.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=s),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),o=i.getRevision(),a=i.getRenderOrder()||null,s=e.wantedResolution,h=e.getReplayState(i);if(!h.dirty&&h.renderedResolution===s&&h.renderedRevision==o&&h.renderedRenderOrder==a)return;const g=i.getSource(),b=!!i.getDeclutter(),B=g.getTileGrid(),I=g.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),k=g.getSourceTiles(t,r,e),U=Lo(i);delete e.hitDetectionImageData[U],e.executorGroups[U]=[],h.dirty=!1;for(let z=0,Y=k.length;z<Y;++z){const Q=k[z];if(Q.getState()!=vr.LOADED)continue;const ne=Q.tileCoord,X=B.getTileCoordExtent(ne),q=Qh(I,X),J=B0(q,i.getRenderBuffer()*s,this.tempExtent),N=Wm(X,q)?null:J,ie=new UU(0,q,s,t),he=b6(s,t),ce=function(de,rt){let ze;const Qe=de.getStyleFunction()||i.getStyleFunction();if(Qe&&(ze=Qe(de,s)),ze){const ut=this.renderFeature(de,he,ze,ie,b,rt);h.dirty=h.dirty||ut}},we=Q.getFeatures();a&&a!==h.renderedRenderOrder&&we.sort(a);for(let de=0,rt=we.length;de<rt;++de){const ze=we[de];(!N||ku(N,ze.getGeometry().getExtent()))&&ce.call(this,ze,de)}const pe=ie.finish(),Ce=i.getRenderMode()!=="vector"&&b&&k.length===1?null:q,Pe=new jU(Ce,s,t,g.getOverlaps(),pe,i.getRenderBuffer(),!0);e.executorGroups[U].push(Pe)}h.renderedRevision=o,h.renderedRenderOrder=a,h.renderedResolution=s}forEachFeatureAtCoordinate(e,t,r,i,o){const a=t.viewState.resolution,s=t.viewState.rotation;r=r??0;const h=this.getLayer(),b=h.getSource().getTileGridForProjection(t.viewState.projection),B=u6([e]);B0(B,a*r,B);const S={},I=function(ne,X,q){let J=ne.getId();J===void 0&&(J=Lo(ne));const N=S[J];if(N){if(N!==!0&&q<N.distanceSq){if(q===0)return S[J]=!0,o.splice(o.lastIndexOf(N),1),i(ne,h,X);N.geometry=X,N.distanceSq=q}}else{if(q===0)return S[J]=!0,i(ne,h,X);o.push(S[J]={feature:ne,layer:h,geometry:X,distanceSq:q,callback:i})}},k=this.renderedTiles,U=Lo(h),z=h.getDeclutter(),Y=z?t.declutter[z].all().map(ne=>ne.value):null;let Q;e:for(let ne=0,X=k.length;ne<X;++ne){const q=k[ne],J=b.getTileCoordExtent(q.wrappedTileCoord);if(!ku(J,B))continue;const N=q.executorGroups[U];for(let ie=0,he=N.length;ie<he;++ie)if(Q=N[ie].forEachFeatureAtCoordinate(e,a,s,r,I,Y),Q)break e}return Q}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),o=i.getSource(),a=this.renderedProjection,s=a.getExtent(),h=this.renderedResolution,g=o.getTileGridForProjection(a),b=yA(this.renderedPixelToCoordinateTransform_,e.slice()),B=g.getTileCoordForCoordAndResolution(b,h).toString(),S=this.renderedTiles.find(ne=>ne.tileCoord.toString()===B&&ne.getState()===vr.LOADED);if(!S||S.loadingSourceTiles>0){t([]);return}o.getWrapX()&&a.canWrapX()&&!lp(s,g.getTileCoordExtent(S.tileCoord))&&jB(b,a);const I=Lo(i),k=g.getTileCoordExtent(S.wrappedTileCoord),U=Ap(k),z=[(b[0]-U[0])/h,(U[1]-b[1])/h],Y=S.getSourceTiles().reduce((ne,X)=>ne.concat(X.getFeatures()),[]);let Q=S.hitDetectionImageData[I];if(!Q){const ne=ah(g.getTileSize(g.getZForResolution(h,o.zDirection))),X=this.renderedRotation_,q=[this.getRenderTransform(g.getTileCoordCenter(S.wrappedTileCoord),h,0,$d,ne[0]*$d,ne[1]*$d,0)];Q=NU(ne,q,Y,i.getStyleFunction(),g.getTileCoordExtent(S.wrappedTileCoord),S.getReplayState(i).renderedResolution,X),S.hitDetectionImageData[I]=Q}t(GU(z,Y,Q))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),a=o.getZForResolution(this.renderedResolution),s={};return r.forEach(h=>{if(h.tileCoord[0]!==a||h.getState()!==vr.LOADED)return;const g=h.getSourceTiles();for(let b=0,B=g.length;b<B;++b){const S=g[b],I=S.getKey();if(I in s)continue;s[I]=!0;const k=S.tileCoord;if(ku(e,o.getTileCoordExtent(k))){const U=S.getFeatures();if(U)for(let z=0,Y=U.length;z<Y;++z){const Q=U[z],ne=Q.getGeometry();ku(e,ne.getExtent())&&t.push(Q)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const o=e.viewHints,a=!(o[Vl.ANIMATING]||o[Vl.INTERACTING]),s=[this.context.canvas.width,this.context.canvas.height],h=this.getLayer().getDeclutter(),g=h?e.declutter[h]:void 0,b=Lo(this.getLayer()),B=this.renderedTiles;for(let S=0,I=B.length;S<I;++S){const k=B[S],U=k.executorGroups[b];if(U)for(let z=U.length-1;z>=0;--z)U[z].execute(this.context,s,this.getTileRenderTransform(k,e),e.viewState.rotation,a,f2,g)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=Lo(this.getLayer()),i=t.reduce((h,g,b)=>(g.executorGroups[r].forEach(B=>h.push({executorGroup:B,index:b})),h),[]),o=i.map(({executorGroup:h})=>h.getDeferredZIndexContexts()),a={};for(let h=0,g=i.length;h<g;++h){const b=i[h].executorGroup.getDeferredZIndexContexts();for(const B in b)a[B]=!0}Object.keys(a).map(Number).sort(Fm).forEach(h=>{o.forEach((g,b)=>{g[h]&&(g[h].forEach(B=>{const{executorGroup:S,index:I}=i[b],k=S.getRenderedContext(),U=k.globalAlpha;k.globalAlpha=this.renderedOpacity_;const z=this.tileClipContexts_[I];z&&z.draw(k),B.draw(k),z&&k.restore(),k.globalAlpha=U,B.clear()}),g[h].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,o=i.center,a=i.resolution,s=i.rotation,h=t.size,g=Math.round(h[0]*r),b=Math.round(h[1]*r),S=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),I=e.tileCoord,k=S.getTileCoordExtent(e.wrappedTileCoord),U=S.getTileCoordExtent(I,this.tempExtent)[0]-k[0];return RB(w4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(o,a,s,r,g,b,U))}postRender(e,t){var q;const r=t.viewHints,i=!(r[Vl.ANIMATING]||r[Vl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),a=o.getRenderMode(),s=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const h=o.getDeclutter(),g=h?Fk[a].filter(J=>!f2.includes(J)):Fk[a],b=t.viewState,B=b.rotation,S=o.getSource(),k=S.getTileGridForProjection(b.projection).getZForResolution(b.resolution,S.zDirection),U=this.renderedTiles,z=[],Y=[],Q=[],ne=Lo(o);let X=!0;for(let J=U.length-1;J>=0;--J){const N=U[J];X=X&&!N.getReplayState(o).dirty;const ie=N.executorGroups[ne].filter(de=>de.hasExecutors(g));if(ie.length===0)continue;const he=this.getTileRenderTransform(N,t),ce=N.tileCoord[0];let we=!1;const pe=ie[0].getClipCoords(he);let Ce=e,Pe;if(pe){Pe=new AO,Ce=Pe.getContext();for(let de=0,rt=z.length;de<rt;++de)if(k!==ce&&ce<Y[de]){const ze=z[de];ku([pe[0],pe[3],pe[4],pe[7]],[ze[0],ze[3],ze[4],ze[7]])&&(we||(Ce.save(),we=!0),Ce.beginPath(),Ce.moveTo(pe[0],pe[1]),Ce.lineTo(pe[2],pe[3]),Ce.lineTo(pe[4],pe[5]),Ce.lineTo(pe[6],pe[7]),Ce.moveTo(ze[6],ze[7]),Ce.lineTo(ze[4],ze[5]),Ce.lineTo(ze[2],ze[3]),Ce.lineTo(ze[0],ze[1]),Ce.clip())}z.push(pe),Y.push(ce)}for(let de=0,rt=ie.length;de<rt;++de)ie[de].execute(e,[e.canvas.width,e.canvas.height],he,B,i,g,(q=t.declutter)==null?void 0:q[h]);we&&(Ce===e?Ce.restore():Q[J]=Pe)}e.globalAlpha=s,this.ready=X,this.tileClipContexts_=Q,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,o,a){if(!r)return!1;let s=!1;if(Array.isArray(r))for(let h=0,g=r.length;h<g;++h)s=p2(i,e,r[h],t,this.boundHandleStyleImageChange_,void 0,o,a)||s;else s=p2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,o,a);return s}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),o=e.wantedResolution;return r.renderedTileResolution!==o||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),o=r.getRevision(),a=e.executorGroups[Lo(r)];i.renderedTileRevision=o;const s=e.wrappedTileCoord,h=s[0],g=r.getSource();let b=t.pixelRatio;const S=t.viewState.projection,I=g.getTileGridForProjection(S),k=I.getResolution(e.tileCoord[0]),U=t.pixelRatio/e.wantedResolution*k,z=I.getResolution(h),Y=e.getContext();b=Math.round(Math.max(b,U/b));const Q=g.getTilePixelSize(h,b,S);Y.canvas.width=Q[0],Y.canvas.height=Q[1];const ne=b/U;if(ne!==1){const N=z7(this.tmpTransform_);w4(N,ne,ne),Y.setTransform.apply(Y,N)}const X=I.getTileCoordExtent(s,this.tempExtent),q=U/z,J=z7(this.tmpTransform_);w4(J,q,-q),rZ(J,-X[0],-X[3]);for(let N=0,ie=a.length;N<ie;++N)a[N].execute(Y,[Y.canvas.width*ne,Y.canvas.height*ne],J,0,!0,une[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class Gv extends uO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";ra(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Ane(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(w0.PRELOAD)}getUseInterimTilesOnError(){return this.get(w0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(w0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(w0.USE_INTERIM_TILES_ON_ERROR,e)}}class yz extends Px{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||Tx(t),i=e.tileGrid||bO({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:vz,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:nz,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===vr.IDLE){r.setState(vr.LOADING);const i=r.wrappedTileCoord,o=this.getTileGridForProjection(t),a=o.getTileCoordExtent(i),s=i[0],h=o.getResolution(s);B0(a,-h,a);const g=this.tileGrid,b=g.getExtent();b&&Qh(a,b,a);const B=g.getZForResolution(h,this.zDirection);g.forEachTileCoord(a,B,S=>{const I=this.tileUrlFunction(S,e,t);this.sourceTiles_[I]||(this.sourceTiles_[I]=new this.tileClass(S,I?vr.IDLE:vr.EMPTY,I,this.format_,this.tileLoadFunction));const k=this.sourceTiles_[I];r.sourceTiles.push(k),this.tileKeysBySourceTileUrl_[I]||(this.tileKeysBySourceTileUrl_[I]=[]),this.tileKeysBySourceTileUrl_[I].push(r.getKey());const U=k.getState();if(U<vr.LOADED){const z=Y=>{this.handleTileChange(Y);const Q=k.getState();if(Q===vr.LOADED||Q===vr.ERROR){const ne=k.getKey();ne in r.errorTileKeys?k.getState()===vr.LOADED&&delete r.errorTileKeys[ne]:r.loadingSourceTiles--,Q===vr.ERROR?r.errorTileKeys[ne]=!0:k.removeEventListener(oo.CHANGE,z),r.loadingSourceTiles===0&&r.setState(T0(r.errorTileKeys)?vr.LOADED:vr.ERROR)}};k.addEventListener(oo.CHANGE,z),r.loadingSourceTiles++}U===vr.IDLE&&(k.extent=g.getTileCoordExtent(S),k.projection=t,k.resolution=g.getResolution(S[0]),k.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(S=>S.getState()===vr.ERROR)?vr.ERROR:vr.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.sourceTiles;for(let r=0,i=t.length;r<i;++r){const o=t[r].getTileUrl(),a=this.getKey();if(!this.tileKeysBySourceTileUrl_[o])return;const s=this.tileKeysBySourceTileUrl_[o][a];s!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(s,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(e,t,r,i,o){const a=[e,t,r];let s=this.getTileCoordForTileUrlFunction(a,o);const h=this.getTileGrid().getExtent(),g=this.getTileGridForProjection(o);if(s&&h){const S=g.getTileCoordExtent(s);B0(S,-g.getResolution(e),S),ku(h,S)||(s=null)}let b=!0;if(s!==null){const S=this.tileGrid,I=g.getResolution(e),k=S.getZForResolution(I,1),U=g.getTileCoordExtent(s);B0(U,-I,U),S.forEachTileCoord(U,k,z=>{b=b&&!this.tileUrlFunction(z,i,o)})}const B=new Eee(a,b?vr.EMPTY:vr.IDLE,s,this.getSourceTiles.bind(this,i,o),this.removeSourceTiles.bind(this));return B.key=this.getKey(),B}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.tileGrid,o=i.getResolutions().slice(),a=o.map(function(g,b){return i.getOrigin(b)}),s=o.map(function(g,b){return i.getTileSize(b)}),h=EU+1;for(let g=o.length;g<h;++g)o.push(o[g-1]/2),a.push(a[g-1]),s.push(s[g-1]);r=new kx({extent:i.getExtent(),origins:a,resolutions:o,tileSizes:s}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),o=ah(i.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function vz(n,e){n.setLoader(function(t,r,i){YU(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function _z(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cne={},Cz,Uk={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Wv(n){return n=Math.round(n),n<0?0:n>255?255:n}function zk(n){return n<0?0:n>1?1:n}function Q4(n){return n[n.length-1]==="%"?Wv(parseFloat(n)/100*255):Wv(parseInt(n))}function JC(n){return n[n.length-1]==="%"?zk(parseFloat(n)/100):zk(parseFloat(n))}function q4(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function hne(n){var e=n.replace(/ /g,"").toLowerCase();if(e in Uk)return Uk[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var r=e.indexOf("("),i=e.indexOf(")");if(r!==-1&&i+1===e.length){var o=e.substr(0,r),a=e.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(a.length!==4)return null;s=JC(a.pop());case"rgb":return a.length!==3?null:[Q4(a[0]),Q4(a[1]),Q4(a[2]),s];case"hsla":if(a.length!==4)return null;s=JC(a.pop());case"hsl":if(a.length!==3)return null;var h=(parseFloat(a[0])%360+360)%360/360,g=JC(a[1]),b=JC(a[2]),B=b<=.5?b*(g+1):b+g-b*g,S=b*2-B;return[Wv(q4(S,B,h+1/3)*255),Wv(q4(S,B,h)*255),Wv(q4(S,B,h-1/3)*255),s];default:return null}}return null}try{Cz=cne.parseCSSColor=hne}catch{}class Cd{constructor(e,t,r,i=1){this.r=e,this.g=t,this.b=r,this.a=i}static parse(e){if(!e)return;if(e instanceof Cd)return e;if(typeof e!="string")return;const t=Cz(e);if(t)return new Cd(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,r,i]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(r)},${i})`}toArray(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e*255/i,t*255/i,r*255/i,i]}toArray01(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e/i,t/i,r/i,i]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:r,a:i}=this;return[e,t,r,i]}}Cd.black=new Cd(0,0,0,1);Cd.white=new Cd(1,1,1,1);Cd.transparent=new Cd(0,0,0,0);Cd.red=new Cd(1,0,0,1);Cd.blue=new Cd(0,0,1,1);var Xd=Cd;function y_(n){return typeof n=="object"?["literal",n]:n}function dne(n,e){let t=n.stops;if(!t)return fne(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,o=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],yne(a[1])]:[a[0],y_(a[1])]),r?pne(n,e,t):o?gne(n,e,t):P6(n,e,t)}function fne(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,y_(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function xO(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function pne(n,e,t){const r={},i={},o=[];for(let s=0;s<t.length;s++){const h=t[s],g=h[0].zoom;r[g]===void 0&&(r[g]={zoom:g,type:n.type,property:n.property,default:n.default},i[g]=[],o.push(g)),i[g].push([h[0].value,h[1]])}if(MO({},e)==="exponential"){const s=[xO(n),["linear"],["zoom"]];for(const h of o){const g=P6(r[h],e,i[h]);oy(s,h,g,!1)}return s}else{const s=["step",["zoom"]];for(const h of o){const g=P6(r[h],e,i[h]);oy(s,h,g,!0)}return wO(s),s}}function mne(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function jk(n,e){const t=y_(mne(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function P6(n,e,t){const r=MO(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const a of t)o.push(["==",i,a[0]],a[1]);return o.push(jk(n,e)),o}else if(r==="categorical"){const o=["match",i];for(const a of t)oy(o,a[0],a[1],!1);return o.push(jk(n,e)),o}else if(r==="interval"){const o=["step",["number",i]];for(const a of t)oy(o,a[0],a[1],!0);return wO(o),n.default===void 0?o:["case",["==",["typeof",i],"number"],o,y_(n.default)]}else if(r==="exponential"){const o=n.base!==void 0?n.base:1,a=[xO(n),o===1?["linear"]:["exponential",o],["number",i]];for(const s of t)oy(a,s[0],s[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,y_(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function gne(n,e,t,r=["zoom"]){const i=MO(n,e);let o,a=!1;if(i==="interval")o=["step",r],a=!0;else if(i==="exponential"){const s=n.base!==void 0?n.base:1;o=[xO(n),s===1?["linear"]:["exponential",s],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const s of t)oy(o,s[0],s[1],a);return wO(o),o}function wO(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function oy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function MO(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function yne(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const o=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}class vne extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var Wp=vne;class SO{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new SO(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var _ne=SO;const Rx={kind:"null"},Tr={kind:"number"},ss={kind:"string"},Wo={kind:"boolean"},jm={kind:"color"},sy={kind:"object"},qo={kind:"value"},Cne={kind:"error"},Kx={kind:"collator"},Dx={kind:"formatted"},H_={kind:"resolvedImage"};function wf(n,e){return{kind:"array",itemType:n,N:e}}function Xl(n){if(n.kind==="array"){const e=Xl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const bne=[Rx,Tr,ss,Wo,jm,Dx,sy,wf(qo),H_];function v_(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!v_(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of bne)if(!v_(t,e))return null}}return`Expected ${Xl(n)} but found ${Xl(e)} instead.`}function EO(n,e){return e.some(t=>t.kind===n.kind)}function __(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}class BO{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class R6{constructor(e,t,r,i,o){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=o}}class Xp{constructor(e){this.sections=e}static fromString(e){return new Xp([new R6(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Xp?e:Xp.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class D0{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new D0({name:e,available:!1}):null}serialize(){return["image",this.name]}}function bz(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function v2(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof Xd)return!0;if(n instanceof BO)return!0;if(n instanceof Xp)return!0;if(n instanceof D0)return!0;if(Array.isArray(n)){for(const e of n)if(!v2(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!v2(n[e]))return!1;return!0}else return!1}function GA(n){if(n===null)return Rx;if(typeof n=="string")return ss;if(typeof n=="boolean")return Wo;if(typeof n=="number")return Tr;if(n instanceof Xd)return jm;if(n instanceof BO)return Kx;if(n instanceof Xp)return Dx;if(n instanceof D0)return H_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=GA(r);if(!t)t=i;else{if(t===i)continue;t=qo;break}}return wf(t||qo,e)}else return sy}function Qv(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Xd||n instanceof Xp||n instanceof D0?n.toString():JSON.stringify(n)}class OO{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!v2(e[1]))return t.error("invalid value");const r=e[1];let i=GA(r);const o=t.expectedType;return i.kind==="array"&&i.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(i=o),new OO(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Xd?["rgba"].concat(this.value.toArray()):this.value instanceof Xp?this.value.serialize():this.value}}var _2=OO;class xne{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var Kc=xne;const Y4={string:ss,number:Tr,boolean:Wo,object:sy};class IO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const o=e[0];if(o==="array"){let s;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in Y4)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);s=Y4[g],r++}else s=qo;let h;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);h=e[2],r++}i=wf(s,h)}else i=Y4[o];const a=[];for(;r<e.length;r++){const s=t.parse(e[r],r,qo);if(!s)return null;a.push(s)}return new IO(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(v_(this.type,GA(r))){if(t===this.args.length-1)throw new Kc(`Expected value to be of type ${Xl(this.type)}, but found ${Xl(GA(r))} instead.`)}else return r}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const r=e.itemType;if(r.kind==="string"||r.kind==="number"||r.kind==="boolean"){t.push(r.kind);const i=e.N;(typeof i=="number"||this.args.length>1)&&t.push(i)}}return t.concat(this.args.map(r=>r.serialize()))}}var Km=IO;class Lx{constructor(e){this.type=Dx,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let o=!1;for(let a=1;a<=e.length-1;++a){const s=e[a];if(o&&typeof s=="object"&&!Array.isArray(s)){o=!1;let h=null;if(s["font-scale"]&&(h=t.parse(s["font-scale"],1,Tr),!h))return null;let g=null;if(s["text-font"]&&(g=t.parse(s["text-font"],1,wf(ss)),!g))return null;let b=null;if(s["text-color"]&&(b=t.parse(s["text-color"],1,jm),!b))return null;const B=i[i.length-1];B.scale=h,B.font=g,B.textColor=b}else{const h=t.parse(e[a],1,qo);if(!h)return null;const g=h.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:h,scale:null,font:null,textColor:null})}}return new Lx(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return GA(i)===H_?new R6("",i,null,null,null):new R6(Qv(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)};return new Xp(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class Fx{constructor(e){this.type=H_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ss);return r?new Fx(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=D0.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const wne={"to-boolean":Wo,"to-color":jm,"to-number":Tr,"to-string":ss};class kO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=wne[r],o=[];for(let a=1;a<e.length;a++){const s=t.parse(e[a],a,qo);if(!s)return null;o.push(s)}return new kO(i,o)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Xd)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=bz(t[0],t[1],t[2],t[3]),!r))return new Xd(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Kc(r||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new Kc(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Xp.fromString(Qv(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?D0.fromString(Qv(this.args[0].evaluate(e))):Qv(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Lx([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Fx(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var q1=kO;const Mne=["Unknown","Point","LineString","Polygon"];class Sne{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Mne[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:r,y:i}=this.featureTileCoord,o=r*t-e[0],a=i*t-e[1],s=this.featureDistanceData.bearing[0],h=this.featureDistanceData.bearing[1];return s*o+h*a}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Xd.parse(e)),t}}var xz=Sne;class Y1{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const r=e[0],i=Y1.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let h=null;for(const[g,b]of s){h=new Bz(t.registry,t.path,null,t.scope);const B=[];let S=!1;for(let I=1;I<e.length;I++){const k=e[I],U=Array.isArray(g)?g[I-1]:g.type,z=h.parse(k,1+B.length,U);if(!z){S=!0;break}B.push(z)}if(!S){if(Array.isArray(g)&&g.length!==B.length){h.error(`Expected ${g.length} arguments, but found ${B.length} instead.`);continue}for(let I=0;I<B.length;I++){const k=Array.isArray(g)?g[I]:g.type,U=B[I];h.concat(I+1).checkSubtype(k,U.type)}if(h.errors.length===0)return new Y1(r,o,b,B)}}if(s.length===1)t.errors.push(...h.errors);else{const b=(s.length?s:a).map(([S])=>Ene(S)).join(" | "),B=[];for(let S=1;S<e.length;S++){const I=t.parse(e[S],1+B.length);if(!I)return null;B.push(Xl(I.type))}t.error(`Expected arguments of type ${b}, but found (${B.join(", ")}) instead.`)}return null}static register(e,t){Y1.definitions=t;for(const r in t)e[r]=Y1}}function Ene(n){return Array.isArray(n)?`(${n.map(Xl).join(", ")})`:`(${Xl(n.type)}...)`}var Ly=Y1;class Ux{constructor(e,t,r){this.type=Kx,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Wo);if(!i)return null;const o=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Wo);if(!o)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,ss),!a)?null:new Ux(i,o,a)}evaluate(e){return new BO(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const I0=8192;function TO(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function Bne(n){return(180+n)/360}function One(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function C2(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Ine(n,e){const t=Bne(n[0]),r=One(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*I0),Math.round(r*i*I0)]}function kne(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],o=n[0]-t[0],a=n[1]-t[1];return r*a-o*i===0&&r*o<=0&&i*a<=0}function Tne(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function PO(n,e){let t=!1;for(let r=0,i=e.length;r<i;r++){const o=e[r];for(let a=0,s=o.length;a<s-1;a++){if(kne(n,o[a],o[a+1]))return!1;Tne(n,o[a],o[a+1])&&(t=!t)}}return t}function Pne(n,e){for(let t=0;t<e.length;t++)if(PO(n,e[t]))return!0;return!1}function Rne(n,e){return n[0]*e[1]-n[1]*e[0]}function Nk(n,e,t,r){const i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1],h=r[0]-t[0],g=r[1]-t[1],b=i*g-h*o,B=a*g-h*s;return b>0&&B<0||b<0&&B>0}function Kne(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],o=[r[0]-t[0],r[1]-t[1]];return Rne(o,i)===0?!1:!!(Nk(n,e,t,r)&&Nk(t,r,n,e))}function Dne(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Kne(n,e,r[i],r[i+1]))return!0;return!1}function wz(n,e){for(let t=0;t<n.length;++t)if(!PO(n[t],e))return!1;for(let t=0;t<n.length-1;++t)if(Dne(n[t],n[t+1],e))return!1;return!0}function Lne(n,e){for(let t=0;t<e.length;t++)if(wz(n,e[t]))return!0;return!1}function RO(n,e,t){const r=[];for(let i=0;i<n.length;i++){const o=[];for(let a=0;a<n[i].length;a++){const s=Ine(n[i][a],t);TO(e,s),o.push(s)}r.push(o)}return r}function Mz(n,e,t){const r=[];for(let i=0;i<n.length;i++){const o=RO(n[i],e,t);r.push(o)}return r}function Sz(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let o=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;o===0&&(o=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=o}TO(e,n)}function Fne(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function Gk(n,e,t,r){const i=Math.pow(2,r.z)*I0,o=[r.x*I0,r.y*I0],a=[];if(!n)return a;for(const s of n)for(const h of s){const g=[h.x+o[0],h.y+o[1]];Sz(g,e,t,i),a.push(g)}return a}function Wk(n,e,t,r){const i=Math.pow(2,r.z)*I0,o=[r.x*I0,r.y*I0],a=[];if(!n)return a;for(const s of n){const h=[];for(const g of s){const b=[g.x+o[0],g.y+o[1]];TO(e,b),h.push(b)}a.push(h)}if(e[2]-e[0]<=i/2){Fne(e);for(const s of a)for(const h of s)Sz(h,e,t,i)}return a}function Une(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const o=RO(e.coordinates,r,i),a=Gk(n.geometry(),t,r,i);if(!C2(t,r))return!1;for(const s of a)if(!PO(s,o))return!1}if(e.type==="MultiPolygon"){const o=Mz(e.coordinates,r,i),a=Gk(n.geometry(),t,r,i);if(!C2(t,r))return!1;for(const s of a)if(!Pne(s,o))return!1}return!0}function zne(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const o=RO(e.coordinates,r,i),a=Wk(n.geometry(),t,r,i);if(!C2(t,r))return!1;for(const s of a)if(!wz(s,o))return!1}if(e.type==="MultiPolygon"){const o=Mz(e.coordinates,r,i),a=Wk(n.geometry(),t,r,i);if(!C2(t,r))return!1;for(const s of a)if(!Lne(s,o))return!1}return!0}class qv{constructor(e,t){this.type=Wo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(v2(e[1])){const r=e[1];if(r.type==="FeatureCollection")for(let i=0;i<r.features.length;++i){const o=r.features[i].geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new qv(r,r.features[i].geometry)}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new qv(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new qv(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Une(e,this.geometries);if(e.geometryType()==="LineString")return zne(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var KO=qv;function zx(n){if(n instanceof Ly){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof KO)return!1;let e=!0;return n.eachChild(t=>{e&&!zx(t)&&(e=!1)}),e}function DO(n){if(n instanceof Ly&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!DO(t)&&(e=!1)}),e}function LO(n,e){if(n instanceof Ly&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!LO(r,e)&&(t=!1)}),t}class FO{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new FO(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ez=FO;class UO{constructor(e,t=[],r,i=new _ne,o=[]){this.registry=e,this.path=t,this.key=t.map(a=>`[${a}]`).join(""),this.scope=i,this.errors=o,this.expectedType=r}parse(e,t,r,i,o={}){return t?this.concat(t,r,i)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,o,a){return a==="assert"?new Km(o,[i]):a==="coerce"?new q1(o,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[i];if(o){let a=o.parse(e,this);if(!a)return null;if(this.expectedType){const s=this.expectedType,h=a.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&h.kind==="value")a=r(a,s,t.typeAnnotation||"assert");else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(h.kind==="value"||h.kind==="string"))a=r(a,s,t.typeAnnotation||"coerce");else if(this.checkSubtype(s,h))return null}if(!(a instanceof _2)&&a.type.kind!=="resolvedImage"&&K6(a)){const s=new xz;try{a=new _2(a.type,a.evaluate(s))}catch(h){return this.error(h.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,o=r?this.scope.concat(r):this.scope;return new UO(this.registry,i,t||null,o,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Wp(r,e))}checkSubtype(e,t){const r=v_(e,t);return r&&this.error(r),r}}var Bz=UO;function K6(n){if(n instanceof Ez)return K6(n.boundExpression);if(n instanceof Ly&&n.name==="error")return!1;if(n instanceof Ux)return!1;if(n instanceof KO)return!1;const e=n instanceof q1||n instanceof Km;let t=!0;return n.eachChild(r=>{e?t=t&&K6(r):t=t&&r instanceof _2}),t?zx(n)&&LO(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function Oz(n,e){const t=n.length-1;let r=0,i=t,o=0,a,s;for(;r<=i;)if(o=Math.floor((r+i)/2),a=n[o],s=n[o+1],a<=e){if(o===t||e<s)return o;r=o+1}else if(a>e)i=o-1;else throw new Kc("Input is not a number.");return 0}class zO{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,o]of r)this.labels.push(i),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Tr);if(!r)return null;const i=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let a=1;a<e.length;a+=2){const s=a===1?-1/0:e[a],h=e[a+1],g=a,b=a+1;if(typeof s!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const B=t.parse(h,b,o);if(!B)return null;o=o||B.type,i.push([s,B])}return new zO(o,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const o=t.length;if(i>=t[o-1])return r[o-1].evaluate(e);const a=Oz(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Iz=zO,jne=Fy;function Fy(n,e,t,r){this.cx=3*n,this.bx=3*(t-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=r,this.p2x=t,this.p2y=r}Fy.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n};Fy.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n};Fy.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx};Fy.prototype.solveCurveX=function(n,e){typeof e>"u"&&(e=1e-6);var t,r,i,o,a;for(i=n,a=0;a<8;a++){if(o=this.sampleCurveX(i)-n,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}if(t=0,r=1,i=n,i<t)return t;if(i>r)return r;for(;t<r;){if(o=this.sampleCurveX(i),Math.abs(o-n)<e)return i;n>o?t=i:r=i,i=(r-t)*.5+t}return i};Fy.prototype.solve=function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))};var Nne=_z(jne);function Vd(n,e,t){return n*(1-t)+e*t}function Gne(n,e,t){return new Xd(Vd(n.r,e.r,t),Vd(n.g,e.g,t),Vd(n.b,e.b,t),Vd(n.a,e.a,t))}function Wne(n,e,t){return n.map((r,i)=>Vd(r,e[i],t))}var Qne=Object.freeze({__proto__:null,number:Vd,color:Gne,array:Wne});const kz=.95047,Tz=1,Pz=1.08883,Rz=4/29,ay=6/29,Kz=3*ay*ay,qne=ay*ay*ay,Yne=Math.PI/180,$ne=180/Math.PI;function $4(n){return n>qne?Math.pow(n,1/3):n/Kz+Rz}function V4(n){return n>ay?n*n*n:Kz*(n-Rz)}function H4(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Z4(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Dz(n){const e=Z4(n.r),t=Z4(n.g),r=Z4(n.b),i=$4((.4124564*e+.3575761*t+.1804375*r)/kz),o=$4((.2126729*e+.7151522*t+.072175*r)/Tz),a=$4((.0193339*e+.119192*t+.9503041*r)/Pz);return{l:116*o-16,a:500*(i-o),b:200*(o-a),alpha:n.a}}function Lz(n){let e=(n.l+16)/116,t=isNaN(n.a)?e:e+n.a/500,r=isNaN(n.b)?e:e-n.b/200;return e=Tz*V4(e),t=kz*V4(t),r=Pz*V4(r),new Xd(H4(3.2404542*t-1.5371385*e-.4985314*r),H4(-.969266*t+1.8760108*e+.041556*r),H4(.0556434*t-.2040259*e+1.0572252*r),n.alpha)}function Vne(n,e,t){return{l:Vd(n.l,e.l,t),a:Vd(n.a,e.a,t),b:Vd(n.b,e.b,t),alpha:Vd(n.alpha,e.alpha,t)}}function Hne(n){const{l:e,a:t,b:r}=Dz(n),i=Math.atan2(r,t)*$ne;return{h:i<0?i+360:i,c:Math.sqrt(t*t+r*r),l:e,alpha:n.a}}function Zne(n){const e=n.h*Yne,t=n.c,r=n.l;return Lz({l:r,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:n.alpha})}function Xne(n,e,t){const r=e-n;return n+t*(r>180||r<-180?r-360*Math.round(r/360):r)}function Jne(n,e,t){return{h:Xne(n.h,e.h,t),c:Vd(n.c,e.c,t),l:Vd(n.l,e.l,t),alpha:Vd(n.alpha,e.alpha,t)}}const eb={forward:Dz,reverse:Lz,interpolate:Vne},tb={forward:Hne,reverse:Zne,interpolate:Jne};class b2{constructor(e,t,r,i,o){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,s]of o)this.labels.push(a),this.outputs.push(s)}static interpolationFactor(e,t,r,i){let o=0;if(e.name==="exponential")o=X4(t,e.base,r,i);else if(e.name==="linear")o=X4(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;o=new Nne(a[0],a[1],a[2],a[3]).solve(X4(t,1,r,i))}return o}static parse(e,t){let[r,i,o,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Tr),!o)return null;const s=[];let h=null;r==="interpolate-hcl"||r==="interpolate-lab"?h=jm:t.expectedType&&t.expectedType.kind!=="value"&&(h=t.expectedType);for(let g=0;g<a.length;g+=2){const b=a[g],B=a[g+1],S=g+3,I=g+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(s.length&&s[s.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',S);const k=t.parse(B,I,h);if(!k)return null;h=h||k.type,s.push([b,k])}return h.kind!=="number"&&h.kind!=="color"&&!(h.kind==="array"&&h.itemType.kind==="number"&&typeof h.N=="number")?t.error(`Type ${Xl(h)} is not interpolatable.`):new b2(h,r,i,o,s)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const o=t.length;if(i>=t[o-1])return r[o-1].evaluate(e);const a=Oz(t,i),s=t[a],h=t[a+1],g=b2.interpolationFactor(this.interpolation,i,s,h),b=r[a].evaluate(e),B=r[a+1].evaluate(e);return this.operator==="interpolate"?Qne[this.type.kind.toLowerCase()](b,B,g):this.operator==="interpolate-hcl"?tb.reverse(tb.interpolate(tb.forward(b),tb.forward(B),g)):eb.reverse(eb.interpolate(eb.forward(b),eb.forward(B),g))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t}}function X4(n,e,t,r){const i=r-t,o=n-t;return i===0?0:e===1?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var Mg=b2;class x2{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const o=[];for(const s of e.slice(1)){const h=t.parse(s,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!h)return null;r=r||h.type,o.push(h)}return i&&o.some(s=>v_(i,s.type))?new x2(qo,o):new x2(r,o)}evaluate(e){let t=null,r=0,i;for(const o of this.args){if(r++,t=o.evaluate(e),t&&t instanceof D0&&!t.available&&(i||(i=t),t=null,r===this.args.length))return i;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Fz=x2;class jO{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let o=1;o<e.length-1;o+=2){const a=e[o];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,o);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const s=t.parse(e[o+1],o+1);if(!s)return null;r.push([a,s])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new jO(r,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}var Uz=jO;class NO{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Tr),i=t.parse(e[2],2,wf(t.expectedType||qo));if(!r||!i)return null;const o=i.type;return new NO(o.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Kc(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new Kc(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new Kc(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ere=NO;class GO{constructor(e,t){this.type=Wo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,qo),i=t.parse(e[2],2,qo);return!r||!i?null:EO(r.type,[Wo,ss,Tr,Rx,qo])?new GO(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xl(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(r==null)return!1;if(!__(t,["boolean","string","number","null"]))throw new Kc(`Expected first argument to be of type boolean, string, number or null, but found ${Xl(GA(t))} instead.`);if(!__(r,["string","array"]))throw new Kc(`Expected second argument to be of type array or string, but found ${Xl(GA(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var tre=GO;class w2{constructor(e,t,r){this.type=Tr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,qo),i=t.parse(e[2],2,qo);if(!r||!i)return null;if(!EO(r.type,[Wo,ss,Tr,Rx,qo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xl(r.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Tr);return o?new w2(r,i,o):null}else return new w2(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!__(t,["boolean","string","number","null"]))throw new Kc(`Expected first argument to be of type boolean, string, number or null, but found ${Xl(GA(t))} instead.`);if(!__(r,["string","array"]))throw new Kc(`Expected second argument to be of type array or string, but found ${Xl(GA(r))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(e);return r.indexOf(t,i)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var nre=w2;class WO{constructor(e,t,r,i,o,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=o,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const o={},a=[];for(let g=2;g<e.length-1;g+=2){let b=e[g];const B=e[g+1];Array.isArray(b)||(b=[b]);const S=t.concat(g);if(b.length===0)return S.error("Expected at least one branch label.");for(const k of b){if(typeof k!="number"&&typeof k!="string")return S.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return S.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return S.error("Numeric branch labels must be integer values.");if(!r)r=GA(k);else if(S.checkSubtype(r,GA(k)))return null;if(typeof o[String(k)]<"u")return S.error("Branch labels must be unique.");o[String(k)]=a.length}const I=t.parse(B,g,i);if(!I)return null;i=i||I.type,a.push(I)}const s=t.parse(e[1],1,qo);if(!s)return null;const h=t.parse(e[e.length-1],e.length-1,i);return!h||s.type.kind!=="value"&&t.concat(1).checkSubtype(r,s.type)?null:new WO(r,i,s,o,a,h)}evaluate(e){const t=this.input.evaluate(e);return(GA(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],i={};for(const a of t){const s=i[this.cases[a]];s===void 0?(i[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[s][1].push(a)}const o=a=>this.inputType.kind==="number"?Number(a):a;for(const[a,s]of r)s.length===1?e.push(o(s[0])):e.push(s.map(o)),e.push(this.outputs[a].serialize());return e.push(this.otherwise.serialize()),e}}var rre=WO;class QO{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const s=t.parse(e[a],a,Wo);if(!s)return null;const h=t.parse(e[a+1],a+1,r);if(!h)return null;i.push([s,h]),r=r||h.type}const o=t.parse(e[e.length-1],e.length-1,r);return o?new QO(r,i,o):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var ire=QO;class M2{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,qo),i=t.parse(e[2],2,Tr);if(!r||!i)return null;if(!EO(r.type,[wf(qo),ss,qo]))return t.error(`Expected first argument to be of type array or string, but found ${Xl(r.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Tr);return o?new M2(r.type,r,i,o):null}else return new M2(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!__(t,["string","array"]))throw new Kc(`Expected first argument to be of type array or string, but found ${Xl(GA(t))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(e);return t.slice(r,i)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var ore=M2;function Qk(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function sre(n,e,t){return e===t}function are(n,e,t){return e!==t}function lre(n,e,t){return e<t}function ure(n,e,t){return e>t}function Are(n,e,t){return e<=t}function cre(n,e,t){return e>=t}function zz(n,e,t,r){return r.compare(e,t)===0}function hre(n,e,t,r){return!zz(n,e,t,r)}function dre(n,e,t,r){return r.compare(e,t)<0}function fre(n,e,t,r){return r.compare(e,t)>0}function pre(n,e,t,r){return r.compare(e,t)<=0}function mre(n,e,t,r){return r.compare(e,t)>=0}function Uy(n,e,t){const r=n!=="=="&&n!=="!=";return class jz{constructor(o,a,s){this.type=Wo,this.lhs=o,this.rhs=a,this.collator=s,this.hasUntypedArgument=o.type.kind==="value"||a.type.kind==="value"}static parse(o,a){if(o.length!==3&&o.length!==4)return a.error("Expected two or three arguments.");const s=o[0];let h=a.parse(o[1],1,qo);if(!h)return null;if(!Qk(s,h.type))return a.concat(1).error(`"${s}" comparisons are not supported for type '${Xl(h.type)}'.`);let g=a.parse(o[2],2,qo);if(!g)return null;if(!Qk(s,g.type))return a.concat(2).error(`"${s}" comparisons are not supported for type '${Xl(g.type)}'.`);if(h.type.kind!==g.type.kind&&h.type.kind!=="value"&&g.type.kind!=="value")return a.error(`Cannot compare types '${Xl(h.type)}' and '${Xl(g.type)}'.`);r&&(h.type.kind==="value"&&g.type.kind!=="value"?h=new Km(g.type,[h]):h.type.kind!=="value"&&g.type.kind==="value"&&(g=new Km(h.type,[g])));let b=null;if(o.length===4){if(h.type.kind!=="string"&&g.type.kind!=="string"&&h.type.kind!=="value"&&g.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(b=a.parse(o[3],3,Kx),!b)return null}return new jz(h,g,b)}evaluate(o){const a=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(r&&this.hasUntypedArgument){const h=GA(a),g=GA(s);if(h.kind!==g.kind||!(h.kind==="string"||h.kind==="number"))throw new Kc(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${h.kind}, ${g.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const h=GA(a),g=GA(s);if(h.kind!=="string"||g.kind!=="string")return e(o,a,s)}return this.collator?t(o,a,s,this.collator.evaluate(o)):e(o,a,s)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}serialize(){const o=[n];return this.eachChild(a=>{o.push(a.serialize())}),o}}}const gre=Uy("==",sre,zz),yre=Uy("!=",are,hre),vre=Uy("<",lre,dre),_re=Uy(">",ure,fre),Cre=Uy("<=",Are,pre),bre=Uy(">=",cre,mre);class qO{constructor(e,t,r,i,o,a){this.type=ss,this.number=e,this.locale=t,this.currency=r,this.unit=i,this.minFractionDigits=o,this.maxFractionDigits=a}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Tr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let o=null;if(i.locale&&(o=t.parse(i.locale,1,ss),!o))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,ss),!a))return null;let s=null;if(i.unit&&(s=t.parse(i.unit,1,ss),!s))return null;let h=null;if(i["min-fraction-digits"]&&(h=t.parse(i["min-fraction-digits"],1,Tr),!h))return null;let g=null;return i["max-fraction-digits"]&&(g=t.parse(i["max-fraction-digits"],1,Tr),!g)?null:new qO(r,o,a,s,h,g)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class YO{constructor(e){this.type=Tr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Xl(r.type)} instead.`):new YO(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new Kc(`Expected value to be of type string or array, but found ${Xl(GA(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var xre=YO;const Nz={"==":gre,"!=":yre,">":_re,"<":vre,">=":bre,"<=":Cre,array:Km,at:ere,boolean:Km,case:ire,coalesce:Fz,collator:Ux,format:Lx,image:Fx,in:tre,"index-of":nre,interpolate:Mg,"interpolate-hcl":Mg,"interpolate-lab":Mg,length:xre,let:Uz,literal:_2,match:rre,number:Km,"number-format":qO,object:Km,slice:ore,step:Iz,string:Km,"to-boolean":q1,"to-color":q1,"to-number":q1,"to-string":q1,var:Ez,within:KO};function qk(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const o=i?i.evaluate(n):1,a=bz(e,t,r,o);if(a)throw new Kc(a);return new Xd(e/255*o,t/255*o,r/255*o,o)}function Yk(n,e){return n in e}function J4(n,e){const t=e[n];return typeof t>"u"?null:t}function wre(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function ng(n){return{type:n}}Ly.register(Nz,{error:[Cne,[ss],(n,[e])=>{throw new Kc(e.evaluate(n))}],typeof:[ss,[qo],(n,[e])=>Xl(GA(e.evaluate(n)))],"to-rgba":[wf(Tr,4),[jm],(n,[e])=>e.evaluate(n).toArray()],rgb:[jm,[Tr,Tr,Tr],qk],rgba:[jm,[Tr,Tr,Tr,Tr],qk],has:{type:Wo,overloads:[[[ss],(n,[e])=>Yk(e.evaluate(n),n.properties())],[[ss,sy],(n,[e,t])=>Yk(e.evaluate(n),t.evaluate(n))]]},get:{type:qo,overloads:[[[ss],(n,[e])=>J4(e.evaluate(n),n.properties())],[[ss,sy],(n,[e,t])=>J4(e.evaluate(n),t.evaluate(n))]]},"feature-state":[qo,[ss],(n,[e])=>J4(e.evaluate(n),n.featureState||{})],properties:[sy,[],n=>n.properties()],"geometry-type":[ss,[],n=>n.geometryType()],id:[qo,[],n=>n.id()],zoom:[Tr,[],n=>n.globals.zoom],pitch:[Tr,[],n=>n.globals.pitch||0],"distance-from-center":[Tr,[],n=>n.distanceFromCenter()],"heatmap-density":[Tr,[],n=>n.globals.heatmapDensity||0],"line-progress":[Tr,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[Tr,[],n=>n.globals.skyRadialProgress||0],accumulated:[qo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Tr,ng(Tr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Tr,ng(Tr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Tr,overloads:[[[Tr,Tr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Tr],(n,[e])=>-e.evaluate(n)]]},"/":[Tr,[Tr,Tr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Tr,[Tr,Tr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Tr,[],()=>Math.LN2],pi:[Tr,[],()=>Math.PI],e:[Tr,[],()=>Math.E],"^":[Tr,[Tr,Tr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Tr,[Tr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Tr,[Tr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Tr,[Tr],(n,[e])=>Math.log(e.evaluate(n))],log2:[Tr,[Tr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Tr,[Tr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Tr,[Tr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Tr,[Tr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Tr,[Tr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Tr,[Tr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Tr,[Tr],(n,[e])=>Math.atan(e.evaluate(n))],min:[Tr,ng(Tr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Tr,ng(Tr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Tr,[Tr],(n,[e])=>Math.abs(e.evaluate(n))],round:[Tr,[Tr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Tr,[Tr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Tr,[Tr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Wo,[ss,qo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Wo,[qo],(n,[e])=>n.id()===e.value],"filter-type-==":[Wo,[ss],(n,[e])=>n.geometryType()===e.value],"filter-<":[Wo,[ss,qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Wo,[qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[Wo,[ss,qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[Wo,[qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[Wo,[ss,qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Wo,[qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[Wo,[ss,qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Wo,[qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[Wo,[qo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Wo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Wo,[wf(ss)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Wo,[wf(qo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Wo,[ss,wf(qo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Wo,[ss,wf(qo)],(n,[e,t])=>wre(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Wo,overloads:[[[Wo,Wo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[ng(Wo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Wo,overloads:[[[Wo,Wo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[ng(Wo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Wo,[Wo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Wo,[ss],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[ss,[ss],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[ss,[ss],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[ss,ng(qo),(n,e)=>e.map(t=>Qv(t.evaluate(n))).join("")],"resolved-locale":[ss,[Kx],(n,[e])=>e.evaluate(n).resolvedLocale()]});var Gz=Nz;function D6(n){return{result:"success",value:n}}function z1(n){return{result:"error",value:n}}function Mre(n){return n["property-type"]==="data-driven"}function Sre(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Ere(n){return!!n.expression&&n.expression.interpolated}function Wz(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}class Bre{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new xz,this._defaultValue=t?Tre(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,o,a,s,h){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=h||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,o,a,s,h){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=h||null;try{const g=this.expression.evaluate(this._evaluator);if(g==null||typeof g=="number"&&g!==g)return this._defaultValue;if(this._enumValues&&!(g in this._enumValues))throw new Kc(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(g)} instead.`);return g}catch(g){return this._warningHistory[g.message]||(this._warningHistory[g.message]=!0,typeof console<"u"&&console.warn(g.message)),this._defaultValue}}}function Ore(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Gz}function L6(n,e){const t=new Bz(Gz,[],e?kre(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?D6(new Bre(r,e)):z1(t.errors)}class $k{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!DO(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,o,a)}evaluate(e,t,r,i,o,a){return this._styleExpression.evaluate(e,t,r,i,o,a)}}class Vk{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!DO(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,o,a)}evaluate(e,t,r,i,o,a){return this._styleExpression.evaluate(e,t,r,i,o,a)}interpolationFactor(e,t,r){return this.interpolationType?Mg.interpolationFactor(this.interpolationType,e,t,r):0}}function Ire(n,e){if(n=L6(n,e),n.result==="error")return n;const t=n.value.expression,r=zx(t);if(!r&&!Mre(e))return z1([new Wp("","data expressions not supported")]);const i=LO(t,["zoom","pitch","distance-from-center"]);if(!i&&!Sre(e))return z1([new Wp("","zoom expressions not supported")]);const o=Mb(t);if(!o&&!i)return z1([new Wp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Wp)return z1([o]);if(o instanceof Mg&&!Ere(e))return z1([new Wp("",'"interpolate" expressions cannot be used with this property')]);if(!o)return D6(r?new $k("constant",n.value):new $k("source",n.value));const a=o instanceof Mg?o.interpolation:void 0;return D6(r?new Vk("camera",n.value,o.labels,a):new Vk("composite",n.value,o.labels,a))}function Mb(n){let e=null;if(n instanceof Uz)e=Mb(n.result);else if(n instanceof Fz){for(const t of n.args)if(e=Mb(t),e)break}else(n instanceof Iz||n instanceof Mg)&&n.input instanceof Ly&&n.input.name==="zoom"&&(e=n);return e instanceof Wp||n.eachChild(t=>{const r=Mb(t);r instanceof Wp?e=r:!e&&r?e=new Wp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Wp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function kre(n){const e={color:jm,string:ss,number:Tr,enum:ss,boolean:Wo,formatted:Dx,resolvedImage:H_};return n.type==="array"?wf(e[n.value]||qo,n.length):e[n.type]}function Tre(n){return n.type==="color"&&(Wz(n.default)||Array.isArray(n.default))?new Xd(0,0,0,0):n.type==="color"?Xd.parse(n.default)||null:n.default===void 0?null:n.default}function Pre(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function F6(n){if(Array.isArray(n))return n.map(F6);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=F6(n[t]);return e}return Pre(n)}var Qz={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function qz(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!qz(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Rre(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};qz(n)||(n=S2(n));const t=n;let r=!0;try{r=Kre(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const i=Qz[`filter_${e}`],o=L6(r,i);let a=null;if(o.result==="error")throw new Error(o.value.map(b=>`${b.key}: ${b.message}`).join(", "));a=(b,B,S)=>o.value.evaluate(b,B,{},S);let s=null,h=null;if(r!==t){const b=L6(t,i);if(b.result==="error")throw new Error(b.value.map(B=>`${B.key}: ${B.message}`).join(", "));s=(B,S,I,k,U)=>b.value.evaluate(B,S,{},I,void 0,void 0,k,U),h=!zx(b.value.expression)}a=a;const g=Vz(r);return{filter:a,dynamicFilter:s||void 0,needGeometry:g,needFeature:!!h}}function Kre(n){if(!ly(n))return n;let e=F6(n);return $z(e),e=Yz(e),e}function Yz(n){if(!Array.isArray(n))return n;const e=Fre(n);return e===!0?e:e.map(t=>Yz(t))}function $z(n){let e=!1;const t=[];if(n[0]==="case"){for(let r=1;r<n.length-1;r+=2)e=e||ly(n[r]),t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="match"){e=e||ly(n[1]);for(let r=2;r<n.length-1;r+=2)t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="step"){e=e||ly(n[1]);for(let r=1;r<n.length-1;r+=2)t.push(n[r+1])}e&&(n.length=0,n.push("any",...t));for(let r=1;r<n.length;r++)$z(n[r])}function ly(n){if(!Array.isArray(n))return!1;if(Dre(n[0]))return!0;for(let e=1;e<n.length;e++){const t=n[e];if(ly(t))return!0}return!1}function Dre(n){return n==="pitch"||n==="distance-from-center"}const Lre=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Fre(n){if(Lre.has(n[0]))for(let e=1;e<n.length;e++){const t=n[e];if(ly(t))return!0}return n}function Ure(n,e){return n<e?-1:n>e?1:0}function Vz(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(Vz(n[e]))return!0;return!1}function S2(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?e5(n[1],n[2],"=="):e==="!="?nb(e5(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?e5(n[1],n[2],e):e==="any"?zre(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(S2)):e==="none"?["all"].concat(n.slice(1).map(S2).map(nb)):e==="in"?Hk(n[1],n.slice(2)):e==="!in"?nb(Hk(n[1],n.slice(2))):e==="has"?Zk(n[1]):e==="!has"?nb(Zk(n[1])):e==="within"?n:!0}function e5(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function zre(n){return["any"].concat(n.map(S2))}function Hk(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Ure)]]:["filter-in-small",n,["literal",e]]}}function Zk(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function nb(n){return["!",n]}var jre=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Nre(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return jre.forEach(r=>{r in e&&(t[r]=e[r])}),t}function Hz(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Nre(n[t],e[n[t].ref]));return n}var Xk={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},hv=" ",Jk=/(italic|oblique)$/i,eT={},Gre=function(n,e,t){var r=eT[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,o="normal",a=[],s,h,g=0,b=n.length;g<b;++g){var B=n[g],S=B.split(" "),I=S[S.length-1].toLowerCase();I=="normal"||I=="italic"||I=="oblique"?(o=h?o:I,h=!0,S.pop(),I=S[S.length-1].toLowerCase()):Jk.test(I)&&(I=I.replace(Jk,""),o=h?o:S[S.length-1].replace(I,""),h=!0);for(var k in Xk){var U=S.length>1?S[S.length-2].toLowerCase():"";if(I==k||I==k.replace("-","")||U+"-"+I==k){i=s?i:Xk[k],S.pop(),U&&k.startsWith(U)&&S.pop();break}}!s&&typeof I=="number"&&(i=I,s=!0);var z=S.join(hv).replace("Klokantech Noto Sans","Noto Sans");z.indexOf(hv)!==-1&&(z='"'+z+'"'),a.push(z)}r=eT[n]=[o,i,a]}return r[0]+hv+r[1]+hv+e+"px"+(t?"/"+t:"")+hv+r[2]},U6=_z(Gre);const Zz="https://api.mapbox.com";function $O(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Wre(n,e,t){const r=$O(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const o=r.slice(i.length);return`${Zz}/styles/v1/${o}/sprite?access_token=${e}`}function E2(n,e){const t=$O(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${Zz}/styles/v1/${i}?&access_token=${e}`}const Qre=["a","b","c","d"];function Sb(n,e,t,r){const i=new URL(n,r),o=$O(n);if(!o)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(o==="mapbox.satellite"){const a=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${a}.webp?access_token=${e}`]}return Qre.map(a=>`https://${a}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const tT={},nT={};let qre=0;function VO(n){return n.id||(n.id=qre++),n.id}function Yre(n,e){return VO(n)+"."+Lo(e)}function Xz(n){let e=tT[n.id];return e||(e={},tT[VO(n)]=e),e}function $re(n){let e=nT[n.id];return e||(e={},nT[VO(n)]=e),e}function t5(n){return n*Math.PI/180}const Jp=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function jx(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function HO(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const o=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(o)}return r-1}function Iv(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const f1={};function wy(n,e,t={},r){if(e in f1)return r&&(r.request=f1[e][0]),f1[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,o=yy(()=>i).then(a=>(a instanceof Request||(a=new Request(a)),a.headers.get("Accept")||a.headers.set("Accept","application/json"),r&&(r.request=a),fetch(a).then(function(s){return delete f1[e],s.ok?s.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(s){return delete f1[e],Promise.reject(new Error("Error fetching source "+e))})));return f1[e]=[i,o],o}function Jz(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=E2(n,e.accessToken),wy("Style",n,e);else return Promise.resolve(n)}const rT={};function ej(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=rT[r];if(!i||t.transformRequest){let o;t.transformRequest&&(o=(s,h)=>{const g=t.transformRequest&&t.transformRequest(h,"Tiles")||h;if(s instanceof nz)s.setLoader((b,B,S)=>{yy(()=>g).then(I=>{fetch(I).then(k=>k.arrayBuffer()).then(k=>{const z=s.getFormat().readFeatures(k,{extent:b,featureProjection:S});s.setFeatures(z)}).catch(k=>s.setState(vr.ERROR))})});else{const b=s.getImage();yy(()=>g).then(B=>{B instanceof Request?fetch(B).then(S=>S.blob()).then(S=>{const I=URL.createObjectURL(S);b.addEventListener("load",()=>URL.revokeObjectURL(I)),b.addEventListener("error",()=>URL.revokeObjectURL(I)),b.src=I}).catch(S=>s.setState(vr.ERROR)):b.src=B})}});const a=n.url;if(a&&!n.tiles){const s=Sb(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:s}),tileLoadFunction:o});else{const h={};i=wy("Source",s[0],t,h).then(function(g){return g.tiles=g.tiles.map(function(b){return g.scheme==="tms"&&(b=b.replace("{y}","{-y}")),Sb(b,t.accessToken,t.accessTokenParam||"access_token",h.request.url)[0]}),Promise.resolve({tileJson:g,tileLoadFunction:o})})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(s){return n.scheme==="tms"&&(s=s.replace("{y}","{-y}")),Sb(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:o});rT[r]=i}return i}function iT(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=jx(i[0],i[1]),a=o.getContext("2d");a.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const s=a.getImageData(0,0,i[0],i[1]);a.globalCompositeOperation="destination-over",a.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const h=s.data;for(let g=0,b=s.width;g<b;++g)for(let B=0,S=s.height;B<S;++B){const I=(B*b+g)*4;h[I+3]>0&&a.arc(g,B,t*e.pixelRatio,0,2*Math.PI)}return a.fill(),o}function Vre(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function oT(n,e,t){const r=jx(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=i.getImageData(0,0,e.width,e.height),a=o.data;for(let s=0,h=o.width;s<h;++s)for(let g=0,b=o.height;g<b;++g){const B=(g*h+s)*4,S=a[B+3]/255,I=.75,k=.1,U=Vre(I-k,I+k,S);U>0?(a[B+0]=Math.round(255*t.r*U),a[B+1]=Math.round(255*t.g*U),a[B+2]=Math.round(255*t.b*U),a[B+3]=Math.round(255*U)):a[B+3]=0}return i.putImageData(o,0,0),r}const Hre=Array(256).join(" ");function z6(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=Hre.slice(0,Math.round(e/.1));for(let o=0,a=r.length;o<a;++o)o>0&&(t+=`
`),t+=r[o].split("").join(i);return t}return n}let n5;function tj(){return n5||(n5=jx(1,1).getContext("2d")),n5}function rg(n,e){return tj().measureText(n).width+(n.length-1)*e}const sT={};function j6(n,e,t,r){if(n.indexOf(`
`)!==-1){const a=n.split(`
`),s=[];for(let h=0,g=a.length;h<g;++h)s.push(j6(a[h],e,t,r));return s.join(`
`)}const i=t+","+e+","+n+","+r;let o=sT[i];if(!o){const a=n.split(" ");if(a.length>1){const s=tj();s.font=e;const g=s.measureText("M").width*t;let b="";const B=[];for(let S=0,I=a.length;S<I;++S){const k=a[S],U=b+(b?" ":"")+k;rg(U,r)<=g?b=U:(b&&B.push(b),b=k)}b&&B.push(b);for(let S=0,I=B.length;S<I&&I>1;++S){const k=B[S];if(rg(k,r)<g*.35){const U=S>0?rg(B[S-1],r):1/0,z=S<I-1?rg(B[S+1],r):1/0;B.splice(S,1),I-=1,U<z?(B[S-1]+=" "+k,S-=1):B[S]=k+" "+B[S]}}for(let S=0,I=B.length-1;S<I;++S){const k=B[S],U=B[S+1];if(rg(k,r)>g*.7&&rg(U,r)<g*.6){const z=k.split(" "),Y=z.pop();rg(Y,r)<g*.2&&(B[S]=z.join(" "),B[S+1]=Y+" "+U),I-=1}}o=B.join(`
`)}else o=n;o=z6(o,r),sT[i]=o}return o}const Zre=/font-family: ?([^;]*);/,Xre=/("|')/g;let rb;function Jre(n){if(!rb){rb={};const e=document.styleSheets;for(let t=0,r=e.length;t<r;++t){const i=e[t];try{const o=i.rules||i.cssRules;if(o)for(let a=0,s=o.length;a<s;++a){const h=o[a];if(h.type==5){const g=h.cssText.match(Zre);rb[g[1].replace(Xre,"")]=!0}}}catch{}}}return n in rb}const r5={};function eie(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in r5)return r5[t];const r=[];for(let i=0,o=n.length;i<o;++i){n[i]=n[i].replace("Arial Unicode MS","Arial");const a=n[i],s=U6(a,1);$F(s);const h=s.split(" ");r.push([h.slice(3).join(" ").replace(/"/g,""),h[1],h[0]])}for(let i=0,o=r.length;i<o;++i){const a=r[i],s=a[0];if(!Jre(s)&&Dp.get(`${a[2]}
${a[1]} 
${s}`)!==100){const h=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a[1]).replace("{-fontstyle}",a[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",a[2]);if(!document.querySelector('link[href="'+h+'"]')){const g=document.createElement("link");g.href=h,g.rel="stylesheet",document.head.appendChild(g)}}}return r5[t]=n,n}const tie={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},nie={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},rie=function(n,e){const t=Ire(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},N6={},B2={zoom:0};let ib,i5;function Ci(n,e,t,r,i,o,a){const s=n.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[s]||(o[s]={});const h=o[s];if(!h[t]){let g=(n[e]||N6)[t];const b=Qz[`${e}_${n.type}`][t];g===void 0&&(g=b.default);let B=Ore(g);if(!B&&Wz(g)&&(g=dne(g,b),B=!0),B){const S=rie(g,b);h[t]=S.evaluate.bind(S)}else b.type=="color"&&(g=Xd.parse(g)),h[t]=function(){return g}}return B2.zoom=r,h[t](B2,i,a)}function aT(n,e,t,r,i){return Ci(n,"layout",`${r}-allow-overlap`,e,t,i)?Ci(n,"layout",`${r}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function iie(n,e,t,r,i){return i||console.warn("No filterCache provided to evaluateFilter()"),n in i||(i[n]=Rre(e).filter),B2.zoom=r,i[n](B2,t)}function m0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const oie=/\{[^{}}]*\}/g;function o5(n,e){return n.replace(oie,function(t){return e[t.slice(1,-1)]||""})}const sie={};function aie(n,e,t,r=Jp,i=void 0,o=void 0,a=void 0,s=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");sie[Yre(e,n)]=Array.from(arguments);let h,g,b;if(o){if(typeof Image<"u"){const N=new Image;let ie;yy(()=>o).then(he=>{he instanceof Request?fetch(he).then(ce=>ce.blob()).then(ce=>{ie=URL.createObjectURL(ce),N.src=ie}).catch(()=>{}):(N.crossOrigin="anonymous",N.src=he,ie&&URL.revokeObjectURL(ie))}),N.onload=function(){h=N,g=[N.width,N.height],n.changed(),N.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const N=self;N.postMessage({action:"loadImage",src:o}),N.addEventListener("message",function(he){he.data.action==="imageLoaded"&&he.data.src===o&&(h=he.data.image,g=[h.width,h.height])})}}const B=Hz(e.layers),S={},I=[],k={},U={},z=Xz(e),Y=$re(e);let Q;for(let N=0,ie=B.length;N<ie;++N){const he=B[N],ce=he.id;if(typeof t=="string"&&he.source==t||Array.isArray(t)&&t.indexOf(ce)!==-1){const we=he["source-layer"];if(Q){if(he.source!==Q)throw new Error(`Layer "${ce}" does not use source "${Q}`)}else{Q=he.source;const Ce=e.sources[Q];if(!Ce)throw new Error(`Source "${Q}" is not defined`);const Pe=Ce.type;if(Pe!=="vector"&&Pe!=="geojson")throw new Error(`Source "${Q}" is not of type "vector" or "geojson", but "${Pe}"`)}let pe=S[we];pe||(pe=[],S[we]=pe),pe.push({layer:he,index:N}),I.push(ce)}}const ne=new b0,X=new Dm,q=[],J=function(N,ie,he){const ce=N.getProperties(),we=S[ce.layer];if(!we)return;let pe=r.indexOf(ie);pe==-1&&(pe=HO(ie,r));const Ce=tie[N.getGeometry().getType()],Pe={id:N.getId(),properties:ce,type:Ce},de=n.get("mapbox-featurestate")[N.getId()];let rt=-1;for(let ze=0,Qe=we.length;ze<Qe;++ze){const ut=we[ze],Te=ut.layer,Ue=Te.id;if(he!==void 0&&he!==Ue)continue;const st=Te.layout||N6,wt=Te.paint||N6;if(st.visibility==="none"||"minzoom"in Te&&pe<Te.minzoom||"maxzoom"in Te&&pe>=Te.maxzoom)continue;const mt=Te.filter;if(!mt||iie(Ue,mt,Pe,pe,Y)){let ft,Ut,Lt,De,ke,Oe;const Je=ut.index;if(Ce==3&&(Te.type=="fill"||Te.type=="fill-extrusion"))if(Ut=Ci(Te,"paint",Te.type+"-opacity",pe,Pe,z,de),Te.type+"-pattern"in wt){const Mr=Ci(Te,"paint",Te.type+"-pattern",pe,Pe,z,de);if(Mr){const Qn=typeof Mr=="string"?o5(Mr,ce):Mr.toString();if(h&&i&&i[Qn]){++rt,Oe=q[rt],(!Oe||!Oe.getFill()||Oe.getStroke()||Oe.getText())&&(Oe=new qd({fill:new Dm}),q[rt]=Oe),Lt=Oe.getFill(),Oe.setZIndex(Je);const Sr=Qn+"."+Ut;let Ge=U[Sr];if(!Ge){const ue=i[Qn],me=jx(ue.width,ue.height),Xe=me.getContext("2d");Xe.globalAlpha=Ut,Xe.drawImage(h,ue.x,ue.y,ue.width,ue.height,0,0,ue.width,ue.height),Ge=Xe.createPattern(me,"repeat"),U[Sr]=Ge}Lt.setColor(Ge)}}}else ft=m0(Ci(Te,"paint",Te.type+"-color",pe,Pe,z,de),Ut),Te.type+"-outline-color"in wt&&(ke=m0(Ci(Te,"paint",Te.type+"-outline-color",pe,Pe,z,de),Ut)),ke||(ke=ft),(ft||ke)&&(++rt,Oe=q[rt],(!Oe||ft&&!Oe.getFill()||!ft&&Oe.getFill()||ke&&!Oe.getStroke()||!ke&&Oe.getStroke()||Oe.getText())&&(Oe=new qd({fill:ft?new Dm:void 0,stroke:ke?new b0:void 0}),q[rt]=Oe),ft&&(Lt=Oe.getFill(),Lt.setColor(ft)),ke&&(De=Oe.getStroke(),De.setColor(ke),De.setWidth(.5)),Oe.setZIndex(Je));if(Ce!=1&&Te.type=="line"){"line-pattern"in wt?ft=void 0:ft=m0(Ci(Te,"paint","line-color",pe,Pe,z,de),Ci(Te,"paint","line-opacity",pe,Pe,z,de));const Mr=Ci(Te,"paint","line-width",pe,Pe,z,de);ft&&Mr>0&&(++rt,Oe=q[rt],(!Oe||!Oe.getStroke()||Oe.getFill()||Oe.getText())&&(Oe=new qd({stroke:new b0}),q[rt]=Oe),De=Oe.getStroke(),De.setLineCap(Ci(Te,"layout","line-cap",pe,Pe,z,de)),De.setLineJoin(Ci(Te,"layout","line-join",pe,Pe,z,de)),De.setMiterLimit(Ci(Te,"layout","line-miter-limit",pe,Pe,z,de)),De.setColor(ft),De.setWidth(Mr),De.setLineDash(wt["line-dasharray"]?Ci(Te,"paint","line-dasharray",pe,Pe,z,de).map(function(Qn){return Qn*Mr}):null),Oe.setZIndex(Je))}let Mt=!1,gt=null,Nt=0,nn,en,Sn;if((Ce==1||Ce==2)&&"icon-image"in st){const Mr=Ci(Te,"layout","icon-image",pe,Pe,z,de);if(Mr){nn=typeof Mr=="string"?o5(Mr,ce):Mr.toString();let Qn;const Sr=s?s(n,nn):void 0;if(h&&i&&i[nn]||Sr){const Ge=Ci(Te,"layout","icon-rotation-alignment",pe,Pe,z,de);if(Ce==2){const ue=N.getGeometry();if(ue.getFlatMidpoint||ue.getFlatMidpoints){const me=ue.getExtent();if(Math.sqrt(Math.max(Math.pow((me[2]-me[0])/ie,2),Math.pow((me[3]-me[1])/ie,2)))>150){const Bt=ue.getType()==="MultiLineString"?ue.getFlatMidpoints():ue.getFlatMidpoint();if(i5||(ib=[NaN,NaN],i5=new sh("Point",ib,[],2,{},void 0)),Qn=i5,ib[0]=Bt[0],ib[1]=Bt[1],Ci(Te,"layout","symbol-placement",pe,Pe,z,de)==="line"&&Ge==="map"){const it=ue.getStride(),Kt=ue.getFlatCoordinates();for(let Ye=0,fe=Kt.length-it;Ye<fe;Ye+=it){const xe=Kt[Ye],p=Kt[Ye+1],Ne=Kt[Ye+it],dt=Kt[Ye+it+1],pt=Math.min(xe,Ne),Ot=Math.max(xe,Ne),_t=Bt[0],rn=Bt[1],Zt=(dt-p)*(_t-xe)-(Ne-xe)*(rn-p);if(Math.abs(Zt)<.001&&_t<=Ot&&_t>=pt){Nt=Math.atan2(p-dt,Ne-xe);break}}}}}}if(Ce!==2||Qn){const ue=Ci(Te,"layout","icon-size",pe,Pe,z,de),me=wt["icon-color"]!==void 0?Ci(Te,"paint","icon-color",pe,Pe,z,de):null;if(!me||me.a!==0){const Xe=Ci(Te,"paint","icon-halo-color",pe,Pe,z,de),Bt=Ci(Te,"paint","icon-halo-width",pe,Pe,z,de);let Yt=`${nn}.${ue}.${Bt}.${Xe}`;if(me!==null&&(Yt+=`.${me}`),en=k[Yt],!en){const it=aT(Te,pe,Pe,"icon",z);let Kt;"icon-offset"in st&&(Kt=Ci(Te,"layout","icon-offset",pe,Pe,z,de).slice(0),Kt[0]*=ue,Kt[1]*=-ue);let Ye=me?[me.r*255,me.g*255,me.b*255,me.a]:void 0;if(Sr){const fe={color:Ye,rotateWithView:Ge==="map",displacement:Kt,declutterMode:it,scale:ue};typeof Sr=="string"?fe.src=Sr:(fe.img=Sr,fe.imgSize=[Sr.width,Sr.height]),en=new r2(fe)}else{const fe=i[nn];let xe,p,Ne;Bt?fe.sdf?(xe=iT(oT(h,fe,me||[0,0,0,1]),{x:0,y:0,width:fe.width,height:fe.height,pixelRatio:fe.pixelRatio},Bt,Xe),Ye=void 0):xe=iT(h,fe,Bt,Xe):(fe.sdf?(b||(b=oT(h,{x:0,y:0,width:g[0],height:g[1]},{r:1,g:1,b:1,a:1})),xe=b):xe=h,p=[fe.width,fe.height],Ne=[fe.x,fe.y]),en=new r2({color:Ye,img:xe,imgSize:g,size:p,offset:Ne,rotateWithView:Ge==="map",scale:ue/fe.pixelRatio,displacement:Kt,declutterMode:it})}k[Yt]=en}}en&&(++rt,Oe=q[rt],(!Oe||!Oe.getImage()||Oe.getFill()||Oe.getStroke())&&(Oe=new qd,q[rt]=Oe),Oe.setGeometry(Qn),en.setRotation(Nt+t5(Ci(Te,"layout","icon-rotate",pe,Pe,z,de))),en.setOpacity(Ci(Te,"paint","icon-opacity",pe,Pe,z,de)),en.setAnchor(nie[Ci(Te,"layout","icon-anchor",pe,Pe,z,de)]),Oe.setImage(en),gt=Oe.getText(),Oe.setText(void 0),Oe.setZIndex(Je),Mt=!0,Sn=!1)}else Sn=!0}}}if(Ce==1&&Te.type==="circle"){++rt,Oe=q[rt],(!Oe||!Oe.getImage()||Oe.getFill()||Oe.getStroke())&&(Oe=new qd,q[rt]=Oe);const Mr="circle-radius"in wt?Ci(Te,"paint","circle-radius",pe,Pe,z,de):5,Qn=m0(Ci(Te,"paint","circle-stroke-color",pe,Pe,z,de),Ci(Te,"paint","circle-stroke-opacity",pe,Pe,z,de)),Sr=Ci(Te,"paint","circle-translate",pe,Pe,z,de),Ge=m0(Ci(Te,"paint","circle-color",pe,Pe,z,de),Ci(Te,"paint","circle-opacity",pe,Pe,z,de)),ue=Ci(Te,"paint","circle-stroke-width",pe,Pe,z,de),me=Mr+"."+Qn+"."+Ge+"."+ue+"."+Sr[0]+"."+Sr[1];en=k[me],en||(en=new z_({radius:Mr,displacement:[Sr[0],-Sr[1]],stroke:Qn&&ue>0?new b0({width:ue,color:Qn}):void 0,fill:Ge?new Dm({color:Ge}):void 0,declutterMode:"none"}),k[me]=en),Oe.setImage(en),gt=Oe.getText(),Oe.setText(void 0),Oe.setGeometry(void 0),Oe.setZIndex(Je),Mt=!0}let Yn,Qr,cr,fr,br,Cr;if("text-field"in st){fr=Math.round(Ci(Te,"layout","text-size",pe,Pe,z,de));const Mr=Ci(Te,"layout","text-font",pe,Pe,z,de);cr=Ci(Te,"layout","text-line-height",pe,Pe,z,de),Qr=U6(a?a(Mr,e.metadata?e.metadata["ol:webfonts"]:void 0):Mr,fr,cr),Qr.includes("sans-serif")||(Qr+=",sans-serif"),br=Ci(Te,"layout","text-letter-spacing",pe,Pe,z,de),Cr=Ci(Te,"layout","text-max-width",pe,Pe,z,de);const Qn=Ci(Te,"layout","text-field",pe,Pe,z,de);typeof Qn=="object"&&Qn.sections?Qn.sections.length===1?Yn=Qn.toString():Yn=Qn.sections.reduce((Sr,Ge,ue)=>{const me=Ge.fontStack?Ge.fontStack.split(","):Mr,Xe=U6(a?a(me):me,fr*(Ge.scale||1),cr);let Bt=Ge.text;if(Bt===`
`)return Sr.push(`
`,""),Sr;if(Ce==2)return Sr.push(z6(Bt,br),Xe),Sr;Bt=j6(Bt,Xe,Cr,br).split(`
`);for(let Yt=0,it=Bt.length;Yt<it;++Yt)Yt>0&&Sr.push(`
`,""),Sr.push(Bt[Yt],Xe);return Sr},[]):Yn=o5(Qn,ce).trim(),Ut=Ci(Te,"paint","text-opacity",pe,Pe,z,de)}if(Yn&&Ut&&!Sn){Mt||(++rt,Oe=q[rt],(!Oe||!Oe.getText()||Oe.getFill()||Oe.getStroke())&&(Oe=new qd,q[rt]=Oe),Oe.setImage(void 0),Oe.setGeometry(void 0));const Mr=aT(Te,pe,Pe,"text",z);Oe.getText()||Oe.setText(gt),gt=Oe.getText(),(!gt||"getDeclutterMode"in gt&&gt.getDeclutterMode()!==Mr)&&(gt=new Sx({padding:[2,2,2,2],declutterMode:Mr}),Oe.setText(gt));const Qn=Ci(Te,"layout","text-transform",pe,Pe,z,de);Qn=="uppercase"?Yn=Array.isArray(Yn)?Yn.map((dt,pt)=>pt%2?dt:dt.toUpperCase()):Yn.toUpperCase():Qn=="lowercase"&&(Yn=Array.isArray(Yn)?Yn.map((dt,pt)=>pt%2?dt:dt.toLowerCase()):Yn.toLowerCase());const Sr=Array.isArray(Yn)?Yn:Ce==2?z6(Yn,br):j6(Yn,Qr,Cr,br);if(gt.setText(Sr),gt.setFont(Qr),gt.setRotation(t5(Ci(Te,"layout","text-rotate",pe,Pe,z,de))),typeof gt.setKeepUpright=="function"){const dt=Ci(Te,"layout","text-keep-upright",pe,Pe,z,de);gt.setKeepUpright(dt)}const Ge=Ci(Te,"layout","text-anchor",pe,Pe,z,de),ue=Mt||Ce==1?"point":Ci(Te,"layout","symbol-placement",pe,Pe,z,de);let me;if(ue==="line-center"?(gt.setPlacement("line"),me="center"):gt.setPlacement(ue),ue==="line"&&typeof gt.setRepeat=="function"){const dt=Ci(Te,"layout","symbol-spacing",pe,Pe,z,de);gt.setRepeat(dt*2)}gt.setOverflow(ue==="point");let Xe=Ci(Te,"paint","text-halo-width",pe,Pe,z,de);const Bt=Ci(Te,"layout","text-offset",pe,Pe,z,de),Yt=Ci(Te,"paint","text-translate",pe,Pe,z,de);let it=0,Kt=0;if(ue=="point"){me="center",Ge.indexOf("left")!==-1?(me="left",Kt=Xe):Ge.indexOf("right")!==-1&&(me="right",Kt=-Xe);const dt=Ci(Te,"layout","text-rotation-alignment",pe,Pe,z,de);gt.setRotateWithView(dt=="map")}else gt.setMaxAngle(t5(Ci(Te,"layout","text-max-angle",pe,Pe,z,de))*Yn.length/Sr.length),gt.setRotateWithView(!1);gt.setTextAlign(me);let Ye="middle";Ge.indexOf("bottom")==0?(Ye="bottom",it=-Xe-.5*(cr-1)*fr):Ge.indexOf("top")==0&&(Ye="top",it=Xe+.5*(cr-1)*fr),gt.setTextBaseline(Ye);const fe=Ci(Te,"layout","text-justify",pe,Pe,z,de);gt.setJustify(fe==="auto"?void 0:fe),gt.setOffsetX(Bt[0]*fr+Kt+Yt[0]),gt.setOffsetY(Bt[1]*fr+it+Yt[1]),X.setColor(m0(Ci(Te,"paint","text-color",pe,Pe,z,de),Ut)),gt.setFill(X);const xe=m0(Ci(Te,"paint","text-halo-color",pe,Pe,z,de),Ut);if(xe&&Xe>0){ne.setColor(xe),Xe*=2;const dt=.5*fr;ne.setWidth(Xe<=dt?Xe:dt),gt.setStroke(ne)}else gt.setStroke(void 0);const p=Ci(Te,"layout","text-padding",pe,Pe,z,de),Ne=gt.getPadding();p!==Ne[0]&&(Ne[0]=p,Ne[1]=p,Ne[2]=p,Ne[3]=p),Oe.setZIndex(Je)}}}if(rt>-1)return q.length=rt+1,q};return n.setStyle(J),n.set("mapbox-source",Q),n.set("mapbox-layers",I),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),J}function lie(n,e){const t=n[0],r=t.width,i=t.height,o=t.data,a=new Uint8ClampedArray(o.length),s=e.resolution*2,h=r-1,g=i-1,b=[0,0,0,0],B=2*Math.PI,S=Math.PI/2,I=Math.PI*e.sunEl/180,k=Math.PI*e.sunAz/180,U=Math.cos(I),z=Math.sin(I),Y=e.highlightColor,Q=e.shadowColor,ne=e.accentColor,X=e.encoding;let q,J,N,ie,he,ce,we,pe,Ce,Pe,de,rt,ze,Qe,ut,Te,Ue,st,wt,mt,ft,Ut;function Lt(De,ke="mapbox"){if(ke==="mapbox")return(De[0]*256*256+De[1]*256+De[2])*.1-1e4;if(ke==="terrarium")return De[0]*256+De[1]+De[2]/256-32768}for(J=0;J<=g;++J)for(he=J===0?0:J-1,ce=J===g?g:J+1,q=0;q<=h;++q)N=q===0?0:q-1,ie=q===h?h:q+1,we=(J*r+N)*4,b[0]=o[we],b[1]=o[we+1],b[2]=o[we+2],b[3]=o[we+3],pe=e.vert*Lt(b,X),we=(J*r+ie)*4,b[0]=o[we],b[1]=o[we+1],b[2]=o[we+2],b[3]=o[we+3],Ce=e.vert*Lt(b,X),Pe=(Ce-pe)/s,we=(he*r+q)*4,b[0]=o[we],b[1]=o[we+1],b[2]=o[we+2],b[3]=o[we+3],pe=e.vert*Lt(b,X),we=(ce*r+q)*4,b[0]=o[we],b[1]=o[we+1],b[2]=o[we+2],b[3]=o[we+3],Ce=e.vert*Lt(b,X),de=(Ce-pe)/s,ze=Math.atan2(de,-Pe),ze<0?ze=S-ze:ze>S?ze=B-ze+S:ze=S-ze,rt=Math.atan(Math.sqrt(Pe*Pe+de*de)),Ut=z*Math.cos(rt)+U*Math.sin(rt)*Math.cos(k-ze),Qe=Math.cos(rt),ut=255*Ut,wt=Math.min(Math.max(2*e.sunEl,0),1),mt=1.875-e.opacity*1.75,ft=e.opacity!==.5?S*((Math.pow(mt,rt)-1)/(Math.pow(mt,S)-1)):rt,Ue={r:(1-Qe)*ne.r*wt*255,g:(1-Qe)*ne.g*wt*255,b:(1-Qe)*ne.b*wt*255,a:(1-Qe)*ne.a*wt*255},Te=Math.abs(((ze+k)/Math.PI+.5)%2-1),st={r:(Y.r*(1-Te)+Q.r*Te)*ut,g:(Y.g*(1-Te)+Q.g*Te)*ut,b:(Y.b*(1-Te)+Q.b*Te)*ut,a:(Y.a*(1-Te)+Q.a*Te)*ut},we=(J*r+q)*4,a[we]=Ue.r*(1-Te)+st.r,a[we+1]=Ue.g*(1-Te)+st.g,a[we+2]=Ue.b*(1-Te)+st.b,a[we+3]=o[we+3]*e.opacity*wt*Math.sin(ft);return new ImageData(a,r,i)}function uie(n,e=512){return n.getExtent()?bO({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Jp}function nj(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function Aie(n,e,t="",r={},i=void 0){let o,a,s,h,g=!0;return typeof t!="string"&&!Array.isArray(t)?(s=t,h=s.source||s.layers,r=s):h=t,typeof r=="string"?(o=r,s={}):(o=r.styleUrl,s=r),s.updateSource===!1&&(g=!1),i||(i=s.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:E2(o,s.accessToken),s=nj(o,s)),new Promise(function(b,B){Jz(e,s).then(function(S){if(S.version!=8)return B(new Error("glStyle version 8 required."));if(!(n instanceof hO||n instanceof Gv))return B(new Error("Can only apply to VectorLayer or VectorTileLayer"));const I=n instanceof Gv?"vector":"geojson";if(h?Array.isArray(h)?a=S.layers.find(function(X){return X.id===h[0]}).source:a=h:(a=Object.keys(S.sources).find(function(X){return S.sources[X].type===I}),h=a),!a)return B(new Error(`No ${I} source found in the glStyle.`));function k(){if(!g)return Promise.resolve();if(n instanceof Gv)return oj(S.sources[a],o,s).then(function(N){const ie=n.getSource();ie?N!==ie&&(ie.setTileUrlFunction(N.getTileUrlFunction()),typeof ie.setUrls=="function"&&typeof N.getUrls=="function"&&ie.setUrls(N.getUrls()),ie.format_||(ie.format_=N.format_),ie.getAttributions()||ie.setAttributions(N.getAttributions()),ie.getTileLoadFunction()===vz&&ie.setTileLoadFunction(N.getTileLoadFunction()),wg(ie.getProjection(),N.getProjection())&&(ie.tileGrid=N.getTileGrid())):n.setSource(N);const he=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&he.getMinZoom()>0&&n.setMaxResolution(Iv(Math.max(0,he.getMinZoom()-1e-12),he.getResolutions()))});const X=S.sources[a];let q=n.getSource();(!q||q.get("mapbox-source")!==X)&&(q=lj(X,o,s));const J=n.getSource();return J?q!==J&&(J.getAttributions()||J.setAttributions(q.getAttributions()),J.format_||(J.format_=q.getFormat()),J.url_=q.getUrl()):n.setSource(q),Promise.resolve()}let U,z,Y,Q;function ne(){if(!Q&&(!S.sprite||z)){if(s.projection&&!i){const q=Ma(s.projection).getUnits();q!=="m"&&(i=Jp.map(J=>J/R0[q]))}Q=aie(n,S,h,i,z,Y,(X,q=s.webfonts)=>eie(X,q),s.getImage),n.getStyle()?k().then(b).catch(B):B(new Error(`Nothing to show for source [${a}]`))}else Q?(n.setStyle(Q),k().then(b).catch(B)):B(new Error("Something went wrong trying to apply style."))}if(S.sprite){const X=new URL(Wre(S.sprite,s.accessToken,o||location.href));U=window.devicePixelRatio>=1.5?.5:1;const q=U==.5?"@2x":"";let J=X.origin+X.pathname+q+".json"+X.search;new Promise(function(N,ie){wy("Sprite",J,s).then(N).catch(function(he){J=X.origin+X.pathname+".json"+X.search,wy("Sprite",J,s).then(N).catch(ie)})}).then(function(N){if(N===void 0&&B(new Error("No sprites found.")),z=N,Y=X.origin+X.pathname+q+".png"+X.search,s.transformRequest){const ie=s.transformRequest(Y,"SpriteImage")||Y;(ie instanceof Request||ie instanceof Promise)&&(Y=ie)}ne()}).catch(function(N){B(new Error(`Sprites cannot be loaded: ${J}: ${N.message}`))})}else ne()}).catch(B)})}const y0={};function rj(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function cie(n,e){const t=n.bounds;if(t){const r=p6([t[0],t[1]],e),i=p6([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return Ma(e).getExtent()}function ij(n,e,t){const r=new gz({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),o=r.getTileGrid(),a=Ma(t.projection||"EPSG:3857"),s=cie(i,a),h=a.getExtent(),g=i.minzoom||0,b=i.maxzoom||22,B={attributions:r.getAttributions(),projection:a,tileGrid:new kx({origin:h?Ap(h):o.getOrigin(0),extent:s||o.getExtent(),minZoom:g,resolutions:uie(a,e.tileSize).slice(0,b+1),tileSize:o.getTileSize(0)})};return Array.isArray(i.tiles)?B.urls=i.tiles:B.url=i.tiles,B}function hie(n,e,t,r){const i={id:n.id,type:n.type},o=n.layout||{},a=n.paint||{};i.paint=a;const s=HO(e,t.resolutions||Jp);let h;const g=Ci(i,"paint","background-color",s,y0,r);return a["background-opacity"]!==void 0&&(h=Ci(i,"paint","background-opacity",s,y0,r)),o.visibility=="none"?void 0:m0(g,h)}function die(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Ry({source:new Ky({}),render(i){const o=hie(n,i.viewState.resolution,e,t);return r.style.backgroundColor=o,r}})}function oj(n,e,t){return new Promise(function(r,i){ej(n,e,t).then(function({tileJson:o,tileLoadFunction:a}){const s=ij(n,o,t);s.tileLoadFunction=a,s.format=new cte,r(new yz(s))}).catch(i)})}function fie(n,e,t){const r=new Gv({declutter:!0,visible:!1});return oj(n,e,t).then(function(i){i.set("mapbox-source",n),r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function sj(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function pie(n,e,t){return new Promise(function(r,i){ej(n,e,t).then(function({tileJson:o,tileLoadFunction:a}){const s=new gz({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});s.tileGrid=ij(n,o,t).tileGrid,t.projection&&(s.projection=Ma(t.projection));const h=s.getTileUrlFunction();a&&s.setTileLoadFunction(a),s.setTileUrlFunction(function(g,b,B){const S=sj(B);let I=h(g,b,B);if(I.indexOf(S)!=-1){const k=s.getTileGrid().getTileCoordExtent(g);I=I.replace(S,k.toString())}return I}),s.set("mapbox-source",n),r(s)}).catch(function(o){i(o)})})}function aj(n,e,t){const r=new Az;return pie(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function mie(n,e,t){const r=aj(n,e,t);return new oz({source:new pz({operationType:"image",operation:lie,sources:[r]})})}function lj(n,e,t){const r=t.projection?new Sk({dataProjection:t.projection}):new Sk,i=n.data,o={};if(typeof i=="string"){const[s]=Sb(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(s)){const g=(B,S,I)=>{const k=sj(I);return s.replace(k,`${B.join(",")}`)},b=new wb({attributions:n.attribution,format:r,loader:(B,S,I,k,U)=>{const z=typeof g=="function"?g(B,S,I):g;wy("GeoJSON",z,t).then(Y=>{const Q=b.getFormat().readFeatures(Y,{featureProjection:I});b.addFeatures(Q),k(Q)}).catch(Y=>{b.removeLoadedExtent(B),U()})},strategy:zJ});return b.set("mapbox-source",n),b}const h=new wb({attributions:n.attribution,format:r,url:s,loader:(g,b,B,S,I)=>{wy("GeoJSON",s,t).then(k=>{const U=h.getFormat().readFeatures(k,{featureProjection:B});h.addFeatures(U),S(U)}).catch(k=>{h.removeLoadedExtent(g),I()})}});return h}o.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const a=new wb(Object.assign({attributions:n.attribution,format:r},o));return a.set("mapbox-source",n),a}function gie(n,e,t){return new hO({declutter:!0,source:lj(n,e,t),visible:!1})}function yie(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],vie(n,e,r,t))}}function vie(n,e,t,r){const i=Ci(n,"paint","raster-opacity",t,y0,r);e.setOpacity(i)}function _ie(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=Hz(r.layers),o=n.get("mapbox-layers"),a=i.filter(function(s){return o.includes(s.id)}).some(function(s){return!s.layout||!s.layout.visibility||s.layout.visibility==="visible"});n.get("visible")!==a&&n.setVisible(a)}n.on("change",t),t()}function Cie(n,e,t,r){const i=Xz(n),o=n.layers,a=t.type,s=t.source||rj(o,t.ref),h=n.sources[s];let g;if(a=="background")g=die(t,r,i);else if(h.type=="vector")g=fie(h,e,r);else if(h.type=="raster")g=aj(h,e,r),g.setVisible(t.layout?t.layout.visibility!=="none":!0),g.on("prerender",yie(t,g,i));else if(h.type=="geojson")g=gie(h,e,r);else if(h.type=="raster-dem"&&t.type=="hillshade"){const B=mie(h,e,r);g=B,B.getSource().on("beforeoperations",function(S){const I=S.data;I.resolution=f6(r.projection||"EPSG:3857",S.resolution,If(S.extent),"m");const k=HO(S.resolution,r.resolutions||Jp);I.encoding=h.encoding,I.vert=5*Ci(t,"paint","hillshade-exaggeration",k,y0,i),I.sunAz=Ci(t,"paint","hillshade-illumination-direction",k,y0,i),I.sunEl=35,I.opacity=.3,I.highlightColor=Ci(t,"paint","hillshade-highlight-color",k,y0,i),I.shadowColor=Ci(t,"paint","hillshade-shadow-color",k,y0,i),I.accentColor=Ci(t,"paint","hillshade-accent-color",k,y0,i)}),g.setVisible(t.layout?t.layout.visibility!=="none":!0)}const b=s;return g&&g.set("mapbox-source",b),g}function lT(n,e,t,r){const i=[];let o=null;if(e instanceof mO){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const B=r.projection?Ma(r.projection):o.getProjection();o=new sp(Object.assign(o.getProperties(),{maxResolution:Jp[0]/R0[B.getUnits()],projection:r.projection||o.getProjection()})),e.setView(o)}"center"in n&&!o.getCenter()&&o.setCenter(p6(n.center,o.getProjection())),"zoom"in n&&o.getZoom()===void 0&&o.setResolution(Jp[0]/R0[o.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const a=n.layers;let s=[],h,g,b;for(let B=0,S=a.length;B<S;++B){const I=a[B],k=I.type;if(k=="heatmap"){console.debug(`layers[${B}].type "${k}" not supported`);continue}else b=I.source||rj(a,I.ref),(!b||b!=g)&&(s.length&&(i.push(uT(h,s,n,t,e,r)),s=[]),h=Cie(n,t,I,r),h instanceof hO||h instanceof Gv||(s=[]),g=h.get("mapbox-source")),s.push(I.id)}return i.push(uT(h,s,n,t,e,r)),Promise.all(i)}function bie(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new mO({target:n}):i=n,typeof e=="string"){const o=e.startsWith("data:")?location.href:E2(e,t.accessToken);t=nj(o,t),r=new Promise(function(a,s){Jz(e,t).then(function(h){lT(h,i,o,t).then(function(){a(i)}).catch(s)}).catch(function(h){s(new Error(`Could not load ${e}: ${h.message}`))})})}else r=new Promise(function(o,a){lT(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:E2(t.styleUrl,t.accessToken),t).then(function(){o(i)}).catch(a)});return r}function uT(n,e,t,r,i,o={}){let a=24,s=0;const h=t.layers;for(let g=0,b=h.length;g<b;++g){const B=h[g];e.indexOf(B.id)!==-1&&(a=Math.min("minzoom"in B?B.minzoom:0,a),s=Math.max("maxzoom"in B?B.maxzoom:24,s))}return new Promise(function(g,b){const B=function(){const I=n.getSource();if(!I||I.getState()==="error"){b(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in I){const k=I.getTileGrid();if(k){const U=k.getMinZoom();(a>0||U>0)&&n.setMaxResolution(Math.min(Iv(Math.max(0,a-1e-12),Jp),Iv(Math.max(0,U-1e-12),k.getResolutions()))),s<24&&n.setMinResolution(Iv(s,Jp))}}else a>0&&n.setMaxResolution(Iv(Math.max(0,a-1e-12),Jp));I instanceof wb||I instanceof yz?Aie(n,t,e,Object.assign({styleUrl:r},o)).then(function(){_ie(n,i),g()}).catch(b):g()};n.set("mapbox-layers",e);const S=i.getLayers();S.getArray().indexOf(n)===-1&&S.push(n),n.getSource()?B():n.once("change:source",B)})}function oi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return oi=function(){return a},a}oi();function AT(n){return oi().f[0]++,oi().s[0]++,oi().b[1][0]++,!n||(oi().b[1][1]++,n.length<2)?(oi().b[0][0]++,oi().s[1]++,null):(oi().b[0][1]++,oi().s[2]++,ae.jsx("span",{className:"maputnik-coords",children:n.map(e=>(oi().f[1]++,oi().s[3]++,String(e).padStart(7," "))).join(", ")}))}class uj extends Xn.Component{constructor(t){oi().f[5]++,oi().s[7]++;super(t);In(this,"updateStyle");In(this,"map");In(this,"container",(oi().s[5]++,null));In(this,"overlay");In(this,"popupContainer",(oi().s[6]++,null));In(this,"closeOverlay",(oi().s[32]++,t=>{oi().f[12]++,oi().s[33]++,t.target.blur(),oi().s[34]++,this.overlay.setPosition(void 0)}));oi().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},oi().s[9]++,this.updateStyle=V2.throttle(this._updateStyle.bind(this),200)}_updateStyle(t){if(oi().f[6]++,oi().s[10]++,this.map)oi().b[2][1]++;else{oi().b[2][0]++,oi().s[11]++;return}oi().s[12]++,this.map.getLayers().clear(),oi().s[13]++,bie(this.map,t)}componentDidUpdate(t){oi().f[7]++,oi().s[14]++,this.props.mapStyle!==t.mapStyle?(oi().b[3][0]++,oi().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):oi().b[3][1]++}componentDidMount(){oi().f[8]++,oi().s[16]++,this.overlay=new Cee({element:this.popupContainer,autoPan:{animation:{duration:250}}});const t=(oi().s[17]++,new mO({target:this.container,overlays:[this.overlay],view:new sp({zoom:1,center:[180,-90]})}));oi().s[18]++,t.on("pointermove",i=>{oi().f[9]++;const o=(oi().s[19]++,S4(i.coordinate));oi().s[20]++,this.setState({cursor:[o[0].toFixed(2),o[1].toFixed(2)]})}),oi().s[21]++;const r=()=>{oi().f[10]++;const i=(oi().s[22]++,t.getView().getZoom()),o=(oi().s[23]++,S4(t.getView().getCenter()));oi().s[24]++,this.props.onChange({zoom:i,center:{lng:o[0],lat:o[1]}})};oi().s[25]++,r(),oi().s[26]++,t.on("moveend",r),oi().s[27]++,t.on("postrender",i=>{oi().f[11]++;const o=(oi().s[28]++,S4(t.getView().getCenter()));oi().s[29]++,this.setState({center:[o[0].toFixed(2),o[1].toFixed(2)],rotation:t.getView().getRotation().toFixed(2),zoom:t.getView().getZoom().toFixed(2)})}),oi().s[30]++,this.map=t,oi().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}render(){oi().f[13]++;const t=(oi().s[35]++,this.props.t);return oi().s[36]++,ae.jsxs("div",{className:"maputnik-ol-container",children:[ae.jsxs("div",{ref:r=>(oi().f[14]++,oi().s[37]++,this.popupContainer=r),style:{background:"black"},className:"maputnik-popup",children:[ae.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":t("Close popup"),children:"×"}),ae.jsx(TF,{features:(oi().b[4][0]++,this.state.selectedFeatures||(oi().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),ae.jsxs("div",{className:"maputnik-ol-zoom",children:[t("Zoom:")," ",this.state.zoom]}),(oi().b[5][0]++,this.props.debugToolbox&&(oi().b[5][1]++,ae.jsxs("div",{className:"maputnik-ol-debug",children:[ae.jsxs("div",{children:[ae.jsxs("label",{children:[t("cursor:")," "]}),ae.jsx("span",{children:AT(this.state.cursor)})]}),ae.jsxs("div",{children:[ae.jsxs("label",{children:[t("center:")," "]}),ae.jsx("span",{children:AT(this.state.center)})]}),ae.jsxs("div",{children:[ae.jsxs("label",{children:[t("rotation:")," "]}),ae.jsx("span",{children:this.state.rotation})]})]}))),ae.jsx("div",{className:"maputnik-ol",ref:r=>(oi().f[15]++,oi().s[38]++,this.container=r),role:"region","aria-label":t("Map view"),style:{...this.props.style}})]})}}In(uj,"defaultProps",(oi().s[4]++,{onMapLoaded:()=>{oi().f[2]++},onDataChange:()=>{oi().f[3]++},onLayerSelect:()=>{oi().f[4]++}}));const xie=(oi().s[39]++,$s()(uj));var s5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var cT;function wie(){return cT||(cT=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)e.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(s5)),s5.exports}var Mie=wie();const tm=Ka(Mie);function cg(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return cg=function(){return a},a}cg();class Sie extends Xn.Component{render(){cg().f[0]++;const e=(cg().s[0]++,{width:20,height:20,...this.props.style});return cg().s[1]++,this.props.isCollapsed?(cg().b[0][0]++,ae.jsx(DV,{style:e})):(cg().b[0][1]++,ae.jsx(KV,{style:e}))}}function $1(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return $1=function(){return a},a}$1();class Eie extends Xn.Component{render(){return $1().f[0]++,$1().s[0]++,ae.jsx("li",{className:"maputnik-layer-list-group",children:ae.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>($1().f[1]++,$1().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[ae.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),ae.jsx("span",{className:"maputnik-space"}),ae.jsx(Sie,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function C_(){return C_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},C_.apply(null,arguments)}function Bie(n){if(Array.isArray(n))return n}function Oie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,a,s=[],h=!0,g=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(h=(r=o.call(t)).done)&&(s.push(r.value),s.length!==e);h=!0);}catch(b){g=!0,i=b}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(g)throw i}}return s}}function G6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Aj(n,e){if(n){if(typeof n=="string")return G6(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?G6(n,e):void 0}}function Iie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cj(n,e){return Bie(n)||Oie(n,e)||Aj(n,e)||Iie()}function My(n){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(n)}function kie(n,e){if(My(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(My(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hj(n){var e=kie(n,"string");return My(e)=="symbol"?e:e+""}function Pa(n,e,t){return(e=hj(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.forEach(function(i){Pa(n,i,t[i])})}return n}function Z_(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Tie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,hj(r.key),r)}}function X_(n,e,t){return e&&Tie(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function fs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ZO(n,e){if(e&&(My(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fs(n)}function b_(n){return b_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b_(n)}function W6(n,e){return W6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},W6(n,e)}function XO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&W6(n,e)}var l5,hT;function Pie(){if(hT)return l5;hT=1;var n=function(e,t,r,i,o,a,s,h){if(!e){var g;if(t===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[r,i,o,a,s,h],B=0;g=new Error(t.replace(/%s/g,function(){return b[B++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}};return l5=n,l5}var Rie=Pie();const Pg=Ka(Rie);function Kie(n){if(Array.isArray(n))return G6(n)}function Die(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Lie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fie(n){return Kie(n)||Die(n)||Aj(n)||Lie()}var Uie=function(){function n(){Z_(this,n),Pa(this,"refs",{})}return X_(n,[{key:"add",value:function(t,r){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(r)}},{key:"remove",value:function(t,r){var i=this.getIndex(t,r);i!==-1&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(r){var i=r.node;return i.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,r){return this.refs[t].indexOf(r)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(zie)}}]),n}();function zie(n,e){var t=n.node.sortableInfo.index,r=e.node.sortableInfo.index;return t-r}function dj(n,e){return Object.keys(n).reduce(function(t,r){return e.indexOf(r)===-1&&(t[r]=n[r]),t},{})}var p1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},fj=function(){if(typeof window>"u"||typeof document>"u")return"";var n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function ob(n,e){Object.keys(e).forEach(function(t){n.style[t]=e[t]})}function sb(n,e){n.style["".concat(fj,"Transform")]=e==null?"":"translate3d(".concat(e.x,"px,").concat(e.y,"px,0)")}function u5(n,e){n.style["".concat(fj,"TransitionDuration")]=e==null?"":"".concat(e,"ms")}function kv(n,e){for(;n;){if(e(n))return n;n=n.parentNode}return null}function dT(n,e,t){return Math.max(n,Math.min(t,e))}function V1(n){return n.substr(-2)==="px"?parseFloat(n):0}function jie(n){var e=window.getComputedStyle(n);return{bottom:V1(e.marginBottom),left:V1(e.marginLeft),right:V1(e.marginRight),top:V1(e.marginTop)}}function JO(n,e){var t=e.displayName||e.name;return t?"".concat(n,"(").concat(t,")"):n}function A5(n,e){var t=n.getBoundingClientRect();return{top:t.top+e.top,left:t.left+e.left}}function dv(n){return n.touches&&n.touches.length?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.changedTouches&&n.changedTouches.length?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY}}function Nie(n){return n.touches&&n.touches.length||n.changedTouches&&n.changedTouches.length}function Eb(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(n){var r={left:t.left+n.offsetLeft,top:t.top+n.offsetTop};return n.parentNode===e?r:Eb(n.parentNode,e,r)}}function Gie(n,e,t){return n<t&&n>e?n-1:n>t&&n<e?n+1:n}function fT(n){var e=n.lockOffset,t=n.width,r=n.height,i=e,o=e,a="px";if(typeof e=="string"){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);Pg(s!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),i=parseFloat(e),o=parseFloat(e),a=s[1]}return Pg(isFinite(i)&&isFinite(o),"lockOffset value should be a finite. Given %s",e),a==="%"&&(i=i*t/100,o=o*r/100),{x:i,y:o}}function Wie(n){var e=n.height,t=n.width,r=n.lockOffset,i=Array.isArray(r)?r:[r,r];Pg(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var o=cj(i,2),a=o[0],s=o[1];return[fT({height:e,lockOffset:a,width:t}),fT({height:e,lockOffset:s,width:t})]}function Qie(n){var e=window.getComputedStyle(n),t=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return t.test(e[i])})}function pj(n){return n instanceof HTMLElement?Qie(n)?n:pj(n.parentNode):null}function qie(n){var e=window.getComputedStyle(n);return e.display==="grid"?{x:V1(e.gridColumnGap),y:V1(e.gridRowGap)}:{x:0,y:0}}var ig={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},hg={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Yie(n){var e="input, textarea, select, canvas, [contenteditable]",t=n.querySelectorAll(e),r=n.cloneNode(!0),i=Fie(r.querySelectorAll(e));return i.forEach(function(o,a){if(o.type!=="file"&&(o.value=t[a].value),o.type==="radio"&&o.name&&(o.name="__sortableClone__".concat(o.name)),o.tagName===hg.Canvas&&t[a].width>0&&t[a].height>0){var s=o.getContext("2d");s.drawImage(t[a],0,0)}}),r}function $ie(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){XO(o,i);function o(){var a,s;Z_(this,o);for(var h=arguments.length,g=new Array(h),b=0;b<h;b++)g[b]=arguments[b];return s=ZO(this,(a=b_(o)).call.apply(a,[this].concat(g))),Pa(fs(fs(s)),"wrappedInstance",Ai.createRef()),s}return X_(o,[{key:"componentDidMount",value:function(){var s=lx.findDOMNode(this);s.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Pg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var s=r.withRef?this.wrappedInstance:null;return Ai.createElement(n,C_({ref:s},this.props))}}]),o}(Ai.Component),Pa(e,"displayName",JO("sortableHandle",n)),t}function pT(n){return n.sortableHandle!=null}var Vie=function(){function n(e,t){Z_(this,n),this.container=e,this.onScrollCallback=t}return X_(n,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var r=this,i=t.translate,o=t.minTranslate,a=t.maxTranslate,s=t.width,h=t.height,g={x:0,y:0},b={x:1,y:1},B={x:10,y:10},S=this.container,I=S.scrollTop,k=S.scrollLeft,U=S.scrollHeight,z=S.scrollWidth,Y=S.clientHeight,Q=S.clientWidth,ne=I===0,X=U-I-Y===0,q=k===0,J=z-k-Q===0;i.y>=a.y-h/2&&!X?(g.y=1,b.y=B.y*Math.abs((a.y-h/2-i.y)/h)):i.x>=a.x-s/2&&!J?(g.x=1,b.x=B.x*Math.abs((a.x-s/2-i.x)/s)):i.y<=o.y+h/2&&!ne?(g.y=-1,b.y=B.y*Math.abs((i.y-h/2-o.y)/h)):i.x<=o.x+s/2&&!q&&(g.x=-1,b.x=B.x*Math.abs((i.x-s/2-o.x)/s)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(g.x!==0||g.y!==0)&&(this.interval=setInterval(function(){r.isAutoScrolling=!0;var N={left:b.x*g.x,top:b.y*g.y};r.container.scrollTop+=N.top,r.container.scrollLeft+=N.left,r.onScrollCallback(N)},5))}}]),n}();function Hie(n){var e=n.node;return{height:e.offsetHeight,width:e.offsetWidth}}function Zie(n){var e=[hg.Input,hg.Textarea,hg.Select,hg.Option,hg.Button];return!!(e.indexOf(n.target.tagName)!==-1||kv(n.target,function(t){return t.contentEditable==="true"}))}var mj={axis:pi.oneOf(["x","y","xy"]),contentWindow:pi.any,disableAutoscroll:pi.bool,distance:pi.number,getContainer:pi.func,getHelperDimensions:pi.func,helperClass:pi.string,helperContainer:pi.oneOfType([pi.func,typeof HTMLElement>"u"?pi.any:pi.instanceOf(HTMLElement)]),hideSortableGhost:pi.bool,keyboardSortingTransitionDuration:pi.number,lockAxis:pi.string,lockOffset:pi.oneOfType([pi.number,pi.string,pi.arrayOf(pi.oneOfType([pi.number,pi.string]))]),lockToContainerEdges:pi.bool,onSortEnd:pi.func,onSortMove:pi.func,onSortOver:pi.func,onSortStart:pi.func,pressDelay:pi.number,pressThreshold:pi.number,keyCodes:pi.shape({lift:pi.arrayOf(pi.number),drop:pi.arrayOf(pi.number),cancel:pi.arrayOf(pi.number),up:pi.arrayOf(pi.number),down:pi.arrayOf(pi.number)}),shouldCancelStart:pi.func,transitionDuration:pi.number,updateBeforeSortStart:pi.func,useDragHandle:pi.bool,useWindowAsScrollContainer:pi.bool},gj={lift:[ig.SPACE],drop:[ig.SPACE],cancel:[ig.ESC],up:[ig.UP,ig.LEFT],down:[ig.DOWN,ig.RIGHT]},Xie={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:Hie,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:gj,shouldCancelStart:Zie,transitionDuration:300,useWindowAsScrollContainer:!1},Jie=Object.keys(mj);function eoe(n){Pg(!(n.distance&&n.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function toe(n,e){try{var t=n()}catch(r){return e(!0,r)}return t&&t.then?t.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var yj=Ai.createContext({manager:{}});function noe(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){XO(o,i);function o(a){var s;Z_(this,o),s=ZO(this,b_(o).call(this,a)),Pa(fs(fs(s)),"state",{}),Pa(fs(fs(s)),"handleStart",function(g){var b=s.props,B=b.distance,S=b.shouldCancelStart;if(!(g.button===2||S(g))){s.touched=!0,s.position=dv(g);var I=kv(g.target,function(ne){return ne.sortableInfo!=null});if(I&&I.sortableInfo&&s.nodeIsChild(I)&&!s.state.sorting){var k=s.props.useDragHandle,U=I.sortableInfo,z=U.index,Y=U.collection,Q=U.disabled;if(Q||k&&!kv(g.target,pT))return;s.manager.active={collection:Y,index:z},!Nie(g)&&g.target.tagName===hg.Anchor&&g.preventDefault(),B||(s.props.pressDelay===0?s.handlePress(g):s.pressTimer=setTimeout(function(){return s.handlePress(g)},s.props.pressDelay))}}}),Pa(fs(fs(s)),"nodeIsChild",function(g){return g.sortableInfo.manager===s.manager}),Pa(fs(fs(s)),"handleMove",function(g){var b=s.props,B=b.distance,S=b.pressThreshold;if(!s.state.sorting&&s.touched&&!s._awaitingUpdateBeforeSortStart){var I=dv(g),k={x:s.position.x-I.x,y:s.position.y-I.y},U=Math.abs(k.x)+Math.abs(k.y);s.delta=k,!B&&(!S||U>=S)?(clearTimeout(s.cancelTimer),s.cancelTimer=setTimeout(s.cancel,0)):B&&U>=B&&s.manager.isActive()&&s.handlePress(g)}}),Pa(fs(fs(s)),"handleEnd",function(){s.touched=!1,s.cancel()}),Pa(fs(fs(s)),"cancel",function(){var g=s.props.distance,b=s.state.sorting;b||(g||clearTimeout(s.pressTimer),s.manager.active=null)}),Pa(fs(fs(s)),"handlePress",function(g){try{var b=s.manager.getActive(),B=function(){if(b){var S=function(){var ce=q.sortableInfo.index,we=jie(q),pe=qie(s.container),Ce=s.scrollContainer.getBoundingClientRect(),Pe=U({index:ce,node:q,collection:J});if(s.node=q,s.margin=we,s.gridGap=pe,s.width=Pe.width,s.height=Pe.height,s.marginOffset={x:s.margin.left+s.margin.right+s.gridGap.x,y:Math.max(s.margin.top,s.margin.bottom,s.gridGap.y)},s.boundingClientRect=q.getBoundingClientRect(),s.containerBoundingRect=Ce,s.index=ce,s.newIndex=ce,s.axis={x:k.indexOf("x")>=0,y:k.indexOf("y")>=0},s.offsetEdge=Eb(q,s.container),N?s.initialOffset=dv(a5({},g,{pageX:s.boundingClientRect.left,pageY:s.boundingClientRect.top})):s.initialOffset=dv(g),s.initialScroll={left:s.scrollContainer.scrollLeft,top:s.scrollContainer.scrollTop},s.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},s.helper=s.helperContainer.appendChild(Yie(q)),ob(s.helper,{boxSizing:"border-box",height:"".concat(s.height,"px"),left:"".concat(s.boundingClientRect.left-we.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(s.boundingClientRect.top-we.top,"px"),width:"".concat(s.width,"px")}),N&&s.helper.focus(),Y&&(s.sortableGhost=q,ob(q,{opacity:0,visibility:"hidden"})),s.minTranslate={},s.maxTranslate={},N){var de=X?{top:0,left:0,width:s.contentWindow.innerWidth,height:s.contentWindow.innerHeight}:s.containerBoundingRect,rt=de.top,ze=de.left,Qe=de.width,ut=de.height,Te=rt+ut,Ue=ze+Qe;s.axis.x&&(s.minTranslate.x=ze-s.boundingClientRect.left,s.maxTranslate.x=Ue-(s.boundingClientRect.left+s.width)),s.axis.y&&(s.minTranslate.y=rt-s.boundingClientRect.top,s.maxTranslate.y=Te-(s.boundingClientRect.top+s.height))}else s.axis.x&&(s.minTranslate.x=(X?0:Ce.left)-s.boundingClientRect.left-s.width/2,s.maxTranslate.x=(X?s.contentWindow.innerWidth:Ce.left+Ce.width)-s.boundingClientRect.left-s.width/2),s.axis.y&&(s.minTranslate.y=(X?0:Ce.top)-s.boundingClientRect.top-s.height/2,s.maxTranslate.y=(X?s.contentWindow.innerHeight:Ce.top+Ce.height)-s.boundingClientRect.top-s.height/2);z&&z.split(" ").forEach(function(st){return s.helper.classList.add(st)}),s.listenerNode=g.touches?g.target:s.contentWindow,N?(s.listenerNode.addEventListener("wheel",s.handleKeyEnd,!0),s.listenerNode.addEventListener("mousedown",s.handleKeyEnd,!0),s.listenerNode.addEventListener("keydown",s.handleKeyDown)):(p1.move.forEach(function(st){return s.listenerNode.addEventListener(st,s.handleSortMove,!1)}),p1.end.forEach(function(st){return s.listenerNode.addEventListener(st,s.handleSortEnd,!1)})),s.setState({sorting:!0,sortingIndex:ce}),ne&&ne({node:q,index:ce,collection:J,isKeySorting:N,nodes:s.manager.getOrderedRefs(),helper:s.helper},g),N&&s.keyMove(0)},I=s.props,k=I.axis,U=I.getHelperDimensions,z=I.helperClass,Y=I.hideSortableGhost,Q=I.updateBeforeSortStart,ne=I.onSortStart,X=I.useWindowAsScrollContainer,q=b.node,J=b.collection,N=s.manager.isKeySorting,ie=function(){if(typeof Q=="function"){s._awaitingUpdateBeforeSortStart=!0;var he=toe(function(){var ce=q.sortableInfo.index;return Promise.resolve(Q({collection:J,index:ce,node:q,isKeySorting:N},g)).then(function(){})},function(ce,we){if(s._awaitingUpdateBeforeSortStart=!1,ce)throw we;return we});if(he&&he.then)return he.then(function(){})}}();return ie&&ie.then?ie.then(S):S(ie)}}();return Promise.resolve(B&&B.then?B.then(function(){}):void 0)}catch(S){return Promise.reject(S)}}),Pa(fs(fs(s)),"handleSortMove",function(g){var b=s.props.onSortMove;typeof g.preventDefault=="function"&&g.cancelable&&g.preventDefault(),s.updateHelperPosition(g),s.animateNodes(),s.autoscroll(),b&&b(g)}),Pa(fs(fs(s)),"handleSortEnd",function(g){var b=s.props,B=b.hideSortableGhost,S=b.onSortEnd,I=s.manager,k=I.active.collection,U=I.isKeySorting,z=s.manager.getOrderedRefs();s.listenerNode&&(U?(s.listenerNode.removeEventListener("wheel",s.handleKeyEnd,!0),s.listenerNode.removeEventListener("mousedown",s.handleKeyEnd,!0),s.listenerNode.removeEventListener("keydown",s.handleKeyDown)):(p1.move.forEach(function(q){return s.listenerNode.removeEventListener(q,s.handleSortMove)}),p1.end.forEach(function(q){return s.listenerNode.removeEventListener(q,s.handleSortEnd)}))),s.helper.parentNode.removeChild(s.helper),B&&s.sortableGhost&&ob(s.sortableGhost,{opacity:"",visibility:""});for(var Y=0,Q=z.length;Y<Q;Y++){var ne=z[Y],X=ne.node;ne.edgeOffset=null,ne.boundingClientRect=null,sb(X,null),u5(X,null),ne.translate=null}s.autoScroller.clear(),s.manager.active=null,s.manager.isKeySorting=!1,s.setState({sorting:!1,sortingIndex:null}),typeof S=="function"&&S({collection:k,newIndex:s.newIndex,oldIndex:s.index,isKeySorting:U,nodes:z},g),s.touched=!1}),Pa(fs(fs(s)),"autoscroll",function(){var g=s.props.disableAutoscroll,b=s.manager.isKeySorting;if(g){s.autoScroller.clear();return}if(b){var B=a5({},s.translate),S=0,I=0;s.axis.x&&(B.x=Math.min(s.maxTranslate.x,Math.max(s.minTranslate.x,s.translate.x)),S=s.translate.x-B.x),s.axis.y&&(B.y=Math.min(s.maxTranslate.y,Math.max(s.minTranslate.y,s.translate.y)),I=s.translate.y-B.y),s.translate=B,sb(s.helper,s.translate),s.scrollContainer.scrollLeft+=S,s.scrollContainer.scrollTop+=I;return}s.autoScroller.update({height:s.height,maxTranslate:s.maxTranslate,minTranslate:s.minTranslate,translate:s.translate,width:s.width})}),Pa(fs(fs(s)),"onAutoScroll",function(g){s.translate.x+=g.left,s.translate.y+=g.top,s.animateNodes()}),Pa(fs(fs(s)),"handleKeyDown",function(g){var b=g.keyCode,B=s.props,S=B.shouldCancelStart,I=B.keyCodes,k=I===void 0?{}:I,U=a5({},gj,k);s.manager.active&&!s.manager.isKeySorting||!s.manager.active&&(!U.lift.includes(b)||S(g)||!s.isValidSortingTarget(g))||(g.stopPropagation(),g.preventDefault(),U.lift.includes(b)&&!s.manager.active?s.keyLift(g):U.drop.includes(b)&&s.manager.active?s.keyDrop(g):U.cancel.includes(b)?(s.newIndex=s.manager.active.index,s.keyDrop(g)):U.up.includes(b)?s.keyMove(-1):U.down.includes(b)&&s.keyMove(1))}),Pa(fs(fs(s)),"keyLift",function(g){var b=g.target,B=kv(b,function(U){return U.sortableInfo!=null}),S=B.sortableInfo,I=S.index,k=S.collection;s.initialFocusedNode=b,s.manager.isKeySorting=!0,s.manager.active={index:I,collection:k},s.handlePress(g)}),Pa(fs(fs(s)),"keyMove",function(g){var b=s.manager.getOrderedRefs(),B=b[b.length-1].node.sortableInfo.index,S=s.newIndex+g,I=s.newIndex;if(!(S<0||S>B)){s.prevIndex=I,s.newIndex=S;var k=Gie(s.newIndex,s.prevIndex,s.index),U=b.find(function(N){var ie=N.node;return ie.sortableInfo.index===k}),z=U.node,Y=s.containerScrollDelta,Q=U.boundingClientRect||A5(z,Y),ne=U.translate||{x:0,y:0},X={top:Q.top+ne.y-Y.top,left:Q.left+ne.x-Y.left},q=I<S,J={x:q&&s.axis.x?z.offsetWidth-s.width:0,y:q&&s.axis.y?z.offsetHeight-s.height:0};s.handleSortMove({pageX:X.left+J.x,pageY:X.top+J.y,ignoreTransition:g===0})}}),Pa(fs(fs(s)),"keyDrop",function(g){s.handleSortEnd(g),s.initialFocusedNode&&s.initialFocusedNode.focus()}),Pa(fs(fs(s)),"handleKeyEnd",function(g){s.manager.active&&s.keyDrop(g)}),Pa(fs(fs(s)),"isValidSortingTarget",function(g){var b=s.props.useDragHandle,B=g.target,S=kv(B,function(I){return I.sortableInfo!=null});return S&&S.sortableInfo&&!S.sortableInfo.disabled&&(b?pT(B):B.sortableInfo)});var h=new Uie;return eoe(a),s.manager=h,s.wrappedInstance=Ai.createRef(),s.sortableContextValue={manager:h},s.events={end:s.handleEnd,move:s.handleMove,start:s.handleStart},s}return X_(o,[{key:"componentDidMount",value:function(){var s=this,h=this.props.useWindowAsScrollContainer,g=this.getContainer();Promise.resolve(g).then(function(b){s.container=b,s.document=s.container.ownerDocument||document;var B=s.props.contentWindow||s.document.defaultView||window;s.contentWindow=typeof B=="function"?B():B,s.scrollContainer=h?s.document.scrollingElement||s.document.documentElement:pj(s.container)||s.container,s.autoScroller=new Vie(s.scrollContainer,s.onAutoScroll),Object.keys(s.events).forEach(function(S){return p1[S].forEach(function(I){return s.container.addEventListener(I,s.events[S],!1)})}),s.container.addEventListener("keydown",s.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var s=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(h){return p1[h].forEach(function(g){return s.container.removeEventListener(g,s.events[h])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(s){var h=this.props,g=h.lockAxis,b=h.lockOffset,B=h.lockToContainerEdges,S=h.transitionDuration,I=h.keyboardSortingTransitionDuration,k=I===void 0?S:I,U=this.manager.isKeySorting,z=s.ignoreTransition,Y=dv(s),Q={x:Y.x-this.initialOffset.x,y:Y.y-this.initialOffset.y};if(Q.y-=window.pageYOffset-this.initialWindowScroll.top,Q.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=Q,B){var ne=Wie({height:this.height,lockOffset:b,width:this.width}),X=cj(ne,2),q=X[0],J=X[1],N={x:this.width/2-q.x,y:this.height/2-q.y},ie={x:this.width/2-J.x,y:this.height/2-J.y};Q.x=dT(this.minTranslate.x+N.x,this.maxTranslate.x-ie.x,Q.x),Q.y=dT(this.minTranslate.y+N.y,this.maxTranslate.y-ie.y,Q.y)}g==="x"?Q.y=0:g==="y"&&(Q.x=0),U&&k&&!z&&u5(this.helper,k),sb(this.helper,Q)}},{key:"animateNodes",value:function(){var s=this.props,h=s.transitionDuration,g=s.hideSortableGhost,b=s.onSortOver,B=this.containerScrollDelta,S=this.windowScrollDelta,I=this.manager.getOrderedRefs(),k={left:this.offsetEdge.left+this.translate.x+B.left,top:this.offsetEdge.top+this.translate.y+B.top},U=this.manager.isKeySorting,z=this.newIndex;this.newIndex=null;for(var Y=0,Q=I.length;Y<Q;Y++){var ne=I[Y].node,X=ne.sortableInfo.index,q=ne.offsetWidth,J=ne.offsetHeight,N={height:this.height>J?J/2:this.height/2,width:this.width>q?q/2:this.width/2},ie=U&&X>this.index&&X<=z,he=U&&X<this.index&&X>=z,ce={x:0,y:0},we=I[Y].edgeOffset;we||(we=Eb(ne,this.container),I[Y].edgeOffset=we,U&&(I[Y].boundingClientRect=A5(ne,B)));var pe=Y<I.length-1&&I[Y+1],Ce=Y>0&&I[Y-1];if(pe&&!pe.edgeOffset&&(pe.edgeOffset=Eb(pe.node,this.container),U&&(pe.boundingClientRect=A5(pe.node,B))),X===this.index){g&&(this.sortableGhost=ne,ob(ne,{opacity:0,visibility:"hidden"}));continue}h&&u5(ne,h),this.axis.x?this.axis.y?he||X<this.index&&(k.left+S.left-N.width<=we.left&&k.top+S.top<=we.top+N.height||k.top+S.top+N.height<=we.top)?(ce.x=this.width+this.marginOffset.x,we.left+ce.x>this.containerBoundingRect.width-N.width&&pe&&(ce.x=pe.edgeOffset.left-we.left,ce.y=pe.edgeOffset.top-we.top),this.newIndex===null&&(this.newIndex=X)):(ie||X>this.index&&(k.left+S.left+N.width>=we.left&&k.top+S.top+N.height>=we.top||k.top+S.top+N.height>=we.top+J))&&(ce.x=-(this.width+this.marginOffset.x),we.left+ce.x<this.containerBoundingRect.left+N.width&&Ce&&(ce.x=Ce.edgeOffset.left-we.left,ce.y=Ce.edgeOffset.top-we.top),this.newIndex=X):ie||X>this.index&&k.left+S.left+N.width>=we.left?(ce.x=-(this.width+this.marginOffset.x),this.newIndex=X):(he||X<this.index&&k.left+S.left<=we.left+N.width)&&(ce.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=X)):this.axis.y&&(ie||X>this.index&&k.top+S.top+N.height>=we.top?(ce.y=-(this.height+this.marginOffset.y),this.newIndex=X):(he||X<this.index&&k.top+S.top<=we.top+N.height)&&(ce.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=X))),sb(ne,ce),I[Y].translate=ce}this.newIndex==null&&(this.newIndex=this.index),U&&(this.newIndex=z);var Pe=U?this.prevIndex:z;b&&this.newIndex!==Pe&&b({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:Pe,isKeySorting:U,nodes:I,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Pg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var s=this.props.getContainer;return typeof s!="function"?lx.findDOMNode(this):s(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var s=r.withRef?this.wrappedInstance:null;return Ai.createElement(yj.Provider,{value:this.sortableContextValue},Ai.createElement(n,C_({ref:s},dj(this.props,Jie))))}},{key:"helperContainer",get:function(){var s=this.props.helperContainer;return typeof s=="function"?s():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var s=this.props.useWindowAsScrollContainer;return s?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),o}(Ai.Component),Pa(e,"displayName",JO("sortableList",n)),Pa(e,"defaultProps",Xie),Pa(e,"propTypes",mj),t}var vj={index:pi.number.isRequired,collection:pi.oneOfType([pi.number,pi.string]),disabled:pi.bool},roe=Object.keys(vj);function ioe(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){XO(o,i);function o(){var a,s;Z_(this,o);for(var h=arguments.length,g=new Array(h),b=0;b<h;b++)g[b]=arguments[b];return s=ZO(this,(a=b_(o)).call.apply(a,[this].concat(g))),Pa(fs(fs(s)),"wrappedInstance",Ai.createRef()),s}return X_(o,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(s){this.node&&(s.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),s.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),s.collection!==this.props.collection&&(this.unregister(s.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var s=this.props,h=s.collection,g=s.disabled,b=s.index,B=lx.findDOMNode(this);B.sortableInfo={collection:h,disabled:g,index:b,manager:this.context.manager},this.node=B,this.ref={node:B},this.context.manager.add(h,this.ref)}},{key:"unregister",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(s,this.ref)}},{key:"getWrappedInstance",value:function(){return Pg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var s=r.withRef?this.wrappedInstance:null;return Ai.createElement(n,C_({ref:s},dj(this.props,roe)))}}]),o}(Ai.Component),Pa(e,"displayName",JO("sortableElement",n)),Pa(e,"contextType",yj),Pa(e,"propTypes",vj),Pa(e,"defaultProps",{collection:0}),t}function io(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="c4894131c5d7f6ef28da960f43f4c830425a38cb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:8,column:23},end:{line:19,column:2}},1:{start:{line:9,column:2},end:{line:18,column:7}},2:{start:{line:22,column:4},end:{line:31,column:5}},3:{start:{line:24,column:8},end:{line:24,column:54}},4:{start:{line:26,column:8},end:{line:26,column:53}},5:{start:{line:28,column:8},end:{line:28,column:56}},6:{start:{line:30,column:8},end:{line:30,column:49}},7:{start:{line:34,column:51},end:{line:34,column:61}},8:{start:{line:35,column:25},end:{line:35,column:27}},9:{start:{line:36,column:4},end:{line:41,column:5}},10:{start:{line:37,column:6},end:{line:37,column:76}},11:{start:{line:38,column:6},end:{line:40,column:7}},12:{start:{line:39,column:8},end:{line:39,column:103}},13:{start:{line:42,column:4},end:{line:53,column:6}},14:{start:{line:57,column:24},end:{line:66,column:3}},15:{start:{line:67,column:29},end:{line:69,column:3}},16:{start:{line:71,column:4},end:{line:73,column:6}},17:{start:{line:76,column:29},end:{line:76,column:82}},18:{start:{line:77,column:4},end:{line:122,column:6}},19:{start:{line:81,column:25},end:{line:81,column:72}},20:{start:{line:97,column:31},end:{line:97,column:79}},21:{start:{line:106,column:31},end:{line:106,column:76}},22:{start:{line:116,column:31},end:{line:116,column:88}},23:{start:{line:125,column:30},end:{line:125,column:106}},24:{start:{line:125,column:73},end:{line:125,column:105}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:38},end:{line:8,column:39}},loc:{start:{line:8,column:49},end:{line:19,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:15},end:{line:32,column:3}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:54,column:3}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:61,column:5}},line:60},4:{name:"(anonymous_4)",decl:{start:{line:62,column:20},end:{line:62,column:21}},loc:{start:{line:62,column:26},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:29},end:{line:64,column:30}},loc:{start:{line:64,column:35},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:20},end:{line:74,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:11},end:{line:123,column:3}},line:75},8:{name:"(anonymous_8)",decl:{start:{line:81,column:17},end:{line:81,column:18}},loc:{start:{line:81,column:25},end:{line:81,column:72}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:97,column:23},end:{line:97,column:24}},loc:{start:{line:97,column:31},end:{line:97,column:79}},line:97},10:{name:"(anonymous_10)",decl:{start:{line:106,column:23},end:{line:106,column:24}},loc:{start:{line:106,column:31},end:{line:106,column:76}},line:106},11:{name:"(anonymous_11)",decl:{start:{line:116,column:23},end:{line:116,column:24}},loc:{start:{line:116,column:31},end:{line:116,column:88}},line:116},12:{name:"(anonymous_12)",decl:{start:{line:125,column:46},end:{line:125,column:47}},loc:{start:{line:125,column:73},end:{line:125,column:105}},line:125}},branchMap:{0:{loc:{start:{line:22,column:4},end:{line:31,column:5}},type:"switch",locations:[{start:{line:23,column:6},end:{line:24,column:54}},{start:{line:25,column:6},end:{line:26,column:53}},{start:{line:27,column:6},end:{line:28,column:56}},{start:{line:29,column:6},end:{line:30,column:49}}],line:22},1:{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},2:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},3:{loc:{start:{line:76,column:29},end:{line:76,column:82}},type:"cond-expr",locations:[{start:{line:76,column:67},end:{line:76,column:73}},{start:{line:76,column:76},end:{line:76,column:82}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAgBS,SACL,KADK;AAhBT,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AAEvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AAErE,OAAO,eAAe;AACtB,SAAQ,iBAAiB,sBAAqB;AAQ9C,MAAM,iBAAiB,eAAe,CAAC,UAA+B;AACpE,SAAO,qBAAC,SAAI,WAAU,mCACpB;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF,CAAC;AAUD,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,yBAAyB,MAAM;AAAA,IAAC;AAAA,EAClC;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,mBAAmB,KAAK,MAAM,eAAe,YAAY,SAAS;AAExE,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QAEf,SAAS,QAAM,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU;AAAA,QAC7D,eAAa,qBAAmB,KAAK,MAAM;AAAA,QAC3C,WAAW,WAAW;AAAA,UACpB,4BAA4B;AAAA,UAC5B,qCAAqC,KAAK,MAAM;AAAA,UAChD,CAAC,KAAK,MAAM,SAAU,GAAG;AAAA,QAC3B,CAAC;AAAA,QACD;AAAA,8BAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,UAChC,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,UAC5B;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,eAAgB,KAAK,MAAM,UAAU;AAAA;AAAA,UACjE;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,YAAa,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,oBAAoB;AAAA,cACpB,SAAS,QAAM,KAAK,MAAM,wBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1E;AAAA;AAAA;AAAA,MA5BK,KAAK,MAAM;AAAA,IA6BlB;AAAA,EACF;AACF;AAEA,MAAM,wBAAwB,gBAAoC,CAAC,UAA8B,oBAAC,iBAAe,GAAG,OAAO,CAAE;AAE7H,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4894131c5d7f6ef28da960f43f4c830425a38cb"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return io=function(){return a},a}io();const ooe=(io().s[0]++,$ie(n=>(io().f[0]++,io().s[1]++,ae.jsxs("div",{className:"maputnik-layer-list-item-handle",children:[ae.jsx(kF,{className:"layer-handle__icon",type:n.layerType}),ae.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]}))));class c5 extends Xn.Component{renderIcon(){switch(io().f[1]++,io().s[2]++,this.props.action){case"duplicate":return io().b[0][0]++,io().s[3]++,ae.jsx(OV,{});case"show":return io().b[0][1]++,io().s[4]++,ae.jsx(BV,{});case"hide":return io().b[0][2]++,io().s[5]++,ae.jsx(EV,{});case"delete":return io().b[0][3]++,io().s[6]++,ae.jsx(ky,{})}}render(){io().f[2]++;const{classBlockName:e,classBlockModifier:t}=(io().s[7]++,this.props);let r=(io().s[8]++,"");return io().s[9]++,e?(io().b[1][0]++,io().s[10]++,r=`maputnik-layer-list-icon-action__${e}`,io().s[11]++,t?(io().b[2][0]++,io().s[12]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):io().b[2][1]++):io().b[1][1]++,io().s[13]++,ae.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}class Q6 extends Xn.Component{getChildContext(){return io().f[6]++,io().s[16]++,{reactIconBase:{size:14}}}render(){io().f[7]++;const e=(io().s[17]++,this.props.visibility==="visible"?(io().b[3][0]++,"show"):(io().b[3][1]++,"hide"));return io().s[18]++,ae.jsxs("li",{id:this.props.id,onClick:t=>(io().f[8]++,io().s[19]++,this.props.onLayerSelect(this.props.layerIndex)),"data-wd-key":"layer-list-item:"+this.props.layerId,className:tm({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":this.props.isSelected,[this.props.className]:!0}),children:[ae.jsx(ooe,{...this.props}),ae.jsx("span",{style:{flexGrow:1}}),ae.jsx(c5,{wdKey:"layer-list-item:"+this.props.layerId+":delete",action:"delete",classBlockName:"delete",onClick:t=>(io().f[9]++,io().s[20]++,this.props.onLayerDestroy(this.props.layerIndex))}),ae.jsx(c5,{wdKey:"layer-list-item:"+this.props.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:t=>(io().f[10]++,io().s[21]++,this.props.onLayerCopy(this.props.layerIndex))}),ae.jsx(c5,{wdKey:"layer-list-item:"+this.props.layerId+":toggle-visibility",action:e,classBlockName:"visibility",classBlockModifier:e,onClick:t=>(io().f[11]++,io().s[22]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))})]},this.props.layerId)}}In(Q6,"defaultProps",(io().s[14]++,{isSelected:!1,visibility:"visible",onLayerCopy:()=>{io().f[3]++},onLayerDestroy:()=>{io().f[4]++},onLayerVisibilityToggle:()=>{io().f[5]++}})),In(Q6,"childContextTypes",(io().s[15]++,{reactIconBase:pi.object}));const soe=(io().s[23]++,ioe(n=>(io().f[12]++,io().s[24]++,ae.jsx(Q6,{...n}))));function O2(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return O2=function(){return a},a}O2();class Ya extends Xn.Component{render(){return O2().f[0]++,O2().s[0]++,ae.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:tm("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var _j=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],I2=_j.join(","),Cj=typeof Element>"u",Rg=Cj?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,k2=!Cj&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},T2=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),o=i===""||i==="true",a=o||t&&e&&n(e.parentNode);return a},aoe=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},bj=function(e,t,r){if(T2(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(I2));return t&&Rg.call(e,I2)&&i.unshift(e),i=i.filter(r),i},xj=function n(e,t,r){for(var i=[],o=Array.from(e);o.length;){var a=o.shift();if(!T2(a,!1))if(a.tagName==="SLOT"){var s=a.assignedElements(),h=s.length?s:a.children,g=n(h,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:a,candidates:g})}else{var b=Rg.call(a,I2);b&&r.filter(a)&&(t||!e.includes(a))&&i.push(a);var B=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),S=!T2(B,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(B&&S){var I=n(B===!0?a.children:B.children,!0,r);r.flatten?i.push.apply(i,I):i.push({scopeParent:a,candidates:I})}else o.unshift.apply(o,a.children)}}return i},wj=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},v0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||aoe(e))&&!wj(e)?0:e.tabIndex},loe=function(e,t){var r=v0(e);return r<0&&t&&!wj(e)?0:r},uoe=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Mj=function(e){return e.tagName==="INPUT"},Aoe=function(e){return Mj(e)&&e.type==="hidden"},coe=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},hoe=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},doe=function(e){if(!e.name)return!0;var t=e.form||k2(e),r=function(s){return t.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var o=hoe(i,e.form);return!o||o===e},foe=function(e){return Mj(e)&&e.type==="radio"},poe=function(e){return foe(e)&&!doe(e)},moe=function(e){var t,r=e&&k2(e),i=(t=r)===null||t===void 0?void 0:t.host,o=!1;if(r&&r!==e){var a,s,h;for(o=!!((a=i)!==null&&a!==void 0&&(s=a.ownerDocument)!==null&&s!==void 0&&s.contains(i)||e!=null&&(h=e.ownerDocument)!==null&&h!==void 0&&h.contains(e));!o&&i;){var g,b,B;r=k2(i),i=(g=r)===null||g===void 0?void 0:g.host,o=!!((b=i)!==null&&b!==void 0&&(B=b.ownerDocument)!==null&&B!==void 0&&B.contains(i))}}return o},mT=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},goe=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=Rg.call(e,"details>summary:first-of-type"),a=o?e.parentElement:e;if(Rg.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var s=e;e;){var h=e.parentElement,g=k2(e);if(h&&!h.shadowRoot&&i(h)===!0)return mT(e);e.assignedSlot?e=e.assignedSlot:!h&&g!==e.ownerDocument?e=g.host:e=h}e=s}if(moe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return mT(e);return!1},yoe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Rg.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},P2=function(e,t){return!(t.disabled||T2(t)||Aoe(t)||goe(t,e)||coe(t)||yoe(t))},q6=function(e,t){return!(poe(t)||v0(t)<0||!P2(e,t))},voe=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},_oe=function n(e){var t=[],r=[];return e.forEach(function(i,o){var a=!!i.scopeParent,s=a?i.scopeParent:i,h=loe(s,a),g=a?n(i.candidates):s;h===0?a?t.push.apply(t,g):t.push(s):r.push({documentOrder:o,tabIndex:h,item:i,isScope:a,content:g})}),r.sort(uoe).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(t)},Sj=function(e,t){t=t||{};var r;return t.getShadowRoot?r=xj([e],t.includeContainer,{filter:q6.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:voe}):r=bj(e,t.includeContainer,q6.bind(null,t)),_oe(r)},Ej=function(e,t){t=t||{};var r;return t.getShadowRoot?r=xj([e],t.includeContainer,{filter:P2.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=bj(e,t.includeContainer,P2.bind(null,t)),r},ug=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Rg.call(e,I2)===!1?!1:q6(t,e)},Coe=_j.concat("iframe").join(","),Bb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Rg.call(e,Coe)===!1?!1:P2(t,e)};const boe=Object.freeze(Object.defineProperty({__proto__:null,focusable:Ej,getTabIndex:v0,isFocusable:Bb,isTabbable:ug,tabbable:Sj},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function gT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gT(Object(t),!0).forEach(function(r){xoe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xoe(n,e,t){return e=Moe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function woe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Moe(n){var e=woe(n,"string");return typeof e=="symbol"?e:String(e)}var vT={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Soe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Eoe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Yv=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Boe=function(e){return Yv(e)&&!e.shiftKey},Ooe=function(e){return Yv(e)&&e.shiftKey},_T=function(e){return setTimeout(e,0)},CT=function(e,t){var r=-1;return e.every(function(i,o){return t(i)?(r=o,!1):!0}),r},fv=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},ab=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Ioe=[],koe=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||Ioe,o=yT({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Boe,isKeyBackward:Ooe},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},s,h=function(pe,Ce,Pe){return pe&&pe[Ce]!==void 0?pe[Ce]:o[Pe||Ce]},g=function(pe,Ce){var Pe=typeof(Ce==null?void 0:Ce.composedPath)=="function"?Ce.composedPath():void 0;return a.containerGroups.findIndex(function(de){var rt=de.container,ze=de.tabbableNodes;return rt.contains(pe)||(Pe==null?void 0:Pe.includes(rt))||ze.find(function(Qe){return Qe===pe})})},b=function(pe){var Ce=o[pe];if(typeof Ce=="function"){for(var Pe=arguments.length,de=new Array(Pe>1?Pe-1:0),rt=1;rt<Pe;rt++)de[rt-1]=arguments[rt];Ce=Ce.apply(void 0,de)}if(Ce===!0&&(Ce=void 0),!Ce){if(Ce===void 0||Ce===!1)return Ce;throw new Error("`".concat(pe,"` was specified but was not a node, or did not return a node"))}var ze=Ce;if(typeof Ce=="string"&&(ze=r.querySelector(Ce),!ze))throw new Error("`".concat(pe,"` as selector refers to no known node"));return ze},B=function(){var pe=b("initialFocus");if(pe===!1)return!1;if(pe===void 0||!Bb(pe,o.tabbableOptions))if(g(r.activeElement)>=0)pe=r.activeElement;else{var Ce=a.tabbableGroups[0],Pe=Ce&&Ce.firstTabbableNode;pe=Pe||b("fallbackFocus")}if(!pe)throw new Error("Your focus-trap needs to have at least one focusable element");return pe},S=function(){if(a.containerGroups=a.containers.map(function(pe){var Ce=Sj(pe,o.tabbableOptions),Pe=Ej(pe,o.tabbableOptions),de=Ce.length>0?Ce[0]:void 0,rt=Ce.length>0?Ce[Ce.length-1]:void 0,ze=Pe.find(function(Te){return ug(Te)}),Qe=Pe.slice().reverse().find(function(Te){return ug(Te)}),ut=!!Ce.find(function(Te){return v0(Te)>0});return{container:pe,tabbableNodes:Ce,focusableNodes:Pe,posTabIndexesFound:ut,firstTabbableNode:de,lastTabbableNode:rt,firstDomTabbableNode:ze,lastDomTabbableNode:Qe,nextTabbableNode:function(Ue){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,wt=Ce.indexOf(Ue);return wt<0?st?Pe.slice(Pe.indexOf(Ue)+1).find(function(mt){return ug(mt)}):Pe.slice(0,Pe.indexOf(Ue)).reverse().find(function(mt){return ug(mt)}):Ce[wt+(st?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(pe){return pe.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!b("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(pe){return pe.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},I=function we(pe){var Ce=pe.activeElement;if(Ce)return Ce.shadowRoot&&Ce.shadowRoot.activeElement!==null?we(Ce.shadowRoot):Ce},k=function we(pe){if(pe!==!1&&pe!==I(document)){if(!pe||!pe.focus){we(B());return}pe.focus({preventScroll:!!o.preventScroll}),a.mostRecentlyFocusedNode=pe,Soe(pe)&&pe.select()}},U=function(pe){var Ce=b("setReturnFocus",pe);return Ce||(Ce===!1?!1:pe)},z=function(pe){var Ce=pe.target,Pe=pe.event,de=pe.isBackward,rt=de===void 0?!1:de;Ce=Ce||ab(Pe),S();var ze=null;if(a.tabbableGroups.length>0){var Qe=g(Ce,Pe),ut=Qe>=0?a.containerGroups[Qe]:void 0;if(Qe<0)rt?ze=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:ze=a.tabbableGroups[0].firstTabbableNode;else if(rt){var Te=CT(a.tabbableGroups,function(Ut){var Lt=Ut.firstTabbableNode;return Ce===Lt});if(Te<0&&(ut.container===Ce||Bb(Ce,o.tabbableOptions)&&!ug(Ce,o.tabbableOptions)&&!ut.nextTabbableNode(Ce,!1))&&(Te=Qe),Te>=0){var Ue=Te===0?a.tabbableGroups.length-1:Te-1,st=a.tabbableGroups[Ue];ze=v0(Ce)>=0?st.lastTabbableNode:st.lastDomTabbableNode}else Yv(Pe)||(ze=ut.nextTabbableNode(Ce,!1))}else{var wt=CT(a.tabbableGroups,function(Ut){var Lt=Ut.lastTabbableNode;return Ce===Lt});if(wt<0&&(ut.container===Ce||Bb(Ce,o.tabbableOptions)&&!ug(Ce,o.tabbableOptions)&&!ut.nextTabbableNode(Ce))&&(wt=Qe),wt>=0){var mt=wt===a.tabbableGroups.length-1?0:wt+1,ft=a.tabbableGroups[mt];ze=v0(Ce)>=0?ft.firstTabbableNode:ft.firstDomTabbableNode}else Yv(Pe)||(ze=ut.nextTabbableNode(Ce))}}else ze=b("fallbackFocus");return ze},Y=function(pe){var Ce=ab(pe);if(!(g(Ce,pe)>=0)){if(fv(o.clickOutsideDeactivates,pe)){s.deactivate({returnFocus:o.returnFocusOnDeactivate});return}fv(o.allowOutsideClick,pe)||pe.preventDefault()}},Q=function(pe){var Ce=ab(pe),Pe=g(Ce,pe)>=0;if(Pe||Ce instanceof Document)Pe&&(a.mostRecentlyFocusedNode=Ce);else{pe.stopImmediatePropagation();var de,rt=!0;if(a.mostRecentlyFocusedNode)if(v0(a.mostRecentlyFocusedNode)>0){var ze=g(a.mostRecentlyFocusedNode),Qe=a.containerGroups[ze].tabbableNodes;if(Qe.length>0){var ut=Qe.findIndex(function(Te){return Te===a.mostRecentlyFocusedNode});ut>=0&&(o.isKeyForward(a.recentNavEvent)?ut+1<Qe.length&&(de=Qe[ut+1],rt=!1):ut-1>=0&&(de=Qe[ut-1],rt=!1))}}else a.containerGroups.some(function(Te){return Te.tabbableNodes.some(function(Ue){return v0(Ue)>0})})||(rt=!1);else rt=!1;rt&&(de=z({target:a.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(a.recentNavEvent)})),k(de||a.mostRecentlyFocusedNode||B())}a.recentNavEvent=void 0},ne=function(pe){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=pe;var Pe=z({event:pe,isBackward:Ce});Pe&&(Yv(pe)&&pe.preventDefault(),k(Pe))},X=function(pe){if(Eoe(pe)&&fv(o.escapeDeactivates,pe)!==!1){pe.preventDefault(),s.deactivate();return}(o.isKeyForward(pe)||o.isKeyBackward(pe))&&ne(pe,o.isKeyBackward(pe))},q=function(pe){var Ce=ab(pe);g(Ce,pe)>=0||fv(o.clickOutsideDeactivates,pe)||fv(o.allowOutsideClick,pe)||(pe.preventDefault(),pe.stopImmediatePropagation())},J=function(){if(a.active)return vT.activateTrap(i,s),a.delayInitialFocusTimer=o.delayInitialFocus?_T(function(){k(B())}):k(B()),r.addEventListener("focusin",Q,!0),r.addEventListener("mousedown",Y,{capture:!0,passive:!1}),r.addEventListener("touchstart",Y,{capture:!0,passive:!1}),r.addEventListener("click",q,{capture:!0,passive:!1}),r.addEventListener("keydown",X,{capture:!0,passive:!1}),s},N=function(){if(a.active)return r.removeEventListener("focusin",Q,!0),r.removeEventListener("mousedown",Y,!0),r.removeEventListener("touchstart",Y,!0),r.removeEventListener("click",q,!0),r.removeEventListener("keydown",X,!0),s},ie=function(pe){var Ce=pe.some(function(Pe){var de=Array.from(Pe.removedNodes);return de.some(function(rt){return rt===a.mostRecentlyFocusedNode})});Ce&&k(B())},he=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ie):void 0,ce=function(){he&&(he.disconnect(),a.active&&!a.paused&&a.containers.map(function(pe){he.observe(pe,{subtree:!0,childList:!0})}))};return s={get active(){return a.active},get paused(){return a.paused},activate:function(pe){if(a.active)return this;var Ce=h(pe,"onActivate"),Pe=h(pe,"onPostActivate"),de=h(pe,"checkCanFocusTrap");de||S(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,Ce==null||Ce();var rt=function(){de&&S(),J(),ce(),Pe==null||Pe()};return de?(de(a.containers.concat()).then(rt,rt),this):(rt(),this)},deactivate:function(pe){if(!a.active)return this;var Ce=yT({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},pe);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,N(),a.active=!1,a.paused=!1,ce(),vT.deactivateTrap(i,s);var Pe=h(Ce,"onDeactivate"),de=h(Ce,"onPostDeactivate"),rt=h(Ce,"checkCanReturnFocus"),ze=h(Ce,"returnFocus","returnFocusOnDeactivate");Pe==null||Pe();var Qe=function(){_T(function(){ze&&k(U(a.nodeFocusedBeforeActivation)),de==null||de()})};return ze&&rt?(rt(U(a.nodeFocusedBeforeActivation)).then(Qe,Qe),this):(Qe(),this)},pause:function(pe){if(a.paused||!a.active)return this;var Ce=h(pe,"onPause"),Pe=h(pe,"onPostPause");return a.paused=!0,Ce==null||Ce(),N(),ce(),Pe==null||Pe(),this},unpause:function(pe){if(!a.paused||!a.active)return this;var Ce=h(pe,"onUnpause"),Pe=h(pe,"onPostUnpause");return a.paused=!1,Ce==null||Ce(),S(),J(),ce(),Pe==null||Pe(),this},updateContainerElements:function(pe){var Ce=[].concat(pe).filter(Boolean);return a.containers=Ce.map(function(Pe){return typeof Pe=="string"?r.querySelector(Pe):Pe}),a.active&&S(),ce(),this}},s.updateContainerElements(e),s};const Toe=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:koe},Symbol.toStringTag,{value:"Module"})),Poe=tB(Toe),Roe=tB(boe);var h5,bT;function Koe(){if(bT)return h5;bT=1;function n(J){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},n(J)}function e(J,N){if(!(J instanceof N))throw new TypeError("Cannot call a class as a function")}function t(J,N){for(var ie=0;ie<N.length;ie++){var he=N[ie];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(J,S(he.key),he)}}function r(J,N,ie){return t(J.prototype,N),Object.defineProperty(J,"prototype",{writable:!1}),J}function i(J,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(N&&N.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),Object.defineProperty(J,"prototype",{writable:!1}),N&&o(J,N)}function o(J,N){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,ce){return he.__proto__=ce,he},o(J,N)}function a(J){var N=g();return function(){var he=b(J),ce;if(N){var we=b(this).constructor;ce=Reflect.construct(he,arguments,we)}else ce=he.apply(this,arguments);return s(this,ce)}}function s(J,N){if(N&&(n(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(J)}function h(J){if(J===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(J){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},b(J)}function B(J,N,ie){return N=S(N),N in J?Object.defineProperty(J,N,{value:ie,enumerable:!0,configurable:!0,writable:!0}):J[N]=ie,J}function S(J){var N=I(J,"string");return n(N)==="symbol"?N:String(N)}function I(J,N){if(n(J)!=="object"||J===null)return J;var ie=J[Symbol.toPrimitive];if(ie!==void 0){var he=ie.call(J,N||"default");if(n(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(J)}var k=Da(),U=hp(),z=Poe,Y=z.createFocusTrap,Q=Roe,ne=Q.isFocusable,X=function(J){i(ie,J);var N=a(ie);function ie(he){var ce;e(this,ie),ce=N.call(this,he),B(h(ce),"getNodeForOption",function(Ce){var Pe,de=(Pe=this.internalOptions[Ce])!==null&&Pe!==void 0?Pe:this.originalOptions[Ce];if(typeof de=="function"){for(var rt=arguments.length,ze=new Array(rt>1?rt-1:0),Qe=1;Qe<rt;Qe++)ze[Qe-1]=arguments[Qe];de=de.apply(void 0,ze)}if(de===!0&&(de=void 0),!de){if(de===void 0||de===!1)return de;throw new Error("`".concat(Ce,"` was specified but was not a node, or did not return a node"))}var ut=de;if(typeof de=="string"){var Te;if(ut=(Te=this.getDocument())===null||Te===void 0?void 0:Te.querySelector(de),!ut)throw new Error("`".concat(Ce,"` as selector refers to no known node"))}return ut}),ce.handleDeactivate=ce.handleDeactivate.bind(h(ce)),ce.handlePostDeactivate=ce.handlePostDeactivate.bind(h(ce)),ce.handleClickOutsideDeactivates=ce.handleClickOutsideDeactivates.bind(h(ce)),ce.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ce.handleDeactivate,onPostDeactivate:ce.handlePostDeactivate,clickOutsideDeactivates:ce.handleClickOutsideDeactivates},ce.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var we=he.focusTrapOptions;for(var pe in we)if(Object.prototype.hasOwnProperty.call(we,pe)){if(pe==="returnFocusOnDeactivate"||pe==="onDeactivate"||pe==="onPostDeactivate"||pe==="checkCanReturnFocus"||pe==="clickOutsideDeactivates"){ce.originalOptions[pe]=we[pe];continue}ce.internalOptions[pe]=we[pe]}return ce.outsideClick=null,ce.focusTrapElements=he.containerElements||[],ce.updatePreviousElement(),ce}return r(ie,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ce=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ce||(ce===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ce=this.getDocument();ce&&(this.previouslyFocusedElement=ce.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ce){var we=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ce):this.originalOptions.clickOutsideDeactivates;return we&&(this.outsideClick={target:ce.target,allowDeactivation:we}),we}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ce=this,we=function(){var Ce=ce.getReturnFocusNode(),Pe=!!(ce.originalOptions.returnFocusOnDeactivate&&Ce!==null&&Ce!==void 0&&Ce.focus&&(!ce.outsideClick||ce.outsideClick.allowDeactivation&&!ne(ce.outsideClick.target,ce.internalOptions.tabbableOptions))),de=ce.internalOptions.preventScroll,rt=de===void 0?!1:de;Pe&&Ce.focus({preventScroll:rt}),ce.originalOptions.onPostDeactivate&&ce.originalOptions.onPostDeactivate.call(null),ce.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(we,we):we()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ce=this.focusTrapElements.some(Boolean);ce&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ce){if(this.focusTrap){ce.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var we=!ce.active&&this.props.active,pe=ce.active&&!this.props.active,Ce=!ce.paused&&this.props.paused,Pe=ce.paused&&!this.props.paused;if(we&&(this.updatePreviousElement(),this.focusTrap.activate()),pe){this.deactivateTrap();return}Ce&&this.focusTrap.pause(),Pe&&this.focusTrap.unpause()}else ce.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ce=this,we=this.props.children?k.Children.only(this.props.children):void 0;if(we){if(we.type&&we.type===k.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var pe=function(de){var rt=ce.props.containerElements;we&&(typeof we.ref=="function"?we.ref(de):we.ref&&(we.ref.current=de)),ce.focusTrapElements=rt||[de]},Ce=k.cloneElement(we,{ref:pe});return Ce}return null}}]),ie}(k.Component),q=typeof Element>"u"?Function:Element;return X.propTypes={active:U.bool,paused:U.bool,focusTrapOptions:U.shape({document:U.object,onActivate:U.func,onPostActivate:U.func,checkCanFocusTrap:U.func,onPause:U.func,onPostPause:U.func,onUnpause:U.func,onPostUnpause:U.func,onDeactivate:U.func,onPostDeactivate:U.func,checkCanReturnFocus:U.func,initialFocus:U.oneOfType([U.instanceOf(q),U.string,U.bool,U.func]),fallbackFocus:U.oneOfType([U.instanceOf(q),U.string,U.func]),escapeDeactivates:U.oneOfType([U.bool,U.func]),clickOutsideDeactivates:U.oneOfType([U.bool,U.func]),returnFocusOnDeactivate:U.bool,setReturnFocus:U.oneOfType([U.instanceOf(q),U.string,U.bool,U.func]),allowOutsideClick:U.oneOfType([U.bool,U.func]),preventScroll:U.bool,tabbableOptions:U.shape({displayCheck:U.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:U.oneOfType([U.bool,U.func])}),trapStack:U.array,isKeyForward:U.func,isKeyBackward:U.func}),containerElements:U.arrayOf(U.instanceOf(q)),children:U.oneOfType([U.element,U.instanceOf(q)])},X.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:Y},h5=X,h5}var d5={exports:{}},xT;function Doe(){return xT||(xT=1,function(n){(function(e){var t=!1,r,i;function o(){if(typeof r<"u")return r;var B=document.documentElement,S=document.createElement("div");return S.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),B.appendChild(S),r=S.offsetWidth-S.clientWidth,B.removeChild(S),r}function a(){return document.documentElement.scrollHeight>window.innerHeight}function s(B){if(!(typeof document>"u"||t)){var S=document.documentElement;i=window.pageYOffset,a()?S.style.width="calc(100% - "+o()+"px)":S.style.width="100%",S.style.position="fixed",S.style.top=-i+"px",S.style.overflow="hidden",t=!0}}function h(){if(!(typeof document>"u"||!t)){var B=document.documentElement;B.style.width="",B.style.position="",B.style.top="",B.style.overflow="",window.scroll(0,i),t=!1}}function g(){if(t){h();return}s()}var b={on:s,off:h,toggle:g};n.exports=b})()}(d5)),d5.exports}var f5,wT;function Loe(){if(wT)return f5;wT=1;function n(ne){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},n(ne)}function e(ne,X){if(!(ne instanceof X))throw new TypeError("Cannot call a class as a function")}function t(ne,X){for(var q=0;q<X.length;q++){var J=X[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(ne,J.key,J)}}function r(ne,X,q){return X&&t(ne.prototype,X),Object.defineProperty(ne,"prototype",{writable:!1}),ne}function i(ne,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(X&&X.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),Object.defineProperty(ne,"prototype",{writable:!1}),X&&o(ne,X)}function o(ne,X){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(J,N){return J.__proto__=N,J},o(ne,X)}function a(ne){var X=g();return function(){var J=b(ne),N;if(X){var ie=b(this).constructor;N=Reflect.construct(J,arguments,ie)}else N=J.apply(this,arguments);return s(this,N)}}function s(ne,X){if(X&&(n(X)==="object"||typeof X=="function"))return X;if(X!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(ne)}function h(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(ne){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)},b(ne)}function B(ne,X,q){return X in ne?Object.defineProperty(ne,X,{value:q,enumerable:!0,configurable:!0,writable:!0}):ne[X]=q,ne}var S=Da(),I=O_(),k=Koe(),U=Doe(),z=function(ne){i(q,ne);var X=a(q);function q(J){var N;if(e(this,q),N=X.call(this,J),B(h(N),"getApplicationNode",function(){return N.props.getApplicationNode?N.props.getApplicationNode():N.props.applicationNode}),B(h(N),"checkUnderlayClick",function(ie){N.dialogNode&&N.dialogNode.contains(ie.target)||ie.pageX>ie.target.ownerDocument.documentElement.offsetWidth||ie.pageY>ie.target.ownerDocument.documentElement.offsetHeight||N.exit(ie)}),B(h(N),"checkDocumentKeyDown",function(ie){N.props.escapeExits&&(ie.key==="Escape"||ie.key==="Esc"||ie.keyCode===27)&&N.exit(ie)}),B(h(N),"exit",function(ie){N.props.onExit&&N.props.onExit(ie)}),!J.titleText&&!J.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return N}return r(q,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var N=this.getApplicationNode();setTimeout(function(){N&&N.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&U.on()}},{key:"componentDidUpdate",value:function(N){N.scrollDisabled&&!this.props.scrollDisabled?U.off():!N.scrollDisabled&&this.props.scrollDisabled&&U.on(),this.props.escapeExits&&!N.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&N.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&U.off();var N=this.getApplicationNode();N&&N.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var N=this;setTimeout(function(){document.addEventListener("keydown",N.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var N=this;setTimeout(function(){document.removeEventListener("keydown",N.checkDocumentKeyDown)})}},{key:"render",value:function(){var N=this.props,ie={};if(N.includeDefaultStyles&&(ie={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},N.underlayColor&&(ie.background=N.underlayColor),N.underlayClickExits&&(ie.cursor="pointer")),N.underlayStyle)for(var he in N.underlayStyle)N.underlayStyle.hasOwnProperty(he)&&(ie[he]=N.underlayStyle[he]);var ce={className:N.underlayClass,style:ie};N.underlayClickExits&&(ce.onMouseDown=this.checkUnderlayClick);for(var we in this.props.underlayProps)ce[we]=this.props.underlayProps[we];var pe={};N.includeDefaultStyles&&(pe={display:"inline-block",height:"100%",verticalAlign:"middle"});var Ce={key:"a",style:pe},Pe={};if(N.includeDefaultStyles&&(Pe={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:N.focusDialog?0:null},N.verticallyCenter&&(Pe.verticalAlign="middle",Pe.top=0)),N.dialogStyle)for(var de in N.dialogStyle)N.dialogStyle.hasOwnProperty(de)&&(Pe[de]=N.dialogStyle[de]);var rt={key:"b",ref:(function(Te){this.dialogNode=Te}).bind(this),role:N.alert?"alertdialog":"dialog",id:N.dialogId,className:N.dialogClass,style:Pe};N.titleId?rt["aria-labelledby"]=N.titleId:N.titleText&&(rt["aria-label"]=N.titleText),N.focusDialog&&(rt.tabIndex="-1");for(var ze in N)/^(data-|aria-)/.test(ze)&&(rt[ze]=N[ze]);var Qe=[S.createElement("div",rt,N.children)];N.verticallyCenter&&Qe.unshift(S.createElement("div",Ce));var ut=N.focusTrapOptions||{};return(N.focusDialog||N.initialFocus)&&(ut.initialFocus=N.focusDialog?"#".concat(this.props.dialogId):N.initialFocus),ut.escapeDeactivates=N.escapeExits,S.createElement(k,{focusTrapOptions:ut,paused:N.focusTrapPaused},S.createElement("div",ce,Qe))}}]),q}(S.Component);B(z,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function Y(ne,X){if(!window.document)return function(){return null};X=X||{};var q=function(J){i(ie,J);var N=a(ie);function ie(){var he;e(this,ie);for(var ce=arguments.length,we=new Array(ce),pe=0;pe<ce;pe++)we[pe]=arguments[pe];return he=N.call.apply(N,[this].concat(we)),B(h(he),"container",null),he}return r(ie,[{key:"componentDidMount",value:function(){X.renderTo?this.container=typeof X.renderTo=="string"?document.querySelector(X.renderTo):X.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){X.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:I.createPortal(S.createElement(ne,this.props,this.props.children),this.container)}}]),ie}(S.Component);return B(q,"defaultProps",{mounted:!0}),q}var Q=Y(z);return Q.renderTo=function(ne){return Y(z,{renderTo:ne})},f5=Q,f5}var Foe=Loe();const Uoe=Ka(Foe);function gA(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return gA=function(){return a},a}gA();class Bj extends Xn.Component{constructor(){super(...arguments);In(this,"onClose",(gA().s[1]++,()=>{gA().f[0]++,gA().s[2]++,document.activeElement?(gA().b[0][0]++,gA().s[3]++,document.activeElement.blur()):gA().b[0][1]++,gA().s[4]++,setTimeout(()=>{gA().f[1]++,gA().s[5]++,this.props.onOpenToggle(!1)},0)}))}render(){gA().f[2]++;const t=(gA().s[6]++,this.props.t);return gA().s[7]++,this.props.isOpen?(gA().b[1][0]++,gA().s[8]++,ae.jsx(Uoe,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:ae.jsxs("div",{className:tm("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[ae.jsxs("header",{className:"maputnik-modal-header",children:[ae.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),ae.jsx("span",{className:"maputnik-modal-header-space"}),ae.jsx("button",{className:"maputnik-modal-header-toggle",title:t("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:ae.jsx(LV,{})})]}),ae.jsx("div",{className:"maputnik-modal-scroller",children:ae.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(gA().b[1][1]++,gA().s[9]++,!1)}}In(Bj,"defaultProps",(gA().s[0]++,{underlayClickExits:!0}));const L0=(gA().s[10]++,$s()(Bj)),zoe=8,joe={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"styleeditor:slimmode":!0,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{String:"one",Number:2,Boolean:!1}}},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},centerAltitude:{type:"number",doc:"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:123.4,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2980",ios:"https://github.com/maplibre/maplibre-native/issues/2980"}}},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},roll:{type:"number",default:0,units:"degrees",doc:"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:45,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2941",ios:"https://github.com/maplibre/maplibre-native/issues/2941"}}},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sky:{type:"sky",doc:"The map's sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.",example:{"sky-color":"#199EF3","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#0000ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},projection:{type:"projection",doc:"The projection configuration",example:{type:["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},terrain:{type:"terrain",doc:"The terrain configuration.",example:{source:"raster-dem-source",exaggeration:.5}},sources:{required:!0,type:"sources",doc:"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn't enough to make data appear on the map because sources don't contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\n\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).",example:{"maplibre-demotiles":{type:"vector",url:"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{type:"vector",url:"http://api.example.com/tilejson.json"},"maplibre-streets":{type:"vector",tiles:["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],maxzoom:14},"wms-imagery":{type:"raster",tiles:["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],tileSize:256}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:`A URL template for loading signed-distance-field glyph sets in PBF format. 

The URL must include:

 - \`{fontstack}\` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the text-font property of a symbol layer. 

 - \`{range}\` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.

This property is required if any layer uses the \`text-field\` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).`,example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"A style's `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`.\n\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.",example:[{id:"coastline",source:"maplibre","source-layer":"countries",type:"line",paint:{"line-color":"#198EC8"}}]}},Noe={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},Goe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Woe={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Qoe={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},qoe={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Yoe={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},$oe={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Voe={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Hoe={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},Zoe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Xoe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Joe={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},ese={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},tse={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},nse={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},rse=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Font stack to use for displaying text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),ise={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},ose={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},sse={type:"array",value:"*",doc:"A filter selects specific features from a layer."},ase={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},lse={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},use={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},Ase={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},cse=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string","value","expression"],"result":"value"},"value":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["var","density"]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["JSON object or array"],"result":"array | object"},"value":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.","example":{"syntax":{"method":["value","string?","number?"],"result":"array"},"value":["array",["literal",["a","b","c"]],"string",3]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","example":{"syntax":{"method":["number","value"],"result":"value"},"value":["at",1,["literal",["a","b","c"]]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure/)","example":{"syntax":{"method":["value","value"],"result":"boolean"},"value":["in","$type","Point"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","value","number?"],"result":"number"},"value":["index-of","foo",["baz","bar","hello","foo","world"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","number","number?"],"result":"value"},"value":["slice",["get","name"],0,3]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["case",["boolean",["feature-state","hover"],false],1,0.5]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["coalesce","value","fallback"],"result":"value"},"value":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["step","number","number","number","..."],"result":"number"},"value":["step",["get","point_count"],20,100,30,750,40]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"number | array<number> | color"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns mathematical constant ln(2).","example":{"syntax":{"method":[],"result":"number"},"value":["ln2"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","example":{"syntax":{"method":[],"result":"number"},"value":["pi"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","example":{"syntax":{"method":[],"result":"number"},"value":["e"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","example":{"syntax":{"method":["value"],"result":"string"},"value":["typeof",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"string"},"value":["string",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["number",["get","population"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"boolean"},"value":["boolean",["feature-state","hover"],false]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"object"},"value":["object",["get","some-property"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","example":{"syntax":{"method":["collator","{ \\"case-sensitive\\": boolean, \\"diacritic-sensitive\\": boolean, \\"locale\\": string }"],"result":"collator"},"value":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["value","{ \\"text-font\\": string, \\"text-color\\": color, \\"font-scale\\": number, \\"vertical-align\\": \\"bottom\\" | \\"center\\" | \\"top\\" }","..."],"result":"formatted"},"value":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/5043","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["value"],"result":"image"},"value":["image","marker_15"]},"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["number","{ \\"locale\\": string, \\"currency\\": string, \\"min-fraction-digits\\": number, \\"max-fraction-digits\\": number }"],"result":"string"},"value":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)","example":{"syntax":{"method":["value"],"result":"string"},"value":["to-string",["get","mag"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["to-number","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","example":{"syntax":{"method":["value"],"result":"boolean"},"value":["to-boolean","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","example":{"syntax":{"method":["color"],"result":"array"},"value":["to-rgba","#ff0000"]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"color"},"value":["to-color","#edf8e9"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number"],"result":"color"},"value":["rgb",255,0,0]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number","number"],"result":"color"},"value":["rgba",255,0,0,1]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/3d-extrusion-floorplan/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["get","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of an property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["has","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["array"],"result":"number"},"value":["length",["get","myArray"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","example":{"syntax":{"method":[],"result":"value"},"value":["properties"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["feature-state","hover"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","example":{"syntax":{"method":[],"result":"string"},"value":["==",["geometry-type"],"Polygon"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","example":{"syntax":{"method":[],"result":"value"},"value":["id"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","example":{"syntax":{"method":[],"result":"number"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","example":{"syntax":{"method":[],"result":"number"},"value":["heatmap-density"]},"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","example":{"syntax":{"method":["number"],"result":"number"},"value":["line-progress",0.5]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","example":{"syntax":{"method":["string"],"result":"value"},"value":["accumulated","sum"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["+",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["*",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","example":{"syntax":{"method":["number","number?"],"result":"number"},"value":["-",10]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["/",["get","population"],["get","sq-km"]]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["%",10,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["^",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sqrt",9]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log10",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ln",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log2",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["cos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["tan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["asin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["acos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["atan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["min",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["max",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","example":{"syntax":{"method":["number"],"result":"number"},"value":["round",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["abs",-1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ceil",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["floor",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"number"},"value":["distance",{"type":"Point","coordinates":[0,0]}]},"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/3d-buildings/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-markers/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["==","$type","Polygon"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!=","cluster",true]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["all",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["any",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!",["has","point_count"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"boolean"},"value":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}]},"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["is-supported-script","दिल्ली"]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["upcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["downcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-image-missing-generated/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","example":{"syntax":{"method":["string","string","..."],"result":"string"},"value":["concat","square-rgb-",["get","color"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","example":{"syntax":{"method":["collator"],"result":"string"},"value":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),hse={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},dse={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},fse={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},pse={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},mse=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],gse={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},yse={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"https://github.com/maplibre/maplibre-gl-js/issues/1235",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},vse={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},_se={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Cse={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},bse={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},xse={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wse={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Mse={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},Sse={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},es={$version:zoe,$root:joe,sources:Noe,source:Goe,source_vector:Woe,source_raster:Qoe,source_raster_dem:qoe,source_geojson:Yoe,source_video:$oe,source_image:Voe,layer:Hoe,layout:Zoe,layout_background:Xoe,layout_fill:Joe,layout_circle:ese,layout_heatmap:tse,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:nse,layout_symbol:rse,layout_raster:ise,layout_hillshade:ose,filter:sse,filter_operator:ase,geometry_type:lse,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:use,expression:Ase,expression_name:cse,light:hse,sky:dse,terrain:fse,projection:pse,paint:mse,paint_fill:gse,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:yse,paint_circle:vse,paint_heatmap:_se,paint_symbol:Cse,paint_raster:bse,paint_hillshade:xse,paint_background:wse,transition:Mse,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:Sse};function Fs(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="3158bd93bbefd1bd0e63d26617da070781685c25",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:17}},1:{start:{line:7,column:4},end:{line:9,column:6}},2:{start:{line:11,column:16},end:{line:19,column:3}},3:{start:{line:12,column:4},end:{line:18,column:7}},4:{start:{line:15,column:6},end:{line:17,column:7}},5:{start:{line:16,column:8},end:{line:16,column:48}},6:{start:{line:21,column:33},end:{line:21,column:43}},7:{start:{line:22,column:20},end:{line:22,column:35}},8:{start:{line:23,column:4},end:{line:42,column:5}},9:{start:{line:24,column:6},end:{line:37,column:14}},10:{start:{line:32,column:27},end:{line:32,column:61}},11:{start:{line:38,column:11},end:{line:42,column:5}},12:{start:{line:39,column:6},end:{line:39,column:174}},13:{start:{line:41,column:22},end:{line:41,column:37}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:21},end:{line:10,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:16},end:{line:11,column:17}},loc:{start:{line:11,column:26},end:{line:19,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:7},end:{line:14,column:8}},loc:{start:{line:14,column:13},end:{line:18,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:43,column:3}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:27},end:{line:32,column:61}},line:32}},branchMap:{0:{loc:{start:{line:15,column:6},end:{line:17,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:17,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:22,column:20},end:{line:22,column:35}},type:"binary-expr",locations:[{start:{line:22,column:20},end:{line:22,column:29}},{start:{line:22,column:33},end:{line:22,column:35}}],line:22},2:{loc:{start:{line:23,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:42,column:5}},{start:{line:38,column:11},end:{line:42,column:5}}],line:23},3:{loc:{start:{line:30,column:26},end:{line:30,column:106}},type:"cond-expr",locations:[{start:{line:30,column:44},end:{line:30,column:74}},{start:{line:30,column:77},end:{line:30,column:106}}],line:30},4:{loc:{start:{line:31,column:67},end:{line:31,column:102}},type:"cond-expr",locations:[{start:{line:31,column:85},end:{line:31,column:91}},{start:{line:31,column:94},end:{line:31,column:102}}],line:31},5:{loc:{start:{line:34,column:22},end:{line:34,column:120}},type:"cond-expr",locations:[{start:{line:34,column:56},end:{line:34,column:79}},{start:{line:34,column:98},end:{line:34,column:120}}],line:34},6:{loc:{start:{line:38,column:11},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:42,column:5}},{start:{line:40,column:11},end:{line:42,column:5}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AAuCQ,SASuB,KATvB;AAvCR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAc5C,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,IACR;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC/B,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,MAAM,aAAa;AAC1B,aAAK,MAAM,YAAY,KAAK,MAAM,IAAI;AAAA,MACxC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,UAAM,EAAC,IAAG,IAAI,aAAa,CAAC;AAE5B,QAAI,KAAK;AACP,aAAO,oBAAC,WAAM,WAAU,wBACtB,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,QACA;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,KAAK,MAAM,OAAO,iCAAiC;AAAA,YAC/D,WAAW,4CAA4C,KAAK,MAAM,OAAO,SAAS,QAAQ;AAAA,YAC1F,SAAS,MAAM,KAAK,YAAY,CAAC,KAAK,MAAM,IAAI;AAAA,YAChD,eAAa,sBAAoB;AAAA,YAEhC,eAAK,MAAM,OAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,QACzD;AAAA,SACF,GACF;AAAA,IACF,WACS,OAAO;AACd,aAAO,oBAAC,WAAM,WAAU,wBACtB,8BAAC,SAAI,WAAU,uBACZ,iBACH,GACF;AAAA,IACF,OACK;AACH,0BAAC,SAAI;AAAA,IACP;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3158bd93bbefd1bd0e63d26617da070781685c25"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Fs=function(){return a},a}Fs();class eI extends Xn.Component{constructor(t){Fs().f[0]++,Fs().s[0]++;super(t);In(this,"onToggleDoc",(Fs().s[2]++,t=>{Fs().f[1]++,Fs().s[3]++,this.setState({open:t},()=>{Fs().f[2]++,Fs().s[4]++,this.props.onToggleDoc?(Fs().b[0][0]++,Fs().s[5]++,this.props.onToggleDoc(this.state.open)):Fs().b[0][1]++})}));Fs().s[1]++,this.state={open:!1}}render(){Fs().f[3]++;const{label:t,fieldSpec:r}=(Fs().s[6]++,this.props),{doc:i}=(Fs().s[7]++,Fs().b[1][0]++,r||(Fs().b[1][1]++,{}));if(Fs().s[8]++,i)return Fs().b[2][0]++,Fs().s[9]++,ae.jsx("label",{className:"maputnik-doc-wrapper",children:ae.jsxs("div",{className:"maputnik-doc-target",children:[t," ",ae.jsx("button",{"aria-label":this.state.open?(Fs().b[3][0]++,"close property documentation"):(Fs().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${this.state.open?(Fs().b[4][0]++,"open"):(Fs().b[4][1]++,"closed")}`,onClick:()=>(Fs().f[4]++,Fs().s[10]++,this.onToggleDoc(!this.state.open)),"data-wd-key":"field-doc-button-"+t,children:this.state.open?(Fs().b[5][0]++,ae.jsx(bV,{})):(Fs().b[5][1]++,ae.jsx(xV,{}))})]})});if(Fs().b[2][1]++,Fs().s[11]++,t)return Fs().b[6][0]++,Fs().s[12]++,ae.jsx("label",{className:"maputnik-doc-wrapper",children:ae.jsx("div",{className:"maputnik-doc-target",children:t})});Fs().b[6][1]++,Fs().s[13]++}}function ua(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return ua=function(){return a},a}ua();const MT=(ua().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class tI extends Xn.Component{render(){ua().f[0]++;const{fieldSpec:e}=(ua().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:o}=(ua().s[2]++,e),a=(ua().s[3]++,e["sdk-support"]),s=(ua().s[4]++,ua().b[0][0]++,!!r&&(ua().b[0][1]++,!Array.isArray(r)));return ua().s[5]++,ae.jsxs(ae.Fragment,{children:[(ua().b[1][0]++,t&&(ua().b[1][1]++,ae.jsxs("div",{className:"SpecDoc",children:[ae.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(ua().b[2][0]++,s&&(ua().b[2][1]++,ae.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([h,g])=>(ua().f[1]++,ua().s[6]++,ae.jsxs("li",{children:[ae.jsx("code",{children:JSON.stringify(h)}),ae.jsx("div",{children:g.doc})]},h)))})))]}))),(ua().b[3][0]++,a&&(ua().b[3][1]++,ae.jsx("div",{className:"SpecDoc__sdk-support",children:ae.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[ae.jsx("thead",{children:ae.jsxs("tr",{children:[ae.jsx("th",{}),Object.values(MT).map(h=>(ua().f[2]++,ua().s[7]++,ae.jsx("th",{children:h},h)))]})}),ae.jsx("tbody",{children:Object.entries(a).map(([h,g])=>(ua().f[3]++,ua().s[8]++,ae.jsxs("tr",{children:[ae.jsx("td",{children:h}),Object.keys(MT).map(b=>(ua().f[4]++,ua().s[9]++,Object.prototype.hasOwnProperty.call(g,b)?(ua().b[4][0]++,ua().s[10]++,ae.jsx("td",{children:g[b]},b)):(ua().b[4][1]++,ua().s[11]++,ae.jsx("td",{children:"no"},b))))]},h)))})]})}))),(ua().b[5][0]++,i&&(ua().b[5][1]++,o)&&(ua().b[5][2]++,ae.jsx("div",{className:"SpecDoc__learn-more",children:ae.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:o})})))]})}}function Do(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Do=function(){return a},a}Do();class ga extends Xn.Component{constructor(t){Do().f[0]++,Do().s[1]++;super(t);In(this,"_blockEl",(Do().s[0]++,null));In(this,"onToggleDoc",(Do().s[6]++,t=>{Do().f[2]++,Do().s[7]++,this.setState({showDoc:t})}));In(this,"onLabelClick",(Do().s[8]++,t=>{var o;Do().f[3]++;const r=(Do().s[9]++,t.nativeEvent.target),i=(Do().s[10]++,(o=this._blockEl)==null?void 0:o.contains(r));Do().s[11]++,Do().b[3][0]++,t.nativeEvent.target.nodeName!=="INPUT"&&(Do().b[3][1]++,!i)?(Do().b[2][0]++,Do().s[12]++,t.stopPropagation()):Do().b[2][1]++,Do().s[13]++,t.nativeEvent.target.nodeName!=="A"?(Do().b[4][0]++,Do().s[14]++,t.preventDefault()):Do().b[4][1]++}));Do().s[2]++,this.state={showDoc:!1}}onChange(t){Do().f[1]++;const r=(Do().s[3]++,t.target.value);if(Do().s[4]++,this.props.onChange)return Do().b[0][0]++,Do().s[5]++,this.props.onChange(r===""?(Do().b[1][0]++,void 0):(Do().b[1][1]++,r));Do().b[0][1]++}render(){return Do().f[4]++,Do().s[15]++,ae.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:tm({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Do().b[5][0]++,this.props.fieldSpec&&(Do().b[5][1]++,ae.jsx("div",{className:"maputnik-input-block-label",children:ae.jsx(eI,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Do().b[6][0]++,!this.props.fieldSpec&&(Do().b[6][1]++,ae.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ae.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ae.jsx("div",{className:"maputnik-input-block-content",ref:t=>(Do().f[5]++,Do().s[16]++,this._blockEl=t),children:this.props.children}),(Do().b[7][0]++,this.props.fieldSpec&&(Do().b[7][1]++,ae.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Do().b[8][0]++,""):(Do().b[8][1]++,"none")},children:ae.jsx(tI,{fieldSpec:this.props.fieldSpec})})))]})}}function Tc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Tc=function(){return a},a}Tc();class jg extends Xn.Component{render(){Tc().f[0]++;let e=(Tc().s[0]++,this.props.options);return Tc().s[1]++,Tc().b[1][0]++,e.length>0&&(Tc().b[1][1]++,!Array.isArray(e[0]))?(Tc().b[0][0]++,Tc().s[2]++,e=e.map(t=>(Tc().f[1]++,Tc().s[3]++,[t,t]))):Tc().b[0][1]++,Tc().s[4]++,ae.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Tc().f[2]++,Tc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Tc().f[3]++,Tc().s[6]++,ae.jsx("option",{value:t,children:r},t)))})}}function Ki(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Ki=function(){return a},a}Ki();class kf extends Xn.Component{constructor(e){Ki().f[1]++,Ki().s[1]++,super(e),Ki().s[2]++,this.state={editing:!1,value:(Ki().b[0][0]++,e.value||(Ki().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Ki().f[2]++,Ki().s[3]++,t.editing)Ki().b[1][1]++;else return Ki().b[1][0]++,Ki().s[4]++,{value:e.value};return Ki().s[5]++,{}}render(){Ki().f[3]++;let e,t;return Ki().s[6]++,this.props.multi?(Ki().b[2][0]++,Ki().s[7]++,e="textarea",Ki().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Ki().b[2][1]++,Ki().s[9]++,e="input",Ki().s[10]++,t=["maputnik-string"]),Ki().s[11]++,this.props.disabled?(Ki().b[3][0]++,Ki().s[12]++,t.push("maputnik-string--disabled")):Ki().b[3][1]++,Ki().s[13]++,Xn.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Ki().b[4][0]++,this.props.spellCheck):(Ki().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Ki().b[5][0]++,""):(Ki().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Ki().f[4]++,Ki().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Ki().f[5]++,Ki().s[15]++,this.props.onInput?(Ki().b[6][0]++,Ki().s[16]++,this.props.onInput(this.state.value)):Ki().b[6][1]++})},onBlur:()=>{Ki().f[6]++,Ki().s[17]++,this.state.value!==this.props.value?(Ki().b[7][0]++,Ki().s[18]++,this.setState({editing:!1}),Ki().s[19]++,this.props.onChange?(Ki().b[8][0]++,Ki().s[20]++,this.props.onChange(this.state.value)):Ki().b[8][1]++):Ki().b[7][1]++},onKeyDown:r=>{Ki().f[7]++,Ki().s[21]++,Ki().b[10][0]++,r.keyCode===13&&(Ki().b[10][1]++,this.props.onChange)?(Ki().b[9][0]++,Ki().s[22]++,this.props.onChange(this.state.value)):Ki().b[9][1]++},required:this.props.required})}}In(kf,"defaultProps",(Ki().s[0]++,{onInput:()=>{Ki().f[0]++}}));function np(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="7881723dfc9d5af5c18468677e4f429a5a061179",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:9,column:24},end:{line:11,column:3}},1:{start:{line:13,column:14},end:{line:13,column:26}},2:{start:{line:14,column:4},end:{line:50,column:6}},3:{start:{line:53,column:18},end:{line:53,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:11},end:{line:51,column:3}},line:12}},branchMap:{0:{loc:{start:{line:22,column:10},end:{line:28,column:11}},type:"binary-expr",locations:[{start:{line:22,column:10},end:{line:22,column:29}},{start:{line:22,column:49},end:{line:28,column:11}}],line:22},1:{loc:{start:{line:29,column:10},end:{line:47,column:11}},type:"binary-expr",locations:[{start:{line:29,column:10},end:{line:29,column:30}},{start:{line:29,column:50},end:{line:47,column:11}}],line:29}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AAuBW,SAKH,KALG;AAvBX,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAUjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,eAAe;AAAA,IACpB,UAAU;AAAA,EACZ;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,MAAM;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QACtD,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAEjB;AAAA,eAAK,MAAM,YACV;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU;AAAA;AAAA,UACZ;AAAA,UAED,CAAC,KAAK,MAAM,YACX;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,gBACP,CAAC,cAAc,YAAY;AAAA,gBAC3B,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,kBAAkB,gBAAgB;AAAA,gBACnC,CAAC,aAAa,WAAW;AAAA,gBACzB,CAAC,WAAW,SAAS;AAAA,cACvB;AAAA,cACA,UAAU,KAAK,MAAM;AAAA,cACrB,OAAO,KAAK,MAAM;AAAA,cAClB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,UAClC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7881723dfc9d5af5c18468677e4f429a5a061179"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return np=function(){return a},a}np();class Oj extends Xn.Component{render(){np().f[0]++;const e=(np().s[1]++,this.props.t);return np().s[2]++,ae.jsxs(ga,{label:e("Type"),fieldSpec:es.layer.type,"data-wd-key":this.props.wdKey,error:this.props.error,children:[(np().b[0][0]++,this.props.disabled&&(np().b[0][1]++,ae.jsx(kf,{value:this.props.value,disabled:!0}))),(np().b[1][0]++,!this.props.disabled&&(np().b[1][1]++,ae.jsx(jg,{options:[["background","Background"],["fill","Fill"],["line","Line"],["symbol","Symbol"],["raster","Raster"],["circle","Circle"],["fill-extrusion","Fill Extrusion"],["hillshade","Hillshade"],["heatmap","Heatmap"]],onChange:this.props.onChange,value:this.props.value,"data-wd-key":this.props.wdKey+".select"})))]})}}In(Oj,"defaultProps",(np().s[0]++,{disabled:!1}));const Ij=(np().s[3]++,$s()(Oj));function R2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="f6ac2bd12dbef0198dd96da668f75e4659321d69",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:24,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:25,column:3}},line:7}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,qBAAqB,gBAAgB,MAAM,UAAwB;AAAA,EACjE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAM;AAAA,QAAK,WAAW,OAAO,MAAM;AAAA,QAE/C,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,SAAS,KAAK,MAAM;AAAA,YACpB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,QAClC;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f6ac2bd12dbef0198dd96da668f75e4659321d69"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return R2=function(){return a},a}R2();class kj extends Xn.Component{render(){return R2().f[0]++,R2().s[0]++,ae.jsx(ga,{label:"ID",fieldSpec:es.layer.id,"data-wd-key":this.props.wdKey,error:this.props.error,children:ae.jsx(kf,{value:this.props.value,onInput:this.props.onChange,"data-wd-key":this.props.wdKey+".input"})})}}var p5={exports:{}},ST;function Ese(){if(ST)return p5.exports;ST=1;var n=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function e(ze){var Qe,ut,Te,Ue=ze.ownerDocument,st=Ue.body,wt=Ue&&Ue.documentElement;return Qe=ze.getBoundingClientRect(),ut=Qe.left,Te=Qe.top,ut-=wt.clientLeft||st.clientLeft||0,Te-=wt.clientTop||st.clientTop||0,{left:ut,top:Te}}function t(ze,Qe){var ut=ze["page"+(Qe?"Y":"X")+"Offset"],Te="scroll"+(Qe?"Top":"Left");if(typeof ut!="number"){var Ue=ze.document;ut=Ue.documentElement[Te],typeof ut!="number"&&(ut=Ue.body[Te])}return ut}function r(ze){return t(ze)}function i(ze){return t(ze,!0)}function o(ze){var Qe=e(ze),ut=ze.ownerDocument,Te=ut.defaultView||ut.parentWindow;return Qe.left+=r(Te),Qe.top+=i(Te),Qe}function a(ze,Qe,ut){var Te="",Ue=ze.ownerDocument;return(ut=ut||Ue.defaultView.getComputedStyle(ze,null))&&(Te=ut.getPropertyValue(Qe)||ut[Qe]),Te}var s=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),h=/^(top|right|bottom|left)$/,g="currentStyle",b="runtimeStyle",B="left",S="px";function I(ze,Qe){var ut=ze[g]&&ze[g][Qe];if(s.test(ut)&&!h.test(Qe)){var Te=ze.style,Ue=Te[B],st=ze[b][B];ze[b][B]=ze[g][B],Te[B]=Qe==="fontSize"?"1em":ut||0,ut=Te.pixelLeft+S,Te[B]=Ue,ze[b][B]=st}return ut===""?"auto":ut}var k;typeof window<"u"&&(k=window.getComputedStyle?a:I);function U(ze,Qe){Pe(ze,"position")==="static"&&(ze.style.position="relative");var ut=o(ze),Te={},Ue,st;for(st in Qe)Ue=parseFloat(Pe(ze,st))||0,Te[st]=Ue+Qe[st]-ut[st];Pe(ze,Te)}function z(ze,Qe){for(var ut=0;ut<ze.length;ut++)Qe(ze[ut])}function Y(ze){return k(ze,"boxSizing")==="border-box"}var Q=["margin","border","padding"],ne=-1,X=2,q=1,J=0;function N(ze,Qe,ut){var Te={},Ue=ze.style,st;for(st in Qe)Te[st]=Ue[st],Ue[st]=Qe[st];ut.call(ze);for(st in Qe)Ue[st]=Te[st]}function ie(ze,Qe,ut){var Te=0,Ue,st,wt;for(st=0;st<Qe.length;st++)if(Ue=Qe[st],Ue)for(wt=0;wt<ut.length;wt++){var mt;Ue==="border"?mt=Ue+ut[wt]+"Width":mt=Ue+ut[wt],Te+=parseFloat(k(ze,mt))||0}return Te}function he(ze){return ze!=null&&ze==ze.window}var ce={};z(["Width","Height"],function(ze){ce["doc"+ze]=function(Qe){var ut=Qe.document;return Math.max(ut.documentElement["scroll"+ze],ut.body["scroll"+ze],ce["viewport"+ze](ut))},ce["viewport"+ze]=function(Qe){var ut="client"+ze,Te=Qe.document,Ue=Te.body,st=Te.documentElement,wt=st[ut];return Te.compatMode==="CSS1Compat"&&wt||Ue&&Ue[ut]||wt}});function we(ze,Qe,ut){if(he(ze))return Qe==="width"?ce.viewportWidth(ze):ce.viewportHeight(ze);if(ze.nodeType===9)return Qe==="width"?ce.docWidth(ze):ce.docHeight(ze);var Te=Qe==="width"?["Left","Right"]:["Top","Bottom"],Ue=Qe==="width"?ze.offsetWidth:ze.offsetHeight;k(ze);var st=Y(ze),wt=0;(Ue==null||Ue<=0)&&(Ue=void 0,wt=k(ze,Qe),(wt==null||Number(wt)<0)&&(wt=ze.style[Qe]||0),wt=parseFloat(wt)||0),ut===void 0&&(ut=st?q:ne);var mt=Ue!==void 0||st,ft=Ue||wt;return ut===ne?mt?ft-ie(ze,["border","padding"],Te):wt:mt?ft+(ut===q?0:ut===X?-ie(ze,["border"],Te):ie(ze,["margin"],Te)):wt+ie(ze,Q.slice(ut),Te)}var pe={position:"absolute",visibility:"hidden",display:"block"};function Ce(ze){var Qe,ut=arguments;return ze.offsetWidth!==0?Qe=we.apply(void 0,ut):N(ze,pe,function(){Qe=we.apply(void 0,ut)}),Qe}z(["width","height"],function(ze){var Qe=ze.charAt(0).toUpperCase()+ze.slice(1);ce["outer"+Qe]=function(Te,Ue){return Te&&Ce(Te,ze,Ue?J:q)};var ut=ze==="width"?["Left","Right"]:["Top","Bottom"];ce[ze]=function(Te,Ue){if(Ue!==void 0){if(Te){k(Te);var st=Y(Te);return st&&(Ue+=ie(Te,["padding","border"],ut)),Pe(Te,ze,Ue)}return}return Te&&Ce(Te,ze,ne)}});function Pe(ze,Qe,ut){if(typeof Qe=="object"){for(var Te in Qe)Pe(ze,Te,Qe[Te]);return}if(typeof ut<"u")typeof ut=="number"&&(ut=ut+"px"),ze.style[Qe]=ut;else return k(ze,Qe)}function de(ze,Qe){for(var ut in Qe)ze[ut]=Qe[ut];return ze}var rt=p5.exports={getWindow:function(ze){var Qe=ze.ownerDocument||ze;return Qe.defaultView||Qe.parentWindow},offset:function(ze,Qe){if(typeof Qe<"u")U(ze,Qe);else return o(ze)},isWindow:he,each:z,css:Pe,clone:function(ze){var Qe={};for(var ut in ze)Qe[ut]=ze[ut];var Te=ze.overflow;if(Te)for(ut in ze)Qe.overflow[ut]=ze.overflow[ut];return Qe},mix:de,scrollLeft:function(ze,Qe){if(he(ze)){if(Qe===void 0)return r(ze);window.scrollTo(Qe,i(ze))}else{if(Qe===void 0)return ze.scrollLeft;ze.scrollLeft=Qe}},scrollTop:function(ze,Qe){if(he(ze)){if(Qe===void 0)return i(ze);window.scrollTo(r(ze),Qe)}else{if(Qe===void 0)return ze.scrollTop;ze.scrollTop=Qe}},merge:function(){for(var ze={},Qe=0;Qe<arguments.length;Qe++)rt.mix(ze,arguments[Qe]);return ze},viewportWidth:0,viewportHeight:0};return de(rt,ce),p5.exports}var m5,ET;function Bse(){if(ET)return m5;ET=1;var n=Ese();function e(t,r,i){i=i||{},r.nodeType===9&&(r=n.getWindow(r));var o=i.allowHorizontalScroll,a=i.onlyScrollIfNeeded,s=i.alignWithTop,h=i.alignWithLeft;o=o===void 0?!0:o;var g=n.isWindow(r),b=n.offset(t),B=n.outerHeight(t),S=n.outerWidth(t),I,k,U,z,Y,Q,ne,X,q,J;g?(ne=r,J=n.height(ne),q=n.width(ne),X={left:n.scrollLeft(ne),top:n.scrollTop(ne)},Y={left:b.left-X.left,top:b.top-X.top},Q={left:b.left+S-(X.left+q),top:b.top+B-(X.top+J)},z=X):(I=n.offset(r),k=r.clientHeight,U=r.clientWidth,z={left:r.scrollLeft,top:r.scrollTop},Y={left:b.left-(I.left+(parseFloat(n.css(r,"borderLeftWidth"))||0)),top:b.top-(I.top+(parseFloat(n.css(r,"borderTopWidth"))||0))},Q={left:b.left+S-(I.left+U+(parseFloat(n.css(r,"borderRightWidth"))||0)),top:b.top+B-(I.top+k+(parseFloat(n.css(r,"borderBottomWidth"))||0))}),Y.top<0||Q.top>0?s===!0?n.scrollTop(r,z.top+Y.top):s===!1?n.scrollTop(r,z.top+Q.top):Y.top<0?n.scrollTop(r,z.top+Y.top):n.scrollTop(r,z.top+Q.top):a||(s=s===void 0?!0:!!s,s?n.scrollTop(r,z.top+Y.top):n.scrollTop(r,z.top+Q.top)),o&&(Y.left<0||Q.left>0?h===!0?n.scrollLeft(r,z.left+Y.left):h===!1?n.scrollLeft(r,z.left+Q.left):Y.left<0?n.scrollLeft(r,z.left+Y.left):n.scrollLeft(r,z.left+Q.left):a||(h=h===void 0?!0:!!h,h?n.scrollLeft(r,z.left+Y.left):n.scrollLeft(r,z.left+Q.left)))}return m5=e,m5}var g5,BT;function Ose(){return BT||(BT=1,g5=Bse()),g5}var y5,OT;function Ise(){if(OT)return y5;OT=1;var n=Object.assign||function(I){for(var k=1;k<arguments.length;k++){var U=arguments[k];for(var z in U)Object.prototype.hasOwnProperty.call(U,z)&&(I[z]=U[z])}return I},e=function(){function I(k,U){for(var z=0;z<U.length;z++){var Y=U[z];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(k,Y.key,Y)}}return function(k,U,z){return U&&I(k.prototype,U),z&&I(k,z),k}}();function t(I,k){if(!(I instanceof k))throw new TypeError("Cannot call a class as a function")}function r(I,k){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:I}function i(I,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);I.prototype=Object.create(k&&k.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(I,k):I.__proto__=k)}var o=Da(),a=hp(),s=O_(),h=s.findDOMNode,g=Ose(),b=["blur","checkValidity","click","focus","select","setCustomValidity","setSelectionRange","setRangeText"];function B(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}var S=function(I){i(k,I);function k(U){t(this,k);var z=r(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,U));return z.state={isOpen:!1,highlightedIndex:null},z._debugStates=[],z.ensureHighlightedIndex=z.ensureHighlightedIndex.bind(z),z.exposeAPI=z.exposeAPI.bind(z),z.handleInputFocus=z.handleInputFocus.bind(z),z.handleInputBlur=z.handleInputBlur.bind(z),z.handleChange=z.handleChange.bind(z),z.handleKeyDown=z.handleKeyDown.bind(z),z.handleInputClick=z.handleInputClick.bind(z),z.maybeAutoCompleteText=z.maybeAutoCompleteText.bind(z),z}return e(k,[{key:"componentWillMount",value:function(){this.refs={},this._ignoreBlur=!1,this._ignoreFocus=!1,this._scrollOffset=null,this._scrollTimer=null}},{key:"componentWillUnmount",value:function(){clearTimeout(this._scrollTimer),this._scrollTimer=null}},{key:"componentWillReceiveProps",value:function(z){this.state.highlightedIndex!==null&&this.setState(this.ensureHighlightedIndex),z.autoHighlight&&(this.props.value!==z.value||this.state.highlightedIndex===null)&&this.setState(this.maybeAutoCompleteText)}},{key:"componentDidMount",value:function(){this.isOpen()&&this.setMenuPositions()}},{key:"componentDidUpdate",value:function(z,Y){(this.state.isOpen&&!Y.isOpen||"open"in this.props&&this.props.open&&!z.open)&&this.setMenuPositions(),this.maybeScrollItemIntoView(),Y.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen)}},{key:"exposeAPI",value:function(z){var Y=this;this.refs.input=z,b.forEach(function(Q){return Y[Q]=z&&z[Q]&&z[Q].bind(z)})}},{key:"maybeScrollItemIntoView",value:function(){if(this.isOpen()&&this.state.highlightedIndex!==null){var z=this.refs["item-"+this.state.highlightedIndex],Y=this.refs.menu;g(h(z),h(Y),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(z){k.keyDownHandlers[z.key]?k.keyDownHandlers[z.key].call(this,z):this.isOpen()||this.setState({isOpen:!0})}},{key:"handleChange",value:function(z){this.props.onChange(z,z.target.value)}},{key:"getFilteredItems",value:function(z){var Y=z.items;return z.shouldItemRender&&(Y=Y.filter(function(Q){return z.shouldItemRender(Q,z.value)})),z.sortItems&&Y.sort(function(Q,ne){return z.sortItems(Q,ne,z.value)}),Y}},{key:"maybeAutoCompleteText",value:function(z,Y){for(var Q=z.highlightedIndex,ne=Y.value,X=Y.getItemValue,q=Q===null?0:Q,J=this.getFilteredItems(Y),N=0;N<J.length&&!Y.isItemSelectable(J[q]);N++)q=(q+1)%J.length;var ie=J[q]&&Y.isItemSelectable(J[q])?J[q]:null;if(ne!==""&&ie){var he=X(ie),ce=he.toLowerCase().indexOf(ne.toLowerCase())===0;if(ce)return{highlightedIndex:q}}return{highlightedIndex:null}}},{key:"ensureHighlightedIndex",value:function(z,Y){if(z.highlightedIndex>=this.getFilteredItems(Y).length)return{highlightedIndex:null}}},{key:"setMenuPositions",value:function(){var z=this.refs.input,Y=z.getBoundingClientRect(),Q=window.window.getComputedStyle(z),ne=parseInt(Q.marginBottom,10)||0,X=parseInt(Q.marginLeft,10)||0,q=parseInt(Q.marginRight,10)||0;this.setState({menuTop:Y.bottom+ne,menuLeft:Y.left+X,menuWidth:Y.width+X+q})}},{key:"highlightItemFromMouse",value:function(z){this.setState({highlightedIndex:z})}},{key:"selectItemFromMouse",value:function(z){var Y=this,Q=this.props.getItemValue(z);this.setIgnoreBlur(!1),this.setState({isOpen:!1,highlightedIndex:null},function(){Y.props.onSelect(Q,z)})}},{key:"setIgnoreBlur",value:function(z){this._ignoreBlur=z}},{key:"renderMenu",value:function(){var z=this,Y=this.getFilteredItems(this.props).map(function(X,q){var J=z.props.renderItem(X,z.state.highlightedIndex===q,{cursor:"default"});return o.cloneElement(J,{onMouseEnter:z.props.isItemSelectable(X)?function(){return z.highlightItemFromMouse(q)}:null,onClick:z.props.isItemSelectable(X)?function(){return z.selectItemFromMouse(X)}:null,ref:function(ie){return z.refs["item-"+q]=ie}})}),Q={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth},ne=this.props.renderMenu(Y,this.props.value,Q);return o.cloneElement(ne,{ref:function(q){return z.refs.menu=q},onTouchStart:function(){return z.setIgnoreBlur(!0)},onMouseEnter:function(){return z.setIgnoreBlur(!0)},onMouseLeave:function(){return z.setIgnoreBlur(!1)}})}},{key:"handleInputBlur",value:function(z){var Y=this;if(this._ignoreBlur){this._ignoreFocus=!0,this._scrollOffset=B(),this.refs.input.focus();return}var Q=void 0,ne=this.state.highlightedIndex;if(this.props.selectOnBlur&&ne!==null){var X=this.getFilteredItems(this.props),q=X[ne],J=this.props.getItemValue(q);Q=function(){return Y.props.onSelect(J,q)}}this.setState({isOpen:!1,highlightedIndex:null},Q);var N=this.props.inputProps.onBlur;N&&N(z)}},{key:"handleInputFocus",value:function(z){var Y=this;if(this._ignoreFocus){this._ignoreFocus=!1;var Q=this._scrollOffset,ne=Q.x,X=Q.y;this._scrollOffset=null,window.scrollTo(ne,X),clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(function(){Y._scrollTimer=null,window.scrollTo(ne,X)},0);return}this.setState({isOpen:!0});var q=this.props.inputProps.onFocus;q&&q(z)}},{key:"isInputFocused",value:function(){var z=this.refs.input;return z.ownerDocument&&z===z.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!this.isOpen()&&this.setState({isOpen:!0})}},{key:"composeEventHandlers",value:function(z,Y){return Y?function(Q){z(Q),Y(Q)}:z}},{key:"isOpen",value:function(){return"open"in this.props?this.props.open:this.state.isOpen}},{key:"render",value:function(){this.props.debug&&this._debugStates.push({id:this._debugStates.length,state:this.state});var z=this.props.inputProps,Y=this.isOpen();return o.createElement("div",n({style:n({},this.props.wrapperStyle)},this.props.wrapperProps),this.props.renderInput(n({},z,{role:"combobox","aria-autocomplete":"list","aria-expanded":Y,autoComplete:"off",ref:this.exposeAPI,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange,onKeyDown:this.composeEventHandlers(this.handleKeyDown,z.onKeyDown),onClick:this.composeEventHandlers(this.handleInputClick,z.onClick),value:this.props.value})),Y&&this.renderMenu(),this.props.debug&&o.createElement("pre",{style:{marginLeft:300}},JSON.stringify(this._debugStates.slice(Math.max(0,this._debugStates.length-5),this._debugStates.length),null,2)))}}]),k}(o.Component);return S.propTypes={items:a.array.isRequired,value:a.any,onChange:a.func,onSelect:a.func,shouldItemRender:a.func,isItemSelectable:a.func,sortItems:a.func,getItemValue:a.func.isRequired,renderItem:a.func.isRequired,renderMenu:a.func,menuStyle:a.object,renderInput:a.func,inputProps:a.object,wrapperProps:a.object,wrapperStyle:a.object,autoHighlight:a.bool,selectOnBlur:a.bool,onMenuVisibilityChange:a.func,open:a.bool,debug:a.bool},S.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},renderInput:function(k){return o.createElement("input",k)},onChange:function(){},onSelect:function(){},isItemSelectable:function(){return!0},renderMenu:function(k,U,z){return o.createElement("div",{style:n({},z,this.menuStyle),children:k})},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,selectOnBlur:!1,onMenuVisibilityChange:function(){}},S.keyDownHandlers={ArrowDown:function(k){k.preventDefault();var U=this.getFilteredItems(this.props);if(U.length){for(var z=this.state.highlightedIndex,Y=z===null?-1:z,Q=0;Q<U.length;Q++){var ne=(Y+Q+1)%U.length;if(this.props.isItemSelectable(U[ne])){Y=ne;break}}Y>-1&&Y!==z&&this.setState({highlightedIndex:Y,isOpen:!0})}},ArrowUp:function(k){k.preventDefault();var U=this.getFilteredItems(this.props);if(U.length){for(var z=this.state.highlightedIndex,Y=z===null?U.length:z,Q=0;Q<U.length;Q++){var ne=(Y-(1+Q)+U.length)%U.length;if(this.props.isItemSelectable(U[ne])){Y=ne;break}}Y!==U.length&&this.setState({highlightedIndex:Y,isOpen:!0})}},Enter:function(k){var U=this;if(k.keyCode===13)if(this.setIgnoreBlur(!1),this.isOpen())if(this.state.highlightedIndex==null)this.setState({isOpen:!1},function(){U.refs.input.select()});else{k.preventDefault();var z=this.getFilteredItems(this.props)[this.state.highlightedIndex],Y=this.props.getItemValue(z);this.setState({isOpen:!1,highlightedIndex:null},function(){U.refs.input.setSelectionRange(Y.length,Y.length),U.props.onSelect(Y,z)})}else return},Escape:function(){this.setIgnoreBlur(!1),this.setState({highlightedIndex:null,isOpen:!1})},Tab:function(){this.setIgnoreBlur(!1)}},y5=S,y5}var kse=Ise();const Tse=Ka(kse);function ko(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="6ef9facf9aeabdae687b5aca973710969d826d60",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:7,column:10},end:{line:9,column:3}},2:{start:{line:10,column:23},end:{line:10,column:27}},3:{start:{line:11,column:24},end:{line:15,column:3}},4:{start:{line:17,column:4},end:{line:25,column:5}},5:{start:{line:18,column:24},end:{line:18,column:96}},6:{start:{line:19,column:31},end:{line:19,column:62}},7:{start:{line:20,column:6},end:{line:24,column:7}},8:{start:{line:21,column:8},end:{line:23,column:11}},9:{start:{line:28,column:4},end:{line:28,column:25}},10:{start:{line:31,column:4},end:{line:31,column:25}},11:{start:{line:34,column:4},end:{line:34,column:47}},12:{start:{line:37,column:4},end:{line:86,column:6}},13:{start:{line:41,column:10},end:{line:41,column:39}},14:{start:{line:63,column:36},end:{line:63,column:43}},15:{start:{line:64,column:29},end:{line:64,column:45}},16:{start:{line:65,column:33},end:{line:65,column:49}},17:{start:{line:67,column:14},end:{line:69,column:15}},18:{start:{line:68,column:16},end:{line:68,column:79}},19:{start:{line:70,column:14},end:{line:70,column:27}},20:{start:{line:72,column:65},end:{line:82,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:20},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:18},end:{line:26,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:29,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:30,column:2},end:{line:30,column:3}},loc:{start:{line:30,column:23},end:{line:32,column:3}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:14},end:{line:35,column:3}},line:33},5:{name:"(anonymous_5)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:87,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:40,column:13},end:{line:40,column:14}},loc:{start:{line:40,column:21},end:{line:42,column:9}},line:40},7:{name:"(anonymous_7)",decl:{start:{line:63,column:26},end:{line:63,column:27}},loc:{start:{line:63,column:36},end:{line:63,column:43}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:29},end:{line:64,column:45}},line:64},9:{name:"(anonymous_9)",decl:{start:{line:65,column:22},end:{line:65,column:23}},loc:{start:{line:65,column:33},end:{line:65,column:49}},line:65},10:{name:"(anonymous_10)",decl:{start:{line:66,column:30},end:{line:66,column:31}},loc:{start:{line:66,column:52},end:{line:71,column:13}},line:66},11:{name:"(anonymous_11)",decl:{start:{line:72,column:24},end:{line:72,column:25}},loc:{start:{line:72,column:65},end:{line:82,column:13}},line:72}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:6},end:{line:24,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:24,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:34,column:24},end:{line:34,column:45}},type:"cond-expr",locations:[{start:{line:34,column:35},end:{line:34,column:41}},{start:{line:34,column:44},end:{line:34,column:45}}],line:34},3:{loc:{start:{line:66,column:37},end:{line:66,column:47}},type:"default-arg",locations:[{start:{line:66,column:45},end:{line:66,column:47}}],line:66},4:{loc:{start:{line:67,column:14},end:{line:69,column:15}},type:"if",locations:[{start:{line:67,column:14},end:{line:69,column:15}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAsFU;AAtFV,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,kBAAkB;AAGzB,MAAM,aAAa;AAUnB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,QAAQ;AAAA,IACN,WAAW;AAAA,EACb;AAAA,EAEA,qBAA4C;AAAA,EAE5C,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,gBAAgB;AACd,QAAG,KAAK,MAAM,4BAA4B;AACxC,YAAM,YAAY,OAAO,cAAc,KAAK,mBAAoB,sBAAsB,EAAE;AACxF,YAAM,mBAAmB,KAAK,IAAI,WAAW,UAAU;AAEvD,UAAG,oBAAoB,KAAK,MAAM,WAAW;AAC3C,aAAK,SAAS;AAAA,UACZ,WAAW;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,qBAAqB;AACnB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,SAAS,GAAW;AAClB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,KAAK,CAAC,OAAO;AACX,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,WAAW;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,WAAW,KAAK,MAAM;AAAA,cACtB,QAAQ;AAAA,YACV;AAAA,YACA,cAAc;AAAA,cACZ,WAAW;AAAA,cACX,OAAO,CAAC;AAAA,YACV;AAAA,YACA,YAAY;AAAA,cACV,cAAc,KAAK,MAAM,YAAY;AAAA,cACrC,WAAW;AAAA,cACX,YAAY;AAAA,YACd;AAAA,YACA,OAAO,KAAK,MAAM;AAAA,YAClB,OAAO,KAAK,MAAM;AAAA,YAClB,cAAc,CAAC,SAAS,KAAK,CAAC;AAAA,YAC9B,UAAU,OAAK,KAAK,SAAS,CAAC;AAAA,YAC9B,UAAU,CAAC,IAAI,MAAM,KAAK,SAAS,CAAC;AAAA,YACpC,kBAAkB,CAAC,MAAM,QAAM,OAAO;AACpC,kBAAI,OAAO,UAAW,UAAU;AAC9B,uBAAO,KAAK,CAAC,EAAE,YAAY,EAAE,QAAQ,MAAM,YAAY,CAAC,IAAI;AAAA,cAC9D;AACA,qBAAO;AAAA,YACT;AAAA,YACA,YAAY,CAAC,MAAM,kBACjB;AAAA,cAAC;AAAA;AAAA,gBAEC,WAAW,WAAW;AAAA,kBACpB,mCAAmC;AAAA,kBACnC,4CAA4C;AAAA,gBAC9C,CAAC;AAAA,gBAEA,eAAK,CAAC;AAAA;AAAA,cANF,KAAK,CAAC;AAAA,YAOb;AAAA;AAAA,QAEJ;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ef9facf9aeabdae687b5aca973710969d826d60"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return ko=function(){return a},a}ko();const IT=(ko().s[0]++,140);class zy extends Xn.Component{constructor(){super(...arguments);In(this,"state",(ko().s[1]++,{maxHeight:IT}));In(this,"autocompleteMenuEl",(ko().s[2]++,null))}calcMaxHeight(){if(ko().f[1]++,ko().s[4]++,this.props.keepMenuWithinWindowBounds){ko().b[0][0]++;const t=(ko().s[5]++,window.innerHeight-this.autocompleteMenuEl.getBoundingClientRect().top),r=(ko().s[6]++,Math.min(t,IT));ko().s[7]++,r!=this.state.maxHeight?(ko().b[1][0]++,ko().s[8]++,this.setState({maxHeight:r})):ko().b[1][1]++}else ko().b[0][1]++}componentDidMount(){ko().f[2]++,ko().s[9]++,this.calcMaxHeight()}componentDidUpdate(){ko().f[3]++,ko().s[10]++,this.calcMaxHeight()}onChange(t){ko().f[4]++,ko().s[11]++,this.props.onChange(t===""?(ko().b[2][0]++,void 0):(ko().b[2][1]++,t))}render(){return ko().f[5]++,ko().s[12]++,ae.jsx("div",{ref:t=>{ko().f[6]++,ko().s[13]++,this.autocompleteMenuEl=t},children:ae.jsx(Tse,{menuStyle:{position:"fixed",overflow:"auto",maxHeight:this.state.maxHeight,zIndex:"998"},wrapperProps:{className:"maputnik-autocomplete",style:{}},inputProps:{"aria-label":this.props["aria-label"],className:"maputnik-string",spellCheck:!1},value:this.props.value,items:this.props.options,getItemValue:t=>(ko().f[7]++,ko().s[14]++,t[0]),onSelect:t=>(ko().f[8]++,ko().s[15]++,this.onChange(t)),onChange:(t,r)=>(ko().f[9]++,ko().s[16]++,this.onChange(r)),shouldItemRender:(t,r=(ko().b[3][0]++,""))=>(ko().f[10]++,ko().s[17]++,typeof r=="string"?(ko().b[4][0]++,ko().s[18]++,t[0].toLowerCase().indexOf(r.toLowerCase())>-1):(ko().b[4][1]++,ko().s[19]++,!1)),renderItem:(t,r)=>(ko().f[11]++,ko().s[20]++,ae.jsx("div",{className:tm({"maputnik-autocomplete-menu-item":!0,"maputnik-autocomplete-menu-item-selected":r}),children:t[1]},t[0]))})})}}In(zy,"defaultProps",(ko().s[3]++,{onChange:()=>{ko().f[0]++},options:[]}));function zp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:12,column:3}},1:{start:{line:14,column:14},end:{line:14,column:26}},2:{start:{line:15,column:4},end:{line:31,column:6}},3:{start:{line:27,column:56},end:{line:27,column:66}},4:{start:{line:34,column:20},end:{line:34,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:32,column:3}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:27,column:47},end:{line:27,column:48}},loc:{start:{line:27,column:56},end:{line:27,column:66}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA6BM;AA7BN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,WAAW,CAAC;AAAA,EACd;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,QAAQ;AAAA,QACjB,WAAW,OAAO,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAClB,eAAa,KAAK,MAAM;AAAA,QAExB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,WAAW,IAAI,SAAO,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,QACtD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return zp=function(){return a},a}zp();class Tj extends Xn.Component{render(){var t;zp().f[1]++;const e=(zp().s[1]++,this.props.t);return zp().s[2]++,ae.jsx(ga,{label:e("Source"),fieldSpec:es.layer.source,error:this.props.error,"data-wd-key":this.props.wdKey,children:ae.jsx(zy,{value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceIds)==null?void 0:t.map(r=>(zp().f[2]++,zp().s[3]++,[r,r]))})})}}In(Tj,"defaultProps",(zp().s[0]++,{onChange:()=>{zp().f[0]++},sourceIds:[]}));const Pj=(zp().s[4]++,$s()(Tj));function jp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d17faa4f03faf23184e12eb0563d322067d1f63d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:14},end:{line:15,column:26}},2:{start:{line:16,column:4},end:{line:33,column:6}},3:{start:{line:29,column:59},end:{line:29,column:65}},4:{start:{line:36,column:25},end:{line:36,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:34,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:65}},line:29}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA8BM;AA9BN,OAAO,WAAW;AAElB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,gBAAgB,CAAC;AAAA,IACjB,SAAS;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,cAAc;AAAA,QACvB,WAAW,OAAO,MAAM,cAAc;AAAA,QACtC,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,4BAA4B,CAAC,CAAC,KAAK,MAAM;AAAA,YACzC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,gBAAgB,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,QACrD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17faa4f03faf23184e12eb0563d322067d1f63d"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return jp=function(){return a},a}jp();class Rj extends Xn.Component{render(){var t;jp().f[1]++;const e=(jp().s[1]++,this.props.t);return jp().s[2]++,ae.jsx(ga,{label:e("Source Layer"),fieldSpec:Ys.layer["source-layer"],"data-wd-key":"layer-source-layer",error:this.props.error,children:ae.jsx(zy,{keepMenuWithinWindowBounds:!!this.props.isFixed,value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceLayerIds)==null?void 0:t.map(r=>(jp().f[2]++,jp().s[3]++,[r,r]))})})}}In(Rj,"defaultProps",(jp().s[0]++,{onChange:()=>{jp().f[0]++},sourceLayerIds:[],isFixed:!1}));const Kj=(jp().s[4]++,$s()(Rj));function Yr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="7a9f0314912c2a2e8e47cddf3aaf5469476531e0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:11,column:13},end:{line:26,column:3}},1:{start:{line:12,column:26},end:{line:12,column:52}},2:{start:{line:13,column:18},end:{line:16,column:5}},3:{start:{line:17,column:4},end:{line:22,column:5}},4:{start:{line:18,column:6},end:{line:18,column:39}},5:{start:{line:19,column:6},end:{line:21,column:7}},6:{start:{line:20,column:8},end:{line:20,column:59}},7:{start:{line:23,column:4},end:{line:23,column:30}},8:{start:{line:24,column:4},end:{line:24,column:45}},9:{start:{line:25,column:4},end:{line:25,column:35}},10:{start:{line:28,column:4},end:{line:28,column:17}},11:{start:{line:29,column:18},end:{line:32,column:5}},12:{start:{line:33,column:4},end:{line:36,column:5}},13:{start:{line:34,column:6},end:{line:34,column:56}},14:{start:{line:35,column:6},end:{line:35,column:66}},15:{start:{line:37,column:4},end:{line:37,column:23}},16:{start:{line:40,column:20},end:{line:40,column:34}},17:{start:{line:41,column:20},end:{line:41,column:35}},18:{start:{line:42,column:32},end:{line:42,column:56}},19:{start:{line:43,column:32},end:{line:43,column:56}},20:{start:{line:44,column:4},end:{line:51,column:5}},21:{start:{line:48,column:6},end:{line:50,column:9}},22:{start:{line:54,column:22},end:{line:54,column:54}},23:{start:{line:55,column:4},end:{line:55,column:34}},24:{start:{line:58,column:20},end:{line:58,column:22}},25:{start:{line:59,column:18},end:{line:79,column:5}},26:{start:{line:80,column:4},end:{line:85,column:5}},27:{start:{line:81,column:22},end:{line:81,column:30}},28:{start:{line:82,column:6},end:{line:84,column:7}},29:{start:{line:83,column:8},end:{line:83,column:26}},30:{start:{line:86,column:4},end:{line:86,column:19}},31:{start:{line:89,column:14},end:{line:89,column:26}},32:{start:{line:90,column:20},end:{line:90,column:52}},33:{start:{line:91,column:19},end:{line:91,column:61}},34:{start:{line:92,column:4},end:{line:148,column:6}},35:{start:{line:107,column:16},end:{line:107,column:41}},36:{start:{line:116,column:31},end:{line:116,column:57}},37:{start:{line:125,column:31},end:{line:125,column:59}},38:{start:{line:134,column:31},end:{line:134,column:67}},39:{start:{line:151,column:17},end:{line:151,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:19},end:{line:26,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:21},end:{line:38,column:3}},line:27},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:44},end:{line:52,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:29},end:{line:56,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:19},end:{line:87,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:149,column:3}},line:88},6:{name:"(anonymous_6)",decl:{start:{line:106,column:24},end:{line:106,column:25}},loc:{start:{line:106,column:31},end:{line:108,column:15}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:116,column:24},end:{line:116,column:25}},loc:{start:{line:116,column:31},end:{line:116,column:57}},line:116},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:31},end:{line:125,column:59}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:31},end:{line:134,column:67}},line:134}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:19,column:10},end:{line:19,column:68}},type:"binary-expr",locations:[{start:{line:19,column:10},end:{line:19,column:38}},{start:{line:19,column:42},end:{line:19,column:68}}],line:19},3:{loc:{start:{line:33,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},4:{loc:{start:{line:44,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},5:{loc:{start:{line:46,column:6},end:{line:46,column:160}},type:"binary-expr",locations:[{start:{line:46,column:6},end:{line:46,column:25}},{start:{line:46,column:29},end:{line:46,column:52}},{start:{line:46,column:56},end:{line:46,column:106}},{start:{line:46,column:110},end:{line:46,column:160}}],line:46},6:{loc:{start:{line:54,column:22},end:{line:54,column:54}},type:"binary-expr",locations:[{start:{line:54,column:22},end:{line:54,column:48}},{start:{line:54,column:52},end:{line:54,column:54}}],line:54},7:{loc:{start:{line:55,column:11},end:{line:55,column:33}},type:"binary-expr",locations:[{start:{line:55,column:11},end:{line:55,column:27}},{start:{line:55,column:31},end:{line:55,column:33}}],line:55},8:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},9:{loc:{start:{line:82,column:10},end:{line:82,column:61}},type:"binary-expr",locations:[{start:{line:82,column:10},end:{line:82,column:24}},{start:{line:82,column:28},end:{line:82,column:61}}],line:82},10:{loc:{start:{line:119,column:10},end:{line:127,column:11}},type:"binary-expr",locations:[{start:{line:119,column:10},end:{line:119,column:42}},{start:{line:119,column:62},end:{line:127,column:11}}],line:119},11:{loc:{start:{line:128,column:10},end:{line:136,column:11}},type:"binary-expr",locations:[{start:{line:128,column:10},end:{line:128,column:87}},{start:{line:128,column:107},end:{line:136,column:11}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AA2IM,SACE,KADF;AA3IN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AAkBjD,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,KAAK,MAAM,SAAS,YAAY,KAAK,MAAM,cAAc,GAAG;AAC7D,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAE9C,SAAK,MAAM,eAAe,aAAa;AACvC,SAAK,MAAM,aAAa,KAAK;AAAA,EAC/B;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,IACN;AAEA,QAAG,MAAM,QAAQ,SAAS,GAAG;AAC3B,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,cAAc,IAAI,KAAK,MAAM,QAAQ,MAAM,MAAgD,EAAE,CAAC;AAAA,IACtG;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAc;AACvB,UAAM,UAAU,CAAC;AAEjB,UAAM,QAAQ;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAU;AACjE,YAAM,UAAU,IAAI;AACpB,UAAG,MAAM,OAAO,KAAK,MAAM,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI;AACtD,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AAEzD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAEV,+BAAC,SAAI,WAAU,sBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAc;AACvB,qBAAK,SAAS,EAAE,IAAI,EAAE,CAAC;AAAA,cACzB;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,UACxE;AAAA,UACC,KAAK,MAAM,SAAS,gBACvB;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,cACX,OAAM;AAAA,cACN,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,UACtD;AAAA,UAEG,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,IAAI,IAAI,KAC/E;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,OAAO,KAAK,MAAM,cAAc;AAAA,cAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,UAC9D;AAAA,UAEE;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,eAAY;AAAA,cAEX,YAAE,WAAW;AAAA;AAAA,UAChB;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7a9f0314912c2a2e8e47cddf3aaf5469476531e0"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Yr=function(){return a},a}Yr();class Pse extends Xn.Component{constructor(t){Yr().f[1]++,Yr().s[10]++;super(t);In(this,"addLayer",(Yr().s[0]++,()=>{Yr().f[0]++;const t=(Yr().s[1]++,this.props.layers.slice(0)),r=(Yr().s[2]++,{id:this.state.id,type:this.state.type});Yr().s[3]++,this.state.type!=="background"?(Yr().b[0][0]++,Yr().s[4]++,r.source=this.state.source,Yr().s[5]++,Yr().b[2][0]++,this.state.type!=="raster"&&(Yr().b[2][1]++,this.state["source-layer"])?(Yr().b[1][0]++,Yr().s[6]++,r["source-layer"]=this.state["source-layer"]):Yr().b[1][1]++):Yr().b[0][1]++,Yr().s[7]++,t.push(r),Yr().s[8]++,this.props.onLayersChange(t),Yr().s[9]++,this.props.onOpenToggle(!1)}));const r=(Yr().s[11]++,{type:"fill",id:""});Yr().s[12]++,t.sources.length>0?(Yr().b[3][0]++,Yr().s[13]++,r.source=Object.keys(this.props.sources)[0],Yr().s[14]++,r["source-layer"]=this.props.sources[r.source][0]):Yr().b[3][1]++,Yr().s[15]++,this.state=r}componentDidUpdate(t,r){Yr().f[2]++;const i=(Yr().s[16]++,r.type),o=(Yr().s[17]++,this.state.type),a=(Yr().s[18]++,this.getSources(i)),s=(Yr().s[19]++,this.getSources(o));Yr().s[20]++,Yr().b[5][0]++,i!==o&&(Yr().b[5][1]++,r.source!=="")&&(Yr().b[5][2]++,a.indexOf(r.source)>-1)&&(Yr().b[5][3]++,s.indexOf(this.state.source)<0)?(Yr().b[4][0]++,Yr().s[21]++,this.setState({source:""})):Yr().b[4][1]++}getLayersForSource(t){Yr().f[3]++;const r=(Yr().s[22]++,Yr().b[6][0]++,this.props.sources[t]||(Yr().b[6][1]++,{}));return Yr().s[23]++,Yr().b[7][0]++,r.layers||(Yr().b[7][1]++,[])}getSources(t){Yr().f[4]++;const r=(Yr().s[24]++,[]),i=(Yr().s[25]++,{vector:["fill","line","symbol","circle","fill-extrusion","heatmap"],raster:["raster"],geojson:["fill","line","symbol","circle","fill-extrusion","heatmap"]});Yr().s[26]++;for(const[o,a]of Object.entries(this.props.sources)){const s=(Yr().s[27]++,a.type);Yr().s[28]++,Yr().b[9][0]++,i[s]&&(Yr().b[9][1]++,i[s].indexOf(t)>-1)?(Yr().b[8][0]++,Yr().s[29]++,r.push(o)):Yr().b[8][1]++}return Yr().s[30]++,r}render(){Yr().f[5]++;const t=(Yr().s[31]++,this.props.t),r=(Yr().s[32]++,this.getSources(this.state.type)),i=(Yr().s[33]++,this.getLayersForSource(this.state.source));return Yr().s[34]++,ae.jsx(L0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:ae.jsxs("div",{className:"maputnik-add-layer",children:[ae.jsx(kj,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:o=>{Yr().f[6]++,Yr().s[35]++,this.setState({id:o})}}),ae.jsx(Ij,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:o=>(Yr().f[7]++,Yr().s[36]++,this.setState({type:o}))}),(Yr().b[10][0]++,this.state.type!=="background"&&(Yr().b[10][1]++,ae.jsx(Pj,{sourceIds:r,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:o=>(Yr().f[8]++,Yr().s[37]++,this.setState({source:o}))}))),(Yr().b[11][0]++,["background","raster","hillshade","heatmap"].indexOf(this.state.type)<0&&(Yr().b[11][1]++,ae.jsx(Kj,{isFixed:!0,sourceLayerIds:i,value:this.state["source-layer"],onChange:o=>(Yr().f[9]++,Yr().s[38]++,this.setState({"source-layer":o}))}))),ae.jsx(Ya,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:t("Add Layer")})]})})}}const Rse=(Yr().s[39]++,$s()(Pse));function yg(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return yg=function(){return a},a}yg();let kT=(yg().s[0]++,0);function Sy(n=(yg().b[0][0]++,"")){return yg().f[0]++,yg().s[1]++,kT++,yg().s[2]++,n+kT}function zi(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return zi=function(){return a},a}zi();function Kse(n,e){zi().f[0]++;const t=(zi().s[0]++,{...n.paint});zi().s[1]++,Object.keys(t).forEach(i=>{zi().f[1]++,zi().s[2]++,i in Ys["paint_"+e]?zi().b[0][1]++:(zi().b[0][0]++,zi().s[3]++,delete t[i])});const r=(zi().s[4]++,{...n.layout});return zi().s[5]++,Object.keys(r).forEach(i=>{zi().f[2]++,zi().s[6]++,i in Ys["layout_"+e]?zi().b[1][1]++:(zi().b[1][0]++,zi().s[7]++,delete r[i])}),zi().s[8]++,{...n,paint:t,layout:r,type:e}}function Dse(n,e,t,r){if(zi().f[3]++,zi().s[9]++,r===void 0)if(zi().b[2][0]++,zi().s[10]++,e){zi().b[3][0]++;const i=(zi().s[11]++,{...n,[e]:{...n[e]}});return zi().s[12]++,delete i[e][t],zi().s[13]++,Object.keys(i[e]).length<1?(zi().b[4][0]++,zi().s[14]++,delete i[e]):zi().b[4][1]++,zi().s[15]++,i}else{zi().b[3][1]++;const i=(zi().s[16]++,{...n});return zi().s[17]++,delete i[t],zi().s[18]++,i}else return zi().b[2][1]++,zi().s[19]++,e?(zi().b[5][0]++,zi().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(zi().b[5][1]++,zi().s[21]++,{...n,[t]:r})}function H1(n){return zi().f[4]++,zi().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function Lse(n,e){zi().f[5]++;const t=(zi().s[23]++,H1(n[e].id));let r=(zi().s[24]++,e);zi().s[25]++;for(let i=(zi().s[26]++,e);i>0;i--){const o=(zi().s[27]++,H1(n[i-1].id));if(zi().s[28]++,o===t)zi().b[6][0]++,zi().s[29]++,r=i-1;else return zi().b[6][1]++,zi().s[30]++,r}return zi().s[31]++,r}function yn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="fce844afd94013ad4b9b4e84bd148b8b849d3079",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:13,column:24},end:{line:16,column:3}},1:{start:{line:20,column:4},end:{line:20,column:17}},2:{start:{line:21,column:4},end:{line:21,column:45}},3:{start:{line:22,column:4},end:{line:22,column:48}},4:{start:{line:23,column:4},end:{line:32,column:6}},5:{start:{line:35,column:4},end:{line:44,column:7}},6:{start:{line:46,column:17},end:{line:63,column:3}},7:{start:{line:47,column:14},end:{line:47,column:15}},8:{start:{line:48,column:22},end:{line:48,column:24}},9:{start:{line:49,column:4},end:{line:58,column:7}},10:{start:{line:50,column:26},end:{line:50,column:51}},11:{start:{line:51,column:24},end:{line:51,column:52}},12:{start:{line:52,column:6},end:{line:54,column:7}},13:{start:{line:53,column:8},end:{line:53,column:63}},14:{start:{line:55,column:6},end:{line:57,column:9}},15:{start:{line:56,column:8},end:{line:56,column:17}},16:{start:{line:59,column:4},end:{line:62,column:7}},17:{start:{line:65,column:19},end:{line:65,column:21}},18:{start:{line:66,column:41},end:{line:66,column:50}},19:{start:{line:67,column:4},end:{line:84,column:5}},20:{start:{line:67,column:17},end:{line:67,column:18}},21:{start:{line:68,column:24},end:{line:68,column:44}},22:{start:{line:69,column:28},end:{line:69,column:52}},23:{start:{line:70,column:6},end:{line:73,column:8}},24:{start:{line:74,column:20},end:{line:77,column:7}},25:{start:{line:78,column:6},end:{line:83,column:7}},26:{start:{line:79,column:26},end:{line:79,column:51}},27:{start:{line:80,column:8},end:{line:80,column:30}},28:{start:{line:82,column:8},end:{line:82,column:29}},29:{start:{line:85,column:4},end:{line:85,column:18}},30:{start:{line:88,column:22},end:{line:88,column:50}},31:{start:{line:89,column:22},end:{line:89,column:55}},32:{start:{line:90,column:4},end:{line:94,column:5}},33:{start:{line:91,column:6},end:{line:91,column:68}},34:{start:{line:93,column:6},end:{line:93,column:35}},35:{start:{line:95,column:4},end:{line:97,column:7}},36:{start:{line:100,column:22},end:{line:100,column:78}},37:{start:{line:101,column:4},end:{line:101,column:51}},38:{start:{line:104,column:4},end:{line:106,column:5}},39:{start:{line:105,column:6},end:{line:105,column:18}},40:{start:{line:108,column:18},end:{line:110,column:7}},41:{start:{line:111,column:6},end:{line:115,column:7}},42:{start:{line:112,column:8},end:{line:114,column:10}},43:{start:{line:116,column:6},end:{line:116,column:17}},44:{start:{line:118,column:24},end:{line:121,column:5}},45:{start:{line:123,column:18},end:{line:125,column:7}},46:{start:{line:126,column:6},end:{line:126,column:27}},47:{start:{line:127,column:6},end:{line:127,column:17}},48:{start:{line:129,column:23},end:{line:132,column:5}},49:{start:{line:133,column:25},end:{line:133,column:53}},50:{start:{line:134,column:4},end:{line:134,column:24}},51:{start:{line:137,column:4},end:{line:153,column:5}},52:{start:{line:138,column:31},end:{line:138,column:59}},53:{start:{line:139,column:6},end:{line:152,column:7}},54:{start:{line:140,column:23},end:{line:140,column:44}},55:{start:{line:141,column:24},end:{line:144,column:9}},56:{start:{line:145,column:25},end:{line:150,column:19}},57:{start:{line:146,column:10},end:{line:146,column:37}},58:{start:{line:147,column:10},end:{line:149,column:11}},59:{start:{line:148,column:12},end:{line:148,column:36}},60:{start:{line:151,column:8},end:{line:151,column:33}},61:{start:{line:156,column:22},end:{line:156,column:24}},62:{start:{line:157,column:14},end:{line:157,column:15}},63:{start:{line:158,column:26},end:{line:158,column:46}},64:{start:{line:159,column:4},end:{line:210,column:7}},65:{start:{line:160,column:26},end:{line:160,column:51}},66:{start:{line:161,column:6},end:{line:174,column:7}},67:{start:{line:162,column:36},end:{line:172,column:9}},68:{start:{line:166,column:47},end:{line:166,column:52}},69:{start:{line:173,column:8},end:{line:173,column:28}},70:{start:{line:175,column:6},end:{line:209,column:9}},71:{start:{line:176,column:25},end:{line:176,column:72}},72:{start:{line:177,column:27},end:{line:179,column:10}},73:{start:{line:178,column:10},end:{line:178,column:97}},74:{start:{line:180,column:32},end:{line:180,column:34}},75:{start:{line:181,column:8},end:{line:183,column:9}},76:{start:{line:182,column:10},end:{line:182,column:53}},77:{start:{line:184,column:41},end:{line:206,column:9}},78:{start:{line:207,column:8},end:{line:207,column:33}},79:{start:{line:208,column:8},end:{line:208,column:17}},80:{start:{line:211,column:14},end:{line:211,column:26}},81:{start:{line:212,column:4},end:{line:264,column:6}},82:{start:{line:267,column:27},end:{line:267,column:72}},83:{start:{line:268,column:35},end:{line:268,column:118}},84:{start:{line:268,column:80},end:{line:268,column:117}},85:{start:{line:271,column:4},end:{line:280,column:6}},86:{start:{line:278,column:33},end:{line:278,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:19},end:{line:14,column:20}},loc:{start:{line:14,column:25},end:{line:15,column:5}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:33,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:25},end:{line:45,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:23},end:{line:63,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:49,column:33},end:{line:49,column:34}},loc:{start:{line:49,column:45},end:{line:58,column:5}},line:49},5:{name:"(anonymous_5)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:33},end:{line:57,column:7}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:18},end:{line:86,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:37},end:{line:98,column:3}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:32},end:{line:102,column:3}},line:99},9:{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:46},end:{line:135,column:3}},line:103},10:{name:"getRequiredProps",decl:{start:{line:107,column:13},end:{line:107,column:29}},loc:{start:{line:107,column:37},end:{line:117,column:5}},line:107},11:{name:"withoutLayers",decl:{start:{line:122,column:13},end:{line:122,column:26}},loc:{start:{line:122,column:34},end:{line:128,column:5}},line:122},12:{name:"(anonymous_12)",decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:32},end:{line:154,column:3}},line:136},13:{name:"(anonymous_13)",decl:{start:{line:145,column:50},end:{line:145,column:51}},loc:{start:{line:145,column:63},end:{line:150,column:9}},line:145},14:{name:"(anonymous_14)",decl:{start:{line:155,column:2},end:{line:155,column:3}},loc:{start:{line:155,column:11},end:{line:265,column:3}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:159,column:26},end:{line:159,column:27}},loc:{start:{line:159,column:38},end:{line:210,column:5}},line:159},16:{name:"(anonymous_16)",decl:{start:{line:166,column:40},end:{line:166,column:41}},loc:{start:{line:166,column:47},end:{line:166,column:52}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:44},end:{line:209,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:177,column:50},end:{line:177,column:51}},loc:{start:{line:177,column:61},end:{line:179,column:9}},line:177},19:{name:"(anonymous_19)",decl:{start:{line:268,column:53},end:{line:268,column:54}},loc:{start:{line:268,column:80},end:{line:268,column:117}},line:268},20:{name:"(anonymous_20)",decl:{start:{line:270,column:2},end:{line:270,column:3}},loc:{start:{line:270,column:11},end:{line:281,column:3}},line:270},21:{name:"(anonymous_21)",decl:{start:{line:278,column:27},end:{line:278,column:28}},loc:{start:{line:278,column:33},end:{line:278,column:38}},line:278}},branchMap:{0:{loc:{start:{line:52,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:52,column:6},end:{line:54,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},1:{loc:{start:{line:72,column:8},end:{line:72,column:79}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:79}}],line:72},2:{loc:{start:{line:78,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:83,column:7}},{start:{line:81,column:13},end:{line:83,column:7}}],line:78},3:{loc:{start:{line:78,column:10},end:{line:78,column:81}},type:"binary-expr",locations:[{start:{line:78,column:10},end:{line:78,column:23}},{start:{line:78,column:27},end:{line:78,column:81}}],line:78},4:{loc:{start:{line:90,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:90,column:4},end:{line:94,column:5}},{start:{line:92,column:11},end:{line:94,column:5}}],line:90},5:{loc:{start:{line:101,column:11},end:{line:101,column:50}},type:"cond-expr",locations:[{start:{line:101,column:34},end:{line:101,column:38}},{start:{line:101,column:41},end:{line:101,column:50}}],line:101},6:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},7:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},8:{loc:{start:{line:133,column:27},end:{line:133,column:52}},type:"binary-expr",locations:[{start:{line:133,column:27},end:{line:133,column:38}},{start:{line:133,column:42},end:{line:133,column:52}}],line:133},9:{loc:{start:{line:137,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:153,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},10:{loc:{start:{line:139,column:6},end:{line:152,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:152,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:139},11:{loc:{start:{line:139,column:10},end:{line:139,column:51}},type:"binary-expr",locations:[{start:{line:139,column:10},end:{line:139,column:26}},{start:{line:139,column:30},end:{line:139,column:51}}],line:139},12:{loc:{start:{line:147,column:10},end:{line:149,column:11}},type:"if",locations:[{start:{line:147,column:10},end:{line:149,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},13:{loc:{start:{line:147,column:14},end:{line:147,column:68}},type:"binary-expr",locations:[{start:{line:147,column:14},end:{line:147,column:32}},{start:{line:147,column:36},end:{line:147,column:68}}],line:147},14:{loc:{start:{line:161,column:6},end:{line:174,column:7}},type:"if",locations:[{start:{line:161,column:6},end:{line:174,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},15:{loc:{start:{line:168,column:22},end:{line:168,column:98}},type:"binary-expr",locations:[{start:{line:168,column:22},end:{line:168,column:57}},{start:{line:168,column:61},end:{line:168,column:98}}],line:168},16:{loc:{start:{line:178,column:17},end:{line:178,column:96}},type:"binary-expr",locations:[{start:{line:178,column:17},end:{line:178,column:29}},{start:{line:178,column:33},end:{line:178,column:62}},{start:{line:178,column:66},end:{line:178,column:96}}],line:178},17:{loc:{start:{line:181,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:183,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181},18:{loc:{start:{line:188,column:52},end:{line:188,column:153}},type:"binary-expr",locations:[{start:{line:188,column:52},end:{line:188,column:69}},{start:{line:188,column:73},end:{line:188,column:112}},{start:{line:188,column:116},end:{line:188,column:153}}],line:188},19:{loc:{start:{line:189,column:53},end:{line:189,column:105}},type:"binary-expr",locations:[{start:{line:189,column:53},end:{line:189,column:84}},{start:{line:189,column:88},end:{line:189,column:105}}],line:189},20:{loc:{start:{line:197,column:25},end:{line:197,column:43}},type:"binary-expr",locations:[{start:{line:197,column:25},end:{line:197,column:37}},{start:{line:197,column:41},end:{line:197,column:43}}],line:197},21:{loc:{start:{line:241,column:26},end:{line:241,column:96}},type:"cond-expr",locations:[{start:{line:241,column:69},end:{line:241,column:82}},{start:{line:241,column:85},end:{line:241,column:96}}],line:241}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AAmNoB,cAoEd,YApEc;AAnNpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AAEnB,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAErB,SAAwB,yBAAwB;AAEhD,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAuBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YACD,OAAO;AAAA,YAEP,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,MAAM,6BAA6B,kBAAkB,CAAC,UAAmC,oBAAC,sBAAoB,GAAG,OAAO,CAAE;AAM1H,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT,aAAY;AAAA,QACZ,WAAW,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,QAC3C,eAAe;AAAA,QACf,mBAAmB,MAAM;AAAA;AAAA,IAC3B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce844afd94013ad4b9b4e84bd148b8b849d3079"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return yn=function(){return a},a}yn();class Dj extends Xn.Component{constructor(t){yn().f[1]++,yn().s[1]++;super(t);In(this,"selectedItemRef");In(this,"scrollContainerRef");In(this,"toggleLayers",(yn().s[6]++,()=>{yn().f[3]++;let t=(yn().s[7]++,0);const r=(yn().s[8]++,{});yn().s[9]++,this.groupedLayers().forEach(i=>{yn().f[4]++;const o=(yn().s[10]++,H1(i[0].id)),a=(yn().s[11]++,[o,t].join("-"));yn().s[12]++,i.length>1?(yn().b[0][0]++,yn().s[13]++,r[a]=this.state.areAllGroupsExpanded):yn().b[0][1]++,yn().s[14]++,i.forEach(s=>{yn().f[5]++,yn().s[15]++,t+=1})}),yn().s[16]++,this.setState({collapsedGroups:r,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})}));yn().s[2]++,this.selectedItemRef=Xn.createRef(),yn().s[3]++,this.scrollContainerRef=Xn.createRef(),yn().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Sy()},isOpen:{add:!1}}}toggleModal(t){yn().f[2]++,yn().s[5]++,this.setState({keys:{...this.state.keys,[t]:+Sy()},isOpen:{...this.state.isOpen,[t]:!this.state.isOpen[t]}})}groupedLayers(){yn().f[6]++;const t=(yn().s[17]++,[]),r=(yn().s[18]++,new Map);yn().s[19]++;for(let i=(yn().s[20]++,0);i<this.props.layers.length;i++){const o=(yn().s[21]++,this.props.layers[i]),a=(yn().s[22]++,this.props.layers[i-1]);yn().s[23]++,r.set(o.id,r.has(o.id)?(yn().b[1][0]++,r.get(o.id)+1):(yn().b[1][1]++,0));const s=(yn().s[24]++,{...o,key:`layers-list-${o.id}-${r.get(o.id)}`});if(yn().s[25]++,yn().b[3][0]++,a&&(yn().b[3][1]++,H1(a.id)==H1(s.id))){yn().b[2][0]++;const h=(yn().s[26]++,t[t.length-1]);yn().s[27]++,h.push(s)}else yn().b[2][1]++,yn().s[28]++,t.push([s])}return yn().s[29]++,t}toggleLayerGroup(t,r){yn().f[7]++;const i=(yn().s[30]++,[t,r].join("-")),o=(yn().s[31]++,{...this.state.collapsedGroups});yn().s[32]++,i in this.state.collapsedGroups?(yn().b[4][0]++,yn().s[33]++,o[i]=!this.state.collapsedGroups[i]):(yn().b[4][1]++,yn().s[34]++,o[i]=!1),yn().s[35]++,this.setState({collapsedGroups:o})}isCollapsed(t,r){yn().f[8]++;const i=(yn().s[36]++,this.state.collapsedGroups[[t,r].join("-")]);return yn().s[37]++,i===void 0?(yn().b[5][0]++,!0):(yn().b[5][1]++,i)}shouldComponentUpdate(t,r){if(yn().f[9]++,yn().s[38]++,this.state!==r)return yn().b[6][0]++,yn().s[39]++,!0;yn().b[6][1]++;function i(g){yn().f[10]++;const b=(yn().s[40]++,{id:g.id});return yn().s[41]++,g.layout?(yn().b[7][0]++,yn().s[42]++,b.layout={visibility:g.layout.visibility}):yn().b[7][1]++,yn().s[43]++,b}const o=(yn().s[44]++,DE.isEqual(t.layers.map(i),this.props.layers.map(i)));function a(g){yn().f[11]++;const b=(yn().s[45]++,{...g});return yn().s[46]++,delete b.layers,yn().s[47]++,b}const s=(yn().s[48]++,DE.isEqual(a(this.props),a(t))),h=(yn().s[49]++,yn().b[8][0]++,!(o&&(yn().b[8][1]++,s)));return yn().s[50]++,h}componentDidUpdate(t){if(yn().f[12]++,yn().s[51]++,t.selectedLayerIndex!==this.props.selectedLayerIndex){yn().b[9][0]++;const r=(yn().s[52]++,this.selectedItemRef.current);if(yn().s[53]++,yn().b[11][0]++,r&&(yn().b[11][1]++,r.node)){yn().b[10][0]++;const i=(yn().s[54]++,r.node),o=(yn().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),a=(yn().s[56]++,new IntersectionObserver(s=>{yn().f[13]++,yn().s[57]++,a.unobserve(i),yn().s[58]++,yn().b[13][0]++,s.length>0&&(yn().b[13][1]++,s[0].intersectionRatio<1)?(yn().b[12][0]++,yn().s[59]++,i.scrollIntoView()):yn().b[12][1]++},o));yn().s[60]++,a.observe(i)}else yn().b[10][1]++}else yn().b[9][1]++}render(){yn().f[14]++;const t=(yn().s[61]++,[]);let r=(yn().s[62]++,0);const i=(yn().s[63]++,this.groupedLayers());yn().s[64]++,i.forEach(a=>{yn().f[15]++;const s=(yn().s[65]++,H1(a[0].id));if(yn().s[66]++,a.length>1){yn().b[14][0]++;const h=(yn().s[67]++,ae.jsx(Eie,{"data-wd-key":[s,r].join("-"),"aria-controls":a.map(g=>(yn().f[16]++,yn().s[68]++,g.key)).join(" "),title:s,isActive:(yn().b[15][0]++,!this.isCollapsed(s,r)||(yn().b[15][1]++,r===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,s,r)},`group-${s}-${r}`));yn().s[69]++,t.push(h)}else yn().b[14][1]++;yn().s[70]++,a.forEach((h,g)=>{var k;yn().f[17]++;const b=(yn().s[71]++,Lse(this.props.layers,r)),B=(yn().s[72]++,this.props.errors.find(U=>(yn().f[18]++,yn().s[73]++,yn().b[16][0]++,U.parsed&&(yn().b[16][1]++,U.parsed.type==="layer")&&(yn().b[16][2]++,U.parsed.data.index==r)))),S=(yn().s[74]++,{});yn().s[75]++,r===this.props.selectedLayerIndex?(yn().b[17][0]++,yn().s[76]++,S.ref=this.selectedItemRef):yn().b[17][1]++;const I=(yn().s[77]++,ae.jsx(soe,{className:tm({"maputnik-layer-list-item-collapsed":(yn().b[18][0]++,a.length>1&&(yn().b[18][1]++,this.isCollapsed(s,b))&&(yn().b[18][2]++,r!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(yn().b[19][0]++,g==a.length-1&&(yn().b[19][1]++,a.length>1)),"maputnik-layer-list-item--error":!!B}),index:r,id:h.key,layerId:h.id,layerIndex:r,layerType:h.type,visibility:(yn().b[20][0]++,h.layout||(yn().b[20][1]++,{})).visibility,isSelected:r===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:(k=this.props.onLayerDestroy)==null?void 0:k.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...S},h.key));yn().s[78]++,t.push(I),yn().s[79]++,r+=1})});const o=(yn().s[80]++,this.props.t);return yn().s[81]++,ae.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":o("Layers list"),ref:this.scrollContainerRef,children:[ae.jsx(Rse,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),ae.jsxs("header",{className:"maputnik-layer-list-header",children:[ae.jsx("span",{className:"maputnik-layer-list-header-title",children:o("Layers")}),ae.jsx("span",{className:"maputnik-space"}),ae.jsx("div",{className:"maputnik-default-property",children:ae.jsx("div",{className:"maputnik-multibutton",children:ae.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(yn().b[21][0]++,o("Collapse")):(yn().b[21][1]++,o("Expand"))})})}),ae.jsx("div",{className:"maputnik-default-property",children:ae.jsx("div",{className:"maputnik-multibutton",children:ae.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:o("Add Layer")})})})]}),ae.jsx("div",{role:"navigation","aria-label":o("Layers list"),children:ae.jsx("ul",{className:"maputnik-layer-list-container",children:t})})]})}}In(Dj,"defaultProps",(yn().s[0]++,{onLayerSelect:()=>{yn().f[0]++}}));const Fse=(yn().s[82]++,$s()(Dj)),Use=(yn().s[83]++,noe(n=>(yn().f[19]++,yn().s[84]++,ae.jsx(Fse,{...n}))));class zse extends Xn.Component{render(){return yn().f[20]++,yn().s[85]++,ae.jsx(Use,{...this.props,helperClass:"sortableHelper",onSortEnd:this.props.onMoveLayer.bind(this),useDragHandle:!0,shouldCancelStart:()=>(yn().f[21]++,yn().s[86]++,!1)})}}var v5,TT;function Lj(){if(TT)return v5;TT=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(a,s){n[a]=s}function r(a){delete n[a]}function i(a,s){var h=n[a];if(!h)throw new Error("Cannot open "+e);h.openMenu(s)}function o(a,s){var h=n[a];if(!h)throw new Error("Cannot close "+e);h.closeMenu(s)}return v5={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:o},v5}var _5,PT;function jse(){if(PT)return _5;PT=1;function n(i){i=i||{};var o=i.keybindings||{};this._settings={keybindings:{next:o.next||{keyCode:40},prev:o.prev||{keyCode:38},first:o.first,last:o.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var a,s;for(a in this._settings.keybindings)s=this._settings.keybindings[a],s&&[].concat(s).forEach((function(h){h.metaKey=h.metaKey||!1,h.ctrlKey=h.ctrlKey||!1,h.altKey=h.altKey||!1,h.shiftKey=h.shiftKey||!1,this._keybindingsLookup.push({action:a,eventMatcher:h})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var o=this._getActiveElementIndex();if(o!==-1){var a=!1;this._keybindingsLookup.forEach((function(s){if(e(s.eventMatcher,i))switch(a=!0,i.preventDefault(),s.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),a||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),o;return i<this._members.length-1?o=i+1:this._settings.wrap?o=0:o=i,this.focusNodeAtIndex(o),o},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),o;return i>0?o=i-1:this._settings.wrap?o=this._members.length-1:o=i,this.focusNodeAtIndex(o),o},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var o,a=0,s=this._members.length;a<s;a++)if(o=this._members[a],!!o.text&&o.text.indexOf(i)===0)return r(o.node)},n.prototype._findIndexOfNode=function(i){for(var o=0,a=this._members.length;o<a;o++)if(this._members[o].node===i)return o;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var o=this._members[i];return o&&r(o.node),this},n.prototype.addMember=function(i,o){var a=i.node||i,s=i.text||a.getAttribute("data-focus-group-text")||a.textContent||"";this._checkNode(a);var h=s.replace(/[\W_]/g,"").toLowerCase(),g={node:a,text:h};return o!=null?this._members.splice(o,0,g):this._members.push(g),this},n.prototype.removeMember=function(i){var o=typeof i=="number"?i:this._findIndexOfNode(i);if(o!==-1)return this._members.splice(o,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var o=0,a=i.length;o<a;o++)this.addMember(i[o]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,o){for(var a in i)if(o[a]!==void 0&&i[a]!==o[a])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return _5=function(o){return new n(o)},_5}var C5,RT;function Nse(){if(RT)return C5;RT=1;var n=jse(),e=Lj(),t={wrap:!0,stringSearch:!0},r={init:function(h){this.updateOptions(h),this.handleBlur=i.bind(this),this.handleSelection=o.bind(this),this.handleMenuKey=a.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(h){var g=this.options;this.options=h||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),g&&g.id&&g.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(h){this.focusGroup.focusNodeAtIndex(h)},addItem:function(h){this.focusGroup.addMember(h)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(h){this.focusGroup._handleUnboundKey(h)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(h){if(!this.isOpen&&(h=h||{},h.focusMenu===void 0&&(h.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),h.focusMenu)){var g=this;this.moveFocusTimer=setTimeout(function(){g.focusItem(0)},0)}},closeMenu:function(h){this.isOpen&&(h=h||{},this.isOpen=!1,this.update(),h.focusButton&&this.button.ref.current.focus())},toggleMenu:function(h,g){h=h||{},g=g||{},this.isOpen?this.closeMenu(h):this.openMenu(g)}};function i(){var s=this;s.blurTimer=setTimeout(function(){if(s.button){var h=s.button.ref.current;if(h){var g=h.ownerDocument.activeElement;if(!(h&&g===h)){var b=s.menu.ref.current;if(b===g){s.focusItem(0);return}b&&b.contains(g)||s.isOpen&&s.closeMenu({focusButton:!1})}}}},0)}function o(s,h){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(s,h)}function a(s){if(this.isOpen)switch(s.key){case"Escape":s.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":s.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":s.preventDefault(),this.focusGroup.moveFocusToLast();break}}return C5=function(s){var h=Object.create(r);return h.init(s),h},C5}var b5,KT;function Nx(){if(KT)return b5;KT=1;var n=Da(),e=n.createContext();return b5=e,b5}var x5,DT;function Gx(){if(DT)return x5;DT=1;var n=hp();return x5={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},x5}var w5,LT;function Wx(){return LT||(LT=1,w5=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),w5}var M5,FT;function Gse(){if(FT)return M5;FT=1;function n(I,k){if(!(I instanceof k))throw new TypeError("Cannot call a class as a function")}function e(I,k){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:I}function t(I,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);I.prototype=Object.create(k&&k.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(I,k):I.__proto__=k)}var r=Da(),i=hp(),o=Nse(),a=Nx(),s=Gx(),h=s.refType,g=Wx(),b={children:i.node.isRequired,forwardedRef:h,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},B=function(k){return{onMenuToggle:k.onMenuToggle,onSelection:k.onSelection,closeOnSelection:k.closeOnSelection,closeOnBlur:k.closeOnBlur,id:k.id}},S=function(I){t(k,I);function k(U){n(this,k);var z=e(this,I.call(this,U));return z.manager=o(B(U)),z}return k.prototype.componentDidUpdate=function(){this.manager.updateOptions(B(this.props))},k.prototype.render=function(){var z={};return g(z,this.props,b),r.createElement(a.Provider,{value:this.manager},r.createElement(this.props.tag,z,this.props.children))},k}(r.Component);return S.propTypes=b,S.defaultProps={tag:"div"},M5=r.forwardRef(function(I,k){var U={forwardedRef:k};return g(U,I,{children:b.children,forwardedRef:b.forwardedRef}),g(U,{forwardedRef:k}),r.createElement(S,U,I.children)}),M5}var S5,UT;function Wse(){if(UT)return S5;UT=1;function n(S,I){if(!(S instanceof I))throw new TypeError("Cannot call a class as a function")}function e(S,I){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:S}function t(S,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);S.prototype=Object.create(I&&I.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(S,I):S.__proto__=I)}var r=Da(),i=hp(),o=Nx(),a=Gx(),s=a.refType,h=Wx(),g={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:s,tag:i.string},b=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},B=function(S){t(I,S);function I(){var k,U,z;n(this,I);for(var Y=arguments.length,Q=Array(Y),ne=0;ne<Y;ne++)Q[ne]=arguments[ne];return z=(k=(U=e(this,S.call.apply(S,[this].concat(Q))),U),U.ref=r.createRef(),U.handleKeyDown=function(X){if(!U.props.disabled){var q=U.props.ambManager;switch(X.key){case"ArrowDown":X.preventDefault(),q.isOpen?q.focusItem(0):q.openMenu();break;case"Enter":case" ":X.preventDefault(),q.toggleMenu();break;case"Escape":q.handleMenuKey(X);break;default:q.handleButtonNonArrowKey(X)}}},U.handleClick=function(){U.props.disabled||U.props.ambManager.toggleMenu({},{focusMenu:!1})},U.setRef=function(X){U.ref.current=X,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(X):U.props.forwardedRef&&(U.props.forwardedRef.current=X)},k),e(U,z)}return I.prototype.componentDidMount=function(){this.props.ambManager.button=this},I.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},I.prototype.render=function(){var U=this.props,z=this.props.ambManager,Y={role:"button",tabIndex:U.disabled?"":"0","aria-haspopup":!0,"aria-expanded":z.isOpen,"aria-disabled":U.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},Q={};return h(Q,g),b().indexOf(U.tag)>=0&&delete Q.disabled,z.options.closeOnBlur&&(Y.onBlur=z.handleBlur),h(Y,U,Q),h(Y,{ref:this.setRef}),r.createElement(U.tag,Y,U.children)},I}(r.Component);return B.propTypes=g,B.defaultProps={tag:"span"},S5=r.forwardRef(function(S,I){return r.createElement(o.Consumer,null,function(k){var U={ambManager:k,forwardedRef:I};return h(U,S,{ambManager:g.ambManager,children:g.children,forwardedRef:g.forwardedRef}),r.createElement(B,U,S.children)})}),S5}var E5,zT;function Qse(){return zT||(zT=1,E5=function(e,t,r){var i=0,o=0,a=!1,s=!1,h=!1;e.addEventListener("click",g,r),e.addEventListener("touchstart",b,r);function g(z){h||t(z)}function b(z){h=!0,!a&&(a=!0,e.addEventListener("touchmove",B,r),e.addEventListener("touchend",S,r),e.addEventListener("touchcancel",I,r),s=!1,i=z.touches[0].clientX,o=z.touches[0].clientY)}function B(z){s||Math.abs(z.touches[0].clientX-i)<=10&&Math.abs(z.touches[0].clientY-o)<=10||(s=!0)}function S(z){a=!1,k(),s||t(z)}function I(){a=!1,s=!1,i=0,o=0}function k(){e.removeEventListener("touchmove",B,r),e.removeEventListener("touchend",S,r),e.removeEventListener("touchcancel",I,r)}function U(){e.removeEventListener("click",g,r),e.removeEventListener("touchstart",b,r),k()}return{remove:U}}),E5}var B5,jT;function qse(){if(jT)return B5;jT=1;function n(S,I){if(!(S instanceof I))throw new TypeError("Cannot call a class as a function")}function e(S,I){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:S}function t(S,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);S.prototype=Object.create(I&&I.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(S,I):S.__proto__=I)}var r=Da(),i=hp(),o=Qse(),a=Nx(),s=Gx(),h=s.refType,g=Wx(),b={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:h,tag:i.string},B=function(S){t(I,S);function I(){var k,U,z;n(this,I);for(var Y=arguments.length,Q=Array(Y),ne=0;ne<Y;ne++)Q[ne]=arguments[ne];return z=(k=(U=e(this,S.call.apply(S,[this].concat(Q))),U),U.ref=r.createRef(),U.addTapListener=function(){var X=U.ref.current;if(X){var q=X.ownerDocument;q&&(U.tapListener=o(q.documentElement,U.handleTap))}},U.handleTap=function(X){U.ref.current.contains(X.target)||U.props.ambManager.button.ref.current.contains(X.target)||U.props.ambManager.closeMenu()},U.setRef=function(X){U.ref.current=X,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(X):U.props.forwardedRef&&(U.props.forwardedRef.current=X)},k),e(U,z)}return I.prototype.componentDidMount=function(){this.props.ambManager.menu=this},I.prototype.componentDidUpdate=function(){var U=this.props.ambManager;U.options.closeOnBlur&&(U.isOpen&&!this.tapListener?this.addTapListener():!U.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),U.isOpen||U.clearItems())},I.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},I.prototype.render=function(){var U=this.props,z=this.props.ambManager,Y=function(){return typeof U.children=="function"?U.children({isOpen:z.isOpen}):z.isOpen?U.children:!1}();if(!Y)return!1;var Q={onKeyDown:z.handleMenuKey,role:"menu",tabIndex:-1};return z.options.closeOnBlur&&(Q.onBlur=z.handleBlur),g(Q,U,b),g(Q,{ref:this.setRef}),r.createElement(U.tag,Q,Y)},I}(r.Component);return B.propTypes=b,B.defaultProps={tag:"div"},B5=r.forwardRef(function(S,I){return r.createElement(a.Consumer,null,function(k){var U={ambManager:k,forwardedRef:I};return g(U,S,{ambManager:b.ambManager,children:b.children,forwardedRef:b.forwardedRef}),r.createElement(B,U,S.children)})}),B5}var O5,NT;function Yse(){if(NT)return O5;NT=1;function n(B,S){if(!(B instanceof S))throw new TypeError("Cannot call a class as a function")}function e(B,S){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:B}function t(B,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);B.prototype=Object.create(S&&S.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(B,S):B.__proto__=S)}var r=Da(),i=hp(),o=Nx(),a=Gx(),s=a.refType,h=Wx(),g={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:s,tag:i.string,text:i.string,value:i.any},b=function(B){t(S,B);function S(){var I,k,U;n(this,S);for(var z=arguments.length,Y=Array(z),Q=0;Q<z;Q++)Y[Q]=arguments[Q];return U=(I=(k=e(this,B.call.apply(B,[this].concat(Y))),k),k.ref=r.createRef(),k.handleKeyDown=function(ne){ne.key!=="Enter"&&ne.key!==" "||k.props.tag==="a"&&k.props.href||(ne.preventDefault(),k.selectItem(ne))},k.selectItem=function(ne){var X=typeof k.props.value<"u"?k.props.value:k.props.children;k.props.ambManager.handleSelection(X,ne)},k.setRef=function(ne){k.ref.current=ne,typeof k.props.forwardedRef=="function"?k.props.forwardedRef(ne):k.props.forwardedRef&&(k.props.forwardedRef.current=ne)},I),e(k,U)}return S.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},S.prototype.render=function(){var k={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return h(k,this.props,g),r.createElement(this.props.tag,k,this.props.children)},S}(r.Component);return b.propTypes=g,b.defaultProps={tag:"div"},O5=r.forwardRef(function(B,S){return r.createElement(o.Consumer,null,function(I){var k={ambManager:I,forwardedRef:S};return h(k,B,{ambManager:g.ambManager,children:g.children,forwardedRef:g.forwardedRef}),r.createElement(b,k,B.children)})}),O5}var I5,GT;function $se(){if(GT)return I5;GT=1;var n=Lj();return I5={Wrapper:Gse(),Button:Wse(),Menu:qse(),MenuItem:Yse(),openMenu:n.openMenu,closeMenu:n.closeMenu},I5}var lb=$se();function WT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Y6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WT(Object(t),!0).forEach(function(r){Fl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qx(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function QT(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function qx(n,e,t){return e&&QT(n.prototype,e),t&&QT(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Fl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nm(){return nm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nm.apply(this,arguments)}function nI(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&$6(n,e)}function K2(n){return K2=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},K2(n)}function $6(n,e){return $6=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},$6(n,e)}function Vse(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hse(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Yx(n,e){if(n==null)return{};var t=Hse(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ip(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Zse(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ip(n)}function rI(n){var e=Vse();return function(){var r=K2(n),i;if(e){var o=K2(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Zse(this,i)}}function Xse(n,e){return tae(n)||rae(n,e)||Fj(n,e)||oae()}function Jse(n){return eae(n)||nae(n)||Fj(n)||iae()}function eae(n){if(Array.isArray(n))return V6(n)}function tae(n){if(Array.isArray(n))return n}function nae(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function rae(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,a,s;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(h){o=!0,s=h}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}return r}}function Fj(n,e){if(n){if(typeof n=="string")return V6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V6(n,e)}}function V6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function iae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sae=qx(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,o=e.allowMultipleExpanded,a=o===void 0?!1:o,s=e.allowZeroExpanded,h=s===void 0?!1:s;Qx(this,n),Fl(this,"expanded",void 0),Fl(this,"allowMultipleExpanded",void 0),Fl(this,"allowZeroExpanded",void 0),Fl(this,"toggleExpanded",function(g){if(t.isItemDisabled(g))return t;var b=t.isItemExpanded(g);return b?t.augment({expanded:t.expanded.filter(function(B){return B!==g})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(Jse(t.expanded),[g]):[g]})}),Fl(this,"isItemDisabled",function(g){var b=t.isItemExpanded(g),B=t.expanded.length===1;return!!(b&&!t.allowZeroExpanded&&B)}),Fl(this,"isItemExpanded",function(g){return t.expanded.indexOf(g)!==-1}),Fl(this,"getPanelAttributes",function(g,b){var B=b??t.isItemExpanded(g);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!B:void 0,"aria-labelledby":t.getButtonId(g),id:t.getPanelId(g),hidden:B?void 0:!0}}),Fl(this,"getHeadingAttributes",function(){return{role:"heading"}}),Fl(this,"getButtonAttributes",function(g,b){var B=b??t.isItemExpanded(g),S=t.isItemDisabled(g);return{id:t.getButtonId(g),"aria-disabled":S,"aria-expanded":B,"aria-controls":t.getPanelId(g),role:"button",tabIndex:0}}),Fl(this,"getPanelId",function(g){return"accordion__panel-".concat(g)}),Fl(this,"getButtonId",function(g){return"accordion__heading-".concat(g)}),Fl(this,"augment",function(g){return new n(Y6({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},g))}),this.expanded=i,this.allowMultipleExpanded=a,this.allowZeroExpanded=h}),Uj=Ai.createContext(null),zj=function(n){nI(t,n);var e=rI(t);function t(){var r;Qx(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),Fl(ip(r),"state",new sae({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),Fl(ip(r),"toggleExpanded",function(s){r.setState(function(h){return h.toggleExpanded(s)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),Fl(ip(r),"isItemDisabled",function(s){return r.state.isItemDisabled(s)}),Fl(ip(r),"isItemExpanded",function(s){return r.state.isItemExpanded(s)}),Fl(ip(r),"getPanelAttributes",function(s,h){return r.state.getPanelAttributes(s,h)}),Fl(ip(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),Fl(ip(r),"getButtonAttributes",function(s,h){return r.state.getButtonAttributes(s,h)}),r}return qx(t,[{key:"render",value:function(){var i=this.state,o=i.allowZeroExpanded,a=i.allowMultipleExpanded;return Ai.createElement(Uj.Provider,{value:{allowMultipleExpanded:a,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(Ai.PureComponent);Fl(zj,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var jj=function(n){nI(t,n);var e=rI(t);function t(){var r;Qx(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),Fl(ip(r),"renderChildren",function(s){return s?r.props.children(s):null}),r}return qx(t,[{key:"render",value:function(){return Ai.createElement(Uj.Consumer,null,this.renderChildren)}}]),t}(Ai.PureComponent),aae=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],lae=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,o=e.allowZeroExpanded,a=e.onChange,s=e.preExpanded,h=Yx(e,aae);return Ai.createElement(zj,{preExpanded:s,allowMultipleExpanded:i,allowZeroExpanded:o,onChange:a},Ai.createElement("div",nm({"data-accordion-component":"Accordion",className:r},h)))},H6;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(H6||(H6={}));var Nj=H6,k5=0;function uae(){var n=k5;return k5=k5+1,"raa-".concat(n)}var Aae=Ai.useId||uae,cae=/[\u0009\u000a\u000c\u000d\u0020]/g;function x_(n){return n===""||cae.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var Gj=Ai.createContext(null),hae=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,o=e.dangerouslySetExpanded,a=function(){i.toggleExpanded(r)},s=function(g){var b=o??g.isItemExpanded(r),B=g.isItemDisabled(r),S=g.getPanelAttributes(r,o),I=g.getHeadingAttributes(r),k=g.getButtonAttributes(r,o);return Ai.createElement(Gj.Provider,{value:{uuid:r,expanded:b,disabled:B,toggleExpanded:a,panelAttributes:S,headingAttributes:I,buttonAttributes:k}},t)};return Ai.createElement(jj,null,s)},dae=function(e){return Ai.createElement(jj,null,function(t){return Ai.createElement(hae,nm({},e,{accordionContext:t}))})},$x=function(e){var t=e.children,r=function(o){return o?t(o):null};return Ai.createElement(Gj.Consumer,null,r)},fae=["uuid","dangerouslySetExpanded","className","activeClassName"],Wj=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,o=i===void 0?"accordion__item":i,a=e.activeClassName,s=Yx(e,fae),h=Ai.useState(Aae()),g=Xse(h,1),b=g[0],B=t??b,S=function(k){var U=k.expanded,z=U&&a?a:o;return Ai.createElement("div",nm({"data-accordion-component":"AccordionItem",className:z},s))};return x_(B.toString()),s.id&&x_(s.id),Ai.createElement(dae,{uuid:B,dangerouslySetExpanded:r},Ai.createElement($x,null,S))};Wj.displayName=Nj.AccordionItem;function Qj(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Qj(n.parentElement))}function Vx(n){var e=Qj(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function pae(n){var e=Vx(n)||[],t=e[0];t&&t.focus()}function mae(n){var e=Vx(n)||[],t=e[e.length-1];t&&t.focus()}function gae(n){var e=Vx(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function yae(n){var e=Vx(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Im={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},vae=["toggleExpanded","className"],_ae=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,o=Yx(e,vae),a=function(h){var g=h.key;if((g===Im.ENTER||g===Im.SPACE||g===Im.SPACE_DEPRECATED)&&(h.preventDefault(),t()),h.target instanceof HTMLElement)switch(g){case Im.HOME:{h.preventDefault(),pae(h.target);break}case Im.END:{h.preventDefault(),mae(h.target);break}case Im.LEFT:case Im.UP:{h.preventDefault(),yae(h.target);break}case Im.RIGHT:case Im.DOWN:{h.preventDefault(),gae(h.target);break}}};return o.id&&x_(o.id),Ai.createElement("div",nm({className:i},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:a,"data-accordion-component":"AccordionItemButton"}))},Cae=function(e){return Ai.createElement($x,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return Ai.createElement(_ae,nm({toggleExpanded:r},e,i))})},bae={className:"accordion__heading","aria-level":3},xae=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

“The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.”

`,qj=function(n){nI(t,n);var e=rI(t);function t(){var r;Qx(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),Fl(ip(r),"ref",void 0),Fl(ip(r),"setRef",function(s){r.ref=s}),r}return qx(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return Ai.createElement("div",nm({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(xae)}}]),t}(Ai.PureComponent);Fl(qj,"defaultProps",bae);var Yj=function(e){return Ai.createElement($x,null,function(t){var r=t.headingAttributes;return e.id&&x_(e.id),Ai.createElement(qj,nm({},e,r))})};Yj.displayName=Nj.AccordionItemHeading;var wae=["className","region","id"],Mae=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,o=e.id,a=Yx(e,wae),s=function(g){var b=g.panelAttributes;o&&x_(o);var B=Y6(Y6({},b),{},{"aria-labelledby":i?b["aria-labelledby"]:void 0});return Ai.createElement("div",nm({"data-accordion-component":"AccordionItemPanel",className:r},a,B,{role:i?"region":void 0}))};return Ai.createElement($x,null,s)},Ob={exports:{}},Sae=Ob.exports,qT;function Hx(){return qT||(qT=1,function(n,e){(function(t,r){n.exports=r()})(Sae,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),o=/MSIE \d/.test(t),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),s=/Edge\/(\d+)/.exec(t),h=o||a||s,g=h&&(o?document.documentMode||6:+(s||a)[1]),b=!s&&/WebKit\//.test(t),B=b&&/Qt\/\d+\.\d+/.test(t),S=!s&&/Chrome\/(\d+)/.exec(t),I=S&&+S[1],k=/Opera\//.test(t),U=/Apple Computer/.test(navigator.vendor),z=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),Y=/PhantomJS/.test(t),Q=U&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),ne=/Android/.test(t),X=Q||ne||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),q=Q||/Mac/.test(r),J=/\bCrOS\b/.test(t),N=/win/i.test(r),ie=k&&t.match(/Version\/(\d*\.\d*)/);ie&&(ie=Number(ie[1])),ie&&ie>=15&&(k=!1,b=!0);var he=q&&(B||k&&(ie==null||ie<12.11)),ce=i||h&&g>=9;function we(A){return new RegExp("(^|\\s)"+A+"(?:$|\\s)\\s*")}var pe=function(A,y){var O=A.className,E=we(y).exec(O);if(E){var K=O.slice(E.index+E[0].length);A.className=O.slice(0,E.index)+(K?E[1]+K:"")}};function Ce(A){for(var y=A.childNodes.length;y>0;--y)A.removeChild(A.firstChild);return A}function Pe(A,y){return Ce(A).appendChild(y)}function de(A,y,O,E){var K=document.createElement(A);if(O&&(K.className=O),E&&(K.style.cssText=E),typeof y=="string")K.appendChild(document.createTextNode(y));else if(y)for(var H=0;H<y.length;++H)K.appendChild(y[H]);return K}function rt(A,y,O,E){var K=de(A,y,O,E);return K.setAttribute("role","presentation"),K}var ze;document.createRange?ze=function(A,y,O,E){var K=document.createRange();return K.setEnd(E||A,O),K.setStart(A,y),K}:ze=function(A,y,O){var E=document.body.createTextRange();try{E.moveToElementText(A.parentNode)}catch{return E}return E.collapse(!0),E.moveEnd("character",O),E.moveStart("character",y),E};function Qe(A,y){if(y.nodeType==3&&(y=y.parentNode),A.contains)return A.contains(y);do if(y.nodeType==11&&(y=y.host),y==A)return!0;while(y=y.parentNode)}function ut(A){var y=A.ownerDocument||A,O;try{O=A.activeElement}catch{O=y.body||null}for(;O&&O.shadowRoot&&O.shadowRoot.activeElement;)O=O.shadowRoot.activeElement;return O}function Te(A,y){var O=A.className;we(y).test(O)||(A.className+=(O?" ":"")+y)}function Ue(A,y){for(var O=A.split(" "),E=0;E<O.length;E++)O[E]&&!we(O[E]).test(y)&&(y+=" "+O[E]);return y}var st=function(A){A.select()};Q?st=function(A){A.selectionStart=0,A.selectionEnd=A.value.length}:h&&(st=function(A){try{A.select()}catch{}});function wt(A){return A.display.wrapper.ownerDocument}function mt(A){return ft(A.display.wrapper)}function ft(A){return A.getRootNode?A.getRootNode():A.ownerDocument}function Ut(A){return wt(A).defaultView}function Lt(A){var y=Array.prototype.slice.call(arguments,1);return function(){return A.apply(null,y)}}function De(A,y,O){y||(y={});for(var E in A)A.hasOwnProperty(E)&&(O!==!1||!y.hasOwnProperty(E))&&(y[E]=A[E]);return y}function ke(A,y,O,E,K){y==null&&(y=A.search(/[^\s\u00a0]/),y==-1&&(y=A.length));for(var H=E||0,le=K||0;;){var ve=A.indexOf("	",H);if(ve<0||ve>=y)return le+(y-H);le+=ve-H,le+=O-le%O,H=ve+1}}var Oe=function(){this.id=null,this.f=null,this.time=0,this.handler=Lt(this.onTimeout,this)};Oe.prototype.onTimeout=function(A){A.id=0,A.time<=+new Date?A.f():setTimeout(A.handler,A.time-+new Date)},Oe.prototype.set=function(A,y){this.f=y;var O=+new Date+A;(!this.id||O<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,A),this.time=O)};function Je(A,y){for(var O=0;O<A.length;++O)if(A[O]==y)return O;return-1}var Mt=50,gt={toString:function(){return"CodeMirror.Pass"}},Nt={scroll:!1},nn={origin:"*mouse"},en={origin:"+move"};function Sn(A,y,O){for(var E=0,K=0;;){var H=A.indexOf("	",E);H==-1&&(H=A.length);var le=H-E;if(H==A.length||K+le>=y)return E+Math.min(le,y-K);if(K+=H-E,K+=O-K%O,E=H+1,K>=y)return E}}var Yn=[""];function Qr(A){for(;Yn.length<=A;)Yn.push(cr(Yn)+" ");return Yn[A]}function cr(A){return A[A.length-1]}function fr(A,y){for(var O=[],E=0;E<A.length;E++)O[E]=y(A[E],E);return O}function br(A,y,O){for(var E=0,K=O(y);E<A.length&&O(A[E])<=K;)E++;A.splice(E,0,y)}function Cr(){}function Mr(A,y){var O;return Object.create?O=Object.create(A):(Cr.prototype=A,O=new Cr),y&&De(y,O),O}var Qn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Sr(A){return/\w/.test(A)||A>""&&(A.toUpperCase()!=A.toLowerCase()||Qn.test(A))}function Ge(A,y){return y?y.source.indexOf("\\w")>-1&&Sr(A)?!0:y.test(A):Sr(A)}function ue(A){for(var y in A)if(A.hasOwnProperty(y)&&A[y])return!1;return!0}var me=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Xe(A){return A.charCodeAt(0)>=768&&me.test(A)}function Bt(A,y,O){for(;(O<0?y>0:y<A.length)&&Xe(A.charAt(y));)y+=O;return y}function Yt(A,y,O){for(var E=y>O?-1:1;;){if(y==O)return y;var K=(y+O)/2,H=E<0?Math.ceil(K):Math.floor(K);if(H==y)return A(H)?y:O;A(H)?O=H:y=H+E}}function it(A,y,O,E){if(!A)return E(y,O,"ltr",0);for(var K=!1,H=0;H<A.length;++H){var le=A[H];(le.from<O&&le.to>y||y==O&&le.to==y)&&(E(Math.max(le.from,y),Math.min(le.to,O),le.level==1?"rtl":"ltr",H),K=!0)}K||E(y,O,"ltr")}var Kt=null;function Ye(A,y,O){var E;Kt=null;for(var K=0;K<A.length;++K){var H=A[K];if(H.from<y&&H.to>y)return K;H.to==y&&(H.from!=H.to&&O=="before"?E=K:Kt=K),H.from==y&&(H.from!=H.to&&O!="before"?E=K:Kt=K)}return E??Kt}var fe=function(){var A="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",y="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function O(Fe){return Fe<=247?A.charAt(Fe):1424<=Fe&&Fe<=1524?"R":1536<=Fe&&Fe<=1785?y.charAt(Fe-1536):1774<=Fe&&Fe<=2220?"r":8192<=Fe&&Fe<=8203?"w":Fe==8204?"b":"L"}var E=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,K=/[stwN]/,H=/[LRr]/,le=/[Lb1n]/,ve=/[1n]/;function Be(Fe,ht,xt){this.level=Fe,this.from=ht,this.to=xt}return function(Fe,ht){var xt=ht=="ltr"?"L":"R";if(Fe.length==0||ht=="ltr"&&!E.test(Fe))return!1;for(var Xt=Fe.length,Qt=[],xn=0;xn<Xt;++xn)Qt.push(O(Fe.charCodeAt(xn)));for(var Rn=0,$n=xt;Rn<Xt;++Rn){var Jn=Qt[Rn];Jn=="m"?Qt[Rn]=$n:$n=Jn}for(var yr=0,ar=xt;yr<Xt;++yr){var Lr=Qt[yr];Lr=="1"&&ar=="r"?Qt[yr]="n":H.test(Lr)&&(ar=Lr,Lr=="r"&&(Qt[yr]="R"))}for(var ai=1,Nr=Qt[0];ai<Xt-1;++ai){var Ji=Qt[ai];Ji=="+"&&Nr=="1"&&Qt[ai+1]=="1"?Qt[ai]="1":Ji==","&&Nr==Qt[ai+1]&&(Nr=="1"||Nr=="n")&&(Qt[ai]=Nr),Nr=Ji}for(var Io=0;Io<Xt;++Io){var Ga=Qt[Io];if(Ga==",")Qt[Io]="N";else if(Ga=="%"){var aa=void 0;for(aa=Io+1;aa<Xt&&Qt[aa]=="%";++aa);for(var Ca=Io&&Qt[Io-1]=="!"||aa<Xt&&Qt[aa]=="1"?"1":"N",ba=Io;ba<aa;++ba)Qt[ba]=Ca;Io=aa-1}}for(var ka=0,Yl=xt;ka<Xt;++ka){var Wa=Qt[ka];Yl=="L"&&Wa=="1"?Qt[ka]="L":H.test(Wa)&&(Yl=Wa)}for(var xa=0;xa<Xt;++xa)if(K.test(Qt[xa])){var ds=void 0;for(ds=xa+1;ds<Xt&&K.test(Qt[ds]);++ds);for(var yi=(xa?Qt[xa-1]:xt)=="L",Zo=(ds<Xt?Qt[ds]:xt)=="L",la=yi==Zo?yi?"L":"R":xt,fa=xa;fa<ds;++fa)Qt[fa]=la;xa=ds-1}for(var Is=[],Kl,Po=0;Po<Xt;)if(le.test(Qt[Po])){var Ph=Po;for(++Po;Po<Xt&&le.test(Qt[Po]);++Po);Is.push(new Be(0,Ph,Po))}else{var yl=Po,PA=Is.length,Xc=ht=="rtl"?1:0;for(++Po;Po<Xt&&Qt[Po]!="L";++Po);for(var vl=yl;vl<Po;)if(ve.test(Qt[vl])){yl<vl&&(Is.splice(PA,0,new Be(1,yl,vl)),PA+=Xc);var _l=vl;for(++vl;vl<Po&&ve.test(Qt[vl]);++vl);Is.splice(PA,0,new Be(2,_l,vl)),PA+=Xc,yl=vl}else++vl;yl<Po&&Is.splice(PA,0,new Be(1,yl,Po))}return ht=="ltr"&&(Is[0].level==1&&(Kl=Fe.match(/^\s+/))&&(Is[0].from=Kl[0].length,Is.unshift(new Be(0,0,Kl[0].length))),cr(Is).level==1&&(Kl=Fe.match(/\s+$/))&&(cr(Is).to-=Kl[0].length,Is.push(new Be(0,Xt-Kl[0].length,Xt)))),ht=="rtl"?Is.reverse():Is}}();function xe(A,y){var O=A.order;return O==null&&(O=A.order=fe(A.text,y)),O}var p=[],Ne=function(A,y,O){if(A.addEventListener)A.addEventListener(y,O,!1);else if(A.attachEvent)A.attachEvent("on"+y,O);else{var E=A._handlers||(A._handlers={});E[y]=(E[y]||p).concat(O)}};function dt(A,y){return A._handlers&&A._handlers[y]||p}function pt(A,y,O){if(A.removeEventListener)A.removeEventListener(y,O,!1);else if(A.detachEvent)A.detachEvent("on"+y,O);else{var E=A._handlers,K=E&&E[y];if(K){var H=Je(K,O);H>-1&&(E[y]=K.slice(0,H).concat(K.slice(H+1)))}}}function Ot(A,y){var O=dt(A,y);if(O.length)for(var E=Array.prototype.slice.call(arguments,2),K=0;K<O.length;++K)O[K].apply(null,E)}function _t(A,y,O){return typeof y=="string"&&(y={type:y,preventDefault:function(){this.defaultPrevented=!0}}),Ot(A,O||y.type,A,y),En(y)||y.codemirrorIgnore}function rn(A){var y=A._handlers&&A._handlers.cursorActivity;if(y)for(var O=A.curOp.cursorActivityHandlers||(A.curOp.cursorActivityHandlers=[]),E=0;E<y.length;++E)Je(O,y[E])==-1&&O.push(y[E])}function Zt(A,y){return dt(A,y).length>0}function Gt(A){A.prototype.on=function(y,O){Ne(this,y,O)},A.prototype.off=function(y,O){pt(this,y,O)}}function bt(A){A.preventDefault?A.preventDefault():A.returnValue=!1}function Pn(A){A.stopPropagation?A.stopPropagation():A.cancelBubble=!0}function En(A){return A.defaultPrevented!=null?A.defaultPrevented:A.returnValue==!1}function lr(A){bt(A),Pn(A)}function wr(A){return A.target||A.srcElement}function on(A){var y=A.which;return y==null&&(A.button&1?y=1:A.button&2?y=3:A.button&4&&(y=2)),q&&A.ctrlKey&&y==1&&(y=3),y}var zn=function(){if(h&&g<9)return!1;var A=de("div");return"draggable"in A||"dragDrop"in A}(),Dn;function Br(A){if(Dn==null){var y=de("span","​");Pe(A,de("span",[y,document.createTextNode("x")])),A.firstChild.offsetHeight!=0&&(Dn=y.offsetWidth<=1&&y.offsetHeight>2&&!(h&&g<8))}var O=Dn?de("span","​"):de("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return O.setAttribute("cm-text",""),O}var xr;function Rr(A){if(xr!=null)return xr;var y=Pe(A,document.createTextNode("AخA")),O=ze(y,0,1).getBoundingClientRect(),E=ze(y,1,2).getBoundingClientRect();return Ce(A),!O||O.left==O.right?!1:xr=E.right-O.right<3}var rr=`

b`.split(/\n/).length!=3?function(A){for(var y=0,O=[],E=A.length;y<=E;){var K=A.indexOf(`
`,y);K==-1&&(K=A.length);var H=A.slice(y,A.charAt(K-1)=="\r"?K-1:K),le=H.indexOf("\r");le!=-1?(O.push(H.slice(0,le)),y+=le+1):(O.push(H),y=K+1)}return O}:function(A){return A.split(/\r\n?|\n/)},co=window.getSelection?function(A){try{return A.selectionStart!=A.selectionEnd}catch{return!1}}:function(A){var y;try{y=A.ownerDocument.selection.createRange()}catch{}return!y||y.parentElement()!=A?!1:y.compareEndPoints("StartToEnd",y)!=0},$a=function(){var A=de("div");return"oncopy"in A?!0:(A.setAttribute("oncopy","return;"),typeof A.oncopy=="function")}(),ji=null;function ui(A){if(ji!=null)return ji;var y=Pe(A,de("span","x")),O=y.getBoundingClientRect(),E=ze(y,0,1).getBoundingClientRect();return ji=Math.abs(O.left-E.left)>1}var Vi={},as={};function Ni(A,y){arguments.length>2&&(y.dependencies=Array.prototype.slice.call(arguments,2)),Vi[A]=y}function ll(A,y){as[A]=y}function ul(A){if(typeof A=="string"&&as.hasOwnProperty(A))A=as[A];else if(A&&typeof A.name=="string"&&as.hasOwnProperty(A.name)){var y=as[A.name];typeof y=="string"&&(y={name:y}),A=Mr(y,A),A.name=y.name}else{if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(A))return ul("application/xml");if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(A))return ul("application/json")}return typeof A=="string"?{name:A}:A||{name:"null"}}function ts(A,y){y=ul(y);var O=Vi[y.name];if(!O)return ts(A,"text/plain");var E=O(A,y);if(Aa.hasOwnProperty(y.name)){var K=Aa[y.name];for(var H in K)K.hasOwnProperty(H)&&(E.hasOwnProperty(H)&&(E["_"+H]=E[H]),E[H]=K[H])}if(E.name=y.name,y.helperType&&(E.helperType=y.helperType),y.modeProps)for(var le in y.modeProps)E[le]=y.modeProps[le];return E}var Aa={};function Al(A,y){var O=Aa.hasOwnProperty(A)?Aa[A]:Aa[A]={};De(y,O)}function ao(A,y){if(y===!0)return y;if(A.copyState)return A.copyState(y);var O={};for(var E in y){var K=y[E];K instanceof Array&&(K=K.concat([])),O[E]=K}return O}function Pu(A,y){for(var O;A.innerMode&&(O=A.innerMode(y),!(!O||O.mode==A));)y=O.state,A=O.mode;return O||{mode:A,state:y}}function tu(A,y,O){return A.startState?A.startState(y,O):!0}var so=function(A,y,O){this.pos=this.start=0,this.string=A,this.tabSize=y||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=O};so.prototype.eol=function(){return this.pos>=this.string.length},so.prototype.sol=function(){return this.pos==this.lineStart},so.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},so.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},so.prototype.eat=function(A){var y=this.string.charAt(this.pos),O;if(typeof A=="string"?O=y==A:O=y&&(A.test?A.test(y):A(y)),O)return++this.pos,y},so.prototype.eatWhile=function(A){for(var y=this.pos;this.eat(A););return this.pos>y},so.prototype.eatSpace=function(){for(var A=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>A},so.prototype.skipToEnd=function(){this.pos=this.string.length},so.prototype.skipTo=function(A){var y=this.string.indexOf(A,this.pos);if(y>-1)return this.pos=y,!0},so.prototype.backUp=function(A){this.pos-=A},so.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ke(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ke(this.string,this.lineStart,this.tabSize):0)},so.prototype.indentation=function(){return ke(this.string,null,this.tabSize)-(this.lineStart?ke(this.string,this.lineStart,this.tabSize):0)},so.prototype.match=function(A,y,O){if(typeof A=="string"){var E=function(le){return O?le.toLowerCase():le},K=this.string.substr(this.pos,A.length);if(E(K)==E(A))return y!==!1&&(this.pos+=A.length),!0}else{var H=this.string.slice(this.pos).match(A);return H&&H.index>0?null:(H&&y!==!1&&(this.pos+=H[0].length),H)}},so.prototype.current=function(){return this.string.slice(this.start,this.pos)},so.prototype.hideFirstChars=function(A,y){this.lineStart+=A;try{return y()}finally{this.lineStart-=A}},so.prototype.lookAhead=function(A){var y=this.lineOracle;return y&&y.lookAhead(A)},so.prototype.baseToken=function(){var A=this.lineOracle;return A&&A.baseToken(this.pos)};function Kr(A,y){if(y-=A.first,y<0||y>=A.size)throw new Error("There is no line "+(y+A.first)+" in the document.");for(var O=A;!O.lines;)for(var E=0;;++E){var K=O.children[E],H=K.chunkSize();if(y<H){O=K;break}y-=H}return O.lines[y]}function Va(A,y,O){var E=[],K=y.line;return A.iter(y.line,O.line+1,function(H){var le=H.text;K==O.line&&(le=le.slice(0,O.ch)),K==y.line&&(le=le.slice(y.ch)),E.push(le),++K}),E}function Ts(A,y,O){var E=[];return A.iter(y,O,function(K){E.push(K.text)}),E}function ia(A,y){var O=y-A.height;if(O)for(var E=A;E;E=E.parent)E.height+=O}function We(A){if(A.parent==null)return null;for(var y=A.parent,O=Je(y.lines,A),E=y.parent;E;y=E,E=E.parent)for(var K=0;E.children[K]!=y;++K)O+=E.children[K].chunkSize();return O+y.first}function Ct(A,y){var O=A.first;e:do{for(var E=0;E<A.children.length;++E){var K=A.children[E],H=K.height;if(y<H){A=K;continue e}y-=H,O+=K.chunkSize()}return O}while(!A.lines);for(var le=0;le<A.lines.length;++le){var ve=A.lines[le],Be=ve.height;if(y<Be)break;y-=Be}return O+le}function pn(A,y){return y>=A.first&&y<A.first+A.size}function Nn(A,y){return String(A.lineNumberFormatter(y+A.firstLineNumber))}function An(A,y,O){if(O===void 0&&(O=null),!(this instanceof An))return new An(A,y,O);this.line=A,this.ch=y,this.sticky=O}function er(A,y){return A.line-y.line||A.ch-y.ch}function Ti(A,y){return A.sticky==y.sticky&&er(A,y)==0}function ho(A){return An(A.line,A.ch)}function vs(A,y){return er(A,y)<0?y:A}function js(A,y){return er(A,y)<0?A:y}function vA(A,y){return Math.max(A.first,Math.min(y,A.first+A.size-1))}function ri(A,y){if(y.line<A.first)return An(A.first,0);var O=A.first+A.size-1;return y.line>O?An(O,Kr(A,O).text.length):wi(y,Kr(A,y.line).text.length)}function wi(A,y){var O=A.ch;return O==null||O>y?An(A.line,y):O<0?An(A.line,0):A}function Ha(A,y){for(var O=[],E=0;E<y.length;E++)O[E]=ri(A,y[E]);return O}var ci=function(A,y){this.state=A,this.lookAhead=y},ca=function(A,y,O,E){this.state=y,this.doc=A,this.line=O,this.maxLookAhead=E||0,this.baseTokens=null,this.baseTokenPos=1};ca.prototype.lookAhead=function(A){var y=this.doc.getLine(this.line+A);return y!=null&&A>this.maxLookAhead&&(this.maxLookAhead=A),y},ca.prototype.baseToken=function(A){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=A;)this.baseTokenPos+=2;var y=this.baseTokens[this.baseTokenPos+1];return{type:y&&y.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-A}},ca.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ca.fromSaved=function(A,y,O){return y instanceof ci?new ca(A,ao(A.mode,y.state),O,y.lookAhead):new ca(A,ao(A.mode,y),O)},ca.prototype.save=function(A){var y=A!==!1?ao(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ci(y,this.maxLookAhead):y};function iA(A,y,O,E){var K=[A.state.modeGen],H={};zl(A,y.text,A.doc.mode,O,function(Fe,ht){return K.push(Fe,ht)},H,E);for(var le=O.state,ve=function(Fe){O.baseTokens=K;var ht=A.state.overlays[Fe],xt=1,Xt=0;O.state=!0,zl(A,y.text,ht.mode,O,function(Qt,xn){for(var Rn=xt;Xt<Qt;){var $n=K[xt];$n>Qt&&K.splice(xt,1,Qt,K[xt+1],$n),xt+=2,Xt=Math.min(Qt,$n)}if(xn)if(ht.opaque)K.splice(Rn,xt-Rn,Qt,"overlay "+xn),xt=Rn+2;else for(;Rn<xt;Rn+=2){var Jn=K[Rn+1];K[Rn+1]=(Jn?Jn+" ":"")+"overlay "+xn}},H),O.state=le,O.baseTokens=null,O.baseTokenPos=1},Be=0;Be<A.state.overlays.length;++Be)ve(Be);return{styles:K,classes:H.bgClass||H.textClass?H:null}}function ls(A,y,O){if(!y.styles||y.styles[0]!=A.state.modeGen){var E=Dr(A,We(y)),K=y.text.length>A.options.maxHighlightLength&&ao(A.doc.mode,E.state),H=iA(A,y,E);K&&(E.state=K),y.stateAfter=E.save(!K),y.styles=H.styles,H.classes?y.styleClasses=H.classes:y.styleClasses&&(y.styleClasses=null),O===A.doc.highlightFrontier&&(A.doc.modeFrontier=Math.max(A.doc.modeFrontier,++A.doc.highlightFrontier))}return y.styles}function Dr(A,y,O){var E=A.doc,K=A.display;if(!E.mode.startState)return new ca(E,!0,y);var H=ns(A,y,O),le=H>E.first&&Kr(E,H-1).stateAfter,ve=le?ca.fromSaved(E,le,H):new ca(E,tu(E.mode),H);return E.iter(H,y,function(Be){Ei(A,Be.text,ve);var Fe=ve.line;Be.stateAfter=Fe==y-1||Fe%5==0||Fe>=K.viewFrom&&Fe<K.viewTo?ve.save():null,ve.nextLine()}),O&&(E.modeFrontier=ve.line),ve}function Ei(A,y,O,E){var K=A.doc.mode,H=new so(y,A.options.tabSize,O);for(H.start=H.pos=E||0,y==""&&Za(K,O.state);!H.eol();)Ps(K,H,O.state),H.start=H.pos}function Za(A,y){if(A.blankLine)return A.blankLine(y);if(A.innerMode){var O=Pu(A,y);if(O.mode.blankLine)return O.mode.blankLine(O.state)}}function Ps(A,y,O,E){for(var K=0;K<10;K++){E&&(E[0]=Pu(A,O).mode);var H=A.token(y,O);if(y.pos>y.start)return H}throw new Error("Mode "+A.name+" failed to advance stream.")}var Mo=function(A,y,O){this.start=A.start,this.end=A.pos,this.string=A.current(),this.type=y||null,this.state=O};function Ns(A,y,O,E){var K=A.doc,H=K.mode,le;y=ri(K,y);var ve=Kr(K,y.line),Be=Dr(A,y.line,O),Fe=new so(ve.text,A.options.tabSize,Be),ht;for(E&&(ht=[]);(E||Fe.pos<y.ch)&&!Fe.eol();)Fe.start=Fe.pos,le=Ps(H,Fe,Be.state),E&&ht.push(new Mo(Fe,le,ao(K.mode,Be.state)));return E?ht:new Mo(Fe,le,Be.state)}function du(A,y){if(A)for(;;){var O=A.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!O)break;A=A.slice(0,O.index)+A.slice(O.index+O[0].length);var E=O[1]?"bgClass":"textClass";y[E]==null?y[E]=O[2]:new RegExp("(?:^|\\s)"+O[2]+"(?:$|\\s)").test(y[E])||(y[E]+=" "+O[2])}return A}function zl(A,y,O,E,K,H,le){var ve=O.flattenSpans;ve==null&&(ve=A.options.flattenSpans);var Be=0,Fe=null,ht=new so(y,A.options.tabSize,E),xt,Xt=A.options.addModeClass&&[null];for(y==""&&du(Za(O,E.state),H);!ht.eol();){if(ht.pos>A.options.maxHighlightLength?(ve=!1,le&&Ei(A,y,E,ht.pos),ht.pos=y.length,xt=null):xt=du(Ps(O,ht,E.state,Xt),H),Xt){var Qt=Xt[0].name;Qt&&(xt="m-"+(xt?Qt+" "+xt:Qt))}if(!ve||Fe!=xt){for(;Be<ht.start;)Be=Math.min(ht.start,Be+5e3),K(Be,Fe);Fe=xt}ht.start=ht.pos}for(;Be<ht.pos;){var xn=Math.min(ht.pos,Be+5e3);K(xn,Fe),Be=xn}}function ns(A,y,O){for(var E,K,H=A.doc,le=O?-1:y-(A.doc.mode.innerMode?1e3:100),ve=y;ve>le;--ve){if(ve<=H.first)return H.first;var Be=Kr(H,ve-1),Fe=Be.stateAfter;if(Fe&&(!O||ve+(Fe instanceof ci?Fe.lookAhead:0)<=H.modeFrontier))return ve;var ht=ke(Be.text,null,A.options.tabSize);(K==null||E>ht)&&(K=ve-1,E=ht)}return K}function Vs(A,y){if(A.modeFrontier=Math.min(A.modeFrontier,y),!(A.highlightFrontier<y-10)){for(var O=A.first,E=y-1;E>O;E--){var K=Kr(A,E).stateAfter;if(K&&(!(K instanceof ci)||E+K.lookAhead<y)){O=E+1;break}}A.highlightFrontier=Math.min(A.highlightFrontier,O)}}var fo=!1,ms=!1;function ws(){fo=!0}function Xa(){ms=!0}function Rs(A,y,O){this.marker=A,this.from=y,this.to=O}function El(A,y){if(A)for(var O=0;O<A.length;++O){var E=A[O];if(E.marker==y)return E}}function oA(A,y){for(var O,E=0;E<A.length;++E)A[E]!=y&&(O||(O=[])).push(A[E]);return O}function Hi(A,y,O){var E=O&&window.WeakSet&&(O.markedSpans||(O.markedSpans=new WeakSet));E&&A.markedSpans&&E.has(A.markedSpans)?A.markedSpans.push(y):(A.markedSpans=A.markedSpans?A.markedSpans.concat([y]):[y],E&&E.add(A.markedSpans)),y.marker.attachLine(A)}function nu(A,y,O){var E;if(A)for(var K=0;K<A.length;++K){var H=A[K],le=H.marker,ve=H.from==null||(le.inclusiveLeft?H.from<=y:H.from<y);if(ve||H.from==y&&le.type=="bookmark"&&(!O||!H.marker.insertLeft)){var Be=H.to==null||(le.inclusiveRight?H.to>=y:H.to>y);(E||(E=[])).push(new Rs(le,H.from,Be?null:H.to))}}return E}function Fi(A,y,O){var E;if(A)for(var K=0;K<A.length;++K){var H=A[K],le=H.marker,ve=H.to==null||(le.inclusiveRight?H.to>=y:H.to>y);if(ve||H.from==y&&le.type=="bookmark"&&(!O||H.marker.insertLeft)){var Be=H.from==null||(le.inclusiveLeft?H.from<=y:H.from<y);(E||(E=[])).push(new Rs(le,Be?null:H.from-y,H.to==null?null:H.to-y))}}return E}function Jr(A,y){if(y.full)return null;var O=pn(A,y.from.line)&&Kr(A,y.from.line).markedSpans,E=pn(A,y.to.line)&&Kr(A,y.to.line).markedSpans;if(!O&&!E)return null;var K=y.from.ch,H=y.to.ch,le=er(y.from,y.to)==0,ve=nu(O,K,le),Be=Fi(E,H,le),Fe=y.text.length==1,ht=cr(y.text).length+(Fe?K:0);if(ve)for(var xt=0;xt<ve.length;++xt){var Xt=ve[xt];if(Xt.to==null){var Qt=El(Be,Xt.marker);Qt?Fe&&(Xt.to=Qt.to==null?null:Qt.to+ht):Xt.to=K}}if(Be)for(var xn=0;xn<Be.length;++xn){var Rn=Be[xn];if(Rn.to!=null&&(Rn.to+=ht),Rn.from==null){var $n=El(ve,Rn.marker);$n||(Rn.from=ht,Fe&&(ve||(ve=[])).push(Rn))}else Rn.from+=ht,Fe&&(ve||(ve=[])).push(Rn)}ve&&(ve=ru(ve)),Be&&Be!=ve&&(Be=ru(Be));var Jn=[ve];if(!Fe){var yr=y.text.length-2,ar;if(yr>0&&ve)for(var Lr=0;Lr<ve.length;++Lr)ve[Lr].to==null&&(ar||(ar=[])).push(new Rs(ve[Lr].marker,null,null));for(var ai=0;ai<yr;++ai)Jn.push(ar);Jn.push(Be)}return Jn}function ru(A){for(var y=0;y<A.length;++y){var O=A[y];O.from!=null&&O.from==O.to&&O.marker.clearWhenEmpty!==!1&&A.splice(y--,1)}return A.length?A:null}function Gi(A,y,O){var E=null;if(A.iter(y.line,O.line+1,function(Qt){if(Qt.markedSpans)for(var xn=0;xn<Qt.markedSpans.length;++xn){var Rn=Qt.markedSpans[xn].marker;Rn.readOnly&&(!E||Je(E,Rn)==-1)&&(E||(E=[])).push(Rn)}}),!E)return null;for(var K=[{from:y,to:O}],H=0;H<E.length;++H)for(var le=E[H],ve=le.find(0),Be=0;Be<K.length;++Be){var Fe=K[Be];if(!(er(Fe.to,ve.from)<0||er(Fe.from,ve.to)>0)){var ht=[Be,1],xt=er(Fe.from,ve.from),Xt=er(Fe.to,ve.to);(xt<0||!le.inclusiveLeft&&!xt)&&ht.push({from:Fe.from,to:ve.from}),(Xt>0||!le.inclusiveRight&&!Xt)&&ht.push({from:ve.to,to:Fe.to}),K.splice.apply(K,ht),Be+=ht.length-3}}return K}function lo(A){var y=A.markedSpans;if(y){for(var O=0;O<y.length;++O)y[O].marker.detachLine(A);A.markedSpans=null}}function Pi(A,y){if(y){for(var O=0;O<y.length;++O)y[O].marker.attachLine(A);A.markedSpans=y}}function ee(A){return A.inclusiveLeft?-1:0}function Se(A){return A.inclusiveRight?1:0}function tt(A,y){var O=A.lines.length-y.lines.length;if(O!=0)return O;var E=A.find(),K=y.find(),H=er(E.from,K.from)||ee(A)-ee(y);if(H)return-H;var le=er(E.to,K.to)||Se(A)-Se(y);return le||y.id-A.id}function $t(A,y){var O=ms&&A.markedSpans,E;if(O)for(var K=void 0,H=0;H<O.length;++H)K=O[H],K.marker.collapsed&&(y?K.from:K.to)==null&&(!E||tt(E,K.marker)<0)&&(E=K.marker);return E}function Or(A){return $t(A,!0)}function Gn(A){return $t(A,!1)}function si(A,y){var O=ms&&A.markedSpans,E;if(O)for(var K=0;K<O.length;++K){var H=O[K];H.marker.collapsed&&(H.from==null||H.from<y)&&(H.to==null||H.to>y)&&(!E||tt(E,H.marker)<0)&&(E=H.marker)}return E}function hi(A,y,O,E,K){var H=Kr(A,y),le=ms&&H.markedSpans;if(le)for(var ve=0;ve<le.length;++ve){var Be=le[ve];if(Be.marker.collapsed){var Fe=Be.marker.find(0),ht=er(Fe.from,O)||ee(Be.marker)-ee(K),xt=er(Fe.to,E)||Se(Be.marker)-Se(K);if(!(ht>=0&&xt<=0||ht<=0&&xt>=0)&&(ht<=0&&(Be.marker.inclusiveRight&&K.inclusiveLeft?er(Fe.to,O)>=0:er(Fe.to,O)>0)||ht>=0&&(Be.marker.inclusiveRight&&K.inclusiveLeft?er(Fe.from,E)<=0:er(Fe.from,E)<0)))return!0}}}function pr(A){for(var y;y=Or(A);)A=y.find(-1,!0).line;return A}function Ir(A){for(var y;y=Gn(A);)A=y.find(1,!0).line;return A}function vi(A){for(var y,O;y=Gn(A);)A=y.find(1,!0).line,(O||(O=[])).push(A);return O}function So(A,y){var O=Kr(A,y),E=pr(O);return O==E?y:We(E)}function ki(A,y){if(y>A.lastLine())return y;var O=Kr(A,y),E;if(!qr(A,O))return y;for(;E=Gn(O);)O=E.find(1,!0).line;return We(O)+1}function qr(A,y){var O=ms&&y.markedSpans;if(O){for(var E=void 0,K=0;K<O.length;++K)if(E=O[K],!!E.marker.collapsed){if(E.from==null)return!0;if(!E.marker.widgetNode&&E.from==0&&E.marker.inclusiveLeft&&Zi(A,y,E))return!0}}}function Zi(A,y,O){if(O.to==null){var E=O.marker.find(1,!0);return Zi(A,E.line,El(E.line.markedSpans,O.marker))}if(O.marker.inclusiveRight&&O.to==y.text.length)return!0;for(var K=void 0,H=0;H<y.markedSpans.length;++H)if(K=y.markedSpans[H],K.marker.collapsed&&!K.marker.widgetNode&&K.from==O.to&&(K.to==null||K.to!=O.from)&&(K.marker.inclusiveLeft||O.marker.inclusiveRight)&&Zi(A,y,K))return!0}function Xi(A){A=pr(A);for(var y=0,O=A.parent,E=0;E<O.lines.length;++E){var K=O.lines[E];if(K==A)break;y+=K.height}for(var H=O.parent;H;O=H,H=O.parent)for(var le=0;le<H.children.length;++le){var ve=H.children[le];if(ve==O)break;y+=ve.height}return y}function us(A){if(A.height==0)return 0;for(var y=A.text.length,O,E=A;O=Or(E);){var K=O.find(0,!0);E=K.from.line,y+=K.from.ch-K.to.ch}for(E=A;O=Gn(E);){var H=O.find(0,!0);y-=E.text.length-H.from.ch,E=H.to.line,y+=E.text.length-H.to.ch}return y}function ya(A){var y=A.display,O=A.doc;y.maxLine=Kr(O,O.first),y.maxLineLength=us(y.maxLine),y.maxLineChanged=!0,O.iter(function(E){var K=us(E);K>y.maxLineLength&&(y.maxLineLength=K,y.maxLine=E)})}var La=function(A,y,O){this.text=A,Pi(this,y),this.height=O?O(this):1};La.prototype.lineNo=function(){return We(this)},Gt(La);function fu(A,y,O,E){A.text=y,A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null),A.order!=null&&(A.order=null),lo(A),Pi(A,O);var K=E?E(A):1;K!=A.height&&ia(A,K)}function Hs(A){A.parent=null,lo(A)}var hc={},Sa={};function cl(A,y){if(!A||/^\s*$/.test(A))return null;var O=y.addModeClass?Sa:hc;return O[A]||(O[A]=A.replace(/\S+/g,"cm-$&"))}function lh(A,y){var O=rt("span",null,null,b?"padding-right: .1px":null),E={pre:rt("pre",[O],"CodeMirror-line"),content:O,col:0,pos:0,cm:A,trailingSpace:!1,splitSpaces:A.getOption("lineWrapping")};y.measure={};for(var K=0;K<=(y.rest?y.rest.length:0);K++){var H=K?y.rest[K-1]:y.line,le=void 0;E.pos=0,E.addToken=Ku,Rr(A.display.measure)&&(le=xe(H,A.doc.direction))&&(E.addToken=Ms(E.addToken,le)),E.map=[];var ve=y!=A.display.externalMeasured&&We(H);uh(H,E,ls(A,H,ve)),H.styleClasses&&(H.styleClasses.bgClass&&(E.bgClass=Ue(H.styleClasses.bgClass,E.bgClass||"")),H.styleClasses.textClass&&(E.textClass=Ue(H.styleClasses.textClass,E.textClass||""))),E.map.length==0&&E.map.push(0,0,E.content.appendChild(Br(A.display.measure))),K==0?(y.measure.map=E.map,y.measure.cache={}):((y.measure.maps||(y.measure.maps=[])).push(E.map),(y.measure.caches||(y.measure.caches=[])).push({}))}if(b){var Be=E.content.lastChild;(/\bcm-tab\b/.test(Be.className)||Be.querySelector&&Be.querySelector(".cm-tab"))&&(E.content.className="cm-tab-wrap-hack")}return Ot(A,"renderLine",A,y.line,E.pre),E.pre.className&&(E.textClass=Ue(E.pre.className,E.textClass||"")),E}function Ru(A){var y=de("span","•","cm-invalidchar");return y.title="\\u"+A.charCodeAt(0).toString(16),y.setAttribute("aria-label",y.title),y}function Ku(A,y,O,E,K,H,le){if(y){var ve=A.splitSpaces?bd(y,A.trailingSpace):y,Be=A.cm.state.specialChars,Fe=!1,ht;if(!Be.test(y))A.col+=y.length,ht=document.createTextNode(ve),A.map.push(A.pos,A.pos+y.length,ht),h&&g<9&&(Fe=!0),A.pos+=y.length;else{ht=document.createDocumentFragment();for(var xt=0;;){Be.lastIndex=xt;var Xt=Be.exec(y),Qt=Xt?Xt.index-xt:y.length-xt;if(Qt){var xn=document.createTextNode(ve.slice(xt,xt+Qt));h&&g<9?ht.appendChild(de("span",[xn])):ht.appendChild(xn),A.map.push(A.pos,A.pos+Qt,xn),A.col+=Qt,A.pos+=Qt}if(!Xt)break;xt+=Qt+1;var Rn=void 0;if(Xt[0]=="	"){var $n=A.cm.options.tabSize,Jn=$n-A.col%$n;Rn=ht.appendChild(de("span",Qr(Jn),"cm-tab")),Rn.setAttribute("role","presentation"),Rn.setAttribute("cm-text","	"),A.col+=Jn}else Xt[0]=="\r"||Xt[0]==`
`?(Rn=ht.appendChild(de("span",Xt[0]=="\r"?"␍":"␤","cm-invalidchar")),Rn.setAttribute("cm-text",Xt[0]),A.col+=1):(Rn=A.cm.options.specialCharPlaceholder(Xt[0]),Rn.setAttribute("cm-text",Xt[0]),h&&g<9?ht.appendChild(de("span",[Rn])):ht.appendChild(Rn),A.col+=1);A.map.push(A.pos,A.pos+1,Rn),A.pos++}}if(A.trailingSpace=ve.charCodeAt(y.length-1)==32,O||E||K||Fe||H||le){var yr=O||"";E&&(yr+=E),K&&(yr+=K);var ar=de("span",[ht],yr,H);if(le)for(var Lr in le)le.hasOwnProperty(Lr)&&Lr!="style"&&Lr!="class"&&ar.setAttribute(Lr,le[Lr]);return A.content.appendChild(ar)}A.content.appendChild(ht)}}function bd(A,y){if(A.length>1&&!/  /.test(A))return A;for(var O=y,E="",K=0;K<A.length;K++){var H=A.charAt(K);H==" "&&O&&(K==A.length-1||A.charCodeAt(K+1)==32)&&(H=" "),E+=H,O=H==" "}return E}function Ms(A,y){return function(O,E,K,H,le,ve,Be){K=K?K+" cm-force-border":"cm-force-border";for(var Fe=O.pos,ht=Fe+E.length;;){for(var xt=void 0,Xt=0;Xt<y.length&&(xt=y[Xt],!(xt.to>Fe&&xt.from<=Fe));Xt++);if(xt.to>=ht)return A(O,E,K,H,le,ve,Be);A(O,E.slice(0,xt.to-Fe),K,H,null,ve,Be),H=null,E=E.slice(xt.to-Fe),Fe=xt.to}}}function Du(A,y,O,E){var K=!E&&O.widgetNode;K&&A.map.push(A.pos,A.pos+y,K),!E&&A.cm.display.input.needsContentAttribute&&(K||(K=A.content.appendChild(document.createElement("span"))),K.setAttribute("cm-marker",O.id)),K&&(A.cm.display.input.setUneditable(K),A.content.appendChild(K)),A.pos+=y,A.trailingSpace=!1}function uh(A,y,O){var E=A.markedSpans,K=A.text,H=0;if(!E){for(var le=1;le<O.length;le+=2)y.addToken(y,K.slice(H,H=O[le]),cl(O[le+1],y.cm.options));return}for(var ve=K.length,Be=0,Fe=1,ht="",xt,Xt,Qt=0,xn,Rn,$n,Jn,yr;;){if(Qt==Be){xn=Rn=$n=Xt="",yr=null,Jn=null,Qt=1/0;for(var ar=[],Lr=void 0,ai=0;ai<E.length;++ai){var Nr=E[ai],Ji=Nr.marker;if(Ji.type=="bookmark"&&Nr.from==Be&&Ji.widgetNode)ar.push(Ji);else if(Nr.from<=Be&&(Nr.to==null||Nr.to>Be||Ji.collapsed&&Nr.to==Be&&Nr.from==Be)){if(Nr.to!=null&&Nr.to!=Be&&Qt>Nr.to&&(Qt=Nr.to,Rn=""),Ji.className&&(xn+=" "+Ji.className),Ji.css&&(Xt=(Xt?Xt+";":"")+Ji.css),Ji.startStyle&&Nr.from==Be&&($n+=" "+Ji.startStyle),Ji.endStyle&&Nr.to==Qt&&(Lr||(Lr=[])).push(Ji.endStyle,Nr.to),Ji.title&&((yr||(yr={})).title=Ji.title),Ji.attributes)for(var Io in Ji.attributes)(yr||(yr={}))[Io]=Ji.attributes[Io];Ji.collapsed&&(!Jn||tt(Jn.marker,Ji)<0)&&(Jn=Nr)}else Nr.from>Be&&Qt>Nr.from&&(Qt=Nr.from)}if(Lr)for(var Ga=0;Ga<Lr.length;Ga+=2)Lr[Ga+1]==Qt&&(Rn+=" "+Lr[Ga]);if(!Jn||Jn.from==Be)for(var aa=0;aa<ar.length;++aa)Du(y,0,ar[aa]);if(Jn&&(Jn.from||0)==Be){if(Du(y,(Jn.to==null?ve+1:Jn.to)-Be,Jn.marker,Jn.from==null),Jn.to==null)return;Jn.to==Be&&(Jn=!1)}}if(Be>=ve)break;for(var Ca=Math.min(ve,Qt);;){if(ht){var ba=Be+ht.length;if(!Jn){var ka=ba>Ca?ht.slice(0,Ca-Be):ht;y.addToken(y,ka,xt?xt+xn:xn,$n,Be+ka.length==Qt?Rn:"",Xt,yr)}if(ba>=Ca){ht=ht.slice(Ca-Be),Be=Ca;break}Be=ba,$n=""}ht=K.slice(H,H=O[Fe++]),xt=cl(O[Fe++],y.cm.options)}}}function gp(A,y,O){this.line=y,this.rest=vi(y),this.size=this.rest?We(cr(this.rest))-O+1:1,this.node=this.text=null,this.hidden=qr(A,y)}function sA(A,y,O){for(var E=[],K,H=y;H<O;H=K){var le=new gp(A.doc,Kr(A.doc,H),H);K=H+le.size,E.push(le)}return E}var qh=null;function Lc(A){qh?qh.ops.push(A):A.ownsGroup=qh={ops:[A],delayedCallbacks:[]}}function yp(A){var y=A.delayedCallbacks,O=0;do{for(;O<y.length;O++)y[O].call(null);for(var E=0;E<A.ops.length;E++){var K=A.ops[E];if(K.cursorActivityHandlers)for(;K.cursorActivityCalled<K.cursorActivityHandlers.length;)K.cursorActivityHandlers[K.cursorActivityCalled++].call(null,K.cm)}}while(O<y.length)}function Rf(A,y){var O=A.ownsGroup;if(O)try{yp(O)}finally{qh=null,y(O)}}var dc=null;function Zs(A,y){var O=dt(A,y);if(O.length){var E=Array.prototype.slice.call(arguments,2),K;qh?K=qh.delayedCallbacks:dc?K=dc:(K=dc=[],setTimeout(xd,0));for(var H=function(ve){K.push(function(){return O[ve].apply(null,E)})},le=0;le<O.length;++le)H(le)}}function xd(){var A=dc;dc=null;for(var y=0;y<A.length;++y)A[y]()}function ef(A,y,O,E){for(var K=0;K<y.changes.length;K++){var H=y.changes[K];H=="text"?fc(A,y):H=="gutter"?Md(A,y,O,E):H=="class"?wd(A,y):H=="widget"&&hh(A,y,E)}y.changes=null}function Ah(A){return A.node==A.text&&(A.node=de("div",null,null,"position: relative"),A.text.parentNode&&A.text.parentNode.replaceChild(A.node,A.text),A.node.appendChild(A.text),h&&g<8&&(A.node.style.zIndex=2)),A.node}function tf(A,y){var O=y.bgClass?y.bgClass+" "+(y.line.bgClass||""):y.line.bgClass;if(O&&(O+=" CodeMirror-linebackground"),y.background)O?y.background.className=O:(y.background.parentNode.removeChild(y.background),y.background=null);else if(O){var E=Ah(y);y.background=E.insertBefore(de("div",null,O),E.firstChild),A.display.input.setUneditable(y.background)}}function ch(A,y){var O=A.display.externalMeasured;return O&&O.line==y.line?(A.display.externalMeasured=null,y.measure=O.measure,O.built):lh(A,y)}function fc(A,y){var O=y.text.className,E=ch(A,y);y.text==y.node&&(y.node=E.pre),y.text.parentNode.replaceChild(E.pre,y.text),y.text=E.pre,E.bgClass!=y.bgClass||E.textClass!=y.textClass?(y.bgClass=E.bgClass,y.textClass=E.textClass,wd(A,y)):O&&(y.text.className=O)}function wd(A,y){tf(A,y),y.line.wrapClass?Ah(y).className=y.line.wrapClass:y.node!=y.text&&(y.node.className="");var O=y.textClass?y.textClass+" "+(y.line.textClass||""):y.line.textClass;y.text.className=O||""}function Md(A,y,O,E){if(y.gutter&&(y.node.removeChild(y.gutter),y.gutter=null),y.gutterBackground&&(y.node.removeChild(y.gutterBackground),y.gutterBackground=null),y.line.gutterClass){var K=Ah(y);y.gutterBackground=de("div",null,"CodeMirror-gutter-background "+y.line.gutterClass,"left: "+(A.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px; width: "+E.gutterTotalWidth+"px"),A.display.input.setUneditable(y.gutterBackground),K.insertBefore(y.gutterBackground,y.text)}var H=y.line.gutterMarkers;if(A.options.lineNumbers||H){var le=Ah(y),ve=y.gutter=de("div",null,"CodeMirror-gutter-wrapper","left: "+(A.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px");if(ve.setAttribute("aria-hidden","true"),A.display.input.setUneditable(ve),le.insertBefore(ve,y.text),y.line.gutterClass&&(ve.className+=" "+y.line.gutterClass),A.options.lineNumbers&&(!H||!H["CodeMirror-linenumbers"])&&(y.lineNumber=ve.appendChild(de("div",Nn(A.options,O),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+E.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+A.display.lineNumInnerWidth+"px"))),H)for(var Be=0;Be<A.display.gutterSpecs.length;++Be){var Fe=A.display.gutterSpecs[Be].className,ht=H.hasOwnProperty(Fe)&&H[Fe];ht&&ve.appendChild(de("div",[ht],"CodeMirror-gutter-elt","left: "+E.gutterLeft[Fe]+"px; width: "+E.gutterWidth[Fe]+"px"))}}}function hh(A,y,O){y.alignable&&(y.alignable=null);for(var E=we("CodeMirror-linewidget"),K=y.node.firstChild,H=void 0;K;K=H)H=K.nextSibling,E.test(K.className)&&y.node.removeChild(K);Fc(A,y,O)}function am(A,y,O,E){var K=ch(A,y);return y.text=y.node=K.pre,K.bgClass&&(y.bgClass=K.bgClass),K.textClass&&(y.textClass=K.textClass),wd(A,y),Md(A,y,O,E),Fc(A,y,E),y.node}function Fc(A,y,O){if(pu(A,y.line,y,O,!0),y.rest)for(var E=0;E<y.rest.length;E++)pu(A,y.rest[E],y,O,!1)}function pu(A,y,O,E,K){if(y.widgets)for(var H=Ah(O),le=0,ve=y.widgets;le<ve.length;++le){var Be=ve[le],Fe=de("div",[Be.node],"CodeMirror-linewidget"+(Be.className?" "+Be.className:""));Be.handleMouseEvents||Fe.setAttribute("cm-ignore-events","true"),Sd(Be,Fe,O,E),A.display.input.setUneditable(Fe),K&&Be.above?H.insertBefore(Fe,O.gutter||O.text):H.appendChild(Fe),Zs(Be,"redraw")}}function Sd(A,y,O,E){if(A.noHScroll){(O.alignable||(O.alignable=[])).push(y);var K=E.wrapperWidth;y.style.left=E.fixedPos+"px",A.coverGutter||(K-=E.gutterTotalWidth,y.style.paddingLeft=E.gutterTotalWidth+"px"),y.style.width=K+"px"}A.coverGutter&&(y.style.zIndex=5,y.style.position="relative",A.noHScroll||(y.style.marginLeft=-E.gutterTotalWidth+"px"))}function mu(A){if(A.height!=null)return A.height;var y=A.doc.cm;if(!y)return 0;if(!Qe(document.body,A.node)){var O="position: relative;";A.coverGutter&&(O+="margin-left: -"+y.display.gutters.offsetWidth+"px;"),A.noHScroll&&(O+="width: "+y.display.wrapper.clientWidth+"px;"),Pe(y.display.measure,de("div",[A.node],null,O))}return A.height=A.node.parentNode.offsetHeight}function aA(A,y){for(var O=wr(y);O!=A.wrapper;O=O.parentNode)if(!O||O.nodeType==1&&O.getAttribute("cm-ignore-events")=="true"||O.parentNode==A.sizer&&O!=A.mover)return!0}function Uc(A){return A.lineSpace.offsetTop}function Yh(A){return A.mover.offsetHeight-A.lineSpace.offsetHeight}function nf(A){if(A.cachedPaddingH)return A.cachedPaddingH;var y=Pe(A.measure,de("pre","x","CodeMirror-line-like")),O=window.getComputedStyle?window.getComputedStyle(y):y.currentStyle,E={left:parseInt(O.paddingLeft),right:parseInt(O.paddingRight)};return!isNaN(E.left)&&!isNaN(E.right)&&(A.cachedPaddingH=E),E}function iu(A){return Mt-A.display.nativeBarWidth}function Bl(A){return A.display.scroller.clientWidth-iu(A)-A.display.barWidth}function WA(A){return A.display.scroller.clientHeight-iu(A)-A.display.barHeight}function zc(A,y,O){var E=A.options.lineWrapping,K=E&&Bl(A);if(!y.measure.heights||E&&y.measure.width!=K){var H=y.measure.heights=[];if(E){y.measure.width=K;for(var le=y.text.firstChild.getClientRects(),ve=0;ve<le.length-1;ve++){var Be=le[ve],Fe=le[ve+1];Math.abs(Be.bottom-Fe.bottom)>2&&H.push((Be.bottom+Fe.top)/2-O.top)}}H.push(O.bottom-O.top)}}function rf(A,y,O){if(A.line==y)return{map:A.measure.map,cache:A.measure.cache};if(A.rest){for(var E=0;E<A.rest.length;E++)if(A.rest[E]==y)return{map:A.measure.maps[E],cache:A.measure.caches[E]};for(var K=0;K<A.rest.length;K++)if(We(A.rest[K])>O)return{map:A.measure.maps[K],cache:A.measure.caches[K],before:!0}}}function Kf(A,y){y=pr(y);var O=We(y),E=A.display.externalMeasured=new gp(A.doc,y,O);E.lineN=O;var K=E.built=lh(A,E);return E.text=K.pre,Pe(A.display.lineMeasure,K.pre),E}function dh(A,y,O,E){return Ol(A,Ja(A,y),O,E)}function _A(A,y){if(y>=A.display.viewFrom&&y<A.display.viewTo)return A.display.view[lA(A,y)];var O=A.display.externalMeasured;if(O&&y>=O.lineN&&y<O.lineN+O.size)return O}function Ja(A,y){var O=We(y),E=_A(A,O);E&&!E.text?E=null:E&&E.changes&&(ef(A,E,O,YA(A)),A.curOp.forceUpdate=!0),E||(E=Kf(A,y));var K=rf(E,y,O);return{line:y,view:E,rect:null,map:K.map,cache:K.cache,before:K.before,hasHeights:!1}}function Ol(A,y,O,E,K){y.before&&(O=-1);var H=O+(E||""),le;return y.cache.hasOwnProperty(H)?le=y.cache[H]:(y.rect||(y.rect=y.view.text.getBoundingClientRect()),y.hasHeights||(zc(A,y.view,y.rect),y.hasHeights=!0),le=jc(A,y,O,E),le.bogus||(y.cache[H]=le)),{left:le.left,right:le.right,top:K?le.rtop:le.top,bottom:K?le.rbottom:le.bottom}}var Yo={left:0,right:0,top:0,bottom:0};function Ed(A,y,O){for(var E,K,H,le,ve,Be,Fe=0;Fe<A.length;Fe+=3)if(ve=A[Fe],Be=A[Fe+1],y<ve?(K=0,H=1,le="left"):y<Be?(K=y-ve,H=K+1):(Fe==A.length-3||y==Be&&A[Fe+3]>y)&&(H=Be-ve,K=H-1,y>=Be&&(le="right")),K!=null){if(E=A[Fe+2],ve==Be&&O==(E.insertLeft?"left":"right")&&(le=O),O=="left"&&K==0)for(;Fe&&A[Fe-2]==A[Fe-3]&&A[Fe-1].insertLeft;)E=A[(Fe-=3)+2],le="left";if(O=="right"&&K==Be-ve)for(;Fe<A.length-3&&A[Fe+3]==A[Fe+4]&&!A[Fe+5].insertLeft;)E=A[(Fe+=3)+2],le="right";break}return{node:E,start:K,end:H,collapse:le,coverStart:ve,coverEnd:Be}}function lm(A,y){var O=Yo;if(y=="left")for(var E=0;E<A.length&&(O=A[E]).left==O.right;E++);else for(var K=A.length-1;K>=0&&(O=A[K]).left==O.right;K--);return O}function jc(A,y,O,E){var K=Ed(y.map,O,E),H=K.node,le=K.start,ve=K.end,Be=K.collapse,Fe;if(H.nodeType==3){for(var ht=0;ht<4;ht++){for(;le&&Xe(y.line.text.charAt(K.coverStart+le));)--le;for(;K.coverStart+ve<K.coverEnd&&Xe(y.line.text.charAt(K.coverStart+ve));)++ve;if(h&&g<9&&le==0&&ve==K.coverEnd-K.coverStart?Fe=H.parentNode.getBoundingClientRect():Fe=lm(ze(H,le,ve).getClientRects(),E),Fe.left||Fe.right||le==0)break;ve=le,le=le-1,Be="right"}h&&g<11&&(Fe=Lu(A.display.measure,Fe))}else{le>0&&(Be=E="right");var xt;A.options.lineWrapping&&(xt=H.getClientRects()).length>1?Fe=xt[E=="right"?xt.length-1:0]:Fe=H.getBoundingClientRect()}if(h&&g<9&&!le&&(!Fe||!Fe.left&&!Fe.right)){var Xt=H.parentNode.getClientRects()[0];Xt?Fe={left:Xt.left,right:Xt.left+Wi(A.display),top:Xt.top,bottom:Xt.bottom}:Fe=Yo}for(var Qt=Fe.top-y.rect.top,xn=Fe.bottom-y.rect.top,Rn=(Qt+xn)/2,$n=y.view.measure.heights,Jn=0;Jn<$n.length-1&&!(Rn<$n[Jn]);Jn++);var yr=Jn?$n[Jn-1]:0,ar=$n[Jn],Lr={left:(Be=="right"?Fe.right:Fe.left)-y.rect.left,right:(Be=="left"?Fe.left:Fe.right)-y.rect.left,top:yr,bottom:ar};return!Fe.left&&!Fe.right&&(Lr.bogus=!0),A.options.singleCursorHeightPerLine||(Lr.rtop=Qt,Lr.rbottom=xn),Lr}function Lu(A,y){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!ui(A))return y;var O=screen.logicalXDPI/screen.deviceXDPI,E=screen.logicalYDPI/screen.deviceYDPI;return{left:y.left*O,right:y.right*O,top:y.top*E,bottom:y.bottom*E}}function $h(A){if(A.measure&&(A.measure.cache={},A.measure.heights=null,A.rest))for(var y=0;y<A.rest.length;y++)A.measure.caches[y]={}}function Vh(A){A.display.externalMeasure=null,Ce(A.display.lineMeasure);for(var y=0;y<A.display.view.length;y++)$h(A.display.view[y])}function pc(A){Vh(A),A.display.cachedCharWidth=A.display.cachedTextHeight=A.display.cachedPaddingH=null,A.options.lineWrapping||(A.display.maxLineChanged=!0),A.display.lineNumChars=null}function Hh(A){return S&&ne?-(A.body.getBoundingClientRect().left-parseInt(getComputedStyle(A.body).marginLeft)):A.defaultView.pageXOffset||(A.documentElement||A.body).scrollLeft}function of(A){return S&&ne?-(A.body.getBoundingClientRect().top-parseInt(getComputedStyle(A.body).marginTop)):A.defaultView.pageYOffset||(A.documentElement||A.body).scrollTop}function mc(A){var y=pr(A),O=y.widgets,E=0;if(O)for(var K=0;K<O.length;++K)O[K].above&&(E+=mu(O[K]));return E}function gu(A,y,O,E,K){if(!K){var H=mc(y);O.top+=H,O.bottom+=H}if(E=="line")return O;E||(E="local");var le=Xi(y);if(E=="local"?le+=Uc(A.display):le-=A.display.viewOffset,E=="page"||E=="window"){var ve=A.display.lineSpace.getBoundingClientRect();le+=ve.top+(E=="window"?0:of(wt(A)));var Be=ve.left+(E=="window"?0:Hh(wt(A)));O.left+=Be,O.right+=Be}return O.top+=le,O.bottom+=le,O}function Vt(A,y,O){if(O=="div")return y;var E=y.left,K=y.top;if(O=="page")E-=Hh(wt(A)),K-=of(wt(A));else if(O=="local"||!O){var H=A.display.sizer.getBoundingClientRect();E+=H.left,K+=H.top}var le=A.display.lineSpace.getBoundingClientRect();return{left:E-le.left,top:K-le.top}}function Tn(A,y,O,E,K){return E||(E=Kr(A.doc,y.line)),gu(A,E,dh(A,E,y.ch,K),O)}function an(A,y,O,E,K,H){E=E||Kr(A.doc,y.line),K||(K=Ja(A,E));function le(xn,Rn){var $n=Ol(A,K,xn,Rn?"right":"left",H);return Rn?$n.left=$n.right:$n.right=$n.left,gu(A,E,$n,O)}var ve=xe(E,A.doc.direction),Be=y.ch,Fe=y.sticky;if(Be>=E.text.length?(Be=E.text.length,Fe="before"):Be<=0&&(Be=0,Fe="after"),!ve)return le(Fe=="before"?Be-1:Be,Fe=="before");function ht(xn,Rn,$n){var Jn=ve[Rn],yr=Jn.level==1;return le($n?xn-1:xn,yr!=$n)}var xt=Ye(ve,Be,Fe),Xt=Kt,Qt=ht(Be,xt,Fe=="before");return Xt!=null&&(Qt.other=ht(Be,Xt,Fe!="before")),Qt}function Fr(A,y){var O=0;y=ri(A.doc,y),A.options.lineWrapping||(O=Wi(A.display)*y.ch);var E=Kr(A.doc,y.line),K=Xi(E)+Uc(A.display);return{left:O,right:O,top:K,bottom:K+E.height}}function _i(A,y,O,E,K){var H=An(A,y,O);return H.xRel=K,E&&(H.outside=E),H}function Co(A,y,O){var E=A.doc;if(O+=A.display.viewOffset,O<0)return _i(E.first,0,null,-1,-1);var K=Ct(E,O),H=E.first+E.size-1;if(K>H)return _i(E.first+E.size-1,Kr(E,H).text.length,null,1,1);y<0&&(y=0);for(var le=Kr(E,K);;){var ve=vp(A,le,K,y,O),Be=si(le,ve.ch+(ve.xRel>0||ve.outside>0?1:0));if(!Be)return ve;var Fe=Be.find(1);if(Fe.line==K)return Fe;le=Kr(E,K=Fe.line)}}function oa(A,y,O,E){E-=mc(y);var K=y.text.length,H=Yt(function(le){return Ol(A,O,le-1).bottom<=E},K,0);return K=Yt(function(le){return Ol(A,O,le).top>E},H,K),{begin:H,end:K}}function $o(A,y,O,E){O||(O=Ja(A,y));var K=gu(A,y,Ol(A,O,E),"line").top;return oa(A,y,O,K)}function QA(A,y,O,E){return A.bottom<=O?!1:A.top>O?!0:(E?A.left:A.right)>y}function vp(A,y,O,E,K){K-=Xi(y);var H=Ja(A,y),le=mc(y),ve=0,Be=y.text.length,Fe=!0,ht=xe(y,A.doc.direction);if(ht){var xt=(A.options.lineWrapping?yu:Il)(A,y,O,H,ht,E,K);Fe=xt.level!=1,ve=Fe?xt.from:xt.to-1,Be=Fe?xt.to:xt.from-1}var Xt=null,Qt=null,xn=Yt(function(ai){var Nr=Ol(A,H,ai);return Nr.top+=le,Nr.bottom+=le,QA(Nr,E,K,!1)?(Nr.top<=K&&Nr.left<=E&&(Xt=ai,Qt=Nr),!0):!1},ve,Be),Rn,$n,Jn=!1;if(Qt){var yr=E-Qt.left<Qt.right-E,ar=yr==Fe;xn=Xt+(ar?0:1),$n=ar?"after":"before",Rn=yr?Qt.left:Qt.right}else{!Fe&&(xn==Be||xn==ve)&&xn++,$n=xn==0?"after":xn==y.text.length?"before":Ol(A,H,xn-(Fe?1:0)).bottom+le<=K==Fe?"after":"before";var Lr=an(A,An(O,xn,$n),"line",y,H);Rn=Lr.left,Jn=K<Lr.top?-1:K>=Lr.bottom?1:0}return xn=Bt(y.text,xn,1),_i(O,xn,$n,Jn,E-Rn)}function Il(A,y,O,E,K,H,le){var ve=Yt(function(xt){var Xt=K[xt],Qt=Xt.level!=1;return QA(an(A,An(O,Qt?Xt.to:Xt.from,Qt?"before":"after"),"line",y,E),H,le,!0)},0,K.length-1),Be=K[ve];if(ve>0){var Fe=Be.level!=1,ht=an(A,An(O,Fe?Be.from:Be.to,Fe?"after":"before"),"line",y,E);QA(ht,H,le,!0)&&ht.top>le&&(Be=K[ve-1])}return Be}function yu(A,y,O,E,K,H,le){var ve=oa(A,y,E,le),Be=ve.begin,Fe=ve.end;/\s/.test(y.text.charAt(Fe-1))&&Fe--;for(var ht=null,xt=null,Xt=0;Xt<K.length;Xt++){var Qt=K[Xt];if(!(Qt.from>=Fe||Qt.to<=Be)){var xn=Qt.level!=1,Rn=Ol(A,E,xn?Math.min(Fe,Qt.to)-1:Math.max(Be,Qt.from)).right,$n=Rn<H?H-Rn+1e9:Rn-H;(!ht||xt>$n)&&(ht=Qt,xt=$n)}}return ht||(ht=K[K.length-1]),ht.from<Be&&(ht={from:Be,to:ht.to,level:ht.level}),ht.to>Fe&&(ht={from:ht.from,to:Fe,level:ht.level}),ht}var qA;function kl(A){if(A.cachedTextHeight!=null)return A.cachedTextHeight;if(qA==null){qA=de("pre",null,"CodeMirror-line-like");for(var y=0;y<49;++y)qA.appendChild(document.createTextNode("x")),qA.appendChild(de("br"));qA.appendChild(document.createTextNode("x"))}Pe(A.measure,qA);var O=qA.offsetHeight/50;return O>3&&(A.cachedTextHeight=O),Ce(A.measure),O||1}function Wi(A){if(A.cachedCharWidth!=null)return A.cachedCharWidth;var y=de("span","xxxxxxxxxx"),O=de("pre",[y],"CodeMirror-line-like");Pe(A.measure,O);var E=y.getBoundingClientRect(),K=(E.right-E.left)/10;return K>2&&(A.cachedCharWidth=K),K||10}function YA(A){for(var y=A.display,O={},E={},K=y.gutters.clientLeft,H=y.gutters.firstChild,le=0;H;H=H.nextSibling,++le){var ve=A.display.gutterSpecs[le].className;O[ve]=H.offsetLeft+H.clientLeft+K,E[ve]=H.clientWidth}return{fixedPos:Fo(y),gutterTotalWidth:y.gutters.offsetWidth,gutterLeft:O,gutterWidth:E,wrapperWidth:y.wrapper.clientWidth}}function Fo(A){return A.scroller.getBoundingClientRect().left-A.sizer.getBoundingClientRect().left}function Nc(A){var y=kl(A.display),O=A.options.lineWrapping,E=O&&Math.max(5,A.display.scroller.clientWidth/Wi(A.display)-3);return function(K){if(qr(A.doc,K))return 0;var H=0;if(K.widgets)for(var le=0;le<K.widgets.length;le++)K.widgets[le].height&&(H+=K.widgets[le].height);return O?H+(Math.ceil(K.text.length/E)||1)*y:H+y}}function $A(A){var y=A.doc,O=Nc(A);y.iter(function(E){var K=O(E);K!=E.height&&ia(E,K)})}function CA(A,y,O,E){var K=A.display;if(!O&&wr(y).getAttribute("cm-not-content")=="true")return null;var H,le,ve=K.lineSpace.getBoundingClientRect();try{H=y.clientX-ve.left,le=y.clientY-ve.top}catch{return null}var Be=Co(A,H,le),Fe;if(E&&Be.xRel>0&&(Fe=Kr(A.doc,Be.line).text).length==Be.ch){var ht=ke(Fe,Fe.length,A.options.tabSize)-Fe.length;Be=An(Be.line,Math.max(0,Math.round((H-nf(A.display).left)/Wi(A.display))-ht))}return Be}function lA(A,y){if(y>=A.display.viewTo||(y-=A.display.viewFrom,y<0))return null;for(var O=A.display.view,E=0;E<O.length;E++)if(y-=O[E].size,y<0)return E}function Tl(A,y,O,E){y==null&&(y=A.doc.first),O==null&&(O=A.doc.first+A.doc.size),E||(E=0);var K=A.display;if(E&&O<K.viewTo&&(K.updateLineNumbers==null||K.updateLineNumbers>y)&&(K.updateLineNumbers=y),A.curOp.viewChanged=!0,y>=K.viewTo)ms&&So(A.doc,y)<K.viewTo&&vu(A);else if(O<=K.viewFrom)ms&&ki(A.doc,O+E)>K.viewFrom?vu(A):(K.viewFrom+=E,K.viewTo+=E);else if(y<=K.viewFrom&&O>=K.viewTo)vu(A);else if(y<=K.viewFrom){var H=jl(A,O,O+E,1);H?(K.view=K.view.slice(H.index),K.viewFrom=H.lineN,K.viewTo+=E):vu(A)}else if(O>=K.viewTo){var le=jl(A,y,y,-1);le?(K.view=K.view.slice(0,le.index),K.viewTo=le.lineN):vu(A)}else{var ve=jl(A,y,y,-1),Be=jl(A,O,O+E,1);ve&&Be?(K.view=K.view.slice(0,ve.index).concat(sA(A,ve.lineN,Be.lineN)).concat(K.view.slice(Be.index)),K.viewTo+=E):vu(A)}var Fe=K.externalMeasured;Fe&&(O<Fe.lineN?Fe.lineN+=E:y<Fe.lineN+Fe.size&&(K.externalMeasured=null))}function gc(A,y,O){A.curOp.viewChanged=!0;var E=A.display,K=A.display.externalMeasured;if(K&&y>=K.lineN&&y<K.lineN+K.size&&(E.externalMeasured=null),!(y<E.viewFrom||y>=E.viewTo)){var H=E.view[lA(A,y)];if(H.node!=null){var le=H.changes||(H.changes=[]);Je(le,O)==-1&&le.push(O)}}}function vu(A){A.display.viewFrom=A.display.viewTo=A.doc.first,A.display.view=[],A.display.viewOffset=0}function jl(A,y,O,E){var K=lA(A,y),H,le=A.display.view;if(!ms||O==A.doc.first+A.doc.size)return{index:K,lineN:O};for(var ve=A.display.viewFrom,Be=0;Be<K;Be++)ve+=le[Be].size;if(ve!=y){if(E>0){if(K==le.length-1)return null;H=ve+le[K].size-y,K++}else H=ve-y;y+=H,O+=H}for(;So(A.doc,O)!=O;){if(K==(E<0?0:le.length-1))return null;O+=E*le[K-(E<0?1:0)].size,K+=E}return{index:K,lineN:O}}function Gc(A,y,O){var E=A.display,K=E.view;K.length==0||y>=E.viewTo||O<=E.viewFrom?(E.view=sA(A,y,O),E.viewFrom=y):(E.viewFrom>y?E.view=sA(A,y,E.viewFrom).concat(E.view):E.viewFrom<y&&(E.view=E.view.slice(lA(A,y))),E.viewFrom=y,E.viewTo<O?E.view=E.view.concat(sA(A,E.viewTo,O)):E.viewTo>O&&(E.view=E.view.slice(0,lA(A,O)))),E.viewTo=O}function Zh(A){for(var y=A.display.view,O=0,E=0;E<y.length;E++){var K=y[E];!K.hidden&&(!K.node||K.changes)&&++O}return O}function Fa(A){A.display.input.showSelection(A.display.input.prepareSelection())}function fh(A,y){y===void 0&&(y=!0);var O=A.doc,E={},K=E.cursors=document.createDocumentFragment(),H=E.selection=document.createDocumentFragment(),le=A.options.$customCursor;le&&(y=!0);for(var ve=0;ve<O.sel.ranges.length;ve++)if(!(!y&&ve==O.sel.primIndex)){var Be=O.sel.ranges[ve];if(!(Be.from().line>=A.display.viewTo||Be.to().line<A.display.viewFrom)){var Fe=Be.empty();if(le){var ht=le(A,Be);ht&&yc(A,ht,K)}else(Fe||A.options.showCursorWhenSelecting)&&yc(A,Be.head,K);Fe||sf(A,Be,H)}}return E}function yc(A,y,O){var E=an(A,y,"div",null,null,!A.options.singleCursorHeightPerLine),K=O.appendChild(de("div"," ","CodeMirror-cursor"));if(K.style.left=E.left+"px",K.style.top=E.top+"px",K.style.height=Math.max(0,E.bottom-E.top)*A.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(A.getWrapperElement().className)){var H=Tn(A,y,"div",null,null),le=H.right-H.left;K.style.width=(le>0?le:A.defaultCharWidth())+"px"}if(E.other){var ve=O.appendChild(de("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));ve.style.display="",ve.style.left=E.other.left+"px",ve.style.top=E.other.top+"px",ve.style.height=(E.other.bottom-E.other.top)*.85+"px"}}function VA(A,y){return A.top-y.top||A.left-y.left}function sf(A,y,O){var E=A.display,K=A.doc,H=document.createDocumentFragment(),le=nf(A.display),ve=le.left,Be=Math.max(E.sizerWidth,Bl(A)-E.sizer.offsetLeft)-le.right,Fe=K.direction=="ltr";function ht(ar,Lr,ai,Nr){Lr<0&&(Lr=0),Lr=Math.round(Lr),Nr=Math.round(Nr),H.appendChild(de("div",null,"CodeMirror-selected","position: absolute; left: "+ar+`px;
                             top: `+Lr+"px; width: "+(ai??Be-ar)+`px;
                             height: `+(Nr-Lr)+"px"))}function xt(ar,Lr,ai){var Nr=Kr(K,ar),Ji=Nr.text.length,Io,Ga;function aa(ka,Yl){return Tn(A,An(ar,ka),"div",Nr,Yl)}function Ca(ka,Yl,Wa){var xa=$o(A,Nr,null,ka),ds=Yl=="ltr"==(Wa=="after")?"left":"right",yi=Wa=="after"?xa.begin:xa.end-(/\s/.test(Nr.text.charAt(xa.end-1))?2:1);return aa(yi,ds)[ds]}var ba=xe(Nr,K.direction);return it(ba,Lr||0,ai??Ji,function(ka,Yl,Wa,xa){var ds=Wa=="ltr",yi=aa(ka,ds?"left":"right"),Zo=aa(Yl-1,ds?"right":"left"),la=Lr==null&&ka==0,fa=ai==null&&Yl==Ji,Is=xa==0,Kl=!ba||xa==ba.length-1;if(Zo.top-yi.top<=3){var Po=(Fe?la:fa)&&Is,Ph=(Fe?fa:la)&&Kl,yl=Po?ve:(ds?yi:Zo).left,PA=Ph?Be:(ds?Zo:yi).right;ht(yl,yi.top,PA-yl,yi.bottom)}else{var Xc,vl,_l,hf;ds?(Xc=Fe&&la&&Is?ve:yi.left,vl=Fe?Be:Ca(ka,Wa,"before"),_l=Fe?ve:Ca(Yl,Wa,"after"),hf=Fe&&fa&&Kl?Be:Zo.right):(Xc=Fe?Ca(ka,Wa,"before"):ve,vl=!Fe&&la&&Is?Be:yi.right,_l=!Fe&&fa&&Kl?ve:Zo.left,hf=Fe?Ca(Yl,Wa,"after"):Be),ht(Xc,yi.top,vl-Xc,yi.bottom),yi.bottom<Zo.top&&ht(ve,yi.bottom,null,Zo.top),ht(_l,Zo.top,hf-_l,Zo.bottom)}(!Io||VA(yi,Io)<0)&&(Io=yi),VA(Zo,Io)<0&&(Io=Zo),(!Ga||VA(yi,Ga)<0)&&(Ga=yi),VA(Zo,Ga)<0&&(Ga=Zo)}),{start:Io,end:Ga}}var Xt=y.from(),Qt=y.to();if(Xt.line==Qt.line)xt(Xt.line,Xt.ch,Qt.ch);else{var xn=Kr(K,Xt.line),Rn=Kr(K,Qt.line),$n=pr(xn)==pr(Rn),Jn=xt(Xt.line,Xt.ch,$n?xn.text.length+1:null).end,yr=xt(Qt.line,$n?0:null,Qt.ch).start;$n&&(Jn.top<yr.top-2?(ht(Jn.right,Jn.top,null,Jn.bottom),ht(ve,yr.top,yr.left,yr.bottom)):ht(Jn.right,Jn.top,yr.left-Jn.right,Jn.bottom)),Jn.bottom<yr.top&&ht(ve,Jn.bottom,null,yr.top)}O.appendChild(H)}function bA(A){if(A.state.focused){var y=A.display;clearInterval(y.blinker);var O=!0;y.cursorDiv.style.visibility="",A.options.cursorBlinkRate>0?y.blinker=setInterval(function(){A.hasFocus()||Vo(A),y.cursorDiv.style.visibility=(O=!O)?"":"hidden"},A.options.cursorBlinkRate):A.options.cursorBlinkRate<0&&(y.cursorDiv.style.visibility="hidden")}}function HA(A){A.hasFocus()||(A.display.input.focus(),A.state.focused||Xh(A))}function Wc(A){A.state.delayingBlurEvent=!0,setTimeout(function(){A.state.delayingBlurEvent&&(A.state.delayingBlurEvent=!1,A.state.focused&&Vo(A))},100)}function Xh(A,y){A.state.delayingBlurEvent&&!A.state.draggingText&&(A.state.delayingBlurEvent=!1),A.options.readOnly!="nocursor"&&(A.state.focused||(Ot(A,"focus",A,y),A.state.focused=!0,Te(A.display.wrapper,"CodeMirror-focused"),!A.curOp&&A.display.selForContextMenu!=A.doc.sel&&(A.display.input.reset(),b&&setTimeout(function(){return A.display.input.reset(!0)},20)),A.display.input.receivedFocus()),bA(A))}function Vo(A,y){A.state.delayingBlurEvent||(A.state.focused&&(Ot(A,"blur",A,y),A.state.focused=!1,pe(A.display.wrapper,"CodeMirror-focused")),clearInterval(A.display.blinker),setTimeout(function(){A.state.focused||(A.display.shift=!1)},150))}function Qc(A){for(var y=A.display,O=y.lineDiv.offsetTop,E=Math.max(0,y.scroller.getBoundingClientRect().top),K=y.lineDiv.getBoundingClientRect().top,H=0,le=0;le<y.view.length;le++){var ve=y.view[le],Be=A.options.lineWrapping,Fe=void 0,ht=0;if(!ve.hidden){if(K+=ve.line.height,h&&g<8){var xt=ve.node.offsetTop+ve.node.offsetHeight;Fe=xt-O,O=xt}else{var Xt=ve.node.getBoundingClientRect();Fe=Xt.bottom-Xt.top,!Be&&ve.text.firstChild&&(ht=ve.text.firstChild.getBoundingClientRect().right-Xt.left-1)}var Qt=ve.line.height-Fe;if((Qt>.005||Qt<-.005)&&(K<E&&(H-=Qt),ia(ve.line,Fe),ZA(ve.line),ve.rest))for(var xn=0;xn<ve.rest.length;xn++)ZA(ve.rest[xn]);if(ht>A.display.sizerWidth){var Rn=Math.ceil(ht/Wi(A.display));Rn>A.display.maxLineLength&&(A.display.maxLineLength=Rn,A.display.maxLine=ve.line,A.display.maxLineChanged=!0)}}}Math.abs(H)>2&&(y.scroller.scrollTop+=H)}function ZA(A){if(A.widgets)for(var y=0;y<A.widgets.length;++y){var O=A.widgets[y],E=O.node.parentNode;E&&(O.height=E.offsetHeight)}}function Fu(A,y,O){var E=O&&O.top!=null?Math.max(0,O.top):A.scroller.scrollTop;E=Math.floor(E-Uc(A));var K=O&&O.bottom!=null?O.bottom:E+A.wrapper.clientHeight,H=Ct(y,E),le=Ct(y,K);if(O&&O.ensure){var ve=O.ensure.from.line,Be=O.ensure.to.line;ve<H?(H=ve,le=Ct(y,Xi(Kr(y,ve))+A.wrapper.clientHeight)):Math.min(Be,y.lastLine())>=le&&(H=Ct(y,Xi(Kr(y,Be))-A.wrapper.clientHeight),le=Be)}return{from:H,to:Math.max(le,H+1)}}function qc(A,y){if(!_t(A,"scrollCursorIntoView")){var O=A.display,E=O.sizer.getBoundingClientRect(),K=null,H=O.wrapper.ownerDocument;if(y.top+E.top<0?K=!0:y.bottom+E.top>(H.defaultView.innerHeight||H.documentElement.clientHeight)&&(K=!1),K!=null&&!Y){var le=de("div","​",null,`position: absolute;
                         top: `+(y.top-O.viewOffset-Uc(A.display))+`px;
                         height: `+(y.bottom-y.top+iu(A)+O.barHeight)+`px;
                         left: `+y.left+"px; width: "+Math.max(2,y.right-y.left)+"px;");A.display.lineSpace.appendChild(le),le.scrollIntoView(K),A.display.lineSpace.removeChild(le)}}}function Jh(A,y,O,E){E==null&&(E=0);var K;!A.options.lineWrapping&&y==O&&(O=y.sticky=="before"?An(y.line,y.ch+1,"before"):y,y=y.ch?An(y.line,y.sticky=="before"?y.ch-1:y.ch,"after"):y);for(var H=0;H<5;H++){var le=!1,ve=an(A,y),Be=!O||O==y?ve:an(A,O);K={left:Math.min(ve.left,Be.left),top:Math.min(ve.top,Be.top)-E,right:Math.max(ve.left,Be.left),bottom:Math.max(ve.bottom,Be.bottom)+E};var Fe=vc(A,K),ht=A.doc.scrollTop,xt=A.doc.scrollLeft;if(Fe.scrollTop!=null&&(Uu(A,Fe.scrollTop),Math.abs(A.doc.scrollTop-ht)>1&&(le=!0)),Fe.scrollLeft!=null&&(Nl(A,Fe.scrollLeft),Math.abs(A.doc.scrollLeft-xt)>1&&(le=!0)),!le)break}return K}function Yc(A,y){var O=vc(A,y);O.scrollTop!=null&&Uu(A,O.scrollTop),O.scrollLeft!=null&&Nl(A,O.scrollLeft)}function vc(A,y){var O=A.display,E=kl(A.display);y.top<0&&(y.top=0);var K=A.curOp&&A.curOp.scrollTop!=null?A.curOp.scrollTop:O.scroller.scrollTop,H=WA(A),le={};y.bottom-y.top>H&&(y.bottom=y.top+H);var ve=A.doc.height+Yh(O),Be=y.top<E,Fe=y.bottom>ve-E;if(y.top<K)le.scrollTop=Be?0:y.top;else if(y.bottom>K+H){var ht=Math.min(y.top,(Fe?ve:y.bottom)-H);ht!=K&&(le.scrollTop=ht)}var xt=A.options.fixedGutter?0:O.gutters.offsetWidth,Xt=A.curOp&&A.curOp.scrollLeft!=null?A.curOp.scrollLeft:O.scroller.scrollLeft-xt,Qt=Bl(A)-O.gutters.offsetWidth,xn=y.right-y.left>Qt;return xn&&(y.right=y.left+Qt),y.left<10?le.scrollLeft=0:y.left<Xt?le.scrollLeft=Math.max(0,y.left+xt-(xn?0:10)):y.right>Qt+Xt-3&&(le.scrollLeft=y.right+(xn?0:10)-Qt),le}function As(A,y){y!=null&&(ph(A),A.curOp.scrollTop=(A.curOp.scrollTop==null?A.doc.scrollTop:A.curOp.scrollTop)+y)}function Uo(A){ph(A);var y=A.getCursor();A.curOp.scrollToPos={from:y,to:y,margin:A.options.cursorScrollMargin}}function cs(A,y,O){(y!=null||O!=null)&&ph(A),y!=null&&(A.curOp.scrollLeft=y),O!=null&&(A.curOp.scrollTop=O)}function Df(A,y){ph(A),A.curOp.scrollToPos=y}function ph(A){var y=A.curOp.scrollToPos;if(y){A.curOp.scrollToPos=null;var O=Fr(A,y.from),E=Fr(A,y.to);mh(A,O,E,y.margin)}}function mh(A,y,O,E){var K=vc(A,{left:Math.min(y.left,O.left),top:Math.min(y.top,O.top)-E,right:Math.max(y.right,O.right),bottom:Math.max(y.bottom,O.bottom)+E});cs(A,K.scrollLeft,K.scrollTop)}function Uu(A,y){Math.abs(A.doc.scrollTop-y)<2||(i||va(A,{top:y}),XA(A,y,!0),i&&va(A),yh(A,100))}function XA(A,y,O){y=Math.max(0,Math.min(A.display.scroller.scrollHeight-A.display.scroller.clientHeight,y)),!(A.display.scroller.scrollTop==y&&!O)&&(A.doc.scrollTop=y,A.display.scrollbars.setScrollTop(y),A.display.scroller.scrollTop!=y&&(A.display.scroller.scrollTop=y))}function Nl(A,y,O,E){y=Math.max(0,Math.min(y,A.display.scroller.scrollWidth-A.display.scroller.clientWidth)),!((O?y==A.doc.scrollLeft:Math.abs(A.doc.scrollLeft-y)<2)&&!E)&&(A.doc.scrollLeft=y,vh(A),A.display.scroller.scrollLeft!=y&&(A.display.scroller.scrollLeft=y),A.display.scrollbars.setScrollLeft(y))}function xA(A){var y=A.display,O=y.gutters.offsetWidth,E=Math.round(A.doc.height+Yh(A.display));return{clientHeight:y.scroller.clientHeight,viewHeight:y.wrapper.clientHeight,scrollWidth:y.scroller.scrollWidth,clientWidth:y.scroller.clientWidth,viewWidth:y.wrapper.clientWidth,barLeft:A.options.fixedGutter?O:0,docHeight:E,scrollHeight:E+iu(A)+y.barHeight,nativeBarWidth:y.nativeBarWidth,gutterWidth:O}}var hl=function(A,y,O){this.cm=O;var E=this.vert=de("div",[de("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),K=this.horiz=de("div",[de("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");E.tabIndex=K.tabIndex=-1,A(E),A(K),Ne(E,"scroll",function(){E.clientHeight&&y(E.scrollTop,"vertical")}),Ne(K,"scroll",function(){K.clientWidth&&y(K.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,h&&g<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};hl.prototype.update=function(A){var y=A.scrollWidth>A.clientWidth+1,O=A.scrollHeight>A.clientHeight+1,E=A.nativeBarWidth;if(O){this.vert.style.display="block",this.vert.style.bottom=y?E+"px":"0";var K=A.viewHeight-(y?E:0);this.vert.firstChild.style.height=Math.max(0,A.scrollHeight-A.clientHeight+K)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(y){this.horiz.style.display="block",this.horiz.style.right=O?E+"px":"0",this.horiz.style.left=A.barLeft+"px";var H=A.viewWidth-A.barLeft-(O?E:0);this.horiz.firstChild.style.width=Math.max(0,A.scrollWidth-A.clientWidth+H)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&A.clientHeight>0&&(E==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:O?E:0,bottom:y?E:0}},hl.prototype.setScrollLeft=function(A){this.horiz.scrollLeft!=A&&(this.horiz.scrollLeft=A),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},hl.prototype.setScrollTop=function(A){this.vert.scrollTop!=A&&(this.vert.scrollTop=A),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},hl.prototype.zeroWidthHack=function(){var A=q&&!z?"12px":"18px";this.horiz.style.height=this.vert.style.width=A,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Oe,this.disableVert=new Oe},hl.prototype.enableZeroWidthBar=function(A,y,O){A.style.visibility="";function E(){var K=A.getBoundingClientRect(),H=O=="vert"?document.elementFromPoint(K.right-1,(K.top+K.bottom)/2):document.elementFromPoint((K.right+K.left)/2,K.bottom-1);H!=A?A.style.visibility="hidden":y.set(1e3,E)}y.set(1e3,E)},hl.prototype.clear=function(){var A=this.horiz.parentNode;A.removeChild(this.horiz),A.removeChild(this.vert)};var JA=function(){};JA.prototype.update=function(){return{bottom:0,right:0}},JA.prototype.setScrollLeft=function(){},JA.prototype.setScrollTop=function(){},JA.prototype.clear=function(){};function zu(A,y){y||(y=xA(A));var O=A.display.barWidth,E=A.display.barHeight;gh(A,y);for(var K=0;K<4&&O!=A.display.barWidth||E!=A.display.barHeight;K++)O!=A.display.barWidth&&A.options.lineWrapping&&Qc(A),gh(A,xA(A)),O=A.display.barWidth,E=A.display.barHeight}function gh(A,y){var O=A.display,E=O.scrollbars.update(y);O.sizer.style.paddingRight=(O.barWidth=E.right)+"px",O.sizer.style.paddingBottom=(O.barHeight=E.bottom)+"px",O.heightForcer.style.borderBottom=E.bottom+"px solid transparent",E.right&&E.bottom?(O.scrollbarFiller.style.display="block",O.scrollbarFiller.style.height=E.bottom+"px",O.scrollbarFiller.style.width=E.right+"px"):O.scrollbarFiller.style.display="",E.bottom&&A.options.coverGutterNextToScrollbar&&A.options.fixedGutter?(O.gutterFiller.style.display="block",O.gutterFiller.style.height=E.bottom+"px",O.gutterFiller.style.width=y.gutterWidth+"px"):O.gutterFiller.style.display=""}var ju={native:hl,null:JA};function ed(A){A.display.scrollbars&&(A.display.scrollbars.clear(),A.display.scrollbars.addClass&&pe(A.display.wrapper,A.display.scrollbars.addClass)),A.display.scrollbars=new ju[A.options.scrollbarStyle](function(y){A.display.wrapper.insertBefore(y,A.display.scrollbarFiller),Ne(y,"mousedown",function(){A.state.focused&&setTimeout(function(){return A.display.input.focus()},0)}),y.setAttribute("cm-not-content","true")},function(y,O){O=="horizontal"?Nl(A,y):Uu(A,y)},A),A.display.scrollbars.addClass&&Te(A.display.wrapper,A.display.scrollbars.addClass)}var ec=0;function Nu(A){A.curOp={cm:A,viewChanged:!1,startHeight:A.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ec,markArrays:null},Lc(A.curOp)}function Gu(A){var y=A.curOp;y&&Rf(y,function(O){for(var E=0;E<O.ops.length;E++)O.ops[E].cm.curOp=null;wA(O)})}function wA(A){for(var y=A.ops,O=0;O<y.length;O++)_c(y[O]);for(var E=0;E<y.length;E++)_u(y[E]);for(var K=0;K<y.length;K++)$c(y[K]);for(var H=0;H<y.length;H++)et(y[H]);for(var le=0;le<y.length;le++)Ua(y[le])}function _c(A){var y=A.cm,O=y.display;Gs(y),A.updateMaxLine&&ya(y),A.mustUpdate=A.viewChanged||A.forceUpdate||A.scrollTop!=null||A.scrollToPos&&(A.scrollToPos.from.line<O.viewFrom||A.scrollToPos.to.line>=O.viewTo)||O.maxLineChanged&&y.options.lineWrapping,A.update=A.mustUpdate&&new Ea(y,A.mustUpdate&&{top:A.scrollTop,ensure:A.scrollToPos},A.forceUpdate)}function _u(A){A.updatedDisplay=A.mustUpdate&&Es(A.cm,A.update)}function $c(A){var y=A.cm,O=y.display;A.updatedDisplay&&Qc(y),A.barMeasure=xA(y),O.maxLineChanged&&!y.options.lineWrapping&&(A.adjustWidthTo=dh(y,O.maxLine,O.maxLine.text.length).left+3,y.display.sizerWidth=A.adjustWidthTo,A.barMeasure.scrollWidth=Math.max(O.scroller.clientWidth,O.sizer.offsetLeft+A.adjustWidthTo+iu(y)+y.display.barWidth),A.maxScrollLeft=Math.max(0,O.sizer.offsetLeft+A.adjustWidthTo-Bl(y))),(A.updatedDisplay||A.selectionChanged)&&(A.preparedSelection=O.input.prepareSelection())}function et(A){var y=A.cm;A.adjustWidthTo!=null&&(y.display.sizer.style.minWidth=A.adjustWidthTo+"px",A.maxScrollLeft<y.doc.scrollLeft&&Nl(y,Math.min(y.display.scroller.scrollLeft,A.maxScrollLeft),!0),y.display.maxLineChanged=!1);var O=A.focus&&A.focus==ut(mt(y));A.preparedSelection&&y.display.input.showSelection(A.preparedSelection,O),(A.updatedDisplay||A.startHeight!=y.doc.height)&&zu(y,A.barMeasure),A.updatedDisplay&&tc(y,A.barMeasure),A.selectionChanged&&bA(y),y.state.focused&&A.updateInput&&y.display.input.reset(A.typing),O&&HA(A.cm)}function Ua(A){var y=A.cm,O=y.display,E=y.doc;if(A.updatedDisplay&&dr(y,A.update),O.wheelStartX!=null&&(A.scrollTop!=null||A.scrollLeft!=null||A.scrollToPos)&&(O.wheelStartX=O.wheelStartY=null),A.scrollTop!=null&&XA(y,A.scrollTop,A.forceScroll),A.scrollLeft!=null&&Nl(y,A.scrollLeft,!0,!0),A.scrollToPos){var K=Jh(y,ri(E,A.scrollToPos.from),ri(E,A.scrollToPos.to),A.scrollToPos.margin);qc(y,K)}var H=A.maybeHiddenMarkers,le=A.maybeUnhiddenMarkers;if(H)for(var ve=0;ve<H.length;++ve)H[ve].lines.length||Ot(H[ve],"hide");if(le)for(var Be=0;Be<le.length;++Be)le[Be].lines.length&&Ot(le[Be],"unhide");O.wrapper.offsetHeight&&(E.scrollTop=y.display.scroller.scrollTop),A.changeObjs&&Ot(y,"changes",y,A.changeObjs),A.update&&A.update.finish()}function Eo(A,y){if(A.curOp)return y();Nu(A);try{return y()}finally{Gu(A)}}function Ri(A,y){return function(){if(A.curOp)return y.apply(A,arguments);Nu(A);try{return y.apply(A,arguments)}finally{Gu(A)}}}function $r(A){return function(){if(this.curOp)return A.apply(this,arguments);Nu(this);try{return A.apply(this,arguments)}finally{Gu(this)}}}function Ss(A){return function(){var y=this.cm;if(!y||y.curOp)return A.apply(this,arguments);Nu(y);try{return A.apply(this,arguments)}finally{Gu(y)}}}function yh(A,y){A.doc.highlightFrontier<A.display.viewTo&&A.state.highlight.set(y,Lt(td,A))}function td(A){var y=A.doc;if(!(y.highlightFrontier>=A.display.viewTo)){var O=+new Date+A.options.workTime,E=Dr(A,y.highlightFrontier),K=[];y.iter(E.line,Math.min(y.first+y.size,A.display.viewTo+500),function(H){if(E.line>=A.display.viewFrom){var le=H.styles,ve=H.text.length>A.options.maxHighlightLength?ao(y.mode,E.state):null,Be=iA(A,H,E,!0);ve&&(E.state=ve),H.styles=Be.styles;var Fe=H.styleClasses,ht=Be.classes;ht?H.styleClasses=ht:Fe&&(H.styleClasses=null);for(var xt=!le||le.length!=H.styles.length||Fe!=ht&&(!Fe||!ht||Fe.bgClass!=ht.bgClass||Fe.textClass!=ht.textClass),Xt=0;!xt&&Xt<le.length;++Xt)xt=le[Xt]!=H.styles[Xt];xt&&K.push(E.line),H.stateAfter=E.save(),E.nextLine()}else H.text.length<=A.options.maxHighlightLength&&Ei(A,H.text,E),H.stateAfter=E.line%5==0?E.save():null,E.nextLine();if(+new Date>O)return yh(A,A.options.workDelay),!0}),y.highlightFrontier=E.line,y.modeFrontier=Math.max(y.modeFrontier,E.line),K.length&&Eo(A,function(){for(var H=0;H<K.length;H++)gc(A,K[H],"text")})}}var Ea=function(A,y,O){var E=A.display;this.viewport=y,this.visible=Fu(E,A.doc,y),this.editorIsHidden=!E.wrapper.offsetWidth,this.wrapperHeight=E.wrapper.clientHeight,this.wrapperWidth=E.wrapper.clientWidth,this.oldDisplayWidth=Bl(A),this.force=O,this.dims=YA(A),this.events=[]};Ea.prototype.signal=function(A,y){Zt(A,y)&&this.events.push(arguments)},Ea.prototype.finish=function(){for(var A=0;A<this.events.length;A++)Ot.apply(null,this.events[A])};function Gs(A){var y=A.display;!y.scrollbarsClipped&&y.scroller.offsetWidth&&(y.nativeBarWidth=y.scroller.offsetWidth-y.scroller.clientWidth,y.heightForcer.style.height=iu(A)+"px",y.sizer.style.marginBottom=-y.nativeBarWidth+"px",y.sizer.style.borderRightWidth=iu(A)+"px",y.scrollbarsClipped=!0)}function _s(A){if(A.hasFocus())return null;var y=ut(mt(A));if(!y||!Qe(A.display.lineDiv,y))return null;var O={activeElt:y};if(window.getSelection){var E=Ut(A).getSelection();E.anchorNode&&E.extend&&Qe(A.display.lineDiv,E.anchorNode)&&(O.anchorNode=E.anchorNode,O.anchorOffset=E.anchorOffset,O.focusNode=E.focusNode,O.focusOffset=E.focusOffset)}return O}function uA(A){if(!(!A||!A.activeElt||A.activeElt==ut(ft(A.activeElt)))&&(A.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(A.activeElt.nodeName)&&A.anchorNode&&Qe(document.body,A.anchorNode)&&Qe(document.body,A.focusNode))){var y=A.activeElt.ownerDocument,O=y.defaultView.getSelection(),E=y.createRange();E.setEnd(A.anchorNode,A.anchorOffset),E.collapse(!1),O.removeAllRanges(),O.addRange(E),O.extend(A.focusNode,A.focusOffset)}}function Es(A,y){var O=A.display,E=A.doc;if(y.editorIsHidden)return vu(A),!1;if(!y.force&&y.visible.from>=O.viewFrom&&y.visible.to<=O.viewTo&&(O.updateLineNumbers==null||O.updateLineNumbers>=O.viewTo)&&O.renderedView==O.view&&Zh(A)==0)return!1;_h(A)&&(vu(A),y.dims=YA(A));var K=E.first+E.size,H=Math.max(y.visible.from-A.options.viewportMargin,E.first),le=Math.min(K,y.visible.to+A.options.viewportMargin);O.viewFrom<H&&H-O.viewFrom<20&&(H=Math.max(E.first,O.viewFrom)),O.viewTo>le&&O.viewTo-le<20&&(le=Math.min(K,O.viewTo)),ms&&(H=So(A.doc,H),le=ki(A.doc,le));var ve=H!=O.viewFrom||le!=O.viewTo||O.lastWrapHeight!=y.wrapperHeight||O.lastWrapWidth!=y.wrapperWidth;Gc(A,H,le),O.viewOffset=Xi(Kr(A.doc,O.viewFrom)),A.display.mover.style.top=O.viewOffset+"px";var Be=Zh(A);if(!ve&&Be==0&&!y.force&&O.renderedView==O.view&&(O.updateLineNumbers==null||O.updateLineNumbers>=O.viewTo))return!1;var Fe=_s(A);return Be>4&&(O.lineDiv.style.display="none"),Vc(A,O.updateLineNumbers,y.dims),Be>4&&(O.lineDiv.style.display=""),O.renderedView=O.view,uA(Fe),Ce(O.cursorDiv),Ce(O.selectionDiv),O.gutters.style.height=O.sizer.style.minHeight=0,ve&&(O.lastWrapHeight=y.wrapperHeight,O.lastWrapWidth=y.wrapperWidth,yh(A,400)),O.updateLineNumbers=null,!0}function dr(A,y){for(var O=y.viewport,E=!0;;E=!1){if(!E||!A.options.lineWrapping||y.oldDisplayWidth==Bl(A)){if(O&&O.top!=null&&(O={top:Math.min(A.doc.height+Yh(A.display)-WA(A),O.top)}),y.visible=Fu(A.display,A.doc,O),y.visible.from>=A.display.viewFrom&&y.visible.to<=A.display.viewTo)break}else E&&(y.visible=Fu(A.display,A.doc,O));if(!Es(A,y))break;Qc(A);var K=xA(A);Fa(A),zu(A,K),tc(A,K),y.force=!1}y.signal(A,"update",A),(A.display.viewFrom!=A.display.reportedViewFrom||A.display.viewTo!=A.display.reportedViewTo)&&(y.signal(A,"viewportChange",A,A.display.viewFrom,A.display.viewTo),A.display.reportedViewFrom=A.display.viewFrom,A.display.reportedViewTo=A.display.viewTo)}function va(A,y){var O=new Ea(A,y);if(Es(A,O)){Qc(A),dr(A,O);var E=xA(A);Fa(A),zu(A,E),tc(A,E),O.finish()}}function Vc(A,y,O){var E=A.display,K=A.options.lineNumbers,H=E.lineDiv,le=H.firstChild;function ve(xn){var Rn=xn.nextSibling;return b&&q&&A.display.currentWheelTarget==xn?xn.style.display="none":xn.parentNode.removeChild(xn),Rn}for(var Be=E.view,Fe=E.viewFrom,ht=0;ht<Be.length;ht++){var xt=Be[ht];if(!xt.hidden)if(!xt.node||xt.node.parentNode!=H){var Xt=am(A,xt,Fe,O);H.insertBefore(Xt,le)}else{for(;le!=xt.node;)le=ve(le);var Qt=K&&y!=null&&y<=Fe&&xt.lineNumber;xt.changes&&(Je(xt.changes,"gutter")>-1&&(Qt=!1),ef(A,xt,Fe,O)),Qt&&(Ce(xt.lineNumber),xt.lineNumber.appendChild(document.createTextNode(Nn(A.options,Fe)))),le=xt.node.nextSibling}Fe+=xt.size}for(;le;)le=ve(le)}function Ba(A){var y=A.gutters.offsetWidth;A.sizer.style.marginLeft=y+"px",Zs(A,"gutterChanged",A)}function tc(A,y){A.display.sizer.style.minHeight=y.docHeight+"px",A.display.heightForcer.style.top=y.docHeight+"px",A.display.gutters.style.height=y.docHeight+A.display.barHeight+iu(A)+"px"}function vh(A){var y=A.display,O=y.view;if(!(!y.alignWidgets&&(!y.gutters.firstChild||!A.options.fixedGutter))){for(var E=Fo(y)-y.scroller.scrollLeft+A.doc.scrollLeft,K=y.gutters.offsetWidth,H=E+"px",le=0;le<O.length;le++)if(!O[le].hidden){A.options.fixedGutter&&(O[le].gutter&&(O[le].gutter.style.left=H),O[le].gutterBackground&&(O[le].gutterBackground.style.left=H));var ve=O[le].alignable;if(ve)for(var Be=0;Be<ve.length;Be++)ve[Be].style.left=H}A.options.fixedGutter&&(y.gutters.style.left=E+K+"px")}}function _h(A){if(!A.options.lineNumbers)return!1;var y=A.doc,O=Nn(A.options,y.first+y.size-1),E=A.display;if(O.length!=E.lineNumChars){var K=E.measure.appendChild(de("div",[de("div",O)],"CodeMirror-linenumber CodeMirror-gutter-elt")),H=K.firstChild.offsetWidth,le=K.offsetWidth-H;return E.lineGutter.style.width="",E.lineNumInnerWidth=Math.max(H,E.lineGutter.offsetWidth-le)+1,E.lineNumWidth=E.lineNumInnerWidth+le,E.lineNumChars=E.lineNumInnerWidth?O.length:-1,E.lineGutter.style.width=E.lineNumWidth+"px",Ba(A.display),!0}return!1}function Mi(A,y){for(var O=[],E=!1,K=0;K<A.length;K++){var H=A[K],le=null;if(typeof H!="string"&&(le=H.style,H=H.className),H=="CodeMirror-linenumbers")if(y)E=!0;else continue;O.push({className:H,style:le})}return y&&!E&&O.push({className:"CodeMirror-linenumbers",style:null}),O}function Ch(A){var y=A.gutters,O=A.gutterSpecs;Ce(y),A.lineGutter=null;for(var E=0;E<O.length;++E){var K=O[E],H=K.className,le=K.style,ve=y.appendChild(de("div",null,"CodeMirror-gutter "+H));le&&(ve.style.cssText=le),H=="CodeMirror-linenumbers"&&(A.lineGutter=ve,ve.style.width=(A.lineNumWidth||1)+"px")}y.style.display=O.length?"":"none",Ba(A)}function Gl(A){Ch(A.display),Tl(A),vh(A)}function bh(A,y,O,E){var K=this;this.input=O,K.scrollbarFiller=de("div",null,"CodeMirror-scrollbar-filler"),K.scrollbarFiller.setAttribute("cm-not-content","true"),K.gutterFiller=de("div",null,"CodeMirror-gutter-filler"),K.gutterFiller.setAttribute("cm-not-content","true"),K.lineDiv=rt("div",null,"CodeMirror-code"),K.selectionDiv=de("div",null,null,"position: relative; z-index: 1"),K.cursorDiv=de("div",null,"CodeMirror-cursors"),K.measure=de("div",null,"CodeMirror-measure"),K.lineMeasure=de("div",null,"CodeMirror-measure"),K.lineSpace=rt("div",[K.measure,K.lineMeasure,K.selectionDiv,K.cursorDiv,K.lineDiv],null,"position: relative; outline: none");var H=rt("div",[K.lineSpace],"CodeMirror-lines");K.mover=de("div",[H],null,"position: relative"),K.sizer=de("div",[K.mover],"CodeMirror-sizer"),K.sizerWidth=null,K.heightForcer=de("div",null,null,"position: absolute; height: "+Mt+"px; width: 1px;"),K.gutters=de("div",null,"CodeMirror-gutters"),K.lineGutter=null,K.scroller=de("div",[K.sizer,K.heightForcer,K.gutters],"CodeMirror-scroll"),K.scroller.setAttribute("tabIndex","-1"),K.wrapper=de("div",[K.scrollbarFiller,K.gutterFiller,K.scroller],"CodeMirror"),S&&I>=105&&(K.wrapper.style.clipPath="inset(0px)"),K.wrapper.setAttribute("translate","no"),h&&g<8&&(K.gutters.style.zIndex=-1,K.scroller.style.paddingRight=0),!b&&!(i&&X)&&(K.scroller.draggable=!0),A&&(A.appendChild?A.appendChild(K.wrapper):A(K.wrapper)),K.viewFrom=K.viewTo=y.first,K.reportedViewFrom=K.reportedViewTo=y.first,K.view=[],K.renderedView=null,K.externalMeasured=null,K.viewOffset=0,K.lastWrapHeight=K.lastWrapWidth=0,K.updateLineNumbers=null,K.nativeBarWidth=K.barHeight=K.barWidth=0,K.scrollbarsClipped=!1,K.lineNumWidth=K.lineNumInnerWidth=K.lineNumChars=null,K.alignWidgets=!1,K.cachedCharWidth=K.cachedTextHeight=K.cachedPaddingH=null,K.maxLine=null,K.maxLineLength=0,K.maxLineChanged=!1,K.wheelDX=K.wheelDY=K.wheelStartX=K.wheelStartY=null,K.shift=!1,K.selForContextMenu=null,K.activeTouch=null,K.gutterSpecs=Mi(E.gutters,E.lineNumbers),Ch(K),O.init(K)}var xh=0,MA=null;h?MA=-.53:i?MA=15:S?MA=-.7:U&&(MA=-1/3);function nc(A){var y=A.wheelDeltaX,O=A.wheelDeltaY;return y==null&&A.detail&&A.axis==A.HORIZONTAL_AXIS&&(y=A.detail),O==null&&A.detail&&A.axis==A.VERTICAL_AXIS?O=A.detail:O==null&&(O=A.wheelDelta),{x:y,y:O}}function AA(A){var y=nc(A);return y.x*=MA,y.y*=MA,y}function Cc(A,y){S&&I==102&&(A.display.chromeScrollHack==null?A.display.sizer.style.pointerEvents="none":clearTimeout(A.display.chromeScrollHack),A.display.chromeScrollHack=setTimeout(function(){A.display.chromeScrollHack=null,A.display.sizer.style.pointerEvents=""},100));var O=nc(y),E=O.x,K=O.y,H=MA;y.deltaMode===0&&(E=y.deltaX,K=y.deltaY,H=1);var le=A.display,ve=le.scroller,Be=ve.scrollWidth>ve.clientWidth,Fe=ve.scrollHeight>ve.clientHeight;if(E&&Be||K&&Fe){if(K&&q&&b){e:for(var ht=y.target,xt=le.view;ht!=ve;ht=ht.parentNode)for(var Xt=0;Xt<xt.length;Xt++)if(xt[Xt].node==ht){A.display.currentWheelTarget=ht;break e}}if(E&&!i&&!k&&H!=null){K&&Fe&&Uu(A,Math.max(0,ve.scrollTop+K*H)),Nl(A,Math.max(0,ve.scrollLeft+E*H)),(!K||K&&Fe)&&bt(y),le.wheelStartX=null;return}if(K&&H!=null){var Qt=K*H,xn=A.doc.scrollTop,Rn=xn+le.wrapper.clientHeight;Qt<0?xn=Math.max(0,xn+Qt-50):Rn=Math.min(A.doc.height,Rn+Qt+50),va(A,{top:xn,bottom:Rn})}xh<20&&y.deltaMode!==0&&(le.wheelStartX==null?(le.wheelStartX=ve.scrollLeft,le.wheelStartY=ve.scrollTop,le.wheelDX=E,le.wheelDY=K,setTimeout(function(){if(le.wheelStartX!=null){var $n=ve.scrollLeft-le.wheelStartX,Jn=ve.scrollTop-le.wheelStartY,yr=Jn&&le.wheelDY&&Jn/le.wheelDY||$n&&le.wheelDX&&$n/le.wheelDX;le.wheelStartX=le.wheelStartY=null,yr&&(MA=(MA*xh+yr)/(xh+1),++xh)}},200)):(le.wheelDX+=E,le.wheelDY+=K))}}var Bs=function(A,y){this.ranges=A,this.primIndex=y};Bs.prototype.primary=function(){return this.ranges[this.primIndex]},Bs.prototype.equals=function(A){if(A==this)return!0;if(A.primIndex!=this.primIndex||A.ranges.length!=this.ranges.length)return!1;for(var y=0;y<this.ranges.length;y++){var O=this.ranges[y],E=A.ranges[y];if(!Ti(O.anchor,E.anchor)||!Ti(O.head,E.head))return!1}return!0},Bs.prototype.deepCopy=function(){for(var A=[],y=0;y<this.ranges.length;y++)A[y]=new bo(ho(this.ranges[y].anchor),ho(this.ranges[y].head));return new Bs(A,this.primIndex)},Bs.prototype.somethingSelected=function(){for(var A=0;A<this.ranges.length;A++)if(!this.ranges[A].empty())return!0;return!1},Bs.prototype.contains=function(A,y){y||(y=A);for(var O=0;O<this.ranges.length;O++){var E=this.ranges[O];if(er(y,E.from())>=0&&er(A,E.to())<=0)return O}return-1};var bo=function(A,y){this.anchor=A,this.head=y};bo.prototype.from=function(){return js(this.anchor,this.head)},bo.prototype.to=function(){return vs(this.anchor,this.head)},bo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Cu(A,y,O){var E=A&&A.options.selectionsMayTouch,K=y[O];y.sort(function(Xt,Qt){return er(Xt.from(),Qt.from())}),O=Je(y,K);for(var H=1;H<y.length;H++){var le=y[H],ve=y[H-1],Be=er(ve.to(),le.from());if(E&&!le.empty()?Be>0:Be>=0){var Fe=js(ve.from(),le.from()),ht=vs(ve.to(),le.to()),xt=ve.empty()?le.from()==le.head:ve.from()==ve.head;H<=O&&--O,y.splice(--H,2,new bo(xt?ht:Fe,xt?Fe:ht))}}return new Bs(y,O)}function za(A,y){return new Bs([new bo(A,y||A)],0)}function Ks(A){return A.text?An(A.from.line+A.text.length-1,cr(A.text).length+(A.text.length==1?A.from.ch:0)):A.to}function Ho(A,y){if(er(A,y.from)<0)return A;if(er(A,y.to)<=0)return Ks(y);var O=A.line+y.text.length-(y.to.line-y.from.line)-1,E=A.ch;return A.line==y.to.line&&(E+=Ks(y).ch-y.to.ch),An(O,E)}function ou(A,y){for(var O=[],E=0;E<A.sel.ranges.length;E++){var K=A.sel.ranges[E];O.push(new bo(Ho(K.anchor,y),Ho(K.head,y)))}return Cu(A.cm,O,A.sel.primIndex)}function Wu(A,y,O){return A.line==y.line?An(O.line,A.ch-y.ch+O.ch):An(O.line+(A.line-y.line),A.ch)}function bc(A,y,O){for(var E=[],K=An(A.first,0),H=K,le=0;le<y.length;le++){var ve=y[le],Be=Wu(ve.from,K,H),Fe=Wu(Ks(ve),K,H);if(K=ve.to,H=Fe,O=="around"){var ht=A.sel.ranges[le],xt=er(ht.head,ht.anchor)<0;E[le]=new bo(xt?Fe:Be,xt?Be:Fe)}else E[le]=new bo(Be,Be)}return new Bs(E,A.sel.primIndex)}function nd(A){A.doc.mode=ts(A.options,A.doc.modeOption),SA(A)}function SA(A){A.doc.iter(function(y){y.stateAfter&&(y.stateAfter=null),y.styles&&(y.styles=null)}),A.doc.modeFrontier=A.doc.highlightFrontier=A.doc.first,yh(A,100),A.state.modeGen++,A.curOp&&Tl(A)}function xc(A,y){return y.from.ch==0&&y.to.ch==0&&cr(y.text)==""&&(!A.cm||A.cm.options.wholeLineUpdateBefore)}function gs(A,y,O,E){function K(yr){return O?O[yr]:null}function H(yr,ar,Lr){fu(yr,ar,Lr,E),Zs(yr,"change",yr,y)}function le(yr,ar){for(var Lr=[],ai=yr;ai<ar;++ai)Lr.push(new La(Fe[ai],K(ai),E));return Lr}var ve=y.from,Be=y.to,Fe=y.text,ht=Kr(A,ve.line),xt=Kr(A,Be.line),Xt=cr(Fe),Qt=K(Fe.length-1),xn=Be.line-ve.line;if(y.full)A.insert(0,le(0,Fe.length)),A.remove(Fe.length,A.size-Fe.length);else if(xc(A,y)){var Rn=le(0,Fe.length-1);H(xt,xt.text,Qt),xn&&A.remove(ve.line,xn),Rn.length&&A.insert(ve.line,Rn)}else if(ht==xt)if(Fe.length==1)H(ht,ht.text.slice(0,ve.ch)+Xt+ht.text.slice(Be.ch),Qt);else{var $n=le(1,Fe.length-1);$n.push(new La(Xt+ht.text.slice(Be.ch),Qt,E)),H(ht,ht.text.slice(0,ve.ch)+Fe[0],K(0)),A.insert(ve.line+1,$n)}else if(Fe.length==1)H(ht,ht.text.slice(0,ve.ch)+Fe[0]+xt.text.slice(Be.ch),K(0)),A.remove(ve.line+1,xn);else{H(ht,ht.text.slice(0,ve.ch)+Fe[0],K(0)),H(xt,Xt+xt.text.slice(Be.ch),Qt);var Jn=le(1,Fe.length-1);xn>1&&A.remove(ve.line+1,xn-1),A.insert(ve.line+1,Jn)}Zs(A,"change",A,y)}function ha(A,y,O){function E(K,H,le){if(K.linked)for(var ve=0;ve<K.linked.length;++ve){var Be=K.linked[ve];if(Be.doc!=H){var Fe=le&&Be.sharedHist;O&&!Fe||(y(Be.doc,Fe),E(Be.doc,K,Fe))}}}E(A,null,!0)}function hr(A,y){if(y.cm)throw new Error("This document is already in use.");A.doc=y,y.cm=A,$A(A),nd(A),Hr(A),A.options.direction=y.direction,A.options.lineWrapping||ya(A),A.options.mode=y.modeOption,Tl(A)}function Hr(A){(A.doc.direction=="rtl"?Te:pe)(A.display.lineDiv,"CodeMirror-rtl")}function Qu(A){Eo(A,function(){Hr(A),Tl(A)})}function rc(A){this.done=[],this.undone=[],this.undoDepth=A?A.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=A?A.maxGeneration:1}function bu(A,y){var O={from:ho(y.from),to:Ks(y),text:Va(A,y.from,y.to)};return Os(A,O,y.from.line,y.to.line+1),ha(A,function(E){return Os(E,O,y.from.line,y.to.line+1)},!0),O}function Cs(A){for(;A.length;){var y=cr(A);if(y.ranges)A.pop();else break}}function Lf(A,y){if(y)return Cs(A.done),cr(A.done);if(A.done.length&&!cr(A.done).ranges)return cr(A.done);if(A.done.length>1&&!A.done[A.done.length-2].ranges)return A.done.pop(),cr(A.done)}function su(A,y,O,E){var K=A.history;K.undone.length=0;var H=+new Date,le,ve;if((K.lastOp==E||K.lastOrigin==y.origin&&y.origin&&(y.origin.charAt(0)=="+"&&K.lastModTime>H-(A.cm?A.cm.options.historyEventDelay:500)||y.origin.charAt(0)=="*"))&&(le=Lf(K,K.lastOp==E)))ve=cr(le.changes),er(y.from,y.to)==0&&er(y.from,ve.to)==0?ve.to=Ks(y):le.changes.push(bu(A,y));else{var Be=cr(K.done);for((!Be||!Be.ranges)&&To(A.sel,K.done),le={changes:[bu(A,y)],generation:K.generation},K.done.push(le);K.done.length>K.undoDepth;)K.done.shift(),K.done[0].ranges||K.done.shift()}K.done.push(O),K.generation=++K.maxGeneration,K.lastModTime=K.lastSelTime=H,K.lastOp=K.lastSelOp=E,K.lastOrigin=K.lastSelOrigin=y.origin,ve||Ot(A,"historyAdded")}function Ff(A,y,O,E){var K=y.charAt(0);return K=="*"||K=="+"&&O.ranges.length==E.ranges.length&&O.somethingSelected()==E.somethingSelected()&&new Date-A.history.lastSelTime<=(A.cm?A.cm.options.historyEventDelay:500)}function xu(A,y,O,E){var K=A.history,H=E&&E.origin;O==K.lastSelOp||H&&K.lastSelOrigin==H&&(K.lastModTime==K.lastSelTime&&K.lastOrigin==H||Ff(A,H,cr(K.done),y))?K.done[K.done.length-1]=y:To(y,K.done),K.lastSelTime=+new Date,K.lastSelOrigin=H,K.lastSelOp=O,E&&E.clearRedo!==!1&&Cs(K.undone)}function To(A,y){var O=cr(y);O&&O.ranges&&O.equals(A)||y.push(A)}function Os(A,y,O,E){var K=y["spans_"+A.id],H=0;A.iter(Math.max(A.first,O),Math.min(A.first+A.size,E),function(le){le.markedSpans&&((K||(K=y["spans_"+A.id]={}))[H]=le.markedSpans),++H})}function rd(A){if(!A)return null;for(var y,O=0;O<A.length;++O)A[O].marker.explicitlyCleared?y||(y=A.slice(0,O)):y&&y.push(A[O]);return y?y.length?y:null:A}function EA(A,y){var O=y["spans_"+A.id];if(!O)return null;for(var E=[],K=0;K<y.text.length;++K)E.push(rd(O[K]));return E}function id(A,y){var O=EA(A,y),E=Jr(A,y);if(!O)return E;if(!E)return O;for(var K=0;K<O.length;++K){var H=O[K],le=E[K];if(H&&le)e:for(var ve=0;ve<le.length;++ve){for(var Be=le[ve],Fe=0;Fe<H.length;++Fe)if(H[Fe].marker==Be.marker)continue e;H.push(Be)}else le&&(O[K]=le)}return O}function BA(A,y,O){for(var E=[],K=0;K<A.length;++K){var H=A[K];if(H.ranges){E.push(O?Bs.prototype.deepCopy.call(H):H);continue}var le=H.changes,ve=[];E.push({changes:ve});for(var Be=0;Be<le.length;++Be){var Fe=le[Be],ht=void 0;if(ve.push({from:Fe.from,to:Fe.to,text:Fe.text}),y)for(var xt in Fe)(ht=xt.match(/^spans_(\d+)$/))&&Je(y,Number(ht[1]))>-1&&(cr(ve)[xt]=Fe[xt],delete Fe[xt])}}return E}function Ws(A,y,O,E){if(E){var K=A.anchor;if(O){var H=er(y,K)<0;H!=er(O,K)<0?(K=y,y=O):H!=er(y,O)<0&&(y=O)}return new bo(K,y)}else return new bo(O||y,y)}function wc(A,y,O,E,K){K==null&&(K=A.cm&&(A.cm.display.shift||A.extend)),_a(A,new Bs([Ws(A.sel.primary(),y,O,K)],0),E)}function Wl(A,y,O){for(var E=[],K=A.cm&&(A.cm.display.shift||A.extend),H=0;H<A.sel.ranges.length;H++)E[H]=Ws(A.sel.ranges[H],y[H],null,K);var le=Cu(A.cm,E,A.sel.primIndex);_a(A,le,O)}function dl(A,y,O,E){var K=A.sel.ranges.slice(0);K[y]=O,_a(A,Cu(A.cm,K,A.sel.primIndex),E)}function qu(A,y,O,E){_a(A,za(y,O),E)}function Mc(A,y,O){var E={ranges:y.ranges,update:function(K){this.ranges=[];for(var H=0;H<K.length;H++)this.ranges[H]=new bo(ri(A,K[H].anchor),ri(A,K[H].head))},origin:O&&O.origin};return Ot(A,"beforeSelectionChange",A,E),A.cm&&Ot(A.cm,"beforeSelectionChange",A.cm,E),E.ranges!=y.ranges?Cu(A.cm,E.ranges,E.ranges.length-1):y}function wu(A,y,O){var E=A.history.done,K=cr(E);K&&K.ranges?(E[E.length-1]=y,Xs(A,y,O)):_a(A,y,O)}function _a(A,y,O){Xs(A,y,O),xu(A,A.sel,A.cm?A.cm.curOp.id:NaN,O)}function Xs(A,y,O){(Zt(A,"beforeSelectionChange")||A.cm&&Zt(A.cm,"beforeSelectionChange"))&&(y=Mc(A,y,O));var E=O&&O.bias||(er(y.primary().head,A.sel.primary().head)<0?-1:1);au(A,cA(A,y,E,!0)),!(O&&O.scroll===!1)&&A.cm&&A.cm.getOption("readOnly")!="nocursor"&&Uo(A.cm)}function au(A,y){y.equals(A.sel)||(A.sel=y,A.cm&&(A.cm.curOp.updateInput=1,A.cm.curOp.selectionChanged=!0,rn(A.cm)),Zs(A,"cursorActivity",A))}function lu(A){au(A,cA(A,A.sel,null,!1))}function cA(A,y,O,E){for(var K,H=0;H<y.ranges.length;H++){var le=y.ranges[H],ve=y.ranges.length==A.sel.ranges.length&&A.sel.ranges[H],Be=Sc(A,le.anchor,ve&&ve.anchor,O,E),Fe=le.head==le.anchor?Be:Sc(A,le.head,ve&&ve.head,O,E);(K||Be!=le.anchor||Fe!=le.head)&&(K||(K=y.ranges.slice(0,H)),K[H]=new bo(Be,Fe))}return K?Cu(A.cm,K,y.primIndex):y}function Mu(A,y,O,E,K){var H=Kr(A,y.line);if(H.markedSpans)for(var le=0;le<H.markedSpans.length;++le){var ve=H.markedSpans[le],Be=ve.marker,Fe="selectLeft"in Be?!Be.selectLeft:Be.inclusiveLeft,ht="selectRight"in Be?!Be.selectRight:Be.inclusiveRight;if((ve.from==null||(Fe?ve.from<=y.ch:ve.from<y.ch))&&(ve.to==null||(ht?ve.to>=y.ch:ve.to>y.ch))){if(K&&(Ot(Be,"beforeCursorEnter"),Be.explicitlyCleared))if(H.markedSpans){--le;continue}else break;if(!Be.atomic)continue;if(O){var xt=Be.find(E<0?1:-1),Xt=void 0;if((E<0?ht:Fe)&&(xt=Yu(A,xt,-E,xt&&xt.line==y.line?H:null)),xt&&xt.line==y.line&&(Xt=er(xt,O))&&(E<0?Xt<0:Xt>0))return Mu(A,xt,y,E,K)}var Qt=Be.find(E<0?-1:1);return(E<0?Fe:ht)&&(Qt=Yu(A,Qt,E,Qt.line==y.line?H:null)),Qt?Mu(A,Qt,y,E,K):null}}return y}function Sc(A,y,O,E,K){var H=E||1,le=Mu(A,y,O,H,K)||!K&&Mu(A,y,O,H,!0)||Mu(A,y,O,-H,K)||!K&&Mu(A,y,O,-H,!0);return le||(A.cantEdit=!0,An(A.first,0))}function Yu(A,y,O,E){return O<0&&y.ch==0?y.line>A.first?ri(A,An(y.line-1)):null:O>0&&y.ch==(E||Kr(A,y.line)).text.length?y.line<A.first+A.size-1?An(y.line+1,0):null:new An(y.line,y.ch+O)}function Ql(A){A.setSelection(An(A.firstLine(),0),An(A.lastLine()),Nt)}function wh(A,y,O){var E={canceled:!1,from:y.from,to:y.to,text:y.text,origin:y.origin,cancel:function(){return E.canceled=!0}};return O&&(E.update=function(K,H,le,ve){K&&(E.from=ri(A,K)),H&&(E.to=ri(A,H)),le&&(E.text=le),ve!==void 0&&(E.origin=ve)}),Ot(A,"beforeChange",A,E),A.cm&&Ot(A.cm,"beforeChange",A.cm,E),E.canceled?(A.cm&&(A.cm.curOp.updateInput=2),null):{from:E.from,to:E.to,text:E.text,origin:E.origin}}function T(A,y,O){if(A.cm){if(!A.cm.curOp)return Ri(A.cm,T)(A,y,O);if(A.cm.state.suppressEdits)return}if(!((Zt(A,"beforeChange")||A.cm&&Zt(A.cm,"beforeChange"))&&(y=wh(A,y,!0),!y))){var E=fo&&!O&&Gi(A,y.from,y.to);if(E)for(var K=E.length-1;K>=0;--K)l(A,{from:E[K].from,to:E[K].to,text:K?[""]:y.text,origin:y.origin});else l(A,y)}}function l(A,y){if(!(y.text.length==1&&y.text[0]==""&&er(y.from,y.to)==0)){var O=ou(A,y);su(A,y,O,A.cm?A.cm.curOp.id:NaN),M(A,y,O,Jr(A,y));var E=[];ha(A,function(K,H){!H&&Je(E,K.history)==-1&&(oe(K.history,y),E.push(K.history)),M(K,y,null,Jr(K,y))})}}function c(A,y,O){var E=A.cm&&A.cm.state.suppressEdits;if(!(E&&!O)){for(var K=A.history,H,le=A.sel,ve=y=="undo"?K.done:K.undone,Be=y=="undo"?K.undone:K.done,Fe=0;Fe<ve.length&&(H=ve[Fe],!(O?H.ranges&&!H.equals(A.sel):!H.ranges));Fe++);if(Fe!=ve.length){for(K.lastOrigin=K.lastSelOrigin=null;;)if(H=ve.pop(),H.ranges){if(To(H,Be),O&&!H.equals(A.sel)){_a(A,H,{clearRedo:!1});return}le=H}else if(E){ve.push(H);return}else break;var ht=[];To(le,Be),Be.push({changes:ht,generation:K.generation}),K.generation=H.generation||++K.maxGeneration;for(var xt=Zt(A,"beforeChange")||A.cm&&Zt(A.cm,"beforeChange"),Xt=function(Rn){var $n=H.changes[Rn];if($n.origin=y,xt&&!wh(A,$n,!1))return ve.length=0,{};ht.push(bu(A,$n));var Jn=Rn?ou(A,$n):cr(ve);M(A,$n,Jn,id(A,$n)),!Rn&&A.cm&&A.cm.scrollIntoView({from:$n.from,to:Ks($n)});var yr=[];ha(A,function(ar,Lr){!Lr&&Je(yr,ar.history)==-1&&(oe(ar.history,$n),yr.push(ar.history)),M(ar,$n,null,id(ar,$n))})},Qt=H.changes.length-1;Qt>=0;--Qt){var xn=Xt(Qt);if(xn)return xn.v}}}}function C(A,y){if(y!=0&&(A.first+=y,A.sel=new Bs(fr(A.sel.ranges,function(K){return new bo(An(K.anchor.line+y,K.anchor.ch),An(K.head.line+y,K.head.ch))}),A.sel.primIndex),A.cm)){Tl(A.cm,A.first,A.first-y,y);for(var O=A.cm.display,E=O.viewFrom;E<O.viewTo;E++)gc(A.cm,E,"gutter")}}function M(A,y,O,E){if(A.cm&&!A.cm.curOp)return Ri(A.cm,M)(A,y,O,E);if(y.to.line<A.first){C(A,y.text.length-1-(y.to.line-y.from.line));return}if(!(y.from.line>A.lastLine())){if(y.from.line<A.first){var K=y.text.length-1-(A.first-y.from.line);C(A,K),y={from:An(A.first,0),to:An(y.to.line+K,y.to.ch),text:[cr(y.text)],origin:y.origin}}var H=A.lastLine();y.to.line>H&&(y={from:y.from,to:An(H,Kr(A,H).text.length),text:[y.text[0]],origin:y.origin}),y.removed=Va(A,y.from,y.to),O||(O=ou(A,y)),A.cm?R(A.cm,y,E):gs(A,y,E),Xs(A,O,Nt),A.cantEdit&&Sc(A,An(A.firstLine(),0))&&(A.cantEdit=!1)}}function R(A,y,O){var E=A.doc,K=A.display,H=y.from,le=y.to,ve=!1,Be=H.line;A.options.lineWrapping||(Be=We(pr(Kr(E,H.line))),E.iter(Be,le.line+1,function(Qt){if(Qt==K.maxLine)return ve=!0,!0})),E.sel.contains(y.from,y.to)>-1&&rn(A),gs(E,y,O,Nc(A)),A.options.lineWrapping||(E.iter(Be,H.line+y.text.length,function(Qt){var xn=us(Qt);xn>K.maxLineLength&&(K.maxLine=Qt,K.maxLineLength=xn,K.maxLineChanged=!0,ve=!1)}),ve&&(A.curOp.updateMaxLine=!0)),Vs(E,H.line),yh(A,400);var Fe=y.text.length-(le.line-H.line)-1;y.full?Tl(A):H.line==le.line&&y.text.length==1&&!xc(A.doc,y)?gc(A,H.line,"text"):Tl(A,H.line,le.line+1,Fe);var ht=Zt(A,"changes"),xt=Zt(A,"change");if(xt||ht){var Xt={from:H,to:le,text:y.text,removed:y.removed,origin:y.origin};xt&&Zs(A,"change",A,Xt),ht&&(A.curOp.changeObjs||(A.curOp.changeObjs=[])).push(Xt)}A.display.selForContextMenu=null}function j(A,y,O,E,K){var H;E||(E=O),er(E,O)<0&&(H=[E,O],O=H[0],E=H[1]),typeof y=="string"&&(y=A.splitLines(y)),T(A,{from:O,to:E,text:y,origin:K})}function $(A,y,O,E){O<A.line?A.line+=E:y<A.line&&(A.line=y,A.ch=0)}function te(A,y,O,E){for(var K=0;K<A.length;++K){var H=A[K],le=!0;if(H.ranges){H.copied||(H=A[K]=H.deepCopy(),H.copied=!0);for(var ve=0;ve<H.ranges.length;ve++)$(H.ranges[ve].anchor,y,O,E),$(H.ranges[ve].head,y,O,E);continue}for(var Be=0;Be<H.changes.length;++Be){var Fe=H.changes[Be];if(O<Fe.from.line)Fe.from=An(Fe.from.line+E,Fe.from.ch),Fe.to=An(Fe.to.line+E,Fe.to.ch);else if(y<=Fe.to.line){le=!1;break}}le||(A.splice(0,K+1),K=0)}}function oe(A,y){var O=y.from.line,E=y.to.line,K=y.text.length-(E-O)-1;te(A.done,O,E,K),te(A.undone,O,E,K)}function be(A,y,O,E){var K=y,H=y;return typeof y=="number"?H=Kr(A,vA(A,y)):K=We(y),K==null?null:(E(H,K)&&A.cm&&gc(A.cm,K,O),H)}function Ee(A){this.lines=A,this.parent=null;for(var y=0,O=0;O<A.length;++O)A[O].parent=this,y+=A[O].height;this.height=y}Ee.prototype={chunkSize:function(){return this.lines.length},removeInner:function(A,y){for(var O=A,E=A+y;O<E;++O){var K=this.lines[O];this.height-=K.height,Hs(K),Zs(K,"delete")}this.lines.splice(A,y)},collapse:function(A){A.push.apply(A,this.lines)},insertInner:function(A,y,O){this.height+=O,this.lines=this.lines.slice(0,A).concat(y).concat(this.lines.slice(A));for(var E=0;E<y.length;++E)y[E].parent=this},iterN:function(A,y,O){for(var E=A+y;A<E;++A)if(O(this.lines[A]))return!0}};function Ie(A){this.children=A;for(var y=0,O=0,E=0;E<A.length;++E){var K=A[E];y+=K.chunkSize(),O+=K.height,K.parent=this}this.size=y,this.height=O,this.parent=null}Ie.prototype={chunkSize:function(){return this.size},removeInner:function(A,y){this.size-=y;for(var O=0;O<this.children.length;++O){var E=this.children[O],K=E.chunkSize();if(A<K){var H=Math.min(y,K-A),le=E.height;if(E.removeInner(A,H),this.height-=le-E.height,K==H&&(this.children.splice(O--,1),E.parent=null),(y-=H)==0)break;A=0}else A-=K}if(this.size-y<25&&(this.children.length>1||!(this.children[0]instanceof Ee))){var ve=[];this.collapse(ve),this.children=[new Ee(ve)],this.children[0].parent=this}},collapse:function(A){for(var y=0;y<this.children.length;++y)this.children[y].collapse(A)},insertInner:function(A,y,O){this.size+=y.length,this.height+=O;for(var E=0;E<this.children.length;++E){var K=this.children[E],H=K.chunkSize();if(A<=H){if(K.insertInner(A,y,O),K.lines&&K.lines.length>50){for(var le=K.lines.length%25+25,ve=le;ve<K.lines.length;){var Be=new Ee(K.lines.slice(ve,ve+=25));K.height-=Be.height,this.children.splice(++E,0,Be),Be.parent=this}K.lines=K.lines.slice(0,le),this.maybeSpill()}break}A-=H}},maybeSpill:function(){if(!(this.children.length<=10)){var A=this;do{var y=A.children.splice(A.children.length-5,5),O=new Ie(y);if(A.parent){A.size-=O.size,A.height-=O.height;var K=Je(A.parent.children,A);A.parent.children.splice(K+1,0,O)}else{var E=new Ie(A.children);E.parent=A,A.children=[E,O],A=E}O.parent=A.parent}while(A.children.length>10);A.parent.maybeSpill()}},iterN:function(A,y,O){for(var E=0;E<this.children.length;++E){var K=this.children[E],H=K.chunkSize();if(A<H){var le=Math.min(y,H-A);if(K.iterN(A,le,O))return!0;if((y-=le)==0)break;A=0}else A-=H}}};var qe=function(A,y,O){if(O)for(var E in O)O.hasOwnProperty(E)&&(this[E]=O[E]);this.doc=A,this.node=y};qe.prototype.clear=function(){var A=this.doc.cm,y=this.line.widgets,O=this.line,E=We(O);if(!(E==null||!y)){for(var K=0;K<y.length;++K)y[K]==this&&y.splice(K--,1);y.length||(O.widgets=null);var H=mu(this);ia(O,Math.max(0,O.height-H)),A&&(Eo(A,function(){Ve(A,O,-H),gc(A,E,"widget")}),Zs(A,"lineWidgetCleared",A,this,E))}},qe.prototype.changed=function(){var A=this,y=this.height,O=this.doc.cm,E=this.line;this.height=null;var K=mu(this)-y;K&&(qr(this.doc,E)||ia(E,E.height+K),O&&Eo(O,function(){O.curOp.forceUpdate=!0,Ve(O,E,K),Zs(O,"lineWidgetChanged",O,A,We(E))}))},Gt(qe);function Ve(A,y,O){Xi(y)<(A.curOp&&A.curOp.scrollTop||A.doc.scrollTop)&&As(A,O)}function At(A,y,O,E){var K=new qe(A,O,E),H=A.cm;return H&&K.noHScroll&&(H.display.alignWidgets=!0),be(A,y,"widget",function(le){var ve=le.widgets||(le.widgets=[]);if(K.insertAt==null?ve.push(K):ve.splice(Math.min(ve.length,Math.max(0,K.insertAt)),0,K),K.line=le,H&&!qr(A,le)){var Be=Xi(le)<A.scrollTop;ia(le,le.height+mu(K)),Be&&As(H,K.height),H.curOp.forceUpdate=!0}return!0}),H&&Zs(H,"lineWidgetAdded",H,K,typeof y=="number"?y:We(y)),K}var ot=0,ct=function(A,y){this.lines=[],this.type=y,this.doc=A,this.id=++ot};ct.prototype.clear=function(){if(!this.explicitlyCleared){var A=this.doc.cm,y=A&&!A.curOp;if(y&&Nu(A),Zt(this,"clear")){var O=this.find();O&&Zs(this,"clear",O.from,O.to)}for(var E=null,K=null,H=0;H<this.lines.length;++H){var le=this.lines[H],ve=El(le.markedSpans,this);A&&!this.collapsed?gc(A,We(le),"text"):A&&(ve.to!=null&&(K=We(le)),ve.from!=null&&(E=We(le))),le.markedSpans=oA(le.markedSpans,ve),ve.from==null&&this.collapsed&&!qr(this.doc,le)&&A&&ia(le,kl(A.display))}if(A&&this.collapsed&&!A.options.lineWrapping)for(var Be=0;Be<this.lines.length;++Be){var Fe=pr(this.lines[Be]),ht=us(Fe);ht>A.display.maxLineLength&&(A.display.maxLine=Fe,A.display.maxLineLength=ht,A.display.maxLineChanged=!0)}E!=null&&A&&this.collapsed&&Tl(A,E,K+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,A&&lu(A.doc)),A&&Zs(A,"markerCleared",A,this,E,K),y&&Gu(A),this.parent&&this.parent.clear()}},ct.prototype.find=function(A,y){A==null&&this.type=="bookmark"&&(A=1);for(var O,E,K=0;K<this.lines.length;++K){var H=this.lines[K],le=El(H.markedSpans,this);if(le.from!=null&&(O=An(y?H:We(H),le.from),A==-1))return O;if(le.to!=null&&(E=An(y?H:We(H),le.to),A==1))return E}return O&&{from:O,to:E}},ct.prototype.changed=function(){var A=this,y=this.find(-1,!0),O=this,E=this.doc.cm;!y||!E||Eo(E,function(){var K=y.line,H=We(y.line),le=_A(E,H);if(le&&($h(le),E.curOp.selectionChanged=E.curOp.forceUpdate=!0),E.curOp.updateMaxLine=!0,!qr(O.doc,K)&&O.height!=null){var ve=O.height;O.height=null;var Be=mu(O)-ve;Be&&ia(K,K.height+Be)}Zs(E,"markerChanged",E,A)})},ct.prototype.attachLine=function(A){if(!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(!y.maybeHiddenMarkers||Je(y.maybeHiddenMarkers,this)==-1)&&(y.maybeUnhiddenMarkers||(y.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(A)},ct.prototype.detachLine=function(A){if(this.lines.splice(Je(this.lines,A),1),!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(y.maybeHiddenMarkers||(y.maybeHiddenMarkers=[])).push(this)}},Gt(ct);function yt(A,y,O,E,K){if(E&&E.shared)return Tt(A,y,O,E,K);if(A.cm&&!A.cm.curOp)return Ri(A.cm,yt)(A,y,O,E,K);var H=new ct(A,K),le=er(y,O);if(E&&De(E,H,!1),le>0||le==0&&H.clearWhenEmpty!==!1)return H;if(H.replacedWith&&(H.collapsed=!0,H.widgetNode=rt("span",[H.replacedWith],"CodeMirror-widget"),E.handleMouseEvents||H.widgetNode.setAttribute("cm-ignore-events","true"),E.insertLeft&&(H.widgetNode.insertLeft=!0)),H.collapsed){if(hi(A,y.line,y,O,H)||y.line!=O.line&&hi(A,O.line,y,O,H))throw new Error("Inserting collapsed marker partially overlapping an existing one");Xa()}H.addToHistory&&su(A,{from:y,to:O,origin:"markText"},A.sel,NaN);var ve=y.line,Be=A.cm,Fe;if(A.iter(ve,O.line+1,function(xt){Be&&H.collapsed&&!Be.options.lineWrapping&&pr(xt)==Be.display.maxLine&&(Fe=!0),H.collapsed&&ve!=y.line&&ia(xt,0),Hi(xt,new Rs(H,ve==y.line?y.ch:null,ve==O.line?O.ch:null),A.cm&&A.cm.curOp),++ve}),H.collapsed&&A.iter(y.line,O.line+1,function(xt){qr(A,xt)&&ia(xt,0)}),H.clearOnEnter&&Ne(H,"beforeCursorEnter",function(){return H.clear()}),H.readOnly&&(ws(),(A.history.done.length||A.history.undone.length)&&A.clearHistory()),H.collapsed&&(H.id=++ot,H.atomic=!0),Be){if(Fe&&(Be.curOp.updateMaxLine=!0),H.collapsed)Tl(Be,y.line,O.line+1);else if(H.className||H.startStyle||H.endStyle||H.css||H.attributes||H.title)for(var ht=y.line;ht<=O.line;ht++)gc(Be,ht,"text");H.atomic&&lu(Be.doc),Zs(Be,"markerAdded",Be,H)}return H}var Et=function(A,y){this.markers=A,this.primary=y;for(var O=0;O<A.length;++O)A[O].parent=this};Et.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var A=0;A<this.markers.length;++A)this.markers[A].clear();Zs(this,"clear")}},Et.prototype.find=function(A,y){return this.primary.find(A,y)},Gt(Et);function Tt(A,y,O,E,K){E=De(E),E.shared=!1;var H=[yt(A,y,O,E,K)],le=H[0],ve=E.widgetNode;return ha(A,function(Be){ve&&(E.widgetNode=ve.cloneNode(!0)),H.push(yt(Be,ri(Be,y),ri(Be,O),E,K));for(var Fe=0;Fe<Be.linked.length;++Fe)if(Be.linked[Fe].isParent)return;le=cr(H)}),new Et(H,le)}function Rt(A){return A.findMarks(An(A.first,0),A.clipPos(An(A.lastLine())),function(y){return y.parent})}function zt(A,y){for(var O=0;O<y.length;O++){var E=y[O],K=E.find(),H=A.clipPos(K.from),le=A.clipPos(K.to);if(er(H,le)){var ve=yt(A,H,le,E.primary,E.primary.type);E.markers.push(ve),ve.parent=E}}}function Pt(A){for(var y=function(E){var K=A[E],H=[K.primary.doc];ha(K.primary.doc,function(Be){return H.push(Be)});for(var le=0;le<K.markers.length;le++){var ve=K.markers[le];Je(H,ve.doc)==-1&&(ve.parent=null,K.markers.splice(le--,1))}},O=0;O<A.length;O++)y(O)}var tn=0,Ht=function(A,y,O,E,K){if(!(this instanceof Ht))return new Ht(A,y,O,E,K);O==null&&(O=0),Ie.call(this,[new Ee([new La("",null)])]),this.first=O,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=O;var H=An(O,0);this.sel=za(H),this.history=new rc(null),this.id=++tn,this.modeOption=y,this.lineSep=E,this.direction=K=="rtl"?"rtl":"ltr",this.extend=!1,typeof A=="string"&&(A=this.splitLines(A)),gs(this,{from:H,to:H,text:A}),_a(this,za(H),Nt)};Ht.prototype=Mr(Ie.prototype,{constructor:Ht,iter:function(A,y,O){O?this.iterN(A-this.first,y-A,O):this.iterN(this.first,this.first+this.size,A)},insert:function(A,y){for(var O=0,E=0;E<y.length;++E)O+=y[E].height;this.insertInner(A-this.first,y,O)},remove:function(A,y){this.removeInner(A-this.first,y)},getValue:function(A){var y=Ts(this,this.first,this.first+this.size);return A===!1?y:y.join(A||this.lineSeparator())},setValue:Ss(function(A){var y=An(this.first,0),O=this.first+this.size-1;T(this,{from:y,to:An(O,Kr(this,O).text.length),text:this.splitLines(A),origin:"setValue",full:!0},!0),this.cm&&cs(this.cm,0,0),_a(this,za(y),Nt)}),replaceRange:function(A,y,O,E){y=ri(this,y),O=O?ri(this,O):y,j(this,A,y,O,E)},getRange:function(A,y,O){var E=Va(this,ri(this,A),ri(this,y));return O===!1?E:O===""?E.join(""):E.join(O||this.lineSeparator())},getLine:function(A){var y=this.getLineHandle(A);return y&&y.text},getLineHandle:function(A){if(pn(this,A))return Kr(this,A)},getLineNumber:function(A){return We(A)},getLineHandleVisualStart:function(A){return typeof A=="number"&&(A=Kr(this,A)),pr(A)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(A){return ri(this,A)},getCursor:function(A){var y=this.sel.primary(),O;return A==null||A=="head"?O=y.head:A=="anchor"?O=y.anchor:A=="end"||A=="to"||A===!1?O=y.to():O=y.from(),O},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ss(function(A,y,O){qu(this,ri(this,typeof A=="number"?An(A,y||0):A),null,O)}),setSelection:Ss(function(A,y,O){qu(this,ri(this,A),ri(this,y||A),O)}),extendSelection:Ss(function(A,y,O){wc(this,ri(this,A),y&&ri(this,y),O)}),extendSelections:Ss(function(A,y){Wl(this,Ha(this,A),y)}),extendSelectionsBy:Ss(function(A,y){var O=fr(this.sel.ranges,A);Wl(this,Ha(this,O),y)}),setSelections:Ss(function(A,y,O){if(A.length){for(var E=[],K=0;K<A.length;K++)E[K]=new bo(ri(this,A[K].anchor),ri(this,A[K].head||A[K].anchor));y==null&&(y=Math.min(A.length-1,this.sel.primIndex)),_a(this,Cu(this.cm,E,y),O)}}),addSelection:Ss(function(A,y,O){var E=this.sel.ranges.slice(0);E.push(new bo(ri(this,A),ri(this,y||A))),_a(this,Cu(this.cm,E,E.length-1),O)}),getSelection:function(A){for(var y=this.sel.ranges,O,E=0;E<y.length;E++){var K=Va(this,y[E].from(),y[E].to());O=O?O.concat(K):K}return A===!1?O:O.join(A||this.lineSeparator())},getSelections:function(A){for(var y=[],O=this.sel.ranges,E=0;E<O.length;E++){var K=Va(this,O[E].from(),O[E].to());A!==!1&&(K=K.join(A||this.lineSeparator())),y[E]=K}return y},replaceSelection:function(A,y,O){for(var E=[],K=0;K<this.sel.ranges.length;K++)E[K]=A;this.replaceSelections(E,y,O||"+input")},replaceSelections:Ss(function(A,y,O){for(var E=[],K=this.sel,H=0;H<K.ranges.length;H++){var le=K.ranges[H];E[H]={from:le.from(),to:le.to(),text:this.splitLines(A[H]),origin:O}}for(var ve=y&&y!="end"&&bc(this,E,y),Be=E.length-1;Be>=0;Be--)T(this,E[Be]);ve?wu(this,ve):this.cm&&Uo(this.cm)}),undo:Ss(function(){c(this,"undo")}),redo:Ss(function(){c(this,"redo")}),undoSelection:Ss(function(){c(this,"undo",!0)}),redoSelection:Ss(function(){c(this,"redo",!0)}),setExtending:function(A){this.extend=A},getExtending:function(){return this.extend},historySize:function(){for(var A=this.history,y=0,O=0,E=0;E<A.done.length;E++)A.done[E].ranges||++y;for(var K=0;K<A.undone.length;K++)A.undone[K].ranges||++O;return{undo:y,redo:O}},clearHistory:function(){var A=this;this.history=new rc(this.history),ha(this,function(y){return y.history=A.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(A){return A&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(A){return this.history.generation==(A||this.cleanGeneration)},getHistory:function(){return{done:BA(this.history.done),undone:BA(this.history.undone)}},setHistory:function(A){var y=this.history=new rc(this.history);y.done=BA(A.done.slice(0),null,!0),y.undone=BA(A.undone.slice(0),null,!0)},setGutterMarker:Ss(function(A,y,O){return be(this,A,"gutter",function(E){var K=E.gutterMarkers||(E.gutterMarkers={});return K[y]=O,!O&&ue(K)&&(E.gutterMarkers=null),!0})}),clearGutter:Ss(function(A){var y=this;this.iter(function(O){O.gutterMarkers&&O.gutterMarkers[A]&&be(y,O,"gutter",function(){return O.gutterMarkers[A]=null,ue(O.gutterMarkers)&&(O.gutterMarkers=null),!0})})}),lineInfo:function(A){var y;if(typeof A=="number"){if(!pn(this,A)||(y=A,A=Kr(this,A),!A))return null}else if(y=We(A),y==null)return null;return{line:y,handle:A,text:A.text,gutterMarkers:A.gutterMarkers,textClass:A.textClass,bgClass:A.bgClass,wrapClass:A.wrapClass,widgets:A.widgets}},addLineClass:Ss(function(A,y,O){return be(this,A,y=="gutter"?"gutter":"class",function(E){var K=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass";if(!E[K])E[K]=O;else{if(we(O).test(E[K]))return!1;E[K]+=" "+O}return!0})}),removeLineClass:Ss(function(A,y,O){return be(this,A,y=="gutter"?"gutter":"class",function(E){var K=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass",H=E[K];if(H)if(O==null)E[K]=null;else{var le=H.match(we(O));if(!le)return!1;var ve=le.index+le[0].length;E[K]=H.slice(0,le.index)+(!le.index||ve==H.length?"":" ")+H.slice(ve)||null}else return!1;return!0})}),addLineWidget:Ss(function(A,y,O){return At(this,A,y,O)}),removeLineWidget:function(A){A.clear()},markText:function(A,y,O){return yt(this,ri(this,A),ri(this,y),O,O&&O.type||"range")},setBookmark:function(A,y){var O={replacedWith:y&&(y.nodeType==null?y.widget:y),insertLeft:y&&y.insertLeft,clearWhenEmpty:!1,shared:y&&y.shared,handleMouseEvents:y&&y.handleMouseEvents};return A=ri(this,A),yt(this,A,A,O,"bookmark")},findMarksAt:function(A){A=ri(this,A);var y=[],O=Kr(this,A.line).markedSpans;if(O)for(var E=0;E<O.length;++E){var K=O[E];(K.from==null||K.from<=A.ch)&&(K.to==null||K.to>=A.ch)&&y.push(K.marker.parent||K.marker)}return y},findMarks:function(A,y,O){A=ri(this,A),y=ri(this,y);var E=[],K=A.line;return this.iter(A.line,y.line+1,function(H){var le=H.markedSpans;if(le)for(var ve=0;ve<le.length;ve++){var Be=le[ve];!(Be.to!=null&&K==A.line&&A.ch>=Be.to||Be.from==null&&K!=A.line||Be.from!=null&&K==y.line&&Be.from>=y.ch)&&(!O||O(Be.marker))&&E.push(Be.marker.parent||Be.marker)}++K}),E},getAllMarks:function(){var A=[];return this.iter(function(y){var O=y.markedSpans;if(O)for(var E=0;E<O.length;++E)O[E].from!=null&&A.push(O[E].marker)}),A},posFromIndex:function(A){var y,O=this.first,E=this.lineSeparator().length;return this.iter(function(K){var H=K.text.length+E;if(H>A)return y=A,!0;A-=H,++O}),ri(this,An(O,y))},indexFromPos:function(A){A=ri(this,A);var y=A.ch;if(A.line<this.first||A.ch<0)return 0;var O=this.lineSeparator().length;return this.iter(this.first,A.line,function(E){y+=E.text.length+O}),y},copy:function(A){var y=new Ht(Ts(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return y.scrollTop=this.scrollTop,y.scrollLeft=this.scrollLeft,y.sel=this.sel,y.extend=!1,A&&(y.history.undoDepth=this.history.undoDepth,y.setHistory(this.getHistory())),y},linkedDoc:function(A){A||(A={});var y=this.first,O=this.first+this.size;A.from!=null&&A.from>y&&(y=A.from),A.to!=null&&A.to<O&&(O=A.to);var E=new Ht(Ts(this,y,O),A.mode||this.modeOption,y,this.lineSep,this.direction);return A.sharedHist&&(E.history=this.history),(this.linked||(this.linked=[])).push({doc:E,sharedHist:A.sharedHist}),E.linked=[{doc:this,isParent:!0,sharedHist:A.sharedHist}],zt(E,Rt(this)),E},unlinkDoc:function(A){if(A instanceof Oo&&(A=A.doc),this.linked)for(var y=0;y<this.linked.length;++y){var O=this.linked[y];if(O.doc==A){this.linked.splice(y,1),A.unlinkDoc(this),Pt(Rt(this));break}}if(A.history==this.history){var E=[A.id];ha(A,function(K){return E.push(K.id)},!0),A.history=new rc(null),A.history.done=BA(this.history.done,E),A.history.undone=BA(this.history.undone,E)}},iterLinkedDocs:function(A){ha(this,A)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(A){return this.lineSep?A.split(this.lineSep):rr(A)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ss(function(A){A!="rtl"&&(A="ltr"),A!=this.direction&&(this.direction=A,this.iter(function(y){return y.order=null}),this.cm&&Qu(this.cm))})}),Ht.prototype.eachLine=Ht.prototype.iter;var vn=0;function _n(A){var y=this;if(Un(y),!(_t(y,A)||aA(y.display,A))){bt(A),h&&(vn=+new Date);var O=CA(y,A,!0),E=A.dataTransfer.files;if(!(!O||y.isReadOnly()))if(E&&E.length&&window.FileReader&&window.File)for(var K=E.length,H=Array(K),le=0,ve=function(){++le==K&&Ri(y,function(){O=ri(y.doc,O);var Qt={from:O,to:O,text:y.doc.splitLines(H.filter(function(xn){return xn!=null}).join(y.doc.lineSeparator())),origin:"paste"};T(y.doc,Qt),wu(y.doc,za(ri(y.doc,O),ri(y.doc,Ks(Qt))))})()},Be=function(Qt,xn){if(y.options.allowDropFileTypes&&Je(y.options.allowDropFileTypes,Qt.type)==-1){ve();return}var Rn=new FileReader;Rn.onerror=function(){return ve()},Rn.onload=function(){var $n=Rn.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test($n)){ve();return}H[xn]=$n,ve()},Rn.readAsText(Qt)},Fe=0;Fe<E.length;Fe++)Be(E[Fe],Fe);else{if(y.state.draggingText&&y.doc.sel.contains(O)>-1){y.state.draggingText(A),setTimeout(function(){return y.display.input.focus()},20);return}try{var ht=A.dataTransfer.getData("Text");if(ht){var xt;if(y.state.draggingText&&!y.state.draggingText.copy&&(xt=y.listSelections()),Xs(y.doc,za(O,O)),xt)for(var Xt=0;Xt<xt.length;++Xt)j(y.doc,"",xt[Xt].anchor,xt[Xt].head,"drag");y.replaceSelection(ht,"around","paste"),y.display.input.focus()}}catch{}}}}function gn(A,y){if(h&&(!A.state.draggingText||+new Date-vn<100)){lr(y);return}if(!(_t(A,y)||aA(A.display,y))&&(y.dataTransfer.setData("Text",A.getSelection()),y.dataTransfer.effectAllowed="copyMove",y.dataTransfer.setDragImage&&!U)){var O=de("img",null,null,"position: fixed; left: 0; top: 0;");O.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",k&&(O.width=O.height=1,A.display.wrapper.appendChild(O),O._top=O.offsetTop),y.dataTransfer.setDragImage(O,0,0),k&&O.parentNode.removeChild(O)}}function On(A,y){var O=CA(A,y);if(O){var E=document.createDocumentFragment();yc(A,O,E),A.display.dragCursor||(A.display.dragCursor=de("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),A.display.lineSpace.insertBefore(A.display.dragCursor,A.display.cursorDiv)),Pe(A.display.dragCursor,E)}}function Un(A){A.display.dragCursor&&(A.display.lineSpace.removeChild(A.display.dragCursor),A.display.dragCursor=null)}function wn(A){if(document.getElementsByClassName){for(var y=document.getElementsByClassName("CodeMirror"),O=[],E=0;E<y.length;E++){var K=y[E].CodeMirror;K&&O.push(K)}O.length&&O[0].operation(function(){for(var H=0;H<O.length;H++)A(O[H])})}}var kr=!1;function Bi(){kr||($i(),kr=!0)}function $i(){var A;Ne(window,"resize",function(){A==null&&(A=setTimeout(function(){A=null,wn(Bo)},100))}),Ne(window,"blur",function(){return wn(Vo)})}function Bo(A){var y=A.display;y.cachedCharWidth=y.cachedTextHeight=y.cachedPaddingH=null,y.scrollbarsClipped=!1,A.setSize()}for(var Si={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},zo=0;zo<10;zo++)Si[zo+48]=Si[zo+96]=String(zo);for(var jo=65;jo<=90;jo++)Si[jo]=String.fromCharCode(jo);for(var xo=1;xo<=12;xo++)Si[xo+111]=Si[xo+63235]="F"+xo;var yo={};yo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},yo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},yo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},yo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},yo.default=q?yo.macDefault:yo.pcDefault;function Oa(A){var y=A.split(/-(?!$)/);A=y[y.length-1];for(var O,E,K,H,le=0;le<y.length-1;le++){var ve=y[le];if(/^(cmd|meta|m)$/i.test(ve))H=!0;else if(/^a(lt)?$/i.test(ve))O=!0;else if(/^(c|ctrl|control)$/i.test(ve))E=!0;else if(/^s(hift)?$/i.test(ve))K=!0;else throw new Error("Unrecognized modifier name: "+ve)}return O&&(A="Alt-"+A),E&&(A="Ctrl-"+A),H&&(A="Cmd-"+A),K&&(A="Shift-"+A),A}function No(A){var y={};for(var O in A)if(A.hasOwnProperty(O)){var E=A[O];if(/^(name|fallthrough|(de|at)tach)$/.test(O))continue;if(E=="..."){delete A[O];continue}for(var K=fr(O.split(" "),Oa),H=0;H<K.length;H++){var le=void 0,ve=void 0;H==K.length-1?(ve=K.join(" "),le=E):(ve=K.slice(0,H+1).join(" "),le="...");var Be=y[ve];if(!Be)y[ve]=le;else if(Be!=le)throw new Error("Inconsistent bindings for "+ve)}delete A[O]}for(var Fe in y)A[Fe]=y[Fe];return A}function hs(A,y,O,E){y=pl(y);var K=y.call?y.call(A,E):y[A];if(K===!1)return"nothing";if(K==="...")return"multi";if(K!=null&&O(K))return"handled";if(y.fallthrough){if(Object.prototype.toString.call(y.fallthrough)!="[object Array]")return hs(A,y.fallthrough,O,E);for(var H=0;H<y.fallthrough.length;H++){var le=hs(A,y.fallthrough[H],O,E);if(le)return le}}}function ja(A){var y=typeof A=="string"?A:Si[A.keyCode];return y=="Ctrl"||y=="Alt"||y=="Shift"||y=="Mod"}function $u(A,y,O){var E=A;return y.altKey&&E!="Alt"&&(A="Alt-"+A),(he?y.metaKey:y.ctrlKey)&&E!="Ctrl"&&(A="Ctrl-"+A),(he?y.ctrlKey:y.metaKey)&&E!="Mod"&&(A="Cmd-"+A),!O&&y.shiftKey&&E!="Shift"&&(A="Shift-"+A),A}function fl(A,y){if(k&&A.keyCode==34&&A.char)return!1;var O=Si[A.keyCode];return O==null||A.altGraphKey?!1:(A.keyCode==3&&A.code&&(O=A.code),$u(O,A,y))}function pl(A){return typeof A=="string"?yo[A]:A}function uu(A,y){for(var O=A.doc.sel.ranges,E=[],K=0;K<O.length;K++){for(var H=y(O[K]);E.length&&er(H.from,cr(E).to)<=0;){var le=E.pop();if(er(le.from,H.from)<0){H.from=le.from;break}}E.push(H)}Eo(A,function(){for(var ve=E.length-1;ve>=0;ve--)j(A.doc,"",E[ve].from,E[ve].to,"+delete");Uo(A)})}function OA(A,y,O){var E=Bt(A.text,y+O,O);return E<0||E>A.text.length?null:E}function IA(A,y,O){var E=OA(A,y.ch,O);return E==null?null:new An(y.line,E,O<0?"after":"before")}function Vu(A,y,O,E,K){if(A){y.doc.direction=="rtl"&&(K=-K);var H=xe(O,y.doc.direction);if(H){var le=K<0?cr(H):H[0],ve=K<0==(le.level==1),Be=ve?"after":"before",Fe;if(le.level>0||y.doc.direction=="rtl"){var ht=Ja(y,O);Fe=K<0?O.text.length-1:0;var xt=Ol(y,ht,Fe).top;Fe=Yt(function(Xt){return Ol(y,ht,Xt).top==xt},K<0==(le.level==1)?le.from:le.to-1,Fe),Be=="before"&&(Fe=OA(O,Fe,1))}else Fe=K<0?le.to:le.from;return new An(E,Fe,Be)}}return new An(E,K<0?O.text.length:0,K<0?"before":"after")}function Js(A,y,O,E){var K=xe(y,A.doc.direction);if(!K)return IA(y,O,E);O.ch>=y.text.length?(O.ch=y.text.length,O.sticky="before"):O.ch<=0&&(O.ch=0,O.sticky="after");var H=Ye(K,O.ch,O.sticky),le=K[H];if(A.doc.direction=="ltr"&&le.level%2==0&&(E>0?le.to>O.ch:le.from<O.ch))return IA(y,O,E);var ve=function(Jn,yr){return OA(y,Jn instanceof An?Jn.ch:Jn,yr)},Be,Fe=function(Jn){return A.options.lineWrapping?(Be=Be||Ja(A,y),$o(A,y,Be,Jn)):{begin:0,end:y.text.length}},ht=Fe(O.sticky=="before"?ve(O,-1):O.ch);if(A.doc.direction=="rtl"||le.level==1){var xt=le.level==1==E<0,Xt=ve(O,xt?1:-1);if(Xt!=null&&(xt?Xt<=le.to&&Xt<=ht.end:Xt>=le.from&&Xt>=ht.begin)){var Qt=xt?"before":"after";return new An(O.line,Xt,Qt)}}var xn=function(Jn,yr,ar){for(var Lr=function(Io,Ga){return Ga?new An(O.line,ve(Io,1),"before"):new An(O.line,Io,"after")};Jn>=0&&Jn<K.length;Jn+=yr){var ai=K[Jn],Nr=yr>0==(ai.level!=1),Ji=Nr?ar.begin:ve(ar.end,-1);if(ai.from<=Ji&&Ji<ai.to||(Ji=Nr?ai.from:ve(ai.to,-1),ar.begin<=Ji&&Ji<ar.end))return Lr(Ji,Nr)}},Rn=xn(H+E,E,ht);if(Rn)return Rn;var $n=E>0?ht.end:ve(ht.begin,-1);return $n!=null&&!(E>0&&$n==y.text.length)&&(Rn=xn(E>0?0:K.length-1,E,Fe($n)),Rn)?Rn:null}var ml={selectAll:Ql,singleSelection:function(A){return A.setSelection(A.getCursor("anchor"),A.getCursor("head"),Nt)},killLine:function(A){return uu(A,function(y){if(y.empty()){var O=Kr(A.doc,y.head.line).text.length;return y.head.ch==O&&y.head.line<A.lastLine()?{from:y.head,to:An(y.head.line+1,0)}:{from:y.head,to:An(y.head.line,O)}}else return{from:y.from(),to:y.to()}})},deleteLine:function(A){return uu(A,function(y){return{from:An(y.from().line,0),to:ri(A.doc,An(y.to().line+1,0))}})},delLineLeft:function(A){return uu(A,function(y){return{from:An(y.from().line,0),to:y.from()}})},delWrappedLineLeft:function(A){return uu(A,function(y){var O=A.charCoords(y.head,"div").top+5,E=A.coordsChar({left:0,top:O},"div");return{from:E,to:y.from()}})},delWrappedLineRight:function(A){return uu(A,function(y){var O=A.charCoords(y.head,"div").top+5,E=A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:O},"div");return{from:y.from(),to:E}})},undo:function(A){return A.undo()},redo:function(A){return A.redo()},undoSelection:function(A){return A.undoSelection()},redoSelection:function(A){return A.redoSelection()},goDocStart:function(A){return A.extendSelection(An(A.firstLine(),0))},goDocEnd:function(A){return A.extendSelection(An(A.lastLine()))},goLineStart:function(A){return A.extendSelectionsBy(function(y){return sa(A,y.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(A){return A.extendSelectionsBy(function(y){return bs(A,y.head)},{origin:"+move",bias:1})},goLineEnd:function(A){return A.extendSelectionsBy(function(y){return Pl(A,y.head.line)},{origin:"+move",bias:-1})},goLineRight:function(A){return A.extendSelectionsBy(function(y){var O=A.cursorCoords(y.head,"div").top+5;return A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:O},"div")},en)},goLineLeft:function(A){return A.extendSelectionsBy(function(y){var O=A.cursorCoords(y.head,"div").top+5;return A.coordsChar({left:0,top:O},"div")},en)},goLineLeftSmart:function(A){return A.extendSelectionsBy(function(y){var O=A.cursorCoords(y.head,"div").top+5,E=A.coordsChar({left:0,top:O},"div");return E.ch<A.getLine(E.line).search(/\S/)?bs(A,y.head):E},en)},goLineUp:function(A){return A.moveV(-1,"line")},goLineDown:function(A){return A.moveV(1,"line")},goPageUp:function(A){return A.moveV(-1,"page")},goPageDown:function(A){return A.moveV(1,"page")},goCharLeft:function(A){return A.moveH(-1,"char")},goCharRight:function(A){return A.moveH(1,"char")},goColumnLeft:function(A){return A.moveH(-1,"column")},goColumnRight:function(A){return A.moveH(1,"column")},goWordLeft:function(A){return A.moveH(-1,"word")},goGroupRight:function(A){return A.moveH(1,"group")},goGroupLeft:function(A){return A.moveH(-1,"group")},goWordRight:function(A){return A.moveH(1,"word")},delCharBefore:function(A){return A.deleteH(-1,"codepoint")},delCharAfter:function(A){return A.deleteH(1,"char")},delWordBefore:function(A){return A.deleteH(-1,"word")},delWordAfter:function(A){return A.deleteH(1,"word")},delGroupBefore:function(A){return A.deleteH(-1,"group")},delGroupAfter:function(A){return A.deleteH(1,"group")},indentAuto:function(A){return A.indentSelection("smart")},indentMore:function(A){return A.indentSelection("add")},indentLess:function(A){return A.indentSelection("subtract")},insertTab:function(A){return A.replaceSelection("	")},insertSoftTab:function(A){for(var y=[],O=A.listSelections(),E=A.options.tabSize,K=0;K<O.length;K++){var H=O[K].from(),le=ke(A.getLine(H.line),H.ch,E);y.push(Qr(E-le%E))}A.replaceSelections(y)},defaultTab:function(A){A.somethingSelected()?A.indentSelection("add"):A.execCommand("insertTab")},transposeChars:function(A){return Eo(A,function(){for(var y=A.listSelections(),O=[],E=0;E<y.length;E++)if(y[E].empty()){var K=y[E].head,H=Kr(A.doc,K.line).text;if(H){if(K.ch==H.length&&(K=new An(K.line,K.ch-1)),K.ch>0)K=new An(K.line,K.ch+1),A.replaceRange(H.charAt(K.ch-1)+H.charAt(K.ch-2),An(K.line,K.ch-2),K,"+transpose");else if(K.line>A.doc.first){var le=Kr(A.doc,K.line-1).text;le&&(K=new An(K.line,1),A.replaceRange(H.charAt(0)+A.doc.lineSeparator()+le.charAt(le.length-1),An(K.line-1,le.length-1),K,"+transpose"))}}O.push(new bo(K,K))}A.setSelections(O)})},newlineAndIndent:function(A){return Eo(A,function(){for(var y=A.listSelections(),O=y.length-1;O>=0;O--)A.replaceRange(A.doc.lineSeparator(),y[O].anchor,y[O].head,"+input");y=A.listSelections();for(var E=0;E<y.length;E++)A.indentLine(y[E].from().line,null,!0);Uo(A)})},openLine:function(A){return A.replaceSelection(`
`,"start")},toggleOverwrite:function(A){return A.toggleOverwrite()}};function sa(A,y){var O=Kr(A.doc,y),E=pr(O);return E!=O&&(y=We(E)),Vu(!0,A,E,y,1)}function Pl(A,y){var O=Kr(A.doc,y),E=Ir(O);return E!=O&&(y=We(E)),Vu(!0,A,O,y,-1)}function bs(A,y){var O=sa(A,y.line),E=Kr(A.doc,O.line),K=xe(E,A.doc.direction);if(!K||K[0].level==0){var H=Math.max(O.ch,E.text.search(/\S/)),le=y.line==O.line&&y.ch<=H&&y.ch;return An(O.line,le?0:H,O.sticky)}return O}function Qs(A,y,O){if(typeof y=="string"&&(y=ml[y],!y))return!1;A.display.input.ensurePolled();var E=A.display.shift,K=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),O&&(A.display.shift=!1),K=y(A)!=gt}finally{A.display.shift=E,A.state.suppressEdits=!1}return K}function el(A,y,O){for(var E=0;E<A.state.keyMaps.length;E++){var K=hs(y,A.state.keyMaps[E],O,A);if(K)return K}return A.options.extraKeys&&hs(y,A.options.extraKeys,O,A)||hs(y,A.options.keyMap,O,A)}var tl=new Oe;function Mh(A,y,O,E){var K=A.state.keySeq;if(K){if(ja(y))return"handled";if(/\'$/.test(y)?A.state.keySeq=null:tl.set(50,function(){A.state.keySeq==K&&(A.state.keySeq=null,A.display.input.reset())}),Bd(A,K+" "+y,O,E))return!0}return Bd(A,y,O,E)}function Bd(A,y,O,E){var K=el(A,y,E);return K=="multi"&&(A.state.keySeq=y),K=="handled"&&Zs(A,"keyHandled",A,y,O),(K=="handled"||K=="multi")&&(bt(O),bA(A)),!!K}function Od(A,y){var O=fl(y,!0);return O?y.shiftKey&&!A.state.keySeq?Mh(A,"Shift-"+O,y,function(E){return Qs(A,E,!0)})||Mh(A,O,y,function(E){if(typeof E=="string"?/^go[A-Z]/.test(E):E.motion)return Qs(A,E)}):Mh(A,O,y,function(E){return Qs(A,E)}):!1}function Sh(A,y,O){return Mh(A,"'"+O+"'",y,function(E){return Qs(A,E,!0)})}var ic=null;function Id(A){var y=this;if(!(A.target&&A.target!=y.display.input.getField())&&(y.curOp.focus=ut(mt(y)),!_t(y,A))){h&&g<11&&A.keyCode==27&&(A.returnValue=!1);var O=A.keyCode;y.display.shift=O==16||A.shiftKey;var E=Od(y,A);k&&(ic=E?O:null,!E&&O==88&&!$a&&(q?A.metaKey:A.ctrlKey)&&y.replaceSelection("",null,"cut")),i&&!q&&!E&&O==46&&A.shiftKey&&!A.ctrlKey&&document.execCommand&&document.execCommand("cut"),O==18&&!/\bCodeMirror-crosshair\b/.test(y.display.lineDiv.className)&&Ia(y)}}function Ia(A){var y=A.display.lineDiv;Te(y,"CodeMirror-crosshair");function O(E){(E.keyCode==18||!E.altKey)&&(pe(y,"CodeMirror-crosshair"),pt(document,"keyup",O),pt(document,"mouseover",O))}Ne(document,"keyup",O),Ne(document,"mouseover",O)}function Au(A){A.keyCode==16&&(this.doc.sel.shift=!1),_t(this,A)}function Eh(A){var y=this;if(!(A.target&&A.target!=y.display.input.getField())&&!(aA(y.display,A)||_t(y,A)||A.ctrlKey&&!A.altKey||q&&A.metaKey)){var O=A.keyCode,E=A.charCode;if(k&&O==ic){ic=null,bt(A);return}if(!(k&&(!A.which||A.which<10)&&Od(y,A))){var K=String.fromCharCode(E??O);K!="\b"&&(Sh(y,A,K)||y.display.input.onKeyPress(A))}}}var _p=400,Ec=function(A,y,O){this.time=A,this.pos=y,this.button=O};Ec.prototype.compare=function(A,y,O){return this.time+_p>A&&er(y,this.pos)==0&&O==this.button};var kA,Na;function Cp(A,y){var O=+new Date;return Na&&Na.compare(O,A,y)?(kA=Na=null,"triple"):kA&&kA.compare(O,A,y)?(Na=new Ec(O,A,y),kA=null,"double"):(kA=new Ec(O,A,y),Na=null,"single")}function kd(A){var y=this,O=y.display;if(!(_t(y,A)||O.activeTouch&&O.input.supportsTouch())){if(O.input.ensurePolled(),O.shift=A.shiftKey,aA(O,A)){b||(O.scroller.draggable=!1,setTimeout(function(){return O.scroller.draggable=!0},100));return}if(!sd(y,A)){var E=CA(y,A),K=on(A),H=E?Cp(E,K):"single";Ut(y).focus(),K==1&&y.state.selectingText&&y.state.selectingText(A),!(E&&bp(y,K,E,H,A))&&(K==1?E?Bc(y,E,H,A):wr(A)==O.scroller&&bt(A):K==2?(E&&wc(y.doc,E),setTimeout(function(){return O.input.focus()},20)):K==3&&(ce?y.display.input.onContextMenu(A):Wc(y)))}}}function bp(A,y,O,E,K){var H="Click";return E=="double"?H="Double"+H:E=="triple"&&(H="Triple"+H),H=(y==1?"Left":y==2?"Middle":"Right")+H,Mh(A,$u(H,K),K,function(le){if(typeof le=="string"&&(le=ml[le]),!le)return!1;var ve=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),ve=le(A,O)!=gt}finally{A.state.suppressEdits=!1}return ve})}function od(A,y,O){var E=A.getOption("configureMouse"),K=E?E(A,y,O):{};if(K.unit==null){var H=J?O.shiftKey&&O.metaKey:O.altKey;K.unit=H?"rectangle":y=="single"?"char":y=="double"?"word":"line"}return(K.extend==null||A.doc.extend)&&(K.extend=A.doc.extend||O.shiftKey),K.addNew==null&&(K.addNew=q?O.metaKey:O.ctrlKey),K.moveOnDrag==null&&(K.moveOnDrag=!(q?O.altKey:O.ctrlKey)),K}function Bc(A,y,O,E){h?setTimeout(Lt(HA,A),0):A.curOp.focus=ut(mt(A));var K=od(A,O,E),H=A.doc.sel,le;A.options.dragDrop&&zn&&!A.isReadOnly()&&O=="single"&&(le=H.contains(y))>-1&&(er((le=H.ranges[le]).from(),y)<0||y.xRel>0)&&(er(le.to(),y)>0||y.xRel<0)?um(A,E,y,K):Td(A,E,y,K)}function um(A,y,O,E){var K=A.display,H=!1,le=Ri(A,function(Fe){b&&(K.scroller.draggable=!1),A.state.draggingText=!1,A.state.delayingBlurEvent&&(A.hasFocus()?A.state.delayingBlurEvent=!1:Wc(A)),pt(K.wrapper.ownerDocument,"mouseup",le),pt(K.wrapper.ownerDocument,"mousemove",ve),pt(K.scroller,"dragstart",Be),pt(K.scroller,"drop",le),H||(bt(Fe),E.addNew||wc(A.doc,O,null,null,E.extend),b&&!U||h&&g==9?setTimeout(function(){K.wrapper.ownerDocument.body.focus({preventScroll:!0}),K.input.focus()},20):K.input.focus())}),ve=function(Fe){H=H||Math.abs(y.clientX-Fe.clientX)+Math.abs(y.clientY-Fe.clientY)>=10},Be=function(){return H=!0};b&&(K.scroller.draggable=!0),A.state.draggingText=le,le.copy=!E.moveOnDrag,Ne(K.wrapper.ownerDocument,"mouseup",le),Ne(K.wrapper.ownerDocument,"mousemove",ve),Ne(K.scroller,"dragstart",Be),Ne(K.scroller,"drop",le),A.state.delayingBlurEvent=!0,setTimeout(function(){return K.input.focus()},20),K.scroller.dragDrop&&K.scroller.dragDrop()}function oc(A,y,O){if(O=="char")return new bo(y,y);if(O=="word")return A.findWordAt(y);if(O=="line")return new bo(An(y.line,0),ri(A.doc,An(y.line+1,0)));var E=O(A,y);return new bo(E.from,E.to)}function Td(A,y,O,E){h&&Wc(A);var K=A.display,H=A.doc;bt(y);var le,ve,Be=H.sel,Fe=Be.ranges;if(E.addNew&&!E.extend?(ve=H.sel.contains(O),ve>-1?le=Fe[ve]:le=new bo(O,O)):(le=H.sel.primary(),ve=H.sel.primIndex),E.unit=="rectangle")E.addNew||(le=new bo(O,O)),O=CA(A,y,!0,!0),ve=-1;else{var ht=oc(A,O,E.unit);E.extend?le=Ws(le,ht.anchor,ht.head,E.extend):le=ht}E.addNew?ve==-1?(ve=Fe.length,_a(H,Cu(A,Fe.concat([le]),ve),{scroll:!1,origin:"*mouse"})):Fe.length>1&&Fe[ve].empty()&&E.unit=="char"&&!E.extend?(_a(H,Cu(A,Fe.slice(0,ve).concat(Fe.slice(ve+1)),0),{scroll:!1,origin:"*mouse"}),Be=H.sel):dl(H,ve,le,nn):(ve=0,_a(H,new Bs([le],0),nn),Be=H.sel);var xt=O;function Xt(ar){if(er(xt,ar)!=0)if(xt=ar,E.unit=="rectangle"){for(var Lr=[],ai=A.options.tabSize,Nr=ke(Kr(H,O.line).text,O.ch,ai),Ji=ke(Kr(H,ar.line).text,ar.ch,ai),Io=Math.min(Nr,Ji),Ga=Math.max(Nr,Ji),aa=Math.min(O.line,ar.line),Ca=Math.min(A.lastLine(),Math.max(O.line,ar.line));aa<=Ca;aa++){var ba=Kr(H,aa).text,ka=Sn(ba,Io,ai);Io==Ga?Lr.push(new bo(An(aa,ka),An(aa,ka))):ba.length>ka&&Lr.push(new bo(An(aa,ka),An(aa,Sn(ba,Ga,ai))))}Lr.length||Lr.push(new bo(O,O)),_a(H,Cu(A,Be.ranges.slice(0,ve).concat(Lr),ve),{origin:"*mouse",scroll:!1}),A.scrollIntoView(ar)}else{var Yl=le,Wa=oc(A,ar,E.unit),xa=Yl.anchor,ds;er(Wa.anchor,xa)>0?(ds=Wa.head,xa=js(Yl.from(),Wa.anchor)):(ds=Wa.anchor,xa=vs(Yl.to(),Wa.head));var yi=Be.ranges.slice(0);yi[ve]=Bh(A,new bo(ri(H,xa),ds)),_a(H,Cu(A,yi,ve),nn)}}var Qt=K.wrapper.getBoundingClientRect(),xn=0;function Rn(ar){var Lr=++xn,ai=CA(A,ar,!0,E.unit=="rectangle");if(ai)if(er(ai,xt)!=0){A.curOp.focus=ut(mt(A)),Xt(ai);var Nr=Fu(K,H);(ai.line>=Nr.to||ai.line<Nr.from)&&setTimeout(Ri(A,function(){xn==Lr&&Rn(ar)}),150)}else{var Ji=ar.clientY<Qt.top?-20:ar.clientY>Qt.bottom?20:0;Ji&&setTimeout(Ri(A,function(){xn==Lr&&(K.scroller.scrollTop+=Ji,Rn(ar))}),50)}}function $n(ar){A.state.selectingText=!1,xn=1/0,ar&&(bt(ar),K.input.focus()),pt(K.wrapper.ownerDocument,"mousemove",Jn),pt(K.wrapper.ownerDocument,"mouseup",yr),H.history.lastSelOrigin=null}var Jn=Ri(A,function(ar){ar.buttons===0||!on(ar)?$n(ar):Rn(ar)}),yr=Ri(A,$n);A.state.selectingText=yr,Ne(K.wrapper.ownerDocument,"mousemove",Jn),Ne(K.wrapper.ownerDocument,"mouseup",yr)}function Bh(A,y){var O=y.anchor,E=y.head,K=Kr(A.doc,O.line);if(er(O,E)==0&&O.sticky==E.sticky)return y;var H=xe(K);if(!H)return y;var le=Ye(H,O.ch,O.sticky),ve=H[le];if(ve.from!=O.ch&&ve.to!=O.ch)return y;var Be=le+(ve.from==O.ch==(ve.level!=1)?0:1);if(Be==0||Be==H.length)return y;var Fe;if(E.line!=O.line)Fe=(E.line-O.line)*(A.doc.direction=="ltr"?1:-1)>0;else{var ht=Ye(H,E.ch,E.sticky),xt=ht-le||(E.ch-O.ch)*(ve.level==1?-1:1);ht==Be-1||ht==Be?Fe=xt<0:Fe=xt>0}var Xt=H[Be+(Fe?-1:0)],Qt=Fe==(Xt.level==1),xn=Qt?Xt.from:Xt.to,Rn=Qt?"after":"before";return O.ch==xn&&O.sticky==Rn?y:new bo(new An(O.line,xn,Rn),E)}function xp(A,y,O,E){var K,H;if(y.touches)K=y.touches[0].clientX,H=y.touches[0].clientY;else try{K=y.clientX,H=y.clientY}catch{return!1}if(K>=Math.floor(A.display.gutters.getBoundingClientRect().right))return!1;E&&bt(y);var le=A.display,ve=le.lineDiv.getBoundingClientRect();if(H>ve.bottom||!Zt(A,O))return En(y);H-=ve.top-le.viewOffset;for(var Be=0;Be<A.display.gutterSpecs.length;++Be){var Fe=le.gutters.childNodes[Be];if(Fe&&Fe.getBoundingClientRect().right>=K){var ht=Ct(A.doc,H),xt=A.display.gutterSpecs[Be];return Ot(A,O,A,ht,xt.className,y),En(y)}}}function sd(A,y){return xp(A,y,"gutterClick",!0)}function Uf(A,y){aA(A.display,y)||zf(A,y)||_t(A,y,"contextmenu")||ce||A.display.input.onContextMenu(y)}function zf(A,y){return Zt(A,"gutterContextMenu")?xp(A,y,"gutterContextMenu",!1):!1}function wp(A){A.display.wrapper.className=A.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+A.options.theme.replace(/(^|\s)\s*/g," cm-s-"),pc(A)}var Oh={toString:function(){return"CodeMirror.Init"}},af={},ql={};function Rl(A){var y=A.optionHandlers;function O(E,K,H,le){A.defaults[E]=K,H&&(y[E]=le?function(ve,Be,Fe){Fe!=Oh&&H(ve,Be,Fe)}:H)}A.defineOption=O,A.Init=Oh,O("value","",function(E,K){return E.setValue(K)},!0),O("mode",null,function(E,K){E.doc.modeOption=K,nd(E)},!0),O("indentUnit",2,nd,!0),O("indentWithTabs",!1),O("smartIndent",!0),O("tabSize",4,function(E){SA(E),pc(E),Tl(E)},!0),O("lineSeparator",null,function(E,K){if(E.doc.lineSep=K,!!K){var H=[],le=E.doc.first;E.doc.iter(function(Be){for(var Fe=0;;){var ht=Be.text.indexOf(K,Fe);if(ht==-1)break;Fe=ht+K.length,H.push(An(le,ht))}le++});for(var ve=H.length-1;ve>=0;ve--)j(E.doc,K,H[ve],An(H[ve].line,H[ve].ch+K.length))}}),O("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(E,K,H){E.state.specialChars=new RegExp(K.source+(K.test("	")?"":"|	"),"g"),H!=Oh&&E.refresh()}),O("specialCharPlaceholder",Ru,function(E){return E.refresh()},!0),O("electricChars",!0),O("inputStyle",X?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),O("spellcheck",!1,function(E,K){return E.getInputField().spellcheck=K},!0),O("autocorrect",!1,function(E,K){return E.getInputField().autocorrect=K},!0),O("autocapitalize",!1,function(E,K){return E.getInputField().autocapitalize=K},!0),O("rtlMoveVisually",!N),O("wholeLineUpdateBefore",!0),O("theme","default",function(E){wp(E),Gl(E)},!0),O("keyMap","default",function(E,K,H){var le=pl(K),ve=H!=Oh&&pl(H);ve&&ve.detach&&ve.detach(E,le),le.attach&&le.attach(E,ve||null)}),O("extraKeys",null),O("configureMouse",null),O("lineWrapping",!1,jf,!0),O("gutters",[],function(E,K){E.display.gutterSpecs=Mi(K,E.options.lineNumbers),Gl(E)},!0),O("fixedGutter",!0,function(E,K){E.display.gutters.style.left=K?Fo(E.display)+"px":"0",E.refresh()},!0),O("coverGutterNextToScrollbar",!1,function(E){return zu(E)},!0),O("scrollbarStyle","native",function(E){ed(E),zu(E),E.display.scrollbars.setScrollTop(E.doc.scrollTop),E.display.scrollbars.setScrollLeft(E.doc.scrollLeft)},!0),O("lineNumbers",!1,function(E,K){E.display.gutterSpecs=Mi(E.options.gutters,K),Gl(E)},!0),O("firstLineNumber",1,Gl,!0),O("lineNumberFormatter",function(E){return E},Gl,!0),O("showCursorWhenSelecting",!1,Fa,!0),O("resetSelectionOnContextMenu",!0),O("lineWiseCopyCut",!0),O("pasteLinesPerSelection",!0),O("selectionsMayTouch",!1),O("readOnly",!1,function(E,K){K=="nocursor"&&(Vo(E),E.display.input.blur()),E.display.input.readOnlyChanged(K)}),O("screenReaderLabel",null,function(E,K){K=K===""?null:K,E.display.input.screenReaderLabelChanged(K)}),O("disableInput",!1,function(E,K){K||E.display.input.reset()},!0),O("dragDrop",!0,Am),O("allowDropFileTypes",null),O("cursorBlinkRate",530),O("cursorScrollMargin",0),O("cursorHeight",1,Fa,!0),O("singleCursorHeightPerLine",!0,Fa,!0),O("workTime",100),O("workDelay",100),O("flattenSpans",!0,SA,!0),O("addModeClass",!1,SA,!0),O("pollInterval",100),O("undoDepth",200,function(E,K){return E.doc.history.undoDepth=K}),O("historyEventDelay",1250),O("viewportMargin",10,function(E){return E.refresh()},!0),O("maxHighlightLength",1e4,SA,!0),O("moveInputWithCursor",!0,function(E,K){K||E.display.input.resetPosition()}),O("tabindex",null,function(E,K){return E.display.input.getField().tabIndex=K||""}),O("autofocus",null),O("direction","ltr",function(E,K){return E.doc.setDirection(K)},!0),O("phrases",null)}function Am(A,y,O){var E=O&&O!=Oh;if(!y!=!E){var K=A.display.dragFunctions,H=y?Ne:pt;H(A.display.scroller,"dragstart",K.start),H(A.display.scroller,"dragenter",K.enter),H(A.display.scroller,"dragover",K.over),H(A.display.scroller,"dragleave",K.leave),H(A.display.scroller,"drop",K.drop)}}function jf(A){A.options.lineWrapping?(Te(A.display.wrapper,"CodeMirror-wrap"),A.display.sizer.style.minWidth="",A.display.sizerWidth=null):(pe(A.display.wrapper,"CodeMirror-wrap"),ya(A)),$A(A),Tl(A),pc(A),setTimeout(function(){return zu(A)},100)}function Oo(A,y){var O=this;if(!(this instanceof Oo))return new Oo(A,y);this.options=y=y?De(y):{},De(af,y,!1);var E=y.value;typeof E=="string"?E=new Ht(E,y.mode,null,y.lineSeparator,y.direction):y.mode&&(E.modeOption=y.mode),this.doc=E;var K=new Oo.inputStyles[y.inputStyle](this),H=this.display=new bh(A,E,K,y);H.wrapper.CodeMirror=this,wp(this),y.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ed(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Oe,keySeq:null,specialChars:null},y.autofocus&&!X&&H.input.focus(),h&&g<11&&setTimeout(function(){return O.display.input.reset(!0)},20),Hu(this),Bi(),Nu(this),this.curOp.forceUpdate=!0,hr(this,E),y.autofocus&&!X||this.hasFocus()?setTimeout(function(){O.hasFocus()&&!O.state.focused&&Xh(O)},20):Vo(this);for(var le in ql)ql.hasOwnProperty(le)&&ql[le](this,y[le],Oh);_h(this),y.finishInit&&y.finishInit(this);for(var ve=0;ve<lf.length;++ve)lf[ve](this);Gu(this),b&&y.lineWrapping&&getComputedStyle(H.lineDiv).textRendering=="optimizelegibility"&&(H.lineDiv.style.textRendering="auto")}Oo.defaults=af,Oo.optionHandlers=ql;function Hu(A){var y=A.display;Ne(y.scroller,"mousedown",Ri(A,kd)),h&&g<11?Ne(y.scroller,"dblclick",Ri(A,function(Be){if(!_t(A,Be)){var Fe=CA(A,Be);if(!(!Fe||sd(A,Be)||aA(A.display,Be))){bt(Be);var ht=A.findWordAt(Fe);wc(A.doc,ht.anchor,ht.head)}}})):Ne(y.scroller,"dblclick",function(Be){return _t(A,Be)||bt(Be)}),Ne(y.scroller,"contextmenu",function(Be){return Uf(A,Be)}),Ne(y.input.getField(),"contextmenu",function(Be){y.scroller.contains(Be.target)||Uf(A,Be)});var O,E={end:0};function K(){y.activeTouch&&(O=setTimeout(function(){return y.activeTouch=null},1e3),E=y.activeTouch,E.end=+new Date)}function H(Be){if(Be.touches.length!=1)return!1;var Fe=Be.touches[0];return Fe.radiusX<=1&&Fe.radiusY<=1}function le(Be,Fe){if(Fe.left==null)return!0;var ht=Fe.left-Be.left,xt=Fe.top-Be.top;return ht*ht+xt*xt>20*20}Ne(y.scroller,"touchstart",function(Be){if(!_t(A,Be)&&!H(Be)&&!sd(A,Be)){y.input.ensurePolled(),clearTimeout(O);var Fe=+new Date;y.activeTouch={start:Fe,moved:!1,prev:Fe-E.end<=300?E:null},Be.touches.length==1&&(y.activeTouch.left=Be.touches[0].pageX,y.activeTouch.top=Be.touches[0].pageY)}}),Ne(y.scroller,"touchmove",function(){y.activeTouch&&(y.activeTouch.moved=!0)}),Ne(y.scroller,"touchend",function(Be){var Fe=y.activeTouch;if(Fe&&!aA(y,Be)&&Fe.left!=null&&!Fe.moved&&new Date-Fe.start<300){var ht=A.coordsChar(y.activeTouch,"page"),xt;!Fe.prev||le(Fe,Fe.prev)?xt=new bo(ht,ht):!Fe.prev.prev||le(Fe,Fe.prev.prev)?xt=A.findWordAt(ht):xt=new bo(An(ht.line,0),ri(A.doc,An(ht.line+1,0))),A.setSelection(xt.anchor,xt.head),A.focus(),bt(Be)}K()}),Ne(y.scroller,"touchcancel",K),Ne(y.scroller,"scroll",function(){y.scroller.clientHeight&&(Uu(A,y.scroller.scrollTop),Nl(A,y.scroller.scrollLeft,!0),Ot(A,"scroll",A))}),Ne(y.scroller,"mousewheel",function(Be){return Cc(A,Be)}),Ne(y.scroller,"DOMMouseScroll",function(Be){return Cc(A,Be)}),Ne(y.wrapper,"scroll",function(){return y.wrapper.scrollTop=y.wrapper.scrollLeft=0}),y.dragFunctions={enter:function(Be){_t(A,Be)||lr(Be)},over:function(Be){_t(A,Be)||(On(A,Be),lr(Be))},start:function(Be){return gn(A,Be)},drop:Ri(A,_n),leave:function(Be){_t(A,Be)||Un(A)}};var ve=y.input.getField();Ne(ve,"keyup",function(Be){return Au.call(A,Be)}),Ne(ve,"keydown",Ri(A,Id)),Ne(ve,"keypress",Ri(A,Eh)),Ne(ve,"focus",function(Be){return Xh(A,Be)}),Ne(ve,"blur",function(Be){return Vo(A,Be)})}var lf=[];Oo.defineInitHook=function(A){return lf.push(A)};function Ih(A,y,O,E){var K=A.doc,H;O==null&&(O="add"),O=="smart"&&(K.mode.indent?H=Dr(A,y).state:O="prev");var le=A.options.tabSize,ve=Kr(K,y),Be=ke(ve.text,null,le);ve.stateAfter&&(ve.stateAfter=null);var Fe=ve.text.match(/^\s*/)[0],ht;if(!E&&!/\S/.test(ve.text))ht=0,O="not";else if(O=="smart"&&(ht=K.mode.indent(H,ve.text.slice(Fe.length),ve.text),ht==gt||ht>150)){if(!E)return;O="prev"}O=="prev"?y>K.first?ht=ke(Kr(K,y-1).text,null,le):ht=0:O=="add"?ht=Be+A.options.indentUnit:O=="subtract"?ht=Be-A.options.indentUnit:typeof O=="number"&&(ht=Be+O),ht=Math.max(0,ht);var xt="",Xt=0;if(A.options.indentWithTabs)for(var Qt=Math.floor(ht/le);Qt;--Qt)Xt+=le,xt+="	";if(Xt<ht&&(xt+=Qr(ht-Xt)),xt!=Fe)return j(K,xt,An(y,0),An(y,Fe.length),"+input"),ve.stateAfter=null,!0;for(var xn=0;xn<K.sel.ranges.length;xn++){var Rn=K.sel.ranges[xn];if(Rn.head.line==y&&Rn.head.ch<Fe.length){var $n=An(y,Fe.length);dl(K,xn,new bo($n,$n));break}}}var TA=null;function Pd(A){TA=A}function Mp(A,y,O,E,K){var H=A.doc;A.display.shift=!1,E||(E=H.sel);var le=+new Date-200,ve=K=="paste"||A.state.pasteIncoming>le,Be=rr(y),Fe=null;if(ve&&E.ranges.length>1)if(TA&&TA.text.join(`
`)==y){if(E.ranges.length%TA.text.length==0){Fe=[];for(var ht=0;ht<TA.text.length;ht++)Fe.push(H.splitLines(TA.text[ht]))}}else Be.length==E.ranges.length&&A.options.pasteLinesPerSelection&&(Fe=fr(Be,function(Jn){return[Jn]}));for(var xt=A.curOp.updateInput,Xt=E.ranges.length-1;Xt>=0;Xt--){var Qt=E.ranges[Xt],xn=Qt.from(),Rn=Qt.to();Qt.empty()&&(O&&O>0?xn=An(xn.line,xn.ch-O):A.state.overwrite&&!ve?Rn=An(Rn.line,Math.min(Kr(H,Rn.line).text.length,Rn.ch+cr(Be).length)):ve&&TA&&TA.lineWise&&TA.text.join(`
`)==Be.join(`
`)&&(xn=Rn=An(xn.line,0)));var $n={from:xn,to:Rn,text:Fe?Fe[Xt%Fe.length]:Be,origin:K||(ve?"paste":A.state.cutIncoming>le?"cut":"+input")};T(A.doc,$n),Zs(A,"inputRead",A,$n)}y&&!ve&&uf(A,y),Uo(A),A.curOp.updateInput<2&&(A.curOp.updateInput=xt),A.curOp.typing=!0,A.state.pasteIncoming=A.state.cutIncoming=-1}function Oc(A,y){var O=A.clipboardData&&A.clipboardData.getData("Text");if(O)return A.preventDefault(),!y.isReadOnly()&&!y.options.disableInput&&y.hasFocus()&&Eo(y,function(){return Mp(y,O,0,null,"paste")}),!0}function uf(A,y){if(!(!A.options.electricChars||!A.options.smartIndent))for(var O=A.doc.sel,E=O.ranges.length-1;E>=0;E--){var K=O.ranges[E];if(!(K.head.ch>100||E&&O.ranges[E-1].head.line==K.head.line)){var H=A.getModeAt(K.head),le=!1;if(H.electricChars){for(var ve=0;ve<H.electricChars.length;ve++)if(y.indexOf(H.electricChars.charAt(ve))>-1){le=Ih(A,K.head.line,"smart");break}}else H.electricInput&&H.electricInput.test(Kr(A.doc,K.head.line).text.slice(0,K.head.ch))&&(le=Ih(A,K.head.line,"smart"));le&&Zs(A,"electricInput",A,K.head.line)}}}function Af(A){for(var y=[],O=[],E=0;E<A.doc.sel.ranges.length;E++){var K=A.doc.sel.ranges[E].head.line,H={anchor:An(K,0),head:An(K+1,0)};O.push(H),y.push(A.getRange(H.anchor,H.head))}return{text:y,ranges:O}}function ad(A,y,O,E){A.setAttribute("autocorrect",O?"on":"off"),A.setAttribute("autocapitalize",E?"on":"off"),A.setAttribute("spellcheck",!!y)}function kh(){var A=de("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),y=de("div",[A],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?A.style.width="1000px":A.setAttribute("wrap","off"),Q&&(A.style.border="1px solid black"),y}function Hc(A){var y=A.optionHandlers,O=A.helpers={};A.prototype={constructor:A,focus:function(){Ut(this).focus(),this.display.input.focus()},setOption:function(E,K){var H=this.options,le=H[E];H[E]==K&&E!="mode"||(H[E]=K,y.hasOwnProperty(E)&&Ri(this,y[E])(this,K,le),Ot(this,"optionChange",this,E))},getOption:function(E){return this.options[E]},getDoc:function(){return this.doc},addKeyMap:function(E,K){this.state.keyMaps[K?"push":"unshift"](pl(E))},removeKeyMap:function(E){for(var K=this.state.keyMaps,H=0;H<K.length;++H)if(K[H]==E||K[H].name==E)return K.splice(H,1),!0},addOverlay:$r(function(E,K){var H=E.token?E:A.getMode(this.options,E);if(H.startState)throw new Error("Overlays may not be stateful.");br(this.state.overlays,{mode:H,modeSpec:E,opaque:K&&K.opaque,priority:K&&K.priority||0},function(le){return le.priority}),this.state.modeGen++,Tl(this)}),removeOverlay:$r(function(E){for(var K=this.state.overlays,H=0;H<K.length;++H){var le=K[H].modeSpec;if(le==E||typeof E=="string"&&le.name==E){K.splice(H,1),this.state.modeGen++,Tl(this);return}}}),indentLine:$r(function(E,K,H){typeof K!="string"&&typeof K!="number"&&(K==null?K=this.options.smartIndent?"smart":"prev":K=K?"add":"subtract"),pn(this.doc,E)&&Ih(this,E,K,H)}),indentSelection:$r(function(E){for(var K=this.doc.sel.ranges,H=-1,le=0;le<K.length;le++){var ve=K[le];if(ve.empty())ve.head.line>H&&(Ih(this,ve.head.line,E,!0),H=ve.head.line,le==this.doc.sel.primIndex&&Uo(this));else{var Be=ve.from(),Fe=ve.to(),ht=Math.max(H,Be.line);H=Math.min(this.lastLine(),Fe.line-(Fe.ch?0:1))+1;for(var xt=ht;xt<H;++xt)Ih(this,xt,E);var Xt=this.doc.sel.ranges;Be.ch==0&&K.length==Xt.length&&Xt[le].from().ch>0&&dl(this.doc,le,new bo(Be,Xt[le].to()),Nt)}}}),getTokenAt:function(E,K){return Ns(this,E,K)},getLineTokens:function(E,K){return Ns(this,An(E),K,!0)},getTokenTypeAt:function(E){E=ri(this.doc,E);var K=ls(this,Kr(this.doc,E.line)),H=0,le=(K.length-1)/2,ve=E.ch,Be;if(ve==0)Be=K[2];else for(;;){var Fe=H+le>>1;if((Fe?K[Fe*2-1]:0)>=ve)le=Fe;else if(K[Fe*2+1]<ve)H=Fe+1;else{Be=K[Fe*2+2];break}}var ht=Be?Be.indexOf("overlay "):-1;return ht<0?Be:ht==0?null:Be.slice(0,ht-1)},getModeAt:function(E){var K=this.doc.mode;return K.innerMode?A.innerMode(K,this.getTokenAt(E).state).mode:K},getHelper:function(E,K){return this.getHelpers(E,K)[0]},getHelpers:function(E,K){var H=[];if(!O.hasOwnProperty(K))return H;var le=O[K],ve=this.getModeAt(E);if(typeof ve[K]=="string")le[ve[K]]&&H.push(le[ve[K]]);else if(ve[K])for(var Be=0;Be<ve[K].length;Be++){var Fe=le[ve[K][Be]];Fe&&H.push(Fe)}else ve.helperType&&le[ve.helperType]?H.push(le[ve.helperType]):le[ve.name]&&H.push(le[ve.name]);for(var ht=0;ht<le._global.length;ht++){var xt=le._global[ht];xt.pred(ve,this)&&Je(H,xt.val)==-1&&H.push(xt.val)}return H},getStateAfter:function(E,K){var H=this.doc;return E=vA(H,E??H.first+H.size-1),Dr(this,E+1,K).state},cursorCoords:function(E,K){var H,le=this.doc.sel.primary();return E==null?H=le.head:typeof E=="object"?H=ri(this.doc,E):H=E?le.from():le.to(),an(this,H,K||"page")},charCoords:function(E,K){return Tn(this,ri(this.doc,E),K||"page")},coordsChar:function(E,K){return E=Vt(this,E,K||"page"),Co(this,E.left,E.top)},lineAtHeight:function(E,K){return E=Vt(this,{top:E,left:0},K||"page").top,Ct(this.doc,E+this.display.viewOffset)},heightAtLine:function(E,K,H){var le=!1,ve;if(typeof E=="number"){var Be=this.doc.first+this.doc.size-1;E<this.doc.first?E=this.doc.first:E>Be&&(E=Be,le=!0),ve=Kr(this.doc,E)}else ve=E;return gu(this,ve,{top:0,left:0},K||"page",H||le).top+(le?this.doc.height-Xi(ve):0)},defaultTextHeight:function(){return kl(this.display)},defaultCharWidth:function(){return Wi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(E,K,H,le,ve){var Be=this.display;E=an(this,ri(this.doc,E));var Fe=E.bottom,ht=E.left;if(K.style.position="absolute",K.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(K),Be.sizer.appendChild(K),le=="over")Fe=E.top;else if(le=="above"||le=="near"){var xt=Math.max(Be.wrapper.clientHeight,this.doc.height),Xt=Math.max(Be.sizer.clientWidth,Be.lineSpace.clientWidth);(le=="above"||E.bottom+K.offsetHeight>xt)&&E.top>K.offsetHeight?Fe=E.top-K.offsetHeight:E.bottom+K.offsetHeight<=xt&&(Fe=E.bottom),ht+K.offsetWidth>Xt&&(ht=Xt-K.offsetWidth)}K.style.top=Fe+"px",K.style.left=K.style.right="",ve=="right"?(ht=Be.sizer.clientWidth-K.offsetWidth,K.style.right="0px"):(ve=="left"?ht=0:ve=="middle"&&(ht=(Be.sizer.clientWidth-K.offsetWidth)/2),K.style.left=ht+"px"),H&&Yc(this,{left:ht,top:Fe,right:ht+K.offsetWidth,bottom:Fe+K.offsetHeight})},triggerOnKeyDown:$r(Id),triggerOnKeyPress:$r(Eh),triggerOnKeyUp:Au,triggerOnMouseDown:$r(kd),execCommand:function(E){if(ml.hasOwnProperty(E))return ml[E].call(null,this)},triggerElectric:$r(function(E){uf(this,E)}),findPosH:function(E,K,H,le){var ve=1;K<0&&(ve=-1,K=-K);for(var Be=ri(this.doc,E),Fe=0;Fe<K&&(Be=di(this.doc,Be,ve,H,le),!Be.hitSide);++Fe);return Be},moveH:$r(function(E,K){var H=this;this.extendSelectionsBy(function(le){return H.display.shift||H.doc.extend||le.empty()?di(H.doc,le.head,E,K,H.options.rtlMoveVisually):E<0?le.from():le.to()},en)}),deleteH:$r(function(E,K){var H=this.doc.sel,le=this.doc;H.somethingSelected()?le.replaceSelection("",null,"+delete"):uu(this,function(ve){var Be=di(le,ve.head,E,K,!1);return E<0?{from:Be,to:ve.head}:{from:ve.head,to:Be}})}),findPosV:function(E,K,H,le){var ve=1,Be=le;K<0&&(ve=-1,K=-K);for(var Fe=ri(this.doc,E),ht=0;ht<K;++ht){var xt=an(this,Fe,"div");if(Be==null?Be=xt.left:xt.left=Be,Fe=Zc(this,xt,ve,H),Fe.hitSide)break}return Fe},moveV:$r(function(E,K){var H=this,le=this.doc,ve=[],Be=!this.display.shift&&!le.extend&&le.sel.somethingSelected();if(le.extendSelectionsBy(function(ht){if(Be)return E<0?ht.from():ht.to();var xt=an(H,ht.head,"div");ht.goalColumn!=null&&(xt.left=ht.goalColumn),ve.push(xt.left);var Xt=Zc(H,xt,E,K);return K=="page"&&ht==le.sel.primary()&&As(H,Tn(H,Xt,"div").top-xt.top),Xt},en),ve.length)for(var Fe=0;Fe<le.sel.ranges.length;Fe++)le.sel.ranges[Fe].goalColumn=ve[Fe]}),findWordAt:function(E){var K=this.doc,H=Kr(K,E.line).text,le=E.ch,ve=E.ch;if(H){var Be=this.getHelper(E,"wordChars");(E.sticky=="before"||ve==H.length)&&le?--le:++ve;for(var Fe=H.charAt(le),ht=Ge(Fe,Be)?function(xt){return Ge(xt,Be)}:/\s/.test(Fe)?function(xt){return/\s/.test(xt)}:function(xt){return!/\s/.test(xt)&&!Ge(xt)};le>0&&ht(H.charAt(le-1));)--le;for(;ve<H.length&&ht(H.charAt(ve));)++ve}return new bo(An(E.line,le),An(E.line,ve))},toggleOverwrite:function(E){E!=null&&E==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Te(this.display.cursorDiv,"CodeMirror-overwrite"):pe(this.display.cursorDiv,"CodeMirror-overwrite"),Ot(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ut(mt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:$r(function(E,K){cs(this,E,K)}),getScrollInfo:function(){var E=this.display.scroller;return{left:E.scrollLeft,top:E.scrollTop,height:E.scrollHeight-iu(this)-this.display.barHeight,width:E.scrollWidth-iu(this)-this.display.barWidth,clientHeight:WA(this),clientWidth:Bl(this)}},scrollIntoView:$r(function(E,K){E==null?(E={from:this.doc.sel.primary().head,to:null},K==null&&(K=this.options.cursorScrollMargin)):typeof E=="number"?E={from:An(E,0),to:null}:E.from==null&&(E={from:E,to:null}),E.to||(E.to=E.from),E.margin=K||0,E.from.line!=null?Df(this,E):mh(this,E.from,E.to,E.margin)}),setSize:$r(function(E,K){var H=this,le=function(Be){return typeof Be=="number"||/^\d+$/.test(String(Be))?Be+"px":Be};E!=null&&(this.display.wrapper.style.width=le(E)),K!=null&&(this.display.wrapper.style.height=le(K)),this.options.lineWrapping&&Vh(this);var ve=this.display.viewFrom;this.doc.iter(ve,this.display.viewTo,function(Be){if(Be.widgets){for(var Fe=0;Fe<Be.widgets.length;Fe++)if(Be.widgets[Fe].noHScroll){gc(H,ve,"widget");break}}++ve}),this.curOp.forceUpdate=!0,Ot(this,"refresh",this)}),operation:function(E){return Eo(this,E)},startOperation:function(){return Nu(this)},endOperation:function(){return Gu(this)},refresh:$r(function(){var E=this.display.cachedTextHeight;Tl(this),this.curOp.forceUpdate=!0,pc(this),cs(this,this.doc.scrollLeft,this.doc.scrollTop),Ba(this.display),(E==null||Math.abs(E-kl(this.display))>.5||this.options.lineWrapping)&&$A(this),Ot(this,"refresh",this)}),swapDoc:$r(function(E){var K=this.doc;return K.cm=null,this.state.selectingText&&this.state.selectingText(),hr(this,E),pc(this),this.display.input.reset(),cs(this,E.scrollLeft,E.scrollTop),this.curOp.forceScroll=!0,Zs(this,"swapDoc",this,K),K}),phrase:function(E){var K=this.options.phrases;return K&&Object.prototype.hasOwnProperty.call(K,E)?K[E]:E},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Gt(A),A.registerHelper=function(E,K,H){O.hasOwnProperty(E)||(O[E]=A[E]={_global:[]}),O[E][K]=H},A.registerGlobalHelper=function(E,K,H,le){A.registerHelper(E,K,le),O[E]._global.push({pred:H,val:le})}}function di(A,y,O,E,K){var H=y,le=O,ve=Kr(A,y.line),Be=K&&A.direction=="rtl"?-O:O;function Fe(){var yr=y.line+Be;return yr<A.first||yr>=A.first+A.size?!1:(y=new An(yr,y.ch,y.sticky),ve=Kr(A,yr))}function ht(yr){var ar;if(E=="codepoint"){var Lr=ve.text.charCodeAt(y.ch+(O>0?0:-1));if(isNaN(Lr))ar=null;else{var ai=O>0?Lr>=55296&&Lr<56320:Lr>=56320&&Lr<57343;ar=new An(y.line,Math.max(0,Math.min(ve.text.length,y.ch+O*(ai?2:1))),-O)}}else K?ar=Js(A.cm,ve,y,O):ar=IA(ve,y,O);if(ar==null)if(!yr&&Fe())y=Vu(K,A.cm,ve,y.line,Be);else return!1;else y=ar;return!0}if(E=="char"||E=="codepoint")ht();else if(E=="column")ht(!0);else if(E=="word"||E=="group")for(var xt=null,Xt=E=="group",Qt=A.cm&&A.cm.getHelper(y,"wordChars"),xn=!0;!(O<0&&!ht(!xn));xn=!1){var Rn=ve.text.charAt(y.ch)||`
`,$n=Ge(Rn,Qt)?"w":Xt&&Rn==`
`?"n":!Xt||/\s/.test(Rn)?null:"p";if(Xt&&!xn&&!$n&&($n="s"),xt&&xt!=$n){O<0&&(O=1,ht(),y.sticky="after");break}if($n&&(xt=$n),O>0&&!ht(!xn))break}var Jn=Sc(A,y,H,le,!0);return Ti(H,Jn)&&(Jn.hitSide=!0),Jn}function Zc(A,y,O,E){var K=A.doc,H=y.left,le;if(E=="page"){var ve=Math.min(A.display.wrapper.clientHeight,Ut(A).innerHeight||K(A).documentElement.clientHeight),Be=Math.max(ve-.5*kl(A.display),3);le=(O>0?y.bottom:y.top)+O*Be}else E=="line"&&(le=O>0?y.bottom+3:y.top-3);for(var Fe;Fe=Co(A,H,le),!!Fe.outside;){if(O<0?le<=0:le>=K.height){Fe.hitSide=!0;break}le+=O*5}return Fe}var rs=function(A){this.cm=A,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Oe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};rs.prototype.init=function(A){var y=this,O=this,E=O.cm,K=O.div=A.lineDiv;K.contentEditable=!0,ad(K,E.options.spellcheck,E.options.autocorrect,E.options.autocapitalize);function H(ve){for(var Be=ve.target;Be;Be=Be.parentNode){if(Be==K)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Be.className))break}return!1}Ne(K,"paste",function(ve){!H(ve)||_t(E,ve)||Oc(ve,E)||g<=11&&setTimeout(Ri(E,function(){return y.updateFromDOM()}),20)}),Ne(K,"compositionstart",function(ve){y.composing={data:ve.data,done:!1}}),Ne(K,"compositionupdate",function(ve){y.composing||(y.composing={data:ve.data,done:!1})}),Ne(K,"compositionend",function(ve){y.composing&&(ve.data!=y.composing.data&&y.readFromDOMSoon(),y.composing.done=!0)}),Ne(K,"touchstart",function(){return O.forceCompositionEnd()}),Ne(K,"input",function(){y.composing||y.readFromDOMSoon()});function le(ve){if(!(!H(ve)||_t(E,ve))){if(E.somethingSelected())Pd({lineWise:!1,text:E.getSelections()}),ve.type=="cut"&&E.replaceSelection("",null,"cut");else if(E.options.lineWiseCopyCut){var Be=Af(E);Pd({lineWise:!0,text:Be.text}),ve.type=="cut"&&E.operation(function(){E.setSelections(Be.ranges,0,Nt),E.replaceSelection("",null,"cut")})}else return;if(ve.clipboardData){ve.clipboardData.clearData();var Fe=TA.text.join(`
`);if(ve.clipboardData.setData("Text",Fe),ve.clipboardData.getData("Text")==Fe){ve.preventDefault();return}}var ht=kh(),xt=ht.firstChild;ad(xt),E.display.lineSpace.insertBefore(ht,E.display.lineSpace.firstChild),xt.value=TA.text.join(`
`);var Xt=ut(ft(K));st(xt),setTimeout(function(){E.display.lineSpace.removeChild(ht),Xt.focus(),Xt==K&&O.showPrimarySelection()},50)}}Ne(K,"copy",le),Ne(K,"cut",le)},rs.prototype.screenReaderLabelChanged=function(A){A?this.div.setAttribute("aria-label",A):this.div.removeAttribute("aria-label")},rs.prototype.prepareSelection=function(){var A=fh(this.cm,!1);return A.focus=ut(ft(this.div))==this.div,A},rs.prototype.showSelection=function(A,y){!A||!this.cm.display.view.length||((A.focus||y)&&this.showPrimarySelection(),this.showMultipleSelections(A))},rs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},rs.prototype.showPrimarySelection=function(){var A=this.getSelection(),y=this.cm,O=y.doc.sel.primary(),E=O.from(),K=O.to();if(y.display.viewTo==y.display.viewFrom||E.line>=y.display.viewTo||K.line<y.display.viewFrom){A.removeAllRanges();return}var H=gl(y,A.anchorNode,A.anchorOffset),le=gl(y,A.focusNode,A.focusOffset);if(!(H&&!H.bad&&le&&!le.bad&&er(js(H,le),E)==0&&er(vs(H,le),K)==0)){var ve=y.display.view,Be=E.line>=y.display.viewFrom&&Th(y,E)||{node:ve[0].measure.map[2],offset:0},Fe=K.line<y.display.viewTo&&Th(y,K);if(!Fe){var ht=ve[ve.length-1].measure,xt=ht.maps?ht.maps[ht.maps.length-1]:ht.map;Fe={node:xt[xt.length-1],offset:xt[xt.length-2]-xt[xt.length-3]}}if(!Be||!Fe){A.removeAllRanges();return}var Xt=A.rangeCount&&A.getRangeAt(0),Qt;try{Qt=ze(Be.node,Be.offset,Fe.offset,Fe.node)}catch{}Qt&&(!i&&y.state.focused?(A.collapse(Be.node,Be.offset),Qt.collapsed||(A.removeAllRanges(),A.addRange(Qt))):(A.removeAllRanges(),A.addRange(Qt)),Xt&&A.anchorNode==null?A.addRange(Xt):i&&this.startGracePeriod()),this.rememberSelection()}},rs.prototype.startGracePeriod=function(){var A=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){A.gracePeriod=!1,A.selectionChanged()&&A.cm.operation(function(){return A.cm.curOp.selectionChanged=!0})},20)},rs.prototype.showMultipleSelections=function(A){Pe(this.cm.display.cursorDiv,A.cursors),Pe(this.cm.display.selectionDiv,A.selection)},rs.prototype.rememberSelection=function(){var A=this.getSelection();this.lastAnchorNode=A.anchorNode,this.lastAnchorOffset=A.anchorOffset,this.lastFocusNode=A.focusNode,this.lastFocusOffset=A.focusOffset},rs.prototype.selectionInEditor=function(){var A=this.getSelection();if(!A.rangeCount)return!1;var y=A.getRangeAt(0).commonAncestorContainer;return Qe(this.div,y)},rs.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ut(ft(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},rs.prototype.blur=function(){this.div.blur()},rs.prototype.getField=function(){return this.div},rs.prototype.supportsTouch=function(){return!0},rs.prototype.receivedFocus=function(){var A=this,y=this;this.selectionInEditor()?setTimeout(function(){return A.pollSelection()},20):Eo(this.cm,function(){return y.cm.curOp.selectionChanged=!0});function O(){y.cm.state.focused&&(y.pollSelection(),y.polling.set(y.cm.options.pollInterval,O))}this.polling.set(this.cm.options.pollInterval,O)},rs.prototype.selectionChanged=function(){var A=this.getSelection();return A.anchorNode!=this.lastAnchorNode||A.anchorOffset!=this.lastAnchorOffset||A.focusNode!=this.lastFocusNode||A.focusOffset!=this.lastFocusOffset},rs.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var A=this.getSelection(),y=this.cm;if(ne&&S&&this.cm.display.gutterSpecs.length&&Sp(A.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var O=gl(y,A.anchorNode,A.anchorOffset),E=gl(y,A.focusNode,A.focusOffset);O&&E&&Eo(y,function(){_a(y.doc,za(O,E),Nt),(O.bad||E.bad)&&(y.curOp.selectionChanged=!0)})}}},rs.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var A=this.cm,y=A.display,O=A.doc.sel.primary(),E=O.from(),K=O.to();if(E.ch==0&&E.line>A.firstLine()&&(E=An(E.line-1,Kr(A.doc,E.line-1).length)),K.ch==Kr(A.doc,K.line).text.length&&K.line<A.lastLine()&&(K=An(K.line+1,0)),E.line<y.viewFrom||K.line>y.viewTo-1)return!1;var H,le,ve;E.line==y.viewFrom||(H=lA(A,E.line))==0?(le=We(y.view[0].line),ve=y.view[0].node):(le=We(y.view[H].line),ve=y.view[H-1].node.nextSibling);var Be=lA(A,K.line),Fe,ht;if(Be==y.view.length-1?(Fe=y.viewTo-1,ht=y.lineDiv.lastChild):(Fe=We(y.view[Be+1].line)-1,ht=y.view[Be+1].node.previousSibling),!ve)return!1;for(var xt=A.doc.splitLines(Ym(A,ve,ht,le,Fe)),Xt=Va(A.doc,An(le,0),An(Fe,Kr(A.doc,Fe).text.length));xt.length>1&&Xt.length>1;)if(cr(xt)==cr(Xt))xt.pop(),Xt.pop(),Fe--;else if(xt[0]==Xt[0])xt.shift(),Xt.shift(),le++;else break;for(var Qt=0,xn=0,Rn=xt[0],$n=Xt[0],Jn=Math.min(Rn.length,$n.length);Qt<Jn&&Rn.charCodeAt(Qt)==$n.charCodeAt(Qt);)++Qt;for(var yr=cr(xt),ar=cr(Xt),Lr=Math.min(yr.length-(xt.length==1?Qt:0),ar.length-(Xt.length==1?Qt:0));xn<Lr&&yr.charCodeAt(yr.length-xn-1)==ar.charCodeAt(ar.length-xn-1);)++xn;if(xt.length==1&&Xt.length==1&&le==E.line)for(;Qt&&Qt>E.ch&&yr.charCodeAt(yr.length-xn-1)==ar.charCodeAt(ar.length-xn-1);)Qt--,xn++;xt[xt.length-1]=yr.slice(0,yr.length-xn).replace(/^\u200b+/,""),xt[0]=xt[0].slice(Qt).replace(/\u200b+$/,"");var ai=An(le,Qt),Nr=An(Fe,Xt.length?cr(Xt).length-xn:0);if(xt.length>1||xt[0]||er(ai,Nr))return j(A.doc,xt,ai,Nr,"+input"),!0},rs.prototype.ensurePolled=function(){this.forceCompositionEnd()},rs.prototype.reset=function(){this.forceCompositionEnd()},rs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},rs.prototype.readFromDOMSoon=function(){var A=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(A.readDOMTimeout=null,A.composing)if(A.composing.done)A.composing=null;else return;A.updateFromDOM()},80))},rs.prototype.updateFromDOM=function(){var A=this;(this.cm.isReadOnly()||!this.pollContent())&&Eo(this.cm,function(){return Tl(A.cm)})},rs.prototype.setUneditable=function(A){A.contentEditable="false"},rs.prototype.onKeyPress=function(A){A.charCode==0||this.composing||(A.preventDefault(),this.cm.isReadOnly()||Ri(this.cm,Mp)(this.cm,String.fromCharCode(A.charCode==null?A.keyCode:A.charCode),0))},rs.prototype.readOnlyChanged=function(A){this.div.contentEditable=String(A!="nocursor")},rs.prototype.onContextMenu=function(){},rs.prototype.resetPosition=function(){},rs.prototype.needsContentAttribute=!0;function Th(A,y){var O=_A(A,y.line);if(!O||O.hidden)return null;var E=Kr(A.doc,y.line),K=rf(O,E,y.line),H=xe(E,A.doc.direction),le="left";if(H){var ve=Ye(H,y.ch);le=ve%2?"right":"left"}var Be=Ed(K.map,y.ch,le);return Be.offset=Be.collapse=="right"?Be.end:Be.start,Be}function Sp(A){for(var y=A;y;y=y.parentNode)if(/CodeMirror-gutter-wrapper/.test(y.className))return!0;return!1}function Su(A,y){return y&&(A.bad=!0),A}function Ym(A,y,O,E,K){var H="",le=!1,ve=A.doc.lineSeparator(),Be=!1;function Fe(Qt){return function(xn){return xn.id==Qt}}function ht(){le&&(H+=ve,Be&&(H+=ve),le=Be=!1)}function xt(Qt){Qt&&(ht(),H+=Qt)}function Xt(Qt){if(Qt.nodeType==1){var xn=Qt.getAttribute("cm-text");if(xn){xt(xn);return}var Rn=Qt.getAttribute("cm-marker"),$n;if(Rn){var Jn=A.findMarks(An(E,0),An(K+1,0),Fe(+Rn));Jn.length&&($n=Jn[0].find(0))&&xt(Va(A.doc,$n.from,$n.to).join(ve));return}if(Qt.getAttribute("contenteditable")=="false")return;var yr=/^(pre|div|p|li|table|br)$/i.test(Qt.nodeName);if(!/^br$/i.test(Qt.nodeName)&&Qt.textContent.length==0)return;yr&&ht();for(var ar=0;ar<Qt.childNodes.length;ar++)Xt(Qt.childNodes[ar]);/^(pre|p)$/i.test(Qt.nodeName)&&(Be=!0),yr&&(le=!0)}else Qt.nodeType==3&&xt(Qt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Xt(y),y!=O;)y=y.nextSibling,Be=!1;return H}function gl(A,y,O){var E;if(y==A.display.lineDiv){if(E=A.display.lineDiv.childNodes[O],!E)return Su(A.clipPos(An(A.display.viewTo-1)),!0);y=null,O=0}else for(E=y;;E=E.parentNode){if(!E||E==A.display.lineDiv)return null;if(E.parentNode&&E.parentNode==A.display.lineDiv)break}for(var K=0;K<A.display.view.length;K++){var H=A.display.view[K];if(H.node==E)return cm(H,y,O)}}function cm(A,y,O){var E=A.text.firstChild,K=!1;if(!y||!Qe(E,y))return Su(An(We(A.line),0),!0);if(y==E&&(K=!0,y=E.childNodes[O],O=0,!y)){var H=A.rest?cr(A.rest):A.line;return Su(An(We(H),H.text.length),K)}var le=y.nodeType==3?y:null,ve=y;for(!le&&y.childNodes.length==1&&y.firstChild.nodeType==3&&(le=y.firstChild,O&&(O=le.nodeValue.length));ve.parentNode!=E;)ve=ve.parentNode;var Be=A.measure,Fe=Be.maps;function ht($n,Jn,yr){for(var ar=-1;ar<(Fe?Fe.length:0);ar++)for(var Lr=ar<0?Be.map:Fe[ar],ai=0;ai<Lr.length;ai+=3){var Nr=Lr[ai+2];if(Nr==$n||Nr==Jn){var Ji=We(ar<0?A.line:A.rest[ar]),Io=Lr[ai]+yr;return(yr<0||Nr!=$n)&&(Io=Lr[ai+(yr?1:0)]),An(Ji,Io)}}}var xt=ht(le,ve,O);if(xt)return Su(xt,K);for(var Xt=ve.nextSibling,Qt=le?le.nodeValue.length-O:0;Xt;Xt=Xt.nextSibling){if(xt=ht(Xt,Xt.firstChild,0),xt)return Su(An(xt.line,xt.ch-Qt),K);Qt+=Xt.textContent.length}for(var xn=ve.previousSibling,Rn=O;xn;xn=xn.previousSibling){if(xt=ht(xn,xn.firstChild,-1),xt)return Su(An(xt.line,xt.ch+Rn),K);Rn+=xn.textContent.length}}var da=function(A){this.cm=A,this.prevInput="",this.pollingFast=!1,this.polling=new Oe,this.hasSelection=!1,this.composing=null,this.resetting=!1};da.prototype.init=function(A){var y=this,O=this,E=this.cm;this.createField(A);var K=this.textarea;A.wrapper.insertBefore(this.wrapper,A.wrapper.firstChild),Q&&(K.style.width="0px"),Ne(K,"input",function(){h&&g>=9&&y.hasSelection&&(y.hasSelection=null),O.poll()}),Ne(K,"paste",function(le){_t(E,le)||Oc(le,E)||(E.state.pasteIncoming=+new Date,O.fastPoll())});function H(le){if(!_t(E,le)){if(E.somethingSelected())Pd({lineWise:!1,text:E.getSelections()});else if(E.options.lineWiseCopyCut){var ve=Af(E);Pd({lineWise:!0,text:ve.text}),le.type=="cut"?E.setSelections(ve.ranges,null,Nt):(O.prevInput="",K.value=ve.text.join(`
`),st(K))}else return;le.type=="cut"&&(E.state.cutIncoming=+new Date)}}Ne(K,"cut",H),Ne(K,"copy",H),Ne(A.scroller,"paste",function(le){if(!(aA(A,le)||_t(E,le))){if(!K.dispatchEvent){E.state.pasteIncoming=+new Date,O.focus();return}var ve=new Event("paste");ve.clipboardData=le.clipboardData,K.dispatchEvent(ve)}}),Ne(A.lineSpace,"selectstart",function(le){aA(A,le)||bt(le)}),Ne(K,"compositionstart",function(){var le=E.getCursor("from");O.composing&&O.composing.range.clear(),O.composing={start:le,range:E.markText(le,E.getCursor("to"),{className:"CodeMirror-composing"})}}),Ne(K,"compositionend",function(){O.composing&&(O.poll(),O.composing.range.clear(),O.composing=null)})},da.prototype.createField=function(A){this.wrapper=kh(),this.textarea=this.wrapper.firstChild;var y=this.cm.options;ad(this.textarea,y.spellcheck,y.autocorrect,y.autocapitalize)},da.prototype.screenReaderLabelChanged=function(A){A?this.textarea.setAttribute("aria-label",A):this.textarea.removeAttribute("aria-label")},da.prototype.prepareSelection=function(){var A=this.cm,y=A.display,O=A.doc,E=fh(A);if(A.options.moveInputWithCursor){var K=an(A,O.sel.primary().head,"div"),H=y.wrapper.getBoundingClientRect(),le=y.lineDiv.getBoundingClientRect();E.teTop=Math.max(0,Math.min(y.wrapper.clientHeight-10,K.top+le.top-H.top)),E.teLeft=Math.max(0,Math.min(y.wrapper.clientWidth-10,K.left+le.left-H.left))}return E},da.prototype.showSelection=function(A){var y=this.cm,O=y.display;Pe(O.cursorDiv,A.cursors),Pe(O.selectionDiv,A.selection),A.teTop!=null&&(this.wrapper.style.top=A.teTop+"px",this.wrapper.style.left=A.teLeft+"px")},da.prototype.reset=function(A){if(!(this.contextMenuPending||this.composing&&A)){var y=this.cm;if(this.resetting=!0,y.somethingSelected()){this.prevInput="";var O=y.getSelection();this.textarea.value=O,y.state.focused&&st(this.textarea),h&&g>=9&&(this.hasSelection=O)}else A||(this.prevInput=this.textarea.value="",h&&g>=9&&(this.hasSelection=null));this.resetting=!1}},da.prototype.getField=function(){return this.textarea},da.prototype.supportsTouch=function(){return!1},da.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!X||ut(ft(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},da.prototype.blur=function(){this.textarea.blur()},da.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},da.prototype.receivedFocus=function(){this.slowPoll()},da.prototype.slowPoll=function(){var A=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){A.poll(),A.cm.state.focused&&A.slowPoll()})},da.prototype.fastPoll=function(){var A=!1,y=this;y.pollingFast=!0;function O(){var E=y.poll();!E&&!A?(A=!0,y.polling.set(60,O)):(y.pollingFast=!1,y.slowPoll())}y.polling.set(20,O)},da.prototype.poll=function(){var A=this,y=this.cm,O=this.textarea,E=this.prevInput;if(this.contextMenuPending||this.resetting||!y.state.focused||co(O)&&!E&&!this.composing||y.isReadOnly()||y.options.disableInput||y.state.keySeq)return!1;var K=O.value;if(K==E&&!y.somethingSelected())return!1;if(h&&g>=9&&this.hasSelection===K||q&&/[\uf700-\uf7ff]/.test(K))return y.display.input.reset(),!1;if(y.doc.sel==y.display.selForContextMenu){var H=K.charCodeAt(0);if(H==8203&&!E&&(E="​"),H==8666)return this.reset(),this.cm.execCommand("undo")}for(var le=0,ve=Math.min(E.length,K.length);le<ve&&E.charCodeAt(le)==K.charCodeAt(le);)++le;return Eo(y,function(){Mp(y,K.slice(le),E.length-le,null,A.composing?"*compose":null),K.length>1e3||K.indexOf(`
`)>-1?O.value=A.prevInput="":A.prevInput=K,A.composing&&(A.composing.range.clear(),A.composing.range=y.markText(A.composing.start,y.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},da.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},da.prototype.onKeyPress=function(){h&&g>=9&&(this.hasSelection=null),this.fastPoll()},da.prototype.onContextMenu=function(A){var y=this,O=y.cm,E=O.display,K=y.textarea;y.contextMenuPending&&y.contextMenuPending();var H=CA(O,A),le=E.scroller.scrollTop;if(!H||k)return;var ve=O.options.resetSelectionOnContextMenu;ve&&O.doc.sel.contains(H)==-1&&Ri(O,_a)(O.doc,za(H),Nt);var Be=K.style.cssText,Fe=y.wrapper.style.cssText,ht=y.wrapper.offsetParent.getBoundingClientRect();y.wrapper.style.cssText="position: static",K.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(A.clientY-ht.top-5)+"px; left: "+(A.clientX-ht.left-5)+`px;
      z-index: 1000; background: `+(h?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var xt;b&&(xt=K.ownerDocument.defaultView.scrollY),E.input.focus(),b&&K.ownerDocument.defaultView.scrollTo(null,xt),E.input.reset(),O.somethingSelected()||(K.value=y.prevInput=" "),y.contextMenuPending=Qt,E.selForContextMenu=O.doc.sel,clearTimeout(E.detectingSelectAll);function Xt(){if(K.selectionStart!=null){var Rn=O.somethingSelected(),$n="​"+(Rn?K.value:"");K.value="⇚",K.value=$n,y.prevInput=Rn?"":"​",K.selectionStart=1,K.selectionEnd=$n.length,E.selForContextMenu=O.doc.sel}}function Qt(){if(y.contextMenuPending==Qt&&(y.contextMenuPending=!1,y.wrapper.style.cssText=Fe,K.style.cssText=Be,h&&g<9&&E.scrollbars.setScrollTop(E.scroller.scrollTop=le),K.selectionStart!=null)){(!h||h&&g<9)&&Xt();var Rn=0,$n=function(){E.selForContextMenu==O.doc.sel&&K.selectionStart==0&&K.selectionEnd>0&&y.prevInput=="​"?Ri(O,Ql)(O):Rn++<10?E.detectingSelectAll=setTimeout($n,500):(E.selForContextMenu=null,E.input.reset())};E.detectingSelectAll=setTimeout($n,200)}}if(h&&g>=9&&Xt(),ce){lr(A);var xn=function(){pt(window,"mouseup",xn),setTimeout(Qt,20)};Ne(window,"mouseup",xn)}else setTimeout(Qt,50)},da.prototype.readOnlyChanged=function(A){A||this.reset(),this.textarea.disabled=A=="nocursor",this.textarea.readOnly=!!A},da.prototype.setUneditable=function(){},da.prototype.needsContentAttribute=!1;function hm(A,y){if(y=y?De(y):{},y.value=A.value,!y.tabindex&&A.tabIndex&&(y.tabindex=A.tabIndex),!y.placeholder&&A.placeholder&&(y.placeholder=A.placeholder),y.autofocus==null){var O=ut(ft(A));y.autofocus=O==A||A.getAttribute("autofocus")!=null&&O==document.body}function E(){A.value=ve.getValue()}var K;if(A.form&&(Ne(A.form,"submit",E),!y.leaveSubmitMethodAlone)){var H=A.form;K=H.submit;try{var le=H.submit=function(){E(),H.submit=K,H.submit(),H.submit=le}}catch{}}y.finishInit=function(Be){Be.save=E,Be.getTextArea=function(){return A},Be.toTextArea=function(){Be.toTextArea=isNaN,E(),A.parentNode.removeChild(Be.getWrapperElement()),A.style.display="",A.form&&(pt(A.form,"submit",E),!y.leaveSubmitMethodAlone&&typeof A.form.submit=="function"&&(A.form.submit=K))}},A.style.display="none";var ve=Oo(function(Be){return A.parentNode.insertBefore(Be,A.nextSibling)},y);return ve}function cf(A){A.off=pt,A.on=Ne,A.wheelEventPixels=AA,A.Doc=Ht,A.splitLines=rr,A.countColumn=ke,A.findColumn=Sn,A.isWordChar=Sr,A.Pass=gt,A.signal=Ot,A.Line=La,A.changeEnd=Ks,A.scrollbarModel=ju,A.Pos=An,A.cmpPos=er,A.modes=Vi,A.mimeModes=as,A.resolveMode=ul,A.getMode=ts,A.modeExtensions=Aa,A.extendMode=Al,A.copyState=ao,A.startState=tu,A.innerMode=Pu,A.commands=ml,A.keyMap=yo,A.keyName=fl,A.isModifierKey=ja,A.lookupKey=hs,A.normalizeKeyMap=No,A.StringStream=so,A.SharedTextMarker=Et,A.TextMarker=ct,A.LineWidget=qe,A.e_preventDefault=bt,A.e_stopPropagation=Pn,A.e_stop=lr,A.addClass=Te,A.contains=Qe,A.rmClass=pe,A.keyNames=Si}Rl(Oo),Hc(Oo);var nl="iter insert remove copy getEditor constructor".split(" ");for(var Ep in Ht.prototype)Ht.prototype.hasOwnProperty(Ep)&&Je(nl,Ep)<0&&(Oo.prototype[Ep]=function(A){return function(){return A.apply(this.doc,arguments)}}(Ht.prototype[Ep]));return Gt(Ht),Oo.inputStyles={textarea:da,contenteditable:rs},Oo.defineMode=function(A){!Oo.defaults.mode&&A!="null"&&(Oo.defaults.mode=A),Ni.apply(this,arguments)},Oo.defineMIME=ll,Oo.defineMode("null",function(){return{token:function(A){return A.skipToEnd()}}}),Oo.defineMIME("text/plain","null"),Oo.defineExtension=function(A,y){Oo.prototype[A]=y},Oo.defineDocExtension=function(A,y){Ht.prototype[A]=y},Oo.fromTextArea=hm,cf(Oo),Oo.version="5.65.16",Oo})}(Ob)),Ob.exports}var Eae=Hx();const Wd=Ka(Eae);var YT={exports:{}},$T;function Bae(){return $T||($T=1,function(n,e){(function(t){t(Hx())})(function(t){t.defineMode("javascript",function(r,i){var o=r.indentUnit,a=i.statementIndent,s=i.jsonld,h=i.json||s,g=i.trackScope!==!1,b=i.typescript,B=i.wordCharacters||/[\w$\xa1-\uffff]/,S=function(){function We(ho){return{type:ho,style:"keyword"}}var Ct=We("keyword a"),pn=We("keyword b"),Nn=We("keyword c"),An=We("keyword d"),er=We("operator"),Ti={type:"atom",style:"atom"};return{if:We("if"),while:Ct,with:Ct,else:pn,do:pn,try:pn,finally:pn,return:An,break:An,continue:An,new:We("new"),delete:Nn,void:Nn,throw:Nn,debugger:We("debugger"),var:We("var"),const:We("var"),let:We("var"),function:We("function"),catch:We("catch"),for:We("for"),switch:We("switch"),case:We("case"),default:We("default"),in:er,typeof:er,instanceof:er,true:Ti,false:Ti,null:Ti,undefined:Ti,NaN:Ti,Infinity:Ti,this:We("this"),class:We("class"),super:We("atom"),yield:Nn,export:We("export"),import:We("import"),extends:Nn,await:Nn}}(),I=/[+\-*&%=<>!?|~^@]/,k=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function U(We){for(var Ct=!1,pn,Nn=!1;(pn=We.next())!=null;){if(!Ct){if(pn=="/"&&!Nn)return;pn=="["?Nn=!0:Nn&&pn=="]"&&(Nn=!1)}Ct=!Ct&&pn=="\\"}}var z,Y;function Q(We,Ct,pn){return z=We,Y=pn,Ct}function ne(We,Ct){var pn=We.next();if(pn=='"'||pn=="'")return Ct.tokenize=X(pn),Ct.tokenize(We,Ct);if(pn=="."&&We.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return Q("number","number");if(pn=="."&&We.match(".."))return Q("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(pn))return Q(pn);if(pn=="="&&We.eat(">"))return Q("=>","operator");if(pn=="0"&&We.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return Q("number","number");if(/\d/.test(pn))return We.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),Q("number","number");if(pn=="/")return We.eat("*")?(Ct.tokenize=q,q(We,Ct)):We.eat("/")?(We.skipToEnd(),Q("comment","comment")):ia(We,Ct,1)?(U(We),We.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),Q("regexp","string-2")):(We.eat("="),Q("operator","operator",We.current()));if(pn=="`")return Ct.tokenize=J,J(We,Ct);if(pn=="#"&&We.peek()=="!")return We.skipToEnd(),Q("meta","meta");if(pn=="#"&&We.eatWhile(B))return Q("variable","property");if(pn=="<"&&We.match("!--")||pn=="-"&&We.match("->")&&!/\S/.test(We.string.slice(0,We.start)))return We.skipToEnd(),Q("comment","comment");if(I.test(pn))return(pn!=">"||!Ct.lexical||Ct.lexical.type!=">")&&(We.eat("=")?(pn=="!"||pn=="=")&&We.eat("="):/[<>*+\-|&?]/.test(pn)&&(We.eat(pn),pn==">"&&We.eat(pn))),pn=="?"&&We.eat(".")?Q("."):Q("operator","operator",We.current());if(B.test(pn)){We.eatWhile(B);var Nn=We.current();if(Ct.lastType!="."){if(S.propertyIsEnumerable(Nn)){var An=S[Nn];return Q(An.type,An.style,Nn)}if(Nn=="async"&&We.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return Q("async","keyword",Nn)}return Q("variable","variable",Nn)}}function X(We){return function(Ct,pn){var Nn=!1,An;if(s&&Ct.peek()=="@"&&Ct.match(k))return pn.tokenize=ne,Q("jsonld-keyword","meta");for(;(An=Ct.next())!=null&&!(An==We&&!Nn);)Nn=!Nn&&An=="\\";return Nn||(pn.tokenize=ne),Q("string","string")}}function q(We,Ct){for(var pn=!1,Nn;Nn=We.next();){if(Nn=="/"&&pn){Ct.tokenize=ne;break}pn=Nn=="*"}return Q("comment","comment")}function J(We,Ct){for(var pn=!1,Nn;(Nn=We.next())!=null;){if(!pn&&(Nn=="`"||Nn=="$"&&We.eat("{"))){Ct.tokenize=ne;break}pn=!pn&&Nn=="\\"}return Q("quasi","string-2",We.current())}var N="([{}])";function ie(We,Ct){Ct.fatArrowAt&&(Ct.fatArrowAt=null);var pn=We.string.indexOf("=>",We.start);if(!(pn<0)){if(b){var Nn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(We.string.slice(We.start,pn));Nn&&(pn=Nn.index)}for(var An=0,er=!1,Ti=pn-1;Ti>=0;--Ti){var ho=We.string.charAt(Ti),vs=N.indexOf(ho);if(vs>=0&&vs<3){if(!An){++Ti;break}if(--An==0){ho=="("&&(er=!0);break}}else if(vs>=3&&vs<6)++An;else if(B.test(ho))er=!0;else if(/["'\/`]/.test(ho))for(;;--Ti){if(Ti==0)return;var js=We.string.charAt(Ti-1);if(js==ho&&We.string.charAt(Ti-2)!="\\"){Ti--;break}}else if(er&&!An){++Ti;break}}er&&!An&&(Ct.fatArrowAt=Ti)}}var he={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ce(We,Ct,pn,Nn,An,er){this.indented=We,this.column=Ct,this.type=pn,this.prev=An,this.info=er,Nn!=null&&(this.align=Nn)}function we(We,Ct){if(!g)return!1;for(var pn=We.localVars;pn;pn=pn.next)if(pn.name==Ct)return!0;for(var Nn=We.context;Nn;Nn=Nn.prev)for(var pn=Nn.vars;pn;pn=pn.next)if(pn.name==Ct)return!0}function pe(We,Ct,pn,Nn,An){var er=We.cc;for(Ce.state=We,Ce.stream=An,Ce.marked=null,Ce.cc=er,Ce.style=Ct,We.lexical.hasOwnProperty("align")||(We.lexical.align=!0);;){var Ti=er.length?er.pop():h?Je:ke;if(Ti(pn,Nn)){for(;er.length&&er[er.length-1].lex;)er.pop()();return Ce.marked?Ce.marked:pn=="variable"&&we(We,Nn)?"variable-2":Ct}}}var Ce={state:null,column:null,marked:null,cc:null};function Pe(){for(var We=arguments.length-1;We>=0;We--)Ce.cc.push(arguments[We])}function de(){return Pe.apply(null,arguments),!0}function rt(We,Ct){for(var pn=Ct;pn;pn=pn.next)if(pn.name==We)return!0;return!1}function ze(We){var Ct=Ce.state;if(Ce.marked="def",!!g){if(Ct.context){if(Ct.lexical.info=="var"&&Ct.context&&Ct.context.block){var pn=Qe(We,Ct.context);if(pn!=null){Ct.context=pn;return}}else if(!rt(We,Ct.localVars)){Ct.localVars=new Ue(We,Ct.localVars);return}}i.globalVars&&!rt(We,Ct.globalVars)&&(Ct.globalVars=new Ue(We,Ct.globalVars))}}function Qe(We,Ct){if(Ct)if(Ct.block){var pn=Qe(We,Ct.prev);return pn?pn==Ct.prev?Ct:new Te(pn,Ct.vars,!0):null}else return rt(We,Ct.vars)?Ct:new Te(Ct.prev,new Ue(We,Ct.vars),!1);else return null}function ut(We){return We=="public"||We=="private"||We=="protected"||We=="abstract"||We=="readonly"}function Te(We,Ct,pn){this.prev=We,this.vars=Ct,this.block=pn}function Ue(We,Ct){this.name=We,this.next=Ct}var st=new Ue("this",new Ue("arguments",null));function wt(){Ce.state.context=new Te(Ce.state.context,Ce.state.localVars,!1),Ce.state.localVars=st}function mt(){Ce.state.context=new Te(Ce.state.context,Ce.state.localVars,!0),Ce.state.localVars=null}wt.lex=mt.lex=!0;function ft(){Ce.state.localVars=Ce.state.context.vars,Ce.state.context=Ce.state.context.prev}ft.lex=!0;function Ut(We,Ct){var pn=function(){var Nn=Ce.state,An=Nn.indented;if(Nn.lexical.type=="stat")An=Nn.lexical.indented;else for(var er=Nn.lexical;er&&er.type==")"&&er.align;er=er.prev)An=er.indented;Nn.lexical=new ce(An,Ce.stream.column(),We,null,Nn.lexical,Ct)};return pn.lex=!0,pn}function Lt(){var We=Ce.state;We.lexical.prev&&(We.lexical.type==")"&&(We.indented=We.lexical.indented),We.lexical=We.lexical.prev)}Lt.lex=!0;function De(We){function Ct(pn){return pn==We?de():We==";"||pn=="}"||pn==")"||pn=="]"?Pe():de(Ct)}return Ct}function ke(We,Ct){return We=="var"?de(Ut("vardef",Ct),Pn,De(";"),Lt):We=="keyword a"?de(Ut("form"),gt,ke,Lt):We=="keyword b"?de(Ut("form"),ke,Lt):We=="keyword d"?Ce.stream.match(/^\s*$/,!1)?de():de(Ut("stat"),nn,De(";"),Lt):We=="debugger"?de(De(";")):We=="{"?de(Ut("}"),mt,Yt,Lt,ft):We==";"?de():We=="if"?(Ce.state.lexical.info=="else"&&Ce.state.cc[Ce.state.cc.length-1]==Lt&&Ce.state.cc.pop()(),de(Ut("form"),gt,ke,Lt,Dn)):We=="function"?de(rr):We=="for"?de(Ut("form"),mt,Br,ke,ft,Lt):We=="class"||b&&Ct=="interface"?(Ce.marked="keyword",de(Ut("form",We=="class"?We:Ct),Vi,Lt)):We=="variable"?b&&Ct=="declare"?(Ce.marked="keyword",de(ke)):b&&(Ct=="module"||Ct=="enum"||Ct=="type")&&Ce.stream.match(/^\s*\w/,!1)?(Ce.marked="keyword",Ct=="enum"?de(Kr):Ct=="type"?de($a,De("operator"),xe,De(";")):de(Ut("form"),En,De("{"),Ut("}"),Yt,Lt,Lt)):b&&Ct=="namespace"?(Ce.marked="keyword",de(Ut("form"),Je,ke,Lt)):b&&Ct=="abstract"?(Ce.marked="keyword",de(ke)):de(Ut("stat"),Qn):We=="switch"?de(Ut("form"),gt,De("{"),Ut("}","switch"),mt,Yt,Lt,Lt,ft):We=="case"?de(Je,De(":")):We=="default"?de(De(":")):We=="catch"?de(Ut("form"),wt,Oe,ke,Lt,ft):We=="export"?de(Ut("stat"),ul,Lt):We=="import"?de(Ut("stat"),Aa,Lt):We=="async"?de(ke):Ct=="@"?de(Je,ke):Pe(Ut("stat"),Je,De(";"),Lt)}function Oe(We){if(We=="(")return de(ji,De(")"))}function Je(We,Ct){return Nt(We,Ct,!1)}function Mt(We,Ct){return Nt(We,Ct,!0)}function gt(We){return We!="("?Pe():de(Ut(")"),nn,De(")"),Lt)}function Nt(We,Ct,pn){if(Ce.state.fatArrowAt==Ce.stream.start){var Nn=pn?fr:cr;if(We=="(")return de(wt,Ut(")"),Xe(ji,")"),Lt,De("=>"),Nn,ft);if(We=="variable")return Pe(wt,En,De("=>"),Nn,ft)}var An=pn?Sn:en;return he.hasOwnProperty(We)?de(An):We=="function"?de(rr,An):We=="class"||b&&Ct=="interface"?(Ce.marked="keyword",de(Ut("form"),ui,Lt)):We=="keyword c"||We=="async"?de(pn?Mt:Je):We=="("?de(Ut(")"),nn,De(")"),Lt,An):We=="operator"||We=="spread"?de(pn?Mt:Je):We=="["?de(Ut("]"),so,Lt,An):We=="{"?Bt(Ge,"}",null,An):We=="quasi"?Pe(Yn,An):We=="new"?de(br(pn)):de()}function nn(We){return We.match(/[;\}\)\],]/)?Pe():Pe(Je)}function en(We,Ct){return We==","?de(nn):Sn(We,Ct,!1)}function Sn(We,Ct,pn){var Nn=pn==!1?en:Sn,An=pn==!1?Je:Mt;if(We=="=>")return de(wt,pn?fr:cr,ft);if(We=="operator")return/\+\+|--/.test(Ct)||b&&Ct=="!"?de(Nn):b&&Ct=="<"&&Ce.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?de(Ut(">"),Xe(xe,">"),Lt,Nn):Ct=="?"?de(Je,De(":"),An):de(An);if(We=="quasi")return Pe(Yn,Nn);if(We!=";"){if(We=="(")return Bt(Mt,")","call",Nn);if(We==".")return de(Sr,Nn);if(We=="[")return de(Ut("]"),nn,De("]"),Lt,Nn);if(b&&Ct=="as")return Ce.marked="keyword",de(xe,Nn);if(We=="regexp")return Ce.state.lastType=Ce.marked="operator",Ce.stream.backUp(Ce.stream.pos-Ce.stream.start-1),de(An)}}function Yn(We,Ct){return We!="quasi"?Pe():Ct.slice(Ct.length-2)!="${"?de(Yn):de(nn,Qr)}function Qr(We){if(We=="}")return Ce.marked="string-2",Ce.state.tokenize=J,de(Yn)}function cr(We){return ie(Ce.stream,Ce.state),Pe(We=="{"?ke:Je)}function fr(We){return ie(Ce.stream,Ce.state),Pe(We=="{"?ke:Mt)}function br(We){return function(Ct){return Ct=="."?de(We?Mr:Cr):Ct=="variable"&&b?de(Zt,We?Sn:en):Pe(We?Mt:Je)}}function Cr(We,Ct){if(Ct=="target")return Ce.marked="keyword",de(en)}function Mr(We,Ct){if(Ct=="target")return Ce.marked="keyword",de(Sn)}function Qn(We){return We==":"?de(Lt,ke):Pe(en,De(";"),Lt)}function Sr(We){if(We=="variable")return Ce.marked="property",de()}function Ge(We,Ct){if(We=="async")return Ce.marked="property",de(Ge);if(We=="variable"||Ce.style=="keyword"){if(Ce.marked="property",Ct=="get"||Ct=="set")return de(ue);var pn;return b&&Ce.state.fatArrowAt==Ce.stream.start&&(pn=Ce.stream.match(/^\s*:\s*/,!1))&&(Ce.state.fatArrowAt=Ce.stream.pos+pn[0].length),de(me)}else{if(We=="number"||We=="string")return Ce.marked=s?"property":Ce.style+" property",de(me);if(We=="jsonld-keyword")return de(me);if(b&&ut(Ct))return Ce.marked="keyword",de(Ge);if(We=="[")return de(Je,it,De("]"),me);if(We=="spread")return de(Mt,me);if(Ct=="*")return Ce.marked="keyword",de(Ge);if(We==":")return Pe(me)}}function ue(We){return We!="variable"?Pe(me):(Ce.marked="property",de(rr))}function me(We){if(We==":")return de(Mt);if(We=="(")return Pe(rr)}function Xe(We,Ct,pn){function Nn(An,er){if(pn?pn.indexOf(An)>-1:An==","){var Ti=Ce.state.lexical;return Ti.info=="call"&&(Ti.pos=(Ti.pos||0)+1),de(function(ho,vs){return ho==Ct||vs==Ct?Pe():Pe(We)},Nn)}return An==Ct||er==Ct?de():pn&&pn.indexOf(";")>-1?Pe(We):de(De(Ct))}return function(An,er){return An==Ct||er==Ct?de():Pe(We,Nn)}}function Bt(We,Ct,pn){for(var Nn=3;Nn<arguments.length;Nn++)Ce.cc.push(arguments[Nn]);return de(Ut(Ct,pn),Xe(We,Ct),Lt)}function Yt(We){return We=="}"?de():Pe(ke,Yt)}function it(We,Ct){if(b){if(We==":")return de(xe);if(Ct=="?")return de(it)}}function Kt(We,Ct){if(b&&(We==":"||Ct=="in"))return de(xe)}function Ye(We){if(b&&We==":")return Ce.stream.match(/^\s*\w+\s+is\b/,!1)?de(Je,fe,xe):de(xe)}function fe(We,Ct){if(Ct=="is")return Ce.marked="keyword",de()}function xe(We,Ct){if(Ct=="keyof"||Ct=="typeof"||Ct=="infer"||Ct=="readonly")return Ce.marked="keyword",de(Ct=="typeof"?Mt:xe);if(We=="variable"||Ct=="void")return Ce.marked="type",de(rn);if(Ct=="|"||Ct=="&")return de(xe);if(We=="string"||We=="number"||We=="atom")return de(rn);if(We=="[")return de(Ut("]"),Xe(xe,"]",","),Lt,rn);if(We=="{")return de(Ut("}"),Ne,Lt,rn);if(We=="(")return de(Xe(_t,")"),p,rn);if(We=="<")return de(Xe(xe,">"),xe);if(We=="quasi")return Pe(pt,rn)}function p(We){if(We=="=>")return de(xe)}function Ne(We){return We.match(/[\}\)\]]/)?de():We==","||We==";"?de(Ne):Pe(dt,Ne)}function dt(We,Ct){if(We=="variable"||Ce.style=="keyword")return Ce.marked="property",de(dt);if(Ct=="?"||We=="number"||We=="string")return de(dt);if(We==":")return de(xe);if(We=="[")return de(De("variable"),Kt,De("]"),dt);if(We=="(")return Pe(co,dt);if(!We.match(/[;\}\)\],]/))return de()}function pt(We,Ct){return We!="quasi"?Pe():Ct.slice(Ct.length-2)!="${"?de(pt):de(xe,Ot)}function Ot(We){if(We=="}")return Ce.marked="string-2",Ce.state.tokenize=J,de(pt)}function _t(We,Ct){return We=="variable"&&Ce.stream.match(/^\s*[?:]/,!1)||Ct=="?"?de(_t):We==":"?de(xe):We=="spread"?de(_t):Pe(xe)}function rn(We,Ct){if(Ct=="<")return de(Ut(">"),Xe(xe,">"),Lt,rn);if(Ct=="|"||We=="."||Ct=="&")return de(xe);if(We=="[")return de(xe,De("]"),rn);if(Ct=="extends"||Ct=="implements")return Ce.marked="keyword",de(xe);if(Ct=="?")return de(xe,De(":"),xe)}function Zt(We,Ct){if(Ct=="<")return de(Ut(">"),Xe(xe,">"),Lt,rn)}function Gt(){return Pe(xe,bt)}function bt(We,Ct){if(Ct=="=")return de(xe)}function Pn(We,Ct){return Ct=="enum"?(Ce.marked="keyword",de(Kr)):Pe(En,it,on,zn)}function En(We,Ct){if(b&&ut(Ct))return Ce.marked="keyword",de(En);if(We=="variable")return ze(Ct),de();if(We=="spread")return de(En);if(We=="[")return Bt(wr,"]");if(We=="{")return Bt(lr,"}")}function lr(We,Ct){return We=="variable"&&!Ce.stream.match(/^\s*:/,!1)?(ze(Ct),de(on)):(We=="variable"&&(Ce.marked="property"),We=="spread"?de(En):We=="}"?Pe():We=="["?de(Je,De("]"),De(":"),lr):de(De(":"),En,on))}function wr(){return Pe(En,on)}function on(We,Ct){if(Ct=="=")return de(Mt)}function zn(We){if(We==",")return de(Pn)}function Dn(We,Ct){if(We=="keyword b"&&Ct=="else")return de(Ut("form","else"),ke,Lt)}function Br(We,Ct){if(Ct=="await")return de(Br);if(We=="(")return de(Ut(")"),xr,Lt)}function xr(We){return We=="var"?de(Pn,Rr):We=="variable"?de(Rr):Pe(Rr)}function Rr(We,Ct){return We==")"?de():We==";"?de(Rr):Ct=="in"||Ct=="of"?(Ce.marked="keyword",de(Je,Rr)):Pe(Je,Rr)}function rr(We,Ct){if(Ct=="*")return Ce.marked="keyword",de(rr);if(We=="variable")return ze(Ct),de(rr);if(We=="(")return de(wt,Ut(")"),Xe(ji,")"),Lt,Ye,ke,ft);if(b&&Ct=="<")return de(Ut(">"),Xe(Gt,">"),Lt,rr)}function co(We,Ct){if(Ct=="*")return Ce.marked="keyword",de(co);if(We=="variable")return ze(Ct),de(co);if(We=="(")return de(wt,Ut(")"),Xe(ji,")"),Lt,Ye,ft);if(b&&Ct=="<")return de(Ut(">"),Xe(Gt,">"),Lt,co)}function $a(We,Ct){if(We=="keyword"||We=="variable")return Ce.marked="type",de($a);if(Ct=="<")return de(Ut(">"),Xe(Gt,">"),Lt)}function ji(We,Ct){return Ct=="@"&&de(Je,ji),We=="spread"?de(ji):b&&ut(Ct)?(Ce.marked="keyword",de(ji)):b&&We=="this"?de(it,on):Pe(En,it,on)}function ui(We,Ct){return We=="variable"?Vi(We,Ct):as(We,Ct)}function Vi(We,Ct){if(We=="variable")return ze(Ct),de(as)}function as(We,Ct){if(Ct=="<")return de(Ut(">"),Xe(Gt,">"),Lt,as);if(Ct=="extends"||Ct=="implements"||b&&We==",")return Ct=="implements"&&(Ce.marked="keyword"),de(b?xe:Je,as);if(We=="{")return de(Ut("}"),Ni,Lt)}function Ni(We,Ct){if(We=="async"||We=="variable"&&(Ct=="static"||Ct=="get"||Ct=="set"||b&&ut(Ct))&&Ce.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return Ce.marked="keyword",de(Ni);if(We=="variable"||Ce.style=="keyword")return Ce.marked="property",de(ll,Ni);if(We=="number"||We=="string")return de(ll,Ni);if(We=="[")return de(Je,it,De("]"),ll,Ni);if(Ct=="*")return Ce.marked="keyword",de(Ni);if(b&&We=="(")return Pe(co,Ni);if(We==";"||We==",")return de(Ni);if(We=="}")return de();if(Ct=="@")return de(Je,Ni)}function ll(We,Ct){if(Ct=="!"||Ct=="?")return de(ll);if(We==":")return de(xe,on);if(Ct=="=")return de(Mt);var pn=Ce.state.lexical.prev,Nn=pn&&pn.info=="interface";return Pe(Nn?co:rr)}function ul(We,Ct){return Ct=="*"?(Ce.marked="keyword",de(tu,De(";"))):Ct=="default"?(Ce.marked="keyword",de(Je,De(";"))):We=="{"?de(Xe(ts,"}"),tu,De(";")):Pe(ke)}function ts(We,Ct){if(Ct=="as")return Ce.marked="keyword",de(De("variable"));if(We=="variable")return Pe(Mt,ts)}function Aa(We){return We=="string"?de():We=="("?Pe(Je):We=="."?Pe(en):Pe(Al,ao,tu)}function Al(We,Ct){return We=="{"?Bt(Al,"}"):(We=="variable"&&ze(Ct),Ct=="*"&&(Ce.marked="keyword"),de(Pu))}function ao(We){if(We==",")return de(Al,ao)}function Pu(We,Ct){if(Ct=="as")return Ce.marked="keyword",de(Al)}function tu(We,Ct){if(Ct=="from")return Ce.marked="keyword",de(Je)}function so(We){return We=="]"?de():Pe(Xe(Mt,"]"))}function Kr(){return Pe(Ut("form"),En,De("{"),Ut("}"),Xe(Va,"}"),Lt,Lt)}function Va(){return Pe(En,on)}function Ts(We,Ct){return We.lastType=="operator"||We.lastType==","||I.test(Ct.charAt(0))||/[,.]/.test(Ct.charAt(0))}function ia(We,Ct,pn){return Ct.tokenize==ne&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Ct.lastType)||Ct.lastType=="quasi"&&/\{\s*$/.test(We.string.slice(0,We.pos-(pn||0)))}return{startState:function(We){var Ct={tokenize:ne,lastType:"sof",cc:[],lexical:new ce((We||0)-o,0,"block",!1),localVars:i.localVars,context:i.localVars&&new Te(null,null,!1),indented:We||0};return i.globalVars&&typeof i.globalVars=="object"&&(Ct.globalVars=i.globalVars),Ct},token:function(We,Ct){if(We.sol()&&(Ct.lexical.hasOwnProperty("align")||(Ct.lexical.align=!1),Ct.indented=We.indentation(),ie(We,Ct)),Ct.tokenize!=q&&We.eatSpace())return null;var pn=Ct.tokenize(We,Ct);return z=="comment"?pn:(Ct.lastType=z=="operator"&&(Y=="++"||Y=="--")?"incdec":z,pe(Ct,pn,z,Y,We))},indent:function(We,Ct){if(We.tokenize==q||We.tokenize==J)return t.Pass;if(We.tokenize!=ne)return 0;var pn=Ct&&Ct.charAt(0),Nn=We.lexical,An;if(!/^\s*else\b/.test(Ct))for(var er=We.cc.length-1;er>=0;--er){var Ti=We.cc[er];if(Ti==Lt)Nn=Nn.prev;else if(Ti!=Dn&&Ti!=ft)break}for(;(Nn.type=="stat"||Nn.type=="form")&&(pn=="}"||(An=We.cc[We.cc.length-1])&&(An==en||An==Sn)&&!/^[,\.=+\-*:?[\(]/.test(Ct));)Nn=Nn.prev;a&&Nn.type==")"&&Nn.prev.type=="stat"&&(Nn=Nn.prev);var ho=Nn.type,vs=pn==ho;return ho=="vardef"?Nn.indented+(We.lastType=="operator"||We.lastType==","?Nn.info.length+1:0):ho=="form"&&pn=="{"?Nn.indented:ho=="form"?Nn.indented+o:ho=="stat"?Nn.indented+(Ts(We,Ct)?a||o:0):Nn.info=="switch"&&!vs&&i.doubleIndentSwitch!=!1?Nn.indented+(/^(?:case|default)\b/.test(Ct)?o:2*o):Nn.align?Nn.column+(vs?0:1):Nn.indented+(vs?0:o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:h?null:"/*",blockCommentEnd:h?null:"*/",blockCommentContinue:h?null:" * ",lineComment:h?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:h?"json":"javascript",jsonldMode:s,jsonMode:h,expressionAllowed:ia,skipExpression:function(We){pe(We,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),YT.exports}Bae();var VT={exports:{}},HT;function Oae(){return HT||(HT=1,function(n,e){(function(t){t(Hx())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function o(N,ie,he){var ce=document.createElement("div");ce.className="CodeMirror-lint-tooltip cm-s-"+N.options.theme,ce.appendChild(he.cloneNode(!0)),N.state.lint.options.selfContain?N.getWrapperElement().appendChild(ce):document.body.appendChild(ce);function we(pe){if(!ce.parentNode)return t.off(document,"mousemove",we);var Ce=Math.max(0,pe.clientY-ce.offsetHeight-5),Pe=Math.max(0,Math.min(pe.clientX+5,ce.ownerDocument.defaultView.innerWidth-ce.offsetWidth));ce.style.top=Ce+"px",ce.style.left=Pe+"px"}return t.on(document,"mousemove",we),we(ie),ce.style.opacity!=null&&(ce.style.opacity=1),ce}function a(N){N.parentNode&&N.parentNode.removeChild(N)}function s(N){N.parentNode&&(N.style.opacity==null&&a(N),N.style.opacity=0,setTimeout(function(){a(N)},600))}function h(N,ie,he,ce){var we=o(N,ie,he);function pe(){t.off(ce,"mouseout",pe),we&&(s(we),we=null)}var Ce=setInterval(function(){if(we)for(var Pe=ce;;Pe=Pe.parentNode){if(Pe&&Pe.nodeType==11&&(Pe=Pe.host),Pe==document.body)return;if(!Pe){pe();break}}if(!we)return clearInterval(Ce)},400);t.on(ce,"mouseout",pe)}function g(N,ie,he){this.marked=[],ie instanceof Function&&(ie={getAnnotations:ie}),(!ie||ie===!0)&&(ie={}),this.options={},this.linterOptions=ie.options||{};for(var ce in b)this.options[ce]=b[ce];for(var ce in ie)b.hasOwnProperty(ce)?ie[ce]!=null&&(this.options[ce]=ie[ce]):ie.options||(this.linterOptions[ce]=ie[ce]);this.timeout=null,this.hasGutter=he,this.onMouseOver=function(we){J(N,we)},this.waitingFor=0}var b={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function B(N){var ie=N.state.lint;ie.hasGutter&&N.clearGutter(r),ie.options.highlightLines&&S(N);for(var he=0;he<ie.marked.length;++he)ie.marked[he].clear();ie.marked.length=0}function S(N){N.eachLine(function(ie){var he=ie.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(ie.wrapClass);he&&N.removeLineClass(ie,"wrap",he[0])})}function I(N,ie,he,ce,we){var pe=document.createElement("div"),Ce=pe;return pe.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+he,ce&&(Ce=pe.appendChild(document.createElement("div")),Ce.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),we!=!1&&t.on(Ce,"mouseover",function(Pe){h(N,Pe,ie,Ce)}),pe}function k(N,ie){return N=="error"?N:ie}function U(N){for(var ie=[],he=0;he<N.length;++he){var ce=N[he],we=ce.from.line;(ie[we]||(ie[we]=[])).push(ce)}return ie}function z(N){var ie=N.severity;ie||(ie="error");var he=document.createElement("div");return he.className="CodeMirror-lint-message CodeMirror-lint-message-"+ie,typeof N.messageHTML<"u"?he.innerHTML=N.messageHTML:he.appendChild(document.createTextNode(N.message)),he}function Y(N,ie){var he=N.state.lint,ce=++he.waitingFor;function we(){ce=-1,N.off("change",we)}N.on("change",we),ie(N.getValue(),function(pe,Ce){N.off("change",we),he.waitingFor==ce&&(Ce&&pe instanceof t&&(pe=Ce),N.operation(function(){ne(N,pe)}))},he.linterOptions,N)}function Q(N){var ie=N.state.lint;if(ie){var he=ie.options,ce=he.getAnnotations||N.getHelper(t.Pos(0,0),"lint");if(ce)if(he.async||ce.async)Y(N,ce);else{var we=ce(N.getValue(),ie.linterOptions,N);if(!we)return;we.then?we.then(function(pe){N.operation(function(){ne(N,pe)})}):N.operation(function(){ne(N,we)})}}}function ne(N,ie){var he=N.state.lint;if(he){var ce=he.options;B(N);for(var we=U(ie),pe=0;pe<we.length;++pe){var Ce=we[pe];if(Ce){for(var Pe=null,de=he.hasGutter&&document.createDocumentFragment(),rt=0;rt<Ce.length;++rt){var ze=Ce[rt],Qe=ze.severity;Qe||(Qe="error"),Pe=k(Pe,Qe),ce.formatAnnotation&&(ze=ce.formatAnnotation(ze)),he.hasGutter&&de.appendChild(z(ze)),ze.to&&he.marked.push(N.markText(ze.from,ze.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+Qe,__annotation:ze}))}he.hasGutter&&N.setGutterMarker(pe,r,I(N,de,Pe,Ce.length>1,ce.tooltips)),ce.highlightLines&&N.addLineClass(pe,"wrap",i+Pe)}}ce.onUpdateLinting&&ce.onUpdateLinting(ie,we,N)}}function X(N){var ie=N.state.lint;ie&&(clearTimeout(ie.timeout),ie.timeout=setTimeout(function(){Q(N)},ie.options.delay))}function q(N,ie,he){for(var ce=he.target||he.srcElement,we=document.createDocumentFragment(),pe=0;pe<ie.length;pe++){var Ce=ie[pe];we.appendChild(z(Ce))}h(N,he,we,ce)}function J(N,ie){var he=ie.target||ie.srcElement;if(/\bCodeMirror-lint-mark-/.test(he.className)){for(var ce=he.getBoundingClientRect(),we=(ce.left+ce.right)/2,pe=(ce.top+ce.bottom)/2,Ce=N.findMarksAt(N.coordsChar({left:we,top:pe},"client")),Pe=[],de=0;de<Ce.length;++de){var rt=Ce[de].__annotation;rt&&Pe.push(rt)}Pe.length&&q(N,Pe,ie)}}t.defineOption("lint",!1,function(N,ie,he){if(he&&he!=t.Init&&(B(N),N.state.lint.options.lintOnChange!==!1&&N.off("change",X),t.off(N.getWrapperElement(),"mouseover",N.state.lint.onMouseOver),clearTimeout(N.state.lint.timeout),delete N.state.lint),ie){for(var ce=N.getOption("gutters"),we=!1,pe=0;pe<ce.length;++pe)ce[pe]==r&&(we=!0);var Ce=N.state.lint=new g(N,ie,we);Ce.options.lintOnChange&&N.on("change",X),Ce.options.tooltips!=!1&&Ce.options.tooltips!="gutter"&&t.on(N.getWrapperElement(),"mouseover",Ce.onMouseOver),Q(N)}}),t.defineExtension("performLint",function(){Q(this)})})}()),VT.exports}Oae();var ZT={exports:{}},XT;function Iae(){return XT||(XT=1,function(n,e){(function(t){t(Hx())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,o={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function a(S){return S&&S.bracketRegex||/[(){}[\]]/}function s(S,I,k){var U=S.getLineHandle(I.line),z=I.ch-1,Y=k&&k.afterCursor;Y==null&&(Y=/(^| )cm-fat-cursor($| )/.test(S.getWrapperElement().className));var Q=a(k),ne=!Y&&z>=0&&Q.test(U.text.charAt(z))&&o[U.text.charAt(z)]||Q.test(U.text.charAt(z+1))&&o[U.text.charAt(++z)];if(!ne)return null;var X=ne.charAt(1)==">"?1:-1;if(k&&k.strict&&X>0!=(z==I.ch))return null;var q=S.getTokenTypeAt(i(I.line,z+1)),J=h(S,i(I.line,z+(X>0?1:0)),X,q,k);return J==null?null:{from:i(I.line,z),to:J&&J.pos,match:J&&J.ch==ne.charAt(0),forward:X>0}}function h(S,I,k,U,z){for(var Y=z&&z.maxScanLineLength||1e4,Q=z&&z.maxScanLines||1e3,ne=[],X=a(z),q=k>0?Math.min(I.line+Q,S.lastLine()+1):Math.max(S.firstLine()-1,I.line-Q),J=I.line;J!=q;J+=k){var N=S.getLine(J);if(N){var ie=k>0?0:N.length-1,he=k>0?N.length:-1;if(!(N.length>Y))for(J==I.line&&(ie=I.ch-(k<0?1:0));ie!=he;ie+=k){var ce=N.charAt(ie);if(X.test(ce)&&(U===void 0||(S.getTokenTypeAt(i(J,ie+1))||"")==(U||""))){var we=o[ce];if(we&&we.charAt(1)==">"==k>0)ne.push(ce);else if(ne.length)ne.pop();else return{pos:i(J,ie),ch:ce}}}}}return J-k==(k>0?S.lastLine():S.firstLine())?!1:null}function g(S,I,k){for(var U=S.state.matchBrackets.maxHighlightLineLength||1e3,z=k&&k.highlightNonMatching,Y=[],Q=S.listSelections(),ne=0;ne<Q.length;ne++){var X=Q[ne].empty()&&s(S,Q[ne].head,k);if(X&&(X.match||z!==!1)&&S.getLine(X.from.line).length<=U){var q=X.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";Y.push(S.markText(X.from,i(X.from.line,X.from.ch+1),{className:q})),X.to&&S.getLine(X.to.line).length<=U&&Y.push(S.markText(X.to,i(X.to.line,X.to.ch+1),{className:q}))}}if(Y.length){r&&S.state.focused&&S.focus();var J=function(){S.operation(function(){for(var N=0;N<Y.length;N++)Y[N].clear()})};if(I)setTimeout(J,800);else return J}}function b(S){S.operation(function(){S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null),S.state.matchBrackets.currentlyHighlighted=g(S,!1,S.state.matchBrackets)})}function B(S){S.state.matchBrackets&&S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(S,I,k){k&&k!=t.Init&&(S.off("cursorActivity",b),S.off("focus",b),S.off("blur",B),B(S)),I&&(S.state.matchBrackets=typeof I=="object"?I:{},S.on("cursorActivity",b),S.on("focus",b),S.on("blur",B))}),t.defineExtension("matchBrackets",function(){g(this,!0)}),t.defineExtension("findMatchingBracket",function(S,I,k){return(k||typeof I=="boolean")&&(k?(k.strict=I,I=k):I=I?{strict:!0}:null),s(this,S,I)}),t.defineExtension("scanForBracket",function(S,I,k,U){return h(this,S,I,k,U)})})}()),ZT.exports}Iae();const kae=/("(?:[^\\"]|\\.)*")|[:,]/g;function $j(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function o(a,s,h){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const g=JSON.stringify(a,i);if(g===void 0)return g;const b=r-s.length-h;if(g.length<=b){const B=g.replace(kae,(S,I)=>I||`${S} `);if(B.length<=b)return B}if(i!=null&&(a=JSON.parse(g),i=void 0),typeof a=="object"&&a!==null){const B=s+t,S=[];let I=0,k,U;if(Array.isArray(a)){k="[",U="]";const{length:z}=a;for(;I<z;I++)S.push(o(a[I],B,I===z-1?0:1)||"null")}else{k="{",U="}";const z=Object.keys(a),{length:Y}=z;for(;I<Y;I++){const Q=z[I],ne=`${JSON.stringify(Q)}: `,X=o(a[Q],B,ne.length+(I===Y-1?0:1));X!==void 0&&S.push(ne+X)}}if(S.length>0)return[k,t+S.join(`,
${B}`),U].join(`
${s}`)}return g}(n,"",0)}function Tae(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var T5={},JT;function Pae(){return JT||(JT=1,function(n){var e=function(){var t={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(o,a,s,h,g,b,B){var S=b.length-1;switch(g){case 1:this.$=o.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(o);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=b[S-1];case 13:this.$={};break;case 14:this.$=b[S-1];break;case 15:this.$=[b[S-2],b[S]];break;case 16:this.$={},this.$[b[S][0]]=b[S][1];break;case 17:this.$=b[S-2],b[S-2][b[S][0]]=b[S][1];break;case 18:this.$=[];break;case 19:this.$=b[S-1];break;case 20:this.$=[b[S]];break;case 21:this.$=b[S-2],b[S-2].push(b[S]);break}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(o,a){throw new Error(o)},parse:function(o){var a=this,s=[0],h=[null],g=[],b=this.table,B="",S=0,I=0,k=0,U=2,z=1;this.lexer.setInput(o),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var Y=this.lexer.yylloc;g.push(Y),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function Q(de){s.length=s.length-2*de,h.length=h.length-de,g.length=g.length-de}function ne(){var de;return de=a.lexer.lex()||1,typeof de!="number"&&(de=a.symbols_[de]||de),de}for(var X,q,J,N,ie,he={},ce,we,pe,Ce;;){if(J=s[s.length-1],this.defaultActions[J]?N=this.defaultActions[J]:(X==null&&(X=ne()),N=b[J]&&b[J][X]),typeof N>"u"||!N.length||!N[0]){if(!k){Ce=[];for(ce in b[J])this.terminals_[ce]&&ce>2&&Ce.push("'"+this.terminals_[ce]+"'");var Pe="";this.lexer.showPosition?Pe="Parse error on line "+(S+1)+`:
`+this.lexer.showPosition()+`
Expecting `+Ce.join(", ")+", got '"+this.terminals_[X]+"'":Pe="Parse error on line "+(S+1)+": Unexpected "+(X==1?"end of input":"'"+(this.terminals_[X]||X)+"'"),this.parseError(Pe,{text:this.lexer.match,token:this.terminals_[X]||X,line:this.lexer.yylineno,loc:Y,expected:Ce})}if(k==3){if(X==z)throw new Error(Pe||"Parsing halted.");I=this.lexer.yyleng,B=this.lexer.yytext,S=this.lexer.yylineno,Y=this.lexer.yylloc,X=ne()}for(;!(U.toString()in b[J]);){if(J==0)throw new Error(Pe||"Parsing halted.");Q(1),J=s[s.length-1]}q=X,X=U,J=s[s.length-1],N=b[J]&&b[J][U],k=3}if(N[0]instanceof Array&&N.length>1)throw new Error("Parse Error: multiple actions possible at state: "+J+", token: "+X);switch(N[0]){case 1:s.push(X),h.push(this.lexer.yytext),g.push(this.lexer.yylloc),s.push(N[1]),X=null,q?(X=q,q=null):(I=this.lexer.yyleng,B=this.lexer.yytext,S=this.lexer.yylineno,Y=this.lexer.yylloc,k>0&&k--);break;case 2:if(we=this.productions_[N[1]][1],he.$=h[h.length-we],he._$={first_line:g[g.length-(we||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(we||1)].first_column,last_column:g[g.length-1].last_column},ie=this.performAction.call(he,B,I,S,this.yy,N[1],h,g),typeof ie<"u")return ie;we&&(s=s.slice(0,-1*we*2),h=h.slice(0,-1*we),g=g.slice(0,-1*we)),s.push(this.productions_[N[1]][0]),h.push(he.$),g.push(he._$),pe=b[s[s.length-2]][s[s.length-1]],s.push(pe);break;case 3:return!0}}return!0}},r=function(){var i={EOF:1,parseError:function(a,s){if(this.yy.parseError)this.yy.parseError(a,s);else throw new Error(a)},setInput:function(o){return this._input=o,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var o=this._input[0];this.yytext+=o,this.yyleng++,this.match+=o,this.matched+=o;var a=o.match(/\n/);return a&&this.yylineno++,this._input=this._input.slice(1),o},unput:function(o){return this._input=o+this._input,this},more:function(){return this._more=!0,this},less:function(o){this._input=this.match.slice(o)+this._input},pastInput:function(){var o=this.matched.substr(0,this.matched.length-this.match.length);return(o.length>20?"...":"")+o.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var o=this.match;return o.length<20&&(o+=this._input.substr(0,20-o.length)),(o.substr(0,20)+(o.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var o=this.pastInput(),a=new Array(o.length+1).join("-");return o+this.upcomingInput()+`
`+a+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var o,a,s,h,g;this._more||(this.yytext="",this.match="");for(var b=this._currentRules(),B=0;B<b.length&&(s=this._input.match(this.rules[b[B]]),!(s&&(!a||s[0].length>a[0].length)&&(a=s,h=B,!this.options.flex)));B++);if(a)return g=a[0].match(/\n.*/g),g&&(this.yylineno+=g.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:g?g[g.length-1].length-1:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],o=this.performAction.call(this,this.yy,this,b[h],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o||void 0;if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a<"u"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return i.options={},i.performAction=function(a,s,h,g){switch(h){case 0:break;case 1:return 6;case 2:return s.yytext=s.yytext.substr(1,s.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},i.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],i.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},i}();return t.lexer=r,t}();typeof Tae<"u"&&(n.parser=e,n.parse=e.parse.bind(e))}(T5)),T5}var Rae=Pae();const Z6=Ka(Rae);var Ib={exports:{}},Kae=Ib.exports,e9;function Dae(){return e9||(e9=1,function(n,e){(function(t,r){n.exports=r()})(Kae,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(ke,Oe){return Oe={exports:{}},ke(Oe,Oe.exports),Oe.exports}var i=r(function(ke){function Oe(){var Je=0,Mt=1,gt=2,Nt=3,nn=4,en=5,Sn=6,Yn=7,Qr=8,cr=9,fr=10,br=11,Cr=12,Mr=13,Qn=14,Sr=15,Ge=16,ue=17,me=0,Xe=1,Bt=2,Yt=3,it=4;function Kt(p,Ne){return 55296<=p.charCodeAt(Ne)&&p.charCodeAt(Ne)<=56319&&56320<=p.charCodeAt(Ne+1)&&p.charCodeAt(Ne+1)<=57343}function Ye(p,Ne){Ne===void 0&&(Ne=0);var dt=p.charCodeAt(Ne);if(55296<=dt&&dt<=56319&&Ne<p.length-1){var pt=dt,Ot=p.charCodeAt(Ne+1);return 56320<=Ot&&Ot<=57343?(pt-55296)*1024+(Ot-56320)+65536:pt}if(56320<=dt&&dt<=57343&&Ne>=1){var pt=p.charCodeAt(Ne-1),Ot=dt;return 55296<=pt&&pt<=56319?(pt-55296)*1024+(Ot-56320)+65536:Ot}return dt}function fe(p,Ne,dt){var pt=[p].concat(Ne).concat([dt]),Ot=pt[pt.length-2],_t=dt,rn=pt.lastIndexOf(Qn);if(rn>1&&pt.slice(1,rn).every(function(bt){return bt==Nt})&&[Nt,Mr,ue].indexOf(p)==-1)return Bt;var Zt=pt.lastIndexOf(nn);if(Zt>0&&pt.slice(1,Zt).every(function(bt){return bt==nn})&&[Cr,nn].indexOf(Ot)==-1)return pt.filter(function(bt){return bt==nn}).length%2==1?Yt:it;if(Ot==Je&&_t==Mt)return me;if(Ot==gt||Ot==Je||Ot==Mt)return _t==Qn&&Ne.every(function(bt){return bt==Nt})?Bt:Xe;if(_t==gt||_t==Je||_t==Mt)return Xe;if(Ot==Sn&&(_t==Sn||_t==Yn||_t==cr||_t==fr))return me;if((Ot==cr||Ot==Yn)&&(_t==Yn||_t==Qr))return me;if((Ot==fr||Ot==Qr)&&_t==Qr)return me;if(_t==Nt||_t==Sr)return me;if(_t==en)return me;if(Ot==Cr)return me;var Gt=pt.indexOf(Nt)!=-1?pt.lastIndexOf(Nt)-1:pt.length-2;return[Mr,ue].indexOf(pt[Gt])!=-1&&pt.slice(Gt+1,-1).every(function(bt){return bt==Nt})&&_t==Qn||Ot==Sr&&[Ge,ue].indexOf(_t)!=-1?me:Ne.indexOf(nn)!=-1?Bt:Ot==nn&&_t==nn?me:Xe}this.nextBreak=function(p,Ne){if(Ne===void 0&&(Ne=0),Ne<0)return 0;if(Ne>=p.length-1)return p.length;for(var dt=xe(Ye(p,Ne)),pt=[],Ot=Ne+1;Ot<p.length;Ot++)if(!Kt(p,Ot-1)){var _t=xe(Ye(p,Ot));if(fe(dt,pt,_t))return Ot;pt.push(_t)}return p.length},this.splitGraphemes=function(p){for(var Ne=[],dt=0,pt;(pt=this.nextBreak(p,dt))<p.length;)Ne.push(p.slice(dt,pt)),dt=pt;return dt<p.length&&Ne.push(p.slice(dt)),Ne},this.iterateGraphemes=function(p){var Ne=0,dt={next:(function(){var pt,Ot;return(Ot=this.nextBreak(p,Ne))<p.length?(pt=p.slice(Ne,Ot),Ne=Ot,{value:pt,done:!1}):Ne<p.length?(pt=p.slice(Ne),Ne=p.length,{value:pt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(dt[Symbol.iterator]=function(){return dt}),dt},this.countGraphemes=function(p){for(var Ne=0,dt=0,pt;(pt=this.nextBreak(p,dt))<p.length;)dt=pt,Ne++;return dt<p.length&&Ne++,Ne};function xe(p){return 1536<=p&&p<=1541||p==1757||p==1807||p==2274||p==3406||p==69821||70082<=p&&p<=70083||p==72250||72326<=p&&p<=72329||p==73030?Cr:p==13?Je:p==10?Mt:0<=p&&p<=9||11<=p&&p<=12||14<=p&&p<=31||127<=p&&p<=159||p==173||p==1564||p==6158||p==8203||8206<=p&&p<=8207||p==8232||p==8233||8234<=p&&p<=8238||8288<=p&&p<=8292||p==8293||8294<=p&&p<=8303||55296<=p&&p<=57343||p==65279||65520<=p&&p<=65528||65529<=p&&p<=65531||113824<=p&&p<=113827||119155<=p&&p<=119162||p==917504||p==917505||917506<=p&&p<=917535||917632<=p&&p<=917759||918e3<=p&&p<=921599?gt:768<=p&&p<=879||1155<=p&&p<=1159||1160<=p&&p<=1161||1425<=p&&p<=1469||p==1471||1473<=p&&p<=1474||1476<=p&&p<=1477||p==1479||1552<=p&&p<=1562||1611<=p&&p<=1631||p==1648||1750<=p&&p<=1756||1759<=p&&p<=1764||1767<=p&&p<=1768||1770<=p&&p<=1773||p==1809||1840<=p&&p<=1866||1958<=p&&p<=1968||2027<=p&&p<=2035||2070<=p&&p<=2073||2075<=p&&p<=2083||2085<=p&&p<=2087||2089<=p&&p<=2093||2137<=p&&p<=2139||2260<=p&&p<=2273||2275<=p&&p<=2306||p==2362||p==2364||2369<=p&&p<=2376||p==2381||2385<=p&&p<=2391||2402<=p&&p<=2403||p==2433||p==2492||p==2494||2497<=p&&p<=2500||p==2509||p==2519||2530<=p&&p<=2531||2561<=p&&p<=2562||p==2620||2625<=p&&p<=2626||2631<=p&&p<=2632||2635<=p&&p<=2637||p==2641||2672<=p&&p<=2673||p==2677||2689<=p&&p<=2690||p==2748||2753<=p&&p<=2757||2759<=p&&p<=2760||p==2765||2786<=p&&p<=2787||2810<=p&&p<=2815||p==2817||p==2876||p==2878||p==2879||2881<=p&&p<=2884||p==2893||p==2902||p==2903||2914<=p&&p<=2915||p==2946||p==3006||p==3008||p==3021||p==3031||p==3072||3134<=p&&p<=3136||3142<=p&&p<=3144||3146<=p&&p<=3149||3157<=p&&p<=3158||3170<=p&&p<=3171||p==3201||p==3260||p==3263||p==3266||p==3270||3276<=p&&p<=3277||3285<=p&&p<=3286||3298<=p&&p<=3299||3328<=p&&p<=3329||3387<=p&&p<=3388||p==3390||3393<=p&&p<=3396||p==3405||p==3415||3426<=p&&p<=3427||p==3530||p==3535||3538<=p&&p<=3540||p==3542||p==3551||p==3633||3636<=p&&p<=3642||3655<=p&&p<=3662||p==3761||3764<=p&&p<=3769||3771<=p&&p<=3772||3784<=p&&p<=3789||3864<=p&&p<=3865||p==3893||p==3895||p==3897||3953<=p&&p<=3966||3968<=p&&p<=3972||3974<=p&&p<=3975||3981<=p&&p<=3991||3993<=p&&p<=4028||p==4038||4141<=p&&p<=4144||4146<=p&&p<=4151||4153<=p&&p<=4154||4157<=p&&p<=4158||4184<=p&&p<=4185||4190<=p&&p<=4192||4209<=p&&p<=4212||p==4226||4229<=p&&p<=4230||p==4237||p==4253||4957<=p&&p<=4959||5906<=p&&p<=5908||5938<=p&&p<=5940||5970<=p&&p<=5971||6002<=p&&p<=6003||6068<=p&&p<=6069||6071<=p&&p<=6077||p==6086||6089<=p&&p<=6099||p==6109||6155<=p&&p<=6157||6277<=p&&p<=6278||p==6313||6432<=p&&p<=6434||6439<=p&&p<=6440||p==6450||6457<=p&&p<=6459||6679<=p&&p<=6680||p==6683||p==6742||6744<=p&&p<=6750||p==6752||p==6754||6757<=p&&p<=6764||6771<=p&&p<=6780||p==6783||6832<=p&&p<=6845||p==6846||6912<=p&&p<=6915||p==6964||6966<=p&&p<=6970||p==6972||p==6978||7019<=p&&p<=7027||7040<=p&&p<=7041||7074<=p&&p<=7077||7080<=p&&p<=7081||7083<=p&&p<=7085||p==7142||7144<=p&&p<=7145||p==7149||7151<=p&&p<=7153||7212<=p&&p<=7219||7222<=p&&p<=7223||7376<=p&&p<=7378||7380<=p&&p<=7392||7394<=p&&p<=7400||p==7405||p==7412||7416<=p&&p<=7417||7616<=p&&p<=7673||7675<=p&&p<=7679||p==8204||8400<=p&&p<=8412||8413<=p&&p<=8416||p==8417||8418<=p&&p<=8420||8421<=p&&p<=8432||11503<=p&&p<=11505||p==11647||11744<=p&&p<=11775||12330<=p&&p<=12333||12334<=p&&p<=12335||12441<=p&&p<=12442||p==42607||42608<=p&&p<=42610||42612<=p&&p<=42621||42654<=p&&p<=42655||42736<=p&&p<=42737||p==43010||p==43014||p==43019||43045<=p&&p<=43046||43204<=p&&p<=43205||43232<=p&&p<=43249||43302<=p&&p<=43309||43335<=p&&p<=43345||43392<=p&&p<=43394||p==43443||43446<=p&&p<=43449||p==43452||p==43493||43561<=p&&p<=43566||43569<=p&&p<=43570||43573<=p&&p<=43574||p==43587||p==43596||p==43644||p==43696||43698<=p&&p<=43700||43703<=p&&p<=43704||43710<=p&&p<=43711||p==43713||43756<=p&&p<=43757||p==43766||p==44005||p==44008||p==44013||p==64286||65024<=p&&p<=65039||65056<=p&&p<=65071||65438<=p&&p<=65439||p==66045||p==66272||66422<=p&&p<=66426||68097<=p&&p<=68099||68101<=p&&p<=68102||68108<=p&&p<=68111||68152<=p&&p<=68154||p==68159||68325<=p&&p<=68326||p==69633||69688<=p&&p<=69702||69759<=p&&p<=69761||69811<=p&&p<=69814||69817<=p&&p<=69818||69888<=p&&p<=69890||69927<=p&&p<=69931||69933<=p&&p<=69940||p==70003||70016<=p&&p<=70017||70070<=p&&p<=70078||70090<=p&&p<=70092||70191<=p&&p<=70193||p==70196||70198<=p&&p<=70199||p==70206||p==70367||70371<=p&&p<=70378||70400<=p&&p<=70401||p==70460||p==70462||p==70464||p==70487||70502<=p&&p<=70508||70512<=p&&p<=70516||70712<=p&&p<=70719||70722<=p&&p<=70724||p==70726||p==70832||70835<=p&&p<=70840||p==70842||p==70845||70847<=p&&p<=70848||70850<=p&&p<=70851||p==71087||71090<=p&&p<=71093||71100<=p&&p<=71101||71103<=p&&p<=71104||71132<=p&&p<=71133||71219<=p&&p<=71226||p==71229||71231<=p&&p<=71232||p==71339||p==71341||71344<=p&&p<=71349||p==71351||71453<=p&&p<=71455||71458<=p&&p<=71461||71463<=p&&p<=71467||72193<=p&&p<=72198||72201<=p&&p<=72202||72243<=p&&p<=72248||72251<=p&&p<=72254||p==72263||72273<=p&&p<=72278||72281<=p&&p<=72283||72330<=p&&p<=72342||72344<=p&&p<=72345||72752<=p&&p<=72758||72760<=p&&p<=72765||p==72767||72850<=p&&p<=72871||72874<=p&&p<=72880||72882<=p&&p<=72883||72885<=p&&p<=72886||73009<=p&&p<=73014||p==73018||73020<=p&&p<=73021||73023<=p&&p<=73029||p==73031||92912<=p&&p<=92916||92976<=p&&p<=92982||94095<=p&&p<=94098||113821<=p&&p<=113822||p==119141||119143<=p&&p<=119145||119150<=p&&p<=119154||119163<=p&&p<=119170||119173<=p&&p<=119179||119210<=p&&p<=119213||119362<=p&&p<=119364||121344<=p&&p<=121398||121403<=p&&p<=121452||p==121461||p==121476||121499<=p&&p<=121503||121505<=p&&p<=121519||122880<=p&&p<=122886||122888<=p&&p<=122904||122907<=p&&p<=122913||122915<=p&&p<=122916||122918<=p&&p<=122922||125136<=p&&p<=125142||125252<=p&&p<=125258||917536<=p&&p<=917631||917760<=p&&p<=917999?Nt:127462<=p&&p<=127487?nn:p==2307||p==2363||2366<=p&&p<=2368||2377<=p&&p<=2380||2382<=p&&p<=2383||2434<=p&&p<=2435||2495<=p&&p<=2496||2503<=p&&p<=2504||2507<=p&&p<=2508||p==2563||2622<=p&&p<=2624||p==2691||2750<=p&&p<=2752||p==2761||2763<=p&&p<=2764||2818<=p&&p<=2819||p==2880||2887<=p&&p<=2888||2891<=p&&p<=2892||p==3007||3009<=p&&p<=3010||3014<=p&&p<=3016||3018<=p&&p<=3020||3073<=p&&p<=3075||3137<=p&&p<=3140||3202<=p&&p<=3203||p==3262||3264<=p&&p<=3265||3267<=p&&p<=3268||3271<=p&&p<=3272||3274<=p&&p<=3275||3330<=p&&p<=3331||3391<=p&&p<=3392||3398<=p&&p<=3400||3402<=p&&p<=3404||3458<=p&&p<=3459||3536<=p&&p<=3537||3544<=p&&p<=3550||3570<=p&&p<=3571||p==3635||p==3763||3902<=p&&p<=3903||p==3967||p==4145||4155<=p&&p<=4156||4182<=p&&p<=4183||p==4228||p==6070||6078<=p&&p<=6085||6087<=p&&p<=6088||6435<=p&&p<=6438||6441<=p&&p<=6443||6448<=p&&p<=6449||6451<=p&&p<=6456||6681<=p&&p<=6682||p==6741||p==6743||6765<=p&&p<=6770||p==6916||p==6965||p==6971||6973<=p&&p<=6977||6979<=p&&p<=6980||p==7042||p==7073||7078<=p&&p<=7079||p==7082||p==7143||7146<=p&&p<=7148||p==7150||7154<=p&&p<=7155||7204<=p&&p<=7211||7220<=p&&p<=7221||p==7393||7410<=p&&p<=7411||p==7415||43043<=p&&p<=43044||p==43047||43136<=p&&p<=43137||43188<=p&&p<=43203||43346<=p&&p<=43347||p==43395||43444<=p&&p<=43445||43450<=p&&p<=43451||43453<=p&&p<=43456||43567<=p&&p<=43568||43571<=p&&p<=43572||p==43597||p==43755||43758<=p&&p<=43759||p==43765||44003<=p&&p<=44004||44006<=p&&p<=44007||44009<=p&&p<=44010||p==44012||p==69632||p==69634||p==69762||69808<=p&&p<=69810||69815<=p&&p<=69816||p==69932||p==70018||70067<=p&&p<=70069||70079<=p&&p<=70080||70188<=p&&p<=70190||70194<=p&&p<=70195||p==70197||70368<=p&&p<=70370||70402<=p&&p<=70403||p==70463||70465<=p&&p<=70468||70471<=p&&p<=70472||70475<=p&&p<=70477||70498<=p&&p<=70499||70709<=p&&p<=70711||70720<=p&&p<=70721||p==70725||70833<=p&&p<=70834||p==70841||70843<=p&&p<=70844||p==70846||p==70849||71088<=p&&p<=71089||71096<=p&&p<=71099||p==71102||71216<=p&&p<=71218||71227<=p&&p<=71228||p==71230||p==71340||71342<=p&&p<=71343||p==71350||71456<=p&&p<=71457||p==71462||72199<=p&&p<=72200||p==72249||72279<=p&&p<=72280||p==72343||p==72751||p==72766||p==72873||p==72881||p==72884||94033<=p&&p<=94078||p==119142||p==119149?en:4352<=p&&p<=4447||43360<=p&&p<=43388?Sn:4448<=p&&p<=4519||55216<=p&&p<=55238?Yn:4520<=p&&p<=4607||55243<=p&&p<=55291?Qr:p==44032||p==44060||p==44088||p==44116||p==44144||p==44172||p==44200||p==44228||p==44256||p==44284||p==44312||p==44340||p==44368||p==44396||p==44424||p==44452||p==44480||p==44508||p==44536||p==44564||p==44592||p==44620||p==44648||p==44676||p==44704||p==44732||p==44760||p==44788||p==44816||p==44844||p==44872||p==44900||p==44928||p==44956||p==44984||p==45012||p==45040||p==45068||p==45096||p==45124||p==45152||p==45180||p==45208||p==45236||p==45264||p==45292||p==45320||p==45348||p==45376||p==45404||p==45432||p==45460||p==45488||p==45516||p==45544||p==45572||p==45600||p==45628||p==45656||p==45684||p==45712||p==45740||p==45768||p==45796||p==45824||p==45852||p==45880||p==45908||p==45936||p==45964||p==45992||p==46020||p==46048||p==46076||p==46104||p==46132||p==46160||p==46188||p==46216||p==46244||p==46272||p==46300||p==46328||p==46356||p==46384||p==46412||p==46440||p==46468||p==46496||p==46524||p==46552||p==46580||p==46608||p==46636||p==46664||p==46692||p==46720||p==46748||p==46776||p==46804||p==46832||p==46860||p==46888||p==46916||p==46944||p==46972||p==47e3||p==47028||p==47056||p==47084||p==47112||p==47140||p==47168||p==47196||p==47224||p==47252||p==47280||p==47308||p==47336||p==47364||p==47392||p==47420||p==47448||p==47476||p==47504||p==47532||p==47560||p==47588||p==47616||p==47644||p==47672||p==47700||p==47728||p==47756||p==47784||p==47812||p==47840||p==47868||p==47896||p==47924||p==47952||p==47980||p==48008||p==48036||p==48064||p==48092||p==48120||p==48148||p==48176||p==48204||p==48232||p==48260||p==48288||p==48316||p==48344||p==48372||p==48400||p==48428||p==48456||p==48484||p==48512||p==48540||p==48568||p==48596||p==48624||p==48652||p==48680||p==48708||p==48736||p==48764||p==48792||p==48820||p==48848||p==48876||p==48904||p==48932||p==48960||p==48988||p==49016||p==49044||p==49072||p==49100||p==49128||p==49156||p==49184||p==49212||p==49240||p==49268||p==49296||p==49324||p==49352||p==49380||p==49408||p==49436||p==49464||p==49492||p==49520||p==49548||p==49576||p==49604||p==49632||p==49660||p==49688||p==49716||p==49744||p==49772||p==49800||p==49828||p==49856||p==49884||p==49912||p==49940||p==49968||p==49996||p==50024||p==50052||p==50080||p==50108||p==50136||p==50164||p==50192||p==50220||p==50248||p==50276||p==50304||p==50332||p==50360||p==50388||p==50416||p==50444||p==50472||p==50500||p==50528||p==50556||p==50584||p==50612||p==50640||p==50668||p==50696||p==50724||p==50752||p==50780||p==50808||p==50836||p==50864||p==50892||p==50920||p==50948||p==50976||p==51004||p==51032||p==51060||p==51088||p==51116||p==51144||p==51172||p==51200||p==51228||p==51256||p==51284||p==51312||p==51340||p==51368||p==51396||p==51424||p==51452||p==51480||p==51508||p==51536||p==51564||p==51592||p==51620||p==51648||p==51676||p==51704||p==51732||p==51760||p==51788||p==51816||p==51844||p==51872||p==51900||p==51928||p==51956||p==51984||p==52012||p==52040||p==52068||p==52096||p==52124||p==52152||p==52180||p==52208||p==52236||p==52264||p==52292||p==52320||p==52348||p==52376||p==52404||p==52432||p==52460||p==52488||p==52516||p==52544||p==52572||p==52600||p==52628||p==52656||p==52684||p==52712||p==52740||p==52768||p==52796||p==52824||p==52852||p==52880||p==52908||p==52936||p==52964||p==52992||p==53020||p==53048||p==53076||p==53104||p==53132||p==53160||p==53188||p==53216||p==53244||p==53272||p==53300||p==53328||p==53356||p==53384||p==53412||p==53440||p==53468||p==53496||p==53524||p==53552||p==53580||p==53608||p==53636||p==53664||p==53692||p==53720||p==53748||p==53776||p==53804||p==53832||p==53860||p==53888||p==53916||p==53944||p==53972||p==54e3||p==54028||p==54056||p==54084||p==54112||p==54140||p==54168||p==54196||p==54224||p==54252||p==54280||p==54308||p==54336||p==54364||p==54392||p==54420||p==54448||p==54476||p==54504||p==54532||p==54560||p==54588||p==54616||p==54644||p==54672||p==54700||p==54728||p==54756||p==54784||p==54812||p==54840||p==54868||p==54896||p==54924||p==54952||p==54980||p==55008||p==55036||p==55064||p==55092||p==55120||p==55148||p==55176?cr:44033<=p&&p<=44059||44061<=p&&p<=44087||44089<=p&&p<=44115||44117<=p&&p<=44143||44145<=p&&p<=44171||44173<=p&&p<=44199||44201<=p&&p<=44227||44229<=p&&p<=44255||44257<=p&&p<=44283||44285<=p&&p<=44311||44313<=p&&p<=44339||44341<=p&&p<=44367||44369<=p&&p<=44395||44397<=p&&p<=44423||44425<=p&&p<=44451||44453<=p&&p<=44479||44481<=p&&p<=44507||44509<=p&&p<=44535||44537<=p&&p<=44563||44565<=p&&p<=44591||44593<=p&&p<=44619||44621<=p&&p<=44647||44649<=p&&p<=44675||44677<=p&&p<=44703||44705<=p&&p<=44731||44733<=p&&p<=44759||44761<=p&&p<=44787||44789<=p&&p<=44815||44817<=p&&p<=44843||44845<=p&&p<=44871||44873<=p&&p<=44899||44901<=p&&p<=44927||44929<=p&&p<=44955||44957<=p&&p<=44983||44985<=p&&p<=45011||45013<=p&&p<=45039||45041<=p&&p<=45067||45069<=p&&p<=45095||45097<=p&&p<=45123||45125<=p&&p<=45151||45153<=p&&p<=45179||45181<=p&&p<=45207||45209<=p&&p<=45235||45237<=p&&p<=45263||45265<=p&&p<=45291||45293<=p&&p<=45319||45321<=p&&p<=45347||45349<=p&&p<=45375||45377<=p&&p<=45403||45405<=p&&p<=45431||45433<=p&&p<=45459||45461<=p&&p<=45487||45489<=p&&p<=45515||45517<=p&&p<=45543||45545<=p&&p<=45571||45573<=p&&p<=45599||45601<=p&&p<=45627||45629<=p&&p<=45655||45657<=p&&p<=45683||45685<=p&&p<=45711||45713<=p&&p<=45739||45741<=p&&p<=45767||45769<=p&&p<=45795||45797<=p&&p<=45823||45825<=p&&p<=45851||45853<=p&&p<=45879||45881<=p&&p<=45907||45909<=p&&p<=45935||45937<=p&&p<=45963||45965<=p&&p<=45991||45993<=p&&p<=46019||46021<=p&&p<=46047||46049<=p&&p<=46075||46077<=p&&p<=46103||46105<=p&&p<=46131||46133<=p&&p<=46159||46161<=p&&p<=46187||46189<=p&&p<=46215||46217<=p&&p<=46243||46245<=p&&p<=46271||46273<=p&&p<=46299||46301<=p&&p<=46327||46329<=p&&p<=46355||46357<=p&&p<=46383||46385<=p&&p<=46411||46413<=p&&p<=46439||46441<=p&&p<=46467||46469<=p&&p<=46495||46497<=p&&p<=46523||46525<=p&&p<=46551||46553<=p&&p<=46579||46581<=p&&p<=46607||46609<=p&&p<=46635||46637<=p&&p<=46663||46665<=p&&p<=46691||46693<=p&&p<=46719||46721<=p&&p<=46747||46749<=p&&p<=46775||46777<=p&&p<=46803||46805<=p&&p<=46831||46833<=p&&p<=46859||46861<=p&&p<=46887||46889<=p&&p<=46915||46917<=p&&p<=46943||46945<=p&&p<=46971||46973<=p&&p<=46999||47001<=p&&p<=47027||47029<=p&&p<=47055||47057<=p&&p<=47083||47085<=p&&p<=47111||47113<=p&&p<=47139||47141<=p&&p<=47167||47169<=p&&p<=47195||47197<=p&&p<=47223||47225<=p&&p<=47251||47253<=p&&p<=47279||47281<=p&&p<=47307||47309<=p&&p<=47335||47337<=p&&p<=47363||47365<=p&&p<=47391||47393<=p&&p<=47419||47421<=p&&p<=47447||47449<=p&&p<=47475||47477<=p&&p<=47503||47505<=p&&p<=47531||47533<=p&&p<=47559||47561<=p&&p<=47587||47589<=p&&p<=47615||47617<=p&&p<=47643||47645<=p&&p<=47671||47673<=p&&p<=47699||47701<=p&&p<=47727||47729<=p&&p<=47755||47757<=p&&p<=47783||47785<=p&&p<=47811||47813<=p&&p<=47839||47841<=p&&p<=47867||47869<=p&&p<=47895||47897<=p&&p<=47923||47925<=p&&p<=47951||47953<=p&&p<=47979||47981<=p&&p<=48007||48009<=p&&p<=48035||48037<=p&&p<=48063||48065<=p&&p<=48091||48093<=p&&p<=48119||48121<=p&&p<=48147||48149<=p&&p<=48175||48177<=p&&p<=48203||48205<=p&&p<=48231||48233<=p&&p<=48259||48261<=p&&p<=48287||48289<=p&&p<=48315||48317<=p&&p<=48343||48345<=p&&p<=48371||48373<=p&&p<=48399||48401<=p&&p<=48427||48429<=p&&p<=48455||48457<=p&&p<=48483||48485<=p&&p<=48511||48513<=p&&p<=48539||48541<=p&&p<=48567||48569<=p&&p<=48595||48597<=p&&p<=48623||48625<=p&&p<=48651||48653<=p&&p<=48679||48681<=p&&p<=48707||48709<=p&&p<=48735||48737<=p&&p<=48763||48765<=p&&p<=48791||48793<=p&&p<=48819||48821<=p&&p<=48847||48849<=p&&p<=48875||48877<=p&&p<=48903||48905<=p&&p<=48931||48933<=p&&p<=48959||48961<=p&&p<=48987||48989<=p&&p<=49015||49017<=p&&p<=49043||49045<=p&&p<=49071||49073<=p&&p<=49099||49101<=p&&p<=49127||49129<=p&&p<=49155||49157<=p&&p<=49183||49185<=p&&p<=49211||49213<=p&&p<=49239||49241<=p&&p<=49267||49269<=p&&p<=49295||49297<=p&&p<=49323||49325<=p&&p<=49351||49353<=p&&p<=49379||49381<=p&&p<=49407||49409<=p&&p<=49435||49437<=p&&p<=49463||49465<=p&&p<=49491||49493<=p&&p<=49519||49521<=p&&p<=49547||49549<=p&&p<=49575||49577<=p&&p<=49603||49605<=p&&p<=49631||49633<=p&&p<=49659||49661<=p&&p<=49687||49689<=p&&p<=49715||49717<=p&&p<=49743||49745<=p&&p<=49771||49773<=p&&p<=49799||49801<=p&&p<=49827||49829<=p&&p<=49855||49857<=p&&p<=49883||49885<=p&&p<=49911||49913<=p&&p<=49939||49941<=p&&p<=49967||49969<=p&&p<=49995||49997<=p&&p<=50023||50025<=p&&p<=50051||50053<=p&&p<=50079||50081<=p&&p<=50107||50109<=p&&p<=50135||50137<=p&&p<=50163||50165<=p&&p<=50191||50193<=p&&p<=50219||50221<=p&&p<=50247||50249<=p&&p<=50275||50277<=p&&p<=50303||50305<=p&&p<=50331||50333<=p&&p<=50359||50361<=p&&p<=50387||50389<=p&&p<=50415||50417<=p&&p<=50443||50445<=p&&p<=50471||50473<=p&&p<=50499||50501<=p&&p<=50527||50529<=p&&p<=50555||50557<=p&&p<=50583||50585<=p&&p<=50611||50613<=p&&p<=50639||50641<=p&&p<=50667||50669<=p&&p<=50695||50697<=p&&p<=50723||50725<=p&&p<=50751||50753<=p&&p<=50779||50781<=p&&p<=50807||50809<=p&&p<=50835||50837<=p&&p<=50863||50865<=p&&p<=50891||50893<=p&&p<=50919||50921<=p&&p<=50947||50949<=p&&p<=50975||50977<=p&&p<=51003||51005<=p&&p<=51031||51033<=p&&p<=51059||51061<=p&&p<=51087||51089<=p&&p<=51115||51117<=p&&p<=51143||51145<=p&&p<=51171||51173<=p&&p<=51199||51201<=p&&p<=51227||51229<=p&&p<=51255||51257<=p&&p<=51283||51285<=p&&p<=51311||51313<=p&&p<=51339||51341<=p&&p<=51367||51369<=p&&p<=51395||51397<=p&&p<=51423||51425<=p&&p<=51451||51453<=p&&p<=51479||51481<=p&&p<=51507||51509<=p&&p<=51535||51537<=p&&p<=51563||51565<=p&&p<=51591||51593<=p&&p<=51619||51621<=p&&p<=51647||51649<=p&&p<=51675||51677<=p&&p<=51703||51705<=p&&p<=51731||51733<=p&&p<=51759||51761<=p&&p<=51787||51789<=p&&p<=51815||51817<=p&&p<=51843||51845<=p&&p<=51871||51873<=p&&p<=51899||51901<=p&&p<=51927||51929<=p&&p<=51955||51957<=p&&p<=51983||51985<=p&&p<=52011||52013<=p&&p<=52039||52041<=p&&p<=52067||52069<=p&&p<=52095||52097<=p&&p<=52123||52125<=p&&p<=52151||52153<=p&&p<=52179||52181<=p&&p<=52207||52209<=p&&p<=52235||52237<=p&&p<=52263||52265<=p&&p<=52291||52293<=p&&p<=52319||52321<=p&&p<=52347||52349<=p&&p<=52375||52377<=p&&p<=52403||52405<=p&&p<=52431||52433<=p&&p<=52459||52461<=p&&p<=52487||52489<=p&&p<=52515||52517<=p&&p<=52543||52545<=p&&p<=52571||52573<=p&&p<=52599||52601<=p&&p<=52627||52629<=p&&p<=52655||52657<=p&&p<=52683||52685<=p&&p<=52711||52713<=p&&p<=52739||52741<=p&&p<=52767||52769<=p&&p<=52795||52797<=p&&p<=52823||52825<=p&&p<=52851||52853<=p&&p<=52879||52881<=p&&p<=52907||52909<=p&&p<=52935||52937<=p&&p<=52963||52965<=p&&p<=52991||52993<=p&&p<=53019||53021<=p&&p<=53047||53049<=p&&p<=53075||53077<=p&&p<=53103||53105<=p&&p<=53131||53133<=p&&p<=53159||53161<=p&&p<=53187||53189<=p&&p<=53215||53217<=p&&p<=53243||53245<=p&&p<=53271||53273<=p&&p<=53299||53301<=p&&p<=53327||53329<=p&&p<=53355||53357<=p&&p<=53383||53385<=p&&p<=53411||53413<=p&&p<=53439||53441<=p&&p<=53467||53469<=p&&p<=53495||53497<=p&&p<=53523||53525<=p&&p<=53551||53553<=p&&p<=53579||53581<=p&&p<=53607||53609<=p&&p<=53635||53637<=p&&p<=53663||53665<=p&&p<=53691||53693<=p&&p<=53719||53721<=p&&p<=53747||53749<=p&&p<=53775||53777<=p&&p<=53803||53805<=p&&p<=53831||53833<=p&&p<=53859||53861<=p&&p<=53887||53889<=p&&p<=53915||53917<=p&&p<=53943||53945<=p&&p<=53971||53973<=p&&p<=53999||54001<=p&&p<=54027||54029<=p&&p<=54055||54057<=p&&p<=54083||54085<=p&&p<=54111||54113<=p&&p<=54139||54141<=p&&p<=54167||54169<=p&&p<=54195||54197<=p&&p<=54223||54225<=p&&p<=54251||54253<=p&&p<=54279||54281<=p&&p<=54307||54309<=p&&p<=54335||54337<=p&&p<=54363||54365<=p&&p<=54391||54393<=p&&p<=54419||54421<=p&&p<=54447||54449<=p&&p<=54475||54477<=p&&p<=54503||54505<=p&&p<=54531||54533<=p&&p<=54559||54561<=p&&p<=54587||54589<=p&&p<=54615||54617<=p&&p<=54643||54645<=p&&p<=54671||54673<=p&&p<=54699||54701<=p&&p<=54727||54729<=p&&p<=54755||54757<=p&&p<=54783||54785<=p&&p<=54811||54813<=p&&p<=54839||54841<=p&&p<=54867||54869<=p&&p<=54895||54897<=p&&p<=54923||54925<=p&&p<=54951||54953<=p&&p<=54979||54981<=p&&p<=55007||55009<=p&&p<=55035||55037<=p&&p<=55063||55065<=p&&p<=55091||55093<=p&&p<=55119||55121<=p&&p<=55147||55149<=p&&p<=55175||55177<=p&&p<=55203?fr:p==9757||p==9977||9994<=p&&p<=9997||p==127877||127938<=p&&p<=127940||p==127943||127946<=p&&p<=127948||128066<=p&&p<=128067||128070<=p&&p<=128080||p==128110||128112<=p&&p<=128120||p==128124||128129<=p&&p<=128131||128133<=p&&p<=128135||p==128170||128372<=p&&p<=128373||p==128378||p==128400||128405<=p&&p<=128406||128581<=p&&p<=128583||128587<=p&&p<=128591||p==128675||128692<=p&&p<=128694||p==128704||p==128716||129304<=p&&p<=129308||129310<=p&&p<=129311||p==129318||129328<=p&&p<=129337||129341<=p&&p<=129342||129489<=p&&p<=129501?Mr:127995<=p&&p<=127999?Qn:p==8205?Sr:p==9792||p==9794||9877<=p&&p<=9878||p==9992||p==10084||p==127752||p==127806||p==127859||p==127891||p==127908||p==127912||p==127979||p==127981||p==128139||128187<=p&&p<=128188||p==128295||p==128300||p==128488||p==128640||p==128658?Ge:128102<=p&&p<=128105?ue:br}return this}ke.exports&&(ke.exports=Oe)}),o=new i,a=function(Oe,Je,Mt){for(var gt=o.iterateGraphemes(Oe.substring(Je)),Nt="",nn=0;nn<Mt-Je;nn++){var en=gt.next();if(Nt+=en.value,en.done)break}return Nt},s=function(ke,Oe,Je,Mt,gt,Nt,nn){return{start:{line:ke,column:Oe,offset:Je},end:{line:Mt,column:gt,offset:Nt},source:nn||null}},h=r(function(ke,Oe){(function(Je,Mt){ke.exports=Mt()})(t,function(){var Je="",Mt,gt=Nt;function Nt(fr,br){if(typeof fr!="string")throw new TypeError("expected a string");if(br===1)return fr;if(br===2)return fr+fr;var Cr=fr.length*br;if(Mt!==fr||typeof Mt>"u")Mt=fr,Je="";else if(Je.length>=Cr)return Je.substr(0,Cr);for(;Cr>Je.length&&br>1;)br&1&&(Je+=fr),br>>=1,fr+=fr;return Je+=fr,Je=Je.substr(0,Cr),Je}var nn=function(br,Cr,Mr){if(br==null||Cr==null)return br;var Qn=String(br),Sr=typeof Cr=="number"?Cr:parseInt(Cr,10);if(isNaN(Sr)||!isFinite(Sr))return Qn;var Ge=Qn.length;if(Ge>=Sr)return Qn;var ue=String(Mr);ue===""&&(ue=" ");for(var me=Sr-Ge;ue.length<me;)ue+=ue;var Xe=ue.length>me?ue.substr(0,me):ue;return Xe+Qn},en=Object.assign||function(fr){for(var br=1;br<arguments.length;br++){var Cr=arguments[br];for(var Mr in Cr)Object.prototype.hasOwnProperty.call(Cr,Mr)&&(fr[Mr]=Cr[Mr])}return fr};function Sn(fr,br,Cr,Mr){var Qn=String(br),Sr=nn(Qn,Cr," "),Ge=gt(" ",Mr.tabSize);return Sr+" | "+fr.replace(/\t/g,Ge)}function Yn(fr,br,Cr,Mr,Qn){return fr.slice(br,Cr).map(function(Sr,Ge){return Sn(Sr,br+Ge+1,Mr,Qn)}).join(`
`)}var Qr={extraLines:2,tabSize:4},cr=function(br,Cr,Mr,Qn){Qn=en({},Qr,Qn);var Sr=br.split(/\r\n?|\n|\f/),Ge=Math.max(1,Cr-Qn.extraLines)-1,ue=Math.min(Cr+Qn.extraLines,Sr.length),me=String(ue).length,Xe=Yn(Sr,Ge,Cr,me,Qn),Bt=Sn(Sr[Cr-1].substring(0,Mr-1),Cr,me,Qn),Yt=gt(" ",Bt.length)+"^",it=Yn(Sr,Cr,ue,me,Qn);return[Xe,Yt,it].filter(Boolean).join(`
`)};return cr})}),g=new Error().stack,b=function(ke){var Oe=Object.create(SyntaxError.prototype);return Object.assign(Oe,ke,{name:"SyntaxError"}),Object.defineProperty(Oe,"stack",{get:function(){return g?g.replace(/^(.+\n){1,3}/,String(Oe)+`
`):""}}),Oe},B=function(ke,Oe,Je,Mt,gt){throw b({message:Mt?ke+`
`+h(Oe,Mt,gt):ke,rawMessage:ke,source:Je,line:Mt,column:gt})},S={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Oe){for(var Je=arguments.length,Mt=Array(Je>1?Je-1:0),gt=1;gt<Je;gt++)Mt[gt-1]=arguments[gt];return"Unexpected token <"+Oe+"> at "+Mt.filter(Boolean).join(":")}},I={unexpectedSymbol:function(Oe){for(var Je=arguments.length,Mt=Array(Je>1?Je-1:0),gt=1;gt<Je;gt++)Mt[gt-1]=arguments[gt];return"Unexpected symbol <"+Oe+"> at "+Mt.filter(Boolean).join(":")}},k={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},U={"{":k.LEFT_BRACE,"}":k.RIGHT_BRACE,"[":k.LEFT_BRACKET,"]":k.RIGHT_BRACKET,":":k.COLON,",":k.COMMA},z={true:k.TRUE,false:k.FALSE,null:k.NULL},Y={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},Q={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},ne={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function X(ke){return ke>="1"&&ke<="9"}function q(ke){return ke>="0"&&ke<="9"}function J(ke){return q(ke)||ke>="a"&&ke<="f"||ke>="A"&&ke<="F"}function N(ke){return ke==="e"||ke==="E"}function ie(ke,Oe,Je,Mt){var gt=ke.charAt(Oe);if(gt==="\r")Oe++,Je++,Mt=1,ke.charAt(Oe)===`
`&&Oe++;else if(gt===`
`)Oe++,Je++,Mt=1;else if(gt==="	"||gt===" ")Oe++,Mt++;else return null;return{index:Oe,line:Je,column:Mt}}function he(ke,Oe,Je,Mt){var gt=ke.charAt(Oe);return gt in U?{type:U[gt],line:Je,column:Mt+1,index:Oe+1,value:null}:null}function ce(ke,Oe,Je,Mt){for(var gt in z)if(z.hasOwnProperty(gt)&&ke.substr(Oe,gt.length)===gt)return{type:z[gt],line:Je,column:Mt+gt.length,index:Oe+gt.length,value:gt};return null}function we(ke,Oe,Je,Mt){for(var gt=Oe,Nt=Y._START_;Oe<ke.length;){var nn=ke.charAt(Oe);switch(Nt){case Y._START_:{if(nn==='"')Oe++,Nt=Y.START_QUOTE_OR_CHAR;else return null;break}case Y.START_QUOTE_OR_CHAR:{if(nn==="\\")Oe++,Nt=Y.ESCAPE;else{if(nn==='"')return Oe++,{type:k.STRING,line:Je,column:Mt+Oe-gt,index:Oe,value:ke.slice(gt,Oe)};Oe++}break}case Y.ESCAPE:{if(nn in Q){if(Oe++,nn==="u")for(var en=0;en<4;en++){var Sn=ke.charAt(Oe);if(Sn&&J(Sn))Oe++;else return null}Nt=Y.START_QUOTE_OR_CHAR}else return null;break}}}}function pe(ke,Oe,Je,Mt){var gt=Oe,Nt=Oe,nn=ne._START_;e:for(;Oe<ke.length;){var en=ke.charAt(Oe);switch(nn){case ne._START_:{if(en==="-")nn=ne.MINUS;else if(en==="0")Nt=Oe+1,nn=ne.ZERO;else if(X(en))Nt=Oe+1,nn=ne.DIGIT;else return null;break}case ne.MINUS:{if(en==="0")Nt=Oe+1,nn=ne.ZERO;else if(X(en))Nt=Oe+1,nn=ne.DIGIT;else return null;break}case ne.ZERO:{if(en===".")nn=ne.POINT;else if(N(en))nn=ne.EXP;else break e;break}case ne.DIGIT:{if(q(en))Nt=Oe+1;else if(en===".")nn=ne.POINT;else if(N(en))nn=ne.EXP;else break e;break}case ne.POINT:{if(q(en))Nt=Oe+1,nn=ne.DIGIT_FRACTION;else break e;break}case ne.DIGIT_FRACTION:{if(q(en))Nt=Oe+1;else if(N(en))nn=ne.EXP;else break e;break}case ne.EXP:{if(en==="+"||en==="-")nn=ne.EXP_DIGIT_OR_SIGN;else if(q(en))Nt=Oe+1,nn=ne.EXP_DIGIT_OR_SIGN;else break e;break}case ne.EXP_DIGIT_OR_SIGN:{if(q(en))Nt=Oe+1;else break e;break}}Oe++}return Nt>0?{type:k.NUMBER,line:Je,column:Mt+Nt-gt,index:Nt,value:ke.slice(gt,Nt)}:null}var Ce=function(Oe,Je){for(var Mt=1,gt=1,Nt=0,nn=[];Nt<Oe.length;){var en=[Oe,Nt,Mt,gt],Sn=ie.apply(void 0,en);if(Sn){Nt=Sn.index,Mt=Sn.line,gt=Sn.column;continue}var Yn=he.apply(void 0,en)||ce.apply(void 0,en)||we.apply(void 0,en)||pe.apply(void 0,en);if(Yn){var Qr={type:Yn.type,value:Yn.value,loc:s(Mt,gt,Nt,Yn.line,Yn.column,Yn.index,Je.source)};nn.push(Qr),Nt=Yn.index,Mt=Yn.line,gt=Yn.column}else B(I.unexpectedSymbol(a(Oe,Nt,Nt+1),Je.source,Mt,gt),Oe,Je.source,Mt,gt)}return nn},Pe={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},de={_START_:0,KEY:1,COLON:2},rt={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},ze={loc:!0,source:null};function Qe(ke,Oe,Je){var Mt=Oe.length>0?Oe[Oe.length-1].loc.end:{line:1,column:1};B(S.unexpectedEnd(),ke,Je.source,Mt.line,Mt.column)}function ut(ke){for(var Oe=0,Je=0;Je<4;Je++)Oe=Oe*16+parseInt(ke[Je],16);return String.fromCharCode(Oe)}var Te={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Ue=['"',"\\","/"];function st(ke){for(var Oe="",Je=0;Je<ke.length;Je++){var Mt=ke.charAt(Je);if(Mt==="\\"){Je++;var gt=ke.charAt(Je);if(gt==="u")Oe+=ut(ke.substr(Je+1,4)),Je+=4;else if(Ue.indexOf(gt)!==-1)Oe+=gt;else if(gt in Te)Oe+=Te[gt];else break}else Oe+=Mt}return Oe}function wt(ke,Oe,Je,Mt){for(var gt=void 0,Nt={type:"Object",children:[]},nn=Pe._START_;Je<Oe.length;){var en=Oe[Je];switch(nn){case Pe._START_:{if(en.type===k.LEFT_BRACE)gt=en,nn=Pe.OPEN_OBJECT,Je++;else return null;break}case Pe.OPEN_OBJECT:{if(en.type===k.RIGHT_BRACE)return Mt.loc&&(Nt.loc=s(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,en.loc.end.line,en.loc.end.column,en.loc.end.offset,Mt.source)),{value:Nt,index:Je+1};var Sn=mt(ke,Oe,Je,Mt);Nt.children.push(Sn.value),nn=Pe.PROPERTY,Je=Sn.index;break}case Pe.PROPERTY:{if(en.type===k.RIGHT_BRACE)return Mt.loc&&(Nt.loc=s(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,en.loc.end.line,en.loc.end.column,en.loc.end.offset,Mt.source)),{value:Nt,index:Je+1};en.type===k.COMMA?(nn=Pe.COMMA,Je++):B(S.unexpectedToken(a(ke,en.loc.start.offset,en.loc.end.offset),Mt.source,en.loc.start.line,en.loc.start.column),ke,Mt.source,en.loc.start.line,en.loc.start.column);break}case Pe.COMMA:{var Yn=mt(ke,Oe,Je,Mt);Yn?(Je=Yn.index,Nt.children.push(Yn.value),nn=Pe.PROPERTY):B(S.unexpectedToken(a(ke,en.loc.start.offset,en.loc.end.offset),Mt.source,en.loc.start.line,en.loc.start.column),ke,Mt.source,en.loc.start.line,en.loc.start.column);break}}}Qe(ke,Oe,Mt)}function mt(ke,Oe,Je,Mt){for(var gt=void 0,Nt={type:"Property",key:null,value:null},nn=de._START_;Je<Oe.length;){var en=Oe[Je];switch(nn){case de._START_:{if(en.type===k.STRING){var Sn={type:"Identifier",value:st(ke.slice(en.loc.start.offset+1,en.loc.end.offset-1)),raw:en.value};Mt.loc&&(Sn.loc=en.loc),gt=en,Nt.key=Sn,nn=de.KEY,Je++}else return null;break}case de.KEY:{en.type===k.COLON?(nn=de.COLON,Je++):B(S.unexpectedToken(a(ke,en.loc.start.offset,en.loc.end.offset),Mt.source,en.loc.start.line,en.loc.start.column),ke,Mt.source,en.loc.start.line,en.loc.start.column);break}case de.COLON:{var Yn=Lt(ke,Oe,Je,Mt);return Nt.value=Yn.value,Mt.loc&&(Nt.loc=s(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,Yn.value.loc.end.line,Yn.value.loc.end.column,Yn.value.loc.end.offset,Mt.source)),{value:Nt,index:Yn.index}}}}}function ft(ke,Oe,Je,Mt){for(var gt=void 0,Nt={type:"Array",children:[]},nn=rt._START_,en=void 0;Je<Oe.length;)switch(en=Oe[Je],nn){case rt._START_:{if(en.type===k.LEFT_BRACKET)gt=en,nn=rt.OPEN_ARRAY,Je++;else return null;break}case rt.OPEN_ARRAY:{if(en.type===k.RIGHT_BRACKET)return Mt.loc&&(Nt.loc=s(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,en.loc.end.line,en.loc.end.column,en.loc.end.offset,Mt.source)),{value:Nt,index:Je+1};var Sn=Lt(ke,Oe,Je,Mt);Je=Sn.index,Nt.children.push(Sn.value),nn=rt.VALUE;break}case rt.VALUE:{if(en.type===k.RIGHT_BRACKET)return Mt.loc&&(Nt.loc=s(gt.loc.start.line,gt.loc.start.column,gt.loc.start.offset,en.loc.end.line,en.loc.end.column,en.loc.end.offset,Mt.source)),{value:Nt,index:Je+1};en.type===k.COMMA?(nn=rt.COMMA,Je++):B(S.unexpectedToken(a(ke,en.loc.start.offset,en.loc.end.offset),Mt.source,en.loc.start.line,en.loc.start.column),ke,Mt.source,en.loc.start.line,en.loc.start.column);break}case rt.COMMA:{var Yn=Lt(ke,Oe,Je,Mt);Je=Yn.index,Nt.children.push(Yn.value),nn=rt.VALUE;break}}Qe(ke,Oe,Mt)}function Ut(ke,Oe,Je,Mt){var gt=Oe[Je],Nt=null;switch(gt.type){case k.STRING:{Nt=st(ke.slice(gt.loc.start.offset+1,gt.loc.end.offset-1));break}case k.NUMBER:{Nt=Number(gt.value);break}case k.TRUE:{Nt=!0;break}case k.FALSE:{Nt=!1;break}case k.NULL:{Nt=null;break}default:return null}var nn={type:"Literal",value:Nt,raw:gt.value};return Mt.loc&&(nn.loc=gt.loc),{value:nn,index:Je+1}}function Lt(ke,Oe,Je,Mt){var gt=Oe[Je],Nt=Ut.apply(void 0,arguments)||wt.apply(void 0,arguments)||ft.apply(void 0,arguments);if(Nt)return Nt;B(S.unexpectedToken(a(ke,gt.loc.start.offset,gt.loc.end.offset),Mt.source,gt.loc.start.line,gt.loc.start.column),ke,Mt.source,gt.loc.start.line,gt.loc.start.column)}var De=function(ke,Oe){Oe=Object.assign({},ze,Oe);var Je=Ce(ke,Oe);Je.length===0&&Qe(ke,Je,Oe);var Mt=Lt(ke,Je,0,Oe);if(Mt.index===Je.length)return Mt.value;var gt=Je[Mt.index];B(S.unexpectedToken(a(ke,gt.loc.start.offset,gt.loc.end.offset),Oe.source,gt.loc.start.line,gt.loc.start.column),ke,Oe.source,gt.loc.start.line,gt.loc.start.column)};return De})}(Ib)),Ib.exports}var Lae=Dae();const Fae=Ka(Lae);function ir(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="a994e12e3e6547813b669a430e6cb42da5d99bba",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:11,column:0},end:{line:26,column:3}},3:{start:{line:12,column:16},end:{line:12,column:18}},4:{start:{line:13,column:2},end:{line:20,column:4}},5:{start:{line:14,column:16},end:{line:14,column:24}},6:{start:{line:15,column:4},end:{line:19,column:7}},7:{start:{line:21,column:2},end:{line:24,column:3}},8:{start:{line:22,column:4},end:{line:22,column:25}},9:{start:{line:25,column:2},end:{line:25,column:15}},10:{start:{line:27,column:0},end:{line:134,column:3}},11:{start:{line:28,column:16},end:{line:28,column:18}},12:{start:{line:29,column:21},end:{line:29,column:29}},13:{start:{line:30,column:22},end:{line:30,column:26}},14:{start:{line:31,column:2},end:{line:38,column:4}},15:{start:{line:32,column:16},end:{line:32,column:24}},16:{start:{line:33,column:4},end:{line:37,column:7}},17:{start:{line:39,column:2},end:{line:42,column:3}},18:{start:{line:40,column:4},end:{line:40,column:23}},19:{start:{line:43,column:2},end:{line:45,column:3}},20:{start:{line:44,column:4},end:{line:44,column:17}},21:{start:{line:46,column:14},end:{line:46,column:29}},22:{start:{line:47,column:16},end:{line:47,column:32}},23:{start:{line:49,column:4},end:{line:69,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:51,column:11},end:{line:69,column:5}},26:{start:{line:52,column:6},end:{line:52,column:18}},27:{start:{line:53,column:11},end:{line:69,column:5}},28:{start:{line:54,column:6},end:{line:54,column:20}},29:{start:{line:56,column:18},end:{line:56,column:25}},30:{start:{line:58,column:6},end:{line:67,column:7}},31:{start:{line:59,column:8},end:{line:59,column:41}},32:{start:{line:61,column:8},end:{line:63,column:11}},33:{start:{line:62,column:10},end:{line:62,column:101}},34:{start:{line:64,column:8},end:{line:66,column:9}},35:{start:{line:65,column:10},end:{line:65,column:34}},36:{start:{line:68,column:6},end:{line:68,column:63}},37:{start:{line:71,column:12},end:{line:71,column:16}},38:{start:{line:72,column:2},end:{line:103,column:3}},39:{start:{line:73,column:19},end:{line:83,column:6}},40:{start:{line:84,column:4},end:{line:98,column:5}},41:{start:{line:85,column:6},end:{line:97,column:8}},42:{start:{line:88,column:10},end:{line:88,column:76}},43:{start:{line:90,column:34},end:{line:90,column:85}},44:{start:{line:91,column:10},end:{line:95,column:12}},45:{start:{line:99,column:9},end:{line:103,column:3}},46:{start:{line:100,column:4},end:{line:100,column:56}},47:{start:{line:102,column:4},end:{line:102,column:50}},48:{start:{line:104,column:2},end:{line:132,column:3}},49:{start:{line:105,column:19},end:{line:105,column:28}},50:{start:{line:106,column:4},end:{line:131,column:7}},51:{start:{line:107,column:31},end:{line:107,column:36}},52:{start:{line:108,column:6},end:{line:130,column:7}},53:{start:{line:109,column:31},end:{line:109,column:64}},54:{start:{line:110,column:20},end:{line:114,column:9}},55:{start:{line:115,column:8},end:{line:115,column:24}},56:{start:{line:116,column:13},end:{line:130,column:7}},57:{start:{line:117,column:21},end:{line:117,column:83}},58:{start:{line:118,column:28},end:{line:118,column:64}},59:{start:{line:119,column:8},end:{line:122,column:9}},60:{start:{line:120,column:10},end:{line:120,column:69}},61:{start:{line:121,column:10},end:{line:121,column:17}},62:{start:{line:123,column:24},end:{line:123,column:35}},63:{start:{line:124,column:31},end:{line:124,column:34}},64:{start:{line:125,column:8},end:{line:129,column:11}},65:{start:{line:133,column:2},end:{line:133,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:42},end:{line:11,column:43}},loc:{start:{line:11,column:52},end:{line:26,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:46},end:{line:20,column:3}},line:13},3:{name:"(anonymous_3)",decl:{start:{line:27,column:41},end:{line:27,column:42}},loc:{start:{line:27,column:62},end:{line:134,column:1}},line:27},4:{name:"(anonymous_4)",decl:{start:{line:31,column:22},end:{line:31,column:23}},loc:{start:{line:31,column:37},end:{line:38,column:3}},line:31},5:{name:"getArrayPositionalFromAst",decl:{start:{line:48,column:11},end:{line:48,column:36}},loc:{start:{line:48,column:49},end:{line:70,column:3}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:61,column:37},end:{line:61,column:38}},loc:{start:{line:61,column:52},end:{line:63,column:9}},line:61},7:{name:"(anonymous_7)",decl:{start:{line:87,column:29},end:{line:87,column:30}},loc:{start:{line:87,column:38},end:{line:89,column:9}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:89,column:15},end:{line:89,column:16}},loc:{start:{line:89,column:24},end:{line:96,column:9}},line:89},9:{name:"(anonymous_9)",decl:{start:{line:106,column:19},end:{line:106,column:20}},loc:{start:{line:106,column:30},end:{line:131,column:5}},line:106}},branchMap:{0:{loc:{start:{line:43,column:2},end:{line:45,column:3}},type:"if",locations:[{start:{line:43,column:2},end:{line:45,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:43},1:{loc:{start:{line:49,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:69,column:5}},{start:{line:51,column:11},end:{line:69,column:5}}],line:49},2:{loc:{start:{line:51,column:11},end:{line:69,column:5}},type:"if",locations:[{start:{line:51,column:11},end:{line:69,column:5}},{start:{line:53,column:11},end:{line:69,column:5}}],line:51},3:{loc:{start:{line:53,column:11},end:{line:69,column:5}},type:"if",locations:[{start:{line:53,column:11},end:{line:69,column:5}},{start:{line:55,column:11},end:{line:69,column:5}}],line:53},4:{loc:{start:{line:58,column:6},end:{line:67,column:7}},type:"if",locations:[{start:{line:58,column:6},end:{line:67,column:7}},{start:{line:60,column:13},end:{line:67,column:7}}],line:58},5:{loc:{start:{line:62,column:17},end:{line:62,column:100}},type:"binary-expr",locations:[{start:{line:62,column:17},end:{line:62,column:30}},{start:{line:62,column:34},end:{line:62,column:69}},{start:{line:62,column:73},end:{line:62,column:100}}],line:62},6:{loc:{start:{line:64,column:8},end:{line:66,column:9}},type:"if",locations:[{start:{line:64,column:8},end:{line:66,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:64},7:{loc:{start:{line:72,column:2},end:{line:103,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:103,column:3}},{start:{line:99,column:9},end:{line:103,column:3}}],line:72},8:{loc:{start:{line:84,column:4},end:{line:98,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:98,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:84},9:{loc:{start:{line:99,column:9},end:{line:103,column:3}},type:"if",locations:[{start:{line:99,column:9},end:{line:103,column:3}},{start:{line:101,column:9},end:{line:103,column:3}}],line:99},10:{loc:{start:{line:104,column:2},end:{line:132,column:3}},type:"if",locations:[{start:{line:104,column:2},end:{line:132,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},11:{loc:{start:{line:108,column:6},end:{line:130,column:7}},type:"if",locations:[{start:{line:108,column:6},end:{line:130,column:7}},{start:{line:116,column:13},end:{line:130,column:7}}],line:108},12:{loc:{start:{line:116,column:13},end:{line:130,column:7}},type:"if",locations:[{start:{line:116,column:13},end:{line:130,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},13:{loc:{start:{line:119,column:8},end:{line:122,column:9}},type:"if",locations:[{start:{line:119,column:8},end:{line:122,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:119}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AACA,OAAO,cAAc;AACrB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAED,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,QAAM,QAAkC,CAAC;AAKzC,EAAC,SAAiB,OAAO,aAAa,CAAC,KAAa,SAAc;AAChE,UAAM,MAAM,KAAK;AACjB,UAAM,KAAK;AAAA,MACT,MAAS,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,MAC5D,IAAS,WAAW,IAAI,IAAI,YAAa,GAAG,IAAI,WAAW;AAAA,MAC3D,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAEA,MAAI;AACF,aAAS,MAAM,IAAI;AAAA,EACrB,SACM,GAAG;AAAA,EAET;AACA,SAAO;AACT,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAC9E,QAAM,QAAkC,CAAC;AACzC,QAAM,EAAC,OAAM,IAAI;AACjB,QAAM,EAAC,QAAO,IAAI;AAElB,SAAO,aAAa,CAAC,KAAa,SAAc;AAC9C,UAAM,MAAM,KAAK;AACjB,UAAM,KAAK;AAAA,MACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,MACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,MACrD,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AACA,MAAI;AACF,WAAO,MAAM,IAAI;AAAA,EACnB,SACO,GAAG;AAAA,EAEV;AAEA,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a994e12e3e6547813b669a430e6cb42da5d99bba"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return ir=function(){return a},a}ir();ir().s[0]++;Wd.defineMode("mgl",(n,e)=>(ir().f[0]++,ir().s[1]++,Wd.modes.javascript({...n,json:!0},e)));ir().s[2]++;Wd.registerHelper("lint","json",n=>{ir().f[1]++;const e=(ir().s[3]++,[]);ir().s[4]++,Z6.parser.parseError=(t,r)=>{ir().f[2]++;const i=(ir().s[5]++,r.loc);ir().s[6]++,e.push({from:Wd.Pos(i.first_line-1,i.first_column),to:Wd.Pos(i.last_line-1,i.last_column),message:t})},ir().s[7]++;try{ir().s[8]++,Z6.parse(n)}catch{}return ir().s[9]++,e});ir().s[10]++;Wd.registerHelper("lint","mgl",(n,e,t)=>{ir().f[3]++;const r=(ir().s[11]++,[]),{parser:i}=(ir().s[12]++,Z6),{context:o}=(ir().s[13]++,e);ir().s[14]++,i.parseError=(b,B)=>{ir().f[4]++;const S=(ir().s[15]++,B.loc);ir().s[16]++,r.push({from:Wd.Pos(S.first_line-1,S.first_column),to:Wd.Pos(S.last_line-1,S.last_column),message:b})},ir().s[17]++;try{ir().s[18]++,i.parse(n)}catch{}if(ir().s[19]++,r.length>0)return ir().b[0][0]++,ir().s[20]++,r;ir().b[0][1]++;const a=(ir().s[21]++,Fae(n)),s=(ir().s[22]++,JSON.parse(n));function h(b,B){if(ir().f[5]++,ir().s[23]++,b){if(ir().b[1][1]++,ir().s[25]++,B.length<1)return ir().b[2][0]++,ir().s[26]++,b;if(ir().b[2][1]++,ir().s[27]++,b.children){ir().b[3][1]++;const S=(ir().s[29]++,B[0]);let I;return ir().s[30]++,S.match(/^[0-9]+$/)?(ir().b[4][0]++,ir().s[31]++,I=b.children[B[0]]):(ir().b[4][1]++,ir().s[32]++,I=b.children.find(k=>(ir().f[6]++,ir().s[33]++,ir().b[5][0]++,k.key&&(ir().b[5][1]++,k.key.type==="Identifier")&&(ir().b[5][2]++,k.key.value===S))),ir().s[34]++,I?(ir().b[6][0]++,ir().s[35]++,I=I.value):ir().b[6][1]++),ir().s[36]++,h(I,B.slice(1))}else{ir().b[3][0]++,ir().s[28]++;return}}else{ir().b[1][0]++,ir().s[24]++;return}}let g=(ir().s[37]++,null);if(ir().s[38]++,o==="layer"){ir().b[7][0]++;const b=(ir().s[39]++,Tf({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[s]}));ir().s[40]++,b?(ir().b[8][0]++,ir().s[41]++,g={result:"error",value:b.filter(B=>(ir().f[7]++,ir().s[42]++,!B.message.match(/^layers\[0\]: source ".*" not found$/))).map(B=>{ir().f[8]++;const S=(ir().s[43]++,B.message.replace(/^layers\[0\]./,"").split(":"));return ir().s[44]++,{name:"",key:S[0],message:S[1]}})}):ir().b[8][1]++}else if(ir().b[7][1]++,ir().s[45]++,o==="expression")ir().b[9][0]++,ir().s[46]++,g=L$.createExpression(s,e.spec);else throw ir().b[9][1]++,ir().s[47]++,new Error(`Invalid context ${o}`);if(ir().s[48]++,(g==null?void 0:g.result)==="error"){ir().b[10][0]++;const b=(ir().s[49]++,g.value);ir().s[50]++,b.forEach(B=>{ir().f[9]++;const{key:S,message:I}=(ir().s[51]++,B);if(ir().s[52]++,S)if(ir().b[11][1]++,ir().s[56]++,S){ir().b[12][0]++;const k=(ir().s[57]++,S.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),U=(ir().s[58]++,h(a,k));if(ir().s[59]++,U)ir().b[13][1]++;else{ir().b[13][0]++,ir().s[60]++,console.warn("Something went wrong parsing error:",B),ir().s[61]++;return}const{loc:z}=(ir().s[62]++,U),{start:Y,end:Q}=(ir().s[63]++,z);ir().s[64]++,r.push({from:Wd.Pos(Y.line-1,Y.column),to:Wd.Pos(Q.line-1,Q.column),message:I})}else ir().b[12][1]++;else{ir().b[11][0]++;const k=(ir().s[53]++,t.getLineHandle(t.lastLine())),U=(ir().s[54]++,{from:Wd.Pos(t.firstLine(),0),to:Wd.Pos(t.lastLine(),k.text.length),message:I});ir().s[55]++,r.push(U)}})}else ir().b[10][1]++;return ir().s[65]++,r});function gr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return gr=function(){return a},a}gr();class Vj extends Xn.Component{constructor(t){gr().f[5]++,gr().s[4]++;super(t);In(this,"_keyEvent");In(this,"_doc");In(this,"_el",(gr().s[2]++,null));In(this,"_cancelNextChange",(gr().s[3]++,!1));In(this,"onPointerDown",(gr().s[11]++,()=>{gr().f[7]++,gr().s[12]++,this._keyEvent="pointer"}));In(this,"onFocus",(gr().s[13]++,()=>{gr().f[8]++,gr().s[14]++,this.props.onFocus?(gr().b[2][0]++,gr().s[15]++,this.props.onFocus()):gr().b[2][1]++,gr().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})}));In(this,"onBlur",(gr().s[17]++,()=>{gr().f[9]++,gr().s[18]++,this._keyEvent="keyboard",gr().s[19]++,this.props.onBlur?(gr().b[3][0]++,gr().s[20]++,this.props.onBlur()):gr().b[3][1]++,gr().s[21]++,this.setState({isEditing:!1,showMessage:!1})}));In(this,"onChange",(gr().s[28]++,t=>{if(gr().f[12]++,gr().s[29]++,this._cancelNextChange){gr().b[6][0]++,gr().s[30]++,this._cancelNextChange=!1,gr().s[31]++,this.setState({prevValue:this._doc.getValue()}),gr().s[32]++;return}else gr().b[6][1]++;const r=(gr().s[33]++,this._doc.getValue());if(gr().s[34]++,this.state.prevValue!==r){gr().b[7][0]++;let i,o;gr().s[35]++;try{gr().s[36]++,i=JSON.parse(r)}catch(a){gr().s[37]++,o=a,gr().s[38]++,console.warn(a)}gr().s[39]++,gr().b[9][0]++,o&&(gr().b[9][1]++,this.props.onJSONInvalid)?(gr().b[8][0]++,gr().s[40]++,this.props.onJSONInvalid()):(gr().b[8][1]++,gr().s[41]++,this.props.onChange?(gr().b[10][0]++,gr().s[42]++,this.props.onChange(i)):gr().b[10][1]++,gr().s[43]++,this.props.onJSONValid?(gr().b[11][0]++,gr().s[44]++,this.props.onJSONValid()):gr().b[11][1]++)}else gr().b[7][1]++;gr().s[45]++,this.setState({prevValue:r})}));gr().s[5]++,this._keyEvent="keyboard",gr().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){gr().f[6]++,gr().s[7]++,this._doc=Wd(this._el,{value:this.props.getValue(this.props.layer),mode:(gr().b[0][0]++,this.props.mode||(gr().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(gr().b[1][0]++,this.props.lint||(gr().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),gr().s[8]++,this._doc.on("change",this.onChange),gr().s[9]++,this._doc.on("focus",this.onFocus),gr().s[10]++,this._doc.on("blur",this.onBlur)}componentWillUnMount(){gr().f[10]++,gr().s[22]++,this._doc.off("change",this.onChange),gr().s[23]++,this._doc.off("focus",this.onFocus),gr().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(t){gr().f[11]++,gr().s[25]++,gr().b[5][0]++,!this.state.isEditing&&(gr().b[5][1]++,t.layer!==this.props.layer)?(gr().b[4][0]++,gr().s[26]++,this._cancelNextChange=!0,gr().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):gr().b[4][1]++}render(){gr().f[13]++;const t=(gr().s[46]++,this.props.t),{showMessage:r}=(gr().s[47]++,this.state),i=(gr().s[48]++,{});return gr().s[49]++,this.props.maxHeight?(gr().b[12][0]++,gr().s[50]++,i.maxHeight=this.props.maxHeight):gr().b[12][1]++,gr().s[51]++,ae.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[ae.jsx("div",{className:tm("JSONEditor__message",{"JSONEditor__message--on":r}),children:ae.jsxs(M0,{t,children:["Press ",ae.jsx("kbd",{children:"ESC"})," to lose focus"]})}),ae.jsx("div",{className:tm("codemirror-container",this.props.className),ref:o=>(gr().f[14]++,gr().s[52]++,this._el=o),style:i})]})}}In(Vj,"defaultProps",(gr().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:t=>(gr().f[0]++,gr().s[1]++,$j(t,{indent:2,maxLength:40})),onFocus:()=>{gr().f[1]++},onBlur:()=>{gr().f[2]++},onJSONInvalid:()=>{gr().f[3]++},onJSONValid:()=>{gr().f[4]++}}));const Uae=(gr().s[53]++,$s()(Vj));function D2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="60f4cd40e505c4a9f8de1078b77716b10a4a4264",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:61}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AASW;AATX,OAAO,WAAW;AAClB,OAAO,eAAiC;AAMxC,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,aAAW,GAAG,KAAK,OAAO;AAAA,EACpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f4cd40e505c4a9f8de1078b77716b10a4a4264"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return D2=function(){return a},a}D2();class iI extends Xn.Component{render(){return D2().f[0]++,D2().s[0]++,ae.jsx(Uae,{...this.props})}}var w_="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",zae="M7,10L12,15L17,10H7Z",jae="M7,15L12,10L17,15H7Z",oI="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Sg(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Sg=function(){return a},a}Sg();const sI=(Sg().s[0]++,["all","any","none"]);Sg().s[1]++;const Nae=(Sg().s[2]++,Object.keys(es.filter_operator.values).filter(n=>(Sg().f[0]++,Sg().s[3]++,sI.indexOf(n)<0)));function bi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return bi=function(){return a},a}bi();function Gae(n){return bi().f[0]++,bi().s[0]++,n===""?(bi().b[0][0]++,bi().s[1]++,n):(bi().b[0][1]++,bi().s[2]++,isNaN(n)?(bi().b[1][0]++,bi().s[3]++,n):(bi().b[1][1]++,bi().s[4]++,parseFloat(n)))}function Wae(n){bi().f[1]++;const e=(bi().s[5]++,typeof n=="string");if(bi().s[6]++,e)bi().b[2][1]++;else return bi().b[2][0]++,bi().s[7]++,n;return bi().s[8]++,n.match(/^\s*true\s*$/)?(bi().b[3][0]++,bi().s[9]++,!0):(bi().b[3][1]++,bi().s[10]++,n.match(/^\s*false\s*$/)?(bi().b[4][0]++,bi().s[11]++,!1):(bi().b[4][1]++,bi().s[12]++,n))}function Qae(n){return bi().f[2]++,bi().s[13]++,n=Gae(n),bi().s[14]++,n=Wae(n),bi().s[15]++,n}class Hj extends Xn.Component{onFilterPartChanged(e,t,r){bi().f[3]++;let i=(bi().s[17]++,[e,t,...r.map(Qae)]);bi().s[18]++,bi().b[6][0]++,e==="has"||(bi().b[6][1]++,e==="!has")?(bi().b[5][0]++,bi().s[19]++,i=[e,t]):(bi().b[5][1]++,bi().s[20]++,r.length===0?(bi().b[7][0]++,bi().s[21]++,i=[e,t,""]):bi().b[7][1]++),bi().s[22]++,this.props.onChange(i)}render(){bi().f[4]++;const e=(bi().s[23]++,this.props.filter),t=(bi().s[24]++,e[0]),r=(bi().s[25]++,e[1]),i=(bi().s[26]++,e.slice(2));return bi().s[27]++,ae.jsxs("div",{className:"maputnik-filter-editor-single",children:[ae.jsx("div",{className:"maputnik-filter-editor-property",children:ae.jsx(zy,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(o=>(bi().f[5]++,bi().s[28]++,[o,o])),onChange:o=>(bi().f[6]++,bi().s[29]++,this.onFilterPartChanged(t,o,i))})}),ae.jsx("div",{className:"maputnik-filter-editor-operator",children:ae.jsx(jg,{"aria-label":"function",value:t,onChange:o=>(bi().f[7]++,bi().s[30]++,this.onFilterPartChanged(o,r,i)),options:Nae})}),(bi().b[8][0]++,i.length>0&&(bi().b[8][1]++,ae.jsx("div",{className:"maputnik-filter-editor-args",children:ae.jsx(kf,{"aria-label":"value",value:i.join(","),onChange:o=>(bi().f[8]++,bi().s[31]++,this.onFilterPartChanged(t,r,o.split(",")))})})))]})}}In(Hj,"defaultProps",(bi().s[16]++,{properties:{}}));function uy(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="cef1671f65ba48cf49a518a548a597faa051d67d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SAOD,KAPC;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cef1671f65ba48cf49a518a548a597faa051d67d"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return uy=function(){return a},a}uy();class qae extends Xn.Component{render(){uy().f[0]++;const e=(uy().s[0]++,this.props.t);return uy().s[1]++,ae.jsxs("div",{className:"maputnik-filter-editor-block",children:[ae.jsx("div",{className:"maputnik-filter-editor-block-action",children:ae.jsx(Ya,{className:"maputnik-delete-filter",onClick:this.props.onDelete,title:e("Delete filter block"),children:ae.jsx(ky,{})})}),ae.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children})]})}}const Yae=(uy().s[2]++,$s()(qae));var P5,t9;function $ae(){if(t9)return P5;t9=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",o="["+e+"]",a="["+t+r+"]",s="\\ud83c[\\udffb-\\udfff]",h="(?:"+a+"|"+s+")",g="[^"+e+"]",b="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",S="\\u200d",I=h+"?",k="["+i+"]?",U="(?:"+S+"(?:"+[g,b,B].join("|")+")"+k+I+")*",z=k+I+U,Y="(?:"+[g+a+"?",a,b,B,o].join("|")+")",Q=RegExp(s+"(?="+s+")|"+Y+z,"g"),ne=RegExp("["+S+e+t+r+i+"]"),X=typeof window=="object"&&window&&window.Object===Object&&window,q=typeof self=="object"&&self&&self.Object===Object&&self,J=X||q||Function("return this")();function N(ft){return ft.split("")}function ie(ft){return ne.test(ft)}function he(ft){return ie(ft)?ce(ft):N(ft)}function ce(ft){return ft.match(Q)||[]}var we=Object.prototype,pe=we.toString,Ce=J.Symbol,Pe=Ce?Ce.prototype:void 0,de=Pe?Pe.toString:void 0;function rt(ft,Ut,Lt){var De=-1,ke=ft.length;Ut<0&&(Ut=-Ut>ke?0:ke+Ut),Lt=Lt>ke?ke:Lt,Lt<0&&(Lt+=ke),ke=Ut>Lt?0:Lt-Ut>>>0,Ut>>>=0;for(var Oe=Array(ke);++De<ke;)Oe[De]=ft[De+Ut];return Oe}function ze(ft){if(typeof ft=="string")return ft;if(Ue(ft))return de?de.call(ft):"";var Ut=ft+"";return Ut=="0"&&1/ft==-1/0?"-0":Ut}function Qe(ft,Ut,Lt){var De=ft.length;return Lt=Lt===void 0?De:Lt,!Ut&&Lt>=De?ft:rt(ft,Ut,Lt)}function ut(ft){return function(Ut){Ut=st(Ut);var Lt=ie(Ut)?he(Ut):void 0,De=Lt?Lt[0]:Ut.charAt(0),ke=Lt?Qe(Lt,1).join(""):Ut.slice(1);return De[ft]()+ke}}function Te(ft){return!!ft&&typeof ft=="object"}function Ue(ft){return typeof ft=="symbol"||Te(ft)&&pe.call(ft)==n}function st(ft){return ft==null?"":ze(ft)}function wt(ft){return mt(st(ft).toLowerCase())}var mt=ut("toUpperCase");return P5=wt,P5}var Vae=$ae();const aI=Ka(Vae);function Lp(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Lp=function(){return a},a}Lp();function Zx(n){Lp().f[0]++;let e;const t=(Lp().s[0]++,n.split("-"));return Lp().s[1]++,t.length>1?(Lp().b[0][0]++,Lp().s[2]++,e=n.split("-").slice(1).join(" ")):(Lp().b[0][1]++,Lp().s[3]++,e=n),Lp().s[4]++,aI(e)}function _o(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return _o=function(){return a},a}_o();class Zj extends Xn.Component{constructor(t){_o().f[2]++,_o().s[1]++;super(t);In(this,"onJSONInvalid",(_o().s[3]++,t=>{_o().f[3]++,_o().s[4]++,this.setState({jsonError:!0})}));In(this,"onJSONValid",(_o().s[5]++,()=>{_o().f[4]++,_o().s[6]++,this.setState({jsonError:!1})}));_o().s[2]++,this.state={jsonError:!1}}render(){_o().f[5]++;const{t,errors:r,fieldName:i,fieldType:o,value:a,canUndo:s}=(_o().s[7]++,this.props),{jsonError:h}=(_o().s[8]++,this.state),g=(_o().s[9]++,s?(_o().b[0][0]++,!s()):(_o().b[0][1]++,!0)),b=(_o().s[10]++,ae.jsxs(ae.Fragment,{children:[(_o().b[1][0]++,this.props.onUndo&&(_o().b[1][1]++,ae.jsx(Ya,{onClick:this.props.onUndo,disabled:g,className:"maputnik-delete-stop",title:t("Revert from expression"),children:ae.jsx(IV,{})},"undo_action"))),ae.jsx(Ya,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:t("Delete expression"),children:ae.jsx(ky,{})},"delete_action")]})),B=(_o().s[11]++,o===void 0?(_o().b[2][0]++,i):(_o().b[2][1]++,`${o}.${i}`)),S=(_o().s[12]++,r[B]),I=(_o().s[13]++,`${B}[`),k=(_o().s[14]++,[]);function U(z){return _o().f[6]++,_o().s[15]++,$j(z,{indent:2,maxLength:38})}return _o().s[16]++,h?(_o().b[3][0]++,_o().s[17]++,k.push({message:"Invalid JSON"})):(_o().b[3][1]++,_o().s[18]++,Object.entries(r).filter(([z,Y])=>(_o().f[7]++,_o().s[19]++,z.startsWith(I))).forEach(([z,Y])=>(_o().f[8]++,_o().s[20]++,k.push(Y))),_o().s[21]++,S?(_o().b[4][0]++,_o().s[22]++,k.push(S)):_o().b[4][1]++),_o().s[23]++,ae.jsx(ga,{error:k,fieldSpec:this.props.fieldSpec,label:t(Zx(this.props.fieldName)),action:b,wideMode:!0,children:ae.jsx(iI,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:a,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:U,onChange:this.props.onChange})})}}In(Zj,"defaultProps",(_o().s[0]++,{errors:{},onFocus:()=>{_o().f[0]++},onBlur:()=>{_o().f[1]++}}));const Xj=(_o().s[24]++,$s()(Zj));function Kn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="10bf63b3f71adfa5066d0aecd6eaecbe45ada76f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAgMQ,SAsDA,UAtDA,KAGA,YAHA;AAhMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAGjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAgG;AAC7H,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bf63b3f71adfa5066d0aecd6eaecbe45ada76f"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Kn=function(){return a},a}Kn();function f0(n){Kn().f[0]++;const e=(Kn().s[0]++,Kn().b[0][0]++,n.filter||(Kn().b[0][1]++,["all"]));if(Kn().s[1]++,Array.isArray(e))Kn().b[1][1]++;else return Kn().b[1][0]++,Kn().s[2]++,e;let t=(Kn().s[3]++,e[0]),r=(Kn().s[4]++,e.slice(1));return Kn().s[5]++,sI.indexOf(t)<0?(Kn().b[2][0]++,Kn().s[6]++,t="all",Kn().s[7]++,r=[e.slice(0)]):Kn().b[2][1]++,Kn().s[8]++,[t,...r]}function Hae(n){return Kn().f[1]++,Kn().s[9]++,D$(Zae(n)).layers[0].filter}function Zae(n){return Kn().f[2]++,Kn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Xae=(Kn().s[11]++,["all","any","none"]);function n9(n){if(Kn().f[3]++,Kn().s[12]++,Kn().b[4][0]++,n.length===1&&(Kn().b[4][1]++,Xae.includes(n[0])))return Kn().b[3][0]++,Kn().s[13]++,!0;Kn().b[3][1]++;const e=(Kn().s[14]++,Uv(n));return Kn().s[15]++,!V2.isEqual(e,n)}function r9(n){return Kn().f[4]++,Kn().s[16]++,sI.indexOf(n[0])>=0}function Jae(n){return Kn().f[5]++,Kn().s[17]++,r9(n)?(Kn().b[5][0]++,Kn().s[18]++,n.slice(1).map(e=>(Kn().f[6]++,Kn().s[19]++,r9(e))).filter(e=>(Kn().f[7]++,Kn().s[20]++,e==!0)).length>0):(Kn().b[5][1]++,Kn().s[21]++,!1)}class Jj extends Xn.Component{constructor(t){Kn().f[8]++,Kn().s[23]++;super(t);In(this,"addFilterItem",(Kn().s[31]++,()=>{Kn().f[11]++;const t=(Kn().s[32]++,f0(this.props).slice(0));Kn().s[33]++,t.push(["==","name",""]),Kn().s[34]++,this.props.onChange(t)}));In(this,"onToggleDoc",(Kn().s[35]++,t=>{Kn().f[12]++,Kn().s[36]++,this.setState({showDoc:t})}));In(this,"makeFilter",(Kn().s[37]++,()=>{Kn().f[13]++,Kn().s[38]++,this.setState({displaySimpleFilter:!0})}));In(this,"makeExpression",(Kn().s[39]++,()=>{Kn().f[14]++;const t=(Kn().s[40]++,f0(this.props));Kn().s[41]++,this.props.onChange(Hae(t)),Kn().s[42]++,this.setState({displaySimpleFilter:!1})}));Kn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:n9(f0(t))}}onFilterPartChanged(t,r){Kn().f[9]++;const i=(Kn().s[25]++,f0(this.props).slice(0));Kn().s[26]++,i[t]=r,Kn().s[27]++,this.props.onChange(i)}deleteFilterItem(t){Kn().f[10]++;const r=(Kn().s[28]++,f0(this.props).slice(0));Kn().s[29]++,r.splice(t+1,1),Kn().s[30]++,this.props.onChange(r)}static getDerivedStateFromProps(t,r){Kn().f[15]++;const i=(Kn().s[43]++,n9(f0(t)));return Kn().s[44]++,Kn().b[7][0]++,!i&&(Kn().b[7][1]++,r.displaySimpleFilter===!0)?(Kn().b[6][0]++,Kn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Kn().b[6][1]++,Kn().s[46]++,Kn().b[9][0]++,i&&(Kn().b[9][1]++,r.displaySimpleFilter===!1)?(Kn().b[8][0]++,Kn().s[47]++,{valueIsSimpleFilter:!0}):(Kn().b[8][1]++,Kn().s[48]++,{valueIsSimpleFilter:!1}))}render(){Kn().f[16]++;const{errors:t,t:r}=(Kn().s[49]++,this.props),{displaySimpleFilter:i}=(Kn().s[50]++,this.state),o=(Kn().s[51]++,{doc:Ys.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),a=(Kn().s[52]++,["all"]),s=(Kn().s[53]++,Kn().b[10][0]++,i&&(Kn().b[10][1]++,Jae(f0(this.props))));if(Kn().s[54]++,s)return Kn().b[11][0]++,Kn().s[55]++,ae.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[ae.jsx("p",{children:r("Nested filters are not supported.")}),ae.jsxs(Ya,{onClick:this.makeExpression,title:r("Convert to expression"),children:[ae.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ae.jsx("path",{fill:"currentColor",d:w_})}),r("Upgrade to expression")]})]});if(Kn().b[11][1]++,Kn().s[56]++,i){Kn().b[12][0]++;const h=(Kn().s[57]++,f0(this.props)),g=(Kn().s[58]++,h[0]),b=(Kn().s[59]++,h.slice(1)),B=(Kn().s[60]++,ae.jsx("div",{children:ae.jsx(Ya,{onClick:this.makeExpression,title:r("Convert to expression"),className:"maputnik-make-zoom-function",children:ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ae.jsx("path",{fill:"currentColor",d:w_})})})})),S=(Kn().s[61]++,b.map((I,k)=>{Kn().f[17]++;const U=(Kn().s[62]++,t[`filter[${k+1}]`]);return Kn().s[63]++,ae.jsxs("div",{children:[ae.jsx(Yae,{onDelete:this.deleteFilterItem.bind(this,k),children:ae.jsx(Hj,{properties:this.props.properties,filter:I,onChange:this.onFilterPartChanged.bind(this,k+1)})},k),(Kn().b[13][0]++,U&&(Kn().b[13][1]++,ae.jsx("div",{className:"maputnik-inline-error",children:U.message},"error")))]},`block-${k}`)}));return Kn().s[64]++,ae.jsxs(ae.Fragment,{children:[ae.jsx(ga,{fieldSpec:o,label:r("Filter"),action:B,children:ae.jsx(jg,{value:g,onChange:I=>(Kn().f[18]++,Kn().s[65]++,this.onFilterPartChanged(0,I)),options:[["all",r("every filter matches")],["none",r("no filter matches")],["any",r("any filter matches")]]})},"top"),S,ae.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:ae.jsxs(Ya,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ae.jsx("path",{fill:"currentColor",d:oI})})," ",r("Add filter")]})},"buttons"),ae.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Kn().b[14][0]++,""):(Kn().b[14][1]++,"none")},children:ae.jsx(tI,{fieldSpec:o})},"doc")]})}else{Kn().b[12][1]++;const{filter:h}=(Kn().s[66]++,this.props);return Kn().s[67]++,ae.jsxs(ae.Fragment,{children:[ae.jsx(Xj,{onDelete:()=>{Kn().f[19]++,Kn().s[68]++,this.setState({displaySimpleFilter:!0}),Kn().s[69]++,this.props.onChange(a)},fieldName:"filter",fieldSpec:o,value:h,errors:t,onChange:this.props.onChange}),(Kn().b[15][0]++,this.state.valueIsSimpleFilter&&(Kn().b[15][1]++,ae.jsxs("div",{className:"maputnik-expr-infobox",children:[r("You've entered an old style filter.")," ",ae.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:r("Switch to filter editor.")})]})))]})}}}In(Jj,"defaultProps",(Kn().s[22]++,{filter:["all"]}));const ele=(Kn().s[70]++,$s()(Jj));var m1={},dd={},g1={},R5,i9;function eN(){if(i9)return R5;i9=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return R5=n,R5}var K5,o9;function pp(){if(o9)return K5;o9=1;var n=eN(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return K5=t,K5}var D5,s9;function J_(){if(s9)return D5;s9=1;var n=pp(),e=n.Symbol;return D5=e,D5}var L5,a9;function tle(){if(a9)return L5;a9=1;var n=J_(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function o(a){var s=t.call(a,i),h=a[i];try{a[i]=void 0;var g=!0}catch{}var b=r.call(a);return g&&(s?a[i]=h:delete a[i]),b}return L5=o,L5}var F5,l9;function nle(){if(l9)return F5;l9=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return F5=t,F5}var U5,u9;function Ng(){if(u9)return U5;u9=1;var n=J_(),e=tle(),t=nle(),r="[object Null]",i="[object Undefined]",o=n?n.toStringTag:void 0;function a(s){return s==null?s===void 0?i:r:o&&o in Object(s)?e(s):t(s)}return U5=a,U5}var z5,A9;function Jd(){if(A9)return z5;A9=1;var n=Array.isArray;return z5=n,z5}var j5,c9;function sm(){if(c9)return j5;c9=1;function n(e){return e!=null&&typeof e=="object"}return j5=n,j5}var N5,h9;function rle(){if(h9)return N5;h9=1;var n=Ng(),e=Jd(),t=sm(),r="[object String]";function i(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==r}return N5=i,N5}var G5,d9;function ile(){if(d9)return G5;d9=1;function n(e){return function(t,r,i){for(var o=-1,a=Object(t),s=i(t),h=s.length;h--;){var g=s[e?h:++o];if(r(a[g],g,a)===!1)break}return t}}return G5=n,G5}var W5,f9;function tN(){if(f9)return W5;f9=1;var n=ile(),e=n();return W5=e,W5}var Q5,p9;function ole(){if(p9)return Q5;p9=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return Q5=n,Q5}var q5,m9;function sle(){if(m9)return q5;m9=1;var n=Ng(),e=sm(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return q5=r,q5}var Y5,g9;function lI(){if(g9)return Y5;g9=1;var n=sle(),e=sm(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,o=n(function(){return arguments}())?n:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return Y5=o,Y5}var Tv={exports:{}},$5,y9;function ale(){if(y9)return $5;y9=1;function n(){return!1}return $5=n,$5}Tv.exports;var v9;function Xx(){return v9||(v9=1,function(n,e){var t=pp(),r=ale(),i=e&&!e.nodeType&&e,o=i&&!0&&n&&!n.nodeType&&n,a=o&&o.exports===i,s=a?t.Buffer:void 0,h=s?s.isBuffer:void 0,g=h||r;n.exports=g}(Tv,Tv.exports)),Tv.exports}var V5,_9;function uI(){if(_9)return V5;_9=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var o=typeof r;return i=i??n,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return V5=t,V5}var H5,C9;function AI(){if(C9)return H5;C9=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return H5=e,H5}var Z5,b9;function lle(){if(b9)return Z5;b9=1;var n=Ng(),e=AI(),t=sm(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",a="[object Date]",s="[object Error]",h="[object Function]",g="[object Map]",b="[object Number]",B="[object Object]",S="[object RegExp]",I="[object Set]",k="[object String]",U="[object WeakMap]",z="[object ArrayBuffer]",Y="[object DataView]",Q="[object Float32Array]",ne="[object Float64Array]",X="[object Int8Array]",q="[object Int16Array]",J="[object Int32Array]",N="[object Uint8Array]",ie="[object Uint8ClampedArray]",he="[object Uint16Array]",ce="[object Uint32Array]",we={};we[Q]=we[ne]=we[X]=we[q]=we[J]=we[N]=we[ie]=we[he]=we[ce]=!0,we[r]=we[i]=we[z]=we[o]=we[Y]=we[a]=we[s]=we[h]=we[g]=we[b]=we[B]=we[S]=we[I]=we[k]=we[U]=!1;function pe(Ce){return t(Ce)&&e(Ce.length)&&!!we[n(Ce)]}return Z5=pe,Z5}var X5,x9;function cI(){if(x9)return X5;x9=1;function n(e){return function(t){return e(t)}}return X5=n,X5}var Pv={exports:{}};Pv.exports;var w9;function hI(){return w9||(w9=1,function(n,e){var t=eN(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,o=i&&i.exports===r,a=o&&t.process,s=function(){try{var h=i&&i.require&&i.require("util").types;return h||a&&a.binding&&a.binding("util")}catch{}}();n.exports=s}(Pv,Pv.exports)),Pv.exports}var J5,M9;function dI(){if(M9)return J5;M9=1;var n=lle(),e=cI(),t=hI(),r=t&&t.isTypedArray,i=r?e(r):n;return J5=i,J5}var ew,S9;function nN(){if(S9)return ew;S9=1;var n=ole(),e=lI(),t=Jd(),r=Xx(),i=uI(),o=dI(),a=Object.prototype,s=a.hasOwnProperty;function h(g,b){var B=t(g),S=!B&&e(g),I=!B&&!S&&r(g),k=!B&&!S&&!I&&o(g),U=B||S||I||k,z=U?n(g.length,String):[],Y=z.length;for(var Q in g)(b||s.call(g,Q))&&!(U&&(Q=="length"||I&&(Q=="offset"||Q=="parent")||k&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||i(Q,Y)))&&z.push(Q);return z}return ew=h,ew}var tw,E9;function fI(){if(E9)return tw;E9=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return tw=e,tw}var nw,B9;function rN(){if(B9)return nw;B9=1;function n(e,t){return function(r){return e(t(r))}}return nw=n,nw}var rw,O9;function ule(){if(O9)return rw;O9=1;var n=rN(),e=n(Object.keys,Object);return rw=e,rw}var iw,I9;function Ale(){if(I9)return iw;I9=1;var n=fI(),e=ule(),t=Object.prototype,r=t.hasOwnProperty;function i(o){if(!n(o))return e(o);var a=[];for(var s in Object(o))r.call(o,s)&&s!="constructor"&&a.push(s);return a}return iw=i,iw}var ow,k9;function Pf(){if(k9)return ow;k9=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return ow=n,ow}var sw,T9;function pI(){if(T9)return sw;T9=1;var n=Ng(),e=Pf(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var h=n(s);return h==r||h==i||h==t||h==o}return sw=a,sw}var aw,P9;function jy(){if(P9)return aw;P9=1;var n=pI(),e=AI();function t(r){return r!=null&&e(r.length)&&!n(r)}return aw=t,aw}var lw,R9;function eC(){if(R9)return lw;R9=1;var n=nN(),e=Ale(),t=jy();function r(i){return t(i)?n(i):e(i)}return lw=r,lw}var uw,K9;function iN(){if(K9)return uw;K9=1;var n=tN(),e=eC();function t(r,i){return r&&n(r,i,e)}return uw=t,uw}var Aw,D9;function Jx(){if(D9)return Aw;D9=1;function n(e){return e}return Aw=n,Aw}var cw,L9;function oN(){if(L9)return cw;L9=1;var n=Jx();function e(t){return typeof t=="function"?t:n}return cw=e,cw}var hw,F9;function mI(){if(F9)return hw;F9=1;var n=iN(),e=oN();function t(r,i){return r&&n(r,e(i))}return hw=t,hw}var dw,U9;function gI(){if(U9)return dw;U9=1;var n=rN(),e=n(Object.getPrototypeOf,Object);return dw=e,dw}var fw,z9;function sN(){if(z9)return fw;z9=1;var n=Ng(),e=gI(),t=sm(),r="[object Object]",i=Function.prototype,o=Object.prototype,a=i.toString,s=o.hasOwnProperty,h=a.call(Object);function g(b){if(!t(b)||n(b)!=r)return!1;var B=e(b);if(B===null)return!0;var S=s.call(B,"constructor")&&B.constructor;return typeof S=="function"&&S instanceof S&&a.call(S)==h}return fw=g,fw}var pw,j9;function aN(){if(j9)return pw;j9=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=t(e[r],r,e);return o}return pw=n,pw}var mw,N9;function cle(){if(N9)return mw;N9=1;function n(){this.__data__=[],this.size=0}return mw=n,mw}var gw,G9;function tC(){if(G9)return gw;G9=1;function n(e,t){return e===t||e!==e&&t!==t}return gw=n,gw}var yw,W9;function e3(){if(W9)return yw;W9=1;var n=tC();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return yw=e,yw}var vw,Q9;function hle(){if(Q9)return vw;Q9=1;var n=e3(),e=Array.prototype,t=e.splice;function r(i){var o=this.__data__,a=n(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():t.call(o,a,1),--this.size,!0}return vw=r,vw}var _w,q9;function dle(){if(q9)return _w;q9=1;var n=e3();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return _w=e,_w}var Cw,Y9;function fle(){if(Y9)return Cw;Y9=1;var n=e3();function e(t){return n(this.__data__,t)>-1}return Cw=e,Cw}var bw,$9;function ple(){if($9)return bw;$9=1;var n=e3();function e(t,r){var i=this.__data__,o=n(i,t);return o<0?(++this.size,i.push([t,r])):i[o][1]=r,this}return bw=e,bw}var xw,V9;function t3(){if(V9)return xw;V9=1;var n=cle(),e=hle(),t=dle(),r=fle(),i=ple();function o(a){var s=-1,h=a==null?0:a.length;for(this.clear();++s<h;){var g=a[s];this.set(g[0],g[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,xw=o,xw}var ww,H9;function mle(){if(H9)return ww;H9=1;var n=t3();function e(){this.__data__=new n,this.size=0}return ww=e,ww}var Mw,Z9;function gle(){if(Z9)return Mw;Z9=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return Mw=n,Mw}var Sw,X9;function yle(){if(X9)return Sw;X9=1;function n(e){return this.__data__.get(e)}return Sw=n,Sw}var Ew,J9;function vle(){if(J9)return Ew;J9=1;function n(e){return this.__data__.has(e)}return Ew=n,Ew}var Bw,eP;function _le(){if(eP)return Bw;eP=1;var n=pp(),e=n["__core-js_shared__"];return Bw=e,Bw}var Ow,tP;function Cle(){if(tP)return Ow;tP=1;var n=_le(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Ow=t,Ow}var Iw,nP;function lN(){if(nP)return Iw;nP=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Iw=t,Iw}var kw,rP;function ble(){if(rP)return kw;rP=1;var n=pI(),e=Cle(),t=Pf(),r=lN(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,h=a.toString,g=s.hasOwnProperty,b=RegExp("^"+h.call(g).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B(S){if(!t(S)||e(S))return!1;var I=n(S)?b:o;return I.test(r(S))}return kw=B,kw}var Tw,iP;function xle(){if(iP)return Tw;iP=1;function n(e,t){return e==null?void 0:e[t]}return Tw=n,Tw}var Pw,oP;function Gg(){if(oP)return Pw;oP=1;var n=ble(),e=xle();function t(r,i){var o=e(r,i);return n(o)?o:void 0}return Pw=t,Pw}var Rw,sP;function yI(){if(sP)return Rw;sP=1;var n=Gg(),e=pp(),t=n(e,"Map");return Rw=t,Rw}var Kw,aP;function n3(){if(aP)return Kw;aP=1;var n=Gg(),e=n(Object,"create");return Kw=e,Kw}var Dw,lP;function wle(){if(lP)return Dw;lP=1;var n=n3();function e(){this.__data__=n?n(null):{},this.size=0}return Dw=e,Dw}var Lw,uP;function Mle(){if(uP)return Lw;uP=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Lw=n,Lw}var Fw,AP;function Sle(){if(AP)return Fw;AP=1;var n=n3(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(o){var a=this.__data__;if(n){var s=a[o];return s===e?void 0:s}return r.call(a,o)?a[o]:void 0}return Fw=i,Fw}var Uw,cP;function Ele(){if(cP)return Uw;cP=1;var n=n3(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var o=this.__data__;return n?o[i]!==void 0:t.call(o,i)}return Uw=r,Uw}var zw,hP;function Ble(){if(hP)return zw;hP=1;var n=n3(),e="__lodash_hash_undefined__";function t(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=n&&i===void 0?e:i,this}return zw=t,zw}var jw,dP;function Ole(){if(dP)return jw;dP=1;var n=wle(),e=Mle(),t=Sle(),r=Ele(),i=Ble();function o(a){var s=-1,h=a==null?0:a.length;for(this.clear();++s<h;){var g=a[s];this.set(g[0],g[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,jw=o,jw}var Nw,fP;function Ile(){if(fP)return Nw;fP=1;var n=Ole(),e=t3(),t=yI();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Nw=r,Nw}var Gw,pP;function kle(){if(pP)return Gw;pP=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Gw=n,Gw}var Ww,mP;function r3(){if(mP)return Ww;mP=1;var n=kle();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Ww=e,Ww}var Qw,gP;function Tle(){if(gP)return Qw;gP=1;var n=r3();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return Qw=e,Qw}var qw,yP;function Ple(){if(yP)return qw;yP=1;var n=r3();function e(t){return n(this,t).get(t)}return qw=e,qw}var Yw,vP;function Rle(){if(vP)return Yw;vP=1;var n=r3();function e(t){return n(this,t).has(t)}return Yw=e,Yw}var $w,_P;function Kle(){if(_P)return $w;_P=1;var n=r3();function e(t,r){var i=n(this,t),o=i.size;return i.set(t,r),this.size+=i.size==o?0:1,this}return $w=e,$w}var Vw,CP;function vI(){if(CP)return Vw;CP=1;var n=Ile(),e=Tle(),t=Ple(),r=Rle(),i=Kle();function o(a){var s=-1,h=a==null?0:a.length;for(this.clear();++s<h;){var g=a[s];this.set(g[0],g[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,Vw=o,Vw}var Hw,bP;function Dle(){if(bP)return Hw;bP=1;var n=t3(),e=yI(),t=vI(),r=200;function i(o,a){var s=this.__data__;if(s instanceof n){var h=s.__data__;if(!e||h.length<r-1)return h.push([o,a]),this.size=++s.size,this;s=this.__data__=new t(h)}return s.set(o,a),this.size=s.size,this}return Hw=i,Hw}var Zw,xP;function i3(){if(xP)return Zw;xP=1;var n=t3(),e=mle(),t=gle(),r=yle(),i=vle(),o=Dle();function a(s){var h=this.__data__=new n(s);this.size=h.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,Zw=a,Zw}var Xw,wP;function Lle(){if(wP)return Xw;wP=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return Xw=e,Xw}var Jw,MP;function Fle(){if(MP)return Jw;MP=1;function n(e){return this.__data__.has(e)}return Jw=n,Jw}var eM,SP;function Ule(){if(SP)return eM;SP=1;var n=vI(),e=Lle(),t=Fle();function r(i){var o=-1,a=i==null?0:i.length;for(this.__data__=new n;++o<a;)this.add(i[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,eM=r,eM}var tM,EP;function zle(){if(EP)return tM;EP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return tM=n,tM}var nM,BP;function jle(){if(BP)return nM;BP=1;function n(e,t){return e.has(t)}return nM=n,nM}var rM,OP;function uN(){if(OP)return rM;OP=1;var n=Ule(),e=zle(),t=jle(),r=1,i=2;function o(a,s,h,g,b,B){var S=h&r,I=a.length,k=s.length;if(I!=k&&!(S&&k>I))return!1;var U=B.get(a),z=B.get(s);if(U&&z)return U==s&&z==a;var Y=-1,Q=!0,ne=h&i?new n:void 0;for(B.set(a,s),B.set(s,a);++Y<I;){var X=a[Y],q=s[Y];if(g)var J=S?g(q,X,Y,s,a,B):g(X,q,Y,a,s,B);if(J!==void 0){if(J)continue;Q=!1;break}if(ne){if(!e(s,function(N,ie){if(!t(ne,ie)&&(X===N||b(X,N,h,g,B)))return ne.push(ie)})){Q=!1;break}}else if(!(X===q||b(X,q,h,g,B))){Q=!1;break}}return B.delete(a),B.delete(s),Q}return rM=o,rM}var iM,IP;function AN(){if(IP)return iM;IP=1;var n=pp(),e=n.Uint8Array;return iM=e,iM}var oM,kP;function Nle(){if(kP)return oM;kP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,o){r[++t]=[o,i]}),r}return oM=n,oM}var sM,TP;function Gle(){if(TP)return sM;TP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return sM=n,sM}var aM,PP;function Wle(){if(PP)return aM;PP=1;var n=J_(),e=AN(),t=tC(),r=uN(),i=Nle(),o=Gle(),a=1,s=2,h="[object Boolean]",g="[object Date]",b="[object Error]",B="[object Map]",S="[object Number]",I="[object RegExp]",k="[object Set]",U="[object String]",z="[object Symbol]",Y="[object ArrayBuffer]",Q="[object DataView]",ne=n?n.prototype:void 0,X=ne?ne.valueOf:void 0;function q(J,N,ie,he,ce,we,pe){switch(ie){case Q:if(J.byteLength!=N.byteLength||J.byteOffset!=N.byteOffset)return!1;J=J.buffer,N=N.buffer;case Y:return!(J.byteLength!=N.byteLength||!we(new e(J),new e(N)));case h:case g:case S:return t(+J,+N);case b:return J.name==N.name&&J.message==N.message;case I:case U:return J==N+"";case B:var Ce=i;case k:var Pe=he&a;if(Ce||(Ce=o),J.size!=N.size&&!Pe)return!1;var de=pe.get(J);if(de)return de==N;he|=s,pe.set(J,N);var rt=r(Ce(J),Ce(N),he,ce,we,pe);return pe.delete(J),rt;case z:if(X)return X.call(J)==X.call(N)}return!1}return aM=q,aM}var lM,RP;function cN(){if(RP)return lM;RP=1;function n(e,t){for(var r=-1,i=t.length,o=e.length;++r<i;)e[o+r]=t[r];return e}return lM=n,lM}var uM,KP;function hN(){if(KP)return uM;KP=1;var n=cN(),e=Jd();function t(r,i,o){var a=i(r);return e(r)?a:n(a,o(r))}return uM=t,uM}var AM,DP;function Qle(){if(DP)return AM;DP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,o=0,a=[];++r<i;){var s=e[r];t(s,r,e)&&(a[o++]=s)}return a}return AM=n,AM}var cM,LP;function dN(){if(LP)return cM;LP=1;function n(){return[]}return cM=n,cM}var hM,FP;function _I(){if(FP)return hM;FP=1;var n=Qle(),e=dN(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(a){return a==null?[]:(a=Object(a),n(i(a),function(s){return r.call(a,s)}))}:e;return hM=o,hM}var dM,UP;function fN(){if(UP)return dM;UP=1;var n=hN(),e=_I(),t=eC();function r(i){return n(i,t,e)}return dM=r,dM}var fM,zP;function qle(){if(zP)return fM;zP=1;var n=fN(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(o,a,s,h,g,b){var B=s&e,S=n(o),I=S.length,k=n(a),U=k.length;if(I!=U&&!B)return!1;for(var z=I;z--;){var Y=S[z];if(!(B?Y in a:r.call(a,Y)))return!1}var Q=b.get(o),ne=b.get(a);if(Q&&ne)return Q==a&&ne==o;var X=!0;b.set(o,a),b.set(a,o);for(var q=B;++z<I;){Y=S[z];var J=o[Y],N=a[Y];if(h)var ie=B?h(N,J,Y,a,o,b):h(J,N,Y,o,a,b);if(!(ie===void 0?J===N||g(J,N,s,h,b):ie)){X=!1;break}q||(q=Y=="constructor")}if(X&&!q){var he=o.constructor,ce=a.constructor;he!=ce&&"constructor"in o&&"constructor"in a&&!(typeof he=="function"&&he instanceof he&&typeof ce=="function"&&ce instanceof ce)&&(X=!1)}return b.delete(o),b.delete(a),X}return fM=i,fM}var pM,jP;function Yle(){if(jP)return pM;jP=1;var n=Gg(),e=pp(),t=n(e,"DataView");return pM=t,pM}var mM,NP;function $le(){if(NP)return mM;NP=1;var n=Gg(),e=pp(),t=n(e,"Promise");return mM=t,mM}var gM,GP;function Vle(){if(GP)return gM;GP=1;var n=Gg(),e=pp(),t=n(e,"Set");return gM=t,gM}var yM,WP;function Hle(){if(WP)return yM;WP=1;var n=Gg(),e=pp(),t=n(e,"WeakMap");return yM=t,yM}var vM,QP;function o3(){if(QP)return vM;QP=1;var n=Yle(),e=yI(),t=$le(),r=Vle(),i=Hle(),o=Ng(),a=lN(),s="[object Map]",h="[object Object]",g="[object Promise]",b="[object Set]",B="[object WeakMap]",S="[object DataView]",I=a(n),k=a(e),U=a(t),z=a(r),Y=a(i),Q=o;return(n&&Q(new n(new ArrayBuffer(1)))!=S||e&&Q(new e)!=s||t&&Q(t.resolve())!=g||r&&Q(new r)!=b||i&&Q(new i)!=B)&&(Q=function(ne){var X=o(ne),q=X==h?ne.constructor:void 0,J=q?a(q):"";if(J)switch(J){case I:return S;case k:return s;case U:return g;case z:return b;case Y:return B}return X}),vM=Q,vM}var _M,qP;function Zle(){if(qP)return _M;qP=1;var n=i3(),e=uN(),t=Wle(),r=qle(),i=o3(),o=Jd(),a=Xx(),s=dI(),h=1,g="[object Arguments]",b="[object Array]",B="[object Object]",S=Object.prototype,I=S.hasOwnProperty;function k(U,z,Y,Q,ne,X){var q=o(U),J=o(z),N=q?b:i(U),ie=J?b:i(z);N=N==g?B:N,ie=ie==g?B:ie;var he=N==B,ce=ie==B,we=N==ie;if(we&&a(U)){if(!a(z))return!1;q=!0,he=!1}if(we&&!he)return X||(X=new n),q||s(U)?e(U,z,Y,Q,ne,X):t(U,z,N,Y,Q,ne,X);if(!(Y&h)){var pe=he&&I.call(U,"__wrapped__"),Ce=ce&&I.call(z,"__wrapped__");if(pe||Ce){var Pe=pe?U.value():U,de=Ce?z.value():z;return X||(X=new n),ne(Pe,de,Y,Q,X)}}return we?(X||(X=new n),r(U,z,Y,Q,ne,X)):!1}return _M=k,_M}var CM,YP;function pN(){if(YP)return CM;YP=1;var n=Zle(),e=sm();function t(r,i,o,a,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,o,a,t,s)}return CM=t,CM}var bM,$P;function Xle(){if($P)return bM;$P=1;var n=i3(),e=pN(),t=1,r=2;function i(o,a,s,h){var g=s.length,b=g,B=!h;if(o==null)return!b;for(o=Object(o);g--;){var S=s[g];if(B&&S[2]?S[1]!==o[S[0]]:!(S[0]in o))return!1}for(;++g<b;){S=s[g];var I=S[0],k=o[I],U=S[1];if(B&&S[2]){if(k===void 0&&!(I in o))return!1}else{var z=new n;if(h)var Y=h(k,U,I,o,a,z);if(!(Y===void 0?e(U,k,t|r,h,z):Y))return!1}}return!0}return bM=i,bM}var xM,VP;function mN(){if(VP)return xM;VP=1;var n=Pf();function e(t){return t===t&&!n(t)}return xM=e,xM}var wM,HP;function Jle(){if(HP)return wM;HP=1;var n=mN(),e=eC();function t(r){for(var i=e(r),o=i.length;o--;){var a=i[o],s=r[a];i[o]=[a,s,n(s)]}return i}return wM=t,wM}var MM,ZP;function gN(){if(ZP)return MM;ZP=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return MM=n,MM}var SM,XP;function eue(){if(XP)return SM;XP=1;var n=Xle(),e=Jle(),t=gN();function r(i){var o=e(i);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(a){return a===i||n(a,i,o)}}return SM=r,SM}var EM,JP;function s3(){if(JP)return EM;JP=1;var n=Ng(),e=sm(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return EM=r,EM}var BM,eR;function CI(){if(eR)return BM;eR=1;var n=Jd(),e=s3(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(n(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:r.test(o)||!t.test(o)||a!=null&&o in Object(a)}return BM=i,BM}var OM,tR;function tue(){if(tR)return OM;tR=1;var n=vI(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],h=o.cache;if(h.has(s))return h.get(s);var g=r.apply(this,a);return o.cache=h.set(s,g)||h,g};return o.cache=new(t.Cache||n),o}return t.Cache=n,OM=t,OM}var IM,nR;function nue(){if(nR)return IM;nR=1;var n=tue(),e=500;function t(r){var i=n(r,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return IM=t,IM}var kM,rR;function rue(){if(rR)return kM;rR=1;var n=nue(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,h,g){o.push(h?g.replace(t,"$1"):s||a)}),o});return kM=r,kM}var TM,iR;function iue(){if(iR)return TM;iR=1;var n=J_(),e=aN(),t=Jd(),r=s3(),i=n?n.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(t(s))return e(s,a)+"";if(r(s))return o?o.call(s):"";var h=s+"";return h=="0"&&1/s==-1/0?"-0":h}return TM=a,TM}var PM,oR;function oue(){if(oR)return PM;oR=1;var n=iue();function e(t){return t==null?"":n(t)}return PM=e,PM}var RM,sR;function yN(){if(sR)return RM;sR=1;var n=Jd(),e=CI(),t=rue(),r=oue();function i(o,a){return n(o)?o:e(o,a)?[o]:t(r(o))}return RM=i,RM}var KM,aR;function a3(){if(aR)return KM;aR=1;var n=s3();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return KM=e,KM}var DM,lR;function vN(){if(lR)return DM;lR=1;var n=yN(),e=a3();function t(r,i){i=n(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[e(i[o++])];return o&&o==a?r:void 0}return DM=t,DM}var LM,uR;function sue(){if(uR)return LM;uR=1;var n=vN();function e(t,r,i){var o=t==null?void 0:n(t,r);return o===void 0?i:o}return LM=e,LM}var FM,AR;function aue(){if(AR)return FM;AR=1;function n(e,t){return e!=null&&t in Object(e)}return FM=n,FM}var UM,cR;function lue(){if(cR)return UM;cR=1;var n=yN(),e=lI(),t=Jd(),r=uI(),i=AI(),o=a3();function a(s,h,g){h=n(h,s);for(var b=-1,B=h.length,S=!1;++b<B;){var I=o(h[b]);if(!(S=s!=null&&g(s,I)))break;s=s[I]}return S||++b!=B?S:(B=s==null?0:s.length,!!B&&i(B)&&r(I,B)&&(t(s)||e(s)))}return UM=a,UM}var zM,hR;function uue(){if(hR)return zM;hR=1;var n=aue(),e=lue();function t(r,i){return r!=null&&e(r,i,n)}return zM=t,zM}var jM,dR;function Aue(){if(dR)return jM;dR=1;var n=pN(),e=sue(),t=uue(),r=CI(),i=mN(),o=gN(),a=a3(),s=1,h=2;function g(b,B){return r(b)&&i(B)?o(a(b),B):function(S){var I=e(S,b);return I===void 0&&I===B?t(S,b):n(B,I,s|h)}}return jM=g,jM}var NM,fR;function cue(){if(fR)return NM;fR=1;function n(e){return function(t){return t==null?void 0:t[e]}}return NM=n,NM}var GM,pR;function hue(){if(pR)return GM;pR=1;var n=vN();function e(t){return function(r){return n(r,t)}}return GM=e,GM}var WM,mR;function due(){if(mR)return WM;mR=1;var n=cue(),e=hue(),t=CI(),r=a3();function i(o){return t(o)?n(r(o)):e(o)}return WM=i,WM}var QM,gR;function fue(){if(gR)return QM;gR=1;var n=eue(),e=Aue(),t=Jx(),r=Jd(),i=due();function o(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?r(a)?e(a[0],a[1]):n(a):i(a)}return QM=o,QM}var qM,yR;function pue(){if(yR)return qM;yR=1;var n=jy();function e(t,r){return function(i,o){if(i==null)return i;if(!n(i))return t(i,o);for(var a=i.length,s=r?a:-1,h=Object(i);(r?s--:++s<a)&&o(h[s],s,h)!==!1;);return i}}return qM=e,qM}var YM,vR;function _N(){if(vR)return YM;vR=1;var n=iN(),e=pue(),t=e(n);return YM=t,YM}var $M,_R;function mue(){if(_R)return $M;_R=1;var n=_N(),e=jy();function t(r,i){var o=-1,a=e(r)?Array(r.length):[];return n(r,function(s,h,g){a[++o]=i(s,h,g)}),a}return $M=t,$M}var VM,CR;function gue(){if(CR)return VM;CR=1;var n=aN(),e=fue(),t=mue(),r=Jd();function i(o,a){var s=r(o)?n:t;return s(o,e(a,3))}return VM=i,VM}var bR;function yue(){if(bR)return g1;bR=1,Object.defineProperty(g1,"__esModule",{value:!0}),g1.flattenNames=void 0;var n=rle(),e=h(n),t=mI(),r=h(t),i=sN(),o=h(i),a=gue(),s=h(a);function h(b){return b&&b.__esModule?b:{default:b}}var g=g1.flattenNames=function b(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],S=[];return(0,s.default)(B,function(I){Array.isArray(I)?b(I).map(function(k){return S.push(k)}):(0,o.default)(I)?(0,r.default)(I,function(k,U){k===!0&&S.push(U),S.push(U+"-"+k)}):(0,e.default)(I)&&S.push(I)}),S};return g1.default=g,g1}var y1={},HM,xR;function CN(){if(xR)return HM;xR=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return HM=n,HM}var ZM,wR;function bN(){if(wR)return ZM;wR=1;var n=Gg(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return ZM=e,ZM}var XM,MR;function bI(){if(MR)return XM;MR=1;var n=bN();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return XM=e,XM}var JM,SR;function xN(){if(SR)return JM;SR=1;var n=bI(),e=tC(),t=Object.prototype,r=t.hasOwnProperty;function i(o,a,s){var h=o[a];(!(r.call(o,a)&&e(h,s))||s===void 0&&!(a in o))&&n(o,a,s)}return JM=i,JM}var eS,ER;function nC(){if(ER)return eS;ER=1;var n=xN(),e=bI();function t(r,i,o,a){var s=!o;o||(o={});for(var h=-1,g=i.length;++h<g;){var b=i[h],B=a?a(o[b],r[b],b,o,r):void 0;B===void 0&&(B=r[b]),s?e(o,b,B):n(o,b,B)}return o}return eS=t,eS}var tS,BR;function vue(){if(BR)return tS;BR=1;var n=nC(),e=eC();function t(r,i){return r&&n(i,e(i),r)}return tS=t,tS}var nS,OR;function _ue(){if(OR)return nS;OR=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return nS=n,nS}var rS,IR;function Cue(){if(IR)return rS;IR=1;var n=Pf(),e=fI(),t=_ue(),r=Object.prototype,i=r.hasOwnProperty;function o(a){if(!n(a))return t(a);var s=e(a),h=[];for(var g in a)g=="constructor"&&(s||!i.call(a,g))||h.push(g);return h}return rS=o,rS}var iS,kR;function rC(){if(kR)return iS;kR=1;var n=nN(),e=Cue(),t=jy();function r(i){return t(i)?n(i,!0):e(i)}return iS=r,iS}var oS,TR;function bue(){if(TR)return oS;TR=1;var n=nC(),e=rC();function t(r,i){return r&&n(i,e(i),r)}return oS=t,oS}var Rv={exports:{}};Rv.exports;var PR;function wN(){return PR||(PR=1,function(n,e){var t=pp(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,o=i&&i.exports===r,a=o?t.Buffer:void 0,s=a?a.allocUnsafe:void 0;function h(g,b){if(b)return g.slice();var B=g.length,S=s?s(B):new g.constructor(B);return g.copy(S),S}n.exports=h}(Rv,Rv.exports)),Rv.exports}var sS,RR;function MN(){if(RR)return sS;RR=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return sS=n,sS}var aS,KR;function xue(){if(KR)return aS;KR=1;var n=nC(),e=_I();function t(r,i){return n(r,e(r),i)}return aS=t,aS}var lS,DR;function SN(){if(DR)return lS;DR=1;var n=cN(),e=gI(),t=_I(),r=dN(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)n(s,t(a)),a=e(a);return s}:r;return lS=o,lS}var uS,LR;function wue(){if(LR)return uS;LR=1;var n=nC(),e=SN();function t(r,i){return n(r,e(r),i)}return uS=t,uS}var AS,FR;function Mue(){if(FR)return AS;FR=1;var n=hN(),e=SN(),t=rC();function r(i){return n(i,t,e)}return AS=r,AS}var cS,UR;function Sue(){if(UR)return cS;UR=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return cS=t,cS}var hS,zR;function xI(){if(zR)return hS;zR=1;var n=AN();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return hS=e,hS}var dS,jR;function Eue(){if(jR)return dS;jR=1;var n=xI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return dS=e,dS}var fS,NR;function Bue(){if(NR)return fS;NR=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return fS=e,fS}var pS,GR;function Oue(){if(GR)return pS;GR=1;var n=J_(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return pS=r,pS}var mS,WR;function EN(){if(WR)return mS;WR=1;var n=xI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return mS=e,mS}var gS,QR;function Iue(){if(QR)return gS;QR=1;var n=xI(),e=Eue(),t=Bue(),r=Oue(),i=EN(),o="[object Boolean]",a="[object Date]",s="[object Map]",h="[object Number]",g="[object RegExp]",b="[object Set]",B="[object String]",S="[object Symbol]",I="[object ArrayBuffer]",k="[object DataView]",U="[object Float32Array]",z="[object Float64Array]",Y="[object Int8Array]",Q="[object Int16Array]",ne="[object Int32Array]",X="[object Uint8Array]",q="[object Uint8ClampedArray]",J="[object Uint16Array]",N="[object Uint32Array]";function ie(he,ce,we){var pe=he.constructor;switch(ce){case I:return n(he);case o:case a:return new pe(+he);case k:return e(he,we);case U:case z:case Y:case Q:case ne:case X:case q:case J:case N:return i(he,we);case s:return new pe;case h:case B:return new pe(he);case g:return t(he);case b:return new pe;case S:return r(he)}}return gS=ie,gS}var yS,qR;function kue(){if(qR)return yS;qR=1;var n=Pf(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var o=new r;return r.prototype=void 0,o}}();return yS=t,yS}var vS,YR;function BN(){if(YR)return vS;YR=1;var n=kue(),e=gI(),t=fI();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return vS=r,vS}var _S,$R;function Tue(){if($R)return _S;$R=1;var n=o3(),e=sm(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return _S=r,_S}var CS,VR;function Pue(){if(VR)return CS;VR=1;var n=Tue(),e=cI(),t=hI(),r=t&&t.isMap,i=r?e(r):n;return CS=i,CS}var bS,HR;function Rue(){if(HR)return bS;HR=1;var n=o3(),e=sm(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return bS=r,bS}var xS,ZR;function Kue(){if(ZR)return xS;ZR=1;var n=Rue(),e=cI(),t=hI(),r=t&&t.isSet,i=r?e(r):n;return xS=i,xS}var wS,XR;function Due(){if(XR)return wS;XR=1;var n=i3(),e=CN(),t=xN(),r=vue(),i=bue(),o=wN(),a=MN(),s=xue(),h=wue(),g=fN(),b=Mue(),B=o3(),S=Sue(),I=Iue(),k=BN(),U=Jd(),z=Xx(),Y=Pue(),Q=Pf(),ne=Kue(),X=eC(),q=rC(),J=1,N=2,ie=4,he="[object Arguments]",ce="[object Array]",we="[object Boolean]",pe="[object Date]",Ce="[object Error]",Pe="[object Function]",de="[object GeneratorFunction]",rt="[object Map]",ze="[object Number]",Qe="[object Object]",ut="[object RegExp]",Te="[object Set]",Ue="[object String]",st="[object Symbol]",wt="[object WeakMap]",mt="[object ArrayBuffer]",ft="[object DataView]",Ut="[object Float32Array]",Lt="[object Float64Array]",De="[object Int8Array]",ke="[object Int16Array]",Oe="[object Int32Array]",Je="[object Uint8Array]",Mt="[object Uint8ClampedArray]",gt="[object Uint16Array]",Nt="[object Uint32Array]",nn={};nn[he]=nn[ce]=nn[mt]=nn[ft]=nn[we]=nn[pe]=nn[Ut]=nn[Lt]=nn[De]=nn[ke]=nn[Oe]=nn[rt]=nn[ze]=nn[Qe]=nn[ut]=nn[Te]=nn[Ue]=nn[st]=nn[Je]=nn[Mt]=nn[gt]=nn[Nt]=!0,nn[Ce]=nn[Pe]=nn[wt]=!1;function en(Sn,Yn,Qr,cr,fr,br){var Cr,Mr=Yn&J,Qn=Yn&N,Sr=Yn&ie;if(Qr&&(Cr=fr?Qr(Sn,cr,fr,br):Qr(Sn)),Cr!==void 0)return Cr;if(!Q(Sn))return Sn;var Ge=U(Sn);if(Ge){if(Cr=S(Sn),!Mr)return a(Sn,Cr)}else{var ue=B(Sn),me=ue==Pe||ue==de;if(z(Sn))return o(Sn,Mr);if(ue==Qe||ue==he||me&&!fr){if(Cr=Qn||me?{}:k(Sn),!Mr)return Qn?h(Sn,i(Cr,Sn)):s(Sn,r(Cr,Sn))}else{if(!nn[ue])return fr?Sn:{};Cr=I(Sn,ue,Mr)}}br||(br=new n);var Xe=br.get(Sn);if(Xe)return Xe;br.set(Sn,Cr),ne(Sn)?Sn.forEach(function(it){Cr.add(en(it,Yn,Qr,it,Sn,br))}):Y(Sn)&&Sn.forEach(function(it,Kt){Cr.set(Kt,en(it,Yn,Qr,Kt,Sn,br))});var Bt=Sr?Qn?b:g:Qn?q:X,Yt=Ge?void 0:Bt(Sn);return e(Yt||Sn,function(it,Kt){Yt&&(Kt=it,it=Sn[Kt]),t(Cr,Kt,en(it,Yn,Qr,Kt,Sn,br))}),Cr}return wS=en,wS}var MS,JR;function Lue(){if(JR)return MS;JR=1;var n=Due(),e=1,t=4;function r(i){return n(i,e|t)}return MS=r,MS}var eK;function Fue(){if(eK)return y1;eK=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.mergeClasses=void 0;var n=mI(),e=o(n),t=Lue(),r=o(t),i=Object.assign||function(s){for(var h=1;h<arguments.length;h++){var g=arguments[h];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(s[b]=g[b])}return s};function o(s){return s&&s.__esModule?s:{default:s}}var a=y1.mergeClasses=function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=h.default&&(0,r.default)(h.default)||{};return g.map(function(B){var S=h[B];return S&&(0,e.default)(S,function(I,k){b[k]||(b[k]={}),b[k]=i({},b[k],S[k])}),B}),b};return y1.default=a,y1}var v1={},tK;function Uue(){if(tK)return v1;tK=1,Object.defineProperty(v1,"__esModule",{value:!0}),v1.autoprefix=void 0;var n=mI(),e=r(n),t=Object.assign||function(a){for(var s=1;s<arguments.length;s++){var h=arguments[s];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(a[g]=h[g])}return a};function r(a){return a&&a.__esModule?a:{default:a}}var i={borderRadius:function(s){return{msBorderRadius:s,MozBorderRadius:s,OBorderRadius:s,WebkitBorderRadius:s,borderRadius:s}},boxShadow:function(s){return{msBoxShadow:s,MozBoxShadow:s,OBoxShadow:s,WebkitBoxShadow:s,boxShadow:s}},userSelect:function(s){return{WebkitTouchCallout:s,KhtmlUserSelect:s,MozUserSelect:s,msUserSelect:s,WebkitUserSelect:s,userSelect:s}},flex:function(s){return{WebkitBoxFlex:s,MozBoxFlex:s,WebkitFlex:s,msFlex:s,flex:s}},flexBasis:function(s){return{WebkitFlexBasis:s,flexBasis:s}},justifyContent:function(s){return{WebkitJustifyContent:s,justifyContent:s}},transition:function(s){return{msTransition:s,MozTransition:s,OTransition:s,WebkitTransition:s,transition:s}},transform:function(s){return{msTransform:s,MozTransform:s,OTransform:s,WebkitTransform:s,transform:s}},absolute:function(s){var h=s&&s.split(" ");return{position:"absolute",top:h&&h[0],right:h&&h[1],bottom:h&&h[2],left:h&&h[3]}},extend:function(s,h){var g=h[s];return g||{extend:s}}},o=v1.autoprefix=function(s){var h={};return(0,e.default)(s,function(g,b){var B={};(0,e.default)(g,function(S,I){var k=i[I];k?B=t({},B,k(S)):B[I]=S}),h[b]=B}),h};return v1.default=o,v1}var _1={},nK;function zue(){if(nK)return _1;nK=1,Object.defineProperty(_1,"__esModule",{value:!0}),_1.hover=void 0;var n=Object.assign||function(h){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var B in b)Object.prototype.hasOwnProperty.call(b,B)&&(h[B]=b[B])}return h},e=Da(),t=r(e);function r(h){return h&&h.__esModule?h:{default:h}}function i(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function o(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function a(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var s=_1.hover=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){a(S,B);function S(){var I,k,U,z;i(this,S);for(var Y=arguments.length,Q=Array(Y),ne=0;ne<Y;ne++)Q[ne]=arguments[ne];return z=(k=(U=o(this,(I=S.__proto__||Object.getPrototypeOf(S)).call.apply(I,[this].concat(Q))),U),U.state={hover:!1},U.handleMouseOver=function(){return U.setState({hover:!0})},U.handleMouseOut=function(){return U.setState({hover:!1})},U.render=function(){return t.default.createElement(b,{onMouseOver:U.handleMouseOver,onMouseOut:U.handleMouseOut},t.default.createElement(g,n({},U.props,U.state)))},k),o(U,z)}return S}(t.default.Component)};return _1.default=s,_1}var C1={},rK;function jue(){if(rK)return C1;rK=1,Object.defineProperty(C1,"__esModule",{value:!0}),C1.active=void 0;var n=Object.assign||function(h){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var B in b)Object.prototype.hasOwnProperty.call(b,B)&&(h[B]=b[B])}return h},e=Da(),t=r(e);function r(h){return h&&h.__esModule?h:{default:h}}function i(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function o(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function a(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}var s=C1.active=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){a(S,B);function S(){var I,k,U,z;i(this,S);for(var Y=arguments.length,Q=Array(Y),ne=0;ne<Y;ne++)Q[ne]=arguments[ne];return z=(k=(U=o(this,(I=S.__proto__||Object.getPrototypeOf(S)).call.apply(I,[this].concat(Q))),U),U.state={active:!1},U.handleMouseDown=function(){return U.setState({active:!0})},U.handleMouseUp=function(){return U.setState({active:!1})},U.render=function(){return t.default.createElement(b,{onMouseDown:U.handleMouseDown,onMouseUp:U.handleMouseUp},t.default.createElement(g,n({},U.props,U.state)))},k),o(U,z)}return S}(t.default.Component)};return C1.default=s,C1}var ub={},iK;function Nue(){if(iK)return ub;iK=1,Object.defineProperty(ub,"__esModule",{value:!0});var n=function(t,r){var i={},o=function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[s]=h};return t===0&&o("first-child"),t===r-1&&o("last-child"),(t===0||t%2===0)&&o("even"),Math.abs(t%2)===1&&o("odd"),o("nth-child",t),i};return ub.default=n,ub}var oK;function mp(){if(oK)return dd;oK=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.ReactCSS=dd.loop=dd.handleActive=dd.handleHover=dd.hover=void 0;var n=yue(),e=S(n),t=Fue(),r=S(t),i=Uue(),o=S(i),a=zue(),s=S(a),h=jue(),g=S(h),b=Nue(),B=S(b);function S(k){return k&&k.__esModule?k:{default:k}}dd.hover=s.default,dd.handleHover=s.default,dd.handleActive=g.default,dd.loop=B.default;var I=dd.ReactCSS=function(U){for(var z=arguments.length,Y=Array(z>1?z-1:0),Q=1;Q<z;Q++)Y[Q-1]=arguments[Q];var ne=(0,e.default)(Y),X=(0,r.default)(U,ne);return(0,o.default)(X)};return dd.default=I,dd}var SS,sK;function ON(){if(sK)return SS;sK=1;var n=bI(),e=tC();function t(r,i,o){(o!==void 0&&!e(r[i],o)||o===void 0&&!(i in r))&&n(r,i,o)}return SS=t,SS}var ES,aK;function Gue(){if(aK)return ES;aK=1;var n=jy(),e=sm();function t(r){return e(r)&&n(r)}return ES=t,ES}var BS,lK;function IN(){if(lK)return BS;lK=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return BS=n,BS}var OS,uK;function Wue(){if(uK)return OS;uK=1;var n=nC(),e=rC();function t(r){return n(r,e(r))}return OS=t,OS}var IS,AK;function Que(){if(AK)return IS;AK=1;var n=ON(),e=wN(),t=EN(),r=MN(),i=BN(),o=lI(),a=Jd(),s=Gue(),h=Xx(),g=pI(),b=Pf(),B=sN(),S=dI(),I=IN(),k=Wue();function U(z,Y,Q,ne,X,q,J){var N=I(z,Q),ie=I(Y,Q),he=J.get(ie);if(he){n(z,Q,he);return}var ce=q?q(N,ie,Q+"",z,Y,J):void 0,we=ce===void 0;if(we){var pe=a(ie),Ce=!pe&&h(ie),Pe=!pe&&!Ce&&S(ie);ce=ie,pe||Ce||Pe?a(N)?ce=N:s(N)?ce=r(N):Ce?(we=!1,ce=e(ie,!0)):Pe?(we=!1,ce=t(ie,!0)):ce=[]:B(ie)||o(ie)?(ce=N,o(N)?ce=k(N):(!b(N)||g(N))&&(ce=i(ie))):we=!1}we&&(J.set(ie,ce),X(ce,ie,ne,q,J),J.delete(ie)),n(z,Q,ce)}return IS=U,IS}var kS,cK;function que(){if(cK)return kS;cK=1;var n=i3(),e=ON(),t=tN(),r=Que(),i=Pf(),o=rC(),a=IN();function s(h,g,b,B,S){h!==g&&t(g,function(I,k){if(S||(S=new n),i(I))r(h,g,k,b,s,B,S);else{var U=B?B(a(h,k),I,k+"",h,g,S):void 0;U===void 0&&(U=I),e(h,k,U)}},o)}return kS=s,kS}var TS,hK;function Yue(){if(hK)return TS;hK=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return TS=n,TS}var PS,dK;function $ue(){if(dK)return PS;dK=1;var n=Yue(),e=Math.max;function t(r,i,o){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,s=-1,h=e(a.length-i,0),g=Array(h);++s<h;)g[s]=a[i+s];s=-1;for(var b=Array(i+1);++s<i;)b[s]=a[s];return b[i]=o(g),n(r,this,b)}}return PS=t,PS}var RS,fK;function Vue(){if(fK)return RS;fK=1;function n(e){return function(){return e}}return RS=n,RS}var KS,pK;function Hue(){if(pK)return KS;pK=1;var n=Vue(),e=bN(),t=Jx(),r=e?function(i,o){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return KS=r,KS}var DS,mK;function Zue(){if(mK)return DS;mK=1;var n=800,e=16,t=Date.now;function r(i){var o=0,a=0;return function(){var s=t(),h=e-(s-a);if(a=s,h>0){if(++o>=n)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return DS=r,DS}var LS,gK;function Xue(){if(gK)return LS;gK=1;var n=Hue(),e=Zue(),t=e(n);return LS=t,LS}var FS,yK;function Jue(){if(yK)return FS;yK=1;var n=Jx(),e=$ue(),t=Xue();function r(i,o){return t(e(i,o,n),i+"")}return FS=r,FS}var US,vK;function eAe(){if(vK)return US;vK=1;var n=tC(),e=jy(),t=uI(),r=Pf();function i(o,a,s){if(!r(s))return!1;var h=typeof a;return(h=="number"?e(s)&&t(a,s.length):h=="string"&&a in s)?n(s[a],o):!1}return US=i,US}var zS,_K;function tAe(){if(_K)return zS;_K=1;var n=Jue(),e=eAe();function t(r){return n(function(i,o){var a=-1,s=o.length,h=s>1?o[s-1]:void 0,g=s>2?o[2]:void 0;for(h=r.length>3&&typeof h=="function"?(s--,h):void 0,g&&e(o[0],o[1],g)&&(h=s<3?void 0:h,s=1),i=Object(i);++a<s;){var b=o[a];b&&r(i,b,a,h)}return i})}return zS=t,zS}var jS,CK;function kN(){if(CK)return jS;CK=1;var n=que(),e=tAe(),t=e(function(r,i,o){n(r,i,o)});return jS=t,jS}var NS={},b1={},Ab={},bK;function nAe(){return bK||(bK=1,Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.calculateChange=function(e,t,r,i,o){var a=o.clientWidth,s=o.clientHeight,h=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,g=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,b=h-(o.getBoundingClientRect().left+window.pageXOffset),B=g-(o.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var S=void 0;if(B<0?S=0:B>s?S=1:S=Math.round(B*100/s)/100,t.a!==S)return{h:t.h,s:t.s,l:t.l,a:S,source:"rgb"}}else{var I=void 0;if(b<0?I=0:b>a?I=1:I=Math.round(b*100/a)/100,i!==I)return{h:t.h,s:t.s,l:t.l,a:I,source:"rgb"}}return null}),Ab}var x1={},pv={},xK;function rAe(){if(xK)return pv;xK=1,Object.defineProperty(pv,"__esModule",{value:!0});var n={},e=pv.render=function(r,i,o,a){if(typeof document>"u"&&!a)return null;var s=a?new a:document.createElement("canvas");s.width=o*2,s.height=o*2;var h=s.getContext("2d");return h?(h.fillStyle=r,h.fillRect(0,0,s.width,s.height),h.fillStyle=i,h.fillRect(0,0,o,o),h.translate(o,o),h.fillRect(0,0,o,o),s.toDataURL()):null};return pv.get=function(r,i,o,a){var s=r+"-"+i+"-"+o+(a?"-server":"");if(n[s])return n[s];var h=e(r,i,o,a);return n[s]=h,h},pv}var wK;function wI(){if(wK)return x1;wK=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.Checkboard=void 0;var n=Object.assign||function(b){for(var B=1;B<arguments.length;B++){var S=arguments[B];for(var I in S)Object.prototype.hasOwnProperty.call(S,I)&&(b[I]=S[I])}return b},e=Da(),t=h(e),r=mp(),i=h(r),o=rAe(),a=s(o);function s(b){if(b&&b.__esModule)return b;var B={};if(b!=null)for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(B[S]=b[S]);return B.default=b,B}function h(b){return b&&b.__esModule?b:{default:b}}var g=x1.Checkboard=function(B){var S=B.white,I=B.grey,k=B.size,U=B.renderers,z=B.borderRadius,Y=B.boxShadow,Q=B.children,ne=(0,i.default)({default:{grid:{borderRadius:z,boxShadow:Y,absolute:"0px 0px 0px 0px",background:"url("+a.get(S,I,k,U.canvas)+") center left"}}});return(0,e.isValidElement)(Q)?t.default.cloneElement(Q,n({},Q.props,{style:n({},Q.props.style,ne.grid)})):t.default.createElement("div",{style:ne.grid})};return g.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},x1.default=g,x1}var MK;function iAe(){if(MK)return b1;MK=1,Object.defineProperty(b1,"__esModule",{value:!0}),b1.Alpha=void 0;var n=Object.assign||function(z){for(var Y=1;Y<arguments.length;Y++){var Q=arguments[Y];for(var ne in Q)Object.prototype.hasOwnProperty.call(Q,ne)&&(z[ne]=Q[ne])}return z},e=function(){function z(Y,Q){for(var ne=0;ne<Q.length;ne++){var X=Q[ne];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(Y,X.key,X)}}return function(Y,Q,ne){return Q&&z(Y.prototype,Q),ne&&z(Y,ne),Y}}(),t=Da(),r=B(t),i=mp(),o=B(i),a=nAe(),s=b(a),h=wI(),g=B(h);function b(z){if(z&&z.__esModule)return z;var Y={};if(z!=null)for(var Q in z)Object.prototype.hasOwnProperty.call(z,Q)&&(Y[Q]=z[Q]);return Y.default=z,Y}function B(z){return z&&z.__esModule?z:{default:z}}function S(z,Y){if(!(z instanceof Y))throw new TypeError("Cannot call a class as a function")}function I(z,Y){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:z}function k(z,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(z,Y):z.__proto__=Y)}var U=b1.Alpha=function(z){k(Y,z);function Y(){var Q,ne,X,q;S(this,Y);for(var J=arguments.length,N=Array(J),ie=0;ie<J;ie++)N[ie]=arguments[ie];return q=(ne=(X=I(this,(Q=Y.__proto__||Object.getPrototypeOf(Y)).call.apply(Q,[this].concat(N))),X),X.handleChange=function(he){var ce=s.calculateChange(he,X.props.hsl,X.props.direction,X.props.a,X.container);ce&&typeof X.props.onChange=="function"&&X.props.onChange(ce,he)},X.handleMouseDown=function(he){X.handleChange(he),window.addEventListener("mousemove",X.handleChange),window.addEventListener("mouseup",X.handleMouseUp)},X.handleMouseUp=function(){X.unbindEventListeners()},X.unbindEventListeners=function(){window.removeEventListener("mousemove",X.handleChange),window.removeEventListener("mouseup",X.handleMouseUp)},ne),I(X,q)}return e(Y,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var ne=this,X=this.props.rgb,q=(0,o.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+X.r+","+X.g+","+X.b+`, 0) 0%,
           rgba(`+X.r+","+X.g+","+X.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:X.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+X.r+","+X.g+","+X.b+`, 0) 0%,
           rgba(`+X.r+","+X.g+","+X.b+", 1) 100%)"},pointer:{left:0,top:X.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:q.alpha},r.default.createElement("div",{style:q.checkboard},r.default.createElement(g.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:q.gradient}),r.default.createElement("div",{style:q.container,ref:function(N){return ne.container=N},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:q.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:q.slider}))))}}]),Y}(t.PureComponent||t.Component);return b1.default=U,b1}var w1={},SK;function oAe(){if(SK)return w1;SK=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.EditableInput=void 0;var n=function(){function Q(ne,X){for(var q=0;q<X.length;q++){var J=X[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(ne,J.key,J)}}return function(ne,X,q){return X&&Q(ne.prototype,X),q&&Q(ne,q),ne}}(),e=Da(),t=o(e),r=mp(),i=o(r);function o(Q){return Q&&Q.__esModule?Q:{default:Q}}function a(Q,ne,X){return ne in Q?Object.defineProperty(Q,ne,{value:X,enumerable:!0,configurable:!0,writable:!0}):Q[ne]=X,Q}function s(Q,ne){if(!(Q instanceof ne))throw new TypeError("Cannot call a class as a function")}function h(Q,ne){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne&&(typeof ne=="object"||typeof ne=="function")?ne:Q}function g(Q,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ne);Q.prototype=Object.create(ne&&ne.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),ne&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,ne):Q.__proto__=ne)}var b=1,B=38,S=40,I=[B,S],k=function(ne){return I.indexOf(ne)>-1},U=function(ne){return Number(String(ne).replace(/%/g,""))},z=1,Y=w1.EditableInput=function(Q){g(ne,Q);function ne(X){s(this,ne);var q=h(this,(ne.__proto__||Object.getPrototypeOf(ne)).call(this));return q.handleBlur=function(){q.state.blurValue&&q.setState({value:q.state.blurValue,blurValue:null})},q.handleChange=function(J){q.setUpdatedValue(J.target.value,J)},q.handleKeyDown=function(J){var N=U(J.target.value);if(!isNaN(N)&&k(J.keyCode)){var ie=q.getArrowOffset(),he=J.keyCode===B?N+ie:N-ie;q.setUpdatedValue(he,J)}},q.handleDrag=function(J){if(q.props.dragLabel){var N=Math.round(q.props.value+J.movementX);N>=0&&N<=q.props.dragMax&&q.props.onChange&&q.props.onChange(q.getValueObjectWithLabel(N),J)}},q.handleMouseDown=function(J){q.props.dragLabel&&(J.preventDefault(),q.handleDrag(J),window.addEventListener("mousemove",q.handleDrag),window.addEventListener("mouseup",q.handleMouseUp))},q.handleMouseUp=function(){q.unbindEventListeners()},q.unbindEventListeners=function(){window.removeEventListener("mousemove",q.handleDrag),window.removeEventListener("mouseup",q.handleMouseUp)},q.state={value:String(X.value).toUpperCase(),blurValue:String(X.value).toUpperCase()},q.inputId="rc-editable-input-"+z++,q}return n(ne,[{key:"componentDidUpdate",value:function(q,J){this.props.value!==this.state.value&&(q.value!==this.props.value||J.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(q){return a({},this.props.label,q)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||b}},{key:"setUpdatedValue",value:function(q,J){var N=this.props.label?this.getValueObjectWithLabel(q):q;this.props.onChange&&this.props.onChange(N,J),this.setState({value:q})}},{key:"render",value:function(){var q=this,J=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:J.wrap},t.default.createElement("input",{id:this.inputId,style:J.input,ref:function(ie){return q.input=ie},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:J.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),ne}(e.PureComponent||e.Component);return w1.default=Y,w1}var M1={},cb={},EK;function sAe(){return EK||(EK=1,Object.defineProperty(cb,"__esModule",{value:!0}),cb.calculateChange=function(e,t,r,i){var o=i.clientWidth,a=i.clientHeight,s=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,g=s-(i.getBoundingClientRect().left+window.pageXOffset),b=h-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var B=void 0;if(b<0)B=359;else if(b>a)B=0;else{var S=-(b*100/a)+100;B=360*S/100}if(r.h!==B)return{h:B,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var I=void 0;if(g<0)I=0;else if(g>o)I=359;else{var k=g*100/o;I=360*k/100}if(r.h!==I)return{h:I,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),cb}var BK;function aAe(){if(BK)return M1;BK=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.Hue=void 0;var n=function(){function I(k,U){for(var z=0;z<U.length;z++){var Y=U[z];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(k,Y.key,Y)}}return function(k,U,z){return U&&I(k.prototype,U),z&&I(k,z),k}}(),e=Da(),t=h(e),r=mp(),i=h(r),o=sAe(),a=s(o);function s(I){if(I&&I.__esModule)return I;var k={};if(I!=null)for(var U in I)Object.prototype.hasOwnProperty.call(I,U)&&(k[U]=I[U]);return k.default=I,k}function h(I){return I&&I.__esModule?I:{default:I}}function g(I,k){if(!(I instanceof k))throw new TypeError("Cannot call a class as a function")}function b(I,k){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:I}function B(I,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);I.prototype=Object.create(k&&k.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(I,k):I.__proto__=k)}var S=M1.Hue=function(I){B(k,I);function k(){var U,z,Y,Q;g(this,k);for(var ne=arguments.length,X=Array(ne),q=0;q<ne;q++)X[q]=arguments[q];return Q=(z=(Y=b(this,(U=k.__proto__||Object.getPrototypeOf(k)).call.apply(U,[this].concat(X))),Y),Y.handleChange=function(J){var N=a.calculateChange(J,Y.props.direction,Y.props.hsl,Y.container);N&&typeof Y.props.onChange=="function"&&Y.props.onChange(N,J)},Y.handleMouseDown=function(J){Y.handleChange(J),window.addEventListener("mousemove",Y.handleChange),window.addEventListener("mouseup",Y.handleMouseUp)},Y.handleMouseUp=function(){Y.unbindEventListeners()},z),b(Y,Q)}return n(k,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var z=this,Y=this.props.direction,Q=Y===void 0?"horizontal":Y,ne=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:Q==="vertical"});return t.default.createElement("div",{style:ne.hue},t.default.createElement("div",{className:"hue-"+Q,style:ne.container,ref:function(q){return z.container=q},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:ne.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ne.slider}))))}}]),k}(e.PureComponent||e.Component);return M1.default=S,M1}var S1={},OK;function lAe(){if(OK)return S1;OK=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.Raised=void 0;var n=Da(),e=h(n),t=hp(),r=h(t),i=mp(),o=h(i),a=kN(),s=h(a);function h(b){return b&&b.__esModule?b:{default:b}}var g=S1.Raised=function(B){var S=B.zDepth,I=B.radius,k=B.background,U=B.children,z=B.styles,Y=z===void 0?{}:z,Q=(0,o.default)((0,s.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+S+"px "+S*4+"px rgba(0,0,0,.24)",borderRadius:I,background:k}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},Y),{"zDepth-1":S===1});return e.default.createElement("div",{style:Q.wrap},e.default.createElement("div",{style:Q.bg}),e.default.createElement("div",{style:Q.content},U))};return g.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},g.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},S1.default=g,S1}var E1={},GS,IK;function uAe(){if(IK)return GS;IK=1;var n=pp(),e=function(){return n.Date.now()};return GS=e,GS}var WS,kK;function AAe(){if(kK)return WS;kK=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return WS=e,WS}var QS,TK;function cAe(){if(TK)return QS;TK=1;var n=AAe(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return QS=t,QS}var qS,PK;function hAe(){if(PK)return qS;PK=1;var n=cAe(),e=Pf(),t=s3(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function h(g){if(typeof g=="number")return g;if(t(g))return r;if(e(g)){var b=typeof g.valueOf=="function"?g.valueOf():g;g=e(b)?b+"":b}if(typeof g!="string")return g===0?g:+g;g=n(g);var B=o.test(g);return B||a.test(g)?s(g.slice(2),B?2:8):i.test(g)?r:+g}return qS=h,qS}var YS,RK;function TN(){if(RK)return YS;RK=1;var n=Pf(),e=uAe(),t=hAe(),r="Expected a function",i=Math.max,o=Math.min;function a(s,h,g){var b,B,S,I,k,U,z=0,Y=!1,Q=!1,ne=!0;if(typeof s!="function")throw new TypeError(r);h=t(h)||0,n(g)&&(Y=!!g.leading,Q="maxWait"in g,S=Q?i(t(g.maxWait)||0,h):S,ne="trailing"in g?!!g.trailing:ne);function X(Ce){var Pe=b,de=B;return b=B=void 0,z=Ce,I=s.apply(de,Pe),I}function q(Ce){return z=Ce,k=setTimeout(ie,h),Y?X(Ce):I}function J(Ce){var Pe=Ce-U,de=Ce-z,rt=h-Pe;return Q?o(rt,S-de):rt}function N(Ce){var Pe=Ce-U,de=Ce-z;return U===void 0||Pe>=h||Pe<0||Q&&de>=S}function ie(){var Ce=e();if(N(Ce))return he(Ce);k=setTimeout(ie,J(Ce))}function he(Ce){return k=void 0,ne&&b?X(Ce):(b=B=void 0,I)}function ce(){k!==void 0&&clearTimeout(k),z=0,b=U=B=k=void 0}function we(){return k===void 0?I:he(e())}function pe(){var Ce=e(),Pe=N(Ce);if(b=arguments,B=this,U=Ce,Pe){if(k===void 0)return q(U);if(Q)return clearTimeout(k),k=setTimeout(ie,h),X(U)}return k===void 0&&(k=setTimeout(ie,h)),I}return pe.cancel=ce,pe.flush=we,pe}return YS=a,YS}var $S,KK;function dAe(){if(KK)return $S;KK=1;var n=TN(),e=Pf(),t="Expected a function";function r(i,o,a){var s=!0,h=!0;if(typeof i!="function")throw new TypeError(t);return e(a)&&(s="leading"in a?!!a.leading:s,h="trailing"in a?!!a.trailing:h),n(i,o,{leading:s,maxWait:o,trailing:h})}return $S=r,$S}var hb={},DK;function fAe(){return DK||(DK=1,Object.defineProperty(hb,"__esModule",{value:!0}),hb.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),o=i.width,a=i.height,s=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,g=s-(r.getBoundingClientRect().left+window.pageXOffset),b=h-(r.getBoundingClientRect().top+window.pageYOffset);g<0?g=0:g>o&&(g=o),b<0?b=0:b>a&&(b=a);var B=g/o,S=1-b/a;return{h:t.h,s:B,v:S,a:t.a,source:"hsv"}}),hb}var LK;function pAe(){if(LK)return E1;LK=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.Saturation=void 0;var n=function(){function U(z,Y){for(var Q=0;Q<Y.length;Q++){var ne=Y[Q];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(z,ne.key,ne)}}return function(z,Y,Q){return Y&&U(z.prototype,Y),Q&&U(z,Q),z}}(),e=Da(),t=b(e),r=mp(),i=b(r),o=dAe(),a=b(o),s=fAe(),h=g(s);function g(U){if(U&&U.__esModule)return U;var z={};if(U!=null)for(var Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&(z[Y]=U[Y]);return z.default=U,z}function b(U){return U&&U.__esModule?U:{default:U}}function B(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}function S(U,z){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:U}function I(U,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);U.prototype=Object.create(z&&z.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(U,z):U.__proto__=z)}var k=E1.Saturation=function(U){I(z,U);function z(Y){B(this,z);var Q=S(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,Y));return Q.handleChange=function(ne){typeof Q.props.onChange=="function"&&Q.throttle(Q.props.onChange,h.calculateChange(ne,Q.props.hsl,Q.container),ne)},Q.handleMouseDown=function(ne){Q.handleChange(ne);var X=Q.getContainerRenderWindow();X.addEventListener("mousemove",Q.handleChange),X.addEventListener("mouseup",Q.handleMouseUp)},Q.handleMouseUp=function(){Q.unbindEventListeners()},Q.throttle=(0,a.default)(function(ne,X,q){ne(X,q)},50),Q}return n(z,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var Q=this.container,ne=window;!ne.document.contains(Q)&&ne.parent!==ne;)ne=ne.parent;return ne}},{key:"unbindEventListeners",value:function(){var Q=this.getContainerRenderWindow();Q.removeEventListener("mousemove",this.handleChange),Q.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Q=this,ne=this.props.style||{},X=ne.color,q=ne.white,J=ne.black,N=ne.pointer,ie=ne.circle,he=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:X,white:q,black:J,pointer:N,circle:ie}},{custom:!!this.props.style});return t.default.createElement("div",{style:he.color,ref:function(we){return Q.container=we},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:he.white,className:"saturation-white"},t.default.createElement("div",{style:he.black,className:"saturation-black"}),t.default.createElement("div",{style:he.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:he.circle}))))}}]),z}(e.PureComponent||e.Component);return E1.default=k,E1}var B1={},jh={},VS,FK;function mAe(){if(FK)return VS;FK=1;var n=CN(),e=_N(),t=oN(),r=Jd();function i(o,a){var s=r(o)?n:e;return s(o,t(a))}return VS=i,VS}var HS,UK;function gAe(){return UK||(UK=1,HS=mAe()),HS}var kb={exports:{}},yAe=kb.exports,zK;function vAe(){return zK||(zK=1,function(n,e){(function(t,r){n.exports=r()})(yAe,function(){function t(De){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},t(De)}var r=/^\s+/,i=/\s+$/;function o(De,ke){if(De=De||"",ke=ke||{},De instanceof o)return De;if(!(this instanceof o))return new o(De,ke);var Oe=a(De);this._originalInput=De,this._r=Oe.r,this._g=Oe.g,this._b=Oe.b,this._a=Oe.a,this._roundA=Math.round(100*this._a)/100,this._format=ke.format||Oe.format,this._gradientType=ke.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Oe.ok}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ke=this.toRgb();return(ke.r*299+ke.g*587+ke.b*114)/1e3},getLuminance:function(){var ke=this.toRgb(),Oe,Je,Mt,gt,Nt,nn;return Oe=ke.r/255,Je=ke.g/255,Mt=ke.b/255,Oe<=.03928?gt=Oe/12.92:gt=Math.pow((Oe+.055)/1.055,2.4),Je<=.03928?Nt=Je/12.92:Nt=Math.pow((Je+.055)/1.055,2.4),Mt<=.03928?nn=Mt/12.92:nn=Math.pow((Mt+.055)/1.055,2.4),.2126*gt+.7152*Nt+.0722*nn},setAlpha:function(ke){return this._a=Pe(ke),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var ke=b(this._r,this._g,this._b);return{h:ke.h*360,s:ke.s,v:ke.v,a:this._a}},toHsvString:function(){var ke=b(this._r,this._g,this._b),Oe=Math.round(ke.h*360),Je=Math.round(ke.s*100),Mt=Math.round(ke.v*100);return this._a==1?"hsv("+Oe+", "+Je+"%, "+Mt+"%)":"hsva("+Oe+", "+Je+"%, "+Mt+"%, "+this._roundA+")"},toHsl:function(){var ke=h(this._r,this._g,this._b);return{h:ke.h*360,s:ke.s,l:ke.l,a:this._a}},toHslString:function(){var ke=h(this._r,this._g,this._b),Oe=Math.round(ke.h*360),Je=Math.round(ke.s*100),Mt=Math.round(ke.l*100);return this._a==1?"hsl("+Oe+", "+Je+"%, "+Mt+"%)":"hsla("+Oe+", "+Je+"%, "+Mt+"%, "+this._roundA+")"},toHex:function(ke){return S(this._r,this._g,this._b,ke)},toHexString:function(ke){return"#"+this.toHex(ke)},toHex8:function(ke){return I(this._r,this._g,this._b,this._a,ke)},toHex8String:function(ke){return"#"+this.toHex8(ke)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(de(this._r,255)*100)+"%",g:Math.round(de(this._g,255)*100)+"%",b:Math.round(de(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(de(this._r,255)*100)+"%, "+Math.round(de(this._g,255)*100)+"%, "+Math.round(de(this._b,255)*100)+"%)":"rgba("+Math.round(de(this._r,255)*100)+"%, "+Math.round(de(this._g,255)*100)+"%, "+Math.round(de(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:pe[S(this._r,this._g,this._b,!0)]||!1},toFilter:function(ke){var Oe="#"+k(this._r,this._g,this._b,this._a),Je=Oe,Mt=this._gradientType?"GradientType = 1, ":"";if(ke){var gt=o(ke);Je="#"+k(gt._r,gt._g,gt._b,gt._a)}return"progid:DXImageTransform.Microsoft.gradient("+Mt+"startColorstr="+Oe+",endColorstr="+Je+")"},toString:function(ke){var Oe=!!ke;ke=ke||this._format;var Je=!1,Mt=this._a<1&&this._a>=0,gt=!Oe&&Mt&&(ke==="hex"||ke==="hex6"||ke==="hex3"||ke==="hex4"||ke==="hex8"||ke==="name");return gt?ke==="name"&&this._a===0?this.toName():this.toRgbString():(ke==="rgb"&&(Je=this.toRgbString()),ke==="prgb"&&(Je=this.toPercentageRgbString()),(ke==="hex"||ke==="hex6")&&(Je=this.toHexString()),ke==="hex3"&&(Je=this.toHexString(!0)),ke==="hex4"&&(Je=this.toHex8String(!0)),ke==="hex8"&&(Je=this.toHex8String()),ke==="name"&&(Je=this.toName()),ke==="hsl"&&(Je=this.toHslString()),ke==="hsv"&&(Je=this.toHsvString()),Je||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(ke,Oe){var Je=ke.apply(null,[this].concat([].slice.call(Oe)));return this._r=Je._r,this._g=Je._g,this._b=Je._b,this.setAlpha(Je._a),this},lighten:function(){return this._applyModification(Q,arguments)},brighten:function(){return this._applyModification(ne,arguments)},darken:function(){return this._applyModification(X,arguments)},desaturate:function(){return this._applyModification(U,arguments)},saturate:function(){return this._applyModification(z,arguments)},greyscale:function(){return this._applyModification(Y,arguments)},spin:function(){return this._applyModification(q,arguments)},_applyCombination:function(ke,Oe){return ke.apply(null,[this].concat([].slice.call(Oe)))},analogous:function(){return this._applyCombination(he,arguments)},complement:function(){return this._applyCombination(J,arguments)},monochromatic:function(){return this._applyCombination(ce,arguments)},splitcomplement:function(){return this._applyCombination(ie,arguments)},triad:function(){return this._applyCombination(N,[3])},tetrad:function(){return this._applyCombination(N,[4])}},o.fromRatio=function(De,ke){if(t(De)=="object"){var Oe={};for(var Je in De)De.hasOwnProperty(Je)&&(Je==="a"?Oe[Je]=De[Je]:Oe[Je]=Ue(De[Je]));De=Oe}return o(De,ke)};function a(De){var ke={r:0,g:0,b:0},Oe=1,Je=null,Mt=null,gt=null,Nt=!1,nn=!1;return typeof De=="string"&&(De=Ut(De)),t(De)=="object"&&(ft(De.r)&&ft(De.g)&&ft(De.b)?(ke=s(De.r,De.g,De.b),Nt=!0,nn=String(De.r).substr(-1)==="%"?"prgb":"rgb"):ft(De.h)&&ft(De.s)&&ft(De.v)?(Je=Ue(De.s),Mt=Ue(De.v),ke=B(De.h,Je,Mt),Nt=!0,nn="hsv"):ft(De.h)&&ft(De.s)&&ft(De.l)&&(Je=Ue(De.s),gt=Ue(De.l),ke=g(De.h,Je,gt),Nt=!0,nn="hsl"),De.hasOwnProperty("a")&&(Oe=De.a)),Oe=Pe(Oe),{ok:Nt,format:De.format||nn,r:Math.min(255,Math.max(ke.r,0)),g:Math.min(255,Math.max(ke.g,0)),b:Math.min(255,Math.max(ke.b,0)),a:Oe}}function s(De,ke,Oe){return{r:de(De,255)*255,g:de(ke,255)*255,b:de(Oe,255)*255}}function h(De,ke,Oe){De=de(De,255),ke=de(ke,255),Oe=de(Oe,255);var Je=Math.max(De,ke,Oe),Mt=Math.min(De,ke,Oe),gt,Nt,nn=(Je+Mt)/2;if(Je==Mt)gt=Nt=0;else{var en=Je-Mt;switch(Nt=nn>.5?en/(2-Je-Mt):en/(Je+Mt),Je){case De:gt=(ke-Oe)/en+(ke<Oe?6:0);break;case ke:gt=(Oe-De)/en+2;break;case Oe:gt=(De-ke)/en+4;break}gt/=6}return{h:gt,s:Nt,l:nn}}function g(De,ke,Oe){var Je,Mt,gt;De=de(De,360),ke=de(ke,100),Oe=de(Oe,100);function Nt(Sn,Yn,Qr){return Qr<0&&(Qr+=1),Qr>1&&(Qr-=1),Qr<1/6?Sn+(Yn-Sn)*6*Qr:Qr<1/2?Yn:Qr<2/3?Sn+(Yn-Sn)*(2/3-Qr)*6:Sn}if(ke===0)Je=Mt=gt=Oe;else{var nn=Oe<.5?Oe*(1+ke):Oe+ke-Oe*ke,en=2*Oe-nn;Je=Nt(en,nn,De+1/3),Mt=Nt(en,nn,De),gt=Nt(en,nn,De-1/3)}return{r:Je*255,g:Mt*255,b:gt*255}}function b(De,ke,Oe){De=de(De,255),ke=de(ke,255),Oe=de(Oe,255);var Je=Math.max(De,ke,Oe),Mt=Math.min(De,ke,Oe),gt,Nt,nn=Je,en=Je-Mt;if(Nt=Je===0?0:en/Je,Je==Mt)gt=0;else{switch(Je){case De:gt=(ke-Oe)/en+(ke<Oe?6:0);break;case ke:gt=(Oe-De)/en+2;break;case Oe:gt=(De-ke)/en+4;break}gt/=6}return{h:gt,s:Nt,v:nn}}function B(De,ke,Oe){De=de(De,360)*6,ke=de(ke,100),Oe=de(Oe,100);var Je=Math.floor(De),Mt=De-Je,gt=Oe*(1-ke),Nt=Oe*(1-Mt*ke),nn=Oe*(1-(1-Mt)*ke),en=Je%6,Sn=[Oe,Nt,gt,gt,nn,Oe][en],Yn=[nn,Oe,Oe,Nt,gt,gt][en],Qr=[gt,gt,nn,Oe,Oe,Nt][en];return{r:Sn*255,g:Yn*255,b:Qr*255}}function S(De,ke,Oe,Je){var Mt=[Te(Math.round(De).toString(16)),Te(Math.round(ke).toString(16)),Te(Math.round(Oe).toString(16))];return Je&&Mt[0].charAt(0)==Mt[0].charAt(1)&&Mt[1].charAt(0)==Mt[1].charAt(1)&&Mt[2].charAt(0)==Mt[2].charAt(1)?Mt[0].charAt(0)+Mt[1].charAt(0)+Mt[2].charAt(0):Mt.join("")}function I(De,ke,Oe,Je,Mt){var gt=[Te(Math.round(De).toString(16)),Te(Math.round(ke).toString(16)),Te(Math.round(Oe).toString(16)),Te(st(Je))];return Mt&&gt[0].charAt(0)==gt[0].charAt(1)&&gt[1].charAt(0)==gt[1].charAt(1)&&gt[2].charAt(0)==gt[2].charAt(1)&&gt[3].charAt(0)==gt[3].charAt(1)?gt[0].charAt(0)+gt[1].charAt(0)+gt[2].charAt(0)+gt[3].charAt(0):gt.join("")}function k(De,ke,Oe,Je){var Mt=[Te(st(Je)),Te(Math.round(De).toString(16)),Te(Math.round(ke).toString(16)),Te(Math.round(Oe).toString(16))];return Mt.join("")}o.equals=function(De,ke){return!De||!ke?!1:o(De).toRgbString()==o(ke).toRgbString()},o.random=function(){return o.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function U(De,ke){ke=ke===0?0:ke||10;var Oe=o(De).toHsl();return Oe.s-=ke/100,Oe.s=rt(Oe.s),o(Oe)}function z(De,ke){ke=ke===0?0:ke||10;var Oe=o(De).toHsl();return Oe.s+=ke/100,Oe.s=rt(Oe.s),o(Oe)}function Y(De){return o(De).desaturate(100)}function Q(De,ke){ke=ke===0?0:ke||10;var Oe=o(De).toHsl();return Oe.l+=ke/100,Oe.l=rt(Oe.l),o(Oe)}function ne(De,ke){ke=ke===0?0:ke||10;var Oe=o(De).toRgb();return Oe.r=Math.max(0,Math.min(255,Oe.r-Math.round(255*-(ke/100)))),Oe.g=Math.max(0,Math.min(255,Oe.g-Math.round(255*-(ke/100)))),Oe.b=Math.max(0,Math.min(255,Oe.b-Math.round(255*-(ke/100)))),o(Oe)}function X(De,ke){ke=ke===0?0:ke||10;var Oe=o(De).toHsl();return Oe.l-=ke/100,Oe.l=rt(Oe.l),o(Oe)}function q(De,ke){var Oe=o(De).toHsl(),Je=(Oe.h+ke)%360;return Oe.h=Je<0?360+Je:Je,o(Oe)}function J(De){var ke=o(De).toHsl();return ke.h=(ke.h+180)%360,o(ke)}function N(De,ke){if(isNaN(ke)||ke<=0)throw new Error("Argument to polyad must be a positive number");for(var Oe=o(De).toHsl(),Je=[o(De)],Mt=360/ke,gt=1;gt<ke;gt++)Je.push(o({h:(Oe.h+gt*Mt)%360,s:Oe.s,l:Oe.l}));return Je}function ie(De){var ke=o(De).toHsl(),Oe=ke.h;return[o(De),o({h:(Oe+72)%360,s:ke.s,l:ke.l}),o({h:(Oe+216)%360,s:ke.s,l:ke.l})]}function he(De,ke,Oe){ke=ke||6,Oe=Oe||30;var Je=o(De).toHsl(),Mt=360/Oe,gt=[o(De)];for(Je.h=(Je.h-(Mt*ke>>1)+720)%360;--ke;)Je.h=(Je.h+Mt)%360,gt.push(o(Je));return gt}function ce(De,ke){ke=ke||6;for(var Oe=o(De).toHsv(),Je=Oe.h,Mt=Oe.s,gt=Oe.v,Nt=[],nn=1/ke;ke--;)Nt.push(o({h:Je,s:Mt,v:gt})),gt=(gt+nn)%1;return Nt}o.mix=function(De,ke,Oe){Oe=Oe===0?0:Oe||50;var Je=o(De).toRgb(),Mt=o(ke).toRgb(),gt=Oe/100,Nt={r:(Mt.r-Je.r)*gt+Je.r,g:(Mt.g-Je.g)*gt+Je.g,b:(Mt.b-Je.b)*gt+Je.b,a:(Mt.a-Je.a)*gt+Je.a};return o(Nt)},o.readability=function(De,ke){var Oe=o(De),Je=o(ke);return(Math.max(Oe.getLuminance(),Je.getLuminance())+.05)/(Math.min(Oe.getLuminance(),Je.getLuminance())+.05)},o.isReadable=function(De,ke,Oe){var Je=o.readability(De,ke),Mt,gt;switch(gt=!1,Mt=Lt(Oe),Mt.level+Mt.size){case"AAsmall":case"AAAlarge":gt=Je>=4.5;break;case"AAlarge":gt=Je>=3;break;case"AAAsmall":gt=Je>=7;break}return gt},o.mostReadable=function(De,ke,Oe){var Je=null,Mt=0,gt,Nt,nn,en;Oe=Oe||{},Nt=Oe.includeFallbackColors,nn=Oe.level,en=Oe.size;for(var Sn=0;Sn<ke.length;Sn++)gt=o.readability(De,ke[Sn]),gt>Mt&&(Mt=gt,Je=o(ke[Sn]));return o.isReadable(De,Je,{level:nn,size:en})||!Nt?Je:(Oe.includeFallbackColors=!1,o.mostReadable(De,["#fff","#000"],Oe))};var we=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},pe=o.hexNames=Ce(we);function Ce(De){var ke={};for(var Oe in De)De.hasOwnProperty(Oe)&&(ke[De[Oe]]=Oe);return ke}function Pe(De){return De=parseFloat(De),(isNaN(De)||De<0||De>1)&&(De=1),De}function de(De,ke){Qe(De)&&(De="100%");var Oe=ut(De);return De=Math.min(ke,Math.max(0,parseFloat(De))),Oe&&(De=parseInt(De*ke,10)/100),Math.abs(De-ke)<1e-6?1:De%ke/parseFloat(ke)}function rt(De){return Math.min(1,Math.max(0,De))}function ze(De){return parseInt(De,16)}function Qe(De){return typeof De=="string"&&De.indexOf(".")!=-1&&parseFloat(De)===1}function ut(De){return typeof De=="string"&&De.indexOf("%")!=-1}function Te(De){return De.length==1?"0"+De:""+De}function Ue(De){return De<=1&&(De=De*100+"%"),De}function st(De){return Math.round(parseFloat(De)*255).toString(16)}function wt(De){return ze(De)/255}var mt=function(){var De="[-\\+]?\\d+%?",ke="[-\\+]?\\d*\\.\\d+%?",Oe="(?:"+ke+")|(?:"+De+")",Je="[\\s|\\(]+("+Oe+")[,|\\s]+("+Oe+")[,|\\s]+("+Oe+")\\s*\\)?",Mt="[\\s|\\(]+("+Oe+")[,|\\s]+("+Oe+")[,|\\s]+("+Oe+")[,|\\s]+("+Oe+")\\s*\\)?";return{CSS_UNIT:new RegExp(Oe),rgb:new RegExp("rgb"+Je),rgba:new RegExp("rgba"+Mt),hsl:new RegExp("hsl"+Je),hsla:new RegExp("hsla"+Mt),hsv:new RegExp("hsv"+Je),hsva:new RegExp("hsva"+Mt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ft(De){return!!mt.CSS_UNIT.exec(De)}function Ut(De){De=De.replace(r,"").replace(i,"").toLowerCase();var ke=!1;if(we[De])De=we[De],ke=!0;else if(De=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Oe;return(Oe=mt.rgb.exec(De))?{r:Oe[1],g:Oe[2],b:Oe[3]}:(Oe=mt.rgba.exec(De))?{r:Oe[1],g:Oe[2],b:Oe[3],a:Oe[4]}:(Oe=mt.hsl.exec(De))?{h:Oe[1],s:Oe[2],l:Oe[3]}:(Oe=mt.hsla.exec(De))?{h:Oe[1],s:Oe[2],l:Oe[3],a:Oe[4]}:(Oe=mt.hsv.exec(De))?{h:Oe[1],s:Oe[2],v:Oe[3]}:(Oe=mt.hsva.exec(De))?{h:Oe[1],s:Oe[2],v:Oe[3],a:Oe[4]}:(Oe=mt.hex8.exec(De))?{r:ze(Oe[1]),g:ze(Oe[2]),b:ze(Oe[3]),a:wt(Oe[4]),format:ke?"name":"hex8"}:(Oe=mt.hex6.exec(De))?{r:ze(Oe[1]),g:ze(Oe[2]),b:ze(Oe[3]),format:ke?"name":"hex"}:(Oe=mt.hex4.exec(De))?{r:ze(Oe[1]+""+Oe[1]),g:ze(Oe[2]+""+Oe[2]),b:ze(Oe[3]+""+Oe[3]),a:wt(Oe[4]+""+Oe[4]),format:ke?"name":"hex8"}:(Oe=mt.hex3.exec(De))?{r:ze(Oe[1]+""+Oe[1]),g:ze(Oe[2]+""+Oe[2]),b:ze(Oe[3]+""+Oe[3]),format:ke?"name":"hex"}:!1}function Lt(De){var ke,Oe;return De=De||{level:"AA",size:"small"},ke=(De.level||"AA").toUpperCase(),Oe=(De.size||"small").toLowerCase(),ke!=="AA"&&ke!=="AAA"&&(ke="AA"),Oe!=="small"&&Oe!=="large"&&(Oe="small"),{level:ke,size:Oe}}return o})}(kb)),kb.exports}var jK;function PN(){if(jK)return jh;jK=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.isvalidColorString=jh.red=jh.getContrastingColor=jh.isValidHex=jh.toState=jh.simpleCheckForValidColor=void 0;var n=gAe(),e=i(n),t=vAe(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}jh.simpleCheckForValidColor=function(s){var h=["r","g","b","a","h","s","l","v"],g=0,b=0;return(0,e.default)(h,function(B){if(s[B]&&(g+=1,isNaN(s[B])||(b+=1),B==="s"||B==="l")){var S=/^\d+%$/;S.test(s[B])&&(b+=1)}}),g===b?s:!1};var o=jh.toState=function(s,h){var g=s.hex?(0,r.default)(s.hex):(0,r.default)(s),b=g.toHsl(),B=g.toHsv(),S=g.toRgb(),I=g.toHex();b.s===0&&(b.h=h||0,B.h=h||0);var k=I==="000000"&&S.a===0;return{hsl:b,hex:k?"transparent":"#"+I,rgb:S,hsv:B,oldHue:s.h||h||b.h,source:s.source}};return jh.isValidHex=function(s){if(s==="transparent")return!0;var h=String(s).charAt(0)==="#"?1:0;return s.length!==4+h&&s.length<7+h&&(0,r.default)(s).isValid()},jh.getContrastingColor=function(s){if(!s)return"#fff";var h=o(s);if(h.hex==="transparent")return"rgba(0,0,0,0.4)";var g=(h.rgb.r*299+h.rgb.g*587+h.rgb.b*114)/1e3;return g>=128?"#000":"#fff"},jh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},jh.isvalidColorString=function(s,h){var g=s.replace("°","");return(0,r.default)(h+" ("+g+")")._ok},jh}var NK;function _Ae(){if(NK)return B1;NK=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.ColorWrap=void 0;var n=Object.assign||function(k){for(var U=1;U<arguments.length;U++){var z=arguments[U];for(var Y in z)Object.prototype.hasOwnProperty.call(z,Y)&&(k[Y]=z[Y])}return k},e=function(){function k(U,z){for(var Y=0;Y<z.length;Y++){var Q=z[Y];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(U,Q.key,Q)}}return function(U,z,Y){return z&&k(U.prototype,z),Y&&k(U,Y),U}}(),t=Da(),r=g(t),i=TN(),o=g(i),a=PN(),s=h(a);function h(k){if(k&&k.__esModule)return k;var U={};if(k!=null)for(var z in k)Object.prototype.hasOwnProperty.call(k,z)&&(U[z]=k[z]);return U.default=k,U}function g(k){return k&&k.__esModule?k:{default:k}}function b(k,U){if(!(k instanceof U))throw new TypeError("Cannot call a class as a function")}function B(k,U){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:k}function S(k,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);k.prototype=Object.create(U&&U.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(k,U):k.__proto__=U)}var I=B1.ColorWrap=function(U){var z=function(Y){S(Q,Y);function Q(ne){b(this,Q);var X=B(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this));return X.handleChange=function(q,J){var N=s.simpleCheckForValidColor(q);if(N){var ie=s.toState(q,q.h||X.state.oldHue);X.setState(ie),X.props.onChangeComplete&&X.debounce(X.props.onChangeComplete,ie,J),X.props.onChange&&X.props.onChange(ie,J)}},X.handleSwatchHover=function(q,J){var N=s.simpleCheckForValidColor(q);if(N){var ie=s.toState(q,q.h||X.state.oldHue);X.props.onSwatchHover&&X.props.onSwatchHover(ie,J)}},X.state=n({},s.toState(ne.color,0)),X.debounce=(0,o.default)(function(q,J,N){q(J,N)},100),X}return e(Q,[{key:"render",value:function(){var X={};return this.props.onSwatchHover&&(X.onSwatchHover=this.handleSwatchHover),r.default.createElement(U,n({},this.props,this.state,{onChange:this.handleChange},X))}}],[{key:"getDerivedStateFromProps",value:function(X,q){return n({},s.toState(X.color,q.oldHue))}}]),Q}(t.PureComponent||t.Component);return z.propTypes=n({},U.propTypes),z.defaultProps=n({},U.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),z};return B1.default=I,B1}var O1={},mv={},GK;function CAe(){if(GK)return mv;GK=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.handleFocus=void 0;var n=Object.assign||function(h){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var B in b)Object.prototype.hasOwnProperty.call(b,B)&&(h[B]=b[B])}return h},e=function(){function h(g,b){for(var B=0;B<b.length;B++){var S=b[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,b,B){return b&&h(g.prototype,b),B&&h(g,B),g}}(),t=Da(),r=i(t);function i(h){return h&&h.__esModule?h:{default:h}}function o(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function a(h,g){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:h}function s(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g)}return mv.handleFocus=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){s(S,B);function S(){var I,k,U,z;o(this,S);for(var Y=arguments.length,Q=Array(Y),ne=0;ne<Y;ne++)Q[ne]=arguments[ne];return z=(k=(U=a(this,(I=S.__proto__||Object.getPrototypeOf(S)).call.apply(I,[this].concat(Q))),U),U.state={focus:!1},U.handleFocus=function(){return U.setState({focus:!0})},U.handleBlur=function(){return U.setState({focus:!1})},k),a(U,z)}return e(S,[{key:"render",value:function(){return r.default.createElement(b,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(g,n({},this.props,this.state)))}}]),S}(r.default.Component)},mv}var WK;function bAe(){if(WK)return O1;WK=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.Swatch=void 0;var n=Object.assign||function(B){for(var S=1;S<arguments.length;S++){var I=arguments[S];for(var k in I)Object.prototype.hasOwnProperty.call(I,k)&&(B[k]=I[k])}return B},e=Da(),t=h(e),r=mp(),i=h(r),o=CAe(),a=wI(),s=h(a);function h(B){return B&&B.__esModule?B:{default:B}}var g=13,b=O1.Swatch=function(S){var I=S.color,k=S.style,U=S.onClick,z=U===void 0?function(){}:U,Y=S.onHover,Q=S.title,ne=Q===void 0?I:Q,X=S.children,q=S.focus,J=S.focusStyle,N=J===void 0?{}:J,ie=I==="transparent",he=(0,i.default)({default:{swatch:n({background:I,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},k,q?N:{})}}),ce=function(de){return z(I,de)},we=function(de){return de.keyCode===g&&z(I,de)},pe=function(de){return Y(I,de)},Ce={};return Y&&(Ce.onMouseOver=pe),t.default.createElement("div",n({style:he.swatch,onClick:ce,title:ne,tabIndex:0,onKeyDown:we},Ce),X,ie&&t.default.createElement(s.default,{borderRadius:he.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return O1.default=(0,o.handleFocus)(b),O1}var QK;function RN(){return QK||(QK=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=iAe();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return g(e).default}});var t=wI();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return g(t).default}});var r=oAe();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return g(r).default}});var i=aAe();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return g(i).default}});var o=lAe();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return g(o).default}});var a=pAe();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return g(a).default}});var s=_Ae();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return g(s).default}});var h=bAe();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return g(h).default}});function g(b){return b&&b.__esModule?b:{default:b}}}(NS)),NS}var I1={},ZS,qK;function xAe(){if(qK)return ZS;qK=1;function n(e){return e===void 0}return ZS=n,ZS}var db={},YK;function wAe(){if(YK)return db;YK=1,Object.defineProperty(db,"__esModule",{value:!0});var n=Object.assign||function(a){for(var s=1;s<arguments.length;s++){var h=arguments[s];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(a[g]=h[g])}return a},e=Da(),t=r(e);function r(a){return a&&a.__esModule?a:{default:a}}function i(a,s){var h={};for(var g in a)s.indexOf(g)>=0||Object.prototype.hasOwnProperty.call(a,g)&&(h[g]=a[g]);return h}var o=24;return db.default=function(a){var s=a.fill,h=s===void 0?"currentColor":s,g=a.width,b=g===void 0?o:g,B=a.height,S=B===void 0?o:B,I=a.style,k=I===void 0?{}:I,U=i(a,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+o+" "+o,style:n({fill:h,width:b,height:S},k)},U),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},db}var $K;function MAe(){if($K)return I1;$K=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.ChromeFields=void 0;var n=function(){function Q(ne,X){for(var q=0;q<X.length;q++){var J=X[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(ne,J.key,J)}}return function(ne,X,q){return X&&Q(ne.prototype,X),q&&Q(ne,q),ne}}(),e=Da(),t=I(e),r=mp(),i=I(r),o=PN(),a=S(o),s=xAe(),h=I(s),g=RN(),b=wAe(),B=I(b);function S(Q){if(Q&&Q.__esModule)return Q;var ne={};if(Q!=null)for(var X in Q)Object.prototype.hasOwnProperty.call(Q,X)&&(ne[X]=Q[X]);return ne.default=Q,ne}function I(Q){return Q&&Q.__esModule?Q:{default:Q}}function k(Q,ne){if(!(Q instanceof ne))throw new TypeError("Cannot call a class as a function")}function U(Q,ne){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne&&(typeof ne=="object"||typeof ne=="function")?ne:Q}function z(Q,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ne);Q.prototype=Object.create(ne&&ne.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),ne&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,ne):Q.__proto__=ne)}var Y=I1.ChromeFields=function(Q){z(ne,Q);function ne(X){k(this,ne);var q=U(this,(ne.__proto__||Object.getPrototypeOf(ne)).call(this));return q.toggleViews=function(){q.state.view==="hex"?q.setState({view:"rgb"}):q.state.view==="rgb"?q.setState({view:"hsl"}):q.state.view==="hsl"&&(q.props.hsl.a===1?q.setState({view:"hex"}):q.setState({view:"rgb"}))},q.handleChange=function(J,N){J.hex?a.isValidHex(J.hex)&&q.props.onChange({hex:J.hex,source:"hex"},N):J.r||J.g||J.b?q.props.onChange({r:J.r||q.props.rgb.r,g:J.g||q.props.rgb.g,b:J.b||q.props.rgb.b,source:"rgb"},N):J.a?(J.a<0?J.a=0:J.a>1&&(J.a=1),q.props.onChange({h:q.props.hsl.h,s:q.props.hsl.s,l:q.props.hsl.l,a:Math.round(J.a*100)/100,source:"rgb"},N)):(J.h||J.s||J.l)&&(typeof J.s=="string"&&J.s.includes("%")&&(J.s=J.s.replace("%","")),typeof J.l=="string"&&J.l.includes("%")&&(J.l=J.l.replace("%","")),J.s==1?J.s=.01:J.l==1&&(J.l=.01),q.props.onChange({h:J.h||q.props.hsl.h,s:Number((0,h.default)(J.s)?q.props.hsl.s:J.s),l:Number((0,h.default)(J.l)?q.props.hsl.l:J.l),source:"hsl"},N))},q.showHighlight=function(J){J.currentTarget.style.background="#eee"},q.hideHighlight=function(J){J.currentTarget.style.background="transparent"},X.hsl.a!==1&&X.view==="hex"?q.state={view:"rgb"}:q.state={view:X.view},q}return n(ne,[{key:"render",value:function(){var q=this,J=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),N=void 0;return this.state.view==="hex"?N=t.default.createElement("div",{style:J.fields,className:"flexbox-fix"},t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?N=t.default.createElement("div",{style:J.fields,className:"flexbox-fix"},t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:J.alpha},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(N=t.default.createElement("div",{style:J.fields,className:"flexbox-fix"},t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:J.alpha},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:J.wrap,className:"flexbox-fix"},N,t.default.createElement("div",{style:J.toggle},t.default.createElement("div",{style:J.icon,onClick:this.toggleViews,ref:function(he){return q.icon=he}},t.default.createElement(B.default,{style:J.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(q,J){return q.hsl.a!==1&&J.view==="hex"?{view:"rgb"}:null}}]),ne}(t.default.Component);return Y.defaultProps={view:"hex"},I1.default=Y,I1}var k1={},VK;function SAe(){if(VK)return k1;VK=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.ChromePointer=void 0;var n=Da(),e=i(n),t=mp(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var o=k1.ChromePointer=function(){var s=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:s.picker})};return k1.default=o,k1}var T1={},HK;function EAe(){if(HK)return T1;HK=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.ChromePointerCircle=void 0;var n=Da(),e=i(n),t=mp(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var o=T1.ChromePointerCircle=function(){var s=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:s.picker})};return T1.default=o,T1}var ZK;function BAe(){if(ZK)return m1;ZK=1,Object.defineProperty(m1,"__esModule",{value:!0}),m1.Chrome=void 0;var n=Da(),e=U(n),t=hp(),r=U(t),i=mp(),o=U(i),a=kN(),s=U(a),h=RN(),g=MAe(),b=U(g),B=SAe(),S=U(B),I=EAe(),k=U(I);function U(Y){return Y&&Y.__esModule?Y:{default:Y}}var z=m1.Chrome=function(Q){var ne=Q.width,X=Q.onChange,q=Q.disableAlpha,J=Q.rgb,N=Q.hsl,ie=Q.hsv,he=Q.hex,ce=Q.renderers,we=Q.styles,pe=we===void 0?{}:we,Ce=Q.className,Pe=Ce===void 0?"":Ce,de=Q.defaultView,rt=(0,o.default)((0,s.default)({default:{picker:{width:ne,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+J.r+", "+J.g+", "+J.b+", "+J.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},pe),{disableAlpha:q});return e.default.createElement("div",{style:rt.picker,className:"chrome-picker "+Pe},e.default.createElement("div",{style:rt.saturation},e.default.createElement(h.Saturation,{style:rt.Saturation,hsl:N,hsv:ie,pointer:k.default,onChange:X})),e.default.createElement("div",{style:rt.body},e.default.createElement("div",{style:rt.controls,className:"flexbox-fix"},e.default.createElement("div",{style:rt.color},e.default.createElement("div",{style:rt.swatch},e.default.createElement("div",{style:rt.active}),e.default.createElement(h.Checkboard,{renderers:ce}))),e.default.createElement("div",{style:rt.toggles},e.default.createElement("div",{style:rt.hue},e.default.createElement(h.Hue,{style:rt.Hue,hsl:N,pointer:S.default,onChange:X})),e.default.createElement("div",{style:rt.alpha},e.default.createElement(h.Alpha,{style:rt.Alpha,rgb:J,hsl:N,pointer:S.default,renderers:ce,onChange:X})))),e.default.createElement(b.default,{rgb:J,hsl:N,hex:he,view:de,onChange:X,disableAlpha:q})))};return z.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},z.defaultProps={width:225,disableAlpha:!1,styles:{}},m1.default=(0,h.ColorWrap)(z),m1}var OAe=BAe();const IAe=Ka(OAe);function no(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return no=function(){return a},a}no();function kAe(n){no().f[0]++;const e=(no().s[0]++,n.rgb);return no().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class KN extends Xn.Component{constructor(t){no().f[1]++,no().s[4]++;super(t);In(this,"state",(no().s[2]++,{pickerOpened:!1}));In(this,"colorInput",(no().s[3]++,null));In(this,"calcPickerOffset",(no().s[7]++,()=>{no().f[3]++;const t=(no().s[8]++,this.colorInput);if(no().s[9]++,t){no().b[0][0]++;const r=(no().s[10]++,t.getBoundingClientRect());return no().s[11]++,{top:r.top,left:r.left+196}}else return no().b[0][1]++,no().s[12]++,{top:160,left:555}}));In(this,"togglePicker",(no().s[13]++,()=>{no().f[4]++,no().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})}));no().s[5]++,this.onChangeNoCheck=DE.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(t){no().f[2]++,no().s[6]++,this.props.onChange(t)}get color(){no().f[5]++,no().s[15]++;try{return no().s[16]++,n6(this.props.value).rgb()}catch(t){return no().s[17]++,console.warn("Error parsing color: ",t),no().s[18]++,n6("rgb(255,255,255)")}}onChange(t){no().f[6]++,no().s[19]++,this.props.onChange(t===""?(no().b[1][0]++,void 0):(no().b[1][1]++,t))}render(){no().f[7]++;const t=(no().s[20]++,this.calcPickerOffset()),r=(no().s[21]++,this.color.object()),i=(no().s[22]++,{r:r.r,g:r.g,b:r.b,a:r.alpha}),o=(no().s[23]++,ae.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:t.left,top:t.top},children:[ae.jsx(IAe,{color:i,onChange:s=>(no().f[8]++,no().s[24]++,this.onChangeNoCheck(kAe(s)))}),ae.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),a=(no().s[25]++,{backgroundColor:this.props.value});return no().s[26]++,ae.jsxs("div",{className:"maputnik-color-wrapper",children:[(no().b[2][0]++,this.state.pickerOpened&&(no().b[2][1]++,o)),ae.jsx("div",{className:"maputnik-color-swatch",style:a}),ae.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:s=>(no().f[9]++,no().s[27]++,this.colorInput=s),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(no().b[3][0]++,this.props.value):(no().b[3][1]++,""),onChange:s=>(no().f[10]++,no().s[28]++,this.onChange(s.target.value))})]})}}function fn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return fn=function(){return a},a}fn();class rm extends Xn.Component{constructor(t){fn().f[0]++,fn().s[2]++;super(t);In(this,"_keyboardEvent",(fn().s[1]++,!1));In(this,"resetValue",(fn().s[26]++,()=>{if(fn().f[4]++,fn().s[27]++,this.setState({editing:!1}),fn().s[28]++,this.state.value)fn().b[16][1]++;else{fn().b[16][0]++,fn().s[29]++;return}fn().s[30]++,this.isValid(this.state.value)?fn().b[17][1]++:(fn().b[17][0]++,fn().s[31]++,this.isValid(this.props.value)?(fn().b[18][0]++,fn().s[32]++,this.changeValue(this.props.value),fn().s[33]++,this.setState({dirtyValue:this.props.value})):(fn().b[18][1]++,fn().s[34]++,this.changeValue(void 0),fn().s[35]++,this.setState({dirtyValue:void 0})))}));In(this,"onChangeRange",(fn().s[36]++,t=>{fn().f[5]++;let r=(fn().s[37]++,parseFloat(t.target.value));const i=(fn().s[38]++,this.props.rangeStep);let o=(fn().s[39]++,r);if(fn().s[40]++,i){fn().b[19][0]++;const a=(fn().s[41]++,r%i);fn().s[42]++,this._keyboardEvent?(fn().b[20][0]++,fn().s[43]++,r<+this.state.dirtyValue?(fn().b[21][0]++,fn().s[44]++,r=this.state.value-i):(fn().b[21][1]++,fn().s[45]++,r=this.state.value+i),fn().s[46]++,o=r):(fn().b[20][1]++,fn().s[47]++,a<i/2?(fn().b[22][0]++,fn().s[48]++,r=r-a):(fn().b[22][1]++,fn().s[49]++,r=r+(i-a)))}else fn().b[19][1]++;fn().s[50]++,this._keyboardEvent=!1,fn().s[51]++,r=Math.max(this.props.min,Math.min(this.props.max,r)),fn().s[52]++,this.setState({value:r,dirtyValue:o}),fn().s[53]++,this.props.onChange?(fn().b[23][0]++,fn().s[54]++,this.props.onChange(r)):fn().b[23][1]++}));fn().s[3]++,this.state={uuid:+Sy(),editing:!1,value:t.value,dirtyValue:t.value}}static getDerivedStateFromProps(t,r){return fn().f[1]++,fn().s[4]++,fn().b[1][0]++,!r.editing&&(fn().b[1][1]++,t.value!==r.value)?(fn().b[0][0]++,fn().s[5]++,{value:t.value,dirtyValue:t.value}):(fn().b[0][1]++,fn().s[6]++,null)}changeValue(t){fn().f[2]++;const r=(fn().s[7]++,fn().b[3][0]++,t===""||(fn().b[3][1]++,t===void 0)?(fn().b[2][0]++,void 0):(fn().b[2][1]++,+t)),i=(fn().s[8]++,this.props.value!==r);fn().s[9]++,fn().b[5][0]++,this.isValid(r)&&(fn().b[5][1]++,i)?(fn().b[4][0]++,fn().s[10]++,this.props.onChange?(fn().b[6][0]++,fn().s[11]++,this.props.onChange(r)):fn().b[6][1]++,fn().s[12]++,this.setState({value:r})):(fn().b[4][1]++,fn().s[13]++,fn().b[8][0]++,!this.isValid(r)&&(fn().b[8][1]++,i)?(fn().b[7][0]++,fn().s[14]++,this.setState({value:void 0})):fn().b[7][1]++),fn().s[15]++,this.setState({dirtyValue:t===""?(fn().b[9][0]++,void 0):(fn().b[9][1]++,t)})}isValid(t){if(fn().f[3]++,fn().s[16]++,t===void 0)return fn().b[10][0]++,fn().s[17]++,!0;fn().b[10][1]++;const r=(fn().s[18]++,+t);return fn().s[19]++,isNaN(r)?(fn().b[11][0]++,fn().s[20]++,!1):(fn().b[11][1]++,fn().s[21]++,fn().b[13][0]++,!isNaN(this.props.min)&&(fn().b[13][1]++,r<this.props.min)?(fn().b[12][0]++,fn().s[22]++,!1):(fn().b[12][1]++,fn().s[23]++,fn().b[15][0]++,!isNaN(this.props.max)&&(fn().b[15][1]++,r>this.props.max)?(fn().b[14][0]++,fn().s[24]++,!1):(fn().b[14][1]++,fn().s[25]++,!0)))}render(){var t,r;if(fn().f[6]++,fn().s[55]++,fn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(fn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(fn().b[25][2]++,this.props.min!==void 0)&&(fn().b[25][3]++,this.props.max!==void 0)&&(fn().b[25][4]++,this.props.allowRange)){fn().b[24][0]++;const i=(fn().s[56]++,this.state.editing?(fn().b[26][0]++,this.state.dirtyValue):(fn().b[26][1]++,this.state.value)),o=(fn().s[57]++,this.props.default===void 0?(fn().b[27][0]++,""):(fn().b[27][1]++,this.props.default));let a;return fn().s[58]++,this.state.editingRange?(fn().b[28][0]++,fn().s[59]++,a=this.state.value):(fn().b[28][1]++,fn().s[60]++,a=i),fn().s[61]++,ae.jsxs("div",{className:"maputnik-number-container",children:[ae.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:i===void 0?(fn().b[29][0]++,o):(fn().b[29][1]++,i),onChange:this.onChangeRange,onKeyDown:()=>{fn().f[7]++,fn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{fn().f[8]++,fn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{fn().f[9]++,fn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{fn().f[10]++,fn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),ae.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:(t=this.props.default)==null?void 0:t.toString(),value:a===void 0?(fn().b[30][0]++,""):(fn().b[30][1]++,a),onFocus:s=>{fn().f[11]++,fn().s[66]++,this.setState({editing:!0})},onChange:s=>{fn().f[12]++,fn().s[67]++,this.changeValue(s.target.value)},onBlur:s=>{fn().f[13]++,fn().s[68]++,this.setState({editing:!1}),fn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{fn().b[24][1]++;const i=(fn().s[70]++,this.state.editing?(fn().b[31][0]++,this.state.dirtyValue):(fn().b[31][1]++,this.state.value));return fn().s[71]++,ae.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:(r=this.props.default)==null?void 0:r.toString(),value:i===void 0?(fn().b[32][0]++,""):(fn().b[32][1]++,i),onChange:o=>(fn().f[14]++,fn().s[72]++,this.changeValue(o.target.value)),onFocus:()=>{fn().f[15]++,fn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}In(rm,"defaultProps",(fn().s[0]++,{rangeStep:1}));function Fp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Fp=function(){return a},a}Fp();class MI extends Xn.Component{constructor(){super(...arguments);In(this,"onChange",(Fp().s[1]++,()=>{Fp().f[0]++,Fp().s[2]++,this.props.onChange(!this.props.value)}))}render(){return Fp().f[1]++,Fp().s[3]++,ae.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[ae.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),ae.jsx("div",{className:"maputnik-checkbox-box",children:ae.jsx("svg",{style:{display:this.props.value?(Fp().b[0][0]++,"inline"):(Fp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:ae.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}In(MI,"defaultProps",(Fp().s[0]++,{value:!1}));function Xr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Xr=function(){return a},a}Xr();var TE;let DN=(TE=class extends Xn.Component{constructor(e){Xr().f[0]++,Xr().s[1]++,super(e),Xr().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Xr().f[1]++;const r=(Xr().s[3]++,[]),i=(Xr().s[4]++,t.initialPropsValue.slice(0));return Xr().s[5]++,Array(e.length).fill(null).map((o,a)=>{Xr().f[2]++,Xr().s[6]++,e.value[a]===t.initialPropsValue[a]?(Xr().b[0][0]++,Xr().s[7]++,r[a]=t.value[a]):(Xr().b[0][1]++,Xr().s[8]++,r[a]=t.value[a],Xr().s[9]++,i[a]=t.value[a])}),Xr().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return Xr().f[3]++,Xr().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{Xr().f[4]++;const i=(Xr().s[12]++,e[r]);return Xr().s[13]++,Xr().b[1][0]++,!(i===void 0||(Xr().b[1][1]++,i===""))})}changeValue(e,t){Xr().f[5]++;const r=(Xr().s[14]++,this.state.value.slice(0));Xr().s[15]++,r[e]=t,Xr().s[16]++,this.setState({value:r},()=>{Xr().f[6]++,Xr().s[17]++,Xr().b[3][0]++,this.isComplete(r)&&(Xr().b[3][1]++,this.props.onChange)?(Xr().b[2][0]++,Xr().s[18]++,this.props.onChange(r)):(Xr().b[2][1]++,Xr().s[19]++,this.props.onChange?(Xr().b[4][0]++,Xr().s[20]++,this.props.onChange(void 0)):Xr().b[4][1]++)})}render(){Xr().f[7]++;const{value:e}=(Xr().s[21]++,this.state),t=(Xr().s[22]++,Xr().b[5][0]++,e.length>0&&(Xr().b[5][1]++,!e.every(i=>(Xr().f[8]++,Xr().s[23]++,Xr().b[6][0]++,i===""||(Xr().b[6][1]++,i===void 0))))),r=(Xr().s[24]++,Array(this.props.length).fill(null).map((i,o)=>(Xr().f[9]++,Xr().s[25]++,this.props.type==="number"?(Xr().b[7][0]++,Xr().s[26]++,ae.jsx(rm,{default:(Xr().b[9][0]++,t||(Xr().b[9][1]++,!this.props.default)?(Xr().b[8][0]++,void 0):(Xr().b[8][1]++,this.props.default[o])),value:e[o],required:t?(Xr().b[10][0]++,!0):(Xr().b[10][1]++,!1),onChange:a=>(Xr().f[10]++,Xr().s[27]++,this.changeValue(o,a)),"aria-label":(Xr().b[11][0]++,this.props["aria-label"]||(Xr().b[11][1]++,this.props.label))},o)):(Xr().b[7][1]++,Xr().s[28]++,ae.jsx(kf,{default:(Xr().b[13][0]++,t||(Xr().b[13][1]++,!this.props.default)?(Xr().b[12][0]++,void 0):(Xr().b[12][1]++,this.props.default[o])),value:e[o],required:t?(Xr().b[14][0]++,!0):(Xr().b[14][1]++,!1),onChange:this.changeValue.bind(this,o),"aria-label":(Xr().b[15][0]++,this.props["aria-label"]||(Xr().b[15][1]++,this.props.label))},o)))));return Xr().s[29]++,ae.jsx("div",{className:"maputnik-array",children:r})}},In(TE,"defaultProps",(Xr().s[0]++,{value:[],default:[]})),TE);function tA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="c4660c9ecb80d9f1ce71e70441154e1e765b77ab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAErG;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4660c9ecb80d9f1ce71e70441154e1e765b77ab"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return tA=function(){return a},a}tA();class TAe extends Xn.Component{render(){tA().f[0]++;let e=(tA().s[0]++,this.props.options);tA().s[1]++,tA().b[1][0]++,e.length>0&&(tA().b[1][1]++,!Array.isArray(e[0]))?(tA().b[0][0]++,tA().s[2]++,e=e.map(i=>(tA().f[1]++,tA().s[3]++,[i,i]))):tA().b[0][1]++;const t=(tA().s[4]++,tA().b[2][0]++,this.props.value||(tA().b[2][1]++,e[0][0])),r=(tA().s[5]++,e.map(([i,o])=>(tA().f[2]++,tA().s[6]++,ae.jsxs("label",{className:tm("maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[ae.jsx("input",{type:"radio",name:this.props.name,onChange:a=>(tA().f[3]++,tA().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),o]},i))));return tA().s[8]++,ae.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Ll(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Ll=function(){return a},a}Ll();function PAe(n){Ll().f[0]++;let e=(Ll().s[0]++,0);return Ll().s[1]++,n.forEach(([t,r])=>{Ll().f[1]++,Ll().s[2]++,e+=r.length}),Ll().s[3]++,e}class SI extends Xn.Component{render(){Ll().f[2]++;const{options:e,value:t,onChange:r,name:i,label:o}=(Ll().s[4]++,this.props);return Ll().s[5]++,Ll().b[1][0]++,e.length<=3&&(Ll().b[1][1]++,PAe(e)<=20)?(Ll().b[0][0]++,Ll().s[6]++,ae.jsx(TAe,{name:i,options:e,value:(Ll().b[2][0]++,t||(Ll().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Ll().b[3][0]++,this.props["aria-label"]||(Ll().b[3][1]++,o))})):(Ll().b[0][1]++,Ll().s[7]++,ae.jsx(jg,{options:e,value:(Ll().b[4][0]++,t||(Ll().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Ll().b[5][0]++,this.props["aria-label"]||(Ll().b[5][1]++,o))}))}}function Ay(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Ay=function(){return a},a}Ay();class RAe extends Xn.Component{render(){Ay().f[0]++;const e=(Ay().s[0]++,this.props.t);return Ay().s[1]++,ae.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const XS=(Ay().s[2]++,$s()(RAe));function ro(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="3908e8b0136f6981013335eeedb3fda3fb571648",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,KAAK;AACV,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3908e8b0136f6981013335eeedb3fda3fb571648"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return ro=function(){return a},a}ro();function JS(n,e){if(ro().f[0]++,ro().s[0]++,n===""){ro().b[0][0]++,ro().s[1]++;return}else ro().b[0][1]++;let t;ro().s[2]++;const r=a=>{ro().f[1]++,ro().s[3]++;try{const s=(ro().s[4]++,new URL(a));return ro().s[5]++,s.protocol}catch{ro().s[6]++;return}},i=(ro().s[7]++,r(n)),o=(ro().s[8]++,window.location.protocol==="https:");return ro().s[9]++,i?(ro().b[1][1]++,ro().s[13]++,ro().b[4][0]++,i&&(ro().b[4][1]++,i==="http:")&&(ro().b[4][2]++,window.location.protocol==="https:")?(ro().b[3][0]++,ro().s[14]++,t=ae.jsx(XS,{children:ae.jsxs(M0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",ae.jsx("code",{children:"https://"})," domain"]})})):ro().b[3][1]++):(ro().b[1][0]++,ro().s[10]++,o?(ro().b[2][0]++,ro().s[11]++,t=ae.jsx(XS,{children:ae.jsxs(M0,{t:e,children:["Must provide protocol: ",ae.jsx("code",{children:"https://"})]})})):(ro().b[2][1]++,ro().s[12]++,t=ae.jsx(XS,{children:ae.jsxs(M0,{t:e,children:["Must provide protocol: ",ae.jsx("code",{children:"http://"})," or ",ae.jsx("code",{children:"https://"})]})}))),ro().s[15]++,t}class LN extends Xn.Component{constructor(t){ro().f[3]++,ro().s[17]++;super(t);In(this,"onInput",(ro().s[19]++,t=>{ro().f[4]++,ro().s[20]++,this.setState({error:JS(t,this.props.t)}),ro().s[21]++,this.props.onInput?(ro().b[5][0]++,ro().s[22]++,this.props.onInput(t)):ro().b[5][1]++}));In(this,"onChange",(ro().s[23]++,t=>{ro().f[5]++,ro().s[24]++,this.setState({error:JS(t,this.props.t)}),ro().s[25]++,this.props.onChange(t)}));ro().s[18]++,this.state={error:JS(t.value,t.t)}}render(){return ro().f[6]++,ro().s[26]++,ae.jsxs("div",{children:[ae.jsx(kf,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}In(LN,"defaultProps",(ro().s[16]++,{onInput:()=>{ro().f[2]++}}));const EI=(ro().s[27]++,$s()(LN));function zr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return zr=function(){return a},a}zr();class KAe extends Xn.Component{constructor(){super(...arguments);In(this,"addValue",(zr().s[5]++,()=>{zr().f[2]++;const t=(zr().s[6]++,this.values.slice(0));if(zr().s[7]++,this.props.type==="number")zr().b[2][0]++,zr().s[8]++,t.push(0);else if(zr().b[2][1]++,zr().s[9]++,this.props.type==="url")zr().b[3][0]++,zr().s[10]++,t.push("");else if(zr().b[3][1]++,zr().s[11]++,this.props.type==="enum"){zr().b[4][0]++;const{fieldSpec:r}=(zr().s[12]++,this.props),i=(zr().s[13]++,Object.keys(r.values)[0]);zr().s[14]++,t.push(i)}else zr().b[4][1]++,zr().s[15]++,t.push("");zr().s[16]++,this.props.onChange?(zr().b[5][0]++,zr().s[17]++,this.props.onChange(t)):zr().b[5][1]++}))}changeValue(t,r){zr().f[0]++;const i=(zr().s[0]++,this.values.slice(0));zr().s[1]++,i[t]=r,zr().s[2]++,this.props.onChange?(zr().b[0][0]++,zr().s[3]++,this.props.onChange(i)):zr().b[0][1]++}get values(){return zr().f[1]++,zr().s[4]++,zr().b[1][0]++,this.props.value||(zr().b[1][1]++,this.props.default)||(zr().b[1][2]++,[])}deleteValue(t){zr().f[3]++;const r=(zr().s[18]++,this.values.slice(0));zr().s[19]++,r.splice(t,1),zr().s[20]++,this.props.onChange?(zr().b[6][0]++,zr().s[21]++,this.props.onChange(r.length>0?(zr().b[7][0]++,r):(zr().b[7][1]++,void 0))):zr().b[6][1]++}render(){zr().f[4]++;const t=(zr().s[22]++,this.props.t),r=(zr().s[23]++,{t,i18n:this.props.i18n,tReady:this.props.tReady}),i=(zr().s[24]++,this.values.map((o,a)=>{var g;zr().f[5]++;const s=(zr().s[25]++,ae.jsx(DAe,{onClick:this.deleteValue.bind(this,a),...r}));let h;if(zr().s[26]++,this.props.type==="url")zr().b[8][0]++,zr().s[27]++,h=ae.jsx(EI,{value:o,onChange:this.changeValue.bind(this,a),"aria-label":(zr().b[9][0]++,this.props["aria-label"]||(zr().b[9][1]++,this.props.label))});else if(zr().b[8][1]++,zr().s[28]++,this.props.type==="number")zr().b[10][0]++,zr().s[29]++,h=ae.jsx(rm,{value:o,onChange:this.changeValue.bind(this,a),"aria-label":(zr().b[11][0]++,this.props["aria-label"]||(zr().b[11][1]++,this.props.label))});else if(zr().b[10][1]++,zr().s[30]++,this.props.type==="enum"){zr().b[12][0]++;const b=(zr().s[31]++,Object.keys((g=this.props.fieldSpec)==null?void 0:g.values).map(B=>(zr().f[6]++,zr().s[32]++,[B,aI(B)])));zr().s[33]++,h=ae.jsx(SI,{options:b,value:o,onChange:this.changeValue.bind(this,a),"aria-label":(zr().b[13][0]++,this.props["aria-label"]||(zr().b[13][1]++,this.props.label))})}else zr().b[12][1]++,zr().s[34]++,h=ae.jsx(kf,{value:o,onChange:this.changeValue.bind(this,a),"aria-label":(zr().b[14][0]++,this.props["aria-label"]||(zr().b[14][1]++,this.props.label))});return zr().s[35]++,ae.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[ae.jsx("div",{className:"maputnik-array-block-action",children:s}),ae.jsx("div",{className:"maputnik-array-block-content",children:h})]},a)}));return zr().s[36]++,ae.jsxs("div",{className:"maputnik-array",children:[i,ae.jsx(Ya,{className:"maputnik-array-add-value",onClick:this.addValue,children:t("Add value")})]})}}const FN=(zr().s[37]++,$s()(KAe));class DAe extends Xn.Component{render(){zr().f[7]++;const e=(zr().s[38]++,this.props.t);return zr().s[39]++,ae.jsx(Ya,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:ae.jsx(eI,{label:ae.jsx(ky,{})})})}}function ma(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return ma=function(){return a},a}ma();class UN extends Xn.Component{get values(){ma().f[0]++;const e=(ma().s[1]++,ma().b[0][0]++,this.props.value||(ma().b[0][1]++,this.props.default)||(ma().b[0][2]++,[]));return ma().s[2]++,e[e.length-1]!==""?(ma().b[1][0]++,ma().s[3]++,e.concat("")):(ma().b[1][1]++,ma().s[4]++,e)}changeFont(e,t){ma().f[1]++;const r=(ma().s[5]++,this.values.slice(0));ma().s[6]++,r[e]=t;const i=(ma().s[7]++,r.filter(o=>(ma().f[2]++,ma().s[8]++,o!==void 0)).filter(o=>(ma().f[3]++,ma().s[9]++,o!=="")));ma().s[10]++,this.props.onChange(i)}render(){ma().f[4]++;const e=(ma().s[11]++,this.values.map((t,r)=>{var i;return ma().f[5]++,ma().s[12]++,ae.jsx("li",{children:ae.jsx(zy,{"aria-label":(ma().b[2][0]++,this.props["aria-label"]||(ma().b[2][1]++,this.props.name)),value:t,options:(i=this.props.fonts)==null?void 0:i.map(o=>(ma().f[6]++,ma().s[13]++,[o,o])),onChange:this.changeFont.bind(this,r)})},r)}));return ma().s[14]++,ae.jsx("ul",{className:"maputnik-font",children:e})}}In(UN,"defaultProps",(ma().s[0]++,{fonts:[]}));function uo(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return uo=function(){return a},a}uo();const LAe=(uo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let cy=class extends Xn.Component{childNodes(){var t,r;uo().f[0]++;const e=(uo().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:(t=this.props.fieldSpec)==null?void 0:t.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:i=>(uo().f[1]++,uo().s[2]++,this.props.onChange(this.props.fieldName,i)),"aria-label":this.props["aria-label"]});switch(uo().s[3]++,(r=this.props.fieldSpec)==null?void 0:r.type){case"number":return uo().b[0][0]++,uo().s[4]++,ae.jsx(rm,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":uo().b[0][1]++;{const i=(uo().s[5]++,Object.keys((uo().b[1][0]++,this.props.fieldSpec.values||(uo().b[1][1]++,[]))).map(o=>(uo().f[2]++,uo().s[6]++,[o,aI(o)])));return uo().s[7]++,ae.jsx(SI,{...e,options:i})}case"resolvedImage":uo().b[0][2]++;case"formatted":uo().b[0][3]++;case"string":if(uo().b[0][4]++,uo().s[8]++,LAe.indexOf(this.props.fieldName)>=0){uo().b[2][0]++;const i=(uo().s[9]++,uo().b[3][0]++,this.props.fieldSpec.values||(uo().b[3][1]++,[]));return uo().s[10]++,ae.jsx(zy,{...e,options:i.map(o=>(uo().f[3]++,uo().s[11]++,[o,o]))})}else return uo().b[2][1]++,uo().s[12]++,ae.jsx(kf,{...e});case"color":return uo().b[0][5]++,uo().s[13]++,ae.jsx(KN,{...e});case"boolean":return uo().b[0][6]++,uo().s[14]++,ae.jsx(MI,{...e});case"array":return uo().b[0][7]++,uo().s[15]++,this.props.fieldName==="text-font"?(uo().b[4][0]++,uo().s[16]++,ae.jsx(UN,{...e,fonts:this.props.fieldSpec.values})):(uo().b[4][1]++,uo().s[17]++,this.props.fieldSpec.length?(uo().b[5][0]++,uo().s[18]++,ae.jsx(DN,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(uo().b[5][1]++,uo().s[19]++,ae.jsx(FN,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return uo().b[0][8]++,uo().s[20]++,null}}render(){return uo().f[4]++,uo().s[21]++,ae.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function UA(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="81a841bc0059d656029a86501c08aa823d58e2d6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:9,column:4},end:{line:9,column:17}},1:{start:{line:10,column:4},end:{line:10,column:56}},2:{start:{line:11,column:4},end:{line:13,column:6}},3:{start:{line:15,column:16},end:{line:19,column:3}},4:{start:{line:16,column:4},end:{line:18,column:7}},5:{start:{line:21,column:4},end:{line:41,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:14,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:15,column:16},end:{line:15,column:17}},loc:{start:{line:15,column:25},end:{line:19,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:42,column:3}},line:20}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:29,column:10}},type:"binary-expr",locations:[{start:{line:22,column:6},end:{line:22,column:26}},{start:{line:22,column:46},end:{line:29,column:10}}],line:22},1:{loc:{start:{line:30,column:6},end:{line:30,column:130}},type:"binary-expr",locations:[{start:{line:30,column:6},end:{line:30,column:27}},{start:{line:30,column:47},end:{line:30,column:130}}],line:30},2:{loc:{start:{line:33,column:6},end:{line:40,column:7}},type:"binary-expr",locations:[{start:{line:33,column:6},end:{line:33,column:26}},{start:{line:33,column:46},end:{line:40,column:7}}],line:33},3:{loc:{start:{line:37,column:28},end:{line:37,column:60}},type:"cond-expr",locations:[{start:{line:37,column:49},end:{line:37,column:51}},{start:{line:37,column:54},end:{line:37,column:60}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAiCW,SAGD,KAHC;AAjCX,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAY7B,qBAAqB,iBAAiB,MAAM,UAAwC;AAAA,EAClF;AAAA,EAEA,YAAa,OAAsB;AACjC,UAAM,KAAK;AACX,SAAK,WAAW,iBAAiB,iBAAiB;AAClD,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,SAAU;AACR,WAAO,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,KAAK,UAC7E;AAAA,WAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,WAAW,KAAK,MAAM;AAAA;AAAA,MACxB,GACF;AAAA,MAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,MAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,MACA,oBAAC,SAAI,WAAU,gCACZ,eAAK,MAAM,UACd;AAAA,MACC,KAAK,MAAM,aACV;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,UAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,MACxC;AAAA,OAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81a841bc0059d656029a86501c08aa823d58e2d6"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return UA=function(){return a},a}UA();class M_ extends Xn.Component{constructor(t){UA().f[0]++,UA().s[0]++;super(t);In(this,"_labelId");In(this,"onToggleDoc",(UA().s[3]++,t=>{UA().f[1]++,UA().s[4]++,this.setState({showDoc:t})}));UA().s[1]++,this._labelId=Sy("fieldset_label_"),UA().s[2]++,this.state={showDoc:!1}}render(){return UA().f[2]++,UA().s[5]++,ae.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":this._labelId,children:[(UA().b[0][0]++,this.props.fieldSpec&&(UA().b[0][1]++,ae.jsx("div",{className:"maputnik-input-block-label",children:ae.jsx(eI,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(UA().b[1][0]++,!this.props.fieldSpec&&(UA().b[1][1]++,ae.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ae.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ae.jsx("div",{className:"maputnik-input-block-content",children:this.props.children}),(UA().b[2][0]++,this.props.fieldSpec&&(UA().b[2][1]++,ae.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(UA().b[3][0]++,""):(UA().b[3][1]++,"none")},children:ae.jsx(tI,{fieldSpec:this.props.fieldSpec})})))]})}}function ta(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="adadf49dc291f98804cd53f74e320ed51f276886",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:6,column:16},end:{line:16,column:1}},1:{start:{line:7,column:15},end:{line:7,column:20}},2:{start:{line:8,column:27},end:{line:8,column:87}},3:{start:{line:9,column:17},end:{line:9,column:22}},4:{start:{line:10,column:15},end:{line:10,column:23}},5:{start:{line:11,column:23},end:{line:11,column:28}},6:{start:{line:12,column:16},end:{line:12,column:21}},7:{start:{line:13,column:16},end:{line:13,column:21}},8:{start:{line:14,column:19},end:{line:14,column:24}},9:{start:{line:15,column:17},end:{line:15,column:22}},10:{start:{line:19,column:22},end:{line:19,column:48}},11:{start:{line:20,column:24},end:{line:20,column:42}},12:{start:{line:22,column:4},end:{line:27,column:5}},13:{start:{line:23,column:6},end:{line:23,column:42}},14:{start:{line:25,column:6},end:{line:25,column:55}},15:{start:{line:26,column:6},end:{line:26,column:24}},16:{start:{line:28,column:4},end:{line:36,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:9},end:{line:7,column:10}},loc:{start:{line:7,column:15},end:{line:7,column:20}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:8,column:8},end:{line:8,column:9}},loc:{start:{line:8,column:27},end:{line:8,column:87}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:9,column:11},end:{line:9,column:12}},loc:{start:{line:9,column:17},end:{line:9,column:22}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:10,column:9},end:{line:10,column:10}},loc:{start:{line:10,column:15},end:{line:10,column:23}},line:10},4:{name:"(anonymous_4)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:23},end:{line:11,column:28}},line:11},5:{name:"(anonymous_5)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},6:{name:"(anonymous_6)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:16},end:{line:13,column:21}},line:13},7:{name:"(anonymous_7)",decl:{start:{line:14,column:13},end:{line:14,column:14}},loc:{start:{line:14,column:19},end:{line:14,column:24}},line:14},8:{name:"(anonymous_8)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:17},end:{line:15,column:22}},line:15},9:{name:"(anonymous_9)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:37,column:3}},line:18}},branchMap:{0:{loc:{start:{line:8,column:27},end:{line:8,column:87}},type:"cond-expr",locations:[{start:{line:8,column:71},end:{line:8,column:79}},{start:{line:8,column:82},end:{line:8,column:87}}],line:8},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:24,column:11},end:{line:27,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AA0CM;AA1CN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,KAAK,MAAM,WAAW;AAExC,UAAM,cAAc,QAAQ,SAAU;AAEtC,QAAI;AACJ,QAAI,aAAa;AACf,kBAAY,YAAY,KAAK,KAAK;AAAA,IACpC,OACK;AACH,cAAQ,KAAK,yBAAyB,SAAS;AAC/C,kBAAY;AAAA,IACd;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM;AAAA,QAClB,QAAQ,KAAK,MAAM;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QAEtB,8BAAC,aAAW,GAAG,KAAK,OAAO;AAAA;AAAA,IAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"adadf49dc291f98804cd53f74e320ed51f276886"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return ta=function(){return a},a}ta();const FAe=(ta().s[0]++,{color:()=>(ta().f[0]++,ta().s[1]++,ga),enum:({fieldSpec:n})=>(ta().f[1]++,ta().s[2]++,Object.keys(n.values).length<=3?(ta().b[0][0]++,M_):(ta().b[0][1]++,ga)),boolean:()=>(ta().f[2]++,ta().s[3]++,ga),array:()=>(ta().f[3]++,ta().s[4]++,M_),resolvedImage:()=>(ta().f[4]++,ta().s[5]++,ga),number:()=>(ta().f[5]++,ta().s[6]++,ga),string:()=>(ta().f[6]++,ta().s[7]++,ga),formatted:()=>(ta().f[7]++,ta().s[8]++,ga),padding:()=>(ta().f[8]++,ta().s[9]++,ga)});class UAe extends Xn.Component{render(){var i;ta().f[9]++;const e=(ta().s[10]++,(i=this.props.fieldSpec)==null?void 0:i.type),t=(ta().s[11]++,FAe[e]);let r;return ta().s[12]++,t?(ta().b[1][0]++,ta().s[13]++,r=t(this.props)):(ta().b[1][1]++,ta().s[14]++,console.warn("No such type for '%s'",e),ta().s[15]++,r=ga),ta().s[16]++,ae.jsx(r,{label:this.props.label,action:this.props.action,fieldSpec:this.props.fieldSpec,children:ae.jsx(cy,{...this.props})})}}function oh(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="e12cc9e5c91261e7ee42544334f5ab56bdde4e3a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,WAAW,WAAW,SAAS,MAAM,GAAG;AAC/D,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e12cc9e5c91261e7ee42544334f5ab56bdde4e3a"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return oh=function(){return a},a}oh();class zAe extends Xn.Component{render(){oh().f[0]++;const e=(oh().s[0]++,this.props.t);let t,r,i;return oh().s[1]++,this.props.fieldSpec.expression.parameters.includes("zoom")?(oh().b[0][0]++,oh().s[2]++,i=ae.jsx(Ya,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ae.jsx("path",{fill:"currentColor",d:w_})})}),oh().s[3]++,t=ae.jsx(Ya,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:ae.jsx(kV,{})}),oh().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(oh().b[1][0]++,oh().s[5]++,r=ae.jsx(Ya,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:ae.jsx(TV,{})})):oh().b[1][1]++,oh().s[6]++,ae.jsxs("div",{children:[i,r,t]})):(oh().b[0][1]++,oh().s[7]++,ae.jsx("div",{children:i}))}}const jAe=(oh().s[8]++,$s()(zAe));function Up(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Up=function(){return a},a}Up();class zN extends Xn.Component{render(){Up().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(Up().s[1]++,this.props),i=(Up().s[2]++,ae.jsx(jAe,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),o=(Up().s[3]++,e[r+"."+t]);return Up().s[4]++,ae.jsx(UAe,{...this.props,error:o,fieldSpec:this.props.fieldSpec,label:Zx((Up().b[0][0]++,this.props.fieldName||(Up().b[0][1]++,""))),action:i})}}In(zN,"defaultProps",(Up().s[0]++,{errors:{}}));function fd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return fd=function(){return a},a}fd();function jN(n,e){fd().f[0]++;const t=(fd().s[0]++,+n),r=(fd().s[1]++,+e);return fd().s[2]++,t<r?(fd().b[0][0]++,fd().s[3]++,-1):(fd().b[0][1]++,fd().s[4]++,t>r?(fd().b[1][0]++,fd().s[5]++,1):(fd().b[1][1]++,fd().s[6]++,0))}function tp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return tp=function(){return a},a}tp();function _f(n){if(tp().f[0]++,tp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return tp().b[0][0]++,tp().s[1]++,n.default;tp().b[0][1]++;const e=(tp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return tp().s[3]++,tp().b[1][0]++,e[n.type]||(tp().b[1][1]++,"")}function hy(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return hy=function(){return a},a}hy();class NAe extends Xn.Component{render(){hy().f[0]++;const e=(hy().s[0]++,this.props.t);return hy().s[1]++,ae.jsx(Ya,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:ae.jsx(ky,{})})}}const NN=(hy().s[2]++,$s()(NAe));function hn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return hn=function(){return a},a}hn();function XK(n,e){hn().f[0]++;let t;return hn().s[0]++,hn().b[1][0]++,n.value&&(hn().b[1][1]++,n.value.stops)?(hn().b[0][0]++,hn().s[1]++,n.value.stops.forEach((r,i)=>{hn().f[1]++,hn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?hn().b[2][1]++:(hn().b[2][0]++,hn().s[3]++,t?hn().b[3][1]++:(hn().b[3][0]++,hn().s[4]++,t={...e}),hn().s[5]++,t[i]=Sy("stop-"))})):hn().b[0][1]++,hn().s[6]++,t}class GAe extends Xn.Component{constructor(){super(...arguments);In(this,"state",(hn().s[7]++,{refs:{}}));In(this,"onChange",(hn().s[32]++,(t,r)=>{if(hn().f[11]++,hn().s[33]++,r.type==="identity")hn().b[9][0]++,hn().s[34]++,r={type:r.type,property:r.property};else{hn().b[9][1]++;const i=(hn().s[35]++,r.type==="categorical"?(hn().b[10][0]++,""):(hn().b[10][1]++,0));hn().s[36]++,r={property:"",type:r.type,stops:[[{zoom:6,value:i},_f(this.props.fieldSpec)],[{zoom:10,value:i},_f(this.props.fieldSpec)]],...r}}hn().s[37]++,this.props.onChange(t,r)}))}componentDidMount(){hn().f[2]++;const t=(hn().s[8]++,XK(this.props,this.state));hn().s[9]++,t?(hn().b[4][0]++,hn().s[10]++,this.setState({refs:t})):hn().b[4][1]++}static getDerivedStateFromProps(t,r){hn().f[3]++;const i=(hn().s[11]++,XK(t,r));return hn().s[12]++,i?(hn().b[5][0]++,hn().s[13]++,{refs:i}):(hn().b[5][1]++,hn().s[14]++,null)}getFieldFunctionType(t){return hn().f[4]++,hn().s[15]++,t.expression.interpolated?(hn().b[6][0]++,hn().s[16]++,"exponential"):(hn().b[6][1]++,hn().s[17]++,t.type==="number"?(hn().b[7][0]++,hn().s[18]++,"interval"):(hn().b[7][1]++,hn().s[19]++,"categorical"))}getDataFunctionTypes(t){return hn().f[5]++,hn().s[20]++,t.expression.interpolated?(hn().b[8][0]++,hn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(hn().b[8][1]++,hn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(t){hn().f[6]++;const r=(hn().s[23]++,t.map((o,a)=>(hn().f[7]++,hn().s[24]++,{ref:this.state.refs[a],data:o})).sort((o,a)=>(hn().f[8]++,hn().s[25]++,jN(o.data[0].zoom,a.data[0].zoom)))),i=(hn().s[26]++,{});return hn().s[27]++,r.forEach((o,a)=>{hn().f[9]++,hn().s[28]++,i[a]=o.ref}),hn().s[29]++,this.setState({refs:i}),hn().s[30]++,r.map(o=>(hn().f[10]++,hn().s[31]++,o.data))}changeStop(t,r,i){var h;hn().f[12]++;const o=(hn().s[38]++,hn().b[11][0]++,((h=this.props.value)==null?void 0:h.stops.slice(0))||(hn().b[11][1]++,[]));hn().s[39]++,o[t]=[{value:r.value,zoom:r.zoom===void 0?(hn().b[12][0]++,0):(hn().b[12][1]++,r.zoom)},i];const a=(hn().s[40]++,this.orderStopsByZoom(o)),s=(hn().s[41]++,{...this.props.value,stops:a});hn().s[42]++,this.onChange(this.props.fieldName,s)}changeBase(t){hn().f[13]++;const r=(hn().s[43]++,{...this.props.value,base:t});hn().s[44]++,r.base===void 0?(hn().b[13][0]++,hn().s[45]++,delete r.base):hn().b[13][1]++,hn().s[46]++,this.props.onChange(this.props.fieldName,r)}changeDataType(t){hn().f[14]++,hn().s[47]++,hn().b[15][0]++,t==="interpolate"&&(hn().b[15][1]++,this.props.onChangeToZoomFunction)?(hn().b[14][0]++,hn().s[48]++,this.props.onChangeToZoomFunction()):(hn().b[14][1]++,hn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:t}))}changeDataProperty(t,r){hn().f[15]++,hn().s[50]++,r?(hn().b[16][0]++,hn().s[51]++,this.props.value[t]=r):(hn().b[16][1]++,hn().s[52]++,delete this.props.value[t]),hn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){var i,o,a,s,h,g,b,B;hn().f[16]++;const t=(hn().s[54]++,this.props.t);hn().s[55]++,typeof((i=this.props.value)==null?void 0:i.type)>"u"?(hn().b[17][0]++,hn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):hn().b[17][1]++;let r;return hn().s[57]++,(o=this.props.value)!=null&&o.stops?(hn().b[18][0]++,hn().s[58]++,r=this.props.value.stops.map((S,I)=>{var J,N;hn().f[17]++;const k=(hn().s[59]++,typeof S[0]=="object"?(hn().b[19][0]++,S[0].zoom):(hn().b[19][1]++,void 0)),U=(hn().s[60]++,this.state.refs[I]),z=(hn().s[61]++,typeof S[0]=="object"?(hn().b[20][0]++,S[0].value):(hn().b[20][1]++,S[0])),Y=(hn().s[62]++,S[1]),Q=(hn().s[63]++,ae.jsx(NN,{onClick:(J=this.props.onDeleteStop)==null?void 0:J.bind(this,I)})),ne=(hn().s[64]++,{"aria-label":t("Input value"),label:t("Data value"),value:z,onChange:ie=>(hn().f[18]++,hn().s[65]++,this.changeStop(I,{zoom:k,value:ie},Y))});let X;hn().s[66]++,((N=this.props.value)==null?void 0:N.type)==="categorical"?(hn().b[21][0]++,hn().s[67]++,X=ae.jsx(kf,{...ne})):(hn().b[21][1]++,hn().s[68]++,X=ae.jsx(rm,{...ne}));let q=(hn().s[69]++,null);return hn().s[70]++,k!==void 0?(hn().b[22][0]++,hn().s[71]++,q=ae.jsx("div",{children:ae.jsx(rm,{"aria-label":"Zoom",value:k,onChange:ie=>(hn().f[19]++,hn().s[72]++,this.changeStop(I,{zoom:ie,value:z},Y)),min:0,max:22})})):hn().b[22][1]++,hn().s[73]++,ae.jsxs("tr",{children:[ae.jsx("td",{children:q}),ae.jsx("td",{children:X}),ae.jsx("td",{children:ae.jsx(cy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:Y,onChange:(ie,he)=>(hn().f[20]++,hn().s[74]++,this.changeStop(I,{zoom:k,value:z},he))})}),ae.jsx("td",{children:Q})]},U)})):hn().b[18][1]++,hn().s[75]++,ae.jsx("div",{className:"maputnik-data-spec-block",children:ae.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ae.jsx("legend",{children:Zx(this.props.fieldName)}),ae.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ae.jsx(ga,{label:t("Function"),children:ae.jsx("div",{className:"maputnik-data-spec-property-input",children:ae.jsx(jg,{value:this.props.value.type,onChange:S=>(hn().f[21]++,hn().s[76]++,this.changeDataType(S)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(hn().b[23][0]++,((a=this.props.value)==null?void 0:a.type)!=="identity"&&(hn().b[23][1]++,ae.jsx(ga,{label:t("Base"),children:ae.jsx("div",{className:"maputnik-data-spec-property-input",children:ae.jsx(cy,{fieldName:"base",fieldSpec:es.function.base,value:(s=this.props.value)==null?void 0:s.base,onChange:(S,I)=>(hn().f[22]++,hn().s[77]++,this.changeBase(I))})})},"base"))),ae.jsx(ga,{label:"Property",children:ae.jsx("div",{className:"maputnik-data-spec-property-input",children:ae.jsx(kf,{value:(h=this.props.value)==null?void 0:h.property,title:t("Input a data property to base styles off of."),onChange:S=>(hn().f[23]++,hn().s[78]++,this.changeDataProperty("property",S))})})},"property"),(hn().b[24][0]++,r&&(hn().b[24][1]++,ae.jsx(ga,{label:t("Default"),children:ae.jsx(cy,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:(g=this.props.value)==null?void 0:g.default,onChange:(S,I)=>(hn().f[24]++,hn().s[79]++,this.changeDataProperty("default",I))})},"default"))),(hn().b[25][0]++,r&&(hn().b[25][1]++,ae.jsx("div",{className:"maputnik-function-stop",children:ae.jsxs("table",{className:"maputnik-function-stop-table",children:[ae.jsx("caption",{children:t("Stops")}),ae.jsx("thead",{children:ae.jsxs("tr",{children:[ae.jsx("th",{children:t("Zoom")}),ae.jsx("th",{children:t("Input value")}),ae.jsx("th",{rowSpan:2,children:t("Output value")})]})}),ae.jsx("tbody",{children:r})]})}))),ae.jsxs("div",{className:"maputnik-toolbox",children:[(hn().b[26][0]++,r&&(hn().b[26][1]++,ae.jsxs(Ya,{className:"maputnik-add-stop",onClick:(b=this.props.onAddStop)==null?void 0:b.bind(this),children:[ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ae.jsx("path",{fill:"currentColor",d:oI})})," ",t("Add stop")]}))),ae.jsxs(Ya,{className:"maputnik-add-stop",onClick:(B=this.props.onExpressionClick)==null?void 0:B.bind(this),children:[ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ae.jsx("path",{fill:"currentColor",d:w_})})," ",t("Convert to expression")]})]})]})]})})}}const WAe=(hn().s[80]++,$s()(GAe));function _r(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return _r=function(){return a},a}_r();function JK(n,e){_r().f[0]++;let t=(_r().s[0]++,{});return _r().s[1]++,_r().b[1][0]++,n.value&&(_r().b[1][1]++,n.value.stops)?(_r().b[0][0]++,_r().s[2]++,n.value.stops.forEach((r,i)=>{_r().f[1]++,_r().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(_r().b[2][0]++,_r().s[4]++,t?_r().b[3][1]++:(_r().b[3][0]++,_r().s[5]++,t={...e}),_r().s[6]++,t[i]=Sy("stop-")):(_r().b[2][1]++,_r().s[7]++,t[i]=e.refs[i])})):_r().b[0][1]++,_r().s[8]++,t}class GN extends Xn.Component{constructor(){super(...arguments);In(this,"state",(_r().s[10]++,{refs:{}}));In(this,"changeDataType",(_r().s[36]++,t=>{_r().f[11]++,_r().s[37]++,_r().b[8][0]++,t!=="interpolate"&&(_r().b[8][1]++,this.props.onChangeToDataFunction)?(_r().b[7][0]++,_r().s[38]++,this.props.onChangeToDataFunction(t)):_r().b[7][1]++}))}componentDidMount(){_r().f[2]++;const t=(_r().s[11]++,JK(this.props,this.state));_r().s[12]++,t?(_r().b[4][0]++,_r().s[13]++,this.setState({refs:t})):_r().b[4][1]++}static getDerivedStateFromProps(t,r){_r().f[3]++;const i=(_r().s[14]++,JK(t,r));return _r().s[15]++,i?(_r().b[5][0]++,_r().s[16]++,{refs:i}):(_r().b[5][1]++,_r().s[17]++,null)}orderStopsByZoom(t){_r().f[4]++;const r=(_r().s[18]++,t.map((o,a)=>(_r().f[5]++,_r().s[19]++,{ref:this.state.refs[a],data:o})).sort((o,a)=>(_r().f[6]++,_r().s[20]++,jN(o.data[0],a.data[0])))),i=(_r().s[21]++,{});return _r().s[22]++,r.forEach((o,a)=>{_r().f[7]++,_r().s[23]++,i[a]=o.ref}),_r().s[24]++,this.setState({refs:i}),_r().s[25]++,r.map(o=>(_r().f[8]++,_r().s[26]++,o.data))}changeZoomStop(t,r,i){_r().f[9]++;const o=(_r().s[27]++,this.props.value.stops.slice(0));_r().s[28]++,o[t]=[r,i];const a=(_r().s[29]++,this.orderStopsByZoom(o)),s=(_r().s[30]++,{...this.props.value,stops:a});_r().s[31]++,this.props.onChange(this.props.fieldName,s)}changeBase(t){_r().f[10]++;const r=(_r().s[32]++,{...this.props.value,base:t});_r().s[33]++,r.base===void 0?(_r().b[6][0]++,_r().s[34]++,delete r.base):_r().b[6][1]++,_r().s[35]++,this.props.onChange(this.props.fieldName,r)}render(){var i,o,a,s;_r().f[12]++;const t=(_r().s[39]++,this.props.t),r=(_r().s[40]++,(i=this.props.value)==null?void 0:i.stops.map((h,g)=>{var I;_r().f[13]++;const b=(_r().s[41]++,h[0]),B=(_r().s[42]++,h[1]),S=(_r().s[43]++,ae.jsx(NN,{onClick:(I=this.props.onDeleteStop)==null?void 0:I.bind(this,g)}));return _r().s[44]++,ae.jsxs("tr",{children:[ae.jsx("td",{children:ae.jsx(rm,{"aria-label":t("Zoom"),value:b,onChange:k=>(_r().f[14]++,_r().s[45]++,this.changeZoomStop(g,k,B)),min:0,max:22})}),ae.jsx("td",{children:ae.jsx(cy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:B,onChange:(k,U)=>(_r().f[15]++,_r().s[46]++,this.changeZoomStop(g,b,U))})}),ae.jsx("td",{children:S})]},`${h[0]}-${h[1]}`)}));return _r().s[47]++,ae.jsx("div",{className:"maputnik-data-spec-block",children:ae.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ae.jsx("legend",{children:Zx(this.props.fieldName)}),ae.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ae.jsx(ga,{label:t("Function"),children:ae.jsx("div",{className:"maputnik-data-spec-property-input",children:ae.jsx(jg,{value:"interpolate",onChange:h=>(_r().f[16]++,_r().s[48]++,this.changeDataType(h)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),ae.jsx(ga,{label:t("Base"),children:ae.jsx("div",{className:"maputnik-data-spec-property-input",children:ae.jsx(cy,{fieldName:"base",fieldSpec:es.function.base,value:(o=this.props.value)==null?void 0:o.base,onChange:(h,g)=>(_r().f[17]++,_r().s[49]++,this.changeBase(g))})})}),ae.jsx("div",{className:"maputnik-function-stop",children:ae.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[ae.jsx("caption",{children:t("Stops")}),ae.jsx("thead",{children:ae.jsxs("tr",{children:[ae.jsx("th",{children:t("Zoom")}),ae.jsx("th",{rowSpan:2,children:t("Output value")})]})}),ae.jsx("tbody",{children:r})]})}),ae.jsxs("div",{className:"maputnik-toolbox",children:[ae.jsxs(Ya,{className:"maputnik-add-stop",onClick:(a=this.props.onAddStop)==null?void 0:a.bind(this),children:[ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ae.jsx("path",{fill:"currentColor",d:oI})})," ",t("Add stop")]}),ae.jsxs(Ya,{className:"maputnik-add-stop",onClick:(s=this.props.onExpressionClick)==null?void 0:s.bind(this),children:[ae.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ae.jsx("path",{fill:"currentColor",d:w_})})," ",t("Convert to expression")]})]})]})]})})}getDataFunctionTypes(t){return _r().f[18]++,_r().s[50]++,t["property-type"]==="data-driven"?(_r().b[9][0]++,_r().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(_r().b[9][1]++,_r().s[52]++,["interpolate"])}}In(GN,"defaultProps",(_r().s[9]++,{errors:{}}));const QAe=(_r().s[53]++,$s()(GN));function Ft(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:58,column:4},end:{line:58,column:17}},25:{start:{line:59,column:4},end:{line:62,column:6}},26:{start:{line:65,column:4},end:{line:72,column:5}},27:{start:{line:66,column:6},end:{line:66,column:16}},28:{start:{line:68,column:6},end:{line:71,column:8}},29:{start:{line:75,column:4},end:{line:77,column:5}},30:{start:{line:76,column:6},end:{line:76,column:27}},31:{start:{line:78,column:4},end:{line:80,column:5}},32:{start:{line:79,column:6},end:{line:79,column:24}},33:{start:{line:81,column:4},end:{line:81,column:25}},34:{start:{line:83,column:12},end:{line:99,column:3}},35:{start:{line:84,column:18},end:{line:84,column:49}},36:{start:{line:85,column:21},end:{line:85,column:44}},37:{start:{line:86,column:4},end:{line:93,column:5}},38:{start:{line:87,column:6},end:{line:90,column:9}},39:{start:{line:92,column:6},end:{line:92,column:49}},40:{start:{line:94,column:25},end:{line:97,column:5}},41:{start:{line:98,column:4},end:{line:98,column:60}},42:{start:{line:100,column:21},end:{line:106,column:3}},43:{start:{line:101,column:37},end:{line:101,column:47}},44:{start:{line:102,column:4},end:{line:102,column:54}},45:{start:{line:103,column:4},end:{line:105,column:7}},46:{start:{line:107,column:15},end:{line:118,column:3}},47:{start:{line:108,column:18},end:{line:108,column:49}},48:{start:{line:109,column:4},end:{line:109,column:29}},49:{start:{line:110,column:23},end:{line:113,column:5}},50:{start:{line:114,column:4},end:{line:116,column:5}},51:{start:{line:115,column:6},end:{line:115,column:33}},52:{start:{line:117,column:4},end:{line:117,column:60}},53:{start:{line:119,column:21},end:{line:148,column:3}},54:{start:{line:120,column:22},end:{line:120,column:32}},55:{start:{line:122,column:4},end:{line:146,column:5}},56:{start:{line:123,column:6},end:{line:138,column:7}},57:{start:{line:124,column:8},end:{line:129,column:10}},58:{start:{line:127,column:12},end:{line:127,column:88}},59:{start:{line:131,column:8},end:{line:137,column:10}},60:{start:{line:140,column:6},end:{line:145,column:8}},61:{start:{line:147,column:4},end:{line:147,column:56}},62:{start:{line:149,column:19},end:{line:165,column:3}},63:{start:{line:150,column:33},end:{line:150,column:43}},64:{start:{line:151,column:4},end:{line:164,column:5}},65:{start:{line:152,column:6},end:{line:155,column:9}},66:{start:{line:156,column:6},end:{line:158,column:9}},67:{start:{line:159,column:11},end:{line:164,column:5}},68:{start:{line:160,column:6},end:{line:160,column:47}},69:{start:{line:161,column:6},end:{line:163,column:9}},70:{start:{line:166,column:12},end:{line:169,column:3}},71:{start:{line:167,column:33},end:{line:167,column:43}},72:{start:{line:168,column:4},end:{line:168,column:140}},73:{start:{line:170,column:19},end:{line:181,column:3}},74:{start:{line:171,column:33},end:{line:171,column:43}},75:{start:{line:173,column:4},end:{line:179,column:5}},76:{start:{line:174,column:6},end:{line:174,column:67}},77:{start:{line:175,column:11},end:{line:179,column:5}},78:{start:{line:176,column:6},end:{line:176,column:43}},79:{start:{line:178,column:6},end:{line:178,column:70}},80:{start:{line:180,column:4},end:{line:180,column:58}},81:{start:{line:182,column:21},end:{line:220,column:3}},82:{start:{line:183,column:25},end:{line:183,column:72}},83:{start:{line:184,column:22},end:{line:184,column:61}},84:{start:{line:185,column:22},end:{line:185,column:32}},85:{start:{line:187,column:4},end:{line:218,column:5}},86:{start:{line:188,column:6},end:{line:207,column:7}},87:{start:{line:189,column:8},end:{line:196,column:10}},88:{start:{line:194,column:12},end:{line:194,column:111}},89:{start:{line:198,column:8},end:{line:206,column:10}},90:{start:{line:209,column:6},end:{line:217,column:8}},91:{start:{line:219,column:4},end:{line:219,column:56}},92:{start:{line:221,column:18},end:{line:223,column:3}},93:{start:{line:222,column:4},end:{line:222,column:39}},94:{start:{line:224,column:20},end:{line:226,column:3}},95:{start:{line:225,column:4},end:{line:225,column:40}},96:{start:{line:228,column:25},end:{line:228,column:35}},97:{start:{line:229,column:22},end:{line:229,column:132}},98:{start:{line:231,column:4},end:{line:295,column:5}},99:{start:{line:232,column:6},end:{line:247,column:8}},100:{start:{line:248,column:11},end:{line:295,column:5}},101:{start:{line:249,column:6},end:{line:263,column:8}},102:{start:{line:264,column:11},end:{line:295,column:5}},103:{start:{line:265,column:6},end:{line:279,column:8}},104:{start:{line:281,column:6},end:{line:294,column:8}},105:{start:{line:296,column:4},end:{line:296,column:148}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:21},end:{line:63,column:3}},line:57},12:{name:"(anonymous_12)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:48},end:{line:73,column:3}},line:64},13:{name:"(anonymous_13)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:34},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:12},end:{line:83,column:13}},loc:{start:{line:83,column:18},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:106,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:107,column:15},end:{line:107,column:16}},loc:{start:{line:107,column:28},end:{line:118,column:3}},line:107},17:{name:"(anonymous_17)",decl:{start:{line:119,column:21},end:{line:119,column:22}},loc:{start:{line:119,column:27},end:{line:148,column:3}},line:119},18:{name:"(anonymous_18)",decl:{start:{line:126,column:33},end:{line:126,column:34}},loc:{start:{line:126,column:43},end:{line:128,column:11}},line:126},19:{name:"(anonymous_19)",decl:{start:{line:149,column:19},end:{line:149,column:20}},loc:{start:{line:149,column:25},end:{line:165,column:3}},line:149},20:{name:"(anonymous_20)",decl:{start:{line:166,column:12},end:{line:166,column:13}},loc:{start:{line:166,column:18},end:{line:169,column:3}},line:166},21:{name:"(anonymous_21)",decl:{start:{line:170,column:19},end:{line:170,column:20}},loc:{start:{line:170,column:25},end:{line:181,column:3}},line:170},22:{name:"(anonymous_22)",decl:{start:{line:182,column:21},end:{line:182,column:22}},loc:{start:{line:182,column:27},end:{line:220,column:3}},line:182},23:{name:"(anonymous_23)",decl:{start:{line:193,column:33},end:{line:193,column:34}},loc:{start:{line:193,column:43},end:{line:195,column:11}},line:193},24:{name:"(anonymous_24)",decl:{start:{line:221,column:18},end:{line:221,column:19}},loc:{start:{line:221,column:24},end:{line:223,column:3}},line:221},25:{name:"(anonymous_25)",decl:{start:{line:224,column:20},end:{line:224,column:21}},loc:{start:{line:224,column:26},end:{line:226,column:3}},line:224},26:{name:"(anonymous_26)",decl:{start:{line:227,column:2},end:{line:227,column:3}},loc:{start:{line:227,column:11},end:{line:297,column:3}},line:227}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:65,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:72,column:5}},{start:{line:67,column:11},end:{line:72,column:5}}],line:65},17:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},18:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},19:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},20:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},21:{loc:{start:{line:122,column:4},end:{line:146,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:146,column:5}},{start:{line:139,column:11},end:{line:146,column:5}}],line:122},22:{loc:{start:{line:123,column:6},end:{line:138,column:7}},type:"if",locations:[{start:{line:123,column:6},end:{line:138,column:7}},{start:{line:130,column:13},end:{line:138,column:7}}],line:123},23:{loc:{start:{line:127,column:34},end:{line:127,column:86}},type:"binary-expr",locations:[{start:{line:127,column:34},end:{line:127,column:41}},{start:{line:127,column:45},end:{line:127,column:86}}],line:127},24:{loc:{start:{line:142,column:14},end:{line:142,column:64}},type:"binary-expr",locations:[{start:{line:142,column:14},end:{line:142,column:19}},{start:{line:142,column:23},end:{line:142,column:64}}],line:142},25:{loc:{start:{line:143,column:15},end:{line:143,column:65}},type:"binary-expr",locations:[{start:{line:143,column:15},end:{line:143,column:20}},{start:{line:143,column:24},end:{line:143,column:65}}],line:143},26:{loc:{start:{line:151,column:4},end:{line:164,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:164,column:5}},{start:{line:159,column:11},end:{line:164,column:5}}],line:151},27:{loc:{start:{line:159,column:11},end:{line:164,column:5}},type:"if",locations:[{start:{line:159,column:11},end:{line:164,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:159},28:{loc:{start:{line:168,column:11},end:{line:168,column:139}},type:"binary-expr",locations:[{start:{line:168,column:11},end:{line:168,column:33}},{start:{line:168,column:37},end:{line:168,column:63}},{start:{line:168,column:67},end:{line:168,column:85}},{start:{line:168,column:89},end:{line:168,column:109}},{start:{line:168,column:113},end:{line:168,column:139}}],line:168},29:{loc:{start:{line:173,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:179,column:5}},{start:{line:175,column:11},end:{line:179,column:5}}],line:173},30:{loc:{start:{line:173,column:8},end:{line:173,column:53}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:33}},{start:{line:173,column:37},end:{line:173,column:53}}],line:173},31:{loc:{start:{line:175,column:11},end:{line:179,column:5}},type:"if",locations:[{start:{line:175,column:11},end:{line:179,column:5}},{start:{line:177,column:11},end:{line:179,column:5}}],line:175},32:{loc:{start:{line:178,column:31},end:{line:178,column:68}},type:"binary-expr",locations:[{start:{line:178,column:31},end:{line:178,column:36}},{start:{line:178,column:40},end:{line:178,column:68}}],line:178},33:{loc:{start:{line:184,column:22},end:{line:184,column:61}},type:"cond-expr",locations:[{start:{line:184,column:55},end:{line:184,column:57}},{start:{line:184,column:60},end:{line:184,column:61}}],line:184},34:{loc:{start:{line:187,column:4},end:{line:218,column:5}},type:"if",locations:[{start:{line:187,column:4},end:{line:218,column:5}},{start:{line:208,column:11},end:{line:218,column:5}}],line:187},35:{loc:{start:{line:188,column:6},end:{line:207,column:7}},type:"if",locations:[{start:{line:188,column:6},end:{line:207,column:7}},{start:{line:197,column:13},end:{line:207,column:7}}],line:188},36:{loc:{start:{line:194,column:57},end:{line:194,column:109}},type:"binary-expr",locations:[{start:{line:194,column:57},end:{line:194,column:64}},{start:{line:194,column:68},end:{line:194,column:109}}],line:194},37:{loc:{start:{line:214,column:42},end:{line:214,column:103}},type:"binary-expr",locations:[{start:{line:214,column:42},end:{line:214,column:58}},{start:{line:214,column:62},end:{line:214,column:103}}],line:214},38:{loc:{start:{line:215,column:43},end:{line:215,column:104}},type:"binary-expr",locations:[{start:{line:215,column:43},end:{line:215,column:59}},{start:{line:215,column:63},end:{line:215,column:104}}],line:215},39:{loc:{start:{line:229,column:22},end:{line:229,column:132}},type:"cond-expr",locations:[{start:{line:229,column:74},end:{line:229,column:101}},{start:{line:229,column:104},end:{line:229,column:132}}],line:229},40:{loc:{start:{line:231,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:231,column:4},end:{line:295,column:5}},{start:{line:248,column:11},end:{line:295,column:5}}],line:231},41:{loc:{start:{line:248,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:248,column:11},end:{line:295,column:5}},{start:{line:264,column:11},end:{line:295,column:5}}],line:248},42:{loc:{start:{line:264,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:264,column:11},end:{line:295,column:5}},{start:{line:280,column:11},end:{line:295,column:5}}],line:264}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAkVQ;AAlVR,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAoBA,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MAClD,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAqC,OAA2B;AAE9F,QAAI,MAAM,WAAW;AACnB,aAAO,CAAC;AAAA,IACV,OACK;AACH,aAAO;AAAA,QACL,WAAW;AAAA,QACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAC,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAK;AAAA,QACrD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OACK;AACH,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,WAAW,UAAS,IAAI,KAAK;AACpC,SAAK,MAAM,SAAS,WAAW,UAAU,OAAO;AAChD,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,CAAC,YAAoB;AAChC,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAe;AAAA,MACjB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,QAAG,MAAM,WAAW,GAAG;AACrB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,QAAI;AACJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC5E,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YAC7C,CAAC,IAAI,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACtD,CAAC,IAAI,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAEhC,QAAI,gBAAgB,KAAK,GAAG;AAC1B,WAAK,MAAM,SAAS,WAAW;AAAA,QAC7B,QAAQ;AAAA,QACR,YAAY,MAAM,CAAC;AAAA,MACrB,CAAC;AACD,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH,WACS,oBAAoB,KAAK,GAAG;AACnC,WAAK,MAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AACvC,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,QAAI;AAEJ,QAAI,OAAO,UAAW,YAAY,WAAW,OAAO;AAClD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WACS,mBAAmB,KAAK,GAAG;AAClC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OACK;AACH,mBAAa,CAAC,WAAW,SAAS,KAAK,MAAM,UAAU,OAAO;AAAA,IAChE;AACA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,UAAU;AAAA,EACtD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,eAAe,KAAK,qBAAqB,KAAK,MAAM,SAAS;AACnE,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAC,MAAK,IAAI,KAAK;AACrB,QAAI;AAEJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAC,MAAM,KAAK,CAAC,GAAG,OAAO,UAAS,GAAG,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACjG,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YACvE,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC3F,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QAC9F;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,SAAS,EAAC,WAAW,KAAI,CAAC;AAAA,EACjC;AAAA,EAEA,kBAAkB,MAAM;AACtB,SAAK,SAAS,EAAC,WAAW,MAAK,CAAC;AAAA,EAClC;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,SAAQ,IAAI,KAAK;AACxB,UAAM,YAAY,KAAK,MAAM,UAAU,YAAY,KAAK,MAAM,QAAQ,8BAA8B;AACpG,QAAI;AAEJ,QAAI,aAAa,cAAc;AAC7B,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,MAAM,SAAS;AAAA,UAC7D,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK;AAAA,UACf,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA;AAAA,MACf;AAAA,IAEJ,WACS,aAAa,iBAAiB;AACrC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,WACS,aAAa,iBAAiB;AAErC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,OACK;AACH,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ;AACA,WAAO,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAAwB,KAAK,MAAM,WAC/E,qBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Ft=function(){return a},a}Ft();function eD(n){return Ft().f[0]++,Ft().s[0]++,Ft().b[0][0]++,Array.isArray(n)&&(Ft().b[0][1]++,n.length===2)&&(Ft().b[0][2]++,n[0]==="literal")}function tD(n){return Ft().f[1]++,Ft().s[1]++,Ft().b[1][0]++,Array.isArray(n)&&(Ft().b[1][1]++,n.length===2)&&(Ft().b[1][2]++,n[0]==="get")}function qAe(n){return Ft().f[2]++,Ft().s[2]++,Ft().b[2][0]++,typeof n=="object"&&(Ft().b[2][1]++,n.stops)&&(Ft().b[2][2]++,typeof n.property>"u")&&(Ft().b[2][3]++,Array.isArray(n.stops))&&(Ft().b[2][4]++,n.stops.length>1)&&(Ft().b[2][5]++,n.stops.every(e=>(Ft().f[3]++,Ft().s[3]++,Ft().b[3][0]++,Array.isArray(e)&&(Ft().b[3][1]++,e.length===2))))}function WN(n){return Ft().f[4]++,Ft().s[4]++,Ft().b[4][0]++,typeof n=="object"&&(Ft().b[4][1]++,n.type==="identity")&&(Ft().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function YAe(n){return Ft().f[5]++,Ft().s[5]++,Ft().b[5][0]++,typeof n=="object"&&(Ft().b[5][1]++,n.stops)&&(Ft().b[5][2]++,typeof n.property<"u")&&(Ft().b[5][3]++,n.stops.length>1)&&(Ft().b[5][4]++,Array.isArray(n.stops))&&(Ft().b[5][5]++,n.stops.every(e=>(Ft().f[6]++,Ft().s[6]++,Ft().b[6][0]++,Array.isArray(e)&&(Ft().b[6][1]++,e.length===2)&&(Ft().b[6][2]++,typeof e[0]=="object"))))}function $Ae(n){return Ft().f[7]++,Ft().s[7]++,Ft().b[7][0]++,WN(n)||(Ft().b[7][1]++,YAe(n))}function BI(n){Ft().f[8]++;const e=(Ft().s[8]++,["string","boolean","number"]);return Ft().s[9]++,e.includes(typeof n)}function VAe(n){return Ft().f[9]++,Ft().s[10]++,Array.isArray(n)?(Ft().b[8][0]++,Ft().s[11]++,n.every(BI)):(Ft().b[8][1]++,Ft().s[12]++,!1)}function nD(n,e=(Ft().b[9][0]++,{})){return Ft().f[10]++,Ft().s[13]++,n===void 0?(Ft().b[10][0]++,Ft().s[14]++,"value"):(Ft().b[10][1]++,Ft().s[15]++,BI(n)?(Ft().b[11][0]++,Ft().s[16]++,"value"):(Ft().b[11][1]++,Ft().s[17]++,Ft().b[13][0]++,e.type==="array"&&(Ft().b[13][1]++,VAe(n))?(Ft().b[12][0]++,Ft().s[18]++,"value"):(Ft().b[12][1]++,Ft().s[19]++,qAe(n)?(Ft().b[14][0]++,Ft().s[20]++,"zoom_function"):(Ft().b[14][1]++,Ft().s[21]++,$Ae(n)?(Ft().b[15][0]++,Ft().s[22]++,"data_function"):(Ft().b[15][1]++,Ft().s[23]++,"expression")))))}class HAe extends Xn.Component{constructor(t){Ft().f[11]++,Ft().s[24]++;super(t);In(this,"addStop",(Ft().s[34]++,()=>{Ft().f[14]++;const t=(Ft().s[35]++,this.props.value.stops.slice(0)),r=(Ft().s[36]++,t[t.length-1]);Ft().s[37]++,typeof r[0]=="object"?(Ft().b[19][0]++,Ft().s[38]++,t.push([{zoom:r[0].zoom+1,value:r[0].value},r[1]])):(Ft().b[19][1]++,Ft().s[39]++,t.push([r[0]+1,r[1]]));const i=(Ft().s[40]++,{...this.props.value,stops:t});Ft().s[41]++,this.props.onChange(this.props.fieldName,i)}));In(this,"deleteExpression",(Ft().s[42]++,()=>{Ft().f[15]++;const{fieldSpec:t,fieldName:r}=(Ft().s[43]++,this.props);Ft().s[44]++,this.props.onChange(r,t.default),Ft().s[45]++,this.setState({dataType:"value"})}));In(this,"deleteStop",(Ft().s[46]++,t=>{Ft().f[16]++;const r=(Ft().s[47]++,this.props.value.stops.slice(0));Ft().s[48]++,r.splice(t,1);let i=(Ft().s[49]++,{...this.props.value,stops:r});Ft().s[50]++,r.length===1?(Ft().b[20][0]++,Ft().s[51]++,i=r[0][1]):Ft().b[20][1]++,Ft().s[52]++,this.props.onChange(this.props.fieldName,i)}));In(this,"makeZoomFunction",(Ft().s[53]++,()=>{Ft().f[17]++;const{value:t}=(Ft().s[54]++,this.props);let r;Ft().s[55]++,typeof t=="object"?(Ft().b[21][0]++,Ft().s[56]++,t.stops?(Ft().b[22][0]++,Ft().s[57]++,r={base:t.base,stops:t.stops.map(i=>(Ft().f[18]++,Ft().s[58]++,[i[0].zoom,(Ft().b[23][0]++,i[1]||(Ft().b[23][1]++,_f(this.props.fieldSpec)))]))}):(Ft().b[22][1]++,Ft().s[59]++,r={base:t.base,stops:[[6,_f(this.props.fieldSpec)],[10,_f(this.props.fieldSpec)]]})):(Ft().b[21][1]++,Ft().s[60]++,r={stops:[[6,(Ft().b[24][0]++,t||(Ft().b[24][1]++,_f(this.props.fieldSpec)))],[10,(Ft().b[25][0]++,t||(Ft().b[25][1]++,_f(this.props.fieldSpec)))]]}),Ft().s[61]++,this.props.onChange(this.props.fieldName,r)}));In(this,"undoExpression",(Ft().s[62]++,()=>{Ft().f[19]++;const{value:t,fieldName:r}=(Ft().s[63]++,this.props);Ft().s[64]++,tD(t)?(Ft().b[26][0]++,Ft().s[65]++,this.props.onChange(r,{type:"identity",property:t[1]}),Ft().s[66]++,this.setState({dataType:"value"})):(Ft().b[26][1]++,Ft().s[67]++,eD(t)?(Ft().b[27][0]++,Ft().s[68]++,this.props.onChange(r,t[1]),Ft().s[69]++,this.setState({dataType:"value"})):Ft().b[27][1]++)}));In(this,"canUndo",(Ft().s[70]++,()=>{Ft().f[20]++;const{value:t,fieldSpec:r}=(Ft().s[71]++,this.props);return Ft().s[72]++,Ft().b[28][0]++,tD(t)||(Ft().b[28][1]++,eD(t))||(Ft().b[28][2]++,BI(t))||(Ft().b[28][3]++,Array.isArray(t)&&(Ft().b[28][4]++,r.type==="array"))}));In(this,"makeExpression",(Ft().s[73]++,()=>{Ft().f[21]++;const{value:t,fieldSpec:r}=(Ft().s[74]++,this.props);let i;Ft().s[75]++,Ft().b[30][0]++,typeof t=="object"&&(Ft().b[30][1]++,"stops"in t)?(Ft().b[29][0]++,Ft().s[76]++,i=F$.convertFunction(t,r)):(Ft().b[29][1]++,Ft().s[77]++,WN(t)?(Ft().b[31][0]++,Ft().s[78]++,i=["get",t.property]):(Ft().b[31][1]++,Ft().s[79]++,i=["literal",(Ft().b[32][0]++,t||(Ft().b[32][1]++,this.props.fieldSpec.default))])),Ft().s[80]++,this.props.onChange(this.props.fieldName,i)}));In(this,"makeDataFunction",(Ft().s[81]++,()=>{Ft().f[22]++;const t=(Ft().s[82]++,this.getFieldFunctionType(this.props.fieldSpec)),r=(Ft().s[83]++,t==="categorical"?(Ft().b[33][0]++,""):(Ft().b[33][1]++,0)),{value:i}=(Ft().s[84]++,this.props);let o;Ft().s[85]++,typeof i=="object"?(Ft().b[34][0]++,Ft().s[86]++,i.stops?(Ft().b[35][0]++,Ft().s[87]++,o={property:"",type:t,base:i.base,stops:i.stops.map(a=>(Ft().f[23]++,Ft().s[88]++,[{zoom:a[0],value:r},(Ft().b[36][0]++,a[1]||(Ft().b[36][1]++,_f(this.props.fieldSpec)))]))}):(Ft().b[35][1]++,Ft().s[89]++,o={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},_f(this.props.fieldSpec)],[{zoom:10,value:r},_f(this.props.fieldSpec)]]})):(Ft().b[34][1]++,Ft().s[90]++,o={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},(Ft().b[37][0]++,this.props.value||(Ft().b[37][1]++,_f(this.props.fieldSpec)))],[{zoom:10,value:r},(Ft().b[38][0]++,this.props.value||(Ft().b[38][1]++,_f(this.props.fieldSpec)))]]}),Ft().s[91]++,this.props.onChange(this.props.fieldName,o)}));In(this,"onMarkEditing",(Ft().s[92]++,()=>{Ft().f[24]++,Ft().s[93]++,this.setState({isEditing:!0})}));In(this,"onUnmarkEditing",(Ft().s[94]++,()=>{Ft().f[25]++,Ft().s[95]++,this.setState({isEditing:!1})}));Ft().s[25]++,this.state={dataType:nD(t.value,t.fieldSpec),isEditing:!1}}static getDerivedStateFromProps(t,r){return Ft().f[12]++,Ft().s[26]++,r.isEditing?(Ft().b[16][0]++,Ft().s[27]++,{}):(Ft().b[16][1]++,Ft().s[28]++,{isEditing:!1,dataType:nD(t.value,t.fieldSpec)})}getFieldFunctionType(t){return Ft().f[13]++,Ft().s[29]++,t.expression.interpolated?(Ft().b[17][0]++,Ft().s[30]++,"exponential"):(Ft().b[17][1]++,Ft().s[31]++,t.type==="number"?(Ft().b[18][0]++,Ft().s[32]++,"interval"):(Ft().b[18][1]++,Ft().s[33]++,"categorical"))}render(){Ft().f[26]++;const{dataType:t}=(Ft().s[96]++,this.state),r=(Ft().s[97]++,this.props.fieldSpec.default===this.props.value?(Ft().b[39][0]++,"maputnik-default-property"):(Ft().b[39][1]++,"maputnik-modified-property"));let i;return Ft().s[98]++,t==="expression"?(Ft().b[40][0]++,Ft().s[99]++,i=ae.jsx(Xj,{errors:this.props.errors,onChange:this.props.onChange.bind(this,this.props.fieldName),canUndo:this.canUndo,onUndo:this.undoExpression,onDelete:this.deleteExpression,fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onFocus:this.onMarkEditing,onBlur:this.onUnmarkEditing})):(Ft().b[40][1]++,Ft().s[100]++,t==="zoom_function"?(Ft().b[41][0]++,Ft().s[101]++,i=ae.jsx(QAe,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToDataFunction:this.makeDataFunction,onExpressionClick:this.makeExpression})):(Ft().b[41][1]++,Ft().s[102]++,t==="data_function"?(Ft().b[42][0]++,Ft().s[103]++,i=ae.jsx(WAe,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToZoomFunction:this.makeZoomFunction,onExpressionClick:this.makeExpression})):(Ft().b[42][1]++,Ft().s[104]++,i=ae.jsx(zN,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onZoomClick:this.makeZoomFunction,onDataClick:this.makeDataFunction,onExpressionClick:this.makeExpression})))),Ft().s[105]++,ae.jsx("div",{className:r,"data-wd-key":"spec-field-container:"+this.props.fieldName,children:i})}}function Ao(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Ao=function(){return a},a}Ao();const ZAe=(Ao().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function XAe(n,e,t){Ao().f[0]++;const r=(Ao().s[1]++,QN(n,e,t)),i=(Ao().s[2]++,n[r+"_"+e]),o=(Ao().s[3]++,i[t]);return Ao().s[4]++,ZAe.indexOf(t)>=0?(Ao().b[0][0]++,Ao().s[5]++,{...o,values:n.$root.sprite.values}):(Ao().b[0][1]++,Ao().s[6]++,t==="text-font"?(Ao().b[1][0]++,Ao().s[7]++,{...o,values:n.$root.glyphs.values}):(Ao().b[1][1]++,Ao().s[8]++,o))}function QN(n,e,t){Ao().f[1]++;const r=(Ao().s[9]++,Ao().b[2][0]++,n["paint_"+e]||(Ao().b[2][1]++,{}));return Ao().s[10]++,t in r?(Ao().b[3][0]++,Ao().s[11]++,"paint"):(Ao().b[3][1]++,Ao().s[12]++,"layout")}class JAe extends Xn.Component{constructor(){super(...arguments);In(this,"onPropertyChange",(Ao().s[13]++,(t,r)=>{Ao().f[2]++;const i=(Ao().s[14]++,QN(this.props.spec,this.props.layer.type,t));Ao().s[15]++,this.props.onChange(i,t,r)}))}render(){Ao().f[3]++;const{errors:t}=(Ao().s[16]++,this.props),r=(Ao().s[17]++,this.props.groupFields.map(i=>{Ao().f[4]++;const o=(Ao().s[18]++,XAe(this.props.spec,this.props.layer.type,i)),a=(Ao().s[19]++,Ao().b[4][0]++,this.props.layer.paint||(Ao().b[4][1]++,{})),s=(Ao().s[20]++,Ao().b[5][0]++,this.props.layer.layout||(Ao().b[5][1]++,{})),h=(Ao().s[21]++,i in a?(Ao().b[6][0]++,a[i]):(Ao().b[6][1]++,s[i])),g=(Ao().s[22]++,i in a?(Ao().b[7][0]++,"paint"):(Ao().b[7][1]++,"layout"));return Ao().s[23]++,ae.jsx(HAe,{errors:t,onChange:this.onPropertyChange,fieldName:i,value:h,fieldType:g,fieldSpec:o},i)}));return Ao().s[24]++,ae.jsx("div",{className:"maputnik-property-group",children:r})}}var eE,rD;function ece(){return rD||(rD=1,eE=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,o){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:o})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var a in r)t.d(o,a,(function(s){return r[s]}).bind(null,a));return o},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=hp()},function(n,e){n.exports=Da()},function(n,e,t){t.r(e);var r=t(1),i=t(0),o=function(){return(o=Object.assign||function(k){for(var U,z=1,Y=arguments.length;z<Y;z++)for(var Q in U=arguments[z])Object.prototype.hasOwnProperty.call(U,Q)&&(k[Q]=U[Q]);return k}).apply(this,arguments)},a=function(k,U){var z={};for(var Y in k)Object.prototype.hasOwnProperty.call(k,Y)&&U.indexOf(Y)<0&&(z[Y]=k[Y]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function"){var Q=0;for(Y=Object.getOwnPropertySymbols(k);Q<Y.length;Q++)U.indexOf(Y[Q])<0&&Object.prototype.propertyIsEnumerable.call(k,Y[Q])&&(z[Y[Q]]=k[Y[Q]])}return z},s=0,h=r.forwardRef(function(k,U){var z=k.title,Y=z===void 0?null:z,Q=k.description,ne=Q===void 0?null:Q,X=k.size,q=X===void 0?null:X,J=k.color,N=J===void 0?"currentColor":J,ie=k.horizontal,he=ie===void 0?null:ie,ce=k.vertical,we=ce===void 0?null:ce,pe=k.rotate,Ce=pe===void 0?null:pe,Pe=k.spin,de=Pe===void 0?null:Pe,rt=k.style,ze=rt===void 0?{}:rt,Qe=k.children,ut=a(k,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);s++;var Te,Ue=de!==null&&de,st=r.Children.map(Qe,function(Ut){var Lt=Ut;Ue!==!0&&(Ue=(de===null?Lt.props.spin:de)===!0);var De=Lt.props.size;typeof q=="number"&&typeof Lt.props.size=="number"&&(De=Lt.props.size/q);var ke={size:De,color:N===null?Lt.props.color:N,horizontal:he===null?Lt.props.horizontal:he,vertical:we===null?Lt.props.vertical:we,rotate:Ce===null?Lt.props.rotate:Ce,spin:de===null?Lt.props.spin:de,inStack:!0};return r.cloneElement(Lt,ke)});q!==null&&(ze.width=typeof q=="string"?q:1.5*q+"rem");var wt,mt="stack_labelledby_"+s,ft="stack_describedby_"+s;if(Y)Te=ne?mt+" "+ft:mt;else if(wt="presentation",ne)throw new Error("title attribute required when description is set");return r.createElement("svg",o({ref:U,viewBox:"0 0 24 24",style:ze,role:wt,"aria-labelledby":Te},ut),Y&&r.createElement("title",{id:mt},Y),ne&&r.createElement("desc",{id:ft},ne),Ue&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),st)});h.displayName="Stack",h.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},h.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var g=h;t.d(e,"Icon",function(){return I}),t.d(e,"Stack",function(){return g});var b=function(){return(b=Object.assign||function(k){for(var U,z=1,Y=arguments.length;z<Y;z++)for(var Q in U=arguments[z])Object.prototype.hasOwnProperty.call(U,Q)&&(k[Q]=U[Q]);return k}).apply(this,arguments)},B=function(k,U){var z={};for(var Y in k)Object.prototype.hasOwnProperty.call(k,Y)&&U.indexOf(Y)<0&&(z[Y]=k[Y]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function"){var Q=0;for(Y=Object.getOwnPropertySymbols(k);Q<Y.length;Q++)U.indexOf(Y[Q])<0&&Object.prototype.propertyIsEnumerable.call(k,Y[Q])&&(z[Y[Q]]=k[Y[Q]])}return z},S=0,I=r.forwardRef(function(k,U){var z=k.path,Y=k.id,Q=Y===void 0?++S:Y,ne=k.title,X=ne===void 0?null:ne,q=k.description,J=q===void 0?null:q,N=k.size,ie=N===void 0?null:N,he=k.color,ce=he===void 0?"currentColor":he,we=k.horizontal,pe=we!==void 0&&we,Ce=k.vertical,Pe=Ce!==void 0&&Ce,de=k.rotate,rt=de===void 0?0:de,ze=k.spin,Qe=ze!==void 0&&ze,ut=k.style,Te=ut===void 0?{}:ut,Ue=k.inStack,st=Ue!==void 0&&Ue,wt=B(k,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),mt={},ft=[];ie!==null&&(st?ft.push("scale("+ie+")"):(Te.width=typeof ie=="string"?ie:1.5*ie+"rem",Te.height=Te.width)),pe&&ft.push("scaleX(-1)"),Pe&&ft.push("scaleY(-1)"),rt!==0&&ft.push("rotate("+rt+"deg)"),ce!==null&&(mt.fill=ce);var Ut=r.createElement("path",b({d:z,style:mt},st?wt:{})),Lt=Ut;ft.length>0&&(Te.transform=ft.join(" "),Te.transformOrigin="center",st&&(Lt=r.createElement("g",{style:Te},Ut,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var De,ke=Lt,Oe=Qe===!0||typeof Qe!="number"?2:Qe,Je=!st&&(pe||Pe);if(Oe<0&&(Je=!Je),Qe&&(ke=r.createElement("g",{style:{animation:"spin"+(Je?"-inverse":"")+" linear "+Math.abs(Oe)+"s infinite",transformOrigin:"center"}},Lt,!(pe||Pe||rt!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),st)return ke;var Mt,gt="icon_labelledby_"+Q,Nt="icon_describedby_"+Q;if(X)De=J?gt+" "+Nt:gt;else if(Mt="presentation",J)throw new Error("title attribute required when description is set");return r.createElement("svg",b({ref:U,viewBox:"0 0 24 24",style:Te,role:Mt,"aria-labelledby":De},wt),X&&r.createElement("title",{id:gt},X),J&&r.createElement("desc",{id:Nt},J),!st&&Qe&&(Je?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),ke)});I.displayName="Icon",I.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},I.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=I}])),eE}var tce=ece();const iD=Ka(tce);function Z1(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Z1=function(){return a},a}Z1();class nce extends Xn.Component{render(){return Z1().f[0]++,Z1().s[0]++,ae.jsxs(Wj,{uuid:this.props.id,children:[ae.jsx(Yj,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(Z1().f[1]++,Z1().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:ae.jsxs(Cae,{className:"maputnik-layer-editor-group__button",children:[ae.jsx("span",{style:{flexGrow:1},children:this.props.title}),ae.jsx(iD,{path:jae,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),ae.jsx(iD,{path:zae,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),ae.jsx(Mae,{children:this.props.children})]})}}function dy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="32f7af2e1a9dc4f673c1fba818006229f9fd6490",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"32f7af2e1a9dc4f673c1fba818006229f9fd6490"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return dy=function(){return a},a}dy();class rce extends Xn.Component{render(){dy().f[0]++;const e=(dy().s[0]++,this.props.t);return dy().s[1]++,ae.jsx(ga,{label:e("Min Zoom"),fieldSpec:es.layer.minzoom,error:this.props.error,"data-wd-key":"min-zoom",children:ae.jsx(rm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:es.layer.minzoom.minimum,max:es.layer.minzoom.maximum,default:es.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})}}const ice=(dy().s[2]++,$s()(rce));function fy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="f706dc673f9397f2919007f4b702470461bf0f7c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f706dc673f9397f2919007f4b702470461bf0f7c"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return fy=function(){return a},a}fy();class oce extends Xn.Component{render(){fy().f[0]++;const e=(fy().s[0]++,this.props.t);return fy().s[1]++,ae.jsx(ga,{label:e("Max Zoom"),fieldSpec:es.layer.maxzoom,error:this.props.error,"data-wd-key":"max-zoom",children:ae.jsx(rm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:es.layer.maxzoom.minimum,max:es.layer.maxzoom.maximum,default:es.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})}}const sce=(fy().s[2]++,$s()(oce));function vg(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="875d9bef6002e38aa0b5bf03af99ab4fc2308047",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:22},end:{line:11,column:5}},2:{start:{line:12,column:4},end:{line:30,column:6}},3:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:31,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AAyBM;AAzBN,OAAO,WAAW;AAElB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY;AAAA,MAChB,KAAK,EAAE,2EAA2E;AAAA,IACpF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,UAAU;AAAA,QACnB;AAAA,QACA,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YACP,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,EAAE,YAAY;AAAA,YACvB,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"875d9bef6002e38aa0b5bf03af99ab4fc2308047"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return vg=function(){return a},a}vg();class ace extends Xn.Component{render(){vg().f[0]++;const e=(vg().s[0]++,this.props.t),t=(vg().s[1]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return vg().s[2]++,ae.jsx(ga,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:this.props.error,children:ae.jsx(kf,{multi:!0,value:this.props.value,onChange:this.props.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})}}const lce=(vg().s[3]++,$s()(ace)),uce={groups:[{title:"Paint properties",type:"properties",fields:["line-opacity","line-color","line-width","line-offset","line-blur","line-dasharray","line-pattern","line-translate","line-translate-anchor","line-gap-width"]},{title:"Layout properties",type:"properties",fields:["line-cap","line-join","line-miter-limit","line-round-limit"]}]},Ace={groups:[{title:"Paint properties",type:"properties",fields:["background-color","background-pattern","background-opacity"]}]},cce={groups:[{title:"Paint properties",type:"properties",fields:["fill-opacity","fill-color","fill-antialias","fill-outline-color","fill-pattern","fill-translate","fill-translate-anchor"]}]},hce={groups:[{title:"Paint properties",type:"properties",fields:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-blur","circle-radius","circle-stroke-width","circle-pitch-scale","circle-translate","circle-translate-anchor","circle-pitch-alignment"]}]},dce={groups:[{title:"General layout properties",type:"properties",fields:["symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-z-order"]},{title:"Text layout properties",type:"properties",fields:["text-field","text-font","text-size","text-line-height","text-padding","text-allow-overlap","text-ignore-placement","text-pitch-alignment","text-rotation-alignment","text-max-width","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-keep-upright","text-transform","text-offset","text-optional","text-variable-anchor","text-radial-offset"]},{title:"Icon layout properties",type:"properties",fields:["icon-image","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment"]},{title:"Text paint properties",type:"properties",fields:["text-color","text-opacity","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor"]},{title:"Icon paint properties",type:"properties",fields:["icon-color","icon-opacity","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor"]}]},fce={groups:[{title:"Paint properties",type:"properties",fields:["raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","raster-resampling"]}]},pce={groups:[{title:"Paint properties",type:"properties",fields:["hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color"]}]},mce={groups:[{title:"Paint properties",type:"properties",fields:["heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-opacity"]}]},gce={groups:[]},fb={line:uce,background:Ace,fill:cce,"fill-extrusion":{groups:[{title:"Paint properties",type:"properties",fields:["fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient"]}]},circle:hce,symbol:dce,raster:fce,hillshade:pce,heatmap:mce,invalid:gce};function X1(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return X1=function(){return a},a}X1();function qN(n){return X1().f[0]++,X1().s[0]++,n===""?(X1().b[0][0]++,"[empty_string]"):(X1().b[0][1]++,`'${n}'`)}function kn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="555ef41c8141fe537bdb43523a4ef7ec4c287394",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:23,column:2},end:{line:32,column:21}},1:{start:{line:26,column:6},end:{line:30,column:8}},2:{start:{line:35,column:21},end:{line:39,column:3}},3:{start:{line:40,column:22},end:{line:44,column:3}},4:{start:{line:45,column:22},end:{line:49,column:3}},5:{start:{line:50,column:2},end:{line:50,column:103}},6:{start:{line:53,column:24},end:{line:60,column:3}},7:{start:{line:61,column:29},end:{line:63,column:3}},8:{start:{line:65,column:4},end:{line:65,column:17}},9:{start:{line:66,column:25},end:{line:66,column:27}},10:{start:{line:67,column:4},end:{line:69,column:7}},11:{start:{line:68,column:6},end:{line:68,column:39}},12:{start:{line:70,column:4},end:{line:70,column:34}},13:{start:{line:73,column:29},end:{line:73,column:54}},14:{start:{line:74,column:4},end:{line:78,column:7}},15:{start:{line:75,column:6},end:{line:77,column:7}},16:{start:{line:76,column:8},end:{line:76,column:45}},17:{start:{line:79,column:4},end:{line:81,column:6}},18:{start:{line:84,column:4},end:{line:89,column:6}},19:{start:{line:92,column:4},end:{line:95,column:6}},20:{start:{line:98,column:32},end:{line:101,column:5}},21:{start:{line:102,column:4},end:{line:104,column:7}},22:{start:{line:107,column:18},end:{line:107,column:20}},23:{start:{line:108,column:4},end:{line:110,column:5}},24:{start:{line:109,column:6},end:{line:109,column:62}},25:{start:{line:111,column:35},end:{line:111,column:45}},26:{start:{line:112,column:22},end:{line:112,column:24}},27:{start:{line:113,column:4},end:{line:119,column:7}},28:{start:{line:114,column:6},end:{line:118,column:7}},29:{start:{line:115,column:8},end:{line:117,column:10}},30:{start:{line:121,column:18},end:{line:121,column:34}},31:{start:{line:122,column:4},end:{line:124,column:5}},32:{start:{line:123,column:6},end:{line:123,column:63}},33:{start:{line:125,column:4},end:{line:228,column:5}},34:{start:{line:127,column:8},end:{line:191,column:13}},35:{start:{line:134,column:35},end:{line:134,column:112}},36:{start:{line:143,column:37},end:{line:146,column:15}},37:{start:{line:155,column:31},end:{line:155,column:69}},38:{start:{line:164,column:31},end:{line:164,column:75}},39:{start:{line:172,column:31},end:{line:172,column:70}},40:{start:{line:180,column:31},end:{line:180,column:70}},41:{start:{line:188,column:31},end:{line:188,column:104}},42:{start:{line:193,column:8},end:{line:201,column:16}},43:{start:{line:199,column:29},end:{line:199,column:67}},44:{start:{line:203,column:8},end:{line:212,column:10}},45:{start:{line:214,column:8},end:{line:225,column:10}},46:{start:{line:219,column:14},end:{line:222,column:16}},47:{start:{line:227,column:8},end:{line:227,column:49}},48:{start:{line:231,column:4},end:{line:234,column:7}},49:{start:{line:237,column:14},end:{line:237,column:26}},50:{start:{line:238,column:21},end:{line:238,column:23}},51:{start:{line:239,column:22},end:{line:239,column:43}},52:{start:{line:240,column:19},end:{line:257,column:6}},53:{start:{line:241,column:6},end:{line:241,column:70}},54:{start:{line:243,column:22},end:{line:243,column:30}},55:{start:{line:244,column:6},end:{line:244,column:29}},56:{start:{line:245,column:6},end:{line:256,column:8}},57:{start:{line:258,column:20},end:{line:258,column:49}},58:{start:{line:259,column:18},end:{line:284,column:5}},59:{start:{line:262,column:23},end:{line:262,column:71}},60:{start:{line:266,column:23},end:{line:266,column:68}},61:{start:{line:270,column:23},end:{line:270,column:80}},62:{start:{line:276,column:23},end:{line:276,column:41}},63:{start:{line:282,column:23},end:{line:282,column:40}},64:{start:{line:286,column:6},end:{line:286,column:30}},65:{start:{line:287,column:6},end:{line:287,column:26}},66:{start:{line:289,column:4},end:{line:334,column:6}},67:{start:{line:316,column:33},end:{line:316,column:42}},68:{start:{line:317,column:20},end:{line:317,column:174}},69:{start:{line:337,column:20},end:{line:337,column:58}}},fnMap:{0:{name:"getLayoutForType",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:35},end:{line:33,column:1}},line:22},1:{name:"(anonymous_1)",decl:{start:{line:25,column:36},end:{line:25,column:37}},loc:{start:{line:25,column:47},end:{line:31,column:5}},line:25},2:{name:"layoutGroups",decl:{start:{line:34,column:9},end:{line:34,column:21}},loc:{start:{line:34,column:36},end:{line:51,column:1}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:54,column:20},end:{line:54,column:21}},loc:{start:{line:54,column:26},end:{line:55,column:5}},line:54},4:{name:"(anonymous_4)",decl:{start:{line:56,column:21},end:{line:56,column:22}},loc:{start:{line:56,column:27},end:{line:57,column:5}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:28},end:{line:59,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:21},end:{line:71,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:67,column:57},end:{line:67,column:58}},loc:{start:{line:67,column:68},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:48},end:{line:82,column:3}},line:72},9:{name:"(anonymous_9)",decl:{start:{line:74,column:63},end:{line:74,column:64}},loc:{start:{line:74,column:74},end:{line:78,column:5}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:20},end:{line:90,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:44},end:{line:96,column:3}},line:91},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:36},end:{line:105,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:32},end:{line:229,column:3}},line:106},14:{name:"(anonymous_14)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:30},end:{line:119,column:5}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:35},end:{line:134,column:112}},line:134},16:{name:"(anonymous_16)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:37},end:{line:146,column:15}},line:143},17:{name:"(anonymous_17)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:31},end:{line:155,column:69}},line:155},18:{name:"(anonymous_18)",decl:{start:{line:164,column:24},end:{line:164,column:25}},loc:{start:{line:164,column:31},end:{line:164,column:75}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:31},end:{line:172,column:70}},line:172},20:{name:"(anonymous_20)",decl:{start:{line:180,column:24},end:{line:180,column:25}},loc:{start:{line:180,column:31},end:{line:180,column:70}},line:180},21:{name:"(anonymous_21)",decl:{start:{line:188,column:24},end:{line:188,column:25}},loc:{start:{line:188,column:31},end:{line:188,column:104}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:199,column:22},end:{line:199,column:23}},loc:{start:{line:199,column:29},end:{line:199,column:67}},line:199},23:{name:"(anonymous_23)",decl:{start:{line:218,column:22},end:{line:218,column:23}},loc:{start:{line:218,column:34},end:{line:223,column:13}},line:218},24:{name:"(anonymous_24)",decl:{start:{line:230,column:2},end:{line:230,column:3}},loc:{start:{line:230,column:20},end:{line:235,column:3}},line:230},25:{name:"(anonymous_25)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:335,column:3}},line:236},26:{name:"(anonymous_26)",decl:{start:{line:240,column:53},end:{line:240,column:54}},loc:{start:{line:240,column:64},end:{line:242,column:5}},line:240},27:{name:"(anonymous_27)",decl:{start:{line:242,column:11},end:{line:242,column:12}},loc:{start:{line:242,column:22},end:{line:257,column:5}},line:242},28:{name:"(anonymous_28)",decl:{start:{line:262,column:17},end:{line:262,column:18}},loc:{start:{line:262,column:23},end:{line:262,column:71}},line:262},29:{name:"(anonymous_29)",decl:{start:{line:266,column:17},end:{line:266,column:18}},loc:{start:{line:266,column:23},end:{line:266,column:68}},line:266},30:{name:"(anonymous_30)",decl:{start:{line:270,column:17},end:{line:270,column:18}},loc:{start:{line:270,column:23},end:{line:270,column:80}},line:270},31:{name:"(anonymous_31)",decl:{start:{line:276,column:17},end:{line:276,column:18}},loc:{start:{line:276,column:23},end:{line:276,column:41}},line:276},32:{name:"(anonymous_32)",decl:{start:{line:282,column:17},end:{line:282,column:18}},loc:{start:{line:282,column:23},end:{line:282,column:40}},line:282},33:{name:"handleSelection",decl:{start:{line:285,column:13},end:{line:285,column:28}},loc:{start:{line:285,column:40},end:{line:288,column:5}},line:285},34:{name:"(anonymous_34)",decl:{start:{line:315,column:147},end:{line:315,column:148}},loc:{start:{line:315,column:155},end:{line:318,column:19}},line:315}},branchMap:{0:{loc:{start:{line:23,column:9},end:{line:32,column:20}},type:"cond-expr",locations:[{start:{line:23,column:24},end:{line:32,column:3}},{start:{line:32,column:6},end:{line:32,column:20}}],line:23},1:{loc:{start:{line:75,column:6},end:{line:77,column:7}},type:"if",locations:[{start:{line:75,column:6},end:{line:77,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},2:{loc:{start:{line:108,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:108,column:4},end:{line:110,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:108},3:{loc:{start:{line:114,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:114,column:6},end:{line:118,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},4:{loc:{start:{line:114,column:10},end:{line:114,column:96}},type:"binary-expr",locations:[{start:{line:114,column:10},end:{line:114,column:22}},{start:{line:114,column:26},end:{line:114,column:55}},{start:{line:114,column:59},end:{line:114,column:96}}],line:114},5:{loc:{start:{line:122,column:4},end:{line:124,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:124,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:122},6:{loc:{start:{line:125,column:4},end:{line:228,column:5}},type:"switch",locations:[{start:{line:126,column:6},end:{line:191,column:13}},{start:{line:192,column:6},end:{line:201,column:16}},{start:{line:202,column:6},end:{line:212,column:10}},{start:{line:213,column:6},end:{line:225,column:10}},{start:{line:226,column:6},end:{line:227,column:49}}],line:125},7:{loc:{start:{line:149,column:10},end:{line:157,column:11}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:48}},{start:{line:149,column:68},end:{line:157,column:11}}],line:149},8:{loc:{start:{line:158,column:10},end:{line:166,column:11}},type:"binary-expr",locations:[{start:{line:158,column:10},end:{line:158,column:93}},{start:{line:158,column:113},end:{line:166,column:11}}],line:158},9:{loc:{start:{line:188,column:83},end:{line:188,column:103}},type:"cond-expr",locations:[{start:{line:188,column:93},end:{line:188,column:99}},{start:{line:188,column:102},end:{line:188,column:103}}],line:188},10:{loc:{start:{line:241,column:15},end:{line:241,column:68}},type:"binary-expr",locations:[{start:{line:241,column:15},end:{line:241,column:41}},{start:{line:241,column:45},end:{line:241,column:68}}],line:241},11:{loc:{start:{line:258,column:20},end:{line:258,column:49}},type:"binary-expr",locations:[{start:{line:258,column:20},end:{line:258,column:43}},{start:{line:258,column:47},end:{line:258,column:49}}],line:258},12:{loc:{start:{line:269,column:14},end:{line:269,column:67}},type:"cond-expr",locations:[{start:{line:269,column:46},end:{line:269,column:55}},{start:{line:269,column:58},end:{line:269,column:67}}],line:269}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer","layout"],mappings:"AA2KyB,SA2EL,UA1Ed,KADmB;AA3KzB,OAAO,WAAuB;AAC9B,OAAO,eAAe;AACtB,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AAGzB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,OAAO,YAAY;AACnB,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAIjD,SAAS,iBAAiB,MAAkC,GAAc;AACxE,SAAO,OAAO,IAAI,IAAI;AAAA,IACpB,GAAG,OAAO,IAAI;AAAA,IACd,QAAQ,OAAO,IAAI,EAAE,OAAO,IAAI,WAAS;AACvC,aAAO;AAAA,QACL,GAAG;AAAA,QACH,IAAI,MAAM,MAAM,QAAQ,MAAM,GAAG;AAAA,QACjC,OAAO,EAAE,MAAM,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH,IAAI,OAAO;AACb;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,EAAE,MAAM,EAC5C,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAGX,UAAM,eAAyC,CAAC;AAChD,iBAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,QAAQ,WAAS;AAC5D,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B,CAAC;AAED,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,qBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,OAAO,QAAQ,WAAS;AAClE,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,kBAAmB;AACjB,WAAO;AAAA,MACL,eAAe;AAAA,QACb,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAkB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAU;AAAA,IAC7D;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,MAAM,IAAI,IAAI,KACjF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAMC,UAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAAkF;AAAA,MACtF,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,MAChE;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,MAC7D;AAAA,MACA,MAAM;AAAA,QACJ,MAAOA,QAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,MACzE;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA;AAAA,QAEvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,MAClC;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA;AAAA,QAEzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,MAClC;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACxB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAC5B,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"555ef41c8141fe537bdb43523a4ef7ec4c287394"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return kn=function(){return a},a}kn();function YN(n,e){return kn().f[0]++,kn().s[0]++,fb[n]?(kn().b[0][0]++,{...fb[n],groups:fb[n].groups.map(t=>(kn().f[1]++,kn().s[1]++,{...t,id:t.title.replace(/ /g,"_"),title:e(t.title)}))}):(kn().b[0][1]++,fb.invalid)}function oD(n,e){kn().f[2]++;const t=(kn().s[2]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(kn().s[3]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(kn().s[4]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return kn().s[5]++,[t,r].concat(YN(n,e).groups).concat([i])}class X6 extends Xn.Component{constructor(e){kn().f[6]++,kn().s[8]++,super(e);const t=(kn().s[9]++,{});kn().s[10]++,oD(this.props.layer.type,e.t).forEach(r=>{kn().f[7]++,kn().s[11]++,t[r.title]=!0}),kn().s[12]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){kn().f[8]++;const r=(kn().s[13]++,{...t.editorGroups});return kn().s[14]++,YN(e.layer.type,e.t).groups.forEach(i=>{kn().f[9]++,kn().s[15]++,i.title in r?kn().b[1][1]++:(kn().b[1][0]++,kn().s[16]++,r[i.title]=!0)}),kn().s[17]++,{editorGroups:r}}getChildContext(){return kn().f[10]++,kn().s[18]++,{reactIconBase:{size:14,color:"#8e8e8e"}}}changeProperty(e,t,r){kn().f[11]++,kn().s[19]++,this.props.onLayerChanged(this.props.layerIndex,Dse(this.props.layer,e,t,r))}onGroupToggle(e,t){kn().f[12]++;const r=(kn().s[20]++,{...this.state.editorGroups,[e]:t});kn().s[21]++,this.setState({editorGroups:r})}renderGroupType(e,t){kn().f[13]++;let r=(kn().s[22]++,"");kn().s[23]++,this.props.layer.metadata?(kn().b[2][0]++,kn().s[24]++,r=this.props.layer.metadata["maputnik:comment"]):kn().b[2][1]++;const{errors:i,layerIndex:o}=(kn().s[25]++,this.props),a=(kn().s[26]++,{});kn().s[27]++,i.forEach(g=>{kn().f[14]++,kn().s[28]++,kn().b[4][0]++,g.parsed&&(kn().b[4][1]++,g.parsed.type==="layer")&&(kn().b[4][2]++,g.parsed.data.index==o)?(kn().b[3][0]++,kn().s[29]++,a[g.parsed.data.key]={message:g.parsed.data.message}):kn().b[3][1]++});let s;const h=(kn().s[30]++,this.props.layer);switch(kn().s[31]++,Object.prototype.hasOwnProperty.call(this.props.sources,h.source)?(kn().b[5][0]++,kn().s[32]++,s=this.props.sources[h.source].layers):kn().b[5][1]++,kn().s[33]++,e){case"layer":return kn().b[6][0]++,kn().s[34]++,ae.jsxs("div",{children:[ae.jsx(kj,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:a.id,onChange:g=>(kn().f[15]++,kn().s[35]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,g))}),ae.jsx(Ij,{disabled:!0,error:a.type,value:this.props.layer.type,onChange:g=>(kn().f[16]++,kn().s[36]++,this.props.onLayerChanged(this.props.layerIndex,Kse(this.props.layer,g)))}),(kn().b[7][0]++,this.props.layer.type!=="background"&&(kn().b[7][1]++,ae.jsx(Pj,{error:a.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:g=>(kn().f[17]++,kn().s[37]++,this.changeProperty(null,"source",g))}))),(kn().b[8][0]++,["background","raster","hillshade","heatmap"].indexOf(this.props.layer.type)<0&&(kn().b[8][1]++,ae.jsx(Kj,{error:a["source-layer"],sourceLayerIds:s,value:this.props.layer["source-layer"],onChange:g=>(kn().f[18]++,kn().s[38]++,this.changeProperty(null,"source-layer",g))}))),ae.jsx(ice,{error:a.minzoom,value:this.props.layer.minzoom,onChange:g=>(kn().f[19]++,kn().s[39]++,this.changeProperty(null,"minzoom",g))}),ae.jsx(sce,{error:a.maxzoom,value:this.props.layer.maxzoom,onChange:g=>(kn().f[20]++,kn().s[40]++,this.changeProperty(null,"maxzoom",g))}),ae.jsx(lce,{error:a.comment,value:r,onChange:g=>(kn().f[21]++,kn().s[41]++,this.changeProperty("metadata","maputnik:comment",g==""?(kn().b[9][0]++,void 0):(kn().b[9][1]++,g)))})]});case"filter":return kn().b[6][1]++,kn().s[42]++,ae.jsx("div",{children:ae.jsx("div",{className:"maputnik-filter-editor-wrapper",children:ae.jsx(ele,{errors:a,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:g=>(kn().f[22]++,kn().s[43]++,this.changeProperty(null,"filter",g))})})});case"properties":return kn().b[6][2]++,kn().s[44]++,ae.jsx(JAe,{errors:a,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return kn().b[6][3]++,kn().s[45]++,ae.jsx(iI,{layer:this.props.layer,onChange:g=>{kn().f[23]++,kn().s[46]++,this.props.onLayerChanged(this.props.layerIndex,g)}});default:return kn().b[6][4]++,kn().s[47]++,ae.jsx(ae.Fragment,{})}}moveLayer(e){kn().f[24]++,kn().s[48]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){kn().f[25]++;const e=(kn().s[49]++,this.props.t),t=(kn().s[50]++,[]),r=(kn().s[51]++,this.props.layer.type),i=(kn().s[52]++,oD(r,e).filter(h=>(kn().f[26]++,kn().s[53]++,kn().b[10][0]++,!(r==="background"&&(kn().b[10][1]++,h.type==="source")))).map(h=>{kn().f[27]++;const g=(kn().s[54]++,h.id);return kn().s[55]++,t.push(g),kn().s[56]++,ae.jsx(nce,{"data-wd-key":h.title,id:g,title:h.title,isActive:this.state.editorGroups[h.title],onActiveToggle:this.onGroupToggle.bind(this,h.title),children:this.renderGroupType(h.type,h.fields)},g)})),o=(kn().s[57]++,kn().b[11][0]++,this.props.layer.layout||(kn().b[11][1]++,{})),a=(kn().s[58]++,{delete:{text:e("Delete"),handler:()=>(kn().f[28]++,kn().s[59]++,this.props.onLayerDestroy(this.props.layerIndex))},duplicate:{text:e("Duplicate"),handler:()=>(kn().f[29]++,kn().s[60]++,this.props.onLayerCopy(this.props.layerIndex))},hide:{text:o.visibility==="none"?(kn().b[12][0]++,e("Show")):(kn().b[12][1]++,e("Hide")),handler:()=>(kn().f[30]++,kn().s[61]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(kn().f[31]++,kn().s[62]++,this.moveLayer(-1))},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(kn().f[32]++,kn().s[63]++,this.moveLayer(1))}});function s(h,g){kn().f[33]++,kn().s[64]++,g.stopPropagation(),kn().s[65]++,a[h].handler()}return kn().s[66]++,ae.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[ae.jsx("header",{children:ae.jsxs("div",{className:"layer-header",children:[ae.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:qN(this.props.layer.id)})}),ae.jsx("div",{className:"layer-header__info",children:ae.jsxs(lb.Wrapper,{className:"more-menu",onSelection:s,closeOnSelection:!1,children:[ae.jsx(lb.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:ae.jsx(FV,{className:"more-menu__button__svg"})}),ae.jsx(lb.Menu,{children:ae.jsx("ul",{className:"more-menu__menu",children:Object.keys(a).map(h=>{kn().f[34]++;const g=(kn().s[67]++,a[h]);return kn().s[68]++,ae.jsx("li",{children:ae.jsx(lb.MenuItem,{value:h,className:"more-menu__menu__item",children:g.text})},h)})})})]})})]})}),ae.jsx(lae,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})}}In(X6,"defaultProps",(kn().s[6]++,{onLayerChanged:()=>{kn().f[3]++},onLayerIdChange:()=>{kn().f[4]++},onLayerDestroyed:()=>{kn().f[5]++}})),In(X6,"childContextTypes",(kn().s[7]++,{reactIconBase:pi.object}));const yce=(kn().s[69]++,$s()(X6));var sD=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},vce=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),_ce=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),Cce=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),bce=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),xce=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),wce=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Mce=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,aD=3,Sce=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",wce]],lD=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Ece(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new xce:typeof navigator<"u"?Oce(navigator.userAgent):kce()}function Bce(n){return n!==""&&Sce.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var o=i.exec(n);return!!o&&[r,o]},!1)}function Oce(n){var e=Bce(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new bce;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<aD&&(i=sD(sD([],i,!0),Tce(aD-i.length),!0)):i=[];var o=i.join("."),a=Ice(n),s=Mce.exec(n);return s&&s[1]?new Cce(t,o,a,s[1]):new vce(t,o,a)}function Ice(n){for(var e=0,t=lD.length;e<t;e++){var r=lD[e],i=r[0],o=r[1],a=o.exec(n);if(a)return i}return null}function kce(){var n=typeof process<"u"&&process.version;return n?new _ce(process.version.slice(1)):null}function Tce(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const Pce="maputnik",Rce="2.1.1",Kce="A MapLibre GL visual style editor",Dce="module",Lce="''",Fce={start:"vite",build:"tsc && vite build --base=/maputnik/","build-desktop":"tsc && vite build --base=/ && cd desktop && make","i18n:refresh":"i18next 'src/**/*.{ts,tsx,js,jsx}'",lint:"eslint ./src ./cypress --ext ts,tsx,js,jsx --report-unused-disable-directives --max-warnings 0",test:"cypress run","cy:open":"cypress open","lint-css":'stylelint "src/styles/*.scss"',"sort-styles":"jq 'sort_by(.id)' src/config/styles.json > tmp.json && mv tmp.json src/config/styles.json"},Uce={type:"git",url:"https://github.com/maplibre/maputnik"},zce="Lukas Martinelli",jce="MIT",Nce="https://github.com/maplibre/maputnik#readme",Gce={"@mapbox/mapbox-gl-rtl-text":"^0.3.0","@maplibre/maplibre-gl-geocoder":"^1.7.1","@maplibre/maplibre-gl-inspect":"^1.7.1","@maplibre/maplibre-gl-style-spec":"^23.1.0","@mdi/js":"^7.4.47","@mdi/react":"^1.6.1","array-move":"^4.0.0",buffer:"^6.0.3",classnames:"^2.5.1",codemirror:"^5.65.2",color:"^4.2.3","detect-browser":"^5.3.0",events:"^3.3.0","file-saver":"^2.0.5",i18next:"^24.2.1","i18next-browser-languagedetector":"^8.0.2","i18next-resources-to-backend":"^1.2.1","json-stringify-pretty-compact":"^4.0.0","json-to-ast":"^2.1.0",jsonlint:"github:josdejong/jsonlint#85a19d7",lodash:"^4.17.21","lodash.capitalize":"^4.2.1","lodash.clamp":"^4.0.3","lodash.clonedeep":"^4.5.0","lodash.get":"^4.4.2","lodash.isequal":"^4.5.0","lodash.throttle":"^4.1.1","maplibre-gl":"^5.0.1","maputnik-design":"github:maputnik/design#172b06c",ol:"^10.3.1","ol-mapbox-style":"^12.4.0","prop-types":"^15.8.1",react:"^18.2.0","react-accessible-accordion":"^5.0.0","react-aria-menubutton":"^7.0.3","react-aria-modal":"^5.0.2","react-autobind":"^1.0.6","react-autocomplete":"^1.8.1","react-collapse":"^5.1.1","react-color":"^2.19.3","react-dom":"^18.2.0","react-file-reader-input":"^2.0.0","react-i18next":"^15.0.1","react-icon-base":"^2.1.2","react-icons":"^5.4.0","react-sortable-hoc":"^2.0.0","reconnecting-websocket":"^4.4.0",slugify:"^1.6.6","string-hash":"^1.1.3",url:"^0.11.4"},Wce={esversion:6},Qce={extends:"stylelint-config-recommended-scss",rules:{"no-descending-specificity":null,"media-feature-name-no-unknown":[!0,{ignoreMediaFeatureNames:["prefers-reduced-motion"]}]}},qce={"@cypress/code-coverage":"^3.13.10","@istanbuljs/nyc-config-typescript":"^1.0.2","@rollup/plugin-replace":"^6.0.2","@shellygo/cypress-test-utils":"^4.1.11","@types/codemirror":"^5.60.15","@types/color":"^3.0.6","@types/cors":"^2.8.17","@types/file-saver":"^2.0.7","@types/geojson":"^7946.0.14","@types/json-to-ast":"^2.1.4","@types/lodash.capitalize":"^4.2.9","@types/lodash.clamp":"^4.0.9","@types/lodash.clonedeep":"^4.5.9","@types/lodash.get":"^4.4.9","@types/lodash.isequal":"^4.5.8","@types/lodash.throttle":"^4.1.9","@types/mocha":"^10.0.6","@types/randomcolor":"^0.5.9","@types/react":"^18.2.67","@types/react-aria-menubutton":"^6.2.14","@types/react-aria-modal":"^4.0.10","@types/react-autocomplete":"^1.8.11","@types/react-collapse":"^5.0.4","@types/react-color":"^3.0.13","@types/react-dom":"^18.2.22","@types/react-file-reader-input":"^2.0.4","@types/react-icon-base":"^2.1.6","@types/string-hash":"^1.1.3","@types/uuid":"^9.0.8","@types/wicg-file-system-access":"^2023.10.5","@typescript-eslint/eslint-plugin":"^7.3.1","@typescript-eslint/parser":"^7.3.1","@vitejs/plugin-react":"^4.3.4",cors:"^2.8.5",cypress:"^14.0.0","cypress-plugin-tab":"^1.0.5",eslint:"^8.57.0","eslint-plugin-react":"^7.34.1","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-react-refresh":"^0.4.18","i18next-parser":"^9.1.0",istanbul:"^0.4.5","istanbul-lib-coverage":"^3.2.2",mocha:"^11.0.1",postcss:"^8.4.38","react-hot-loader":"^4.13.1",sass:"^1.72.0",stylelint:"^16.13.2","stylelint-config-recommended-scss":"^14.0.0","stylelint-scss":"^6.10.1",typescript:"^5.4.3",uuid:"^11.0.5",vite:"^6.0.11","vite-plugin-istanbul":"^6.0.0"},uD={name:Pce,version:Rce,description:Kce,type:Dce,main:Lce,scripts:Fce,repository:Uce,author:zce,license:jce,homepage:Nce,dependencies:Gce,jshintConfig:Wce,stylelint:Qce,devDependencies:qce},Yce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Qi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="7ffd82d4f3aa9239b1c505abaafac5bdb522b791",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AA+BW,cAyLG,YAzLH;AA/BX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAGnC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ffd82d4f3aa9239b1c505abaafac5bdb522b791"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Qi=function(){return a},a}Qi();const $ce=(Qi().s[0]++,Ece()),pb=(Qi().s[1]++,["chrome","firefox"].indexOf($ce.name)>-1);class og extends Xn.Component{render(){return Qi().f[0]++,Qi().s[2]++,ae.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class Vce extends Xn.Component{render(){return Qi().f[1]++,Qi().s[3]++,ae.jsx("a",{className:tm("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class AD extends Xn.Component{render(){return Qi().f[2]++,Qi().s[4]++,ae.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class mb extends Xn.Component{render(){return Qi().f[3]++,Qi().s[5]++,ae.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class Hce extends Xn.Component{constructor(){super(...arguments);In(this,"state",(Qi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}}));In(this,"onSkip",(Qi().s[9]++,t=>{if(Qi().f[6]++,Qi().s[10]++,t==="map")Qi().b[0][0]++,Qi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Qi().b[0][1]++;const r=(Qi().s[12]++,document.querySelector("#skip-target-"+t));Qi().s[13]++,r.focus()}}))}handleSelection(t){Qi().f[4]++,Qi().s[7]++,this.props.onSetMapState(t)}handleLanguageChange(t){Qi().f[5]++,Qi().s[8]++,this.props.i18n.changeLanguage(t)}render(){Qi().f[7]++;const t=(Qi().s[14]++,this.props.t),r=(Qi().s[15]++,[{id:"map",group:"general",title:t("Map")},{id:"inspect",group:"general",title:t("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:t("Deuteranopia filter"),disabled:!pb},{id:"filter-protanopia",group:"color-accessibility",title:t("Protanopia filter"),disabled:!pb},{id:"filter-tritanopia",group:"color-accessibility",title:t("Tritanopia filter"),disabled:!pb},{id:"filter-achromatopsia",group:"color-accessibility",title:t("Achromatopsia filter"),disabled:!pb}]),i=(Qi().s[16]++,r.find(o=>(Qi().f[8]++,Qi().s[17]++,o.id===this.props.mapState)));return Qi().s[18]++,ae.jsx("nav",{className:"maputnik-toolbar",children:ae.jsxs("div",{className:"maputnik-toolbar__inner",children:[ae.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[ae.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:o=>(Qi().f[9]++,Qi().s[19]++,this.onSkip("layer-list")),children:t("Layers list")}),ae.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:o=>(Qi().f[10]++,Qi().s[20]++,this.onSkip("layer-editor")),children:t("Layer editor")}),ae.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:o=>(Qi().f[11]++,Qi().s[21]++,this.onSkip("map")),children:t("Map view")}),ae.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[ae.jsx("img",{src:Yce,alt:t("Maputnik on GitHub")}),ae.jsxs("h1",{children:[ae.jsx("span",{className:"maputnik-toolbar-name",children:uD.name}),ae.jsxs("span",{className:"maputnik-toolbar-version",children:["v",uD.version]})]})]})]}),ae.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[ae.jsxs(mb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[ae.jsx(MV,{}),ae.jsx(og,{children:t("Open")})]}),ae.jsxs(mb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[ae.jsx(t6,{}),ae.jsx(og,{children:t("Save")})]}),ae.jsxs(mb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[ae.jsx(PV,{}),ae.jsx(og,{children:t("Data Sources")})]}),ae.jsxs(mb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[ae.jsx(SV,{}),ae.jsx(og,{children:t("Style Settings")})]}),ae.jsxs(AD,{wdKey:"nav:inspect",children:[ae.jsx(_V,{}),ae.jsxs(og,{children:[t("View"),ae.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:o=>(Qi().f[12]++,Qi().s[22]++,this.handleSelection(o.target.value)),value:i==null?void 0:i.id,children:[r.filter(o=>(Qi().f[13]++,Qi().s[23]++,o.group==="general")).map(o=>(Qi().f[14]++,Qi().s[24]++,ae.jsx("option",{value:o.id,disabled:o.disabled,"data-wd-key":o.id,children:o.title},o.id))),ae.jsx("optgroup",{label:t("Color accessibility"),children:r.filter(o=>(Qi().f[15]++,Qi().s[25]++,o.group==="color-accessibility")).map(o=>(Qi().f[16]++,Qi().s[26]++,ae.jsx("option",{value:o.id,disabled:o.disabled,children:o.title},o.id)))})]})]})]}),ae.jsxs(AD,{wdKey:"nav:language",children:[ae.jsx(wV,{}),ae.jsxs(og,{children:["Language",ae.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:o=>(Qi().f[17]++,Qi().s[27]++,this.handleLanguageChange(o.target.value)),value:this.props.i18n.language,children:Object.entries(yL).map(([o,a])=>(Qi().f[18]++,Qi().s[28]++,ae.jsx("option",{value:o,children:a},o)))})]})]}),ae.jsxs(Vce,{href:"https://github.com/maplibre/maputnik/wiki",children:[ae.jsx(CV,{}),ae.jsx(og,{children:t("Help")})]})]})]})})}}const Zce=(Qi().s[29]++,$s()(Hce));function L2(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return L2=function(){return a},a}L2();class Xce extends Xn.Component{render(){return L2().f[0]++,L2().s[0]++,ae.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function rp(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="1ee946cae22aef585acbff88e7256312e8bd0812",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:7,column:29},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:13,column:6}},2:{start:{line:16,column:4},end:{line:16,column:46}},3:{start:{line:17,column:4},end:{line:26,column:9}},4:{start:{line:29,column:18},end:{line:29,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:20},end:{line:14,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:27,column:3}},line:15}},branchMap:{0:{loc:{start:{line:24,column:6},end:{line:24,column:123}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:23}},{start:{line:24,column:43},end:{line:24,column:123}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AA8BM,SACE,KADF;AA9BN,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAWjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,qBAAC,SAAI,WAAU,mBACnB;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ee946cae22aef585acbff88e7256312e8bd0812"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return rp=function(){return a},a}rp();class $N extends Xn.Component{getChildContext(){return rp().f[0]++,rp().s[1]++,{reactIconBase:{size:14}}}render(){return rp().f[1]++,rp().s[2]++,document.body.dir=this.props.i18n.dir(),rp().s[3]++,ae.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,ae.jsxs("div",{className:"maputnik-layout-main",children:[ae.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),ae.jsx("div",{className:"maputnik-layout-drawer",children:ae.jsx(Xce,{children:this.props.layerEditor})}),this.props.map]}),(rp().b[0][0]++,this.props.bottom&&(rp().b[0][1]++,ae.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})}}In($N,"childContextTypes",(rp().s[0]++,{reactIconBase:pi.object}));const Jce=(rp().s[4]++,$s()($N));function al(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return al=function(){return a},a}al();class VN extends Xn.Component{render(){var o,a;al().f[1]++;const{t:e,selectedLayerIndex:t}=(al().s[1]++,this.props),r=(al().s[2]++,(o=this.props.errors)==null?void 0:o.map((s,h)=>{var b;al().f[2]++;let g;if(al().s[3]++,al().b[1][0]++,s.parsed&&(al().b[1][1]++,s.parsed.type==="layer")){al().b[0][0]++;const{parsed:B}=(al().s[4]++,s),S=(al().s[5]++,(b=this.props.mapStyle)==null?void 0:b.layers[B.data.index].id);al().s[6]++,g=ae.jsxs(ae.Fragment,{children:[ae.jsxs(M0,{t:e,children:["Layer ",ae.jsx("span",{children:qN(S)}),": ",B.data.message]}),(al().b[2][0]++,t!==B.data.index&&(al().b[2][1]++,ae.jsxs(ae.Fragment,{children:[" — ",ae.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(al().f[3]++,al().s[7]++,this.props.onLayerSelect(B.data.index)),children:e("switch to layer")})]})))]})}else al().b[0][1]++,al().s[8]++,g=s.message;return al().s[9]++,ae.jsx("p",{className:"maputnik-message-panel-error",children:g},"error-"+h)})),i=(al().s[10]++,(a=this.props.infos)==null?void 0:a.map((s,h)=>(al().f[4]++,al().s[11]++,ae.jsx("p",{children:s},"info-"+h))));return al().s[12]++,ae.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}In(VN,"defaultProps",(al().s[0]++,{onLayerSelect:()=>{al().f[0]++}}));const ehe=(al().s[13]++,$s()(VN));function F2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="a416dfabb7eaa48bd0505cf98cb9c66326bca3ec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:165}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a416dfabb7eaa48bd0505cf98cb9c66326bca3ec"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return F2=function(){return a},a}F2();class U2 extends Xn.Component{render(){return F2().f[0]++,F2().s[0]++,ae.jsx(M_,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ae.jsx(DN,{...this.props})})}}function z2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4931f85d3ebf1a60a85ac9883e78e028b7a388d8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4931f85d3ebf1a60a85ac9883e78e028b7a388d8"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return z2=function(){return a},a}z2();class op extends Xn.Component{render(){return z2().f[0]++,z2().s[0]++,ae.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ae.jsx(rm,{...this.props})})}}function j2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="37d7b9547efb8875177dbe7a186e7965cd9eb1c0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37d7b9547efb8875177dbe7a186e7965cd9eb1c0"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return j2=function(){return a},a}j2();class Np extends Xn.Component{render(){return j2().f[0]++,j2().s[0]++,ae.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ae.jsx(kf,{...this.props})})}}function N2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="a176a83ddcea7ca7f45b0bf957355a9e0c40a3af",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:160}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAiBQ;AAjBR,OAAO,WAAW;AAClB,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,qBAAqB,iBAAiB,MAAM,UAAyB;AAAA,EACnE,SAAU;AACR,WACE,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WACpD,8BAAC,YAAU,GAAG,KAAK,OAAO,GAC5B;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a176a83ddcea7ca7f45b0bf957355a9e0c40a3af"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return N2=function(){return a},a}N2();class S_ extends Xn.Component{render(){return N2().f[0]++,N2().s[0]++,ae.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ae.jsx(EI,{...this.props})})}}function G2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAM,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return G2=function(){return a},a}G2();class l3 extends Xn.Component{render(){return G2().f[0]++,G2().s[0]++,ae.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ae.jsx(jg,{...this.props})})}}function W2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="5745e67ee75c0f352c022256ef8bf31e8fa7367f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:164}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,aAAW,GAAG,KAAK,OAAO,GAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5745e67ee75c0f352c022256ef8bf31e8fa7367f"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return W2=function(){return a},a}W2();class the extends Xn.Component{render(){return W2().f[0]++,W2().s[0]++,ae.jsx(M_,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ae.jsx(SI,{...this.props})})}}function Q2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="4d9e98bd5e7819496a7ef6b66981b81e318fe1bf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:162}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d9e98bd5e7819496a7ef6b66981b81e318fe1bf"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Q2=function(){return a},a}Q2();class nhe extends Xn.Component{render(){return Q2().f[0]++,Q2().s[0]++,ae.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ae.jsx(KN,{...this.props})})}}function E_(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3f2b222219042b3cb4a75b927d846ca17e6201aa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:26,column:2}},1:{start:{line:1,column:21},end:{line:26,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:26,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3f2b222219042b3cb4a75b927d846ca17e6201aa"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return E_=function(){return a},a}E_();E_().s[0]++;const HN=n=>(E_().f[0]++,E_().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Li(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="2bfcb2bc337b915a29f70f26bbf03f5047260e49",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:295,column:6}},27:{start:{line:298,column:22},end:{line:298,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:296,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:160,column:21},end:{line:160,column:42}},type:"binary-expr",locations:[{start:{line:160,column:21},end:{line:160,column:36}},{start:{line:160,column:40},end:{line:160,column:42}}],line:160},9:{loc:{start:{line:289,column:21},end:{line:289,column:62}},type:"binary-expr",locations:[{start:{line:289,column:21},end:{line:289,column:50}},{start:{line:289,column:54},end:{line:289,column:62}}],line:289}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AA+GM,SACE,KADF;AA/GN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAUhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2bfcb2bc337b915a29f70f26bbf03f5047260e49"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Li=function(){return a},a}Li();class rhe extends Xn.Component{changeTransitionProperty(e,t){Li().f[0]++;const r=(Li().s[0]++,{...this.props.mapStyle.transition});Li().s[1]++,t===void 0?(Li().b[0][0]++,Li().s[2]++,delete r[e]):(Li().b[0][1]++,Li().s[3]++,r[e]=t),Li().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){Li().f[1]++;const r=(Li().s[5]++,{...this.props.mapStyle.light});Li().s[6]++,t===void 0?(Li().b[1][0]++,Li().s[7]++,delete r[e]):(Li().b[1][1]++,Li().s[8]++,r[e]=t),Li().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){Li().f[2]++;const r=(Li().s[10]++,{...this.props.mapStyle.terrain});Li().s[11]++,t===void 0?(Li().b[2][0]++,Li().s[12]++,delete r[e]):(Li().b[2][1]++,Li().s[13]++,r[e]=t),Li().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){Li().f[3]++;const r=(Li().s[15]++,{...this.props.mapStyle});Li().s[16]++,t===void 0?(Li().b[3][0]++,Li().s[17]++,delete r[e]):(Li().b[3][1]++,Li().s[18]++,r[e]=t),Li().s[19]++,this.props.onStyleChanged(r)}render(){Li().f[4]++;const e=(Li().s[20]++,Li().b[4][0]++,this.props.mapStyle.metadata||(Li().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(Li().s[21]++,this.props),o=(Li().s[22]++,HN(t)),a=(Li().s[23]++,Li().b[5][0]++,this.props.mapStyle.light||(Li().b[5][1]++,{})),s=(Li().s[24]++,Li().b[6][0]++,this.props.mapStyle.transition||(Li().b[6][1]++,{})),h=(Li().s[25]++,Li().b[7][0]++,this.props.mapStyle.terrain||(Li().b[7][1]++,{}));return Li().s[26]++,ae.jsx(L0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:ae.jsxs("div",{className:"modal:settings",children:[ae.jsx(Np,{label:t("Name"),fieldSpec:es.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),ae.jsx(Np,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),ae.jsx(S_,{fieldSpec:es.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),ae.jsx(S_,{label:t("Glyphs URL"),fieldSpec:es.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),ae.jsx(Np,{label:o.maputnik.maptiler_access_token.label,fieldSpec:o.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),ae.jsx(Np,{label:o.maputnik.thunderforest_access_token.label,fieldSpec:o.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),ae.jsx(Np,{label:o.maputnik.stadia_access_token.label,fieldSpec:o.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),ae.jsx(U2,{label:t("Center"),fieldSpec:es.$root.center,length:2,type:"number",value:(Li().b[8][0]++,i.center||(Li().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),ae.jsx(op,{label:t("Zoom"),fieldSpec:es.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),ae.jsx(op,{label:t("Bearing"),fieldSpec:es.$root.bearing,value:i.bearing,default:es.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),ae.jsx(op,{label:t("Pitch"),fieldSpec:es.$root.pitch,value:i.pitch,default:es.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),ae.jsx(the,{label:t("Light anchor"),fieldSpec:es.light.anchor,name:"light-anchor",value:a.anchor,options:Object.keys(es.light.anchor.values),default:es.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),ae.jsx(nhe,{label:t("Light color"),fieldSpec:es.light.color,value:a.color,default:es.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),ae.jsx(op,{label:t("Light intensity"),fieldSpec:es.light.intensity,value:a.intensity,default:es.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),ae.jsx(U2,{label:t("Light position"),fieldSpec:es.light.position,type:"number",length:es.light.position.length,value:a.position,default:es.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),ae.jsx(Np,{label:t("Terrain source"),fieldSpec:es.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:h.source,onChange:this.changeTerrainProperty.bind(this,"source")}),ae.jsx(op,{label:t("Terrain exaggeration"),fieldSpec:es.terrain.exaggeration,value:h.exaggeration,default:es.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),ae.jsx(op,{label:t("Transition delay"),fieldSpec:es.transition.delay,value:s.delay,default:es.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),ae.jsx(op,{label:t("Transition duration"),fieldSpec:es.transition.duration,value:s.duration,default:es.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),ae.jsx(l3,{label:o.maputnik.style_renderer.label,fieldSpec:o.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Li().b[9][0]++,e["maputnik:renderer"]||(Li().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const ihe=(Li().s[27]++,$s()(rhe));var Tb={exports:{}},ohe=Tb.exports,cD;function she(){return cD||(cD=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",ohe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),r=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(o,a){if(typeof o!="string")throw new Error("slugify: string argument expected");a=typeof a=="string"?{replacement:a}:a||{};var s=r[a.locale]||{},h=a.replacement===void 0?"-":a.replacement,g=a.trim===void 0?!0:a.trim,b=o.normalize().split("").reduce(function(B,S){var I=s[S];return I===void 0&&(I=t[S]),I===void 0&&(I=S),I===h&&(I=" "),B+I.replace(a.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return a.strict&&(b=b.replace(/[^A-Za-z0-9\s]/g,"")),g&&(b=b.trim()),b=b.replace(/\s+/g,h),a.lower&&(b=b.toLowerCase()),b}return i.extend=function(o){Object.assign(t,o)},i})}(Tb)),Tb.exports}var ahe=she();const lhe=Ka(ahe);var Pb={exports:{}},uhe=Pb.exports,hD;function Ahe(){return hD||(hD=1,function(n,e){(function(t,r){r()})(uhe,function(){function t(g,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function r(g,b,B){var S=new XMLHttpRequest;S.open("GET",g),S.responseType="blob",S.onload=function(){h(S.response,b,B)},S.onerror=function(){console.error("could not download file")},S.send()}function i(g){var b=new XMLHttpRequest;b.open("HEAD",g,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function o(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(b)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(g,b,B){var S=a.URL||a.webkitURL,I=document.createElement("a");b=b||g.name||"download",I.download=b,I.rel="noopener",typeof g=="string"?(I.href=g,I.origin===location.origin?o(I):i(I.href)?r(g,b,B):o(I,I.target="_blank")):(I.href=S.createObjectURL(g),setTimeout(function(){S.revokeObjectURL(I.href)},4e4),setTimeout(function(){o(I)},0))}:"msSaveOrOpenBlob"in navigator?function(g,b,B){if(b=b||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(t(g,B),b);else if(i(g))r(g,b,B);else{var S=document.createElement("a");S.href=g,S.target="_blank",setTimeout(function(){o(S)})}}:function(g,b,B,S){if(S=S||open("","_blank"),S&&(S.document.title=S.document.body.innerText="downloading..."),typeof g=="string")return r(g,b,B);var I=g.type==="application/octet-stream",k=/constructor/i.test(a.HTMLElement)||a.safari,U=/CriOS\/[\d]+/.test(navigator.userAgent);if((U||I&&k||s)&&typeof FileReader<"u"){var z=new FileReader;z.onloadend=function(){var ne=z.result;ne=U?ne:ne.replace(/^data:[^;]*;/,"data:attachment/file;"),S?S.location.href=ne:location=ne,S=null},z.readAsDataURL(g)}else{var Y=a.URL||a.webkitURL,Q=Y.createObjectURL(g);S?S.location=Q:location.href=Q,S=null,setTimeout(function(){Y.revokeObjectURL(Q)},4e4)}});a.saveAs=h.saveAs=h,n.exports=h})}(Pb)),Pb.exports}var dD=Ahe();const che="5.0.1",hhe="get_your_own_OpIi9ZULNHzrESv6T2vL",dhe="b71f7f0ba4064f5eb9e903859a9cf5c6",ZN={openmaptiles:hhe,thunderforest:dhe};function nr(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="c162664fcb147ac7caff0efb860cd8a0c7d435d1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:15,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:17}},5:{start:{line:16,column:2},end:{line:16,column:15}},6:{start:{line:19,column:24},end:{line:23,column:4}},7:{start:{line:20,column:25},end:{line:20,column:37}},8:{start:{line:21,column:4},end:{line:21,column:36}},9:{start:{line:22,column:4},end:{line:22,column:24}},10:{start:{line:24,column:2},end:{line:27,column:4}},11:{start:{line:30,column:2},end:{line:33,column:4}},12:{start:{line:36,column:2},end:{line:36,column:69}},13:{start:{line:39,column:2},end:{line:43,column:3}},14:{start:{line:39,column:15},end:{line:39,column:16}},15:{start:{line:40,column:4},end:{line:42,column:5}},16:{start:{line:41,column:6},end:{line:41,column:15}},17:{start:{line:44,column:2},end:{line:44,column:14}},18:{start:{line:47,column:19},end:{line:47,column:42}},19:{start:{line:48,column:20},end:{line:48,column:67}},20:{start:{line:49,column:2},end:{line:51,column:3}},21:{start:{line:50,column:4},end:{line:50,column:37}},22:{start:{line:52,column:2},end:{line:52,column:21}},23:{start:{line:55,column:17},end:{line:55,column:45}},24:{start:{line:56,column:2},end:{line:56,column:31}},25:{start:{line:56,column:15},end:{line:56,column:31}},26:{start:{line:57,column:2},end:{line:57,column:57}},27:{start:{line:57,column:41},end:{line:57,column:57}},28:{start:{line:58,column:23},end:{line:58,column:33}},29:{start:{line:59,column:2},end:{line:63,column:3}},30:{start:{line:60,column:4},end:{line:60,column:37}},31:{start:{line:61,column:9},end:{line:63,column:3}},32:{start:{line:62,column:4},end:{line:62,column:30}},33:{start:{line:64,column:22},end:{line:64,column:68}},34:{start:{line:65,column:2},end:{line:67,column:3}},35:{start:{line:66,column:4},end:{line:66,column:20}},36:{start:{line:69,column:2},end:{line:73,column:3}},37:{start:{line:70,column:4},end:{line:70,column:55}},38:{start:{line:72,column:4},end:{line:72,column:57}},39:{start:{line:74,column:25},end:{line:80,column:3}},40:{start:{line:81,column:23},end:{line:84,column:3}},41:{start:{line:85,column:2},end:{line:85,column:22}},42:{start:{line:88,column:21},end:{line:88,column:29}},43:{start:{line:89,column:2},end:{line:91,column:5}},44:{start:{line:90,column:4},end:{line:90,column:76}},45:{start:{line:92,column:2},end:{line:100,column:3}},46:{start:{line:93,column:27},end:{line:93,column:73}},47:{start:{line:94,column:4},end:{line:99,column:5}},48:{start:{line:95,column:6},end:{line:98,column:8}},49:{start:{line:101,column:2},end:{line:101,column:22}},50:{start:{line:104,column:26},end:{line:106,column:3}},51:{start:{line:107,column:2},end:{line:107,column:63}},52:{start:{line:108,column:2},end:{line:108,column:64}},53:{start:{line:109,column:2},end:{line:109,column:57}},54:{start:{line:110,column:2},end:{line:113,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:17,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:39},end:{line:28,column:1}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:19,column:41},end:{line:19,column:42}},loc:{start:{line:19,column:52},end:{line:23,column:3}},line:19},4:{name:"ensureHasNoRefs",decl:{start:{line:29,column:9},end:{line:29,column:24}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"ensureStyleValidity",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:36},end:{line:37,column:1}},line:35},6:{name:"indexOfLayer",decl:{start:{line:38,column:9},end:{line:38,column:21}},loc:{start:{line:38,column:39},end:{line:45,column:1}},line:38},7:{name:"getAccessToken",decl:{start:{line:46,column:9},end:{line:46,column:23}},loc:{start:{line:46,column:52},end:{line:53,column:1}},line:46},8:{name:"replaceSourceAccessToken",decl:{start:{line:54,column:9},end:{line:54,column:33}},loc:{start:{line:54,column:67},end:{line:86,column:1}},line:54},9:{name:"replaceAccessTokens",decl:{start:{line:87,column:9},end:{line:87,column:28}},loc:{start:{line:87,column:50},end:{line:102,column:1}},line:87},10:{name:"(anonymous_10)",decl:{start:{line:89,column:40},end:{line:89,column:41}},loc:{start:{line:89,column:56},end:{line:91,column:3}},line:89},11:{name:"stripAccessTokens",decl:{start:{line:103,column:9},end:{line:103,column:26}},loc:{start:{line:103,column:37},end:{line:114,column:1}},line:103}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:47,column:19},end:{line:47,column:42}},type:"binary-expr",locations:[{start:{line:47,column:19},end:{line:47,column:36}},{start:{line:47,column:40},end:{line:47,column:42}}],line:47},4:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:49,column:6},end:{line:49,column:40}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:24}},{start:{line:49,column:28},end:{line:49,column:40}}],line:49},6:{loc:{start:{line:54,column:56},end:{line:54,column:65}},type:"default-arg",locations:[{start:{line:54,column:63},end:{line:54,column:65}}],line:54},7:{loc:{start:{line:56,column:2},end:{line:56,column:31}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:57,column:2},end:{line:57,column:57}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},9:{loc:{start:{line:57,column:6},end:{line:57,column:39}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:24}},{start:{line:57,column:28},end:{line:57,column:39}}],line:57},10:{loc:{start:{line:59,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:63,column:3}},{start:{line:61,column:9},end:{line:63,column:3}}],line:59},11:{loc:{start:{line:59,column:6},end:{line:59,column:89}},type:"binary-expr",locations:[{start:{line:59,column:6},end:{line:59,column:46}},{start:{line:59,column:50},end:{line:59,column:89}}],line:59},12:{loc:{start:{line:61,column:9},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:9},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},13:{loc:{start:{line:61,column:13},end:{line:61,column:70}},type:"binary-expr",locations:[{start:{line:61,column:13},end:{line:61,column:28}},{start:{line:61,column:32},end:{line:61,column:70}}],line:61},14:{loc:{start:{line:65,column:2},end:{line:67,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:67,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},15:{loc:{start:{line:69,column:2},end:{line:73,column:3}},type:"if",locations:[{start:{line:69,column:2},end:{line:73,column:3}},{start:{line:71,column:9},end:{line:73,column:3}}],line:69},16:{loc:{start:{line:87,column:39},end:{line:87,column:48}},type:"default-arg",locations:[{start:{line:87,column:46},end:{line:87,column:48}}],line:87},17:{loc:{start:{line:92,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:92,column:2},end:{line:100,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},18:{loc:{start:{line:92,column:6},end:{line:92,column:114}},type:"binary-expr",locations:[{start:{line:92,column:6},end:{line:92,column:21}},{start:{line:92,column:26},end:{line:92,column:69}},{start:{line:92,column:73},end:{line:92,column:113}}],line:92},19:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0],17:[0,0],18:[0,0,0],19:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAGnB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAkF;AACrG,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAA0C;AACxE,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAA0C;AACjE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAgE;AAC3F,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c162664fcb147ac7caff0efb860cd8a0c7d435d1"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return nr=function(){return a},a}nr();const fhe=(nr().s[0]++,JN({version:8,sources:{},layers:[]}));function XN(){return nr().f[0]++,nr().s[1]++,Math.random().toString(36).substring(2,9)}function phe(n){return nr().f[1]++,nr().s[2]++,nr().b[1][0]++,!("id"in n)||(nr().b[1][1]++,!n.id)?(nr().b[0][0]++,nr().s[3]++,n.id=XN(),nr().s[4]++,n):(nr().b[0][1]++,nr().s[5]++,n)}function mhe(n){nr().f[2]++;const e=(nr().s[6]++,n.layers.map(t=>{nr().f[3]++;const r=(nr().s[7]++,{...t});return nr().s[8]++,delete r.interactive,nr().s[9]++,r}));return nr().s[10]++,{...n,layers:e}}function ghe(n){return nr().f[4]++,nr().s[11]++,{...n,layers:Bq(n.layers)}}function JN(n){return nr().f[5]++,nr().s[12]++,mhe(ghe(phe(n)))}function yhe(n,e){nr().f[6]++,nr().s[13]++;for(let t=(nr().s[14]++,0);t<n.length;t++){if(nr().s[15]++,n[t].id===e)return nr().b[2][0]++,nr().s[16]++,t;nr().b[2][1]++}return nr().s[17]++,null}function OI(n,e,t){nr().f[7]++;const r=(nr().s[18]++,nr().b[3][0]++,e.metadata||(nr().b[3][1]++,{}));let i=(nr().s[19]++,r[`maputnik:${n}_access_token`]);return nr().s[20]++,nr().b[5][0]++,t.allowFallback&&(nr().b[5][1]++,!i)?(nr().b[4][0]++,nr().s[21]++,i=ZN[n]):nr().b[4][1]++,nr().s[22]++,i}function vhe(n,e,t=(nr().b[6][0]++,{})){var g;nr().f[8]++;const r=(nr().s[23]++,n.sources[e]);if(nr().s[24]++,r)nr().b[7][1]++;else return nr().b[7][0]++,nr().s[25]++,n;if(nr().s[26]++,nr().b[9][0]++,!("url"in r)||(nr().b[9][1]++,!r.url))return nr().b[8][0]++,nr().s[27]++,n;nr().b[8][1]++;let i=(nr().s[28]++,e);nr().s[29]++,nr().b[11][0]++,e==="thunderforest_transport"||(nr().b[11][1]++,e==="thunderforest_outdoors")?(nr().b[10][0]++,nr().s[30]++,i="thunderforest"):(nr().b[10][1]++,nr().s[31]++,nr().b[13][0]++,"url"in r&&(nr().b[13][1]++,(g=r.url)==null?void 0:g.match(/\.stadiamaps\.com/))?(nr().b[12][0]++,nr().s[32]++,i="stadia"):nr().b[12][1]++);const o=(nr().s[33]++,OI(i,n,t));if(nr().s[34]++,o)nr().b[14][1]++;else return nr().b[14][0]++,nr().s[35]++,n;let a;nr().s[36]++,i=="stadia"?(nr().b[15][0]++,nr().s[37]++,a=`${r.url}?api_key=${o}`):(nr().b[15][1]++,nr().s[38]++,a=r.url.replace("{key}",o));const s=(nr().s[39]++,{...n.sources,[e]:{...r,url:a}}),h=(nr().s[40]++,{...n,sources:s});return nr().s[41]++,h}function _he(n,e=(nr().b[16][0]++,{})){nr().f[9]++;let t=(nr().s[42]++,n);if(nr().s[43]++,Object.keys(n.sources).forEach(r=>{nr().f[10]++,nr().s[44]++,t=vhe(t,r,e)}),nr().s[45]++,nr().b[18][0]++,n.glyphs&&(nr().b[18][1]++,n.glyphs.match(/\.tilehosting\.com/)||(nr().b[18][2]++,n.glyphs.match(/\.maptiler\.com/)))){nr().b[17][0]++;const r=(nr().s[46]++,OI("openmaptiles",n,e));nr().s[47]++,r?(nr().b[19][0]++,nr().s[48]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):nr().b[19][1]++}else nr().b[17][1]++;return nr().s[49]++,t}function Che(n){nr().f[11]++;const e=(nr().s[50]++,{...n.metadata});return nr().s[51]++,delete e["maputnik:openmaptiles_access_token"],nr().s[52]++,delete e["maputnik:thunderforest_access_token"],nr().s[53]++,delete e["maputnik:stadia_access_token"],nr().s[54]++,{...n,metadata:e}}const cc={ensureStyleValidity:JN,emptyStyle:fhe,indexOfLayer:yhe,generateId:XN,getAccessToken:OI,replaceAccessTokens:_he,stripAccessTokens:Che};function Vr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="66cf81ab709608eec5a644a6a17a019c5afe48ce",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:179,column:6}},46:{start:{line:182,column:20},end:{line:182,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:180,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:168,column:12},end:{line:171,column:16}},type:"binary-expr",locations:[{start:{line:168,column:12},end:{line:168,column:39}},{start:{line:168,column:59},end:{line:171,column:16}}],line:168}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AAErB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAGhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"66cf81ab709608eec5a644a6a17a019c5afe48ce"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Vr=function(){return a},a}Vr();const fD=(Vr().s[0]++,che),pD=(Vr().s[1]++,typeof window.showSaveFilePicker=="function");class bhe extends Xn.Component{tokenizedStyle(){return Vr().f[0]++,Vr().s[2]++,SF(cc.stripAccessTokens(cc.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Vr().f[1]++,Vr().s[3]++,this.props.mapStyle.name?(Vr().b[0][0]++,Vr().s[4]++,lhe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Vr().b[0][1]++,Vr().s[5]++,this.props.mapStyle.id)}createHtml(){Vr().f[2]++;const e=(Vr().s[6]++,this.tokenizedStyle()),t=(Vr().s[7]++,Vr().b[1][0]++,this.props.mapStyle.name||(Vr().b[1][1]++,this.props.t("Map"))),r=(Vr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${fD}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${fD}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Vr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),o=(Vr().s[10]++,this.exportName());Vr().s[11]++,dD.saveAs(i,o+".html")}async saveStyle(){Vr().f[3]++;const e=(Vr().s[12]++,this.tokenizedStyle());if(Vr().s[13]++,pD)Vr().b[2][1]++;else{Vr().b[2][0]++;const i=(Vr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),o=(Vr().s[15]++,this.exportName());Vr().s[16]++,dD.saveAs(i,o+".json"),Vr().s[17]++;return}let t=(Vr().s[18]++,this.props.fileHandle);if(Vr().s[19]++,t==null)if(Vr().b[3][0]++,Vr().s[20]++,t=await this.createFileHandle(),Vr().s[21]++,this.props.onSetFileHandle(t),Vr().s[22]++,t==null){Vr().b[4][0]++,Vr().s[23]++;return}else Vr().b[4][1]++;else Vr().b[3][1]++;const r=(Vr().s[24]++,await t.createWritable());Vr().s[25]++,await r.write(e),Vr().s[26]++,await r.close(),Vr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Vr().f[4]++;const e=(Vr().s[28]++,this.tokenizedStyle()),t=(Vr().s[29]++,await this.createFileHandle());if(Vr().s[30]++,this.props.onSetFileHandle(t),Vr().s[31]++,t==null){Vr().b[5][0]++,Vr().s[32]++;return}else Vr().b[5][1]++;const r=(Vr().s[33]++,await t.createWritable());Vr().s[34]++,await r.write(e),Vr().s[35]++,await r.close(),Vr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Vr().f[5]++;const e=(Vr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Vr().s[38]++,await window.showSaveFilePicker(e));return Vr().s[39]++,this.props.onSetFileHandle(t),Vr().s[40]++,t}changeMetadataProperty(e,t){Vr().f[6]++;const r=(Vr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Vr().s[42]++,this.props.onStyleChanged(r)}render(){Vr().f[7]++;const e=(Vr().s[43]++,this.props.t),t=(Vr().s[44]++,HN(e));return Vr().s[45]++,ae.jsx(L0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:ae.jsxs("section",{className:"maputnik-modal-section",children:[ae.jsx("h1",{children:e("Save Style")}),ae.jsx("p",{children:e("Save the JSON style to your computer.")}),ae.jsxs("div",{children:[ae.jsx(Np,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Vr().b[6][0]++,this.props.mapStyle.metadata||(Vr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),ae.jsx(Np,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Vr().b[7][0]++,this.props.mapStyle.metadata||(Vr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),ae.jsx(Np,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Vr().b[8][0]++,this.props.mapStyle.metadata||(Vr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")})]}),ae.jsxs("div",{className:"maputnik-modal-export-buttons",children:[ae.jsxs(Ya,{onClick:this.saveStyle.bind(this),children:[ae.jsx(t6,{}),e("Save")]}),(Vr().b[9][0]++,pD&&(Vr().b[9][1]++,ae.jsxs(Ya,{onClick:this.saveStyleAs.bind(this),children:[ae.jsx(t6,{}),e("Save as")]}))),ae.jsxs(Ya,{onClick:this.createHtml.bind(this),children:[ae.jsx(RV,{}),e("Create HTML")]})]})]})})}}const xhe=(Vr().s[46]++,$s()(bhe));function q2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="950dd35e62562a3439b74678b95f406e749c6958",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:139}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAWM;AAXN,OAAO,WAAW;AAClB,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OACjC,8BAAC,qBAAmB,GAAG,KAAK,OAAO,GACrC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"950dd35e62562a3439b74678b95f406e749c6958"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return q2=function(){return a},a}q2();class eG extends Xn.Component{render(){return q2().f[0]++,q2().s[0]++,ae.jsx(M_,{label:this.props.label,children:ae.jsx(FN,{...this.props})})}}function Y2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="a27c35e986d22656fa80c276efb67df518853ac2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:132}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAC9B,8BAAC,iBAAe,GAAG,KAAK,OAAO,GACjC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a27c35e986d22656fa80c276efb67df518853ac2"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Y2=function(){return a},a}Y2();class whe extends Xn.Component{render(){return Y2().f[0]++,Y2().s[0]++,ae.jsx(ga,{label:this.props.label,children:ae.jsx(MI,{...this.props})})}}function Zn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="d4e14fa2f16e0b2ba5d431eb89d4dbe2e079b40d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:24},end:{line:259,column:5}},41:{start:{line:260,column:4},end:{line:322,column:5}},42:{start:{line:262,column:8},end:{line:262,column:79}},43:{start:{line:264,column:8},end:{line:264,column:85}},44:{start:{line:266,column:8},end:{line:266,column:77}},45:{start:{line:268,column:8},end:{line:268,column:76}},46:{start:{line:270,column:8},end:{line:270,column:77}},47:{start:{line:272,column:8},end:{line:284,column:13}},48:{start:{line:277,column:36},end:{line:280,column:14}},49:{start:{line:286,column:8},end:{line:286,column:77}},50:{start:{line:288,column:8},end:{line:315,column:13}},51:{start:{line:294,column:38},end:{line:297,column:16}},52:{start:{line:308,column:38},end:{line:311,column:16}},53:{start:{line:317,column:8},end:{line:317,column:74}},54:{start:{line:319,column:8},end:{line:319,column:74}},55:{start:{line:321,column:8},end:{line:321,column:20}},56:{start:{line:325,column:31},end:{line:325,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:323,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:277,column:22},end:{line:277,column:23}},loc:{start:{line:277,column:36},end:{line:280,column:14}},line:277},26:{name:"(anonymous_26)",decl:{start:{line:294,column:24},end:{line:294,column:25}},loc:{start:{line:294,column:38},end:{line:297,column:16}},line:294},27:{name:"(anonymous_27)",decl:{start:{line:308,column:24},end:{line:308,column:25}},loc:{start:{line:308,column:38},end:{line:311,column:16}},line:308}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:260,column:4},end:{line:322,column:5}},type:"switch",locations:[{start:{line:261,column:6},end:{line:262,column:79}},{start:{line:263,column:6},end:{line:264,column:85}},{start:{line:265,column:6},end:{line:266,column:77}},{start:{line:267,column:6},end:{line:268,column:76}},{start:{line:269,column:6},end:{line:270,column:77}},{start:{line:271,column:6},end:{line:284,column:13}},{start:{line:285,column:6},end:{line:286,column:77}},{start:{line:287,column:6},end:{line:315,column:13}},{start:{line:316,column:6},end:{line:317,column:74}},{start:{line:318,column:6},end:{line:319,column:74}},{start:{line:320,column:6},end:{line:321,column:20}}],line:260},4:{loc:{start:{line:281,column:19},end:{line:281,column:86}},type:"binary-expr",locations:[{start:{line:281,column:19},end:{line:281,column:45}},{start:{line:281,column:49},end:{line:281,column:86}}],line:281},5:{loc:{start:{line:298,column:21},end:{line:298,column:92}},type:"binary-expr",locations:[{start:{line:298,column:21},end:{line:298,column:47}},{start:{line:298,column:51},end:{line:298,column:92}}],line:298},6:{loc:{start:{line:312,column:21},end:{line:312,column:92}},type:"binary-expr",locations:[{start:{line:312,column:21},end:{line:312,column:47}},{start:{line:312,column:51},end:{line:312,column:92}}],line:312}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0,0,0,0,0,0,0,0,0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4e14fa2f16e0b2ba5d431eb89d4dbe2e079b40d"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Zn=function(){return a},a}Zn();class tE extends Xn.Component{render(){Zn().f[0]++;const e=(Zn().s[0]++,this.props.t);return Zn().s[1]++,ae.jsxs("div",{children:[ae.jsx(S_,{label:e("TileJSON URL"),fieldSpec:Ys.source_vector.url,value:this.props.source.url,onChange:t=>(Zn().f[1]++,Zn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class nE extends Xn.Component{changeTileUrls(e){Zn().f[2]++,Zn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Zn().f[3]++;const e=(Zn().s[4]++,Zn().b[0][0]++,this.props.source.tiles||(Zn().b[0][1]++,[]));return Zn().s[5]++,ae.jsx(eG,{label:this.props.t("Tile URL"),fieldSpec:Ys.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Zn().f[4]++;const e=(Zn().s[6]++,this.props.t);return Zn().s[7]++,ae.jsxs("div",{children:[this.renderTileUrls(),ae.jsx(l3,{label:e("Scheme Type"),fieldSpec:Ys.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Zn().f[5]++,Zn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),ae.jsx(op,{label:e("Min Zoom"),fieldSpec:Ys.source_vector.minzoom,value:(Zn().b[1][0]++,this.props.source.minzoom||(Zn().b[1][1]++,0)),onChange:t=>(Zn().f[6]++,Zn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),ae.jsx(op,{label:e("Max Zoom"),fieldSpec:Ys.source_vector.maxzoom,value:(Zn().b[2][0]++,this.props.source.maxzoom||(Zn().b[2][1]++,22)),onChange:t=>(Zn().f[7]++,Zn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Zn().s[11]++;const tG=n=>(Zn().f[8]++,Zn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class Mhe extends Xn.Component{render(){Zn().f[9]++;const e=(Zn().s[13]++,this.props.t);Zn().s[14]++;const t=(r,i)=>{Zn().f[10]++;const o=(Zn().s[15]++,this.props.source.coordinates.slice(0));Zn().s[16]++,o[r]=i,Zn().s[17]++,this.props.onChange({...this.props.source,coordinates:o})};return Zn().s[18]++,ae.jsxs("div",{children:[ae.jsx(S_,{label:e("Image URL"),fieldSpec:Ys.source_image.url,value:this.props.source.url,onChange:r=>(Zn().f[11]++,Zn().s[19]++,this.props.onChange({...this.props.source,url:r}))}),tG(e).map(({label:r,key:i},o)=>(Zn().f[12]++,Zn().s[20]++,ae.jsx(U2,{label:r,length:2,type:"number",value:this.props.source.coordinates[o],default:[0,0],onChange:a=>(Zn().f[13]++,Zn().s[21]++,t(o,a))},i)))]})}}class She extends Xn.Component{render(){Zn().f[14]++;const e=(Zn().s[22]++,this.props.t);Zn().s[23]++;const t=(i,o)=>{Zn().f[15]++;const a=(Zn().s[24]++,this.props.source.coordinates.slice(0));Zn().s[25]++,a[i]=o,Zn().s[26]++,this.props.onChange({...this.props.source,coordinates:a})};Zn().s[27]++;const r=i=>{Zn().f[16]++,Zn().s[28]++,this.props.onChange({...this.props.source,urls:i})};return Zn().s[29]++,ae.jsxs("div",{children:[ae.jsx(eG,{label:e("Video URL"),fieldSpec:Ys.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),tG(e).map(({label:i,key:o},a)=>(Zn().f[17]++,Zn().s[30]++,ae.jsx(U2,{label:i,length:2,type:"number",value:this.props.source.coordinates[a],default:[0,0],onChange:s=>(Zn().f[18]++,Zn().s[31]++,t(a,s))},o)))]})}}class Ehe extends Xn.Component{render(){Zn().f[19]++;const e=(Zn().s[32]++,this.props.t);return Zn().s[33]++,ae.jsx(S_,{label:e("GeoJSON URL"),fieldSpec:Ys.source_geojson.data,value:this.props.source.data,onChange:t=>(Zn().f[20]++,Zn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class Bhe extends Xn.Component{render(){Zn().f[21]++;const e=(Zn().s[35]++,this.props.t);return Zn().s[36]++,ae.jsxs("div",{children:[ae.jsx(ga,{label:e("GeoJSON"),fieldSpec:Ys.source_geojson.data,children:ae.jsx(iI,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{Zn().f[22]++,Zn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),ae.jsx(whe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Zn().f[23]++,Zn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class Ohe extends Xn.Component{render(){Zn().f[24]++;const e=(Zn().s[39]++,this.props.t),t=(Zn().s[40]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Zn().s[41]++,this.props.mode){case"geojson_url":return Zn().b[3][0]++,Zn().s[42]++,ae.jsx(Ehe,{...t});case"geojson_json":return Zn().b[3][1]++,Zn().s[43]++,ae.jsx(Bhe,{...t});case"tilejson_vector":return Zn().b[3][2]++,Zn().s[44]++,ae.jsx(tE,{...t});case"tile_vector":return Zn().b[3][3]++,Zn().s[45]++,ae.jsx(nE,{...t});case"tilejson_raster":return Zn().b[3][4]++,Zn().s[46]++,ae.jsx(tE,{...t});case"tile_raster":return Zn().b[3][5]++,Zn().s[47]++,ae.jsx(nE,{...t,children:ae.jsx(op,{label:e("Tile Size"),fieldSpec:Ys.source_raster.tileSize,onChange:r=>(Zn().f[25]++,Zn().s[48]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Zn().b[4][0]++,this.props.source.tileSize||(Zn().b[4][1]++,Ys.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Zn().b[3][6]++,Zn().s[49]++,ae.jsx(tE,{...t});case"tilexyz_raster-dem":return Zn().b[3][7]++,Zn().s[50]++,ae.jsxs(nE,{...t,children:[ae.jsx(op,{label:e("Tile Size"),fieldSpec:Ys.source_raster_dem.tileSize,onChange:r=>(Zn().f[26]++,Zn().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Zn().b[5][0]++,this.props.source.tileSize||(Zn().b[5][1]++,Ys.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),ae.jsx(l3,{label:e("Encoding"),fieldSpec:Ys.source_raster_dem.encoding,options:Object.keys(Ys.source_raster_dem.encoding.values),onChange:r=>(Zn().f[27]++,Zn().s[52]++,this.props.onChange({...this.props.source,encoding:r})),value:(Zn().b[6][0]++,this.props.source.encoding||(Zn().b[6][1]++,Ys.source_raster_dem.encoding.default))})]});case"image":return Zn().b[3][8]++,Zn().s[53]++,ae.jsx(Mhe,{...t});case"video":return Zn().b[3][9]++,Zn().s[54]++,ae.jsx(She,{...t});default:return Zn().b[3][10]++,Zn().s[55]++,null}}}const nG=(Zn().s[56]++,$s()(Ohe));function up(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="315b9927ffd3b5bf51669bb9e53779783a451930",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAEO,gBAAS,aAAa,UAA8B,UAAkB;AAC3E,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAA8B,UAAkB,QAA6B;AACrG,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAA8B,UAAkB,QAA6B;AACxG,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"315b9927ffd3b5bf51669bb9e53779783a451930"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return up=function(){return a},a}up();function Ihe(n,e){up().f[0]++;const t=(up().s[0]++,{...n.sources});return up().s[1]++,delete t[e],up().s[2]++,{...n,sources:t}}function mD(n,e,t){return up().f[1]++,up().s[3]++,rG(n,e,t)}function rG(n,e,t){up().f[2]++;const r=(up().s[4]++,{...n.sources,[e]:t});return up().s[5]++,{...n,sources:r}}const khe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},The={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},Phe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},Rhe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},gD={openmaptiles:khe,thunderforest_transport:The,thunderforest_outdoors:Phe,open_zoomstack:Rhe};function dn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="0667caa48c4612ae19edc85c8f2029433e2c75ea",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:48,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:29}},14:{start:{line:49,column:2},end:{line:55,column:3}},15:{start:{line:50,column:4},end:{line:54,column:5}},16:{start:{line:51,column:6},end:{line:51,column:27}},17:{start:{line:53,column:6},end:{line:53,column:28}},18:{start:{line:56,column:2},end:{line:58,column:3}},19:{start:{line:57,column:4},end:{line:57,column:19}},20:{start:{line:59,column:2},end:{line:61,column:3}},21:{start:{line:60,column:4},end:{line:60,column:19}},22:{start:{line:62,column:2},end:{line:62,column:14}},23:{start:{line:66,column:14},end:{line:66,column:26}},24:{start:{line:67,column:4},end:{line:93,column:9}},25:{start:{line:79,column:27},end:{line:79,column:67}},26:{start:{line:98,column:4},end:{line:98,column:17}},27:{start:{line:99,column:4},end:{line:103,column:6}},28:{start:{line:106,column:19},end:{line:106,column:50}},29:{start:{line:107,column:25},end:{line:107,column:40}},30:{start:{line:108,column:4},end:{line:186,column:5}},31:{start:{line:110,column:8},end:{line:113,column:10}},32:{start:{line:115,column:8},end:{line:119,column:10}},33:{start:{line:121,column:8},end:{line:124,column:10}},34:{start:{line:126,column:8},end:{line:132,column:10}},35:{start:{line:134,column:8},end:{line:137,column:10}},36:{start:{line:139,column:8},end:{line:146,column:10}},37:{start:{line:148,column:8},end:{line:151,column:10}},38:{start:{line:153,column:8},end:{line:159,column:10}},39:{start:{line:161,column:8},end:{line:170,column:10}},40:{start:{line:172,column:8},end:{line:183,column:10}},41:{start:{line:185,column:8},end:{line:185,column:18}},42:{start:{line:188,column:10},end:{line:191,column:3}},43:{start:{line:189,column:33},end:{line:189,column:43}},44:{start:{line:190,column:4},end:{line:190,column:39}},45:{start:{line:192,column:19},end:{line:194,column:3}},46:{start:{line:193,column:4},end:{line:193,column:30}},47:{start:{line:196,column:14},end:{line:196,column:26}},48:{start:{line:197,column:32},end:{line:199,column:5}},49:{start:{line:200,column:4},end:{line:250,column:9}},50:{start:{line:207,column:27},end:{line:207,column:57}},51:{start:{line:228,column:30},end:{line:228,column:87}},52:{start:{line:255,column:27},end:{line:255,column:40}},53:{start:{line:256,column:4},end:{line:256,column:35}},54:{start:{line:257,column:4},end:{line:257,column:26}},55:{start:{line:260,column:28},end:{line:260,column:38}},56:{start:{line:261,column:22},end:{line:261,column:77}},57:{start:{line:262,column:26},end:{line:275,column:6}},58:{start:{line:263,column:21},end:{line:263,column:47}},59:{start:{line:264,column:6},end:{line:274,column:8}},60:{start:{line:269,column:29},end:{line:269,column:93}},61:{start:{line:270,column:26},end:{line:270,column:85}},62:{start:{line:276,column:27},end:{line:288,column:6}},63:{start:{line:276,column:75},end:{line:276,column:106}},64:{start:{line:277,column:21},end:{line:277,column:44}},65:{start:{line:278,column:6},end:{line:287,column:8}},66:{start:{line:284,column:26},end:{line:284,column:107}},67:{start:{line:289,column:4},end:{line:319,column:6}},68:{start:{line:312,column:45},end:{line:312,column:109}},69:{start:{line:322,column:21},end:{line:322,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:63,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:65,column:2},end:{line:65,column:3}},loc:{start:{line:65,column:11},end:{line:94,column:3}},line:65},4:{name:"(anonymous_4)",decl:{start:{line:79,column:21},end:{line:79,column:22}},loc:{start:{line:79,column:27},end:{line:79,column:67}},line:79},5:{name:"(anonymous_5)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:21},end:{line:104,column:3}},line:97},6:{name:"(anonymous_6)",decl:{start:{line:105,column:2},end:{line:105,column:3}},loc:{start:{line:105,column:22},end:{line:187,column:3}},line:105},7:{name:"(anonymous_7)",decl:{start:{line:188,column:10},end:{line:188,column:11}},loc:{start:{line:188,column:16},end:{line:191,column:3}},line:188},8:{name:"(anonymous_8)",decl:{start:{line:192,column:19},end:{line:192,column:20}},loc:{start:{line:192,column:31},end:{line:194,column:3}},line:192},9:{name:"(anonymous_9)",decl:{start:{line:195,column:2},end:{line:195,column:3}},loc:{start:{line:195,column:11},end:{line:251,column:3}},line:195},10:{name:"(anonymous_10)",decl:{start:{line:207,column:20},end:{line:207,column:21}},loc:{start:{line:207,column:27},end:{line:207,column:57}},line:207},11:{name:"(anonymous_11)",decl:{start:{line:228,column:20},end:{line:228,column:21}},loc:{start:{line:228,column:30},end:{line:228,column:87}},line:228},12:{name:"(anonymous_12)",decl:{start:{line:254,column:2},end:{line:254,column:3}},loc:{start:{line:254,column:21},end:{line:258,column:3}},line:254},13:{name:"(anonymous_13)",decl:{start:{line:259,column:2},end:{line:259,column:3}},loc:{start:{line:259,column:11},end:{line:320,column:3}},line:259},14:{name:"(anonymous_14)",decl:{start:{line:262,column:60},end:{line:262,column:61}},loc:{start:{line:262,column:74},end:{line:275,column:5}},line:262},15:{name:"(anonymous_15)",decl:{start:{line:269,column:20},end:{line:269,column:21}},loc:{start:{line:269,column:29},end:{line:269,column:93}},line:269},16:{name:"(anonymous_16)",decl:{start:{line:270,column:20},end:{line:270,column:21}},loc:{start:{line:270,column:26},end:{line:270,column:85}},line:270},17:{name:"(anonymous_17)",decl:{start:{line:276,column:61},end:{line:276,column:62}},loc:{start:{line:276,column:75},end:{line:276,column:106}},line:276},18:{name:"(anonymous_18)",decl:{start:{line:276,column:112},end:{line:276,column:113}},loc:{start:{line:276,column:126},end:{line:288,column:5}},line:276},19:{name:"(anonymous_19)",decl:{start:{line:284,column:20},end:{line:284,column:21}},loc:{start:{line:284,column:26},end:{line:284,column:107}},line:284},20:{name:"(anonymous_20)",decl:{start:{line:312,column:23},end:{line:312,column:24}},loc:{start:{line:312,column:45},end:{line:312,column:109}},line:312}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:48,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:48,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:49,column:2},end:{line:55,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:55,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},7:{loc:{start:{line:50,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:54,column:5}},{start:{line:52,column:11},end:{line:54,column:5}}],line:50},8:{loc:{start:{line:56,column:2},end:{line:58,column:3}},type:"if",locations:[{start:{line:56,column:2},end:{line:58,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:59,column:2},end:{line:61,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:61,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},10:{loc:{start:{line:106,column:19},end:{line:106,column:50}},type:"binary-expr",locations:[{start:{line:106,column:19},end:{line:106,column:44}},{start:{line:106,column:48},end:{line:106,column:50}}],line:106},11:{loc:{start:{line:106,column:20},end:{line:106,column:36}},type:"binary-expr",locations:[{start:{line:106,column:20},end:{line:106,column:30}},{start:{line:106,column:34},end:{line:106,column:36}}],line:106},12:{loc:{start:{line:108,column:4},end:{line:186,column:5}},type:"switch",locations:[{start:{line:109,column:6},end:{line:113,column:10}},{start:{line:114,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:124,column:10}},{start:{line:125,column:6},end:{line:132,column:10}},{start:{line:133,column:6},end:{line:137,column:10}},{start:{line:138,column:6},end:{line:146,column:10}},{start:{line:147,column:6},end:{line:151,column:10}},{start:{line:152,column:6},end:{line:159,column:10}},{start:{line:160,column:6},end:{line:170,column:10}},{start:{line:171,column:6},end:{line:183,column:10}},{start:{line:184,column:6},end:{line:185,column:18}}],line:108},13:{loc:{start:{line:117,column:19},end:{line:117,column:42}},type:"binary-expr",locations:[{start:{line:117,column:19},end:{line:117,column:33}},{start:{line:117,column:37},end:{line:117,column:42}}],line:117},14:{loc:{start:{line:123,column:15},end:{line:123,column:72}},type:"binary-expr",locations:[{start:{line:123,column:15},end:{line:123,column:25}},{start:{line:123,column:29},end:{line:123,column:72}}],line:123},15:{loc:{start:{line:128,column:17},end:{line:128,column:80}},type:"binary-expr",locations:[{start:{line:128,column:17},end:{line:128,column:29}},{start:{line:128,column:33},end:{line:128,column:80}}],line:128},16:{loc:{start:{line:129,column:19},end:{line:129,column:38}},type:"binary-expr",locations:[{start:{line:129,column:19},end:{line:129,column:33}},{start:{line:129,column:37},end:{line:129,column:38}}],line:129},17:{loc:{start:{line:130,column:19},end:{line:130,column:39}},type:"binary-expr",locations:[{start:{line:130,column:19},end:{line:130,column:33}},{start:{line:130,column:37},end:{line:130,column:39}}],line:130},18:{loc:{start:{line:131,column:18},end:{line:131,column:40}},type:"binary-expr",locations:[{start:{line:131,column:18},end:{line:131,column:31}},{start:{line:131,column:35},end:{line:131,column:40}}],line:131},19:{loc:{start:{line:136,column:15},end:{line:136,column:72}},type:"binary-expr",locations:[{start:{line:136,column:15},end:{line:136,column:25}},{start:{line:136,column:29},end:{line:136,column:72}}],line:136},20:{loc:{start:{line:141,column:17},end:{line:141,column:80}},type:"binary-expr",locations:[{start:{line:141,column:17},end:{line:141,column:29}},{start:{line:141,column:33},end:{line:141,column:80}}],line:141},21:{loc:{start:{line:142,column:19},end:{line:142,column:38}},type:"binary-expr",locations:[{start:{line:142,column:19},end:{line:142,column:33}},{start:{line:142,column:37},end:{line:142,column:38}}],line:142},22:{loc:{start:{line:143,column:19},end:{line:143,column:39}},type:"binary-expr",locations:[{start:{line:143,column:19},end:{line:143,column:33}},{start:{line:143,column:37},end:{line:143,column:39}}],line:143},23:{loc:{start:{line:144,column:18},end:{line:144,column:40}},type:"binary-expr",locations:[{start:{line:144,column:18},end:{line:144,column:31}},{start:{line:144,column:35},end:{line:144,column:40}}],line:144},24:{loc:{start:{line:145,column:20},end:{line:145,column:42}},type:"binary-expr",locations:[{start:{line:145,column:20},end:{line:145,column:35}},{start:{line:145,column:39},end:{line:145,column:42}}],line:145},25:{loc:{start:{line:150,column:15},end:{line:150,column:72}},type:"binary-expr",locations:[{start:{line:150,column:15},end:{line:150,column:25}},{start:{line:150,column:29},end:{line:150,column:72}}],line:150},26:{loc:{start:{line:155,column:17},end:{line:155,column:80}},type:"binary-expr",locations:[{start:{line:155,column:17},end:{line:155,column:29}},{start:{line:155,column:33},end:{line:155,column:80}}],line:155},27:{loc:{start:{line:156,column:19},end:{line:156,column:38}},type:"binary-expr",locations:[{start:{line:156,column:19},end:{line:156,column:33}},{start:{line:156,column:37},end:{line:156,column:38}}],line:156},28:{loc:{start:{line:157,column:19},end:{line:157,column:39}},type:"binary-expr",locations:[{start:{line:157,column:19},end:{line:157,column:33}},{start:{line:157,column:37},end:{line:157,column:39}}],line:157},29:{loc:{start:{line:158,column:20},end:{line:158,column:42}},type:"binary-expr",locations:[{start:{line:158,column:20},end:{line:158,column:35}},{start:{line:158,column:39},end:{line:158,column:42}}],line:158}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0,0,0,0,0,0,0,0,0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAgCU,cACA,YADA;AAhCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAU1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0667caa48c4612ae19edc85c8f2029433e2c75ea"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return dn=function(){return a},a}dn();class Khe extends Xn.Component{render(){return dn().f[0]++,dn().s[0]++,ae.jsx("div",{className:"maputnik-public-source",children:ae.jsxs(Ya,{className:"maputnik-public-source-select",onClick:()=>(dn().f[1]++,dn().s[1]++,this.props.onSelect(this.props.id)),children:[ae.jsxs("div",{className:"maputnik-public-source-info",children:[ae.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),ae.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),ae.jsx("span",{className:"maputnik-space"}),ae.jsx(IF,{})]})})}}function Dhe(n){return dn().f[2]++,dn().s[2]++,n.type==="raster"?(dn().b[0][0]++,dn().s[3]++,n.tiles?(dn().b[1][0]++,dn().s[4]++,"tile_raster"):(dn().b[1][1]++,dn().s[5]++,"tilejson_raster")):(dn().b[0][1]++,dn().s[6]++,n.type==="raster-dem"?(dn().b[2][0]++,dn().s[7]++,n.tiles?(dn().b[3][0]++,dn().s[8]++,"tilexyz_raster-dem"):(dn().b[3][1]++,dn().s[9]++,"tilejson_raster-dem")):(dn().b[2][1]++,dn().s[10]++,n.type==="vector"?(dn().b[4][0]++,dn().s[11]++,n.tiles?(dn().b[5][0]++,dn().s[12]++,"tile_vector"):(dn().b[5][1]++,dn().s[13]++,"tilejson_vector")):(dn().b[4][1]++,dn().s[14]++,n.type==="geojson"?(dn().b[6][0]++,dn().s[15]++,typeof n.data=="string"?(dn().b[7][0]++,dn().s[16]++,"geojson_url"):(dn().b[7][1]++,dn().s[17]++,"geojson_json")):(dn().b[6][1]++,dn().s[18]++,n.type==="image"?(dn().b[8][0]++,dn().s[19]++,"image"):(dn().b[8][1]++,dn().s[20]++,n.type==="video"?(dn().b[9][0]++,dn().s[21]++,"video"):(dn().b[9][1]++,dn().s[22]++,null))))))}class Lhe extends Xn.Component{render(){dn().f[3]++;const e=(dn().s[23]++,this.props.t);return dn().s[24]++,ae.jsxs("div",{className:"maputnik-active-source-type-editor",children:[ae.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[ae.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),ae.jsx("span",{className:"maputnik-space"}),ae.jsx(Ya,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(dn().f[4]++,dn().s[25]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:ae.jsx(ky,{})})]}),ae.jsx("div",{className:"maputnik-active-source-type-editor-content",children:ae.jsx(nG,{onChange:this.props.onChange,mode:Dhe(this.props.source),source:this.props.source})})]})}}class Fhe extends Xn.Component{constructor(t){dn().f[5]++,dn().s[26]++;super(t);In(this,"onAdd",(dn().s[42]++,()=>{dn().f[7]++;const{source:t,sourceId:r}=(dn().s[43]++,this.state);dn().s[44]++,this.props.onAdd(r,t)}));In(this,"onChangeSource",(dn().s[45]++,t=>{dn().f[8]++,dn().s[46]++,this.setState({source:t})}));dn().s[27]++,this.state={mode:"tilejson_vector",sourceId:cc.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(t){dn().f[6]++;const r=(dn().s[28]++,dn().b[10][0]++,(dn().b[11][0]++,this.state||(dn().b[11][1]++,{})).source||(dn().b[10][1]++,{})),{protocol:i}=(dn().s[29]++,window.location);switch(dn().s[30]++,t){case"geojson_url":return dn().b[12][0]++,dn().s[31]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return dn().b[12][1]++,dn().s[32]++,{type:"geojson",cluster:(dn().b[13][0]++,r.cluster||(dn().b[13][1]++,!1)),data:""};case"tilejson_vector":return dn().b[12][2]++,dn().s[33]++,{type:"vector",url:(dn().b[14][0]++,r.url||(dn().b[14][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return dn().b[12][3]++,dn().s[34]++,{type:"vector",tiles:(dn().b[15][0]++,r.tiles||(dn().b[15][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(dn().b[16][0]++,r.minzoom||(dn().b[16][1]++,0)),maxzoom:(dn().b[17][0]++,r.maxzoom||(dn().b[17][1]++,14)),scheme:(dn().b[18][0]++,r.scheme||(dn().b[18][1]++,"xyz"))};case"tilejson_raster":return dn().b[12][4]++,dn().s[35]++,{type:"raster",url:(dn().b[19][0]++,r.url||(dn().b[19][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return dn().b[12][5]++,dn().s[36]++,{type:"raster",tiles:(dn().b[20][0]++,r.tiles||(dn().b[20][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(dn().b[21][0]++,r.minzoom||(dn().b[21][1]++,0)),maxzoom:(dn().b[22][0]++,r.maxzoom||(dn().b[22][1]++,14)),scheme:(dn().b[23][0]++,r.scheme||(dn().b[23][1]++,"xyz")),tileSize:(dn().b[24][0]++,r.tileSize||(dn().b[24][1]++,512))};case"tilejson_raster-dem":return dn().b[12][6]++,dn().s[37]++,{type:"raster-dem",url:(dn().b[25][0]++,r.url||(dn().b[25][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return dn().b[12][7]++,dn().s[38]++,{type:"raster-dem",tiles:(dn().b[26][0]++,r.tiles||(dn().b[26][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(dn().b[27][0]++,r.minzoom||(dn().b[27][1]++,0)),maxzoom:(dn().b[28][0]++,r.maxzoom||(dn().b[28][1]++,14)),tileSize:(dn().b[29][0]++,r.tileSize||(dn().b[29][1]++,512))};case"image":return dn().b[12][8]++,dn().s[39]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return dn().b[12][9]++,dn().s[40]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return dn().b[12][10]++,dn().s[41]++,{}}}render(){dn().f[9]++;const t=(dn().s[47]++,this.props.t),r=(dn().s[48]++,{doc:es.source_vector.type.doc});return dn().s[49]++,ae.jsxs("div",{className:"maputnik-add-source",children:[ae.jsx(Np,{label:t("Source ID"),fieldSpec:{doc:t("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(dn().f[10]++,dn().s[50]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),ae.jsx(l3,{label:t("Source Type"),fieldSpec:r,options:[["geojson_json",t("GeoJSON (JSON)")],["geojson_url",t("GeoJSON (URL)")],["tilejson_vector",t("Vector (TileJSON URL)")],["tile_vector",t("Vector (Tile URLs)")],["tilejson_raster",t("Raster (TileJSON URL)")],["tile_raster",t("Raster (Tile URLs)")],["tilejson_raster-dem",t("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",t("Raster DEM (XYZ URLs)")],["image",t("Image")],["video",t("Video")]],onChange:i=>(dn().f[11]++,dn().s[51]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),ae.jsx(nG,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),ae.jsx(Ya,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:t("Add Source")})]})}}class Uhe extends Xn.Component{stripTitle(e){dn().f[12]++;const t=(dn().s[52]++,{...e});return dn().s[53]++,delete t.title,dn().s[54]++,t}render(){dn().f[13]++;const{t:e,mapStyle:t}=(dn().s[55]++,this.props),r=(dn().s[56]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(dn().s[57]++,Object.keys(t.sources).map(a=>{dn().f[14]++;const s=(dn().s[58]++,t.sources[a]);return dn().s[59]++,ae.jsx(Lhe,{sourceId:a,source:s,onChange:h=>(dn().f[15]++,dn().s[60]++,this.props.onStyleChanged(rG(t,a,h))),onDelete:()=>(dn().f[16]++,dn().s[61]++,this.props.onStyleChanged(Ihe(t,a))),...r},a)})),o=(dn().s[62]++,Object.keys(gD).filter(a=>(dn().f[17]++,dn().s[63]++,!(a in t.sources))).map(a=>{dn().f[18]++;const s=(dn().s[64]++,gD[a]);return dn().s[65]++,ae.jsx(Khe,{id:a,type:s.type,title:s.title,onSelect:()=>(dn().f[19]++,dn().s[66]++,this.props.onStyleChanged(mD(t,a,this.stripTitle(s))))},a)}));return dn().s[67]++,ae.jsxs(L0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[ae.jsxs("section",{className:"maputnik-modal-section",children:[ae.jsx("h1",{children:e("Active Sources")}),i]}),ae.jsxs("section",{className:"maputnik-modal-section",children:[ae.jsx("h1",{children:e("Choose Public Source")}),ae.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),ae.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:o})]}),ae.jsxs("section",{className:"maputnik-modal-section",children:[ae.jsx("h1",{children:e("Add New Source")}),ae.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),ae.jsx(Fhe,{onAdd:(a,s)=>(dn().f[20]++,dn().s[68]++,this.props.onStyleChanged(mD(t,a,s))),...r})]})]})}}const zhe=(dn().s[69]++,$s()(Uhe));var gb={},yD;function jhe(){if(yD)return gb;yD=1,Object.defineProperty(gb,"__esModule",{value:!0});var n=Object.assign||function(k){for(var U=1;U<arguments.length;U++){var z=arguments[U];for(var Y in z)Object.prototype.hasOwnProperty.call(z,Y)&&(k[Y]=z[Y])}return k},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},t=function(){function k(U,z){for(var Y=0;Y<z.length;Y++){var Q=z[Y];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(U,Q.key,Q)}}return function(U,z,Y){return z&&k(U.prototype,z),Y&&k(U,Y),U}}(),r=Da(),i=h(r),o=O_(),a=s(o);function s(k){return k&&k.__esModule?k:{default:k}}function h(k){if(k&&k.__esModule)return k;var U={};if(k!=null)for(var z in k)Object.prototype.hasOwnProperty.call(k,z)&&(U[z]=k[z]);return U.default=k,U}function g(k,U){var z={};for(var Y in k)U.indexOf(Y)>=0||Object.prototype.hasOwnProperty.call(k,Y)&&(z[Y]=k[Y]);return z}function b(k,U){if(!(k instanceof U))throw new TypeError("Cannot call a class as a function")}function B(k,U){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:k}function S(k,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);k.prototype=Object.create(U&&U.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(k,U):k.__proto__=U)}var I=function(k){S(U,k);function U(z){b(this,U);var Y=B(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,z));Y.handleChange=function(ne){var X=Array.prototype.slice.call(ne.target.files),q=(Y.props.as||"url").toLowerCase();Promise.all(X.map(function(J){return new Promise(function(N,ie){var he=new FileReader;switch(he.onload=function(ce){N([ce,J])},q){case"binary":{he.readAsBinaryString(J);break}case"buffer":{he.readAsArrayBuffer(J);break}case"text":{he.readAsText(J);break}case"url":{he.readAsDataURL(J);break}}})})).then(function(J){Y.props.onChange(ne,J)})},Y.triggerInput=function(){var ne=a.default.findDOMNode(Y._reactFileReaderInput);ne&&ne.click()};var Q=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!Q.File||!Q.FileReader||!Q.FileList||!Q.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),Y}return t(U,[{key:"render",value:function(){var Y=this,Q=this.props;Q.as;var ne=Q.children,X=Q.style,q=g(Q,["as","children","style"]),J=ne?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:X},i.createElement("input",n({},q,{type:"file",ref:function(ie){Y._reactFileReaderInput=ie},onChange:this.handleChange,onClick:function(){Y._reactFileReaderInput.value=null},style:J})),ne)}}]),U}(i.Component);return gb.default=I,gb}var Nhe=jhe();const Ghe=Ka(Nhe);function pd(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return pd=function(){return a},a}pd();class Whe extends Xn.Component{underlayOnClick(e){pd().f[0]++,pd().s[0]++,e.stopPropagation()}render(){pd().f[1]++;const e=(pd().s[1]++,this.props.t);return pd().s[2]++,ae.jsxs(L0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(pd().f[2]++,pd().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(pd().f[3]++,pd().s[4]++,this.props.onCancel()),children:[ae.jsx("p",{children:this.props.message}),ae.jsx("p",{className:"maputnik-dialog__buttons",children:ae.jsx(Ya,{onClick:t=>(pd().f[4]++,pd().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const Qhe=(pd().s[6]++,$s()(Whe)),iG=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"os-zoomstack-light",title:"Zoomstack Light",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-light/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-light.png"},{id:"os-zoomstack-night",title:"Zoomstack Night",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-night/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-night.png"},{id:"os-zoomstack-outdoor",title:"Zoomstack Outdoor",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-outdoor/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-outdoor.png"},{id:"os-zoomstack-road",title:"Zoomstack Road",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-road/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-road.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function tr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return tr=function(){return a},a}tr();class qhe extends Xn.Component{render(){return tr().f[0]++,tr().s[0]++,ae.jsx("div",{className:"maputnik-public-style",children:ae.jsxs(Ya,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(tr().f[1]++,tr().s[1]++,this.props.onSelect(this.props.url)),children:[ae.jsxs("div",{className:"maputnik-public-style-header",children:[ae.jsx("div",{children:this.props.title}),ae.jsx("span",{className:"maputnik-space"}),ae.jsx(IF,{})]}),ae.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class Yhe extends Xn.Component{constructor(t){tr().f[2]++,tr().s[2]++;super(t);In(this,"onStyleSelect",(tr().s[10]++,t=>{tr().f[5]++,tr().s[11]++,this.clearError();let r=(tr().s[12]++,!1);tr().s[13]++,fetch(t,{mode:"cors",credentials:"same-origin"}).then(function(i){return tr().f[6]++,tr().s[14]++,i.json()}).then(i=>{if(tr().f[7]++,tr().s[15]++,r){tr().b[2][0]++,tr().s[16]++;return}else tr().b[2][1]++;tr().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const o=(tr().s[18]++,cc.ensureStyleValidity(i));tr().s[19]++,console.log("Loaded style ",o.id),tr().s[20]++,this.props.onStyleOpen(o),tr().s[21]++,this.onOpenToggle()}).catch(i=>{tr().f[8]++,tr().s[22]++,this.setState({error:`Failed to load: '${t}'`,activeRequest:null,activeRequestUrl:null}),tr().s[23]++,console.error(i),tr().s[24]++,console.warn("Could not open the style URL",t)}),tr().s[25]++,this.setState({activeRequest:{abort:function(){tr().f[9]++,tr().s[26]++,r=!0}},activeRequestUrl:t})}));In(this,"onSubmitUrl",(tr().s[27]++,t=>{tr().f[10]++,tr().s[28]++,t.preventDefault(),tr().s[29]++,this.onStyleSelect(this.state.styleUrl)}));In(this,"onOpenFile",(tr().s[30]++,async()=>{tr().f[11]++,tr().s[31]++,this.clearError();const t=(tr().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[r]=(tr().s[33]++,await window.showOpenFilePicker(t)),i=(tr().s[34]++,await r.getFile()),o=(tr().s[35]++,await i.text());let a;tr().s[36]++;try{tr().s[37]++,a=JSON.parse(o)}catch(s){tr().s[38]++,this.setState({error:s.toString()}),tr().s[39]++;return}return tr().s[40]++,a=cc.ensureStyleValidity(a),tr().s[41]++,this.props.onStyleOpen(a,r),tr().s[42]++,this.onOpenToggle(),tr().s[43]++,i}));In(this,"onFileChanged",(tr().s[44]++,async(t,r)=>{tr().f[12]++;const[,i]=(tr().s[45]++,r[0]),o=(tr().s[46]++,new FileReader);tr().s[47]++,this.clearError(),tr().s[48]++,o.readAsText(i,"UTF-8"),tr().s[49]++,o.onload=a=>{var h;tr().f[13]++;let s;tr().s[50]++;try{tr().s[51]++,s=JSON.parse((h=a.target)==null?void 0:h.result)}catch(g){tr().s[52]++,this.setState({error:g.toString()}),tr().s[53]++;return}tr().s[54]++,s=cc.ensureStyleValidity(s),tr().s[55]++,this.props.onStyleOpen(s),tr().s[56]++,this.onOpenToggle()},tr().s[57]++,o.onerror=a=>(tr().f[14]++,tr().s[58]++,console.log(a.target))}));In(this,"onChangeUrl",(tr().s[62]++,t=>{tr().f[16]++,tr().s[63]++,this.setState({styleUrl:t})}));tr().s[3]++,this.state={styleUrl:""}}clearError(){tr().f[3]++,tr().s[4]++,this.setState({error:null})}onCancelActiveRequest(t){tr().f[4]++,tr().s[5]++,t?(tr().b[0][0]++,tr().s[6]++,t.stopPropagation()):tr().b[0][1]++,tr().s[7]++,this.state.activeRequest?(tr().b[1][0]++,tr().s[8]++,this.state.activeRequest.abort(),tr().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):tr().b[1][1]++}onOpenToggle(){tr().f[15]++,tr().s[59]++,this.setState({styleUrl:""}),tr().s[60]++,this.clearError(),tr().s[61]++,this.props.onOpenToggle()}render(){tr().f[17]++;const t=(tr().s[64]++,this.props.t),r=(tr().s[65]++,iG.map(o=>(tr().f[18]++,tr().s[66]++,ae.jsx(qhe,{url:o.url,title:o.title,thumbnailUrl:o.thumbnail,onSelect:this.onStyleSelect},o.id))));let i;return tr().s[67]++,this.state.error?(tr().b[3][0]++,tr().s[68]++,i=ae.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ae.jsx("a",{href:"#",onClick:()=>(tr().f[19]++,tr().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:"×"})]})):tr().b[3][1]++,tr().s[70]++,ae.jsxs("div",{children:[ae.jsxs(L0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(tr().f[20]++,tr().s[71]++,this.onOpenToggle()),title:t("Open Style"),children:[i,ae.jsxs("section",{className:"maputnik-modal-section",children:[ae.jsx("h1",{children:t("Open local Style")}),ae.jsx("p",{children:t("Open a local JSON style from your computer.")}),ae.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(tr().b[4][0]++,ae.jsxs(Ya,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[ae.jsx(u7,{})," ",t("Open Style")]})):(tr().b[4][1]++,ae.jsx(Ghe,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":t("Open Style"),children:ae.jsxs(Ya,{className:"maputnik-upload-button",children:[ae.jsx(u7,{})," ",t("Open Style")]})}))})]}),ae.jsx("section",{className:"maputnik-modal-section",children:ae.jsxs("form",{onSubmit:this.onSubmitUrl,children:[ae.jsx("h1",{children:t("Load from URL")}),ae.jsx("p",{children:ae.jsxs(M0,{t,children:["Load from a URL. Note that the URL must have ",ae.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),ae.jsx(EI,{"aria-label":t("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:t("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),ae.jsx("div",{children:ae.jsx(Ya,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),ae.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[ae.jsx("h1",{children:t("Gallery Styles")}),ae.jsx("p",{children:t("Open one of the publicly available styles to start from.")}),ae.jsx("div",{className:"maputnik-style-gallery-container",children:r})]})]}),ae.jsx(Qhe,{isOpen:!!this.state.activeRequest,title:t("Loading style"),onCancel:o=>(tr().f[21]++,tr().s[72]++,this.onCancelActiveRequest(o)),message:t("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const $he=(tr().s[73]++,$s()(Yhe));function bf(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return bf=function(){return a},a}bf();class Vhe extends Xn.Component{render(){bf().f[0]++;const e=(bf().s[0]++,this.props.t),t=(bf().s[1]++,[{key:ae.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:ae.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:ae.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:ae.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:ae.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:ae.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:ae.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:ae.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(bf().s[2]++,[{key:ae.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:ae.jsxs(ae.Fragment,{children:[ae.jsx("kbd",{children:"Shift"})," + ",ae.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:ae.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:ae.jsxs(ae.Fragment,{children:[ae.jsx("kbd",{children:"Shift"})," + ",ae.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:ae.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:ae.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:ae.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:ae.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:ae.jsxs(ae.Fragment,{children:[ae.jsx("kbd",{children:"Shift"})," + ",ae.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:ae.jsxs(ae.Fragment,{children:[ae.jsx("kbd",{children:"Shift"})," + ",ae.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:ae.jsxs(ae.Fragment,{children:[ae.jsx("kbd",{children:"Shift"})," + ",ae.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:ae.jsxs(ae.Fragment,{children:[ae.jsx("kbd",{children:"Shift"})," + ",ae.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return bf().s[3]++,ae.jsx(L0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:ae.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ae.jsx("p",{children:ae.jsxs(M0,{t:e,children:["Press ",ae.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),ae.jsx("dl",{children:t.map((i,o)=>(bf().f[1]++,bf().s[4]++,ae.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[ae.jsx("dt",{children:i.key},"dt"+o),ae.jsx("dd",{children:i.text},"dd"+o)]},o)))}),ae.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),ae.jsx("ul",{children:r.map((i,o)=>(bf().f[2]++,bf().s[5]++,ae.jsxs("li",{children:[ae.jsx("span",{children:i.key})," ",i.text]},o)))})]})})}}const Hhe=(bf().s[6]++,$s()(Vhe));function nA(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return nA=function(){return a},a}nA();class Zhe extends Xn.Component{render(){nA().f[0]++;const{t:e,mapView:t}=(nA().s[0]++,this.props),r=(nA().s[1]++,Math.round(t.zoom)+1),i=(nA().s[2]++,+t.center.lng.toFixed(5)),o=(nA().s[3]++,+t.center.lat.toFixed(5));return nA().s[4]++,ae.jsxs(L0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[ae.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ae.jsx("h1",{children:e("Options")}),(nA().b[0][0]++,this.props.renderer==="mlgljs"&&(nA().b[0][1]++,ae.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([a,s])=>(nA().f[1]++,nA().s[5]++,ae.jsx("li",{children:ae.jsxs("label",{children:[ae.jsx("input",{type:"checkbox",checked:s,onChange:h=>(nA().f[2]++,nA().s[6]++,this.props.onChangeMaplibreGlDebug(a,h.target.checked))})," ",a]})},a)))}))),(nA().b[1][0]++,this.props.renderer==="ol"&&(nA().b[1][1]++,ae.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([a,s])=>(nA().f[3]++,nA().s[7]++,ae.jsx("li",{children:ae.jsxs("label",{children:[ae.jsx("input",{type:"checkbox",checked:s,onChange:h=>(nA().f[4]++,nA().s[8]++,this.props.onChangeOpenlayersDebug(a,h.target.checked))})," ",a]})},a)))})))]}),ae.jsxs("section",{className:"maputnik-modal-section",children:[ae.jsx("h1",{children:"Links"}),ae.jsx("p",{children:ae.jsxs(M0,{t:e,children:[ae.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${o}/${i}`,children:"Open in OSM"})," — Opens the current view on openstreetmap.org"]})})]})]})}}const Xhe=(nA().s[9]++,$s()(Zhe));var sg={},Kv={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var Jhe=Kv.exports,vD;function ede(){return vD||(vD=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=!n.nodeType&&n,o=typeof window=="object"&&window;(o.global===o||o.window===o||o.self===o)&&(t=o);var a,s=2147483647,h=36,g=1,b=26,B=38,S=700,I=72,k=128,U="-",z=/^xn--/,Y=/[^\x20-\x7E]/,Q=/[\x2E\u3002\uFF0E\uFF61]/g,ne={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=h-g,q=Math.floor,J=String.fromCharCode,N;function ie(Te){throw new RangeError(ne[Te])}function he(Te,Ue){for(var st=Te.length,wt=[];st--;)wt[st]=Ue(Te[st]);return wt}function ce(Te,Ue){var st=Te.split("@"),wt="";st.length>1&&(wt=st[0]+"@",Te=st[1]),Te=Te.replace(Q,".");var mt=Te.split("."),ft=he(mt,Ue).join(".");return wt+ft}function we(Te){for(var Ue=[],st=0,wt=Te.length,mt,ft;st<wt;)mt=Te.charCodeAt(st++),mt>=55296&&mt<=56319&&st<wt?(ft=Te.charCodeAt(st++),(ft&64512)==56320?Ue.push(((mt&1023)<<10)+(ft&1023)+65536):(Ue.push(mt),st--)):Ue.push(mt);return Ue}function pe(Te){return he(Te,function(Ue){var st="";return Ue>65535&&(Ue-=65536,st+=J(Ue>>>10&1023|55296),Ue=56320|Ue&1023),st+=J(Ue),st}).join("")}function Ce(Te){return Te-48<10?Te-22:Te-65<26?Te-65:Te-97<26?Te-97:h}function Pe(Te,Ue){return Te+22+75*(Te<26)-((Ue!=0)<<5)}function de(Te,Ue,st){var wt=0;for(Te=st?q(Te/S):Te>>1,Te+=q(Te/Ue);Te>X*b>>1;wt+=h)Te=q(Te/X);return q(wt+(X+1)*Te/(Te+B))}function rt(Te){var Ue=[],st=Te.length,wt,mt=0,ft=k,Ut=I,Lt,De,ke,Oe,Je,Mt,gt,Nt,nn;for(Lt=Te.lastIndexOf(U),Lt<0&&(Lt=0),De=0;De<Lt;++De)Te.charCodeAt(De)>=128&&ie("not-basic"),Ue.push(Te.charCodeAt(De));for(ke=Lt>0?Lt+1:0;ke<st;){for(Oe=mt,Je=1,Mt=h;ke>=st&&ie("invalid-input"),gt=Ce(Te.charCodeAt(ke++)),(gt>=h||gt>q((s-mt)/Je))&&ie("overflow"),mt+=gt*Je,Nt=Mt<=Ut?g:Mt>=Ut+b?b:Mt-Ut,!(gt<Nt);Mt+=h)nn=h-Nt,Je>q(s/nn)&&ie("overflow"),Je*=nn;wt=Ue.length+1,Ut=de(mt-Oe,wt,Oe==0),q(mt/wt)>s-ft&&ie("overflow"),ft+=q(mt/wt),mt%=wt,Ue.splice(mt++,0,ft)}return pe(Ue)}function ze(Te){var Ue,st,wt,mt,ft,Ut,Lt,De,ke,Oe,Je,Mt=[],gt,Nt,nn,en;for(Te=we(Te),gt=Te.length,Ue=k,st=0,ft=I,Ut=0;Ut<gt;++Ut)Je=Te[Ut],Je<128&&Mt.push(J(Je));for(wt=mt=Mt.length,mt&&Mt.push(U);wt<gt;){for(Lt=s,Ut=0;Ut<gt;++Ut)Je=Te[Ut],Je>=Ue&&Je<Lt&&(Lt=Je);for(Nt=wt+1,Lt-Ue>q((s-st)/Nt)&&ie("overflow"),st+=(Lt-Ue)*Nt,Ue=Lt,Ut=0;Ut<gt;++Ut)if(Je=Te[Ut],Je<Ue&&++st>s&&ie("overflow"),Je==Ue){for(De=st,ke=h;Oe=ke<=ft?g:ke>=ft+b?b:ke-ft,!(De<Oe);ke+=h)en=De-Oe,nn=h-Oe,Mt.push(J(Pe(Oe+en%nn,0))),De=q(en/nn);Mt.push(J(Pe(De,0))),ft=de(st,Nt,wt==mt),st=0,++wt}++st,++Ue}return Mt.join("")}function Qe(Te){return ce(Te,function(Ue){return z.test(Ue)?rt(Ue.slice(4).toLowerCase()):Ue})}function ut(Te){return ce(Te,function(Ue){return Y.test(Ue)?"xn--"+ze(Ue):Ue})}if(a={version:"1.4.1",ucs2:{decode:we,encode:pe},decode:rt,encode:ze,toASCII:ut,toUnicode:Qe},r&&i)if(n.exports==r)i.exports=a;else for(N in a)a.hasOwnProperty(N)&&(r[N]=a[N]);else t.punycode=a})(Jhe)}(Kv,Kv.exports)),Kv.exports}var rE,_D;function tde(){return _D||(_D=1,rE=Error),rE}var iE,CD;function nde(){return CD||(CD=1,iE=EvalError),iE}var oE,bD;function rde(){return bD||(bD=1,oE=RangeError),oE}var sE,xD;function ide(){return xD||(xD=1,sE=ReferenceError),sE}var aE,wD;function oG(){return wD||(wD=1,aE=SyntaxError),aE}var lE,MD;function iC(){return MD||(MD=1,lE=TypeError),lE}var uE,SD;function ode(){return SD||(SD=1,uE=URIError),uE}var AE,ED;function sde(){return ED||(ED=1,AE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),AE}var cE,BD;function ade(){if(BD)return cE;BD=1;var n=typeof Symbol<"u"&&Symbol,e=sde();return cE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},cE}var hE,OD;function lde(){if(OD)return hE;OD=1;var n={__proto__:null,foo:{}},e=Object;return hE=function(){return{__proto__:n}.foo===n.foo&&!(n instanceof e)},hE}var dE,ID;function ude(){if(ID)return dE;ID=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(h,g){for(var b=[],B=0;B<h.length;B+=1)b[B]=h[B];for(var S=0;S<g.length;S+=1)b[S+h.length]=g[S];return b},o=function(h,g){for(var b=[],B=g,S=0;B<h.length;B+=1,S+=1)b[S]=h[B];return b},a=function(s,h){for(var g="",b=0;b<s.length;b+=1)g+=s[b],b+1<s.length&&(g+=h);return g};return dE=function(h){var g=this;if(typeof g!="function"||e.apply(g)!==r)throw new TypeError(n+g);for(var b=o(arguments,1),B,S=function(){if(this instanceof B){var Y=g.apply(this,i(b,arguments));return Object(Y)===Y?Y:this}return g.apply(h,i(b,arguments))},I=t(0,g.length-b.length),k=[],U=0;U<I;U++)k[U]="$"+U;if(B=Function("binder","return function ("+a(k,",")+"){ return binder.apply(this,arguments); }")(S),g.prototype){var z=function(){};z.prototype=g.prototype,B.prototype=new z,z.prototype=null}return B},dE}var fE,kD;function II(){if(kD)return fE;kD=1;var n=ude();return fE=Function.prototype.bind||n,fE}var pE,TD;function Ade(){if(TD)return pE;TD=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=II();return pE=t.call(n,e),pE}var mE,PD;function Ny(){if(PD)return mE;PD=1;var n,e=tde(),t=nde(),r=rde(),i=ide(),o=oG(),a=iC(),s=ode(),h=Function,g=function(ze){try{return h('"use strict"; return ('+ze+").constructor;")()}catch{}},b=Object.getOwnPropertyDescriptor;if(b)try{b({},"")}catch{b=null}var B=function(){throw new a},S=b?function(){try{return arguments.callee,B}catch{try{return b(arguments,"callee").get}catch{return B}}}():B,I=ade()(),k=lde()(),U=Object.getPrototypeOf||(k?function(ze){return ze.__proto__}:null),z={},Y=typeof Uint8Array>"u"||!U?n:U(Uint8Array),Q={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":I&&U?U([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":z,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":I&&U?U(U([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!I||!U?n:U(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":r,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!I||!U?n:U(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":I&&U?U(""[Symbol.iterator]()):n,"%Symbol%":I?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":S,"%TypedArray%":Y,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":s,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};if(U)try{null.error}catch(ze){var ne=U(U(ze));Q["%Error.prototype%"]=ne}var X=function ze(Qe){var ut;if(Qe==="%AsyncFunction%")ut=g("async function () {}");else if(Qe==="%GeneratorFunction%")ut=g("function* () {}");else if(Qe==="%AsyncGeneratorFunction%")ut=g("async function* () {}");else if(Qe==="%AsyncGenerator%"){var Te=ze("%AsyncGeneratorFunction%");Te&&(ut=Te.prototype)}else if(Qe==="%AsyncIteratorPrototype%"){var Ue=ze("%AsyncGenerator%");Ue&&U&&(ut=U(Ue.prototype))}return Q[Qe]=ut,ut},q={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},J=II(),N=Ade(),ie=J.call(Function.call,Array.prototype.concat),he=J.call(Function.apply,Array.prototype.splice),ce=J.call(Function.call,String.prototype.replace),we=J.call(Function.call,String.prototype.slice),pe=J.call(Function.call,RegExp.prototype.exec),Ce=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Pe=/\\(\\)?/g,de=function(Qe){var ut=we(Qe,0,1),Te=we(Qe,-1);if(ut==="%"&&Te!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Te==="%"&&ut!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var Ue=[];return ce(Qe,Ce,function(st,wt,mt,ft){Ue[Ue.length]=mt?ce(ft,Pe,"$1"):wt||st}),Ue},rt=function(Qe,ut){var Te=Qe,Ue;if(N(q,Te)&&(Ue=q[Te],Te="%"+Ue[0]+"%"),N(Q,Te)){var st=Q[Te];if(st===z&&(st=X(Te)),typeof st>"u"&&!ut)throw new a("intrinsic "+Qe+" exists, but is not available. Please file an issue!");return{alias:Ue,name:Te,value:st}}throw new o("intrinsic "+Qe+" does not exist!")};return mE=function(Qe,ut){if(typeof Qe!="string"||Qe.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ut!="boolean")throw new a('"allowMissing" argument must be a boolean');if(pe(/^%?[^%]*%?$/,Qe)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Te=de(Qe),Ue=Te.length>0?Te[0]:"",st=rt("%"+Ue+"%",ut),wt=st.name,mt=st.value,ft=!1,Ut=st.alias;Ut&&(Ue=Ut[0],he(Te,ie([0,1],Ut)));for(var Lt=1,De=!0;Lt<Te.length;Lt+=1){var ke=Te[Lt],Oe=we(ke,0,1),Je=we(ke,-1);if((Oe==='"'||Oe==="'"||Oe==="`"||Je==='"'||Je==="'"||Je==="`")&&Oe!==Je)throw new o("property names with quotes must have matching quotes");if((ke==="constructor"||!De)&&(ft=!0),Ue+="."+ke,wt="%"+Ue+"%",N(Q,wt))mt=Q[wt];else if(mt!=null){if(!(ke in mt)){if(!ut)throw new a("base intrinsic for "+Qe+" exists, but the property is not available.");return}if(b&&Lt+1>=Te.length){var Mt=b(mt,ke);De=!!Mt,De&&"get"in Mt&&!("originalValue"in Mt.get)?mt=Mt.get:mt=mt[ke]}else De=N(mt,ke),mt=mt[ke];De&&!ft&&(Q[wt]=mt)}}return mt},mE}var gE={exports:{}},yE,RD;function kI(){if(RD)return yE;RD=1;var n=Ny(),e=n("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return yE=e,yE}var vE,KD;function sG(){if(KD)return vE;KD=1;var n=Ny(),e=n("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return vE=e,vE}var _E,DD;function cde(){if(DD)return _E;DD=1;var n=kI(),e=oG(),t=iC(),r=sG();return _E=function(o,a,s){if(!o||typeof o!="object"&&typeof o!="function")throw new t("`obj` must be an object or a function`");if(typeof a!="string"&&typeof a!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var h=arguments.length>3?arguments[3]:null,g=arguments.length>4?arguments[4]:null,b=arguments.length>5?arguments[5]:null,B=arguments.length>6?arguments[6]:!1,S=!!r&&r(o,a);if(n)n(o,a,{configurable:b===null&&S?S.configurable:!b,enumerable:h===null&&S?S.enumerable:!h,value:s,writable:g===null&&S?S.writable:!g});else if(B||!h&&!g&&!b)o[a]=s;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},_E}var CE,LD;function hde(){if(LD)return CE;LD=1;var n=kI(),e=function(){return!!n};return e.hasArrayLengthDefineBug=function(){if(!n)return null;try{return n([],"length",{value:1}).length!==1}catch{return!0}},CE=e,CE}var bE,FD;function dde(){if(FD)return bE;FD=1;var n=Ny(),e=cde(),t=hde()(),r=sG(),i=iC(),o=n("%Math.floor%");return bE=function(s,h){if(typeof s!="function")throw new i("`fn` is not a function");if(typeof h!="number"||h<0||h>4294967295||o(h)!==h)throw new i("`length` must be a positive 32-bit integer");var g=arguments.length>2&&!!arguments[2],b=!0,B=!0;if("length"in s&&r){var S=r(s,"length");S&&!S.configurable&&(b=!1),S&&!S.writable&&(B=!1)}return(b||B||!g)&&(t?e(s,"length",h,!0,!0):e(s,"length",h)),s},bE}var UD;function fde(){return UD||(UD=1,function(n){var e=II(),t=Ny(),r=dde(),i=iC(),o=t("%Function.prototype.apply%"),a=t("%Function.prototype.call%"),s=t("%Reflect.apply%",!0)||e.call(a,o),h=kI(),g=t("%Math.max%");n.exports=function(S){if(typeof S!="function")throw new i("a function is required");var I=s(e,a,arguments);return r(I,1+g(0,S.length-(arguments.length-1)),!0)};var b=function(){return s(e,o,arguments)};h?h(n.exports,"apply",{value:b}):n.exports.apply=b}(gE)),gE.exports}var xE,zD;function pde(){if(zD)return xE;zD=1;var n=Ny(),e=fde(),t=e(n("String.prototype.indexOf"));return xE=function(i,o){var a=n(i,!!o);return typeof a=="function"&&t(i,".prototype.")>-1?e(a):a},xE}const mde={},gde=Object.freeze(Object.defineProperty({__proto__:null,default:mde},Symbol.toStringTag,{value:"Module"})),yde=tB(gde);var wE,jD;function vde(){if(jD)return wE;jD=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&o&&typeof o.get=="function"?o.get:null,s=i&&Set.prototype.forEach,h=typeof WeakMap=="function"&&WeakMap.prototype,g=h?WeakMap.prototype.has:null,b=typeof WeakSet=="function"&&WeakSet.prototype,B=b?WeakSet.prototype.has:null,S=typeof WeakRef=="function"&&WeakRef.prototype,I=S?WeakRef.prototype.deref:null,k=Boolean.prototype.valueOf,U=Object.prototype.toString,z=Function.prototype.toString,Y=String.prototype.match,Q=String.prototype.slice,ne=String.prototype.replace,X=String.prototype.toUpperCase,q=String.prototype.toLowerCase,J=RegExp.prototype.test,N=Array.prototype.concat,ie=Array.prototype.join,he=Array.prototype.slice,ce=Math.floor,we=typeof BigInt=="function"?BigInt.prototype.valueOf:null,pe=Object.getOwnPropertySymbols,Ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",de=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Pe||!0)?Symbol.toStringTag:null,rt=Object.prototype.propertyIsEnumerable,ze=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(it){return it.__proto__}:null);function Qe(it,Kt){if(it===1/0||it===-1/0||it!==it||it&&it>-1e3&&it<1e3||J.call(/e/,Kt))return Kt;var Ye=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof it=="number"){var fe=it<0?-ce(-it):ce(it);if(fe!==it){var xe=String(fe),p=Q.call(Kt,xe.length+1);return ne.call(xe,Ye,"$&_")+"."+ne.call(ne.call(p,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ne.call(Kt,Ye,"$&_")}var ut=yde,Te=ut.custom,Ue=Je(Te)?Te:null;wE=function it(Kt,Ye,fe,xe){var p=Ye||{};if(Nt(p,"quoteStyle")&&p.quoteStyle!=="single"&&p.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Nt(p,"maxStringLength")&&(typeof p.maxStringLength=="number"?p.maxStringLength<0&&p.maxStringLength!==1/0:p.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Ne=Nt(p,"customInspect")?p.customInspect:!0;if(typeof Ne!="boolean"&&Ne!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Nt(p,"indent")&&p.indent!==null&&p.indent!=="	"&&!(parseInt(p.indent,10)===p.indent&&p.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Nt(p,"numericSeparator")&&typeof p.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var dt=p.numericSeparator;if(typeof Kt>"u")return"undefined";if(Kt===null)return"null";if(typeof Kt=="boolean")return Kt?"true":"false";if(typeof Kt=="string")return Mr(Kt,p);if(typeof Kt=="number"){if(Kt===0)return 1/0/Kt>0?"0":"-0";var pt=String(Kt);return dt?Qe(Kt,pt):pt}if(typeof Kt=="bigint"){var Ot=String(Kt)+"n";return dt?Qe(Kt,Ot):Ot}var _t=typeof p.depth>"u"?5:p.depth;if(typeof fe>"u"&&(fe=0),fe>=_t&&_t>0&&typeof Kt=="object")return mt(Kt)?"[Array]":"[Object]";var rn=Xe(p,fe);if(typeof xe>"u")xe=[];else if(Sn(xe,Kt)>=0)return"[Circular]";function Zt(ui,Vi,as){if(Vi&&(xe=he.call(xe),xe.push(Vi)),as){var Ni={depth:p.depth};return Nt(p,"quoteStyle")&&(Ni.quoteStyle=p.quoteStyle),it(ui,Ni,fe+1,xe)}return it(ui,p,fe+1,xe)}if(typeof Kt=="function"&&!Ut(Kt)){var Gt=en(Kt),bt=Yt(Kt,Zt);return"[Function"+(Gt?": "+Gt:" (anonymous)")+"]"+(bt.length>0?" { "+ie.call(bt,", ")+" }":"")}if(Je(Kt)){var Pn=Pe?ne.call(String(Kt),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ce.call(Kt);return typeof Kt=="object"&&!Pe?Sr(Pn):Pn}if(Cr(Kt)){for(var En="<"+q.call(String(Kt.nodeName)),lr=Kt.attributes||[],wr=0;wr<lr.length;wr++)En+=" "+lr[wr].name+"="+st(wt(lr[wr].value),"double",p);return En+=">",Kt.childNodes&&Kt.childNodes.length&&(En+="..."),En+="</"+q.call(String(Kt.nodeName))+">",En}if(mt(Kt)){if(Kt.length===0)return"[]";var on=Yt(Kt,Zt);return rn&&!me(on)?"["+Bt(on,rn)+"]":"[ "+ie.call(on,", ")+" ]"}if(Lt(Kt)){var zn=Yt(Kt,Zt);return!("cause"in Error.prototype)&&"cause"in Kt&&!rt.call(Kt,"cause")?"{ ["+String(Kt)+"] "+ie.call(N.call("[cause]: "+Zt(Kt.cause),zn),", ")+" }":zn.length===0?"["+String(Kt)+"]":"{ ["+String(Kt)+"] "+ie.call(zn,", ")+" }"}if(typeof Kt=="object"&&Ne){if(Ue&&typeof Kt[Ue]=="function"&&ut)return ut(Kt,{depth:_t-fe});if(Ne!=="symbol"&&typeof Kt.inspect=="function")return Kt.inspect()}if(Yn(Kt)){var Dn=[];return r&&r.call(Kt,function(ui,Vi){Dn.push(Zt(Vi,Kt,!0)+" => "+Zt(ui,Kt))}),ue("Map",t.call(Kt),Dn,rn)}if(fr(Kt)){var Br=[];return s&&s.call(Kt,function(ui){Br.push(Zt(ui,Kt))}),ue("Set",a.call(Kt),Br,rn)}if(Qr(Kt))return Ge("WeakMap");if(br(Kt))return Ge("WeakSet");if(cr(Kt))return Ge("WeakRef");if(ke(Kt))return Sr(Zt(Number(Kt)));if(Mt(Kt))return Sr(Zt(we.call(Kt)));if(Oe(Kt))return Sr(k.call(Kt));if(De(Kt))return Sr(Zt(String(Kt)));if(typeof window<"u"&&Kt===window)return"{ [object Window] }";if(Kt===window)return"{ [object globalThis] }";if(!ft(Kt)&&!Ut(Kt)){var xr=Yt(Kt,Zt),Rr=ze?ze(Kt)===Object.prototype:Kt instanceof Object||Kt.constructor===Object,rr=Kt instanceof Object?"":"null prototype",co=!Rr&&de&&Object(Kt)===Kt&&de in Kt?Q.call(nn(Kt),8,-1):rr?"Object":"",$a=Rr||typeof Kt.constructor!="function"?"":Kt.constructor.name?Kt.constructor.name+" ":"",ji=$a+(co||rr?"["+ie.call(N.call([],co||[],rr||[]),": ")+"] ":"");return xr.length===0?ji+"{}":rn?ji+"{"+Bt(xr,rn)+"}":ji+"{ "+ie.call(xr,", ")+" }"}return String(Kt)};function st(it,Kt,Ye){var fe=(Ye.quoteStyle||Kt)==="double"?'"':"'";return fe+it+fe}function wt(it){return ne.call(String(it),/"/g,"&quot;")}function mt(it){return nn(it)==="[object Array]"&&(!de||!(typeof it=="object"&&de in it))}function ft(it){return nn(it)==="[object Date]"&&(!de||!(typeof it=="object"&&de in it))}function Ut(it){return nn(it)==="[object RegExp]"&&(!de||!(typeof it=="object"&&de in it))}function Lt(it){return nn(it)==="[object Error]"&&(!de||!(typeof it=="object"&&de in it))}function De(it){return nn(it)==="[object String]"&&(!de||!(typeof it=="object"&&de in it))}function ke(it){return nn(it)==="[object Number]"&&(!de||!(typeof it=="object"&&de in it))}function Oe(it){return nn(it)==="[object Boolean]"&&(!de||!(typeof it=="object"&&de in it))}function Je(it){if(Pe)return it&&typeof it=="object"&&it instanceof Symbol;if(typeof it=="symbol")return!0;if(!it||typeof it!="object"||!Ce)return!1;try{return Ce.call(it),!0}catch{}return!1}function Mt(it){if(!it||typeof it!="object"||!we)return!1;try{return we.call(it),!0}catch{}return!1}var gt=Object.prototype.hasOwnProperty||function(it){return it in this};function Nt(it,Kt){return gt.call(it,Kt)}function nn(it){return U.call(it)}function en(it){if(it.name)return it.name;var Kt=Y.call(z.call(it),/^function\s*([\w$]+)/);return Kt?Kt[1]:null}function Sn(it,Kt){if(it.indexOf)return it.indexOf(Kt);for(var Ye=0,fe=it.length;Ye<fe;Ye++)if(it[Ye]===Kt)return Ye;return-1}function Yn(it){if(!t||!it||typeof it!="object")return!1;try{t.call(it);try{a.call(it)}catch{return!0}return it instanceof Map}catch{}return!1}function Qr(it){if(!g||!it||typeof it!="object")return!1;try{g.call(it,g);try{B.call(it,B)}catch{return!0}return it instanceof WeakMap}catch{}return!1}function cr(it){if(!I||!it||typeof it!="object")return!1;try{return I.call(it),!0}catch{}return!1}function fr(it){if(!a||!it||typeof it!="object")return!1;try{a.call(it);try{t.call(it)}catch{return!0}return it instanceof Set}catch{}return!1}function br(it){if(!B||!it||typeof it!="object")return!1;try{B.call(it,B);try{g.call(it,g)}catch{return!0}return it instanceof WeakSet}catch{}return!1}function Cr(it){return!it||typeof it!="object"?!1:typeof HTMLElement<"u"&&it instanceof HTMLElement?!0:typeof it.nodeName=="string"&&typeof it.getAttribute=="function"}function Mr(it,Kt){if(it.length>Kt.maxStringLength){var Ye=it.length-Kt.maxStringLength,fe="... "+Ye+" more character"+(Ye>1?"s":"");return Mr(Q.call(it,0,Kt.maxStringLength),Kt)+fe}var xe=ne.call(ne.call(it,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Qn);return st(xe,"single",Kt)}function Qn(it){var Kt=it.charCodeAt(0),Ye={8:"b",9:"t",10:"n",12:"f",13:"r"}[Kt];return Ye?"\\"+Ye:"\\x"+(Kt<16?"0":"")+X.call(Kt.toString(16))}function Sr(it){return"Object("+it+")"}function Ge(it){return it+" { ? }"}function ue(it,Kt,Ye,fe){var xe=fe?Bt(Ye,fe):ie.call(Ye,", ");return it+" ("+Kt+") {"+xe+"}"}function me(it){for(var Kt=0;Kt<it.length;Kt++)if(Sn(it[Kt],`
`)>=0)return!1;return!0}function Xe(it,Kt){var Ye;if(it.indent==="	")Ye="	";else if(typeof it.indent=="number"&&it.indent>0)Ye=ie.call(Array(it.indent+1)," ");else return null;return{base:Ye,prev:ie.call(Array(Kt+1),Ye)}}function Bt(it,Kt){if(it.length===0)return"";var Ye=`
`+Kt.prev+Kt.base;return Ye+ie.call(it,","+Ye)+`
`+Kt.prev}function Yt(it,Kt){var Ye=mt(it),fe=[];if(Ye){fe.length=it.length;for(var xe=0;xe<it.length;xe++)fe[xe]=Nt(it,xe)?Kt(it[xe],it):""}var p=typeof pe=="function"?pe(it):[],Ne;if(Pe){Ne={};for(var dt=0;dt<p.length;dt++)Ne["$"+p[dt]]=p[dt]}for(var pt in it)Nt(it,pt)&&(Ye&&String(Number(pt))===pt&&pt<it.length||Pe&&Ne["$"+pt]instanceof Symbol||(J.call(/[^\w$]/,pt)?fe.push(Kt(pt,it)+": "+Kt(it[pt],it)):fe.push(pt+": "+Kt(it[pt],it))));if(typeof pe=="function")for(var Ot=0;Ot<p.length;Ot++)rt.call(it,p[Ot])&&fe.push("["+Kt(p[Ot])+"]: "+Kt(it[p[Ot]],it));return fe}return wE}var ME,ND;function _de(){if(ND)return ME;ND=1;var n=Ny(),e=pde(),t=vde(),r=iC(),i=n("%WeakMap%",!0),o=n("%Map%",!0),a=e("WeakMap.prototype.get",!0),s=e("WeakMap.prototype.set",!0),h=e("WeakMap.prototype.has",!0),g=e("Map.prototype.get",!0),b=e("Map.prototype.set",!0),B=e("Map.prototype.has",!0),S=function(z,Y){for(var Q=z,ne;(ne=Q.next)!==null;Q=ne)if(ne.key===Y)return Q.next=ne.next,ne.next=z.next,z.next=ne,ne},I=function(z,Y){var Q=S(z,Y);return Q&&Q.value},k=function(z,Y,Q){var ne=S(z,Y);ne?ne.value=Q:z.next={key:Y,next:z.next,value:Q}},U=function(z,Y){return!!S(z,Y)};return ME=function(){var Y,Q,ne,X={assert:function(q){if(!X.has(q))throw new r("Side channel does not contain "+t(q))},get:function(q){if(i&&q&&(typeof q=="object"||typeof q=="function")){if(Y)return a(Y,q)}else if(o){if(Q)return g(Q,q)}else if(ne)return I(ne,q)},has:function(q){if(i&&q&&(typeof q=="object"||typeof q=="function")){if(Y)return h(Y,q)}else if(o){if(Q)return B(Q,q)}else if(ne)return U(ne,q);return!1},set:function(q,J){i&&q&&(typeof q=="object"||typeof q=="function")?(Y||(Y=new i),s(Y,q,J)):o?(Q||(Q=new o),b(Q,q,J)):(ne||(ne={key:{},next:null}),k(ne,q,J))}};return X},ME}var SE,GD;function TI(){if(GD)return SE;GD=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return SE={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},SE}var EE,WD;function aG(){if(WD)return EE;WD=1;var n=TI(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var z=[],Y=0;Y<256;++Y)z.push("%"+((Y<16?"0":"")+Y.toString(16)).toUpperCase());return z}(),i=function(Y){for(;Y.length>1;){var Q=Y.pop(),ne=Q.obj[Q.prop];if(t(ne)){for(var X=[],q=0;q<ne.length;++q)typeof ne[q]<"u"&&X.push(ne[q]);Q.obj[Q.prop]=X}}},o=function(Y,Q){for(var ne=Q&&Q.plainObjects?{__proto__:null}:{},X=0;X<Y.length;++X)typeof Y[X]<"u"&&(ne[X]=Y[X]);return ne},a=function z(Y,Q,ne){if(!Q)return Y;if(typeof Q!="object"&&typeof Q!="function"){if(t(Y))Y.push(Q);else if(Y&&typeof Y=="object")(ne&&(ne.plainObjects||ne.allowPrototypes)||!e.call(Object.prototype,Q))&&(Y[Q]=!0);else return[Y,Q];return Y}if(!Y||typeof Y!="object")return[Y].concat(Q);var X=Y;return t(Y)&&!t(Q)&&(X=o(Y,ne)),t(Y)&&t(Q)?(Q.forEach(function(q,J){if(e.call(Y,J)){var N=Y[J];N&&typeof N=="object"&&q&&typeof q=="object"?Y[J]=z(N,q,ne):Y.push(q)}else Y[J]=q}),Y):Object.keys(Q).reduce(function(q,J){var N=Q[J];return e.call(q,J)?q[J]=z(q[J],N,ne):q[J]=N,q},X)},s=function(Y,Q){return Object.keys(Q).reduce(function(ne,X){return ne[X]=Q[X],ne},Y)},h=function(z,Y,Q){var ne=z.replace(/\+/g," ");if(Q==="iso-8859-1")return ne.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ne)}catch{return ne}},g=1024,b=function(Y,Q,ne,X,q){if(Y.length===0)return Y;var J=Y;if(typeof Y=="symbol"?J=Symbol.prototype.toString.call(Y):typeof Y!="string"&&(J=String(Y)),ne==="iso-8859-1")return escape(J).replace(/%u[0-9a-f]{4}/gi,function(Ce){return"%26%23"+parseInt(Ce.slice(2),16)+"%3B"});for(var N="",ie=0;ie<J.length;ie+=g){for(var he=J.length>=g?J.slice(ie,ie+g):J,ce=[],we=0;we<he.length;++we){var pe=he.charCodeAt(we);if(pe===45||pe===46||pe===95||pe===126||pe>=48&&pe<=57||pe>=65&&pe<=90||pe>=97&&pe<=122||q===n.RFC1738&&(pe===40||pe===41)){ce[ce.length]=he.charAt(we);continue}if(pe<128){ce[ce.length]=r[pe];continue}if(pe<2048){ce[ce.length]=r[192|pe>>6]+r[128|pe&63];continue}if(pe<55296||pe>=57344){ce[ce.length]=r[224|pe>>12]+r[128|pe>>6&63]+r[128|pe&63];continue}we+=1,pe=65536+((pe&1023)<<10|he.charCodeAt(we)&1023),ce[ce.length]=r[240|pe>>18]+r[128|pe>>12&63]+r[128|pe>>6&63]+r[128|pe&63]}N+=ce.join("")}return N},B=function(Y){for(var Q=[{obj:{o:Y},prop:"o"}],ne=[],X=0;X<Q.length;++X)for(var q=Q[X],J=q.obj[q.prop],N=Object.keys(J),ie=0;ie<N.length;++ie){var he=N[ie],ce=J[he];typeof ce=="object"&&ce!==null&&ne.indexOf(ce)===-1&&(Q.push({obj:J,prop:he}),ne.push(ce))}return i(Q),Y},S=function(Y){return Object.prototype.toString.call(Y)==="[object RegExp]"},I=function(Y){return!Y||typeof Y!="object"?!1:!!(Y.constructor&&Y.constructor.isBuffer&&Y.constructor.isBuffer(Y))},k=function(Y,Q){return[].concat(Y,Q)},U=function(Y,Q){if(t(Y)){for(var ne=[],X=0;X<Y.length;X+=1)ne.push(Q(Y[X]));return ne}return Q(Y)};return EE={arrayToObject:o,assign:s,combine:k,compact:B,decode:h,encode:b,isBuffer:I,isRegExp:S,maybeMap:U,merge:a},EE}var BE,QD;function Cde(){if(QD)return BE;QD=1;var n=_de(),e=aG(),t=TI(),r=Object.prototype.hasOwnProperty,i={brackets:function(z){return z+"[]"},comma:"comma",indices:function(z,Y){return z+"["+Y+"]"},repeat:function(z){return z}},o=Array.isArray,a=Array.prototype.push,s=function(U,z){a.apply(U,o(z)?z:[z])},h=Date.prototype.toISOString,g=t.default,b={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:g,formatter:t.formatters[g],indices:!1,serializeDate:function(z){return h.call(z)},skipNulls:!1,strictNullHandling:!1},B=function(z){return typeof z=="string"||typeof z=="number"||typeof z=="boolean"||typeof z=="symbol"||typeof z=="bigint"},S={},I=function U(z,Y,Q,ne,X,q,J,N,ie,he,ce,we,pe,Ce,Pe,de,rt,ze){for(var Qe=z,ut=ze,Te=0,Ue=!1;(ut=ut.get(S))!==void 0&&!Ue;){var st=ut.get(z);if(Te+=1,typeof st<"u"){if(st===Te)throw new RangeError("Cyclic object value");Ue=!0}typeof ut.get(S)>"u"&&(Te=0)}if(typeof he=="function"?Qe=he(Y,Qe):Qe instanceof Date?Qe=pe(Qe):Q==="comma"&&o(Qe)&&(Qe=e.maybeMap(Qe,function(nn){return nn instanceof Date?pe(nn):nn})),Qe===null){if(q)return ie&&!de?ie(Y,b.encoder,rt,"key",Ce):Y;Qe=""}if(B(Qe)||e.isBuffer(Qe)){if(ie){var wt=de?Y:ie(Y,b.encoder,rt,"key",Ce);return[Pe(wt)+"="+Pe(ie(Qe,b.encoder,rt,"value",Ce))]}return[Pe(Y)+"="+Pe(String(Qe))]}var mt=[];if(typeof Qe>"u")return mt;var ft;if(Q==="comma"&&o(Qe))de&&ie&&(Qe=e.maybeMap(Qe,ie)),ft=[{value:Qe.length>0?Qe.join(",")||null:void 0}];else if(o(he))ft=he;else{var Ut=Object.keys(Qe);ft=ce?Ut.sort(ce):Ut}var Lt=N?String(Y).replace(/\./g,"%2E"):String(Y),De=ne&&o(Qe)&&Qe.length===1?Lt+"[]":Lt;if(X&&o(Qe)&&Qe.length===0)return De+"[]";for(var ke=0;ke<ft.length;++ke){var Oe=ft[ke],Je=typeof Oe=="object"&&Oe&&typeof Oe.value<"u"?Oe.value:Qe[Oe];if(!(J&&Je===null)){var Mt=we&&N?String(Oe).replace(/\./g,"%2E"):String(Oe),gt=o(Qe)?typeof Q=="function"?Q(De,Mt):De:De+(we?"."+Mt:"["+Mt+"]");ze.set(z,Te);var Nt=n();Nt.set(S,ze),s(mt,U(Je,gt,Q,ne,X,q,J,N,Q==="comma"&&de&&o(Qe)?null:ie,he,ce,we,pe,Ce,Pe,de,rt,Nt))}}return mt},k=function(z){if(!z)return b;if(typeof z.allowEmptyArrays<"u"&&typeof z.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof z.encodeDotInKeys<"u"&&typeof z.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(z.encoder!==null&&typeof z.encoder<"u"&&typeof z.encoder!="function")throw new TypeError("Encoder has to be a function.");var Y=z.charset||b.charset;if(typeof z.charset<"u"&&z.charset!=="utf-8"&&z.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Q=t.default;if(typeof z.format<"u"){if(!r.call(t.formatters,z.format))throw new TypeError("Unknown format option provided.");Q=z.format}var ne=t.formatters[Q],X=b.filter;(typeof z.filter=="function"||o(z.filter))&&(X=z.filter);var q;if(z.arrayFormat in i?q=z.arrayFormat:"indices"in z?q=z.indices?"indices":"repeat":q=b.arrayFormat,"commaRoundTrip"in z&&typeof z.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var J=typeof z.allowDots>"u"?z.encodeDotInKeys===!0?!0:b.allowDots:!!z.allowDots;return{addQueryPrefix:typeof z.addQueryPrefix=="boolean"?z.addQueryPrefix:b.addQueryPrefix,allowDots:J,allowEmptyArrays:typeof z.allowEmptyArrays=="boolean"?!!z.allowEmptyArrays:b.allowEmptyArrays,arrayFormat:q,charset:Y,charsetSentinel:typeof z.charsetSentinel=="boolean"?z.charsetSentinel:b.charsetSentinel,commaRoundTrip:!!z.commaRoundTrip,delimiter:typeof z.delimiter>"u"?b.delimiter:z.delimiter,encode:typeof z.encode=="boolean"?z.encode:b.encode,encodeDotInKeys:typeof z.encodeDotInKeys=="boolean"?z.encodeDotInKeys:b.encodeDotInKeys,encoder:typeof z.encoder=="function"?z.encoder:b.encoder,encodeValuesOnly:typeof z.encodeValuesOnly=="boolean"?z.encodeValuesOnly:b.encodeValuesOnly,filter:X,format:Q,formatter:ne,serializeDate:typeof z.serializeDate=="function"?z.serializeDate:b.serializeDate,skipNulls:typeof z.skipNulls=="boolean"?z.skipNulls:b.skipNulls,sort:typeof z.sort=="function"?z.sort:null,strictNullHandling:typeof z.strictNullHandling=="boolean"?z.strictNullHandling:b.strictNullHandling}};return BE=function(U,z){var Y=U,Q=k(z),ne,X;typeof Q.filter=="function"?(X=Q.filter,Y=X("",Y)):o(Q.filter)&&(X=Q.filter,ne=X);var q=[];if(typeof Y!="object"||Y===null)return"";var J=i[Q.arrayFormat],N=J==="comma"&&Q.commaRoundTrip;ne||(ne=Object.keys(Y)),Q.sort&&ne.sort(Q.sort);for(var ie=n(),he=0;he<ne.length;++he){var ce=ne[he],we=Y[ce];Q.skipNulls&&we===null||s(q,I(we,ce,J,N,Q.allowEmptyArrays,Q.strictNullHandling,Q.skipNulls,Q.encodeDotInKeys,Q.encode?Q.encoder:null,Q.filter,Q.sort,Q.allowDots,Q.serializeDate,Q.format,Q.formatter,Q.encodeValuesOnly,Q.charset,ie))}var pe=q.join(Q.delimiter),Ce=Q.addQueryPrefix===!0?"?":"";return Q.charsetSentinel&&(Q.charset==="iso-8859-1"?Ce+="utf8=%26%2310003%3B&":Ce+="utf8=%E2%9C%93&"),pe.length>0?Ce+pe:""},BE}var OE,qD;function bde(){if(qD)return OE;qD=1;var n=aG(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(S){return S.replace(/&#(\d+);/g,function(I,k){return String.fromCharCode(parseInt(k,10))})},o=function(S,I){return S&&typeof S=="string"&&I.comma&&S.indexOf(",")>-1?S.split(","):S},a="utf8=%26%2310003%3B",s="utf8=%E2%9C%93",h=function(I,k){var U={__proto__:null},z=k.ignoreQueryPrefix?I.replace(/^\?/,""):I;z=z.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var Y=k.parameterLimit===1/0?void 0:k.parameterLimit,Q=z.split(k.delimiter,Y),ne=-1,X,q=k.charset;if(k.charsetSentinel)for(X=0;X<Q.length;++X)Q[X].indexOf("utf8=")===0&&(Q[X]===s?q="utf-8":Q[X]===a&&(q="iso-8859-1"),ne=X,X=Q.length);for(X=0;X<Q.length;++X)if(X!==ne){var J=Q[X],N=J.indexOf("]="),ie=N===-1?J.indexOf("="):N+1,he,ce;ie===-1?(he=k.decoder(J,r.decoder,q,"key"),ce=k.strictNullHandling?null:""):(he=k.decoder(J.slice(0,ie),r.decoder,q,"key"),ce=n.maybeMap(o(J.slice(ie+1),k),function(pe){return k.decoder(pe,r.decoder,q,"value")})),ce&&k.interpretNumericEntities&&q==="iso-8859-1"&&(ce=i(String(ce))),J.indexOf("[]=")>-1&&(ce=t(ce)?[ce]:ce);var we=e.call(U,he);we&&k.duplicates==="combine"?U[he]=n.combine(U[he],ce):(!we||k.duplicates==="last")&&(U[he]=ce)}return U},g=function(S,I,k,U){for(var z=U?I:o(I,k),Y=S.length-1;Y>=0;--Y){var Q,ne=S[Y];if(ne==="[]"&&k.parseArrays)Q=k.allowEmptyArrays&&(z===""||k.strictNullHandling&&z===null)?[]:[].concat(z);else{Q=k.plainObjects?{__proto__:null}:{};var X=ne.charAt(0)==="["&&ne.charAt(ne.length-1)==="]"?ne.slice(1,-1):ne,q=k.decodeDotInKeys?X.replace(/%2E/g,"."):X,J=parseInt(q,10);!k.parseArrays&&q===""?Q={0:z}:!isNaN(J)&&ne!==q&&String(J)===q&&J>=0&&k.parseArrays&&J<=k.arrayLimit?(Q=[],Q[J]=z):q!=="__proto__"&&(Q[q]=z)}z=Q}return z},b=function(I,k,U,z){if(I){var Y=U.allowDots?I.replace(/\.([^.[]+)/g,"[$1]"):I,Q=/(\[[^[\]]*])/,ne=/(\[[^[\]]*])/g,X=U.depth>0&&Q.exec(Y),q=X?Y.slice(0,X.index):Y,J=[];if(q){if(!U.plainObjects&&e.call(Object.prototype,q)&&!U.allowPrototypes)return;J.push(q)}for(var N=0;U.depth>0&&(X=ne.exec(Y))!==null&&N<U.depth;){if(N+=1,!U.plainObjects&&e.call(Object.prototype,X[1].slice(1,-1))&&!U.allowPrototypes)return;J.push(X[1])}if(X){if(U.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+U.depth+" and strictDepth is true");J.push("["+Y.slice(X.index)+"]")}return g(J,k,U,z)}},B=function(I){if(!I)return r;if(typeof I.allowEmptyArrays<"u"&&typeof I.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof I.decodeDotInKeys<"u"&&typeof I.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(I.decoder!==null&&typeof I.decoder<"u"&&typeof I.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof I.charset<"u"&&I.charset!=="utf-8"&&I.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var k=typeof I.charset>"u"?r.charset:I.charset,U=typeof I.duplicates>"u"?r.duplicates:I.duplicates;if(U!=="combine"&&U!=="first"&&U!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var z=typeof I.allowDots>"u"?I.decodeDotInKeys===!0?!0:r.allowDots:!!I.allowDots;return{allowDots:z,allowEmptyArrays:typeof I.allowEmptyArrays=="boolean"?!!I.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof I.allowPrototypes=="boolean"?I.allowPrototypes:r.allowPrototypes,allowSparse:typeof I.allowSparse=="boolean"?I.allowSparse:r.allowSparse,arrayLimit:typeof I.arrayLimit=="number"?I.arrayLimit:r.arrayLimit,charset:k,charsetSentinel:typeof I.charsetSentinel=="boolean"?I.charsetSentinel:r.charsetSentinel,comma:typeof I.comma=="boolean"?I.comma:r.comma,decodeDotInKeys:typeof I.decodeDotInKeys=="boolean"?I.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof I.decoder=="function"?I.decoder:r.decoder,delimiter:typeof I.delimiter=="string"||n.isRegExp(I.delimiter)?I.delimiter:r.delimiter,depth:typeof I.depth=="number"||I.depth===!1?+I.depth:r.depth,duplicates:U,ignoreQueryPrefix:I.ignoreQueryPrefix===!0,interpretNumericEntities:typeof I.interpretNumericEntities=="boolean"?I.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof I.parameterLimit=="number"?I.parameterLimit:r.parameterLimit,parseArrays:I.parseArrays!==!1,plainObjects:typeof I.plainObjects=="boolean"?I.plainObjects:r.plainObjects,strictDepth:typeof I.strictDepth=="boolean"?!!I.strictDepth:r.strictDepth,strictNullHandling:typeof I.strictNullHandling=="boolean"?I.strictNullHandling:r.strictNullHandling}};return OE=function(S,I){var k=B(I);if(S===""||S===null||typeof S>"u")return k.plainObjects?{__proto__:null}:{};for(var U=typeof S=="string"?h(S,k):S,z=k.plainObjects?{__proto__:null}:{},Y=Object.keys(U),Q=0;Q<Y.length;++Q){var ne=Y[Q],X=b(ne,U[ne],k,typeof S=="string");z=n.merge(z,X,k)}return k.allowSparse===!0?z:n.compact(z)},OE}var IE,YD;function xde(){if(YD)return IE;YD=1;var n=Cde(),e=bde(),t=TI();return IE={formats:t,parse:e,stringify:n},IE}var $D;function wde(){if($D)return sg;$D=1;var n=ede();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(o),s=["'"].concat(a),h=["%","/","?",";","#"].concat(s),g=["/","?","#"],b=255,B=/^[+a-z0-9A-Z_-]{0,63}$/,S=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,I={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},U={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},z=xde();function Y(q,J,N){if(q&&typeof q=="object"&&q instanceof e)return q;var ie=new e;return ie.parse(q,J,N),ie}e.prototype.parse=function(q,J,N){if(typeof q!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof q);var ie=q.indexOf("?"),he=ie!==-1&&ie<q.indexOf("#")?"?":"#",ce=q.split(he),we=/\\/g;ce[0]=ce[0].replace(we,"/"),q=ce.join(he);var pe=q;if(pe=pe.trim(),!N&&q.split("#").length===1){var Ce=i.exec(pe);if(Ce)return this.path=pe,this.href=pe,this.pathname=Ce[1],Ce[2]?(this.search=Ce[2],J?this.query=z.parse(this.search.substr(1)):this.query=this.search.substr(1)):J&&(this.search="",this.query={}),this}var Pe=t.exec(pe);if(Pe){Pe=Pe[0];var de=Pe.toLowerCase();this.protocol=de,pe=pe.substr(Pe.length)}if(N||Pe||pe.match(/^\/\/[^@/]+@[^@/]+/)){var rt=pe.substr(0,2)==="//";rt&&!(Pe&&k[Pe])&&(pe=pe.substr(2),this.slashes=!0)}if(!k[Pe]&&(rt||Pe&&!U[Pe])){for(var ze=-1,Qe=0;Qe<g.length;Qe++){var ut=pe.indexOf(g[Qe]);ut!==-1&&(ze===-1||ut<ze)&&(ze=ut)}var Te,Ue;ze===-1?Ue=pe.lastIndexOf("@"):Ue=pe.lastIndexOf("@",ze),Ue!==-1&&(Te=pe.slice(0,Ue),pe=pe.slice(Ue+1),this.auth=decodeURIComponent(Te)),ze=-1;for(var Qe=0;Qe<h.length;Qe++){var ut=pe.indexOf(h[Qe]);ut!==-1&&(ze===-1||ut<ze)&&(ze=ut)}ze===-1&&(ze=pe.length),this.host=pe.slice(0,ze),pe=pe.slice(ze),this.parseHost(),this.hostname=this.hostname||"";var st=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!st)for(var wt=this.hostname.split(/\./),Qe=0,mt=wt.length;Qe<mt;Qe++){var ft=wt[Qe];if(ft&&!ft.match(B)){for(var Ut="",Lt=0,De=ft.length;Lt<De;Lt++)ft.charCodeAt(Lt)>127?Ut+="x":Ut+=ft[Lt];if(!Ut.match(B)){var ke=wt.slice(0,Qe),Oe=wt.slice(Qe+1),Je=ft.match(S);Je&&(ke.push(Je[1]),Oe.unshift(Je[2])),Oe.length&&(pe="/"+Oe.join(".")+pe),this.hostname=ke.join(".");break}}}this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),st||(this.hostname=n.toASCII(this.hostname));var Mt=this.port?":"+this.port:"",gt=this.hostname||"";this.host=gt+Mt,this.href+=this.host,st&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),pe[0]!=="/"&&(pe="/"+pe))}if(!I[de])for(var Qe=0,mt=s.length;Qe<mt;Qe++){var Nt=s[Qe];if(pe.indexOf(Nt)!==-1){var nn=encodeURIComponent(Nt);nn===Nt&&(nn=escape(Nt)),pe=pe.split(Nt).join(nn)}}var en=pe.indexOf("#");en!==-1&&(this.hash=pe.substr(en),pe=pe.slice(0,en));var Sn=pe.indexOf("?");if(Sn!==-1?(this.search=pe.substr(Sn),this.query=pe.substr(Sn+1),J&&(this.query=z.parse(this.query)),pe=pe.slice(0,Sn)):J&&(this.search="",this.query={}),pe&&(this.pathname=pe),U[de]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Mt=this.pathname||"",Yn=this.search||"";this.path=Mt+Yn}return this.href=this.format(),this};function Q(q){return typeof q=="string"&&(q=Y(q)),q instanceof e?q.format():e.prototype.format.call(q)}e.prototype.format=function(){var q=this.auth||"";q&&(q=encodeURIComponent(q),q=q.replace(/%3A/i,":"),q+="@");var J=this.protocol||"",N=this.pathname||"",ie=this.hash||"",he=!1,ce="";this.host?he=q+this.host:this.hostname&&(he=q+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(he+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(ce=z.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var we=this.search||ce&&"?"+ce||"";return J&&J.substr(-1)!==":"&&(J+=":"),this.slashes||(!J||U[J])&&he!==!1?(he="//"+(he||""),N&&N.charAt(0)!=="/"&&(N="/"+N)):he||(he=""),ie&&ie.charAt(0)!=="#"&&(ie="#"+ie),we&&we.charAt(0)!=="?"&&(we="?"+we),N=N.replace(/[?#]/g,function(pe){return encodeURIComponent(pe)}),we=we.replace("#","%23"),J+he+N+we+ie};function ne(q,J){return Y(q,!1,!0).resolve(J)}e.prototype.resolve=function(q){return this.resolveObject(Y(q,!1,!0)).format()};function X(q,J){return q?Y(q,!1,!0).resolveObject(J):J}return e.prototype.resolveObject=function(q){if(typeof q=="string"){var J=new e;J.parse(q,!1,!0),q=J}for(var N=new e,ie=Object.keys(this),he=0;he<ie.length;he++){var ce=ie[he];N[ce]=this[ce]}if(N.hash=q.hash,q.href==="")return N.href=N.format(),N;if(q.slashes&&!q.protocol){for(var we=Object.keys(q),pe=0;pe<we.length;pe++){var Ce=we[pe];Ce!=="protocol"&&(N[Ce]=q[Ce])}return U[N.protocol]&&N.hostname&&!N.pathname&&(N.pathname="/",N.path=N.pathname),N.href=N.format(),N}if(q.protocol&&q.protocol!==N.protocol){if(!U[q.protocol]){for(var Pe=Object.keys(q),de=0;de<Pe.length;de++){var rt=Pe[de];N[rt]=q[rt]}return N.href=N.format(),N}if(N.protocol=q.protocol,!q.host&&!k[q.protocol]){for(var mt=(q.pathname||"").split("/");mt.length&&!(q.host=mt.shift()););q.host||(q.host=""),q.hostname||(q.hostname=""),mt[0]!==""&&mt.unshift(""),mt.length<2&&mt.unshift(""),N.pathname=mt.join("/")}else N.pathname=q.pathname;if(N.search=q.search,N.query=q.query,N.host=q.host||"",N.auth=q.auth,N.hostname=q.hostname||q.host,N.port=q.port,N.pathname||N.search){var ze=N.pathname||"",Qe=N.search||"";N.path=ze+Qe}return N.slashes=N.slashes||q.slashes,N.href=N.format(),N}var ut=N.pathname&&N.pathname.charAt(0)==="/",Te=q.host||q.pathname&&q.pathname.charAt(0)==="/",Ue=Te||ut||N.host&&q.pathname,st=Ue,wt=N.pathname&&N.pathname.split("/")||[],mt=q.pathname&&q.pathname.split("/")||[],ft=N.protocol&&!U[N.protocol];if(ft&&(N.hostname="",N.port=null,N.host&&(wt[0]===""?wt[0]=N.host:wt.unshift(N.host)),N.host="",q.protocol&&(q.hostname=null,q.port=null,q.host&&(mt[0]===""?mt[0]=q.host:mt.unshift(q.host)),q.host=null),Ue=Ue&&(mt[0]===""||wt[0]==="")),Te)N.host=q.host||q.host===""?q.host:N.host,N.hostname=q.hostname||q.hostname===""?q.hostname:N.hostname,N.search=q.search,N.query=q.query,wt=mt;else if(mt.length)wt||(wt=[]),wt.pop(),wt=wt.concat(mt),N.search=q.search,N.query=q.query;else if(q.search!=null){if(ft){N.host=wt.shift(),N.hostname=N.host;var Ut=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;Ut&&(N.auth=Ut.shift(),N.hostname=Ut.shift(),N.host=N.hostname)}return N.search=q.search,N.query=q.query,(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.href=N.format(),N}if(!wt.length)return N.pathname=null,N.search?N.path="/"+N.search:N.path=null,N.href=N.format(),N;for(var Lt=wt.slice(-1)[0],De=(N.host||q.host||wt.length>1)&&(Lt==="."||Lt==="..")||Lt==="",ke=0,Oe=wt.length;Oe>=0;Oe--)Lt=wt[Oe],Lt==="."?wt.splice(Oe,1):Lt===".."?(wt.splice(Oe,1),ke++):ke&&(wt.splice(Oe,1),ke--);if(!Ue&&!st)for(;ke--;ke)wt.unshift("..");Ue&&wt[0]!==""&&(!wt[0]||wt[0].charAt(0)!=="/")&&wt.unshift(""),De&&wt.join("/").substr(-1)!=="/"&&wt.push("");var Je=wt[0]===""||wt[0]&&wt[0].charAt(0)==="/";if(ft){N.hostname=Je?"":wt.length?wt.shift():"",N.host=N.hostname;var Ut=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;Ut&&(N.auth=Ut.shift(),N.hostname=Ut.shift(),N.host=N.hostname)}return Ue=Ue||N.host&&wt.length,Ue&&!Je&&wt.unshift(""),wt.length>0?N.pathname=wt.join("/"):(N.pathname=null,N.path=null),(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.auth=q.auth||N.auth,N.slashes=N.slashes||q.slashes,N.href=N.format(),N},e.prototype.parseHost=function(){var q=this.host,J=r.exec(q);J&&(J=J[0],J!==":"&&(this.port=J.substr(1)),q=q.substr(0,q.length-J.length)),q&&(this.hostname=q)},sg.parse=Y,sg.resolve=ne,sg.resolveObject=X,sg.format=Q,sg.Url=e,sg}var Mde=wde();const VD=Ka(Mde);function qs(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="8eedc6c4f661a6bd38a2227269e9dcc5dcb1f437",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:13,column:5}},1:{start:{line:7,column:4},end:{line:7,column:27}},2:{start:{line:9,column:4},end:{line:9,column:13}},3:{start:{line:11,column:4},end:{line:11,column:48}},4:{start:{line:12,column:4},end:{line:12,column:21}},5:{start:{line:16,column:2},end:{line:16,column:34}},6:{start:{line:16,column:20},end:{line:16,column:34}},7:{start:{line:17,column:17},end:{line:17,column:42}},8:{start:{line:18,column:23},end:{line:18,column:57}},9:{start:{line:19,column:2},end:{line:23,column:3}},10:{start:{line:20,column:4},end:{line:20,column:41}},11:{start:{line:22,column:4},end:{line:22,column:69}},12:{start:{line:24,column:14},end:{line:24,column:35}},13:{start:{line:25,column:2},end:{line:25,column:24}},14:{start:{line:28,column:2},end:{line:28,column:30}},15:{start:{line:28,column:16},end:{line:28,column:30}},16:{start:{line:29,column:14},end:{line:29,column:31}},17:{start:{line:30,column:2},end:{line:30,column:57}},18:{start:{line:30,column:32},end:{line:30,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:14,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:29},end:{line:8,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:8,column:10},end:{line:8,column:11}},loc:{start:{line:8,column:25},end:{line:10,column:3}},line:8},3:{name:"(anonymous_3)",decl:{start:{line:10,column:11},end:{line:10,column:12}},loc:{start:{line:10,column:22},end:{line:13,column:3}},line:10},4:{name:"downloadGlyphsMetadata",decl:{start:{line:15,column:16},end:{line:15,column:38}},loc:{start:{line:15,column:56},end:{line:26,column:1}},line:15},5:{name:"downloadSpriteMetadata",decl:{start:{line:27,column:16},end:{line:27,column:38}},loc:{start:{line:27,column:52},end:{line:31,column:1}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:30,column:20},end:{line:30,column:21}},loc:{start:{line:30,column:32},end:{line:30,column:55}},line:30}},branchMap:{0:{loc:{start:{line:16,column:2},end:{line:16,column:34}},type:"if",locations:[{start:{line:16,column:2},end:{line:16,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},2:{loc:{start:{line:28,column:2},end:{line:28,column:30}},type:"if",locations:[{start:{line:28,column:2},end:{line:28,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,0BAA0B,GAAG;AAC1C,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8eedc6c4f661a6bd38a2227269e9dcc5dcb1f437"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return qs=function(){return a},a}qs();function lG(n,e,t){qs().f[0]++,qs().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(r){return qs().f[1]++,qs().s[1]++,r.json()}).then(function(r){qs().f[2]++,qs().s[2]++,t(r)}).catch(function(){qs().f[3]++,qs().s[3]++,console.warn("Can not metadata for "+n),qs().s[4]++,t(e)})}function Sde(n,e){if(qs().f[4]++,qs().s[5]++,n)qs().b[0][1]++;else return qs().b[0][0]++,qs().s[6]++,e([]);const t=(qs().s[7]++,VD.parse(n)),r=(qs().s[8]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");qs().s[9]++,t.pathname===r?(qs().b[1][0]++,qs().s[10]++,t.pathname="/fontstacks.json"):(qs().b[1][1]++,qs().s[11]++,t.pathname=t.pathname.replace(r,".json"));const i=(qs().s[12]++,VD.format(t));qs().s[13]++,lG(i,[],e)}function Ede(n,e){if(qs().f[5]++,qs().s[14]++,n)qs().b[2][1]++;else return qs().b[2][0]++,qs().s[15]++,e([]);const t=(qs().s[16]++,n+".json");qs().s[17]++,lG(t,{},r=>(qs().f[6]++,qs().s[18]++,e(Object.keys(r))))}function jA(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="5d157b2ae65dbd5a5a7dfa0dbf76114e1399ceba",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:2},end:{line:4,column:46}},2:{start:{line:7,column:2},end:{line:7,column:41}},3:{start:{line:8,column:2},end:{line:18,column:5}},4:{start:{line:12,column:4},end:{line:12,column:27}},5:{start:{line:14,column:4},end:{line:14,column:40}},6:{start:{line:16,column:4},end:{line:16,column:60}},7:{start:{line:17,column:4},end:{line:17,column:25}},8:{start:{line:21,column:21},end:{line:21,column:50}},9:{start:{line:22,column:2},end:{line:22,column:42}},10:{start:{line:23,column:2},end:{line:23,column:73}}},fnMap:{0:{name:"initialStyleUrl",decl:{start:{line:2,column:16},end:{line:2,column:31}},loc:{start:{line:2,column:34},end:{line:5,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:43},end:{line:19,column:1}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:25},end:{line:15,column:3}},line:13},4:{name:"(anonymous_4)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:22},end:{line:18,column:3}},line:15},5:{name:"removeStyleQuerystring",decl:{start:{line:20,column:16},end:{line:20,column:38}},loc:{start:{line:20,column:41},end:{line:24,column:1}},line:20}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AACA,OAAO,WAAW;AAEX,gBAAS,kBAAkB;AAChC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,SAAO,WAAW,aAAa,IAAI,OAAO;AAC5C;AAEO,gBAAS,aAAa,UAAkB,IAA8B;AAC3E,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,QAAM,UAAU;AAAA,IACd,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,EACpC,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,iCAAiC,QAAQ;AACtD,OAAG,MAAM,UAAU;AAAA,EACrB,CAAC;AACL;AAEO,gBAAS,yBAAyB;AACvC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,aAAW,aAAa,OAAO,OAAO;AACtC,SAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AACvE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d157b2ae65dbd5a5a7dfa0dbf76114e1399ceba"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return jA=function(){return a},a}jA();function Bde(){jA().f[0]++;const n=(jA().s[0]++,new URL(window.location.href));return jA().s[1]++,n.searchParams.get("style")}function uG(n,e){jA().f[1]++,jA().s[2]++,console.log("Loading style",n),jA().s[3]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(t){return jA().f[2]++,jA().s[4]++,t.json()}).then(function(t){jA().f[3]++,jA().s[5]++,e(cc.ensureStyleValidity(t))}).catch(function(){jA().f[4]++,jA().s[6]++,console.warn("Could not fetch default style",n),jA().s[7]++,e(cc.emptyStyle)})}function HD(){jA().f[5]++;const n=(jA().s[8]++,new URL(window.location.href));jA().s[9]++,n.searchParams.delete("style"),jA().s[10]++,window.history.replaceState({},document.title,n.toString())}function Gh(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Gh=function(){return a},a}Gh();function AG(n,e){Gh().f[0]++;const t=(Gh().s[0]++,Pq(n,e));return Gh().s[1]++,t.map(r=>(Gh().f[1]++,Gh().s[2]++,r.command+" "+r.args.join(" ")))}function Ode(n,e){return Gh().f[2]++,Gh().s[3]++,AG(n,e).map(t=>(Gh().f[3]++,Gh().s[4]++,"Undo "+t))}function Ide(n,e){return Gh().f[4]++,Gh().s[5]++,AG(n,e).map(t=>(Gh().f[5]++,Gh().s[6]++,"Redo "+t))}function mi(){var n="/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",e="d0461aebf8a7391762efd074af8c5c2674087e64",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:36}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:50,column:4},end:{line:50,column:13}},22:{start:{line:54,column:4},end:{line:59,column:5}},23:{start:{line:54,column:17},end:{line:54,column:18}},24:{start:{line:55,column:18},end:{line:55,column:44}},25:{start:{line:56,column:6},end:{line:58,column:7}},26:{start:{line:57,column:8},end:{line:57,column:44}},27:{start:{line:63,column:4},end:{line:63,column:65}},28:{start:{line:63,column:37},end:{line:63,column:65}},29:{start:{line:64,column:20},end:{line:64,column:67}},30:{start:{line:65,column:22},end:{line:65,column:68}},31:{start:{line:66,column:4},end:{line:66,column:52}},32:{start:{line:66,column:19},end:{line:66,column:52}},33:{start:{line:67,column:4},end:{line:67,column:25}},34:{start:{line:71,column:4},end:{line:71,column:51}},35:{start:{line:72,column:16},end:{line:72,column:37}},36:{start:{line:73,column:4},end:{line:73,column:63}},37:{start:{line:74,column:4},end:{line:74,column:65}},38:{start:{line:75,column:4},end:{line:75,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:11},end:{line:51,column:3}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:10},end:{line:60,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:68,column:3}},line:62},9:{name:"(anonymous_9)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:17},end:{line:76,column:3}},line:70}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:56,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:58,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},4:{loc:{start:{line:63,column:4},end:{line:63,column:65}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:65}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},5:{loc:{start:{line:66,column:4},end:{line:66,column:52}},type:"if",locations:[{start:{line:66,column:4},end:{line:66,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,iBAAiB,IAA8B;AAC7D,eAAa,iBAAiB,EAAE;AAClC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA,EAEA,KAAK,IAA8B;AACjC,OAAG,IAAI;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,IAA8B;AACxC,QAAG,KAAK,UAAU,WAAW,EAAG,QAAO,iBAAiB,EAAE;AAC1D,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAG,UAAW,QAAO,GAAG,KAAK,MAAM,SAAS,CAAC;AAC7C,qBAAiB,EAAE;AAAA,EACrB;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAChC,WAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,WAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAC3D,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d0461aebf8a7391762efd074af8c5c2674087e64"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return mi=function(){return a},a}mi();const B_=(mi().s[0]++,"maputnik"),cG=(mi().s[1]++,"style"),ZD=(mi().s[2]++,{latest:[B_,"latest_style"].join(":"),accessToken:[B_,"access_token"].join(":")}),kde=(mi().s[3]++,iG[0].url);function XD(n){mi().f[0]++,mi().s[4]++,uG(kde,n)}function Tde(){mi().f[1]++;const n=(mi().s[5]++,[]);mi().s[6]++;for(let e=(mi().s[7]++,0);e<window.localStorage.length;e++){const t=(mi().s[8]++,window.localStorage.key(e));mi().s[9]++,hG(t)?(mi().b[0][0]++,mi().s[10]++,n.push(Pde(t))):mi().b[0][1]++}return mi().s[11]++,n}function hG(n){mi().f[2]++;const e=(mi().s[12]++,n.split(":"));return mi().s[13]++,mi().b[1][0]++,e.length===3&&(mi().b[1][1]++,e[0]===B_)&&(mi().b[1][2]++,e[1]===cG)}function Pde(n){if(mi().f[3]++,mi().s[14]++,hG(n))mi().b[2][1]++;else throw mi().b[2][0]++,mi().s[15]++,"Key is not a valid style key";const e=(mi().s[16]++,n.split(":")),t=(mi().s[17]++,e[2]);return mi().s[18]++,t}function JD(n){return mi().f[4]++,mi().s[19]++,[B_,cG,n].join(":")}class eL{constructor(){In(this,"mapStyles");mi().f[5]++,mi().s[20]++,this.mapStyles=Tde()}init(e){mi().f[6]++,mi().s[21]++,e(null)}purge(){mi().f[7]++,mi().s[22]++;for(let e=(mi().s[23]++,0);e<window.localStorage.length;e++){const t=(mi().s[24]++,window.localStorage.key(e));mi().s[25]++,t.startsWith(B_)?(mi().b[3][0]++,mi().s[26]++,window.localStorage.removeItem(t)):mi().b[3][1]++}}latestStyle(e){if(mi().f[8]++,mi().s[27]++,this.mapStyles.length===0)return mi().b[4][0]++,mi().s[28]++,XD(e);mi().b[4][1]++;const t=(mi().s[29]++,window.localStorage.getItem(ZD.latest)),r=(mi().s[30]++,window.localStorage.getItem(JD(t)));if(mi().s[31]++,r)return mi().b[5][0]++,mi().s[32]++,e(JSON.parse(r));mi().b[5][1]++,mi().s[33]++,XD(e)}save(e){mi().f[9]++,mi().s[34]++,e=cc.ensureStyleValidity(e);const t=(mi().s[35]++,JD(e.id));return mi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),mi().s[37]++,window.localStorage.setItem(ZD.latest,e.id),mi().s[38]++,e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var J6=function(n,e){return J6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},J6(n,e)};function dG(n,e){J6(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Rde(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function Kde(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function Dde(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Kde(arguments[e]));return n}var fG=function(){function n(e,t){this.target=t,this.type=e}return n}(),Lde=function(n){dG(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(fG),Fde=function(n){dG(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var o=n.call(this,"close",i)||this;return o.wasClean=!0,o.code=t,o.reason=r,o}return e}(fG);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var Ude=function(){if(typeof WebSocket<"u")return WebSocket},zde=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},ag={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},jde=function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){i._debug("open event");var a=i._options.minUptime,s=a===void 0?ag.minUptime:a;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},s),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(h){return i._ws.send(h)}),i._messageQueue=[],i.onopen&&i.onopen(o),i._listeners.open.forEach(function(h){return i._callEventListener(o,h)})},this._handleMessage=function(o){i._debug("message event"),i.onmessage&&i.onmessage(o),i._listeners.message.forEach(function(a){return i._callEventListener(o,a)})},this._handleError=function(o){i._debug("error event",o.message),i._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(o),i._debug("exec error listeners"),i._listeners.error.forEach(function(a){return i._callEventListener(o,a)}),i._connect()},this._handleClose=function(o){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(o),i._listeners.close.forEach(function(a){return i._callEventListener(o,a)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?ag.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var o=Rde(i),a=o.next();!a.done;a=o.next()){var s=a.value;this._callEventListener(e,s)}}catch(h){t={error:h}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,Dde(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?ag.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,o=i===void 0?ag.minReconnectionDelay:i,a=e.maxReconnectionDelay,s=a===void 0?ag.maxReconnectionDelay:a,h=0;return this._retryCount>0&&(h=o*Math.pow(r,this._retryCount-1),h>s&&(h=s)),this._debug("next delay",h),h},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?ag.maxRetries:r,o=t.connectionTimeout,a=o===void 0?ag.connectionTimeout:o,s=t.WebSocket,h=s===void 0?Ude():s;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!zde(h))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(g){e._closeCalled||(e._debug("connect",{url:g,protocols:e._protocols}),e._ws=e._protocols?new h(g,e._protocols):new h(g),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},a))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Lde(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Fde(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();function gi(){var n="/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",e="fa2411bec13fe7a0c74835456fb0c60c3fdde9e5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:36}},3:{start:{line:13,column:17},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:30,column:7}},8:{start:{line:22,column:6},end:{line:22,column:29}},9:{start:{line:24,column:23},end:{line:24,column:27}},10:{start:{line:25,column:6},end:{line:25,column:39}},11:{start:{line:26,column:6},end:{line:26,column:32}},12:{start:{line:27,column:6},end:{line:27,column:15}},13:{start:{line:29,column:6},end:{line:29,column:52}},14:{start:{line:33,column:23},end:{line:33,column:67}},15:{start:{line:34,column:4},end:{line:45,column:6}},16:{start:{line:35,column:6},end:{line:35,column:26}},17:{start:{line:35,column:19},end:{line:35,column:26}},18:{start:{line:36,column:6},end:{line:36,column:52}},19:{start:{line:37,column:24},end:{line:37,column:40}},20:{start:{line:38,column:6},end:{line:42,column:7}},21:{start:{line:39,column:8},end:{line:39,column:41}},22:{start:{line:41,column:8},end:{line:41,column:27}},23:{start:{line:43,column:27},end:{line:43,column:65}},24:{start:{line:44,column:6},end:{line:44,column:44}},25:{start:{line:48,column:4},end:{line:58,column:5}},26:{start:{line:49,column:6},end:{line:55,column:9}},27:{start:{line:52,column:8},end:{line:52,column:31}},28:{start:{line:54,column:8},end:{line:54,column:44}},29:{start:{line:57,column:6},end:{line:57,column:92}},30:{start:{line:62,column:22},end:{line:66,column:5}},31:{start:{line:67,column:15},end:{line:67,column:26}},32:{start:{line:68,column:4},end:{line:77,column:7}},33:{start:{line:76,column:6},end:{line:76,column:38}},34:{start:{line:76,column:17},end:{line:76,column:38}},35:{start:{line:78,column:4},end:{line:78,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:31,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:21,column:12},end:{line:21,column:13}},loc:{start:{line:21,column:26},end:{line:23,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:22},end:{line:28,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:28,column:13},end:{line:28,column:14}},loc:{start:{line:28,column:19},end:{line:30,column:5}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:23},end:{line:46,column:3}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:34},end:{line:45,column:5}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:18},end:{line:59,column:3}},line:47},9:{name:"(anonymous_9)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:53,column:7}},line:51},10:{name:"(anonymous_10)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:29},end:{line:55,column:7}},line:53},11:{name:"(anonymous_11)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:17},end:{line:79,column:3}},line:61},12:{name:"(anonymous_12)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:29},end:{line:77,column:5}},line:75}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:12,column:17},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:26}},{start:{line:12,column:30},end:{line:12,column:36}}],line:12},2:{loc:{start:{line:13,column:17},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:41}}],line:13},3:{loc:{start:{line:35,column:6},end:{line:35,column:26}},type:"if",locations:[{start:{line:35,column:6},end:{line:35,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:48,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:58,column:5}},{start:{line:56,column:11},end:{line:58,column:5}}],line:48},5:{loc:{start:{line:76,column:6},end:{line:76,column:38}},type:"if",locations:[{start:{line:76,column:6},end:{line:76,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AAErB,OAAO,2BAA2B;AAQ3B,aAAM,cAAc;AAAA,EAEzB;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,KAAK,QAAQ;AAC1B,UAAM,OAAO,KAAK,QAAQ;AAC1B,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,KAAK,IAA8B;AACjC,UAAM,KAAK,WAAW,WAAW;AAAA,MAC/B,MAAM;AAAA,IACR,CAAC,EACE,KAAK,CAAC,aAAc;AACnB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AACxB,SAAG,IAAI;AAAA,IACT,CAAC,EACA,MAAM,MAAM;AACX,SAAG,IAAI,MAAM,8BAA8B,CAAC;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,IAA8B;AACxC,QAAG,KAAK,eAAe;AACrB,YAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QACrD,MAAM;AAAA,MACR,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,eAAO,SAAS,KAAK;AAAA,MACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,WAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,MACpC,CAAC;AAAA,IACL,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fa2411bec13fe7a0c74835456fb0c60c3fdde9e5"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return gi=function(){return a},a}gi();class Nde{constructor(e){In(this,"localUrl");In(this,"websocketUrl");In(this,"latestStyleId",(gi().s[0]++,void 0));In(this,"onLocalStyleChange");gi().f[0]++,gi().s[1]++,this.onLocalStyleChange=(gi().b[0][0]++,e.onLocalStyleChange||(gi().b[0][1]++,()=>{gi().f[1]++}));const t=(gi().s[2]++,gi().b[1][0]++,e.port||(gi().b[1][1]++,"8000")),r=(gi().s[3]++,gi().b[2][0]++,e.host||(gi().b[2][1]++,"localhost"));gi().s[4]++,this.localUrl=`http://${r}:${t}`,gi().s[5]++,this.websocketUrl=`ws://${r}:${t}/ws`,gi().s[6]++,this.init=this.init.bind(this)}init(e){gi().f[2]++,gi().s[7]++,fetch(this.localUrl+"/styles",{mode:"cors"}).then(t=>(gi().f[3]++,gi().s[8]++,t.json())).then(t=>{gi().f[4]++;const r=(gi().s[9]++,t);gi().s[10]++,this.latestStyleId=r[0],gi().s[11]++,this.notifyLocalChanges(),gi().s[12]++,e(null)}).catch(()=>{gi().f[5]++,gi().s[13]++,e(new Error("Can not connect to style API"))})}notifyLocalChanges(){gi().f[6]++;const e=(gi().s[14]++,new jde(this.websocketUrl));gi().s[15]++,e.onmessage=t=>{if(gi().f[7]++,gi().s[16]++,t.data)gi().b[3][1]++;else{gi().b[3][0]++,gi().s[17]++;return}gi().s[18]++,console.log("Received style update from API");let r=(gi().s[19]++,cc.emptyStyle);gi().s[20]++;try{gi().s[21]++,r=JSON.parse(t.data)}catch(o){gi().s[22]++,console.error(o)}const i=(gi().s[23]++,cc.ensureStyleValidity(r));gi().s[24]++,this.onLocalStyleChange(i)}}latestStyle(e){if(gi().f[8]++,gi().s[25]++,this.latestStyleId)gi().b[4][0]++,gi().s[26]++,fetch(this.localUrl+"/styles/"+this.latestStyleId,{mode:"cors"}).then(function(t){return gi().f[9]++,gi().s[27]++,t.json()}).then(function(t){gi().f[10]++,gi().s[28]++,e(cc.ensureStyleValidity(t))});else throw gi().b[4][1]++,gi().s[29]++,new Error("No latest style available. You need to init the api backend first.")}save(e){gi().f[11]++;const t=(gi().s[30]++,SF(cc.stripAccessTokens(cc.replaceAccessTokens(e)))),r=(gi().s[31]++,e.id);return gi().s[32]++,fetch(this.localUrl+"/styles/"+r,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}).catch(function(i){gi().f[12]++,gi().s[33]++,i?(gi().b[5][0]++,gi().s[34]++,console.error(i)):gi().b[5][1]++}),gi().s[35]++,e}}function Ml(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="9277d165d3b1fd7c235a1faab33cf41596d9966e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAA6C;AAGvD,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9277d165d3b1fd7c235a1faab33cf41596d9966e"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Ml=function(){return a},a}Ml();class Gde{constructor(e=(Ml().b[0][0]++,[])){In(this,"revisions");In(this,"currentIdx");Ml().f[0]++,Ml().s[0]++,this.revisions=e,Ml().s[1]++,this.currentIdx=e.length-1}get latest(){return Ml().f[1]++,Ml().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Ml().f[2]++,Ml().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Ml().f[3]++,Ml().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Ml().s[5]++,this.revisions.push(e),Ml().s[6]++,this.currentIdx++}undo(){return Ml().f[4]++,Ml().s[7]++,this.currentIdx>0?(Ml().b[1][0]++,Ml().s[8]++,this.currentIdx--):Ml().b[1][1]++,Ml().s[9]++,this.current}redo(){return Ml().f[5]++,Ml().s[10]++,this.currentIdx<this.revisions.length-1?(Ml().b[2][0]++,Ml().s[11]++,this.currentIdx++):Ml().b[2][1]++,Ml().s[12]++,this.current}}var kE,tL;function Wde(){if(tL)return kE;tL=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,h=typeof window=="object"&&window&&window.Object===Object&&window,g=typeof self=="object"&&self&&self.Object===Object&&self,b=h||g||Function("return this")(),B=Object.prototype,S=B.toString,I=Math.max,k=Math.min,U=function(){return b.Date.now()};function z(J,N,ie){var he,ce,we,pe,Ce,Pe,de=0,rt=!1,ze=!1,Qe=!0;if(typeof J!="function")throw new TypeError(n);N=q(N)||0,Q(ie)&&(rt=!!ie.leading,ze="maxWait"in ie,we=ze?I(q(ie.maxWait)||0,N):we,Qe="trailing"in ie?!!ie.trailing:Qe);function ut(De){var ke=he,Oe=ce;return he=ce=void 0,de=De,pe=J.apply(Oe,ke),pe}function Te(De){return de=De,Ce=setTimeout(wt,N),rt?ut(De):pe}function Ue(De){var ke=De-Pe,Oe=De-de,Je=N-ke;return ze?k(Je,we-Oe):Je}function st(De){var ke=De-Pe,Oe=De-de;return Pe===void 0||ke>=N||ke<0||ze&&Oe>=we}function wt(){var De=U();if(st(De))return mt(De);Ce=setTimeout(wt,Ue(De))}function mt(De){return Ce=void 0,Qe&&he?ut(De):(he=ce=void 0,pe)}function ft(){Ce!==void 0&&clearTimeout(Ce),de=0,he=Pe=ce=Ce=void 0}function Ut(){return Ce===void 0?pe:mt(U())}function Lt(){var De=U(),ke=st(De);if(he=arguments,ce=this,Pe=De,ke){if(Ce===void 0)return Te(Pe);if(ze)return Ce=setTimeout(wt,N),ut(Pe)}return Ce===void 0&&(Ce=setTimeout(wt,N)),pe}return Lt.cancel=ft,Lt.flush=Ut,Lt}function Y(J,N,ie){var he=!0,ce=!0;if(typeof J!="function")throw new TypeError(n);return Q(ie)&&(he="leading"in ie?!!ie.leading:he,ce="trailing"in ie?!!ie.trailing:ce),z(J,N,{leading:he,maxWait:N,trailing:ce})}function Q(J){var N=typeof J;return!!J&&(N=="object"||N=="function")}function ne(J){return!!J&&typeof J=="object"}function X(J){return typeof J=="symbol"||ne(J)&&S.call(J)==t}function q(J){if(typeof J=="number")return J;if(X(J))return e;if(Q(J)){var N=typeof J.valueOf=="function"?J.valueOf():J;J=Q(N)?N+"":N}if(typeof J!="string")return J===0?J:+J;J=J.replace(r,"");var ie=o.test(J);return ie||a.test(J)?s(J.slice(2),ie?2:8):i.test(J)?e:+J}return kE=Y,kE}var Qde=Wde();const qde=Ka(Qde);var Dv={exports:{}};Dv.exports;var nL;function Yde(){return nL||(nL=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",h="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",B="[object Date]",S="[object Error]",I="[object Function]",k="[object GeneratorFunction]",U="[object Map]",z="[object Number]",Y="[object Null]",Q="[object Object]",ne="[object Promise]",X="[object Proxy]",q="[object RegExp]",J="[object Set]",N="[object String]",ie="[object Symbol]",he="[object Undefined]",ce="[object WeakMap]",we="[object ArrayBuffer]",pe="[object DataView]",Ce="[object Float32Array]",Pe="[object Float64Array]",de="[object Int8Array]",rt="[object Int16Array]",ze="[object Int32Array]",Qe="[object Uint8Array]",ut="[object Uint8ClampedArray]",Te="[object Uint16Array]",Ue="[object Uint32Array]",st=/[\\^$.*+?()[\]{}|]/g,wt=/^\[object .+?Constructor\]$/,mt=/^(?:0|[1-9]\d*)$/,ft={};ft[Ce]=ft[Pe]=ft[de]=ft[rt]=ft[ze]=ft[Qe]=ft[ut]=ft[Te]=ft[Ue]=!0,ft[s]=ft[h]=ft[we]=ft[b]=ft[pe]=ft[B]=ft[S]=ft[I]=ft[U]=ft[z]=ft[Q]=ft[q]=ft[J]=ft[N]=ft[ce]=!1;var Ut=typeof window=="object"&&window&&window.Object===Object&&window,Lt=typeof self=="object"&&self&&self.Object===Object&&self,De=Ut||Lt||Function("return this")(),ke=e&&!e.nodeType&&e,Oe=ke&&!0&&n&&!n.nodeType&&n,Je=Oe&&Oe.exports===ke,Mt=Je&&Ut.process,gt=function(){try{return Mt&&Mt.binding&&Mt.binding("util")}catch{}}(),Nt=gt&&gt.isTypedArray;function nn(ee,Se){for(var tt=-1,$t=ee==null?0:ee.length,Or=0,Gn=[];++tt<$t;){var si=ee[tt];Se(si,tt,ee)&&(Gn[Or++]=si)}return Gn}function en(ee,Se){for(var tt=-1,$t=Se.length,Or=ee.length;++tt<$t;)ee[Or+tt]=Se[tt];return ee}function Sn(ee,Se){for(var tt=-1,$t=ee==null?0:ee.length;++tt<$t;)if(Se(ee[tt],tt,ee))return!0;return!1}function Yn(ee,Se){for(var tt=-1,$t=Array(ee);++tt<ee;)$t[tt]=Se(tt);return $t}function Qr(ee){return function(Se){return ee(Se)}}function cr(ee,Se){return ee.has(Se)}function fr(ee,Se){return ee==null?void 0:ee[Se]}function br(ee){var Se=-1,tt=Array(ee.size);return ee.forEach(function($t,Or){tt[++Se]=[Or,$t]}),tt}function Cr(ee,Se){return function(tt){return ee(Se(tt))}}function Mr(ee){var Se=-1,tt=Array(ee.size);return ee.forEach(function($t){tt[++Se]=$t}),tt}var Qn=Array.prototype,Sr=Function.prototype,Ge=Object.prototype,ue=De["__core-js_shared__"],me=Sr.toString,Xe=Ge.hasOwnProperty,Bt=function(){var ee=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Yt=Ge.toString,it=RegExp("^"+me.call(Xe).replace(st,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kt=Je?De.Buffer:void 0,Ye=De.Symbol,fe=De.Uint8Array,xe=Ge.propertyIsEnumerable,p=Qn.splice,Ne=Ye?Ye.toStringTag:void 0,dt=Object.getOwnPropertySymbols,pt=Kt?Kt.isBuffer:void 0,Ot=Cr(Object.keys,Object),_t=Ei(De,"DataView"),rn=Ei(De,"Map"),Zt=Ei(De,"Promise"),Gt=Ei(De,"Set"),bt=Ei(De,"WeakMap"),Pn=Ei(Object,"create"),En=fo(_t),lr=fo(rn),wr=fo(Zt),on=fo(Gt),zn=fo(bt),Dn=Ye?Ye.prototype:void 0,Br=Dn?Dn.valueOf:void 0;function xr(ee){var Se=-1,tt=ee==null?0:ee.length;for(this.clear();++Se<tt;){var $t=ee[Se];this.set($t[0],$t[1])}}function Rr(){this.__data__=Pn?Pn(null):{},this.size=0}function rr(ee){var Se=this.has(ee)&&delete this.__data__[ee];return this.size-=Se?1:0,Se}function co(ee){var Se=this.__data__;if(Pn){var tt=Se[ee];return tt===r?void 0:tt}return Xe.call(Se,ee)?Se[ee]:void 0}function $a(ee){var Se=this.__data__;return Pn?Se[ee]!==void 0:Xe.call(Se,ee)}function ji(ee,Se){var tt=this.__data__;return this.size+=this.has(ee)?0:1,tt[ee]=Pn&&Se===void 0?r:Se,this}xr.prototype.clear=Rr,xr.prototype.delete=rr,xr.prototype.get=co,xr.prototype.has=$a,xr.prototype.set=ji;function ui(ee){var Se=-1,tt=ee==null?0:ee.length;for(this.clear();++Se<tt;){var $t=ee[Se];this.set($t[0],$t[1])}}function Vi(){this.__data__=[],this.size=0}function as(ee){var Se=this.__data__,tt=er(Se,ee);if(tt<0)return!1;var $t=Se.length-1;return tt==$t?Se.pop():p.call(Se,tt,1),--this.size,!0}function Ni(ee){var Se=this.__data__,tt=er(Se,ee);return tt<0?void 0:Se[tt][1]}function ll(ee){return er(this.__data__,ee)>-1}function ul(ee,Se){var tt=this.__data__,$t=er(tt,ee);return $t<0?(++this.size,tt.push([ee,Se])):tt[$t][1]=Se,this}ui.prototype.clear=Vi,ui.prototype.delete=as,ui.prototype.get=Ni,ui.prototype.has=ll,ui.prototype.set=ul;function ts(ee){var Se=-1,tt=ee==null?0:ee.length;for(this.clear();++Se<tt;){var $t=ee[Se];this.set($t[0],$t[1])}}function Aa(){this.size=0,this.__data__={hash:new xr,map:new(rn||ui),string:new xr}}function Al(ee){var Se=Dr(this,ee).delete(ee);return this.size-=Se?1:0,Se}function ao(ee){return Dr(this,ee).get(ee)}function Pu(ee){return Dr(this,ee).has(ee)}function tu(ee,Se){var tt=Dr(this,ee),$t=tt.size;return tt.set(ee,Se),this.size+=tt.size==$t?0:1,this}ts.prototype.clear=Aa,ts.prototype.delete=Al,ts.prototype.get=ao,ts.prototype.has=Pu,ts.prototype.set=tu;function so(ee){var Se=-1,tt=ee==null?0:ee.length;for(this.__data__=new ts;++Se<tt;)this.add(ee[Se])}function Kr(ee){return this.__data__.set(ee,r),this}function Va(ee){return this.__data__.has(ee)}so.prototype.add=so.prototype.push=Kr,so.prototype.has=Va;function Ts(ee){var Se=this.__data__=new ui(ee);this.size=Se.size}function ia(){this.__data__=new ui,this.size=0}function We(ee){var Se=this.__data__,tt=Se.delete(ee);return this.size=Se.size,tt}function Ct(ee){return this.__data__.get(ee)}function pn(ee){return this.__data__.has(ee)}function Nn(ee,Se){var tt=this.__data__;if(tt instanceof ui){var $t=tt.__data__;if(!rn||$t.length<t-1)return $t.push([ee,Se]),this.size=++tt.size,this;tt=this.__data__=new ts($t)}return tt.set(ee,Se),this.size=tt.size,this}Ts.prototype.clear=ia,Ts.prototype.delete=We,Ts.prototype.get=Ct,Ts.prototype.has=pn,Ts.prototype.set=Nn;function An(ee,Se){var tt=Xa(ee),$t=!tt&&ws(ee),Or=!tt&&!$t&&El(ee),Gn=!tt&&!$t&&!Or&&ru(ee),si=tt||$t||Or||Gn,hi=si?Yn(ee.length,String):[],pr=hi.length;for(var Ir in ee)Xe.call(ee,Ir)&&!(si&&(Ir=="length"||Or&&(Ir=="offset"||Ir=="parent")||Gn&&(Ir=="buffer"||Ir=="byteLength"||Ir=="byteOffset")||Ns(Ir,pr)))&&hi.push(Ir);return hi}function er(ee,Se){for(var tt=ee.length;tt--;)if(ms(ee[tt][0],Se))return tt;return-1}function Ti(ee,Se,tt){var $t=Se(ee);return Xa(ee)?$t:en($t,tt(ee))}function ho(ee){return ee==null?ee===void 0?he:Y:Ne&&Ne in Object(ee)?Za(ee):Vs(ee)}function vs(ee){return Jr(ee)&&ho(ee)==s}function js(ee,Se,tt,$t,Or){return ee===Se?!0:ee==null||Se==null||!Jr(ee)&&!Jr(Se)?ee!==ee&&Se!==Se:vA(ee,Se,tt,$t,js,Or)}function vA(ee,Se,tt,$t,Or,Gn){var si=Xa(ee),hi=Xa(Se),pr=si?h:Mo(ee),Ir=hi?h:Mo(Se);pr=pr==s?Q:pr,Ir=Ir==s?Q:Ir;var vi=pr==Q,So=Ir==Q,ki=pr==Ir;if(ki&&El(ee)){if(!El(Se))return!1;si=!0,vi=!1}if(ki&&!vi)return Gn||(Gn=new Ts),si||ru(ee)?ci(ee,Se,tt,$t,Or,Gn):ca(ee,Se,pr,tt,$t,Or,Gn);if(!(tt&i)){var qr=vi&&Xe.call(ee,"__wrapped__"),Zi=So&&Xe.call(Se,"__wrapped__");if(qr||Zi){var Xi=qr?ee.value():ee,us=Zi?Se.value():Se;return Gn||(Gn=new Ts),Or(Xi,us,tt,$t,Gn)}}return ki?(Gn||(Gn=new Ts),iA(ee,Se,tt,$t,Or,Gn)):!1}function ri(ee){if(!Fi(ee)||zl(ee))return!1;var Se=Hi(ee)?it:wt;return Se.test(fo(ee))}function wi(ee){return Jr(ee)&&nu(ee.length)&&!!ft[ho(ee)]}function Ha(ee){if(!ns(ee))return Ot(ee);var Se=[];for(var tt in Object(ee))Xe.call(ee,tt)&&tt!="constructor"&&Se.push(tt);return Se}function ci(ee,Se,tt,$t,Or,Gn){var si=tt&i,hi=ee.length,pr=Se.length;if(hi!=pr&&!(si&&pr>hi))return!1;var Ir=Gn.get(ee);if(Ir&&Gn.get(Se))return Ir==Se;var vi=-1,So=!0,ki=tt&o?new so:void 0;for(Gn.set(ee,Se),Gn.set(Se,ee);++vi<hi;){var qr=ee[vi],Zi=Se[vi];if($t)var Xi=si?$t(Zi,qr,vi,Se,ee,Gn):$t(qr,Zi,vi,ee,Se,Gn);if(Xi!==void 0){if(Xi)continue;So=!1;break}if(ki){if(!Sn(Se,function(us,ya){if(!cr(ki,ya)&&(qr===us||Or(qr,us,tt,$t,Gn)))return ki.push(ya)})){So=!1;break}}else if(!(qr===Zi||Or(qr,Zi,tt,$t,Gn))){So=!1;break}}return Gn.delete(ee),Gn.delete(Se),So}function ca(ee,Se,tt,$t,Or,Gn,si){switch(tt){case pe:if(ee.byteLength!=Se.byteLength||ee.byteOffset!=Se.byteOffset)return!1;ee=ee.buffer,Se=Se.buffer;case we:return!(ee.byteLength!=Se.byteLength||!Gn(new fe(ee),new fe(Se)));case b:case B:case z:return ms(+ee,+Se);case S:return ee.name==Se.name&&ee.message==Se.message;case q:case N:return ee==Se+"";case U:var hi=br;case J:var pr=$t&i;if(hi||(hi=Mr),ee.size!=Se.size&&!pr)return!1;var Ir=si.get(ee);if(Ir)return Ir==Se;$t|=o,si.set(ee,Se);var vi=ci(hi(ee),hi(Se),$t,Or,Gn,si);return si.delete(ee),vi;case ie:if(Br)return Br.call(ee)==Br.call(Se)}return!1}function iA(ee,Se,tt,$t,Or,Gn){var si=tt&i,hi=ls(ee),pr=hi.length,Ir=ls(Se),vi=Ir.length;if(pr!=vi&&!si)return!1;for(var So=pr;So--;){var ki=hi[So];if(!(si?ki in Se:Xe.call(Se,ki)))return!1}var qr=Gn.get(ee);if(qr&&Gn.get(Se))return qr==Se;var Zi=!0;Gn.set(ee,Se),Gn.set(Se,ee);for(var Xi=si;++So<pr;){ki=hi[So];var us=ee[ki],ya=Se[ki];if($t)var La=si?$t(ya,us,ki,Se,ee,Gn):$t(us,ya,ki,ee,Se,Gn);if(!(La===void 0?us===ya||Or(us,ya,tt,$t,Gn):La)){Zi=!1;break}Xi||(Xi=ki=="constructor")}if(Zi&&!Xi){var fu=ee.constructor,Hs=Se.constructor;fu!=Hs&&"constructor"in ee&&"constructor"in Se&&!(typeof fu=="function"&&fu instanceof fu&&typeof Hs=="function"&&Hs instanceof Hs)&&(Zi=!1)}return Gn.delete(ee),Gn.delete(Se),Zi}function ls(ee){return Ti(ee,Gi,Ps)}function Dr(ee,Se){var tt=ee.__data__;return du(Se)?tt[typeof Se=="string"?"string":"hash"]:tt.map}function Ei(ee,Se){var tt=fr(ee,Se);return ri(tt)?tt:void 0}function Za(ee){var Se=Xe.call(ee,Ne),tt=ee[Ne];try{ee[Ne]=void 0;var $t=!0}catch{}var Or=Yt.call(ee);return $t&&(Se?ee[Ne]=tt:delete ee[Ne]),Or}var Ps=dt?function(ee){return ee==null?[]:(ee=Object(ee),nn(dt(ee),function(Se){return xe.call(ee,Se)}))}:lo,Mo=ho;(_t&&Mo(new _t(new ArrayBuffer(1)))!=pe||rn&&Mo(new rn)!=U||Zt&&Mo(Zt.resolve())!=ne||Gt&&Mo(new Gt)!=J||bt&&Mo(new bt)!=ce)&&(Mo=function(ee){var Se=ho(ee),tt=Se==Q?ee.constructor:void 0,$t=tt?fo(tt):"";if($t)switch($t){case En:return pe;case lr:return U;case wr:return ne;case on:return J;case zn:return ce}return Se});function Ns(ee,Se){return Se=Se??a,!!Se&&(typeof ee=="number"||mt.test(ee))&&ee>-1&&ee%1==0&&ee<Se}function du(ee){var Se=typeof ee;return Se=="string"||Se=="number"||Se=="symbol"||Se=="boolean"?ee!=="__proto__":ee===null}function zl(ee){return!!Bt&&Bt in ee}function ns(ee){var Se=ee&&ee.constructor,tt=typeof Se=="function"&&Se.prototype||Ge;return ee===tt}function Vs(ee){return Yt.call(ee)}function fo(ee){if(ee!=null){try{return me.call(ee)}catch{}try{return ee+""}catch{}}return""}function ms(ee,Se){return ee===Se||ee!==ee&&Se!==Se}var ws=vs(function(){return arguments}())?vs:function(ee){return Jr(ee)&&Xe.call(ee,"callee")&&!xe.call(ee,"callee")},Xa=Array.isArray;function Rs(ee){return ee!=null&&nu(ee.length)&&!Hi(ee)}var El=pt||Pi;function oA(ee,Se){return js(ee,Se)}function Hi(ee){if(!Fi(ee))return!1;var Se=ho(ee);return Se==I||Se==k||Se==g||Se==X}function nu(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=a}function Fi(ee){var Se=typeof ee;return ee!=null&&(Se=="object"||Se=="function")}function Jr(ee){return ee!=null&&typeof ee=="object"}var ru=Nt?Qr(Nt):wi;function Gi(ee){return Rs(ee)?An(ee):Ha(ee)}function lo(){return[]}function Pi(){return!1}n.exports=oA}(Dv,Dv.exports)),Dv.exports}var $de=Yde();const eB=Ka($de);function Di(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Di=function(){return a},a}Di();class Vde{constructor(e=(Di().b[0][0]++,{})){In(this,"onSourcesChange");In(this,"onVectorLayersChange");In(this,"throttledAnalyzeVectorLayerFields");In(this,"_sources");In(this,"_vectorLayers");Di().f[0]++,Di().s[0]++,this.onSourcesChange=(Di().b[1][0]++,e.onSourcesChange||(Di().b[1][1]++,()=>{Di().f[1]++})),Di().s[1]++,this.onVectorLayersChange=(Di().b[2][0]++,e.onVectorLayersChange||(Di().b[2][1]++,()=>{Di().f[2]++})),Di().s[2]++,this._sources={},Di().s[3]++,this._vectorLayers={},Di().s[4]++,this.throttledAnalyzeVectorLayerFields=qde(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Di().f[3]++;const t=(Di().s[5]++,{...this._sources});Di().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Di().f[4]++,Di().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Di().s[8]++,eB(t,this._sources)?Di().b[3][1]++:(Di().b[3][0]++,Di().s[9]++,this.onSourcesChange(this._sources)),Di().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Di().f[5]++;const t=(Di().s[11]++,{...this._vectorLayers});Di().s[12]++,Object.keys(this._sources).forEach(r=>{Di().f[6]++,Di().s[13]++,(Di().b[4][0]++,this._sources[r]||(Di().b[4][1]++,[])).forEach(i=>{Di().f[7]++;const o=(Di().s[14]++,Di().b[5][0]++,this._vectorLayers[i]||(Di().b[5][1]++,{})),a=(Di().s[15]++,{sourceLayer:i});Di().s[16]++,e.querySourceFeatures(r,a).forEach(s=>{Di().f[8]++,Di().s[17]++,Object.keys(s.properties).forEach(h=>{Di().f[9]++;const g=(Di().s[18]++,Di().b[6][0]++,o[h]||(Di().b[6][1]++,{}));Di().s[19]++,g[s.properties[h]]={},Di().s[20]++,o[h]=g})}),Di().s[21]++,this._vectorLayers[i]=o})}),Di().s[22]++,eB(t,this._vectorLayers)?Di().b[7][1]++:(Di().b[7][0]++,Di().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Di().f[10]++,Di().s[24]++,this._sources}get vectorLayers(){return Di().f[11]++,Di().s[25]++,this._vectorLayers}}function na(){var n="/home/runner/work/maputnik/maputnik/src/libs/debug.ts",e="f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/debug.ts",statementMap:{0:{start:{line:1,column:19},end:{line:1,column:21}},1:{start:{line:3,column:13},end:{line:3,column:55}},2:{start:{line:4,column:18},end:{line:4,column:33}},3:{start:{line:5,column:2},end:{line:9,column:3}},4:{start:{line:6,column:4},end:{line:6,column:42}},5:{start:{line:8,column:4},end:{line:8,column:17}},6:{start:{line:12,column:2},end:{line:12,column:91}},7:{start:{line:15,column:2},end:{line:17,column:3}},8:{start:{line:16,column:4},end:{line:16,column:19}},9:{start:{line:18,column:2},end:{line:18,column:54}},10:{start:{line:19,column:2},end:{line:19,column:37}},11:{start:{line:22,column:2},end:{line:24,column:3}},12:{start:{line:23,column:4},end:{line:23,column:19}},13:{start:{line:25,column:2},end:{line:27,column:3}},14:{start:{line:26,column:4},end:{line:26,column:38}},15:{start:{line:29,column:12},end:{line:33,column:1}},16:{start:{line:34,column:0},end:{line:34,column:19}}},fnMap:{0:{name:"enabled",decl:{start:{line:2,column:9},end:{line:2,column:16}},loc:{start:{line:2,column:19},end:{line:10,column:1}},line:2},1:{name:"genErr",decl:{start:{line:11,column:9},end:{line:11,column:15}},loc:{start:{line:11,column:18},end:{line:13,column:1}},line:11},2:{name:"set",decl:{start:{line:14,column:9},end:{line:14,column:12}},loc:{start:{line:14,column:36},end:{line:20,column:1}},line:14},3:{name:"get",decl:{start:{line:21,column:9},end:{line:21,column:12}},loc:{start:{line:21,column:29},end:{line:28,column:1}},line:21}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5},1:{loc:{start:{line:15,column:2},end:{line:17,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:17,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:18,column:26},end:{line:18,column:53}},type:"binary-expr",locations:[{start:{line:18,column:26},end:{line:18,column:47}},{start:{line:18,column:51},end:{line:18,column:53}}],line:18},3:{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:25,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/debug.ts"],names:[],mappings:"AAMA,MAAM,aAAyB,CAAC;AAEhC,SAAS,UAAU;AACjB,QAAM,KAAK,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE;AACzC,QAAM,UAAU,GAAG,IAAI,OAAO;AAC9B,MAAG,SAAS;AACV,WAAO,CAAC,CAAC,QAAQ,MAAM,aAAa;AAAA,EACtC,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,SAAS;AAChB,SAAO,IAAI,MAAM,sEAAsE;AACzF;AAEA,SAAS,IAAI,WAA6B,KAAa,OAAY;AACjE,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,aAAW,SAAS,IAAI,WAAW,SAAS,KAAK,CAAC;AAClD,aAAW,SAAS,EAAE,GAAG,IAAI;AAC/B;AAEA,SAAS,IAAI,WAA6B,KAAa;AACrD,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,MAAG,OAAO,UAAU,eAAe,KAAK,YAAY,SAAS,GAAG;AAC9D,WAAO,WAAW,SAAS,EAAE,GAAG;AAAA,EAClC;AACF;AAEA,MAAM,MAAM;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF;AAEC,OAAe,QAAQ;AACxB,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return na=function(){return a},a}na();const $v=(na().s[0]++,{});function PI(){na().f[0]++;const n=(na().s[1]++,new URL(window.location.href).searchParams),e=(na().s[2]++,n.get("debug"));return na().s[3]++,e?(na().b[0][0]++,na().s[4]++,!!e.match(/^(|1|true)$/)):(na().b[0][1]++,na().s[5]++,!1)}function pG(){return na().f[1]++,na().s[6]++,new Error("Debug not enabled, enable by appending '?debug' to your query string")}function Hde(n,e,t){if(na().f[2]++,na().s[7]++,PI())na().b[1][1]++;else throw na().b[1][0]++,na().s[8]++,pG();na().s[9]++,$v[n]=(na().b[2][0]++,$v[n]||(na().b[2][1]++,{})),na().s[10]++,$v[n][e]=t}function Zde(n,e){if(na().f[3]++,na().s[11]++,PI())na().b[3][1]++;else throw na().b[3][0]++,na().s[12]++,pG();if(na().s[13]++,Object.prototype.hasOwnProperty.call($v,n))return na().b[4][0]++,na().s[14]++,$v[n][e];na().b[4][1]++}const Ag=(na().s[15]++,{enabled:PI,get:Zde,set:Hde});na().s[16]++;window.debug=Ag;function Me(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="b0d5f8ee8537ee2f4707fe123c0c222059f25ad2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:2},end:{line:53,column:3}},5:{start:{line:42,column:24},end:{line:42,column:95}},6:{start:{line:43,column:4},end:{line:45,column:5}},7:{start:{line:44,column:6},end:{line:44,column:47}},8:{start:{line:46,column:9},end:{line:53,column:3}},9:{start:{line:47,column:24},end:{line:47,column:96}},10:{start:{line:48,column:4},end:{line:50,column:5}},11:{start:{line:49,column:6},end:{line:49,column:47}},12:{start:{line:52,column:4},end:{line:52,column:15}},13:{start:{line:56,column:2},end:{line:65,column:4}},14:{start:{line:72,column:4},end:{line:72,column:17}},15:{start:{line:73,column:4},end:{line:73,column:19}},16:{start:{line:74,column:4},end:{line:74,column:45}},17:{start:{line:75,column:19},end:{line:75,column:75}},18:{start:{line:76,column:15},end:{line:76,column:38}},19:{start:{line:77,column:4},end:{line:79,column:5}},20:{start:{line:78,column:6},end:{line:78,column:34}},21:{start:{line:80,column:4},end:{line:84,column:7}},22:{start:{line:81,column:40},end:{line:81,column:86}},23:{start:{line:85,column:22},end:{line:136,column:5}},24:{start:{line:89,column:10},end:{line:89,column:40}},25:{start:{line:95,column:10},end:{line:95,column:35}},26:{start:{line:101,column:10},end:{line:101,column:37}},27:{start:{line:107,column:10},end:{line:107,column:38}},28:{start:{line:113,column:10},end:{line:113,column:39}},29:{start:{line:119,column:10},end:{line:121,column:12}},30:{start:{line:127,column:10},end:{line:127,column:63}},31:{start:{line:133,column:10},end:{line:133,column:36}},32:{start:{line:137,column:4},end:{line:150,column:7}},33:{start:{line:138,column:6},end:{line:149,column:7}},34:{start:{line:139,column:8},end:{line:139,column:24}},35:{start:{line:140,column:8},end:{line:140,column:30}},36:{start:{line:141,column:13},end:{line:149,column:7}},37:{start:{line:142,column:25},end:{line:144,column:10}},38:{start:{line:143,column:10},end:{line:143,column:41}},39:{start:{line:145,column:8},end:{line:148,column:9}},40:{start:{line:146,column:10},end:{line:146,column:44}},41:{start:{line:147,column:10},end:{line:147,column:29}},42:{start:{line:151,column:21},end:{line:151,column:38}},43:{start:{line:152,column:4},end:{line:171,column:5}},44:{start:{line:153,column:6},end:{line:153,column:41}},45:{start:{line:154,column:6},end:{line:154,column:74}},46:{start:{line:154,column:43},end:{line:154,column:72}},47:{start:{line:155,column:6},end:{line:155,column:31}},48:{start:{line:157,column:6},end:{line:159,column:7}},49:{start:{line:158,column:8},end:{line:158,column:33}},50:{start:{line:160,column:6},end:{line:170,column:9}},51:{start:{line:161,column:8},end:{line:164,column:9}},52:{start:{line:162,column:10},end:{line:162,column:74}},53:{start:{line:163,column:10},end:{line:163,column:45}},54:{start:{line:165,column:8},end:{line:165,column:104}},55:{start:{line:165,column:50},end:{line:165,column:102}},56:{start:{line:166,column:8},end:{line:169,column:9}},57:{start:{line:167,column:10},end:{line:167,column:63}},58:{start:{line:168,column:10},end:{line:168,column:69}},59:{start:{line:172,column:4},end:{line:175,column:5}},60:{start:{line:173,column:6},end:{line:173,column:65}},61:{start:{line:174,column:6},end:{line:174,column:59}},62:{start:{line:176,column:4},end:{line:210,column:6}},63:{start:{line:211,column:4},end:{line:213,column:7}},64:{start:{line:212,column:35},end:{line:212,column:69}},65:{start:{line:215,column:19},end:{line:233,column:3}},66:{start:{line:216,column:4},end:{line:232,column:5}},67:{start:{line:217,column:6},end:{line:223,column:7}},68:{start:{line:218,column:8},end:{line:218,column:27}},69:{start:{line:219,column:8},end:{line:219,column:22}},70:{start:{line:220,column:13},end:{line:223,column:7}},71:{start:{line:221,column:8},end:{line:221,column:27}},72:{start:{line:222,column:8},end:{line:222,column:22}},73:{start:{line:225,column:6},end:{line:231,column:7}},74:{start:{line:226,column:8},end:{line:226,column:27}},75:{start:{line:227,column:8},end:{line:227,column:22}},76:{start:{line:228,column:13},end:{line:231,column:7}},77:{start:{line:229,column:8},end:{line:229,column:27}},78:{start:{line:230,column:8},end:{line:230,column:22}},79:{start:{line:235,column:4},end:{line:235,column:60}},80:{start:{line:238,column:4},end:{line:238,column:63}},81:{start:{line:241,column:4},end:{line:241,column:40}},82:{start:{line:244,column:21},end:{line:244,column:55}},83:{start:{line:245,column:24},end:{line:245,column:93}},84:{start:{line:246,column:21},end:{line:246,column:110}},85:{start:{line:247,column:4},end:{line:249,column:7}},86:{start:{line:248,column:6},end:{line:248,column:80}},87:{start:{line:252,column:4},end:{line:254,column:7}},88:{start:{line:253,column:6},end:{line:253,column:80}},89:{start:{line:256,column:29},end:{line:270,column:3}},90:{start:{line:257,column:4},end:{line:261,column:5}},91:{start:{line:258,column:6},end:{line:260,column:9}},92:{start:{line:262,column:25},end:{line:268,column:5}},93:{start:{line:269,column:4},end:{line:269,column:38}},94:{start:{line:271,column:19},end:{line:383,column:3}},95:{start:{line:272,column:4},end:{line:277,column:6}},96:{start:{line:278,column:4},end:{line:280,column:5}},97:{start:{line:279,column:6},end:{line:279,column:44}},98:{start:{line:281,column:19},end:{line:281,column:51}},99:{start:{line:282,column:24},end:{line:282,column:26}},100:{start:{line:283,column:4},end:{line:294,column:5}},101:{start:{line:284,column:26},end:{line:284,column:42}},102:{start:{line:285,column:6},end:{line:293,column:9}},103:{start:{line:286,column:8},end:{line:291,column:9}},104:{start:{line:287,column:24},end:{line:289,column:11}},105:{start:{line:290,column:10},end:{line:290,column:34}},106:{start:{line:292,column:8},end:{line:292,column:40}},107:{start:{line:295,column:25},end:{line:346,column:6}},108:{start:{line:296,column:23},end:{line:296,column:109}},109:{start:{line:297,column:6},end:{line:310,column:7}},110:{start:{line:298,column:35},end:{line:298,column:43}},111:{start:{line:299,column:8},end:{line:309,column:10}},112:{start:{line:311,column:33},end:{line:311,column:100}},113:{start:{line:312,column:6},end:{line:325,column:7}},114:{start:{line:313,column:35},end:{line:313,column:53}},115:{start:{line:314,column:8},end:{line:324,column:10}},116:{start:{line:326,column:25},end:{line:326,column:88}},117:{start:{line:327,column:6},end:{line:345,column:7}},118:{start:{line:328,column:52},end:{line:328,column:62}},119:{start:{line:329,column:20},end:{line:329,column:78}},120:{start:{line:330,column:8},end:{line:340,column:10}},121:{start:{line:342,column:8},end:{line:344,column:10}},122:{start:{line:347,column:24},end:{line:347,column:30}},123:{start:{line:348,column:4},end:{line:362,column:5}},124:{start:{line:349,column:6},end:{line:349,column:42}},125:{start:{line:350,column:6},end:{line:361,column:9}},126:{start:{line:351,column:28},end:{line:351,column:33}},127:{start:{line:352,column:8},end:{line:360,column:9}},128:{start:{line:353,column:10},end:{line:359,column:11}},129:{start:{line:354,column:28},end:{line:354,column:49}},130:{start:{line:355,column:30},end:{line:355,column:69}},131:{start:{line:356,column:12},end:{line:356,column:44}},132:{start:{line:358,column:12},end:{line:358,column:30}},133:{start:{line:363,column:4},end:{line:365,column:5}},134:{start:{line:364,column:6},end:{line:364,column:40}},135:{start:{line:366,column:4},end:{line:368,column:5}},136:{start:{line:367,column:6},end:{line:367,column:40}},137:{start:{line:369,column:4},end:{line:371,column:5}},138:{start:{line:370,column:6},end:{line:370,column:47}},139:{start:{line:372,column:4},end:{line:374,column:5}},140:{start:{line:373,column:6},end:{line:373,column:31}},141:{start:{line:375,column:4},end:{line:382,column:7}},142:{start:{line:380,column:6},end:{line:380,column:26}},143:{start:{line:381,column:6},end:{line:381,column:27}},144:{start:{line:384,column:11},end:{line:391,column:3}},145:{start:{line:385,column:24},end:{line:385,column:49}},146:{start:{line:386,column:21},end:{line:386,column:67}},147:{start:{line:387,column:4},end:{line:387,column:61}},148:{start:{line:388,column:4},end:{line:390,column:7}},149:{start:{line:392,column:11},end:{line:399,column:3}},150:{start:{line:393,column:24},end:{line:393,column:49}},151:{start:{line:394,column:21},end:{line:394,column:67}},152:{start:{line:395,column:4},end:{line:395,column:61}},153:{start:{line:396,column:4},end:{line:398,column:7}},154:{start:{line:400,column:16},end:{line:414,column:3}},155:{start:{line:401,column:33},end:{line:401,column:37}},156:{start:{line:402,column:17},end:{line:402,column:43}},157:{start:{line:403,column:4},end:{line:403,column:53}},158:{start:{line:404,column:4},end:{line:404,column:53}},159:{start:{line:405,column:4},end:{line:405,column:38}},160:{start:{line:405,column:31},end:{line:405,column:38}},161:{start:{line:406,column:4},end:{line:410,column:5}},162:{start:{line:407,column:6},end:{line:409,column:9}},163:{start:{line:411,column:4},end:{line:411,column:29}},164:{start:{line:412,column:4},end:{line:412,column:49}},165:{start:{line:413,column:4},end:{line:413,column:32}},166:{start:{line:415,column:19},end:{line:421,column:3}},167:{start:{line:416,column:25},end:{line:419,column:5}},168:{start:{line:420,column:4},end:{line:420,column:38}},169:{start:{line:422,column:19},end:{line:427,column:3}},170:{start:{line:423,column:19},end:{line:423,column:45}},171:{start:{line:424,column:28},end:{line:424,column:43}},172:{start:{line:425,column:4},end:{line:425,column:37}},173:{start:{line:426,column:4},end:{line:426,column:41}},174:{start:{line:428,column:16},end:{line:435,column:3}},175:{start:{line:429,column:19},end:{line:429,column:45}},176:{start:{line:430,column:26},end:{line:430,column:41}},177:{start:{line:431,column:24},end:{line:431,column:55}},178:{start:{line:432,column:4},end:{line:432,column:46}},179:{start:{line:433,column:4},end:{line:433,column:48}},180:{start:{line:434,column:4},end:{line:434,column:39}},181:{start:{line:436,column:28},end:{line:445,column:3}},182:{start:{line:437,column:19},end:{line:437,column:45}},183:{start:{line:438,column:26},end:{line:438,column:41}},184:{start:{line:439,column:18},end:{line:439,column:45}},185:{start:{line:440,column:26},end:{line:440,column:70}},186:{start:{line:441,column:4},end:{line:441,column:88}},187:{start:{line:442,column:4},end:{line:442,column:33}},188:{start:{line:443,column:4},end:{line:443,column:33}},189:{start:{line:444,column:4},end:{line:444,column:39}},190:{start:{line:446,column:20},end:{line:453,column:3}},191:{start:{line:447,column:26},end:{line:447,column:61}},192:{start:{line:448,column:4},end:{line:451,column:6}},193:{start:{line:452,column:4},end:{line:452,column:39}},194:{start:{line:454,column:19},end:{line:458,column:3}},195:{start:{line:455,column:26},end:{line:455,column:61}},196:{start:{line:456,column:4},end:{line:456,column:33}},197:{start:{line:457,column:4},end:{line:457,column:39}},198:{start:{line:459,column:16},end:{line:463,column:3}},199:{start:{line:460,column:4},end:{line:462,column:27}},200:{start:{line:464,column:21},end:{line:478,column:3}},201:{start:{line:465,column:21},end:{line:465,column:44}},202:{start:{line:466,column:4},end:{line:477,column:5}},203:{start:{line:467,column:27},end:{line:473,column:7}},204:{start:{line:474,column:6},end:{line:474,column:26}},205:{start:{line:476,column:6},end:{line:476,column:22}},206:{start:{line:479,column:14},end:{line:483,column:3}},207:{start:{line:480,column:4},end:{line:480,column:34}},208:{start:{line:481,column:4},end:{line:481,column:47}},209:{start:{line:482,column:4},end:{line:482,column:34}},210:{start:{line:485,column:23},end:{line:485,column:25}},211:{start:{line:486,column:4},end:{line:520,column:5}},212:{start:{line:487,column:6},end:{line:519,column:7}},213:{start:{line:488,column:8},end:{line:491,column:10}},214:{start:{line:492,column:18},end:{line:492,column:25}},215:{start:{line:493,column:8},end:{line:497,column:9}},216:{start:{line:494,column:10},end:{line:494,column:62}},217:{start:{line:496,column:10},end:{line:496,column:63}},218:{start:{line:498,column:8},end:{line:516,column:11}},219:{start:{line:500,column:30},end:{line:500,column:45}},220:{start:{line:501,column:10},end:{line:503,column:11}},221:{start:{line:502,column:12},end:{line:502,column:19}},222:{start:{line:504,column:26},end:{line:506,column:12}},223:{start:{line:507,column:10},end:{line:509,column:11}},224:{start:{line:508,column:12},end:{line:508,column:47}},225:{start:{line:510,column:10},end:{line:510,column:51}},226:{start:{line:511,column:10},end:{line:513,column:13}},227:{start:{line:515,column:10},end:{line:515,column:72}},228:{start:{line:518,column:8},end:{line:518,column:86}},229:{start:{line:521,column:4},end:{line:526,column:5}},230:{start:{line:522,column:6},end:{line:522,column:39}},231:{start:{line:523,column:6},end:{line:525,column:9}},232:{start:{line:529,column:21},end:{line:529,column:55}},233:{start:{line:530,column:4},end:{line:530,column:53}},234:{start:{line:532,column:16},end:{line:536,column:3}},235:{start:{line:533,column:4},end:{line:535,column:7}},236:{start:{line:538,column:40},end:{line:538,column:50}},237:{start:{line:539,column:21},end:{line:550,column:5}},238:{start:{line:542,column:8},end:{line:544,column:11}},239:{start:{line:547,column:8},end:{line:547,column:44}},240:{start:{line:548,column:8},end:{line:548,column:28}},241:{start:{line:551,column:21},end:{line:551,column:40}},242:{start:{line:553,column:4},end:{line:575,column:5}},243:{start:{line:554,column:6},end:{line:562,column:8}},244:{start:{line:564,column:6},end:{line:574,column:8}},245:{start:{line:577,column:4},end:{line:579,column:5}},246:{start:{line:578,column:6},end:{line:578,column:63}},247:{start:{line:580,column:25},end:{line:580,column:27}},248:{start:{line:581,column:4},end:{line:583,column:5}},249:{start:{line:582,column:6},end:{line:582,column:52}},250:{start:{line:584,column:4},end:{line:584,column:160}},251:{start:{line:586,column:18},end:{line:604,column:3}},252:{start:{line:587,column:43},end:{line:587,column:53}},253:{start:{line:588,column:35},end:{line:588,column:45}},254:{start:{line:589,column:16},end:{line:589,column:38}},255:{start:{line:590,column:20},end:{line:590,column:50}},256:{start:{line:591,column:4},end:{line:591,column:70}},257:{start:{line:592,column:23},end:{line:592,column:122}},258:{start:{line:592,column:66},end:{line:592,column:91}},259:{start:{line:592,column:109},end:{line:592,column:121}},260:{start:{line:593,column:4},end:{line:597,column:5}},261:{start:{line:594,column:6},end:{line:594,column:58}},262:{start:{line:596,column:6},end:{line:596,column:39}},263:{start:{line:598,column:4},end:{line:602,column:5}},264:{start:{line:599,column:6},end:{line:599,column:38}},265:{start:{line:600,column:11},end:{line:602,column:5}},266:{start:{line:601,column:6},end:{line:601,column:46}},267:{start:{line:603,column:4},end:{line:603,column:71}},268:{start:{line:605,column:27},end:{line:650,column:3}},269:{start:{line:606,column:16},end:{line:606,column:38}},270:{start:{line:607,column:23},end:{line:607,column:52}},271:{start:{line:608,column:4},end:{line:620,column:5}},272:{start:{line:609,column:21},end:{line:609,column:42}},273:{start:{line:610,column:23},end:{line:610,column:25}},274:{start:{line:611,column:6},end:{line:613,column:9}},275:{start:{line:612,column:8},end:{line:612,column:35}},276:{start:{line:614,column:6},end:{line:619,column:9}},277:{start:{line:621,column:17},end:{line:621,column:45}},278:{start:{line:622,column:4},end:{line:624,column:5}},279:{start:{line:623,column:6},end:{line:623,column:29}},280:{start:{line:625,column:17},end:{line:625,column:46}},281:{start:{line:626,column:4},end:{line:649,column:5}},282:{start:{line:627,column:6},end:{line:648,column:7}},283:{start:{line:628,column:22},end:{line:628,column:37}},284:{start:{line:629,column:46},end:{line:632,column:9}},285:{start:{line:633,column:20},end:{line:633,column:24}},286:{start:{line:634,column:8},end:{line:639,column:9}},287:{start:{line:635,column:33},end:{line:635,column:63}},288:{start:{line:636,column:10},end:{line:638,column:11}},289:{start:{line:637,column:12},end:{line:637,column:26}},290:{start:{line:640,column:8},end:{line:645,column:9}},291:{start:{line:641,column:10},end:{line:644,column:13}},292:{start:{line:647,column:8},end:{line:647,column:26}},293:{start:{line:651,column:18},end:{line:656,column:3}},294:{start:{line:652,column:4},end:{line:655,column:27}},295:{start:{line:658,column:4},end:{line:663,column:27}},296:{start:{line:666,column:4},end:{line:666,column:60}},297:{start:{line:669,column:4},end:{line:669,column:34}},298:{start:{line:671,column:28},end:{line:678,column:3}},299:{start:{line:672,column:4},end:{line:677,column:7}},300:{start:{line:679,column:28},end:{line:686,column:3}},301:{start:{line:680,column:4},end:{line:685,column:7}},302:{start:{line:688,column:19},end:{line:688,column:51}},303:{start:{line:689,column:26},end:{line:689,column:92}},304:{start:{line:690,column:36},end:{line:703,column:5}},305:{start:{line:704,column:38},end:{line:718,column:5}},306:{start:{line:719,column:24},end:{line:738,column:14}},307:{start:{line:739,column:24},end:{line:749,column:14}},308:{start:{line:750,column:35},end:{line:810,column:8}},309:{start:{line:811,column:4},end:{line:821,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:54,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:55,column:9},end:{line:55,column:23}},loc:{start:{line:55,column:52},end:{line:66,column:1}},line:55},2:{name:"(anonymous_2)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:21},end:{line:214,column:3}},line:71},3:{name:"(anonymous_3)",decl:{start:{line:81,column:26},end:{line:81,column:27}},loc:{start:{line:81,column:40},end:{line:81,column:86}},line:81},4:{name:"(anonymous_4)",decl:{start:{line:88,column:17},end:{line:88,column:18}},loc:{start:{line:88,column:23},end:{line:90,column:9}},line:88},5:{name:"(anonymous_5)",decl:{start:{line:94,column:17},end:{line:94,column:18}},loc:{start:{line:94,column:23},end:{line:96,column:9}},line:94},6:{name:"(anonymous_6)",decl:{start:{line:100,column:17},end:{line:100,column:18}},loc:{start:{line:100,column:23},end:{line:102,column:9}},line:100},7:{name:"(anonymous_7)",decl:{start:{line:106,column:17},end:{line:106,column:18}},loc:{start:{line:106,column:23},end:{line:108,column:9}},line:106},8:{name:"(anonymous_8)",decl:{start:{line:112,column:17},end:{line:112,column:18}},loc:{start:{line:112,column:23},end:{line:114,column:9}},line:112},9:{name:"(anonymous_9)",decl:{start:{line:118,column:17},end:{line:118,column:18}},loc:{start:{line:118,column:23},end:{line:122,column:9}},line:118},10:{name:"(anonymous_10)",decl:{start:{line:126,column:17},end:{line:126,column:18}},loc:{start:{line:126,column:23},end:{line:128,column:9}},line:126},11:{name:"(anonymous_11)",decl:{start:{line:132,column:17},end:{line:132,column:18}},loc:{start:{line:132,column:23},end:{line:134,column:9}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:137,column:44},end:{line:137,column:45}},loc:{start:{line:137,column:51},end:{line:150,column:5}},line:137},13:{name:"(anonymous_13)",decl:{start:{line:142,column:40},end:{line:142,column:41}},loc:{start:{line:142,column:55},end:{line:144,column:9}},line:142},14:{name:"(anonymous_14)",decl:{start:{line:154,column:29},end:{line:154,column:30}},loc:{start:{line:154,column:43},end:{line:154,column:72}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:160,column:27},end:{line:160,column:28}},loc:{start:{line:160,column:36},end:{line:170,column:7}},line:160},16:{name:"(anonymous_16)",decl:{start:{line:165,column:36},end:{line:165,column:37}},loc:{start:{line:165,column:50},end:{line:165,column:102}},line:165},17:{name:"(anonymous_17)",decl:{start:{line:212,column:28},end:{line:212,column:29}},loc:{start:{line:212,column:35},end:{line:212,column:69}},line:212},18:{name:"(anonymous_18)",decl:{start:{line:215,column:19},end:{line:215,column:20}},loc:{start:{line:215,column:26},end:{line:233,column:3}},line:215},19:{name:"(anonymous_19)",decl:{start:{line:234,column:2},end:{line:234,column:3}},loc:{start:{line:234,column:22},end:{line:236,column:3}},line:234},20:{name:"(anonymous_20)",decl:{start:{line:237,column:2},end:{line:237,column:3}},loc:{start:{line:237,column:25},end:{line:239,column:3}},line:237},21:{name:"(anonymous_21)",decl:{start:{line:240,column:2},end:{line:240,column:3}},loc:{start:{line:240,column:27},end:{line:242,column:3}},line:240},22:{name:"(anonymous_22)",decl:{start:{line:243,column:2},end:{line:243,column:3}},loc:{start:{line:243,column:27},end:{line:250,column:3}},line:243},23:{name:"(anonymous_23)",decl:{start:{line:247,column:37},end:{line:247,column:38}},loc:{start:{line:247,column:48},end:{line:249,column:5}},line:247},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:23},end:{line:255,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:252,column:36},end:{line:252,column:37}},loc:{start:{line:252,column:47},end:{line:254,column:5}},line:252},26:{name:"(anonymous_26)",decl:{start:{line:256,column:29},end:{line:256,column:30}},loc:{start:{line:256,column:50},end:{line:270,column:3}},line:256},27:{name:"(anonymous_27)",decl:{start:{line:271,column:19},end:{line:271,column:20}},loc:{start:{line:271,column:44},end:{line:383,column:3}},line:271},28:{name:"(anonymous_28)",decl:{start:{line:285,column:30},end:{line:285,column:31}},loc:{start:{line:285,column:48},end:{line:293,column:7}},line:285},29:{name:"(anonymous_29)",decl:{start:{line:295,column:56},end:{line:295,column:57}},loc:{start:{line:295,column:67},end:{line:346,column:5}},line:295},30:{name:"(anonymous_30)",decl:{start:{line:350,column:21},end:{line:350,column:22}},loc:{start:{line:350,column:32},end:{line:361,column:7}},line:350},31:{name:"(anonymous_31)",decl:{start:{line:379,column:7},end:{line:379,column:8}},loc:{start:{line:379,column:13},end:{line:382,column:5}},line:379},32:{name:"(anonymous_32)",decl:{start:{line:384,column:11},end:{line:384,column:12}},loc:{start:{line:384,column:17},end:{line:391,column:3}},line:384},33:{name:"(anonymous_33)",decl:{start:{line:392,column:11},end:{line:392,column:12}},loc:{start:{line:392,column:17},end:{line:399,column:3}},line:392},34:{name:"(anonymous_34)",decl:{start:{line:400,column:16},end:{line:400,column:17}},loc:{start:{line:400,column:26},end:{line:414,column:3}},line:400},35:{name:"(anonymous_35)",decl:{start:{line:415,column:19},end:{line:415,column:20}},loc:{start:{line:415,column:38},end:{line:421,column:3}},line:415},36:{name:"(anonymous_36)",decl:{start:{line:422,column:19},end:{line:422,column:20}},loc:{start:{line:422,column:30},end:{line:427,column:3}},line:422},37:{name:"(anonymous_37)",decl:{start:{line:428,column:16},end:{line:428,column:17}},loc:{start:{line:428,column:27},end:{line:435,column:3}},line:428},38:{name:"(anonymous_38)",decl:{start:{line:436,column:28},end:{line:436,column:29}},loc:{start:{line:436,column:39},end:{line:445,column:3}},line:436},39:{name:"(anonymous_39)",decl:{start:{line:446,column:20},end:{line:446,column:21}},loc:{start:{line:446,column:46},end:{line:453,column:3}},line:446},40:{name:"(anonymous_40)",decl:{start:{line:454,column:19},end:{line:454,column:20}},loc:{start:{line:454,column:37},end:{line:458,column:3}},line:454},41:{name:"(anonymous_41)",decl:{start:{line:459,column:16},end:{line:459,column:17}},loc:{start:{line:459,column:30},end:{line:463,column:3}},line:459},42:{name:"(anonymous_42)",decl:{start:{line:464,column:21},end:{line:464,column:22}},loc:{start:{line:464,column:35},end:{line:478,column:3}},line:464},43:{name:"(anonymous_43)",decl:{start:{line:479,column:14},end:{line:479,column:15}},loc:{start:{line:479,column:40},end:{line:483,column:3}},line:479},44:{name:"(anonymous_44)",decl:{start:{line:484,column:2},end:{line:484,column:3}},loc:{start:{line:484,column:17},end:{line:527,column:3}},line:484},45:{name:"(anonymous_45)",decl:{start:{line:500,column:16},end:{line:500,column:17}},loc:{start:{line:500,column:30},end:{line:500,column:45}},line:500},46:{name:"(anonymous_46)",decl:{start:{line:500,column:52},end:{line:500,column:53}},loc:{start:{line:500,column:62},end:{line:514,column:9}},line:500},47:{name:"(anonymous_47)",decl:{start:{line:514,column:17},end:{line:514,column:18}},loc:{start:{line:514,column:26},end:{line:516,column:9}},line:514},48:{name:"(anonymous_48)",decl:{start:{line:528,column:2},end:{line:528,column:3}},loc:{start:{line:528,column:17},end:{line:531,column:3}},line:528},49:{name:"(anonymous_49)",decl:{start:{line:532,column:16},end:{line:532,column:17}},loc:{start:{line:532,column:29},end:{line:536,column:3}},line:532},50:{name:"(anonymous_50)",decl:{start:{line:537,column:2},end:{line:537,column:3}},loc:{start:{line:537,column:16},end:{line:585,column:3}},line:537},51:{name:"(anonymous_51)",decl:{start:{line:541,column:27},end:{line:541,column:28}},loc:{start:{line:541,column:42},end:{line:545,column:7}},line:541},52:{name:"(anonymous_52)",decl:{start:{line:546,column:20},end:{line:546,column:21}},loc:{start:{line:546,column:27},end:{line:549,column:7}},line:546},53:{name:"(anonymous_53)",decl:{start:{line:586,column:18},end:{line:586,column:19}},loc:{start:{line:586,column:24},end:{line:604,column:3}},line:586},54:{name:"(anonymous_54)",decl:{start:{line:592,column:50},end:{line:592,column:51}},loc:{start:{line:592,column:66},end:{line:592,column:91}},line:592},55:{name:"(anonymous_55)",decl:{start:{line:592,column:100},end:{line:592,column:101}},loc:{start:{line:592,column:109},end:{line:592,column:121}},line:592},56:{name:"(anonymous_56)",decl:{start:{line:605,column:27},end:{line:605,column:28}},loc:{start:{line:605,column:41},end:{line:650,column:3}},line:605},57:{name:"(anonymous_57)",decl:{start:{line:611,column:21},end:{line:611,column:22}},loc:{start:{line:611,column:36},end:{line:613,column:7}},line:611},58:{name:"(anonymous_58)",decl:{start:{line:651,column:18},end:{line:651,column:19}},loc:{start:{line:651,column:29},end:{line:656,column:3}},line:651},59:{name:"(anonymous_59)",decl:{start:{line:657,column:2},end:{line:657,column:3}},loc:{start:{line:657,column:29},end:{line:664,column:3}},line:657},60:{name:"(anonymous_60)",decl:{start:{line:665,column:2},end:{line:665,column:3}},loc:{start:{line:665,column:25},end:{line:667,column:3}},line:665},61:{name:"(anonymous_61)",decl:{start:{line:668,column:2},end:{line:668,column:3}},loc:{start:{line:668,column:30},end:{line:670,column:3}},line:668},62:{name:"(anonymous_62)",decl:{start:{line:671,column:28},end:{line:671,column:29}},loc:{start:{line:671,column:44},end:{line:678,column:3}},line:671},63:{name:"(anonymous_63)",decl:{start:{line:679,column:28},end:{line:679,column:29}},loc:{start:{line:679,column:44},end:{line:686,column:3}},line:679},64:{name:"(anonymous_64)",decl:{start:{line:687,column:2},end:{line:687,column:3}},loc:{start:{line:687,column:11},end:{line:822,column:3}},line:687}},branchMap:{0:{loc:{start:{line:41,column:2},end:{line:53,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:53,column:3}},{start:{line:46,column:9},end:{line:53,column:3}}],line:41},1:{loc:{start:{line:41,column:6},end:{line:41,column:43}},type:"binary-expr",locations:[{start:{line:41,column:6},end:{line:41,column:24}},{start:{line:41,column:28},end:{line:41,column:43}}],line:41},2:{loc:{start:{line:43,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:43,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:43},3:{loc:{start:{line:46,column:9},end:{line:53,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:53,column:3}},{start:{line:51,column:9},end:{line:53,column:3}}],line:46},4:{loc:{start:{line:48,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:77,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:79,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},6:{loc:{start:{line:77,column:8},end:{line:77,column:89}},type:"binary-expr",locations:[{start:{line:77,column:8},end:{line:77,column:20}},{start:{line:77,column:25},end:{line:77,column:54}},{start:{line:77,column:58},end:{line:77,column:88}}],line:77},7:{loc:{start:{line:120,column:12},end:{line:120,column:61}},type:"cond-expr",locations:[{start:{line:120,column:44},end:{line:120,column:53}},{start:{line:120,column:56},end:{line:120,column:61}}],line:120},8:{loc:{start:{line:138,column:6},end:{line:149,column:7}},type:"if",locations:[{start:{line:138,column:6},end:{line:149,column:7}},{start:{line:141,column:13},end:{line:149,column:7}}],line:138},9:{loc:{start:{line:141,column:13},end:{line:149,column:7}},type:"if",locations:[{start:{line:141,column:13},end:{line:149,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:141},10:{loc:{start:{line:141,column:17},end:{line:141,column:88}},type:"binary-expr",locations:[{start:{line:141,column:17},end:{line:141,column:44}},{start:{line:141,column:48},end:{line:141,column:88}}],line:141},11:{loc:{start:{line:145,column:8},end:{line:148,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:148,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:145},12:{loc:{start:{line:152,column:4},end:{line:171,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:171,column:5}},{start:{line:156,column:11},end:{line:171,column:5}}],line:152},13:{loc:{start:{line:152,column:8},end:{line:152,column:104}},type:"binary-expr",locations:[{start:{line:152,column:8},end:{line:152,column:16}},{start:{line:152,column:20},end:{line:152,column:104}}],line:152},14:{loc:{start:{line:157,column:6},end:{line:159,column:7}},type:"if",locations:[{start:{line:157,column:6},end:{line:159,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},15:{loc:{start:{line:161,column:8},end:{line:164,column:9}},type:"if",locations:[{start:{line:161,column:8},end:{line:164,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},16:{loc:{start:{line:166,column:8},end:{line:169,column:9}},type:"if",locations:[{start:{line:166,column:8},end:{line:169,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:166},17:{loc:{start:{line:172,column:4},end:{line:175,column:5}},type:"if",locations:[{start:{line:172,column:4},end:{line:175,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:172},18:{loc:{start:{line:216,column:4},end:{line:232,column:5}},type:"if",locations:[{start:{line:216,column:4},end:{line:232,column:5}},{start:{line:224,column:11},end:{line:232,column:5}}],line:216},19:{loc:{start:{line:217,column:6},end:{line:223,column:7}},type:"if",locations:[{start:{line:217,column:6},end:{line:223,column:7}},{start:{line:220,column:13},end:{line:223,column:7}}],line:217},20:{loc:{start:{line:217,column:10},end:{line:217,column:53}},type:"binary-expr",locations:[{start:{line:217,column:10},end:{line:217,column:19}},{start:{line:217,column:23},end:{line:217,column:33}},{start:{line:217,column:37},end:{line:217,column:53}}],line:217},21:{loc:{start:{line:220,column:13},end:{line:223,column:7}},type:"if",locations:[{start:{line:220,column:13},end:{line:223,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:220},22:{loc:{start:{line:220,column:17},end:{line:220,column:46}},type:"binary-expr",locations:[{start:{line:220,column:17},end:{line:220,column:26}},{start:{line:220,column:30},end:{line:220,column:46}}],line:220},23:{loc:{start:{line:225,column:6},end:{line:231,column:7}},type:"if",locations:[{start:{line:225,column:6},end:{line:231,column:7}},{start:{line:228,column:13},end:{line:231,column:7}}],line:225},24:{loc:{start:{line:225,column:10},end:{line:225,column:39}},type:"binary-expr",locations:[{start:{line:225,column:10},end:{line:225,column:19}},{start:{line:225,column:23},end:{line:225,column:39}}],line:225},25:{loc:{start:{line:228,column:13},end:{line:231,column:7}},type:"if",locations:[{start:{line:228,column:13},end:{line:231,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:228},26:{loc:{start:{line:228,column:17},end:{line:228,column:46}},type:"binary-expr",locations:[{start:{line:228,column:17},end:{line:228,column:26}},{start:{line:228,column:30},end:{line:228,column:46}}],line:228},27:{loc:{start:{line:244,column:21},end:{line:244,column:55}},type:"binary-expr",locations:[{start:{line:244,column:21},end:{line:244,column:49}},{start:{line:244,column:53},end:{line:244,column:55}}],line:244},28:{loc:{start:{line:245,column:24},end:{line:245,column:93}},type:"binary-expr",locations:[{start:{line:245,column:24},end:{line:245,column:70}},{start:{line:245,column:74},end:{line:245,column:93}}],line:245},29:{loc:{start:{line:246,column:21},end:{line:246,column:110}},type:"cond-expr",locations:[{start:{line:246,column:55},end:{line:246,column:96}},{start:{line:246,column:99},end:{line:246,column:110}}],line:246},30:{loc:{start:{line:257,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:257,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:257},31:{loc:{start:{line:257,column:8},end:{line:257,column:123}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:40}},{start:{line:257,column:44},end:{line:257,column:123}}],line:257},32:{loc:{start:{line:271,column:30},end:{line:271,column:39}},type:"default-arg",locations:[{start:{line:271,column:37},end:{line:271,column:39}}],line:271},33:{loc:{start:{line:278,column:4},end:{line:280,column:5}},type:"if",locations:[{start:{line:278,column:4},end:{line:280,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},34:{loc:{start:{line:281,column:19},end:{line:281,column:51}},type:"binary-expr",locations:[{start:{line:281,column:19},end:{line:281,column:45}},{start:{line:281,column:49},end:{line:281,column:51}}],line:281},35:{loc:{start:{line:283,column:4},end:{line:294,column:5}},type:"if",locations:[{start:{line:283,column:4},end:{line:294,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:283},36:{loc:{start:{line:283,column:8},end:{line:283,column:35}},type:"binary-expr",locations:[{start:{line:283,column:8},end:{line:283,column:16}},{start:{line:283,column:20},end:{line:283,column:35}}],line:283},37:{loc:{start:{line:286,column:8},end:{line:291,column:9}},type:"if",locations:[{start:{line:286,column:8},end:{line:291,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:286},38:{loc:{start:{line:286,column:12},end:{line:286,column:56}},type:"binary-expr",locations:[{start:{line:286,column:12},end:{line:286,column:27}},{start:{line:286,column:31},end:{line:286,column:56}}],line:286},39:{loc:{start:{line:297,column:6},end:{line:310,column:7}},type:"if",locations:[{start:{line:297,column:6},end:{line:310,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:297},40:{loc:{start:{line:312,column:6},end:{line:325,column:7}},type:"if",locations:[{start:{line:312,column:6},end:{line:325,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:312},41:{loc:{start:{line:327,column:6},end:{line:345,column:7}},type:"if",locations:[{start:{line:327,column:6},end:{line:345,column:7}},{start:{line:341,column:13},end:{line:345,column:7}}],line:327},42:{loc:{start:{line:329,column:20},end:{line:329,column:78}},type:"cond-expr",locations:[{start:{line:329,column:40},end:{line:329,column:67}},{start:{line:329,column:70},end:{line:329,column:78}}],line:329},43:{loc:{start:{line:329,column:20},end:{line:329,column:37}},type:"binary-expr",locations:[{start:{line:329,column:20},end:{line:329,column:25}},{start:{line:329,column:29},end:{line:329,column:37}}],line:329},44:{loc:{start:{line:348,column:4},end:{line:362,column:5}},type:"if",locations:[{start:{line:348,column:4},end:{line:362,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:348},45:{loc:{start:{line:352,column:8},end:{line:360,column:9}},type:"if",locations:[{start:{line:352,column:8},end:{line:360,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:352},46:{loc:{start:{line:363,column:4},end:{line:365,column:5}},type:"if",locations:[{start:{line:363,column:4},end:{line:365,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:363},47:{loc:{start:{line:366,column:4},end:{line:368,column:5}},type:"if",locations:[{start:{line:366,column:4},end:{line:368,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:366},48:{loc:{start:{line:369,column:4},end:{line:371,column:5}},type:"if",locations:[{start:{line:369,column:4},end:{line:371,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:369},49:{loc:{start:{line:372,column:4},end:{line:374,column:5}},type:"if",locations:[{start:{line:372,column:4},end:{line:374,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:372},50:{loc:{start:{line:405,column:4},end:{line:405,column:38}},type:"if",locations:[{start:{line:405,column:4},end:{line:405,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:405},51:{loc:{start:{line:406,column:4},end:{line:410,column:5}},type:"if",locations:[{start:{line:406,column:4},end:{line:410,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:406},52:{loc:{start:{line:440,column:26},end:{line:440,column:70}},type:"cond-expr",locations:[{start:{line:440,column:46},end:{line:440,column:65}},{start:{line:440,column:68},end:{line:440,column:70}}],line:440},53:{loc:{start:{line:441,column:31},end:{line:441,column:87}},type:"cond-expr",locations:[{start:{line:441,column:69},end:{line:441,column:78}},{start:{line:441,column:81},end:{line:441,column:87}}],line:441},54:{loc:{start:{line:465,column:21},end:{line:465,column:44}},type:"binary-expr",locations:[{start:{line:465,column:21},end:{line:465,column:38}},{start:{line:465,column:42},end:{line:465,column:44}}],line:465},55:{loc:{start:{line:466,column:4},end:{line:477,column:5}},type:"if",locations:[{start:{line:466,column:4},end:{line:477,column:5}},{start:{line:475,column:11},end:{line:477,column:5}}],line:466},56:{loc:{start:{line:487,column:6},end:{line:519,column:7}},type:"if",locations:[{start:{line:487,column:6},end:{line:519,column:7}},{start:{line:517,column:13},end:{line:519,column:7}}],line:487},57:{loc:{start:{line:487,column:10},end:{line:487,column:149}},type:"binary-expr",locations:[{start:{line:487,column:10},end:{line:487,column:72}},{start:{line:487,column:76},end:{line:487,column:97}},{start:{line:487,column:101},end:{line:487,column:149}}],line:487},58:{loc:{start:{line:501,column:10},end:{line:503,column:11}},type:"if",locations:[{start:{line:501,column:10},end:{line:503,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:501},59:{loc:{start:{line:518,column:26},end:{line:518,column:85}},type:"binary-expr",locations:[{start:{line:518,column:26},end:{line:518,column:49}},{start:{line:518,column:53},end:{line:518,column:85}}],line:518},60:{loc:{start:{line:521,column:4},end:{line:526,column:5}},type:"if",locations:[{start:{line:521,column:4},end:{line:526,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:521},61:{loc:{start:{line:529,column:21},end:{line:529,column:55}},type:"binary-expr",locations:[{start:{line:529,column:21},end:{line:529,column:49}},{start:{line:529,column:53},end:{line:529,column:55}}],line:529},62:{loc:{start:{line:530,column:11},end:{line:530,column:52}},type:"binary-expr",locations:[{start:{line:530,column:11},end:{line:530,column:40}},{start:{line:530,column:44},end:{line:530,column:52}}],line:530},63:{loc:{start:{line:540,column:16},end:{line:540,column:41}},type:"binary-expr",locations:[{start:{line:540,column:16},end:{line:540,column:29}},{start:{line:540,column:33},end:{line:540,column:41}}],line:540},64:{loc:{start:{line:553,column:4},end:{line:575,column:5}},type:"if",locations:[{start:{line:553,column:4},end:{line:575,column:5}},{start:{line:563,column:11},end:{line:575,column:5}}],line:553},65:{loc:{start:{line:577,column:4},end:{line:579,column:5}},type:"if",locations:[{start:{line:577,column:4},end:{line:579,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:577},66:{loc:{start:{line:581,column:4},end:{line:583,column:5}},type:"if",locations:[{start:{line:581,column:4},end:{line:583,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:581},67:{loc:{start:{line:592,column:66},end:{line:592,column:91}},type:"cond-expr",locations:[{start:{line:592,column:81},end:{line:592,column:84}},{start:{line:592,column:87},end:{line:592,column:91}}],line:592},68:{loc:{start:{line:593,column:4},end:{line:597,column:5}},type:"if",locations:[{start:{line:593,column:4},end:{line:597,column:5}},{start:{line:595,column:11},end:{line:597,column:5}}],line:593},69:{loc:{start:{line:598,column:4},end:{line:602,column:5}},type:"if",locations:[{start:{line:598,column:4},end:{line:602,column:5}},{start:{line:600,column:11},end:{line:602,column:5}}],line:598},70:{loc:{start:{line:600,column:11},end:{line:602,column:5}},type:"if",locations:[{start:{line:600,column:11},end:{line:602,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:600},71:{loc:{start:{line:608,column:4},end:{line:620,column:5}},type:"if",locations:[{start:{line:608,column:4},end:{line:620,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:608},72:{loc:{start:{line:608,column:8},end:{line:608,column:39}},type:"binary-expr",locations:[{start:{line:608,column:8},end:{line:608,column:18}},{start:{line:608,column:22},end:{line:608,column:39}}],line:608},73:{loc:{start:{line:622,column:4},end:{line:624,column:5}},type:"if",locations:[{start:{line:622,column:4},end:{line:624,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:622},74:{loc:{start:{line:622,column:8},end:{line:622,column:27}},type:"binary-expr",locations:[{start:{line:622,column:8},end:{line:622,column:12}},{start:{line:622,column:16},end:{line:622,column:27}}],line:622},75:{loc:{start:{line:626,column:4},end:{line:649,column:5}},type:"if",locations:[{start:{line:626,column:4},end:{line:649,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:626},76:{loc:{start:{line:634,column:8},end:{line:639,column:9}},type:"if",locations:[{start:{line:634,column:8},end:{line:639,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:634},77:{loc:{start:{line:636,column:10},end:{line:638,column:11}},type:"if",locations:[{start:{line:636,column:10},end:{line:638,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:636},78:{loc:{start:{line:640,column:8},end:{line:645,column:9}},type:"if",locations:[{start:{line:640,column:8},end:{line:645,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:640},79:{loc:{start:{line:688,column:19},end:{line:688,column:51}},type:"binary-expr",locations:[{start:{line:688,column:19},end:{line:688,column:45}},{start:{line:688,column:49},end:{line:688,column:51}}],line:688},80:{loc:{start:{line:689,column:26},end:{line:689,column:92}},type:"cond-expr",locations:[{start:{line:689,column:46},end:{line:689,column:83}},{start:{line:689,column:86},end:{line:689,column:92}}],line:689},81:{loc:{start:{line:719,column:24},end:{line:738,column:14}},type:"cond-expr",locations:[{start:{line:719,column:56},end:{line:738,column:5}},{start:{line:738,column:8},end:{line:738,column:14}}],line:719},82:{loc:{start:{line:739,column:24},end:{line:749,column:14}},type:"cond-expr",locations:[{start:{line:739,column:97},end:{line:749,column:5}},{start:{line:749,column:8},end:{line:749,column:14}}],line:739}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AAmtBmB,SAAA,KAgNA,YAhNA;AAltBnB,OAAO,cAAc;AACrB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AAEjB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,iBAAiB,cAAc,8BAA8B;AACtE,SAAS,cAAc,oBAAoB;AAC3C,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,WAAW;AAKlB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AAChE,QAAA,qBAAqB,IAAI,MAAM,oBAAoB;AACnD,QAAA,kBAAkB,IAAI,MAAM,iBAAiB;AAC7C,QAAA,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,MAAI,sBAAsB,iBAAiB;AACnC,UAAA,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AACvB,UAAA,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACI,WAAA;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AAC7D,SAAA;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AACX,aAAS,IAAI;AAER,SAAA,gBAAgB,IAAI,cAAc;AACjC,UAAA,SAAS,IAAI,gBAAgB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC;AAClE,QAAA,OAAO,OAAO,IAAI,WAAW;AAC7B,QAAA,QAAQ,SAAS,OAAO,SAAS,SAAS,QAAQ,OAAO,SAAS,SAAS,QAAQ;AACrF,aAAO,OAAO,SAAS;AAAA,IACzB;AACK,SAAA,aAAa,IAAI,cAAc;AAAA,MAClC,oBAAoB,cAAY,KAAK,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,MAC3E;AAAA,MACA,MAAM,OAAO,IAAI,WAAW;AAAA,IAC9B,CAAC;AAGD,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACR,eAAA;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC1C,UAAA,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AACpCA,iBAAAA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACN,eAAA,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,WAAW,gBAAgB;AACjC,QAAG,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B,GAAG;AAC9F,WAAA,aAAa,IAAI,WAAW;AACjC,mBAAa,UAAU,CAAA,aAAY,KAAK,eAAe,QAAQ,CAAC;AACzC,6BAAA;AAAA,IACzB,OAAO;AACL,UAAG,UAAU;AACY,+BAAA;AAAA,MACzB;AACK,WAAA,WAAW,KAAK,CAAO,QAAA;AAC1B,YAAG,KAAK;AACN,kBAAQ,IAAI,kDAAkD;AACzD,eAAA,aAAa,IAAI,WAAW;AAAA,QACnC;AACK,aAAA,WAAW,YAAY,CAAA,aAAY,KAAK,eAAe,UAAU,EAAC,aAAa,KAAI,CAAC,CAAC;AAEvF,YAAA,MAAM,QAAQ,GAAG;AAClB,gBAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AACnD,gBAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AAEG,QAAA,MAAM,QAAQ,GAAG;AAClB,YAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AACzD,YAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AAAA,IACrD;AAEA,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEK,SAAA,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAK,MAAA,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AACX,WAAA,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACd,WAAA,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAkD;AACrD,SAAA,WAAW,KAAK,aAAa;AAAA,EACpC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAEvE,UAAA,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAS,UAAA;AACnC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAS,UAAA;AAClC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAA6C,OAAyB,CAAC,MAAM;AACtF,WAAA;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAIjE,UAAM,cAA2C,CAAC;AAC9C,QAAA,YAAY,SAAS,QAAQ;AACzB,YAAA,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACY,oBAAA,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAS,UAAA;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AACtC,cAAA,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AACzD,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACI,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AAChD,QAAA,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,aAAO,QAAQ,CAAS,UAAA;AAChB,cAAA,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACP,cAAA;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,GAAG;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACf,WAAA,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAA6C;AAAA,IAC9D;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC3B,QAAA,EAAE,UAAU,SAAS,IAAI;AACzB,QAAA,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAEtB,QAAA,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAES,aAAA,OAAO,MAAM,CAAC;AACN,qBAAA,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAC5B,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,kBAAkB,OAAO,MAAM,CAAC;AACtB,oBAAA,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AACzB,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AACtC,gBAAA,KAAK,YAAY,KAAK;AACpB,kBAAA,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AACrC,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AAClC,UAAA,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAgD;AAC5D,UAAA,WAAoC,SAAS,YAAY,CAAC;AAC7D,QAAA,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACO,aAAA;AAAA,IACT,OAAO;AACE,aAAA;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAA6C,eAA4C;AAC/F,SAAA,SAAS,EAAC,WAAsB,CAAC;AAC3B,eAAA,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,eAAe;AACb,UAAM,aAAmC,CAAC;AAEhC,eAAA,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,SAAS,OAAO,GAAG;AACnE,UACE,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,GAAG,KAC7D,IAAI,SAAS,YACb,OAAO,UAAU,eAAe,KAAK,KAAK,KAAK,GAC/C;AACA,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,IAAI;AAAA,UACV,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,IAAI;AAEV,YAAA;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACH,kBAAA,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,KAAM;AAAA,UACV,MAAM;AAAA,QACR,CAAC,EACE,KAAK,CAAA,aAAY,SAAS,KAAK,CAAC,EAChC,KAAK,CAAQ,SAAA;AAEZ,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAGA,gBAAM,UAAU,OAAO,OAAO,CAAC,GAAG;AAAA,YAChC,CAAC,GAAG,GAAG,KAAK,MAAM,QAAQ,GAAG;AAAA,UAC/B,CAAC;AAES,qBAAA,SAAS,KAAK,eAAe;AACpC,oBAAQ,GAAG,EAAU,OAAO,KAAK,MAAM,EAAE;AAAA,UAC5C;AAEQ,kBAAA,MAAM,sBAAoB,GAAG;AACrC,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH,CAAC,EACA,MAAM,CAAO,QAAA;AACJ,kBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,QAC9D,CAAC;AAAA,MACL,OACK;AACQ,mBAAA,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,KAAK,MAAM,SAAS,QAAQ,GAAG;AAAA,MAC9E;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,iBAAiB;AAC/B,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AACnE,WAAA,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AAC9C,eAAA,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC1B,aAAA,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEM,UAAA,WAAW,KAAK,aAAa;AAE/B,QAAA;AAGJ,QAAG,aAAa,MAAM;AACP,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AACQ,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEI,QAAA;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACD,mBAAA,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEO,WAAA,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UACH,WAAA,CAAA;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AACpC,UAAA,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAEzB,QAAA,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACC,UAAA,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AAClB,UAAA,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC3B,UAAA,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAC3C,QAAA,cAAc,eAAe,IAAI;AAC7B,YAAA,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAa,cAAA;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACpC,QAAA,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACJ,UAAA;AACI,cAAA,QAAQ,KAAK,MAAM,GAAG;AACtB,cAAA,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AACpC,oBAAA;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,gBAAgB,YAAyC;AAClD,SAAA,SAAS,EAAC,WAAsB,CAAC;AAAA,EACxC;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AACxC,UAAA,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEC,UAAA,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGC,UAAA,8BAAU,OACd,EAAA,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IACF,EAAA,CAAA;AAEO,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b0d5f8ee8537ee2f4707fe123c0c222059f25ad2"},o=t[r]||(t[r]={});(!o[n]||o[n].hash!==e)&&(o[n]=i);var a=o[n];return Me=function(){return a},a}Me();Me().s[0]++;window.Buffer=kQ.Buffer;function Xde(n,e){Me().f[0]++;const t=(Me().s[1]++,n.match(/\.tilehosting\.com/)),r=(Me().s[2]++,n.match(/\.maptiler\.com/)),i=(Me().s[3]++,n.match(/\.thunderforest\.com/));if(Me().s[4]++,Me().b[1][0]++,t||(Me().b[1][1]++,r)){Me().b[0][0]++;const o=(Me().s[5]++,cc.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(Me().s[6]++,o)return Me().b[2][0]++,Me().s[7]++,n.replace("{key}",o);Me().b[2][1]++}else if(Me().b[0][1]++,Me().s[8]++,i){Me().b[3][0]++;const o=(Me().s[9]++,cc.getAccessToken("thunderforest",e,{allowFallback:!0}));if(Me().s[10]++,o)return Me().b[4][0]++,Me().s[11]++,n.replace("{key}",o);Me().b[4][1]++}else return Me().b[3][1]++,Me().s[12]++,n}function rL(n,e,t){return Me().f[1]++,Me().s[13]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class Jde extends Xn.Component{constructor(t){Me().f[2]++,Me().s[14]++;super(t);In(this,"revisionStore");In(this,"styleStore");In(this,"layerWatcher");In(this,"handleKeyPress",(Me().s[65]++,t=>{Me().f[18]++,Me().s[66]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(Me().b[18][0]++,Me().s[67]++,Me().b[20][0]++,t.metaKey&&(Me().b[20][1]++,t.shiftKey)&&(Me().b[20][2]++,t.keyCode===90)?(Me().b[19][0]++,Me().s[68]++,t.preventDefault(),Me().s[69]++,this.onRedo()):(Me().b[19][1]++,Me().s[70]++,Me().b[22][0]++,t.metaKey&&(Me().b[22][1]++,t.keyCode===90)?(Me().b[21][0]++,Me().s[71]++,t.preventDefault(),Me().s[72]++,this.onUndo()):Me().b[21][1]++)):(Me().b[18][1]++,Me().s[73]++,Me().b[24][0]++,t.ctrlKey&&(Me().b[24][1]++,t.keyCode===90)?(Me().b[23][0]++,Me().s[74]++,t.preventDefault(),Me().s[75]++,this.onUndo()):(Me().b[23][1]++,Me().s[76]++,Me().b[26][0]++,t.ctrlKey&&(Me().b[26][1]++,t.keyCode===89)?(Me().b[25][0]++,Me().s[77]++,t.preventDefault(),Me().s[78]++,this.onRedo()):Me().b[25][1]++))}));In(this,"onChangeMetadataProperty",(Me().s[89]++,(t,r)=>{Me().f[26]++,Me().s[90]++,Me().b[31][0]++,t==="maputnik:renderer"&&(Me().b[31][1]++,r!==RQ(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(Me().b[30][0]++,Me().s[91]++,this.setState({mapState:"map"})):Me().b[30][1]++;const i=(Me().s[92]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[t]:r}});Me().s[93]++,this.onStyleChanged(i)}));In(this,"onStyleChanged",(Me().s[94]++,(t,r=(Me().b[32][0]++,{}))=>{Me().f[27]++,Me().s[95]++,r={save:!0,addRevision:!0,initialLoad:!1,...r},Me().s[96]++,r.initialLoad?(Me().b[33][0]++,Me().s[97]++,this.getInitialStateFromUrl(t)):Me().b[33][1]++;const i=(Me().s[98]++,Me().b[34][0]++,Tf(t)||(Me().b[34][1]++,[])),o=(Me().s[99]++,[]);if(Me().s[100]++,Me().b[36][0]++,t&&(Me().b[36][1]++,t.layers)){Me().b[35][0]++;const h=(Me().s[101]++,new window.Map);Me().s[102]++,t.layers.forEach((g,b)=>{if(Me().f[28]++,Me().s[103]++,Me().b[38][0]++,g.id===""&&(Me().b[38][1]++,h.has(g.id))){Me().b[37][0]++;const B=(Me().s[104]++,new Error(`layers[${b}]: duplicate layer id [empty_string], previously used`));Me().s[105]++,o.push(B)}else Me().b[37][1]++;Me().s[106]++,h.set(g.id,!0)})}else Me().b[35][1]++;const a=(Me().s[107]++,o.concat(i).map(h=>{Me().f[29]++;const g=(Me().s[108]++,h.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(Me().s[109]++,g){Me().b[39][0]++;const[,S,I]=(Me().s[110]++,g);return Me().s[111]++,{message:h.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:"id",message:I}}}}else Me().b[39][1]++;const b=(Me().s[112]++,h.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(Me().s[113]++,b){Me().b[40][0]++;const[,S,I]=(Me().s[114]++,b);return Me().s[115]++,{message:h.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:"source",message:I}}}}else Me().b[40][1]++;const B=(Me().s[116]++,h.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(Me().s[117]++,B){Me().b[41][0]++;const[,S,I,k,U]=(Me().s[118]++,B),z=(Me().s[119]++,Me().b[43][0]++,I&&(Me().b[43][1]++,k)?(Me().b[42][0]++,[I,k].join(".")):(Me().b[42][1]++,k));return Me().s[120]++,{message:h.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:z,message:U}}}}else return Me().b[41][1]++,Me().s[121]++,{message:h.message}}));let s=(Me().s[122]++,void 0);Me().s[123]++,i.length>0?(Me().b[44][0]++,Me().s[124]++,s=g8(t),Me().s[125]++,i.forEach(h=>{Me().f[30]++;const{message:g}=(Me().s[126]++,h);if(Me().s[127]++,g){Me().b[45][0]++,Me().s[128]++;try{const b=(Me().s[129]++,g.split(":")[0]),B=(Me().s[130]++,b.match(/^\S+?\[\d+\]\.[^[]+/)[0]);Me().s[131]++,V2.unset(s,B)}catch(b){Me().s[132]++,console.warn(b)}}else Me().b[45][1]++})):Me().b[44][1]++,Me().s[133]++,t.glyphs!==this.state.mapStyle.glyphs?(Me().b[46][0]++,Me().s[134]++,this.updateFonts(t.glyphs)):Me().b[46][1]++,Me().s[135]++,t.sprite!==this.state.mapStyle.sprite?(Me().b[47][0]++,Me().s[136]++,this.updateIcons(t.sprite)):Me().b[47][1]++,Me().s[137]++,r.addRevision?(Me().b[48][0]++,Me().s[138]++,this.revisionStore.addRevision(t)):Me().b[48][1]++,Me().s[139]++,r.save?(Me().b[49][0]++,Me().s[140]++,this.saveStyle(t)):Me().b[49][1]++,Me().s[141]++,this.setState({mapStyle:t,dirtyMapStyle:s,errors:a},()=>{Me().f[31]++,Me().s[142]++,this.fetchSources(),Me().s[143]++,this.setStateInUrl()})}));In(this,"onUndo",(Me().s[144]++,()=>{Me().f[32]++;const t=(Me().s[145]++,this.revisionStore.undo()),r=(Me().s[146]++,Ode(this.state.mapStyle,t));Me().s[147]++,this.onStyleChanged(t,{addRevision:!1}),Me().s[148]++,this.setState({infos:r})}));In(this,"onRedo",(Me().s[149]++,()=>{Me().f[33]++;const t=(Me().s[150]++,this.revisionStore.redo()),r=(Me().s[151]++,Ide(this.state.mapStyle,t));Me().s[152]++,this.onStyleChanged(t,{addRevision:!1}),Me().s[153]++,this.setState({infos:r})}));In(this,"onMoveLayer",(Me().s[154]++,t=>{Me().f[34]++;let{oldIndex:r,newIndex:i}=(Me().s[155]++,t),o=(Me().s[156]++,this.state.mapStyle.layers);if(Me().s[157]++,r=v8(r,0,o.length-1),Me().s[158]++,i=v8(i,0,o.length-1),Me().s[159]++,r===i){Me().b[50][0]++,Me().s[160]++;return}else Me().b[50][1]++;Me().s[161]++,r===this.state.selectedLayerIndex?(Me().b[51][0]++,Me().s[162]++,this.setState({selectedLayerIndex:i})):Me().b[51][1]++,Me().s[163]++,o=o.slice(0),Me().s[164]++,LQ(o,r,i),Me().s[165]++,this.onLayersChange(o)}));In(this,"onLayersChange",(Me().s[166]++,t=>{Me().f[35]++;const r=(Me().s[167]++,{...this.state.mapStyle,layers:t});Me().s[168]++,this.onStyleChanged(r)}));In(this,"onLayerDestroy",(Me().s[169]++,t=>{Me().f[36]++;const r=(Me().s[170]++,this.state.mapStyle.layers),i=(Me().s[171]++,r.slice(0));Me().s[172]++,i.splice(t,1),Me().s[173]++,this.onLayersChange(i)}));In(this,"onLayerCopy",(Me().s[174]++,t=>{Me().f[37]++;const r=(Me().s[175]++,this.state.mapStyle.layers),i=(Me().s[176]++,r.slice(0)),o=(Me().s[177]++,g8(i[t]));Me().s[178]++,o.id=o.id+"-copy",Me().s[179]++,i.splice(t,0,o),Me().s[180]++,this.onLayersChange(i)}));In(this,"onLayerVisibilityToggle",(Me().s[181]++,t=>{Me().f[38]++;const r=(Me().s[182]++,this.state.mapStyle.layers),i=(Me().s[183]++,r.slice(0)),o=(Me().s[184]++,{...i[t]}),a=(Me().s[185]++,"layout"in o?(Me().b[52][0]++,{...o.layout}):(Me().b[52][1]++,{}));Me().s[186]++,a.visibility=a.visibility==="none"?(Me().b[53][0]++,"visible"):(Me().b[53][1]++,"none"),Me().s[187]++,o.layout=a,Me().s[188]++,i[t]=o,Me().s[189]++,this.onLayersChange(i)}));In(this,"onLayerIdChange",(Me().s[190]++,(t,r,i)=>{Me().f[39]++;const o=(Me().s[191]++,this.state.mapStyle.layers.slice(0));Me().s[192]++,o[t]={...o[t],id:i},Me().s[193]++,this.onLayersChange(o)}));In(this,"onLayerChanged",(Me().s[194]++,(t,r)=>{Me().f[40]++;const i=(Me().s[195]++,this.state.mapStyle.layers.slice(0));Me().s[196]++,i[t]=r,Me().s[197]++,this.onLayersChange(i)}));In(this,"setMapState",(Me().s[198]++,t=>{Me().f[41]++,Me().s[199]++,this.setState({mapState:t},this.setStateInUrl)}));In(this,"setDefaultValues",(Me().s[200]++,t=>{Me().f[42]++;const r=(Me().s[201]++,Me().b[54][0]++,t.metadata||(Me().b[54][1]++,{}));if(Me().s[202]++,r["maputnik:renderer"]===void 0){Me().b[55][0]++;const i=(Me().s[203]++,{...t,metadata:{...t.metadata,"maputnik:renderer":"mlgljs"}});return Me().s[204]++,i}else return Me().b[55][1]++,Me().s[205]++,t}));In(this,"openStyle",(Me().s[206]++,(t,r)=>{Me().f[43]++,Me().s[207]++,this.setState({fileHandle:r}),Me().s[208]++,t=this.setDefaultValues(t),Me().s[209]++,this.onStyleChanged(t)}));In(this,"onMapChange",(Me().s[234]++,t=>{Me().f[49]++,Me().s[235]++,this.setState({mapView:t})}));In(this,"setStateInUrl",(Me().s[251]++,()=>{Me().f[53]++;const{mapState:t,mapStyle:r,isOpen:i}=(Me().s[252]++,this.state),{selectedLayerIndex:o}=(Me().s[253]++,this.state),a=(Me().s[254]++,new URL(location.href)),s=(Me().s[255]++,S8(JSON.stringify(r)));Me().s[256]++,a.searchParams.set("layer",`${s}~${o}`);const h=(Me().s[257]++,Object.entries(i).map(([g,b])=>(Me().f[54]++,Me().s[258]++,b===!0?(Me().b[67][0]++,g):(Me().b[67][1]++,null))).filter(g=>(Me().f[55]++,Me().s[259]++,g!==null)));Me().s[260]++,h.length>0?(Me().b[68][0]++,Me().s[261]++,a.searchParams.set("modal",h.join(","))):(Me().b[68][1]++,Me().s[262]++,a.searchParams.delete("modal")),Me().s[263]++,t==="map"?(Me().b[69][0]++,Me().s[264]++,a.searchParams.delete("view")):(Me().b[69][1]++,Me().s[265]++,t==="inspect"?(Me().b[70][0]++,Me().s[266]++,a.searchParams.set("view","inspect")):Me().b[70][1]++),Me().s[267]++,history.replaceState({selectedLayerIndex:o},"Maputnik",a.href)}));In(this,"getInitialStateFromUrl",(Me().s[268]++,t=>{Me().f[56]++;const r=(Me().s[269]++,new URL(location.href)),i=(Me().s[270]++,r.searchParams.get("modal"));if(Me().s[271]++,Me().b[72][0]++,i&&(Me().b[72][1]++,i!=="")){Me().b[71][0]++;const s=(Me().s[272]++,i.split(",")),h=(Me().s[273]++,{});Me().s[274]++,s.forEach(g=>{Me().f[57]++,Me().s[275]++,h[g]=!0}),Me().s[276]++,this.setState({isOpen:{...this.state.isOpen,...h}})}else Me().b[71][1]++;const o=(Me().s[277]++,r.searchParams.get("view"));Me().s[278]++,Me().b[74][0]++,o&&(Me().b[74][1]++,o!=="")?(Me().b[73][0]++,Me().s[279]++,this.setMapState(o)):Me().b[73][1]++;const a=(Me().s[280]++,r.searchParams.get("layer"));if(Me().s[281]++,a){Me().b[75][0]++,Me().s[282]++;try{const s=(Me().s[283]++,a.split("~")),[h,g]=(Me().s[284]++,[s[0],parseInt(s[1],10)]);let b=(Me().s[285]++,!0);if(Me().s[286]++,h!=="-"){Me().b[76][0]++;const B=(Me().s[287]++,S8(JSON.stringify(t)));Me().s[288]++,B!==parseInt(h,10)?(Me().b[77][0]++,Me().s[289]++,b=!1):Me().b[77][1]++}else Me().b[76][1]++;Me().s[290]++,b?(Me().b[78][0]++,Me().s[291]++,this.setState({selectedLayerIndex:g,selectedLayerOriginalId:t.layers[g].id})):Me().b[78][1]++}catch(s){Me().s[292]++,console.warn(s)}}else Me().b[75][1]++}));In(this,"onLayerSelect",(Me().s[293]++,t=>{Me().f[58]++,Me().s[294]++,this.setState({selectedLayerIndex:t,selectedLayerOriginalId:this.state.mapStyle.layers[t].id},this.setStateInUrl)}));In(this,"onChangeOpenlayersDebug",(Me().s[298]++,(t,r)=>{Me().f[62]++,Me().s[299]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[t]:r}})}));In(this,"onChangeMaplibreGlDebug",(Me().s[300]++,(t,r)=>{Me().f[63]++,Me().s[301]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[t]:r}})}));Me().s[15]++,bQ(this),Me().s[16]++,this.revisionStore=new Gde;const r=(Me().s[17]++,new URLSearchParams(window.location.search.substring(1)));let i=(Me().s[18]++,r.get("localport"));Me().s[19]++,Me().b[6][0]++,i==null&&(Me().b[6][1]++,window.location.port!=="80")&&(Me().b[6][2]++,window.location.port!=="443")?(Me().b[5][0]++,Me().s[20]++,i=window.location.port):Me().b[5][1]++,Me().s[21]++,this.styleStore=new Nde({onLocalStyleChange:s=>(Me().f[3]++,Me().s[22]++,this.onStyleChanged(s,{save:!1})),port:i,host:r.get("localhost")});const o=(Me().s[23]++,[{key:"?",handler:()=>{Me().f[4]++,Me().s[24]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{Me().f[5]++,Me().s[25]++,this.toggleModal("open")}},{key:"e",handler:()=>{Me().f[6]++,Me().s[26]++,this.toggleModal("export")}},{key:"d",handler:()=>{Me().f[7]++,Me().s[27]++,this.toggleModal("sources")}},{key:"s",handler:()=>{Me().f[8]++,Me().s[28]++,this.toggleModal("settings")}},{key:"i",handler:()=>{Me().f[9]++,Me().s[29]++,this.setMapState(this.state.mapState==="map"?(Me().b[7][0]++,"inspect"):(Me().b[7][1]++,"map"))}},{key:"m",handler:()=>{Me().f[10]++,Me().s[30]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{Me().f[11]++,Me().s[31]++,this.toggleModal("debug")}}]);Me().s[32]++,document.body.addEventListener("keyup",s=>{if(Me().f[12]++,Me().s[33]++,s.key==="Escape")Me().b[8][0]++,Me().s[34]++,s.target.blur(),Me().s[35]++,document.body.focus();else if(Me().b[8][1]++,Me().s[36]++,Me().b[10][0]++,this.state.isOpen.shortcuts||(Me().b[10][1]++,document.activeElement===document.body)){Me().b[9][0]++;const h=(Me().s[37]++,o.find(g=>(Me().f[13]++,Me().s[38]++,g.key===s.key)));Me().s[39]++,h?(Me().b[11][0]++,Me().s[40]++,this.setModal("shortcuts",!1),Me().s[41]++,h.handler()):Me().b[11][1]++}else Me().b[9][1]++});const a=(Me().s[42]++,Bde());Me().s[43]++,Me().b[13][0]++,a&&(Me().b[13][1]++,window.confirm("Load style from URL: "+a+" and discard current changes?"))?(Me().b[12][0]++,Me().s[44]++,this.styleStore=new eL,Me().s[45]++,uG(a,s=>(Me().f[14]++,Me().s[46]++,this.onStyleChanged(s))),Me().s[47]++,HD()):(Me().b[12][1]++,Me().s[48]++,a?(Me().b[14][0]++,Me().s[49]++,HD()):Me().b[14][1]++,Me().s[50]++,this.styleStore.init(s=>{Me().f[15]++,Me().s[51]++,s?(Me().b[15][0]++,Me().s[52]++,console.log("Falling back to local storage for storing styles"),Me().s[53]++,this.styleStore=new eL):Me().b[15][1]++,Me().s[54]++,this.styleStore.latestStyle(h=>(Me().f[16]++,Me().s[55]++,this.onStyleChanged(h,{initialLoad:!0}))),Me().s[56]++,Ag.enabled()?(Me().b[16][0]++,Me().s[57]++,Ag.set("maputnik","styleStore",this.styleStore),Me().s[58]++,Ag.set("maputnik","revisionStore",this.revisionStore)):Me().b[16][1]++})),Me().s[59]++,Ag.enabled()?(Me().b[17][0]++,Me().s[60]++,Ag.set("maputnik","revisionStore",this.revisionStore),Me().s[61]++,Ag.set("maputnik","styleStore",this.styleStore)):Me().b[17][1]++,Me().s[62]++,this.state={errors:[],infos:[],mapStyle:cc.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Ys,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},Me().s[63]++,this.layerWatcher=new Vde({onVectorLayersChange:s=>(Me().f[17]++,Me().s[64]++,this.setState({vectorLayers:s}))})}componentDidMount(){Me().f[19]++,Me().s[79]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){Me().f[20]++,Me().s[80]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(t){Me().f[21]++,Me().s[81]++,this.styleStore.save(t)}updateFonts(t){Me().f[22]++;const r=(Me().s[82]++,Me().b[27][0]++,this.state.mapStyle.metadata||(Me().b[27][1]++,{})),i=(Me().s[83]++,Me().b[28][0]++,r["maputnik:openmaptiles_access_token"]||(Me().b[28][1]++,ZN.openmaptiles)),o=(Me().s[84]++,typeof t=="string"?(Me().b[29][0]++,t.replace("{key}",i)):(Me().b[29][1]++,t));Me().s[85]++,Sde(o,a=>{Me().f[23]++,Me().s[86]++,this.setState({spec:rL(this.state.spec,"glyphs",a)})})}updateIcons(t){Me().f[24]++,Me().s[87]++,Ede(t,r=>{Me().f[25]++,Me().s[88]++,this.setState({spec:rL(this.state.spec,"sprite",r)})})}fetchSources(){Me().f[44]++;const t=(Me().s[210]++,{});Me().s[211]++;for(const[r,i]of Object.entries(this.state.mapStyle.sources))if(Me().s[212]++,Me().b[57][0]++,!Object.prototype.hasOwnProperty.call(this.state.sources,r)&&(Me().b[57][1]++,i.type==="vector")&&(Me().b[57][2]++,Object.prototype.hasOwnProperty.call(i,"url"))){Me().b[56][0]++,Me().s[213]++,t[r]={type:i.type,layers:[]};let o=(Me().s[214]++,i.url);Me().s[215]++;try{Me().s[216]++,o=Xde(o,this.state.mapStyle)}catch(a){Me().s[217]++,console.warn("Failed to setFetchAccessToken: ",a)}Me().s[218]++,fetch(o,{mode:"cors"}).then(a=>(Me().f[45]++,Me().s[219]++,a.json())).then(a=>{if(Me().f[46]++,Me().s[220]++,Object.prototype.hasOwnProperty.call(a,"vector_layers"))Me().b[58][1]++;else{Me().b[58][0]++,Me().s[221]++;return}const s=(Me().s[222]++,Object.assign({},{[r]:this.state.sources[r]}));Me().s[223]++;for(const h of a.vector_layers)Me().s[224]++,s[r].layers.push(h.id);Me().s[225]++,console.debug("Updating source: "+r),Me().s[226]++,this.setState({sources:s})}).catch(a=>{Me().f[47]++,Me().s[227]++,console.error("Failed to process sources for '%s'",o,a)})}else Me().b[56][1]++,Me().s[228]++,t[r]=(Me().b[59][0]++,this.state.sources[r]||(Me().b[59][1]++,this.state.mapStyle.sources[r]));Me().s[229]++,eB(this.state.sources,t)?Me().b[60][1]++:(Me().b[60][0]++,Me().s[230]++,console.debug("Setting sources"),Me().s[231]++,this.setState({sources:t}))}_getRenderer(){Me().f[48]++;const t=(Me().s[232]++,Me().b[61][0]++,this.state.mapStyle.metadata||(Me().b[61][1]++,{}));return Me().s[233]++,Me().b[62][0]++,t["maputnik:renderer"]||(Me().b[62][1]++,"mlgljs")}mapRenderer(){Me().f[50]++;const{mapStyle:t,dirtyMapStyle:r}=(Me().s[236]++,this.state),i=(Me().s[237]++,{mapStyle:(Me().b[63][0]++,r||(Me().b[63][1]++,t)),replaceAccessTokens:g=>(Me().f[51]++,Me().s[238]++,cc.replaceAccessTokens(g,{allowFallback:!0})),onDataChange:g=>{Me().f[52]++,Me().s[239]++,this.layerWatcher.analyzeMap(g.map),Me().s[240]++,this.fetchSources()}}),o=(Me().s[241]++,this._getRenderer());let a;Me().s[242]++,o==="ol"?(Me().b[64][0]++,Me().s[243]++,a=ae.jsx(xie,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(Me().b[64][1]++,Me().s[244]++,a=ae.jsx(bH,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let s;Me().s[245]++,this.state.mapState.match(/^filter-/)?(Me().b[65][0]++,Me().s[246]++,s=this.state.mapState.replace(/^filter-/,"")):Me().b[65][1]++;const h=(Me().s[247]++,{});return Me().s[248]++,s?(Me().b[66][0]++,Me().s[249]++,h.filter=`url('#${s}')`):Me().b[66][1]++,Me().s[250]++,ae.jsx("div",{style:h,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:a})}setModal(t,r){Me().f[59]++,Me().s[295]++,this.setState({isOpen:{...this.state.isOpen,[t]:r}},this.setStateInUrl)}toggleModal(t){Me().f[60]++,Me().s[296]++,this.setModal(t,!this.state.isOpen[t])}onSetFileHandle(t){Me().f[61]++,Me().s[297]++,this.setState({fileHandle:t})}render(){Me().f[64]++;const t=(Me().s[302]++,Me().b[79][0]++,this.state.mapStyle.layers||(Me().b[79][1]++,[])),r=(Me().s[303]++,t.length>0?(Me().b[80][0]++,t[this.state.selectedLayerIndex]):(Me().b[80][1]++,void 0)),i=(Me().s[304]++,ae.jsx(Zce,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),o=(Me().s[305]++,ae.jsx(zse,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:t,sources:this.state.sources,errors:this.state.errors})),a=(Me().s[306]++,r?(Me().b[81][0]++,ae.jsx(yce,{layer:r,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(Me().b[81][1]++,void 0)),s=(Me().s[307]++,this.state.errors.length+this.state.infos.length>0?(Me().b[82][0]++,ae.jsx(ehe,{currentLayer:r,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(Me().b[82][1]++,void 0)),h=(Me().s[308]++,ae.jsxs("div",{children:[ae.jsx(Xhe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),ae.jsx(Hhe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),ae.jsx(ihe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),ae.jsx(xhe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),ae.jsx($he,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),ae.jsx(zhe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return Me().s[309]++,ae.jsx(Jce,{toolbar:i,layerList:o,layerEditor:a,map:this.mapRenderer(),bottom:s,modals:h})}}const efe=hW.createRoot(document.querySelector("#app"));efe.render(ae.jsx(PE.Provider,{value:{className:"react-icons"},children:ae.jsx(Jde,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-DxD0HD5a.js.map
