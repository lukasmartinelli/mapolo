var EQ=Object.defineProperty;var BQ=(n,e,t)=>e in n?EQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Tn=(n,e,t)=>BQ(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Xa(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function UB(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var q3={exports:{}},hv={},Y3={exports:{}},vs={},MI;function OQ(){if(MI)return vs;MI=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.iterator;function S(Pe){return Pe===null||typeof Pe!="object"?null:(Pe=E&&Pe[E]||Pe["@@iterator"],typeof Pe=="function"?Pe:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,z={};function j(Pe,it,vt){this.props=Pe,this.context=it,this.refs=z,this.updater=vt||B}j.prototype.isReactComponent={},j.prototype.setState=function(Pe,it){if(typeof Pe!="object"&&typeof Pe!="function"&&Pe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Pe,it,"setState")},j.prototype.forceUpdate=function(Pe){this.updater.enqueueForceUpdate(this,Pe,"forceUpdate")};function Y(){}Y.prototype=j.prototype;function q(Pe,it,vt){this.props=Pe,this.context=it,this.refs=z,this.updater=vt||B}var ie=q.prototype=new Y;ie.constructor=q,k(ie,j.prototype),ie.isPureReactComponent=!0;var J=Array.isArray,$=Object.prototype.hasOwnProperty,te={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function oe(Pe,it,vt){var _t,ft={},Dt=null,Tt=null;if(it!=null)for(_t in it.ref!==void 0&&(Tt=it.ref),it.key!==void 0&&(Dt=""+it.key),it)$.call(it,_t)&&!W.hasOwnProperty(_t)&&(ft[_t]=it[_t]);var Ue=arguments.length-2;if(Ue===1)ft.children=vt;else if(1<Ue){for(var Re=Array(Ue),Be=0;Be<Ue;Be++)Re[Be]=arguments[Be+2];ft.children=Re}if(Pe&&Pe.defaultProps)for(_t in Ue=Pe.defaultProps,Ue)ft[_t]===void 0&&(ft[_t]=Ue[_t]);return{$$typeof:n,type:Pe,key:Dt,ref:Tt,props:ft,_owner:te.current}}function fe(Pe,it){return{$$typeof:n,type:Pe.type,key:it,ref:Pe.ref,props:Pe.props,_owner:Pe._owner}}function he(Pe){return typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===n}function Se(Pe){var it={"=":"=0",":":"=2"};return"$"+Pe.replace(/[=:]/g,function(vt){return it[vt]})}var pe=/\/+/g;function we(Pe,it){return typeof Pe=="object"&&Pe!==null&&Pe.key!=null?Se(""+Pe.key):it.toString(36)}function Ke(Pe,it,vt,_t,ft){var Dt=typeof Pe;(Dt==="undefined"||Dt==="boolean")&&(Pe=null);var Tt=!1;if(Pe===null)Tt=!0;else switch(Dt){case"string":case"number":Tt=!0;break;case"object":switch(Pe.$$typeof){case n:case e:Tt=!0}}if(Tt)return Tt=Pe,ft=ft(Tt),Pe=_t===""?"."+we(Tt,0):_t,J(ft)?(vt="",Pe!=null&&(vt=Pe.replace(pe,"$&/")+"/"),Ke(ft,it,vt,"",function(Be){return Be})):ft!=null&&(he(ft)&&(ft=fe(ft,vt+(!ft.key||Tt&&Tt.key===ft.key?"":(""+ft.key).replace(pe,"$&/")+"/")+Pe)),it.push(ft)),1;if(Tt=0,_t=_t===""?".":_t+":",J(Pe))for(var Ue=0;Ue<Pe.length;Ue++){Dt=Pe[Ue];var Re=_t+we(Dt,Ue);Tt+=Ke(Dt,it,vt,Re,ft)}else if(Re=S(Pe),typeof Re=="function")for(Pe=Re.call(Pe),Ue=0;!(Dt=Pe.next()).done;)Dt=Dt.value,Re=_t+we(Dt,Ue++),Tt+=Ke(Dt,it,vt,Re,ft);else if(Dt==="object")throw it=String(Pe),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(Pe).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.");return Tt}function ge(Pe,it,vt){if(Pe==null)return Pe;var _t=[],ft=0;return Ke(Pe,_t,"","",function(Dt){return it.call(vt,Dt,ft++)}),_t}function st(Pe){if(Pe._status===-1){var it=Pe._result;it=it(),it.then(function(vt){(Pe._status===0||Pe._status===-1)&&(Pe._status=1,Pe._result=vt)},function(vt){(Pe._status===0||Pe._status===-1)&&(Pe._status=2,Pe._result=vt)}),Pe._status===-1&&(Pe._status=0,Pe._result=it)}if(Pe._status===1)return Pe._result.default;throw Pe._result}var Qe={current:null},Ze={transition:null},We={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:Ze,ReactCurrentOwner:te};function Ce(){throw Error("act(...) is not supported in production builds of React.")}return vs.Children={map:ge,forEach:function(Pe,it,vt){ge(Pe,function(){it.apply(this,arguments)},vt)},count:function(Pe){var it=0;return ge(Pe,function(){it++}),it},toArray:function(Pe){return ge(Pe,function(it){return it})||[]},only:function(Pe){if(!he(Pe))throw Error("React.Children.only expected to receive a single React element child.");return Pe}},vs.Component=j,vs.Fragment=t,vs.Profiler=i,vs.PureComponent=q,vs.StrictMode=r,vs.Suspense=d,vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=We,vs.act=Ce,vs.cloneElement=function(Pe,it,vt){if(Pe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Pe+".");var _t=k({},Pe.props),ft=Pe.key,Dt=Pe.ref,Tt=Pe._owner;if(it!=null){if(it.ref!==void 0&&(Dt=it.ref,Tt=te.current),it.key!==void 0&&(ft=""+it.key),Pe.type&&Pe.type.defaultProps)var Ue=Pe.type.defaultProps;for(Re in it)$.call(it,Re)&&!W.hasOwnProperty(Re)&&(_t[Re]=it[Re]===void 0&&Ue!==void 0?Ue[Re]:it[Re])}var Re=arguments.length-2;if(Re===1)_t.children=vt;else if(1<Re){Ue=Array(Re);for(var Be=0;Be<Re;Be++)Ue[Be]=arguments[Be+2];_t.children=Ue}return{$$typeof:n,type:Pe.type,key:ft,ref:Dt,props:_t,_owner:Tt}},vs.createContext=function(Pe){return Pe={$$typeof:a,_currentValue:Pe,_currentValue2:Pe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Pe.Provider={$$typeof:s,_context:Pe},Pe.Consumer=Pe},vs.createElement=oe,vs.createFactory=function(Pe){var it=oe.bind(null,Pe);return it.type=Pe,it},vs.createRef=function(){return{current:null}},vs.forwardRef=function(Pe){return{$$typeof:o,render:Pe}},vs.isValidElement=he,vs.lazy=function(Pe){return{$$typeof:b,_payload:{_status:-1,_result:Pe},_init:st}},vs.memo=function(Pe,it){return{$$typeof:g,type:Pe,compare:it===void 0?null:it}},vs.startTransition=function(Pe){var it=Ze.transition;Ze.transition={};try{Pe()}finally{Ze.transition=it}},vs.unstable_act=Ce,vs.useCallback=function(Pe,it){return Qe.current.useCallback(Pe,it)},vs.useContext=function(Pe){return Qe.current.useContext(Pe)},vs.useDebugValue=function(){},vs.useDeferredValue=function(Pe){return Qe.current.useDeferredValue(Pe)},vs.useEffect=function(Pe,it){return Qe.current.useEffect(Pe,it)},vs.useId=function(){return Qe.current.useId()},vs.useImperativeHandle=function(Pe,it,vt){return Qe.current.useImperativeHandle(Pe,it,vt)},vs.useInsertionEffect=function(Pe,it){return Qe.current.useInsertionEffect(Pe,it)},vs.useLayoutEffect=function(Pe,it){return Qe.current.useLayoutEffect(Pe,it)},vs.useMemo=function(Pe,it){return Qe.current.useMemo(Pe,it)},vs.useReducer=function(Pe,it,vt){return Qe.current.useReducer(Pe,it,vt)},vs.useRef=function(Pe){return Qe.current.useRef(Pe)},vs.useState=function(Pe){return Qe.current.useState(Pe)},vs.useSyncExternalStore=function(Pe,it,vt){return Qe.current.useSyncExternalStore(Pe,it,vt)},vs.useTransition=function(){return Qe.current.useTransition()},vs.version="18.3.1",vs}var SI;function La(){return SI||(SI=1,Y3.exports=OQ()),Y3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI;function IQ(){if(EI)return hv;EI=1;var n=La(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,d,g){var b,E={},S=null,B=null;g!==void 0&&(S=""+g),d.key!==void 0&&(S=""+d.key),d.ref!==void 0&&(B=d.ref);for(b in d)r.call(d,b)&&!s.hasOwnProperty(b)&&(E[b]=d[b]);if(o&&o.defaultProps)for(b in d=o.defaultProps,d)E[b]===void 0&&(E[b]=d[b]);return{$$typeof:e,type:o,key:S,ref:B,props:E,_owner:i.current}}return hv.Fragment=t,hv.jsx=a,hv.jsxs=a,hv}var BI;function kQ(){return BI||(BI=1,q3.exports=IQ()),q3.exports}var le=kQ(),Ai=La();const nr=Xa(Ai);var uL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},f6=nr.createContext&&nr.createContext(uL),TQ=["attr","size","title"];function PQ(n,e){if(n==null)return{};var t=RQ(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function RQ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Vb(){return Vb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vb.apply(this,arguments)}function OI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Hb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OI(Object(t),!0).forEach(function(r){DQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function DQ(n,e,t){return e=KQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KQ(n){var e=FQ(n,"string");return typeof e=="symbol"?e:e+""}function FQ(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function AL(n){return n&&n.map((e,t)=>nr.createElement(e.tag,Hb({key:t},e.attr),AL(e.child)))}function ru(n){return e=>nr.createElement(LQ,Vb({attr:Hb({},n.attr)},e),AL(n.child))}function LQ(n){var e=t=>{var{attr:r,size:i,title:s}=n,a=PQ(n,TQ),o=i||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),nr.createElement("svg",Vb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:d,style:Hb(Hb({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&nr.createElement("title",null,s),n.children)};return f6!==void 0?nr.createElement(f6.Consumer,null,t=>e(t)):e(uL)}var W_={},$3={exports:{}},mh={},V3={exports:{}},H3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var II;function UQ(){return II||(II=1,function(n){function e(Ze,We){var Ce=Ze.length;Ze.push(We);e:for(;0<Ce;){var Pe=Ce-1>>>1,it=Ze[Pe];if(0<i(it,We))Ze[Pe]=We,Ze[Ce]=it,Ce=Pe;else break e}}function t(Ze){return Ze.length===0?null:Ze[0]}function r(Ze){if(Ze.length===0)return null;var We=Ze[0],Ce=Ze.pop();if(Ce!==We){Ze[0]=Ce;e:for(var Pe=0,it=Ze.length,vt=it>>>1;Pe<vt;){var _t=2*(Pe+1)-1,ft=Ze[_t],Dt=_t+1,Tt=Ze[Dt];if(0>i(ft,Ce))Dt<it&&0>i(Tt,ft)?(Ze[Pe]=Tt,Ze[Dt]=Ce,Pe=Dt):(Ze[Pe]=ft,Ze[_t]=Ce,Pe=_t);else if(Dt<it&&0>i(Tt,Ce))Ze[Pe]=Tt,Ze[Dt]=Ce,Pe=Dt;else break e}}return We}function i(Ze,We){var Ce=Ze.sortIndex-We.sortIndex;return Ce!==0?Ce:Ze.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var d=[],g=[],b=1,E=null,S=3,B=!1,k=!1,z=!1,j=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(Ze){for(var We=t(g);We!==null;){if(We.callback===null)r(g);else if(We.startTime<=Ze)r(g),We.sortIndex=We.expirationTime,e(d,We);else break;We=t(g)}}function J(Ze){if(z=!1,ie(Ze),!k)if(t(d)!==null)k=!0,st($);else{var We=t(g);We!==null&&Qe(J,We.startTime-Ze)}}function $(Ze,We){k=!1,z&&(z=!1,Y(oe),oe=-1),B=!0;var Ce=S;try{for(ie(We),E=t(d);E!==null&&(!(E.expirationTime>We)||Ze&&!Se());){var Pe=E.callback;if(typeof Pe=="function"){E.callback=null,S=E.priorityLevel;var it=Pe(E.expirationTime<=We);We=n.unstable_now(),typeof it=="function"?E.callback=it:E===t(d)&&r(d),ie(We)}else r(d);E=t(d)}if(E!==null)var vt=!0;else{var _t=t(g);_t!==null&&Qe(J,_t.startTime-We),vt=!1}return vt}finally{E=null,S=Ce,B=!1}}var te=!1,W=null,oe=-1,fe=5,he=-1;function Se(){return!(n.unstable_now()-he<fe)}function pe(){if(W!==null){var Ze=n.unstable_now();he=Ze;var We=!0;try{We=W(!0,Ze)}finally{We?we():(te=!1,W=null)}}else te=!1}var we;if(typeof q=="function")we=function(){q(pe)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,ge=Ke.port2;Ke.port1.onmessage=pe,we=function(){ge.postMessage(null)}}else we=function(){j(pe,0)};function st(Ze){W=Ze,te||(te=!0,we())}function Qe(Ze,We){oe=j(function(){Ze(n.unstable_now())},We)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ze){Ze.callback=null},n.unstable_continueExecution=function(){k||B||(k=!0,st($))},n.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<Ze?Math.floor(1e3/Ze):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(Ze){switch(S){case 1:case 2:case 3:var We=3;break;default:We=S}var Ce=S;S=We;try{return Ze()}finally{S=Ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Ze,We){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var Ce=S;S=Ze;try{return We()}finally{S=Ce}},n.unstable_scheduleCallback=function(Ze,We,Ce){var Pe=n.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Pe+Ce:Pe):Ce=Pe,Ze){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=Ce+it,Ze={id:b++,callback:We,priorityLevel:Ze,startTime:Ce,expirationTime:it,sortIndex:-1},Ce>Pe?(Ze.sortIndex=Ce,e(g,Ze),t(d)===null&&Ze===t(g)&&(z?(Y(oe),oe=-1):z=!0,Qe(J,Ce-Pe))):(Ze.sortIndex=it,e(d,Ze),k||B||(k=!0,st($))),Ze},n.unstable_shouldYield=Se,n.unstable_wrapCallback=function(Ze){var We=S;return function(){var Ce=S;S=We;try{return Ze.apply(this,arguments)}finally{S=Ce}}}}(H3)),H3}var kI;function zQ(){return kI||(kI=1,V3.exports=UQ()),V3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI;function jQ(){if(TI)return mh;TI=1;var n=La(),e=zQ();function t(m){for(var C="https://reactjs.org/docs/error-decoder.html?invariant="+m,F=1;F<arguments.length;F++)C+="&args[]="+encodeURIComponent(arguments[F]);return"Minified React error #"+m+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,C){a(m,C),a(m+"Capture",C)}function a(m,C){for(i[m]=C,m=0;m<C.length;m++)r.add(C[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},E={};function S(m){return d.call(E,m)?!0:d.call(b,m)?!1:g.test(m)?E[m]=!0:(b[m]=!0,!1)}function B(m,C,F,Q){if(F!==null&&F.type===0)return!1;switch(typeof C){case"function":case"symbol":return!0;case"boolean":return Q?!1:F!==null?!F.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function k(m,C,F,Q){if(C===null||typeof C>"u"||B(m,C,F,Q))return!0;if(Q)return!1;if(F!==null)switch(F.type){case 3:return!C;case 4:return C===!1;case 5:return isNaN(C);case 6:return isNaN(C)||1>C}return!1}function z(m,C,F,Q,ue,ye,et){this.acceptsBooleans=C===2||C===3||C===4,this.attributeName=Q,this.attributeNamespace=ue,this.mustUseProperty=F,this.propertyName=m,this.type=C,this.sanitizeURL=ye,this.removeEmptyString=et}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){j[m]=new z(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var C=m[0];j[C]=new z(C,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){j[m]=new z(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){j[m]=new z(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){j[m]=new z(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){j[m]=new z(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){j[m]=new z(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){j[m]=new z(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){j[m]=new z(m,5,!1,m.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function q(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var C=m.replace(Y,q);j[C]=new z(C,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var C=m.replace(Y,q);j[C]=new z(C,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var C=m.replace(Y,q);j[C]=new z(C,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){j[m]=new z(m,1,!1,m.toLowerCase(),null,!1,!1)}),j.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){j[m]=new z(m,1,!1,m.toLowerCase(),null,!0,!0)});function ie(m,C,F,Q){var ue=j.hasOwnProperty(C)?j[C]:null;(ue!==null?ue.type!==0:Q||!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(k(C,F,ue,Q)&&(F=null),Q||ue===null?S(C)&&(F===null?m.removeAttribute(C):m.setAttribute(C,""+F)):ue.mustUseProperty?m[ue.propertyName]=F===null?ue.type===3?!1:"":F:(C=ue.attributeName,Q=ue.attributeNamespace,F===null?m.removeAttribute(C):(ue=ue.type,F=ue===3||ue===4&&F===!0?"":""+F,Q?m.setAttributeNS(Q,C,F):m.setAttribute(C,F))))}var J=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),te=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),Se=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),Qe=Symbol.for("react.offscreen"),Ze=Symbol.iterator;function We(m){return m===null||typeof m!="object"?null:(m=Ze&&m[Ze]||m["@@iterator"],typeof m=="function"?m:null)}var Ce=Object.assign,Pe;function it(m){if(Pe===void 0)try{throw Error()}catch(F){var C=F.stack.trim().match(/\n( *(at )?)/);Pe=C&&C[1]||""}return`
`+Pe+m}var vt=!1;function _t(m,C){if(!m||vt)return"";vt=!0;var F=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(C)if(C=function(){throw Error()},Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(wn){var Q=wn}Reflect.construct(m,[],C)}else{try{C.call()}catch(wn){Q=wn}m.call(C.prototype)}else{try{throw Error()}catch(wn){Q=wn}m()}}catch(wn){if(wn&&Q&&typeof wn.stack=="string"){for(var ue=wn.stack.split(`
`),ye=Q.stack.split(`
`),et=ue.length-1,kt=ye.length-1;1<=et&&0<=kt&&ue[et]!==ye[kt];)kt--;for(;1<=et&&0<=kt;et--,kt--)if(ue[et]!==ye[kt]){if(et!==1||kt!==1)do if(et--,kt--,0>kt||ue[et]!==ye[kt]){var Gt=`
`+ue[et].replace(" at new "," at ");return m.displayName&&Gt.includes("<anonymous>")&&(Gt=Gt.replace("<anonymous>",m.displayName)),Gt}while(1<=et&&0<=kt);break}}}finally{vt=!1,Error.prepareStackTrace=F}return(m=m?m.displayName||m.name:"")?it(m):""}function ft(m){switch(m.tag){case 5:return it(m.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 2:case 15:return m=_t(m.type,!1),m;case 11:return m=_t(m.type.render,!1),m;case 1:return m=_t(m.type,!0),m;default:return""}}function Dt(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case W:return"Fragment";case te:return"Portal";case fe:return"Profiler";case oe:return"StrictMode";case we:return"Suspense";case Ke:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case Se:return(m.displayName||"Context")+".Consumer";case he:return(m._context.displayName||"Context")+".Provider";case pe:var C=m.render;return m=m.displayName,m||(m=C.displayName||C.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case ge:return C=m.displayName||null,C!==null?C:Dt(m.type)||"Memo";case st:C=m._payload,m=m._init;try{return Dt(m(C))}catch{}}return null}function Tt(m){var C=m.type;switch(m.tag){case 24:return"Cache";case 9:return(C.displayName||"Context")+".Consumer";case 10:return(C._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=C.render,m=m.displayName||m.name||"",C.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return C;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dt(C);case 8:return C===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C}return null}function Ue(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Re(m){var C=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(C==="checkbox"||C==="radio")}function Be(m){var C=Re(m)?"checked":"value",F=Object.getOwnPropertyDescriptor(m.constructor.prototype,C),Q=""+m[C];if(!m.hasOwnProperty(C)&&typeof F<"u"&&typeof F.get=="function"&&typeof F.set=="function"){var ue=F.get,ye=F.set;return Object.defineProperty(m,C,{configurable:!0,get:function(){return ue.call(this)},set:function(et){Q=""+et,ye.call(this,et)}}),Object.defineProperty(m,C,{enumerable:F.enumerable}),{getValue:function(){return Q},setValue:function(et){Q=""+et},stopTracking:function(){m._valueTracker=null,delete m[C]}}}}function nt(m){m._valueTracker||(m._valueTracker=Be(m))}function Ct(m){if(!m)return!1;var C=m._valueTracker;if(!C)return!0;var F=C.getValue(),Q="";return m&&(Q=Re(m)?m.checked?"true":"false":m.value),m=Q,m!==F?(C.setValue(m),!0):!1}function pt(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function zt(m,C){var F=C.checked;return Ce({},C,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:F??m._wrapperState.initialChecked})}function tn(m,C){var F=C.defaultValue==null?"":C.defaultValue,Q=C.checked!=null?C.checked:C.defaultChecked;F=Ue(C.value!=null?C.value:F),m._wrapperState={initialChecked:Q,initialValue:F,controlled:C.type==="checkbox"||C.type==="radio"?C.checked!=null:C.value!=null}}function Lt(m,C){C=C.checked,C!=null&&ie(m,"checked",C,!1)}function gn(m,C){Lt(m,C);var F=Ue(C.value),Q=C.type;if(F!=null)Q==="number"?(F===0&&m.value===""||m.value!=F)&&(m.value=""+F):m.value!==""+F&&(m.value=""+F);else if(Q==="submit"||Q==="reset"){m.removeAttribute("value");return}C.hasOwnProperty("value")?rn(m,C.type,F):C.hasOwnProperty("defaultValue")&&rn(m,C.type,Ue(C.defaultValue)),C.checked==null&&C.defaultChecked!=null&&(m.defaultChecked=!!C.defaultChecked)}function Nn(m,C,F){if(C.hasOwnProperty("value")||C.hasOwnProperty("defaultValue")){var Q=C.type;if(!(Q!=="submit"&&Q!=="reset"||C.value!==void 0&&C.value!==null))return;C=""+m._wrapperState.initialValue,F||C===m.value||(m.value=C),m.defaultValue=C}F=m.name,F!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,F!==""&&(m.name=F)}function rn(m,C,F){(C!=="number"||pt(m.ownerDocument)!==m)&&(F==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+F&&(m.defaultValue=""+F))}var or=Array.isArray;function Kn(m,C,F,Q){if(m=m.options,C){C={};for(var ue=0;ue<F.length;ue++)C["$"+F[ue]]=!0;for(F=0;F<m.length;F++)ue=C.hasOwnProperty("$"+m[F].value),m[F].selected!==ue&&(m[F].selected=ue),ue&&Q&&(m[F].defaultSelected=!0)}else{for(F=""+Ue(F),C=null,ue=0;ue<m.length;ue++){if(m[ue].value===F){m[ue].selected=!0,Q&&(m[ue].defaultSelected=!0);return}C!==null||m[ue].disabled||(C=m[ue])}C!==null&&(C.selected=!0)}}function pn(m,C){if(C.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ce({},C,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Xn(m,C){var F=C.value;if(F==null){if(F=C.children,C=C.defaultValue,F!=null){if(C!=null)throw Error(t(92));if(or(F)){if(1<F.length)throw Error(t(93));F=F[0]}C=F}C==null&&(C=""),F=C}m._wrapperState={initialValue:Ue(F)}}function Mr(m,C){var F=Ue(C.value),Q=Ue(C.defaultValue);F!=null&&(F=""+F,F!==m.value&&(m.value=F),C.defaultValue==null&&m.defaultValue!==F&&(m.defaultValue=F)),Q!=null&&(m.defaultValue=""+Q)}function Yn(m){var C=m.textContent;C===m._wrapperState.initialValue&&C!==""&&C!==null&&(m.value=C)}function er(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qe(m,C){return m==null||m==="http://www.w3.org/1999/xhtml"?er(C):m==="http://www.w3.org/2000/svg"&&C==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ce,me=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(C,F,Q,ue){MSApp.execUnsafeLocalFunction(function(){return m(C,F,Q,ue)})}:m}(function(m,C){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=C;else{for(ce=ce||document.createElement("div"),ce.innerHTML="<svg>"+C.valueOf().toString()+"</svg>",C=ce.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;C.firstChild;)m.appendChild(C.firstChild)}});function tt(m,C){if(C){var F=m.firstChild;if(F&&F===m.lastChild&&F.nodeType===3){F.nodeValue=C;return}}m.textContent=C}var Et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$t=["Webkit","ms","Moz","O"];Object.keys(Et).forEach(function(m){$t.forEach(function(C){C=C+m.charAt(0).toUpperCase()+m.substring(1),Et[C]=Et[m]})});function on(m,C,F){return C==null||typeof C=="boolean"||C===""?"":F||typeof C!="number"||C===0||Et.hasOwnProperty(m)&&Et[m]?(""+C).trim():C+"px"}function rr(m,C){m=m.style;for(var F in C)if(C.hasOwnProperty(F)){var Q=F.indexOf("--")===0,ue=on(F,C[F],Q);F==="float"&&(F="cssFloat"),Q?m.setProperty(F,ue):m[F]=ue}}var Oe=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function se(m,C){if(C){if(Oe[m]&&(C.children!=null||C.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(C.dangerouslySetInnerHTML!=null){if(C.children!=null)throw Error(t(60));if(typeof C.dangerouslySetInnerHTML!="object"||!("__html"in C.dangerouslySetInnerHTML))throw Error(t(61))}if(C.style!=null&&typeof C.style!="object")throw Error(t(62))}}function _e(m,C){if(m.indexOf("-")===-1)return typeof C.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p=null;function Ne(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var $e=null,rt=null,dt=null;function ct(m){if(m=Ki(m)){if(typeof $e!="function")throw Error(t(280));var C=m.stateNode;C&&(C=Bs(C),$e(m.stateNode,m.type,C))}}function Qt(m){rt?dt?dt.push(m):dt=[m]:rt=m}function Vt(){if(rt){var m=rt,C=dt;if(dt=rt=null,ct(m),C)for(m=0;m<C.length;m++)ct(C[m])}}function Nt(m,C){return m(C)}function wt(){}var Dn=!1;function On(m,C,F){if(Dn)return m(C,F);Dn=!0;try{return Nt(m,C,F)}finally{Dn=!1,(rt!==null||dt!==null)&&(wt(),Vt())}}function pr(m,C){var F=m.stateNode;if(F===null)return null;var Q=Bs(F);if(Q===null)return null;F=Q[C];e:switch(C){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(m=m.type,Q=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!Q;break e;default:m=!1}if(m)return null;if(F&&typeof F!="function")throw Error(t(231,C,typeof F));return F}var Er=!1;if(o)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){Er=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{Er=!1}function Wn(m,C,F,Q,ue,ye,et,kt,Gt){var wn=Array.prototype.slice.call(arguments,3);try{C.apply(F,wn)}catch(cr){this.onError(cr)}}var Ln=!1,Ir=null,Br=!1,Kr=null,Ar={onError:function(m){Ln=!0,Ir=m}};function ho(m,C,F,Q,ue,ye,et,kt,Gt){Ln=!1,Ir=null,Wn.apply(Ar,arguments)}function Ea(m,C,F,Q,ue,ye,et,kt,Gt){if(ho.apply(this,arguments),Ln){if(Ln){var wn=Ir;Ln=!1,Ir=null}else throw Error(t(198));Br||(Br=!0,Kr=wn)}}function Yi(m){var C=m,F=m;if(m.alternate)for(;C.return;)C=C.return;else{m=C;do C=m,C.flags&4098&&(F=C.return),m=C.return;while(m)}return C.tag===3?F:null}function vi(m){if(m.tag===13){var C=m.memoizedState;if(C===null&&(m=m.alternate,m!==null&&(C=m.memoizedState)),C!==null)return C.dehydrated}return null}function so(m){if(Yi(m)!==m)throw Error(t(188))}function So(m){var C=m.alternate;if(!C){if(C=Yi(m),C===null)throw Error(t(188));return C!==m?null:m}for(var F=m,Q=C;;){var ue=F.return;if(ue===null)break;var ye=ue.alternate;if(ye===null){if(Q=ue.return,Q!==null){F=Q;continue}break}if(ue.child===ye.child){for(ye=ue.child;ye;){if(ye===F)return so(ue),m;if(ye===Q)return so(ue),C;ye=ye.sibling}throw Error(t(188))}if(F.return!==Q.return)F=ue,Q=ye;else{for(var et=!1,kt=ue.child;kt;){if(kt===F){et=!0,F=ue,Q=ye;break}if(kt===Q){et=!0,Q=ue,F=ye;break}kt=kt.sibling}if(!et){for(kt=ye.child;kt;){if(kt===F){et=!0,F=ye,Q=ue;break}if(kt===Q){et=!0,Q=ye,F=ue;break}kt=kt.sibling}if(!et)throw Error(t(189))}}if(F.alternate!==Q)throw Error(t(190))}if(F.tag!==3)throw Error(t(188));return F.stateNode.current===F?m:C}function Pi(m){return m=So(m),m!==null?Ua(m):null}function Ua(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var C=Ua(m);if(C!==null)return C;m=m.sibling}return null}var Ba=e.unstable_scheduleCallback,rs=e.unstable_cancelCallback,ca=e.unstable_shouldYield,dl=e.unstable_requestPaint,lo=e.unstable_now,Ku=e.unstable_getCurrentPriorityLevel,iu=e.unstable_ImmediatePriority,ao=e.unstable_UserBlockingPriority,Fr=e.unstable_NormalPriority,Ja=e.unstable_LowPriority,Rs=e.unstable_IdlePriority,oa=null,Ye=null;function Mt(m){if(Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(oa,m,void 0,(m.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:ar,$n=Math.log,dn=Math.LN2;function ar(m){return m>>>=0,m===0?32:31-($n(m)/dn|0)|0}var Ri=64,fo=4194304;function _s(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Gs(m,C){var F=m.pendingLanes;if(F===0)return 0;var Q=0,ue=m.suspendedLanes,ye=m.pingedLanes,et=F&268435455;if(et!==0){var kt=et&~ue;kt!==0?Q=_s(kt):(ye&=et,ye!==0&&(Q=_s(ye)))}else et=F&~ue,et!==0?Q=_s(et):ye!==0&&(Q=_s(ye));if(Q===0)return 0;if(C!==0&&C!==Q&&!(C&ue)&&(ue=Q&-Q,ye=C&-C,ue>=ye||ue===16&&(ye&4194240)!==0))return C;if(Q&4&&(Q|=F&16),C=m.entangledLanes,C!==0)for(m=m.entanglements,C&=Q;0<C;)F=31-yn(C),ue=1<<F,Q|=m[F],C&=~ue;return Q}function bA(m,C){switch(m){case 1:case 2:case 4:return C+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return C+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(m,C){for(var F=m.suspendedLanes,Q=m.pingedLanes,ue=m.expirationTimes,ye=m.pendingLanes;0<ye;){var et=31-yn(ye),kt=1<<et,Gt=ue[et];Gt===-1?(!(kt&F)||kt&Q)&&(ue[et]=bA(kt,C)):Gt<=C&&(m.expiredLanes|=kt),ye&=~kt}}function Mi(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function el(){var m=Ri;return Ri<<=1,!(Ri&4194240)&&(Ri=64),m}function ci(m){for(var C=[],F=0;31>F;F++)C.push(m);return C}function da(m,C,F){m.pendingLanes|=C,C!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,C=31-yn(C),m[C]=F}function aA(m,C){var F=m.pendingLanes&~C;m.pendingLanes=C,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=C,m.mutableReadLanes&=C,m.entangledLanes&=C,C=m.entanglements;var Q=m.eventTimes;for(m=m.expirationTimes;0<F;){var ue=31-yn(F),ye=1<<ue;C[ue]=0,Q[ue]=-1,m[ue]=-1,F&=~ye}}function us(m,C){var F=m.entangledLanes|=C;for(m=m.entanglements;F;){var Q=31-yn(F),ue=1<<Q;ue&C|m[Q]&C&&(m[Q]|=C),F&=~ue}}var Lr=0;function Bi(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var tl,Ds,Eo,Qs,mu,Wl=!1,is=[],Hs=null,po=null,gs=null,Ss=new Map,nl=new Map,Ks=[],Ol="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lA(m,C){switch(m){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Ss.delete(C.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(C.pointerId)}}function Hi(m,C,F,Q,ue,ye){return m===null||m.nativeEvent!==ye?(m={blockedOn:C,domEventName:F,eventSystemFlags:Q,nativeEvent:ye,targetContainers:[ue]},C!==null&&(C=Ki(C),C!==null&&Ds(C)),m):(m.eventSystemFlags|=Q,C=m.targetContainers,ue!==null&&C.indexOf(ue)===-1&&C.push(ue),m)}function ou(m,C,F,Q,ue){switch(C){case"focusin":return Hs=Hi(Hs,m,C,F,Q,ue),!0;case"dragenter":return po=Hi(po,m,C,F,Q,ue),!0;case"mouseover":return gs=Hi(gs,m,C,F,Q,ue),!0;case"pointerover":var ye=ue.pointerId;return Ss.set(ye,Hi(Ss.get(ye)||null,m,C,F,Q,ue)),!0;case"gotpointercapture":return ye=ue.pointerId,nl.set(ye,Hi(nl.get(ye)||null,m,C,F,Q,ue)),!0}return!1}function zi(m){var C=Oo(m.target);if(C!==null){var F=Yi(C);if(F!==null){if(C=F.tag,C===13){if(C=vi(F),C!==null){m.blockedOn=C,mu(m.priority,function(){Eo(F)});return}}else if(C===3&&F.stateNode.current.memoizedState.isDehydrated){m.blockedOn=F.tag===3?F.stateNode.containerInfo:null;return}}}m.blockedOn=null}function ei(m){if(m.blockedOn!==null)return!1;for(var C=m.targetContainers;0<C.length;){var F=ai(m.domEventName,m.eventSystemFlags,C[0],m.nativeEvent);if(F===null){F=m.nativeEvent;var Q=new F.constructor(F.type,F);p=Q,F.target.dispatchEvent(Q),p=null}else return C=Ki(F),C!==null&&Ds(C),m.blockedOn=F,!1;C.shift()}return!0}function su(m,C,F){ei(m)&&F.delete(C)}function Wi(){Wl=!1,Hs!==null&&ei(Hs)&&(Hs=null),po!==null&&ei(po)&&(po=null),gs!==null&&ei(gs)&&(gs=null),Ss.forEach(su),nl.forEach(su)}function uo(m,C){m.blockedOn===C&&(m.blockedOn=null,Wl||(Wl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wi)))}function Di(m){function C(ue){return uo(ue,m)}if(0<is.length){uo(is[0],m);for(var F=1;F<is.length;F++){var Q=is[F];Q.blockedOn===m&&(Q.blockedOn=null)}}for(Hs!==null&&uo(Hs,m),po!==null&&uo(po,m),gs!==null&&uo(gs,m),Ss.forEach(C),nl.forEach(C),F=0;F<Ks.length;F++)Q=Ks[F],Q.blockedOn===m&&(Q.blockedOn=null);for(;0<Ks.length&&(F=Ks[0],F.blockedOn===null);)zi(F),F.blockedOn===null&&Ks.shift()}var ee=J.ReactCurrentBatchConfig,Ie=!0;function at(m,C,F,Q){var ue=Lr,ye=ee.transition;ee.transition=null;try{Lr=1,kr(m,C,F,Q)}finally{Lr=ue,ee.transition=ye}}function Ht(m,C,F,Q){var ue=Lr,ye=ee.transition;ee.transition=null;try{Lr=4,kr(m,C,F,Q)}finally{Lr=ue,ee.transition=ye}}function kr(m,C,F,Q){if(Ie){var ue=ai(m,C,F,Q);if(ue===null)rh(m,C,Q,Vn,F),lA(m,Q);else if(ou(ue,m,C,F,Q))Q.stopPropagation();else if(lA(m,Q),C&4&&-1<Ol.indexOf(m)){for(;ue!==null;){var ye=Ki(ue);if(ye!==null&&tl(ye),ye=ai(m,C,F,Q),ye===null&&rh(m,C,Q,Vn,F),ye===ue)break;ue=ye}ue!==null&&Q.stopPropagation()}else rh(m,C,Q,null,F)}}var Vn=null;function ai(m,C,F,Q){if(Vn=null,m=Ne(Q),m=Oo(m),m!==null)if(C=Yi(m),C===null)m=null;else if(F=C.tag,F===13){if(m=vi(C),m!==null)return m;m=null}else if(F===3){if(C.stateNode.current.memoizedState.isDehydrated)return C.tag===3?C.stateNode.containerInfo:null;m=null}else C!==m&&(m=null);return Vn=m,null}function di(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ku()){case iu:return 1;case ao:return 4;case Fr:case Ja:return 16;case Rs:return 536870912;default:return 16}default:return 16}}var Cr=null,Tr=null,Ci=null;function Bo(){if(Ci)return Ci;var m,C=Tr,F=C.length,Q,ue="value"in Cr?Cr.value:Cr.textContent,ye=ue.length;for(m=0;m<F&&C[m]===ue[m];m++);var et=F-m;for(Q=1;Q<=et&&C[F-Q]===ue[ye-Q];Q++);return Ci=ue.slice(m,1<Q?1-Q:void 0)}function Ti(m){var C=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&C===13&&(m=13)):m=C,m===10&&(m=13),32<=m||m===13?m:0}function Yr(){return!0}function Zi(){return!1}function Xi(m){function C(F,Q,ue,ye,et){this._reactName=F,this._targetInst=ue,this.type=Q,this.nativeEvent=ye,this.target=et,this.currentTarget=null;for(var kt in m)m.hasOwnProperty(kt)&&(F=m[kt],this[kt]=F?F(ye):ye[kt]);return this.isDefaultPrevented=(ye.defaultPrevented!=null?ye.defaultPrevented:ye.returnValue===!1)?Yr:Zi,this.isPropagationStopped=Zi,this}return Ce(C.prototype,{preventDefault:function(){this.defaultPrevented=!0;var F=this.nativeEvent;F&&(F.preventDefault?F.preventDefault():typeof F.returnValue!="unknown"&&(F.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var F=this.nativeEvent;F&&(F.stopPropagation?F.stopPropagation():typeof F.cancelBubble!="unknown"&&(F.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),C}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=Xi(As),za=Ce({},As,{view:0,detail:0}),gu=Xi(za),Zs,mc,Oa,hl=Ce({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eh,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Oa&&(Oa&&m.type==="mousemove"?(Zs=m.screenX-Oa.screenX,mc=m.screenY-Oa.screenY):mc=Zs=0,Oa=m),Zs)},movementY:function(m){return"movementY"in m?m.movementY:mc}}),dd=Xi(hl),Fu=Ce({},hl,{dataTransfer:0}),Lu=Xi(Fu),Sh=Ce({},za,{relatedTarget:0}),Es=Xi(Sh),Uu=Ce({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),hd=Xi(Uu),Mp=Ce({},As,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),uA=Xi(Mp),Hd=Ce({},As,{data:0}),jc=Xi(Hd),Sp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xs(m){var C=this.nativeEvent;return C.getModifierState?C.getModifierState(m):(m=gc[m])?!!C[m]:!1}function Eh(){return Xs}var sf=Ce({},za,{key:function(m){if(m.key){var C=Sp[m.key]||m.key;if(C!=="Unidentified")return C}return m.type==="keypress"?(m=Ti(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?zf[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eh,charCode:function(m){return m.type==="keypress"?Ti(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Ti(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),fd=Xi(sf),af=Ce({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pd=Xi(af),yc=Ce({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eh}),Bh=Xi(yc),Oh=Ce({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),md=Xi(Oh),pm=Ce({},hl,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Nc=Xi(pm),yu=[9,13,27,32],Ih=o&&"CompositionEvent"in window,vu=null;o&&"documentMode"in document&&(vu=document.documentMode);var AA=o&&"TextEvent"in window&&!vu,Wc=o&&(!Ih||vu&&8<vu&&11>=vu),Zd=" ",lf=!1;function au(m,C){switch(m){case"keyup":return yu.indexOf(C.keyCode)!==-1;case"keydown":return C.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Il(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var YA=!1;function Gc(m,C){switch(m){case"compositionend":return Il(C);case"keypress":return C.which!==32?null:(lf=!0,Zd);case"textInput":return m=C.data,m===Zd&&lf?null:m;default:return null}}function uf(m,C){if(YA)return m==="compositionend"||!Ih&&au(m,C)?(m=Bo(),Ci=Tr=Cr=null,YA=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(C.ctrlKey||C.altKey||C.metaKey)||C.ctrlKey&&C.altKey){if(C.char&&1<C.char.length)return C.char;if(C.which)return String.fromCharCode(C.which)}return null;case"compositionend":return Wc&&C.locale!=="ko"?null:C.data;default:return null}}var jf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gd(m){var C=m&&m.nodeName&&m.nodeName.toLowerCase();return C==="input"?!!jf[m.type]:C==="textarea"}function xA(m,C,F,Q){Qt(Q),C=xc(C,"onChange"),0<C.length&&(F=new va("onChange","change",null,F,Q),m.push({event:F,listeners:C}))}var rl=null,kl=null;function Vo(m){nh(m,0)}function kh(m){var C=Vr(m);if(Ct(C))return m}function mm(m,C){if(m==="change")return C}var Qc=!1;if(o){var zu;if(o){var Xd="oninput"in document;if(!Xd){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),Xd=typeof Jd.oninput=="function"}zu=Xd}else zu=!1;Qc=zu&&(!document.documentMode||9<document.documentMode)}function vc(){rl&&(rl.detachEvent("onpropertychange",eh),kl=rl=null)}function eh(m){if(m.propertyName==="value"&&kh(kl)){var C=[];xA(C,kl,m,Ne(m)),On(Vo,C)}}function Af(m,C,F){m==="focusin"?(vc(),rl=C,kl=F,rl.attachEvent("onpropertychange",eh)):m==="focusout"&&vc()}function Cc(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return kh(kl)}function Cu(m,C){if(m==="click")return kh(C)}function Zt(m,C){if(m==="input"||m==="change")return kh(C)}function Rn(m,C){return m===C&&(m!==0||1/m===1/C)||m!==m&&C!==C}var ln=typeof Object.is=="function"?Object.is:Rn;function zr(m,C){if(ln(m,C))return!0;if(typeof m!="object"||m===null||typeof C!="object"||C===null)return!1;var F=Object.keys(m),Q=Object.keys(C);if(F.length!==Q.length)return!1;for(Q=0;Q<F.length;Q++){var ue=F[Q];if(!d.call(C,ue)||!ln(m[ue],C[ue]))return!1}return!0}function _i(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function bo(m,C){var F=_i(m);m=0;for(var Q;F;){if(F.nodeType===3){if(Q=m+F.textContent.length,m<=C&&Q>=C)return{node:F,offset:C-m};m=Q}e:{for(;F;){if(F.nextSibling){F=F.nextSibling;break e}F=F.parentNode}F=void 0}F=_i(F)}}function sa(m,C){return m&&C?m===C?!0:m&&m.nodeType===3?!1:C&&C.nodeType===3?sa(m,C.parentNode):"contains"in m?m.contains(C):m.compareDocumentPosition?!!(m.compareDocumentPosition(C)&16):!1:!1}function Ho(){for(var m=window,C=pt();C instanceof m.HTMLIFrameElement;){try{var F=typeof C.contentWindow.location.href=="string"}catch{F=!1}if(F)m=C.contentWindow;else break;C=pt(m.document)}return C}function $A(m){var C=m&&m.nodeName&&m.nodeName.toLowerCase();return C&&(C==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||C==="textarea"||m.contentEditable==="true")}function Ep(m){var C=Ho(),F=m.focusedElem,Q=m.selectionRange;if(C!==F&&F&&F.ownerDocument&&sa(F.ownerDocument.documentElement,F)){if(Q!==null&&$A(F)){if(C=Q.start,m=Q.end,m===void 0&&(m=C),"selectionStart"in F)F.selectionStart=C,F.selectionEnd=Math.min(m,F.value.length);else if(m=(C=F.ownerDocument||document)&&C.defaultView||window,m.getSelection){m=m.getSelection();var ue=F.textContent.length,ye=Math.min(Q.start,ue);Q=Q.end===void 0?ye:Math.min(Q.end,ue),!m.extend&&ye>Q&&(ue=Q,Q=ye,ye=ue),ue=bo(F,ye);var et=bo(F,Q);ue&&et&&(m.rangeCount!==1||m.anchorNode!==ue.node||m.anchorOffset!==ue.offset||m.focusNode!==et.node||m.focusOffset!==et.offset)&&(C=C.createRange(),C.setStart(ue.node,ue.offset),m.removeAllRanges(),ye>Q?(m.addRange(C),m.extend(et.node,et.offset)):(C.setEnd(et.node,et.offset),m.addRange(C)))}}for(C=[],m=F;m=m.parentNode;)m.nodeType===1&&C.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<C.length;F++)m=C[F],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Tl=o&&"documentMode"in document&&11>=document.documentMode,_u=null,VA=null,Pl=null,Gi=!1;function HA(m,C,F){var Q=F.window===F?F.document:F.nodeType===9?F:F.ownerDocument;Gi||_u==null||_u!==pt(Q)||(Q=_u,"selectionStart"in Q&&$A(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),Pl&&zr(Pl,Q)||(Pl=Q,Q=xc(VA,"onSelect"),0<Q.length&&(C=new va("onSelect","select",null,C,F),m.push({event:C,listeners:Q}),C.target=_u)))}function zo(m,C){var F={};return F[m.toLowerCase()]=C.toLowerCase(),F["Webkit"+m]="webkit"+C,F["Moz"+m]="moz"+C,F}var qc={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionend:zo("Transition","TransitionEnd")},ZA={},wA={};o&&(wA=document.createElement("div").style,"AnimationEvent"in window||(delete qc.animationend.animation,delete qc.animationiteration.animation,delete qc.animationstart.animation),"TransitionEvent"in window||delete qc.transitionend.transition);function cA(m){if(ZA[m])return ZA[m];if(!qc[m])return m;var C=qc[m],F;for(F in C)if(C.hasOwnProperty(F)&&F in wA)return ZA[m]=C[F];return m}var Rl=cA("animationend"),_c=cA("animationiteration"),bu=cA("animationstart"),Gl=cA("transitionend"),Yc=new Map,th="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(m,C){Yc.set(m,C),s(C,[m])}for(var yd=0;yd<th.length;yd++){var bc=th[yd],XA=bc.toLowerCase(),cf=bc[0].toUpperCase()+bc.slice(1);ja(XA,"on"+cf)}ja(Rl,"onAnimationEnd"),ja(_c,"onAnimationIteration"),ja(bu,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(Gl,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var MA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JA=new Set("cancel close invalid load scroll toggle".split(" ").concat(MA));function $c(m,C,F){var Q=m.type||"unknown-event";m.currentTarget=F,Ea(Q,C,void 0,m),m.currentTarget=null}function nh(m,C){C=(C&4)!==0;for(var F=0;F<m.length;F++){var Q=m[F],ue=Q.event;Q=Q.listeners;e:{var ye=void 0;if(C)for(var et=Q.length-1;0<=et;et--){var kt=Q[et],Gt=kt.instance,wn=kt.currentTarget;if(kt=kt.listener,Gt!==ye&&ue.isPropagationStopped())break e;$c(ue,kt,wn),ye=Gt}else for(et=0;et<Q.length;et++){if(kt=Q[et],Gt=kt.instance,wn=kt.currentTarget,kt=kt.listener,Gt!==ye&&ue.isPropagationStopped())break e;$c(ue,kt,wn),ye=Gt}}}if(Br)throw m=Kr,Br=!1,Kr=null,m}function Zo(m,C){var F=C[Xc];F===void 0&&(F=C[Xc]=new Set);var Q=m+"__bubble";F.has(Q)||(Hc(C,m,2,!1),F.add(Q))}function Vc(m,C,F){var Q=0;C&&(Q|=4),Hc(F,m,Q,C)}var ec="_reactListening"+Math.random().toString(36).slice(2);function ju(m){if(!m[ec]){m[ec]=!0,r.forEach(function(F){F!=="selectionchange"&&(JA.has(F)||Vc(F,!1,m),Vc(F,!0,m))});var C=m.nodeType===9?m:m.ownerDocument;C===null||C[ec]||(C[ec]=!0,Vc("selectionchange",!1,C))}}function Hc(m,C,F,Q){switch(di(C)){case 1:var ue=at;break;case 4:ue=Ht;break;default:ue=kr}F=ue.bind(null,C,F,m),ue=void 0,!Er||C!=="touchstart"&&C!=="touchmove"&&C!=="wheel"||(ue=!0),Q?ue!==void 0?m.addEventListener(C,F,{capture:!0,passive:ue}):m.addEventListener(C,F,!0):ue!==void 0?m.addEventListener(C,F,{passive:ue}):m.addEventListener(C,F,!1)}function rh(m,C,F,Q,ue){var ye=Q;if(!(C&1)&&!(C&2)&&Q!==null)e:for(;;){if(Q===null)return;var et=Q.tag;if(et===3||et===4){var kt=Q.stateNode.containerInfo;if(kt===ue||kt.nodeType===8&&kt.parentNode===ue)break;if(et===4)for(et=Q.return;et!==null;){var Gt=et.tag;if((Gt===3||Gt===4)&&(Gt=et.stateNode.containerInfo,Gt===ue||Gt.nodeType===8&&Gt.parentNode===ue))return;et=et.return}for(;kt!==null;){if(et=Oo(kt),et===null)return;if(Gt=et.tag,Gt===5||Gt===6){Q=ye=et;continue e}kt=kt.parentNode}}Q=Q.return}On(function(){var wn=ye,cr=Ne(F),gr=[];e:{var tr=Yc.get(m);if(tr!==void 0){var jr=va,oi=m;switch(m){case"keypress":if(Ti(F)===0)break e;case"keydown":case"keyup":jr=fd;break;case"focusin":oi="focus",jr=Es;break;case"focusout":oi="blur",jr=Es;break;case"beforeblur":case"afterblur":jr=Es;break;case"click":if(F.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jr=dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jr=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jr=Bh;break;case Rl:case _c:case bu:jr=hd;break;case Gl:jr=md;break;case"scroll":jr=gu;break;case"wheel":jr=Nc;break;case"copy":case"cut":case"paste":jr=uA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jr=pd}var ui=(C&4)!==0,ll=!ui&&m==="scroll",An=ui?tr!==null?tr+"Capture":null:tr;ui=[];for(var en=wn,hn;en!==null;){hn=en;var _r=hn.stateNode;if(hn.tag===5&&_r!==null&&(hn=_r,An!==null&&(_r=pr(en,An),_r!=null&&ui.push(Zc(en,_r,hn)))),ll)break;en=en.return}0<ui.length&&(tr=new jr(tr,oi,null,F,cr),gr.push({event:tr,listeners:ui}))}}if(!(C&7)){e:{if(tr=m==="mouseover"||m==="pointerover",jr=m==="mouseout"||m==="pointerout",tr&&F!==p&&(oi=F.relatedTarget||F.fromElement)&&(Oo(oi)||oi[xu]))break e;if((jr||tr)&&(tr=cr.window===cr?cr:(tr=cr.ownerDocument)?tr.defaultView||tr.parentWindow:window,jr?(oi=F.relatedTarget||F.toElement,jr=wn,oi=oi?Oo(oi):null,oi!==null&&(ll=Yi(oi),oi!==ll||oi.tag!==5&&oi.tag!==6)&&(oi=null)):(jr=null,oi=wn),jr!==oi)){if(ui=dd,_r="onMouseLeave",An="onMouseEnter",en="mouse",(m==="pointerout"||m==="pointerover")&&(ui=pd,_r="onPointerLeave",An="onPointerEnter",en="pointer"),ll=jr==null?tr:Vr(jr),hn=oi==null?tr:Vr(oi),tr=new ui(_r,en+"leave",jr,F,cr),tr.target=ll,tr.relatedTarget=hn,_r=null,Oo(cr)===wn&&(ui=new ui(An,en+"enter",oi,F,cr),ui.target=hn,ui.relatedTarget=ll,_r=ui),ll=_r,jr&&oi)t:{for(ui=jr,An=oi,en=0,hn=ui;hn;hn=cs(hn))en++;for(hn=0,_r=An;_r;_r=cs(_r))hn++;for(;0<en-hn;)ui=cs(ui),en--;for(;0<hn-en;)An=cs(An),hn--;for(;en--;){if(ui===An||An!==null&&ui===An.alternate)break t;ui=cs(ui),An=cs(An)}ui=null}else ui=null;jr!==null&&jo(gr,tr,jr,ui,!1),oi!==null&&ll!==null&&jo(gr,ll,oi,ui,!0)}}e:{if(tr=wn?Vr(wn):window,jr=tr.nodeName&&tr.nodeName.toLowerCase(),jr==="select"||jr==="input"&&tr.type==="file")var ri=mm;else if(gd(tr))if(Qc)ri=Zt;else{ri=Cc;var ki=Af}else(jr=tr.nodeName)&&jr.toLowerCase()==="input"&&(tr.type==="checkbox"||tr.type==="radio")&&(ri=Cu);if(ri&&(ri=ri(m,wn))){xA(gr,ri,F,cr);break e}ki&&ki(m,tr,wn),m==="focusout"&&(ki=tr._wrapperState)&&ki.controlled&&tr.type==="number"&&rn(tr,"number",tr.value)}switch(ki=wn?Vr(wn):window,m){case"focusin":(gd(ki)||ki.contentEditable==="true")&&(_u=ki,VA=wn,Pl=null);break;case"focusout":Pl=VA=_u=null;break;case"mousedown":Gi=!0;break;case"contextmenu":case"mouseup":case"dragend":Gi=!1,HA(gr,F,cr);break;case"selectionchange":if(Tl)break;case"keydown":case"keyup":HA(gr,F,cr)}var Ii;if(Ih)e:{switch(m){case"compositionstart":var ji="onCompositionStart";break e;case"compositionend":ji="onCompositionEnd";break e;case"compositionupdate":ji="onCompositionUpdate";break e}ji=void 0}else YA?au(m,F)&&(ji="onCompositionEnd"):m==="keydown"&&F.keyCode===229&&(ji="onCompositionStart");ji&&(Wc&&F.locale!=="ko"&&(YA||ji!=="onCompositionStart"?ji==="onCompositionEnd"&&YA&&(Ii=Bo()):(Cr=cr,Tr="value"in Cr?Cr.value:Cr.textContent,YA=!0)),ki=xc(wn,ji),0<ki.length&&(ji=new jc(ji,m,null,F,cr),gr.push({event:ji,listeners:ki}),Ii?ji.data=Ii:(Ii=Il(F),Ii!==null&&(ji.data=Ii)))),(Ii=AA?Gc(m,F):uf(m,F))&&(wn=xc(wn,"onBeforeInput"),0<wn.length&&(cr=new jc("onBeforeInput","beforeinput",null,F,cr),gr.push({event:cr,listeners:wn}),cr.data=Ii))}nh(gr,C)})}function Zc(m,C,F){return{instance:m,listener:C,currentTarget:F}}function xc(m,C){for(var F=C+"Capture",Q=[];m!==null;){var ue=m,ye=ue.stateNode;ue.tag===5&&ye!==null&&(ue=ye,ye=pr(m,F),ye!=null&&Q.unshift(Zc(m,ye,ue)),ye=pr(m,C),ye!=null&&Q.push(Zc(m,ye,ue))),m=m.return}return Q}function cs(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function jo(m,C,F,Q,ue){for(var ye=C._reactName,et=[];F!==null&&F!==Q;){var kt=F,Gt=kt.alternate,wn=kt.stateNode;if(Gt!==null&&Gt===Q)break;kt.tag===5&&wn!==null&&(kt=wn,ue?(Gt=pr(F,ye),Gt!=null&&et.unshift(Zc(F,Gt,kt))):ue||(Gt=pr(F,ye),Gt!=null&&et.push(Zc(F,Gt,kt)))),F=F.return}et.length!==0&&m.push({event:C,listeners:et})}var ds=/\r\n?/g,Nf=/\u0000|\uFFFD/g;function vd(m){return(typeof m=="string"?m:""+m).replace(ds,`
`).replace(Nf,"")}function Cd(m,C,F){if(C=vd(C),vd(m)!==C&&F)throw Error(t(425))}function Nu(){}var tc=null,Ql=null;function SA(m,C){return m==="textarea"||m==="noscript"||typeof C.children=="string"||typeof C.children=="number"||typeof C.dangerouslySetInnerHTML=="object"&&C.dangerouslySetInnerHTML!==null&&C.dangerouslySetInnerHTML.__html!=null}var fl=typeof setTimeout=="function"?setTimeout:void 0,nc=typeof clearTimeout=="function"?clearTimeout:void 0,Wu=typeof Promise=="function"?Promise:void 0,_d=typeof queueMicrotask=="function"?queueMicrotask:typeof Wu<"u"?function(m){return Wu.resolve(null).then(m).catch(Gu)}:fl;function Gu(m){setTimeout(function(){throw m})}function ih(m,C){var F=C,Q=0;do{var ue=F.nextSibling;if(m.removeChild(F),ue&&ue.nodeType===8)if(F=ue.data,F==="/$"){if(Q===0){m.removeChild(ue),Di(C);return}Q--}else F!=="$"&&F!=="$?"&&F!=="$!"||Q++;F=ue}while(F);Di(C)}function rc(m){for(;m!=null;m=m.nextSibling){var C=m.nodeType;if(C===1||C===3)break;if(C===8){if(C=m.data,C==="$"||C==="$!"||C==="$?")break;if(C==="/$")return null}}return m}function Qu(m){m=m.previousSibling;for(var C=0;m;){if(m.nodeType===8){var F=m.data;if(F==="$"||F==="$!"||F==="$?"){if(C===0)return m;C--}else F==="/$"&&C++}m=m.previousSibling}return null}var qu=Math.random().toString(36).slice(2),EA="__reactFiber$"+qu,wc="__reactProps$"+qu,xu="__reactContainer$"+qu,Xc="__reactEvents$"+qu,ot="__reactListeners$"+qu,Na="__reactHandles$"+qu;function Oo(m){var C=m[EA];if(C)return C;for(var F=m.parentNode;F;){if(C=F[xu]||F[EA]){if(F=C.alternate,C.child!==null||F!==null&&F.child!==null)for(m=Qu(m);m!==null;){if(F=m[EA])return F;m=Qu(m)}return C}m=F,F=m.parentNode}return null}function Ki(m){return m=m[EA]||m[xu],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function Vr(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function Bs(m){return m[wc]||null}var bd=[],oh=-1;function Ia(m){return{current:m}}function qs(m){0>oh||(m.current=bd[oh],bd[oh]=null,oh--)}function bs(m,C){oh++,bd[oh]=m.current,m.current=C}var dA={},Os=Ia(dA),vr=Ia(!1),Ca=dA;function Jc(m,C){var F=m.type.contextTypes;if(!F)return dA;var Q=m.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===C)return Q.__reactInternalMemoizedMaskedChildContext;var ue={},ye;for(ye in F)ue[ye]=C[ye];return Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=C,m.__reactInternalMemoizedMaskedChildContext=ue),ue}function ka(m){return m=m.childContextTypes,m!=null}function ic(){qs(vr),qs(Os)}function xd(m,C,F){if(Os.current!==dA)throw Error(t(168));bs(Os,C),bs(vr,F)}function wd(m,C,F){var Q=m.stateNode;if(C=C.childContextTypes,typeof Q.getChildContext!="function")return F;Q=Q.getChildContext();for(var ue in Q)if(!(ue in C))throw Error(t(108,Tt(m)||"Unknown",ue));return Ce({},F,Q)}function Si(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||dA,Ca=Os.current,bs(Os,m),bs(vr,vr.current),!0}function Md(m,C,F){var Q=m.stateNode;if(!Q)throw Error(t(169));F?(m=wd(m,C,Ca),Q.__reactInternalMemoizedMergedChildContext=m,qs(vr),qs(Os),bs(Os,m)):qs(vr),bs(vr,F)}var ql=null,Sd=!1,Ed=!1;function BA(m){ql===null?ql=[m]:ql.push(m)}function oc(m){Sd=!0,BA(m)}function hA(){if(!Ed&&ql!==null){Ed=!0;var m=0,C=Lr;try{var F=ql;for(Lr=1;m<F.length;m++){var Q=F[m];do Q=Q(!0);while(Q!==null)}ql=null,Sd=!1}catch(ue){throw ql!==null&&(ql=ql.slice(m+1)),Ba(iu,hA),ue}finally{Lr=C,Ed=!1}}return null}var Mc=[],Is=0,xo=null,wu=0,Wa=[],Fs=0,Xo=null,lu=1,Yu="";function Sc(m,C){Mc[Is++]=wu,Mc[Is++]=xo,xo=m,wu=C}function sh(m,C,F){Wa[Fs++]=lu,Wa[Fs++]=Yu,Wa[Fs++]=Xo,Xo=m;var Q=lu;m=Yu;var ue=32-yn(Q)-1;Q&=~(1<<ue),F+=1;var ye=32-yn(C)+ue;if(30<ye){var et=ue-ue%5;ye=(Q&(1<<et)-1).toString(32),Q>>=et,ue-=et,lu=1<<32-yn(C)+ue|F<<ue|Q,Yu=ye+m}else lu=1<<ye|F<<ue|Q,Yu=m}function OA(m){m.return!==null&&(Sc(m,1),sh(m,1,0))}function Ec(m){for(;m===xo;)xo=Mc[--Is],Mc[Is]=null,wu=Mc[--Is],Mc[Is]=null;for(;m===Xo;)Xo=Wa[--Fs],Wa[Fs]=null,Yu=Wa[--Fs],Wa[Fs]=null,lu=Wa[--Fs],Wa[Fs]=null}var ys=null,ha=null,yr=!1,Zr=null;function $u(m,C){var F=eA(5,null,null,0);F.elementType="DELETED",F.stateNode=C,F.return=m,C=m.deletions,C===null?(m.deletions=[F],m.flags|=16):C.push(F)}function sc(m,C){switch(m.tag){case 5:var F=m.type;return C=C.nodeType!==1||F.toLowerCase()!==C.nodeName.toLowerCase()?null:C,C!==null?(m.stateNode=C,ys=m,ha=rc(C.firstChild),!0):!1;case 6:return C=m.pendingProps===""||C.nodeType!==3?null:C,C!==null?(m.stateNode=C,ys=m,ha=null,!0):!1;case 13:return C=C.nodeType!==8?null:C,C!==null?(F=Xo!==null?{id:lu,overflow:Yu}:null,m.memoizedState={dehydrated:C,treeContext:F,retryLane:1073741824},F=eA(18,null,null,0),F.stateNode=C,F.return=m,m.child=F,ys=m,ha=null,!0):!1;default:return!1}}function Mu(m){return(m.mode&1)!==0&&(m.flags&128)===0}function xs(m){if(yr){var C=ha;if(C){var F=C;if(!sc(m,C)){if(Mu(m))throw Error(t(418));C=rc(F.nextSibling);var Q=ys;C&&sc(m,C)?$u(Q,F):(m.flags=m.flags&-4097|2,yr=!1,ys=m)}}else{if(Mu(m))throw Error(t(418));m.flags=m.flags&-4097|2,yr=!1,ys=m}}}function Wf(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;ys=m}function uu(m){if(m!==ys)return!1;if(!yr)return Wf(m),yr=!0,!1;var C;if((C=m.tag!==3)&&!(C=m.tag!==5)&&(C=m.type,C=C!=="head"&&C!=="body"&&!SA(m.type,m.memoizedProps)),C&&(C=ha)){if(Mu(m))throw Gf(),Error(t(418));for(;C;)$u(m,C),C=rc(C.nextSibling)}if(Wf(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,C=0;m;){if(m.nodeType===8){var F=m.data;if(F==="/$"){if(C===0){ha=rc(m.nextSibling);break e}C--}else F!=="$"&&F!=="$!"&&F!=="$?"||C++}m=m.nextSibling}ha=null}}else ha=ys?rc(m.stateNode.nextSibling):null;return!0}function Gf(){for(var m=ha;m;)m=rc(m.nextSibling)}function Su(){ha=ys=null,yr=!1}function Ro(m){Zr===null?Zr=[m]:Zr.push(m)}var ks=J.ReactCurrentBatchConfig;function ah(m,C,F){if(m=F.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(F._owner){if(F=F._owner,F){if(F.tag!==1)throw Error(t(309));var Q=F.stateNode}if(!Q)throw Error(t(147,m));var ue=Q,ye=""+m;return C!==null&&C.ref!==null&&typeof C.ref=="function"&&C.ref._stringRef===ye?C.ref:(C=function(et){var kt=ue.refs;et===null?delete kt[ye]:kt[ye]=et},C._stringRef=ye,C)}if(typeof m!="string")throw Error(t(284));if(!F._owner)throw Error(t(290,m))}return m}function IA(m,C){throw m=Object.prototype.toString.call(C),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":m))}function lh(m){var C=m._init;return C(m._payload)}function kA(m){function C(An,en){if(m){var hn=An.deletions;hn===null?(An.deletions=[en],An.flags|=16):hn.push(en)}}function F(An,en){if(!m)return null;for(;en!==null;)C(An,en),en=en.sibling;return null}function Q(An,en){for(An=new Map;en!==null;)en.key!==null?An.set(en.key,en):An.set(en.index,en),en=en.sibling;return An}function ue(An,en){return An=Ud(An,en),An.index=0,An.sibling=null,An}function ye(An,en,hn){return An.index=hn,m?(hn=An.alternate,hn!==null?(hn=hn.index,hn<en?(An.flags|=2,en):hn):(An.flags|=2,en)):(An.flags|=1048576,en)}function et(An){return m&&An.alternate===null&&(An.flags|=2),An}function kt(An,en,hn,_r){return en===null||en.tag!==6?(en=eg(hn,An.mode,_r),en.return=An,en):(en=ue(en,hn),en.return=An,en)}function Gt(An,en,hn,_r){var ri=hn.type;return ri===W?cr(An,en,hn.props.children,_r,hn.key):en!==null&&(en.elementType===ri||typeof ri=="object"&&ri!==null&&ri.$$typeof===st&&lh(ri)===en.type)?(_r=ue(en,hn.props),_r.ref=ah(An,en,hn),_r.return=An,_r):(_r=c0(hn.type,hn.key,hn.props,null,An.mode,_r),_r.ref=ah(An,en,hn),_r.return=An,_r)}function wn(An,en,hn,_r){return en===null||en.tag!==4||en.stateNode.containerInfo!==hn.containerInfo||en.stateNode.implementation!==hn.implementation?(en=d0(hn,An.mode,_r),en.return=An,en):(en=ue(en,hn.children||[]),en.return=An,en)}function cr(An,en,hn,_r,ri){return en===null||en.tag!==7?(en=bf(hn,An.mode,_r,ri),en.return=An,en):(en=ue(en,hn),en.return=An,en)}function gr(An,en,hn){if(typeof en=="string"&&en!==""||typeof en=="number")return en=eg(""+en,An.mode,hn),en.return=An,en;if(typeof en=="object"&&en!==null){switch(en.$$typeof){case $:return hn=c0(en.type,en.key,en.props,null,An.mode,hn),hn.ref=ah(An,null,en),hn.return=An,hn;case te:return en=d0(en,An.mode,hn),en.return=An,en;case st:var _r=en._init;return gr(An,_r(en._payload),hn)}if(or(en)||We(en))return en=bf(en,An.mode,hn,null),en.return=An,en;IA(An,en)}return null}function tr(An,en,hn,_r){var ri=en!==null?en.key:null;if(typeof hn=="string"&&hn!==""||typeof hn=="number")return ri!==null?null:kt(An,en,""+hn,_r);if(typeof hn=="object"&&hn!==null){switch(hn.$$typeof){case $:return hn.key===ri?Gt(An,en,hn,_r):null;case te:return hn.key===ri?wn(An,en,hn,_r):null;case st:return ri=hn._init,tr(An,en,ri(hn._payload),_r)}if(or(hn)||We(hn))return ri!==null?null:cr(An,en,hn,_r,null);IA(An,hn)}return null}function jr(An,en,hn,_r,ri){if(typeof _r=="string"&&_r!==""||typeof _r=="number")return An=An.get(hn)||null,kt(en,An,""+_r,ri);if(typeof _r=="object"&&_r!==null){switch(_r.$$typeof){case $:return An=An.get(_r.key===null?hn:_r.key)||null,Gt(en,An,_r,ri);case te:return An=An.get(_r.key===null?hn:_r.key)||null,wn(en,An,_r,ri);case st:var ki=_r._init;return jr(An,en,hn,ki(_r._payload),ri)}if(or(_r)||We(_r))return An=An.get(hn)||null,cr(en,An,_r,ri,null);IA(en,_r)}return null}function oi(An,en,hn,_r){for(var ri=null,ki=null,Ii=en,ji=en=0,Ls=null;Ii!==null&&ji<hn.length;ji++){Ii.index>ji?(Ls=Ii,Ii=null):Ls=Ii.sibling;var es=tr(An,Ii,hn[ji],_r);if(es===null){Ii===null&&(Ii=Ls);break}m&&Ii&&es.alternate===null&&C(An,Ii),en=ye(es,en,ji),ki===null?ri=es:ki.sibling=es,ki=es,Ii=Ls}if(ji===hn.length)return F(An,Ii),yr&&Sc(An,ji),ri;if(Ii===null){for(;ji<hn.length;ji++)Ii=gr(An,hn[ji],_r),Ii!==null&&(en=ye(Ii,en,ji),ki===null?ri=Ii:ki.sibling=Ii,ki=Ii);return yr&&Sc(An,ji),ri}for(Ii=Q(An,Ii);ji<hn.length;ji++)Ls=jr(Ii,An,ji,hn[ji],_r),Ls!==null&&(m&&Ls.alternate!==null&&Ii.delete(Ls.key===null?ji:Ls.key),en=ye(Ls,en,ji),ki===null?ri=Ls:ki.sibling=Ls,ki=Ls);return m&&Ii.forEach(function(Wh){return C(An,Wh)}),yr&&Sc(An,ji),ri}function ui(An,en,hn,_r){var ri=We(hn);if(typeof ri!="function")throw Error(t(150));if(hn=ri.call(hn),hn==null)throw Error(t(151));for(var ki=ri=null,Ii=en,ji=en=0,Ls=null,es=hn.next();Ii!==null&&!es.done;ji++,es=hn.next()){Ii.index>ji?(Ls=Ii,Ii=null):Ls=Ii.sibling;var Wh=tr(An,Ii,es.value,_r);if(Wh===null){Ii===null&&(Ii=Ls);break}m&&Ii&&Wh.alternate===null&&C(An,Ii),en=ye(Wh,en,ji),ki===null?ri=Wh:ki.sibling=Wh,ki=Wh,Ii=Ls}if(es.done)return F(An,Ii),yr&&Sc(An,ji),ri;if(Ii===null){for(;!es.done;ji++,es=hn.next())es=gr(An,es.value,_r),es!==null&&(en=ye(es,en,ji),ki===null?ri=es:ki.sibling=es,ki=es);return yr&&Sc(An,ji),ri}for(Ii=Q(An,Ii);!es.done;ji++,es=hn.next())es=jr(Ii,An,ji,es.value,_r),es!==null&&(m&&es.alternate!==null&&Ii.delete(es.key===null?ji:es.key),en=ye(es,en,ji),ki===null?ri=es:ki.sibling=es,ki=es);return m&&Ii.forEach(function(s1){return C(An,s1)}),yr&&Sc(An,ji),ri}function ll(An,en,hn,_r){if(typeof hn=="object"&&hn!==null&&hn.type===W&&hn.key===null&&(hn=hn.props.children),typeof hn=="object"&&hn!==null){switch(hn.$$typeof){case $:e:{for(var ri=hn.key,ki=en;ki!==null;){if(ki.key===ri){if(ri=hn.type,ri===W){if(ki.tag===7){F(An,ki.sibling),en=ue(ki,hn.props.children),en.return=An,An=en;break e}}else if(ki.elementType===ri||typeof ri=="object"&&ri!==null&&ri.$$typeof===st&&lh(ri)===ki.type){F(An,ki.sibling),en=ue(ki,hn.props),en.ref=ah(An,ki,hn),en.return=An,An=en;break e}F(An,ki);break}else C(An,ki);ki=ki.sibling}hn.type===W?(en=bf(hn.props.children,An.mode,_r,hn.key),en.return=An,An=en):(_r=c0(hn.type,hn.key,hn.props,null,An.mode,_r),_r.ref=ah(An,en,hn),_r.return=An,An=_r)}return et(An);case te:e:{for(ki=hn.key;en!==null;){if(en.key===ki)if(en.tag===4&&en.stateNode.containerInfo===hn.containerInfo&&en.stateNode.implementation===hn.implementation){F(An,en.sibling),en=ue(en,hn.children||[]),en.return=An,An=en;break e}else{F(An,en);break}else C(An,en);en=en.sibling}en=d0(hn,An.mode,_r),en.return=An,An=en}return et(An);case st:return ki=hn._init,ll(An,en,ki(hn._payload),_r)}if(or(hn))return oi(An,en,hn,_r);if(We(hn))return ui(An,en,hn,_r);IA(An,hn)}return typeof hn=="string"&&hn!==""||typeof hn=="number"?(hn=""+hn,en!==null&&en.tag===6?(F(An,en.sibling),en=ue(en,hn),en.return=An,An=en):(F(An,en),en=eg(hn,An.mode,_r),en.return=An,An=en),et(An)):F(An,en)}return ll}var Ys=kA(!0),Bc=kA(!1),Yl=Ia(null),pl=null,Vu=null,Oc=null;function Eu(){Oc=Vu=pl=null}function _a(m){var C=Yl.current;qs(Yl),m._currentValue=C}function Js(m,C,F){for(;m!==null;){var Q=m.alternate;if((m.childLanes&C)!==C?(m.childLanes|=C,Q!==null&&(Q.childLanes|=C)):Q!==null&&(Q.childLanes&C)!==C&&(Q.childLanes|=C),m===F)break;m=m.return}}function Au(m,C){pl=m,Oc=Vu=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&C&&(Vl=!0),m.firstContext=null)}function cu(m){var C=m._currentValue;if(Oc!==m)if(m={context:m,memoizedValue:C,next:null},Vu===null){if(pl===null)throw Error(t(308));Vu=m,pl.dependencies={lanes:0,firstContext:m}}else Vu=Vu.next=m;return C}var fA=null;function Bu(m){fA===null?fA=[m]:fA.push(m)}function Ic(m,C,F,Q){var ue=C.interleaved;return ue===null?(F.next=F,Bu(C)):(F.next=ue.next,ue.next=F),C.interleaved=F,Hu(m,Q)}function Hu(m,C){m.lanes|=C;var F=m.alternate;for(F!==null&&(F.lanes|=C),F=m,m=m.return;m!==null;)m.childLanes|=C,F=m.alternate,F!==null&&(F.childLanes|=C),F=m,m=m.return;return F.tag===3?F.stateNode:null}var $l=!1;function Bd(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T(m,C){m=m.updateQueue,C.updateQueue===m&&(C.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function l(m,C){return{eventTime:m,lane:C,tag:0,payload:null,callback:null,next:null}}function c(m,C,F){var Q=m.updateQueue;if(Q===null)return null;if(Q=Q.shared,yi&2){var ue=Q.pending;return ue===null?C.next=C:(C.next=ue.next,ue.next=C),Q.pending=C,Hu(m,F)}return ue=Q.interleaved,ue===null?(C.next=C,Bu(Q)):(C.next=ue.next,ue.next=C),Q.interleaved=C,Hu(m,F)}function _(m,C,F){if(C=C.updateQueue,C!==null&&(C=C.shared,(F&4194240)!==0)){var Q=C.lanes;Q&=m.pendingLanes,F|=Q,C.lanes=F,us(m,F)}}function M(m,C){var F=m.updateQueue,Q=m.alternate;if(Q!==null&&(Q=Q.updateQueue,F===Q)){var ue=null,ye=null;if(F=F.firstBaseUpdate,F!==null){do{var et={eventTime:F.eventTime,lane:F.lane,tag:F.tag,payload:F.payload,callback:F.callback,next:null};ye===null?ue=ye=et:ye=ye.next=et,F=F.next}while(F!==null);ye===null?ue=ye=C:ye=ye.next=C}else ue=ye=C;F={baseState:Q.baseState,firstBaseUpdate:ue,lastBaseUpdate:ye,shared:Q.shared,effects:Q.effects},m.updateQueue=F;return}m=F.lastBaseUpdate,m===null?F.firstBaseUpdate=C:m.next=C,F.lastBaseUpdate=C}function R(m,C,F,Q){var ue=m.updateQueue;$l=!1;var ye=ue.firstBaseUpdate,et=ue.lastBaseUpdate,kt=ue.shared.pending;if(kt!==null){ue.shared.pending=null;var Gt=kt,wn=Gt.next;Gt.next=null,et===null?ye=wn:et.next=wn,et=Gt;var cr=m.alternate;cr!==null&&(cr=cr.updateQueue,kt=cr.lastBaseUpdate,kt!==et&&(kt===null?cr.firstBaseUpdate=wn:kt.next=wn,cr.lastBaseUpdate=Gt))}if(ye!==null){var gr=ue.baseState;et=0,cr=wn=Gt=null,kt=ye;do{var tr=kt.lane,jr=kt.eventTime;if((Q&tr)===tr){cr!==null&&(cr=cr.next={eventTime:jr,lane:0,tag:kt.tag,payload:kt.payload,callback:kt.callback,next:null});e:{var oi=m,ui=kt;switch(tr=C,jr=F,ui.tag){case 1:if(oi=ui.payload,typeof oi=="function"){gr=oi.call(jr,gr,tr);break e}gr=oi;break e;case 3:oi.flags=oi.flags&-65537|128;case 0:if(oi=ui.payload,tr=typeof oi=="function"?oi.call(jr,gr,tr):oi,tr==null)break e;gr=Ce({},gr,tr);break e;case 2:$l=!0}}kt.callback!==null&&kt.lane!==0&&(m.flags|=64,tr=ue.effects,tr===null?ue.effects=[kt]:tr.push(kt))}else jr={eventTime:jr,lane:tr,tag:kt.tag,payload:kt.payload,callback:kt.callback,next:null},cr===null?(wn=cr=jr,Gt=gr):cr=cr.next=jr,et|=tr;if(kt=kt.next,kt===null){if(kt=ue.shared.pending,kt===null)break;tr=kt,kt=tr.next,tr.next=null,ue.lastBaseUpdate=tr,ue.shared.pending=null}}while(!0);if(cr===null&&(Gt=gr),ue.baseState=Gt,ue.firstBaseUpdate=wn,ue.lastBaseUpdate=cr,C=ue.shared.interleaved,C!==null){ue=C;do et|=ue.lane,ue=ue.next;while(ue!==C)}else ye===null&&(ue.shared.lanes=0);Cl|=et,m.lanes=et,m.memoizedState=gr}}function N(m,C,F){if(m=C.effects,C.effects=null,m!==null)for(C=0;C<m.length;C++){var Q=m[C],ue=Q.callback;if(ue!==null){if(Q.callback=null,Q=F,typeof ue!="function")throw Error(t(191,ue));ue.call(Q)}}}var V={},ne=Ia(V),ae=Ia(V),Me=Ia(V);function ke(m){if(m===V)throw Error(t(174));return m}function De(m,C){switch(bs(Me,C),bs(ae,m),bs(ne,V),m=C.nodeType,m){case 9:case 11:C=(C=C.documentElement)?C.namespaceURI:qe(null,"");break;default:m=m===8?C.parentNode:C,C=m.namespaceURI||null,m=m.tagName,C=qe(C,m)}qs(ne),bs(ne,C)}function Ve(){qs(ne),qs(ae),qs(Me)}function Xe(m){ke(Me.current);var C=ke(ne.current),F=qe(C,m.type);C!==F&&(bs(ae,m),bs(ne,F))}function mt(m){ae.current===m&&(qs(ne),qs(ae))}var ut=Ia(0);function gt(m){for(var C=m;C!==null;){if(C.tag===13){var F=C.memoizedState;if(F!==null&&(F=F.dehydrated,F===null||F.data==="$?"||F.data==="$!"))return C}else if(C.tag===19&&C.memoizedProps.revealOrder!==void 0){if(C.flags&128)return C}else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return null;C=C.return}C.sibling.return=C.return,C=C.sibling}return null}var bt=[];function Ot(){for(var m=0;m<bt.length;m++)bt[m]._workInProgressVersionPrimary=null;bt.length=0}var Pt=J.ReactCurrentDispatcher,Kt=J.ReactCurrentBatchConfig,jt=0,Rt=null,nn=null,Xt=null,bn=!1,xn=!1,Cn=0,kn=0;function Gn(){throw Error(t(321))}function Bn(m,C){if(C===null)return!1;for(var F=0;F<C.length&&F<m.length;F++)if(!ln(m[F],C[F]))return!1;return!0}function Pr(m,C,F,Q,ue,ye){if(jt=ye,Rt=C,C.memoizedState=null,C.updateQueue=null,C.lanes=0,Pt.current=m===null||m.memoizedState===null?Bp:kc,m=F(Q,ue),xn){ye=0;do{if(xn=!1,Cn=0,25<=ye)throw Error(t(301));ye+=1,Xt=nn=null,C.updateQueue=null,Pt.current=RA,m=F(Q,ue)}while(xn)}if(Pt.current=kd,C=nn!==null&&nn.next!==null,jt=0,Xt=nn=Rt=null,bn=!1,C)throw Error(t(300));return m}function Oi(){var m=Cn!==0;return Cn=0,m}function Vi(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Rt.memoizedState=Xt=m:Xt=Xt.next=m,Xt}function Io(){if(nn===null){var m=Rt.alternate;m=m!==null?m.memoizedState:null}else m=nn.next;var C=Xt===null?Rt.memoizedState:Xt.next;if(C!==null)Xt=C,nn=m;else{if(m===null)throw Error(t(310));nn=m,m={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Xt===null?Rt.memoizedState=Xt=m:Xt=Xt.next=m}return Xt}function Ei(m,C){return typeof C=="function"?C(m):C}function No(m){var C=Io(),F=C.queue;if(F===null)throw Error(t(311));F.lastRenderedReducer=m;var Q=nn,ue=Q.baseQueue,ye=F.pending;if(ye!==null){if(ue!==null){var et=ue.next;ue.next=ye.next,ye.next=et}Q.baseQueue=ue=ye,F.pending=null}if(ue!==null){ye=ue.next,Q=Q.baseState;var kt=et=null,Gt=null,wn=ye;do{var cr=wn.lane;if((jt&cr)===cr)Gt!==null&&(Gt=Gt.next={lane:0,action:wn.action,hasEagerState:wn.hasEagerState,eagerState:wn.eagerState,next:null}),Q=wn.hasEagerState?wn.eagerState:m(Q,wn.action);else{var gr={lane:cr,action:wn.action,hasEagerState:wn.hasEagerState,eagerState:wn.eagerState,next:null};Gt===null?(kt=Gt=gr,et=Q):Gt=Gt.next=gr,Rt.lanes|=cr,Cl|=cr}wn=wn.next}while(wn!==null&&wn!==ye);Gt===null?et=Q:Gt.next=kt,ln(Q,C.memoizedState)||(Vl=!0),C.memoizedState=Q,C.baseState=et,C.baseQueue=Gt,F.lastRenderedState=Q}if(m=F.interleaved,m!==null){ue=m;do ye=ue.lane,Rt.lanes|=ye,Cl|=ye,ue=ue.next;while(ue!==m)}else ue===null&&(F.lanes=0);return[C.memoizedState,F.dispatch]}function Wo(m){var C=Io(),F=C.queue;if(F===null)throw Error(t(311));F.lastRenderedReducer=m;var Q=F.dispatch,ue=F.pending,ye=C.memoizedState;if(ue!==null){F.pending=null;var et=ue=ue.next;do ye=m(ye,et.action),et=et.next;while(et!==ue);ln(ye,C.memoizedState)||(Vl=!0),C.memoizedState=ye,C.baseQueue===null&&(C.baseState=ye),F.lastRenderedState=ye}return[ye,Q]}function wo(){}function vo(m,C){var F=Rt,Q=Io(),ue=C(),ye=!ln(Q.memoizedState,ue);if(ye&&(Q.memoizedState=ue,Vl=!0),Q=Q.queue,ea(hs.bind(null,F,Q,m),[m]),Q.getSnapshot!==C||ye||Xt!==null&&Xt.memoizedState.tag&1){if(F.flags|=2048,gl(9,Go.bind(null,F,Q,ue,C),void 0,null),Jo===null)throw Error(t(349));jt&30||Ta(F,C,ue)}return ue}function Ta(m,C,F){m.flags|=16384,m={getSnapshot:C,value:F},C=Rt.updateQueue,C===null?(C={lastEffect:null,stores:null},Rt.updateQueue=C,C.stores=[m]):(F=C.stores,F===null?C.stores=[m]:F.push(m))}function Go(m,C,F,Q){C.value=F,C.getSnapshot=Q,Ga(C)&&Zu(m)}function hs(m,C,F){return F(function(){Ga(C)&&Zu(m)})}function Ga(m){var C=m.getSnapshot;m=m.value;try{var F=C();return!ln(m,F)}catch{return!0}}function Zu(m){var C=Hu(m,1);C!==null&&rd(C,m,1,-1)}function ml(m){var C=Vi();return typeof m=="function"&&(m=m()),C.memoizedState=C.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:m},C.queue=m,m=m.dispatch=ac.bind(null,Rt,m),[C.memoizedState,m]}function gl(m,C,F,Q){return m={tag:m,create:C,destroy:F,deps:Q,next:null},C=Rt.updateQueue,C===null?(C={lastEffect:null,stores:null},Rt.updateQueue=C,C.lastEffect=m.next=m):(F=C.lastEffect,F===null?C.lastEffect=m.next=m:(Q=F.next,F.next=m,m.next=Q,C.lastEffect=m)),m}function du(){return Io().memoizedState}function TA(m,C,F,Q){var ue=Vi();Rt.flags|=m,ue.memoizedState=gl(1|C,F,void 0,Q===void 0?null:Q)}function PA(m,C,F,Q){var ue=Io();Q=Q===void 0?null:Q;var ye=void 0;if(nn!==null){var et=nn.memoizedState;if(ye=et.destroy,Q!==null&&Bn(Q,et.deps)){ue.memoizedState=gl(C,F,ye,Q);return}}Rt.flags|=m,ue.memoizedState=gl(1|C,F,ye,Q)}function Xu(m,C){return TA(8390656,8,m,C)}function ea(m,C){return PA(2048,8,m,C)}function yl(m,C){return PA(4,2,m,C)}function aa(m,C){return PA(4,4,m,C)}function Dl(m,C){if(typeof C=="function")return m=m(),C(m),function(){C(null)};if(C!=null)return m=m(),C.current=m,function(){C.current=null}}function ws(m,C,F){return F=F!=null?F.concat([m]):null,PA(4,4,Dl.bind(null,C,m),F)}function $s(){}function il(m,C){var F=Io();C=C===void 0?null:C;var Q=F.memoizedState;return Q!==null&&C!==null&&Bn(C,Q[1])?Q[0]:(F.memoizedState=[m,C],m)}function ol(m,C){var F=Io();C=C===void 0?null:C;var Q=F.memoizedState;return Q!==null&&C!==null&&Bn(C,Q[1])?Q[0]:(m=m(),F.memoizedState=[m,C],m)}function Od(m,C,F){return jt&21?(ln(F,C)||(F=el(),Rt.lanes|=F,Cl|=F,m.baseState=!0),C):(m.baseState&&(m.baseState=!1,Vl=!0),m.memoizedState=F)}function Th(m,C){var F=Lr;Lr=F!==0&&4>F?F:4,m(!0);var Q=Kt.transition;Kt.transition={};try{m(!1),C()}finally{Lr=F,Kt.transition=Q}}function Ph(){return Io().memoizedState}function Id(m,C,F){var Q=Uh(m);if(F={lane:Q,action:F,hasEagerState:!1,eagerState:null,next:null},Rh(m))Pa(C,F);else if(F=Ic(m,C,F,Q),F!==null){var ue=pA();rd(F,m,Q,ue),hu(F,C,Q)}}function ac(m,C,F){var Q=Uh(m),ue={lane:Q,action:F,hasEagerState:!1,eagerState:null,next:null};if(Rh(m))Pa(C,ue);else{var ye=m.alternate;if(m.lanes===0&&(ye===null||ye.lanes===0)&&(ye=C.lastRenderedReducer,ye!==null))try{var et=C.lastRenderedState,kt=ye(et,F);if(ue.hasEagerState=!0,ue.eagerState=kt,ln(kt,et)){var Gt=C.interleaved;Gt===null?(ue.next=ue,Bu(C)):(ue.next=Gt.next,Gt.next=ue),C.interleaved=ue;return}}catch{}finally{}F=Ic(m,C,ue,Q),F!==null&&(ue=pA(),rd(F,m,Q,ue),hu(F,C,Q))}}function Rh(m){var C=m.alternate;return m===Rt||C!==null&&C===Rt}function Pa(m,C){xn=bn=!0;var F=m.pending;F===null?C.next=C:(C.next=F.next,F.next=C),m.pending=C}function hu(m,C,F){if(F&4194240){var Q=C.lanes;Q&=m.pendingLanes,F|=Q,C.lanes=F,us(m,F)}}var kd={readContext:cu,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},Bp={readContext:cu,useCallback:function(m,C){return Vi().memoizedState=[m,C===void 0?null:C],m},useContext:cu,useEffect:Xu,useImperativeHandle:function(m,C,F){return F=F!=null?F.concat([m]):null,TA(4194308,4,Dl.bind(null,C,m),F)},useLayoutEffect:function(m,C){return TA(4194308,4,m,C)},useInsertionEffect:function(m,C){return TA(4,2,m,C)},useMemo:function(m,C){var F=Vi();return C=C===void 0?null:C,m=m(),F.memoizedState=[m,C],m},useReducer:function(m,C,F){var Q=Vi();return C=F!==void 0?F(C):C,Q.memoizedState=Q.baseState=C,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:C},Q.queue=m,m=m.dispatch=Id.bind(null,Rt,m),[Q.memoizedState,m]},useRef:function(m){var C=Vi();return m={current:m},C.memoizedState=m},useState:ml,useDebugValue:$s,useDeferredValue:function(m){return Vi().memoizedState=m},useTransition:function(){var m=ml(!1),C=m[0];return m=Th.bind(null,m[1]),Vi().memoizedState=m,[C,m]},useMutableSource:function(){},useSyncExternalStore:function(m,C,F){var Q=Rt,ue=Vi();if(yr){if(F===void 0)throw Error(t(407));F=F()}else{if(F=C(),Jo===null)throw Error(t(349));jt&30||Ta(Q,C,F)}ue.memoizedState=F;var ye={value:F,getSnapshot:C};return ue.queue=ye,Xu(hs.bind(null,Q,ye,m),[m]),Q.flags|=2048,gl(9,Go.bind(null,Q,ye,F,C),void 0,null),F},useId:function(){var m=Vi(),C=Jo.identifierPrefix;if(yr){var F=Yu,Q=lu;F=(Q&~(1<<32-yn(Q)-1)).toString(32)+F,C=":"+C+"R"+F,F=Cn++,0<F&&(C+="H"+F.toString(32)),C+=":"}else F=kn++,C=":"+C+"r"+F.toString(32)+":";return m.memoizedState=C},unstable_isNewReconciler:!1},kc={readContext:cu,useCallback:il,useContext:cu,useEffect:ea,useImperativeHandle:ws,useInsertionEffect:yl,useLayoutEffect:aa,useMemo:ol,useReducer:No,useRef:du,useState:function(){return No(Ei)},useDebugValue:$s,useDeferredValue:function(m){var C=Io();return Od(C,nn.memoizedState,m)},useTransition:function(){var m=No(Ei)[0],C=Io().memoizedState;return[m,C]},useMutableSource:wo,useSyncExternalStore:vo,useId:Ph,unstable_isNewReconciler:!1},RA={readContext:cu,useCallback:il,useContext:cu,useEffect:ea,useImperativeHandle:ws,useInsertionEffect:yl,useLayoutEffect:aa,useMemo:ol,useReducer:Wo,useRef:du,useState:function(){return Wo(Ei)},useDebugValue:$s,useDeferredValue:function(m){var C=Io();return nn===null?C.memoizedState=m:Od(C,nn.memoizedState,m)},useTransition:function(){var m=Wo(Ei)[0],C=Io().memoizedState;return[m,C]},useMutableSource:wo,useSyncExternalStore:vo,useId:Ph,unstable_isNewReconciler:!1};function Qa(m,C){if(m&&m.defaultProps){C=Ce({},C),m=m.defaultProps;for(var F in m)C[F]===void 0&&(C[F]=m[F]);return C}return C}function Op(m,C,F,Q){C=m.memoizedState,F=F(Q,C),F=F==null?C:Ce({},C,F),m.memoizedState=F,m.lanes===0&&(m.updateQueue.baseState=F)}var Dh={isMounted:function(m){return(m=m._reactInternals)?Yi(m)===m:!1},enqueueSetState:function(m,C,F){m=m._reactInternals;var Q=pA(),ue=Uh(m),ye=l(Q,ue);ye.payload=C,F!=null&&(ye.callback=F),C=c(m,ye,ue),C!==null&&(rd(C,m,ue,Q),_(C,m,ue))},enqueueReplaceState:function(m,C,F){m=m._reactInternals;var Q=pA(),ue=Uh(m),ye=l(Q,ue);ye.tag=1,ye.payload=C,F!=null&&(ye.callback=F),C=c(m,ye,ue),C!==null&&(rd(C,m,ue,Q),_(C,m,ue))},enqueueForceUpdate:function(m,C){m=m._reactInternals;var F=pA(),Q=Uh(m),ue=l(F,Q);ue.tag=2,C!=null&&(ue.callback=C),C=c(m,ue,Q),C!==null&&(rd(C,m,Q,F),_(C,m,Q))}};function Ip(m,C,F,Q,ue,ye,et){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(Q,ye,et):C.prototype&&C.prototype.isPureReactComponent?!zr(F,Q)||!zr(ue,ye):!0}function uh(m,C,F){var Q=!1,ue=dA,ye=C.contextType;return typeof ye=="object"&&ye!==null?ye=cu(ye):(ue=ka(C)?Ca:Os.current,Q=C.contextTypes,ye=(Q=Q!=null)?Jc(m,ue):dA),C=new C(F,ye),m.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Dh,m.stateNode=C,C._reactInternals=m,Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=ue,m.__reactInternalMemoizedMaskedChildContext=ye),C}function Tc(m,C,F,Q){m=C.state,typeof C.componentWillReceiveProps=="function"&&C.componentWillReceiveProps(F,Q),typeof C.UNSAFE_componentWillReceiveProps=="function"&&C.UNSAFE_componentWillReceiveProps(F,Q),C.state!==m&&Dh.enqueueReplaceState(C,C.state,null)}function gm(m,C,F,Q){var ue=m.stateNode;ue.props=F,ue.state=m.memoizedState,ue.refs={},Bd(m);var ye=C.contextType;typeof ye=="object"&&ye!==null?ue.context=cu(ye):(ye=ka(C)?Ca:Os.current,ue.context=Jc(m,ye)),ue.state=m.memoizedState,ye=C.getDerivedStateFromProps,typeof ye=="function"&&(Op(m,C,ye,F),ue.state=m.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof ue.getSnapshotBeforeUpdate=="function"||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(C=ue.state,typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount(),C!==ue.state&&Dh.enqueueReplaceState(ue,ue.state,null),R(m,F,ue,Q),ue.state=m.memoizedState),typeof ue.componentDidMount=="function"&&(m.flags|=4194308)}function lc(m,C){try{var F="",Q=C;do F+=ft(Q),Q=Q.return;while(Q);var ue=F}catch(ye){ue=`
Error generating stack: `+ye.message+`
`+ye.stack}return{value:m,source:C,stack:ue,digest:null}}function Kh(m,C,F){return{value:m,source:null,stack:F??null,digest:C??null}}function Td(m,C){try{console.error(C.value)}catch(F){setTimeout(function(){throw F})}}var kp=typeof WeakMap=="function"?WeakMap:Map;function Ah(m,C,F){F=l(-1,F),F.tag=3,F.payload={element:null};var Q=C.value;return F.callback=function(){yf||(yf=!0,n0=Q),Td(m,C)},F}function Qf(m,C,F){F=l(-1,F),F.tag=3;var Q=m.type.getDerivedStateFromError;if(typeof Q=="function"){var ue=C.value;F.payload=function(){return Q(ue)},F.callback=function(){Td(m,C)}}var ye=m.stateNode;return ye!==null&&typeof ye.componentDidCatch=="function"&&(F.callback=function(){Td(m,C),typeof Q!="function"&&(vf===null?vf=new Set([this]):vf.add(this));var et=C.stack;this.componentDidCatch(C.value,{componentStack:et!==null?et:""})}),F}function qf(m,C,F){var Q=m.pingCache;if(Q===null){Q=m.pingCache=new kp;var ue=new Set;Q.set(C,ue)}else ue=Q.get(C),ue===void 0&&(ue=new Set,Q.set(C,ue));ue.has(F)||(ue.add(F),m=t1.bind(null,m,C,F),C.then(m,m))}function Tp(m){do{var C;if((C=m.tag===13)&&(C=m.memoizedState,C=C!==null?C.dehydrated!==null:!0),C)return m;m=m.return}while(m!==null);return null}function Pd(m,C,F,Q,ue){return m.mode&1?(m.flags|=65536,m.lanes=ue,m):(m===C?m.flags|=65536:(m.flags|=128,F.flags|=131072,F.flags&=-52805,F.tag===1&&(F.alternate===null?F.tag=17:(C=l(-1,1),C.tag=2,c(F,C,1))),F.lanes|=1),m)}var df=J.ReactCurrentOwner,Vl=!1;function Kl(m,C,F,Q){C.child=m===null?Bc(C,null,F,Q):Ys(C,m.child,F,Q)}function ym(m,C,F,Q,ue){F=F.render;var ye=C.ref;return Au(C,ue),Q=Pr(m,C,F,Q,ye,ue),F=Oi(),m!==null&&!Vl?(C.updateQueue=m.updateQueue,C.flags&=-2053,m.lanes&=~ue,Ou(m,C,ue)):(yr&&F&&OA(C),C.flags|=1,Kl(m,C,Q,ue),C.child)}function Yf(m,C,F,Q,ue){if(m===null){var ye=F.type;return typeof ye=="function"&&!Xf(ye)&&ye.defaultProps===void 0&&F.compare===null&&F.defaultProps===void 0?(C.tag=15,C.type=ye,ko(m,C,ye,Q,ue)):(m=c0(F.type,null,Q,C,C.mode,ue),m.ref=C.ref,m.return=C,C.child=m)}if(ye=m.child,!(m.lanes&ue)){var et=ye.memoizedProps;if(F=F.compare,F=F!==null?F:zr,F(et,Q)&&m.ref===C.ref)return Ou(m,C,ue)}return C.flags|=1,m=Ud(ye,Q),m.ref=C.ref,m.return=C,C.child=m}function ko(m,C,F,Q,ue){if(m!==null){var ye=m.memoizedProps;if(zr(ye,Q)&&m.ref===C.ref)if(Vl=!1,C.pendingProps=Q=ye,(m.lanes&ue)!==0)m.flags&131072&&(Vl=!0);else return C.lanes=m.lanes,Ou(m,C,ue)}return Rd(m,C,F,Q,ue)}function Ju(m,C,F){var Q=C.pendingProps,ue=Q.children,ye=m!==null?m.memoizedState:null;if(Q.mode==="hidden")if(!(C.mode&1))C.memoizedState={baseLanes:0,cachePool:null,transitions:null},bs(Fl,Ts),Ts|=F;else{if(!(F&1073741824))return m=ye!==null?ye.baseLanes|F:F,C.lanes=C.childLanes=1073741824,C.memoizedState={baseLanes:m,cachePool:null,transitions:null},C.updateQueue=null,bs(Fl,Ts),Ts|=m,null;C.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q=ye!==null?ye.baseLanes:F,bs(Fl,Ts),Ts|=Q}else ye!==null?(Q=ye.baseLanes|F,C.memoizedState=null):Q=F,bs(Fl,Ts),Ts|=Q;return Kl(m,C,ue,F),C.child}function hf(m,C){var F=C.ref;(m===null&&F!==null||m!==null&&m.ref!==F)&&(C.flags|=512,C.flags|=2097152)}function Rd(m,C,F,Q,ue){var ye=ka(F)?Ca:Os.current;return ye=Jc(C,ye),Au(C,ue),F=Pr(m,C,F,Q,ye,ue),Q=Oi(),m!==null&&!Vl?(C.updateQueue=m.updateQueue,C.flags&=-2053,m.lanes&=~ue,Ou(m,C,ue)):(yr&&Q&&OA(C),C.flags|=1,Kl(m,C,F,ue),C.child)}function DA(m,C,F,Q,ue){if(ka(F)){var ye=!0;Si(C)}else ye=!1;if(Au(C,ue),C.stateNode===null)Rp(m,C),uh(C,F,Q),gm(C,F,Q,ue),Q=!0;else if(m===null){var et=C.stateNode,kt=C.memoizedProps;et.props=kt;var Gt=et.context,wn=F.contextType;typeof wn=="object"&&wn!==null?wn=cu(wn):(wn=ka(F)?Ca:Os.current,wn=Jc(C,wn));var cr=F.getDerivedStateFromProps,gr=typeof cr=="function"||typeof et.getSnapshotBeforeUpdate=="function";gr||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(kt!==Q||Gt!==wn)&&Tc(C,et,Q,wn),$l=!1;var tr=C.memoizedState;et.state=tr,R(C,Q,et,ue),Gt=C.memoizedState,kt!==Q||tr!==Gt||vr.current||$l?(typeof cr=="function"&&(Op(C,F,cr,Q),Gt=C.memoizedState),(kt=$l||Ip(C,F,kt,Q,tr,Gt,wn))?(gr||typeof et.UNSAFE_componentWillMount!="function"&&typeof et.componentWillMount!="function"||(typeof et.componentWillMount=="function"&&et.componentWillMount(),typeof et.UNSAFE_componentWillMount=="function"&&et.UNSAFE_componentWillMount()),typeof et.componentDidMount=="function"&&(C.flags|=4194308)):(typeof et.componentDidMount=="function"&&(C.flags|=4194308),C.memoizedProps=Q,C.memoizedState=Gt),et.props=Q,et.state=Gt,et.context=wn,Q=kt):(typeof et.componentDidMount=="function"&&(C.flags|=4194308),Q=!1)}else{et=C.stateNode,T(m,C),kt=C.memoizedProps,wn=C.type===C.elementType?kt:Qa(C.type,kt),et.props=wn,gr=C.pendingProps,tr=et.context,Gt=F.contextType,typeof Gt=="object"&&Gt!==null?Gt=cu(Gt):(Gt=ka(F)?Ca:Os.current,Gt=Jc(C,Gt));var jr=F.getDerivedStateFromProps;(cr=typeof jr=="function"||typeof et.getSnapshotBeforeUpdate=="function")||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(kt!==gr||tr!==Gt)&&Tc(C,et,Q,Gt),$l=!1,tr=C.memoizedState,et.state=tr,R(C,Q,et,ue);var oi=C.memoizedState;kt!==gr||tr!==oi||vr.current||$l?(typeof jr=="function"&&(Op(C,F,jr,Q),oi=C.memoizedState),(wn=$l||Ip(C,F,wn,Q,tr,oi,Gt)||!1)?(cr||typeof et.UNSAFE_componentWillUpdate!="function"&&typeof et.componentWillUpdate!="function"||(typeof et.componentWillUpdate=="function"&&et.componentWillUpdate(Q,oi,Gt),typeof et.UNSAFE_componentWillUpdate=="function"&&et.UNSAFE_componentWillUpdate(Q,oi,Gt)),typeof et.componentDidUpdate=="function"&&(C.flags|=4),typeof et.getSnapshotBeforeUpdate=="function"&&(C.flags|=1024)):(typeof et.componentDidUpdate!="function"||kt===m.memoizedProps&&tr===m.memoizedState||(C.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||kt===m.memoizedProps&&tr===m.memoizedState||(C.flags|=1024),C.memoizedProps=Q,C.memoizedState=oi),et.props=Q,et.state=oi,et.context=Gt,Q=wn):(typeof et.componentDidUpdate!="function"||kt===m.memoizedProps&&tr===m.memoizedState||(C.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||kt===m.memoizedProps&&tr===m.memoizedState||(C.flags|=1024),Q=!1)}return Fh(m,C,F,Q,ye,ue)}function Fh(m,C,F,Q,ue,ye){hf(m,C);var et=(C.flags&128)!==0;if(!Q&&!et)return ue&&Md(C,F,!1),Ou(m,C,ye);Q=C.stateNode,df.current=C;var kt=et&&typeof F.getDerivedStateFromError!="function"?null:Q.render();return C.flags|=1,m!==null&&et?(C.child=Ys(C,m.child,null,ye),C.child=Ys(C,null,kt,ye)):Kl(m,C,kt,ye),C.memoizedState=Q.state,ue&&Md(C,F,!0),C.child}function Pp(m){var C=m.stateNode;C.pendingContext?xd(m,C.pendingContext,C.pendingContext!==C.context):C.context&&xd(m,C.context,!1),De(m,C.containerInfo)}function Pc(m,C,F,Q,ue){return Su(),Ro(ue),C.flags|=256,Kl(m,C,F,Q),C.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function pf(m){return{baseLanes:m,cachePool:null,transitions:null}}function ch(m,C,F){var Q=C.pendingProps,ue=ut.current,ye=!1,et=(C.flags&128)!==0,kt;if((kt=et)||(kt=m!==null&&m.memoizedState===null?!1:(ue&2)!==0),kt?(ye=!0,C.flags&=-129):(m===null||m.memoizedState!==null)&&(ue|=1),bs(ut,ue&1),m===null)return xs(C),m=C.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(C.mode&1?m.data==="$!"?C.lanes=8:C.lanes=1073741824:C.lanes=1,null):(et=Q.children,m=Q.fallback,ye?(Q=C.mode,ye=C.child,et={mode:"hidden",children:et},!(Q&1)&&ye!==null?(ye.childLanes=0,ye.pendingProps=et):ye=wm(et,Q,0,null),m=bf(m,Q,F,null),ye.return=C,m.return=C,ye.sibling=m,C.child=ye,C.child.memoizedState=pf(F),C.memoizedState=ff,m):Dd(C,et));if(ue=m.memoizedState,ue!==null&&(kt=ue.dehydrated,kt!==null))return hi(m,C,et,Q,kt,ue,F);if(ye){ye=Q.fallback,et=C.mode,ue=m.child,kt=ue.sibling;var Gt={mode:"hidden",children:Q.children};return!(et&1)&&C.child!==ue?(Q=C.child,Q.childLanes=0,Q.pendingProps=Gt,C.deletions=null):(Q=Ud(ue,Gt),Q.subtreeFlags=ue.subtreeFlags&14680064),kt!==null?ye=Ud(kt,ye):(ye=bf(ye,et,F,null),ye.flags|=2),ye.return=C,Q.return=C,Q.sibling=ye,C.child=Q,Q=ye,ye=C.child,et=m.child.memoizedState,et=et===null?pf(F):{baseLanes:et.baseLanes|F,cachePool:null,transitions:et.transitions},ye.memoizedState=et,ye.childLanes=m.childLanes&~F,C.memoizedState=ff,Q}return ye=m.child,m=ye.sibling,Q=Ud(ye,{mode:"visible",children:Q.children}),!(C.mode&1)&&(Q.lanes=F),Q.return=C,Q.sibling=null,m!==null&&(F=C.deletions,F===null?(C.deletions=[m],C.flags|=16):F.push(m)),C.child=Q,C.memoizedState=null,Q}function Dd(m,C){return C=wm({mode:"visible",children:C},m.mode,0,null),C.return=m,m.child=C}function ed(m,C,F,Q){return Q!==null&&Ro(Q),Ys(C,m.child,null,F),m=Dd(C,C.pendingProps.children),m.flags|=2,C.memoizedState=null,m}function hi(m,C,F,Q,ue,ye,et){if(F)return C.flags&256?(C.flags&=-257,Q=Kh(Error(t(422))),ed(m,C,et,Q)):C.memoizedState!==null?(C.child=m.child,C.flags|=128,null):(ye=Q.fallback,ue=C.mode,Q=wm({mode:"visible",children:Q.children},ue,0,null),ye=bf(ye,ue,et,null),ye.flags|=2,Q.return=C,ye.return=C,Q.sibling=ye,C.child=Q,C.mode&1&&Ys(C,m.child,null,et),C.child.memoizedState=pf(et),C.memoizedState=ff,ye);if(!(C.mode&1))return ed(m,C,et,null);if(ue.data==="$!"){if(Q=ue.nextSibling&&ue.nextSibling.dataset,Q)var kt=Q.dgst;return Q=kt,ye=Error(t(419)),Q=Kh(ye,Q,void 0),ed(m,C,et,Q)}if(kt=(et&m.childLanes)!==0,Vl||kt){if(Q=Jo,Q!==null){switch(et&-et){case 4:ue=2;break;case 16:ue=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ue=32;break;case 536870912:ue=268435456;break;default:ue=0}ue=ue&(Q.suspendedLanes|et)?0:ue,ue!==0&&ue!==ye.retryLane&&(ye.retryLane=ue,Hu(m,ue),rd(Q,m,ue,-1))}return a0(),Q=Kh(Error(t(421))),ed(m,C,et,Q)}return ue.data==="$?"?(C.flags|=128,C.child=m.child,C=J0.bind(null,m),ue._reactRetry=C,null):(m=ye.treeContext,ha=rc(ue.nextSibling),ys=C,yr=!0,Zr=null,m!==null&&(Wa[Fs++]=lu,Wa[Fs++]=Yu,Wa[Fs++]=Xo,lu=m.id,Yu=m.overflow,Xo=C),C=Dd(C,Q.children),C.flags|=4096,C)}function td(m,C,F){m.lanes|=C;var Q=m.alternate;Q!==null&&(Q.lanes|=C),Js(m.return,C,F)}function os(m,C,F,Q,ue){var ye=m.memoizedState;ye===null?m.memoizedState={isBackwards:C,rendering:null,renderingStartTime:0,last:Q,tail:F,tailMode:ue}:(ye.isBackwards=C,ye.rendering=null,ye.renderingStartTime=0,ye.last=Q,ye.tail=F,ye.tailMode=ue)}function Kd(m,C,F){var Q=C.pendingProps,ue=Q.revealOrder,ye=Q.tail;if(Kl(m,C,Q.children,F),Q=ut.current,Q&2)Q=Q&1|2,C.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=C.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&td(m,F,C);else if(m.tag===19)td(m,F,C);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===C)break e;for(;m.sibling===null;){if(m.return===null||m.return===C)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}Q&=1}if(bs(ut,Q),!(C.mode&1))C.memoizedState=null;else switch(ue){case"forwards":for(F=C.child,ue=null;F!==null;)m=F.alternate,m!==null&&gt(m)===null&&(ue=F),F=F.sibling;F=ue,F===null?(ue=C.child,C.child=null):(ue=F.sibling,F.sibling=null),os(C,!1,ue,F,ye);break;case"backwards":for(F=null,ue=C.child,C.child=null;ue!==null;){if(m=ue.alternate,m!==null&&gt(m)===null){C.child=ue;break}m=ue.sibling,ue.sibling=F,F=ue,ue=m}os(C,!0,F,null,ye);break;case"together":os(C,!1,null,null,void 0);break;default:C.memoizedState=null}return C.child}function Rp(m,C){!(C.mode&1)&&m!==null&&(m.alternate=null,C.alternate=null,C.flags|=2)}function Ou(m,C,F){if(m!==null&&(C.dependencies=m.dependencies),Cl|=C.lanes,!(F&C.childLanes))return null;if(m!==null&&C.child!==m.child)throw Error(t(153));if(C.child!==null){for(m=C.child,F=Ud(m,m.pendingProps),C.child=F,F.return=C;m.sibling!==null;)m=m.sibling,F=F.sibling=Ud(m,m.pendingProps),F.return=C;F.sibling=null}return C.child}function t0(m,C,F){switch(C.tag){case 3:Pp(C),Su();break;case 5:Xe(C);break;case 1:ka(C.type)&&Si(C);break;case 4:De(C,C.stateNode.containerInfo);break;case 10:var Q=C.type._context,ue=C.memoizedProps.value;bs(Yl,Q._currentValue),Q._currentValue=ue;break;case 13:if(Q=C.memoizedState,Q!==null)return Q.dehydrated!==null?(bs(ut,ut.current&1),C.flags|=128,null):F&C.child.childLanes?ch(m,C,F):(bs(ut,ut.current&1),m=Ou(m,C,F),m!==null?m.sibling:null);bs(ut,ut.current&1);break;case 19:if(Q=(F&C.childLanes)!==0,m.flags&128){if(Q)return Kd(m,C,F);C.flags|=128}if(ue=C.memoizedState,ue!==null&&(ue.rendering=null,ue.tail=null,ue.lastEffect=null),bs(ut,ut.current),Q)break;return null;case 22:case 23:return C.lanes=0,Ju(m,C,F)}return Ou(m,C,F)}var vl,vm,fa,Cm;vl=function(m,C){for(var F=C.child;F!==null;){if(F.tag===5||F.tag===6)m.appendChild(F.stateNode);else if(F.tag!==4&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===C)break;for(;F.sibling===null;){if(F.return===null||F.return===C)return;F=F.return}F.sibling.return=F.return,F=F.sibling}},vm=function(){},fa=function(m,C,F,Q){var ue=m.memoizedProps;if(ue!==Q){m=C.stateNode,ke(ne.current);var ye=null;switch(F){case"input":ue=zt(m,ue),Q=zt(m,Q),ye=[];break;case"select":ue=Ce({},ue,{value:void 0}),Q=Ce({},Q,{value:void 0}),ye=[];break;case"textarea":ue=pn(m,ue),Q=pn(m,Q),ye=[];break;default:typeof ue.onClick!="function"&&typeof Q.onClick=="function"&&(m.onclick=Nu)}se(F,Q);var et;F=null;for(wn in ue)if(!Q.hasOwnProperty(wn)&&ue.hasOwnProperty(wn)&&ue[wn]!=null)if(wn==="style"){var kt=ue[wn];for(et in kt)kt.hasOwnProperty(et)&&(F||(F={}),F[et]="")}else wn!=="dangerouslySetInnerHTML"&&wn!=="children"&&wn!=="suppressContentEditableWarning"&&wn!=="suppressHydrationWarning"&&wn!=="autoFocus"&&(i.hasOwnProperty(wn)?ye||(ye=[]):(ye=ye||[]).push(wn,null));for(wn in Q){var Gt=Q[wn];if(kt=ue!=null?ue[wn]:void 0,Q.hasOwnProperty(wn)&&Gt!==kt&&(Gt!=null||kt!=null))if(wn==="style")if(kt){for(et in kt)!kt.hasOwnProperty(et)||Gt&&Gt.hasOwnProperty(et)||(F||(F={}),F[et]="");for(et in Gt)Gt.hasOwnProperty(et)&&kt[et]!==Gt[et]&&(F||(F={}),F[et]=Gt[et])}else F||(ye||(ye=[]),ye.push(wn,F)),F=Gt;else wn==="dangerouslySetInnerHTML"?(Gt=Gt?Gt.__html:void 0,kt=kt?kt.__html:void 0,Gt!=null&&kt!==Gt&&(ye=ye||[]).push(wn,Gt)):wn==="children"?typeof Gt!="string"&&typeof Gt!="number"||(ye=ye||[]).push(wn,""+Gt):wn!=="suppressContentEditableWarning"&&wn!=="suppressHydrationWarning"&&(i.hasOwnProperty(wn)?(Gt!=null&&wn==="onScroll"&&Zo("scroll",m),ye||kt===Gt||(ye=[])):(ye=ye||[]).push(wn,Gt))}F&&(ye=ye||[]).push("style",F);var wn=ye;(C.updateQueue=wn)&&(C.flags|=4)}},Cm=function(m,C,F,Q){F!==Q&&(C.flags|=4)};function mf(m,C){if(!yr)switch(m.tailMode){case"hidden":C=m.tail;for(var F=null;C!==null;)C.alternate!==null&&(F=C),C=C.sibling;F===null?m.tail=null:F.sibling=null;break;case"collapsed":F=m.tail;for(var Q=null;F!==null;)F.alternate!==null&&(Q=F),F=F.sibling;Q===null?C||m.tail===null?m.tail=null:m.tail.sibling=null:Q.sibling=null}}function sl(m){var C=m.alternate!==null&&m.alternate.child===m.child,F=0,Q=0;if(C)for(var ue=m.child;ue!==null;)F|=ue.lanes|ue.childLanes,Q|=ue.subtreeFlags&14680064,Q|=ue.flags&14680064,ue.return=m,ue=ue.sibling;else for(ue=m.child;ue!==null;)F|=ue.lanes|ue.childLanes,Q|=ue.subtreeFlags,Q|=ue.flags,ue.return=m,ue=ue.sibling;return m.subtreeFlags|=Q,m.childLanes=F,C}function Dp(m,C,F){var Q=C.pendingProps;switch(Ec(C),C.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sl(C),null;case 1:return ka(C.type)&&ic(),sl(C),null;case 3:return Q=C.stateNode,Ve(),qs(vr),qs(Os),Ot(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),(m===null||m.child===null)&&(uu(C)?C.flags|=4:m===null||m.memoizedState.isDehydrated&&!(C.flags&256)||(C.flags|=1024,Zr!==null&&(i0(Zr),Zr=null))),vm(m,C),sl(C),null;case 5:mt(C);var ue=ke(Me.current);if(F=C.type,m!==null&&C.stateNode!=null)fa(m,C,F,Q,ue),m.ref!==C.ref&&(C.flags|=512,C.flags|=2097152);else{if(!Q){if(C.stateNode===null)throw Error(t(166));return sl(C),null}if(m=ke(ne.current),uu(C)){Q=C.stateNode,F=C.type;var ye=C.memoizedProps;switch(Q[EA]=C,Q[wc]=ye,m=(C.mode&1)!==0,F){case"dialog":Zo("cancel",Q),Zo("close",Q);break;case"iframe":case"object":case"embed":Zo("load",Q);break;case"video":case"audio":for(ue=0;ue<MA.length;ue++)Zo(MA[ue],Q);break;case"source":Zo("error",Q);break;case"img":case"image":case"link":Zo("error",Q),Zo("load",Q);break;case"details":Zo("toggle",Q);break;case"input":tn(Q,ye),Zo("invalid",Q);break;case"select":Q._wrapperState={wasMultiple:!!ye.multiple},Zo("invalid",Q);break;case"textarea":Xn(Q,ye),Zo("invalid",Q)}se(F,ye),ue=null;for(var et in ye)if(ye.hasOwnProperty(et)){var kt=ye[et];et==="children"?typeof kt=="string"?Q.textContent!==kt&&(ye.suppressHydrationWarning!==!0&&Cd(Q.textContent,kt,m),ue=["children",kt]):typeof kt=="number"&&Q.textContent!==""+kt&&(ye.suppressHydrationWarning!==!0&&Cd(Q.textContent,kt,m),ue=["children",""+kt]):i.hasOwnProperty(et)&&kt!=null&&et==="onScroll"&&Zo("scroll",Q)}switch(F){case"input":nt(Q),Nn(Q,ye,!0);break;case"textarea":nt(Q),Yn(Q);break;case"select":case"option":break;default:typeof ye.onClick=="function"&&(Q.onclick=Nu)}Q=ue,C.updateQueue=Q,Q!==null&&(C.flags|=4)}else{et=ue.nodeType===9?ue:ue.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=er(F)),m==="http://www.w3.org/1999/xhtml"?F==="script"?(m=et.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof Q.is=="string"?m=et.createElement(F,{is:Q.is}):(m=et.createElement(F),F==="select"&&(et=m,Q.multiple?et.multiple=!0:Q.size&&(et.size=Q.size))):m=et.createElementNS(m,F),m[EA]=C,m[wc]=Q,vl(m,C,!1,!1),C.stateNode=m;e:{switch(et=_e(F,Q),F){case"dialog":Zo("cancel",m),Zo("close",m),ue=Q;break;case"iframe":case"object":case"embed":Zo("load",m),ue=Q;break;case"video":case"audio":for(ue=0;ue<MA.length;ue++)Zo(MA[ue],m);ue=Q;break;case"source":Zo("error",m),ue=Q;break;case"img":case"image":case"link":Zo("error",m),Zo("load",m),ue=Q;break;case"details":Zo("toggle",m),ue=Q;break;case"input":tn(m,Q),ue=zt(m,Q),Zo("invalid",m);break;case"option":ue=Q;break;case"select":m._wrapperState={wasMultiple:!!Q.multiple},ue=Ce({},Q,{value:void 0}),Zo("invalid",m);break;case"textarea":Xn(m,Q),ue=pn(m,Q),Zo("invalid",m);break;default:ue=Q}se(F,ue),kt=ue;for(ye in kt)if(kt.hasOwnProperty(ye)){var Gt=kt[ye];ye==="style"?rr(m,Gt):ye==="dangerouslySetInnerHTML"?(Gt=Gt?Gt.__html:void 0,Gt!=null&&me(m,Gt)):ye==="children"?typeof Gt=="string"?(F!=="textarea"||Gt!=="")&&tt(m,Gt):typeof Gt=="number"&&tt(m,""+Gt):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(i.hasOwnProperty(ye)?Gt!=null&&ye==="onScroll"&&Zo("scroll",m):Gt!=null&&ie(m,ye,Gt,et))}switch(F){case"input":nt(m),Nn(m,Q,!1);break;case"textarea":nt(m),Yn(m);break;case"option":Q.value!=null&&m.setAttribute("value",""+Ue(Q.value));break;case"select":m.multiple=!!Q.multiple,ye=Q.value,ye!=null?Kn(m,!!Q.multiple,ye,!1):Q.defaultValue!=null&&Kn(m,!!Q.multiple,Q.defaultValue,!0);break;default:typeof ue.onClick=="function"&&(m.onclick=Nu)}switch(F){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}}Q&&(C.flags|=4)}C.ref!==null&&(C.flags|=512,C.flags|=2097152)}return sl(C),null;case 6:if(m&&C.stateNode!=null)Cm(m,C,m.memoizedProps,Q);else{if(typeof Q!="string"&&C.stateNode===null)throw Error(t(166));if(F=ke(Me.current),ke(ne.current),uu(C)){if(Q=C.stateNode,F=C.memoizedProps,Q[EA]=C,(ye=Q.nodeValue!==F)&&(m=ys,m!==null))switch(m.tag){case 3:Cd(Q.nodeValue,F,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&Cd(Q.nodeValue,F,(m.mode&1)!==0)}ye&&(C.flags|=4)}else Q=(F.nodeType===9?F:F.ownerDocument).createTextNode(Q),Q[EA]=C,C.stateNode=Q}return sl(C),null;case 13:if(qs(ut),Q=C.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(yr&&ha!==null&&C.mode&1&&!(C.flags&128))Gf(),Su(),C.flags|=98560,ye=!1;else if(ye=uu(C),Q!==null&&Q.dehydrated!==null){if(m===null){if(!ye)throw Error(t(318));if(ye=C.memoizedState,ye=ye!==null?ye.dehydrated:null,!ye)throw Error(t(317));ye[EA]=C}else Su(),!(C.flags&128)&&(C.memoizedState=null),C.flags|=4;sl(C),ye=!1}else Zr!==null&&(i0(Zr),Zr=null),ye=!0;if(!ye)return C.flags&65536?C:null}return C.flags&128?(C.lanes=F,C):(Q=Q!==null,Q!==(m!==null&&m.memoizedState!==null)&&Q&&(C.child.flags|=8192,C.mode&1&&(m===null||ut.current&1?Do===0&&(Do=3):a0())),C.updateQueue!==null&&(C.flags|=4),sl(C),null);case 4:return Ve(),vm(m,C),m===null&&ju(C.stateNode.containerInfo),sl(C),null;case 10:return _a(C.type._context),sl(C),null;case 17:return ka(C.type)&&ic(),sl(C),null;case 19:if(qs(ut),ye=C.memoizedState,ye===null)return sl(C),null;if(Q=(C.flags&128)!==0,et=ye.rendering,et===null)if(Q)mf(ye,!1);else{if(Do!==0||m!==null&&m.flags&128)for(m=C.child;m!==null;){if(et=gt(m),et!==null){for(C.flags|=128,mf(ye,!1),Q=et.updateQueue,Q!==null&&(C.updateQueue=Q,C.flags|=4),C.subtreeFlags=0,Q=F,F=C.child;F!==null;)ye=F,m=Q,ye.flags&=14680066,et=ye.alternate,et===null?(ye.childLanes=0,ye.lanes=m,ye.child=null,ye.subtreeFlags=0,ye.memoizedProps=null,ye.memoizedState=null,ye.updateQueue=null,ye.dependencies=null,ye.stateNode=null):(ye.childLanes=et.childLanes,ye.lanes=et.lanes,ye.child=et.child,ye.subtreeFlags=0,ye.deletions=null,ye.memoizedProps=et.memoizedProps,ye.memoizedState=et.memoizedState,ye.updateQueue=et.updateQueue,ye.type=et.type,m=et.dependencies,ye.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),F=F.sibling;return bs(ut,ut.current&1|2),C.child}m=m.sibling}ye.tail!==null&&lo()>$f&&(C.flags|=128,Q=!0,mf(ye,!1),C.lanes=4194304)}else{if(!Q)if(m=gt(et),m!==null){if(C.flags|=128,Q=!0,F=m.updateQueue,F!==null&&(C.updateQueue=F,C.flags|=4),mf(ye,!0),ye.tail===null&&ye.tailMode==="hidden"&&!et.alternate&&!yr)return sl(C),null}else 2*lo()-ye.renderingStartTime>$f&&F!==1073741824&&(C.flags|=128,Q=!0,mf(ye,!1),C.lanes=4194304);ye.isBackwards?(et.sibling=C.child,C.child=et):(F=ye.last,F!==null?F.sibling=et:C.child=et,ye.last=et)}return ye.tail!==null?(C=ye.tail,ye.rendering=C,ye.tail=C.sibling,ye.renderingStartTime=lo(),C.sibling=null,F=ut.current,bs(ut,Q?F&1|2:F&1),C):(sl(C),null);case 22:case 23:return V0(),Q=C.memoizedState!==null,m!==null&&m.memoizedState!==null!==Q&&(C.flags|=8192),Q&&C.mode&1?Ts&1073741824&&(sl(C),C.subtreeFlags&6&&(C.flags|=8192)):sl(C),null;case 24:return null;case 25:return null}throw Error(t(156,C.tag))}function A(m,C){switch(Ec(C),C.tag){case 1:return ka(C.type)&&ic(),m=C.flags,m&65536?(C.flags=m&-65537|128,C):null;case 3:return Ve(),qs(vr),qs(Os),Ot(),m=C.flags,m&65536&&!(m&128)?(C.flags=m&-65537|128,C):null;case 5:return mt(C),null;case 13:if(qs(ut),m=C.memoizedState,m!==null&&m.dehydrated!==null){if(C.alternate===null)throw Error(t(340));Su()}return m=C.flags,m&65536?(C.flags=m&-65537|128,C):null;case 19:return qs(ut),null;case 4:return Ve(),null;case 10:return _a(C.type._context),null;case 22:case 23:return V0(),null;case 24:return null;default:return null}}var y=!1,I=!1,O=typeof WeakSet=="function"?WeakSet:Set,D=null;function Z(m,C){var F=m.ref;if(F!==null)if(typeof F=="function")try{F(null)}catch(Q){al(m,C,Q)}else F.current=null}function Ae(m,C,F){try{F()}catch(Q){al(m,C,Q)}}var be=!1;function Te(m,C){if(tc=Ie,m=Ho(),$A(m)){if("selectionStart"in m)var F={start:m.selectionStart,end:m.selectionEnd};else e:{F=(F=m.ownerDocument)&&F.defaultView||window;var Q=F.getSelection&&F.getSelection();if(Q&&Q.rangeCount!==0){F=Q.anchorNode;var ue=Q.anchorOffset,ye=Q.focusNode;Q=Q.focusOffset;try{F.nodeType,ye.nodeType}catch{F=null;break e}var et=0,kt=-1,Gt=-1,wn=0,cr=0,gr=m,tr=null;t:for(;;){for(var jr;gr!==F||ue!==0&&gr.nodeType!==3||(kt=et+ue),gr!==ye||Q!==0&&gr.nodeType!==3||(Gt=et+Q),gr.nodeType===3&&(et+=gr.nodeValue.length),(jr=gr.firstChild)!==null;)tr=gr,gr=jr;for(;;){if(gr===m)break t;if(tr===F&&++wn===ue&&(kt=et),tr===ye&&++cr===Q&&(Gt=et),(jr=gr.nextSibling)!==null)break;gr=tr,tr=gr.parentNode}gr=jr}F=kt===-1||Gt===-1?null:{start:kt,end:Gt}}else F=null}F=F||{start:0,end:0}}else F=null;for(Ql={focusedElem:m,selectionRange:F},Ie=!1,D=C;D!==null;)if(C=D,m=C.child,(C.subtreeFlags&1028)!==0&&m!==null)m.return=C,D=m;else for(;D!==null;){C=D;try{var oi=C.alternate;if(C.flags&1024)switch(C.tag){case 0:case 11:case 15:break;case 1:if(oi!==null){var ui=oi.memoizedProps,ll=oi.memoizedState,An=C.stateNode,en=An.getSnapshotBeforeUpdate(C.elementType===C.type?ui:Qa(C.type,ui),ll);An.__reactInternalSnapshotBeforeUpdate=en}break;case 3:var hn=C.stateNode.containerInfo;hn.nodeType===1?hn.textContent="":hn.nodeType===9&&hn.documentElement&&hn.removeChild(hn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(_r){al(C,C.return,_r)}if(m=C.sibling,m!==null){m.return=C.return,D=m;break}D=C.return}return oi=be,be=!1,oi}function je(m,C,F){var Q=C.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var ue=Q=Q.next;do{if((ue.tag&m)===m){var ye=ue.destroy;ue.destroy=void 0,ye!==void 0&&Ae(C,F,ye)}ue=ue.next}while(ue!==Q)}}function yt(m,C){if(C=C.updateQueue,C=C!==null?C.lastEffect:null,C!==null){var F=C=C.next;do{if((F.tag&m)===m){var Q=F.create;F.destroy=Q()}F=F.next}while(F!==C)}}function St(m){var C=m.ref;if(C!==null){var F=m.stateNode;switch(m.tag){case 5:m=F;break;default:m=F}typeof C=="function"?C(m):C.current=m}}function Jt(m){var C=m.alternate;C!==null&&(m.alternate=null,Jt(C)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(C=m.stateNode,C!==null&&(delete C[EA],delete C[wc],delete C[Xc],delete C[ot],delete C[Na])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function qt(m){return m.tag===5||m.tag===3||m.tag===4}function En(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||qt(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Fn(m,C,F){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,C?F.nodeType===8?F.parentNode.insertBefore(m,C):F.insertBefore(m,C):(F.nodeType===8?(C=F.parentNode,C.insertBefore(m,F)):(C=F,C.appendChild(m)),F=F._reactRootContainer,F!=null||C.onclick!==null||(C.onclick=Nu));else if(Q!==4&&(m=m.child,m!==null))for(Fn(m,C,F),m=m.sibling;m!==null;)Fn(m,C,F),m=m.sibling}function Jn(m,C,F){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,C?F.insertBefore(m,C):F.appendChild(m);else if(Q!==4&&(m=m.child,m!==null))for(Jn(m,C,F),m=m.sibling;m!==null;)Jn(m,C,F),m=m.sibling}var sr=null,xr=!1;function hr(m,C,F){for(F=F.child;F!==null;)Ur(m,C,F),F=F.sibling}function Ur(m,C,F){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(oa,F)}catch{}switch(F.tag){case 5:I||Z(F,C);case 6:var Q=sr,ue=xr;sr=null,hr(m,C,F),sr=Q,xr=ue,sr!==null&&(xr?(m=sr,F=F.stateNode,m.nodeType===8?m.parentNode.removeChild(F):m.removeChild(F)):sr.removeChild(F.stateNode));break;case 18:sr!==null&&(xr?(m=sr,F=F.stateNode,m.nodeType===8?ih(m.parentNode,F):m.nodeType===1&&ih(m,F),Di(m)):ih(sr,F.stateNode));break;case 4:Q=sr,ue=xr,sr=F.stateNode.containerInfo,xr=!0,hr(m,C,F),sr=Q,xr=ue;break;case 0:case 11:case 14:case 15:if(!I&&(Q=F.updateQueue,Q!==null&&(Q=Q.lastEffect,Q!==null))){ue=Q=Q.next;do{var ye=ue,et=ye.destroy;ye=ye.tag,et!==void 0&&(ye&2||ye&4)&&Ae(F,C,et),ue=ue.next}while(ue!==Q)}hr(m,C,F);break;case 1:if(!I&&(Z(F,C),Q=F.stateNode,typeof Q.componentWillUnmount=="function"))try{Q.props=F.memoizedProps,Q.state=F.memoizedState,Q.componentWillUnmount()}catch(kt){al(F,C,kt)}hr(m,C,F);break;case 21:hr(m,C,F);break;case 22:F.mode&1?(I=(Q=I)||F.memoizedState!==null,hr(m,C,F),I=Q):hr(m,C,F);break;default:hr(m,C,F)}}function li(m){var C=m.updateQueue;if(C!==null){m.updateQueue=null;var F=m.stateNode;F===null&&(F=m.stateNode=new O),C.forEach(function(Q){var ue=n1.bind(null,m,Q);F.has(Q)||(F.add(Q),Q.then(ue,ue))})}}function Gr(m,C){var F=C.deletions;if(F!==null)for(var Q=0;Q<F.length;Q++){var ue=F[Q];try{var ye=m,et=C,kt=et;e:for(;kt!==null;){switch(kt.tag){case 5:sr=kt.stateNode,xr=!1;break e;case 3:sr=kt.stateNode.containerInfo,xr=!0;break e;case 4:sr=kt.stateNode.containerInfo,xr=!0;break e}kt=kt.return}if(sr===null)throw Error(t(160));Ur(ye,et,ue),sr=null,xr=!1;var Gt=ue.alternate;Gt!==null&&(Gt.return=null),ue.return=null}catch(wn){al(ue,C,wn)}}if(C.subtreeFlags&12854)for(C=C.child;C!==null;)Ji(C,m),C=C.sibling}function Ji(m,C){var F=m.alternate,Q=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Gr(C,m),To(m),Q&4){try{je(3,m,m.return),yt(3,m)}catch(ui){al(m,m.return,ui)}try{je(5,m,m.return)}catch(ui){al(m,m.return,ui)}}break;case 1:Gr(C,m),To(m),Q&512&&F!==null&&Z(F,F.return);break;case 5:if(Gr(C,m),To(m),Q&512&&F!==null&&Z(F,F.return),m.flags&32){var ue=m.stateNode;try{tt(ue,"")}catch(ui){al(m,m.return,ui)}}if(Q&4&&(ue=m.stateNode,ue!=null)){var ye=m.memoizedProps,et=F!==null?F.memoizedProps:ye,kt=m.type,Gt=m.updateQueue;if(m.updateQueue=null,Gt!==null)try{kt==="input"&&ye.type==="radio"&&ye.name!=null&&Lt(ue,ye),_e(kt,et);var wn=_e(kt,ye);for(et=0;et<Gt.length;et+=2){var cr=Gt[et],gr=Gt[et+1];cr==="style"?rr(ue,gr):cr==="dangerouslySetInnerHTML"?me(ue,gr):cr==="children"?tt(ue,gr):ie(ue,cr,gr,wn)}switch(kt){case"input":gn(ue,ye);break;case"textarea":Mr(ue,ye);break;case"select":var tr=ue._wrapperState.wasMultiple;ue._wrapperState.wasMultiple=!!ye.multiple;var jr=ye.value;jr!=null?Kn(ue,!!ye.multiple,jr,!1):tr!==!!ye.multiple&&(ye.defaultValue!=null?Kn(ue,!!ye.multiple,ye.defaultValue,!0):Kn(ue,!!ye.multiple,ye.multiple?[]:"",!1))}ue[wc]=ye}catch(ui){al(m,m.return,ui)}}break;case 6:if(Gr(C,m),To(m),Q&4){if(m.stateNode===null)throw Error(t(162));ue=m.stateNode,ye=m.memoizedProps;try{ue.nodeValue=ye}catch(ui){al(m,m.return,ui)}}break;case 3:if(Gr(C,m),To(m),Q&4&&F!==null&&F.memoizedState.isDehydrated)try{Di(C.containerInfo)}catch(ui){al(m,m.return,ui)}break;case 4:Gr(C,m),To(m);break;case 13:Gr(C,m),To(m),ue=m.child,ue.flags&8192&&(ye=ue.memoizedState!==null,ue.stateNode.isHidden=ye,!ye||ue.alternate!==null&&ue.alternate.memoizedState!==null||(gf=lo())),Q&4&&li(m);break;case 22:if(cr=F!==null&&F.memoizedState!==null,m.mode&1?(I=(wn=I)||cr,Gr(C,m),I=wn):Gr(C,m),To(m),Q&8192){if(wn=m.memoizedState!==null,(m.stateNode.isHidden=wn)&&!cr&&m.mode&1)for(D=m,cr=m.child;cr!==null;){for(gr=D=cr;D!==null;){switch(tr=D,jr=tr.child,tr.tag){case 0:case 11:case 14:case 15:je(4,tr,tr.return);break;case 1:Z(tr,tr.return);var oi=tr.stateNode;if(typeof oi.componentWillUnmount=="function"){Q=tr,F=tr.return;try{C=Q,oi.props=C.memoizedProps,oi.state=C.memoizedState,oi.componentWillUnmount()}catch(ui){al(Q,F,ui)}}break;case 5:Z(tr,tr.return);break;case 22:if(tr.memoizedState!==null){xa(gr);continue}}jr!==null?(jr.return=tr,D=jr):xa(gr)}cr=cr.sibling}e:for(cr=null,gr=m;;){if(gr.tag===5){if(cr===null){cr=gr;try{ue=gr.stateNode,wn?(ye=ue.style,typeof ye.setProperty=="function"?ye.setProperty("display","none","important"):ye.display="none"):(kt=gr.stateNode,Gt=gr.memoizedProps.style,et=Gt!=null&&Gt.hasOwnProperty("display")?Gt.display:null,kt.style.display=on("display",et))}catch(ui){al(m,m.return,ui)}}}else if(gr.tag===6){if(cr===null)try{gr.stateNode.nodeValue=wn?"":gr.memoizedProps}catch(ui){al(m,m.return,ui)}}else if((gr.tag!==22&&gr.tag!==23||gr.memoizedState===null||gr===m)&&gr.child!==null){gr.child.return=gr,gr=gr.child;continue}if(gr===m)break e;for(;gr.sibling===null;){if(gr.return===null||gr.return===m)break e;cr===gr&&(cr=null),gr=gr.return}cr===gr&&(cr=null),gr.sibling.return=gr.return,gr=gr.sibling}}break;case 19:Gr(C,m),To(m),Q&4&&li(m);break;case 21:break;default:Gr(C,m),To(m)}}function To(m){var C=m.flags;if(C&2){try{e:{for(var F=m.return;F!==null;){if(qt(F)){var Q=F;break e}F=F.return}throw Error(t(160))}switch(Q.tag){case 5:var ue=Q.stateNode;Q.flags&32&&(tt(ue,""),Q.flags&=-33);var ye=En(m);Jn(m,ye,ue);break;case 3:case 4:var et=Q.stateNode.containerInfo,kt=En(m);Fn(m,kt,et);break;default:throw Error(t(161))}}catch(Gt){al(m,m.return,Gt)}m.flags&=-3}C&4096&&(m.flags&=-4097)}function qa(m,C,F){D=m,la(m)}function la(m,C,F){for(var Q=(m.mode&1)!==0;D!==null;){var ue=D,ye=ue.child;if(ue.tag===22&&Q){var et=ue.memoizedState!==null||y;if(!et){var kt=ue.alternate,Gt=kt!==null&&kt.memoizedState!==null||I;kt=y;var wn=I;if(y=et,(I=Gt)&&!wn)for(D=ue;D!==null;)et=D,Gt=et.child,et.tag===22&&et.memoizedState!==null?Ra(ue):Gt!==null?(Gt.return=et,D=Gt):Ra(ue);for(;ye!==null;)D=ye,la(ye),ye=ye.sibling;D=ue,y=kt,I=wn}ba(m)}else ue.subtreeFlags&8772&&ye!==null?(ye.return=ue,D=ye):ba(m)}}function ba(m){for(;D!==null;){var C=D;if(C.flags&8772){var F=C.alternate;try{if(C.flags&8772)switch(C.tag){case 0:case 11:case 15:I||yt(5,C);break;case 1:var Q=C.stateNode;if(C.flags&4&&!I)if(F===null)Q.componentDidMount();else{var ue=C.elementType===C.type?F.memoizedProps:Qa(C.type,F.memoizedProps);Q.componentDidUpdate(ue,F.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var ye=C.updateQueue;ye!==null&&N(C,ye,Q);break;case 3:var et=C.updateQueue;if(et!==null){if(F=null,C.child!==null)switch(C.child.tag){case 5:F=C.child.stateNode;break;case 1:F=C.child.stateNode}N(C,et,F)}break;case 5:var kt=C.stateNode;if(F===null&&C.flags&4){F=kt;var Gt=C.memoizedProps;switch(C.type){case"button":case"input":case"select":case"textarea":Gt.autoFocus&&F.focus();break;case"img":Gt.src&&(F.src=Gt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(C.memoizedState===null){var wn=C.alternate;if(wn!==null){var cr=wn.memoizedState;if(cr!==null){var gr=cr.dehydrated;gr!==null&&Di(gr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}I||C.flags&512&&St(C)}catch(tr){al(C,C.return,tr)}}if(C===m){D=null;break}if(F=C.sibling,F!==null){F.return=C.return,D=F;break}D=C.return}}function xa(m){for(;D!==null;){var C=D;if(C===m){D=null;break}var F=C.sibling;if(F!==null){F.return=C.return,D=F;break}D=C.return}}function Ra(m){for(;D!==null;){var C=D;try{switch(C.tag){case 0:case 11:case 15:var F=C.return;try{yt(4,C)}catch(Gt){al(C,F,Gt)}break;case 1:var Q=C.stateNode;if(typeof Q.componentDidMount=="function"){var ue=C.return;try{Q.componentDidMount()}catch(Gt){al(C,ue,Gt)}}var ye=C.return;try{St(C)}catch(Gt){al(C,ye,Gt)}break;case 5:var et=C.return;try{St(C)}catch(Gt){al(C,et,Gt)}}}catch(Gt){al(C,C.return,Gt)}if(C===m){D=null;break}var kt=C.sibling;if(kt!==null){kt.return=C.return,D=kt;break}D=C.return}}var Hl=Math.ceil,Ya=J.ReactCurrentDispatcher,wa=J.ReactCurrentOwner,fs=J.ReactCurrentBatchConfig,yi=0,Jo=null,ua=null,pa=0,Ts=0,Fl=Ia(0),Do=0,Fd=null,Cl=0,KA=0,nd=0,_l=null,bl=null,gf=0,$f=1/0,Lh=null,yf=!1,n0=null,vf=null,r0=!1,Cf=null,FA=0,_m=0,Y0=null,bm=-1,Vf=0;function pA(){return yi&6?lo():bm!==-1?bm:bm=lo()}function Uh(m){return m.mode&1?yi&2&&pa!==0?pa&-pa:ks.transition!==null?(Vf===0&&(Vf=el()),Vf):(m=Lr,m!==0||(m=window.event,m=m===void 0?16:di(m.type)),m):1}function rd(m,C,F,Q){if(50<_m)throw _m=0,Y0=null,Error(t(185));da(m,F,Q),(!(yi&2)||m!==Jo)&&(m===Jo&&(!(yi&2)&&(KA|=F),Do===4&&_f(m,pa)),uc(m,Q),F===1&&yi===0&&!(C.mode&1)&&($f=lo()+500,Sd&&hA()))}function uc(m,C){var F=m.callbackNode;ii(m,C);var Q=Gs(m,m===Jo?pa:0);if(Q===0)F!==null&&rs(F),m.callbackNode=null,m.callbackPriority=0;else if(C=Q&-Q,m.callbackPriority!==C){if(F!=null&&rs(F),C===1)m.tag===0?oc(e1.bind(null,m)):BA(e1.bind(null,m)),_d(function(){!(yi&6)&&hA()}),F=null;else{switch(Bi(Q)){case 1:F=iu;break;case 4:F=ao;break;case 16:F=Fr;break;case 536870912:F=Rs;break;default:F=Fr}F=Fp(F,Hf.bind(null,m))}m.callbackPriority=C,m.callbackNode=F}}function Hf(m,C){if(bm=-1,Vf=0,yi&6)throw Error(t(327));var F=m.callbackNode;if(Kp()&&m.callbackNode!==F)return null;var Q=Gs(m,m===Jo?pa:0);if(Q===0)return null;if(Q&30||Q&m.expiredLanes||C)C=$a(m,Q);else{C=Q;var ue=yi;yi|=2;var ye=s0();(Jo!==m||pa!==C)&&(Lh=null,$f=lo()+500,Ld(m,C));do try{rv();break}catch(kt){H0(m,kt)}while(!0);Eu(),Ya.current=ye,yi=ue,ua!==null?C=0:(Jo=null,pa=0,C=Do)}if(C!==0){if(C===2&&(ue=Mi(m),ue!==0&&(Q=ue,C=$0(m,ue))),C===1)throw F=Fd,Ld(m,0),_f(m,Q),uc(m,lo()),F;if(C===6)_f(m,Q);else{if(ue=m.current.alternate,!(Q&30)&&!nv(ue)&&(C=$a(m,Q),C===2&&(ye=Mi(m),ye!==0&&(Q=ye,C=$0(m,ye))),C===1))throw F=Fd,Ld(m,0),_f(m,Q),uc(m,lo()),F;switch(m.finishedWork=ue,m.finishedLanes=Q,C){case 0:case 1:throw Error(t(345));case 2:zh(m,bl,Lh);break;case 3:if(_f(m,Q),(Q&130023424)===Q&&(C=gf+500-lo(),10<C)){if(Gs(m,0)!==0)break;if(ue=m.suspendedLanes,(ue&Q)!==Q){pA(),m.pingedLanes|=m.suspendedLanes&ue;break}m.timeoutHandle=fl(zh.bind(null,m,bl,Lh),C);break}zh(m,bl,Lh);break;case 4:if(_f(m,Q),(Q&4194240)===Q)break;for(C=m.eventTimes,ue=-1;0<Q;){var et=31-yn(Q);ye=1<<et,et=C[et],et>ue&&(ue=et),Q&=~ye}if(Q=ue,Q=lo()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*Hl(Q/1960))-Q,10<Q){m.timeoutHandle=fl(zh.bind(null,m,bl,Lh),Q);break}zh(m,bl,Lh);break;case 5:zh(m,bl,Lh);break;default:throw Error(t(329))}}}return uc(m,lo()),m.callbackNode===F?Hf.bind(null,m):null}function $0(m,C){var F=_l;return m.current.memoizedState.isDehydrated&&(Ld(m,C).flags|=256),m=$a(m,C),m!==2&&(C=bl,bl=F,C!==null&&i0(C)),m}function i0(m){bl===null?bl=m:bl.push.apply(bl,m)}function nv(m){for(var C=m;;){if(C.flags&16384){var F=C.updateQueue;if(F!==null&&(F=F.stores,F!==null))for(var Q=0;Q<F.length;Q++){var ue=F[Q],ye=ue.getSnapshot;ue=ue.value;try{if(!ln(ye(),ue))return!1}catch{return!1}}}if(F=C.child,C.subtreeFlags&16384&&F!==null)F.return=C,C=F;else{if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return!0;C=C.return}C.sibling.return=C.return,C=C.sibling}}return!0}function _f(m,C){for(C&=~nd,C&=~KA,m.suspendedLanes|=C,m.pingedLanes&=~C,m=m.expirationTimes;0<C;){var F=31-yn(C),Q=1<<F;m[F]=-1,C&=~Q}}function e1(m){if(yi&6)throw Error(t(327));Kp();var C=Gs(m,0);if(!(C&1))return uc(m,lo()),null;var F=$a(m,C);if(m.tag!==0&&F===2){var Q=Mi(m);Q!==0&&(C=Q,F=$0(m,Q))}if(F===1)throw F=Fd,Ld(m,0),_f(m,C),uc(m,lo()),F;if(F===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=C,zh(m,bl,Lh),uc(m,lo()),null}function o0(m,C){var F=yi;yi|=1;try{return m(C)}finally{yi=F,yi===0&&($f=lo()+500,Sd&&hA())}}function Zf(m){Cf!==null&&Cf.tag===0&&!(yi&6)&&Kp();var C=yi;yi|=1;var F=fs.transition,Q=Lr;try{if(fs.transition=null,Lr=1,m)return m()}finally{Lr=Q,fs.transition=F,yi=C,!(yi&6)&&hA()}}function V0(){Ts=Fl.current,qs(Fl)}function Ld(m,C){m.finishedWork=null,m.finishedLanes=0;var F=m.timeoutHandle;if(F!==-1&&(m.timeoutHandle=-1,nc(F)),ua!==null)for(F=ua.return;F!==null;){var Q=F;switch(Ec(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&ic();break;case 3:Ve(),qs(vr),qs(Os),Ot();break;case 5:mt(Q);break;case 4:Ve();break;case 13:qs(ut);break;case 19:qs(ut);break;case 10:_a(Q.type._context);break;case 22:case 23:V0()}F=F.return}if(Jo=m,ua=m=Ud(m.current,null),pa=Ts=C,Do=0,Fd=null,nd=KA=Cl=0,bl=_l=null,fA!==null){for(C=0;C<fA.length;C++)if(F=fA[C],Q=F.interleaved,Q!==null){F.interleaved=null;var ue=Q.next,ye=F.pending;if(ye!==null){var et=ye.next;ye.next=ue,Q.next=et}F.pending=Q}fA=null}return m}function H0(m,C){do{var F=ua;try{if(Eu(),Pt.current=kd,bn){for(var Q=Rt.memoizedState;Q!==null;){var ue=Q.queue;ue!==null&&(ue.pending=null),Q=Q.next}bn=!1}if(jt=0,Xt=nn=Rt=null,xn=!1,Cn=0,wa.current=null,F===null||F.return===null){Do=1,Fd=C,ua=null;break}e:{var ye=m,et=F.return,kt=F,Gt=C;if(C=pa,kt.flags|=32768,Gt!==null&&typeof Gt=="object"&&typeof Gt.then=="function"){var wn=Gt,cr=kt,gr=cr.tag;if(!(cr.mode&1)&&(gr===0||gr===11||gr===15)){var tr=cr.alternate;tr?(cr.updateQueue=tr.updateQueue,cr.memoizedState=tr.memoizedState,cr.lanes=tr.lanes):(cr.updateQueue=null,cr.memoizedState=null)}var jr=Tp(et);if(jr!==null){jr.flags&=-257,Pd(jr,et,kt,ye,C),jr.mode&1&&qf(ye,wn,C),C=jr,Gt=wn;var oi=C.updateQueue;if(oi===null){var ui=new Set;ui.add(Gt),C.updateQueue=ui}else oi.add(Gt);break e}else{if(!(C&1)){qf(ye,wn,C),a0();break e}Gt=Error(t(426))}}else if(yr&&kt.mode&1){var ll=Tp(et);if(ll!==null){!(ll.flags&65536)&&(ll.flags|=256),Pd(ll,et,kt,ye,C),Ro(lc(Gt,kt));break e}}ye=Gt=lc(Gt,kt),Do!==4&&(Do=2),_l===null?_l=[ye]:_l.push(ye),ye=et;do{switch(ye.tag){case 3:ye.flags|=65536,C&=-C,ye.lanes|=C;var An=Ah(ye,Gt,C);M(ye,An);break e;case 1:kt=Gt;var en=ye.type,hn=ye.stateNode;if(!(ye.flags&128)&&(typeof en.getDerivedStateFromError=="function"||hn!==null&&typeof hn.componentDidCatch=="function"&&(vf===null||!vf.has(hn)))){ye.flags|=65536,C&=-C,ye.lanes|=C;var _r=Qf(ye,kt,C);M(ye,_r);break e}}ye=ye.return}while(ye!==null)}l0(F)}catch(ri){C=ri,ua===F&&F!==null&&(ua=F=F.return);continue}break}while(!0)}function s0(){var m=Ya.current;return Ya.current=kd,m===null?kd:m}function a0(){(Do===0||Do===3||Do===2)&&(Do=4),Jo===null||!(Cl&268435455)&&!(KA&268435455)||_f(Jo,pa)}function $a(m,C){var F=yi;yi|=2;var Q=s0();(Jo!==m||pa!==C)&&(Lh=null,Ld(m,C));do try{Z0();break}catch(ue){H0(m,ue)}while(!0);if(Eu(),yi=F,Ya.current=Q,ua!==null)throw Error(t(261));return Jo=null,pa=0,Do}function Z0(){for(;ua!==null;)X0(ua)}function rv(){for(;ua!==null&&!ca();)X0(ua)}function X0(m){var C=jh(m.alternate,m,Ts);m.memoizedProps=m.pendingProps,C===null?l0(m):ua=C,wa.current=null}function l0(m){var C=m;do{var F=C.alternate;if(m=C.return,C.flags&32768){if(F=A(F,C),F!==null){F.flags&=32767,ua=F;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Do=6,ua=null;return}}else if(F=Dp(F,C,Ts),F!==null){ua=F;return}if(C=C.sibling,C!==null){ua=C;return}ua=C=m}while(C!==null);Do===0&&(Do=5)}function zh(m,C,F){var Q=Lr,ue=fs.transition;try{fs.transition=null,Lr=1,iv(m,C,F,Q)}finally{fs.transition=ue,Lr=Q}return null}function iv(m,C,F,Q){do Kp();while(Cf!==null);if(yi&6)throw Error(t(327));F=m.finishedWork;var ue=m.finishedLanes;if(F===null)return null;if(m.finishedWork=null,m.finishedLanes=0,F===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var ye=F.lanes|F.childLanes;if(aA(m,ye),m===Jo&&(ua=Jo=null,pa=0),!(F.subtreeFlags&2064)&&!(F.flags&2064)||r0||(r0=!0,Fp(Fr,function(){return Kp(),null})),ye=(F.flags&15990)!==0,F.subtreeFlags&15990||ye){ye=fs.transition,fs.transition=null;var et=Lr;Lr=1;var kt=yi;yi|=4,wa.current=null,Te(m,F),Ji(F,m),Ep(Ql),Ie=!!tc,Ql=tc=null,m.current=F,qa(F),dl(),yi=kt,Lr=et,fs.transition=ye}else m.current=F;if(r0&&(r0=!1,Cf=m,FA=ue),ye=m.pendingLanes,ye===0&&(vf=null),Mt(F.stateNode),uc(m,lo()),C!==null)for(Q=m.onRecoverableError,F=0;F<C.length;F++)ue=C[F],Q(ue.value,{componentStack:ue.stack,digest:ue.digest});if(yf)throw yf=!1,m=n0,n0=null,m;return FA&1&&m.tag!==0&&Kp(),ye=m.pendingLanes,ye&1?m===Y0?_m++:(_m=0,Y0=m):_m=0,hA(),null}function Kp(){if(Cf!==null){var m=Bi(FA),C=fs.transition,F=Lr;try{if(fs.transition=null,Lr=16>m?16:m,Cf===null)var Q=!1;else{if(m=Cf,Cf=null,FA=0,yi&6)throw Error(t(331));var ue=yi;for(yi|=4,D=m.current;D!==null;){var ye=D,et=ye.child;if(D.flags&16){var kt=ye.deletions;if(kt!==null){for(var Gt=0;Gt<kt.length;Gt++){var wn=kt[Gt];for(D=wn;D!==null;){var cr=D;switch(cr.tag){case 0:case 11:case 15:je(8,cr,ye)}var gr=cr.child;if(gr!==null)gr.return=cr,D=gr;else for(;D!==null;){cr=D;var tr=cr.sibling,jr=cr.return;if(Jt(cr),cr===wn){D=null;break}if(tr!==null){tr.return=jr,D=tr;break}D=jr}}}var oi=ye.alternate;if(oi!==null){var ui=oi.child;if(ui!==null){oi.child=null;do{var ll=ui.sibling;ui.sibling=null,ui=ll}while(ui!==null)}}D=ye}}if(ye.subtreeFlags&2064&&et!==null)et.return=ye,D=et;else e:for(;D!==null;){if(ye=D,ye.flags&2048)switch(ye.tag){case 0:case 11:case 15:je(9,ye,ye.return)}var An=ye.sibling;if(An!==null){An.return=ye.return,D=An;break e}D=ye.return}}var en=m.current;for(D=en;D!==null;){et=D;var hn=et.child;if(et.subtreeFlags&2064&&hn!==null)hn.return=et,D=hn;else e:for(et=en;D!==null;){if(kt=D,kt.flags&2048)try{switch(kt.tag){case 0:case 11:case 15:yt(9,kt)}}catch(ri){al(kt,kt.return,ri)}if(kt===et){D=null;break e}var _r=kt.sibling;if(_r!==null){_r.return=kt.return,D=_r;break e}D=kt.return}}if(yi=ue,hA(),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(oa,m)}catch{}Q=!0}return Q}finally{Lr=F,fs.transition=C}}return!1}function u0(m,C,F){C=lc(F,C),C=Ah(m,C,1),m=c(m,C,1),C=pA(),m!==null&&(da(m,1,C),uc(m,C))}function al(m,C,F){if(m.tag===3)u0(m,m,F);else for(;C!==null;){if(C.tag===3){u0(C,m,F);break}else if(C.tag===1){var Q=C.stateNode;if(typeof C.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(vf===null||!vf.has(Q))){m=lc(F,m),m=Qf(C,m,1),C=c(C,m,1),m=pA(),C!==null&&(da(C,1,m),uc(C,m));break}}C=C.return}}function t1(m,C,F){var Q=m.pingCache;Q!==null&&Q.delete(C),C=pA(),m.pingedLanes|=m.suspendedLanes&F,Jo===m&&(pa&F)===F&&(Do===4||Do===3&&(pa&130023424)===pa&&500>lo()-gf?Ld(m,0):nd|=F),uc(m,C)}function mA(m,C){C===0&&(m.mode&1?(C=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):C=1);var F=pA();m=Hu(m,C),m!==null&&(da(m,C,F),uc(m,F))}function J0(m){var C=m.memoizedState,F=0;C!==null&&(F=C.retryLane),mA(m,F)}function n1(m,C){var F=0;switch(m.tag){case 13:var Q=m.stateNode,ue=m.memoizedState;ue!==null&&(F=ue.retryLane);break;case 19:Q=m.stateNode;break;default:throw Error(t(314))}Q!==null&&Q.delete(C),mA(m,F)}var jh;jh=function(m,C,F){if(m!==null)if(m.memoizedProps!==C.pendingProps||vr.current)Vl=!0;else{if(!(m.lanes&F)&&!(C.flags&128))return Vl=!1,t0(m,C,F);Vl=!!(m.flags&131072)}else Vl=!1,yr&&C.flags&1048576&&sh(C,wu,C.index);switch(C.lanes=0,C.tag){case 2:var Q=C.type;Rp(m,C),m=C.pendingProps;var ue=Jc(C,Os.current);Au(C,F),ue=Pr(null,C,Q,m,ue,F);var ye=Oi();return C.flags|=1,typeof ue=="object"&&ue!==null&&typeof ue.render=="function"&&ue.$$typeof===void 0?(C.tag=1,C.memoizedState=null,C.updateQueue=null,ka(Q)?(ye=!0,Si(C)):ye=!1,C.memoizedState=ue.state!==null&&ue.state!==void 0?ue.state:null,Bd(C),ue.updater=Dh,C.stateNode=ue,ue._reactInternals=C,gm(C,Q,m,F),C=Fh(null,C,Q,!0,ye,F)):(C.tag=0,yr&&ye&&OA(C),Kl(null,C,ue,F),C=C.child),C;case 16:Q=C.elementType;e:{switch(Rp(m,C),m=C.pendingProps,ue=Q._init,Q=ue(Q._payload),C.type=Q,ue=C.tag=A0(Q),m=Qa(Q,m),ue){case 0:C=Rd(null,C,Q,m,F);break e;case 1:C=DA(null,C,Q,m,F);break e;case 11:C=ym(null,C,Q,m,F);break e;case 14:C=Yf(null,C,Q,Qa(Q.type,m),F);break e}throw Error(t(306,Q,""))}return C;case 0:return Q=C.type,ue=C.pendingProps,ue=C.elementType===Q?ue:Qa(Q,ue),Rd(m,C,Q,ue,F);case 1:return Q=C.type,ue=C.pendingProps,ue=C.elementType===Q?ue:Qa(Q,ue),DA(m,C,Q,ue,F);case 3:e:{if(Pp(C),m===null)throw Error(t(387));Q=C.pendingProps,ye=C.memoizedState,ue=ye.element,T(m,C),R(C,Q,null,F);var et=C.memoizedState;if(Q=et.element,ye.isDehydrated)if(ye={element:Q,isDehydrated:!1,cache:et.cache,pendingSuspenseBoundaries:et.pendingSuspenseBoundaries,transitions:et.transitions},C.updateQueue.baseState=ye,C.memoizedState=ye,C.flags&256){ue=lc(Error(t(423)),C),C=Pc(m,C,Q,F,ue);break e}else if(Q!==ue){ue=lc(Error(t(424)),C),C=Pc(m,C,Q,F,ue);break e}else for(ha=rc(C.stateNode.containerInfo.firstChild),ys=C,yr=!0,Zr=null,F=Bc(C,null,Q,F),C.child=F;F;)F.flags=F.flags&-3|4096,F=F.sibling;else{if(Su(),Q===ue){C=Ou(m,C,F);break e}Kl(m,C,Q,F)}C=C.child}return C;case 5:return Xe(C),m===null&&xs(C),Q=C.type,ue=C.pendingProps,ye=m!==null?m.memoizedProps:null,et=ue.children,SA(Q,ue)?et=null:ye!==null&&SA(Q,ye)&&(C.flags|=32),hf(m,C),Kl(m,C,et,F),C.child;case 6:return m===null&&xs(C),null;case 13:return ch(m,C,F);case 4:return De(C,C.stateNode.containerInfo),Q=C.pendingProps,m===null?C.child=Ys(C,null,Q,F):Kl(m,C,Q,F),C.child;case 11:return Q=C.type,ue=C.pendingProps,ue=C.elementType===Q?ue:Qa(Q,ue),ym(m,C,Q,ue,F);case 7:return Kl(m,C,C.pendingProps,F),C.child;case 8:return Kl(m,C,C.pendingProps.children,F),C.child;case 12:return Kl(m,C,C.pendingProps.children,F),C.child;case 10:e:{if(Q=C.type._context,ue=C.pendingProps,ye=C.memoizedProps,et=ue.value,bs(Yl,Q._currentValue),Q._currentValue=et,ye!==null)if(ln(ye.value,et)){if(ye.children===ue.children&&!vr.current){C=Ou(m,C,F);break e}}else for(ye=C.child,ye!==null&&(ye.return=C);ye!==null;){var kt=ye.dependencies;if(kt!==null){et=ye.child;for(var Gt=kt.firstContext;Gt!==null;){if(Gt.context===Q){if(ye.tag===1){Gt=l(-1,F&-F),Gt.tag=2;var wn=ye.updateQueue;if(wn!==null){wn=wn.shared;var cr=wn.pending;cr===null?Gt.next=Gt:(Gt.next=cr.next,cr.next=Gt),wn.pending=Gt}}ye.lanes|=F,Gt=ye.alternate,Gt!==null&&(Gt.lanes|=F),Js(ye.return,F,C),kt.lanes|=F;break}Gt=Gt.next}}else if(ye.tag===10)et=ye.type===C.type?null:ye.child;else if(ye.tag===18){if(et=ye.return,et===null)throw Error(t(341));et.lanes|=F,kt=et.alternate,kt!==null&&(kt.lanes|=F),Js(et,F,C),et=ye.sibling}else et=ye.child;if(et!==null)et.return=ye;else for(et=ye;et!==null;){if(et===C){et=null;break}if(ye=et.sibling,ye!==null){ye.return=et.return,et=ye;break}et=et.return}ye=et}Kl(m,C,ue.children,F),C=C.child}return C;case 9:return ue=C.type,Q=C.pendingProps.children,Au(C,F),ue=cu(ue),Q=Q(ue),C.flags|=1,Kl(m,C,Q,F),C.child;case 14:return Q=C.type,ue=Qa(Q,C.pendingProps),ue=Qa(Q.type,ue),Yf(m,C,Q,ue,F);case 15:return ko(m,C,C.type,C.pendingProps,F);case 17:return Q=C.type,ue=C.pendingProps,ue=C.elementType===Q?ue:Qa(Q,ue),Rp(m,C),C.tag=1,ka(Q)?(m=!0,Si(C)):m=!1,Au(C,F),uh(C,Q,ue),gm(C,Q,ue,F),Fh(null,C,Q,!0,m,F);case 19:return Kd(m,C,F);case 22:return Ju(m,C,F)}throw Error(t(156,C.tag))};function Fp(m,C){return Ba(m,C)}function xm(m,C,F,Q){this.tag=m,this.key=F,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=C,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function eA(m,C,F,Q){return new xm(m,C,F,Q)}function Xf(m){return m=m.prototype,!(!m||!m.isReactComponent)}function A0(m){if(typeof m=="function")return Xf(m)?1:0;if(m!=null){if(m=m.$$typeof,m===pe)return 11;if(m===ge)return 14}return 2}function Ud(m,C){var F=m.alternate;return F===null?(F=eA(m.tag,C,m.key,m.mode),F.elementType=m.elementType,F.type=m.type,F.stateNode=m.stateNode,F.alternate=m,m.alternate=F):(F.pendingProps=C,F.type=m.type,F.flags=0,F.subtreeFlags=0,F.deletions=null),F.flags=m.flags&14680064,F.childLanes=m.childLanes,F.lanes=m.lanes,F.child=m.child,F.memoizedProps=m.memoizedProps,F.memoizedState=m.memoizedState,F.updateQueue=m.updateQueue,C=m.dependencies,F.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},F.sibling=m.sibling,F.index=m.index,F.ref=m.ref,F}function c0(m,C,F,Q,ue,ye){var et=2;if(Q=m,typeof m=="function")Xf(m)&&(et=1);else if(typeof m=="string")et=5;else e:switch(m){case W:return bf(F.children,ue,ye,C);case oe:et=8,ue|=8;break;case fe:return m=eA(12,F,C,ue|2),m.elementType=fe,m.lanes=ye,m;case we:return m=eA(13,F,C,ue),m.elementType=we,m.lanes=ye,m;case Ke:return m=eA(19,F,C,ue),m.elementType=Ke,m.lanes=ye,m;case Qe:return wm(F,ue,ye,C);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case he:et=10;break e;case Se:et=9;break e;case pe:et=11;break e;case ge:et=14;break e;case st:et=16,Q=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return C=eA(et,F,C,ue),C.elementType=m,C.type=Q,C.lanes=ye,C}function bf(m,C,F,Q){return m=eA(7,m,Q,C),m.lanes=F,m}function wm(m,C,F,Q){return m=eA(22,m,Q,C),m.elementType=Qe,m.lanes=F,m.stateNode={isHidden:!1},m}function eg(m,C,F){return m=eA(6,m,null,C),m.lanes=F,m}function d0(m,C,F){return C=eA(4,m.children!==null?m.children:[],m.key,C),C.lanes=F,C.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},C}function r1(m,C,F,Q,ue){this.tag=C,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ci(0),this.expirationTimes=ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.identifierPrefix=Q,this.onRecoverableError=ue,this.mutableSourceEagerHydrationData=null}function Mm(m,C,F,Q,ue,ye,et,kt,Gt){return m=new r1(m,C,F,kt,Gt),C===1?(C=1,ye===!0&&(C|=8)):C=0,ye=eA(3,null,null,C),m.current=ye,ye.stateNode=m,ye.memoizedState={element:Q,isDehydrated:F,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(ye),m}function tg(m,C,F){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:Q==null?null:""+Q,children:m,containerInfo:C,implementation:F}}function i1(m){if(!m)return dA;m=m._reactInternals;e:{if(Yi(m)!==m||m.tag!==1)throw Error(t(170));var C=m;do{switch(C.tag){case 3:C=C.stateNode.context;break e;case 1:if(ka(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break e}}C=C.return}while(C!==null);throw Error(t(171))}if(m.tag===1){var F=m.type;if(ka(F))return wd(m,F,C)}return C}function o1(m,C,F,Q,ue,ye,et,kt,Gt){return m=Mm(F,Q,!0,m,ue,ye,et,kt,Gt),m.context=i1(null),F=m.current,Q=pA(),ue=Uh(F),ye=l(Q,ue),ye.callback=C??null,c(F,ye,ue),m.current.lanes=ue,da(m,ue,Q),uc(m,Q),m}function Sm(m,C,F,Q){var ue=C.current,ye=pA(),et=Uh(ue);return F=i1(F),C.context===null?C.context=F:C.pendingContext=F,C=l(ye,et),C.payload={element:m},Q=Q===void 0?null:Q,Q!==null&&(C.callback=Q),m=c(ue,C,et),m!==null&&(rd(m,ue,et,ye),_(m,ue,et)),et}function Em(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function Lp(m,C){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var F=m.retryLane;m.retryLane=F!==0&&F<C?F:C}}function id(m,C){Lp(m,C),(m=m.alternate)&&Lp(m,C)}var Nh=typeof reportError=="function"?reportError:function(m){console.error(m)};function h0(m){this._internalRoot=m}Jf.prototype.render=h0.prototype.render=function(m){var C=this._internalRoot;if(C===null)throw Error(t(409));Sm(m,C,null,null)},Jf.prototype.unmount=h0.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var C=m.containerInfo;Zf(function(){Sm(null,m,null,null)}),C[xu]=null}};function Jf(m){this._internalRoot=m}Jf.prototype.unstable_scheduleHydration=function(m){if(m){var C=Qs();m={blockedOn:null,target:m,priority:C};for(var F=0;F<Ks.length&&C!==0&&C<Ks[F].priority;F++);Ks.splice(F,0,m),F===0&&zi(m)}};function f0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function p0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function Bm(){}function ng(m,C,F,Q,ue){if(ue){if(typeof Q=="function"){var ye=Q;Q=function(){var wn=Em(et);ye.call(wn)}}var et=o1(C,Q,m,0,null,!1,!1,"",Bm);return m._reactRootContainer=et,m[xu]=et.current,ju(m.nodeType===8?m.parentNode:m),Zf(),et}for(;ue=m.lastChild;)m.removeChild(ue);if(typeof Q=="function"){var kt=Q;Q=function(){var wn=Em(Gt);kt.call(wn)}}var Gt=Mm(m,0,!1,null,null,!1,!1,"",Bm);return m._reactRootContainer=Gt,m[xu]=Gt.current,ju(m.nodeType===8?m.parentNode:m),Zf(function(){Sm(C,Gt,F,Q)}),Gt}function m0(m,C,F,Q,ue){var ye=F._reactRootContainer;if(ye){var et=ye;if(typeof ue=="function"){var kt=ue;ue=function(){var Gt=Em(et);kt.call(Gt)}}Sm(C,et,m,ue)}else et=ng(F,C,m,ue,Q);return Em(et)}tl=function(m){switch(m.tag){case 3:var C=m.stateNode;if(C.current.memoizedState.isDehydrated){var F=_s(C.pendingLanes);F!==0&&(us(C,F|1),uc(C,lo()),!(yi&6)&&($f=lo()+500,hA()))}break;case 13:Zf(function(){var Q=Hu(m,1);if(Q!==null){var ue=pA();rd(Q,m,1,ue)}}),id(m,1)}},Ds=function(m){if(m.tag===13){var C=Hu(m,134217728);if(C!==null){var F=pA();rd(C,m,134217728,F)}id(m,134217728)}},Eo=function(m){if(m.tag===13){var C=Uh(m),F=Hu(m,C);if(F!==null){var Q=pA();rd(F,m,C,Q)}id(m,C)}},Qs=function(){return Lr},mu=function(m,C){var F=Lr;try{return Lr=m,C()}finally{Lr=F}},$e=function(m,C,F){switch(C){case"input":if(gn(m,F),C=F.name,F.type==="radio"&&C!=null){for(F=m;F.parentNode;)F=F.parentNode;for(F=F.querySelectorAll("input[name="+JSON.stringify(""+C)+'][type="radio"]'),C=0;C<F.length;C++){var Q=F[C];if(Q!==m&&Q.form===m.form){var ue=Bs(Q);if(!ue)throw Error(t(90));Ct(Q),gn(Q,ue)}}}break;case"textarea":Mr(m,F);break;case"select":C=F.value,C!=null&&Kn(m,!!F.multiple,C,!1)}},Nt=o0,wt=Zf;var Up={usingClientEntryPoint:!1,Events:[Ki,Vr,Bs,Qt,Vt,o0]},ep={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zp={bundleType:ep.bundleType,version:ep.version,rendererPackageName:ep.rendererPackageName,rendererConfig:ep.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=Pi(m),m===null?null:m.stateNode},findFiberByHostInstance:ep.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Om=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Om.isDisabled&&Om.supportsFiber)try{oa=Om.inject(zp),Ye=Om}catch{}}return mh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Up,mh.createPortal=function(m,C){var F=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f0(C))throw Error(t(200));return tg(m,C,null,F)},mh.createRoot=function(m,C){if(!f0(m))throw Error(t(299));var F=!1,Q="",ue=Nh;return C!=null&&(C.unstable_strictMode===!0&&(F=!0),C.identifierPrefix!==void 0&&(Q=C.identifierPrefix),C.onRecoverableError!==void 0&&(ue=C.onRecoverableError)),C=Mm(m,1,!1,null,null,F,!1,Q,ue),m[xu]=C.current,ju(m.nodeType===8?m.parentNode:m),new h0(C)},mh.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var C=m._reactInternals;if(C===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=Pi(C),m=m===null?null:m.stateNode,m},mh.flushSync=function(m){return Zf(m)},mh.hydrate=function(m,C,F){if(!p0(C))throw Error(t(200));return m0(null,m,C,!0,F)},mh.hydrateRoot=function(m,C,F){if(!f0(m))throw Error(t(405));var Q=F!=null&&F.hydratedSources||null,ue=!1,ye="",et=Nh;if(F!=null&&(F.unstable_strictMode===!0&&(ue=!0),F.identifierPrefix!==void 0&&(ye=F.identifierPrefix),F.onRecoverableError!==void 0&&(et=F.onRecoverableError)),C=o1(C,null,m,1,F??null,ue,!1,ye,et),m[xu]=C.current,ju(m),Q)for(m=0;m<Q.length;m++)F=Q[m],ue=F._getVersion,ue=ue(F._source),C.mutableSourceEagerHydrationData==null?C.mutableSourceEagerHydrationData=[F,ue]:C.mutableSourceEagerHydrationData.push(F,ue);return new Jf(C)},mh.render=function(m,C,F){if(!p0(C))throw Error(t(200));return m0(null,m,C,!1,F)},mh.unmountComponentAtNode=function(m){if(!p0(m))throw Error(t(40));return m._reactRootContainer?(Zf(function(){m0(null,null,m,!1,function(){m._reactRootContainer=null,m[xu]=null})}),!0):!1},mh.unstable_batchedUpdates=o0,mh.unstable_renderSubtreeIntoContainer=function(m,C,F,Q){if(!p0(F))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return m0(m,C,F,!1,Q)},mh.version="18.3.1-next-f1338f8080-20240426",mh}var PI;function GC(){if(PI)return $3.exports;PI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$3.exports=jQ(),$3.exports}var RI;function NQ(){if(RI)return W_;RI=1;var n=GC();return W_.createRoot=n.createRoot,W_.hydrateRoot=n.hydrateRoot,W_}var WQ=NQ();const GQ="modulepreload",QQ=function(n){return"/maputnik/"+n},DI={},fv=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(d=>{if(d=QQ(d),d in DI)return;DI[d]=!0;const g=d.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${b}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":GQ,g||(E.as="script"),E.crossOrigin="",E.href=d,o&&E.setAttribute("nonce",o),document.head.appendChild(E),g)return new Promise((S,B)=>{E.addEventListener("load",S),E.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},qQ=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Mo=n=>typeof n=="string",pv=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},KI=n=>n==null?"":""+n,YQ=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},$Q=/###/g,FI=n=>n&&n.indexOf("###")>-1?n.replace($Q,"."):n,LI=n=>!n||Mo(n),Hv=(n,e,t)=>{const r=Mo(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(LI(n))return{};const s=FI(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return LI(n)?{}:{obj:n,k:FI(r[i])}},UI=(n,e,t)=>{const{obj:r,k:i}=Hv(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=Hv(n,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=Hv(n,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},VQ=(n,e,t,r)=>{const{obj:i,k:s}=Hv(n,e,Object);i[s]=i[s]||[],i[s].push(t)},Zb=(n,e)=>{const{obj:t,k:r}=Hv(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},HQ=(n,e,t)=>{const r=Zb(n,t);return r!==void 0?r:Zb(e,t)},cL=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Mo(n[r])||n[r]instanceof String||Mo(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):cL(n[r],e[r],t):n[r]=e[r]);return n},d1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ZQ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const XQ=n=>Mo(n)?n.replace(/[&<>"'\/]/g,e=>ZQ[e]):n;class JQ{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const eq=[" ",",","?","!",";"],tq=new JQ(20),nq=(n,e,t)=>{e=e||"",t=t||"";const r=eq.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const i=tq.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(n);if(!s){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(s=!0)}return s},p6=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let a,o="";for(let d=s;d<r.length;++d)if(d!==s&&(o+=t),o+=r[d],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&d<r.length-1)continue;s+=d-s+1;break}i=a}return i},Xb=n=>n==null?void 0:n.replace("_","-"),rq={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class Jb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||rq,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(Mo(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Jb(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Jb(this.logger,e)}}var Jp=new Jb;class lx{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,d]=a;for(let g=0;g<d;g++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,d]=a;for(let g=0;g<d;g++)o.apply(o,[e,...r])})}}class zI extends lx{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var g,b;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):Mo(r)&&s?o.push(...r.split(s)):o.push(r)));const d=Zb(this.data,o);return!d&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),d||!a||!Mo(r)?d:p6((b=(g=this.data)==null?void 0:g[e])==null?void 0:b[t],r,s)}addResource(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),UI(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(Mo(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let d=Zb(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?cL(d,r,s):d={...d,...r},UI(this.data,o,d),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var dL={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,t,r,i))??e}),e}};const jI={};class e2 extends lx{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),YQ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Jp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!nq(e,r,i);if(a&&!o){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Mo(s)?[s]:s};const g=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(g[0])>-1)&&(s=g.shift()),e=g.join(i)}return{key:e,namespaces:Mo(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),d=o[o.length-1],g=t.lng||this.language,b=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode"){if(b){const J=t.nsSeparator||this.options.nsSeparator;return i?{res:`${d}${J}${a}`,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(t)}:`${d}${J}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(t)}:a}const E=this.resolve(e,t);let S=E==null?void 0:E.res;const B=(E==null?void 0:E.usedKey)||a,k=(E==null?void 0:E.exactUsedKey)||a,z=Object.prototype.toString.apply(S),j=["[object Number]","[object Function]","[object RegExp]"],Y=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,ie=!Mo(S)&&typeof S!="boolean"&&typeof S!="number";if(q&&S&&ie&&j.indexOf(z)<0&&!(Mo(Y)&&Array.isArray(S))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const J=this.options.returnedObjectHandler?this.options.returnedObjectHandler(B,S,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(E.res=J,E.usedParams=this.getUsedParamsDetails(t),E):J}if(s){const J=Array.isArray(S),$=J?[]:{},te=J?k:B;for(const W in S)if(Object.prototype.hasOwnProperty.call(S,W)){const oe=`${te}${s}${W}`;$[W]=this.translate(oe,{...t,joinArrays:!1,ns:o}),$[W]===oe&&($[W]=S[W])}S=$}}else if(q&&Mo(Y)&&Array.isArray(S))S=S.join(Y),S&&(S=this.extendTranslation(S,e,t,r));else{let J=!1,$=!1;const te=t.count!==void 0&&!Mo(t.count),W=e2.hasDefaultValue(t),oe=te?this.pluralResolver.getSuffix(g,t.count,t):"",fe=t.ordinal&&te?this.pluralResolver.getSuffix(g,t.count,{ordinal:!1}):"",he=te&&!t.ordinal&&t.count===0,Se=he&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${oe}`]||t[`defaultValue${fe}`]||t.defaultValue;!this.isValidLookup(S)&&W&&(J=!0,S=Se),this.isValidLookup(S)||($=!0,S=a);const we=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&$?void 0:S,Ke=W&&Se!==S&&this.options.updateMissing;if($||J||Ke){if(this.logger.log(Ke?"updateKey":"missingKey",g,d,a,Ke?Se:S),s){const Ze=this.resolve(a,{...t,keySeparator:!1});Ze&&Ze.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ge=[];const st=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&st&&st[0])for(let Ze=0;Ze<st.length;Ze++)ge.push(st[Ze]);else this.options.saveMissingTo==="all"?ge=this.languageUtils.toResolveHierarchy(t.lng||this.language):ge.push(t.lng||this.language);const Qe=(Ze,We,Ce)=>{var it;const Pe=W&&Ce!==S?Ce:we;this.options.missingKeyHandler?this.options.missingKeyHandler(Ze,d,We,Pe,Ke,t):(it=this.backendConnector)!=null&&it.saveMissing&&this.backendConnector.saveMissing(Ze,d,We,Pe,Ke,t),this.emit("missingKey",Ze,d,We,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&te?ge.forEach(Ze=>{const We=this.pluralResolver.getSuffixes(Ze,t);he&&t[`defaultValue${this.options.pluralSeparator}zero`]&&We.indexOf(`${this.options.pluralSeparator}zero`)<0&&We.push(`${this.options.pluralSeparator}zero`),We.forEach(Ce=>{Qe([Ze],a+Ce,t[`defaultValue${Ce}`]||Se)})}):Qe(ge,a,Se))}S=this.extendTranslation(S,e,t,E,r),$&&S===a&&this.options.appendNamespaceToMissingKey&&(S=`${d}:${a}`),($||J)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}:${a}`:a,J?S:void 0))}return i?(E.res=S,E.usedParams=this.getUsedParamsDetails(t),E):S}extendTranslation(e,t,r,i,s){var g,b;var a=this;if((g=this.i18nFormat)!=null&&g.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const E=Mo(e)&&(((b=r==null?void 0:r.interpolation)==null?void 0:b.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let S;if(E){const k=e.match(this.interpolator.nestingRegexp);S=k&&k.length}let B=r.replace&&!Mo(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(B={...this.options.interpolation.defaultVariables,...B}),e=this.interpolator.interpolate(e,B,r.lng||this.language||i.usedLng,r),E){const k=e.match(this.interpolator.nestingRegexp),z=k&&k.length;S<z&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var k=arguments.length,z=new Array(k),j=0;j<k;j++)z[j]=arguments[j];return(s==null?void 0:s[0])===z[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${z[0]} in key: ${t[0]}`),null):a.translate(...z,t)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,d=Mo(o)?[o]:o;return e!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(e=dL.handle(d,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,a,o;return Mo(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(r))return;const g=this.extractFromKey(d,t),b=g.key;i=b;let E=g.namespaces;this.options.fallbackNS&&(E=E.concat(this.options.fallbackNS));const S=t.count!==void 0&&!Mo(t.count),B=S&&!t.ordinal&&t.count===0,k=t.context!==void 0&&(Mo(t.context)||typeof t.context=="number")&&t.context!=="",z=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);E.forEach(j=>{var Y,q;this.isValidLookup(r)||(o=j,!jI[`${z[0]}-${j}`]&&((Y=this.utils)!=null&&Y.hasLoadedNamespace)&&!((q=this.utils)!=null&&q.hasLoadedNamespace(o))&&(jI[`${z[0]}-${j}`]=!0,this.logger.warn(`key "${i}" for languages "${z.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),z.forEach(ie=>{var te;if(this.isValidLookup(r))return;a=ie;const J=[b];if((te=this.i18nFormat)!=null&&te.addLookupKeys)this.i18nFormat.addLookupKeys(J,b,ie,j,t);else{let W;S&&(W=this.pluralResolver.getSuffix(ie,t.count,t));const oe=`${this.options.pluralSeparator}zero`,fe=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(S&&(J.push(b+W),t.ordinal&&W.indexOf(fe)===0&&J.push(b+W.replace(fe,this.options.pluralSeparator)),B&&J.push(b+oe)),k){const he=`${b}${this.options.contextSeparator}${t.context}`;J.push(he),S&&(J.push(he+W),t.ordinal&&W.indexOf(fe)===0&&J.push(he+W.replace(fe,this.options.pluralSeparator)),B&&J.push(he+oe))}}let $;for(;$=J.pop();)this.isValidLookup(r)||(s=$,r=this.getResource(ie,j,$,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Mo(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class NI{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Jp.create("languageUtils")}getScriptPartFromCode(e){if(e=Xb(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Xb(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Mo(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Mo(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Mo(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Mo(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}const WI={zero:0,one:1,two:2,few:3,many:4,other:5},GI={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class iq{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Jp.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Xb(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),GI;if(!e.match(/-|_/))return GI;const d=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(d,t)}return this.pluralRulesCache[s]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>WI[i]-WI[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const QI=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=HQ(n,e,t);return!s&&i&&Mo(t)&&(s=p6(n,t,r),s===void 0&&(s=p6(e,t,r))),s},Z3=n=>n.replace(/\$/g,"$$$$");class oq{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Jp.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:d,formatSeparator:g,unescapeSuffix:b,unescapePrefix:E,nestingPrefix:S,nestingPrefixEscaped:B,nestingSuffix:k,nestingSuffixEscaped:z,nestingOptionsSeparator:j,maxReplaces:Y,alwaysFormat:q}=e.interpolation;this.escape=t!==void 0?t:XQ,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?d1(s):a||"{{",this.suffix=o?d1(o):d||"}}",this.formatSeparator=g||",",this.unescapePrefix=b?"":E||"-",this.unescapeSuffix=this.unescapePrefix?"":b||"",this.nestingPrefix=S?d1(S):B||d1("$t("),this.nestingSuffix=k?d1(k):z||d1(")"),this.nestingOptionsSeparator=j||",",this.maxReplaces=Y||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var B;let s,a,o;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=k=>{if(k.indexOf(this.formatSeparator)<0){const q=QI(t,d,k,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(q,void 0,r,{...i,...t,interpolationkey:k}):q}const z=k.split(this.formatSeparator),j=z.shift().trim(),Y=z.join(this.formatSeparator).trim();return this.format(QI(t,d,j,this.options.keySeparator,this.options.ignoreJSONStructure),Y,r,{...i,...t,interpolationkey:j})};this.resetRegExp();const b=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,E=((B=i==null?void 0:i.interpolation)==null?void 0:B.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:k=>Z3(k)},{regex:this.regexp,safeValue:k=>this.escapeValue?Z3(this.escape(k)):Z3(k)}].forEach(k=>{for(o=0;s=k.regex.exec(e);){const z=s[1].trim();if(a=g(z),a===void 0)if(typeof b=="function"){const Y=b(e,s,i);a=Mo(Y)?Y:""}else if(i&&Object.prototype.hasOwnProperty.call(i,z))a="";else if(E){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${z} for interpolating ${e}`),a="";else!Mo(a)&&!this.useRawValueToEscape&&(a=KI(a));const j=k.safeValue(a);if(e=e.replace(s[0],j),E?(k.regex.lastIndex+=a.length,k.regex.lastIndex-=s[0].length):k.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const o=(d,g)=>{const b=this.nestingOptionsSeparator;if(d.indexOf(b)<0)return d;const E=d.split(new RegExp(`${b}[ ]*{`));let S=`{${E[1]}`;d=E[0],S=this.interpolate(S,a);const B=S.match(/'/g),k=S.match(/"/g);(((B==null?void 0:B.length)??0)%2===0&&!k||k.length%2!==0)&&(S=S.replace(/'/g,'"'));try{a=JSON.parse(S),g&&(a={...g,...a})}catch(z){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,z),`${d}${b}${S}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,d};for(;i=this.nestingRegexp.exec(e);){let d=[];a={...r},a=a.replace&&!Mo(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let g=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const b=i[1].split(this.formatSeparator).map(E=>E.trim());i[1]=b.shift(),d=b,g=!0}if(s=t(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&!Mo(s))return s;Mo(s)||(s=KI(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),g&&(s=d.reduce((b,E)=>this.format(b,E,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const sq=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...d]=a.split(":"),g=d.join(":").trim().replace(/^'+|'+$/g,""),b=o.trim();t[b]||(t[b]=g),g==="false"&&(t[b]=!1),g==="true"&&(t[b]=!0),isNaN(g)||(t[b]=parseInt(g,10))}})}return{formatName:e,formatOptions:t}},h1=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=e[a];return o||(o=n(Xb(r),i),e[a]=o),o(t)}};class aq{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Jp.create("formatter"),this.options=e,this.formats={number:h1((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return s=>i.format(s)}),currency:h1((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>i.format(s)}),datetime:h1((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return s=>i.format(s)}),relativetime:h1((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return s=>i.format(s,r.range||"day")}),list:h1((t,r)=>{const i=new Intl.ListFormat(t,{...r});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=h1(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(d=>d.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,d)=>{var E;const{formatName:g,formatOptions:b}=sq(d);if(this.formats[g]){let S=o;try{const B=((E=i==null?void 0:i.formatParams)==null?void 0:E[i.interpolationkey])||{},k=B.locale||B.lng||i.locale||i.lng||r;S=this.formats[g](o,k,{...b,...i,...B})}catch(B){this.logger.warn(B)}return S}else this.logger.warn(`there was no format function for ${g}`);return o},e)}}const lq=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class uq extends lx{constructor(e,t,r){var s,a;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Jp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,r,i.backend,i)}queueLoad(e,t,r,i){const s={},a={},o={},d={};return e.forEach(g=>{let b=!0;t.forEach(E=>{const S=`${g}|${E}`;!r.reload&&this.store.hasResourceBundle(g,E)?this.state[S]=2:this.state[S]<0||(this.state[S]===1?a[S]===void 0&&(a[S]=!0):(this.state[S]=1,b=!1,a[S]===void 0&&(a[S]=!0),s[S]===void 0&&(s[S]=!0),d[E]===void 0&&(d[E]=!0)))}),b||(o[g]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(d)}}loaded(e,t,r){const i=e.split("|"),s=i[0],a=i[1];t&&this.emit("failedLoading",s,a,t),!t&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(d=>{VQ(d.loaded,[s],a),lq(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(g=>{o[g]||(o[g]={});const b=d.loaded[g];b.length&&b.forEach(E=>{o[g][E]===void 0&&(o[g][E]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(d=>!d.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(g,b)=>{if(this.readingCalls--,this.waitingReads.length>0){const E=this.waitingReads.shift();this.read(E.lng,E.ns,E.fcName,E.tried,E.wait,E.callback)}if(g&&b&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,a)},s);return}a(g,b)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const g=d(e,t);g&&typeof g.then=="function"?g.then(b=>o(null,b)).catch(o):o(null,g)}catch(g){o(g)}return}return d(e,t,o)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Mo(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Mo(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,r,i,s){var d,g,b,E,S;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((g=(d=this.services)==null?void 0:d.utils)!=null&&g.hasLoadedNamespace&&!((E=(b=this.services)==null?void 0:b.utils)!=null&&E.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((S=this.backend)!=null&&S.create){const B={...a,isUpdate:s},k=this.backend.create.bind(this.backend);if(k.length<6)try{let z;k.length===5?z=k(e,t,r,i,B):z=k(e,t,r,i),z&&typeof z.then=="function"?z.then(j=>o(null,j)).catch(o):o(null,z)}catch(z){o(z)}else k(e,t,r,i,o,B)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const qI=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Mo(n[1])&&(e.defaultValue=n[1]),Mo(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),YI=n=>{var e,t;return Mo(n.ns)&&(n.ns=[n.ns]),Mo(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Mo(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},G_=()=>{},Aq=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class AC extends lx{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=YI(e),this.services={},this.logger=Jp,this.modules={external:[]},Aq(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Mo(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=qI();this.options={...i,...this.options,...YI(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=b=>b?typeof b=="function"?new b:b:null;if(!this.options.isClone){this.modules.logger?Jp.init(s(this.modules.logger),this.options):Jp.init(null,this.options);let b;this.modules.formatter?b=this.modules.formatter:b=aq;const E=new NI(this.options);this.store=new zI(this.options.resources,this.options);const S=this.services;S.logger=Jp,S.resourceStore=this.store,S.languageUtils=E,S.pluralResolver=new iq(E,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(S.formatter=s(b),S.formatter.init(S,this.options),this.options.interpolation.format=S.formatter.format.bind(S.formatter)),S.interpolator=new oq(this.options),S.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},S.backendConnector=new uq(s(this.modules.backend),S.resourceStore,S,this.options),S.backendConnector.on("*",function(B){for(var k=arguments.length,z=new Array(k>1?k-1:0),j=1;j<k;j++)z[j-1]=arguments[j];e.emit(B,...z)}),this.modules.languageDetector&&(S.languageDetector=s(this.modules.languageDetector),S.languageDetector.init&&S.languageDetector.init(S,this.options.detection,this.options)),this.modules.i18nFormat&&(S.i18nFormat=s(this.modules.i18nFormat),S.i18nFormat.init&&S.i18nFormat.init(this)),this.translator=new e2(this.services,this.options),this.translator.on("*",function(B){for(var k=arguments.length,z=new Array(k>1?k-1:0),j=1;j<k;j++)z[j-1]=arguments[j];e.emit(B,...z)}),this.modules.external.forEach(B=>{B.init&&B.init(this)})}if(this.format=this.options.interpolation.format,r||(r=G_),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.length>0&&b[0]!=="dev"&&(this.options.lng=b[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(b=>{this[b]=function(){return e.store[b](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(b=>{this[b]=function(){return e.store[b](...arguments),e}});const d=pv(),g=()=>{const b=(E,S)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(S),r(E,S)};if(this.languages&&!this.isInitialized)return b(null,this.t.bind(this));this.changeLanguage(this.options.lng,b)};return this.options.resources||!this.options.initAsync?g():setTimeout(g,0),d}loadResources(e){var s,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:G_;const i=Mo(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],d=g=>{if(!g||g==="cimode")return;this.services.languageUtils.toResolveHierarchy(g).forEach(E=>{E!=="cimode"&&o.indexOf(E)<0&&o.push(E)})};i?d(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(b=>d(b)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,g=>d(g)),this.services.backendConnector.load(o,this.options.ns,g=>{!g&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(g)})}else r(null)}reloadResources(e,t,r){const i=pv();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=G_),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&dL.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=pv();this.emit("languageChanging",e);const s=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},a=(d,g)=>{g?(s(g),this.translator.changeLanguage(g),this.isLanguageChangingTo=void 0,this.emit("languageChanged",g),this.logger.log("languageChanged",g)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(d,function(){return r.t(...arguments)})},o=d=>{var b,E;!e&&!d&&this.services.languageDetector&&(d=[]);const g=Mo(d)?d:this.services.languageUtils.getBestMatchFromCodes(d);g&&(this.language||s(g),this.translator.language||this.translator.changeLanguage(g),(E=(b=this.services.languageDetector)==null?void 0:b.cacheUserLanguage)==null||E.call(b,g)),this.loadResources(g,S=>{a(S,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,r){var i=this;const s=function(a,o){let d;if(typeof o!="object"){for(var g=arguments.length,b=new Array(g>2?g-2:0),E=2;E<g;E++)b[E-2]=arguments[E];d=i.options.overloadTranslationOptionHandler([a,o].concat(b))}else d={...o};d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||s.keyPrefix);const S=i.options.keySeparator||".";let B;return d.keyPrefix&&Array.isArray(a)?B=a.map(k=>`${d.keyPrefix}${S}${k}`):B=d.keyPrefix?`${d.keyPrefix}${S}${a}`:a,i.t(B,d)};return Mo(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,d)=>{const g=this.services.backendConnector.state[`${o}|${d}`];return g===-1||g===0||g===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(s,e)))}loadNamespaces(e,t){const r=pv();return this.options.ns?(Mo(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=pv();Mo(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new NI(qI());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new AC(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:G_;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new AC(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((d,g)=>(d[g]={...this.store.data[g]},Object.keys(d[g]).reduce((b,E)=>(b[E]={...d[g][E]},b),{})),{});s.store=new zI(o,i),s.services.resourceStore=s.store}return s.translator=new e2(s.services,i),s.translator.on("*",function(o){for(var d=arguments.length,g=new Array(d>1?d-1:0),b=1;b<d;b++)g[b-1]=arguments[b];s.emit(o,...g)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const zc=AC.createInstance();zc.createInstance=AC.createInstance;zc.createInstance;zc.dir;zc.init;zc.loadResources;zc.reloadResources;zc.use;zc.changeLanguage;zc.getFixedT;zc.t;zc.exists;zc.setDefaultNamespace;zc.hasLoadedNamespace;zc.loadNamespaces;zc.loadLanguages;const{slice:cq,forEach:dq}=[];function hq(n){return dq.call(cq.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}const $I=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,fq=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${n}=${i}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!$I.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!$I.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},VI={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=fq(n,encodeURIComponent(e),i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n){this.create(n,"",-1)}};var pq={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return VI.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;t&&typeof document<"u"&&VI.create(t,n,r,i,s)}},mq={name:"querystring",lookup(n){var r;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const a=i.substring(1).split("&");for(let o=0;o<a.length;o++){const d=a[o].indexOf("=");d>0&&a[o].substring(0,d)===e&&(t=a[o].substring(d+1))}}return t}};let mv=null;const HI=()=>{if(mv!==null)return mv;try{mv=window!=="undefined"&&window.localStorage!==null;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{mv=!1}return mv};var gq={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&HI())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&HI()&&window.localStorage.setItem(t,n)}};let gv=null;const ZI=()=>{if(gv!==null)return gv;try{gv=window!=="undefined"&&window.sessionStorage!==null;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{gv=!1}return gv};var yq={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&ZI())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&ZI()&&window.sessionStorage.setItem(t,n)}},vq={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},Cq={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},_q={name:"path",lookup(n){var i;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(i=t[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},bq={name:"subdomain",lookup(n){var i,s;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[t]}};let hL=!1;try{document.cookie,hL=!0}catch{}const fL=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];hL||fL.splice(1,1);const xq=()=>({order:fL,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class pL{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=hq(t,this.options||{},xq()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(pq),this.addDetector(mq),this.addDetector(gq),this.addDetector(yq),this.addDetector(vq),this.addDetector(Cq),this.addDetector(_q),this.addDetector(bq)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}pL.type="languageDetector";var wq=function(e){return{type:"backend",init:function(r,i,s){},read:function(r,i,s){if(typeof e=="function"){if(e.length<3){try{var a=e(r,i);a&&typeof a.then=="function"?a.then(function(o){return s(null,o&&o.default||o)}).catch(s):s(null,a)}catch(o){s(o)}return}e(r,i,s);return}s(null,e[r]&&e[r][i])}}},X3,XI;function Mq(){return XI||(XI=1,X3={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),X3}var Sq=Mq();const Eq=Xa(Sq);var Bq=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function JI(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Eq[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(Bq),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var a=s[1].trim(),o=[a,""];a.indexOf("=")>-1&&(o=a.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var Oq=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Iq=/^\s*$/,kq=Object.create(null);function mL(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(mL,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Tq={parse:function(n,e){e||(e={}),e.components||(e.components=kq);var t,r=[],i=[],s=-1,a=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");r.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(Oq,function(d,g){if(a){if(d!=="</"+t.name+">")return;a=!1}var b,E=d.charAt(1)!=="/",S=d.startsWith("<!--"),B=g+d.length,k=n.charAt(B);if(S){var z=JI(d);return s<0?(r.push(z),r):((b=i[s]).children.push(z),r)}if(E&&(s++,(t=JI(d)).type==="tag"&&e.components[t.name]&&(t.type="component",a=!0),t.voidElement||a||!k||k==="<"||t.children.push({type:"text",content:n.slice(B,n.indexOf("<",B))}),s===0&&r.push(t),(b=i[s-1])&&b.children.push(t),i[s]=t),(!E||t.voidElement)&&(s>-1&&(t.voidElement||t.name===d.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!a&&k!=="<"&&k)){b=s===-1?r:i[s].children;var j=n.indexOf("<",B),Y=n.slice(B,j===-1?void 0:j);Iq.test(Y)&&(Y=" "),(j>-1&&s+b.length>=0||Y!==" ")&&b.push({type:"text",content:Y})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+mL("",t)},"")}};const Pb=(n,e,t,r)=>{var s,a,o,d;const i=[t,{code:e,...r||{}}];if((a=(s=n==null?void 0:n.services)==null?void 0:s.logger)!=null&&a.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);tf(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(d=(o=n==null?void 0:n.services)==null?void 0:o.logger)!=null&&d.warn?n.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},e7={},cC=(n,e,t,r)=>{tf(t)&&e7[t]||(tf(t)&&(e7[t]=new Date),Pb(n,e,t,r))},gL=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},m6=(n,e,t)=>{n.loadNamespaces(e,gL(n,t))},t7=(n,e,t,r)=>{if(tf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return m6(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,gL(n,r))},Pq=(n,e,t={})=>!e.languages||!e.languages.length?(cC(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{var s;if(((s=t.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),Rq=n=>n.displayName||n.name||(tf(n)&&n.length>0?n:"Unknown"),tf=n=>typeof n=="string",bg=n=>typeof n=="object"&&n!==null,Dq=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Kq={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Fq=n=>Kq[n],Lq=n=>n.replace(Dq,Fq);let g6={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Lq};const Uq=(n={})=>{g6={...g6,...n}},yL=()=>g6;let vL;const zq=n=>{vL=n},zB=()=>vL,J3=(n,e)=>{var r;if(!n)return!1;const t=((r=n.props)==null?void 0:r.children)??n.children;return e?t.length>0:!!t},e4=n=>{var t,r;if(!n)return[];const e=((t=n.props)==null?void 0:t.children)??n.children;return(r=n.props)!=null&&r.i18nIsDynamicList?J1(e):e},jq=n=>Array.isArray(n)&&n.every(Ai.isValidElement),J1=n=>Array.isArray(n)?n:[n],Nq=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},CL=(n,e,t,r)=>{if(!n)return"";let i="";const s=J1(n),a=e!=null&&e.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,d)=>{if(tf(o)){i+=`${o}`;return}if(Ai.isValidElement(o)){const{props:g,type:b}=o,E=Object.keys(g).length,S=a.indexOf(b)>-1,B=g.children;if(!B&&S&&!E){i+=`<${b}/>`;return}if(!B&&(!S||E)||g.i18nIsDynamicList){i+=`<${d}></${d}>`;return}if(S&&E===1&&tf(B)){i+=`<${b}>${B}</${b}>`;return}const k=CL(B,e,t,r);i+=`<${d}>${k}</${d}>`;return}if(o===null){Pb(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(bg(o)){const{format:g,...b}=o,E=Object.keys(b);if(E.length===1){const S=g?`${E[0]}, ${g}`:E[0];i+=`{{${S}}}`;return}Pb(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}Pb(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},Wq=(n,e,t,r,i,s)=>{if(e==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],o=e&&new RegExp(a.map(j=>`<${j}`).join("|")).test(e);if(!n&&!o&&!s)return[e];const d={},g=j=>{J1(j).forEach(q=>{tf(q)||(J3(q)?g(e4(q)):bg(q)&&!Ai.isValidElement(q)&&Object.assign(d,q))})};g(n);const b=Tq.parse(`<0>${e}</0>`),E={...d,...i},S=(j,Y,q)=>{var $;const ie=e4(j),J=k(ie,Y.children,q);return jq(ie)&&J.length===0||($=j.props)!=null&&$.i18nIsDynamicList?ie:J},B=(j,Y,q,ie,J)=>{j.dummy?(j.children=Y,q.push(Ai.cloneElement(j,{key:ie},J?void 0:Y))):q.push(...Ai.Children.map([j],$=>{const te={...$.props};return delete te.i18nIsDynamicList,Ai.createElement($.type,{...te,key:ie,ref:$.ref},J?null:Y)}))},k=(j,Y,q)=>{const ie=J1(j);return J1(Y).reduce(($,te,W)=>{var fe,he;const oe=((he=(fe=te.children)==null?void 0:fe[0])==null?void 0:he.content)&&t.services.interpolator.interpolate(te.children[0].content,E,t.language);if(te.type==="tag"){let Se=ie[parseInt(te.name,10)];q.length===1&&!Se&&(Se=q[0][te.name]),Se||(Se={});const pe=Object.keys(te.attrs).length!==0?Nq({props:te.attrs},Se):Se,we=Ai.isValidElement(pe),Ke=we&&J3(te,!0)&&!te.voidElement,ge=o&&bg(pe)&&pe.dummy&&!we,st=bg(n)&&Object.hasOwnProperty.call(n,te.name);if(tf(pe)){const Qe=t.services.interpolator.interpolate(pe,E,t.language);$.push(Qe)}else if(J3(pe)||Ke){const Qe=S(pe,te,q);B(pe,Qe,$,W)}else if(ge){const Qe=k(ie,te.children,q);B(pe,Qe,$,W)}else if(Number.isNaN(parseFloat(te.name)))if(st){const Qe=S(pe,te,q);B(pe,Qe,$,W,te.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(te.name)>-1)if(te.voidElement)$.push(Ai.createElement(te.name,{key:`${te.name}-${W}`}));else{const Qe=k(ie,te.children,q);$.push(Ai.createElement(te.name,{key:`${te.name}-${W}`},Qe))}else if(te.voidElement)$.push(`<${te.name} />`);else{const Qe=k(ie,te.children,q);$.push(`<${te.name}>${Qe}</${te.name}>`)}else if(bg(pe)&&!we){const Qe=te.children[0]?oe:null;Qe&&$.push(Qe)}else B(pe,oe,$,W,te.children.length!==1||!oe)}else if(te.type==="text"){const Se=r.transWrapTextNodes,pe=s?r.unescape(t.services.interpolator.interpolate(te.content,E,t.language)):t.services.interpolator.interpolate(te.content,E,t.language);Se?$.push(Ai.createElement(Se,{key:`${te.name}-${W}`},pe)):$.push(pe)}return $},[])},z=k([{dummy:!0,children:n||[]}],b,J1(n||[]));return e4(z[0])},_L=(n,e,t)=>{const r=n.key||e,i=Ai.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function s(){return Ai.createElement(Ai.Fragment,null,i)}return Ai.createElement(s)},Gq=(n,e)=>n.map((t,r)=>_L(t,r,e)),Qq=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:_L(n[r],r,e)})}),t},qq=(n,e,t,r)=>n?Array.isArray(n)?Gq(n,e):bg(n)?Qq(n,e):(cC(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function Yq({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:d,ns:g,i18n:b,t:E,shouldUnescape:S,...B}){var pe,we,Ke,ge,st,Qe;const k=b||zB();if(!k)return cC(k,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const z=E||k.t.bind(k)||(Ze=>Ze),j={...yL(),...(pe=k.options)==null?void 0:pe.react};let Y=g||z.ns||((we=k.options)==null?void 0:we.defaultNS);Y=tf(Y)?[Y]:Y||["translation"];const q=CL(n,j,k,r),ie=o||q||j.transEmptyNodeValue||r,{hashTransKey:J}=j,$=r||(J?J(q||ie):q||ie);(ge=(Ke=k.options)==null?void 0:Ke.interpolation)!=null&&ge.defaultVariables&&(a=a&&Object.keys(a).length>0?{...a,...k.options.interpolation.defaultVariables}:{...k.options.interpolation.defaultVariables});const te=a||e!==void 0&&!((Qe=(st=k.options)==null?void 0:st.interpolation)!=null&&Qe.alwaysFormat)||!n?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},W={...s,context:i||s.context,count:e,...a,...te,defaultValue:ie,ns:Y},oe=$?z($,W):ie,fe=qq(d,oe,k,r),he=Wq(fe||n,oe,k,j,W,S),Se=t??j.defaultTransParent;return Se?Ai.createElement(Se,B,he):he}const $q={type:"3rdParty",init(n){Uq(n.options.react),zq(n)}},bL=Ai.createContext();class Vq{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function R0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:d,ns:g,i18n:b,t:E,shouldUnescape:S,...B}){var q;const{i18n:k,defaultNS:z}=Ai.useContext(bL)||{},j=b||k||zB(),Y=E||(j==null?void 0:j.t.bind(j));return Yq({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s,values:a,defaults:o,components:d,ns:g||(Y==null?void 0:Y.ns)||z||((q=j==null?void 0:j.options)==null?void 0:q.defaultNS),i18n:j,t:E,shouldUnescape:S,...B})}const Hq=(n,e)=>{const t=Ai.useRef();return Ai.useEffect(()=>{t.current=n},[n,e]),t.current},xL=(n,e,t,r)=>n.getFixedT(e,t,r),Zq=(n,e,t,r)=>Ai.useCallback(xL(n,e,t,r),[n,e,t,r]),Xq=(n,e={})=>{var J,$,te,W;const{i18n:t}=e,{i18n:r,defaultNS:i}=Ai.useContext(bL)||{},s=t||r||zB();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new Vq),!s){cC(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const oe=(he,Se)=>tf(Se)?Se:bg(Se)&&tf(Se.defaultValue)?Se.defaultValue:Array.isArray(he)?he[he.length-1]:he,fe=[oe,{},!1];return fe.t=oe,fe.i18n={},fe.ready=!1,fe}(J=s.options.react)!=null&&J.wait&&cC(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...yL(),...s.options.react,...e},{useSuspense:o,keyPrefix:d}=a;let g=i||(($=s.options)==null?void 0:$.defaultNS);g=tf(g)?[g]:g||["translation"],(W=(te=s.reportNamespaces).addUsedNamespaces)==null||W.call(te,g);const b=(s.isInitialized||s.initializedStoreOnce)&&g.every(oe=>Pq(oe,s,a)),E=Zq(s,e.lng||null,a.nsMode==="fallback"?g:g[0],d),S=()=>E,B=()=>xL(s,e.lng||null,a.nsMode==="fallback"?g:g[0],d),[k,z]=Ai.useState(S);let j=g.join();e.lng&&(j=`${e.lng}${j}`);const Y=Hq(j),q=Ai.useRef(!0);Ai.useEffect(()=>{const{bindI18n:oe,bindI18nStore:fe}=a;q.current=!0,!b&&!o&&(e.lng?t7(s,e.lng,g,()=>{q.current&&z(B)}):m6(s,g,()=>{q.current&&z(B)})),b&&Y&&Y!==j&&q.current&&z(B);const he=()=>{q.current&&z(B)};return oe&&(s==null||s.on(oe,he)),fe&&(s==null||s.store.on(fe,he)),()=>{q.current=!1,s&&(oe==null||oe.split(" ").forEach(Se=>s.off(Se,he))),fe&&s&&fe.split(" ").forEach(Se=>s.store.off(Se,he))}},[s,j]),Ai.useEffect(()=>{q.current&&b&&z(S)},[s,d,b]);const ie=[k,s,b];if(ie.t=k,ie.i18n=s,ie.ready=b,b||!b&&!o)return ie;throw new Promise(oe=>{e.lng?t7(s,e.lng,g,()=>oe()):m6(s,g,()=>oe())})},Vs=(n,e={})=>function(r){function i({forwardedRef:a,...o}){const[d,g,b]=Xq(n,{...o,keyPrefix:e.keyPrefix}),E={...o,t:d,i18n:g,tReady:b};return e.withRef&&a?E.ref=a:!e.withRef&&a&&(E.forwardedRef=a),Ai.createElement(r,E)}i.displayName=`withI18nextTranslation(${Rq(r)})`,i.WrappedComponent=r;const s=(a,o)=>Ai.createElement(i,Object.assign({},a,{forwardedRef:o}));return e.withRef?Ai.forwardRef(s):i};function Bl(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="d8f26cf16d2bfe94f6075e04546db610e7ce65b5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:12,column:1}},1:{start:{line:13,column:0},end:{line:39,column:3}},2:{start:{line:15,column:4},end:{line:17,column:5}},3:{start:{line:16,column:6},end:{line:16,column:16}},4:{start:{line:18,column:4},end:{line:18,column:514}},5:{start:{line:18,column:119},end:{line:18,column:158}},6:{start:{line:18,column:198},end:{line:18,column:237}},7:{start:{line:18,column:277},end:{line:18,column:316}},8:{start:{line:18,column:356},end:{line:18,column:395}},9:{start:{line:18,column:435},end:{line:18,column:474}},10:{start:{line:34,column:4},end:{line:36,column:5}},11:{start:{line:35,column:6},end:{line:35,column:13}},12:{start:{line:37,column:4},end:{line:37,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:21},end:{line:14,column:22}},loc:{start:{line:14,column:35},end:{line:19,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:18,column:113},end:{line:18,column:114}},loc:{start:{line:18,column:119},end:{line:18,column:158}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:18,column:192},end:{line:18,column:193}},loc:{start:{line:18,column:198},end:{line:18,column:237}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:18,column:271},end:{line:18,column:272}},loc:{start:{line:18,column:277},end:{line:18,column:316}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:18,column:350},end:{line:18,column:351}},loc:{start:{line:18,column:356},end:{line:18,column:395}},line:18},5:{name:"(anonymous_5)",decl:{start:{line:18,column:429},end:{line:18,column:430}},loc:{start:{line:18,column:435},end:{line:18,column:474}},line:18},6:{name:"(anonymous_6)",decl:{start:{line:33,column:21},end:{line:33,column:22}},loc:{start:{line:33,column:41},end:{line:38,column:3}},line:33}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:17,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAU,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAc,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAwB,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAwB,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAqB,CAAA,CAAA,CAAA;AAAA,CAAA,CAChC,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IACG,CAAA,GAAA,CAAI,QAAQ,CACZ,CAAA,GAAA;AAAA,CACC,CAAA,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAM,EAAA,CAAA,CAAA,CAAA;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CACV,CAAA,CAAA,CAAA;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAA8B,CAAA,CAAA,2aAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACvC,CAAC;AACH,CACC,CAAA,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAK,CAAA;AAAA,CACJ,CAAA,aAAA,CAAA,CAAe,MAAO,CAAA,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAc,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CACb,aAAe,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACb,WAAa,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CACf,CAAA,CAAA;AAAA,CAAA,CACA,WAAa,CAAA,CAAA,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAmB,CAAA,CAAA,CAAC,IAAM,CAAA,CAAA,GAAA,CAAA,CAAK,GAAQ,CAAA,CAAA,CAAA,CAAA,CAAA;AACrC,CAAI,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAM,EAAA,CAAA,CAAA,CAAA;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAQ,CAAA,CAAA,CAAA;AAChC,CAAQ,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAK,CAAA,CAAA,CAAA,CAAA,CAAI,CAAC,CAAG,CAAA,CAAA,CAAA;AAAA,CACzE,CAAA;AACF,CAAC,CAAA;AAEH,MAAe,CAAA,OAAA,CAAA,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d8f26cf16d2bfe94f6075e04546db610e7ce65b5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Bl=function(){return a},a}Bl();const wL=(Bl().s[0]++,{de:"Deutsch",en:"English",fr:"Français",he:"עברית",ja:"日本語",zh:"简体中文"});Bl().s[1]++;zc.use(pL).use(wq((n,e)=>(Bl().f[0]++,Bl().s[2]++,n==="en"?(Bl().b[0][0]++,Bl().s[3]++,{}):(Bl().b[0][1]++,Bl().s[4]++,qQ(Object.assign({"./locales/de/translation.json":()=>(Bl().f[1]++,Bl().s[5]++,fv(()=>import("./translation-BA-hEPLm.js"),[])),"./locales/fr/translation.json":()=>(Bl().f[2]++,Bl().s[6]++,fv(()=>import("./translation-J1EAmmGD.js"),[])),"./locales/he/translation.json":()=>(Bl().f[3]++,Bl().s[7]++,fv(()=>import("./translation-B80Cngny.js"),[])),"./locales/ja/translation.json":()=>(Bl().f[4]++,Bl().s[8]++,fv(()=>import("./translation-DSmpm8dA.js"),[])),"./locales/zh/translation.json":()=>(Bl().f[5]++,Bl().s[9]++,fv(()=>import("./translation-zqWUd59b.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use($q).init({supportedLngs:Object.keys(wL),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Bl().f[6]++,Bl().s[10]++,n[0]==="en"){Bl().b[1][0]++,Bl().s[11]++;return}else Bl().b[1][1]++;Bl().s[12]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var Q_={exports:{}},n7;function Jq(){return n7||(n7=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],r=[];function i(a){if(a===void 0){console.error("Autobind error: No context provided.");return}var o=Object.getPrototypeOf(a);arguments.length>1?r=Array.prototype.slice.call(arguments,1):r=Object.getOwnPropertyNames(o),r.forEach(function(d){var g=Object.getOwnPropertyDescriptor(o,d);if(g===void 0){console.warn('Autobind: "'+d+'" method not found in class.');return}t.indexOf(d)!==-1||typeof g.value!="function"||Object.defineProperty(o,d,s(o,d,g))})}function s(a,o,d){var g=d.value;return{configurable:!0,get:function(){if(this===a||this.hasOwnProperty(o))return g;var E=g.bind(this);return Object.defineProperty(this,o,{value:E,configurable:!0,writable:!0}),E}}}n.exports=e.default}(Q_,Q_.exports)),Q_.exports}var t4,r7;function eY(){return r7||(r7=1,t4=Jq()),t4}var tY=eY();const nY=Xa(tY);var Iv={exports:{}};Iv.exports;var i7;function rY(){return i7||(i7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",a="[object Array]",o="[object Boolean]",d="[object Date]",g="[object Error]",b="[object Function]",E="[object GeneratorFunction]",S="[object Map]",B="[object Number]",k="[object Object]",z="[object Promise]",j="[object RegExp]",Y="[object Set]",q="[object String]",ie="[object Symbol]",J="[object WeakMap]",$="[object ArrayBuffer]",te="[object DataView]",W="[object Float32Array]",oe="[object Float64Array]",fe="[object Int8Array]",he="[object Int16Array]",Se="[object Int32Array]",pe="[object Uint8Array]",we="[object Uint8ClampedArray]",Ke="[object Uint16Array]",ge="[object Uint32Array]",st=/[\\^$.*+?()[\]{}|]/g,Qe=/\w*$/,Ze=/^\[object .+?Constructor\]$/,We=/^(?:0|[1-9]\d*)$/,Ce={};Ce[s]=Ce[a]=Ce[$]=Ce[te]=Ce[o]=Ce[d]=Ce[W]=Ce[oe]=Ce[fe]=Ce[he]=Ce[Se]=Ce[S]=Ce[B]=Ce[k]=Ce[j]=Ce[Y]=Ce[q]=Ce[ie]=Ce[pe]=Ce[we]=Ce[Ke]=Ce[ge]=!0,Ce[g]=Ce[b]=Ce[J]=!1;var Pe=typeof window=="object"&&window&&window.Object===Object&&window,it=typeof self=="object"&&self&&self.Object===Object&&self,vt=Pe||it||Function("return this")(),_t=e&&!e.nodeType&&e,ft=_t&&!0&&n&&!n.nodeType&&n,Dt=ft&&ft.exports===_t;function Tt(ee,Ie){return ee.set(Ie[0],Ie[1]),ee}function Ue(ee,Ie){return ee.add(Ie),ee}function Re(ee,Ie){for(var at=-1,Ht=ee?ee.length:0;++at<Ht&&Ie(ee[at],at,ee)!==!1;);return ee}function Be(ee,Ie){for(var at=-1,Ht=Ie.length,kr=ee.length;++at<Ht;)ee[kr+at]=Ie[at];return ee}function nt(ee,Ie,at,Ht){for(var kr=-1,Vn=ee?ee.length:0;++kr<Vn;)at=Ie(at,ee[kr],kr,ee);return at}function Ct(ee,Ie){for(var at=-1,Ht=Array(ee);++at<ee;)Ht[at]=Ie(at);return Ht}function pt(ee,Ie){return ee==null?void 0:ee[Ie]}function zt(ee){var Ie=!1;if(ee!=null&&typeof ee.toString!="function")try{Ie=!!(ee+"")}catch{}return Ie}function tn(ee){var Ie=-1,at=Array(ee.size);return ee.forEach(function(Ht,kr){at[++Ie]=[kr,Ht]}),at}function Lt(ee,Ie){return function(at){return ee(Ie(at))}}function gn(ee){var Ie=-1,at=Array(ee.size);return ee.forEach(function(Ht){at[++Ie]=Ht}),at}var Nn=Array.prototype,rn=Function.prototype,or=Object.prototype,Kn=vt["__core-js_shared__"],pn=function(){var ee=/[^.]+$/.exec(Kn&&Kn.keys&&Kn.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Xn=rn.toString,Mr=or.hasOwnProperty,Yn=or.toString,er=RegExp("^"+Xn.call(Mr).replace(st,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=Dt?vt.Buffer:void 0,ce=vt.Symbol,me=vt.Uint8Array,tt=Lt(Object.getPrototypeOf,Object),Et=Object.create,$t=or.propertyIsEnumerable,on=Nn.splice,rr=Object.getOwnPropertySymbols,Oe=qe?qe.isBuffer:void 0,se=Lt(Object.keys,Object),_e=Lr(vt,"DataView"),p=Lr(vt,"Map"),Ne=Lr(vt,"Promise"),$e=Lr(vt,"Set"),rt=Lr(vt,"WeakMap"),dt=Lr(Object,"create"),ct=po(_e),Qt=po(p),Vt=po(Ne),Nt=po($e),wt=po(rt),Dn=ce?ce.prototype:void 0,On=Dn?Dn.valueOf:void 0;function pr(ee){var Ie=-1,at=ee?ee.length:0;for(this.clear();++Ie<at;){var Ht=ee[Ie];this.set(Ht[0],Ht[1])}}function Er(){this.__data__=dt?dt(null):{}}function sn(ee){return this.has(ee)&&delete this.__data__[ee]}function Wn(ee){var Ie=this.__data__;if(dt){var at=Ie[ee];return at===r?void 0:at}return Mr.call(Ie,ee)?Ie[ee]:void 0}function Ln(ee){var Ie=this.__data__;return dt?Ie[ee]!==void 0:Mr.call(Ie,ee)}function Ir(ee,Ie){var at=this.__data__;return at[ee]=dt&&Ie===void 0?r:Ie,this}pr.prototype.clear=Er,pr.prototype.delete=sn,pr.prototype.get=Wn,pr.prototype.has=Ln,pr.prototype.set=Ir;function Br(ee){var Ie=-1,at=ee?ee.length:0;for(this.clear();++Ie<at;){var Ht=ee[Ie];this.set(Ht[0],Ht[1])}}function Kr(){this.__data__=[]}function Ar(ee){var Ie=this.__data__,at=Ja(Ie,ee);if(at<0)return!1;var Ht=Ie.length-1;return at==Ht?Ie.pop():on.call(Ie,at,1),!0}function ho(ee){var Ie=this.__data__,at=Ja(Ie,ee);return at<0?void 0:Ie[at][1]}function Ea(ee){return Ja(this.__data__,ee)>-1}function Yi(ee,Ie){var at=this.__data__,Ht=Ja(at,ee);return Ht<0?at.push([ee,Ie]):at[Ht][1]=Ie,this}Br.prototype.clear=Kr,Br.prototype.delete=Ar,Br.prototype.get=ho,Br.prototype.has=Ea,Br.prototype.set=Yi;function vi(ee){var Ie=-1,at=ee?ee.length:0;for(this.clear();++Ie<at;){var Ht=ee[Ie];this.set(Ht[0],Ht[1])}}function so(){this.__data__={hash:new pr,map:new(p||Br),string:new pr}}function So(ee){return us(this,ee).delete(ee)}function Pi(ee){return us(this,ee).get(ee)}function Ua(ee){return us(this,ee).has(ee)}function Ba(ee,Ie){return us(this,ee).set(ee,Ie),this}vi.prototype.clear=so,vi.prototype.delete=So,vi.prototype.get=Pi,vi.prototype.has=Ua,vi.prototype.set=Ba;function rs(ee){this.__data__=new Br(ee)}function ca(){this.__data__=new Br}function dl(ee){return this.__data__.delete(ee)}function lo(ee){return this.__data__.get(ee)}function Ku(ee){return this.__data__.has(ee)}function iu(ee,Ie){var at=this.__data__;if(at instanceof Br){var Ht=at.__data__;if(!p||Ht.length<t-1)return Ht.push([ee,Ie]),this;at=this.__data__=new vi(Ht)}return at.set(ee,Ie),this}rs.prototype.clear=ca,rs.prototype.delete=dl,rs.prototype.get=lo,rs.prototype.has=Ku,rs.prototype.set=iu;function ao(ee,Ie){var at=Ks(ee)||nl(ee)?Ct(ee.length,String):[],Ht=at.length,kr=!!Ht;for(var Vn in ee)Mr.call(ee,Vn)&&!(kr&&(Vn=="length"||mu(Vn,Ht)))&&at.push(Vn);return at}function Fr(ee,Ie,at){var Ht=ee[Ie];(!(Mr.call(ee,Ie)&&Ss(Ht,at))||at===void 0&&!(Ie in ee))&&(ee[Ie]=at)}function Ja(ee,Ie){for(var at=ee.length;at--;)if(Ss(ee[at][0],Ie))return at;return-1}function Rs(ee,Ie){return ee&&ci(Ie,Wi(Ie),ee)}function oa(ee,Ie,at,Ht,kr,Vn,ai){var di;if(Ht&&(di=Vn?Ht(ee,kr,Vn,ai):Ht(ee)),di!==void 0)return di;if(!ei(ee))return ee;var Cr=Ks(ee);if(Cr){if(di=Ds(ee),!Ie)return el(ee,di)}else{var Tr=tl(ee),Ci=Tr==b||Tr==E;if(Hi(ee))return ar(ee,Ie);if(Tr==k||Tr==s||Ci&&!Vn){if(zt(ee))return Vn?ee:{};if(di=Eo(Ci?{}:ee),!Ie)return da(ee,Rs(di,ee))}else{if(!Ce[Tr])return Vn?ee:{};di=Qs(ee,Tr,oa,Ie)}}ai||(ai=new rs);var Bo=ai.get(ee);if(Bo)return Bo;if(ai.set(ee,di),!Cr)var Ti=at?aA(ee):Wi(ee);return Re(Ti||ee,function(Yr,Zi){Ti&&(Zi=Yr,Yr=ee[Zi]),Fr(di,Zi,oa(Yr,Ie,at,Ht,Zi,ee,ai))}),di}function Ye(ee){return ei(ee)?Et(ee):{}}function Mt(ee,Ie,at){var Ht=Ie(ee);return Ks(ee)?Ht:Be(Ht,at(ee))}function yn(ee){return Yn.call(ee)}function $n(ee){if(!ei(ee)||is(ee))return!1;var Ie=ou(ee)||zt(ee)?er:Ze;return Ie.test(po(ee))}function dn(ee){if(!Hs(ee))return se(ee);var Ie=[];for(var at in Object(ee))Mr.call(ee,at)&&at!="constructor"&&Ie.push(at);return Ie}function ar(ee,Ie){if(Ie)return ee.slice();var at=new ee.constructor(ee.length);return ee.copy(at),at}function Ri(ee){var Ie=new ee.constructor(ee.byteLength);return new me(Ie).set(new me(ee)),Ie}function fo(ee,Ie){var at=Ie?Ri(ee.buffer):ee.buffer;return new ee.constructor(at,ee.byteOffset,ee.byteLength)}function _s(ee,Ie,at){var Ht=Ie?at(tn(ee),!0):tn(ee);return nt(Ht,Tt,new ee.constructor)}function Gs(ee){var Ie=new ee.constructor(ee.source,Qe.exec(ee));return Ie.lastIndex=ee.lastIndex,Ie}function bA(ee,Ie,at){var Ht=Ie?at(gn(ee),!0):gn(ee);return nt(Ht,Ue,new ee.constructor)}function ii(ee){return On?Object(On.call(ee)):{}}function Mi(ee,Ie){var at=Ie?Ri(ee.buffer):ee.buffer;return new ee.constructor(at,ee.byteOffset,ee.length)}function el(ee,Ie){var at=-1,Ht=ee.length;for(Ie||(Ie=Array(Ht));++at<Ht;)Ie[at]=ee[at];return Ie}function ci(ee,Ie,at,Ht){at||(at={});for(var kr=-1,Vn=Ie.length;++kr<Vn;){var ai=Ie[kr],di=void 0;Fr(at,ai,di===void 0?ee[ai]:di)}return at}function da(ee,Ie){return ci(ee,Bi(ee),Ie)}function aA(ee){return Mt(ee,Wi,Bi)}function us(ee,Ie){var at=ee.__data__;return Wl(Ie)?at[typeof Ie=="string"?"string":"hash"]:at.map}function Lr(ee,Ie){var at=pt(ee,Ie);return $n(at)?at:void 0}var Bi=rr?Lt(rr,Object):uo,tl=yn;(_e&&tl(new _e(new ArrayBuffer(1)))!=te||p&&tl(new p)!=S||Ne&&tl(Ne.resolve())!=z||$e&&tl(new $e)!=Y||rt&&tl(new rt)!=J)&&(tl=function(ee){var Ie=Yn.call(ee),at=Ie==k?ee.constructor:void 0,Ht=at?po(at):void 0;if(Ht)switch(Ht){case ct:return te;case Qt:return S;case Vt:return z;case Nt:return Y;case wt:return J}return Ie});function Ds(ee){var Ie=ee.length,at=ee.constructor(Ie);return Ie&&typeof ee[0]=="string"&&Mr.call(ee,"index")&&(at.index=ee.index,at.input=ee.input),at}function Eo(ee){return typeof ee.constructor=="function"&&!Hs(ee)?Ye(tt(ee)):{}}function Qs(ee,Ie,at,Ht){var kr=ee.constructor;switch(Ie){case $:return Ri(ee);case o:case d:return new kr(+ee);case te:return fo(ee,Ht);case W:case oe:case fe:case he:case Se:case pe:case we:case Ke:case ge:return Mi(ee,Ht);case S:return _s(ee,Ht,at);case B:case q:return new kr(ee);case j:return Gs(ee);case Y:return bA(ee,Ht,at);case ie:return ii(ee)}}function mu(ee,Ie){return Ie=Ie??i,!!Ie&&(typeof ee=="number"||We.test(ee))&&ee>-1&&ee%1==0&&ee<Ie}function Wl(ee){var Ie=typeof ee;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ee!=="__proto__":ee===null}function is(ee){return!!pn&&pn in ee}function Hs(ee){var Ie=ee&&ee.constructor,at=typeof Ie=="function"&&Ie.prototype||or;return ee===at}function po(ee){if(ee!=null){try{return Xn.call(ee)}catch{}try{return ee+""}catch{}}return""}function gs(ee){return oa(ee,!0,!0)}function Ss(ee,Ie){return ee===Ie||ee!==ee&&Ie!==Ie}function nl(ee){return lA(ee)&&Mr.call(ee,"callee")&&(!$t.call(ee,"callee")||Yn.call(ee)==s)}var Ks=Array.isArray;function Ol(ee){return ee!=null&&zi(ee.length)&&!ou(ee)}function lA(ee){return su(ee)&&Ol(ee)}var Hi=Oe||Di;function ou(ee){var Ie=ei(ee)?Yn.call(ee):"";return Ie==b||Ie==E}function zi(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=i}function ei(ee){var Ie=typeof ee;return!!ee&&(Ie=="object"||Ie=="function")}function su(ee){return!!ee&&typeof ee=="object"}function Wi(ee){return Ol(ee)?ao(ee):dn(ee)}function uo(){return[]}function Di(){return!1}n.exports=gs}(Iv,Iv.exports)),Iv.exports}var iY=rY();const o7=Xa(iY);var n4,s7;function oY(){if(s7)return n4;s7=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,o=Object.prototype,d=o.toString;function g(z,j,Y){return z===z&&(Y!==void 0&&(z=z<=Y?z:Y),j!==void 0&&(z=z>=j?z:j)),z}function b(z){var j=typeof z;return!!z&&(j=="object"||j=="function")}function E(z){return!!z&&typeof z=="object"}function S(z){return typeof z=="symbol"||E(z)&&d.call(z)==e}function B(z){if(typeof z=="number")return z;if(S(z))return n;if(b(z)){var j=typeof z.valueOf=="function"?z.valueOf():z;z=b(j)?j+"":j}if(typeof z!="string")return z===0?z:+z;z=z.replace(t,"");var Y=i.test(z);return Y||s.test(z)?a(z.slice(2),Y?2:8):r.test(z)?n:+z}function k(z,j,Y){return Y===void 0&&(Y=j,j=void 0),Y!==void 0&&(Y=B(Y),Y=Y===Y?Y:0),j!==void 0&&(j=B(j),j=j===j?j:0),g(B(z),j,Y)}return n4=k,n4}var sY=oY();const a7=Xa(sY);var r4={},yv={},l7;function aY(){if(l7)return yv;l7=1,yv.byteLength=o,yv.toByteArray=g,yv.fromByteArray=S;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(B){var k=B.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var z=B.indexOf("=");z===-1&&(z=k);var j=z===k?0:4-z%4;return[z,j]}function o(B){var k=a(B),z=k[0],j=k[1];return(z+j)*3/4-j}function d(B,k,z){return(k+z)*3/4-z}function g(B){var k,z=a(B),j=z[0],Y=z[1],q=new t(d(B,j,Y)),ie=0,J=Y>0?j-4:j,$;for($=0;$<J;$+=4)k=e[B.charCodeAt($)]<<18|e[B.charCodeAt($+1)]<<12|e[B.charCodeAt($+2)]<<6|e[B.charCodeAt($+3)],q[ie++]=k>>16&255,q[ie++]=k>>8&255,q[ie++]=k&255;return Y===2&&(k=e[B.charCodeAt($)]<<2|e[B.charCodeAt($+1)]>>4,q[ie++]=k&255),Y===1&&(k=e[B.charCodeAt($)]<<10|e[B.charCodeAt($+1)]<<4|e[B.charCodeAt($+2)]>>2,q[ie++]=k>>8&255,q[ie++]=k&255),q}function b(B){return n[B>>18&63]+n[B>>12&63]+n[B>>6&63]+n[B&63]}function E(B,k,z){for(var j,Y=[],q=k;q<z;q+=3)j=(B[q]<<16&16711680)+(B[q+1]<<8&65280)+(B[q+2]&255),Y.push(b(j));return Y.join("")}function S(B){for(var k,z=B.length,j=z%3,Y=[],q=16383,ie=0,J=z-j;ie<J;ie+=q)Y.push(E(B,ie,ie+q>J?J:ie+q));return j===1?(k=B[z-1],Y.push(n[k>>2]+n[k<<4&63]+"==")):j===2&&(k=(B[z-2]<<8)+B[z-1],Y.push(n[k>>10]+n[k>>4&63]+n[k<<2&63]+"=")),Y.join("")}return yv}var q_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var u7;function lY(){return u7||(u7=1,q_.read=function(n,e,t,r,i){var s,a,o=i*8-r-1,d=(1<<o)-1,g=d>>1,b=-7,E=t?i-1:0,S=t?-1:1,B=n[e+E];for(E+=S,s=B&(1<<-b)-1,B>>=-b,b+=o;b>0;s=s*256+n[e+E],E+=S,b-=8);for(a=s&(1<<-b)-1,s>>=-b,b+=r;b>0;a=a*256+n[e+E],E+=S,b-=8);if(s===0)s=1-g;else{if(s===d)return a?NaN:(B?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-g}return(B?-1:1)*a*Math.pow(2,s-r)},q_.write=function(n,e,t,r,i,s){var a,o,d,g=s*8-i-1,b=(1<<g)-1,E=b>>1,S=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=r?0:s-1,k=r?1:-1,z=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=b):(a=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+E>=1?e+=S/d:e+=S*Math.pow(2,1-E),e*d>=2&&(a++,d/=2),a+E>=b?(o=0,a=b):a+E>=1?(o=(e*d-1)*Math.pow(2,i),a=a+E):(o=e*Math.pow(2,E-1)*Math.pow(2,i),a=0));i>=8;n[t+B]=o&255,B+=k,o/=256,i-=8);for(a=a<<i|o,g+=i;g>0;n[t+B]=a&255,B+=k,a/=256,g-=8);n[t+B-k]|=z*128}),q_}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var A7;function uY(){return A7||(A7=1,function(n){const e=aY(),t=lY(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=q,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const qe=new Uint8Array(1),ce={foo:function(){return 42}};return Object.setPrototypeOf(ce,Uint8Array.prototype),Object.setPrototypeOf(qe,ce),qe.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(qe){if(qe>i)throw new RangeError('The value "'+qe+'" is invalid for option "size"');const ce=new Uint8Array(qe);return Object.setPrototypeOf(ce,o.prototype),ce}function o(qe,ce,me){if(typeof qe=="number"){if(typeof ce=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(qe)}return d(qe,ce,me)}o.poolSize=8192;function d(qe,ce,me){if(typeof qe=="string")return S(qe,ce);if(ArrayBuffer.isView(qe))return k(qe);if(qe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof qe);if(pn(qe,ArrayBuffer)||qe&&pn(qe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pn(qe,SharedArrayBuffer)||qe&&pn(qe.buffer,SharedArrayBuffer)))return z(qe,ce,me);if(typeof qe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const tt=qe.valueOf&&qe.valueOf();if(tt!=null&&tt!==qe)return o.from(tt,ce,me);const Et=j(qe);if(Et)return Et;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof qe[Symbol.toPrimitive]=="function")return o.from(qe[Symbol.toPrimitive]("string"),ce,me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof qe)}o.from=function(qe,ce,me){return d(qe,ce,me)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function g(qe){if(typeof qe!="number")throw new TypeError('"size" argument must be of type number');if(qe<0)throw new RangeError('The value "'+qe+'" is invalid for option "size"')}function b(qe,ce,me){return g(qe),qe<=0?a(qe):ce!==void 0?typeof me=="string"?a(qe).fill(ce,me):a(qe).fill(ce):a(qe)}o.alloc=function(qe,ce,me){return b(qe,ce,me)};function E(qe){return g(qe),a(qe<0?0:Y(qe)|0)}o.allocUnsafe=function(qe){return E(qe)},o.allocUnsafeSlow=function(qe){return E(qe)};function S(qe,ce){if((typeof ce!="string"||ce==="")&&(ce="utf8"),!o.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);const me=ie(qe,ce)|0;let tt=a(me);const Et=tt.write(qe,ce);return Et!==me&&(tt=tt.slice(0,Et)),tt}function B(qe){const ce=qe.length<0?0:Y(qe.length)|0,me=a(ce);for(let tt=0;tt<ce;tt+=1)me[tt]=qe[tt]&255;return me}function k(qe){if(pn(qe,Uint8Array)){const ce=new Uint8Array(qe);return z(ce.buffer,ce.byteOffset,ce.byteLength)}return B(qe)}function z(qe,ce,me){if(ce<0||qe.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(qe.byteLength<ce+(me||0))throw new RangeError('"length" is outside of buffer bounds');let tt;return ce===void 0&&me===void 0?tt=new Uint8Array(qe):me===void 0?tt=new Uint8Array(qe,ce):tt=new Uint8Array(qe,ce,me),Object.setPrototypeOf(tt,o.prototype),tt}function j(qe){if(o.isBuffer(qe)){const ce=Y(qe.length)|0,me=a(ce);return me.length===0||qe.copy(me,0,0,ce),me}if(qe.length!==void 0)return typeof qe.length!="number"||Xn(qe.length)?a(0):B(qe);if(qe.type==="Buffer"&&Array.isArray(qe.data))return B(qe.data)}function Y(qe){if(qe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return qe|0}function q(qe){return+qe!=qe&&(qe=0),o.alloc(+qe)}o.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==o.prototype},o.compare=function(ce,me){if(pn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),pn(me,Uint8Array)&&(me=o.from(me,me.offset,me.byteLength)),!o.isBuffer(ce)||!o.isBuffer(me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===me)return 0;let tt=ce.length,Et=me.length;for(let $t=0,on=Math.min(tt,Et);$t<on;++$t)if(ce[$t]!==me[$t]){tt=ce[$t],Et=me[$t];break}return tt<Et?-1:Et<tt?1:0},o.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(ce,me){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return o.alloc(0);let tt;if(me===void 0)for(me=0,tt=0;tt<ce.length;++tt)me+=ce[tt].length;const Et=o.allocUnsafe(me);let $t=0;for(tt=0;tt<ce.length;++tt){let on=ce[tt];if(pn(on,Uint8Array))$t+on.length>Et.length?(o.isBuffer(on)||(on=o.from(on)),on.copy(Et,$t)):Uint8Array.prototype.set.call(Et,on,$t);else if(o.isBuffer(on))on.copy(Et,$t);else throw new TypeError('"list" argument must be an Array of Buffers');$t+=on.length}return Et};function ie(qe,ce){if(o.isBuffer(qe))return qe.length;if(ArrayBuffer.isView(qe)||pn(qe,ArrayBuffer))return qe.byteLength;if(typeof qe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof qe);const me=qe.length,tt=arguments.length>2&&arguments[2]===!0;if(!tt&&me===0)return 0;let Et=!1;for(;;)switch(ce){case"ascii":case"latin1":case"binary":return me;case"utf8":case"utf-8":return gn(qe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me*2;case"hex":return me>>>1;case"base64":return or(qe).length;default:if(Et)return tt?-1:gn(qe).length;ce=(""+ce).toLowerCase(),Et=!0}}o.byteLength=ie;function J(qe,ce,me){let tt=!1;if((ce===void 0||ce<0)&&(ce=0),ce>this.length||((me===void 0||me>this.length)&&(me=this.length),me<=0)||(me>>>=0,ce>>>=0,me<=ce))return"";for(qe||(qe="utf8");;)switch(qe){case"hex":return We(this,ce,me);case"utf8":case"utf-8":return Ke(this,ce,me);case"ascii":return Qe(this,ce,me);case"latin1":case"binary":return Ze(this,ce,me);case"base64":return we(this,ce,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,ce,me);default:if(tt)throw new TypeError("Unknown encoding: "+qe);qe=(qe+"").toLowerCase(),tt=!0}}o.prototype._isBuffer=!0;function $(qe,ce,me){const tt=qe[ce];qe[ce]=qe[me],qe[me]=tt}o.prototype.swap16=function(){const ce=this.length;if(ce%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let me=0;me<ce;me+=2)$(this,me,me+1);return this},o.prototype.swap32=function(){const ce=this.length;if(ce%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let me=0;me<ce;me+=4)$(this,me,me+3),$(this,me+1,me+2);return this},o.prototype.swap64=function(){const ce=this.length;if(ce%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let me=0;me<ce;me+=8)$(this,me,me+7),$(this,me+1,me+6),$(this,me+2,me+5),$(this,me+3,me+4);return this},o.prototype.toString=function(){const ce=this.length;return ce===0?"":arguments.length===0?Ke(this,0,ce):J.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(ce){if(!o.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce?!0:o.compare(this,ce)===0},o.prototype.inspect=function(){let ce="";const me=n.INSPECT_MAX_BYTES;return ce=this.toString("hex",0,me).replace(/(.{2})/g,"$1 ").trim(),this.length>me&&(ce+=" ... "),"<Buffer "+ce+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(ce,me,tt,Et,$t){if(pn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),!o.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ce);if(me===void 0&&(me=0),tt===void 0&&(tt=ce?ce.length:0),Et===void 0&&(Et=0),$t===void 0&&($t=this.length),me<0||tt>ce.length||Et<0||$t>this.length)throw new RangeError("out of range index");if(Et>=$t&&me>=tt)return 0;if(Et>=$t)return-1;if(me>=tt)return 1;if(me>>>=0,tt>>>=0,Et>>>=0,$t>>>=0,this===ce)return 0;let on=$t-Et,rr=tt-me;const Oe=Math.min(on,rr),se=this.slice(Et,$t),_e=ce.slice(me,tt);for(let p=0;p<Oe;++p)if(se[p]!==_e[p]){on=se[p],rr=_e[p];break}return on<rr?-1:rr<on?1:0};function te(qe,ce,me,tt,Et){if(qe.length===0)return-1;if(typeof me=="string"?(tt=me,me=0):me>2147483647?me=2147483647:me<-2147483648&&(me=-2147483648),me=+me,Xn(me)&&(me=Et?0:qe.length-1),me<0&&(me=qe.length+me),me>=qe.length){if(Et)return-1;me=qe.length-1}else if(me<0)if(Et)me=0;else return-1;if(typeof ce=="string"&&(ce=o.from(ce,tt)),o.isBuffer(ce))return ce.length===0?-1:W(qe,ce,me,tt,Et);if(typeof ce=="number")return ce=ce&255,typeof Uint8Array.prototype.indexOf=="function"?Et?Uint8Array.prototype.indexOf.call(qe,ce,me):Uint8Array.prototype.lastIndexOf.call(qe,ce,me):W(qe,[ce],me,tt,Et);throw new TypeError("val must be string, number or Buffer")}function W(qe,ce,me,tt,Et){let $t=1,on=qe.length,rr=ce.length;if(tt!==void 0&&(tt=String(tt).toLowerCase(),tt==="ucs2"||tt==="ucs-2"||tt==="utf16le"||tt==="utf-16le")){if(qe.length<2||ce.length<2)return-1;$t=2,on/=2,rr/=2,me/=2}function Oe(_e,p){return $t===1?_e[p]:_e.readUInt16BE(p*$t)}let se;if(Et){let _e=-1;for(se=me;se<on;se++)if(Oe(qe,se)===Oe(ce,_e===-1?0:se-_e)){if(_e===-1&&(_e=se),se-_e+1===rr)return _e*$t}else _e!==-1&&(se-=se-_e),_e=-1}else for(me+rr>on&&(me=on-rr),se=me;se>=0;se--){let _e=!0;for(let p=0;p<rr;p++)if(Oe(qe,se+p)!==Oe(ce,p)){_e=!1;break}if(_e)return se}return-1}o.prototype.includes=function(ce,me,tt){return this.indexOf(ce,me,tt)!==-1},o.prototype.indexOf=function(ce,me,tt){return te(this,ce,me,tt,!0)},o.prototype.lastIndexOf=function(ce,me,tt){return te(this,ce,me,tt,!1)};function oe(qe,ce,me,tt){me=Number(me)||0;const Et=qe.length-me;tt?(tt=Number(tt),tt>Et&&(tt=Et)):tt=Et;const $t=ce.length;tt>$t/2&&(tt=$t/2);let on;for(on=0;on<tt;++on){const rr=parseInt(ce.substr(on*2,2),16);if(Xn(rr))return on;qe[me+on]=rr}return on}function fe(qe,ce,me,tt){return Kn(gn(ce,qe.length-me),qe,me,tt)}function he(qe,ce,me,tt){return Kn(Nn(ce),qe,me,tt)}function Se(qe,ce,me,tt){return Kn(or(ce),qe,me,tt)}function pe(qe,ce,me,tt){return Kn(rn(ce,qe.length-me),qe,me,tt)}o.prototype.write=function(ce,me,tt,Et){if(me===void 0)Et="utf8",tt=this.length,me=0;else if(tt===void 0&&typeof me=="string")Et=me,tt=this.length,me=0;else if(isFinite(me))me=me>>>0,isFinite(tt)?(tt=tt>>>0,Et===void 0&&(Et="utf8")):(Et=tt,tt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $t=this.length-me;if((tt===void 0||tt>$t)&&(tt=$t),ce.length>0&&(tt<0||me<0)||me>this.length)throw new RangeError("Attempt to write outside buffer bounds");Et||(Et="utf8");let on=!1;for(;;)switch(Et){case"hex":return oe(this,ce,me,tt);case"utf8":case"utf-8":return fe(this,ce,me,tt);case"ascii":case"latin1":case"binary":return he(this,ce,me,tt);case"base64":return Se(this,ce,me,tt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,ce,me,tt);default:if(on)throw new TypeError("Unknown encoding: "+Et);Et=(""+Et).toLowerCase(),on=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function we(qe,ce,me){return ce===0&&me===qe.length?e.fromByteArray(qe):e.fromByteArray(qe.slice(ce,me))}function Ke(qe,ce,me){me=Math.min(qe.length,me);const tt=[];let Et=ce;for(;Et<me;){const $t=qe[Et];let on=null,rr=$t>239?4:$t>223?3:$t>191?2:1;if(Et+rr<=me){let Oe,se,_e,p;switch(rr){case 1:$t<128&&(on=$t);break;case 2:Oe=qe[Et+1],(Oe&192)===128&&(p=($t&31)<<6|Oe&63,p>127&&(on=p));break;case 3:Oe=qe[Et+1],se=qe[Et+2],(Oe&192)===128&&(se&192)===128&&(p=($t&15)<<12|(Oe&63)<<6|se&63,p>2047&&(p<55296||p>57343)&&(on=p));break;case 4:Oe=qe[Et+1],se=qe[Et+2],_e=qe[Et+3],(Oe&192)===128&&(se&192)===128&&(_e&192)===128&&(p=($t&15)<<18|(Oe&63)<<12|(se&63)<<6|_e&63,p>65535&&p<1114112&&(on=p))}}on===null?(on=65533,rr=1):on>65535&&(on-=65536,tt.push(on>>>10&1023|55296),on=56320|on&1023),tt.push(on),Et+=rr}return st(tt)}const ge=4096;function st(qe){const ce=qe.length;if(ce<=ge)return String.fromCharCode.apply(String,qe);let me="",tt=0;for(;tt<ce;)me+=String.fromCharCode.apply(String,qe.slice(tt,tt+=ge));return me}function Qe(qe,ce,me){let tt="";me=Math.min(qe.length,me);for(let Et=ce;Et<me;++Et)tt+=String.fromCharCode(qe[Et]&127);return tt}function Ze(qe,ce,me){let tt="";me=Math.min(qe.length,me);for(let Et=ce;Et<me;++Et)tt+=String.fromCharCode(qe[Et]);return tt}function We(qe,ce,me){const tt=qe.length;(!ce||ce<0)&&(ce=0),(!me||me<0||me>tt)&&(me=tt);let Et="";for(let $t=ce;$t<me;++$t)Et+=Mr[qe[$t]];return Et}function Ce(qe,ce,me){const tt=qe.slice(ce,me);let Et="";for(let $t=0;$t<tt.length-1;$t+=2)Et+=String.fromCharCode(tt[$t]+tt[$t+1]*256);return Et}o.prototype.slice=function(ce,me){const tt=this.length;ce=~~ce,me=me===void 0?tt:~~me,ce<0?(ce+=tt,ce<0&&(ce=0)):ce>tt&&(ce=tt),me<0?(me+=tt,me<0&&(me=0)):me>tt&&(me=tt),me<ce&&(me=ce);const Et=this.subarray(ce,me);return Object.setPrototypeOf(Et,o.prototype),Et};function Pe(qe,ce,me){if(qe%1!==0||qe<0)throw new RangeError("offset is not uint");if(qe+ce>me)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(ce,me,tt){ce=ce>>>0,me=me>>>0,tt||Pe(ce,me,this.length);let Et=this[ce],$t=1,on=0;for(;++on<me&&($t*=256);)Et+=this[ce+on]*$t;return Et},o.prototype.readUintBE=o.prototype.readUIntBE=function(ce,me,tt){ce=ce>>>0,me=me>>>0,tt||Pe(ce,me,this.length);let Et=this[ce+--me],$t=1;for(;me>0&&($t*=256);)Et+=this[ce+--me]*$t;return Et},o.prototype.readUint8=o.prototype.readUInt8=function(ce,me){return ce=ce>>>0,me||Pe(ce,1,this.length),this[ce]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(ce,me){return ce=ce>>>0,me||Pe(ce,2,this.length),this[ce]|this[ce+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(ce,me){return ce=ce>>>0,me||Pe(ce,2,this.length),this[ce]<<8|this[ce+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(ce,me){return ce=ce>>>0,me||Pe(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+this[ce+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(ce,me){return ce=ce>>>0,me||Pe(ce,4,this.length),this[ce]*16777216+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},o.prototype.readBigUInt64LE=Yn(function(ce){ce=ce>>>0,pt(ce,"offset");const me=this[ce],tt=this[ce+7];(me===void 0||tt===void 0)&&zt(ce,this.length-8);const Et=me+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24,$t=this[++ce]+this[++ce]*2**8+this[++ce]*2**16+tt*2**24;return BigInt(Et)+(BigInt($t)<<BigInt(32))}),o.prototype.readBigUInt64BE=Yn(function(ce){ce=ce>>>0,pt(ce,"offset");const me=this[ce],tt=this[ce+7];(me===void 0||tt===void 0)&&zt(ce,this.length-8);const Et=me*2**24+this[++ce]*2**16+this[++ce]*2**8+this[++ce],$t=this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+tt;return(BigInt(Et)<<BigInt(32))+BigInt($t)}),o.prototype.readIntLE=function(ce,me,tt){ce=ce>>>0,me=me>>>0,tt||Pe(ce,me,this.length);let Et=this[ce],$t=1,on=0;for(;++on<me&&($t*=256);)Et+=this[ce+on]*$t;return $t*=128,Et>=$t&&(Et-=Math.pow(2,8*me)),Et},o.prototype.readIntBE=function(ce,me,tt){ce=ce>>>0,me=me>>>0,tt||Pe(ce,me,this.length);let Et=me,$t=1,on=this[ce+--Et];for(;Et>0&&($t*=256);)on+=this[ce+--Et]*$t;return $t*=128,on>=$t&&(on-=Math.pow(2,8*me)),on},o.prototype.readInt8=function(ce,me){return ce=ce>>>0,me||Pe(ce,1,this.length),this[ce]&128?(255-this[ce]+1)*-1:this[ce]},o.prototype.readInt16LE=function(ce,me){ce=ce>>>0,me||Pe(ce,2,this.length);const tt=this[ce]|this[ce+1]<<8;return tt&32768?tt|4294901760:tt},o.prototype.readInt16BE=function(ce,me){ce=ce>>>0,me||Pe(ce,2,this.length);const tt=this[ce+1]|this[ce]<<8;return tt&32768?tt|4294901760:tt},o.prototype.readInt32LE=function(ce,me){return ce=ce>>>0,me||Pe(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},o.prototype.readInt32BE=function(ce,me){return ce=ce>>>0,me||Pe(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},o.prototype.readBigInt64LE=Yn(function(ce){ce=ce>>>0,pt(ce,"offset");const me=this[ce],tt=this[ce+7];(me===void 0||tt===void 0)&&zt(ce,this.length-8);const Et=this[ce+4]+this[ce+5]*2**8+this[ce+6]*2**16+(tt<<24);return(BigInt(Et)<<BigInt(32))+BigInt(me+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24)}),o.prototype.readBigInt64BE=Yn(function(ce){ce=ce>>>0,pt(ce,"offset");const me=this[ce],tt=this[ce+7];(me===void 0||tt===void 0)&&zt(ce,this.length-8);const Et=(me<<24)+this[++ce]*2**16+this[++ce]*2**8+this[++ce];return(BigInt(Et)<<BigInt(32))+BigInt(this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+tt)}),o.prototype.readFloatLE=function(ce,me){return ce=ce>>>0,me||Pe(ce,4,this.length),t.read(this,ce,!0,23,4)},o.prototype.readFloatBE=function(ce,me){return ce=ce>>>0,me||Pe(ce,4,this.length),t.read(this,ce,!1,23,4)},o.prototype.readDoubleLE=function(ce,me){return ce=ce>>>0,me||Pe(ce,8,this.length),t.read(this,ce,!0,52,8)},o.prototype.readDoubleBE=function(ce,me){return ce=ce>>>0,me||Pe(ce,8,this.length),t.read(this,ce,!1,52,8)};function it(qe,ce,me,tt,Et,$t){if(!o.isBuffer(qe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ce>Et||ce<$t)throw new RangeError('"value" argument is out of bounds');if(me+tt>qe.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(ce,me,tt,Et){if(ce=+ce,me=me>>>0,tt=tt>>>0,!Et){const rr=Math.pow(2,8*tt)-1;it(this,ce,me,tt,rr,0)}let $t=1,on=0;for(this[me]=ce&255;++on<tt&&($t*=256);)this[me+on]=ce/$t&255;return me+tt},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(ce,me,tt,Et){if(ce=+ce,me=me>>>0,tt=tt>>>0,!Et){const rr=Math.pow(2,8*tt)-1;it(this,ce,me,tt,rr,0)}let $t=tt-1,on=1;for(this[me+$t]=ce&255;--$t>=0&&(on*=256);)this[me+$t]=ce/on&255;return me+tt},o.prototype.writeUint8=o.prototype.writeUInt8=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,1,255,0),this[me]=ce&255,me+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,2,65535,0),this[me]=ce&255,this[me+1]=ce>>>8,me+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,2,65535,0),this[me]=ce>>>8,this[me+1]=ce&255,me+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,4,4294967295,0),this[me+3]=ce>>>24,this[me+2]=ce>>>16,this[me+1]=ce>>>8,this[me]=ce&255,me+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,4,4294967295,0),this[me]=ce>>>24,this[me+1]=ce>>>16,this[me+2]=ce>>>8,this[me+3]=ce&255,me+4};function vt(qe,ce,me,tt,Et){Ct(ce,tt,Et,qe,me,7);let $t=Number(ce&BigInt(4294967295));qe[me++]=$t,$t=$t>>8,qe[me++]=$t,$t=$t>>8,qe[me++]=$t,$t=$t>>8,qe[me++]=$t;let on=Number(ce>>BigInt(32)&BigInt(4294967295));return qe[me++]=on,on=on>>8,qe[me++]=on,on=on>>8,qe[me++]=on,on=on>>8,qe[me++]=on,me}function _t(qe,ce,me,tt,Et){Ct(ce,tt,Et,qe,me,7);let $t=Number(ce&BigInt(4294967295));qe[me+7]=$t,$t=$t>>8,qe[me+6]=$t,$t=$t>>8,qe[me+5]=$t,$t=$t>>8,qe[me+4]=$t;let on=Number(ce>>BigInt(32)&BigInt(4294967295));return qe[me+3]=on,on=on>>8,qe[me+2]=on,on=on>>8,qe[me+1]=on,on=on>>8,qe[me]=on,me+8}o.prototype.writeBigUInt64LE=Yn(function(ce,me=0){return vt(this,ce,me,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Yn(function(ce,me=0){return _t(this,ce,me,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(ce,me,tt,Et){if(ce=+ce,me=me>>>0,!Et){const Oe=Math.pow(2,8*tt-1);it(this,ce,me,tt,Oe-1,-Oe)}let $t=0,on=1,rr=0;for(this[me]=ce&255;++$t<tt&&(on*=256);)ce<0&&rr===0&&this[me+$t-1]!==0&&(rr=1),this[me+$t]=(ce/on>>0)-rr&255;return me+tt},o.prototype.writeIntBE=function(ce,me,tt,Et){if(ce=+ce,me=me>>>0,!Et){const Oe=Math.pow(2,8*tt-1);it(this,ce,me,tt,Oe-1,-Oe)}let $t=tt-1,on=1,rr=0;for(this[me+$t]=ce&255;--$t>=0&&(on*=256);)ce<0&&rr===0&&this[me+$t+1]!==0&&(rr=1),this[me+$t]=(ce/on>>0)-rr&255;return me+tt},o.prototype.writeInt8=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,1,127,-128),ce<0&&(ce=255+ce+1),this[me]=ce&255,me+1},o.prototype.writeInt16LE=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,2,32767,-32768),this[me]=ce&255,this[me+1]=ce>>>8,me+2},o.prototype.writeInt16BE=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,2,32767,-32768),this[me]=ce>>>8,this[me+1]=ce&255,me+2},o.prototype.writeInt32LE=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,4,2147483647,-2147483648),this[me]=ce&255,this[me+1]=ce>>>8,this[me+2]=ce>>>16,this[me+3]=ce>>>24,me+4},o.prototype.writeInt32BE=function(ce,me,tt){return ce=+ce,me=me>>>0,tt||it(this,ce,me,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[me]=ce>>>24,this[me+1]=ce>>>16,this[me+2]=ce>>>8,this[me+3]=ce&255,me+4},o.prototype.writeBigInt64LE=Yn(function(ce,me=0){return vt(this,ce,me,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Yn(function(ce,me=0){return _t(this,ce,me,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ft(qe,ce,me,tt,Et,$t){if(me+tt>qe.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("Index out of range")}function Dt(qe,ce,me,tt,Et){return ce=+ce,me=me>>>0,Et||ft(qe,ce,me,4),t.write(qe,ce,me,tt,23,4),me+4}o.prototype.writeFloatLE=function(ce,me,tt){return Dt(this,ce,me,!0,tt)},o.prototype.writeFloatBE=function(ce,me,tt){return Dt(this,ce,me,!1,tt)};function Tt(qe,ce,me,tt,Et){return ce=+ce,me=me>>>0,Et||ft(qe,ce,me,8),t.write(qe,ce,me,tt,52,8),me+8}o.prototype.writeDoubleLE=function(ce,me,tt){return Tt(this,ce,me,!0,tt)},o.prototype.writeDoubleBE=function(ce,me,tt){return Tt(this,ce,me,!1,tt)},o.prototype.copy=function(ce,me,tt,Et){if(!o.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(tt||(tt=0),!Et&&Et!==0&&(Et=this.length),me>=ce.length&&(me=ce.length),me||(me=0),Et>0&&Et<tt&&(Et=tt),Et===tt||ce.length===0||this.length===0)return 0;if(me<0)throw new RangeError("targetStart out of bounds");if(tt<0||tt>=this.length)throw new RangeError("Index out of range");if(Et<0)throw new RangeError("sourceEnd out of bounds");Et>this.length&&(Et=this.length),ce.length-me<Et-tt&&(Et=ce.length-me+tt);const $t=Et-tt;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(me,tt,Et):Uint8Array.prototype.set.call(ce,this.subarray(tt,Et),me),$t},o.prototype.fill=function(ce,me,tt,Et){if(typeof ce=="string"){if(typeof me=="string"?(Et=me,me=0,tt=this.length):typeof tt=="string"&&(Et=tt,tt=this.length),Et!==void 0&&typeof Et!="string")throw new TypeError("encoding must be a string");if(typeof Et=="string"&&!o.isEncoding(Et))throw new TypeError("Unknown encoding: "+Et);if(ce.length===1){const on=ce.charCodeAt(0);(Et==="utf8"&&on<128||Et==="latin1")&&(ce=on)}}else typeof ce=="number"?ce=ce&255:typeof ce=="boolean"&&(ce=Number(ce));if(me<0||this.length<me||this.length<tt)throw new RangeError("Out of range index");if(tt<=me)return this;me=me>>>0,tt=tt===void 0?this.length:tt>>>0,ce||(ce=0);let $t;if(typeof ce=="number")for($t=me;$t<tt;++$t)this[$t]=ce;else{const on=o.isBuffer(ce)?ce:o.from(ce,Et),rr=on.length;if(rr===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for($t=0;$t<tt-me;++$t)this[$t+me]=on[$t%rr]}return this};const Ue={};function Re(qe,ce,me){Ue[qe]=class extends me{constructor(){super(),Object.defineProperty(this,"message",{value:ce.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${qe}]`,this.stack,delete this.name}get code(){return qe}set code(Et){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Et,writable:!0})}toString(){return`${this.name} [${qe}]: ${this.message}`}}}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(qe){return qe?`${qe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(qe,ce){return`The "${qe}" argument must be of type number. Received type ${typeof ce}`},TypeError),Re("ERR_OUT_OF_RANGE",function(qe,ce,me){let tt=`The value of "${qe}" is out of range.`,Et=me;return Number.isInteger(me)&&Math.abs(me)>2**32?Et=Be(String(me)):typeof me=="bigint"&&(Et=String(me),(me>BigInt(2)**BigInt(32)||me<-(BigInt(2)**BigInt(32)))&&(Et=Be(Et)),Et+="n"),tt+=` It must be ${ce}. Received ${Et}`,tt},RangeError);function Be(qe){let ce="",me=qe.length;const tt=qe[0]==="-"?1:0;for(;me>=tt+4;me-=3)ce=`_${qe.slice(me-3,me)}${ce}`;return`${qe.slice(0,me)}${ce}`}function nt(qe,ce,me){pt(ce,"offset"),(qe[ce]===void 0||qe[ce+me]===void 0)&&zt(ce,qe.length-(me+1))}function Ct(qe,ce,me,tt,Et,$t){if(qe>me||qe<ce){const on=typeof ce=="bigint"?"n":"";let rr;throw ce===0||ce===BigInt(0)?rr=`>= 0${on} and < 2${on} ** ${($t+1)*8}${on}`:rr=`>= -(2${on} ** ${($t+1)*8-1}${on}) and < 2 ** ${($t+1)*8-1}${on}`,new Ue.ERR_OUT_OF_RANGE("value",rr,qe)}nt(tt,Et,$t)}function pt(qe,ce){if(typeof qe!="number")throw new Ue.ERR_INVALID_ARG_TYPE(ce,"number",qe)}function zt(qe,ce,me){throw Math.floor(qe)!==qe?(pt(qe,me),new Ue.ERR_OUT_OF_RANGE("offset","an integer",qe)):ce<0?new Ue.ERR_BUFFER_OUT_OF_BOUNDS:new Ue.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ce}`,qe)}const tn=/[^+/0-9A-Za-z-_]/g;function Lt(qe){if(qe=qe.split("=")[0],qe=qe.trim().replace(tn,""),qe.length<2)return"";for(;qe.length%4!==0;)qe=qe+"=";return qe}function gn(qe,ce){ce=ce||1/0;let me;const tt=qe.length;let Et=null;const $t=[];for(let on=0;on<tt;++on){if(me=qe.charCodeAt(on),me>55295&&me<57344){if(!Et){if(me>56319){(ce-=3)>-1&&$t.push(239,191,189);continue}else if(on+1===tt){(ce-=3)>-1&&$t.push(239,191,189);continue}Et=me;continue}if(me<56320){(ce-=3)>-1&&$t.push(239,191,189),Et=me;continue}me=(Et-55296<<10|me-56320)+65536}else Et&&(ce-=3)>-1&&$t.push(239,191,189);if(Et=null,me<128){if((ce-=1)<0)break;$t.push(me)}else if(me<2048){if((ce-=2)<0)break;$t.push(me>>6|192,me&63|128)}else if(me<65536){if((ce-=3)<0)break;$t.push(me>>12|224,me>>6&63|128,me&63|128)}else if(me<1114112){if((ce-=4)<0)break;$t.push(me>>18|240,me>>12&63|128,me>>6&63|128,me&63|128)}else throw new Error("Invalid code point")}return $t}function Nn(qe){const ce=[];for(let me=0;me<qe.length;++me)ce.push(qe.charCodeAt(me)&255);return ce}function rn(qe,ce){let me,tt,Et;const $t=[];for(let on=0;on<qe.length&&!((ce-=2)<0);++on)me=qe.charCodeAt(on),tt=me>>8,Et=me%256,$t.push(Et),$t.push(tt);return $t}function or(qe){return e.toByteArray(Lt(qe))}function Kn(qe,ce,me,tt){let Et;for(Et=0;Et<tt&&!(Et+me>=ce.length||Et>=qe.length);++Et)ce[Et+me]=qe[Et];return Et}function pn(qe,ce){return qe instanceof ce||qe!=null&&qe.constructor!=null&&qe.constructor.name!=null&&qe.constructor.name===ce.name}function Xn(qe){return qe!==qe}const Mr=function(){const qe="0123456789abcdef",ce=new Array(256);for(let me=0;me<16;++me){const tt=me*16;for(let Et=0;Et<16;++Et)ce[tt+Et]=qe[me]+qe[Et]}return ce}();function Yn(qe){return typeof BigInt>"u"?er:qe}function er(){throw new Error("BigInt not supported")}}(r4)),r4}var AY=uY();const cY=Xa(AY);var i4,c7;function dY(){if(c7)return i4;c7=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,o=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/[\\^$.*+?()[\]{}|]/g,b=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,S=typeof window=="object"&&window&&window.Object===Object&&window,B=typeof self=="object"&&self&&self.Object===Object&&self,k=S||B||Function("return this")();function z(se,_e){return se==null?void 0:se[_e]}function j(se){var _e=!1;if(se!=null&&typeof se.toString!="function")try{_e=!!(se+"")}catch{}return _e}var Y=Array.prototype,q=Function.prototype,ie=Object.prototype,J=k["__core-js_shared__"],$=function(){var se=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||"");return se?"Symbol(src)_1."+se:""}(),te=q.toString,W=ie.hasOwnProperty,oe=ie.toString,fe=RegExp("^"+te.call(W).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=k.Symbol,Se=Y.splice,pe=or(k,"Map"),we=or(Object,"create"),Ke=he?he.prototype:void 0,ge=Ke?Ke.toString:void 0;function st(se){var _e=-1,p=se?se.length:0;for(this.clear();++_e<p;){var Ne=se[_e];this.set(Ne[0],Ne[1])}}function Qe(){this.__data__=we?we(null):{}}function Ze(se){return this.has(se)&&delete this.__data__[se]}function We(se){var _e=this.__data__;if(we){var p=_e[se];return p===e?void 0:p}return W.call(_e,se)?_e[se]:void 0}function Ce(se){var _e=this.__data__;return we?_e[se]!==void 0:W.call(_e,se)}function Pe(se,_e){var p=this.__data__;return p[se]=we&&_e===void 0?e:_e,this}st.prototype.clear=Qe,st.prototype.delete=Ze,st.prototype.get=We,st.prototype.has=Ce,st.prototype.set=Pe;function it(se){var _e=-1,p=se?se.length:0;for(this.clear();++_e<p;){var Ne=se[_e];this.set(Ne[0],Ne[1])}}function vt(){this.__data__=[]}function _t(se){var _e=this.__data__,p=zt(_e,se);if(p<0)return!1;var Ne=_e.length-1;return p==Ne?_e.pop():Se.call(_e,p,1),!0}function ft(se){var _e=this.__data__,p=zt(_e,se);return p<0?void 0:_e[p][1]}function Dt(se){return zt(this.__data__,se)>-1}function Tt(se,_e){var p=this.__data__,Ne=zt(p,se);return Ne<0?p.push([se,_e]):p[Ne][1]=_e,this}it.prototype.clear=vt,it.prototype.delete=_t,it.prototype.get=ft,it.prototype.has=Dt,it.prototype.set=Tt;function Ue(se){var _e=-1,p=se?se.length:0;for(this.clear();++_e<p;){var Ne=se[_e];this.set(Ne[0],Ne[1])}}function Re(){this.__data__={hash:new st,map:new(pe||it),string:new st}}function Be(se){return rn(this,se).delete(se)}function nt(se){return rn(this,se).get(se)}function Ct(se){return rn(this,se).has(se)}function pt(se,_e){return rn(this,se).set(se,_e),this}Ue.prototype.clear=Re,Ue.prototype.delete=Be,Ue.prototype.get=nt,Ue.prototype.has=Ct,Ue.prototype.set=pt;function zt(se,_e){for(var p=se.length;p--;)if(ce(se[p][0],_e))return p;return-1}function tn(se,_e){_e=Kn(_e,se)?[_e]:Nn(_e);for(var p=0,Ne=_e.length;se!=null&&p<Ne;)se=se[Yn(_e[p++])];return p&&p==Ne?se:void 0}function Lt(se){if(!Et(se)||Xn(se))return!1;var _e=tt(se)||j(se)?fe:E;return _e.test(er(se))}function gn(se){if(typeof se=="string")return se;if(on(se))return ge?ge.call(se):"";var _e=se+"";return _e=="0"&&1/se==-1/0?"-0":_e}function Nn(se){return me(se)?se:Mr(se)}function rn(se,_e){var p=se.__data__;return pn(_e)?p[typeof _e=="string"?"string":"hash"]:p.map}function or(se,_e){var p=z(se,_e);return Lt(p)?p:void 0}function Kn(se,_e){if(me(se))return!1;var p=typeof se;return p=="number"||p=="symbol"||p=="boolean"||se==null||on(se)?!0:a.test(se)||!s.test(se)||_e!=null&&se in Object(_e)}function pn(se){var _e=typeof se;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?se!=="__proto__":se===null}function Xn(se){return!!$&&$ in se}var Mr=qe(function(se){se=rr(se);var _e=[];return o.test(se)&&_e.push(""),se.replace(d,function(p,Ne,$e,rt){_e.push($e?rt.replace(b,"$1"):Ne||p)}),_e});function Yn(se){if(typeof se=="string"||on(se))return se;var _e=se+"";return _e=="0"&&1/se==-1/0?"-0":_e}function er(se){if(se!=null){try{return te.call(se)}catch{}try{return se+""}catch{}}return""}function qe(se,_e){if(typeof se!="function"||_e&&typeof _e!="function")throw new TypeError(n);var p=function(){var Ne=arguments,$e=_e?_e.apply(this,Ne):Ne[0],rt=p.cache;if(rt.has($e))return rt.get($e);var dt=se.apply(this,Ne);return p.cache=rt.set($e,dt),dt};return p.cache=new(qe.Cache||Ue),p}qe.Cache=Ue;function ce(se,_e){return se===_e||se!==se&&_e!==_e}var me=Array.isArray;function tt(se){var _e=Et(se)?oe.call(se):"";return _e==t||_e==r}function Et(se){var _e=typeof se;return!!se&&(_e=="object"||_e=="function")}function $t(se){return!!se&&typeof se=="object"}function on(se){return typeof se=="symbol"||$t(se)&&oe.call(se)==i}function rr(se){return se==null?"":gn(se)}function Oe(se,_e,p){var Ne=se==null?void 0:tn(se,_e);return Ne===void 0?p:Ne}return i4=Oe,i4}var hY=dY();const fY=Xa(hY);var kv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var pY=kv.exports,d7;function mY(){return d7||(d7=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",g=500,b="__lodash_placeholder__",E=1,S=2,B=4,k=1,z=2,j=1,Y=2,q=4,ie=8,J=16,$=32,te=64,W=128,oe=256,fe=512,he=30,Se="...",pe=800,we=16,Ke=1,ge=2,st=3,Qe=1/0,Ze=9007199254740991,We=17976931348623157e292,Ce=NaN,Pe=4294967295,it=Pe-1,vt=Pe>>>1,_t=[["ary",W],["bind",j],["bindKey",Y],["curry",ie],["curryRight",J],["flip",fe],["partial",$],["partialRight",te],["rearg",oe]],ft="[object Arguments]",Dt="[object Array]",Tt="[object AsyncFunction]",Ue="[object Boolean]",Re="[object Date]",Be="[object DOMException]",nt="[object Error]",Ct="[object Function]",pt="[object GeneratorFunction]",zt="[object Map]",tn="[object Number]",Lt="[object Null]",gn="[object Object]",Nn="[object Promise]",rn="[object Proxy]",or="[object RegExp]",Kn="[object Set]",pn="[object String]",Xn="[object Symbol]",Mr="[object Undefined]",Yn="[object WeakMap]",er="[object WeakSet]",qe="[object ArrayBuffer]",ce="[object DataView]",me="[object Float32Array]",tt="[object Float64Array]",Et="[object Int8Array]",$t="[object Int16Array]",on="[object Int32Array]",rr="[object Uint8Array]",Oe="[object Uint8ClampedArray]",se="[object Uint16Array]",_e="[object Uint32Array]",p=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,$e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rt=/&(?:amp|lt|gt|quot|#39);/g,dt=/[&<>"']/g,ct=RegExp(rt.source),Qt=RegExp(dt.source),Vt=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,Dn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,On=/^\w*$/,pr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Er=/[\\^$.*+?()[\]{}|]/g,sn=RegExp(Er.source),Wn=/^\s+/,Ln=/\s/,Ir=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Br=/\{\n\/\* \[wrapped with (.+)\] \*/,Kr=/,? & /,Ar=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ho=/[()=,{}\[\]\/\s]/,Ea=/\\(\\)?/g,Yi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vi=/\w*$/,so=/^[-+]0x[0-9a-f]+$/i,So=/^0b[01]+$/i,Pi=/^\[object .+?Constructor\]$/,Ua=/^0o[0-7]+$/i,Ba=/^(?:0|[1-9]\d*)$/,rs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ca=/($^)/,dl=/['\n\r\u2028\u2029\\]/g,lo="\\ud800-\\udfff",Ku="\\u0300-\\u036f",iu="\\ufe20-\\ufe2f",ao="\\u20d0-\\u20ff",Fr=Ku+iu+ao,Ja="\\u2700-\\u27bf",Rs="a-z\\xdf-\\xf6\\xf8-\\xff",oa="\\xac\\xb1\\xd7\\xf7",Ye="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Mt="\\u2000-\\u206f",yn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$n="A-Z\\xc0-\\xd6\\xd8-\\xde",dn="\\ufe0e\\ufe0f",ar=oa+Ye+Mt+yn,Ri="['’]",fo="["+lo+"]",_s="["+ar+"]",Gs="["+Fr+"]",bA="\\d+",ii="["+Ja+"]",Mi="["+Rs+"]",el="[^"+lo+ar+bA+Ja+Rs+$n+"]",ci="\\ud83c[\\udffb-\\udfff]",da="(?:"+Gs+"|"+ci+")",aA="[^"+lo+"]",us="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",Bi="["+$n+"]",tl="\\u200d",Ds="(?:"+Mi+"|"+el+")",Eo="(?:"+Bi+"|"+el+")",Qs="(?:"+Ri+"(?:d|ll|m|re|s|t|ve))?",mu="(?:"+Ri+"(?:D|LL|M|RE|S|T|VE))?",Wl=da+"?",is="["+dn+"]?",Hs="(?:"+tl+"(?:"+[aA,us,Lr].join("|")+")"+is+Wl+")*",po="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ss=is+Wl+Hs,nl="(?:"+[ii,us,Lr].join("|")+")"+Ss,Ks="(?:"+[aA+Gs+"?",Gs,us,Lr,fo].join("|")+")",Ol=RegExp(Ri,"g"),lA=RegExp(Gs,"g"),Hi=RegExp(ci+"(?="+ci+")|"+Ks+Ss,"g"),ou=RegExp([Bi+"?"+Mi+"+"+Qs+"(?="+[_s,Bi,"$"].join("|")+")",Eo+"+"+mu+"(?="+[_s,Bi+Ds,"$"].join("|")+")",Bi+"?"+Ds+"+"+Qs,Bi+"+"+mu,gs,po,bA,nl].join("|"),"g"),zi=RegExp("["+tl+lo+Fr+dn+"]"),ei=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,su=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wi=-1,uo={};uo[me]=uo[tt]=uo[Et]=uo[$t]=uo[on]=uo[rr]=uo[Oe]=uo[se]=uo[_e]=!0,uo[ft]=uo[Dt]=uo[qe]=uo[Ue]=uo[ce]=uo[Re]=uo[nt]=uo[Ct]=uo[zt]=uo[tn]=uo[gn]=uo[or]=uo[Kn]=uo[pn]=uo[Yn]=!1;var Di={};Di[ft]=Di[Dt]=Di[qe]=Di[ce]=Di[Ue]=Di[Re]=Di[me]=Di[tt]=Di[Et]=Di[$t]=Di[on]=Di[zt]=Di[tn]=Di[gn]=Di[or]=Di[Kn]=Di[pn]=Di[Xn]=Di[rr]=Di[Oe]=Di[se]=Di[_e]=!0,Di[nt]=Di[Ct]=Di[Yn]=!1;var ee={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},at={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ht={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kr=parseFloat,Vn=parseInt,ai=typeof window=="object"&&window&&window.Object===Object&&window,di=typeof self=="object"&&self&&self.Object===Object&&self,Cr=ai||di||Function("return this")(),Tr=e&&!e.nodeType&&e,Ci=Tr&&!0&&n&&!n.nodeType&&n,Bo=Ci&&Ci.exports===Tr,Ti=Bo&&ai.process,Yr=function(){try{var Zt=Ci&&Ci.require&&Ci.require("util").types;return Zt||Ti&&Ti.binding&&Ti.binding("util")}catch{}}(),Zi=Yr&&Yr.isArrayBuffer,Xi=Yr&&Yr.isDate,As=Yr&&Yr.isMap,va=Yr&&Yr.isRegExp,za=Yr&&Yr.isSet,gu=Yr&&Yr.isTypedArray;function Zs(Zt,Rn,ln){switch(ln.length){case 0:return Zt.call(Rn);case 1:return Zt.call(Rn,ln[0]);case 2:return Zt.call(Rn,ln[0],ln[1]);case 3:return Zt.call(Rn,ln[0],ln[1],ln[2])}return Zt.apply(Rn,ln)}function mc(Zt,Rn,ln,zr){for(var _i=-1,bo=Zt==null?0:Zt.length;++_i<bo;){var sa=Zt[_i];Rn(zr,sa,ln(sa),Zt)}return zr}function Oa(Zt,Rn){for(var ln=-1,zr=Zt==null?0:Zt.length;++ln<zr&&Rn(Zt[ln],ln,Zt)!==!1;);return Zt}function hl(Zt,Rn){for(var ln=Zt==null?0:Zt.length;ln--&&Rn(Zt[ln],ln,Zt)!==!1;);return Zt}function dd(Zt,Rn){for(var ln=-1,zr=Zt==null?0:Zt.length;++ln<zr;)if(!Rn(Zt[ln],ln,Zt))return!1;return!0}function Fu(Zt,Rn){for(var ln=-1,zr=Zt==null?0:Zt.length,_i=0,bo=[];++ln<zr;){var sa=Zt[ln];Rn(sa,ln,Zt)&&(bo[_i++]=sa)}return bo}function Lu(Zt,Rn){var ln=Zt==null?0:Zt.length;return!!ln&&Xs(Zt,Rn,0)>-1}function Sh(Zt,Rn,ln){for(var zr=-1,_i=Zt==null?0:Zt.length;++zr<_i;)if(ln(Rn,Zt[zr]))return!0;return!1}function Es(Zt,Rn){for(var ln=-1,zr=Zt==null?0:Zt.length,_i=Array(zr);++ln<zr;)_i[ln]=Rn(Zt[ln],ln,Zt);return _i}function Uu(Zt,Rn){for(var ln=-1,zr=Rn.length,_i=Zt.length;++ln<zr;)Zt[_i+ln]=Rn[ln];return Zt}function hd(Zt,Rn,ln,zr){var _i=-1,bo=Zt==null?0:Zt.length;for(zr&&bo&&(ln=Zt[++_i]);++_i<bo;)ln=Rn(ln,Zt[_i],_i,Zt);return ln}function Mp(Zt,Rn,ln,zr){var _i=Zt==null?0:Zt.length;for(zr&&_i&&(ln=Zt[--_i]);_i--;)ln=Rn(ln,Zt[_i],_i,Zt);return ln}function uA(Zt,Rn){for(var ln=-1,zr=Zt==null?0:Zt.length;++ln<zr;)if(Rn(Zt[ln],ln,Zt))return!0;return!1}var Hd=af("length");function jc(Zt){return Zt.split("")}function Sp(Zt){return Zt.match(Ar)||[]}function zf(Zt,Rn,ln){var zr;return ln(Zt,function(_i,bo,sa){if(Rn(_i,bo,sa))return zr=bo,!1}),zr}function gc(Zt,Rn,ln,zr){for(var _i=Zt.length,bo=ln+(zr?1:-1);zr?bo--:++bo<_i;)if(Rn(Zt[bo],bo,Zt))return bo;return-1}function Xs(Zt,Rn,ln){return Rn===Rn?kh(Zt,Rn,ln):gc(Zt,sf,ln)}function Eh(Zt,Rn,ln,zr){for(var _i=ln-1,bo=Zt.length;++_i<bo;)if(zr(Zt[_i],Rn))return _i;return-1}function sf(Zt){return Zt!==Zt}function fd(Zt,Rn){var ln=Zt==null?0:Zt.length;return ln?Oh(Zt,Rn)/ln:Ce}function af(Zt){return function(Rn){return Rn==null?t:Rn[Zt]}}function pd(Zt){return function(Rn){return Zt==null?t:Zt[Rn]}}function yc(Zt,Rn,ln,zr,_i){return _i(Zt,function(bo,sa,Ho){ln=zr?(zr=!1,bo):Rn(ln,bo,sa,Ho)}),ln}function Bh(Zt,Rn){var ln=Zt.length;for(Zt.sort(Rn);ln--;)Zt[ln]=Zt[ln].value;return Zt}function Oh(Zt,Rn){for(var ln,zr=-1,_i=Zt.length;++zr<_i;){var bo=Rn(Zt[zr]);bo!==t&&(ln=ln===t?bo:ln+bo)}return ln}function md(Zt,Rn){for(var ln=-1,zr=Array(Zt);++ln<Zt;)zr[ln]=Rn(ln);return zr}function pm(Zt,Rn){return Es(Rn,function(ln){return[ln,Zt[ln]]})}function Nc(Zt){return Zt&&Zt.slice(0,Xd(Zt)+1).replace(Wn,"")}function yu(Zt){return function(Rn){return Zt(Rn)}}function Ih(Zt,Rn){return Es(Rn,function(ln){return Zt[ln]})}function vu(Zt,Rn){return Zt.has(Rn)}function AA(Zt,Rn){for(var ln=-1,zr=Zt.length;++ln<zr&&Xs(Rn,Zt[ln],0)>-1;);return ln}function Wc(Zt,Rn){for(var ln=Zt.length;ln--&&Xs(Rn,Zt[ln],0)>-1;);return ln}function Zd(Zt,Rn){for(var ln=Zt.length,zr=0;ln--;)Zt[ln]===Rn&&++zr;return zr}var lf=pd(ee),au=pd(Ie);function Il(Zt){return"\\"+Ht[Zt]}function YA(Zt,Rn){return Zt==null?t:Zt[Rn]}function Gc(Zt){return zi.test(Zt)}function uf(Zt){return ei.test(Zt)}function jf(Zt){for(var Rn,ln=[];!(Rn=Zt.next()).done;)ln.push(Rn.value);return ln}function gd(Zt){var Rn=-1,ln=Array(Zt.size);return Zt.forEach(function(zr,_i){ln[++Rn]=[_i,zr]}),ln}function xA(Zt,Rn){return function(ln){return Zt(Rn(ln))}}function rl(Zt,Rn){for(var ln=-1,zr=Zt.length,_i=0,bo=[];++ln<zr;){var sa=Zt[ln];(sa===Rn||sa===b)&&(Zt[ln]=b,bo[_i++]=ln)}return bo}function kl(Zt){var Rn=-1,ln=Array(Zt.size);return Zt.forEach(function(zr){ln[++Rn]=zr}),ln}function Vo(Zt){var Rn=-1,ln=Array(Zt.size);return Zt.forEach(function(zr){ln[++Rn]=[zr,zr]}),ln}function kh(Zt,Rn,ln){for(var zr=ln-1,_i=Zt.length;++zr<_i;)if(Zt[zr]===Rn)return zr;return-1}function mm(Zt,Rn,ln){for(var zr=ln+1;zr--;)if(Zt[zr]===Rn)return zr;return zr}function Qc(Zt){return Gc(Zt)?vc(Zt):Hd(Zt)}function zu(Zt){return Gc(Zt)?eh(Zt):jc(Zt)}function Xd(Zt){for(var Rn=Zt.length;Rn--&&Ln.test(Zt.charAt(Rn)););return Rn}var Jd=pd(at);function vc(Zt){for(var Rn=Hi.lastIndex=0;Hi.test(Zt);)++Rn;return Rn}function eh(Zt){return Zt.match(Hi)||[]}function Af(Zt){return Zt.match(ou)||[]}var Cc=function Zt(Rn){Rn=Rn==null?Cr:Cu.defaults(Cr.Object(),Rn,Cu.pick(Cr,su));var ln=Rn.Array,zr=Rn.Date,_i=Rn.Error,bo=Rn.Function,sa=Rn.Math,Ho=Rn.Object,$A=Rn.RegExp,Ep=Rn.String,Tl=Rn.TypeError,_u=ln.prototype,VA=bo.prototype,Pl=Ho.prototype,Gi=Rn["__core-js_shared__"],HA=VA.toString,zo=Pl.hasOwnProperty,qc=0,ZA=function(){var x=/[^.]+$/.exec(Gi&&Gi.keys&&Gi.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),wA=Pl.toString,cA=HA.call(Ho),Rl=Cr._,_c=$A("^"+HA.call(zo).replace(Er,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bu=Bo?Rn.Buffer:t,Gl=Rn.Symbol,Yc=Rn.Uint8Array,th=bu?bu.allocUnsafe:t,ja=xA(Ho.getPrototypeOf,Ho),yd=Ho.create,bc=Pl.propertyIsEnumerable,XA=_u.splice,cf=Gl?Gl.isConcatSpreadable:t,MA=Gl?Gl.iterator:t,JA=Gl?Gl.toStringTag:t,$c=function(){try{var x=Kd(Ho,"defineProperty");return x({},"",{}),x}catch{}}(),nh=Rn.clearTimeout!==Cr.clearTimeout&&Rn.clearTimeout,Zo=zr&&zr.now!==Cr.Date.now&&zr.now,Vc=Rn.setTimeout!==Cr.setTimeout&&Rn.setTimeout,ec=sa.ceil,ju=sa.floor,Hc=Ho.getOwnPropertySymbols,rh=bu?bu.isBuffer:t,Zc=Rn.isFinite,xc=_u.join,cs=xA(Ho.keys,Ho),jo=sa.max,ds=sa.min,Nf=zr.now,vd=Rn.parseInt,Cd=sa.random,Nu=_u.reverse,tc=Kd(Rn,"DataView"),Ql=Kd(Rn,"Map"),SA=Kd(Rn,"Promise"),fl=Kd(Rn,"Set"),nc=Kd(Rn,"WeakMap"),Wu=Kd(Ho,"create"),_d=nc&&new nc,Gu={},ih=xa(tc),rc=xa(Ql),Qu=xa(SA),qu=xa(fl),EA=xa(nc),wc=Gl?Gl.prototype:t,xu=wc?wc.valueOf:t,Xc=wc?wc.toString:t;function ot(x){if(Ml(x)&&!Co(x)&&!(x instanceof Vr)){if(x instanceof Ki)return x;if(zo.call(x,"__wrapped__"))return Hl(x)}return new Ki(x)}var Na=function(){function x(){}return function(P){if(!wl(P))return{};if(yd)return yd(P);x.prototype=P;var H=new x;return x.prototype=t,H}}();function Oo(){}function Ki(x,P){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!P,this.__index__=0,this.__values__=t}ot.templateSettings={escape:Vt,evaluate:Nt,interpolate:wt,variable:"",imports:{_:ot}},ot.prototype=Oo.prototype,ot.prototype.constructor=ot,Ki.prototype=Na(Oo.prototype),Ki.prototype.constructor=Ki;function Vr(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pe,this.__views__=[]}function Bs(){var x=new Vr(this.__wrapped__);return x.__actions__=Pa(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=Pa(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=Pa(this.__views__),x}function bd(){if(this.__filtered__){var x=new Vr(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function oh(){var x=this.__wrapped__.value(),P=this.__dir__,H=Co(x),ve=P<0,He=H?x.length:0,ht=vm(0,He,this.__views__),Ft=ht.start,Yt=ht.end,an=Yt-Ft,Hn=ve?Yt:Ft-1,Zn=this.__iteratees__,mr=Zn.length,Xr=0,wi=ds(an,this.__takeCount__);if(!H||!ve&&He==an&&wi==an)return gl(x,this.__actions__);var eo=[];e:for(;an--&&Xr<wi;){Hn+=P;for(var ss=-1,to=x[Hn];++ss<mr;){var Ms=Zn[ss],Us=Ms.iteratee,qh=Ms.type,Gd=Us(to);if(qh==ge)to=Gd;else if(!Gd){if(qh==Ke)continue e;break e}}eo[Xr++]=to}return eo}Vr.prototype=Na(Oo.prototype),Vr.prototype.constructor=Vr;function Ia(x){var P=-1,H=x==null?0:x.length;for(this.clear();++P<H;){var ve=x[P];this.set(ve[0],ve[1])}}function qs(){this.__data__=Wu?Wu(null):{},this.size=0}function bs(x){var P=this.has(x)&&delete this.__data__[x];return this.size-=P?1:0,P}function dA(x){var P=this.__data__;if(Wu){var H=P[x];return H===d?t:H}return zo.call(P,x)?P[x]:t}function Os(x){var P=this.__data__;return Wu?P[x]!==t:zo.call(P,x)}function vr(x,P){var H=this.__data__;return this.size+=this.has(x)?0:1,H[x]=Wu&&P===t?d:P,this}Ia.prototype.clear=qs,Ia.prototype.delete=bs,Ia.prototype.get=dA,Ia.prototype.has=Os,Ia.prototype.set=vr;function Ca(x){var P=-1,H=x==null?0:x.length;for(this.clear();++P<H;){var ve=x[P];this.set(ve[0],ve[1])}}function Jc(){this.__data__=[],this.size=0}function ka(x){var P=this.__data__,H=ys(P,x);if(H<0)return!1;var ve=P.length-1;return H==ve?P.pop():XA.call(P,H,1),--this.size,!0}function ic(x){var P=this.__data__,H=ys(P,x);return H<0?t:P[H][1]}function xd(x){return ys(this.__data__,x)>-1}function wd(x,P){var H=this.__data__,ve=ys(H,x);return ve<0?(++this.size,H.push([x,P])):H[ve][1]=P,this}Ca.prototype.clear=Jc,Ca.prototype.delete=ka,Ca.prototype.get=ic,Ca.prototype.has=xd,Ca.prototype.set=wd;function Si(x){var P=-1,H=x==null?0:x.length;for(this.clear();++P<H;){var ve=x[P];this.set(ve[0],ve[1])}}function Md(){this.size=0,this.__data__={hash:new Ia,map:new(Ql||Ca),string:new Ia}}function ql(x){var P=td(this,x).delete(x);return this.size-=P?1:0,P}function Sd(x){return td(this,x).get(x)}function Ed(x){return td(this,x).has(x)}function BA(x,P){var H=td(this,x),ve=H.size;return H.set(x,P),this.size+=H.size==ve?0:1,this}Si.prototype.clear=Md,Si.prototype.delete=ql,Si.prototype.get=Sd,Si.prototype.has=Ed,Si.prototype.set=BA;function oc(x){var P=-1,H=x==null?0:x.length;for(this.__data__=new Si;++P<H;)this.add(x[P])}function hA(x){return this.__data__.set(x,d),this}function Mc(x){return this.__data__.has(x)}oc.prototype.add=oc.prototype.push=hA,oc.prototype.has=Mc;function Is(x){var P=this.__data__=new Ca(x);this.size=P.size}function xo(){this.__data__=new Ca,this.size=0}function wu(x){var P=this.__data__,H=P.delete(x);return this.size=P.size,H}function Wa(x){return this.__data__.get(x)}function Fs(x){return this.__data__.has(x)}function Xo(x,P){var H=this.__data__;if(H instanceof Ca){var ve=H.__data__;if(!Ql||ve.length<i-1)return ve.push([x,P]),this.size=++H.size,this;H=this.__data__=new Si(ve)}return H.set(x,P),this.size=H.size,this}Is.prototype.clear=xo,Is.prototype.delete=wu,Is.prototype.get=Wa,Is.prototype.has=Fs,Is.prototype.set=Xo;function lu(x,P){var H=Co(x),ve=!H&&Im(x),He=!H&&!ve&&Gh(x),ht=!H&&!ve&&!He&&Wp(x),Ft=H||ve||He||ht,Yt=Ft?md(x.length,Ep):[],an=Yt.length;for(var Hn in x)(P||zo.call(x,Hn))&&!(Ft&&(Hn=="length"||He&&(Hn=="offset"||Hn=="parent")||ht&&(Hn=="buffer"||Hn=="byteLength"||Hn=="byteOffset")||I(Hn,an)))&&Yt.push(Hn);return Yt}function Yu(x){var P=x.length;return P?x[bn(0,P-1)]:t}function Sc(x,P){return qa(Pa(x),Mu(P,0,x.length))}function sh(x){return qa(Pa(x))}function OA(x,P,H){(H!==t&&!dh(x[P],H)||H===t&&!(P in x))&&$u(x,P,H)}function Ec(x,P,H){var ve=x[P];(!(zo.call(x,P)&&dh(ve,H))||H===t&&!(P in x))&&$u(x,P,H)}function ys(x,P){for(var H=x.length;H--;)if(dh(x[H][0],P))return H;return-1}function ha(x,P,H,ve){return Ro(x,function(He,ht,Ft){P(ve,He,H(He),Ft)}),ve}function yr(x,P){return x&&hu(P,Wr(P),x)}function Zr(x,P){return x&&hu(P,qr(P),x)}function $u(x,P,H){P=="__proto__"&&$c?$c(x,P,{configurable:!0,enumerable:!0,value:H,writable:!0}):x[P]=H}function sc(x,P){for(var H=-1,ve=P.length,He=ln(ve),ht=x==null;++H<ve;)He[H]=ht?t:Mn(x,P[H]);return He}function Mu(x,P,H){return x===x&&(H!==t&&(x=x<=H?x:H),P!==t&&(x=x>=P?x:P)),x}function xs(x,P,H,ve,He,ht){var Ft,Yt=P&E,an=P&S,Hn=P&B;if(H&&(Ft=He?H(x,ve,He,ht):H(x)),Ft!==t)return Ft;if(!wl(x))return x;var Zn=Co(x);if(Zn){if(Ft=mf(x),!Yt)return Pa(x,Ft)}else{var mr=vl(x),Xr=mr==Ct||mr==pt;if(Gh(x))return ws(x,Yt);if(mr==gn||mr==ft||Xr&&!He){if(Ft=an||Xr?{}:sl(x),!Yt)return an?Bp(x,Zr(Ft,x)):kd(x,yr(Ft,x))}else{if(!Di[mr])return He?x:{};Ft=Dp(x,mr,Yt)}}ht||(ht=new Is);var wi=ht.get(x);if(wi)return wi;ht.set(x,Ft),A1(x)?x.forEach(function(to){Ft.add(xs(to,P,H,to,x,ht))}):O_(x)&&x.forEach(function(to,Ms){Ft.set(Ms,xs(to,P,H,Ms,x,ht))});var eo=Hn?an?pf:ff:an?qr:Wr,ss=Zn?t:eo(x);return Oa(ss||x,function(to,Ms){ss&&(Ms=to,to=x[Ms]),Ec(Ft,Ms,xs(to,P,H,Ms,x,ht))}),Ft}function Wf(x){var P=Wr(x);return function(H){return uu(H,x,P)}}function uu(x,P,H){var ve=H.length;if(x==null)return!ve;for(x=Ho(x);ve--;){var He=H[ve],ht=P[He],Ft=x[He];if(Ft===t&&!(He in x)||!ht(Ft))return!1}return!0}function Gf(x,P,H){if(typeof x!="function")throw new Tl(a);return li(function(){x.apply(t,H)},P)}function Su(x,P,H,ve){var He=-1,ht=Lu,Ft=!0,Yt=x.length,an=[],Hn=P.length;if(!Yt)return an;H&&(P=Es(P,yu(H))),ve?(ht=Sh,Ft=!1):P.length>=i&&(ht=vu,Ft=!1,P=new oc(P));e:for(;++He<Yt;){var Zn=x[He],mr=H==null?Zn:H(Zn);if(Zn=ve||Zn!==0?Zn:0,Ft&&mr===mr){for(var Xr=Hn;Xr--;)if(P[Xr]===mr)continue e;an.push(Zn)}else ht(P,mr,ve)||an.push(Zn)}return an}var Ro=Qa(pl),ks=Qa(Vu,!0);function ah(x,P){var H=!0;return Ro(x,function(ve,He,ht){return H=!!P(ve,He,ht),H}),H}function IA(x,P,H){for(var ve=-1,He=x.length;++ve<He;){var ht=x[ve],Ft=P(ht);if(Ft!=null&&(Yt===t?Ft===Ft&&!LA(Ft):H(Ft,Yt)))var Yt=Ft,an=ht}return an}function lh(x,P,H,ve){var He=x.length;for(H=w(H),H<0&&(H=-H>He?0:He+H),ve=ve===t||ve>He?He:w(ve),ve<0&&(ve+=He),ve=H>ve?0:K(ve);H<ve;)x[H++]=P;return x}function kA(x,P){var H=[];return Ro(x,function(ve,He,ht){P(ve,He,ht)&&H.push(ve)}),H}function Ys(x,P,H,ve,He){var ht=-1,Ft=x.length;for(H||(H=y),He||(He=[]);++ht<Ft;){var Yt=x[ht];P>0&&H(Yt)?P>1?Ys(Yt,P-1,H,ve,He):Uu(He,Yt):ve||(He[He.length]=Yt)}return He}var Bc=Op(),Yl=Op(!0);function pl(x,P){return x&&Bc(x,P,Wr)}function Vu(x,P){return x&&Yl(x,P,Wr)}function Oc(x,P){return Fu(P,function(H){return Ac(x[H])})}function Eu(x,P){P=ea(P,x);for(var H=0,ve=P.length;x!=null&&H<ve;)x=x[ba(P[H++])];return H&&H==ve?x:t}function _a(x,P,H){var ve=P(x);return Co(x)?ve:Uu(ve,H(x))}function Js(x){return x==null?x===t?Mr:Lt:JA&&JA in Ho(x)?Rp(x):Fn(x)}function Au(x,P){return x>P}function cu(x,P){return x!=null&&zo.call(x,P)}function fA(x,P){return x!=null&&P in Ho(x)}function Bu(x,P,H){return x>=ds(P,H)&&x<jo(P,H)}function Ic(x,P,H){for(var ve=H?Sh:Lu,He=x[0].length,ht=x.length,Ft=ht,Yt=ln(ht),an=1/0,Hn=[];Ft--;){var Zn=x[Ft];Ft&&P&&(Zn=Es(Zn,yu(P))),an=ds(Zn.length,an),Yt[Ft]=!H&&(P||He>=120&&Zn.length>=120)?new oc(Ft&&Zn):t}Zn=x[0];var mr=-1,Xr=Yt[0];e:for(;++mr<He&&Hn.length<an;){var wi=Zn[mr],eo=P?P(wi):wi;if(wi=H||wi!==0?wi:0,!(Xr?vu(Xr,eo):ve(Hn,eo,H))){for(Ft=ht;--Ft;){var ss=Yt[Ft];if(!(ss?vu(ss,eo):ve(x[Ft],eo,H)))continue e}Xr&&Xr.push(eo),Hn.push(wi)}}return Hn}function Hu(x,P,H,ve){return pl(x,function(He,ht,Ft){P(ve,H(He),ht,Ft)}),ve}function $l(x,P,H){P=ea(P,x),x=sr(x,P);var ve=x==null?x:x[ba(FA(P))];return ve==null?t:Zs(ve,x,H)}function Bd(x){return Ml(x)&&Js(x)==ft}function T(x){return Ml(x)&&Js(x)==qe}function l(x){return Ml(x)&&Js(x)==Re}function c(x,P,H,ve,He){return x===P?!0:x==null||P==null||!Ml(x)&&!Ml(P)?x!==x&&P!==P:_(x,P,H,ve,c,He)}function _(x,P,H,ve,He,ht){var Ft=Co(x),Yt=Co(P),an=Ft?Dt:vl(x),Hn=Yt?Dt:vl(P);an=an==ft?gn:an,Hn=Hn==ft?gn:Hn;var Zn=an==gn,mr=Hn==gn,Xr=an==Hn;if(Xr&&Gh(x)){if(!Gh(P))return!1;Ft=!0,Zn=!1}if(Xr&&!Zn)return ht||(ht=new Is),Ft||Wp(x)?DA(x,P,H,ve,He,ht):Fh(x,P,an,H,ve,He,ht);if(!(H&k)){var wi=Zn&&zo.call(x,"__wrapped__"),eo=mr&&zo.call(P,"__wrapped__");if(wi||eo){var ss=wi?x.value():x,to=eo?P.value():P;return ht||(ht=new Is),He(ss,to,H,ve,ht)}}return Xr?(ht||(ht=new Is),Pp(x,P,H,ve,He,ht)):!1}function M(x){return Ml(x)&&vl(x)==zt}function R(x,P,H,ve){var He=H.length,ht=He,Ft=!ve;if(x==null)return!ht;for(x=Ho(x);He--;){var Yt=H[He];if(Ft&&Yt[2]?Yt[1]!==x[Yt[0]]:!(Yt[0]in x))return!1}for(;++He<ht;){Yt=H[He];var an=Yt[0],Hn=x[an],Zn=Yt[1];if(Ft&&Yt[2]){if(Hn===t&&!(an in x))return!1}else{var mr=new Is;if(ve)var Xr=ve(Hn,Zn,an,x,P,mr);if(!(Xr===t?c(Zn,Hn,k|z,ve,mr):Xr))return!1}}return!0}function N(x){if(!wl(x)||be(x))return!1;var P=Ac(x)?_c:Pi;return P.test(xa(x))}function V(x){return Ml(x)&&Js(x)==or}function ne(x){return Ml(x)&&vl(x)==Kn}function ae(x){return Ml(x)&&ig(x.length)&&!!uo[Js(x)]}function Me(x){return typeof x=="function"?x:x==null?ph:typeof x=="object"?Co(x)?ut(x[0],x[1]):mt(x):xI(x)}function ke(x){if(!je(x))return cs(x);var P=[];for(var H in Ho(x))zo.call(x,H)&&H!="constructor"&&P.push(H);return P}function De(x){if(!wl(x))return En(x);var P=je(x),H=[];for(var ve in x)ve=="constructor"&&(P||!zo.call(x,ve))||H.push(ve);return H}function Ve(x,P){return x<P}function Xe(x,P){var H=-1,ve=Rc(x)?ln(x.length):[];return Ro(x,function(He,ht,Ft){ve[++H]=P(He,ht,Ft)}),ve}function mt(x){var P=os(x);return P.length==1&&P[0][2]?St(P[0][0],P[0][1]):function(H){return H===x||R(H,x,P)}}function ut(x,P){return D(x)&&yt(P)?St(ba(x),P):function(H){var ve=Mn(H,x);return ve===t&&ve===P?zn(H,x):c(P,ve,k|z)}}function gt(x,P,H,ve,He){x!==P&&Bc(P,function(ht,Ft){if(He||(He=new Is),wl(ht))bt(x,P,Ft,H,gt,ve,He);else{var Yt=ve?ve(hr(x,Ft),ht,Ft+"",x,P,He):t;Yt===t&&(Yt=ht),OA(x,Ft,Yt)}},qr)}function bt(x,P,H,ve,He,ht,Ft){var Yt=hr(x,H),an=hr(P,H),Hn=Ft.get(an);if(Hn){OA(x,H,Hn);return}var Zn=ht?ht(Yt,an,H+"",x,P,Ft):t,mr=Zn===t;if(mr){var Xr=Co(an),wi=!Xr&&Gh(an),eo=!Xr&&!wi&&Wp(an);Zn=an,Xr||wi||eo?Co(Yt)?Zn=Yt:xl(Yt)?Zn=Pa(Yt):wi?(mr=!1,Zn=ws(an,!0)):eo?(mr=!1,Zn=Th(an,!0)):Zn=[]:tp(an)||Im(an)?(Zn=Yt,Im(Yt)?Zn=G(Yt):(!wl(Yt)||Ac(Yt))&&(Zn=sl(an))):mr=!1}mr&&(Ft.set(an,Zn),He(Zn,an,ve,ht,Ft),Ft.delete(an)),OA(x,H,Zn)}function Ot(x,P){var H=x.length;if(H)return P+=P<0?H:0,I(P,H)?x[P]:t}function Pt(x,P,H){P.length?P=Es(P,function(ht){return Co(ht)?function(Ft){return Eu(Ft,ht.length===1?ht[0]:ht)}:ht}):P=[ph];var ve=-1;P=Es(P,yu(hi()));var He=Xe(x,function(ht,Ft,Yt){var an=Es(P,function(Hn){return Hn(ht)});return{criteria:an,index:++ve,value:ht}});return Bh(He,function(ht,Ft){return Id(ht,Ft,H)})}function Kt(x,P){return jt(x,P,function(H,ve){return zn(x,ve)})}function jt(x,P,H){for(var ve=-1,He=P.length,ht={};++ve<He;){var Ft=P[ve],Yt=Eu(x,Ft);H(Yt,Ft)&&Pr(ht,ea(Ft,x),Yt)}return ht}function Rt(x){return function(P){return Eu(P,x)}}function nn(x,P,H,ve){var He=ve?Eh:Xs,ht=-1,Ft=P.length,Yt=x;for(x===P&&(P=Pa(P)),H&&(Yt=Es(x,yu(H)));++ht<Ft;)for(var an=0,Hn=P[ht],Zn=H?H(Hn):Hn;(an=He(Yt,Zn,an,ve))>-1;)Yt!==x&&XA.call(Yt,an,1),XA.call(x,an,1);return x}function Xt(x,P){for(var H=x?P.length:0,ve=H-1;H--;){var He=P[H];if(H==ve||He!==ht){var ht=He;I(He)?XA.call(x,He,1):Ga(x,He)}}return x}function bn(x,P){return x+ju(Cd()*(P-x+1))}function xn(x,P,H,ve){for(var He=-1,ht=jo(ec((P-x)/(H||1)),0),Ft=ln(ht);ht--;)Ft[ve?ht:++He]=x,x+=H;return Ft}function Cn(x,P){var H="";if(!x||P<1||P>Ze)return H;do P%2&&(H+=x),P=ju(P/2),P&&(x+=x);while(P);return H}function kn(x,P){return Gr(Jn(x,P,ph),x+"")}function Gn(x){return Yu(Fo(x))}function Bn(x,P){var H=Fo(x);return qa(H,Mu(P,0,H.length))}function Pr(x,P,H,ve){if(!wl(x))return x;P=ea(P,x);for(var He=-1,ht=P.length,Ft=ht-1,Yt=x;Yt!=null&&++He<ht;){var an=ba(P[He]),Hn=H;if(an==="__proto__"||an==="constructor"||an==="prototype")return x;if(He!=Ft){var Zn=Yt[an];Hn=ve?ve(Zn,an,Yt):t,Hn===t&&(Hn=wl(Zn)?Zn:I(P[He+1])?[]:{})}Ec(Yt,an,Hn),Yt=Yt[an]}return x}var Oi=_d?function(x,P){return _d.set(x,P),x}:ph,Vi=$c?function(x,P){return $c(x,"toString",{configurable:!0,enumerable:!1,value:Wd(P),writable:!0})}:ph;function Io(x){return qa(Fo(x))}function Ei(x,P,H){var ve=-1,He=x.length;P<0&&(P=-P>He?0:He+P),H=H>He?He:H,H<0&&(H+=He),He=P>H?0:H-P>>>0,P>>>=0;for(var ht=ln(He);++ve<He;)ht[ve]=x[ve+P];return ht}function No(x,P){var H;return Ro(x,function(ve,He,ht){return H=P(ve,He,ht),!H}),!!H}function Wo(x,P,H){var ve=0,He=x==null?ve:x.length;if(typeof P=="number"&&P===P&&He<=vt){for(;ve<He;){var ht=ve+He>>>1,Ft=x[ht];Ft!==null&&!LA(Ft)&&(H?Ft<=P:Ft<P)?ve=ht+1:He=ht}return He}return wo(x,P,ph,H)}function wo(x,P,H,ve){var He=0,ht=x==null?0:x.length;if(ht===0)return 0;P=H(P);for(var Ft=P!==P,Yt=P===null,an=LA(P),Hn=P===t;He<ht;){var Zn=ju((He+ht)/2),mr=H(x[Zn]),Xr=mr!==t,wi=mr===null,eo=mr===mr,ss=LA(mr);if(Ft)var to=ve||eo;else Hn?to=eo&&(ve||Xr):Yt?to=eo&&Xr&&(ve||!wi):an?to=eo&&Xr&&!wi&&(ve||!ss):wi||ss?to=!1:to=ve?mr<=P:mr<P;to?He=Zn+1:ht=Zn}return ds(ht,it)}function vo(x,P){for(var H=-1,ve=x.length,He=0,ht=[];++H<ve;){var Ft=x[H],Yt=P?P(Ft):Ft;if(!H||!dh(Yt,an)){var an=Yt;ht[He++]=Ft===0?0:Ft}}return ht}function Ta(x){return typeof x=="number"?x:LA(x)?Ce:+x}function Go(x){if(typeof x=="string")return x;if(Co(x))return Es(x,Go)+"";if(LA(x))return Xc?Xc.call(x):"";var P=x+"";return P=="0"&&1/x==-1/0?"-0":P}function hs(x,P,H){var ve=-1,He=Lu,ht=x.length,Ft=!0,Yt=[],an=Yt;if(H)Ft=!1,He=Sh;else if(ht>=i){var Hn=P?null:ym(x);if(Hn)return kl(Hn);Ft=!1,He=vu,an=new oc}else an=P?[]:Yt;e:for(;++ve<ht;){var Zn=x[ve],mr=P?P(Zn):Zn;if(Zn=H||Zn!==0?Zn:0,Ft&&mr===mr){for(var Xr=an.length;Xr--;)if(an[Xr]===mr)continue e;P&&an.push(mr),Yt.push(Zn)}else He(an,mr,H)||(an!==Yt&&an.push(mr),Yt.push(Zn))}return Yt}function Ga(x,P){return P=ea(P,x),x=sr(x,P),x==null||delete x[ba(FA(P))]}function Zu(x,P,H,ve){return Pr(x,P,H(Eu(x,P)),ve)}function ml(x,P,H,ve){for(var He=x.length,ht=ve?He:-1;(ve?ht--:++ht<He)&&P(x[ht],ht,x););return H?Ei(x,ve?0:ht,ve?ht+1:He):Ei(x,ve?ht+1:0,ve?He:ht)}function gl(x,P){var H=x;return H instanceof Vr&&(H=H.value()),hd(P,function(ve,He){return He.func.apply(He.thisArg,Uu([ve],He.args))},H)}function du(x,P,H){var ve=x.length;if(ve<2)return ve?hs(x[0]):[];for(var He=-1,ht=ln(ve);++He<ve;)for(var Ft=x[He],Yt=-1;++Yt<ve;)Yt!=He&&(ht[He]=Su(ht[He]||Ft,x[Yt],P,H));return hs(Ys(ht,1),P,H)}function TA(x,P,H){for(var ve=-1,He=x.length,ht=P.length,Ft={};++ve<He;){var Yt=ve<ht?P[ve]:t;H(Ft,x[ve],Yt)}return Ft}function PA(x){return xl(x)?x:[]}function Xu(x){return typeof x=="function"?x:ph}function ea(x,P){return Co(x)?x:D(x,P)?[x]:la(re(x))}var yl=kn;function aa(x,P,H){var ve=x.length;return H=H===t?ve:H,!P&&H>=ve?x:Ei(x,P,H)}var Dl=nh||function(x){return Cr.clearTimeout(x)};function ws(x,P){if(P)return x.slice();var H=x.length,ve=th?th(H):new x.constructor(H);return x.copy(ve),ve}function $s(x){var P=new x.constructor(x.byteLength);return new Yc(P).set(new Yc(x)),P}function il(x,P){var H=P?$s(x.buffer):x.buffer;return new x.constructor(H,x.byteOffset,x.byteLength)}function ol(x){var P=new x.constructor(x.source,vi.exec(x));return P.lastIndex=x.lastIndex,P}function Od(x){return xu?Ho(xu.call(x)):{}}function Th(x,P){var H=P?$s(x.buffer):x.buffer;return new x.constructor(H,x.byteOffset,x.length)}function Ph(x,P){if(x!==P){var H=x!==t,ve=x===null,He=x===x,ht=LA(x),Ft=P!==t,Yt=P===null,an=P===P,Hn=LA(P);if(!Yt&&!Hn&&!ht&&x>P||ht&&Ft&&an&&!Yt&&!Hn||ve&&Ft&&an||!H&&an||!He)return 1;if(!ve&&!ht&&!Hn&&x<P||Hn&&H&&He&&!ve&&!ht||Yt&&H&&He||!Ft&&He||!an)return-1}return 0}function Id(x,P,H){for(var ve=-1,He=x.criteria,ht=P.criteria,Ft=He.length,Yt=H.length;++ve<Ft;){var an=Ph(He[ve],ht[ve]);if(an){if(ve>=Yt)return an;var Hn=H[ve];return an*(Hn=="desc"?-1:1)}}return x.index-P.index}function ac(x,P,H,ve){for(var He=-1,ht=x.length,Ft=H.length,Yt=-1,an=P.length,Hn=jo(ht-Ft,0),Zn=ln(an+Hn),mr=!ve;++Yt<an;)Zn[Yt]=P[Yt];for(;++He<Ft;)(mr||He<ht)&&(Zn[H[He]]=x[He]);for(;Hn--;)Zn[Yt++]=x[He++];return Zn}function Rh(x,P,H,ve){for(var He=-1,ht=x.length,Ft=-1,Yt=H.length,an=-1,Hn=P.length,Zn=jo(ht-Yt,0),mr=ln(Zn+Hn),Xr=!ve;++He<Zn;)mr[He]=x[He];for(var wi=He;++an<Hn;)mr[wi+an]=P[an];for(;++Ft<Yt;)(Xr||He<ht)&&(mr[wi+H[Ft]]=x[He++]);return mr}function Pa(x,P){var H=-1,ve=x.length;for(P||(P=ln(ve));++H<ve;)P[H]=x[H];return P}function hu(x,P,H,ve){var He=!H;H||(H={});for(var ht=-1,Ft=P.length;++ht<Ft;){var Yt=P[ht],an=ve?ve(H[Yt],x[Yt],Yt,H,x):t;an===t&&(an=x[Yt]),He?$u(H,Yt,an):Ec(H,Yt,an)}return H}function kd(x,P){return hu(x,Ou(x),P)}function Bp(x,P){return hu(x,t0(x),P)}function kc(x,P){return function(H,ve){var He=Co(H)?mc:ha,ht=P?P():{};return He(H,x,hi(ve,2),ht)}}function RA(x){return kn(function(P,H){var ve=-1,He=H.length,ht=He>1?H[He-1]:t,Ft=He>2?H[2]:t;for(ht=x.length>3&&typeof ht=="function"?(He--,ht):t,Ft&&O(H[0],H[1],Ft)&&(ht=He<3?t:ht,He=1),P=Ho(P);++ve<He;){var Yt=H[ve];Yt&&x(P,Yt,ve,ht)}return P})}function Qa(x,P){return function(H,ve){if(H==null)return H;if(!Rc(H))return x(H,ve);for(var He=H.length,ht=P?He:-1,Ft=Ho(H);(P?ht--:++ht<He)&&ve(Ft[ht],ht,Ft)!==!1;);return H}}function Op(x){return function(P,H,ve){for(var He=-1,ht=Ho(P),Ft=ve(P),Yt=Ft.length;Yt--;){var an=Ft[x?Yt:++He];if(H(ht[an],an,ht)===!1)break}return P}}function Dh(x,P,H){var ve=P&j,He=Tc(x);function ht(){var Ft=this&&this!==Cr&&this instanceof ht?He:x;return Ft.apply(ve?H:this,arguments)}return ht}function Ip(x){return function(P){P=re(P);var H=Gc(P)?zu(P):t,ve=H?H[0]:P.charAt(0),He=H?aa(H,1).join(""):P.slice(1);return ve[x]()+He}}function uh(x){return function(P){return hd(j_(sg(P).replace(Ol,"")),x,"")}}function Tc(x){return function(){var P=arguments;switch(P.length){case 0:return new x;case 1:return new x(P[0]);case 2:return new x(P[0],P[1]);case 3:return new x(P[0],P[1],P[2]);case 4:return new x(P[0],P[1],P[2],P[3]);case 5:return new x(P[0],P[1],P[2],P[3],P[4]);case 6:return new x(P[0],P[1],P[2],P[3],P[4],P[5]);case 7:return new x(P[0],P[1],P[2],P[3],P[4],P[5],P[6])}var H=Na(x.prototype),ve=x.apply(H,P);return wl(ve)?ve:H}}function gm(x,P,H){var ve=Tc(x);function He(){for(var ht=arguments.length,Ft=ln(ht),Yt=ht,an=ed(He);Yt--;)Ft[Yt]=arguments[Yt];var Hn=ht<3&&Ft[0]!==an&&Ft[ht-1]!==an?[]:rl(Ft,an);if(ht-=Hn.length,ht<H)return Vl(x,P,Td,He.placeholder,t,Ft,Hn,t,t,H-ht);var Zn=this&&this!==Cr&&this instanceof He?ve:x;return Zs(Zn,this,Ft)}return He}function lc(x){return function(P,H,ve){var He=Ho(P);if(!Rc(P)){var ht=hi(H,3);P=Wr(P),H=function(Yt){return ht(He[Yt],Yt,He)}}var Ft=x(P,H,ve);return Ft>-1?He[ht?P[Ft]:Ft]:t}}function Kh(x){return Pc(function(P){var H=P.length,ve=H,He=Ki.prototype.thru;for(x&&P.reverse();ve--;){var ht=P[ve];if(typeof ht!="function")throw new Tl(a);if(He&&!Ft&&Dd(ht)=="wrapper")var Ft=new Ki([],!0)}for(ve=Ft?ve:H;++ve<H;){ht=P[ve];var Yt=Dd(ht),an=Yt=="wrapper"?ch(ht):t;an&&Ae(an[0])&&an[1]==(W|ie|$|oe)&&!an[4].length&&an[9]==1?Ft=Ft[Dd(an[0])].apply(Ft,an[3]):Ft=ht.length==1&&Ae(ht)?Ft[Yt]():Ft.thru(ht)}return function(){var Hn=arguments,Zn=Hn[0];if(Ft&&Hn.length==1&&Co(Zn))return Ft.plant(Zn).value();for(var mr=0,Xr=H?P[mr].apply(this,Hn):Zn;++mr<H;)Xr=P[mr].call(this,Xr);return Xr}})}function Td(x,P,H,ve,He,ht,Ft,Yt,an,Hn){var Zn=P&W,mr=P&j,Xr=P&Y,wi=P&(ie|J),eo=P&fe,ss=Xr?t:Tc(x);function to(){for(var Ms=arguments.length,Us=ln(Ms),qh=Ms;qh--;)Us[qh]=arguments[qh];if(wi)var Gd=ed(to),Yh=Zd(Us,Gd);if(ve&&(Us=ac(Us,ve,He,wi)),ht&&(Us=Rh(Us,ht,Ft,wi)),Ms-=Yh,wi&&Ms<Hn){var rA=rl(Us,Gd);return Vl(x,P,Td,to.placeholder,H,Us,rA,Yt,an,Hn-Ms)}var ip=mr?H:this,Dm=Xr?ip[x]:x;return Ms=Us.length,Yt?Us=xr(Us,Yt):eo&&Ms>1&&Us.reverse(),Zn&&an<Ms&&(Us.length=an),this&&this!==Cr&&this instanceof to&&(Dm=ss||Tc(Dm)),Dm.apply(ip,Us)}return to}function kp(x,P){return function(H,ve){return Hu(H,x,P(ve),{})}}function Ah(x,P){return function(H,ve){var He;if(H===t&&ve===t)return P;if(H!==t&&(He=H),ve!==t){if(He===t)return ve;typeof H=="string"||typeof ve=="string"?(H=Go(H),ve=Go(ve)):(H=Ta(H),ve=Ta(ve)),He=x(H,ve)}return He}}function Qf(x){return Pc(function(P){return P=Es(P,yu(hi())),kn(function(H){var ve=this;return x(P,function(He){return Zs(He,ve,H)})})})}function qf(x,P){P=P===t?" ":Go(P);var H=P.length;if(H<2)return H?Cn(P,x):P;var ve=Cn(P,ec(x/Qc(P)));return Gc(P)?aa(zu(ve),0,x).join(""):ve.slice(0,x)}function Tp(x,P,H,ve){var He=P&j,ht=Tc(x);function Ft(){for(var Yt=-1,an=arguments.length,Hn=-1,Zn=ve.length,mr=ln(Zn+an),Xr=this&&this!==Cr&&this instanceof Ft?ht:x;++Hn<Zn;)mr[Hn]=ve[Hn];for(;an--;)mr[Hn++]=arguments[++Yt];return Zs(Xr,He?H:this,mr)}return Ft}function Pd(x){return function(P,H,ve){return ve&&typeof ve!="number"&&O(P,H,ve)&&(H=ve=t),P=v(P),H===t?(H=P,P=0):H=v(H),ve=ve===t?P<H?1:-1:v(ve),xn(P,H,ve,x)}}function df(x){return function(P,H){return typeof P=="string"&&typeof H=="string"||(P=U(P),H=U(H)),x(P,H)}}function Vl(x,P,H,ve,He,ht,Ft,Yt,an,Hn){var Zn=P&ie,mr=Zn?Ft:t,Xr=Zn?t:Ft,wi=Zn?ht:t,eo=Zn?t:ht;P|=Zn?$:te,P&=~(Zn?te:$),P&q||(P&=-4);var ss=[x,P,He,wi,mr,eo,Xr,Yt,an,Hn],to=H.apply(t,ss);return Ae(x)&&Ur(to,ss),to.placeholder=ve,Ji(to,x,P)}function Kl(x){var P=sa[x];return function(H,ve){if(H=U(H),ve=ve==null?0:ds(w(ve),292),ve&&Zc(H)){var He=(re(H)+"e").split("e"),ht=P(He[0]+"e"+(+He[1]+ve));return He=(re(ht)+"e").split("e"),+(He[0]+"e"+(+He[1]-ve))}return P(H)}}var ym=fl&&1/kl(new fl([,-0]))[1]==Qe?function(x){return new fl(x)}:W3;function Yf(x){return function(P){var H=vl(P);return H==zt?gd(P):H==Kn?Vo(P):pm(P,x(P))}}function ko(x,P,H,ve,He,ht,Ft,Yt){var an=P&Y;if(!an&&typeof x!="function")throw new Tl(a);var Hn=ve?ve.length:0;if(Hn||(P&=-97,ve=He=t),Ft=Ft===t?Ft:jo(w(Ft),0),Yt=Yt===t?Yt:w(Yt),Hn-=He?He.length:0,P&te){var Zn=ve,mr=He;ve=He=t}var Xr=an?t:ch(x),wi=[x,P,H,ve,He,Zn,mr,ht,Ft,Yt];if(Xr&&qt(wi,Xr),x=wi[0],P=wi[1],H=wi[2],ve=wi[3],He=wi[4],Yt=wi[9]=wi[9]===t?an?0:x.length:jo(wi[9]-Hn,0),!Yt&&P&(ie|J)&&(P&=-25),!P||P==j)var eo=Dh(x,P,H);else P==ie||P==J?eo=gm(x,P,Yt):(P==$||P==(j|$))&&!He.length?eo=Tp(x,P,H,ve):eo=Td.apply(t,wi);var ss=Xr?Oi:Ur;return Ji(ss(eo,wi),x,P)}function Ju(x,P,H,ve){return x===t||dh(x,Pl[H])&&!zo.call(ve,H)?P:x}function hf(x,P,H,ve,He,ht){return wl(x)&&wl(P)&&(ht.set(P,x),gt(x,P,t,hf,ht),ht.delete(P)),x}function Rd(x){return tp(x)?t:x}function DA(x,P,H,ve,He,ht){var Ft=H&k,Yt=x.length,an=P.length;if(Yt!=an&&!(Ft&&an>Yt))return!1;var Hn=ht.get(x),Zn=ht.get(P);if(Hn&&Zn)return Hn==P&&Zn==x;var mr=-1,Xr=!0,wi=H&z?new oc:t;for(ht.set(x,P),ht.set(P,x);++mr<Yt;){var eo=x[mr],ss=P[mr];if(ve)var to=Ft?ve(ss,eo,mr,P,x,ht):ve(eo,ss,mr,x,P,ht);if(to!==t){if(to)continue;Xr=!1;break}if(wi){if(!uA(P,function(Ms,Us){if(!vu(wi,Us)&&(eo===Ms||He(eo,Ms,H,ve,ht)))return wi.push(Us)})){Xr=!1;break}}else if(!(eo===ss||He(eo,ss,H,ve,ht))){Xr=!1;break}}return ht.delete(x),ht.delete(P),Xr}function Fh(x,P,H,ve,He,ht,Ft){switch(H){case ce:if(x.byteLength!=P.byteLength||x.byteOffset!=P.byteOffset)return!1;x=x.buffer,P=P.buffer;case qe:return!(x.byteLength!=P.byteLength||!ht(new Yc(x),new Yc(P)));case Ue:case Re:case tn:return dh(+x,+P);case nt:return x.name==P.name&&x.message==P.message;case or:case pn:return x==P+"";case zt:var Yt=gd;case Kn:var an=ve&k;if(Yt||(Yt=kl),x.size!=P.size&&!an)return!1;var Hn=Ft.get(x);if(Hn)return Hn==P;ve|=z,Ft.set(x,P);var Zn=DA(Yt(x),Yt(P),ve,He,ht,Ft);return Ft.delete(x),Zn;case Xn:if(xu)return xu.call(x)==xu.call(P)}return!1}function Pp(x,P,H,ve,He,ht){var Ft=H&k,Yt=ff(x),an=Yt.length,Hn=ff(P),Zn=Hn.length;if(an!=Zn&&!Ft)return!1;for(var mr=an;mr--;){var Xr=Yt[mr];if(!(Ft?Xr in P:zo.call(P,Xr)))return!1}var wi=ht.get(x),eo=ht.get(P);if(wi&&eo)return wi==P&&eo==x;var ss=!0;ht.set(x,P),ht.set(P,x);for(var to=Ft;++mr<an;){Xr=Yt[mr];var Ms=x[Xr],Us=P[Xr];if(ve)var qh=Ft?ve(Us,Ms,Xr,P,x,ht):ve(Ms,Us,Xr,x,P,ht);if(!(qh===t?Ms===Us||He(Ms,Us,H,ve,ht):qh)){ss=!1;break}to||(to=Xr=="constructor")}if(ss&&!to){var Gd=x.constructor,Yh=P.constructor;Gd!=Yh&&"constructor"in x&&"constructor"in P&&!(typeof Gd=="function"&&Gd instanceof Gd&&typeof Yh=="function"&&Yh instanceof Yh)&&(ss=!1)}return ht.delete(x),ht.delete(P),ss}function Pc(x){return Gr(Jn(x,t,nd),x+"")}function ff(x){return _a(x,Wr,Ou)}function pf(x){return _a(x,qr,t0)}var ch=_d?function(x){return _d.get(x)}:W3;function Dd(x){for(var P=x.name+"",H=Gu[P],ve=zo.call(Gu,P)?H.length:0;ve--;){var He=H[ve],ht=He.func;if(ht==null||ht==x)return He.name}return P}function ed(x){var P=zo.call(ot,"placeholder")?ot:x;return P.placeholder}function hi(){var x=ot.iteratee||j3;return x=x===j3?Me:x,arguments.length?x(arguments[0],arguments[1]):x}function td(x,P){var H=x.__data__;return Z(P)?H[typeof P=="string"?"string":"hash"]:H.map}function os(x){for(var P=Wr(x),H=P.length;H--;){var ve=P[H],He=x[ve];P[H]=[ve,He,yt(He)]}return P}function Kd(x,P){var H=YA(x,P);return N(H)?H:t}function Rp(x){var P=zo.call(x,JA),H=x[JA];try{x[JA]=t;var ve=!0}catch{}var He=wA.call(x);return ve&&(P?x[JA]=H:delete x[JA]),He}var Ou=Hc?function(x){return x==null?[]:(x=Ho(x),Fu(Hc(x),function(P){return bc.call(x,P)}))}:G3,t0=Hc?function(x){for(var P=[];x;)Uu(P,Ou(x)),x=ja(x);return P}:G3,vl=Js;(tc&&vl(new tc(new ArrayBuffer(1)))!=ce||Ql&&vl(new Ql)!=zt||SA&&vl(SA.resolve())!=Nn||fl&&vl(new fl)!=Kn||nc&&vl(new nc)!=Yn)&&(vl=function(x){var P=Js(x),H=P==gn?x.constructor:t,ve=H?xa(H):"";if(ve)switch(ve){case ih:return ce;case rc:return zt;case Qu:return Nn;case qu:return Kn;case EA:return Yn}return P});function vm(x,P,H){for(var ve=-1,He=H.length;++ve<He;){var ht=H[ve],Ft=ht.size;switch(ht.type){case"drop":x+=Ft;break;case"dropRight":P-=Ft;break;case"take":P=ds(P,x+Ft);break;case"takeRight":x=jo(x,P-Ft);break}}return{start:x,end:P}}function fa(x){var P=x.match(Br);return P?P[1].split(Kr):[]}function Cm(x,P,H){P=ea(P,x);for(var ve=-1,He=P.length,ht=!1;++ve<He;){var Ft=ba(P[ve]);if(!(ht=x!=null&&H(x,Ft)))break;x=x[Ft]}return ht||++ve!=He?ht:(He=x==null?0:x.length,!!He&&ig(He)&&I(Ft,He)&&(Co(x)||Im(x)))}function mf(x){var P=x.length,H=new x.constructor(P);return P&&typeof x[0]=="string"&&zo.call(x,"index")&&(H.index=x.index,H.input=x.input),H}function sl(x){return typeof x.constructor=="function"&&!je(x)?Na(ja(x)):{}}function Dp(x,P,H){var ve=x.constructor;switch(P){case qe:return $s(x);case Ue:case Re:return new ve(+x);case ce:return il(x,H);case me:case tt:case Et:case $t:case on:case rr:case Oe:case se:case _e:return Th(x,H);case zt:return new ve;case tn:case pn:return new ve(x);case or:return ol(x);case Kn:return new ve;case Xn:return Od(x)}}function A(x,P){var H=P.length;if(!H)return x;var ve=H-1;return P[ve]=(H>1?"& ":"")+P[ve],P=P.join(H>2?", ":" "),x.replace(Ir,`{
/* [wrapped with `+P+`] */
`)}function y(x){return Co(x)||Im(x)||!!(cf&&x&&x[cf])}function I(x,P){var H=typeof x;return P=P??Ze,!!P&&(H=="number"||H!="symbol"&&Ba.test(x))&&x>-1&&x%1==0&&x<P}function O(x,P,H){if(!wl(H))return!1;var ve=typeof P;return(ve=="number"?Rc(H)&&I(P,H.length):ve=="string"&&P in H)?dh(H[P],x):!1}function D(x,P){if(Co(x))return!1;var H=typeof x;return H=="number"||H=="symbol"||H=="boolean"||x==null||LA(x)?!0:On.test(x)||!Dn.test(x)||P!=null&&x in Ho(P)}function Z(x){var P=typeof x;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?x!=="__proto__":x===null}function Ae(x){var P=Dd(x),H=ot[P];if(typeof H!="function"||!(P in Vr.prototype))return!1;if(x===H)return!0;var ve=ch(H);return!!ve&&x===ve[0]}function be(x){return!!ZA&&ZA in x}var Te=Gi?Ac:Q3;function je(x){var P=x&&x.constructor,H=typeof P=="function"&&P.prototype||Pl;return x===H}function yt(x){return x===x&&!wl(x)}function St(x,P){return function(H){return H==null?!1:H[x]===P&&(P!==t||x in Ho(H))}}function Jt(x){var P=_r(x,function(ve){return H.size===g&&H.clear(),ve}),H=P.cache;return P}function qt(x,P){var H=x[1],ve=P[1],He=H|ve,ht=He<(j|Y|W),Ft=ve==W&&H==ie||ve==W&&H==oe&&x[7].length<=P[8]||ve==(W|oe)&&P[7].length<=P[8]&&H==ie;if(!(ht||Ft))return x;ve&j&&(x[2]=P[2],He|=H&j?0:q);var Yt=P[3];if(Yt){var an=x[3];x[3]=an?ac(an,Yt,P[4]):Yt,x[4]=an?rl(x[3],b):P[4]}return Yt=P[5],Yt&&(an=x[5],x[5]=an?Rh(an,Yt,P[6]):Yt,x[6]=an?rl(x[5],b):P[6]),Yt=P[7],Yt&&(x[7]=Yt),ve&W&&(x[8]=x[8]==null?P[8]:ds(x[8],P[8])),x[9]==null&&(x[9]=P[9]),x[0]=P[0],x[1]=He,x}function En(x){var P=[];if(x!=null)for(var H in Ho(x))P.push(H);return P}function Fn(x){return wA.call(x)}function Jn(x,P,H){return P=jo(P===t?x.length-1:P,0),function(){for(var ve=arguments,He=-1,ht=jo(ve.length-P,0),Ft=ln(ht);++He<ht;)Ft[He]=ve[P+He];He=-1;for(var Yt=ln(P+1);++He<P;)Yt[He]=ve[He];return Yt[P]=H(Ft),Zs(x,this,Yt)}}function sr(x,P){return P.length<2?x:Eu(x,Ei(P,0,-1))}function xr(x,P){for(var H=x.length,ve=ds(P.length,H),He=Pa(x);ve--;){var ht=P[ve];x[ve]=I(ht,H)?He[ht]:t}return x}function hr(x,P){if(!(P==="constructor"&&typeof x[P]=="function")&&P!="__proto__")return x[P]}var Ur=To(Oi),li=Vc||function(x,P){return Cr.setTimeout(x,P)},Gr=To(Vi);function Ji(x,P,H){var ve=P+"";return Gr(x,A(ve,Ra(fa(ve),H)))}function To(x){var P=0,H=0;return function(){var ve=Nf(),He=we-(ve-H);if(H=ve,He>0){if(++P>=pe)return arguments[0]}else P=0;return x.apply(t,arguments)}}function qa(x,P){var H=-1,ve=x.length,He=ve-1;for(P=P===t?ve:P;++H<P;){var ht=bn(H,He),Ft=x[ht];x[ht]=x[H],x[H]=Ft}return x.length=P,x}var la=Jt(function(x){var P=[];return x.charCodeAt(0)===46&&P.push(""),x.replace(pr,function(H,ve,He,ht){P.push(He?ht.replace(Ea,"$1"):ve||H)}),P});function ba(x){if(typeof x=="string"||LA(x))return x;var P=x+"";return P=="0"&&1/x==-1/0?"-0":P}function xa(x){if(x!=null){try{return HA.call(x)}catch{}try{return x+""}catch{}}return""}function Ra(x,P){return Oa(_t,function(H){var ve="_."+H[0];P&H[1]&&!Lu(x,ve)&&x.push(ve)}),x.sort()}function Hl(x){if(x instanceof Vr)return x.clone();var P=new Ki(x.__wrapped__,x.__chain__);return P.__actions__=Pa(x.__actions__),P.__index__=x.__index__,P.__values__=x.__values__,P}function Ya(x,P,H){(H?O(x,P,H):P===t)?P=1:P=jo(w(P),0);var ve=x==null?0:x.length;if(!ve||P<1)return[];for(var He=0,ht=0,Ft=ln(ec(ve/P));He<ve;)Ft[ht++]=Ei(x,He,He+=P);return Ft}function wa(x){for(var P=-1,H=x==null?0:x.length,ve=0,He=[];++P<H;){var ht=x[P];ht&&(He[ve++]=ht)}return He}function fs(){var x=arguments.length;if(!x)return[];for(var P=ln(x-1),H=arguments[0],ve=x;ve--;)P[ve-1]=arguments[ve];return Uu(Co(H)?Pa(H):[H],Ys(P,1))}var yi=kn(function(x,P){return xl(x)?Su(x,Ys(P,1,xl,!0)):[]}),Jo=kn(function(x,P){var H=FA(P);return xl(H)&&(H=t),xl(x)?Su(x,Ys(P,1,xl,!0),hi(H,2)):[]}),ua=kn(function(x,P){var H=FA(P);return xl(H)&&(H=t),xl(x)?Su(x,Ys(P,1,xl,!0),t,H):[]});function pa(x,P,H){var ve=x==null?0:x.length;return ve?(P=H||P===t?1:w(P),Ei(x,P<0?0:P,ve)):[]}function Ts(x,P,H){var ve=x==null?0:x.length;return ve?(P=H||P===t?1:w(P),P=ve-P,Ei(x,0,P<0?0:P)):[]}function Fl(x,P){return x&&x.length?ml(x,hi(P,3),!0,!0):[]}function Do(x,P){return x&&x.length?ml(x,hi(P,3),!0):[]}function Fd(x,P,H,ve){var He=x==null?0:x.length;return He?(H&&typeof H!="number"&&O(x,P,H)&&(H=0,ve=He),lh(x,P,H,ve)):[]}function Cl(x,P,H){var ve=x==null?0:x.length;if(!ve)return-1;var He=H==null?0:w(H);return He<0&&(He=jo(ve+He,0)),gc(x,hi(P,3),He)}function KA(x,P,H){var ve=x==null?0:x.length;if(!ve)return-1;var He=ve-1;return H!==t&&(He=w(H),He=H<0?jo(ve+He,0):ds(He,ve-1)),gc(x,hi(P,3),He,!0)}function nd(x){var P=x==null?0:x.length;return P?Ys(x,1):[]}function _l(x){var P=x==null?0:x.length;return P?Ys(x,Qe):[]}function bl(x,P){var H=x==null?0:x.length;return H?(P=P===t?1:w(P),Ys(x,P)):[]}function gf(x){for(var P=-1,H=x==null?0:x.length,ve={};++P<H;){var He=x[P];ve[He[0]]=He[1]}return ve}function $f(x){return x&&x.length?x[0]:t}function Lh(x,P,H){var ve=x==null?0:x.length;if(!ve)return-1;var He=H==null?0:w(H);return He<0&&(He=jo(ve+He,0)),Xs(x,P,He)}function yf(x){var P=x==null?0:x.length;return P?Ei(x,0,-1):[]}var n0=kn(function(x){var P=Es(x,PA);return P.length&&P[0]===x[0]?Ic(P):[]}),vf=kn(function(x){var P=FA(x),H=Es(x,PA);return P===FA(H)?P=t:H.pop(),H.length&&H[0]===x[0]?Ic(H,hi(P,2)):[]}),r0=kn(function(x){var P=FA(x),H=Es(x,PA);return P=typeof P=="function"?P:t,P&&H.pop(),H.length&&H[0]===x[0]?Ic(H,t,P):[]});function Cf(x,P){return x==null?"":xc.call(x,P)}function FA(x){var P=x==null?0:x.length;return P?x[P-1]:t}function _m(x,P,H){var ve=x==null?0:x.length;if(!ve)return-1;var He=ve;return H!==t&&(He=w(H),He=He<0?jo(ve+He,0):ds(He,ve-1)),P===P?mm(x,P,He):gc(x,sf,He,!0)}function Y0(x,P){return x&&x.length?Ot(x,w(P)):t}var bm=kn(Vf);function Vf(x,P){return x&&x.length&&P&&P.length?nn(x,P):x}function pA(x,P,H){return x&&x.length&&P&&P.length?nn(x,P,hi(H,2)):x}function Uh(x,P,H){return x&&x.length&&P&&P.length?nn(x,P,t,H):x}var rd=Pc(function(x,P){var H=x==null?0:x.length,ve=sc(x,P);return Xt(x,Es(P,function(He){return I(He,H)?+He:He}).sort(Ph)),ve});function uc(x,P){var H=[];if(!(x&&x.length))return H;var ve=-1,He=[],ht=x.length;for(P=hi(P,3);++ve<ht;){var Ft=x[ve];P(Ft,ve,x)&&(H.push(Ft),He.push(ve))}return Xt(x,He),H}function Hf(x){return x==null?x:Nu.call(x)}function $0(x,P,H){var ve=x==null?0:x.length;return ve?(H&&typeof H!="number"&&O(x,P,H)?(P=0,H=ve):(P=P==null?0:w(P),H=H===t?ve:w(H)),Ei(x,P,H)):[]}function i0(x,P){return Wo(x,P)}function nv(x,P,H){return wo(x,P,hi(H,2))}function _f(x,P){var H=x==null?0:x.length;if(H){var ve=Wo(x,P);if(ve<H&&dh(x[ve],P))return ve}return-1}function e1(x,P){return Wo(x,P,!0)}function o0(x,P,H){return wo(x,P,hi(H,2),!0)}function Zf(x,P){var H=x==null?0:x.length;if(H){var ve=Wo(x,P,!0)-1;if(dh(x[ve],P))return ve}return-1}function V0(x){return x&&x.length?vo(x):[]}function Ld(x,P){return x&&x.length?vo(x,hi(P,2)):[]}function H0(x){var P=x==null?0:x.length;return P?Ei(x,1,P):[]}function s0(x,P,H){return x&&x.length?(P=H||P===t?1:w(P),Ei(x,0,P<0?0:P)):[]}function a0(x,P,H){var ve=x==null?0:x.length;return ve?(P=H||P===t?1:w(P),P=ve-P,Ei(x,P<0?0:P,ve)):[]}function $a(x,P){return x&&x.length?ml(x,hi(P,3),!1,!0):[]}function Z0(x,P){return x&&x.length?ml(x,hi(P,3)):[]}var rv=kn(function(x){return hs(Ys(x,1,xl,!0))}),X0=kn(function(x){var P=FA(x);return xl(P)&&(P=t),hs(Ys(x,1,xl,!0),hi(P,2))}),l0=kn(function(x){var P=FA(x);return P=typeof P=="function"?P:t,hs(Ys(x,1,xl,!0),t,P)});function zh(x){return x&&x.length?hs(x):[]}function iv(x,P){return x&&x.length?hs(x,hi(P,2)):[]}function Kp(x,P){return P=typeof P=="function"?P:t,x&&x.length?hs(x,t,P):[]}function u0(x){if(!(x&&x.length))return[];var P=0;return x=Fu(x,function(H){if(xl(H))return P=jo(H.length,P),!0}),md(P,function(H){return Es(x,af(H))})}function al(x,P){if(!(x&&x.length))return[];var H=u0(x);return P==null?H:Es(H,function(ve){return Zs(P,t,ve)})}var t1=kn(function(x,P){return xl(x)?Su(x,P):[]}),mA=kn(function(x){return du(Fu(x,xl))}),J0=kn(function(x){var P=FA(x);return xl(P)&&(P=t),du(Fu(x,xl),hi(P,2))}),n1=kn(function(x){var P=FA(x);return P=typeof P=="function"?P:t,du(Fu(x,xl),t,P)}),jh=kn(u0);function Fp(x,P){return TA(x||[],P||[],Ec)}function xm(x,P){return TA(x||[],P||[],Pr)}var eA=kn(function(x){var P=x.length,H=P>1?x[P-1]:t;return H=typeof H=="function"?(x.pop(),H):t,al(x,H)});function Xf(x){var P=ot(x);return P.__chain__=!0,P}function A0(x,P){return P(x),x}function Ud(x,P){return P(x)}var c0=Pc(function(x){var P=x.length,H=P?x[0]:0,ve=this.__wrapped__,He=function(ht){return sc(ht,x)};return P>1||this.__actions__.length||!(ve instanceof Vr)||!I(H)?this.thru(He):(ve=ve.slice(H,+H+(P?1:0)),ve.__actions__.push({func:Ud,args:[He],thisArg:t}),new Ki(ve,this.__chain__).thru(function(ht){return P&&!ht.length&&ht.push(t),ht}))});function bf(){return Xf(this)}function wm(){return new Ki(this.value(),this.__chain__)}function eg(){this.__values__===t&&(this.__values__=h(this.value()));var x=this.__index__>=this.__values__.length,P=x?t:this.__values__[this.__index__++];return{done:x,value:P}}function d0(){return this}function r1(x){for(var P,H=this;H instanceof Oo;){var ve=Hl(H);ve.__index__=0,ve.__values__=t,P?He.__wrapped__=ve:P=ve;var He=ve;H=H.__wrapped__}return He.__wrapped__=x,P}function Mm(){var x=this.__wrapped__;if(x instanceof Vr){var P=x;return this.__actions__.length&&(P=new Vr(this)),P=P.reverse(),P.__actions__.push({func:Ud,args:[Hf],thisArg:t}),new Ki(P,this.__chain__)}return this.thru(Hf)}function tg(){return gl(this.__wrapped__,this.__actions__)}var i1=kc(function(x,P,H){zo.call(x,H)?++x[H]:$u(x,H,1)});function o1(x,P,H){var ve=Co(x)?dd:ah;return H&&O(x,P,H)&&(P=t),ve(x,hi(P,3))}function Sm(x,P){var H=Co(x)?Fu:kA;return H(x,hi(P,3))}var Em=lc(Cl),Lp=lc(KA);function id(x,P){return Ys(Up(x,P),1)}function Nh(x,P){return Ys(Up(x,P),Qe)}function h0(x,P,H){return H=H===t?1:w(H),Ys(Up(x,P),H)}function Jf(x,P){var H=Co(x)?Oa:Ro;return H(x,hi(P,3))}function f0(x,P){var H=Co(x)?hl:ks;return H(x,hi(P,3))}var p0=kc(function(x,P,H){zo.call(x,H)?x[H].push(P):$u(x,H,[P])});function Bm(x,P,H,ve){x=Rc(x)?x:Fo(x),H=H&&!ve?w(H):0;var He=x.length;return H<0&&(H=jo(He+H,0)),km(x)?H<=He&&x.indexOf(P,H)>-1:!!He&&Xs(x,P,H)>-1}var ng=kn(function(x,P,H){var ve=-1,He=typeof P=="function",ht=Rc(x)?ln(x.length):[];return Ro(x,function(Ft){ht[++ve]=He?Zs(P,Ft,H):$l(Ft,P,H)}),ht}),m0=kc(function(x,P,H){$u(x,H,P)});function Up(x,P){var H=Co(x)?Es:Xe;return H(x,hi(P,3))}function ep(x,P,H,ve){return x==null?[]:(Co(P)||(P=P==null?[]:[P]),H=ve?t:H,Co(H)||(H=H==null?[]:[H]),Pt(x,P,H))}var zp=kc(function(x,P,H){x[H?0:1].push(P)},function(){return[[],[]]});function Om(x,P,H){var ve=Co(x)?hd:yc,He=arguments.length<3;return ve(x,hi(P,4),H,He,Ro)}function m(x,P,H){var ve=Co(x)?Mp:yc,He=arguments.length<3;return ve(x,hi(P,4),H,He,ks)}function C(x,P){var H=Co(x)?Fu:kA;return H(x,ri(hi(P,3)))}function F(x){var P=Co(x)?Yu:Gn;return P(x)}function Q(x,P,H){(H?O(x,P,H):P===t)?P=1:P=w(P);var ve=Co(x)?Sc:Bn;return ve(x,P)}function ue(x){var P=Co(x)?sh:Io;return P(x)}function ye(x){if(x==null)return 0;if(Rc(x))return km(x)?Qc(x):x.length;var P=vl(x);return P==zt||P==Kn?x.size:ke(x).length}function et(x,P,H){var ve=Co(x)?uA:No;return H&&O(x,P,H)&&(P=t),ve(x,hi(P,3))}var kt=kn(function(x,P){if(x==null)return[];var H=P.length;return H>1&&O(x,P[0],P[1])?P=[]:H>2&&O(P[0],P[1],P[2])&&(P=[P[0]]),Pt(x,Ys(P,1),[])}),Gt=Zo||function(){return Cr.Date.now()};function wn(x,P){if(typeof P!="function")throw new Tl(a);return x=w(x),function(){if(--x<1)return P.apply(this,arguments)}}function cr(x,P,H){return P=H?t:P,P=x&&P==null?x.length:P,ko(x,W,t,t,t,t,P)}function gr(x,P){var H;if(typeof P!="function")throw new Tl(a);return x=w(x),function(){return--x>0&&(H=P.apply(this,arguments)),x<=1&&(P=t),H}}var tr=kn(function(x,P,H){var ve=j;if(H.length){var He=rl(H,ed(tr));ve|=$}return ko(x,ve,P,H,He)}),jr=kn(function(x,P,H){var ve=j|Y;if(H.length){var He=rl(H,ed(jr));ve|=$}return ko(P,ve,x,H,He)});function oi(x,P,H){P=H?t:P;var ve=ko(x,ie,t,t,t,t,t,P);return ve.placeholder=oi.placeholder,ve}function ui(x,P,H){P=H?t:P;var ve=ko(x,J,t,t,t,t,t,P);return ve.placeholder=ui.placeholder,ve}function ll(x,P,H){var ve,He,ht,Ft,Yt,an,Hn=0,Zn=!1,mr=!1,Xr=!0;if(typeof x!="function")throw new Tl(a);P=U(P)||0,wl(H)&&(Zn=!!H.leading,mr="maxWait"in H,ht=mr?jo(U(H.maxWait)||0,P):ht,Xr="trailing"in H?!!H.trailing:Xr);function wi(rA){var ip=ve,Dm=He;return ve=He=t,Hn=rA,Ft=x.apply(Dm,ip),Ft}function eo(rA){return Hn=rA,Yt=li(Ms,P),Zn?wi(rA):Ft}function ss(rA){var ip=rA-an,Dm=rA-Hn,wI=P-ip;return mr?ds(wI,ht-Dm):wI}function to(rA){var ip=rA-an,Dm=rA-Hn;return an===t||ip>=P||ip<0||mr&&Dm>=ht}function Ms(){var rA=Gt();if(to(rA))return Us(rA);Yt=li(Ms,ss(rA))}function Us(rA){return Yt=t,Xr&&ve?wi(rA):(ve=He=t,Ft)}function qh(){Yt!==t&&Dl(Yt),Hn=0,ve=an=He=Yt=t}function Gd(){return Yt===t?Ft:Us(Gt())}function Yh(){var rA=Gt(),ip=to(rA);if(ve=arguments,He=this,an=rA,ip){if(Yt===t)return eo(an);if(mr)return Dl(Yt),Yt=li(Ms,P),wi(an)}return Yt===t&&(Yt=li(Ms,P)),Ft}return Yh.cancel=qh,Yh.flush=Gd,Yh}var An=kn(function(x,P){return Gf(x,1,P)}),en=kn(function(x,P,H){return Gf(x,U(P)||0,H)});function hn(x){return ko(x,fe)}function _r(x,P){if(typeof x!="function"||P!=null&&typeof P!="function")throw new Tl(a);var H=function(){var ve=arguments,He=P?P.apply(this,ve):ve[0],ht=H.cache;if(ht.has(He))return ht.get(He);var Ft=x.apply(this,ve);return H.cache=ht.set(He,Ft)||ht,Ft};return H.cache=new(_r.Cache||Si),H}_r.Cache=Si;function ri(x){if(typeof x!="function")throw new Tl(a);return function(){var P=arguments;switch(P.length){case 0:return!x.call(this);case 1:return!x.call(this,P[0]);case 2:return!x.call(this,P[0],P[1]);case 3:return!x.call(this,P[0],P[1],P[2])}return!x.apply(this,P)}}function ki(x){return gr(2,x)}var Ii=yl(function(x,P){P=P.length==1&&Co(P[0])?Es(P[0],yu(hi())):Es(Ys(P,1),yu(hi()));var H=P.length;return kn(function(ve){for(var He=-1,ht=ds(ve.length,H);++He<ht;)ve[He]=P[He].call(this,ve[He]);return Zs(x,this,ve)})}),ji=kn(function(x,P){var H=rl(P,ed(ji));return ko(x,$,t,P,H)}),Ls=kn(function(x,P){var H=rl(P,ed(Ls));return ko(x,te,t,P,H)}),es=Pc(function(x,P){return ko(x,oe,t,t,t,P)});function Wh(x,P){if(typeof x!="function")throw new Tl(a);return P=P===t?P:w(P),kn(x,P)}function s1(x,P){if(typeof x!="function")throw new Tl(a);return P=P==null?0:jo(w(P),0),kn(function(H){var ve=H[P],He=aa(H,0,P);return ve&&Uu(He,ve),Zs(x,this,He)})}function C_(x,P,H){var ve=!0,He=!0;if(typeof x!="function")throw new Tl(a);return wl(H)&&(ve="leading"in H?!!H.leading:ve,He="trailing"in H?!!H.trailing:He),ll(x,P,{leading:ve,maxWait:P,trailing:He})}function __(x){return cr(x,1)}function b_(x,P){return ji(Xu(P),x)}function x_(){if(!arguments.length)return[];var x=arguments[0];return Co(x)?x:[x]}function S3(x){return xs(x,B)}function w_(x,P){return P=typeof P=="function"?P:t,xs(x,B,P)}function jp(x){return xs(x,E|B)}function M_(x,P){return P=typeof P=="function"?P:t,xs(x,E|B,P)}function S_(x,P){return P==null||uu(x,P,Wr(P))}function dh(x,P){return x===P||x!==x&&P!==P}var E_=df(Au),E3=df(function(x,P){return x>=P}),Im=Bd(function(){return arguments}())?Bd:function(x){return Ml(x)&&zo.call(x,"callee")&&!bc.call(x,"callee")},Co=ln.isArray,rg=Zi?yu(Zi):T;function Rc(x){return x!=null&&ig(x.length)&&!Ac(x)}function xl(x){return Ml(x)&&Rc(x)}function B_(x){return x===!0||x===!1||Ml(x)&&Js(x)==Ue}var Gh=rh||Q3,a1=Xi?yu(Xi):l;function l1(x){return Ml(x)&&x.nodeType===1&&!tp(x)}function B3(x){if(x==null)return!0;if(Rc(x)&&(Co(x)||typeof x=="string"||typeof x.splice=="function"||Gh(x)||Wp(x)||Im(x)))return!x.length;var P=vl(x);if(P==zt||P==Kn)return!x.size;if(je(x))return!ke(x).length;for(var H in x)if(zo.call(x,H))return!1;return!0}function O3(x,P){return c(x,P)}function I3(x,P,H){H=typeof H=="function"?H:t;var ve=H?H(x,P):t;return ve===t?c(x,P,t,H):!!ve}function Np(x){if(!Ml(x))return!1;var P=Js(x);return P==nt||P==Be||typeof x.message=="string"&&typeof x.name=="string"&&!tp(x)}function gA(x){return typeof x=="number"&&Zc(x)}function Ac(x){if(!wl(x))return!1;var P=Js(x);return P==Ct||P==pt||P==Tt||P==rn}function u1(x){return typeof x=="number"&&x==w(x)}function ig(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=Ze}function wl(x){var P=typeof x;return x!=null&&(P=="object"||P=="function")}function Ml(x){return x!=null&&typeof x=="object"}var O_=As?yu(As):M;function I_(x,P){return x===P||R(x,P,os(P))}function k_(x,P,H){return H=typeof H=="function"?H:t,R(x,P,os(P),H)}function k3(x){return av(x)&&x!=+x}function T_(x){if(Te(x))throw new _i(s);return N(x)}function ov(x){return x===null}function sv(x){return x==null}function av(x){return typeof x=="number"||Ml(x)&&Js(x)==tn}function tp(x){if(!Ml(x)||Js(x)!=gn)return!1;var P=ja(x);if(P===null)return!0;var H=zo.call(P,"constructor")&&P.constructor;return typeof H=="function"&&H instanceof H&&HA.call(H)==cA}var og=va?yu(va):V;function P_(x){return u1(x)&&x>=-9007199254740991&&x<=Ze}var A1=za?yu(za):ne;function km(x){return typeof x=="string"||!Co(x)&&Ml(x)&&Js(x)==pn}function LA(x){return typeof x=="symbol"||Ml(x)&&Js(x)==Xn}var Wp=gu?yu(gu):ae;function lv(x){return x===t}function uv(x){return Ml(x)&&vl(x)==Yn}function T3(x){return Ml(x)&&Js(x)==er}var f=df(Ve),u=df(function(x,P){return x<=P});function h(x){if(!x)return[];if(Rc(x))return km(x)?zu(x):Pa(x);if(MA&&x[MA])return jf(x[MA]());var P=vl(x),H=P==zt?gd:P==Kn?kl:Fo;return H(x)}function v(x){if(!x)return x===0?x:0;if(x=U(x),x===Qe||x===-1/0){var P=x<0?-1:1;return P*We}return x===x?x:0}function w(x){var P=v(x),H=P%1;return P===P?H?P-H:P:0}function K(x){return x?Mu(w(x),0,Pe):0}function U(x){if(typeof x=="number")return x;if(LA(x))return Ce;if(wl(x)){var P=typeof x.valueOf=="function"?x.valueOf():x;x=wl(P)?P+"":P}if(typeof x!="string")return x===0?x:+x;x=Nc(x);var H=So.test(x);return H||Ua.test(x)?Vn(x.slice(2),H?2:8):so.test(x)?Ce:+x}function G(x){return hu(x,qr(x))}function X(x){return x?Mu(w(x),-9007199254740991,Ze):x===0?x:0}function re(x){return x==null?"":Go(x)}var de=RA(function(x,P){if(je(P)||Rc(P)){hu(P,Wr(P),x);return}for(var H in P)zo.call(P,H)&&Ec(x,H,P[H])}),xe=RA(function(x,P){hu(P,qr(P),x)}),Fe=RA(function(x,P,H,ve){hu(P,qr(P),x,ve)}),ze=RA(function(x,P,H,ve){hu(P,Wr(P),x,ve)}),Ge=Pc(sc);function Je(x,P){var H=Na(x);return P==null?H:yr(H,P)}var At=kn(function(x,P){x=Ho(x);var H=-1,ve=P.length,He=ve>2?P[2]:t;for(He&&O(P[0],P[1],He)&&(ve=1);++H<ve;)for(var ht=P[H],Ft=qr(ht),Yt=-1,an=Ft.length;++Yt<an;){var Hn=Ft[Yt],Zn=x[Hn];(Zn===t||dh(Zn,Pl[Hn])&&!zo.call(x,Hn))&&(x[Hn]=ht[Hn])}return x}),xt=kn(function(x){return x.push(t,hf),Zs(Zl,t,x)});function Wt(x,P){return zf(x,hi(P,3),pl)}function Bt(x,P){return zf(x,hi(P,3),Vu)}function Le(x,P){return x==null?x:Bc(x,hi(P,3),qr)}function lt(x,P){return x==null?x:Yl(x,hi(P,3),qr)}function It(x,P){return x&&pl(x,hi(P,3))}function cn(x,P){return x&&Vu(x,hi(P,3))}function jn(x){return x==null?[]:Oc(x,Wr(x))}function vn(x){return x==null?[]:Oc(x,qr(x))}function Mn(x,P,H){var ve=x==null?t:Eu(x,P);return ve===t?H:ve}function ir(x,P){return x!=null&&Cm(x,P,cu)}function zn(x,P){return x!=null&&Cm(x,P,fA)}var dr=kp(function(x,P,H){P!=null&&typeof P.toString!="function"&&(P=wA.call(P)),x[P]=H},Wd(ph)),In=kp(function(x,P,H){P!=null&&typeof P.toString!="function"&&(P=wA.call(P)),zo.call(x,P)?x[P].push(H):x[P]=[H]},hi),Qr=kn($l);function Wr(x){return Rc(x)?lu(x):ke(x)}function qr(x){return Rc(x)?lu(x,!0):De(x)}function ti(x,P){var H={};return P=hi(P,3),pl(x,function(ve,He,ht){$u(H,P(ve,He,ht),ve)}),H}function Ko(x,P){var H={};return P=hi(P,3),pl(x,function(ve,He,ht){$u(H,He,P(ve,He,ht))}),H}var ul=RA(function(x,P,H){gt(x,P,H)}),Zl=RA(function(x,P,H,ve){gt(x,P,H,ve)}),tA=Pc(function(x,P){var H={};if(x==null)return H;var ve=!1;P=Es(P,function(ht){return ht=ea(ht,x),ve||(ve=ht.length>1),ht}),hu(x,pf(x),H),ve&&(H=xs(H,E|S|B,Rd));for(var He=P.length;He--;)Ga(H,P[He]);return H});function hh(x,P){return Iu(x,ri(hi(P)))}var cc=Pc(function(x,P){return x==null?{}:Kt(x,P)});function Iu(x,P){if(x==null)return{};var H=Es(pf(x),function(ve){return[ve]});return P=hi(P),jt(x,H,function(ve,He){return P(ve,He[0])})}function yA(x,P,H){P=ea(P,x);var ve=-1,He=P.length;for(He||(He=1,x=t);++ve<He;){var ht=x==null?t:x[ba(P[ve])];ht===t&&(ve=He,ht=H),x=Ac(ht)?ht.call(x):ht}return x}function Sl(x,P,H){return x==null?x:Pr(x,P,H)}function fu(x,P,H,ve){return ve=typeof ve=="function"?ve:t,x==null?x:Pr(x,P,H,ve)}var UA=Yf(Wr),zA=Yf(qr);function dc(x,P,H){var ve=Co(x),He=ve||Gh(x)||Wp(x);if(P=hi(P,4),H==null){var ht=x&&x.constructor;He?H=ve?new ht:[]:wl(x)?H=Ac(ht)?Na(ja(x)):{}:H={}}return(He?Oa:pl)(x,function(Ft,Yt,an){return P(H,Ft,Yt,an)}),H}function pu(x,P){return x==null?!0:Ga(x,P)}function zd(x,P,H){return x==null?x:Zu(x,P,Xu(H))}function Dc(x,P,H,ve){return ve=typeof ve=="function"?ve:t,x==null?x:Zu(x,P,Xu(H),ve)}function Fo(x){return x==null?[]:Ih(x,Wr(x))}function vA(x){return x==null?[]:Ih(x,qr(x))}function Va(x,P,H){return H===t&&(H=P,P=t),H!==t&&(H=U(H),H=H===H?H:0),P!==t&&(P=U(P),P=P===P?P:0),Mu(U(x),P,H)}function Al(x,P,H){return P=v(P),H===t?(H=P,P=0):H=v(H),x=U(x),Bu(x,P,H)}function ku(x,P,H){if(H&&typeof H!="boolean"&&O(x,P,H)&&(P=H=t),H===t&&(typeof P=="boolean"?(H=P,P=t):typeof x=="boolean"&&(H=x,x=t)),x===t&&P===t?(x=0,P=1):(x=v(x),P===t?(P=x,x=0):P=v(P)),x>P){var ve=x;x=P,P=ve}if(H||x%1||P%1){var He=Cd();return ds(x+He*(P-x+kr("1e-"+((He+"").length-1))),P)}return bn(x,P)}var Tm=uh(function(x,P,H){return P=P.toLowerCase(),x+(H?od(P):P)});function od(x){return dv(re(x).toLowerCase())}function sg(x){return x=re(x),x&&x.replace(rs,lf).replace(lA,"")}function fh(x,P,H){x=re(x),P=Go(P);var ve=x.length;H=H===t?ve:Mu(w(H),0,ve);var He=H;return H-=P.length,H>=0&&x.slice(H,He)==P}function sd(x){return x=re(x),x&&Qt.test(x)?x.replace(dt,au):x}function nA(x){return x=re(x),x&&sn.test(x)?x.replace(Er,"\\$&"):x}var jd=uh(function(x,P,H){return x+(H?"-":"")+P.toLowerCase()}),np=uh(function(x,P,H){return x+(H?" ":"")+P.toLowerCase()}),R_=Ip("toLowerCase");function D_(x,P,H){x=re(x),P=w(P);var ve=P?Qc(x):0;if(!P||ve>=P)return x;var He=(P-ve)/2;return qf(ju(He),H)+x+qf(ec(He),H)}function K_(x,P,H){x=re(x),P=w(P);var ve=P?Qc(x):0;return P&&ve<P?x+qf(P-ve,H):x}function F_(x,P,H){x=re(x),P=w(P);var ve=P?Qc(x):0;return P&&ve<P?qf(P-ve,H)+x:x}function Av(x,P,H){return H||P==null?P=0:P&&(P=+P),vd(re(x).replace(Wn,""),P||0)}function cv(x,P,H){return(H?O(x,P,H):P===t)?P=1:P=w(P),Cn(re(x),P)}function rp(){var x=arguments,P=re(x[0]);return x.length<3?P:P.replace(x[1],x[2])}var L_=uh(function(x,P,H){return x+(H?"_":"")+P.toLowerCase()});function U_(x,P,H){return H&&typeof H!="number"&&O(x,P,H)&&(P=H=t),H=H===t?Pe:H>>>0,H?(x=re(x),x&&(typeof P=="string"||P!=null&&!og(P))&&(P=Go(P),!P&&Gc(x))?aa(zu(x),0,H):x.split(P,H)):[]}var P3=uh(function(x,P,H){return x+(H?" ":"")+dv(P)});function R3(x,P,H){return x=re(x),H=H==null?0:Mu(w(H),0,x.length),P=Go(P),x.slice(H,H+P.length)==P}function D3(x,P,H){var ve=ot.templateSettings;H&&O(x,P,H)&&(P=t),x=re(x),P=Fe({},P,ve,Ju);var He=Fe({},P.imports,ve.imports,Ju),ht=Wr(He),Ft=Ih(He,ht),Yt,an,Hn=0,Zn=P.interpolate||ca,mr="__p += '",Xr=$A((P.escape||ca).source+"|"+Zn.source+"|"+(Zn===wt?Yi:ca).source+"|"+(P.evaluate||ca).source+"|$","g"),wi="//# sourceURL="+(zo.call(P,"sourceURL")?(P.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wi+"]")+`
`;x.replace(Xr,function(to,Ms,Us,qh,Gd,Yh){return Us||(Us=qh),mr+=x.slice(Hn,Yh).replace(dl,Il),Ms&&(Yt=!0,mr+=`' +
__e(`+Ms+`) +
'`),Gd&&(an=!0,mr+=`';
`+Gd+`;
__p += '`),Us&&(mr+=`' +
((__t = (`+Us+`)) == null ? '' : __t) +
'`),Hn=Yh+to.length,to}),mr+=`';
`;var eo=zo.call(P,"variable")&&P.variable;if(!eo)mr=`with (obj) {
`+mr+`
}
`;else if(ho.test(eo))throw new _i(o);mr=(an?mr.replace(p,""):mr).replace(Ne,"$1").replace($e,"$1;"),mr="function("+(eo||"obj")+`) {
`+(eo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Yt?", __e = _.escape":"")+(an?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+mr+`return __p
}`;var ss=N_(function(){return bo(ht,wi+"return "+mr).apply(t,Ft)});if(ss.source=mr,Np(ss))throw ss;return ss}function K3(x){return re(x).toLowerCase()}function F3(x){return re(x).toUpperCase()}function L3(x,P,H){if(x=re(x),x&&(H||P===t))return Nc(x);if(!x||!(P=Go(P)))return x;var ve=zu(x),He=zu(P),ht=AA(ve,He),Ft=Wc(ve,He)+1;return aa(ve,ht,Ft).join("")}function U3(x,P,H){if(x=re(x),x&&(H||P===t))return x.slice(0,Xd(x)+1);if(!x||!(P=Go(P)))return x;var ve=zu(x),He=Wc(ve,zu(P))+1;return aa(ve,0,He).join("")}function z3(x,P,H){if(x=re(x),x&&(H||P===t))return x.replace(Wn,"");if(!x||!(P=Go(P)))return x;var ve=zu(x),He=AA(ve,zu(P));return aa(ve,He).join("")}function Qh(x,P){var H=he,ve=Se;if(wl(P)){var He="separator"in P?P.separator:He;H="length"in P?w(P.length):H,ve="omission"in P?Go(P.omission):ve}x=re(x);var ht=x.length;if(Gc(x)){var Ft=zu(x);ht=Ft.length}if(H>=ht)return x;var Yt=H-Qc(ve);if(Yt<1)return ve;var an=Ft?aa(Ft,0,Yt).join(""):x.slice(0,Yt);if(He===t)return an+ve;if(Ft&&(Yt+=an.length-Yt),og(He)){if(x.slice(Yt).search(He)){var Hn,Zn=an;for(He.global||(He=$A(He.source,re(vi.exec(He))+"g")),He.lastIndex=0;Hn=He.exec(Zn);)var mr=Hn.index;an=an.slice(0,mr===t?Yt:mr)}}else if(x.indexOf(Go(He),Yt)!=Yt){var Xr=an.lastIndexOf(He);Xr>-1&&(an=an.slice(0,Xr))}return an+ve}function c1(x){return x=re(x),x&&ct.test(x)?x.replace(rt,Jd):x}var z_=uh(function(x,P,H){return x+(H?" ":"")+P.toUpperCase()}),dv=Ip("toUpperCase");function j_(x,P,H){return x=re(x),P=H?t:P,P===t?uf(x)?Af(x):Sp(x):x.match(P)||[]}var N_=kn(function(x,P){try{return Zs(x,t,P)}catch(H){return Np(H)?H:new _i(H)}}),jA=Pc(function(x,P){return Oa(P,function(H){H=ba(H),$u(x,H,tr(x[H],x))}),x});function Nd(x){var P=x==null?0:x.length,H=hi();return x=P?Es(x,function(ve){if(typeof ve[1]!="function")throw new Tl(a);return[H(ve[0]),ve[1]]}):[],kn(function(ve){for(var He=-1;++He<P;){var ht=x[He];if(Zs(ht[0],this,ve))return Zs(ht[1],this,ve)}})}function Pm(x){return Wf(xs(x,E))}function Wd(x){return function(){return x}}function Rm(x,P){return x==null||x!==x?P:x}var xf=Kh(),YG=Kh(!0);function ph(x){return x}function j3(x){return Me(typeof x=="function"?x:xs(x,E))}function $G(x){return mt(xs(x,E))}function VG(x,P){return ut(x,xs(P,E))}var HG=kn(function(x,P){return function(H){return $l(H,x,P)}}),ZG=kn(function(x,P){return function(H){return $l(x,H,P)}});function N3(x,P,H){var ve=Wr(P),He=Oc(P,ve);H==null&&!(wl(P)&&(He.length||!ve.length))&&(H=P,P=x,x=this,He=Oc(P,Wr(P)));var ht=!(wl(H)&&"chain"in H)||!!H.chain,Ft=Ac(x);return Oa(He,function(Yt){var an=P[Yt];x[Yt]=an,Ft&&(x.prototype[Yt]=function(){var Hn=this.__chain__;if(ht||Hn){var Zn=x(this.__wrapped__),mr=Zn.__actions__=Pa(this.__actions__);return mr.push({func:an,args:arguments,thisArg:x}),Zn.__chain__=Hn,Zn}return an.apply(x,Uu([this.value()],arguments))})}),x}function XG(){return Cr._===this&&(Cr._=Rl),this}function W3(){}function JG(x){return x=w(x),kn(function(P){return Ot(P,x)})}var eQ=Qf(Es),tQ=Qf(dd),nQ=Qf(uA);function xI(x){return D(x)?af(ba(x)):Rt(x)}function rQ(x){return function(P){return x==null?t:Eu(x,P)}}var iQ=Pd(),oQ=Pd(!0);function G3(){return[]}function Q3(){return!1}function sQ(){return{}}function aQ(){return""}function lQ(){return!0}function uQ(x,P){if(x=w(x),x<1||x>Ze)return[];var H=Pe,ve=ds(x,Pe);P=hi(P),x-=Pe;for(var He=md(ve,P);++H<x;)P(H);return He}function AQ(x){return Co(x)?Es(x,ba):LA(x)?[x]:Pa(la(re(x)))}function cQ(x){var P=++qc;return re(x)+P}var dQ=Ah(function(x,P){return x+P},0),hQ=Kl("ceil"),fQ=Ah(function(x,P){return x/P},1),pQ=Kl("floor");function mQ(x){return x&&x.length?IA(x,ph,Au):t}function gQ(x,P){return x&&x.length?IA(x,hi(P,2),Au):t}function yQ(x){return fd(x,ph)}function vQ(x,P){return fd(x,hi(P,2))}function CQ(x){return x&&x.length?IA(x,ph,Ve):t}function _Q(x,P){return x&&x.length?IA(x,hi(P,2),Ve):t}var bQ=Ah(function(x,P){return x*P},1),xQ=Kl("round"),wQ=Ah(function(x,P){return x-P},0);function MQ(x){return x&&x.length?Oh(x,ph):0}function SQ(x,P){return x&&x.length?Oh(x,hi(P,2)):0}return ot.after=wn,ot.ary=cr,ot.assign=de,ot.assignIn=xe,ot.assignInWith=Fe,ot.assignWith=ze,ot.at=Ge,ot.before=gr,ot.bind=tr,ot.bindAll=jA,ot.bindKey=jr,ot.castArray=x_,ot.chain=Xf,ot.chunk=Ya,ot.compact=wa,ot.concat=fs,ot.cond=Nd,ot.conforms=Pm,ot.constant=Wd,ot.countBy=i1,ot.create=Je,ot.curry=oi,ot.curryRight=ui,ot.debounce=ll,ot.defaults=At,ot.defaultsDeep=xt,ot.defer=An,ot.delay=en,ot.difference=yi,ot.differenceBy=Jo,ot.differenceWith=ua,ot.drop=pa,ot.dropRight=Ts,ot.dropRightWhile=Fl,ot.dropWhile=Do,ot.fill=Fd,ot.filter=Sm,ot.flatMap=id,ot.flatMapDeep=Nh,ot.flatMapDepth=h0,ot.flatten=nd,ot.flattenDeep=_l,ot.flattenDepth=bl,ot.flip=hn,ot.flow=xf,ot.flowRight=YG,ot.fromPairs=gf,ot.functions=jn,ot.functionsIn=vn,ot.groupBy=p0,ot.initial=yf,ot.intersection=n0,ot.intersectionBy=vf,ot.intersectionWith=r0,ot.invert=dr,ot.invertBy=In,ot.invokeMap=ng,ot.iteratee=j3,ot.keyBy=m0,ot.keys=Wr,ot.keysIn=qr,ot.map=Up,ot.mapKeys=ti,ot.mapValues=Ko,ot.matches=$G,ot.matchesProperty=VG,ot.memoize=_r,ot.merge=ul,ot.mergeWith=Zl,ot.method=HG,ot.methodOf=ZG,ot.mixin=N3,ot.negate=ri,ot.nthArg=JG,ot.omit=tA,ot.omitBy=hh,ot.once=ki,ot.orderBy=ep,ot.over=eQ,ot.overArgs=Ii,ot.overEvery=tQ,ot.overSome=nQ,ot.partial=ji,ot.partialRight=Ls,ot.partition=zp,ot.pick=cc,ot.pickBy=Iu,ot.property=xI,ot.propertyOf=rQ,ot.pull=bm,ot.pullAll=Vf,ot.pullAllBy=pA,ot.pullAllWith=Uh,ot.pullAt=rd,ot.range=iQ,ot.rangeRight=oQ,ot.rearg=es,ot.reject=C,ot.remove=uc,ot.rest=Wh,ot.reverse=Hf,ot.sampleSize=Q,ot.set=Sl,ot.setWith=fu,ot.shuffle=ue,ot.slice=$0,ot.sortBy=kt,ot.sortedUniq=V0,ot.sortedUniqBy=Ld,ot.split=U_,ot.spread=s1,ot.tail=H0,ot.take=s0,ot.takeRight=a0,ot.takeRightWhile=$a,ot.takeWhile=Z0,ot.tap=A0,ot.throttle=C_,ot.thru=Ud,ot.toArray=h,ot.toPairs=UA,ot.toPairsIn=zA,ot.toPath=AQ,ot.toPlainObject=G,ot.transform=dc,ot.unary=__,ot.union=rv,ot.unionBy=X0,ot.unionWith=l0,ot.uniq=zh,ot.uniqBy=iv,ot.uniqWith=Kp,ot.unset=pu,ot.unzip=u0,ot.unzipWith=al,ot.update=zd,ot.updateWith=Dc,ot.values=Fo,ot.valuesIn=vA,ot.without=t1,ot.words=j_,ot.wrap=b_,ot.xor=mA,ot.xorBy=J0,ot.xorWith=n1,ot.zip=jh,ot.zipObject=Fp,ot.zipObjectDeep=xm,ot.zipWith=eA,ot.entries=UA,ot.entriesIn=zA,ot.extend=xe,ot.extendWith=Fe,N3(ot,ot),ot.add=dQ,ot.attempt=N_,ot.camelCase=Tm,ot.capitalize=od,ot.ceil=hQ,ot.clamp=Va,ot.clone=S3,ot.cloneDeep=jp,ot.cloneDeepWith=M_,ot.cloneWith=w_,ot.conformsTo=S_,ot.deburr=sg,ot.defaultTo=Rm,ot.divide=fQ,ot.endsWith=fh,ot.eq=dh,ot.escape=sd,ot.escapeRegExp=nA,ot.every=o1,ot.find=Em,ot.findIndex=Cl,ot.findKey=Wt,ot.findLast=Lp,ot.findLastIndex=KA,ot.findLastKey=Bt,ot.floor=pQ,ot.forEach=Jf,ot.forEachRight=f0,ot.forIn=Le,ot.forInRight=lt,ot.forOwn=It,ot.forOwnRight=cn,ot.get=Mn,ot.gt=E_,ot.gte=E3,ot.has=ir,ot.hasIn=zn,ot.head=$f,ot.identity=ph,ot.includes=Bm,ot.indexOf=Lh,ot.inRange=Al,ot.invoke=Qr,ot.isArguments=Im,ot.isArray=Co,ot.isArrayBuffer=rg,ot.isArrayLike=Rc,ot.isArrayLikeObject=xl,ot.isBoolean=B_,ot.isBuffer=Gh,ot.isDate=a1,ot.isElement=l1,ot.isEmpty=B3,ot.isEqual=O3,ot.isEqualWith=I3,ot.isError=Np,ot.isFinite=gA,ot.isFunction=Ac,ot.isInteger=u1,ot.isLength=ig,ot.isMap=O_,ot.isMatch=I_,ot.isMatchWith=k_,ot.isNaN=k3,ot.isNative=T_,ot.isNil=sv,ot.isNull=ov,ot.isNumber=av,ot.isObject=wl,ot.isObjectLike=Ml,ot.isPlainObject=tp,ot.isRegExp=og,ot.isSafeInteger=P_,ot.isSet=A1,ot.isString=km,ot.isSymbol=LA,ot.isTypedArray=Wp,ot.isUndefined=lv,ot.isWeakMap=uv,ot.isWeakSet=T3,ot.join=Cf,ot.kebabCase=jd,ot.last=FA,ot.lastIndexOf=_m,ot.lowerCase=np,ot.lowerFirst=R_,ot.lt=f,ot.lte=u,ot.max=mQ,ot.maxBy=gQ,ot.mean=yQ,ot.meanBy=vQ,ot.min=CQ,ot.minBy=_Q,ot.stubArray=G3,ot.stubFalse=Q3,ot.stubObject=sQ,ot.stubString=aQ,ot.stubTrue=lQ,ot.multiply=bQ,ot.nth=Y0,ot.noConflict=XG,ot.noop=W3,ot.now=Gt,ot.pad=D_,ot.padEnd=K_,ot.padStart=F_,ot.parseInt=Av,ot.random=ku,ot.reduce=Om,ot.reduceRight=m,ot.repeat=cv,ot.replace=rp,ot.result=yA,ot.round=xQ,ot.runInContext=Zt,ot.sample=F,ot.size=ye,ot.snakeCase=L_,ot.some=et,ot.sortedIndex=i0,ot.sortedIndexBy=nv,ot.sortedIndexOf=_f,ot.sortedLastIndex=e1,ot.sortedLastIndexBy=o0,ot.sortedLastIndexOf=Zf,ot.startCase=P3,ot.startsWith=R3,ot.subtract=wQ,ot.sum=MQ,ot.sumBy=SQ,ot.template=D3,ot.times=uQ,ot.toFinite=v,ot.toInteger=w,ot.toLength=K,ot.toLower=K3,ot.toNumber=U,ot.toSafeInteger=X,ot.toString=re,ot.toUpper=F3,ot.trim=L3,ot.trimEnd=U3,ot.trimStart=z3,ot.truncate=Qh,ot.unescape=c1,ot.uniqueId=cQ,ot.upperCase=z_,ot.upperFirst=dv,ot.each=Jf,ot.eachRight=f0,ot.first=$f,N3(ot,function(){var x={};return pl(ot,function(P,H){zo.call(ot.prototype,H)||(x[H]=P)}),x}(),{chain:!1}),ot.VERSION=r,Oa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){ot[x].placeholder=ot}),Oa(["drop","take"],function(x,P){Vr.prototype[x]=function(H){H=H===t?1:jo(w(H),0);var ve=this.__filtered__&&!P?new Vr(this):this.clone();return ve.__filtered__?ve.__takeCount__=ds(H,ve.__takeCount__):ve.__views__.push({size:ds(H,Pe),type:x+(ve.__dir__<0?"Right":"")}),ve},Vr.prototype[x+"Right"]=function(H){return this.reverse()[x](H).reverse()}}),Oa(["filter","map","takeWhile"],function(x,P){var H=P+1,ve=H==Ke||H==st;Vr.prototype[x]=function(He){var ht=this.clone();return ht.__iteratees__.push({iteratee:hi(He,3),type:H}),ht.__filtered__=ht.__filtered__||ve,ht}}),Oa(["head","last"],function(x,P){var H="take"+(P?"Right":"");Vr.prototype[x]=function(){return this[H](1).value()[0]}}),Oa(["initial","tail"],function(x,P){var H="drop"+(P?"":"Right");Vr.prototype[x]=function(){return this.__filtered__?new Vr(this):this[H](1)}}),Vr.prototype.compact=function(){return this.filter(ph)},Vr.prototype.find=function(x){return this.filter(x).head()},Vr.prototype.findLast=function(x){return this.reverse().find(x)},Vr.prototype.invokeMap=kn(function(x,P){return typeof x=="function"?new Vr(this):this.map(function(H){return $l(H,x,P)})}),Vr.prototype.reject=function(x){return this.filter(ri(hi(x)))},Vr.prototype.slice=function(x,P){x=w(x);var H=this;return H.__filtered__&&(x>0||P<0)?new Vr(H):(x<0?H=H.takeRight(-x):x&&(H=H.drop(x)),P!==t&&(P=w(P),H=P<0?H.dropRight(-P):H.take(P-x)),H)},Vr.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},Vr.prototype.toArray=function(){return this.take(Pe)},pl(Vr.prototype,function(x,P){var H=/^(?:filter|find|map|reject)|While$/.test(P),ve=/^(?:head|last)$/.test(P),He=ot[ve?"take"+(P=="last"?"Right":""):P],ht=ve||/^find/.test(P);He&&(ot.prototype[P]=function(){var Ft=this.__wrapped__,Yt=ve?[1]:arguments,an=Ft instanceof Vr,Hn=Yt[0],Zn=an||Co(Ft),mr=function(Ms){var Us=He.apply(ot,Uu([Ms],Yt));return ve&&Xr?Us[0]:Us};Zn&&H&&typeof Hn=="function"&&Hn.length!=1&&(an=Zn=!1);var Xr=this.__chain__,wi=!!this.__actions__.length,eo=ht&&!Xr,ss=an&&!wi;if(!ht&&Zn){Ft=ss?Ft:new Vr(this);var to=x.apply(Ft,Yt);return to.__actions__.push({func:Ud,args:[mr],thisArg:t}),new Ki(to,Xr)}return eo&&ss?x.apply(this,Yt):(to=this.thru(mr),eo?ve?to.value()[0]:to.value():to)})}),Oa(["pop","push","shift","sort","splice","unshift"],function(x){var P=_u[x],H=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",ve=/^(?:pop|shift)$/.test(x);ot.prototype[x]=function(){var He=arguments;if(ve&&!this.__chain__){var ht=this.value();return P.apply(Co(ht)?ht:[],He)}return this[H](function(Ft){return P.apply(Co(Ft)?Ft:[],He)})}}),pl(Vr.prototype,function(x,P){var H=ot[P];if(H){var ve=H.name+"";zo.call(Gu,ve)||(Gu[ve]=[]),Gu[ve].push({name:P,func:H})}}),Gu[Td(t,Y).name]=[{name:"wrapper",func:t}],Vr.prototype.clone=Bs,Vr.prototype.reverse=bd,Vr.prototype.value=oh,ot.prototype.at=c0,ot.prototype.chain=bf,ot.prototype.commit=wm,ot.prototype.next=eg,ot.prototype.plant=r1,ot.prototype.reverse=Mm,ot.prototype.toJSON=ot.prototype.valueOf=ot.prototype.value=tg,ot.prototype.first=ot.prototype.head,MA&&(ot.prototype[MA]=d0),ot},Cu=Cc();Ci?((Ci.exports=Cu)._=Cu,Tr._=Cu):Cr._=Cu}).call(pY)}(kv,kv.exports)),kv.exports}var ux=mY();const y6=Xa(ux);function gY(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var o4,h7;function yY(){if(h7)return o4;h7=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return o4=n,o4}var vY=yY();const f7=Xa(vY);var Zh=Uint8Array,ey=Uint16Array,CY=Int32Array,ML=new Zh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),SL=new Zh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_Y=new Zh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),EL=function(n,e){for(var t=new ey(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new CY(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},BL=EL(ML,2),OL=BL.b,bY=BL.r;OL[28]=258,bY[258]=28;var xY=EL(SL,0),wY=xY.b,v6=new ey(32768);for(var jl=0;jl<32768;++jl){var g0=(jl&43690)>>1|(jl&21845)<<1;g0=(g0&52428)>>2|(g0&13107)<<2,g0=(g0&61680)>>4|(g0&3855)<<4,v6[jl]=((g0&65280)>>8|(g0&255)<<8)>>1}var Zv=function(n,e,t){for(var r=n.length,i=0,s=new ey(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new ey(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new ey(1<<e);var d=15-e;for(i=0;i<r;++i)if(n[i])for(var g=i<<4|n[i],b=e-n[i],E=a[n[i]-1]++<<b,S=E|(1<<b)-1;E<=S;++E)o[v6[E]>>d]=g}else for(o=new ey(r),i=0;i<r;++i)n[i]&&(o[i]=v6[a[n[i]-1]++]>>15-n[i]);return o},QC=new Zh(288);for(var jl=0;jl<144;++jl)QC[jl]=8;for(var jl=144;jl<256;++jl)QC[jl]=9;for(var jl=256;jl<280;++jl)QC[jl]=7;for(var jl=280;jl<288;++jl)QC[jl]=8;var IL=new Zh(32);for(var jl=0;jl<32;++jl)IL[jl]=5;var MY=Zv(QC,9,1),SY=Zv(IL,5,1),s4=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},op=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},a4=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},EY=function(n){return(n+7)/8|0},BY=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Zh(n.subarray(e,t))},OY=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$h=function(n,e,t){var r=new Error(e||OY[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,$h),!t)throw r;return r},jB=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Zh(0);var a=!t,o=a||e.i!=2,d=e.i;a&&(t=new Zh(i*3));var g=function(nt){var Ct=t.length;if(nt>Ct){var pt=new Zh(Math.max(Ct*2,nt));pt.set(t),t=pt}},b=e.f||0,E=e.p||0,S=e.b||0,B=e.l,k=e.d,z=e.m,j=e.n,Y=i*8;do{if(!B){b=op(n,E,1);var q=op(n,E+1,3);if(E+=3,q)if(q==1)B=MY,k=SY,z=9,j=5;else if(q==2){var te=op(n,E,31)+257,W=op(n,E+10,15)+4,oe=te+op(n,E+5,31)+1;E+=14;for(var fe=new Zh(oe),he=new Zh(19),Se=0;Se<W;++Se)he[_Y[Se]]=op(n,E+Se*3,7);E+=W*3;for(var pe=s4(he),we=(1<<pe)-1,Ke=Zv(he,pe,1),Se=0;Se<oe;){var ge=Ke[op(n,E,we)];E+=ge&15;var ie=ge>>4;if(ie<16)fe[Se++]=ie;else{var st=0,Qe=0;for(ie==16?(Qe=3+op(n,E,3),E+=2,st=fe[Se-1]):ie==17?(Qe=3+op(n,E,7),E+=3):ie==18&&(Qe=11+op(n,E,127),E+=7);Qe--;)fe[Se++]=st}}var Ze=fe.subarray(0,te),We=fe.subarray(te);z=s4(Ze),j=s4(We),B=Zv(Ze,z,1),k=Zv(We,j,1)}else $h(1);else{var ie=EY(E)+4,J=n[ie-4]|n[ie-3]<<8,$=ie+J;if($>i){d&&$h(0);break}o&&g(S+J),t.set(n.subarray(ie,$),S),e.b=S+=J,e.p=E=$*8,e.f=b;continue}if(E>Y){d&&$h(0);break}}o&&g(S+131072);for(var Ce=(1<<z)-1,Pe=(1<<j)-1,it=E;;it=E){var st=B[a4(n,E)&Ce],vt=st>>4;if(E+=st&15,E>Y){d&&$h(0);break}if(st||$h(2),vt<256)t[S++]=vt;else if(vt==256){it=E,B=null;break}else{var _t=vt-254;if(vt>264){var Se=vt-257,ft=ML[Se];_t=op(n,E,(1<<ft)-1)+OL[Se],E+=ft}var Dt=k[a4(n,E)&Pe],Tt=Dt>>4;Dt||$h(3),E+=Dt&15;var We=wY[Tt];if(Tt>3){var ft=SL[Tt];We+=a4(n,E)&(1<<ft)-1,E+=ft}if(E>Y){d&&$h(0);break}o&&g(S+131072);var Ue=S+_t;if(S<We){var Re=s-We,Be=Math.min(We,Ue);for(Re+S<0&&$h(3);S<Be;++S)t[S]=r[Re+S]}for(;S<Ue;++S)t[S]=t[S-We]}}e.l=B,e.p=it,e.b=S,e.f=b,B&&(b=1,e.m=z,e.d=k,e.n=j)}while(!b);return S!=t.length&&a?BY(t,0,S):t.subarray(0,S)},IY=new Zh(0),kY=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&$h(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},TY=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},PY=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&$h(6,"invalid zlib data"),(n[1]>>5&1)==1&&$h(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function RY(n,e){return jB(n,{i:2},e,e)}function DY(n,e){var t=kY(n);return t+8>n.length&&$h(6,"invalid gzip data"),jB(n.subarray(t,-8),{i:2},new Zh(TY(n)),e)}function KY(n,e){return jB(n.subarray(PY(n),-4),{i:2},e,e)}function FY(n,e){return n[0]==31&&n[1]==139&&n[2]==8?DY(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?RY(n,e):KY(n,e)}var LY=typeof TextDecoder<"u"&&new TextDecoder,UY=0;try{LY.decode(IY,{stream:!0}),UY=1}catch{}var zY=Object.defineProperty,Xv=Math.pow,Ha=(n,e)=>zY(n,"name",{value:e,configurable:!0}),fc=(n,e,t)=>new Promise((r,i)=>{var s=d=>{try{o(t.next(d))}catch(g){i(g)}},a=d=>{try{o(t.throw(d))}catch(g){i(g)}},o=d=>d.done?r(d.value):Promise.resolve(d.value).then(s,a);o((t=t.apply(n,e)).next())});Ha((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:Ha((s,a)=>{let o=document.createElement("img"),d=new AbortController,g=d.signal;return o.cancel=()=>{d.abort()},t||(n.getHeader().then(b=>{b.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):b.tileType===2?r="image/png":b.tileType===3?r="image/jpeg":b.tileType===4?r="image/webp":b.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(s.z,s.x,s.y,g).then(b=>{if(b){let E=new Blob([b.data],{type:r}),S=window.URL.createObjectURL(E);o.src=S,o.cancel=void 0,a(void 0,o)}}).catch(b=>{if(b.name!=="AbortError")throw b}),o},"createTile"),_removeTile:Ha(function(s){let a=this._tiles[s];a&&(a.el.cancel&&a.el.cancel(),a.el.width=0,a.el.height=0,a.el.deleted=!0,L.DomUtil.remove(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var jY=Ha(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:Ha(()=>r.abort(),"cancel")}},"v3compat"),kL=class{constructor(e){this.tilev4=Ha((t,r)=>fc(this,null,function*(){if(t.type==="json"){let B=t.url.substr(10),k=this.tiles.get(B);if(k||(k=new _6(B),this.tiles.set(B,k)),this.metadata)return{data:yield k.getTileJson(t.url)};let z=yield k.getHeader();return(z.minLon>=z.maxLon||z.minLat>=z.maxLat)&&console.error(`Bounds of PMTiles archive ${z.minLon},${z.minLat},${z.maxLon},${z.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:z.minZoom,maxzoom:z.maxZoom,bounds:[z.minLon,z.minLat,z.maxLon,z.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(i);if(!s)throw new Error("Invalid PMTiles protocol URL");let a=s[1],o=this.tiles.get(a);o||(o=new _6(a),this.tiles.set(a,o));let d=s[2],g=s[3],b=s[4],E=yield o.getHeader(),S=yield o==null?void 0:o.getZxy(+d,+g,+b,r.signal);if(S)return{data:new Uint8Array(S.data),cacheControl:S.cacheControl,expires:S.expires};if(E.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=jY(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};Ha(kL,"Protocol");var NY=kL;function TL(n,e){return(e>>>0)*4294967296+(n>>>0)}Ha(TL,"toNum");function PL(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return TL(n,i);throw new Error("Expected varint not more than 10 bytes")}Ha(PL,"readVarintRemainder");function W1(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,PL(r,n))}Ha(W1,"readVarint");function NB(n,e,t,r){if(r===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}Ha(NB,"rotate");function RL(n,e){let t=Xv(2,n),r=e,i=e,s=e,a=[0,0],o=1;for(;o<t;)r=1&s/2,i=1&(s^r),NB(o,a,r,i),a[0]+=o*r,a[1]+=o*i,s=s/4,o*=2;return[n,a[0],a[1]]}Ha(RL,"idOnLevel");var WY=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function DL(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>Xv(2,n)-1||t>Xv(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let r=WY[n],i=Xv(2,n),s=0,a=0,o=0,d=[e,t],g=i/2;for(;g>0;)s=(d[0]&g)>0?1:0,a=(d[1]&g)>0?1:0,o+=g*g*(3*s^a),NB(g,d,s,a),g=g/2;return r+o}Ha(DL,"zxyToTileId");function GY(n){let e=0;for(let t=0;t<27;t++){let r=(1<<t)*(1<<t);if(e+r>n)return RL(t,n-e);e+=r}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Ha(GY,"tileIdToZxy");var QY=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(QY||{});function Ax(n,e){return fc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return FY(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}Ha(Ax,"defaultDecompress");var qY=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(qY||{});function KL(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}Ha(KL,"tileTypeExt");var YY=127;function FL(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,s=e-n[i].tileId;if(s>0)t=i+1;else if(s<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}Ha(FL,"findTile");var $Y=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return fc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};Ha($Y,"FileSource");var LL=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let i=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,i&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return fc(this,null,function*(){let s,a;r?a=r:(s=new AbortController,a=s.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let d;this.mustReload?d="reload":this.chromeWindowsNoCache&&(d="no-store");let g=yield fetch(this.url,{signal:a,cache:d,headers:o});if(e===0&&g.status===416){let S=g.headers.get("Content-Range");if(!S||!S.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let B=+S.substr(8);g=yield fetch(this.url,{signal:a,cache:"reload",headers:{range:`bytes=0-${B-1}`}})}let b=g.headers.get("Etag");if(b!=null&&b.startsWith("W/")&&(b=null),g.status===416||i&&b&&b!==i)throw this.mustReload=!0,new C6(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(g.status>=300)throw new Error(`Bad response code: ${g.status}`);let E=g.headers.get("Content-Length");if(g.status===200&&(!E||+E>t))throw s&&s.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield g.arrayBuffer(),etag:b||void 0,cacheControl:g.headers.get("Cache-Control")||void 0,expires:g.headers.get("Expires")||void 0}})}};Ha(LL,"FetchSource");var VY=LL;function Mf(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*Xv(2,32)+r}Ha(Mf,"getUint64");function UL(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:Mf(t,8),rootDirectoryLength:Mf(t,16),jsonMetadataOffset:Mf(t,24),jsonMetadataLength:Mf(t,32),leafDirectoryOffset:Mf(t,40),leafDirectoryLength:Mf(t,48),tileDataOffset:Mf(t,56),tileDataLength:Mf(t,64),numAddressedTiles:Mf(t,72),numTileEntries:Mf(t,80),numTileContents:Mf(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}Ha(UL,"bytesToHeader");function WB(n){let e={buf:new Uint8Array(n),pos:0},t=W1(e),r=[],i=0;for(let s=0;s<t;s++){let a=W1(e);r.push({tileId:i+a,offset:0,length:0,runLength:1}),i+=a}for(let s=0;s<t;s++)r[s].runLength=W1(e);for(let s=0;s<t;s++)r[s].length=W1(e);for(let s=0;s<t;s++){let a=W1(e);a===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=a-1}return r}Ha(WB,"deserializeIndex");var zL=class extends Error{};Ha(zL,"EtagMismatch");var C6=zL;function GB(n,e){return fc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,YY),i=UL(r,t.etag),s=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),a=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=WB(yield e(s,i.internalCompression));return[i,[a,o.length,o]]})}Ha(GB,"getHeaderAndRoot");function QB(n,e,t,r,i){return fc(this,null,function*(){let s=yield n.getBytes(t,r,void 0,i.etag),a=yield e(s.data,i.internalCompression),o=WB(a);if(o.length===0)throw new Error("Empty directory is invalid");return o})}Ha(QB,"getDirectory");var HY=class{constructor(e=100,t=!0,r=Ax){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return fc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield GB(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return fc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(s);if(a)return a.lastUsed=this.counter++,a.data;let o=yield QB(e,this.decompress,t,r,i);return this.cache.set(s,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return fc(this,null,function*(){this.cache.delete(e.getKey())})}};Ha(HY,"ResolvedValueCache");var jL=class{constructor(e=100,t=!0,r=Ax){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return fc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((s,a)=>{GB(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),s(o[0]),this.prune()}).catch(o=>{a(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return fc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(s);if(a)return a.lastUsed=this.counter++,yield a.data;let o=new Promise((d,g)=>{QB(e,this.decompress,t,r,i).then(b=>{d(b),this.prune()}).catch(b=>{g(b)})});return this.cache.set(s,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return fc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,s)=>{this.getHeader(e).then(a=>{i(),this.invalidations.delete(t)}).catch(a=>{s(a)})});this.invalidations.set(t,r)})}};Ha(jL,"SharedPromiseCache");var ZY=jL,NL=class{constructor(e,t,r){typeof e=="string"?this.source=new VY(e):this.source=e,r?this.decompress=r:this.decompress=Ax,t?this.cache=t:this.cache=new ZY}getHeader(){return fc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return fc(this,null,function*(){let s=DL(e,t,r),a=yield this.cache.getHeader(this.source);if(e<a.minZoom||e>a.maxZoom)return;let o=a.rootDirectoryOffset,d=a.rootDirectoryLength;for(let g=0;g<=3;g++){let b=yield this.cache.getDirectory(this.source,o,d,a),E=FL(b,s);if(E){if(E.runLength>0){let S=yield this.source.getBytes(a.tileDataOffset+E.offset,E.length,i,a.etag);return{data:yield this.decompress(S.data,a.tileCompression),cacheControl:S.cacheControl,expires:S.expires}}o=a.leafDirectoryOffset+E.offset,d=E.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return fc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(s){if(s instanceof C6)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw s}})}getMetadataAttempt(){return fc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return fc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof C6)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return fc(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=KL(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};Ha(NL,"PMTiles");var _6=NL,XY=8,JY={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},e$={"*":{type:"source"}},t$=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],n$={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},r$={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},i$={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},o$={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},s$={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},a$={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},l$={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},u$=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],A$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},c$={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},d$={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},h$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},f$={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},p$={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},m$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},g$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},y$={type:"array",value:"*"},v$={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},C$={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},_$={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},b$={type:"array",value:"*",minimum:1},x$={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},w$={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},M$={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},S$={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},E$=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],B$={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},O$={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},I$={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},k$={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},T$={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},P$={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},R$={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},D$={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},K$={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},F$={"*":{type:"string"}},Ns={$version:XY,$root:JY,sources:e$,source:t$,source_vector:n$,source_raster:r$,source_raster_dem:i$,source_geojson:o$,source_video:s$,source_image:a$,layer:l$,layout:u$,layout_background:A$,layout_fill:c$,layout_circle:d$,layout_heatmap:h$,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:f$,layout_symbol:p$,layout_raster:m$,layout_hillshade:g$,filter:y$,filter_operator:v$,geometry_type:C$,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:_$,expression:b$,light:x$,sky:w$,terrain:M$,projection:S$,paint:E$,paint_fill:B$,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:O$,paint_circle:I$,paint_heatmap:k$,paint_symbol:T$,paint_raster:P$,paint_hillshade:R$,paint_background:D$,transition:K$,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:F$};const L$=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function U$(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return L$.forEach(r=>{r in e&&(t[r]=e[r])}),t}function z$(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=U$(n[t],e[n[t].ref]));return n}function Ma(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Ma(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!Ma(n[r],e[r]))return!1;return!0}return n===e}function Ef(n,e){n.push(e)}function WL(n,e,t){Ef(t,{command:"addSource",args:[n,e[n]]})}function GL(n,e,t){Ef(e,{command:"removeSource",args:[n]}),t[n]=!0}function j$(n,e,t,r){GL(n,t,r),WL(n,e,t)}function N$(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!Ma(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!Ma(n[t][r],e[t][r]))return!1;return!0}function W$(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||GL(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?Ma(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&N$(n,e,i)?Ef(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):j$(i,e,t,r)):WL(i,e,t))}function Y_(n,e,t,r,i,s){n=n||{},e=e||{};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(Ma(n[a],e[a])||t.push({command:s,args:[r,a,e[a],i]}));for(const a in e)!Object.prototype.hasOwnProperty.call(e,a)||Object.prototype.hasOwnProperty.call(n,a)||Ma(n[a],e[a])||t.push({command:s,args:[r,a,e[a],i]})}function p7(n){return n.id}function m7(n,e){return n[e.id]=e,n}function G$(n,e,t){n=n||[],e=e||[];const r=n.map(p7),i=e.map(p7),s=n.reduce(m7,{}),a=e.reduce(m7,{}),o=r.slice(),d=Object.create(null);let g,b,E,S,B;for(let k=0,z=0;k<r.length;k++)g=r[k],Object.prototype.hasOwnProperty.call(a,g)?z++:(Ef(t,{command:"removeLayer",args:[g]}),o.splice(o.indexOf(g,z),1));for(let k=0,z=0;k<i.length;k++)g=i[i.length-1-k],o[o.length-1-k]!==g&&(Object.prototype.hasOwnProperty.call(s,g)?(Ef(t,{command:"removeLayer",args:[g]}),o.splice(o.lastIndexOf(g,o.length-z),1)):z++,S=o[o.length-k],Ef(t,{command:"addLayer",args:[a[g],S]}),o.splice(o.length-k,0,g),d[g]=!0);for(let k=0;k<i.length;k++)if(g=i[k],b=s[g],E=a[g],!(d[g]||Ma(b,E))){if(!Ma(b.source,E.source)||!Ma(b["source-layer"],E["source-layer"])||!Ma(b.type,E.type)){Ef(t,{command:"removeLayer",args:[g]}),S=o[o.lastIndexOf(g)+1],Ef(t,{command:"addLayer",args:[E,S]});continue}Y_(b.layout,E.layout,t,g,null,"setLayoutProperty"),Y_(b.paint,E.paint,t,g,null,"setPaintProperty"),Ma(b.filter,E.filter)||Ef(t,{command:"setFilter",args:[g,E.filter]}),(!Ma(b.minzoom,E.minzoom)||!Ma(b.maxzoom,E.maxzoom))&&Ef(t,{command:"setLayerZoomRange",args:[g,E.minzoom,E.maxzoom]});for(B in b)Object.prototype.hasOwnProperty.call(b,B)&&(B==="layout"||B==="paint"||B==="filter"||B==="metadata"||B==="minzoom"||B==="maxzoom"||(B.indexOf("paint.")===0?Y_(b[B],E[B],t,g,B.slice(6),"setPaintProperty"):Ma(b[B],E[B])||Ef(t,{command:"setLayerProperty",args:[g,B,E[B]]})));for(B in E)!Object.prototype.hasOwnProperty.call(E,B)||Object.prototype.hasOwnProperty.call(b,B)||B==="layout"||B==="paint"||B==="filter"||B==="metadata"||B==="minzoom"||B==="maxzoom"||(B.indexOf("paint.")===0?Y_(b[B],E[B],t,g,B.slice(6),"setPaintProperty"):Ma(b[B],E[B])||Ef(t,{command:"setLayerProperty",args:[g,B,E[B]]}))}}function Q$(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!Ma(n.version,e.version))return[{command:"setStyle",args:[e]}];Ma(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),Ma(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Ma(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),Ma(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),Ma(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),Ma(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),Ma(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),Ma(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),Ma(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),Ma(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),Ma(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),Ma(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),Ma(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];W$(n.sources,e.sources,i,r);const s=[];n.layers&&n.layers.forEach(a=>{"source"in a&&r[a.source]?t.push({command:"removeLayer",args:[a.id]}):s.push(a)}),t=t.concat(i),G$(s,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class Or{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function Ey(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class Zp extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}let q$=class QL{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new QL(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const cx={kind:"null"},Dr={kind:"number"},as={kind:"string"},Qo={kind:"boolean"},rm={kind:"color"},dx={kind:"projectionDefinition"},cy={kind:"object"},Yo={kind:"value"},Y$={kind:"error"},hx={kind:"collator"},fx={kind:"formatted"},px={kind:"padding"},qC={kind:"resolvedImage"},mx={kind:"variableAnchorOffsetCollection"};function Xh(n,e){return{kind:"array",itemType:n,N:e}}function eu(n){if(n.kind==="array"){const e=eu(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const $$=[cx,Dr,as,Qo,rm,dx,fx,cy,Xh(Yo),px,qC,mx];function dC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!dC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of $$)if(!dC(t,e))return null}}return`Expected ${eu(n)} but found ${eu(e)} instead.`}function qB(n,e){return e.some(t=>t.kind===n.kind)}function Ig(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function f1(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const qL=.96422,YL=1,$L=.82521,VL=4/29,dy=6/29,HL=3*dy*dy,V$=dy*dy*dy,H$=Math.PI/180,Z$=180/Math.PI;function ZL(n){return n=n%360,n<0&&(n+=360),n}function XL([n,e,t,r]){n=l4(n),e=l4(e),t=l4(t);let i,s;const a=u4((.2225045*n+.7168786*e+.0606169*t)/YL);n===e&&e===t?i=s=a:(i=u4((.4360747*n+.3850649*e+.1430804*t)/qL),s=u4((.0139322*n+.0971045*e+.7141733*t)/$L));const o=116*a-16;return[o<0?0:o,500*(i-a),200*(a-s),r]}function l4(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function u4(n){return n>V$?Math.pow(n,1/3):n/HL+VL}function JL([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,a=isNaN(t)?i:i-t/200;return i=YL*c4(i),s=qL*c4(s),a=$L*c4(a),[A4(3.1338561*s-1.6168667*i-.4906146*a),A4(-.9787684*s+1.9161415*i+.033454*a),A4(.0719453*s-.2289914*i+1.4052427*a),r]}function A4(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function c4(n){return n>dy?n*n*n:HL*(n-VL)}function X$(n){const[e,t,r,i]=XL(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?ZL(Math.atan2(r,t)*Z$):NaN,s,e,i]}function J$([n,e,t,r]){return n=isNaN(n)?0:n*H$,JL([t,Math.cos(n)*e,Math.sin(n)*e,r])}function eV([n,e,t,r]){n=ZL(n),e/=100,t/=100;function i(s){const a=(s+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(a-3,9-a,1))}return[i(0),i(8),i(4),r]}function tV(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=nV[n];if(e){const[i,s,a]=e;return[i/255,s/255,a/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let a=1;return[$_(n.slice(a,a+=s)),$_(n.slice(a,a+=s)),$_(n.slice(a,a+=s)),$_(n.slice(a,a+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[a,o,d,g,b,E,S,B,k,z,j,Y]=s,q=[g||" ",S||" ",z].join("");if(q==="  "||q==="  /"||q===",,"||q===",,,"){const ie=[d,E,k].join(""),J=ie==="%%%"?100:ie===""?255:0;if(J){const $=[G1(+o/J,0,1),G1(+b/J,0,1),G1(+B/J,0,1),j?g7(+j,Y):1];if(y7($))return $}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,a,o,d,g,b,E,S]=r,B=[a||" ",d||" ",b].join("");if(B==="  "||B==="  /"||B===",,"||B===",,,"){const k=[+s,G1(+o,0,100),G1(+g,0,100),E?g7(+E,S):1];if(y7(k))return eV(k)}}}function $_(n){return parseInt(n.padEnd(2,n),16)/255}function g7(n,e){return G1(e?n/100:n,0,1)}function G1(n,e,t){return Math.min(Math.max(e,n),t)}function y7(n){return!n.some(Number.isNaN)}const nV={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function D0(n,e,t){return n+t*(e-n)}function hC(n,e,t){return n.map((r,i)=>D0(r,e[i],t))}function rV(n){return n==="rgb"||n==="hcl"||n==="lab"}let Nl=class Q1{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof Q1)return e;if(typeof e!="string")return;const t=tV(e);if(t)return new Q1(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",X$(this.rgb))}get lab(){return this.overwriteGetter("lab",XL(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,a,o,d]=hC(e.rgb,t.rgb,r);return new Q1(s,a,o,d,!1)}case"hcl":{const[s,a,o,d]=e.hcl,[g,b,E,S]=t.hcl;let B,k;if(!isNaN(s)&&!isNaN(g)){let ie=g-s;g>s&&ie>180?ie-=360:g<s&&s-g>180&&(ie+=360),B=s+r*ie}else isNaN(s)?isNaN(g)?B=NaN:(B=g,(o===1||o===0)&&(k=b)):(B=s,(E===1||E===0)&&(k=a));const[z,j,Y,q]=J$([B,k??D0(a,b,r),D0(o,E,r),D0(d,S,r)]);return new Q1(z,j,Y,q,!1)}case"lab":{const[s,a,o,d]=JL(hC(e.lab,t.lab,r));return new Q1(s,a,o,d,!1)}}}};Nl.black=new Nl(0,0,0,1);Nl.white=new Nl(1,1,1,1);Nl.transparent=new Nl(0,0,0,0);Nl.red=new Nl(1,0,0,1);let YB=class{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const iV=["bottom","center","top"];let b6=class{constructor(e,t,r,i,s,a){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=a}},zy=class Rb{constructor(e){this.sections=e}static fromString(e){return new Rb([new b6(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Rb?e:Rb.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}};class $d{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof $d)return e;if(typeof e=="number")return new $d([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new $d(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new $d(hC(e.values,t.values,r))}}let sA=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const oV=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Rf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Rf)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!oV.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new Rf(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new sA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const a=[];for(let o=0;o<i.length;o+=2){if(i[o]!==s[o])throw new sA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${i[o]}, to[${o}]: ${s[o]}`);a.push(i[o]);const[d,g]=i[o+1],[b,E]=s[o+1];a.push([D0(d,b,r),D0(g,E,r)])}return new Rf(a)}}let Qg=class eU{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new eU({name:e,available:!1}):null}};class Of{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new Of(e,t,r)}static parse(e){if(e instanceof Of)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Of(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Of(e.from,e.to,e.transition);if(typeof e=="string")return new Of(e,e,1)}}function tU(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fC(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Of||n instanceof Nl||n instanceof YB||n instanceof zy||n instanceof $d||n instanceof Rf||n instanceof Qg)return!0;if(Array.isArray(n)){for(const e of n)if(!fC(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!fC(n[e]))return!1;return!0}else return!1}function QA(n){if(n===null)return cx;if(typeof n=="string")return as;if(typeof n=="boolean")return Qo;if(typeof n=="number")return Dr;if(n instanceof Nl)return rm;if(n instanceof Of)return dx;if(n instanceof YB)return hx;if(n instanceof zy)return fx;if(n instanceof $d)return px;if(n instanceof Rf)return mx;if(n instanceof Qg)return qC;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=QA(r);if(!t)t=i;else{if(t===i)continue;t=Yo;break}}return Xh(t||Yo,e)}else return cy}function Jv(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Nl||n instanceof Of||n instanceof zy||n instanceof $d||n instanceof Rf||n instanceof Qg?n.toString():JSON.stringify(n)}let t2=class nU{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!fC(e[1]))return t.error("invalid value");const r=e[1];let i=QA(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new nU(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const V_={string:as,number:Dr,boolean:Qo,object:cy};let Nm=class rU{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in V_)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=V_[g],r++}else o=Yo;let d;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);d=e[2],r++}i=Xh(o,d)}else{if(!V_[s])throw new Error(`Types doesn't contain name = ${s}`);i=V_[s]}const a=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Yo);if(!o)return null;a.push(o)}return new rU(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(dC(this.type,QA(r))){if(t===this.args.length-1)throw new sA(`Expected value to be of type ${eu(this.type)}, but found ${eu(QA(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const v7={"to-boolean":Qo,"to-color":rm,"to-number":Dr,"to-string":as};let ty=class iU{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!v7[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=v7[r],s=[];for(let a=1;a<e.length;a++){const o=t.parse(e[a],a,Yo);if(!o)return null;s.push(o)}return new iU(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Nl)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=tU(t[0],t[1],t[2],t[3]),!r))return new Nl(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new sA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=$d.parse(t);if(i)return i}throw new sA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=Rf.parse(t);if(i)return i}throw new sA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new sA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return zy.fromString(Jv(this.args[0].evaluate(e)));case"resolvedImage":return Qg.fromString(Jv(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Jv(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const sV=["Unknown","Point","LineString","Polygon"];let oU=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?sV[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Nl.parse(e)),t}},sU=class aU{constructor(e,t,r=[],i,s=new q$,a=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=a,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,a){return a==="assert"?new Nm(s,[i]):a==="coerce"?new ty(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let a=s.parse(e,this);if(!a)return null;if(this.expectedType){const o=this.expectedType,d=a.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&d.kind==="value")a=r(a,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&(d.kind==="string"||d.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(d.kind==="value"||d.kind==="string"))a=r(a,o,t.typeAnnotation||"coerce");else if(o.kind==="padding"&&(d.kind==="value"||d.kind==="number"||d.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if(o.kind==="variableAnchorOffsetCollection"&&(d.kind==="value"||d.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,d))return null}if(!(a instanceof t2)&&a.type.kind!=="resolvedImage"&&this._isConstant(a)){const o=new oU;try{a=new t2(a.type,a.evaluate(o))}catch(d){return this.error(d.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new aU(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Zp(r,e))}checkSubtype(e,t){const r=dC(e,t);return r&&this.error(r),r}},lU=class uU{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const a=e[s];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,s);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([a,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new uU(r,i):null}outputDefined(){return this.result.outputDefined()}},AU=class cU{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new cU(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},aV=class dU{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Dr),i=t.parse(e[2],2,Xh(t.expectedType||Yo));if(!r||!i)return null;const s=i.type;return new dU(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new sA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new sA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new sA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},lV=class hU{constructor(e,t){this.type=Qo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Yo),i=t.parse(e[2],2,Yo);return!r||!i?null:qB(r.type,[Qo,as,Dr,cx,Yo])?new hU(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${eu(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Ig(t,["boolean","string","number","null"]))throw new sA(`Expected first argument to be of type boolean, string, number or null, but found ${eu(QA(t))} instead.`);if(!Ig(r,["string","array"]))throw new sA(`Expected second argument to be of type array or string, but found ${eu(QA(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},uV=class x6{constructor(e,t,r){this.type=Dr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Yo),i=t.parse(e[2],2,Yo);if(!r||!i)return null;if(!qB(r.type,[Qo,as,Dr,cx,Yo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${eu(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Dr);return s?new x6(r,i,s):null}else return new x6(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Ig(t,["boolean","string","number","null"]))throw new sA(`Expected first argument to be of type boolean, string, number or null, but found ${eu(QA(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Ig(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(Ig(r,["array"]))return r.indexOf(t,i);throw new sA(`Expected second argument to be of type array or string, but found ${eu(QA(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},AV=class fU{constructor(e,t,r,i,s,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},a=[];for(let g=2;g<e.length-1;g+=2){let b=e[g];const E=e[g+1];Array.isArray(b)||(b=[b]);const S=t.concat(g);if(b.length===0)return S.error("Expected at least one branch label.");for(const k of b){if(typeof k!="number"&&typeof k!="string")return S.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return S.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return S.error("Numeric branch labels must be integer values.");if(!r)r=QA(k);else if(S.checkSubtype(r,QA(k)))return null;if(typeof s[String(k)]<"u")return S.error("Branch labels must be unique.");s[String(k)]=a.length}const B=t.parse(E,g,i);if(!B)return null;i=i||B.type,a.push(B)}const o=t.parse(e[1],1,Yo);if(!o)return null;const d=t.parse(e[e.length-1],e.length-1,i);return!d||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new fU(r,i,o,s,a,d)}evaluate(e){const t=this.input.evaluate(e);return(QA(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},cV=class pU{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const o=t.parse(e[a],a,Qo);if(!o)return null;const d=t.parse(e[a+1],a+1,r);if(!d)return null;i.push([o,d]),r=r||d.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new pU(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},dV=class w6{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Yo),i=t.parse(e[2],2,Dr);if(!r||!i)return null;if(!qB(r.type,[Xh(Yo),as,Yo]))return t.error(`Expected first argument to be of type array or string, but found ${eu(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Dr);return s?new w6(r.type,r,i,s):null}else return new w6(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Ig(t,["string"]))return[...t].slice(r,i).join("");if(Ig(t,["array"]))return t.slice(r,i);throw new sA(`Expected first argument to be of type array or string, but found ${eu(QA(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function gx(n,e){const t=n.length-1;let r=0,i=t,s=0,a,o;for(;r<=i;)if(s=Math.floor((r+i)/2),a=n[s],o=n[s+1],a<=e){if(s===t||e<o)return s;r=s+1}else if(a>e)i=s-1;else throw new sA("Input is not a number.");return 0}let mU=class gU{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Dr);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let a=1;a<e.length;a+=2){const o=a===1?-1/0:e[a],d=e[a+1],g=a,b=a+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const E=t.parse(d,b,s);if(!E)return null;s=s||E.type,i.push([o,E])}return new gU(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=gx(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function hV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var d4,C7;function fV(){if(C7)return d4;C7=1,d4=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r=r-s/a}var o=0,d=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?o=r:d=r,r=(d-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},d4}var pV=fV(),mV=hV(pV);let Qm=class M6{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,o]of s)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=h4(t,e.base,r,i);else if(e.name==="linear")s=h4(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;s=new mV(a[0],a[1],a[2],a[3]).solve(h4(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,Dr),!s)return null;const o=[];let d=null;r==="interpolate-hcl"||r==="interpolate-lab"?d=rm:t.expectedType&&t.expectedType.kind!=="value"&&(d=t.expectedType);for(let g=0;g<a.length;g+=2){const b=a[g],E=a[g+1],S=g+3,B=g+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(o.length&&o[o.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',S);const k=t.parse(E,B,d);if(!k)return null;d=d||k.type,o.push([b,k])}return!f1(d,Dr)&&!f1(d,dx)&&!f1(d,rm)&&!f1(d,px)&&!f1(d,mx)&&!f1(d,Xh(Dr))?t.error(`Type ${eu(d)} is not interpolatable.`):new M6(d,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=gx(t,i),o=t[a],d=t[a+1],g=M6.interpolationFactor(this.interpolation,i,o,d),b=r[a].evaluate(e),E=r[a+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return D0(b,E,g);case"color":return Nl.interpolate(b,E,g);case"padding":return $d.interpolate(b,E,g);case"variableAnchorOffsetCollection":return Rf.interpolate(b,E,g);case"array":return hC(b,E,g);case"projectionDefinition":return Of.interpolate(b,E,g)}case"interpolate-hcl":return Nl.interpolate(b,E,g,"hcl");case"interpolate-lab":return Nl.interpolate(b,E,g,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function h4(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const gV={color:Nl.interpolate,number:D0,padding:$d.interpolate,variableAnchorOffsetCollection:Rf.interpolate,array:hC};let yU=class S6{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const d=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!d)return null;r=r||d.type,s.push(d)}if(!r)throw new Error("No output type");return i&&s.some(o=>dC(i,o.type))?new S6(Yo,s):new S6(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof Qg&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function _7(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function yV(n,e,t){return e===t}function vV(n,e,t){return e!==t}function CV(n,e,t){return e<t}function _V(n,e,t){return e>t}function bV(n,e,t){return e<=t}function xV(n,e,t){return e>=t}function vU(n,e,t,r){return r.compare(e,t)===0}function wV(n,e,t,r){return!vU(n,e,t,r)}function MV(n,e,t,r){return r.compare(e,t)<0}function SV(n,e,t,r){return r.compare(e,t)>0}function EV(n,e,t,r){return r.compare(e,t)<=0}function BV(n,e,t,r){return r.compare(e,t)>=0}function jy(n,e,t){const r=n!=="=="&&n!=="!=";return class CU{constructor(s,a,o){this.type=Qo,this.lhs=s,this.rhs=a,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||a.type.kind==="value"}static parse(s,a){if(s.length!==3&&s.length!==4)return a.error("Expected two or three arguments.");const o=s[0];let d=a.parse(s[1],1,Yo);if(!d)return null;if(!_7(o,d.type))return a.concat(1).error(`"${o}" comparisons are not supported for type '${eu(d.type)}'.`);let g=a.parse(s[2],2,Yo);if(!g)return null;if(!_7(o,g.type))return a.concat(2).error(`"${o}" comparisons are not supported for type '${eu(g.type)}'.`);if(d.type.kind!==g.type.kind&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error(`Cannot compare types '${eu(d.type)}' and '${eu(g.type)}'.`);r&&(d.type.kind==="value"&&g.type.kind!=="value"?d=new Nm(g.type,[d]):d.type.kind!=="value"&&g.type.kind==="value"&&(g=new Nm(d.type,[g])));let b=null;if(s.length===4){if(d.type.kind!=="string"&&g.type.kind!=="string"&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(b=a.parse(s[3],3,hx),!b)return null}return new CU(d,g,b)}evaluate(s){const a=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const d=QA(a),g=QA(o);if(d.kind!==g.kind||!(d.kind==="string"||d.kind==="number"))throw new sA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${d.kind}, ${g.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const d=QA(a),g=QA(o);if(d.kind!=="string"||g.kind!=="string")return e(s,a,o)}return this.collator?t(s,a,o,this.collator.evaluate(s)):e(s,a,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const OV=jy("==",yV,vU),IV=jy("!=",vV,wV),kV=jy("<",CV,MV),TV=jy(">",_V,SV),PV=jy("<=",bV,EV),RV=jy(">=",xV,BV);let _U=class bU{constructor(e,t,r){this.type=hx,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Qo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Qo);if(!s)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,as),!a)?null:new bU(i,s,a)}evaluate(e){return new YB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},DV=class xU{constructor(e,t,r,i,s){this.type=as,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Dr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,as),!s))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,as),!a))return null;let o=null;if(i["min-fraction-digits"]&&(o=t.parse(i["min-fraction-digits"],1,Dr),!o))return null;let d=null;return i["max-fraction-digits"]&&(d=t.parse(i["max-fraction-digits"],1,Dr),!d)?null:new xU(r,s,a,o,d)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},KV=class wU{constructor(e){this.type=fx,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let a=1;a<=e.length-1;++a){const o=e[a];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let d=null;if(o["font-scale"]&&(d=t.parse(o["font-scale"],1,Dr),!d))return null;let g=null;if(o["text-font"]&&(g=t.parse(o["text-font"],1,Xh(as)),!g))return null;let b=null;if(o["text-color"]&&(b=t.parse(o["text-color"],1,rm),!b))return null;let E=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!iV.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(E=t.parse(o["vertical-align"],1,as),!E)return null}const S=i[i.length-1];S.scale=d,S.font=g,S.textColor=b,S.verticalAlign=E}else{const d=t.parse(e[a],1,Yo);if(!d)return null;const g=d.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:d,scale:null,font:null,textColor:null,verticalAlign:null})}}return new wU(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return QA(i)===qC?new b6("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new b6(Jv(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new zy(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},FV=class MU{constructor(e){this.type=qC,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,as);return r?new MU(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Qg.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}},LV=class SU{constructor(e){this.type=Dr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${eu(r.type)} instead.`):new SU(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new sA(`Expected value to be of type string or array, but found ${eu(QA(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const im=8192;function UV(n,e){const t=zV(n[0]),r=NV(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*im),Math.round(r*i*im)]}function $B(n,e){const t=Math.pow(2,e.z),r=(n[0]/im+e.x)/t,i=(n[1]/im+e.y)/t;return[jV(r),WV(i)]}function zV(n){return(180+n)/360}function jV(n){return n*360-180}function NV(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function WV(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function YC(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function pC(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function GV(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function QV(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],a=n[1]-t[1];return r*a-s*i===0&&r*s<=0&&i*a<=0}function yx(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return VV(s,i)===0?!1:!!(b7(n,e,t,r)&&b7(t,r,n,e))}function qV(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(yx(n,e,r[i],r[i+1]))return!0;return!1}function Ny(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(QV(n,i[s],i[s+1]))return t;GV(n,i[s],i[s+1])&&(r=!r)}return r}function YV(n,e){for(const t of e)if(Ny(n,t))return!0;return!1}function EU(n,e){for(const t of n)if(!Ny(t,e))return!1;for(let t=0;t<n.length-1;++t)if(qV(n[t],n[t+1],e))return!1;return!0}function $V(n,e){for(const t of e)if(EU(n,t))return!0;return!1}function VV(n,e){return n[0]*e[1]-n[1]*e[0]}function b7(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],a=e[0]-t[0],o=e[1]-t[1],d=r[0]-t[0],g=r[1]-t[1],b=i*g-d*s,E=a*g-d*o;return b>0&&E<0||b<0&&E>0}function VB(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let a=0;a<n[i].length;a++){const o=UV(n[i][a],t);YC(e,o),s.push(o)}r.push(s)}return r}function BU(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=VB(n[i],e,t);r.push(s)}return r}function OU(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}YC(e,n)}function HV(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function x7(n,e,t,r){const i=Math.pow(2,r.z)*im,s=[r.x*im,r.y*im],a=[];for(const o of n)for(const d of o){const g=[d.x+s[0],d.y+s[1]];OU(g,e,t,i),a.push(g)}return a}function w7(n,e,t,r){const i=Math.pow(2,r.z)*im,s=[r.x*im,r.y*im],a=[];for(const o of n){const d=[];for(const g of o){const b=[g.x+s[0],g.y+s[1]];YC(e,b),d.push(b)}a.push(d)}if(e[2]-e[0]<=i/2){HV(e);for(const o of a)for(const d of o)OU(d,e,t,i)}return a}function ZV(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=VB(e.coordinates,r,i),a=x7(n.geometry(),t,r,i);if(!pC(t,r))return!1;for(const o of a)if(!Ny(o,s))return!1}if(e.type==="MultiPolygon"){const s=BU(e.coordinates,r,i),a=x7(n.geometry(),t,r,i);if(!pC(t,r))return!1;for(const o of a)if(!YV(o,s))return!1}return!0}function XV(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=VB(e.coordinates,r,i),a=w7(n.geometry(),t,r,i);if(!pC(t,r))return!1;for(const o of a)if(!EU(o,s))return!1}if(e.type==="MultiPolygon"){const s=BU(e.coordinates,r,i),a=w7(n.geometry(),t,r,i);if(!pC(t,r))return!1;for(const o of a)if(!$V(o,s))return!1}return!0}let HB=class Db{constructor(e,t){this.type=Qo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(fC(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:a,coordinates:o}=s.geometry;a==="Polygon"&&i.push(o),a==="MultiPolygon"&&i.push(...o)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new Db(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new Db(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Db(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return ZV(e,this.geometries);if(e.geometryType()==="LineString")return XV(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}};class IU{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,a=t[s];if(r(i,a)>=0)break;t[e]=a,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let a=(e<<1)+1;const o=a+1;if(o<this.length&&r(t[o],t[a])<0&&(a=o),r(t[a],s)>=0)break;t[e]=t[a],e=a}t[e]=s}}function JV(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const a of n){const o=eH(a);o!==0&&(a.area=Math.abs(o),s===void 0&&(s=o<0),s===o<0?(i&&r.push(i),i=[a]):i.push(a))}return i&&r.push(i),r}function eH(n){let e=0;for(let t=0,r=n.length,i=r-1,s,a;t<r;i=t++)s=n[t],a=n[i],e+=(a.x-s.x)*(s.y+a.y);return e}const tH=6378.137,M7=1/298.257223563,S7=M7*(2-M7),E7=Math.PI/180;class ZB{constructor(e){const t=E7*tH*1e3,r=Math.cos(e*E7),i=1/(1-S7*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-S7)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,a,o;for(let d=0;d<e.length-1;d++){let g=e[d][0],b=e[d][1],E=this.wrap(e[d+1][0]-g)*this.kx,S=(e[d+1][1]-b)*this.ky,B=0;(E!==0||S!==0)&&(B=(this.wrap(t[0]-g)*this.kx*E+(t[1]-b)*this.ky*S)/(E*E+S*S),B>1?(g=e[d+1][0],b=e[d+1][1]):B>0&&(g+=E/this.kx*B,b+=S/this.ky*B)),E=this.wrap(t[0]-g)*this.kx,S=(t[1]-b)*this.ky;const k=E*E+S*S;k<r&&(r=k,i=g,s=b,a=d,o=B)}return{point:[i,s],index:a,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const E6=100,B6=50;function kU(n,e){return e[0]-n[0]}function n2(n){return n[1]-n[0]+1}function Hm(n,e){return n[1]>=n[0]&&n[1]<e}function O6(n,e){if(n[0]>n[1])return[null,null];const t=n2(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function I6(n,e){if(!Hm(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)YC(t,n[r]);return t}function k6(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)YC(e,r);return e}function B7(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function XB(n,e,t){if(!B7(n)||!B7(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function xg(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function JB(n,e,t,r,i){const s=Math.min(xg(n,[t,r],i),xg(e,[t,r],i)),a=Math.min(xg(t,[n,e],i),xg(r,[n,e],i));return Math.min(s,a)}function nH(n,e,t,r,i){if(!(Hm(e,n.length)&&Hm(r,t.length)))return 1/0;let a=1/0;for(let o=e[0];o<e[1];++o){const d=n[o],g=n[o+1];for(let b=r[0];b<r[1];++b){const E=t[b],S=t[b+1];if(yx(d,g,E,S))return 0;a=Math.min(a,JB(d,g,E,S,i))}}return a}function rH(n,e,t,r,i){if(!(Hm(e,n.length)&&Hm(r,t.length)))return NaN;let a=1/0;for(let o=e[0];o<=e[1];++o)for(let d=r[0];d<=r[1];++d)if(a=Math.min(a,i.distance(n[o],t[d])),a===0)return a;return a}function iH(n,e,t){if(Ny(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],a=i[i.length-1];if(s!==a&&(r=Math.min(r,xg(n,[a,s],t)),r===0))return r;const o=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,o.point)),r===0)return r}return r}function oH(n,e,t,r){if(!Hm(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(Ny(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const a=n[s],o=n[s+1];for(const d of t)for(let g=0,b=d.length,E=b-1;g<b;E=g++){const S=d[E],B=d[g];if(yx(a,o,S,B))return 0;i=Math.min(i,JB(a,o,S,B,r))}}return i}function O7(n,e){for(const t of n)for(const r of t)if(Ny(r,e,!0))return!0;return!1}function sH(n,e,t,r=1/0){const i=k6(n),s=k6(e);if(r!==1/0&&XB(i,s,t)>=r)return r;if(pC(i,s)){if(O7(n,e))return 0}else if(O7(e,n))return 0;let a=1/0;for(const o of n)for(let d=0,g=o.length,b=g-1;d<g;b=d++){const E=o[b],S=o[d];for(const B of e)for(let k=0,z=B.length,j=z-1;k<z;j=k++){const Y=B[j],q=B[k];if(yx(E,S,Y,q))return 0;a=Math.min(a,JB(E,S,Y,q,t))}}return a}function I7(n,e,t,r,i,s){if(!s)return;const a=XB(I6(r,s),i,t);a<e&&n.push([a,s,[0,0]])}function H_(n,e,t,r,i,s,a){if(!s||!a)return;const o=XB(I6(r,s),I6(i,a),t);o<e&&n.push([o,s,a])}function r2(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const a=new IU([[0,[0,n.length-1],[0,0]]],kU),o=k6(t);for(;a.length>0;){const d=a.pop();if(d[0]>=s)continue;const g=d[1],b=e?B6:E6;if(n2(g)<=b){if(!Hm(g,n.length))return NaN;if(e){const E=oH(n,g,t,r);if(isNaN(E)||E===0)return E;s=Math.min(s,E)}else for(let E=g[0];E<=g[1];++E){const S=iH(n[E],t,r);if(s=Math.min(s,S),s===0)return 0}}else{const E=O6(g,e);I7(a,s,r,n,o,E[0]),I7(a,s,r,n,o,E[1])}}return s}function i2(n,e,t,r,i,s=1/0){let a=Math.min(s,i.distance(n[0],t[0]));if(a===0)return a;const o=new IU([[0,[0,n.length-1],[0,t.length-1]]],kU);for(;o.length>0;){const d=o.pop();if(d[0]>=a)continue;const g=d[1],b=d[2],E=e?B6:E6,S=r?B6:E6;if(n2(g)<=E&&n2(b)<=S){if(!Hm(g,n.length)&&Hm(b,t.length))return NaN;let B;if(e&&r)B=nH(n,g,t,b,i),a=Math.min(a,B);else if(e&&!r){const k=n.slice(g[0],g[1]+1);for(let z=b[0];z<=b[1];++z)if(B=xg(t[z],k,i),a=Math.min(a,B),a===0)return a}else if(!e&&r){const k=t.slice(b[0],b[1]+1);for(let z=g[0];z<=g[1];++z)if(B=xg(n[z],k,i),a=Math.min(a,B),a===0)return a}else B=rH(n,g,t,b,i),a=Math.min(a,B)}else{const B=O6(g,e),k=O6(b,r);H_(o,a,i,n,t,B[0],k[0]),H_(o,a,i,n,t,B[0],k[1]),H_(o,a,i,n,t,B[1],k[0]),H_(o,a,i,n,t,B[1],k[1])}}return a}function aH(n,e){const t=n.geometry(),r=t.flat().map(a=>$B([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new ZB(r[0][1]);let s=1/0;for(const a of e){switch(a.type){case"Point":s=Math.min(s,i2(r,!1,[a.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,i2(r,!1,a.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,r2(r,!1,a.coordinates,i,s));break}if(s===0)return s}return s}function lH(n,e){const t=n.geometry(),r=t.flat().map(a=>$B([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new ZB(r[0][1]);let s=1/0;for(const a of e){switch(a.type){case"Point":s=Math.min(s,i2(r,!0,[a.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,i2(r,!0,a.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,r2(r,!0,a.coordinates,i,s));break}if(s===0)return s}return s}function uH(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=JV(t).map(a=>a.map(o=>o.map(d=>$B([d.x,d.y],n.canonical)))),i=new ZB(r[0][0][0][1]);let s=1/0;for(const a of e)for(const o of r){switch(a.type){case"Point":s=Math.min(s,r2([a.coordinates],!1,o,i,s));break;case"LineString":s=Math.min(s,r2(a.coordinates,!0,o,i,s));break;case"Polygon":s=Math.min(s,sH(o,a.coordinates,i,s));break}if(s===0)return s}return s}function f4(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class kg{constructor(e,t){this.type=Dr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(fC(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new kg(r,r.features.map(i=>f4(i.geometry)).flat());if(r.type==="Feature")return new kg(r,f4(r.geometry));if("type"in r&&"coordinates"in r)return new kg(r,f4(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return aH(e,this.geometries);if(e.geometryType()==="LineString")return lH(e,this.geometries);if(e.geometryType()==="Polygon")return uH(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const e8={"==":OV,"!=":IV,">":TV,"<":kV,">=":RV,"<=":PV,array:Nm,at:aV,boolean:Nm,case:cV,coalesce:yU,collator:_U,format:KV,image:FV,in:lV,"index-of":uV,interpolate:Qm,"interpolate-hcl":Qm,"interpolate-lab":Qm,length:LV,let:lU,literal:t2,match:AV,number:Nm,"number-format":DV,object:Nm,slice:dV,step:mU,string:Nm,"to-boolean":ty,"to-color":ty,"to-number":ty,"to-string":ty,var:AU,within:HB,distance:kg};let Wy=class Tv{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=Tv.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let d=null;for(const[g,b]of o){d=new sU(t.registry,o2,t.path,null,t.scope);const E=[];let S=!1;for(let B=1;B<e.length;B++){const k=e[B],z=Array.isArray(g)?g[B-1]:g.type,j=d.parse(k,1+E.length,z);if(!j){S=!0;break}E.push(j)}if(!S){if(Array.isArray(g)&&g.length!==E.length){d.error(`Expected ${g.length} arguments, but found ${E.length} instead.`);continue}for(let B=0;B<E.length;B++){const k=Array.isArray(g)?g[B]:g.type,z=E[B];d.concat(B+1).checkSubtype(k,z.type)}if(d.errors.length===0)return new Tv(r,s,b,E)}}if(o.length===1)t.errors.push(...d.errors);else{const b=(o.length?o:a).map(([S])=>cH(S)).join(" | "),E=[];for(let S=1;S<e.length;S++){const B=t.parse(e[S],1+E.length);if(!B)return null;E.push(eu(B.type))}t.error(`Expected arguments of type ${b}, but found (${E.join(", ")}) instead.`)}return null}static register(e,t){Tv.definitions=t;for(const r in t)e[r]=Tv}};function k7(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,a=tU(e,t,r,s);if(a)throw new sA(a);return new Nl(e/255,t/255,r/255,s,!1)}function T7(n,e){return n in e}function p4(n,e){const t=e[n];return typeof t>"u"?null:t}function AH(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function ag(n){return{type:n}}Wy.register(e8,{error:[Y$,[as],(n,[e])=>{throw new sA(e.evaluate(n))}],typeof:[as,[Yo],(n,[e])=>eu(QA(e.evaluate(n)))],"to-rgba":[Xh(Dr,4),[rm],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[rm,[Dr,Dr,Dr],k7],rgba:[rm,[Dr,Dr,Dr,Dr],k7],has:{type:Qo,overloads:[[[as],(n,[e])=>T7(e.evaluate(n),n.properties())],[[as,cy],(n,[e,t])=>T7(e.evaluate(n),t.evaluate(n))]]},get:{type:Yo,overloads:[[[as],(n,[e])=>p4(e.evaluate(n),n.properties())],[[as,cy],(n,[e,t])=>p4(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Yo,[as],(n,[e])=>p4(e.evaluate(n),n.featureState||{})],properties:[cy,[],n=>n.properties()],"geometry-type":[as,[],n=>n.geometryType()],id:[Yo,[],n=>n.id()],zoom:[Dr,[],n=>n.globals.zoom],"heatmap-density":[Dr,[],n=>n.globals.heatmapDensity||0],"line-progress":[Dr,[],n=>n.globals.lineProgress||0],accumulated:[Yo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Dr,ag(Dr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Dr,ag(Dr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Dr,overloads:[[[Dr,Dr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Dr],(n,[e])=>-e.evaluate(n)]]},"/":[Dr,[Dr,Dr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Dr,[Dr,Dr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Dr,[],()=>Math.LN2],pi:[Dr,[],()=>Math.PI],e:[Dr,[],()=>Math.E],"^":[Dr,[Dr,Dr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Dr,[Dr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Dr,[Dr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Dr,[Dr],(n,[e])=>Math.log(e.evaluate(n))],log2:[Dr,[Dr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Dr,[Dr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Dr,[Dr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Dr,[Dr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Dr,[Dr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Dr,[Dr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Dr,[Dr],(n,[e])=>Math.atan(e.evaluate(n))],min:[Dr,ag(Dr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Dr,ag(Dr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Dr,[Dr],(n,[e])=>Math.abs(e.evaluate(n))],round:[Dr,[Dr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Dr,[Dr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Dr,[Dr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Qo,[as,Yo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Qo,[Yo],(n,[e])=>n.id()===e.value],"filter-type-==":[Qo,[as],(n,[e])=>n.geometryType()===e.value],"filter-<":[Qo,[as,Yo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Qo,[Yo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[Qo,[as,Yo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[Qo,[Yo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[Qo,[as,Yo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Qo,[Yo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[Qo,[as,Yo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Qo,[Yo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[Qo,[Yo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Qo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Qo,[Xh(as)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Qo,[Xh(Yo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Qo,[as,Xh(Yo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Qo,[as,Xh(Yo)],(n,[e,t])=>AH(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Qo,overloads:[[[Qo,Qo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[ag(Qo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Qo,overloads:[[[Qo,Qo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[ag(Qo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Qo,[Qo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Qo,[as],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[as,[as],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[as,[as],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[as,ag(Yo),(n,e)=>e.map(t=>Jv(t.evaluate(n))).join("")],"resolved-locale":[as,[hx],(n,[e])=>e.evaluate(n).resolvedLocale()]});function cH(n){return Array.isArray(n)?`(${n.map(eu).join(", ")})`:`(${eu(n.type)}...)`}function o2(n){if(n instanceof AU)return o2(n.boundExpression);if(n instanceof Wy&&n.name==="error")return!1;if(n instanceof _U)return!1;if(n instanceof HB)return!1;if(n instanceof kg)return!1;const e=n instanceof ty||n instanceof Nm;let t=!0;return n.eachChild(r=>{e?t=t&&o2(r):t=t&&r instanceof t2}),t?vx(n)&&Cx(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function vx(n){if(n instanceof Wy){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof HB||n instanceof kg)return!1;let e=!0;return n.eachChild(t=>{e&&!vx(t)&&(e=!1)}),e}function mC(n){if(n instanceof Wy&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!mC(t)&&(e=!1)}),e}function Cx(n,e){if(n instanceof Wy&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!Cx(r,e)&&(t=!1)}),t}function T6(n){return{result:"success",value:n}}function q1(n){return{result:"error",value:n}}function s2(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function TU(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function t8(n){return!!n.expression&&n.expression.interpolated}function Ws(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function $C(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function dH(n){return n}function n8(n,e){const t=e.type==="color",r=n.stops&&typeof n.stops[0][0]=="object",i=r||n.property!==void 0,s=r||!i,a=n.type||(t8(e)?"exponential":"interval");if(t||e.type==="padding"){const b=t?Nl.parse:$d.parse;n=Ey({},n),n.stops&&(n.stops=n.stops.map(E=>[E[0],b(E[1])])),n.default?n.default=b(n.default):n.default=b(e.default)}if(n.colorSpace&&!rV(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);let o,d,g;if(a==="exponential")o=P7;else if(a==="interval")o=fH;else if(a==="categorical"){o=hH,d=Object.create(null);for(const b of n.stops)d[b[0]]=b[1];g=typeof n.stops[0][0]}else if(a==="identity")o=pH;else throw new Error(`Unknown function type "${a}"`);if(r){const b={},E=[];for(let k=0;k<n.stops.length;k++){const z=n.stops[k],j=z[0].zoom;b[j]===void 0&&(b[j]={zoom:j,type:n.type,property:n.property,default:n.default,stops:[]},E.push(j)),b[j].stops.push([z[0].value,z[1]])}const S=[];for(const k of E)S.push([b[k].zoom,n8(b[k],e)]);const B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:Qm.interpolationFactor.bind(void 0,B),zoomStops:S.map(k=>k[0]),evaluate({zoom:k},z){return P7({stops:S,base:n.base},e,k).evaluate(k,z)}}}else if(s){const b=a==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:Qm.interpolationFactor.bind(void 0,b),zoomStops:n.stops.map(E=>E[0]),evaluate:({zoom:E})=>o(n,e,E,d,g)}}else return{kind:"source",evaluate(b,E){const S=E&&E.properties?E.properties[n.property]:void 0;return S===void 0?VC(n.default,e.default):o(n,e,S,d,g)}}}function VC(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function hH(n,e,t,r,i){const s=typeof t===i?r[t]:void 0;return VC(s,n.default,e.default)}function fH(n,e,t){if(Ws(t)!=="number")return VC(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=gx(n.stops.map(s=>s[0]),t);return n.stops[i][1]}function P7(n,e,t){const r=n.base!==void 0?n.base:1;if(Ws(t)!=="number")return VC(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const s=gx(n.stops.map(b=>b[0]),t),a=mH(t,r,n.stops[s][0],n.stops[s+1][0]),o=n.stops[s][1],d=n.stops[s+1][1],g=gV[e.type]||dH;return typeof o.evaluate=="function"?{evaluate(...b){const E=o.evaluate.apply(void 0,b),S=d.evaluate.apply(void 0,b);if(!(E===void 0||S===void 0))return g(E,S,a,n.colorSpace)}}:g(o,d,a,n.colorSpace)}function pH(n,e,t){switch(e.type){case"color":t=Nl.parse(t);break;case"formatted":t=zy.fromString(t.toString());break;case"resolvedImage":t=Qg.fromString(t.toString());break;case"padding":t=$d.parse(t);break;default:Ws(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return VC(t,n.default,e.default)}function mH(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}let PU=class{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new oU,this._defaultValue=t?CH(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new sA(`Expected value to be one of ${Object.keys(this._enumValues).map(d=>JSON.stringify(d)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}};function HC(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in e8}function r8(n,e){const t=new sU(e8,o2,[],e?vH(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?T6(new PU(r,e)):q1(t.errors)}let P6=class{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!mC(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}},R6=class{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!mC(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}interpolationFactor(e,t,r){return this.interpolationType?Qm.interpolationFactor(this.interpolationType,e,t,r):0}};function gH(n){return n._styleExpression!==void 0}function i8(n,e){const t=r8(n,e);if(t.result==="error")return t;const r=t.value.expression,i=vx(r);if(!i&&!s2(e))return q1([new Zp("","data expressions not supported")]);const s=Cx(r,["zoom"]);if(!s&&!TU(e))return q1([new Zp("","zoom expressions not supported")]);const a=Kb(r);if(!a&&!s)return q1([new Zp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Zp)return q1([a]);if(a instanceof Qm&&!t8(e))return q1([new Zp("",'"interpolate" expressions cannot be used with this property')]);if(!a)return T6(i?new P6("constant",t.value):new P6("source",t.value));const o=a instanceof Qm?a.interpolation:void 0;return T6(i?new R6("camera",t.value,a.labels,o):new R6("composite",t.value,a.labels,o))}class _x{constructor(e,t){this._parameters=e,this._specification=t,Ey(this,n8(this._parameters,this._specification))}static deserialize(e){return new _x(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function yH(n,e){if($C(n))return new _x(n,e);if(HC(n)){const t=i8(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=Nl.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=$d.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=Rf.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=Of.parse(n)),{kind:"constant",evaluate:()=>t}}}function Kb(n){let e=null;if(n instanceof lU)e=Kb(n.result);else if(n instanceof yU){for(const t of n.args)if(e=Kb(t),e)break}else(n instanceof mU||n instanceof Qm)&&n.input instanceof Wy&&n.input.name==="zoom"&&(e=n);return e instanceof Zp||n.eachChild(t=>{const r=Kb(t);r instanceof Zp?e=r:!e&&r?e=new Zp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Zp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function vH(n){const e={color:rm,string:as,number:Dr,enum:as,boolean:Qo,formatted:fx,padding:px,projectionDefinition:dx,resolvedImage:qC,variableAnchorOffsetCollection:mx};return n.type==="array"?Xh(e[n.value]||Yo,n.length):e[n.type]}function CH(n){return n.type==="color"&&$C(n.default)?new Nl(0,0,0,0):n.type==="color"?Nl.parse(n.default)||null:n.type==="padding"?$d.parse(n.default)||null:n.type==="variableAnchorOffsetCollection"?Rf.parse(n.default)||null:n.type==="projectionDefinition"?Of.parse(n.default)||null:n.default===void 0?null:n.default}function bx(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!bx(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function eC(n,e={}){if(bx(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,s]=n;return bH(i,s,r,e)}case"any":{const[,...i]=t;return["any",...i.map(a=>{const o={},d=eC(a,o),g=_H(o);return g===!0?d:["case",g,d,!1]})]}case"all":{const[,...i]=t,s=i.map(a=>eC(a,e));return s.length>1?["all",...s]:s[0]}case"none":{const[,...i]=t;return["!",eC(["any",...i],{})]}case"in":{const[,i,...s]=t;return R7(i,s)}case"!in":{const[,i,...s]=t;return R7(i,s,!0)}case"has":return D7(t[1]);case"!has":return["!",D7(t[1])];default:return!0}}function _H(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function bH(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const s=typeof e;r[n]=s}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function R7(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const s=typeof e[0];for(const a of e)if(typeof a!==s){i=!1;break}if(i&&(s==="string"||s==="number")){const a=e.sort().filter((o,d)=>d===0||e[d-1]!==o);return["match",r,a,!t,t]}return t?["all",...e.map(a=>["!=",r,a])]:["any",...e.map(a=>["==",r,a])]}function D7(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function gC(n){return typeof n=="object"?["literal",n]:n}function RU(n,e){let t=n.stops;if(!t)return xH(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],DU(a[1])]:[a[0],gC(a[1])]),r?wH(n,e,t):s?SH(n,e,t):D6(n,e,t)}function xH(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,gC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function o8(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function wH(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const d=t[o],g=d[0].zoom;r[g]===void 0&&(r[g]={zoom:g,type:n.type,property:n.property,default:n.default},i[g]=[],s.push(g)),i[g].push([d[0].value,d[1]])}if(a8({},e)==="exponential"){const o=[o8(n),["linear"],["zoom"]];for(const d of s){const g=D6(r[d],e,i[d]);hy(o,d,g,!1)}return o}else{const o=["step",["zoom"]];for(const d of s){const g=D6(r[d],e,i[d]);hy(o,d,g,!0)}return s8(o),o}}function MH(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function K7(n,e){const t=gC(MH(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function D6(n,e,t){const r=a8(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const a of t)s.push(["==",i,a[0]],a[1]);return s.push(K7(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const a of t)hy(s,a[0],a[1],!1);return s.push(K7(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const a of t)hy(s,a[0],a[1],!0);return s8(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,gC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,a=[o8(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)hy(a,o[0],o[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,gC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function SH(n,e,t,r=["zoom"]){const i=a8(n,e);let s,a=!1;if(i==="interval")s=["step",r],a=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[o8(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)hy(s,o[0],o[1],a);return s8(s),s}function s8(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function hy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function a8(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function DU(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function EH(n){for(let e=0;e<Ns.layout.length;e++)for(const t in Ns[Ns.layout[e]])if(t===n)return Ns[Ns.layout[e]][t];for(let e=0;e<Ns.paint.length;e++)for(const t in Ns[Ns.paint[e]])if(t===n)return Ns[Ns.paint[e]][t];return null}function BH(n,e){for(const t in n.sources)e(n.sources[t])}function tC(n,e){for(const t of n.layers)e(t)}function l8(n,e,t){function r(i,s){const a=i[s];a&&Object.keys(a).forEach(o=>{t({path:[i.id,s,o],key:o,value:a[o],reference:EH(o),set(d){a[o]=d}})})}tC(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function KU(n){const e=n.key,t=n.value;return t?[new Or(e,t,"constants have been deprecated as of v8")]:[]}function Pu(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Fg(n){if(Array.isArray(n))return n.map(Fg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Fg(n[t]);return e}return Pu(n)}function kf(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},s=n.style,a=n.styleSpec,o=n.validateSpec;let d=[];const g=Ws(t);if(g!=="object")return[new Or(e,t,`object expected, ${g} found`)];for(const b in t){const E=b.split(".")[0],S=r[E]||r["*"];let B;if(i[E])B=i[E];else if(r[E])B=o;else if(i["*"])B=i["*"];else if(r["*"])B=o;else{d.push(new Or(e,t[b],`unknown property "${b}"`));continue}d=d.concat(B({key:(e&&`${e}.`)+b,value:t[b],valueSpec:S,style:s,styleSpec:a,object:t,objectKey:b,validateSpec:o},t))}for(const b in r)i[b]||r[b].required&&r[b].default===void 0&&t[b]===void 0&&d.push(new Or(e,t,`missing required property "${b}"`));return d}function u8(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,s=n.styleSpec,a=n.key,o=n.arrayElementValidator||r;if(Ws(e)!=="array")return[new Or(a,e,`array expected, ${Ws(e)} found`)];if(t.length&&e.length!==t.length)return[new Or(a,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Or(a,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let d={type:t.value,values:t.values};s.$version<7&&(d.function=t.function),Ws(t.value)==="object"&&(d=t.value);let g=[];for(let b=0;b<e.length;b++)g=g.concat(o({array:e,arrayIndex:b,value:e[b],valueSpec:d,validateSpec:n.validateSpec,style:i,styleSpec:s,key:`${a}[${b}]`}));return g}function A8(n){const e=n.key,t=n.value,r=n.valueSpec;let i=Ws(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new Or(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new Or(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new Or(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function FU(n){const e=n.valueSpec,t=Pu(n.value.type);let r,i={},s,a;const o=t!=="categorical"&&n.value.property===void 0,d=!o,g=Ws(n.value.stops)==="array"&&Ws(n.value.stops[0])==="array"&&Ws(n.value.stops[0][0])==="object",b=kf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:E,default:k}});return t==="identity"&&o&&b.push(new Or(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&b.push(new Or(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!t8(n.valueSpec)&&b.push(new Or(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(d&&!s2(n.valueSpec)?b.push(new Or(n.key,n.value,"property functions not supported")):o&&!TU(n.valueSpec)&&b.push(new Or(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||g)&&n.value.property===void 0&&b.push(new Or(n.key,n.value,'"property" property is required')),b;function E(z){if(t==="identity")return[new Or(z.key,z.value,'identity function may not have a "stops" property')];let j=[];const Y=z.value;return j=j.concat(u8({key:z.key,value:Y,valueSpec:z.valueSpec,validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec,arrayElementValidator:S})),Ws(Y)==="array"&&Y.length===0&&j.push(new Or(z.key,Y,"array must have at least one stop")),j}function S(z){let j=[];const Y=z.value,q=z.key;if(Ws(Y)!=="array")return[new Or(q,Y,`array expected, ${Ws(Y)} found`)];if(Y.length!==2)return[new Or(q,Y,`array length 2 expected, length ${Y.length} found`)];if(g){if(Ws(Y[0])!=="object")return[new Or(q,Y,`object expected, ${Ws(Y[0])} found`)];if(Y[0].zoom===void 0)return[new Or(q,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new Or(q,Y,"object stop key must have value")];if(a&&a>Pu(Y[0].zoom))return[new Or(q,Y[0].zoom,"stop zoom values must appear in ascending order")];Pu(Y[0].zoom)!==a&&(a=Pu(Y[0].zoom),s=void 0,i={}),j=j.concat(kf({key:`${q}[0]`,value:Y[0],valueSpec:{zoom:{}},validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec,objectElementValidators:{zoom:A8,value:B}}))}else j=j.concat(B({key:`${q}[0]`,value:Y[0],valueSpec:{},validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec},Y));return HC(Fg(Y[1]))?j.concat([new Or(`${q}[1]`,Y[1],"expressions are not allowed in function stops.")]):j.concat(z.validateSpec({key:`${q}[1]`,value:Y[1],valueSpec:e,validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec}))}function B(z,j){const Y=Ws(z.value),q=Pu(z.value),ie=z.value!==null?z.value:j;if(!r)r=Y;else if(Y!==r)return[new Or(z.key,ie,`${Y} stop domain type must match previous stop domain type ${r}`)];if(Y!=="number"&&Y!=="string"&&Y!=="boolean")return[new Or(z.key,ie,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&t!=="categorical"){let J=`number expected, ${Y} found`;return s2(e)&&t===void 0&&(J+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Or(z.key,ie,J)]}return t==="categorical"&&Y==="number"&&(!isFinite(q)||Math.floor(q)!==q)?[new Or(z.key,ie,`integer expected, found ${q}`)]:t!=="categorical"&&Y==="number"&&s!==void 0&&q<s?[new Or(z.key,ie,"stop domain values must appear in ascending order")]:(s=q,t==="categorical"&&q in i?[new Or(z.key,ie,"stop domain values must be unique")]:(i[q]=!0,[]))}function k(z){return z.validateSpec({key:z.key,value:z.value,valueSpec:e,validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec})}}function By(n){const e=(n.expressionContext==="property"?i8:r8)(Fg(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new Or(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Or(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!mC(t))return[new Or(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!mC(t))return[new Or(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Cx(t,["zoom","feature-state"]))return[new Or(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!vx(t))return[new Or(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function OH(n){const e=n.value,t=n.key,r=Ws(e);return r!=="boolean"?[new Or(t,e,`boolean expected, ${r} found`)]:[]}function IH(n){const e=n.key,t=n.value,r=Ws(t);return r!=="string"?[new Or(e,t,`color expected, ${r} found`)]:Nl.parse(String(t))?[]:[new Or(e,t,`color expected, "${t}" found`)]}function yC(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(Pu(t))===-1&&i.push(new Or(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(Pu(t))===-1&&i.push(new Or(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function c8(n){return bx(Fg(n.value))?By(Ey({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):LU(n)}function LU(n){const e=n.value,t=n.key;if(Ws(e)!=="array")return[new Or(t,e,`array expected, ${Ws(e)} found`)];const r=n.styleSpec;let i,s=[];if(e.length<1)return[new Or(t,e,"filter array must have at least 1 element")];switch(s=s.concat(yC({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),Pu(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Pu(e[1])==="$type"&&s.push(new Or(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&s.push(new Or(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Ws(e[1]),i!=="string"&&s.push(new Or(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=Ws(e[a]),Pu(e[1])==="$type"?s=s.concat(yC({key:`${t}[${a}]`,value:e[a],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&s.push(new Or(`${t}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let a=1;a<e.length;a++)s=s.concat(LU({key:`${t}[${a}]`,value:e[a],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=Ws(e[1]),e.length!==2?s.push(new Or(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&s.push(new Or(`${t}[1]`,e[1],`string expected, ${i} found`));break}return s}function UU(n,e){const t=n.key,r=n.validateSpec,i=n.style,s=n.styleSpec,a=n.value,o=n.objectKey,d=s[`${e}_${n.layerType}`];if(!d)return[];const g=o.match(/^(.*)-transition$/);if(e==="paint"&&g&&d[g[1]]&&d[g[1]].transition)return r({key:t,value:a,valueSpec:s.transition,style:i,styleSpec:s});const b=n.valueSpec||d[o];if(!b)return[new Or(t,a,`unknown property "${o}"`)];let E;if(Ws(a)==="string"&&s2(b)&&!b.tokens&&(E=/^{([^}]+)}$/.exec(a)))return[new Or(t,a,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(E[1])} }\`.`)];const S=[];return n.layerType==="symbol"&&(o==="text-field"&&i&&!i.glyphs&&S.push(new Or(t,a,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&$C(Fg(a))&&Pu(a.type)==="identity"&&S.push(new Or(t,a,'"text-font" does not support identity functions'))),S.concat(r({key:n.key,value:a,valueSpec:b,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function zU(n){return UU(n,"paint")}function jU(n){return UU(n,"layout")}function NU(n){let e=[];const t=n.value,r=n.key,i=n.style,s=n.styleSpec;!t.type&&!t.ref&&e.push(new Or(r,t,'either "type" or "ref" is required'));let a=Pu(t.type);const o=Pu(t.ref);if(t.id){const d=Pu(t.id);for(let g=0;g<n.arrayIndex;g++){const b=i.layers[g];Pu(b.id)===d&&e.push(new Or(r,t.id,`duplicate layer id "${t.id}", previously used at line ${b.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(g=>{g in t&&e.push(new Or(r,t[g],`"${g}" is prohibited for ref layers`))});let d;i.layers.forEach(g=>{Pu(g.id)===o&&(d=g)}),d?d.ref?e.push(new Or(r,t.ref,"ref cannot reference another ref layer")):a=Pu(d.type):e.push(new Or(r,t.ref,`ref layer "${o}" not found`))}else if(a!=="background")if(!t.source)e.push(new Or(r,t,'missing required property "source"'));else{const d=i.sources&&i.sources[t.source],g=d&&Pu(d.type);d?g==="vector"&&a==="raster"?e.push(new Or(r,t.source,`layer "${t.id}" requires a raster source`)):g!=="raster-dem"&&a==="hillshade"?e.push(new Or(r,t.source,`layer "${t.id}" requires a raster-dem source`)):g==="raster"&&a!=="raster"?e.push(new Or(r,t.source,`layer "${t.id}" requires a vector source`)):g==="vector"&&!t["source-layer"]?e.push(new Or(r,t,`layer "${t.id}" must specify a "source-layer"`)):g==="raster-dem"&&a!=="hillshade"?e.push(new Or(r,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):a==="line"&&t.paint&&t.paint["line-gradient"]&&(g!=="geojson"||!d.lineMetrics)&&e.push(new Or(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Or(r,t.source,`source "${t.source}" not found`))}return e=e.concat(kf({key:r,value:t,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:c8,layout(d){return kf({layer:t,key:d.key,value:d.value,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*"(g){return jU(Ey({layerType:a},g))}}})},paint(d){return kf({layer:t,key:d.key,value:d.value,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*"(g){return zU(Ey({layerType:a},g))}}})}}})),e}function Lg(n){const e=n.value,t=n.key,r=Ws(e);return r!=="string"?[new Or(t,e,`string expected, ${r} found`)]:[]}function kH(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,s=i.source_raster_dem,a=n.style;let o=[];const d=Ws(r);if(r===void 0)return o;if(d!=="object")return o.push(new Or("source_raster_dem",r,`object expected, ${d} found`)),o;const b=Pu(r.encoding)==="custom",E=["redFactor","greenFactor","blueFactor","baseShift"],S=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const B in r)!b&&E.includes(B)?o.push(new Or(B,r[B],`In "${t}": "${B}" is only valid when "encoding" is set to "custom". ${S} encoding found`)):s[B]?o=o.concat(n.validateSpec({key:B,value:r[B],valueSpec:s[B],validateSpec:n.validateSpec,style:a,styleSpec:i})):o.push(new Or(B,r[B],`unknown property "${B}"`));return o}const F7={promoteId:TH};function WU(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,s=n.validateSpec;if(!e.type)return[new Or(t,e,'"type" is required')];const a=Pu(e.type);let o;switch(a){case"vector":case"raster":return o=kf({key:t,value:e,valueSpec:r[`source_${a.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:F7,validateSpec:s}),o;case"raster-dem":return o=kH({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:s}),o;case"geojson":if(o=kf({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:s,objectElementValidators:F7}),e.cluster)for(const d in e.clusterProperties){const[g,b]=e.clusterProperties[d],E=typeof g=="string"?[g,["accumulated"],["get",d]]:g;o.push(...By({key:`${t}.${d}.map`,value:b,validateSpec:s,expressionContext:"cluster-map"})),o.push(...By({key:`${t}.${d}.reduce`,value:E,validateSpec:s,expressionContext:"cluster-reduce"}))}return o;case"video":return kf({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:s,styleSpec:r});case"image":return kf({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:s,styleSpec:r});case"canvas":return[new Or(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yC({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:s,styleSpec:r})}}function TH({key:n,value:e}){if(Ws(e)==="string")return Lg({key:n,value:e});{const t=[];for(const r in e)t.push(...Lg({key:`${n}.${r}`,value:e[r]}));return t}}function GU(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let s=[];const a=Ws(e);if(e===void 0)return s;if(a!=="object")return s=s.concat([new Or("light",e,`object expected, ${a} found`)]),s;for(const o in e){const d=o.match(/^(.*)-transition$/);d&&r[d[1]]&&r[d[1]].transition?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Or(o,e[o],`unknown property "${o}"`)])}return s}function QU(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,s=Ws(e);if(e===void 0)return[];if(s!=="object")return[new Or("sky",e,`object expected, ${s} found`)];let a=[];for(const o in e)r[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):a=a.concat([new Or(o,e[o],`unknown property "${o}"`)]);return a}function qU(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let s=[];const a=Ws(e);if(e===void 0)return s;if(a!=="object")return s=s.concat([new Or("terrain",e,`object expected, ${a} found`)]),s;for(const o in e)r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Or(o,e[o],`unknown property "${o}"`)]);return s}function PH(n){return Lg(n).length===0?[]:By(n)}function RH(n){return Lg(n).length===0?[]:By(n)}function DH(n){const e=n.key,t=n.value;if(Ws(t)==="array"){if(t.length<1||t.length>4)return[new Or(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let s=[];for(let a=0;a<t.length;a++)s=s.concat(n.validateSpec({key:`${e}[${a}]`,value:t[a],validateSpec:n.validateSpec,valueSpec:i}));return s}else return A8({key:e,value:t,valueSpec:{}})}function KH(n){const e=n.key,t=n.value,r=Ws(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new Or(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let a=0;a<t.length;a+=2)s=s.concat(yC({key:`${e}[${a}]`,value:t[a],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(u8({key:`${e}[${a+1}]`,value:t[a+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return s}function YU(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],s=[];for(const a in t){t[a].id&&i.includes(t[a].id)&&e.push(new Or(r,t,`all the sprites' ids must be unique, but ${t[a].id} is duplicated`)),i.push(t[a].id),t[a].url&&s.includes(t[a].url)&&e.push(new Or(r,t,`all the sprites' URLs must be unique, but ${t[a].url} is duplicated`)),s.push(t[a].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(kf({key:`${r}[${a}]`,value:t[a],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return Lg({key:r,value:t})}function FH(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,s=Ws(e);if(e===void 0)return[];if(s!=="object")return[new Or("projection",e,`object expected, ${s} found`)];let a=[];for(const o in e)r[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):a=a.concat([new Or(o,e[o],`unknown property "${o}"`)]);return a}function LH(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=Ws(t);return r==="array"&&!zH(t)&&!UH(t)?[new Or(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new Or(e,t,`projection expected, invalid type "${r}" found`)]}function UH(n){return!!["interpolate","step","literal"].includes(n[0])}function zH(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}const L7={"*"(){return[]},array:u8,boolean:OH,number:A8,color:IH,constants:KU,enum:yC,filter:c8,function:FU,layer:NU,object:kf,source:WU,light:GU,sky:QU,terrain:qU,projection:FH,projectionDefinition:LH,string:Lg,formatted:PH,resolvedImage:RH,padding:DH,variableAnchorOffsetCollection:KH,sprite:YU};function nC(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=nC,t.expression&&$C(Pu(e))?FU(n):t.expression&&HC(Fg(e))?By(n):t.type&&L7[t.type]?L7[t.type](n):kf(Ey({},n,{valueSpec:t.type?r[t.type]:t}))}function $U(n){const e=n.value,t=n.key,r=Lg(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new Or(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new Or(t,e,'"glyphs" url must include a "{range}" token'))),r}function Lf(n,e=Ns){let t=[];return t=t.concat(nC({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:nC,objectElementValidators:{glyphs:$U,"*"(){return[]}}})),n.constants&&(t=t.concat(KU({key:"constants",value:n.constants,style:n,styleSpec:e,validateSpec:nC}))),VU(t)}Lf.source=hm(dm(WU));Lf.sprite=hm(dm(YU));Lf.glyphs=hm(dm($U));Lf.light=hm(dm(GU));Lf.sky=hm(dm(QU));Lf.terrain=hm(dm(qU));Lf.layer=hm(dm(NU));Lf.filter=hm(dm(c8));Lf.paintProperty=hm(dm(zU));Lf.layoutProperty=hm(dm(jU));function dm(n){return function(e){return n({...e,validateSpec:nC})}}function VU(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function hm(n){return function(...e){return VU(n.apply(this,e))}}const jH=/("(?:[^\\"]|\\.)*")|[:,]/g;function NH(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(a,o,d){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const g=JSON.stringify(a,i);if(g===void 0)return g;const b=r-o.length-d;if(g.length<=b){const E=g.replace(jH,(S,B)=>B||`${S} `);if(E.length<=b)return E}if(i!=null&&(a=JSON.parse(g),i=void 0),typeof a=="object"&&a!==null){const E=o+t,S=[];let B=0,k,z;if(Array.isArray(a)){k="[",z="]";const{length:j}=a;for(;B<j;B++)S.push(s(a[B],E,B===j-1?0:1)||"null")}else{k="{",z="}";const j=Object.keys(a),{length:Y}=j;for(;B<Y;B++){const q=j[B],ie=`${JSON.stringify(q)}: `,J=s(a[q],E,ie.length+(B===Y-1?0:1));J!==void 0&&S.push(ie+J)}}if(S.length>0)return[k,t+S.join(`,
${E}`),z].join(`
${o}`)}return g}(n,"",0)}function U7(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function HU(n,e=2){return n=U7(n,Ns.$root),n.layers&&(n.layers=n.layers.map(t=>U7(t,Ns.layer))),NH(n,{indent:e})}function m4(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function z7(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function K6(n,e){return typeof e=="string"&&e[0]==="@"?K6(n,n.constants[e]):e}function WH(n){return Array.isArray(n.stops)}function vv(n,e,t){n[t]=n[e],delete n[e]}function GH(n){n.version=8,BH(n,i=>{i.type==="video"&&i.url!==void 0&&vv(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(s=>s.reverse())}),tC(n,i=>{m4(i,s=>{s["symbol-min-distance"]!==void 0&&vv(s,"symbol-min-distance","symbol-spacing")}),z7(i,s=>{s["background-image"]!==void 0&&vv(s,"background-image","background-pattern"),s["line-image"]!==void 0&&vv(s,"line-image","line-pattern"),s["fill-image"]!==void 0&&vv(s,"fill-image","fill-pattern")})}),l8(n,{paint:!0,layout:!0},i=>{const s=K6(n,i.value);WH(s)&&s.stops.forEach(a=>{a[1]=K6(n,a[1])}),i.set(s)}),delete n.constants,tC(n,i=>{m4(i,s=>{delete s["text-max-size"],delete s["icon-max-size"]}),z7(i,s=>{s["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=s["text-size"],delete s["text-size"]),s["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=s["icon-size"],delete s["icon-size"])})});function e(i){function s(a){return a.split(",").map(o=>o.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return s(i);if(typeof i=="object")return i.stops.forEach(a=>{a[1]=s(a[1])}),i;throw new Error("unexpected font value")}tC(n,i=>{m4(i,s=>{s["text-font"]&&(s["text-font"]=e(s["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function QH(n){const e=[];return tC(n,t=>{t.filter&&(t.filter=eC(t.filter))}),l8(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:s})=>{HC(r)||(typeof r=="object"&&!Array.isArray(r)?(s(RU(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&s(DU(r)))}),n}function qH(n){return JSON.parse(YH(JSON.stringify(n)))}function YH(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,s,a,o]=r.slice(1);return[s,a]=[s,a].map(d=>d.endsWith("%")?d:`${parseFloat(d)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[i,s,a,o].filter(Boolean).join(",")})"`}return e})}function $H(n){let e=!1;if(n.version===7&&(n=GH(n),e=!0),n.version===8&&(e=!!QH(n),e=!0),l8(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(qH(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const VH={StyleExpression:PU,StylePropertyFunction:_x,ZoomConstantExpression:P6,ZoomDependentExpression:R6,createExpression:r8,createPropertyExpression:i8,isExpression:HC,isExpressionFilter:bx,isZoomExpression:gH,normalizePropertyExpression:yH},HH={convertFunction:RU,createFunction:n8,isFunction:$C};var xx=GC();const ZH=Xa(xx);var Fb={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.0.1/LICENSE.txt
 */var XH=Fb.exports,j7;function JH(){return j7||(j7=1,function(n,e){(function(t,r){n.exports=r()})(XH,function(){var t={},r={};function i(a,o,d){if(r[a]=d,a==="index"){var g="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",b={};return r.shared(b),r.index(t,b),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),t}}i("shared",["exports"],function(a){function o(f,u,h,v){return new(h||(h=Promise))(function(w,K){function U(re){try{X(v.next(re))}catch(de){K(de)}}function G(re){try{X(v.throw(re))}catch(de){K(de)}}function X(re){var de;re.done?w(re.value):(de=re.value,de instanceof h?de:new h(function(xe){xe(de)})).then(U,G)}X((v=v.apply(f,u||[])).next())})}function d(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var g,b;function E(){if(b)return g;function f(u,h){this.x=u,this.y=h}return b=1,g=f,f.prototype={clone:function(){return new f(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,h){return this.clone()._rotateAround(u,h)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var h=u.x-this.x,v=u.y-this.y;return h*h+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,h){return Math.atan2(this.x*h-this.y*u,this.x*u+this.y*h)},_matMult:function(u){var h=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=h,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var h=Math.cos(u),v=Math.sin(u),w=v*this.x+h*this.y;return this.x=h*this.x-v*this.y,this.y=w,this},_rotateAround:function(u,h){var v=Math.cos(u),w=Math.sin(u),K=h.y+w*(this.x-h.x)+v*(this.y-h.y);return this.x=h.x+v*(this.x-h.x)-w*(this.y-h.y),this.y=K,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(u){return u instanceof f?u:Array.isArray(u)?new f(u[0],u[1]):u},g}typeof SuppressedError=="function"&&SuppressedError;var S,B,k=d(E()),z=function(){if(B)return S;function f(u,h,v,w){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=v,this.p2y=w}return B=1,S=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,w=0;w<8;w++){var K=this.sampleCurveX(v)-u;if(Math.abs(K)<h)return v;var U=this.sampleCurveDerivativeX(v);if(Math.abs(U)<1e-6)break;v-=K/U}var G=0,X=1;for(v=u,w=0;w<20&&(K=this.sampleCurveX(v),!(Math.abs(K-u)<h));w++)u>K?G=v:X=v,v=.5*(X-G)+G;return v},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},S}(),j=d(z);let Y,q;function ie(){return Y==null&&(Y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function J(){if(q==null&&(q=!1,ie())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let v=0;v<5*5;v++){const w=4*v;u.fillStyle=`rgb(${w},${w+1},${w+2})`,u.fillRect(v%5,Math.floor(v/5),1,1)}const h=u.getImageData(0,0,5,5).data;for(let v=0;v<5*5*4;v++)if(v%4!=3&&h[v]!==v){q=!0;break}}}return q||!1}var $,te=1e-6,W=typeof Float32Array<"u"?Float32Array:Array;function oe(){var f=new W(9);return W!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function fe(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function he(){var f=new W(3);return W!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function Se(f,u,h){var v=new W(3);return v[0]=f,v[1]=u,v[2]=h,v}function pe(f,u,h){var v=u[0],w=u[1],K=u[2],U=u[3];return f[0]=h[0]*v+h[4]*w+h[8]*K+h[12]*U,f[1]=h[1]*v+h[5]*w+h[9]*K+h[13]*U,f[2]=h[2]*v+h[6]*w+h[10]*K+h[14]*U,f[3]=h[3]*v+h[7]*w+h[11]*K+h[15]*U,f}function we(){var f=new W(4);return W!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Ke(){var f=new W(2);return W!=Float32Array&&(f[0]=0,f[1]=0),f}function ge(f,u){var h=new W(2);return h[0]=f,h[1]=u,h}Math.hypot||(Math.hypot=function(){for(var f=0,u=arguments.length;u--;)f+=arguments[u]*arguments[u];return Math.sqrt(f)}),he(),$=new W(4),W!=Float32Array&&($[0]=0,$[1]=0,$[2]=0,$[3]=0),he(),Se(1,0,0),Se(0,1,0),we(),we(),oe(),Ke();const st=8192;function Qe(f,u,h){return u*(st/(f.tileSize*Math.pow(2,h-f.tileID.overscaledZ)))}function Ze(f,u){return(f%u+u)%u}function We(f,u,h){return f*(1-h)+u*h}function Ce(f){if(f<=0)return 0;if(f>=1)return 1;const u=f*f,h=u*f;return 4*(f<.5?h:3*(f-u)+h-.75)}function Pe(f,u,h,v){const w=new j(f,u,h,v);return K=>w.solve(K)}const it=Pe(.25,.1,.25,1);function vt(f,u,h){return Math.min(h,Math.max(u,f))}function _t(f,u,h){const v=h-u,w=((f-u)%v+v)%v+u;return w===u?h:w}function ft(f,...u){for(const h of u)for(const v in h)f[v]=h[v];return f}let Dt=1;function Tt(f,u,h){const v={};for(const w in f)v[w]=u.call(this,f[w],w,f);return v}function Ue(f,u,h){const v={};for(const w in f)u.call(this,f[w],w,f)&&(v[w]=f[w]);return v}function Re(f){return Array.isArray(f)?f.map(Re):typeof f=="object"&&f?Tt(f,Re):f}const Be={};function nt(f){Be[f]||(typeof console<"u"&&console.warn(f),Be[f]=!0)}function Ct(f,u,h){return(h.y-f.y)*(u.x-f.x)>(u.y-f.y)*(h.x-f.x)}function pt(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let zt=null;function tn(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const Lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function gn(f,u,h,v,w){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const K=new VideoFrame(f,{timestamp:0});try{const U=K==null?void 0:K.format;if(!U||!U.startsWith("BGR")&&!U.startsWith("RGB"))throw new Error(`Unrecognized format ${U}`);const G=U.startsWith("BGR"),X=new Uint8ClampedArray(v*w*4);if(yield K.copyTo(X,function(re,de,xe,Fe,ze){const Ge=4*Math.max(1,0),Je=(Math.max(0,xe)-xe)*Fe*4+Ge,At=4*Fe,xt=Math.max(0,de),Wt=Math.max(0,xe);return{rect:{x:xt,y:Wt,width:Math.min(re.width,de+Fe)-xt,height:Math.min(re.height,xe+ze)-Wt},layout:[{offset:Je,stride:At}]}}(f,u,h,v,w)),G)for(let re=0;re<X.length;re+=4){const de=X[re];X[re]=X[re+2],X[re+2]=de}return X}finally{K.close()}})}let Nn,rn;function or(f){return f/Math.PI*180}const Kn="AbortError";function pn(){return new Error(Kn)}const Xn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Mr(f){return Xn.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Yn="global-dispatcher";class er extends Error{constructor(u,h,v,w){super(`AJAXError: ${h} (${u}): ${v}`),this.status=u,this.statusText=h,this.url=v,this.body=w}}const qe=()=>pt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ce=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const v=Mr(f.url);if(v)return v(f,u);if(pt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Yn},u)}if(!(/^file:/.test(h=f.url)||/^file:/.test(qe())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(v,w){return o(this,void 0,void 0,function*(){const K=new Request(v.url,{method:v.method||"GET",body:v.body,credentials:v.credentials,headers:v.headers,cache:v.cache,referrer:qe(),signal:w.signal});let U,G;v.type!=="json"||K.headers.has("Accept")||K.headers.set("Accept","application/json");try{U=yield fetch(K)}catch(re){throw new er(0,re.message,v.url,new Blob)}if(!U.ok){const re=yield U.blob();throw new er(U.status,U.statusText,v.url,re)}G=v.type==="arrayBuffer"||v.type==="image"?U.arrayBuffer():v.type==="json"?U.json():U.text();const X=yield G;if(w.signal.aborted)throw pn();return{data:X,cacheControl:U.headers.get("Cache-Control"),expires:U.headers.get("Expires")}})}(f,u);if(pt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Yn},u)}var h;return function(v,w){return new Promise((K,U)=>{var G;const X=new XMLHttpRequest;X.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(X.responseType="arraybuffer");for(const re in v.headers)X.setRequestHeader(re,v.headers[re]);v.type==="json"&&(X.responseType="text",!((G=v.headers)===null||G===void 0)&&G.Accept||X.setRequestHeader("Accept","application/json")),X.withCredentials=v.credentials==="include",X.onerror=()=>{U(new Error(X.statusText))},X.onload=()=>{if(!w.signal.aborted)if((X.status>=200&&X.status<300||X.status===0)&&X.response!==null){let re=X.response;if(v.type==="json")try{re=JSON.parse(X.response)}catch(de){return void U(de)}K({data:re,cacheControl:X.getResponseHeader("Cache-Control"),expires:X.getResponseHeader("Expires")})}else{const re=new Blob([X.response],{type:X.getResponseHeader("Content-Type")});U(new er(X.status,X.statusText,v.url,re))}},w.signal.addEventListener("abort",()=>{X.abort(),U(pn())}),X.send(v.body)})}(f,u)};function me(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),h=window.location;return u.protocol===h.protocol&&u.host===h.host}function tt(f,u,h){h[f]&&h[f].indexOf(u)!==-1||(h[f]=h[f]||[],h[f].push(u))}function Et(f,u,h){if(h&&h[f]){const v=h[f].indexOf(u);v!==-1&&h[f].splice(v,1)}}class $t{constructor(u,h={}){ft(this,h),this.type=u}}class on extends $t{constructor(u,h={}){super("error",ft({error:u},h))}}class rr{on(u,h){return this._listeners=this._listeners||{},tt(u,h,this._listeners),{unsubscribe:()=>{this.off(u,h)}}}off(u,h){return Et(u,h,this._listeners),Et(u,h,this._oneTimeListeners),this}once(u,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},tt(u,h,this._oneTimeListeners),this):new Promise(v=>this.once(u,v))}fire(u,h){typeof u=="string"&&(u=new $t(u,h||{}));const v=u.type;if(this.listens(v)){u.target=this;const w=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const G of w)G.call(this,u);const K=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const G of K)Et(v,G,this._oneTimeListeners),G.call(this,u);const U=this._eventedParent;U&&(ft(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),U.fire(u))}else u instanceof on&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,h){return this._eventedParent=u,this._eventedParentData=h,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const se=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _e(f,u){const h={};for(const v in f)v!=="ref"&&(h[v]=f[v]);return se.forEach(v=>{v in u&&(h[v]=u[v])}),h}function p(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let h=0;h<f.length;h++)if(!p(f[h],u[h]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const h in f)if(!p(f[h],u[h]))return!1;return!0}return f===u}function Ne(f,u){f.push(u)}function $e(f,u,h){Ne(h,{command:"addSource",args:[f,u[f]]})}function rt(f,u,h){Ne(u,{command:"removeSource",args:[f]}),h[f]=!0}function dt(f,u,h,v){rt(f,h,v),$e(f,u,h)}function ct(f,u,h){let v;for(v in f[h])if(Object.prototype.hasOwnProperty.call(f[h],v)&&v!=="data"&&!p(f[h][v],u[h][v]))return!1;for(v in u[h])if(Object.prototype.hasOwnProperty.call(u[h],v)&&v!=="data"&&!p(f[h][v],u[h][v]))return!1;return!0}function Qt(f,u,h,v,w,K){f=f||{},u=u||{};for(const U in f)Object.prototype.hasOwnProperty.call(f,U)&&(p(f[U],u[U])||h.push({command:K,args:[v,U,u[U],w]}));for(const U in u)Object.prototype.hasOwnProperty.call(u,U)&&!Object.prototype.hasOwnProperty.call(f,U)&&(p(f[U],u[U])||h.push({command:K,args:[v,U,u[U],w]}))}function Vt(f){return f.id}function Nt(f,u){return f[u.id]=u,f}class wt{constructor(u,h,v,w){this.message=(u?`${u}: `:"")+v,w&&(this.identifier=w),h!=null&&h.__line__&&(this.line=h.__line__)}}function Dn(f,...u){for(const h of u)for(const v in h)f[v]=h[v];return f}class On extends Error{constructor(u,h){super(h),this.message=h,this.key=u}}class pr{constructor(u,h=[]){this.parent=u,this.bindings={};for(const[v,w]of h)this.bindings[v]=w}concat(u){return new pr(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Er={kind:"null"},sn={kind:"number"},Wn={kind:"string"},Ln={kind:"boolean"},Ir={kind:"color"},Br={kind:"projectionDefinition"},Kr={kind:"object"},Ar={kind:"value"},ho={kind:"collator"},Ea={kind:"formatted"},Yi={kind:"padding"},vi={kind:"resolvedImage"},so={kind:"variableAnchorOffsetCollection"};function So(f,u){return{kind:"array",itemType:f,N:u}}function Pi(f){if(f.kind==="array"){const u=Pi(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const Ua=[Er,sn,Wn,Ln,Ir,Br,Ea,Kr,So(Ar),Yi,vi,so];function Ba(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Ba(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const h of Ua)if(!Ba(h,u))return null}}return`Expected ${Pi(f)} but found ${Pi(u)} instead.`}function rs(f,u){return u.some(h=>h.kind===f.kind)}function ca(f,u){return u.some(h=>h==="null"?f===null:h==="array"?Array.isArray(f):h==="object"?f&&!Array.isArray(f)&&typeof f=="object":h===typeof f)}function dl(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const lo=.96422,Ku=.82521,iu=4/29,ao=6/29,Fr=3*ao*ao,Ja=ao*ao*ao,Rs=Math.PI/180,oa=180/Math.PI;function Ye(f){return(f%=360)<0&&(f+=360),f}function Mt([f,u,h,v]){let w,K;const U=$n((.2225045*(f=yn(f))+.7168786*(u=yn(u))+.0606169*(h=yn(h)))/1);f===u&&u===h?w=K=U:(w=$n((.4360747*f+.3850649*u+.1430804*h)/lo),K=$n((.0139322*f+.0971045*u+.7141733*h)/Ku));const G=116*U-16;return[G<0?0:G,500*(w-U),200*(U-K),v]}function yn(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function $n(f){return f>Ja?Math.pow(f,1/3):f/Fr+iu}function dn([f,u,h,v]){let w=(f+16)/116,K=isNaN(u)?w:w+u/500,U=isNaN(h)?w:w-h/200;return w=1*Ri(w),K=lo*Ri(K),U=Ku*Ri(U),[ar(3.1338561*K-1.6168667*w-.4906146*U),ar(-.9787684*K+1.9161415*w+.033454*U),ar(.0719453*K-.2289914*w+1.4052427*U),v]}function ar(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Ri(f){return f>ao?f*f*f:Fr*(f-iu)}function fo(f){return parseInt(f.padEnd(2,f),16)/255}function _s(f,u){return Gs(u?f/100:f,0,1)}function Gs(f,u,h){return Math.min(Math.max(u,f),h)}function bA(f){return!f.some(Number.isNaN)}const ii={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Mi(f,u,h){return f+h*(u-f)}function el(f,u,h){return f.map((v,w)=>Mi(v,u[w],h))}class ci{constructor(u,h,v,w=1,K=!0){this.r=u,this.g=h,this.b=v,this.a=w,K||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[u,h,v,w]))}static parse(u){if(u instanceof ci)return u;if(typeof u!="string")return;const h=function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=ii[v];if(w){const[U,G,X]=w;return[U/255,G/255,X/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const U=v.length<6?1:2;let G=1;return[fo(v.slice(G,G+=U)),fo(v.slice(G,G+=U)),fo(v.slice(G,G+=U)),fo(v.slice(G,G+U)||"ff")]}if(v.startsWith("rgb")){const U=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(U){const[G,X,re,de,xe,Fe,ze,Ge,Je,At,xt,Wt]=U,Bt=[de||" ",ze||" ",At].join("");if(Bt==="  "||Bt==="  /"||Bt===",,"||Bt===",,,"){const Le=[re,Fe,Je].join(""),lt=Le==="%%%"?100:Le===""?255:0;if(lt){const It=[Gs(+X/lt,0,1),Gs(+xe/lt,0,1),Gs(+Ge/lt,0,1),xt?_s(+xt,Wt):1];if(bA(It))return It}}return}}const K=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(K){const[U,G,X,re,de,xe,Fe,ze,Ge]=K,Je=[X||" ",de||" ",Fe].join("");if(Je==="  "||Je==="  /"||Je===",,"||Je===",,,"){const At=[+G,Gs(+re,0,100),Gs(+xe,0,100),ze?_s(+ze,Ge):1];if(bA(At))return function([xt,Wt,Bt,Le]){function lt(It){const cn=(It+xt/30)%12,jn=Wt*Math.min(Bt,1-Bt);return Bt-jn*Math.max(-1,Math.min(cn-3,9-cn,1))}return xt=Ye(xt),Wt/=100,Bt/=100,[lt(0),lt(8),lt(4),Le]}(At)}}}(u);return h?new ci(...h,!1):void 0}get rgb(){const{r:u,g:h,b:v,a:w}=this,K=w||1/0;return this.overwriteGetter("rgb",[u/K,h/K,v/K,w])}get hcl(){return this.overwriteGetter("hcl",function(u){const[h,v,w,K]=Mt(u),U=Math.sqrt(v*v+w*w);return[Math.round(1e4*U)?Ye(Math.atan2(w,v)*oa):NaN,U,h,K]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Mt(this.rgb))}overwriteGetter(u,h){return Object.defineProperty(this,u,{value:h}),h}toString(){const[u,h,v,w]=this.rgb;return`rgba(${[u,h,v].map(K=>Math.round(255*K)).join(",")},${w})`}static interpolate(u,h,v,w="rgb"){switch(w){case"rgb":{const[K,U,G,X]=el(u.rgb,h.rgb,v);return new ci(K,U,G,X,!1)}case"hcl":{const[K,U,G,X]=u.hcl,[re,de,xe,Fe]=h.hcl;let ze,Ge;if(isNaN(K)||isNaN(re))isNaN(K)?isNaN(re)?ze=NaN:(ze=re,G!==1&&G!==0||(Ge=de)):(ze=K,xe!==1&&xe!==0||(Ge=U));else{let Bt=re-K;re>K&&Bt>180?Bt-=360:re<K&&K-re>180&&(Bt+=360),ze=K+v*Bt}const[Je,At,xt,Wt]=function([Bt,Le,lt,It]){return Bt=isNaN(Bt)?0:Bt*Rs,dn([lt,Math.cos(Bt)*Le,Math.sin(Bt)*Le,It])}([ze,Ge??Mi(U,de,v),Mi(G,xe,v),Mi(X,Fe,v)]);return new ci(Je,At,xt,Wt,!1)}case"lab":{const[K,U,G,X]=dn(el(u.lab,h.lab,v));return new ci(K,U,G,X,!1)}}}}ci.black=new ci(0,0,0,1),ci.white=new ci(1,1,1,1),ci.transparent=new ci(0,0,0,0),ci.red=new ci(1,0,0,1);class da{constructor(u,h,v){this.sensitivity=u?h?"variant":"case":h?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,h){return this.collator.compare(u,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class aA{constructor(u,h,v,w,K){this.text=u,this.image=h,this.scale=v,this.fontStack=w,this.textColor=K}}class us{constructor(u){this.sections=u}static fromString(u){return new us([new aA(u,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof us?u:us.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class Lr{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Lr)return u;if(typeof u=="number")return new Lr([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const h of u)if(typeof h!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Lr(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,v){return new Lr(el(u.values,h.values,v))}}class Bi{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const tl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ds{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Ds)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let h=0;h<u.length;h+=2){const v=u[h],w=u[h+1];if(typeof v!="string"||!tl.has(v)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new Ds(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,v){const w=u.values,K=h.values;if(w.length!==K.length)throw new Bi(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${h.toString()}`);const U=[];for(let G=0;G<w.length;G+=2){if(w[G]!==K[G])throw new Bi(`Cannot interpolate values containing mismatched anchors. from[${G}]: ${w[G]}, to[${G}]: ${K[G]}`);U.push(w[G]);const[X,re]=w[G+1],[de,xe]=K[G+1];U.push([Mi(X,de,v),Mi(re,xe,v)])}return new Ds(U)}}class Eo{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Eo({name:u,available:!1}):null}}class Qs{constructor(u,h,v){this.from=u,this.to=h,this.transition=v}static interpolate(u,h,v){return new Qs(u,h,v)}static parse(u){return u instanceof Qs?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new Qs(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new Qs(u.from,u.to,u.transition):typeof u=="string"?new Qs(u,u,1):void 0}}function mu(f,u,h,v){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof h=="number"&&h>=0&&h<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[f,u,h,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[f,u,h,v]:[f,u,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Wl(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Qs||f instanceof ci||f instanceof da||f instanceof us||f instanceof Lr||f instanceof Ds||f instanceof Eo)return!0;if(Array.isArray(f)){for(const u of f)if(!Wl(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!Wl(f[u]))return!1;return!0}return!1}function is(f){if(f===null)return Er;if(typeof f=="string")return Wn;if(typeof f=="boolean")return Ln;if(typeof f=="number")return sn;if(f instanceof ci)return Ir;if(f instanceof Qs)return Br;if(f instanceof da)return ho;if(f instanceof us)return Ea;if(f instanceof Lr)return Yi;if(f instanceof Ds)return so;if(f instanceof Eo)return vi;if(Array.isArray(f)){const u=f.length;let h;for(const v of f){const w=is(v);if(h){if(h===w)continue;h=Ar;break}h=w}return So(h||Ar,u)}return Kr}function Hs(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof ci||f instanceof Qs||f instanceof us||f instanceof Lr||f instanceof Ds||f instanceof Eo?f.toString():JSON.stringify(f)}class po{constructor(u,h){this.type=u,this.value=h}static parse(u,h){if(u.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!Wl(u[1]))return h.error("invalid value");const v=u[1];let w=is(v);const K=h.expectedType;return w.kind!=="array"||w.N!==0||!K||K.kind!=="array"||typeof K.N=="number"&&K.N!==0||(w=K),new po(w,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const gs={string:Wn,number:sn,boolean:Ln,object:Kr};class Ss{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let v,w=1;const K=u[0];if(K==="array"){let G,X;if(u.length>2){const re=u[1];if(typeof re!="string"||!(re in gs)||re==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);G=gs[re],w++}else G=Ar;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return h.error('The length argument to "array" must be a positive integer literal',2);X=u[2],w++}v=So(G,X)}else{if(!gs[K])throw new Error(`Types doesn't contain name = ${K}`);v=gs[K]}const U=[];for(;w<u.length;w++){const G=h.parse(u[w],w,Ar);if(!G)return null;U.push(G)}return new Ss(v,U)}evaluate(u){for(let h=0;h<this.args.length;h++){const v=this.args[h].evaluate(u);if(!Ba(this.type,is(v)))return v;if(h===this.args.length-1)throw new Bi(`Expected value to be of type ${Pi(this.type)}, but found ${Pi(is(v))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const nl={"to-boolean":Ln,"to-color":Ir,"to-number":sn,"to-string":Wn};class Ks{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const v=u[0];if(!nl[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&u.length!==2)return h.error("Expected one argument.");const w=nl[v],K=[];for(let U=1;U<u.length;U++){const G=h.parse(u[U],U,Ar);if(!G)return null;K.push(G)}return new Ks(w,K)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let h,v;for(const w of this.args){if(h=w.evaluate(u),v=null,h instanceof ci)return h;if(typeof h=="string"){const K=u.parseColor(h);if(K)return K}else if(Array.isArray(h)&&(v=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:mu(h[0],h[1],h[2],h[3]),!v))return new ci(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Bi(v||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const v of this.args){h=v.evaluate(u);const w=Lr.parse(h);if(w)return w}throw new Bi(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const v of this.args){h=v.evaluate(u);const w=Ds.parse(h);if(w)return w}throw new Bi(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const v of this.args){if(h=v.evaluate(u),h===null)return 0;const w=Number(h);if(!isNaN(w))return w}throw new Bi(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return us.fromString(Hs(this.args[0].evaluate(u)));case"resolvedImage":return Eo.fromString(Hs(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Hs(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Ol=["Unknown","Point","LineString","Polygon"];class lA{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ol[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let h=this._parseColorCache[u];return h||(h=this._parseColorCache[u]=ci.parse(u)),h}}class Hi{constructor(u,h,v=[],w,K=new pr,U=[]){this.registry=u,this.path=v,this.key=v.map(G=>`[${G}]`).join(""),this.scope=K,this.errors=U,this.expectedType=w,this._isConstant=h}parse(u,h,v,w,K={}){return h?this.concat(h,v,w)._parse(u,K):this._parse(u,K)}_parse(u,h){function v(w,K,U){return U==="assert"?new Ss(K,[w]):U==="coerce"?new Ks(K,[w]):w}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=u[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const K=this.registry[w];if(K){let U=K.parse(u,this);if(!U)return null;if(this.expectedType){const G=this.expectedType,X=U.type;if(G.kind!=="string"&&G.kind!=="number"&&G.kind!=="boolean"&&G.kind!=="object"&&G.kind!=="array"||X.kind!=="value")if(G.kind!=="projectionDefinition"||X.kind!=="string"&&X.kind!=="array")if(G.kind!=="color"&&G.kind!=="formatted"&&G.kind!=="resolvedImage"||X.kind!=="value"&&X.kind!=="string")if(G.kind!=="padding"||X.kind!=="value"&&X.kind!=="number"&&X.kind!=="array")if(G.kind!=="variableAnchorOffsetCollection"||X.kind!=="value"&&X.kind!=="array"){if(this.checkSubtype(G,X))return null}else U=v(U,G,h.typeAnnotation||"coerce");else U=v(U,G,h.typeAnnotation||"coerce");else U=v(U,G,h.typeAnnotation||"coerce");else U=v(U,G,h.typeAnnotation||"coerce");else U=v(U,G,h.typeAnnotation||"assert")}if(!(U instanceof po)&&U.type.kind!=="resolvedImage"&&this._isConstant(U)){const G=new lA;try{U=new po(U.type,U.evaluate(G))}catch(X){return this.error(X.message),null}}return U}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,h,v){const w=typeof u=="number"?this.path.concat(u):this.path,K=v?this.scope.concat(v):this.scope;return new Hi(this.registry,this._isConstant,w,h||null,K,this.errors)}error(u,...h){const v=`${this.key}${h.map(w=>`[${w}]`).join("")}`;this.errors.push(new On(v,u))}checkSubtype(u,h){const v=Ba(u,h);return v&&this.error(v),v}}class ou{constructor(u,h){this.type=h.type,this.bindings=[].concat(u),this.result=h}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const h of this.bindings)u(h[1]);u(this.result)}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const v=[];for(let K=1;K<u.length-1;K+=2){const U=u[K];if(typeof U!="string")return h.error(`Expected string, but found ${typeof U} instead.`,K);if(/[^a-zA-Z0-9_]/.test(U))return h.error("Variable names must contain only alphanumeric characters or '_'.",K);const G=h.parse(u[K+1],K+1);if(!G)return null;v.push([U,G])}const w=h.parse(u[u.length-1],u.length-1,h.expectedType,v);return w?new ou(v,w):null}outputDefined(){return this.result.outputDefined()}}class zi{constructor(u,h){this.type=h.type,this.name=u,this.boundExpression=h}static parse(u,h){if(u.length!==2||typeof u[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const v=u[1];return h.scope.has(v)?new zi(v,h.scope.get(v)):h.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class ei{constructor(u,h,v){this.type=u,this.index=h,this.input=v}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,sn),w=h.parse(u[2],2,So(h.expectedType||Ar));return v&&w?new ei(w.type.itemType,v,w):null}evaluate(u){const h=this.index.evaluate(u),v=this.input.evaluate(u);if(h<0)throw new Bi(`Array index out of bounds: ${h} < 0.`);if(h>=v.length)throw new Bi(`Array index out of bounds: ${h} > ${v.length-1}.`);if(h!==Math.floor(h))throw new Bi(`Array index must be an integer, but found ${h} instead.`);return v[h]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class su{constructor(u,h){this.type=Ln,this.needle=u,this.haystack=h}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,Ar),w=h.parse(u[2],2,Ar);return v&&w?rs(v.type,[Ln,Wn,sn,Er,Ar])?new su(v,w):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pi(v.type)} instead`):null}evaluate(u){const h=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!v)return!1;if(!ca(h,["boolean","string","number","null"]))throw new Bi(`Expected first argument to be of type boolean, string, number or null, but found ${Pi(is(h))} instead.`);if(!ca(v,["string","array"]))throw new Bi(`Expected second argument to be of type array or string, but found ${Pi(is(v))} instead.`);return v.indexOf(h)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class Wi{constructor(u,h,v){this.type=sn,this.needle=u,this.haystack=h,this.fromIndex=v}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,Ar),w=h.parse(u[2],2,Ar);if(!v||!w)return null;if(!rs(v.type,[Ln,Wn,sn,Er,Ar]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pi(v.type)} instead`);if(u.length===4){const K=h.parse(u[3],3,sn);return K?new Wi(v,w,K):null}return new Wi(v,w)}evaluate(u){const h=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!ca(h,["boolean","string","number","null"]))throw new Bi(`Expected first argument to be of type boolean, string, number or null, but found ${Pi(is(h))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(u)),ca(v,["string"])){const K=v.indexOf(h,w);return K===-1?-1:[...v.slice(0,K)].length}if(ca(v,["array"]))return v.indexOf(h,w);throw new Bi(`Expected second argument to be of type array or string, but found ${Pi(is(v))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class uo{constructor(u,h,v,w,K,U){this.inputType=u,this.type=h,this.input=v,this.cases=w,this.outputs=K,this.otherwise=U}static parse(u,h){if(u.length<5)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return h.error("Expected an even number of arguments.");let v,w;h.expectedType&&h.expectedType.kind!=="value"&&(w=h.expectedType);const K={},U=[];for(let re=2;re<u.length-1;re+=2){let de=u[re];const xe=u[re+1];Array.isArray(de)||(de=[de]);const Fe=h.concat(re);if(de.length===0)return Fe.error("Expected at least one branch label.");for(const Ge of de){if(typeof Ge!="number"&&typeof Ge!="string")return Fe.error("Branch labels must be numbers or strings.");if(typeof Ge=="number"&&Math.abs(Ge)>Number.MAX_SAFE_INTEGER)return Fe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ge=="number"&&Math.floor(Ge)!==Ge)return Fe.error("Numeric branch labels must be integer values.");if(v){if(Fe.checkSubtype(v,is(Ge)))return null}else v=is(Ge);if(K[String(Ge)]!==void 0)return Fe.error("Branch labels must be unique.");K[String(Ge)]=U.length}const ze=h.parse(xe,re,w);if(!ze)return null;w=w||ze.type,U.push(ze)}const G=h.parse(u[1],1,Ar);if(!G)return null;const X=h.parse(u[u.length-1],u.length-1,w);return X?G.type.kind!=="value"&&h.concat(1).checkSubtype(v,G.type)?null:new uo(v,w,G,K,U,X):null}evaluate(u){const h=this.input.evaluate(u);return(is(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class Di{constructor(u,h,v){this.type=u,this.branches=h,this.otherwise=v}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return h.error("Expected an odd number of arguments.");let v;h.expectedType&&h.expectedType.kind!=="value"&&(v=h.expectedType);const w=[];for(let U=1;U<u.length-1;U+=2){const G=h.parse(u[U],U,Ln);if(!G)return null;const X=h.parse(u[U+1],U+1,v);if(!X)return null;w.push([G,X]),v=v||X.type}const K=h.parse(u[u.length-1],u.length-1,v);if(!K)return null;if(!v)throw new Error("Can't infer output type");return new Di(v,w,K)}evaluate(u){for(const[h,v]of this.branches)if(h.evaluate(u))return v.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[h,v]of this.branches)u(h),u(v);u(this.otherwise)}outputDefined(){return this.branches.every(([u,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class ee{constructor(u,h,v,w){this.type=u,this.input=h,this.beginIndex=v,this.endIndex=w}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,Ar),w=h.parse(u[2],2,sn);if(!v||!w)return null;if(!rs(v.type,[So(Ar),Wn,Ar]))return h.error(`Expected first argument to be of type array or string, but found ${Pi(v.type)} instead`);if(u.length===4){const K=h.parse(u[3],3,sn);return K?new ee(v.type,v,w,K):null}return new ee(v.type,v,w)}evaluate(u){const h=this.input.evaluate(u),v=this.beginIndex.evaluate(u);let w;if(this.endIndex&&(w=this.endIndex.evaluate(u)),ca(h,["string"]))return[...h].slice(v,w).join("");if(ca(h,["array"]))return h.slice(v,w);throw new Bi(`Expected first argument to be of type array or string, but found ${Pi(is(h))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Ie(f,u){const h=f.length-1;let v,w,K=0,U=h,G=0;for(;K<=U;)if(G=Math.floor((K+U)/2),v=f[G],w=f[G+1],v<=u){if(G===h||u<w)return G;K=G+1}else{if(!(v>u))throw new Bi("Input is not a number.");U=G-1}return 0}class at{constructor(u,h,v){this.type=u,this.input=h,this.labels=[],this.outputs=[];for(const[w,K]of v)this.labels.push(w),this.outputs.push(K)}static parse(u,h){if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");const v=h.parse(u[1],1,sn);if(!v)return null;const w=[];let K=null;h.expectedType&&h.expectedType.kind!=="value"&&(K=h.expectedType);for(let U=1;U<u.length;U+=2){const G=U===1?-1/0:u[U],X=u[U+1],re=U,de=U+1;if(typeof G!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(w.length&&w[w.length-1][0]>=G)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',re);const xe=h.parse(X,de,K);if(!xe)return null;K=K||xe.type,w.push([G,xe])}return new at(K,v,w)}evaluate(u){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(u);const w=this.input.evaluate(u);if(w<=h[0])return v[0].evaluate(u);const K=h.length;return w>=h[K-1]?v[K-1].evaluate(u):v[Ie(h,w)].evaluate(u)}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Ht(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var kr,Vn,ai=function(){if(Vn)return kr;function f(u,h,v,w){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=v,this.p2y=w}return Vn=1,kr=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,w=0;w<8;w++){var K=this.sampleCurveX(v)-u;if(Math.abs(K)<h)return v;var U=this.sampleCurveDerivativeX(v);if(Math.abs(U)<1e-6)break;v-=K/U}var G=0,X=1;for(v=u,w=0;w<20&&(K=this.sampleCurveX(v),!(Math.abs(K-u)<h));w++)u>K?G=v:X=v,v=.5*(X-G)+G;return v},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},kr}(),di=Ht(ai);class Cr{constructor(u,h,v,w,K){this.type=u,this.operator=h,this.interpolation=v,this.input=w,this.labels=[],this.outputs=[];for(const[U,G]of K)this.labels.push(U),this.outputs.push(G)}static interpolationFactor(u,h,v,w){let K=0;if(u.name==="exponential")K=Tr(h,u.base,v,w);else if(u.name==="linear")K=Tr(h,1,v,w);else if(u.name==="cubic-bezier"){const U=u.controlPoints;K=new di(U[0],U[1],U[2],U[3]).solve(Tr(h,1,v,w))}return K}static parse(u,h){let[v,w,K,...U]=u;if(!Array.isArray(w)||w.length===0)return h.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const re=w[1];if(typeof re!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:re}}else{if(w[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const re=w.slice(1);if(re.length!==4||re.some(de=>typeof de!="number"||de<0||de>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:re}}}if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(K=h.parse(K,2,sn),!K)return null;const G=[];let X=null;v==="interpolate-hcl"||v==="interpolate-lab"?X=Ir:h.expectedType&&h.expectedType.kind!=="value"&&(X=h.expectedType);for(let re=0;re<U.length;re+=2){const de=U[re],xe=U[re+1],Fe=re+3,ze=re+4;if(typeof de!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Fe);if(G.length&&G[G.length-1][0]>=de)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Fe);const Ge=h.parse(xe,ze,X);if(!Ge)return null;X=X||Ge.type,G.push([de,Ge])}return dl(X,sn)||dl(X,Br)||dl(X,Ir)||dl(X,Yi)||dl(X,so)||dl(X,So(sn))?new Cr(X,v,w,K,G):h.error(`Type ${Pi(X)} is not interpolatable.`)}evaluate(u){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(u);const w=this.input.evaluate(u);if(w<=h[0])return v[0].evaluate(u);const K=h.length;if(w>=h[K-1])return v[K-1].evaluate(u);const U=Ie(h,w),G=Cr.interpolationFactor(this.interpolation,w,h[U],h[U+1]),X=v[U].evaluate(u),re=v[U+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Mi(X,re,G);case"color":return ci.interpolate(X,re,G);case"padding":return Lr.interpolate(X,re,G);case"variableAnchorOffsetCollection":return Ds.interpolate(X,re,G);case"array":return el(X,re,G);case"projectionDefinition":return Qs.interpolate(X,re,G)}case"interpolate-hcl":return ci.interpolate(X,re,G,"hcl");case"interpolate-lab":return ci.interpolate(X,re,G,"lab")}}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Tr(f,u,h,v){const w=v-h,K=f-h;return w===0?0:u===1?K/w:(Math.pow(u,K)-1)/(Math.pow(u,w)-1)}const Ci={color:ci.interpolate,number:Mi,padding:Lr.interpolate,variableAnchorOffsetCollection:Ds.interpolate,array:el};class Bo{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let v=null;const w=h.expectedType;w&&w.kind!=="value"&&(v=w);const K=[];for(const G of u.slice(1)){const X=h.parse(G,1+K.length,v,void 0,{typeAnnotation:"omit"});if(!X)return null;v=v||X.type,K.push(X)}if(!v)throw new Error("No output type");const U=w&&K.some(G=>Ba(w,G.type));return new Bo(U?Ar:v,K)}evaluate(u){let h,v=null,w=0;for(const K of this.args)if(w++,v=K.evaluate(u),v&&v instanceof Eo&&!v.available&&(h||(h=v.name),v=null,w===this.args.length&&(v=h)),v!==null)break;return v}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function Ti(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Yr(f,u,h,v){return v.compare(u,h)===0}function Zi(f,u,h){const v=f!=="=="&&f!=="!=";return class ZU{constructor(K,U,G){this.type=Ln,this.lhs=K,this.rhs=U,this.collator=G,this.hasUntypedArgument=K.type.kind==="value"||U.type.kind==="value"}static parse(K,U){if(K.length!==3&&K.length!==4)return U.error("Expected two or three arguments.");const G=K[0];let X=U.parse(K[1],1,Ar);if(!X)return null;if(!Ti(G,X.type))return U.concat(1).error(`"${G}" comparisons are not supported for type '${Pi(X.type)}'.`);let re=U.parse(K[2],2,Ar);if(!re)return null;if(!Ti(G,re.type))return U.concat(2).error(`"${G}" comparisons are not supported for type '${Pi(re.type)}'.`);if(X.type.kind!==re.type.kind&&X.type.kind!=="value"&&re.type.kind!=="value")return U.error(`Cannot compare types '${Pi(X.type)}' and '${Pi(re.type)}'.`);v&&(X.type.kind==="value"&&re.type.kind!=="value"?X=new Ss(re.type,[X]):X.type.kind!=="value"&&re.type.kind==="value"&&(re=new Ss(X.type,[re])));let de=null;if(K.length===4){if(X.type.kind!=="string"&&re.type.kind!=="string"&&X.type.kind!=="value"&&re.type.kind!=="value")return U.error("Cannot use collator to compare non-string types.");if(de=U.parse(K[3],3,ho),!de)return null}return new ZU(X,re,de)}evaluate(K){const U=this.lhs.evaluate(K),G=this.rhs.evaluate(K);if(v&&this.hasUntypedArgument){const X=is(U),re=is(G);if(X.kind!==re.kind||X.kind!=="string"&&X.kind!=="number")throw new Bi(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${X.kind}, ${re.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const X=is(U),re=is(G);if(X.kind!=="string"||re.kind!=="string")return u(K,U,G)}return this.collator?h(K,U,G,this.collator.evaluate(K)):u(K,U,G)}eachChild(K){K(this.lhs),K(this.rhs),this.collator&&K(this.collator)}outputDefined(){return!0}}}const Xi=Zi("==",function(f,u,h){return u===h},Yr),As=Zi("!=",function(f,u,h){return u!==h},function(f,u,h,v){return!Yr(0,u,h,v)}),va=Zi("<",function(f,u,h){return u<h},function(f,u,h,v){return v.compare(u,h)<0}),za=Zi(">",function(f,u,h){return u>h},function(f,u,h,v){return v.compare(u,h)>0}),gu=Zi("<=",function(f,u,h){return u<=h},function(f,u,h,v){return v.compare(u,h)<=0}),Zs=Zi(">=",function(f,u,h){return u>=h},function(f,u,h,v){return v.compare(u,h)>=0});class mc{constructor(u,h,v){this.type=ho,this.locale=v,this.caseSensitive=u,this.diacriticSensitive=h}static parse(u,h){if(u.length!==2)return h.error("Expected one argument.");const v=u[1];if(typeof v!="object"||Array.isArray(v))return h.error("Collator options argument must be an object.");const w=h.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,Ln);if(!w)return null;const K=h.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,Ln);if(!K)return null;let U=null;return v.locale&&(U=h.parse(v.locale,1,Wn),!U)?null:new mc(w,K,U)}evaluate(u){return new da(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class Oa{constructor(u,h,v,w,K){this.type=Wn,this.number=u,this.locale=h,this.currency=v,this.minFractionDigits=w,this.maxFractionDigits=K}static parse(u,h){if(u.length!==3)return h.error("Expected two arguments.");const v=h.parse(u[1],1,sn);if(!v)return null;const w=u[2];if(typeof w!="object"||Array.isArray(w))return h.error("NumberFormat options argument must be an object.");let K=null;if(w.locale&&(K=h.parse(w.locale,1,Wn),!K))return null;let U=null;if(w.currency&&(U=h.parse(w.currency,1,Wn),!U))return null;let G=null;if(w["min-fraction-digits"]&&(G=h.parse(w["min-fraction-digits"],1,sn),!G))return null;let X=null;return w["max-fraction-digits"]&&(X=h.parse(w["max-fraction-digits"],1,sn),!X)?null:new Oa(v,K,U,G,X)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class hl{constructor(u){this.type=Ea,this.sections=u}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const v=u[1];if(!Array.isArray(v)&&typeof v=="object")return h.error("First argument must be an image or text section.");const w=[];let K=!1;for(let U=1;U<=u.length-1;++U){const G=u[U];if(K&&typeof G=="object"&&!Array.isArray(G)){K=!1;let X=null;if(G["font-scale"]&&(X=h.parse(G["font-scale"],1,sn),!X))return null;let re=null;if(G["text-font"]&&(re=h.parse(G["text-font"],1,So(Wn)),!re))return null;let de=null;if(G["text-color"]&&(de=h.parse(G["text-color"],1,Ir),!de))return null;const xe=w[w.length-1];xe.scale=X,xe.font=re,xe.textColor=de}else{const X=h.parse(u[U],1,Ar);if(!X)return null;const re=X.type.kind;if(re!=="string"&&re!=="value"&&re!=="null"&&re!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");K=!0,w.push({content:X,scale:null,font:null,textColor:null})}}return new hl(w)}evaluate(u){return new us(this.sections.map(h=>{const v=h.content.evaluate(u);return is(v)===vi?new aA("",v,null,null,null):new aA(Hs(v),null,h.scale?h.scale.evaluate(u):null,h.font?h.font.evaluate(u).join(","):null,h.textColor?h.textColor.evaluate(u):null)}))}eachChild(u){for(const h of this.sections)u(h.content),h.scale&&u(h.scale),h.font&&u(h.font),h.textColor&&u(h.textColor)}outputDefined(){return!1}}class dd{constructor(u){this.type=vi,this.input=u}static parse(u,h){if(u.length!==2)return h.error("Expected two arguments.");const v=h.parse(u[1],1,Wn);return v?new dd(v):h.error("No image name provided.")}evaluate(u){const h=this.input.evaluate(u),v=Eo.fromString(h);return v&&u.availableImages&&(v.available=u.availableImages.indexOf(h)>-1),v}eachChild(u){u(this.input)}outputDefined(){return!1}}class Fu{constructor(u){this.type=sn,this.input=u}static parse(u,h){if(u.length!==2)return h.error(`Expected 1 argument, but found ${u.length-1} instead.`);const v=h.parse(u[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Pi(v.type)} instead.`):new Fu(v):null}evaluate(u){const h=this.input.evaluate(u);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new Bi(`Expected value to be of type string or array, but found ${Pi(is(h))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Lu=8192;function Sh(f,u){const h=(180+f[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,w=Math.pow(2,u.z);return[Math.round(h*w*Lu),Math.round(v*w*Lu)]}function Es(f,u){const h=Math.pow(2,u.z);return[(w=(f[0]/Lu+u.x)/h,360*w-180),(v=(f[1]/Lu+u.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90)];var v,w}function Uu(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function hd(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function Mp(f,u,h){const v=f[0]-u[0],w=f[1]-u[1],K=f[0]-h[0],U=f[1]-h[1];return v*U-K*w==0&&v*K<=0&&w*U<=0}function uA(f,u,h,v){return(w=[v[0]-h[0],v[1]-h[1]])[0]*(K=[u[0]-f[0],u[1]-f[1]])[1]-w[1]*K[0]!=0&&!(!Xs(f,u,h,v)||!Xs(h,v,f,u));var w,K}function Hd(f,u,h){for(const v of h)for(let w=0;w<v.length-1;++w)if(uA(f,u,v[w],v[w+1]))return!0;return!1}function jc(f,u,h=!1){let v=!1;for(const G of u)for(let X=0;X<G.length-1;X++){if(Mp(f,G[X],G[X+1]))return h;(K=G[X])[1]>(w=f)[1]!=(U=G[X+1])[1]>w[1]&&w[0]<(U[0]-K[0])*(w[1]-K[1])/(U[1]-K[1])+K[0]&&(v=!v)}var w,K,U;return v}function Sp(f,u){for(const h of u)if(jc(f,h))return!0;return!1}function zf(f,u){for(const h of f)if(!jc(h,u))return!1;for(let h=0;h<f.length-1;++h)if(Hd(f[h],f[h+1],u))return!1;return!0}function gc(f,u){for(const h of u)if(zf(f,h))return!0;return!1}function Xs(f,u,h,v){const w=v[0]-h[0],K=v[1]-h[1],U=(f[0]-h[0])*K-w*(f[1]-h[1]),G=(u[0]-h[0])*K-w*(u[1]-h[1]);return U>0&&G<0||U<0&&G>0}function Eh(f,u,h){const v=[];for(let w=0;w<f.length;w++){const K=[];for(let U=0;U<f[w].length;U++){const G=Sh(f[w][U],h);Uu(u,G),K.push(G)}v.push(K)}return v}function sf(f,u,h){const v=[];for(let w=0;w<f.length;w++){const K=Eh(f[w],u,h);v.push(K)}return v}function fd(f,u,h,v){if(f[0]<h[0]||f[0]>h[2]){const w=.5*v;let K=f[0]-h[0]>w?-v:h[0]-f[0]>w?v:0;K===0&&(K=f[0]-h[2]>w?-v:h[2]-f[0]>w?v:0),f[0]+=K}Uu(u,f)}function af(f,u,h,v){const w=Math.pow(2,v.z)*Lu,K=[v.x*Lu,v.y*Lu],U=[];for(const G of f)for(const X of G){const re=[X.x+K[0],X.y+K[1]];fd(re,u,h,w),U.push(re)}return U}function pd(f,u,h,v){const w=Math.pow(2,v.z)*Lu,K=[v.x*Lu,v.y*Lu],U=[];for(const X of f){const re=[];for(const de of X){const xe=[de.x+K[0],de.y+K[1]];Uu(u,xe),re.push(xe)}U.push(re)}if(u[2]-u[0]<=w/2){(G=u)[0]=G[1]=1/0,G[2]=G[3]=-1/0;for(const X of U)for(const re of X)fd(re,u,h,w)}var G;return U}class yc{constructor(u,h){this.type=Ln,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Wl(u[1])){const v=u[1];if(v.type==="FeatureCollection"){const w=[];for(const K of v.features){const{type:U,coordinates:G}=K.geometry;U==="Polygon"&&w.push(G),U==="MultiPolygon"&&w.push(...G)}if(w.length)return new yc(v,{type:"MultiPolygon",coordinates:w})}else if(v.type==="Feature"){const w=v.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new yc(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new yc(v,v)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,v){const w=[1/0,1/0,-1/0,-1/0],K=[1/0,1/0,-1/0,-1/0],U=h.canonicalID();if(v.type==="Polygon"){const G=Eh(v.coordinates,K,U),X=af(h.geometry(),w,K,U);if(!hd(w,K))return!1;for(const re of X)if(!jc(re,G))return!1}if(v.type==="MultiPolygon"){const G=sf(v.coordinates,K,U),X=af(h.geometry(),w,K,U);if(!hd(w,K))return!1;for(const re of X)if(!Sp(re,G))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,v){const w=[1/0,1/0,-1/0,-1/0],K=[1/0,1/0,-1/0,-1/0],U=h.canonicalID();if(v.type==="Polygon"){const G=Eh(v.coordinates,K,U),X=pd(h.geometry(),w,K,U);if(!hd(w,K))return!1;for(const re of X)if(!zf(re,G))return!1}if(v.type==="MultiPolygon"){const G=sf(v.coordinates,K,U),X=pd(h.geometry(),w,K,U);if(!hd(w,K))return!1;for(const re of X)if(!gc(re,G))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Bh=class{constructor(f=[],u=(h,v)=>h<v?-1:h>v?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:h}=this,v=u[f];for(;f>0;){const w=f-1>>1,K=u[w];if(h(v,K)>=0)break;u[f]=K,f=w}u[f]=v}_down(f){const{data:u,compare:h}=this,v=this.length>>1,w=u[f];for(;f<v;){let K=1+(f<<1);const U=K+1;if(U<this.length&&h(u[U],u[K])<0&&(K=U),h(u[K],w)>=0)break;u[f]=u[K],f=K}u[f]=w}};function Oh(f,u,h=0,v=f.length-1,w=pm){for(;v>h;){if(v-h>600){const X=v-h+1,re=u-h+1,de=Math.log(X),xe=.5*Math.exp(2*de/3),Fe=.5*Math.sqrt(de*xe*(X-xe)/X)*(re-X/2<0?-1:1);Oh(f,u,Math.max(h,Math.floor(u-re*xe/X+Fe)),Math.min(v,Math.floor(u+(X-re)*xe/X+Fe)),w)}const K=f[u];let U=h,G=v;for(md(f,h,u),w(f[v],K)>0&&md(f,h,v);U<G;){for(md(f,U,G),U++,G--;w(f[U],K)<0;)U++;for(;w(f[G],K)>0;)G--}w(f[h],K)===0?md(f,h,G):(G++,md(f,G,v)),G<=u&&(h=G+1),u<=G&&(v=G-1)}}function md(f,u,h){const v=f[u];f[u]=f[h],f[h]=v}function pm(f,u){return f<u?-1:f>u?1:0}function Nc(f,u){if(f.length<=1)return[f];const h=[];let v,w;for(const K of f){const U=Ih(K);U!==0&&(K.area=Math.abs(U),w===void 0&&(w=U<0),w===U<0?(v&&h.push(v),v=[K]):v.push(K))}if(v&&h.push(v),u>1)for(let K=0;K<h.length;K++)h[K].length<=u||(Oh(h[K],u,1,h[K].length-1,yu),h[K]=h[K].slice(0,u));return h}function yu(f,u){return u.area-f.area}function Ih(f){let u=0;for(let h,v,w=0,K=f.length,U=K-1;w<K;U=w++)h=f[w],v=f[U],u+=(v.x-h.x)*(h.y+v.y);return u}const vu=1/298.257223563,AA=vu*(2-vu),Wc=Math.PI/180;class Zd{constructor(u){const h=6378.137*Wc*1e3,v=Math.cos(u*Wc),w=1/(1-AA*(1-v*v)),K=Math.sqrt(w);this.kx=h*K*v,this.ky=h*K*w*(1-AA)}distance(u,h){const v=this.wrap(u[0]-h[0])*this.kx,w=(u[1]-h[1])*this.ky;return Math.sqrt(v*v+w*w)}pointOnLine(u,h){let v,w,K,U,G=1/0;for(let X=0;X<u.length-1;X++){let re=u[X][0],de=u[X][1],xe=this.wrap(u[X+1][0]-re)*this.kx,Fe=(u[X+1][1]-de)*this.ky,ze=0;xe===0&&Fe===0||(ze=(this.wrap(h[0]-re)*this.kx*xe+(h[1]-de)*this.ky*Fe)/(xe*xe+Fe*Fe),ze>1?(re=u[X+1][0],de=u[X+1][1]):ze>0&&(re+=xe/this.kx*ze,de+=Fe/this.ky*ze)),xe=this.wrap(h[0]-re)*this.kx,Fe=(h[1]-de)*this.ky;const Ge=xe*xe+Fe*Fe;Ge<G&&(G=Ge,v=re,w=de,K=X,U=ze)}return{point:[v,w],index:K,t:Math.max(0,Math.min(1,U))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function lf(f,u){return u[0]-f[0]}function au(f){return f[1]-f[0]+1}function Il(f,u){return f[1]>=f[0]&&f[1]<u}function YA(f,u){if(f[0]>f[1])return[null,null];const h=au(f);if(u){if(h===2)return[f,null];const w=Math.floor(h/2);return[[f[0],f[0]+w],[f[0]+w,f[1]]]}if(h===1)return[f,null];const v=Math.floor(h/2)-1;return[[f[0],f[0]+v],[f[0]+v+1,f[1]]]}function Gc(f,u){if(!Il(u,f.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let v=u[0];v<=u[1];++v)Uu(h,f[v]);return h}function uf(f){const u=[1/0,1/0,-1/0,-1/0];for(const h of f)for(const v of h)Uu(u,v);return u}function jf(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function gd(f,u,h){if(!jf(f)||!jf(u))return NaN;let v=0,w=0;return f[2]<u[0]&&(v=u[0]-f[2]),f[0]>u[2]&&(v=f[0]-u[2]),f[1]>u[3]&&(w=f[1]-u[3]),f[3]<u[1]&&(w=u[1]-f[3]),h.distance([0,0],[v,w])}function xA(f,u,h){const v=h.pointOnLine(u,f);return h.distance(f,v.point)}function rl(f,u,h,v,w){const K=Math.min(xA(f,[h,v],w),xA(u,[h,v],w)),U=Math.min(xA(h,[f,u],w),xA(v,[f,u],w));return Math.min(K,U)}function kl(f,u,h,v,w){if(!Il(u,f.length)||!Il(v,h.length))return 1/0;let K=1/0;for(let U=u[0];U<u[1];++U){const G=f[U],X=f[U+1];for(let re=v[0];re<v[1];++re){const de=h[re],xe=h[re+1];if(uA(G,X,de,xe))return 0;K=Math.min(K,rl(G,X,de,xe,w))}}return K}function Vo(f,u,h,v,w){if(!Il(u,f.length)||!Il(v,h.length))return NaN;let K=1/0;for(let U=u[0];U<=u[1];++U)for(let G=v[0];G<=v[1];++G)if(K=Math.min(K,w.distance(f[U],h[G])),K===0)return K;return K}function kh(f,u,h){if(jc(f,u,!0))return 0;let v=1/0;for(const w of u){const K=w[0],U=w[w.length-1];if(K!==U&&(v=Math.min(v,xA(f,[U,K],h)),v===0))return v;const G=h.pointOnLine(w,f);if(v=Math.min(v,h.distance(f,G.point)),v===0)return v}return v}function mm(f,u,h,v){if(!Il(u,f.length))return NaN;for(let K=u[0];K<=u[1];++K)if(jc(f[K],h,!0))return 0;let w=1/0;for(let K=u[0];K<u[1];++K){const U=f[K],G=f[K+1];for(const X of h)for(let re=0,de=X.length,xe=de-1;re<de;xe=re++){const Fe=X[xe],ze=X[re];if(uA(U,G,Fe,ze))return 0;w=Math.min(w,rl(U,G,Fe,ze,v))}}return w}function Qc(f,u){for(const h of f)for(const v of h)if(jc(v,u,!0))return!0;return!1}function zu(f,u,h,v=1/0){const w=uf(f),K=uf(u);if(v!==1/0&&gd(w,K,h)>=v)return v;if(hd(w,K)){if(Qc(f,u))return 0}else if(Qc(u,f))return 0;let U=1/0;for(const G of f)for(let X=0,re=G.length,de=re-1;X<re;de=X++){const xe=G[de],Fe=G[X];for(const ze of u)for(let Ge=0,Je=ze.length,At=Je-1;Ge<Je;At=Ge++){const xt=ze[At],Wt=ze[Ge];if(uA(xe,Fe,xt,Wt))return 0;U=Math.min(U,rl(xe,Fe,xt,Wt,h))}}return U}function Xd(f,u,h,v,w,K){if(!K)return;const U=gd(Gc(v,K),w,h);U<u&&f.push([U,K,[0,0]])}function Jd(f,u,h,v,w,K,U){if(!K||!U)return;const G=gd(Gc(v,K),Gc(w,U),h);G<u&&f.push([G,K,U])}function vc(f,u,h,v,w=1/0){let K=Math.min(v.distance(f[0],h[0][0]),w);if(K===0)return K;const U=new Bh([[0,[0,f.length-1],[0,0]]],lf),G=uf(h);for(;U.length>0;){const X=U.pop();if(X[0]>=K)continue;const re=X[1],de=u?50:100;if(au(re)<=de){if(!Il(re,f.length))return NaN;if(u){const xe=mm(f,re,h,v);if(isNaN(xe)||xe===0)return xe;K=Math.min(K,xe)}else for(let xe=re[0];xe<=re[1];++xe){const Fe=kh(f[xe],h,v);if(K=Math.min(K,Fe),K===0)return 0}}else{const xe=YA(re,u);Xd(U,K,v,f,G,xe[0]),Xd(U,K,v,f,G,xe[1])}}return K}function eh(f,u,h,v,w,K=1/0){let U=Math.min(K,w.distance(f[0],h[0]));if(U===0)return U;const G=new Bh([[0,[0,f.length-1],[0,h.length-1]]],lf);for(;G.length>0;){const X=G.pop();if(X[0]>=U)continue;const re=X[1],de=X[2],xe=u?50:100,Fe=v?50:100;if(au(re)<=xe&&au(de)<=Fe){if(!Il(re,f.length)&&Il(de,h.length))return NaN;let ze;if(u&&v)ze=kl(f,re,h,de,w),U=Math.min(U,ze);else if(u&&!v){const Ge=f.slice(re[0],re[1]+1);for(let Je=de[0];Je<=de[1];++Je)if(ze=xA(h[Je],Ge,w),U=Math.min(U,ze),U===0)return U}else if(!u&&v){const Ge=h.slice(de[0],de[1]+1);for(let Je=re[0];Je<=re[1];++Je)if(ze=xA(f[Je],Ge,w),U=Math.min(U,ze),U===0)return U}else ze=Vo(f,re,h,de,w),U=Math.min(U,ze)}else{const ze=YA(re,u),Ge=YA(de,v);Jd(G,U,w,f,h,ze[0],Ge[0]),Jd(G,U,w,f,h,ze[0],Ge[1]),Jd(G,U,w,f,h,ze[1],Ge[0]),Jd(G,U,w,f,h,ze[1],Ge[1])}}return U}function Af(f){return f.type==="MultiPolygon"?f.coordinates.map(u=>({type:"Polygon",coordinates:u})):f.type==="MultiLineString"?f.coordinates.map(u=>({type:"LineString",coordinates:u})):f.type==="MultiPoint"?f.coordinates.map(u=>({type:"Point",coordinates:u})):[f]}class Cc{constructor(u,h){this.type=sn,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Wl(u[1])){const v=u[1];if(v.type==="FeatureCollection")return new Cc(v,v.features.map(w=>Af(w.geometry)).flat());if(v.type==="Feature")return new Cc(v,Af(v.geometry));if("type"in v&&"coordinates"in v)return new Cc(v,Af(v))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,v){const w=h.geometry(),K=w.flat().map(X=>Es([X.x,X.y],h.canonical));if(w.length===0)return NaN;const U=new Zd(K[0][1]);let G=1/0;for(const X of v){switch(X.type){case"Point":G=Math.min(G,eh(K,!1,[X.coordinates],!1,U,G));break;case"LineString":G=Math.min(G,eh(K,!1,X.coordinates,!0,U,G));break;case"Polygon":G=Math.min(G,vc(K,!1,X.coordinates,U,G))}if(G===0)return G}return G}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,v){const w=h.geometry(),K=w.flat().map(X=>Es([X.x,X.y],h.canonical));if(w.length===0)return NaN;const U=new Zd(K[0][1]);let G=1/0;for(const X of v){switch(X.type){case"Point":G=Math.min(G,eh(K,!0,[X.coordinates],!1,U,G));break;case"LineString":G=Math.min(G,eh(K,!0,X.coordinates,!0,U,G));break;case"Polygon":G=Math.min(G,vc(K,!0,X.coordinates,U,G))}if(G===0)return G}return G}(u,this.geometries);if(u.geometryType()==="Polygon")return function(h,v){const w=h.geometry();if(w.length===0||w[0].length===0)return NaN;const K=Nc(w,0).map(X=>X.map(re=>re.map(de=>Es([de.x,de.y],h.canonical)))),U=new Zd(K[0][0][0][1]);let G=1/0;for(const X of v)for(const re of K){switch(X.type){case"Point":G=Math.min(G,vc([X.coordinates],!1,re,U,G));break;case"LineString":G=Math.min(G,vc(X.coordinates,!0,re,U,G));break;case"Polygon":G=Math.min(G,zu(re,X.coordinates,U,G))}if(G===0)return G}return G}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Cu={"==":Xi,"!=":As,">":za,"<":va,">=":Zs,"<=":gu,array:Ss,at:ei,boolean:Ss,case:Di,coalesce:Bo,collator:mc,format:hl,image:dd,in:su,"index-of":Wi,interpolate:Cr,"interpolate-hcl":Cr,"interpolate-lab":Cr,length:Fu,let:ou,literal:po,match:uo,number:Ss,"number-format":Oa,object:Ss,slice:ee,step:at,string:Ss,"to-boolean":Ks,"to-color":Ks,"to-number":Ks,"to-string":Ks,var:zi,within:yc,distance:Cc};class Zt{constructor(u,h,v,w){this.name=u,this.type=h,this._evaluate=v,this.args=w}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,h){const v=u[0],w=Zt.definitions[v];if(!w)return h.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const K=Array.isArray(w)?w[0]:w.type,U=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,G=U.filter(([re])=>!Array.isArray(re)||re.length===u.length-1);let X=null;for(const[re,de]of G){X=new Hi(h.registry,bo,h.path,null,h.scope);const xe=[];let Fe=!1;for(let ze=1;ze<u.length;ze++){const Ge=u[ze],Je=Array.isArray(re)?re[ze-1]:re.type,At=X.parse(Ge,1+xe.length,Je);if(!At){Fe=!0;break}xe.push(At)}if(!Fe)if(Array.isArray(re)&&re.length!==xe.length)X.error(`Expected ${re.length} arguments, but found ${xe.length} instead.`);else{for(let ze=0;ze<xe.length;ze++){const Ge=Array.isArray(re)?re[ze]:re.type,Je=xe[ze];X.concat(ze+1).checkSubtype(Ge,Je.type)}if(X.errors.length===0)return new Zt(v,K,de,xe)}}if(G.length===1)h.errors.push(...X.errors);else{const re=(G.length?G:U).map(([xe])=>{return Fe=xe,Array.isArray(Fe)?`(${Fe.map(Pi).join(", ")})`:`(${Pi(Fe.type)}...)`;var Fe}).join(" | "),de=[];for(let xe=1;xe<u.length;xe++){const Fe=h.parse(u[xe],1+de.length);if(!Fe)return null;de.push(Pi(Fe.type))}h.error(`Expected arguments of type ${re}, but found (${de.join(", ")}) instead.`)}return null}static register(u,h){Zt.definitions=h;for(const v in h)u[v]=Zt}}function Rn(f,[u,h,v,w]){u=u.evaluate(f),h=h.evaluate(f),v=v.evaluate(f);const K=w?w.evaluate(f):1,U=mu(u,h,v,K);if(U)throw new Bi(U);return new ci(u/255,h/255,v/255,K,!1)}function ln(f,u){return f in u}function zr(f,u){const h=u[f];return h===void 0?null:h}function _i(f){return{type:f}}function bo(f){if(f instanceof zi)return bo(f.boundExpression);if(f instanceof Zt&&f.name==="error"||f instanceof mc||f instanceof yc||f instanceof Cc)return!1;const u=f instanceof Ks||f instanceof Ss;let h=!0;return f.eachChild(v=>{h=u?h&&bo(v):h&&v instanceof po}),!!h&&sa(f)&&$A(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function sa(f){if(f instanceof Zt&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof yc||f instanceof Cc)return!1;let u=!0;return f.eachChild(h=>{u&&!sa(h)&&(u=!1)}),u}function Ho(f){if(f instanceof Zt&&f.name==="feature-state")return!1;let u=!0;return f.eachChild(h=>{u&&!Ho(h)&&(u=!1)}),u}function $A(f,u){if(f instanceof Zt&&u.indexOf(f.name)>=0)return!1;let h=!0;return f.eachChild(v=>{h&&!$A(v,u)&&(h=!1)}),h}function Ep(f){return{result:"success",value:f}}function Tl(f){return{result:"error",value:f}}function _u(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function VA(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Pl(f){return!!f.expression&&f.expression.interpolated}function Gi(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function HA(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function zo(f){return f}function qc(f,u){const h=u.type==="color",v=f.stops&&typeof f.stops[0][0]=="object",w=v||!(v||f.property!==void 0),K=f.type||(Pl(u)?"exponential":"interval");if(h||u.type==="padding"){const de=h?ci.parse:Lr.parse;(f=Dn({},f)).stops&&(f.stops=f.stops.map(xe=>[xe[0],de(xe[1])])),f.default=de(f.default?f.default:u.default)}if(f.colorSpace&&(U=f.colorSpace)!=="rgb"&&U!=="hcl"&&U!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var U;let G,X,re;if(K==="exponential")G=Rl;else if(K==="interval")G=cA;else if(K==="categorical"){G=wA,X=Object.create(null);for(const de of f.stops)X[de[0]]=de[1];re=typeof f.stops[0][0]}else{if(K!=="identity")throw new Error(`Unknown function type "${K}"`);G=_c}if(v){const de={},xe=[];for(let Ge=0;Ge<f.stops.length;Ge++){const Je=f.stops[Ge],At=Je[0].zoom;de[At]===void 0&&(de[At]={zoom:At,type:f.type,property:f.property,default:f.default,stops:[]},xe.push(At)),de[At].stops.push([Je[0].value,Je[1]])}const Fe=[];for(const Ge of xe)Fe.push([de[Ge].zoom,qc(de[Ge],u)]);const ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:Cr.interpolationFactor.bind(void 0,ze),zoomStops:Fe.map(Ge=>Ge[0]),evaluate:({zoom:Ge},Je)=>Rl({stops:Fe,base:f.base},u,Ge).evaluate(Ge,Je)}}if(w){const de=K==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:de,interpolationFactor:Cr.interpolationFactor.bind(void 0,de),zoomStops:f.stops.map(xe=>xe[0]),evaluate:({zoom:xe})=>G(f,u,xe,X,re)}}return{kind:"source",evaluate(de,xe){const Fe=xe&&xe.properties?xe.properties[f.property]:void 0;return Fe===void 0?ZA(f.default,u.default):G(f,u,Fe,X,re)}}}function ZA(f,u,h){return f!==void 0?f:u!==void 0?u:h!==void 0?h:void 0}function wA(f,u,h,v,w){return ZA(typeof h===w?v[h]:void 0,f.default,u.default)}function cA(f,u,h){if(Gi(h)!=="number")return ZA(f.default,u.default);const v=f.stops.length;if(v===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[v-1][0])return f.stops[v-1][1];const w=Ie(f.stops.map(K=>K[0]),h);return f.stops[w][1]}function Rl(f,u,h){const v=f.base!==void 0?f.base:1;if(Gi(h)!=="number")return ZA(f.default,u.default);const w=f.stops.length;if(w===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[w-1][0])return f.stops[w-1][1];const K=Ie(f.stops.map(de=>de[0]),h),U=function(de,xe,Fe,ze){const Ge=ze-Fe,Je=de-Fe;return Ge===0?0:xe===1?Je/Ge:(Math.pow(xe,Je)-1)/(Math.pow(xe,Ge)-1)}(h,v,f.stops[K][0],f.stops[K+1][0]),G=f.stops[K][1],X=f.stops[K+1][1],re=Ci[u.type]||zo;return typeof G.evaluate=="function"?{evaluate(...de){const xe=G.evaluate.apply(void 0,de),Fe=X.evaluate.apply(void 0,de);if(xe!==void 0&&Fe!==void 0)return re(xe,Fe,U,f.colorSpace)}}:re(G,X,U,f.colorSpace)}function _c(f,u,h){switch(u.type){case"color":h=ci.parse(h);break;case"formatted":h=us.fromString(h.toString());break;case"resolvedImage":h=Eo.fromString(h.toString());break;case"padding":h=Lr.parse(h);break;default:Gi(h)===u.type||u.type==="enum"&&u.values[h]||(h=void 0)}return ZA(h,f.default,u.default)}Zt.register(Cu,{error:[{kind:"error"},[Wn],(f,[u])=>{throw new Bi(u.evaluate(f))}],typeof:[Wn,[Ar],(f,[u])=>Pi(is(u.evaluate(f)))],"to-rgba":[So(sn,4),[Ir],(f,[u])=>{const[h,v,w,K]=u.evaluate(f).rgb;return[255*h,255*v,255*w,K]}],rgb:[Ir,[sn,sn,sn],Rn],rgba:[Ir,[sn,sn,sn,sn],Rn],has:{type:Ln,overloads:[[[Wn],(f,[u])=>ln(u.evaluate(f),f.properties())],[[Wn,Kr],(f,[u,h])=>ln(u.evaluate(f),h.evaluate(f))]]},get:{type:Ar,overloads:[[[Wn],(f,[u])=>zr(u.evaluate(f),f.properties())],[[Wn,Kr],(f,[u,h])=>zr(u.evaluate(f),h.evaluate(f))]]},"feature-state":[Ar,[Wn],(f,[u])=>zr(u.evaluate(f),f.featureState||{})],properties:[Kr,[],f=>f.properties()],"geometry-type":[Wn,[],f=>f.geometryType()],id:[Ar,[],f=>f.id()],zoom:[sn,[],f=>f.globals.zoom],"heatmap-density":[sn,[],f=>f.globals.heatmapDensity||0],"line-progress":[sn,[],f=>f.globals.lineProgress||0],accumulated:[Ar,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[sn,_i(sn),(f,u)=>{let h=0;for(const v of u)h+=v.evaluate(f);return h}],"*":[sn,_i(sn),(f,u)=>{let h=1;for(const v of u)h*=v.evaluate(f);return h}],"-":{type:sn,overloads:[[[sn,sn],(f,[u,h])=>u.evaluate(f)-h.evaluate(f)],[[sn],(f,[u])=>-u.evaluate(f)]]},"/":[sn,[sn,sn],(f,[u,h])=>u.evaluate(f)/h.evaluate(f)],"%":[sn,[sn,sn],(f,[u,h])=>u.evaluate(f)%h.evaluate(f)],ln2:[sn,[],()=>Math.LN2],pi:[sn,[],()=>Math.PI],e:[sn,[],()=>Math.E],"^":[sn,[sn,sn],(f,[u,h])=>Math.pow(u.evaluate(f),h.evaluate(f))],sqrt:[sn,[sn],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[sn,[sn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[sn,[sn],(f,[u])=>Math.log(u.evaluate(f))],log2:[sn,[sn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[sn,[sn],(f,[u])=>Math.sin(u.evaluate(f))],cos:[sn,[sn],(f,[u])=>Math.cos(u.evaluate(f))],tan:[sn,[sn],(f,[u])=>Math.tan(u.evaluate(f))],asin:[sn,[sn],(f,[u])=>Math.asin(u.evaluate(f))],acos:[sn,[sn],(f,[u])=>Math.acos(u.evaluate(f))],atan:[sn,[sn],(f,[u])=>Math.atan(u.evaluate(f))],min:[sn,_i(sn),(f,u)=>Math.min(...u.map(h=>h.evaluate(f)))],max:[sn,_i(sn),(f,u)=>Math.max(...u.map(h=>h.evaluate(f)))],abs:[sn,[sn],(f,[u])=>Math.abs(u.evaluate(f))],round:[sn,[sn],(f,[u])=>{const h=u.evaluate(f);return h<0?-Math.round(-h):Math.round(h)}],floor:[sn,[sn],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[sn,[sn],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[Ln,[Wn,Ar],(f,[u,h])=>f.properties()[u.value]===h.value],"filter-id-==":[Ln,[Ar],(f,[u])=>f.id()===u.value],"filter-type-==":[Ln,[Wn],(f,[u])=>f.geometryType()===u.value],"filter-<":[Ln,[Wn,Ar],(f,[u,h])=>{const v=f.properties()[u.value],w=h.value;return typeof v==typeof w&&v<w}],"filter-id-<":[Ln,[Ar],(f,[u])=>{const h=f.id(),v=u.value;return typeof h==typeof v&&h<v}],"filter->":[Ln,[Wn,Ar],(f,[u,h])=>{const v=f.properties()[u.value],w=h.value;return typeof v==typeof w&&v>w}],"filter-id->":[Ln,[Ar],(f,[u])=>{const h=f.id(),v=u.value;return typeof h==typeof v&&h>v}],"filter-<=":[Ln,[Wn,Ar],(f,[u,h])=>{const v=f.properties()[u.value],w=h.value;return typeof v==typeof w&&v<=w}],"filter-id-<=":[Ln,[Ar],(f,[u])=>{const h=f.id(),v=u.value;return typeof h==typeof v&&h<=v}],"filter->=":[Ln,[Wn,Ar],(f,[u,h])=>{const v=f.properties()[u.value],w=h.value;return typeof v==typeof w&&v>=w}],"filter-id->=":[Ln,[Ar],(f,[u])=>{const h=f.id(),v=u.value;return typeof h==typeof v&&h>=v}],"filter-has":[Ln,[Ar],(f,[u])=>u.value in f.properties()],"filter-has-id":[Ln,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Ln,[So(Wn)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[Ln,[So(Ar)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[Ln,[Wn,So(Ar)],(f,[u,h])=>h.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[Ln,[Wn,So(Ar)],(f,[u,h])=>function(v,w,K,U){for(;K<=U;){const G=K+U>>1;if(w[G]===v)return!0;w[G]>v?U=G-1:K=G+1}return!1}(f.properties()[u.value],h.value,0,h.value.length-1)],all:{type:Ln,overloads:[[[Ln,Ln],(f,[u,h])=>u.evaluate(f)&&h.evaluate(f)],[_i(Ln),(f,u)=>{for(const h of u)if(!h.evaluate(f))return!1;return!0}]]},any:{type:Ln,overloads:[[[Ln,Ln],(f,[u,h])=>u.evaluate(f)||h.evaluate(f)],[_i(Ln),(f,u)=>{for(const h of u)if(h.evaluate(f))return!0;return!1}]]},"!":[Ln,[Ln],(f,[u])=>!u.evaluate(f)],"is-supported-script":[Ln,[Wn],(f,[u])=>{const h=f.globals&&f.globals.isSupportedScript;return!h||h(u.evaluate(f))}],upcase:[Wn,[Wn],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Wn,[Wn],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Wn,_i(Ar),(f,u)=>u.map(h=>Hs(h.evaluate(f))).join("")],"resolved-locale":[Wn,[ho],(f,[u])=>u.evaluate(f).resolvedLocale()]});class bu{constructor(u,h){var v;this.expression=u,this._warningHistory={},this._evaluator=new lA,this._defaultValue=h?(v=h).type==="color"&&HA(v.default)?new ci(0,0,0,0):v.type==="color"?ci.parse(v.default)||null:v.type==="padding"?Lr.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?Ds.parse(v.default)||null:v.type==="projectionDefinition"?Qs.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(u,h,v,w,K,U){return this._evaluator.globals=u,this._evaluator.feature=h,this._evaluator.featureState=v,this._evaluator.canonical=w,this._evaluator.availableImages=K||null,this._evaluator.formattedSection=U,this.expression.evaluate(this._evaluator)}evaluate(u,h,v,w,K,U){this._evaluator.globals=u,this._evaluator.feature=h||null,this._evaluator.featureState=v||null,this._evaluator.canonical=w,this._evaluator.availableImages=K||null,this._evaluator.formattedSection=U||null;try{const G=this.expression.evaluate(this._evaluator);if(G==null||typeof G=="number"&&G!=G)return this._defaultValue;if(this._enumValues&&!(G in this._enumValues))throw new Bi(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(G)} instead.`);return G}catch(G){return this._warningHistory[G.message]||(this._warningHistory[G.message]=!0,typeof console<"u"&&console.warn(G.message)),this._defaultValue}}}function Gl(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Cu}function Yc(f,u){const h=new Hi(Cu,bo,[],u?function(w){const K={color:Ir,string:Wn,number:sn,enum:Wn,boolean:Ln,formatted:Ea,padding:Yi,projectionDefinition:Br,resolvedImage:vi,variableAnchorOffsetCollection:so};return w.type==="array"?So(K[w.value]||Ar,w.length):K[w.type]}(u):void 0),v=h.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Ep(new bu(v,u)):Tl(h.errors)}class th{constructor(u,h){this.kind=u,this._styleExpression=h,this.isStateDependent=u!=="constant"&&!Ho(h.expression)}evaluateWithoutErrorHandling(u,h,v,w,K,U){return this._styleExpression.evaluateWithoutErrorHandling(u,h,v,w,K,U)}evaluate(u,h,v,w,K,U){return this._styleExpression.evaluate(u,h,v,w,K,U)}}class ja{constructor(u,h,v,w){this.kind=u,this.zoomStops=v,this._styleExpression=h,this.isStateDependent=u!=="camera"&&!Ho(h.expression),this.interpolationType=w}evaluateWithoutErrorHandling(u,h,v,w,K,U){return this._styleExpression.evaluateWithoutErrorHandling(u,h,v,w,K,U)}evaluate(u,h,v,w,K,U){return this._styleExpression.evaluate(u,h,v,w,K,U)}interpolationFactor(u,h,v){return this.interpolationType?Cr.interpolationFactor(this.interpolationType,u,h,v):0}}function yd(f,u){const h=Yc(f,u);if(h.result==="error")return h;const v=h.value.expression,w=sa(v);if(!w&&!_u(u))return Tl([new On("","data expressions not supported")]);const K=$A(v,["zoom"]);if(!K&&!VA(u))return Tl([new On("","zoom expressions not supported")]);const U=XA(v);return U||K?U instanceof On?Tl([U]):U instanceof Cr&&!Pl(u)?Tl([new On("",'"interpolate" expressions cannot be used with this property')]):Ep(U?new ja(w?"camera":"composite",h.value,U.labels,U instanceof Cr?U.interpolation:void 0):new th(w?"constant":"source",h.value)):Tl([new On("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class bc{constructor(u,h){this._parameters=u,this._specification=h,Dn(this,qc(this._parameters,this._specification))}static deserialize(u){return new bc(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function XA(f){let u=null;if(f instanceof ou)u=XA(f.result);else if(f instanceof Bo){for(const h of f.args)if(u=XA(h),u)break}else(f instanceof at||f instanceof Cr)&&f.input instanceof Zt&&f.input.name==="zoom"&&(u=f);return u instanceof On||f.eachChild(h=>{const v=XA(h);v instanceof On?u=v:!u&&v?u=new On("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&v&&u!==v&&(u=new On("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function cf(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!cf(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const MA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function JA(f){if(f==null)return{filter:()=>!0,needGeometry:!1};cf(f)||(f=Zo(f));const u=Yc(f,MA);if(u.result==="error")throw new Error(u.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,v,w)=>u.value.evaluate(h,v,{},w),needGeometry:nh(f)}}function $c(f,u){return f<u?-1:f>u?1:0}function nh(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(nh(f[u]))return!0;return!1}function Zo(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?Vc(f[1],f[2],"=="):u==="!="?Hc(Vc(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Vc(f[1],f[2],u):u==="any"?(h=f.slice(1),["any"].concat(h.map(Zo))):u==="all"?["all"].concat(f.slice(1).map(Zo)):u==="none"?["all"].concat(f.slice(1).map(Zo).map(Hc)):u==="in"?ec(f[1],f.slice(2)):u==="!in"?Hc(ec(f[1],f.slice(2))):u==="has"?ju(f[1]):u!=="!has"||Hc(ju(f[1]));var h}function Vc(f,u,h){switch(f){case"$type":return[`filter-type-${h}`,u];case"$id":return[`filter-id-${h}`,u];default:return[`filter-${h}`,f,u]}}function ec(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(h=>typeof h!=typeof u[0])?["filter-in-large",f,["literal",u.sort($c)]]:["filter-in-small",f,["literal",u]]}}function ju(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Hc(f){return["!",f]}function rh(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let w="[";for(const K of f)w+=`${rh(K)},`;return`${w}]`}const h=Object.keys(f).sort();let v="{";for(let w=0;w<h.length;w++)v+=`${JSON.stringify(h[w])}:${rh(f[h[w]])},`;return`${v}}`}function Zc(f){let u="";for(const h of se)u+=`/${rh(f[h])}`;return u}function xc(f){const u=f.value;return u?[new wt(f.key,u,"constants have been deprecated as of v8")]:[]}function cs(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function jo(f){if(Array.isArray(f))return f.map(jo);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const h in f)u[h]=jo(f[h]);return u}return cs(f)}function ds(f){const u=f.key,h=f.value,v=f.valueSpec||{},w=f.objectElementValidators||{},K=f.style,U=f.styleSpec,G=f.validateSpec;let X=[];const re=Gi(h);if(re!=="object")return[new wt(u,h,`object expected, ${re} found`)];for(const de in h){const xe=de.split(".")[0],Fe=v[xe]||v["*"];let ze;if(w[xe])ze=w[xe];else if(v[xe])ze=G;else if(w["*"])ze=w["*"];else{if(!v["*"]){X.push(new wt(u,h[de],`unknown property "${de}"`));continue}ze=G}X=X.concat(ze({key:(u&&`${u}.`)+de,value:h[de],valueSpec:Fe,style:K,styleSpec:U,object:h,objectKey:de,validateSpec:G},h))}for(const de in v)w[de]||v[de].required&&v[de].default===void 0&&h[de]===void 0&&X.push(new wt(u,h,`missing required property "${de}"`));return X}function Nf(f){const u=f.value,h=f.valueSpec,v=f.style,w=f.styleSpec,K=f.key,U=f.arrayElementValidator||f.validateSpec;if(Gi(u)!=="array")return[new wt(K,u,`array expected, ${Gi(u)} found`)];if(h.length&&u.length!==h.length)return[new wt(K,u,`array length ${h.length} expected, length ${u.length} found`)];if(h["min-length"]&&u.length<h["min-length"])return[new wt(K,u,`array length at least ${h["min-length"]} expected, length ${u.length} found`)];let G={type:h.value,values:h.values};w.$version<7&&(G.function=h.function),Gi(h.value)==="object"&&(G=h.value);let X=[];for(let re=0;re<u.length;re++)X=X.concat(U({array:u,arrayIndex:re,value:u[re],valueSpec:G,validateSpec:f.validateSpec,style:v,styleSpec:w,key:`${K}[${re}]`}));return X}function vd(f){const u=f.key,h=f.value,v=f.valueSpec;let w=Gi(h);return w==="number"&&h!=h&&(w="NaN"),w!=="number"?[new wt(u,h,`number expected, ${w} found`)]:"minimum"in v&&h<v.minimum?[new wt(u,h,`${h} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&h>v.maximum?[new wt(u,h,`${h} is greater than the maximum value ${v.maximum}`)]:[]}function Cd(f){const u=f.valueSpec,h=cs(f.value.type);let v,w,K,U={};const G=h!=="categorical"&&f.value.property===void 0,X=!G,re=Gi(f.value.stops)==="array"&&Gi(f.value.stops[0])==="array"&&Gi(f.value.stops[0][0])==="object",de=ds({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(ze){if(h==="identity")return[new wt(ze.key,ze.value,'identity function may not have a "stops" property')];let Ge=[];const Je=ze.value;return Ge=Ge.concat(Nf({key:ze.key,value:Je,valueSpec:ze.valueSpec,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,arrayElementValidator:xe})),Gi(Je)==="array"&&Je.length===0&&Ge.push(new wt(ze.key,Je,"array must have at least one stop")),Ge},default:function(ze){return ze.validateSpec({key:ze.key,value:ze.value,valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec})}}});return h==="identity"&&G&&de.push(new wt(f.key,f.value,'missing required property "property"')),h==="identity"||f.value.stops||de.push(new wt(f.key,f.value,'missing required property "stops"')),h==="exponential"&&f.valueSpec.expression&&!Pl(f.valueSpec)&&de.push(new wt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(X&&!_u(f.valueSpec)?de.push(new wt(f.key,f.value,"property functions not supported")):G&&!VA(f.valueSpec)&&de.push(new wt(f.key,f.value,"zoom functions not supported"))),h!=="categorical"&&!re||f.value.property!==void 0||de.push(new wt(f.key,f.value,'"property" property is required')),de;function xe(ze){let Ge=[];const Je=ze.value,At=ze.key;if(Gi(Je)!=="array")return[new wt(At,Je,`array expected, ${Gi(Je)} found`)];if(Je.length!==2)return[new wt(At,Je,`array length 2 expected, length ${Je.length} found`)];if(re){if(Gi(Je[0])!=="object")return[new wt(At,Je,`object expected, ${Gi(Je[0])} found`)];if(Je[0].zoom===void 0)return[new wt(At,Je,"object stop key must have zoom")];if(Je[0].value===void 0)return[new wt(At,Je,"object stop key must have value")];if(K&&K>cs(Je[0].zoom))return[new wt(At,Je[0].zoom,"stop zoom values must appear in ascending order")];cs(Je[0].zoom)!==K&&(K=cs(Je[0].zoom),w=void 0,U={}),Ge=Ge.concat(ds({key:`${At}[0]`,value:Je[0],valueSpec:{zoom:{}},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{zoom:vd,value:Fe}}))}else Ge=Ge.concat(Fe({key:`${At}[0]`,value:Je[0],valueSpec:{},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec},Je));return Gl(jo(Je[1]))?Ge.concat([new wt(`${At}[1]`,Je[1],"expressions are not allowed in function stops.")]):Ge.concat(ze.validateSpec({key:`${At}[1]`,value:Je[1],valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec}))}function Fe(ze,Ge){const Je=Gi(ze.value),At=cs(ze.value),xt=ze.value!==null?ze.value:Ge;if(v){if(Je!==v)return[new wt(ze.key,xt,`${Je} stop domain type must match previous stop domain type ${v}`)]}else v=Je;if(Je!=="number"&&Je!=="string"&&Je!=="boolean")return[new wt(ze.key,xt,"stop domain value must be a number, string, or boolean")];if(Je!=="number"&&h!=="categorical"){let Wt=`number expected, ${Je} found`;return _u(u)&&h===void 0&&(Wt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wt(ze.key,xt,Wt)]}return h!=="categorical"||Je!=="number"||isFinite(At)&&Math.floor(At)===At?h!=="categorical"&&Je==="number"&&w!==void 0&&At<w?[new wt(ze.key,xt,"stop domain values must appear in ascending order")]:(w=At,h==="categorical"&&At in U?[new wt(ze.key,xt,"stop domain values must be unique")]:(U[At]=!0,[])):[new wt(ze.key,xt,`integer expected, found ${At}`)]}}function Nu(f){const u=(f.expressionContext==="property"?yd:Yc)(jo(f.value),f.valueSpec);if(u.result==="error")return u.value.map(v=>new wt(`${f.key}${v.key}`,f.value,v.message));const h=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!h.outputDefined())return[new wt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Ho(h))return[new wt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Ho(h))return[new wt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!$A(h,["zoom","feature-state"]))return[new wt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!sa(h))return[new wt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tc(f){const u=f.key,h=f.value,v=f.valueSpec,w=[];return Array.isArray(v.values)?v.values.indexOf(cs(h))===-1&&w.push(new wt(u,h,`expected one of [${v.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(v.values).indexOf(cs(h))===-1&&w.push(new wt(u,h,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(h)} found`)),w}function Ql(f){return cf(jo(f.value))?Nu(Dn({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):SA(f)}function SA(f){const u=f.value,h=f.key;if(Gi(u)!=="array")return[new wt(h,u,`array expected, ${Gi(u)} found`)];const v=f.styleSpec;let w,K=[];if(u.length<1)return[new wt(h,u,"filter array must have at least 1 element")];switch(K=K.concat(tc({key:`${h}[0]`,value:u[0],valueSpec:v.filter_operator,style:f.style,styleSpec:f.styleSpec})),cs(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&cs(u[1])==="$type"&&K.push(new wt(h,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&K.push(new wt(h,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(w=Gi(u[1]),w!=="string"&&K.push(new wt(`${h}[1]`,u[1],`string expected, ${w} found`)));for(let U=2;U<u.length;U++)w=Gi(u[U]),cs(u[1])==="$type"?K=K.concat(tc({key:`${h}[${U}]`,value:u[U],valueSpec:v.geometry_type,style:f.style,styleSpec:f.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&K.push(new wt(`${h}[${U}]`,u[U],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let U=1;U<u.length;U++)K=K.concat(SA({key:`${h}[${U}]`,value:u[U],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":w=Gi(u[1]),u.length!==2?K.push(new wt(h,u,`filter array for "${u[0]}" operator must have 2 elements`)):w!=="string"&&K.push(new wt(`${h}[1]`,u[1],`string expected, ${w} found`))}return K}function fl(f,u){const h=f.key,v=f.validateSpec,w=f.style,K=f.styleSpec,U=f.value,G=f.objectKey,X=K[`${u}_${f.layerType}`];if(!X)return[];const re=G.match(/^(.*)-transition$/);if(u==="paint"&&re&&X[re[1]]&&X[re[1]].transition)return v({key:h,value:U,valueSpec:K.transition,style:w,styleSpec:K});const de=f.valueSpec||X[G];if(!de)return[new wt(h,U,`unknown property "${G}"`)];let xe;if(Gi(U)==="string"&&_u(de)&&!de.tokens&&(xe=/^{([^}]+)}$/.exec(U)))return[new wt(h,U,`"${G}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(xe[1])} }\`.`)];const Fe=[];return f.layerType==="symbol"&&(G==="text-field"&&w&&!w.glyphs&&Fe.push(new wt(h,U,'use of "text-field" requires a style "glyphs" property')),G==="text-font"&&HA(jo(U))&&cs(U.type)==="identity"&&Fe.push(new wt(h,U,'"text-font" does not support identity functions'))),Fe.concat(v({key:f.key,value:U,valueSpec:de,style:w,styleSpec:K,expressionContext:"property",propertyType:u,propertyKey:G}))}function nc(f){return fl(f,"paint")}function Wu(f){return fl(f,"layout")}function _d(f){let u=[];const h=f.value,v=f.key,w=f.style,K=f.styleSpec;h.type||h.ref||u.push(new wt(v,h,'either "type" or "ref" is required'));let U=cs(h.type);const G=cs(h.ref);if(h.id){const X=cs(h.id);for(let re=0;re<f.arrayIndex;re++){const de=w.layers[re];cs(de.id)===X&&u.push(new wt(v,h.id,`duplicate layer id "${h.id}", previously used at line ${de.id.__line__}`))}}if("ref"in h){let X;["type","source","source-layer","filter","layout"].forEach(re=>{re in h&&u.push(new wt(v,h[re],`"${re}" is prohibited for ref layers`))}),w.layers.forEach(re=>{cs(re.id)===G&&(X=re)}),X?X.ref?u.push(new wt(v,h.ref,"ref cannot reference another ref layer")):U=cs(X.type):u.push(new wt(v,h.ref,`ref layer "${G}" not found`))}else if(U!=="background")if(h.source){const X=w.sources&&w.sources[h.source],re=X&&cs(X.type);X?re==="vector"&&U==="raster"?u.push(new wt(v,h.source,`layer "${h.id}" requires a raster source`)):re!=="raster-dem"&&U==="hillshade"?u.push(new wt(v,h.source,`layer "${h.id}" requires a raster-dem source`)):re==="raster"&&U!=="raster"?u.push(new wt(v,h.source,`layer "${h.id}" requires a vector source`)):re!=="vector"||h["source-layer"]?re==="raster-dem"&&U!=="hillshade"?u.push(new wt(v,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):U!=="line"||!h.paint||!h.paint["line-gradient"]||re==="geojson"&&X.lineMetrics||u.push(new wt(v,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new wt(v,h,`layer "${h.id}" must specify a "source-layer"`)):u.push(new wt(v,h.source,`source "${h.source}" not found`))}else u.push(new wt(v,h,'missing required property "source"'));return u=u.concat(ds({key:v,value:h,valueSpec:K.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${v}.type`,value:h.type,valueSpec:K.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:h,objectKey:"type"}),filter:Ql,layout:X=>ds({layer:h,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>Wu(Dn({layerType:U},re))}}),paint:X=>ds({layer:h,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>nc(Dn({layerType:U},re))}})}})),u}function Gu(f){const u=f.value,h=f.key,v=Gi(u);return v!=="string"?[new wt(h,u,`string expected, ${v} found`)]:[]}const ih={promoteId:function({key:f,value:u}){if(Gi(u)==="string")return Gu({key:f,value:u});{const h=[];for(const v in u)h.push(...Gu({key:`${f}.${v}`,value:u[v]}));return h}}};function rc(f){const u=f.value,h=f.key,v=f.styleSpec,w=f.style,K=f.validateSpec;if(!u.type)return[new wt(h,u,'"type" is required')];const U=cs(u.type);let G;switch(U){case"vector":case"raster":return G=ds({key:h,value:u,valueSpec:v[`source_${U.replace("-","_")}`],style:f.style,styleSpec:v,objectElementValidators:ih,validateSpec:K}),G;case"raster-dem":return G=function(X){var re;const de=(re=X.sourceName)!==null&&re!==void 0?re:"",xe=X.value,Fe=X.styleSpec,ze=Fe.source_raster_dem,Ge=X.style;let Je=[];const At=Gi(xe);if(xe===void 0)return Je;if(At!=="object")return Je.push(new wt("source_raster_dem",xe,`object expected, ${At} found`)),Je;const xt=cs(xe.encoding)==="custom",Wt=["redFactor","greenFactor","blueFactor","baseShift"],Bt=X.value.encoding?`"${X.value.encoding}"`:"Default";for(const Le in xe)!xt&&Wt.includes(Le)?Je.push(new wt(Le,xe[Le],`In "${de}": "${Le}" is only valid when "encoding" is set to "custom". ${Bt} encoding found`)):ze[Le]?Je=Je.concat(X.validateSpec({key:Le,value:xe[Le],valueSpec:ze[Le],validateSpec:X.validateSpec,style:Ge,styleSpec:Fe})):Je.push(new wt(Le,xe[Le],`unknown property "${Le}"`));return Je}({sourceName:h,value:u,style:f.style,styleSpec:v,validateSpec:K}),G;case"geojson":if(G=ds({key:h,value:u,valueSpec:v.source_geojson,style:w,styleSpec:v,validateSpec:K,objectElementValidators:ih}),u.cluster)for(const X in u.clusterProperties){const[re,de]=u.clusterProperties[X],xe=typeof re=="string"?[re,["accumulated"],["get",X]]:re;G.push(...Nu({key:`${h}.${X}.map`,value:de,validateSpec:K,expressionContext:"cluster-map"})),G.push(...Nu({key:`${h}.${X}.reduce`,value:xe,validateSpec:K,expressionContext:"cluster-reduce"}))}return G;case"video":return ds({key:h,value:u,valueSpec:v.source_video,style:w,validateSpec:K,styleSpec:v});case"image":return ds({key:h,value:u,valueSpec:v.source_image,style:w,validateSpec:K,styleSpec:v});case"canvas":return[new wt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tc({key:`${h}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:w,validateSpec:K,styleSpec:v})}}function Qu(f){const u=f.value,h=f.styleSpec,v=h.light,w=f.style;let K=[];const U=Gi(u);if(u===void 0)return K;if(U!=="object")return K=K.concat([new wt("light",u,`object expected, ${U} found`)]),K;for(const G in u){const X=G.match(/^(.*)-transition$/);K=K.concat(X&&v[X[1]]&&v[X[1]].transition?f.validateSpec({key:G,value:u[G],valueSpec:h.transition,validateSpec:f.validateSpec,style:w,styleSpec:h}):v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],validateSpec:f.validateSpec,style:w,styleSpec:h}):[new wt(G,u[G],`unknown property "${G}"`)])}return K}function qu(f){const u=f.value,h=f.styleSpec,v=h.sky,w=f.style,K=Gi(u);if(u===void 0)return[];if(K!=="object")return[new wt("sky",u,`object expected, ${K} found`)];let U=[];for(const G in u)U=U.concat(v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],style:w,styleSpec:h}):[new wt(G,u[G],`unknown property "${G}"`)]);return U}function EA(f){const u=f.value,h=f.styleSpec,v=h.terrain,w=f.style;let K=[];const U=Gi(u);if(u===void 0)return K;if(U!=="object")return K=K.concat([new wt("terrain",u,`object expected, ${U} found`)]),K;for(const G in u)K=K.concat(v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],validateSpec:f.validateSpec,style:w,styleSpec:h}):[new wt(G,u[G],`unknown property "${G}"`)]);return K}function wc(f){let u=[];const h=f.value,v=f.key;if(Array.isArray(h)){const w=[],K=[];for(const U in h)h[U].id&&w.includes(h[U].id)&&u.push(new wt(v,h,`all the sprites' ids must be unique, but ${h[U].id} is duplicated`)),w.push(h[U].id),h[U].url&&K.includes(h[U].url)&&u.push(new wt(v,h,`all the sprites' URLs must be unique, but ${h[U].url} is duplicated`)),K.push(h[U].url),u=u.concat(ds({key:`${v}[${U}]`,value:h[U],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return Gu({key:v,value:h})}const xu={"*":()=>[],array:Nf,boolean:function(f){const u=f.value,h=f.key,v=Gi(u);return v!=="boolean"?[new wt(h,u,`boolean expected, ${v} found`)]:[]},number:vd,color:function(f){const u=f.key,h=f.value,v=Gi(h);return v!=="string"?[new wt(u,h,`color expected, ${v} found`)]:ci.parse(String(h))?[]:[new wt(u,h,`color expected, "${h}" found`)]},constants:xc,enum:tc,filter:Ql,function:Cd,layer:_d,object:ds,source:rc,light:Qu,sky:qu,terrain:EA,projection:function(f){const u=f.value,h=f.styleSpec,v=h.projection,w=f.style,K=Gi(u);if(u===void 0)return[];if(K!=="object")return[new wt("projection",u,`object expected, ${K} found`)];let U=[];for(const G in u)U=U.concat(v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],style:w,styleSpec:h}):[new wt(G,u[G],`unknown property "${G}"`)]);return U},projectionDefinition:function(f){const u=f.key;let h=f.value;h=h instanceof String?h.valueOf():h;const v=Gi(h);return v!=="array"||function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"}(h)||function(w){return!!["interpolate","step","literal"].includes(w[0])}(h)?["array","string"].includes(v)?[]:[new wt(u,h,`projection expected, invalid type "${v}" found`)]:[new wt(u,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:Gu,formatted:function(f){return Gu(f).length===0?[]:Nu(f)},resolvedImage:function(f){return Gu(f).length===0?[]:Nu(f)},padding:function(f){const u=f.key,h=f.value;if(Gi(h)==="array"){if(h.length<1||h.length>4)return[new wt(u,h,`padding requires 1 to 4 values; ${h.length} values found`)];const v={type:"number"};let w=[];for(let K=0;K<h.length;K++)w=w.concat(f.validateSpec({key:`${u}[${K}]`,value:h[K],validateSpec:f.validateSpec,valueSpec:v}));return w}return vd({key:u,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(f){const u=f.key,h=f.value,v=Gi(h),w=f.styleSpec;if(v!=="array"||h.length<1||h.length%2!=0)return[new wt(u,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let K=[];for(let U=0;U<h.length;U+=2)K=K.concat(tc({key:`${u}[${U}]`,value:h[U],valueSpec:w.layout_symbol["text-anchor"]})),K=K.concat(Nf({key:`${u}[${U+1}]`,value:h[U+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:w}));return K},sprite:wc};function Xc(f){const u=f.value,h=f.valueSpec,v=f.styleSpec;return f.validateSpec=Xc,h.expression&&HA(cs(u))?Cd(f):h.expression&&Gl(jo(u))?Nu(f):h.type&&xu[h.type]?xu[h.type](f):ds(Dn({},f,{valueSpec:h.type?v[h.type]:h}))}function ot(f){const u=f.value,h=f.key,v=Gu(f);return v.length||(u.indexOf("{fontstack}")===-1&&v.push(new wt(h,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&v.push(new wt(h,u,'"glyphs" url must include a "{range}" token'))),v}function Na(f,u=Oe){let h=[];return h=h.concat(Xc({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:Xc,objectElementValidators:{glyphs:ot,"*":()=>[]}})),f.constants&&(h=h.concat(xc({key:"constants",value:f.constants,style:f,styleSpec:u,validateSpec:Xc}))),Ki(h)}function Oo(f){return function(u){return f({...u,validateSpec:Xc})}}function Ki(f){return[].concat(f).sort((u,h)=>u.line-h.line)}function Vr(f){return function(...u){return Ki(f.apply(this,u))}}Na.source=Vr(Oo(rc)),Na.sprite=Vr(Oo(wc)),Na.glyphs=Vr(Oo(ot)),Na.light=Vr(Oo(Qu)),Na.sky=Vr(Oo(qu)),Na.terrain=Vr(Oo(EA)),Na.layer=Vr(Oo(_d)),Na.filter=Vr(Oo(Ql)),Na.paintProperty=Vr(Oo(nc)),Na.layoutProperty=Vr(Oo(Wu));const Bs=Na,bd=Bs.light,oh=Bs.sky,Ia=Bs.paintProperty,qs=Bs.layoutProperty;function bs(f,u){let h=!1;if(u&&u.length)for(const v of u)f.fire(new on(new Error(v.message))),h=!0;return h}class dA{constructor(u,h,v){const w=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const U=new Int32Array(this.arrayBuffer);u=U[0],this.d=(h=U[1])+2*(v=U[2]);for(let X=0;X<this.d*this.d;X++){const re=U[3+X],de=U[3+X+1];w.push(re===de?null:U.subarray(re,de))}const G=U[3+w.length+1];this.keys=U.subarray(U[3+w.length],G),this.bboxes=U.subarray(G),this.insert=this._insertReadonly}else{this.d=h+2*v;for(let U=0;U<this.d*this.d;U++)w.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=u,this.padding=v,this.scale=h/u,this.uid=0;const K=v/h*u;this.min=-K,this.max=u+K}insert(u,h,v,w,K){this._forEachCell(h,v,w,K,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(w),this.bboxes.push(K)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,h,v,w,K,U){this.cells[K].push(U)}query(u,h,v,w,K){const U=this.min,G=this.max;if(u<=U&&h<=U&&G<=v&&G<=w&&!K)return Array.prototype.slice.call(this.keys);{const X=[];return this._forEachCell(u,h,v,w,this._queryCell,X,{},K),X}}_queryCell(u,h,v,w,K,U,G,X){const re=this.cells[K];if(re!==null){const de=this.keys,xe=this.bboxes;for(let Fe=0;Fe<re.length;Fe++){const ze=re[Fe];if(G[ze]===void 0){const Ge=4*ze;(X?X(xe[Ge+0],xe[Ge+1],xe[Ge+2],xe[Ge+3]):u<=xe[Ge+2]&&h<=xe[Ge+3]&&v>=xe[Ge+0]&&w>=xe[Ge+1])?(G[ze]=!0,U.push(de[ze])):G[ze]=!1}}}}_forEachCell(u,h,v,w,K,U,G,X){const re=this._convertToCellCoord(u),de=this._convertToCellCoord(h),xe=this._convertToCellCoord(v),Fe=this._convertToCellCoord(w);for(let ze=re;ze<=xe;ze++)for(let Ge=de;Ge<=Fe;Ge++){const Je=this.d*Ge+ze;if((!X||X(this._convertFromCellCoord(ze),this._convertFromCellCoord(Ge),this._convertFromCellCoord(ze+1),this._convertFromCellCoord(Ge+1)))&&K.call(this,u,h,v,w,Je,U,G,X))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,h=3+this.cells.length+1+1;let v=0;for(let U=0;U<this.cells.length;U++)v+=this.cells[U].length;const w=new Int32Array(h+v+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let K=h;for(let U=0;U<u.length;U++){const G=u[U];w[3+U]=K,w.set(G,K),K+=G.length}return w[3+u.length]=K,w.set(this.keys,K),K+=this.keys.length,w[3+u.length+1]=K,w.set(this.bboxes,K),K+=this.bboxes.length,w.buffer}static serialize(u,h){const v=u.toArrayBuffer();return h&&h.push(v),{buffer:v}}static deserialize(u){return new dA(u.buffer)}}const Os={};function vr(f,u,h={}){if(Os[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),Os[f]={klass:u,omit:h.omit||[],shallow:h.shallow||[]}}vr("Object",Object),vr("TransferableGridIndex",dA),vr("Color",ci),vr("Error",Error),vr("AJAXError",er),vr("ResolvedImage",Eo),vr("StylePropertyFunction",bc),vr("StyleExpression",bu,{omit:["_evaluator"]}),vr("ZoomDependentExpression",ja),vr("ZoomConstantExpression",th),vr("CompoundExpression",Zt,{omit:["_evaluate"]});for(const f in Cu)Cu[f]._classRegistryKey||vr(`Expression_${f}`,Cu[f]);function Ca(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Jc(f){return f.$name||f.constructor._classRegistryKey}function ka(f){return!function(u){if(u===null||typeof u!="object")return!1;const h=Jc(u);return!(!h||h==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||Ca(f)||tn(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function ic(f,u){if(ka(f))return(Ca(f)||tn(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const K=[];for(const U of f)K.push(ic(U,u));return K}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const h=Jc(f);if(!h)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Os[h])throw new Error(`${h} is not registered.`);const{klass:v}=Os[h],w=v.serialize?v.serialize(f,u):{};if(v.serialize){if(u&&w===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const K in f){if(!f.hasOwnProperty(K)||Os[h].omit.indexOf(K)>=0)continue;const U=f[K];w[K]=Os[h].shallow.indexOf(K)>=0?U:ic(U,u)}f instanceof Error&&(w.message=f.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(w.$name=h),w}function xd(f){if(ka(f))return f;if(Array.isArray(f))return f.map(xd);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=Jc(f)||"Object";if(!Os[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:h}=Os[u];if(!h)throw new Error(`can't deserialize unregistered class ${u}`);if(h.deserialize)return h.deserialize(f);const v=Object.create(h.prototype);for(const w of Object.keys(f)){if(w==="$name")continue;const K=f[w];v[w]=Os[u].shallow.indexOf(w)>=0?K:xd(K)}return v}class wd{constructor(){this.first=!0}update(u,h){const v=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=h),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=v,!0))}}const Si={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Md(f){for(const u of f)if(hA(u.charCodeAt(0)))return!0;return!1}function ql(f){for(const u of f)if(!BA(u.charCodeAt(0)))return!1;return!0}function Sd(f){const u=f.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}}).filter(h=>h);return new RegExp(u.join("|"),"u")}const Ed=Sd(["Arab","Dupl","Mong","Ougr","Syrc"]);function BA(f){return!Ed.test(String.fromCodePoint(f))}const oc=Sd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function hA(f){return!(f!==746&&f!==747&&(f<4352||!(Si["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Si["CJK Compatibility"](f)||Si["CJK Strokes"](f)||!(!Si["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Si["Enclosed CJK Letters and Months"](f)||Si["Ideographic Description Characters"](f)||Si.Kanbun(f)||Si.Katakana(f)&&f!==12540||!(!Si["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Si["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Si["Vertical Forms"](f)||Si["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||oc.test(String.fromCodePoint(f)))))}function Mc(f){return!(hA(f)||function(u){return!!(Si["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Si["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Si["Letterlike Symbols"](u)||Si["Number Forms"](u)||Si["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Si["Control Pictures"](u)&&u!==9251||Si["Optical Character Recognition"](u)||Si["Enclosed Alphanumerics"](u)||Si["Geometric Shapes"](u)||Si["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Si["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Si["CJK Symbols and Punctuation"](u)||Si.Katakana(u)||Si["Private Use Area"](u)||Si["CJK Compatibility Forms"](u)||Si["Small Form Variants"](u)||Si["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(f))}const Is=Sd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function xo(f){return Is.test(String.fromCodePoint(f))}function wu(f,u){return!(!u&&xo(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Si.Khmer(f))}function Wa(f){for(const u of f)if(xo(u.charCodeAt(0)))return!0;return!1}const Fs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Fs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,u){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const h=f.pluginURL,v=new Promise(K=>{this.loadScriptResolve=K});u(h);const w=new Promise(K=>setTimeout(()=>K(),this.TIMEOUT));if(yield Promise.race([v,w]),this.isParsed()){const K={pluginStatus:"loaded",pluginURL:h};return this.setState(K),K}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)})}};class Xo{constructor(u,h){this.zoom=u,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new wd,this.transition={})}isSupportedScript(u){return function(h,v){for(const w of h)if(!wu(w.charCodeAt(0),v))return!1;return!0}(u,Fs.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,h=u-Math.floor(u),v=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*h}}}class lu{constructor(u,h){this.property=u,this.value=h,this.expression=function(v,w){if(HA(v))return new bc(v,w);if(Gl(v)){const K=yd(v,w);if(K.result==="error")throw new Error(K.value.map(U=>`${U.key}: ${U.message}`).join(", "));return K.value}{let K=v;return w.type==="color"&&typeof v=="string"?K=ci.parse(v):w.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?K=Ds.parse(v):w.type==="projectionDefinition"&&typeof v=="string"&&(K=Qs.parse(v)):K=Lr.parse(v),{kind:"constant",evaluate:()=>K}}}(h===void 0?u.specification.default:h,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,h,v){return this.property.possiblyEvaluate(this,u,h,v)}}class Yu{constructor(u){this.property=u,this.value=new lu(u,void 0)}transitioned(u,h){return new sh(this.property,this.value,h,ft({},u.transition,this.transition),u.now)}untransitioned(){return new sh(this.property,this.value,null,{},0)}}class Sc{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return Re(this._values[u].value.value)}setValue(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Yu(this._values[u].property)),this._values[u].value=new lu(this._values[u].property,h===null?void 0:Re(h))}getTransition(u){return Re(this._values[u].transition)}setTransition(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Yu(this._values[u].property)),this._values[u].transition=Re(h)||void 0}serialize(){const u={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(u[h]=v);const w=this.getTransition(h);w!==void 0&&(u[`${h}-transition`]=w)}return u}transitioned(u,h){const v=new OA(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].transitioned(u,h._values[w]);return v}untransitioned(){const u=new OA(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].untransitioned();return u}}class sh{constructor(u,h,v,w,K){this.property=u,this.value=h,this.begin=K+w.delay||0,this.end=this.begin+w.duration||0,u.specification.transition&&(w.delay||w.duration)&&(this.prior=v)}possiblyEvaluate(u,h,v){const w=u.now||0,K=this.value.possiblyEvaluate(u,h,v),U=this.prior;if(U){if(w>this.end)return this.prior=null,K;if(this.value.isDataDriven())return this.prior=null,K;if(w<this.begin)return U.possiblyEvaluate(u,h,v);{const G=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(U.possiblyEvaluate(u,h,v),K,Ce(G))}}return K}}class OA{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,h,v){const w=new ha(this._properties);for(const K of Object.keys(this._values))w._values[K]=this._values[K].possiblyEvaluate(u,h,v);return w}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Ec{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return Re(this._values[u].value)}setValue(u,h){this._values[u]=new lu(this._values[u].property,h===null?void 0:Re(h))}serialize(){const u={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(u[h]=v)}return u}possiblyEvaluate(u,h,v){const w=new ha(this._properties);for(const K of Object.keys(this._values))w._values[K]=this._values[K].possiblyEvaluate(u,h,v);return w}}class ys{constructor(u,h,v){this.property=u,this.value=h,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,h,v,w){return this.property.evaluate(this.value,this.parameters,u,h,v,w)}}class ha{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class yr{constructor(u){this.specification=u}possiblyEvaluate(u,h){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(h)}interpolate(u,h,v){const w=Ci[this.specification.type];return w?w(u,h,v):u}}class Zr{constructor(u,h){this.specification=u,this.overrides=h}possiblyEvaluate(u,h,v,w){return new ys(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(h,null,{},v,w)}:u.expression,h)}interpolate(u,h,v){if(u.value.kind!=="constant"||h.value.kind!=="constant")return u;if(u.value.value===void 0||h.value.value===void 0)return new ys(this,{kind:"constant",value:void 0},u.parameters);const w=Ci[this.specification.type];if(w){const K=w(u.value.value,h.value.value,v);return new ys(this,{kind:"constant",value:K},u.parameters)}return u}evaluate(u,h,v,w,K,U){return u.kind==="constant"?u.value:u.evaluate(h,v,w,K,U)}}class $u extends Zr{possiblyEvaluate(u,h,v,w){if(u.value===void 0)return new ys(this,{kind:"constant",value:void 0},h);if(u.expression.kind==="constant"){const K=u.expression.evaluate(h,null,{},v,w),U=u.property.specification.type==="resolvedImage"&&typeof K!="string"?K.name:K,G=this._calculate(U,U,U,h);return new ys(this,{kind:"constant",value:G},h)}if(u.expression.kind==="camera"){const K=this._calculate(u.expression.evaluate({zoom:h.zoom-1}),u.expression.evaluate({zoom:h.zoom}),u.expression.evaluate({zoom:h.zoom+1}),h);return new ys(this,{kind:"constant",value:K},h)}return new ys(this,u.expression,h)}evaluate(u,h,v,w,K,U){if(u.kind==="source"){const G=u.evaluate(h,v,w,K,U);return this._calculate(G,G,G,h)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(h.zoom)-1},v,w),u.evaluate({zoom:Math.floor(h.zoom)},v,w),u.evaluate({zoom:Math.floor(h.zoom)+1},v,w),h):u.value}_calculate(u,h,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:v,to:h}}interpolate(u){return u}}class sc{constructor(u){this.specification=u}possiblyEvaluate(u,h,v,w){if(u.value!==void 0){if(u.expression.kind==="constant"){const K=u.expression.evaluate(h,null,{},v,w);return this._calculate(K,K,K,h)}return this._calculate(u.expression.evaluate(new Xo(Math.floor(h.zoom-1),h)),u.expression.evaluate(new Xo(Math.floor(h.zoom),h)),u.expression.evaluate(new Xo(Math.floor(h.zoom+1),h)),h)}}_calculate(u,h,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:v,to:h}}interpolate(u){return u}}class Mu{constructor(u){this.specification=u}possiblyEvaluate(u,h,v,w){return!!u.expression.evaluate(h,null,{},v,w)}interpolate(){return!1}}class xs{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in u){const v=u[h];v.specification.overridable&&this.overridableProperties.push(h);const w=this.defaultPropertyValues[h]=new lu(v,void 0),K=this.defaultTransitionablePropertyValues[h]=new Yu(v);this.defaultTransitioningPropertyValues[h]=K.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=w.possiblyEvaluate({})}}}vr("DataDrivenProperty",Zr),vr("DataConstantProperty",yr),vr("CrossFadedDataDrivenProperty",$u),vr("CrossFadedProperty",sc),vr("ColorRampProperty",Mu);const Wf="-transition";class uu extends rr{constructor(u,h){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),h.layout&&(this._unevaluatedLayout=new Ec(h.layout)),h.paint)){this._transitionablePaint=new Sc(h.paint);for(const v in u.paint)this.setPaintProperty(v,u.paint[v],{validate:!1});for(const v in u.layout)this.setLayoutProperty(v,u.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ha(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,h,v={}){h!=null&&this._validate(qs,`layers.${this.id}.layout.${u}`,u,h,v)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,h):this.visibility=h)}getPaintProperty(u){return u.endsWith(Wf)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,h,v={}){if(h!=null&&this._validate(Ia,`layers.${this.id}.paint.${u}`,u,h,v))return!1;if(u.endsWith(Wf))return this._transitionablePaint.setTransition(u.slice(0,-11),h||void 0),!1;{const w=this._transitionablePaint._values[u],K=w.property.specification["property-type"]==="cross-faded-data-driven",U=w.value.isDataDriven(),G=w.value;this._transitionablePaint.setValue(u,h),this._handleSpecialPaintPropertyUpdate(u);const X=this._transitionablePaint._values[u].value;return X.isDataDriven()||U||K||this._handleOverridablePaintPropertyUpdate(u,G,X)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,h,v){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,h){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,h)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ue(u,(h,v)=>!(h===void 0||v==="layout"&&!Object.keys(h).length||v==="paint"&&!Object.keys(h).length))}_validate(u,h,v,w,K={}){return(!K||K.validate!==!1)&&bs(this,u.call(Bs,{key:h,layerType:this.type,objectKey:v,value:w,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const h=this.paint.get(u);if(h instanceof ys&&_u(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const Gf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Su{constructor(u,h){this._structArray=u,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ro{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,h){return u._trim(),h&&(u.isTransferred=!0,h.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const h=Object.create(this.prototype);return h.arrayBuffer=u.arrayBuffer,h.length=u.length,h.capacity=u.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ks(f,u=1){let h=0,v=0;return{members:f.map(w=>{const K=Gf[w.type].BYTES_PER_ELEMENT,U=h=ah(h,Math.max(u,K)),G=w.components||1;return v=Math.max(v,K),h+=K*G,{name:w.name,type:w.type,components:G,offset:U}}),size:ah(h,Math.max(v,u)),alignment:u}}function ah(f,u){return Math.ceil(f/u)*u}class IA extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const w=2*u;return this.int16[w+0]=h,this.int16[w+1]=v,u}}IA.prototype.bytesPerElement=4,vr("StructArrayLayout2i4",IA);class lh extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=3*u;return this.int16[K+0]=h,this.int16[K+1]=v,this.int16[K+2]=w,u}}lh.prototype.bytesPerElement=6,vr("StructArrayLayout3i6",lh);class kA extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w){const K=this.length;return this.resize(K+1),this.emplace(K,u,h,v,w)}emplace(u,h,v,w,K){const U=4*u;return this.int16[U+0]=h,this.int16[U+1]=v,this.int16[U+2]=w,this.int16[U+3]=K,u}}kA.prototype.bytesPerElement=8,vr("StructArrayLayout4i8",kA);class Ys extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,U){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,v,w,K,U)}emplace(u,h,v,w,K,U,G){const X=6*u;return this.int16[X+0]=h,this.int16[X+1]=v,this.int16[X+2]=w,this.int16[X+3]=K,this.int16[X+4]=U,this.int16[X+5]=G,u}}Ys.prototype.bytesPerElement=12,vr("StructArrayLayout2i4i12",Ys);class Bc extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,U){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,v,w,K,U)}emplace(u,h,v,w,K,U,G){const X=4*u,re=8*u;return this.int16[X+0]=h,this.int16[X+1]=v,this.uint8[re+4]=w,this.uint8[re+5]=K,this.uint8[re+6]=U,this.uint8[re+7]=G,u}}Bc.prototype.bytesPerElement=8,vr("StructArrayLayout2i4ub8",Bc);class Yl extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const w=2*u;return this.float32[w+0]=h,this.float32[w+1]=v,u}}Yl.prototype.bytesPerElement=8,vr("StructArrayLayout2f8",Yl);class pl extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,U,G,X,re,de){const xe=this.length;return this.resize(xe+1),this.emplace(xe,u,h,v,w,K,U,G,X,re,de)}emplace(u,h,v,w,K,U,G,X,re,de,xe){const Fe=10*u;return this.uint16[Fe+0]=h,this.uint16[Fe+1]=v,this.uint16[Fe+2]=w,this.uint16[Fe+3]=K,this.uint16[Fe+4]=U,this.uint16[Fe+5]=G,this.uint16[Fe+6]=X,this.uint16[Fe+7]=re,this.uint16[Fe+8]=de,this.uint16[Fe+9]=xe,u}}pl.prototype.bytesPerElement=20,vr("StructArrayLayout10ui20",pl);class Vu extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,U,G,X,re,de,xe,Fe){const ze=this.length;return this.resize(ze+1),this.emplace(ze,u,h,v,w,K,U,G,X,re,de,xe,Fe)}emplace(u,h,v,w,K,U,G,X,re,de,xe,Fe,ze){const Ge=12*u;return this.int16[Ge+0]=h,this.int16[Ge+1]=v,this.int16[Ge+2]=w,this.int16[Ge+3]=K,this.uint16[Ge+4]=U,this.uint16[Ge+5]=G,this.uint16[Ge+6]=X,this.uint16[Ge+7]=re,this.int16[Ge+8]=de,this.int16[Ge+9]=xe,this.int16[Ge+10]=Fe,this.int16[Ge+11]=ze,u}}Vu.prototype.bytesPerElement=24,vr("StructArrayLayout4i4ui4i24",Vu);class Oc extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=3*u;return this.float32[K+0]=h,this.float32[K+1]=v,this.float32[K+2]=w,u}}Oc.prototype.bytesPerElement=12,vr("StructArrayLayout3f12",Oc);class Eu extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint32[1*u+0]=h,u}}Eu.prototype.bytesPerElement=4,vr("StructArrayLayout1ul4",Eu);class _a extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,U,G,X,re){const de=this.length;return this.resize(de+1),this.emplace(de,u,h,v,w,K,U,G,X,re)}emplace(u,h,v,w,K,U,G,X,re,de){const xe=10*u,Fe=5*u;return this.int16[xe+0]=h,this.int16[xe+1]=v,this.int16[xe+2]=w,this.int16[xe+3]=K,this.int16[xe+4]=U,this.int16[xe+5]=G,this.uint32[Fe+3]=X,this.uint16[xe+8]=re,this.uint16[xe+9]=de,u}}_a.prototype.bytesPerElement=20,vr("StructArrayLayout6i1ul2ui20",_a);class Js extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,U){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,v,w,K,U)}emplace(u,h,v,w,K,U,G){const X=6*u;return this.int16[X+0]=h,this.int16[X+1]=v,this.int16[X+2]=w,this.int16[X+3]=K,this.int16[X+4]=U,this.int16[X+5]=G,u}}Js.prototype.bytesPerElement=12,vr("StructArrayLayout2i2i2i12",Js);class Au extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K){const U=this.length;return this.resize(U+1),this.emplace(U,u,h,v,w,K)}emplace(u,h,v,w,K,U){const G=4*u,X=8*u;return this.float32[G+0]=h,this.float32[G+1]=v,this.float32[G+2]=w,this.int16[X+6]=K,this.int16[X+7]=U,u}}Au.prototype.bytesPerElement=16,vr("StructArrayLayout2f1f2i16",Au);class cu extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,U){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,v,w,K,U)}emplace(u,h,v,w,K,U,G){const X=16*u,re=4*u,de=8*u;return this.uint8[X+0]=h,this.uint8[X+1]=v,this.float32[re+1]=w,this.float32[re+2]=K,this.int16[de+6]=U,this.int16[de+7]=G,u}}cu.prototype.bytesPerElement=16,vr("StructArrayLayout2ub2f2i16",cu);class fA extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=3*u;return this.uint16[K+0]=h,this.uint16[K+1]=v,this.uint16[K+2]=w,u}}fA.prototype.bytesPerElement=6,vr("StructArrayLayout3ui6",fA);class Bu extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,U,G,X,re,de,xe,Fe,ze,Ge,Je,At,xt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,u,h,v,w,K,U,G,X,re,de,xe,Fe,ze,Ge,Je,At,xt)}emplace(u,h,v,w,K,U,G,X,re,de,xe,Fe,ze,Ge,Je,At,xt,Wt){const Bt=24*u,Le=12*u,lt=48*u;return this.int16[Bt+0]=h,this.int16[Bt+1]=v,this.uint16[Bt+2]=w,this.uint16[Bt+3]=K,this.uint32[Le+2]=U,this.uint32[Le+3]=G,this.uint32[Le+4]=X,this.uint16[Bt+10]=re,this.uint16[Bt+11]=de,this.uint16[Bt+12]=xe,this.float32[Le+7]=Fe,this.float32[Le+8]=ze,this.uint8[lt+36]=Ge,this.uint8[lt+37]=Je,this.uint8[lt+38]=At,this.uint32[Le+10]=xt,this.int16[Bt+22]=Wt,u}}Bu.prototype.bytesPerElement=48,vr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bu);class Ic extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,w,K,U,G,X,re,de,xe,Fe,ze,Ge,Je,At,xt,Wt,Bt,Le,lt,It,cn,jn,vn,Mn,ir,zn){const dr=this.length;return this.resize(dr+1),this.emplace(dr,u,h,v,w,K,U,G,X,re,de,xe,Fe,ze,Ge,Je,At,xt,Wt,Bt,Le,lt,It,cn,jn,vn,Mn,ir,zn)}emplace(u,h,v,w,K,U,G,X,re,de,xe,Fe,ze,Ge,Je,At,xt,Wt,Bt,Le,lt,It,cn,jn,vn,Mn,ir,zn,dr){const In=32*u,Qr=16*u;return this.int16[In+0]=h,this.int16[In+1]=v,this.int16[In+2]=w,this.int16[In+3]=K,this.int16[In+4]=U,this.int16[In+5]=G,this.int16[In+6]=X,this.int16[In+7]=re,this.uint16[In+8]=de,this.uint16[In+9]=xe,this.uint16[In+10]=Fe,this.uint16[In+11]=ze,this.uint16[In+12]=Ge,this.uint16[In+13]=Je,this.uint16[In+14]=At,this.uint16[In+15]=xt,this.uint16[In+16]=Wt,this.uint16[In+17]=Bt,this.uint16[In+18]=Le,this.uint16[In+19]=lt,this.uint16[In+20]=It,this.uint16[In+21]=cn,this.uint16[In+22]=jn,this.uint32[Qr+12]=vn,this.float32[Qr+13]=Mn,this.float32[Qr+14]=ir,this.uint16[In+30]=zn,this.uint16[In+31]=dr,u}}Ic.prototype.bytesPerElement=64,vr("StructArrayLayout8i15ui1ul2f2ui64",Ic);class Hu extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.float32[1*u+0]=h,u}}Hu.prototype.bytesPerElement=4,vr("StructArrayLayout1f4",Hu);class $l extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=3*u;return this.uint16[6*u+0]=h,this.float32[K+1]=v,this.float32[K+2]=w,u}}$l.prototype.bytesPerElement=12,vr("StructArrayLayout1ui2f12",$l);class Bd extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const K=4*u;return this.uint32[2*u+0]=h,this.uint16[K+2]=v,this.uint16[K+3]=w,u}}Bd.prototype.bytesPerElement=8,vr("StructArrayLayout1ul2ui8",Bd);class T extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const w=2*u;return this.uint16[w+0]=h,this.uint16[w+1]=v,u}}T.prototype.bytesPerElement=4,vr("StructArrayLayout2ui4",T);class l extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint16[1*u+0]=h,u}}l.prototype.bytesPerElement=2,vr("StructArrayLayout1ui2",l);class c extends Ro{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,w){const K=this.length;return this.resize(K+1),this.emplace(K,u,h,v,w)}emplace(u,h,v,w,K){const U=4*u;return this.float32[U+0]=h,this.float32[U+1]=v,this.float32[U+2]=w,this.float32[U+3]=K,u}}c.prototype.bytesPerElement=16,vr("StructArrayLayout4f16",c);class _ extends Su{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}_.prototype.size=20;class M extends _a{get(u){return new _(this,u)}}vr("CollisionBoxArray",M);class R extends Su{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}R.prototype.size=48;class N extends Bu{get(u){return new R(this,u)}}vr("PlacedSymbolArray",N);class V extends Su{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}V.prototype.size=64;class ne extends Ic{get(u){return new V(this,u)}}vr("SymbolInstanceArray",ne);class ae extends Hu{getoffsetX(u){return this.float32[1*u+0]}}vr("GlyphOffsetArray",ae);class Me extends lh{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}vr("SymbolLineVertexArray",Me);class ke extends Su{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ke.prototype.size=12;class De extends $l{get(u){return new ke(this,u)}}vr("TextAnchorOffsetArray",De);class Ve extends Su{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ve.prototype.size=8;class Xe extends Bd{get(u){return new Ve(this,u)}}vr("FeatureIndexArray",Xe);class mt extends IA{}class ut extends IA{}class gt extends IA{}class bt extends Ys{}class Ot extends Bc{}class Pt extends Yl{}class Kt extends pl{}class jt extends Vu{}class Rt extends Oc{}class nn extends Eu{}class Xt extends Js{}class bn extends cu{}class xn extends fA{}class Cn extends T{}const kn=ks([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gn}=kn;class Bn{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,h,v,w){const K=this.segments[this.segments.length-1];return u>Bn.MAX_VERTEX_ARRAY_LENGTH&&nt(`Max vertices per segment is ${Bn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Bn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!K||K.vertexLength+u>Bn.MAX_VERTEX_ARRAY_LENGTH||K.sortKey!==w?this.createNewSegment(h,v,w):K}createNewSegment(u,h,v){const w={vertexOffset:u.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return v!==void 0&&(w.sortKey=v),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(u,h,v){return this.prepareSegment(0,u,h,v)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const h in u.vaos)u.vaos[h].destroy()}static simpleSegment(u,h,v,w){return new Bn([{vertexOffset:u,primitiveOffset:h,vertexLength:v,primitiveLength:w,vaos:{},sortKey:0}])}}function Pr(f,u){return 256*(f=vt(Math.floor(f),0,255))+vt(Math.floor(u),0,255)}Bn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,vr("SegmentVector",Bn);const Oi=ks([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Vi,Io,Ei,No={exports:{}},Wo={exports:{}},wo={exports:{}},vo=function(){if(Ei)return No.exports;Ei=1;var f=(Vi||(Vi=1,Wo.exports=function(h,v){var w,K,U,G,X,re,de,xe;for(K=h.length-(w=3&h.length),U=v,X=3432918353,re=461845907,xe=0;xe<K;)de=255&h.charCodeAt(xe)|(255&h.charCodeAt(++xe))<<8|(255&h.charCodeAt(++xe))<<16|(255&h.charCodeAt(++xe))<<24,++xe,U=27492+(65535&(G=5*(65535&(U=(U^=de=(65535&(de=(de=(65535&de)*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295)<<13|U>>>19))+((5*(U>>>16)&65535)<<16)&4294967295))+((58964+(G>>>16)&65535)<<16);switch(de=0,w){case 3:de^=(255&h.charCodeAt(xe+2))<<16;case 2:de^=(255&h.charCodeAt(xe+1))<<8;case 1:U^=de=(65535&(de=(de=(65535&(de^=255&h.charCodeAt(xe)))*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295}return U^=h.length,U=2246822507*(65535&(U^=U>>>16))+((2246822507*(U>>>16)&65535)<<16)&4294967295,U=3266489909*(65535&(U^=U>>>13))+((3266489909*(U>>>16)&65535)<<16)&4294967295,(U^=U>>>16)>>>0}),Wo.exports),u=(Io||(Io=1,wo.exports=function(h,v){for(var w,K=h.length,U=v^K,G=0;K>=4;)w=1540483477*(65535&(w=255&h.charCodeAt(G)|(255&h.charCodeAt(++G))<<8|(255&h.charCodeAt(++G))<<16|(255&h.charCodeAt(++G))<<24))+((1540483477*(w>>>16)&65535)<<16),U=1540483477*(65535&U)+((1540483477*(U>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),K-=4,++G;switch(K){case 3:U^=(255&h.charCodeAt(G+2))<<16;case 2:U^=(255&h.charCodeAt(G+1))<<8;case 1:U=1540483477*(65535&(U^=255&h.charCodeAt(G)))+((1540483477*(U>>>16)&65535)<<16)}return U=1540483477*(65535&(U^=U>>>13))+((1540483477*(U>>>16)&65535)<<16),(U^=U>>>15)>>>0}),wo.exports);return No.exports=f,No.exports.murmur3=f,No.exports.murmur2=u,No.exports}(),Ta=d(vo);class Go{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,h,v,w){this.ids.push(hs(u)),this.positions.push(h,v,w)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=hs(u);let v=0,w=this.ids.length-1;for(;v<w;){const U=v+w>>1;this.ids[U]>=h?w=U:v=U+1}const K=[];for(;this.ids[v]===h;)K.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return K}static serialize(u,h){const v=new Float64Array(u.ids),w=new Uint32Array(u.positions);return Ga(v,w,0,v.length-1),h&&h.push(v.buffer,w.buffer),{ids:v,positions:w}}static deserialize(u){const h=new Go;return h.ids=u.ids,h.positions=u.positions,h.indexed=!0,h}}function hs(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:Ta(String(f))}function Ga(f,u,h,v){for(;h<v;){const w=f[h+v>>1];let K=h-1,U=v+1;for(;;){do K++;while(f[K]<w);do U--;while(f[U]>w);if(K>=U)break;Zu(f,K,U),Zu(u,3*K,3*U),Zu(u,3*K+1,3*U+1),Zu(u,3*K+2,3*U+2)}U-h<v-U?(Ga(f,u,h,U),h=U+1):(Ga(f,u,U+1,v),v=U)}}function Zu(f,u,h){const v=f[u];f[u]=f[h],f[h]=v}vr("FeaturePositionMap",Go);class ml{constructor(u,h){this.gl=u.gl,this.location=h}}class gl extends ml{constructor(u,h){super(u,h),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class du extends ml{constructor(u,h){super(u,h),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class TA extends ml{constructor(u,h){super(u,h),this.current=ci.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const PA=new Float32Array(16);function Xu(f){return[Pr(255*f.r,255*f.g),Pr(255*f.b,255*f.a)]}class ea{constructor(u,h,v){this.value=u,this.uniformNames=h.map(w=>`u_${w}`),this.type=v}setUniform(u,h,v){u.set(v.constantOr(this.value))}getBinding(u,h,v){return this.type==="color"?new TA(u,h):new gl(u,h)}}class yl{constructor(u,h){this.uniformNames=h.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=u.tlbr}setUniform(u,h,v,w){const K=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;K&&u.set(K)}getBinding(u,h,v){return v.substr(0,9)==="u_pattern"?new du(u,h):new gl(u,h)}}class aa{constructor(u,h,v,w){this.expression=u,this.type=v,this.maxValue=0,this.paintVertexAttributes=h.map(K=>({name:`a_${K}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(u,h,v,w,K){const U=this.paintVertexArray.length,G=this.expression.evaluate(new Xo(0),h,{},w,[],K);this.paintVertexArray.resize(u),this._setPaintValue(U,u,G)}updatePaintArray(u,h,v,w){const K=this.expression.evaluate({zoom:0},v,w);this._setPaintValue(u,h,K)}_setPaintValue(u,h,v){if(this.type==="color"){const w=Xu(v);for(let K=u;K<h;K++)this.paintVertexArray.emplace(K,w[0],w[1])}else{for(let w=u;w<h;w++)this.paintVertexArray.emplace(w,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Dl{constructor(u,h,v,w,K,U){this.expression=u,this.uniformNames=h.map(G=>`u_${G}_t`),this.type=v,this.useIntegerZoom=w,this.zoom=K,this.maxValue=0,this.paintVertexAttributes=h.map(G=>({name:`a_${G}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new U}populatePaintArray(u,h,v,w,K){const U=this.expression.evaluate(new Xo(this.zoom),h,{},w,[],K),G=this.expression.evaluate(new Xo(this.zoom+1),h,{},w,[],K),X=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(X,u,U,G)}updatePaintArray(u,h,v,w){const K=this.expression.evaluate({zoom:this.zoom},v,w),U=this.expression.evaluate({zoom:this.zoom+1},v,w);this._setPaintValue(u,h,K,U)}_setPaintValue(u,h,v,w){if(this.type==="color"){const K=Xu(v),U=Xu(w);for(let G=u;G<h;G++)this.paintVertexArray.emplace(G,K[0],K[1],U[0],U[1])}else{for(let K=u;K<h;K++)this.paintVertexArray.emplace(K,v,w);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(w))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,h){const v=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,w=vt(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);u.set(w)}getBinding(u,h,v){return new gl(u,h)}}class ws{constructor(u,h,v,w,K,U){this.expression=u,this.type=h,this.useIntegerZoom=v,this.zoom=w,this.layerId=U,this.zoomInPaintVertexArray=new K,this.zoomOutPaintVertexArray=new K}populatePaintArray(u,h,v){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(w,u,h.patterns&&h.patterns[this.layerId],v)}updatePaintArray(u,h,v,w,K){this._setPaintValues(u,h,v.patterns&&v.patterns[this.layerId],K)}_setPaintValues(u,h,v,w){if(!w||!v)return;const{min:K,mid:U,max:G}=v,X=w[K],re=w[U],de=w[G];if(X&&re&&de)for(let xe=u;xe<h;xe++)this.zoomInPaintVertexArray.emplace(xe,re.tl[0],re.tl[1],re.br[0],re.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],re.pixelRatio,X.pixelRatio),this.zoomOutPaintVertexArray.emplace(xe,re.tl[0],re.tl[1],re.br[0],re.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],re.pixelRatio,de.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Oi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Oi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $s{constructor(u,h,v){this.binders={},this._buffers=[];const w=[];for(const K in u.paint._values){if(!v(K))continue;const U=u.paint.get(K);if(!(U instanceof ys&&_u(U.property.specification)))continue;const G=ol(K,u.type),X=U.value,re=U.property.specification.type,de=U.property.useIntegerZoom,xe=U.property.specification["property-type"],Fe=xe==="cross-faded"||xe==="cross-faded-data-driven";if(X.kind==="constant")this.binders[K]=Fe?new yl(X.value,G):new ea(X.value,G,re),w.push(`/u_${K}`);else if(X.kind==="source"||Fe){const ze=Od(K,re,"source");this.binders[K]=Fe?new ws(X,re,de,h,ze,u.id):new aa(X,G,re,ze),w.push(`/a_${K}`)}else{const ze=Od(K,re,"composite");this.binders[K]=new Dl(X,G,re,de,h,ze),w.push(`/z_${K}`)}}this.cacheKey=w.sort().join("")}getMaxValue(u){const h=this.binders[u];return h instanceof aa||h instanceof Dl?h.maxValue:0}populatePaintArrays(u,h,v,w,K){for(const U in this.binders){const G=this.binders[U];(G instanceof aa||G instanceof Dl||G instanceof ws)&&G.populatePaintArray(u,h,v,w,K)}}setConstantPatternPositions(u,h){for(const v in this.binders){const w=this.binders[v];w instanceof yl&&w.setConstantPatternPositions(u,h)}}updatePaintArrays(u,h,v,w,K){let U=!1;for(const G in u){const X=h.getPositions(G);for(const re of X){const de=v.feature(re.index);for(const xe in this.binders){const Fe=this.binders[xe];if((Fe instanceof aa||Fe instanceof Dl||Fe instanceof ws)&&Fe.expression.isStateDependent===!0){const ze=w.paint.get(xe);Fe.expression=ze.value,Fe.updatePaintArray(re.start,re.end,de,u[G],K),U=!0}}}}return U}defines(){const u=[];for(const h in this.binders){const v=this.binders[h];(v instanceof ea||v instanceof yl)&&u.push(...v.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return u}getBinderAttributes(){const u=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof aa||v instanceof Dl)for(let w=0;w<v.paintVertexAttributes.length;w++)u.push(v.paintVertexAttributes[w].name);else if(v instanceof ws)for(let w=0;w<Oi.members.length;w++)u.push(Oi.members[w].name)}return u}getBinderUniforms(){const u=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof ea||v instanceof yl||v instanceof Dl)for(const w of v.uniformNames)u.push(w)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,h){const v=[];for(const w in this.binders){const K=this.binders[w];if(K instanceof ea||K instanceof yl||K instanceof Dl){for(const U of K.uniformNames)if(h[U]){const G=K.getBinding(u,h[U],U);v.push({name:U,property:w,binding:G})}}}return v}setUniforms(u,h,v,w){for(const{name:K,property:U,binding:G}of h)this.binders[U].setUniform(G,w,v.get(U),K)}updatePaintBuffers(u){this._buffers=[];for(const h in this.binders){const v=this.binders[h];if(u&&v instanceof ws){const w=u.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(v instanceof aa||v instanceof Dl)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(u){for(const h in this.binders){const v=this.binders[h];(v instanceof aa||v instanceof Dl||v instanceof ws)&&v.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const h=this.binders[u];(h instanceof aa||h instanceof Dl||h instanceof ws)&&h.destroy()}}}class il{constructor(u,h,v=()=>!0){this.programConfigurations={};for(const w of u)this.programConfigurations[w.id]=new $s(w,h,v);this.needsUpload=!1,this._featureMap=new Go,this._bufferOffset=0}populatePaintArrays(u,h,v,w,K,U){for(const G in this.programConfigurations)this.programConfigurations[G].populatePaintArrays(u,h,w,K,U);h.id!==void 0&&this._featureMap.add(h.id,v,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,h,v,w){for(const K of v)this.needsUpload=this.programConfigurations[K.id].updatePaintArrays(u,this._featureMap,h,K,w)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function ol(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function Od(f,u,h){const v={color:{source:Yl,composite:c},number:{source:Hu,composite:Yl}},w=function(K){return{"line-pattern":{source:Kt,composite:Kt},"fill-pattern":{source:Kt,composite:Kt},"fill-extrusion-pattern":{source:Kt,composite:Kt}}[K]}(f);return w&&w[h]||v[u][h]}vr("ConstantBinder",ea),vr("CrossFadedConstantBinder",yl),vr("SourceExpressionBinder",aa),vr("CrossFadedCompositeBinder",ws),vr("CompositeExpressionBinder",Dl),vr("ProgramConfiguration",$s,{omit:["_buffers"]}),vr("ProgramConfigurationSet",il);const Th=Math.pow(2,14)-1,Ph=-Th-1;function Id(f){const u=st/f.extent,h=f.loadGeometry();for(let v=0;v<h.length;v++){const w=h[v];for(let K=0;K<w.length;K++){const U=w[K],G=Math.round(U.x*u),X=Math.round(U.y*u);U.x=vt(G,Ph,Th),U.y=vt(X,Ph,Th),(G<U.x||G>U.x+1||X<U.y||X>U.y+1)&&nt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function ac(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?Id(f):[]}}const Rh=-32768;function Pa(f,u,h,v,w){f.emplaceBack(Rh+8*u+v,Rh+8*h+w)}class hu{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new ut,this.indexArray=new xn,this.segments=new Bn,this.programConfigurations=new il(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){const w=this.layers[0],K=[];let U=null,G=!1,X=w.type==="heatmap";if(w.type==="circle"){const de=w;U=de.layout.get("circle-sort-key"),G=!U.isConstant(),X=X||de.paint.get("circle-pitch-alignment")==="map"}const re=X?h.subdivisionGranularity.circle:1;for(const{feature:de,id:xe,index:Fe,sourceLayerIndex:ze}of u){const Ge=this.layers[0]._featureFilter.needGeometry,Je=ac(de,Ge);if(!this.layers[0]._featureFilter.filter(new Xo(this.zoom),Je,v))continue;const At=G?U.evaluate(Je,{},v):void 0,xt={id:xe,properties:de.properties,type:de.type,sourceLayerIndex:ze,index:Fe,geometry:Ge?Je.geometry:Id(de),patterns:{},sortKey:At};K.push(xt)}G&&K.sort((de,xe)=>de.sortKey-xe.sortKey);for(const de of K){const{geometry:xe,index:Fe,sourceLayerIndex:ze}=de,Ge=u[Fe].feature;this.addFeature(de,xe,Fe,v,re),h.featureIndex.insert(Ge,xe,Fe,ze,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Gn),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,h,v,w,K=1){let U;switch(K){case 1:U=[0,7];break;case 3:U=[0,2,5,7];break;case 5:U=[0,1,3,4,6,7];break;case 7:U=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${K}; valid values are 1, 3, 5, 7.`)}const G=U.length;for(const X of h)for(const re of X){const de=re.x,xe=re.y;if(de<0||de>=st||xe<0||xe>=st)continue;const Fe=this.segments.prepareSegment(G*G,this.layoutVertexArray,this.indexArray,u.sortKey),ze=Fe.vertexLength;for(let Ge=0;Ge<G;Ge++)for(let Je=0;Je<G;Je++)Pa(this.layoutVertexArray,de,xe,U[Je],U[Ge]);for(let Ge=0;Ge<G-1;Ge++)for(let Je=0;Je<G-1;Je++){const At=ze+Ge*G+Je,xt=ze+(Ge+1)*G+Je;this.indexArray.emplaceBack(At,xt+1,At+1),this.indexArray.emplaceBack(At,xt,xt+1)}Fe.vertexLength+=G*G,Fe.primitiveLength+=(G-1)*(G-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,{},w)}}function kd(f,u){for(let h=0;h<f.length;h++)if(Tc(u,f[h]))return!0;for(let h=0;h<u.length;h++)if(Tc(f,u[h]))return!0;return!!Qa(f,u)}function Bp(f,u,h){return!!Tc(f,u)||!!Dh(u,f,h)}function kc(f,u){if(f.length===1)return uh(u,f[0]);for(let h=0;h<u.length;h++){const v=u[h];for(let w=0;w<v.length;w++)if(Tc(f,v[w]))return!0}for(let h=0;h<f.length;h++)if(uh(u,f[h]))return!0;for(let h=0;h<u.length;h++)if(Qa(f,u[h]))return!0;return!1}function RA(f,u,h){if(f.length>1){if(Qa(f,u))return!0;for(let v=0;v<u.length;v++)if(Dh(u[v],f,h))return!0}for(let v=0;v<f.length;v++)if(Dh(f[v],u,h))return!0;return!1}function Qa(f,u){if(f.length===0||u.length===0)return!1;for(let h=0;h<f.length-1;h++){const v=f[h],w=f[h+1];for(let K=0;K<u.length-1;K++)if(Op(v,w,u[K],u[K+1]))return!0}return!1}function Op(f,u,h,v){return Ct(f,h,v)!==Ct(u,h,v)&&Ct(f,u,h)!==Ct(f,u,v)}function Dh(f,u,h){const v=h*h;if(u.length===1)return f.distSqr(u[0])<v;for(let w=1;w<u.length;w++)if(Ip(f,u[w-1],u[w])<v)return!0;return!1}function Ip(f,u,h){const v=u.distSqr(h);if(v===0)return f.distSqr(u);const w=((f.x-u.x)*(h.x-u.x)+(f.y-u.y)*(h.y-u.y))/v;return f.distSqr(w<0?u:w>1?h:h.sub(u)._mult(w)._add(u))}function uh(f,u){let h,v,w,K=!1;for(let U=0;U<f.length;U++){h=f[U];for(let G=0,X=h.length-1;G<h.length;X=G++)v=h[G],w=h[X],v.y>u.y!=w.y>u.y&&u.x<(w.x-v.x)*(u.y-v.y)/(w.y-v.y)+v.x&&(K=!K)}return K}function Tc(f,u){let h=!1;for(let v=0,w=f.length-1;v<f.length;w=v++){const K=f[v],U=f[w];K.y>u.y!=U.y>u.y&&u.x<(U.x-K.x)*(u.y-K.y)/(U.y-K.y)+K.x&&(h=!h)}return h}function gm(f,u,h){const v=h[0],w=h[2];if(f.x<v.x&&u.x<v.x||f.x>w.x&&u.x>w.x||f.y<v.y&&u.y<v.y||f.y>w.y&&u.y>w.y)return!1;const K=Ct(f,u,h[0]);return K!==Ct(f,u,h[1])||K!==Ct(f,u,h[2])||K!==Ct(f,u,h[3])}function lc(f,u,h){const v=u.paint.get(f).value;return v.kind==="constant"?v.value:h.programConfigurations.get(u.id).getMaxValue(f)}function Kh(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Td(f,u,h,v,w){if(!u[0]&&!u[1])return f;const K=k.convert(u)._mult(w);h==="viewport"&&K._rotate(-v);const U=[];for(let G=0;G<f.length;G++)U.push(f[G].sub(K));return U}let kp,Ah;vr("CircleBucket",hu,{omit:["layers"]});var Qf={get paint(){return Ah=Ah||new xs({"circle-radius":new Zr(Oe.paint_circle["circle-radius"]),"circle-color":new Zr(Oe.paint_circle["circle-color"]),"circle-blur":new Zr(Oe.paint_circle["circle-blur"]),"circle-opacity":new Zr(Oe.paint_circle["circle-opacity"]),"circle-translate":new yr(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new yr(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yr(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yr(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Zr(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Zr(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Zr(Oe.paint_circle["circle-stroke-opacity"])})},get layout(){return kp=kp||new xs({"circle-sort-key":new Zr(Oe.layout_circle["circle-sort-key"])})}};class qf extends uu{constructor(u){super(u,Qf)}createBucket(u){return new hu(u)}queryRadius(u){const h=u;return lc("circle-radius",this,h)+lc("circle-stroke-width",this,h)+Kh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:w,transform:K,pixelsToTileUnits:U,pixelPosMatrix:G}){const X=Td(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-K.bearingInRadians,U),re=this.paint.get("circle-radius").evaluate(h,v)+this.paint.get("circle-stroke-width").evaluate(h,v),de=this.paint.get("circle-pitch-alignment")==="map",xe=de?X:function(ze,Ge){return ze.map(Je=>Tp(Je,Ge))}(X,G),Fe=de?re*U:re;for(const ze of w)for(const Ge of ze){const Je=de?Ge:Tp(Ge,G);let At=Fe;const xt=pe([],[Ge.x,Ge.y,0,1],G);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?At*=xt[3]/K.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(At*=K.cameraToCenterDistance/xt[3]),Bp(xe,Je,At))return!0}return!1}}function Tp(f,u){const h=pe([],[f.x,f.y,0,1],u);return new k(h[0]/h[3],h[1]/h[3])}class Pd extends hu{}let df;vr("HeatmapBucket",Pd,{omit:["layers"]});var Vl={get paint(){return df=df||new xs({"heatmap-radius":new Zr(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Zr(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yr(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Mu(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yr(Oe.paint_heatmap["heatmap-opacity"])})}};function Kl(f,{width:u,height:h},v,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==u*h*v)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${u*h*v}`)}else w=new Uint8Array(u*h*v);return f.width=u,f.height=h,f.data=w,f}function ym(f,{width:u,height:h},v){if(u===f.width&&h===f.height)return;const w=Kl({},{width:u,height:h},v);Yf(f,w,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,h)},v),f.width=u,f.height=h,f.data=w.data}function Yf(f,u,h,v,w,K){if(w.width===0||w.height===0)return u;if(w.width>f.width||w.height>f.height||h.x>f.width-w.width||h.y>f.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>u.width||w.height>u.height||v.x>u.width-w.width||v.y>u.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const U=f.data,G=u.data;if(U===G)throw new Error("srcData equals dstData, so image is already copied");for(let X=0;X<w.height;X++){const re=((h.y+X)*f.width+h.x)*K,de=((v.y+X)*u.width+v.x)*K;for(let xe=0;xe<w.width*K;xe++)G[de+xe]=U[re+xe]}return u}class ko{constructor(u,h){Kl(this,u,1,h)}resize(u){ym(this,u,1)}clone(){return new ko({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,v,w,K){Yf(u,h,v,w,K,1)}}class Ju{constructor(u,h){Kl(this,u,4,h)}resize(u){ym(this,u,4)}replace(u,h){h?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Ju({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,v,w,K){Yf(u,h,v,w,K,4)}}function hf(f){const u={},h=f.resolution||256,v=f.clips?f.clips.length:1,w=f.image||new Ju({width:h,height:v});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const K=(U,G,X)=>{u[f.evaluationKey]=X;const re=f.expression.evaluate(u);w.data[U+G+0]=Math.floor(255*re.r/re.a),w.data[U+G+1]=Math.floor(255*re.g/re.a),w.data[U+G+2]=Math.floor(255*re.b/re.a),w.data[U+G+3]=Math.floor(255*re.a)};if(f.clips)for(let U=0,G=0;U<v;++U,G+=4*h)for(let X=0,re=0;X<h;X++,re+=4){const de=X/(h-1),{start:xe,end:Fe}=f.clips[U];K(G,re,xe*(1-de)+Fe*de)}else for(let U=0,G=0;U<h;U++,G+=4)K(0,G,U/(h-1));return w}vr("AlphaImage",ko),vr("RGBAImage",Ju);const Rd="big-fb";class DA extends uu{createBucket(u){return new Pd(u)}constructor(u){super(u,Vl),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Rd)&&this.heatmapFbos.delete(Rd)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Fh;var Pp={get paint(){return Fh=Fh||new xs({"hillshade-illumination-direction":new yr(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yr(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yr(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yr(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yr(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yr(Oe.paint_hillshade["hillshade-accent-color"])})}};class Pc extends uu{constructor(u){super(u,Pp)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const ff=ks([{name:"a_pos",components:2,type:"Int16"}],4),{members:pf}=ff;function ch(f,u,h){const v=h.patternDependencies;let w=!1;for(const K of u){const U=K.paint.get(`${f}-pattern`);U.isConstant()||(w=!0);const G=U.constantOr(null);G&&(w=!0,v[G.to]=!0,v[G.from]=!0)}return w}function Dd(f,u,h,v,w){const K=w.patternDependencies;for(const U of u){const G=U.paint.get(`${f}-pattern`).value;if(G.kind!=="constant"){let X=G.evaluate({zoom:v-1},h,{},w.availableImages),re=G.evaluate({zoom:v},h,{},w.availableImages),de=G.evaluate({zoom:v+1},h,{},w.availableImages);X=X&&X.name?X.name:X,re=re&&re.name?re.name:re,de=de&&de.name?de.name:de,K[X]=!0,K[re]=!0,K[de]=!0,h.patterns[U.id]={min:X,mid:re,max:de}}}return h}function ed(f,u,h,v,w){let K;if(w===function(U,G,X,re){let de=0;for(let xe=G,Fe=X-re;xe<X;xe+=re)de+=(U[Fe]-U[xe])*(U[xe+1]+U[Fe+1]),Fe=xe;return de}(f,u,h,v)>0)for(let U=u;U<h;U+=v)K=be(U/v|0,f[U],f[U+1],K);else for(let U=h-v;U>=u;U-=v)K=be(U/v|0,f[U],f[U+1],K);return K&&y(K,K.next)&&(Te(K),K=K.next),K}function hi(f,u){if(!f)return f;u||(u=f);let h,v=f;do if(h=!1,v.steiner||!y(v,v.next)&&A(v.prev,v,v.next)!==0)v=v.next;else{if(Te(v),v=u=v.prev,v===v.next)break;h=!0}while(h||v!==u);return u}function td(f,u,h,v,w,K,U){if(!f)return;!U&&K&&function(X,re,de,xe){let Fe=X;do Fe.z===0&&(Fe.z=fa(Fe.x,Fe.y,re,de,xe)),Fe.prevZ=Fe.prev,Fe.nextZ=Fe.next,Fe=Fe.next;while(Fe!==X);Fe.prevZ.nextZ=null,Fe.prevZ=null,function(ze){let Ge,Je=1;do{let At,xt=ze;ze=null;let Wt=null;for(Ge=0;xt;){Ge++;let Bt=xt,Le=0;for(let It=0;It<Je&&(Le++,Bt=Bt.nextZ,Bt);It++);let lt=Je;for(;Le>0||lt>0&&Bt;)Le!==0&&(lt===0||!Bt||xt.z<=Bt.z)?(At=xt,xt=xt.nextZ,Le--):(At=Bt,Bt=Bt.nextZ,lt--),Wt?Wt.nextZ=At:ze=At,At.prevZ=Wt,Wt=At;xt=Bt}Wt.nextZ=null,Je*=2}while(Ge>1)}(Fe)}(f,v,w,K);let G=f;for(;f.prev!==f.next;){const X=f.prev,re=f.next;if(K?Kd(f,v,w,K):os(f))u.push(X.i,f.i,re.i),Te(f),f=re.next,G=re.next;else if((f=re)===G){U?U===1?td(f=Rp(hi(f),u),u,h,v,w,K,2):U===2&&Ou(f,u,h,v,w,K):td(hi(f),u,h,v,w,K,1);break}}}function os(f){const u=f.prev,h=f,v=f.next;if(A(u,h,v)>=0)return!1;const w=u.x,K=h.x,U=v.x,G=u.y,X=h.y,re=v.y,de=Math.min(w,K,U),xe=Math.min(G,X,re),Fe=Math.max(w,K,U),ze=Math.max(G,X,re);let Ge=v.next;for(;Ge!==u;){if(Ge.x>=de&&Ge.x<=Fe&&Ge.y>=xe&&Ge.y<=ze&&sl(w,G,K,X,U,re,Ge.x,Ge.y)&&A(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.next}return!0}function Kd(f,u,h,v){const w=f.prev,K=f,U=f.next;if(A(w,K,U)>=0)return!1;const G=w.x,X=K.x,re=U.x,de=w.y,xe=K.y,Fe=U.y,ze=Math.min(G,X,re),Ge=Math.min(de,xe,Fe),Je=Math.max(G,X,re),At=Math.max(de,xe,Fe),xt=fa(ze,Ge,u,h,v),Wt=fa(Je,At,u,h,v);let Bt=f.prevZ,Le=f.nextZ;for(;Bt&&Bt.z>=xt&&Le&&Le.z<=Wt;){if(Bt.x>=ze&&Bt.x<=Je&&Bt.y>=Ge&&Bt.y<=At&&Bt!==w&&Bt!==U&&sl(G,de,X,xe,re,Fe,Bt.x,Bt.y)&&A(Bt.prev,Bt,Bt.next)>=0||(Bt=Bt.prevZ,Le.x>=ze&&Le.x<=Je&&Le.y>=Ge&&Le.y<=At&&Le!==w&&Le!==U&&sl(G,de,X,xe,re,Fe,Le.x,Le.y)&&A(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Bt&&Bt.z>=xt;){if(Bt.x>=ze&&Bt.x<=Je&&Bt.y>=Ge&&Bt.y<=At&&Bt!==w&&Bt!==U&&sl(G,de,X,xe,re,Fe,Bt.x,Bt.y)&&A(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.prevZ}for(;Le&&Le.z<=Wt;){if(Le.x>=ze&&Le.x<=Je&&Le.y>=Ge&&Le.y<=At&&Le!==w&&Le!==U&&sl(G,de,X,xe,re,Fe,Le.x,Le.y)&&A(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function Rp(f,u){let h=f;do{const v=h.prev,w=h.next.next;!y(v,w)&&I(v,h,h.next,w)&&Z(v,w)&&Z(w,v)&&(u.push(v.i,h.i,w.i),Te(h),Te(h.next),h=f=w),h=h.next}while(h!==f);return hi(h)}function Ou(f,u,h,v,w,K){let U=f;do{let G=U.next.next;for(;G!==U.prev;){if(U.i!==G.i&&Dp(U,G)){let X=Ae(U,G);return U=hi(U,U.next),X=hi(X,X.next),td(U,u,h,v,w,K,0),void td(X,u,h,v,w,K,0)}G=G.next}U=U.next}while(U!==f)}function t0(f,u){let h=f.x-u.x;return h===0&&(h=f.y-u.y,h===0)&&(h=(f.next.y-f.y)/(f.next.x-f.x)-(u.next.y-u.y)/(u.next.x-u.x)),h}function vl(f,u){const h=function(w,K){let U=K;const G=w.x,X=w.y;let re,de=-1/0;if(y(w,U))return U;do{if(y(w,U.next))return U.next;if(X<=U.y&&X>=U.next.y&&U.next.y!==U.y){const Je=U.x+(X-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(Je<=G&&Je>de&&(de=Je,re=U.x<U.next.x?U:U.next,Je===G))return re}U=U.next}while(U!==K);if(!re)return null;const xe=re,Fe=re.x,ze=re.y;let Ge=1/0;U=re;do{if(G>=U.x&&U.x>=Fe&&G!==U.x&&mf(X<ze?G:de,X,Fe,ze,X<ze?de:G,X,U.x,U.y)){const Je=Math.abs(X-U.y)/(G-U.x);Z(U,w)&&(Je<Ge||Je===Ge&&(U.x>re.x||U.x===re.x&&vm(re,U)))&&(re=U,Ge=Je)}U=U.next}while(U!==xe);return re}(f,u);if(!h)return u;const v=Ae(h,f);return hi(v,v.next),hi(h,h.next)}function vm(f,u){return A(f.prev,f,u.prev)<0&&A(u.next,f,f.next)<0}function fa(f,u,h,v,w){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-h)*w|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-v)*w|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Cm(f){let u=f,h=f;do(u.x<h.x||u.x===h.x&&u.y<h.y)&&(h=u),u=u.next;while(u!==f);return h}function mf(f,u,h,v,w,K,U,G){return(w-U)*(u-G)>=(f-U)*(K-G)&&(f-U)*(v-G)>=(h-U)*(u-G)&&(h-U)*(K-G)>=(w-U)*(v-G)}function sl(f,u,h,v,w,K,U,G){return!(f===U&&u===G)&&mf(f,u,h,v,w,K,U,G)}function Dp(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!function(h,v){let w=h;do{if(w.i!==h.i&&w.next.i!==h.i&&w.i!==v.i&&w.next.i!==v.i&&I(w,w.next,h,v))return!0;w=w.next}while(w!==h);return!1}(f,u)&&(Z(f,u)&&Z(u,f)&&function(h,v){let w=h,K=!1;const U=(h.x+v.x)/2,G=(h.y+v.y)/2;do w.y>G!=w.next.y>G&&w.next.y!==w.y&&U<(w.next.x-w.x)*(G-w.y)/(w.next.y-w.y)+w.x&&(K=!K),w=w.next;while(w!==h);return K}(f,u)&&(A(f.prev,f,u.prev)||A(f,u.prev,u))||y(f,u)&&A(f.prev,f,f.next)>0&&A(u.prev,u,u.next)>0)}function A(f,u,h){return(u.y-f.y)*(h.x-u.x)-(u.x-f.x)*(h.y-u.y)}function y(f,u){return f.x===u.x&&f.y===u.y}function I(f,u,h,v){const w=D(A(f,u,h)),K=D(A(f,u,v)),U=D(A(h,v,f)),G=D(A(h,v,u));return w!==K&&U!==G||!(w!==0||!O(f,h,u))||!(K!==0||!O(f,v,u))||!(U!==0||!O(h,f,v))||!(G!==0||!O(h,u,v))}function O(f,u,h){return u.x<=Math.max(f.x,h.x)&&u.x>=Math.min(f.x,h.x)&&u.y<=Math.max(f.y,h.y)&&u.y>=Math.min(f.y,h.y)}function D(f){return f>0?1:f<0?-1:0}function Z(f,u){return A(f.prev,f,f.next)<0?A(f,u,f.next)>=0&&A(f,f.prev,u)>=0:A(f,u,f.prev)<0||A(f,f.next,u)<0}function Ae(f,u){const h=je(f.i,f.x,f.y),v=je(u.i,u.x,u.y),w=f.next,K=u.prev;return f.next=u,u.prev=f,h.next=w,w.prev=h,v.next=h,h.prev=v,K.next=v,v.prev=K,v}function be(f,u,h,v){const w=je(f,u,h);return v?(w.next=v.next,w.prev=v,v.next.prev=w,v.next=w):(w.prev=w,w.next=w),w}function Te(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function je(f,u,h){return{i:f,x:u,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class yt{constructor(u,h){if(h>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=h}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class St{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}St.noSubdivision=new St({fill:new yt(0,0),line:new yt(0,0),tile:new yt(0,0),stencil:new yt(0,0),circle:1}),vr("SubdivisionGranularityExpression",yt),vr("SubdivisionGranularitySetting",St);const Jt=-32768,qt=32767;class En{constructor(u,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=st/u,this._canonical=h}_getKey(u,h){return(u+=32768)<<16|(h+=32768)<<0}_vertexToIndex(u,h){if(u<-32768||h<-32768||u>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const v=0|Math.round(u),w=0|Math.round(h),K=this._getKey(v,w);if(this._vertexDictionary.has(K))return this._vertexDictionary.get(K);const U=this._vertexBuffer.length/2;return this._vertexDictionary.set(K,U),this._vertexBuffer.push(v,w),U}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(w,K){const U=[];for(let G=0;G<K.length;G+=3){const X=K[G],re=K[G+1],de=K[G+2],xe=w[2*X],Fe=w[2*X+1];(w[2*re]-xe)*(w[2*de+1]-Fe)-(w[2*re+1]-Fe)*(w[2*de]-xe)>0?(U.push(X),U.push(de),U.push(re)):(U.push(X),U.push(re),U.push(de))}return U}(this._vertexBuffer,u);const h=[],v=u.length;for(let w=0;w<v;w+=3){const K=[u[w+0],u[w+1],u[w+2]],U=[this._vertexBuffer[2*u[w+0]+0],this._vertexBuffer[2*u[w+0]+1],this._vertexBuffer[2*u[w+1]+0],this._vertexBuffer[2*u[w+1]+1],this._vertexBuffer[2*u[w+2]+0],this._vertexBuffer[2*u[w+2]+1]];let G=1/0,X=1/0,re=-1/0,de=-1/0;for(let Je=0;Je<3;Je++){const At=U[2*Je],xt=U[2*Je+1];G=Math.min(G,At),re=Math.max(re,At),X=Math.min(X,xt),de=Math.max(de,xt)}if(G===re||X===de)continue;const xe=Math.floor(G/this._granularityCellSize),Fe=Math.ceil(re/this._granularityCellSize),ze=Math.floor(X/this._granularityCellSize),Ge=Math.ceil(de/this._granularityCellSize);if(xe!==Fe||ze!==Ge)for(let Je=ze;Je<Ge;Je++){const At=this._scanlineGenerateVertexRingForCellRow(Je,U,K);sr(this._vertexBuffer,At,h)}else h.push(...K)}return h}_scanlineGenerateVertexRingForCellRow(u,h,v){const w=u*this._granularityCellSize,K=w+this._granularityCellSize,U=[];for(let G=0;G<3;G++){const X=h[2*G],re=h[2*G+1],de=h[2*(G+1)%6],xe=h[(2*(G+1)+1)%6],Fe=h[2*(G+2)%6],ze=h[(2*(G+2)+1)%6],Ge=de-X,Je=xe-re,At=Ge===0,xt=Je===0,Wt=(w-re)/Je,Bt=(K-re)/Je,Le=Math.min(Wt,Bt),lt=Math.max(Wt,Bt);if(!xt&&(Le>=1||lt<=0)||xt&&(re<w||re>K)){xe>=w&&xe<=K&&U.push(v[(G+1)%3]);continue}!xt&&Le>0&&U.push(this._vertexToIndex(X+Ge*Le,re+Je*Le));const It=X+Ge*Math.max(Le,0),cn=X+Ge*Math.min(lt,1);At||this._generateIntraEdgeVertices(U,X,re,de,xe,It,cn),!xt&&lt<1&&U.push(this._vertexToIndex(X+Ge*lt,re+Je*lt)),(xt||xe>=w&&xe<=K)&&U.push(v[(G+1)%3]),!xt&&(xe<=w||xe>=K)&&this._generateInterEdgeVertices(U,X,re,de,xe,Fe,ze,cn,w,K)}return U}_generateIntraEdgeVertices(u,h,v,w,K,U,G){const X=w-h,re=K-v,de=re===0,xe=de?Math.min(h,w):Math.min(U,G),Fe=de?Math.max(h,w):Math.max(U,G),ze=Math.floor(xe/this._granularityCellSize)+1,Ge=Math.ceil(Fe/this._granularityCellSize)-1;if(de?h<w:U<G)for(let Je=ze;Je<=Ge;Je++){const At=Je*this._granularityCellSize;u.push(this._vertexToIndex(At,v+re*(At-h)/X))}else for(let Je=Ge;Je>=ze;Je--){const At=Je*this._granularityCellSize;u.push(this._vertexToIndex(At,v+re*(At-h)/X))}}_generateInterEdgeVertices(u,h,v,w,K,U,G,X,re,de){const xe=K-v,Fe=U-w,ze=G-K,Ge=(re-K)/ze,Je=(de-K)/ze,At=Math.min(Ge,Je),xt=Math.max(Ge,Je),Wt=w+Fe*At;let Bt=Math.floor(Math.min(Wt,X)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(Wt,X)/this._granularityCellSize)-1,lt=X<Wt;const It=ze===0;if(It&&(G===re||G===de))return;if(It||At>=1||xt<=0){const jn=v-G,vn=U+(h-U)*Math.min((re-G)/jn,(de-G)/jn);Bt=Math.floor(Math.min(vn,X)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(vn,X)/this._granularityCellSize)-1,lt=X<vn}const cn=xe>0?de:re;if(lt)for(let jn=Bt;jn<=Le;jn++)u.push(this._vertexToIndex(jn*this._granularityCellSize,cn));else for(let jn=Le;jn>=Bt;jn--)u.push(this._vertexToIndex(jn*this._granularityCellSize,cn))}_generateOutline(u){const h=[];for(const v of u){const w=Jn(v,this._granularity,!0),K=this._pointArrayToIndices(w),U=[];for(let G=1;G<K.length;G++)U.push(K[G-1]),U.push(K[G]);h.push(U)}return h}_handlePoles(u){let h=!1,v=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(v=!0)),(h||v)&&this._fillPoles(u,h,v)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let h=0;h<u.length;h+=2){const v=u[h+1];v===Jt&&(u[h+1]=-32767),v===qt&&(u[h+1]=32766)}}_generatePoleQuad(u,h,v,w,K,U){w>K!=(U===Jt)?(u.push(h),u.push(v),u.push(this._vertexToIndex(w,U)),u.push(v),u.push(this._vertexToIndex(K,U)),u.push(this._vertexToIndex(w,U))):(u.push(v),u.push(h),u.push(this._vertexToIndex(w,U)),u.push(this._vertexToIndex(K,U)),u.push(v),u.push(this._vertexToIndex(w,U)))}_fillPoles(u,h,v){const w=this._vertexBuffer,K=st,U=u.length;for(let G=2;G<U;G+=3){const X=u[G-2],re=u[G-1],de=u[G],xe=w[2*X],Fe=w[2*X+1],ze=w[2*re],Ge=w[2*re+1],Je=w[2*de],At=w[2*de+1];h&&(Fe===0&&Ge===0&&this._generatePoleQuad(u,X,re,xe,ze,Jt),Ge===0&&At===0&&this._generatePoleQuad(u,re,de,ze,Je,Jt),At===0&&Fe===0&&this._generatePoleQuad(u,de,X,Je,xe,Jt)),v&&(Fe===K&&Ge===K&&this._generatePoleQuad(u,X,re,xe,ze,qt),Ge===K&&At===K&&this._generatePoleQuad(u,re,de,ze,Je,qt),At===K&&Fe===K&&this._generatePoleQuad(u,de,X,Je,xe,qt))}}_initializeVertices(u){for(let h=0;h<u.length;h+=2)this._vertexToIndex(u[h],u[h+1])}subdividePolygonInternal(u,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:v,holeIndices:w}=function(G){const X=[],re=[];for(const de of G)if(de.length!==0){de!==G[0]&&X.push(re.length/2);for(let xe=0;xe<de.length;xe++)re.push(de[xe].x),re.push(de[xe].y)}return{flattened:re,holeIndices:X}}(u);let K;this._initializeVertices(v);try{const G=function(re,de,xe=2){const Fe=de&&de.length,ze=Fe?de[0]*xe:re.length;let Ge=ed(re,0,ze,xe,!0);const Je=[];if(!Ge||Ge.next===Ge.prev)return Je;let At,xt,Wt;if(Fe&&(Ge=function(Bt,Le,lt,It){const cn=[];for(let jn=0,vn=Le.length;jn<vn;jn++){const Mn=ed(Bt,Le[jn]*It,jn<vn-1?Le[jn+1]*It:Bt.length,It,!1);Mn===Mn.next&&(Mn.steiner=!0),cn.push(Cm(Mn))}cn.sort(t0);for(let jn=0;jn<cn.length;jn++)lt=vl(cn[jn],lt);return lt}(re,de,Ge,xe)),re.length>80*xe){At=1/0,xt=1/0;let Bt=-1/0,Le=-1/0;for(let lt=xe;lt<ze;lt+=xe){const It=re[lt],cn=re[lt+1];It<At&&(At=It),cn<xt&&(xt=cn),It>Bt&&(Bt=It),cn>Le&&(Le=cn)}Wt=Math.max(Bt-At,Le-xt),Wt=Wt!==0?32767/Wt:0}return td(Ge,Je,xe,At,xt,Wt,0),Je}(v,w),X=this._convertIndices(v,G);K=this._subdivideTrianglesScanline(X)}catch(G){console.error(G)}let U=[];return h&&(U=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(K),{verticesFlattened:this._vertexBuffer,indicesTriangles:K,indicesLineList:U}}_convertIndices(u,h){const v=[];for(let w=0;w<h.length;w++)v.push(this._vertexToIndex(u[2*h[w]],u[2*h[w]+1]));return v}_pointArrayToIndices(u){const h=[];for(let v=0;v<u.length;v++){const w=u[v];h.push(this._vertexToIndex(w.x,w.y))}return h}}function Fn(f,u,h,v=!0){return new En(h,u).subdividePolygonInternal(f,v)}function Jn(f,u,h=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const v=f[0],w=f[f.length-1],K=h&&(v.x!==w.x||v.y!==w.y);if(u<2)return K?[...f,f[0]]:[...f];const U=Math.floor(st/u),G=[];G.push(new k(f[0].x,f[0].y));const X=f.length,re=K?X:X-1;for(let de=0;de<re;de++){const xe=f[de],Fe=de<X-1?f[de+1]:f[0],ze=xe.x,Ge=xe.y,Je=Fe.x,At=Fe.y,xt=ze!==Je,Wt=Ge!==At;if(!xt&&!Wt)continue;const Bt=Je-ze,Le=At-Ge,lt=Math.abs(Bt),It=Math.abs(Le);let cn=ze,jn=Ge;for(;;){const Mn=Bt>0?(Math.floor(cn/U)+1)*U:(Math.ceil(cn/U)-1)*U,ir=Le>0?(Math.floor(jn/U)+1)*U:(Math.ceil(jn/U)-1)*U,zn=Math.abs(cn-Mn),dr=Math.abs(jn-ir),In=Math.abs(cn-Je),Qr=Math.abs(jn-At),Wr=xt?zn/lt:Number.POSITIVE_INFINITY,qr=Wt?dr/It:Number.POSITIVE_INFINITY;if((In<=zn||!xt)&&(Qr<=dr||!Wt))break;if(Wr<qr&&xt||!Wt){cn=Mn,jn+=Le*Wr;const ti=new k(cn,Math.round(jn));G[G.length-1].x===ti.x&&G[G.length-1].y===ti.y||G.push(ti)}else{cn+=Bt*qr,jn=ir;const ti=new k(Math.round(cn),jn);G[G.length-1].x===ti.x&&G[G.length-1].y===ti.y||G.push(ti)}}const vn=new k(Je,At);G[G.length-1].x===vn.x&&G[G.length-1].y===vn.y||G.push(vn)}return G}function sr(f,u,h){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let v=0,w=f[2*u[0]];for(let X=1;X<u.length;X++){const re=f[2*u[X]];re<w&&(w=re,v=X)}const K=u.length;let U=v,G=(U+1)%K;for(;;){const X=U-1>=0?U-1:K-1,re=(G+1)%K,de=f[2*u[X]],xe=f[2*u[re]],Fe=f[2*u[U]],ze=f[2*u[U]+1],Ge=f[2*u[G]+1];let Je=!1;if(de<xe)Je=!0;else if(de>xe)Je=!1;else{const At=Ge-ze,xt=-(f[2*u[G]]-Fe),Wt=ze<Ge?1:-1;((de-Fe)*At+(f[2*u[X]+1]-ze)*xt)*Wt>((xe-Fe)*At+(f[2*u[re]+1]-ze)*xt)*Wt&&(Je=!0)}if(Je){const At=u[X],xt=u[U],Wt=u[G];At!==xt&&At!==Wt&&xt!==Wt&&h.push(Wt,xt,At),U--,U<0&&(U=K-1)}else{const At=u[re],xt=u[U],Wt=u[G];At!==xt&&At!==Wt&&xt!==Wt&&h.push(Wt,xt,At),G++,G>=K&&(G=0)}if(X===re)break}}function xr(f,u,h,v,w,K,U,G,X){const re=w.length/2,de=U&&G&&X;if(re<Bn.MAX_VERTEX_ARRAY_LENGTH){const xe=u.prepareSegment(re,h,v),Fe=xe.vertexLength;for(let Je=0;Je<K.length;Je+=3)v.emplaceBack(Fe+K[Je],Fe+K[Je+1],Fe+K[Je+2]);let ze,Ge;xe.vertexLength+=re,xe.primitiveLength+=K.length/3,de&&(Ge=U.prepareSegment(re,h,G),ze=Ge.vertexLength,Ge.vertexLength+=re);for(let Je=0;Je<w.length;Je+=2)f(w[Je],w[Je+1]);if(de)for(let Je=0;Je<X.length;Je++){const At=X[Je];for(let xt=1;xt<At.length;xt+=2)G.emplaceBack(ze+At[xt-1],ze+At[xt]);Ge.primitiveLength+=At.length/2}}else(function(xe,Fe,ze,Ge,Je,At){const xt=[];for(let It=0;It<Ge.length/2;It++)xt.push(-1);const Wt={count:0};let Bt=0,Le=xe.getOrCreateLatestSegment(Fe,ze),lt=Le.vertexLength;for(let It=2;It<Je.length;It+=3){const cn=Je[It-2],jn=Je[It-1],vn=Je[It];let Mn=xt[cn]<Bt,ir=xt[jn]<Bt,zn=xt[vn]<Bt;Le.vertexLength+((Mn?1:0)+(ir?1:0)+(zn?1:0))>Bn.MAX_VERTEX_ARRAY_LENGTH&&(Le=xe.createNewSegment(Fe,ze),Bt=Wt.count,Mn=!0,ir=!0,zn=!0,lt=0);const dr=hr(xt,Ge,At,Wt,cn,Mn,Le),In=hr(xt,Ge,At,Wt,jn,ir,Le),Qr=hr(xt,Ge,At,Wt,vn,zn,Le);ze.emplaceBack(lt+dr-Bt,lt+In-Bt,lt+Qr-Bt),Le.primitiveLength++}})(u,h,v,w,K,f),de&&function(xe,Fe,ze,Ge,Je,At){const xt=[];for(let It=0;It<Ge.length/2;It++)xt.push(-1);const Wt={count:0};let Bt=0,Le=xe.getOrCreateLatestSegment(Fe,ze),lt=Le.vertexLength;for(let It=0;It<Je.length;It++){const cn=Je[It];for(let jn=1;jn<Je[It].length;jn+=2){const vn=cn[jn-1],Mn=cn[jn];let ir=xt[vn]<Bt,zn=xt[Mn]<Bt;Le.vertexLength+((ir?1:0)+(zn?1:0))>Bn.MAX_VERTEX_ARRAY_LENGTH&&(Le=xe.createNewSegment(Fe,ze),Bt=Wt.count,ir=!0,zn=!0,lt=0);const dr=hr(xt,Ge,At,Wt,vn,ir,Le),In=hr(xt,Ge,At,Wt,Mn,zn,Le);ze.emplaceBack(lt+dr-Bt,lt+In-Bt),Le.primitiveLength++}}}(U,h,G,w,X,f),u.forceNewSegmentOnNextPrepare(),U==null||U.forceNewSegmentOnNextPrepare()}function hr(f,u,h,v,w,K,U){if(K){const G=v.count;return h(u[2*w],u[2*w+1]),f[w]=v.count,v.count++,U.vertexLength++,G}return f[w]}class Ur{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gt,this.indexArray=new xn,this.indexArray2=new Cn,this.programConfigurations=new il(u.layers,u.zoom),this.segments=new Bn,this.segments2=new Bn,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.hasPattern=ch("fill",this.layers,h);const w=this.layers[0].layout.get("fill-sort-key"),K=!w.isConstant(),U=[];for(const{feature:G,id:X,index:re,sourceLayerIndex:de}of u){const xe=this.layers[0]._featureFilter.needGeometry,Fe=ac(G,xe);if(!this.layers[0]._featureFilter.filter(new Xo(this.zoom),Fe,v))continue;const ze=K?w.evaluate(Fe,{},v,h.availableImages):void 0,Ge={id:X,properties:G.properties,type:G.type,sourceLayerIndex:de,index:re,geometry:xe?Fe.geometry:Id(G),patterns:{},sortKey:ze};U.push(Ge)}K&&U.sort((G,X)=>G.sortKey-X.sortKey);for(const G of U){const{geometry:X,index:re,sourceLayerIndex:de}=G;if(this.hasPattern){const xe=Dd("fill",this.layers,G,this.zoom,h);this.patternFeatures.push(xe)}else this.addFeature(G,X,re,v,{},h.subdivisionGranularity);h.featureIndex.insert(u[re].feature,X,re,de,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}addFeatures(u,h,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,pf),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,h,v,w,K,U){for(const G of Nc(h,500)){const X=Fn(G,w,U.fill.getGranularityForZoomLevel(w.z)),re=this.layoutVertexArray;xr((de,xe)=>{re.emplaceBack(de,xe)},this.segments,this.layoutVertexArray,this.indexArray,X.verticesFlattened,X.indicesTriangles,this.segments2,this.indexArray2,X.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,K,w)}}let li,Gr;vr("FillBucket",Ur,{omit:["layers","patternFeatures"]});var Ji={get paint(){return Gr=Gr||new xs({"fill-antialias":new yr(Oe.paint_fill["fill-antialias"]),"fill-opacity":new Zr(Oe.paint_fill["fill-opacity"]),"fill-color":new Zr(Oe.paint_fill["fill-color"]),"fill-outline-color":new Zr(Oe.paint_fill["fill-outline-color"]),"fill-translate":new yr(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new yr(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new $u(Oe.paint_fill["fill-pattern"])})},get layout(){return li=li||new xs({"fill-sort-key":new Zr(Oe.layout_fill["fill-sort-key"])})}};class To extends uu{constructor(u){super(u,Ji)}recalculate(u,h){super.recalculate(u,h);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Ur(u)}queryRadius(){return Kh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:h,transform:v,pixelsToTileUnits:w}){return kc(Td(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-v.bearingInRadians,w),h)}isTileClipped(){return!0}}const qa=ks([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),la=ks([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ba}=qa;var xa,Ra,Hl,Ya,wa,fs,yi,Jo={};function ua(){if(Ra)return xa;Ra=1;var f=E();function u(w,K,U,G,X){this.properties={},this.extent=U,this.type=0,this._pbf=w,this._geometry=-1,this._keys=G,this._values=X,w.readFields(h,this,K)}function h(w,K,U){w==1?K.id=U.readVarint():w==2?function(G,X){for(var re=G.readVarint()+G.pos;G.pos<re;){var de=X._keys[G.readVarint()],xe=X._values[G.readVarint()];X.properties[de]=xe}}(U,K):w==3?K.type=U.readVarint():w==4&&(K._geometry=U.pos)}function v(w){for(var K,U,G=0,X=0,re=w.length,de=re-1;X<re;de=X++)G+=((U=w[de]).x-(K=w[X]).x)*(K.y+U.y);return G}return xa=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var K,U=w.readVarint()+w.pos,G=1,X=0,re=0,de=0,xe=[];w.pos<U;){if(X<=0){var Fe=w.readVarint();G=7&Fe,X=Fe>>3}if(X--,G===1||G===2)re+=w.readSVarint(),de+=w.readSVarint(),G===1&&(K&&xe.push(K),K=[]),K.push(new f(re,de));else{if(G!==7)throw new Error("unknown command "+G);K&&K.push(K[0].clone())}}return K&&xe.push(K),xe},u.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var K=w.readVarint()+w.pos,U=1,G=0,X=0,re=0,de=1/0,xe=-1/0,Fe=1/0,ze=-1/0;w.pos<K;){if(G<=0){var Ge=w.readVarint();U=7&Ge,G=Ge>>3}if(G--,U===1||U===2)(X+=w.readSVarint())<de&&(de=X),X>xe&&(xe=X),(re+=w.readSVarint())<Fe&&(Fe=re),re>ze&&(ze=re);else if(U!==7)throw new Error("unknown command "+U)}return[de,Fe,xe,ze]},u.prototype.toGeoJSON=function(w,K,U){var G,X,re=this.extent*Math.pow(2,U),de=this.extent*w,xe=this.extent*K,Fe=this.loadGeometry(),ze=u.types[this.type];function Ge(xt){for(var Wt=0;Wt<xt.length;Wt++){var Bt=xt[Wt];xt[Wt]=[360*(Bt.x+de)/re-180,360/Math.PI*Math.atan(Math.exp((180-360*(Bt.y+xe)/re)*Math.PI/180))-90]}}switch(this.type){case 1:var Je=[];for(G=0;G<Fe.length;G++)Je[G]=Fe[G][0];Ge(Fe=Je);break;case 2:for(G=0;G<Fe.length;G++)Ge(Fe[G]);break;case 3:for(Fe=function(xt){var Wt=xt.length;if(Wt<=1)return[xt];for(var Bt,Le,lt=[],It=0;It<Wt;It++){var cn=v(xt[It]);cn!==0&&(Le===void 0&&(Le=cn<0),Le===cn<0?(Bt&&lt.push(Bt),Bt=[xt[It]]):Bt.push(xt[It]))}return Bt&&lt.push(Bt),lt}(Fe),G=0;G<Fe.length;G++)for(X=0;X<Fe[G].length;X++)Ge(Fe[G][X])}Fe.length===1?Fe=Fe[0]:ze="Multi"+ze;var At={type:"Feature",geometry:{type:ze,coordinates:Fe},properties:this.properties};return"id"in this&&(At.id=this.id),At},xa}function pa(){if(Ya)return Hl;Ya=1;var f=ua();function u(v,w){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=v,this._keys=[],this._values=[],this._features=[],v.readFields(h,this,w),this.length=this._features.length}function h(v,w,K){v===15?w.version=K.readVarint():v===1?w.name=K.readString():v===5?w.extent=K.readVarint():v===2?w._features.push(K.pos):v===3?w._keys.push(K.readString()):v===4&&w._values.push(function(U){for(var G=null,X=U.readVarint()+U.pos;U.pos<X;){var re=U.readVarint()>>3;G=re===1?U.readString():re===2?U.readFloat():re===3?U.readDouble():re===4?U.readVarint64():re===5?U.readVarint():re===6?U.readSVarint():re===7?U.readBoolean():null}return G}(K))}return Hl=u,u.prototype.feature=function(v){if(v<0||v>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[v];var w=this._pbf.readVarint()+this._pbf.pos;return new f(this._pbf,w,this.extent,this._keys,this._values)},Hl}function Ts(){return yi||(yi=1,Jo.VectorTile=function(){if(fs)return wa;fs=1;var f=pa();function u(h,v,w){if(h===3){var K=new f(w,w.readVarint()+w.pos);K.length&&(v[K.name]=K)}}return wa=function(h,v){this.layers=h.readFields(u,{},v)},wa}(),Jo.VectorTileFeature=ua(),Jo.VectorTileLayer=pa()),Jo}var Fl=d(Ts());const Do=Fl.VectorTileFeature.types,Fd=Math.pow(2,13);function Cl(f,u,h,v,w,K,U,G){f.emplaceBack(u,h,2*Math.floor(v*Fd)+U,w*Fd*2,K*Fd*2,Math.round(G))}class KA{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new bt,this.centroidVertexArray=new mt,this.indexArray=new xn,this.programConfigurations=new il(u.layers,u.zoom),this.segments=new Bn,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.features=[],this.hasPattern=ch("fill-extrusion",this.layers,h);for(const{feature:w,id:K,index:U,sourceLayerIndex:G}of u){const X=this.layers[0]._featureFilter.needGeometry,re=ac(w,X);if(!this.layers[0]._featureFilter.filter(new Xo(this.zoom),re,v))continue;const de={id:K,sourceLayerIndex:G,index:U,geometry:X?re.geometry:Id(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(Dd("fill-extrusion",this.layers,de,this.zoom,h)):this.addFeature(de,de.geometry,U,v,{},h.subdivisionGranularity),h.featureIndex.insert(w,de.geometry,U,G,this.index,!0)}}addFeatures(u,h,v){for(const w of this.features){const{geometry:K}=w;this.addFeature(w,K,w.index,h,v,u.subdivisionGranularity)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ba),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,la.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,h,v,w,K,U){for(const G of Nc(h,500)){const X={x:0,y:0,sampleCount:0},re=this.layoutVertexArray.length;this.processPolygon(X,w,u,G,U);const de=this.layoutVertexArray.length-re,xe=Math.floor(X.x/X.sampleCount),Fe=Math.floor(X.y/X.sampleCount);for(let ze=0;ze<de;ze++)this.centroidVertexArray.emplaceBack(xe,Fe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,K,w)}processPolygon(u,h,v,w,K){if(w.length<1||bl(w[0]))return;for(const xe of w)xe.length!==0&&nd(u,xe);const U={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},G=K.fill.getGranularityForZoomLevel(h.z),X=Do[v.type]==="Polygon";for(const xe of w){if(xe.length===0||bl(xe))continue;const Fe=Jn(xe,G,X);this._generateSideFaces(Fe,U)}if(!X)return;const re=Fn(w,h,G,!1),de=this.layoutVertexArray;xr((xe,Fe)=>{Cl(de,xe,Fe,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,re.verticesFlattened,re.indicesTriangles)}_generateSideFaces(u,h){let v=0;for(let w=1;w<u.length;w++){const K=u[w],U=u[w-1];if(_l(K,U))continue;h.segment.vertexLength+4>Bn.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const G=K.sub(U)._perp()._unit(),X=U.dist(K);v+X>32768&&(v=0),Cl(this.layoutVertexArray,K.x,K.y,G.x,G.y,0,0,v),Cl(this.layoutVertexArray,K.x,K.y,G.x,G.y,0,1,v),v+=X,Cl(this.layoutVertexArray,U.x,U.y,G.x,G.y,0,0,v),Cl(this.layoutVertexArray,U.x,U.y,G.x,G.y,0,1,v);const re=h.segment.vertexLength;this.indexArray.emplaceBack(re,re+2,re+1),this.indexArray.emplaceBack(re+1,re+2,re+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function nd(f,u){for(let h=0;h<u.length;h++){const v=u[h];h===u.length-1&&u[0].x===v.x&&u[0].y===v.y||(f.x+=v.x,f.y+=v.y,f.sampleCount++)}}function _l(f,u){return f.x===u.x&&(f.x<0||f.x>st)||f.y===u.y&&(f.y<0||f.y>st)}function bl(f){return f.every(u=>u.x<0)||f.every(u=>u.x>st)||f.every(u=>u.y<0)||f.every(u=>u.y>st)}let gf;vr("FillExtrusionBucket",KA,{omit:["layers","features"]});var $f={get paint(){return gf=gf||new xs({"fill-extrusion-opacity":new yr(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Zr(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yr(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yr(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $u(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Zr(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Zr(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yr(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Lh extends uu{constructor(u){super(u,$f)}createBucket(u){return new KA(u)}queryRadius(){return Kh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:w,transform:K,pixelsToTileUnits:U,pixelPosMatrix:G}){const X=Td(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-K.bearingInRadians,U),re=this.paint.get("fill-extrusion-height").evaluate(h,v),de=this.paint.get("fill-extrusion-base").evaluate(h,v),xe=function(ze,Ge,Je){const At=[];for(const xt of ze){const Wt=[xt.x,xt.y,0,1];pe(Wt,Wt,Ge),At.push(new k(Wt[0]/Wt[3],Wt[1]/Wt[3]))}return At}(X,G),Fe=function(ze,Ge,Je,At){const xt=[],Wt=[],Bt=At[8]*Ge,Le=At[9]*Ge,lt=At[10]*Ge,It=At[11]*Ge,cn=At[8]*Je,jn=At[9]*Je,vn=At[10]*Je,Mn=At[11]*Je;for(const ir of ze){const zn=[],dr=[];for(const In of ir){const Qr=In.x,Wr=In.y,qr=At[0]*Qr+At[4]*Wr+At[12],ti=At[1]*Qr+At[5]*Wr+At[13],Ko=At[2]*Qr+At[6]*Wr+At[14],ul=At[3]*Qr+At[7]*Wr+At[15],Zl=Ko+lt,tA=ul+It,hh=qr+cn,cc=ti+jn,Iu=Ko+vn,yA=ul+Mn,Sl=new k((qr+Bt)/tA,(ti+Le)/tA);Sl.z=Zl/tA,zn.push(Sl);const fu=new k(hh/yA,cc/yA);fu.z=Iu/yA,dr.push(fu)}xt.push(zn),Wt.push(dr)}return[xt,Wt]}(w,de,re,G);return function(ze,Ge,Je){let At=1/0;kc(Je,Ge)&&(At=n0(Je,Ge[0]));for(let xt=0;xt<Ge.length;xt++){const Wt=Ge[xt],Bt=ze[xt];for(let Le=0;Le<Wt.length-1;Le++){const lt=Wt[Le],It=[lt,Wt[Le+1],Bt[Le+1],Bt[Le],lt];kd(Je,It)&&(At=Math.min(At,n0(Je,It)))}}return At!==1/0&&At}(Fe[0],Fe[1],xe)}}function yf(f,u){return f.x*u.x+f.y*u.y}function n0(f,u){if(f.length===1){let h=0;const v=u[h++];let w;for(;!w||v.equals(w);)if(w=u[h++],!w)return 1/0;for(;h<u.length;h++){const K=u[h],U=f[0],G=w.sub(v),X=K.sub(v),re=U.sub(v),de=yf(G,G),xe=yf(G,X),Fe=yf(X,X),ze=yf(re,G),Ge=yf(re,X),Je=de*Fe-xe*xe,At=(Fe*ze-xe*Ge)/Je,xt=(de*Ge-xe*ze)/Je,Wt=v.z*(1-At-xt)+w.z*At+K.z*xt;if(isFinite(Wt))return Wt}return 1/0}{let h=1/0;for(const v of u)h=Math.min(h,v.z);return h}}const vf=ks([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:r0}=vf,Cf=ks([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:FA}=Cf,_m=Fl.VectorTileFeature.types,Y0=Math.cos(Math.PI/180*37.5),bm=Math.pow(2,14)/.5;class Vf{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Ot,this.layoutVertexArray2=new Pt,this.indexArray=new xn,this.programConfigurations=new il(u.layers,u.zoom),this.segments=new Bn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.hasPattern=ch("line",this.layers,h);const w=this.layers[0].layout.get("line-sort-key"),K=!w.isConstant(),U=[];for(const{feature:G,id:X,index:re,sourceLayerIndex:de}of u){const xe=this.layers[0]._featureFilter.needGeometry,Fe=ac(G,xe);if(!this.layers[0]._featureFilter.filter(new Xo(this.zoom),Fe,v))continue;const ze=K?w.evaluate(Fe,{},v):void 0,Ge={id:X,properties:G.properties,type:G.type,sourceLayerIndex:de,index:re,geometry:xe?Fe.geometry:Id(G),patterns:{},sortKey:ze};U.push(Ge)}K&&U.sort((G,X)=>G.sortKey-X.sortKey);for(const G of U){const{geometry:X,index:re,sourceLayerIndex:de}=G;if(this.hasPattern){const xe=Dd("line",this.layers,G,this.zoom,h);this.patternFeatures.push(xe)}else this.addFeature(G,X,re,v,{},h.subdivisionGranularity);h.featureIndex.insert(u[re].feature,X,re,de,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}addFeatures(u,h,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,FA)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,r0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,h,v,w,K,U){const G=this.layers[0].layout,X=G.get("line-join").evaluate(u,{}),re=G.get("line-cap"),de=G.get("line-miter-limit"),xe=G.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Fe of h)this.addLine(Fe,u,X,re,de,xe,w,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,K,w)}addLine(u,h,v,w,K,U,G,X){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=Jn(u,G?X.line.getGranularityForZoomLevel(G.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Bt=0;Bt<u.length-1;Bt++)this.totalDistance+=u[Bt].dist(u[Bt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const re=_m[h.type]==="Polygon";let de=u.length;for(;de>=2&&u[de-1].equals(u[de-2]);)de--;let xe=0;for(;xe<de-1&&u[xe].equals(u[xe+1]);)xe++;if(de<(re?3:2))return;v==="bevel"&&(K=1.05);const Fe=this.overscaling<=16?15*st/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let Ge,Je,At,xt,Wt;this.e1=this.e2=-1,re&&(Ge=u[de-2],Wt=u[xe].sub(Ge)._unit()._perp());for(let Bt=xe;Bt<de;Bt++){if(At=Bt===de-1?re?u[xe+1]:void 0:u[Bt+1],At&&u[Bt].equals(At))continue;Wt&&(xt=Wt),Ge&&(Je=Ge),Ge=u[Bt],Wt=At?At.sub(Ge)._unit()._perp():xt,xt=xt||Wt;let Le=xt.add(Wt);Le.x===0&&Le.y===0||Le._unit();const lt=xt.x*Wt.x+xt.y*Wt.y,It=Le.x*Wt.x+Le.y*Wt.y,cn=It!==0?1/It:1/0,jn=2*Math.sqrt(2-2*It),vn=It<Y0&&Je&&At,Mn=xt.x*Wt.y-xt.y*Wt.x>0;if(vn&&Bt>xe){const dr=Ge.dist(Je);if(dr>2*Fe){const In=Ge.sub(Ge.sub(Je)._mult(Fe/dr)._round());this.updateDistance(Je,In),this.addCurrentVertex(In,xt,0,0,ze),Je=In}}const ir=Je&&At;let zn=ir?v:re?"butt":w;if(ir&&zn==="round"&&(cn<U?zn="miter":cn<=2&&(zn="fakeround")),zn==="miter"&&cn>K&&(zn="bevel"),zn==="bevel"&&(cn>2&&(zn="flipbevel"),cn<K&&(zn="miter")),Je&&this.updateDistance(Je,Ge),zn==="miter")Le._mult(cn),this.addCurrentVertex(Ge,Le,0,0,ze);else if(zn==="flipbevel"){if(cn>100)Le=Wt.mult(-1);else{const dr=cn*xt.add(Wt).mag()/xt.sub(Wt).mag();Le._perp()._mult(dr*(Mn?-1:1))}this.addCurrentVertex(Ge,Le,0,0,ze),this.addCurrentVertex(Ge,Le.mult(-1),0,0,ze)}else if(zn==="bevel"||zn==="fakeround"){const dr=-Math.sqrt(cn*cn-1),In=Mn?dr:0,Qr=Mn?0:dr;if(Je&&this.addCurrentVertex(Ge,xt,In,Qr,ze),zn==="fakeround"){const Wr=Math.round(180*jn/Math.PI/20);for(let qr=1;qr<Wr;qr++){let ti=qr/Wr;if(ti!==.5){const ul=ti-.5;ti+=ti*ul*(ti-1)*((1.0904+lt*(lt*(3.55645-1.43519*lt)-3.2452))*ul*ul+(.848013+lt*(.215638*lt-1.06021)))}const Ko=Wt.sub(xt)._mult(ti)._add(xt)._unit()._mult(Mn?-1:1);this.addHalfVertex(Ge,Ko.x,Ko.y,!1,Mn,0,ze)}}At&&this.addCurrentVertex(Ge,Wt,-In,-Qr,ze)}else if(zn==="butt")this.addCurrentVertex(Ge,Le,0,0,ze);else if(zn==="square"){const dr=Je?1:-1;this.addCurrentVertex(Ge,Le,dr,dr,ze)}else zn==="round"&&(Je&&(this.addCurrentVertex(Ge,xt,0,0,ze),this.addCurrentVertex(Ge,xt,1,1,ze,!0)),At&&(this.addCurrentVertex(Ge,Wt,-1,-1,ze,!0),this.addCurrentVertex(Ge,Wt,0,0,ze)));if(vn&&Bt<de-1){const dr=Ge.dist(At);if(dr>2*Fe){const In=Ge.add(At.sub(Ge)._mult(Fe/dr)._round());this.updateDistance(Ge,In),this.addCurrentVertex(In,Wt,0,0,ze),Ge=In}}}}addCurrentVertex(u,h,v,w,K,U=!1){const G=h.y*w-h.x,X=-h.y-h.x*w;this.addHalfVertex(u,h.x+h.y*v,h.y-h.x*v,U,!1,v,K),this.addHalfVertex(u,G,X,U,!0,-w,K),this.distance>bm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,h,v,w,K,U))}addHalfVertex({x:u,y:h},v,w,K,U,G,X){const re=.5*(this.lineClips?this.scaledDistance*(bm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(K?1:0),(h<<1)+(U?1:0),Math.round(63*v)+128,Math.round(63*w)+128,1+(G===0?0:G<0?-1:1)|(63&re)<<2,re>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const de=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,de,this.e2),X.primitiveLength++),U?this.e2=de:this.e1=de}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,h){this.distance+=u.dist(h),this.updateScaledDistance()}}let pA,Uh;vr("LineBucket",Vf,{omit:["layers","patternFeatures"]});var rd={get paint(){return Uh=Uh||new xs({"line-opacity":new Zr(Oe.paint_line["line-opacity"]),"line-color":new Zr(Oe.paint_line["line-color"]),"line-translate":new yr(Oe.paint_line["line-translate"]),"line-translate-anchor":new yr(Oe.paint_line["line-translate-anchor"]),"line-width":new Zr(Oe.paint_line["line-width"]),"line-gap-width":new Zr(Oe.paint_line["line-gap-width"]),"line-offset":new Zr(Oe.paint_line["line-offset"]),"line-blur":new Zr(Oe.paint_line["line-blur"]),"line-dasharray":new sc(Oe.paint_line["line-dasharray"]),"line-pattern":new $u(Oe.paint_line["line-pattern"]),"line-gradient":new Mu(Oe.paint_line["line-gradient"])})},get layout(){return pA=pA||new xs({"line-cap":new yr(Oe.layout_line["line-cap"]),"line-join":new Zr(Oe.layout_line["line-join"]),"line-miter-limit":new yr(Oe.layout_line["line-miter-limit"]),"line-round-limit":new yr(Oe.layout_line["line-round-limit"]),"line-sort-key":new Zr(Oe.layout_line["line-sort-key"])})}};class uc extends Zr{possiblyEvaluate(u,h){return h=new Xo(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(u,h)}evaluate(u,h,v,w){return h=ft({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(u,h,v,w)}}let Hf;class $0 extends uu{constructor(u){super(u,rd),this.gradientVersion=0,Hf||(Hf=new uc(rd.paint.properties["line-width"].specification),Hf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(v){return v._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof at,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,h){super.recalculate(u,h),this.paint._values["line-floorwidth"]=Hf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Vf(u)}queryRadius(u){const h=u,v=i0(lc("line-width",this,h),lc("line-gap-width",this,h)),w=lc("line-offset",this,h);return v/2+Math.abs(w)+Kh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:w,transform:K,pixelsToTileUnits:U}){const G=Td(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-K.bearingInRadians,U),X=U/2*i0(this.paint.get("line-width").evaluate(h,v),this.paint.get("line-gap-width").evaluate(h,v)),re=this.paint.get("line-offset").evaluate(h,v);return re&&(w=function(de,xe){const Fe=[];for(let ze=0;ze<de.length;ze++){const Ge=de[ze],Je=[];for(let At=0;At<Ge.length;At++){const xt=Ge[At-1],Wt=Ge[At],Bt=Ge[At+1],Le=At===0?new k(0,0):Wt.sub(xt)._unit()._perp(),lt=At===Ge.length-1?new k(0,0):Bt.sub(Wt)._unit()._perp(),It=Le._add(lt)._unit(),cn=It.x*lt.x+It.y*lt.y;cn!==0&&It._mult(1/cn),Je.push(It._mult(xe)._add(Wt))}Fe.push(Je)}return Fe}(w,re*U)),function(de,xe,Fe){for(let ze=0;ze<xe.length;ze++){const Ge=xe[ze];if(de.length>=3){for(let Je=0;Je<Ge.length;Je++)if(Tc(de,Ge[Je]))return!0}if(RA(de,Ge,Fe))return!0}return!1}(G,w,X)}isTileClipped(){return!0}}function i0(f,u){return u>0?u+2*f:f}const nv=ks([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_f=ks([{name:"a_projected_pos",components:3,type:"Float32"}],4);ks([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const e1=ks([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ks([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const o0=ks([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Zf=ks([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function V0(f,u,h){return f.sections.forEach(v=>{v.text=function(w,K,U){const G=K.layout.get("text-transform").evaluate(U,{});return G==="uppercase"?w=w.toLocaleUpperCase():G==="lowercase"&&(w=w.toLocaleLowerCase()),Fs.applyArabicShaping&&(w=Fs.applyArabicShaping(w)),w}(v.text,u,h)}),f}ks([{name:"triangle",components:3,type:"Uint16"}]),ks([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ks([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ks([{type:"Float32",name:"offsetX"}]),ks([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ks([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ld={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var H0,s0,a0,$a=24,Z0={};function rv(){return H0||(H0=1,Z0.read=function(f,u,h,v,w){var K,U,G=8*w-v-1,X=(1<<G)-1,re=X>>1,de=-7,xe=h?w-1:0,Fe=h?-1:1,ze=f[u+xe];for(xe+=Fe,K=ze&(1<<-de)-1,ze>>=-de,de+=G;de>0;K=256*K+f[u+xe],xe+=Fe,de-=8);for(U=K&(1<<-de)-1,K>>=-de,de+=v;de>0;U=256*U+f[u+xe],xe+=Fe,de-=8);if(K===0)K=1-re;else{if(K===X)return U?NaN:1/0*(ze?-1:1);U+=Math.pow(2,v),K-=re}return(ze?-1:1)*U*Math.pow(2,K-v)},Z0.write=function(f,u,h,v,w,K){var U,G,X,re=8*K-w-1,de=(1<<re)-1,xe=de>>1,Fe=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,ze=v?0:K-1,Ge=v?1:-1,Je=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(G=isNaN(u)?1:0,U=de):(U=Math.floor(Math.log(u)/Math.LN2),u*(X=Math.pow(2,-U))<1&&(U--,X*=2),(u+=U+xe>=1?Fe/X:Fe*Math.pow(2,1-xe))*X>=2&&(U++,X/=2),U+xe>=de?(G=0,U=de):U+xe>=1?(G=(u*X-1)*Math.pow(2,w),U+=xe):(G=u*Math.pow(2,xe-1)*Math.pow(2,w),U=0));w>=8;f[h+ze]=255&G,ze+=Ge,G/=256,w-=8);for(U=U<<w|G,re+=w;re>0;f[h+ze]=255&U,ze+=Ge,U/=256,re-=8);f[h+ze-Ge]|=128*Je}),Z0}function X0(){if(a0)return s0;a0=1,s0=u;var f=rv();function u(Le){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Le)?Le:new Uint8Array(Le||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var h=4294967296,v=1/h,w=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function K(Le){return Le.type===u.Bytes?Le.readVarint()+Le.pos:Le.pos+1}function U(Le,lt,It){return It?4294967296*lt+(Le>>>0):4294967296*(lt>>>0)+(Le>>>0)}function G(Le,lt,It){var cn=lt<=16383?1:lt<=2097151?2:lt<=268435455?3:Math.floor(Math.log(lt)/(7*Math.LN2));It.realloc(cn);for(var jn=It.pos-1;jn>=Le;jn--)It.buf[jn+cn]=It.buf[jn]}function X(Le,lt){for(var It=0;It<Le.length;It++)lt.writeVarint(Le[It])}function re(Le,lt){for(var It=0;It<Le.length;It++)lt.writeSVarint(Le[It])}function de(Le,lt){for(var It=0;It<Le.length;It++)lt.writeFloat(Le[It])}function xe(Le,lt){for(var It=0;It<Le.length;It++)lt.writeDouble(Le[It])}function Fe(Le,lt){for(var It=0;It<Le.length;It++)lt.writeBoolean(Le[It])}function ze(Le,lt){for(var It=0;It<Le.length;It++)lt.writeFixed32(Le[It])}function Ge(Le,lt){for(var It=0;It<Le.length;It++)lt.writeSFixed32(Le[It])}function Je(Le,lt){for(var It=0;It<Le.length;It++)lt.writeFixed64(Le[It])}function At(Le,lt){for(var It=0;It<Le.length;It++)lt.writeSFixed64(Le[It])}function xt(Le,lt){return(Le[lt]|Le[lt+1]<<8|Le[lt+2]<<16)+16777216*Le[lt+3]}function Wt(Le,lt,It){Le[It]=lt,Le[It+1]=lt>>>8,Le[It+2]=lt>>>16,Le[It+3]=lt>>>24}function Bt(Le,lt){return(Le[lt]|Le[lt+1]<<8|Le[lt+2]<<16)+(Le[lt+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(Le,lt,It){for(It=It||this.length;this.pos<It;){var cn=this.readVarint(),jn=cn>>3,vn=this.pos;this.type=7&cn,Le(jn,lt,this),this.pos===vn&&this.skip(cn)}return lt},readMessage:function(Le,lt){return this.readFields(Le,lt,this.readVarint()+this.pos)},readFixed32:function(){var Le=xt(this.buf,this.pos);return this.pos+=4,Le},readSFixed32:function(){var Le=Bt(this.buf,this.pos);return this.pos+=4,Le},readFixed64:function(){var Le=xt(this.buf,this.pos)+xt(this.buf,this.pos+4)*h;return this.pos+=8,Le},readSFixed64:function(){var Le=xt(this.buf,this.pos)+Bt(this.buf,this.pos+4)*h;return this.pos+=8,Le},readFloat:function(){var Le=f.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Le},readDouble:function(){var Le=f.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Le},readVarint:function(Le){var lt,It,cn=this.buf;return lt=127&(It=cn[this.pos++]),It<128?lt:(lt|=(127&(It=cn[this.pos++]))<<7,It<128?lt:(lt|=(127&(It=cn[this.pos++]))<<14,It<128?lt:(lt|=(127&(It=cn[this.pos++]))<<21,It<128?lt:function(jn,vn,Mn){var ir,zn,dr=Mn.buf;if(ir=(112&(zn=dr[Mn.pos++]))>>4,zn<128||(ir|=(127&(zn=dr[Mn.pos++]))<<3,zn<128)||(ir|=(127&(zn=dr[Mn.pos++]))<<10,zn<128)||(ir|=(127&(zn=dr[Mn.pos++]))<<17,zn<128)||(ir|=(127&(zn=dr[Mn.pos++]))<<24,zn<128)||(ir|=(1&(zn=dr[Mn.pos++]))<<31,zn<128))return U(jn,ir,vn);throw new Error("Expected varint not more than 10 bytes")}(lt|=(15&(It=cn[this.pos]))<<28,Le,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Le=this.readVarint();return Le%2==1?(Le+1)/-2:Le/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Le=this.readVarint()+this.pos,lt=this.pos;return this.pos=Le,Le-lt>=12&&w?function(It,cn,jn){return w.decode(It.subarray(cn,jn))}(this.buf,lt,Le):function(It,cn,jn){for(var vn="",Mn=cn;Mn<jn;){var ir,zn,dr,In=It[Mn],Qr=null,Wr=In>239?4:In>223?3:In>191?2:1;if(Mn+Wr>jn)break;Wr===1?In<128&&(Qr=In):Wr===2?(192&(ir=It[Mn+1]))==128&&(Qr=(31&In)<<6|63&ir)<=127&&(Qr=null):Wr===3?(zn=It[Mn+2],(192&(ir=It[Mn+1]))==128&&(192&zn)==128&&((Qr=(15&In)<<12|(63&ir)<<6|63&zn)<=2047||Qr>=55296&&Qr<=57343)&&(Qr=null)):Wr===4&&(zn=It[Mn+2],dr=It[Mn+3],(192&(ir=It[Mn+1]))==128&&(192&zn)==128&&(192&dr)==128&&((Qr=(15&In)<<18|(63&ir)<<12|(63&zn)<<6|63&dr)<=65535||Qr>=1114112)&&(Qr=null)),Qr===null?(Qr=65533,Wr=1):Qr>65535&&(Qr-=65536,vn+=String.fromCharCode(Qr>>>10&1023|55296),Qr=56320|1023&Qr),vn+=String.fromCharCode(Qr),Mn+=Wr}return vn}(this.buf,lt,Le)},readBytes:function(){var Le=this.readVarint()+this.pos,lt=this.buf.subarray(this.pos,Le);return this.pos=Le,lt},readPackedVarint:function(Le,lt){if(this.type!==u.Bytes)return Le.push(this.readVarint(lt));var It=K(this);for(Le=Le||[];this.pos<It;)Le.push(this.readVarint(lt));return Le},readPackedSVarint:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSVarint());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSVarint());return Le},readPackedBoolean:function(Le){if(this.type!==u.Bytes)return Le.push(this.readBoolean());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readBoolean());return Le},readPackedFloat:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFloat());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFloat());return Le},readPackedDouble:function(Le){if(this.type!==u.Bytes)return Le.push(this.readDouble());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readDouble());return Le},readPackedFixed32:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFixed32());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFixed32());return Le},readPackedSFixed32:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSFixed32());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSFixed32());return Le},readPackedFixed64:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFixed64());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFixed64());return Le},readPackedSFixed64:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSFixed64());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSFixed64());return Le},skip:function(Le){var lt=7&Le;if(lt===u.Varint)for(;this.buf[this.pos++]>127;);else if(lt===u.Bytes)this.pos=this.readVarint()+this.pos;else if(lt===u.Fixed32)this.pos+=4;else{if(lt!==u.Fixed64)throw new Error("Unimplemented type: "+lt);this.pos+=8}},writeTag:function(Le,lt){this.writeVarint(Le<<3|lt)},realloc:function(Le){for(var lt=this.length||16;lt<this.pos+Le;)lt*=2;if(lt!==this.length){var It=new Uint8Array(lt);It.set(this.buf),this.buf=It,this.length=lt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Le){this.realloc(4),Wt(this.buf,Le,this.pos),this.pos+=4},writeSFixed32:function(Le){this.realloc(4),Wt(this.buf,Le,this.pos),this.pos+=4},writeFixed64:function(Le){this.realloc(8),Wt(this.buf,-1&Le,this.pos),Wt(this.buf,Math.floor(Le*v),this.pos+4),this.pos+=8},writeSFixed64:function(Le){this.realloc(8),Wt(this.buf,-1&Le,this.pos),Wt(this.buf,Math.floor(Le*v),this.pos+4),this.pos+=8},writeVarint:function(Le){(Le=+Le||0)>268435455||Le<0?function(lt,It){var cn,jn;if(lt>=0?(cn=lt%4294967296|0,jn=lt/4294967296|0):(jn=~(-lt/4294967296),4294967295^(cn=~(-lt%4294967296))?cn=cn+1|0:(cn=0,jn=jn+1|0)),lt>=18446744073709552e3||lt<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");It.realloc(10),function(vn,Mn,ir){ir.buf[ir.pos++]=127&vn|128,vn>>>=7,ir.buf[ir.pos++]=127&vn|128,vn>>>=7,ir.buf[ir.pos++]=127&vn|128,vn>>>=7,ir.buf[ir.pos++]=127&vn|128,ir.buf[ir.pos]=127&(vn>>>=7)}(cn,0,It),function(vn,Mn){var ir=(7&vn)<<4;Mn.buf[Mn.pos++]|=ir|((vn>>>=3)?128:0),vn&&(Mn.buf[Mn.pos++]=127&vn|((vn>>>=7)?128:0),vn&&(Mn.buf[Mn.pos++]=127&vn|((vn>>>=7)?128:0),vn&&(Mn.buf[Mn.pos++]=127&vn|((vn>>>=7)?128:0),vn&&(Mn.buf[Mn.pos++]=127&vn|((vn>>>=7)?128:0),vn&&(Mn.buf[Mn.pos++]=127&vn)))))}(jn,It)}(Le,this):(this.realloc(4),this.buf[this.pos++]=127&Le|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=127&(Le>>>=7)|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=127&(Le>>>=7)|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=Le>>>7&127))))},writeSVarint:function(Le){this.writeVarint(Le<0?2*-Le-1:2*Le)},writeBoolean:function(Le){this.writeVarint(!!Le)},writeString:function(Le){Le=String(Le),this.realloc(4*Le.length),this.pos++;var lt=this.pos;this.pos=function(cn,jn,vn){for(var Mn,ir,zn=0;zn<jn.length;zn++){if((Mn=jn.charCodeAt(zn))>55295&&Mn<57344){if(!ir){Mn>56319||zn+1===jn.length?(cn[vn++]=239,cn[vn++]=191,cn[vn++]=189):ir=Mn;continue}if(Mn<56320){cn[vn++]=239,cn[vn++]=191,cn[vn++]=189,ir=Mn;continue}Mn=ir-55296<<10|Mn-56320|65536,ir=null}else ir&&(cn[vn++]=239,cn[vn++]=191,cn[vn++]=189,ir=null);Mn<128?cn[vn++]=Mn:(Mn<2048?cn[vn++]=Mn>>6|192:(Mn<65536?cn[vn++]=Mn>>12|224:(cn[vn++]=Mn>>18|240,cn[vn++]=Mn>>12&63|128),cn[vn++]=Mn>>6&63|128),cn[vn++]=63&Mn|128)}return vn}(this.buf,Le,this.pos);var It=this.pos-lt;It>=128&&G(lt,It,this),this.pos=lt-1,this.writeVarint(It),this.pos+=It},writeFloat:function(Le){this.realloc(4),f.write(this.buf,Le,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Le){this.realloc(8),f.write(this.buf,Le,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Le){var lt=Le.length;this.writeVarint(lt),this.realloc(lt);for(var It=0;It<lt;It++)this.buf[this.pos++]=Le[It]},writeRawMessage:function(Le,lt){this.pos++;var It=this.pos;Le(lt,this);var cn=this.pos-It;cn>=128&&G(It,cn,this),this.pos=It-1,this.writeVarint(cn),this.pos+=cn},writeMessage:function(Le,lt,It){this.writeTag(Le,u.Bytes),this.writeRawMessage(lt,It)},writePackedVarint:function(Le,lt){lt.length&&this.writeMessage(Le,X,lt)},writePackedSVarint:function(Le,lt){lt.length&&this.writeMessage(Le,re,lt)},writePackedBoolean:function(Le,lt){lt.length&&this.writeMessage(Le,Fe,lt)},writePackedFloat:function(Le,lt){lt.length&&this.writeMessage(Le,de,lt)},writePackedDouble:function(Le,lt){lt.length&&this.writeMessage(Le,xe,lt)},writePackedFixed32:function(Le,lt){lt.length&&this.writeMessage(Le,ze,lt)},writePackedSFixed32:function(Le,lt){lt.length&&this.writeMessage(Le,Ge,lt)},writePackedFixed64:function(Le,lt){lt.length&&this.writeMessage(Le,Je,lt)},writePackedSFixed64:function(Le,lt){lt.length&&this.writeMessage(Le,At,lt)},writeBytesField:function(Le,lt){this.writeTag(Le,u.Bytes),this.writeBytes(lt)},writeFixed32Field:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeFixed32(lt)},writeSFixed32Field:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeSFixed32(lt)},writeFixed64Field:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeFixed64(lt)},writeSFixed64Field:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeSFixed64(lt)},writeVarintField:function(Le,lt){this.writeTag(Le,u.Varint),this.writeVarint(lt)},writeSVarintField:function(Le,lt){this.writeTag(Le,u.Varint),this.writeSVarint(lt)},writeStringField:function(Le,lt){this.writeTag(Le,u.Bytes),this.writeString(lt)},writeFloatField:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeFloat(lt)},writeDoubleField:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeDouble(lt)},writeBooleanField:function(Le,lt){this.writeVarintField(Le,!!lt)}},s0}var l0=d(X0());const zh=3;function iv(f,u,h){f===1&&h.readMessage(Kp,u)}function Kp(f,u,h){if(f===3){const{id:v,bitmap:w,width:K,height:U,left:G,top:X,advance:re}=h.readMessage(u0,{});u.push({id:v,bitmap:new ko({width:K+2*zh,height:U+2*zh},w),metrics:{width:K,height:U,left:G,top:X,advance:re}})}}function u0(f,u,h){f===1?u.id=h.readVarint():f===2?u.bitmap=h.readBytes():f===3?u.width=h.readVarint():f===4?u.height=h.readVarint():f===5?u.left=h.readSVarint():f===6?u.top=h.readSVarint():f===7&&(u.advance=h.readVarint())}const al=zh;function t1(f){let u=0,h=0;for(const U of f)u+=U.w*U.h,h=Math.max(h,U.w);f.sort((U,G)=>G.h-U.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),h),h:1/0}];let w=0,K=0;for(const U of f)for(let G=v.length-1;G>=0;G--){const X=v[G];if(!(U.w>X.w||U.h>X.h)){if(U.x=X.x,U.y=X.y,K=Math.max(K,U.y+U.h),w=Math.max(w,U.x+U.w),U.w===X.w&&U.h===X.h){const re=v.pop();G<v.length&&(v[G]=re)}else U.h===X.h?(X.x+=U.w,X.w-=U.w):U.w===X.w?(X.y+=U.h,X.h-=U.h):(v.push({x:X.x+U.w,y:X.y,w:X.w-U.w,h:U.h}),X.y+=U.h,X.h-=U.h);break}}return{w,h:K,fill:u/(w*K)||0}}const mA=1;class J0{constructor(u,{pixelRatio:h,version:v,stretchX:w,stretchY:K,content:U,textFitWidth:G,textFitHeight:X}){this.paddedRect=u,this.pixelRatio=h,this.stretchX=w,this.stretchY=K,this.content=U,this.version=v,this.textFitWidth=G,this.textFitHeight=X}get tl(){return[this.paddedRect.x+mA,this.paddedRect.y+mA]}get br(){return[this.paddedRect.x+this.paddedRect.w-mA,this.paddedRect.y+this.paddedRect.h-mA]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*mA)/this.pixelRatio,(this.paddedRect.h-2*mA)/this.pixelRatio]}}class n1{constructor(u,h){const v={},w={};this.haveRenderCallbacks=[];const K=[];this.addImages(u,v,K),this.addImages(h,w,K);const{w:U,h:G}=t1(K),X=new Ju({width:U||1,height:G||1});for(const re in u){const de=u[re],xe=v[re].paddedRect;Ju.copy(de.data,X,{x:0,y:0},{x:xe.x+mA,y:xe.y+mA},de.data)}for(const re in h){const de=h[re],xe=w[re].paddedRect,Fe=xe.x+mA,ze=xe.y+mA,Ge=de.data.width,Je=de.data.height;Ju.copy(de.data,X,{x:0,y:0},{x:Fe,y:ze},de.data),Ju.copy(de.data,X,{x:0,y:Je-1},{x:Fe,y:ze-1},{width:Ge,height:1}),Ju.copy(de.data,X,{x:0,y:0},{x:Fe,y:ze+Je},{width:Ge,height:1}),Ju.copy(de.data,X,{x:Ge-1,y:0},{x:Fe-1,y:ze},{width:1,height:Je}),Ju.copy(de.data,X,{x:0,y:0},{x:Fe+Ge,y:ze},{width:1,height:Je})}this.image=X,this.iconPositions=v,this.patternPositions=w}addImages(u,h,v){for(const w in u){const K=u[w],U={x:0,y:0,w:K.data.width+2*mA,h:K.data.height+2*mA};v.push(U),h[w]=new J0(U,K),K.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(u,h){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in u.updatedImages)this.patchUpdatedImage(this.iconPositions[v],u.getImage(v),h),this.patchUpdatedImage(this.patternPositions[v],u.getImage(v),h)}patchUpdatedImage(u,h,v){if(!u||!h||u.version===h.version)return;u.version=h.version;const[w,K]=u.tl;v.update(h.data,void 0,{x:w,y:K})}}var jh;vr("ImagePosition",J0),vr("ImageAtlas",n1),a.ai=void 0,(jh=a.ai||(a.ai={}))[jh.none=0]="none",jh[jh.horizontal=1]="horizontal",jh[jh.vertical=2]="vertical",jh[jh.horizontalOnly=3]="horizontalOnly";const Fp=-17;class xm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(u,h){const v=new xm;return v.scale=u||1,v.fontStack=h,v}static forImage(u){const h=new xm;return h.imageName=u,h}}class eA{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,h){const v=new eA;for(let w=0;w<u.sections.length;w++){const K=u.sections[w];K.image?v.addImageSection(K):v.addTextSection(K,h)}return v}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let h="";for(let v=0;v<u.length;v++){const w=u.charCodeAt(v+1)||null,K=u.charCodeAt(v-1)||null;h+=w&&Mc(w)&&!Ld[u[v+1]]||K&&Mc(K)&&!Ld[u[v-1]]||!Ld[u[v]]?u[v]:Ld[u[v]]}return h}(this.text)}trim(){let u=0;for(let v=0;v<this.text.length&&A0[this.text.charCodeAt(v)];v++)u++;let h=this.text.length;for(let v=this.text.length-1;v>=0&&v>=u&&A0[this.text.charCodeAt(v)];v--)h--;this.text=this.text.substring(u,h),this.sectionIndex=this.sectionIndex.slice(u,h)}substring(u,h){const v=new eA;return v.text=this.text.substring(u,h),v.sectionIndex=this.sectionIndex.slice(u,h),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,h)=>Math.max(u,this.sections[h].scale),0)}addTextSection(u,h){this.text+=u.text,this.sections.push(xm.forText(u.scale,u.fontStack||h));const v=this.sections.length-1;for(let w=0;w<u.text.length;++w)this.sectionIndex.push(v)}addImageSection(u){const h=u.image?u.image.name:"";if(h.length===0)return void nt("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(xm.forImage(h)),this.sectionIndex.push(this.sections.length-1)):nt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Xf(f,u,h,v,w,K,U,G,X,re,de,xe,Fe,ze,Ge){const Je=eA.fromFeature(f,w);let At;xe===a.ai.vertical&&Je.verticalizePunctuation();const{processBidirectionalText:xt,processStyledBidirectionalText:Wt}=Fs;if(xt&&Je.sections.length===1){At=[];const lt=xt(Je.toString(),Mm(Je,re,K,u,v,ze));for(const It of lt){const cn=new eA;cn.text=It,cn.sections=Je.sections;for(let jn=0;jn<It.length;jn++)cn.sectionIndex.push(0);At.push(cn)}}else if(Wt){At=[];const lt=Wt(Je.text,Je.sectionIndex,Mm(Je,re,K,u,v,ze));for(const It of lt){const cn=new eA;cn.text=It[0],cn.sectionIndex=It[1],cn.sections=Je.sections,At.push(cn)}}else At=function(lt,It){const cn=[],jn=lt.text;let vn=0;for(const Mn of It)cn.push(lt.substring(vn,Mn)),vn=Mn;return vn<jn.length&&cn.push(lt.substring(vn,jn.length)),cn}(Je,Mm(Je,re,K,u,v,ze));const Bt=[],Le={positionedLines:Bt,text:Je.toString(),top:de[1],bottom:de[1],left:de[0],right:de[0],writingMode:xe,iconsInText:!1,verticalizable:!1};return function(lt,It,cn,jn,vn,Mn,ir,zn,dr,In,Qr,Wr){let qr=0,ti=Fp,Ko=0,ul=0;const Zl=zn==="right"?1:zn==="left"?0:.5;let tA=0;for(const Sl of vn){Sl.trim();const fu=Sl.getMaxScale(),UA=(fu-1)*$a,zA={positionedGlyphs:[],lineOffset:0};lt.positionedLines[tA]=zA;const dc=zA.positionedGlyphs;let pu=0;if(!Sl.length()){ti+=Mn,++tA;continue}for(let Dc=0;Dc<Sl.length();Dc++){const Fo=Sl.getSection(Dc),vA=Sl.getSectionIndex(Dc),Va=Sl.getCharCode(Dc);let Al=0,ku=null,Tm=null,od=null,sg=$a;const fh=!(dr===a.ai.horizontal||!Qr&&!hA(Va)||Qr&&(A0[Va]||(hh=Va,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(hh)))));if(Fo.imageName){const sd=jn[Fo.imageName];if(!sd)continue;od=Fo.imageName,lt.iconsInText=lt.iconsInText||!0,Tm=sd.paddedRect;const nA=sd.displaySize;Fo.scale=Fo.scale*$a/Wr,ku={width:nA[0],height:nA[1],left:mA,top:-3,advance:fh?nA[1]:nA[0]},Al=UA+($a-nA[1]*Fo.scale),sg=ku.advance;const jd=fh?nA[0]*Fo.scale-$a*fu:nA[1]*Fo.scale-$a*fu;jd>0&&jd>pu&&(pu=jd)}else{const sd=cn[Fo.fontStack],nA=sd&&sd[Va];if(nA&&nA.rect)Tm=nA.rect,ku=nA.metrics;else{const jd=It[Fo.fontStack],np=jd&&jd[Va];if(!np)continue;ku=np.metrics}Al=(fu-Fo.scale)*$a}fh?(lt.verticalizable=!0,dc.push({glyph:Va,imageName:od,x:qr,y:ti+Al,vertical:fh,scale:Fo.scale,fontStack:Fo.fontStack,sectionIndex:vA,metrics:ku,rect:Tm}),qr+=sg*Fo.scale+In):(dc.push({glyph:Va,imageName:od,x:qr,y:ti+Al,vertical:fh,scale:Fo.scale,fontStack:Fo.fontStack,sectionIndex:vA,metrics:ku,rect:Tm}),qr+=ku.advance*Fo.scale+In)}dc.length!==0&&(Ko=Math.max(qr-In,Ko),i1(dc,0,dc.length-1,Zl,pu)),qr=0;const zd=Mn*fu+pu;zA.lineOffset=Math.max(pu,UA),ti+=zd,ul=Math.max(zd,ul),++tA}var hh;const cc=ti-Fp,{horizontalAlign:Iu,verticalAlign:yA}=tg(ir);(function(Sl,fu,UA,zA,dc,pu,zd,Dc,Fo){const vA=(fu-UA)*dc;let Va=0;Va=pu!==zd?-Dc*zA-Fp:(-zA*Fo+.5)*zd;for(const Al of Sl)for(const ku of Al.positionedGlyphs)ku.x+=vA,ku.y+=Va})(lt.positionedLines,Zl,Iu,yA,Ko,ul,Mn,cc,vn.length),lt.top+=-yA*cc,lt.bottom=lt.top+cc,lt.left+=-Iu*Ko,lt.right=lt.left+Ko}(Le,u,h,v,At,U,G,X,xe,re,Fe,Ge),!function(lt){for(const It of lt)if(It.positionedGlyphs.length!==0)return!1;return!0}(Bt)&&Le}const A0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ud={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},c0={40:!0};function bf(f,u,h,v,w,K){if(u.imageName){const U=v[u.imageName];return U?U.displaySize[0]*u.scale*$a/K+w:0}{const U=h[u.fontStack],G=U&&U[f];return G?G.metrics.advance*u.scale+w:0}}function wm(f,u,h,v){const w=Math.pow(f-u,2);return v?f<u?w/2:2*w:w+Math.abs(h)*h}function eg(f,u,h){let v=0;return f===10&&(v-=1e4),h&&(v+=150),f!==40&&f!==65288||(v+=50),u!==41&&u!==65289||(v+=50),v}function d0(f,u,h,v,w,K){let U=null,G=wm(u,h,w,K);for(const X of v){const re=wm(u-X.x,h,w,K)+X.badness;re<=G&&(U=X,G=re)}return{index:f,x:u,priorBreak:U,badness:G}}function r1(f){return f?r1(f.priorBreak).concat(f.index):[]}function Mm(f,u,h,v,w,K){if(!f)return[];const U=[],G=function(xe,Fe,ze,Ge,Je,At){let xt=0;for(let Wt=0;Wt<xe.length();Wt++){const Bt=xe.getSection(Wt);xt+=bf(xe.getCharCode(Wt),Bt,Ge,Je,Fe,At)}return xt/Math.max(1,Math.ceil(xt/ze))}(f,u,h,v,w,K),X=f.text.indexOf("​")>=0;let re=0;for(let xe=0;xe<f.length();xe++){const Fe=f.getSection(xe),ze=f.getCharCode(xe);if(A0[ze]||(re+=bf(ze,Fe,v,w,u,K)),xe<f.length()-1){const Ge=!((de=ze)<11904)&&(!!Si["CJK Compatibility Forms"](de)||!!Si["CJK Compatibility"](de)||!!Si["CJK Strokes"](de)||!!Si["CJK Symbols and Punctuation"](de)||!!Si["Enclosed CJK Letters and Months"](de)||!!Si["Halfwidth and Fullwidth Forms"](de)||!!Si["Ideographic Description Characters"](de)||!!Si["Vertical Forms"](de)||oc.test(String.fromCodePoint(de)));(Ud[ze]||Ge||Fe.imageName||xe!==f.length()-2&&c0[f.getCharCode(xe+1)])&&U.push(d0(xe+1,re,G,U,eg(ze,f.getCharCode(xe+1),Ge&&X),!1))}}var de;return r1(d0(f.length(),re,G,U,0,!0))}function tg(f){let u=.5,h=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:u,verticalAlign:h}}function i1(f,u,h,v,w){if(!v&&!w)return;const K=f[h],U=(f[h].x+K.metrics.advance*K.scale)*v;for(let G=u;G<=h;G++)f[G].x-=U,f[G].y+=w}function o1(f,u,h){const{horizontalAlign:v,verticalAlign:w}=tg(h),K=u[0]-f.displaySize[0]*v,U=u[1]-f.displaySize[1]*w;return{image:f,top:U,bottom:U+f.displaySize[1],left:K,right:K+f.displaySize[0]}}function Sm(f){var u,h;let v=f.left,w=f.top,K=f.right-v,U=f.bottom-w;const G=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",X=(h=f.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",re=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(X==="proportional"){if(G==="stretchOnly"&&K/U<re||G==="proportional"){const de=Math.ceil(U*re);v*=de/K,K=de}}else if(G==="proportional"&&X==="stretchOnly"&&re!==0&&K/U>re){const de=Math.ceil(K/re);w*=de/U,U=de}return{x1:v,y1:w,x2:v+K,y2:w+U}}function Em(f,u,h,v,w,K){const U=f.image;let G;if(U.content){const At=U.content,xt=U.pixelRatio||1;G=[At[0]/xt,At[1]/xt,U.displaySize[0]-At[2]/xt,U.displaySize[1]-At[3]/xt]}const X=u.left*K,re=u.right*K;let de,xe,Fe,ze;h==="width"||h==="both"?(ze=w[0]+X-v[3],xe=w[0]+re+v[1]):(ze=w[0]+(X+re-U.displaySize[0])/2,xe=ze+U.displaySize[0]);const Ge=u.top*K,Je=u.bottom*K;return h==="height"||h==="both"?(de=w[1]+Ge-v[0],Fe=w[1]+Je+v[2]):(de=w[1]+(Ge+Je-U.displaySize[1])/2,Fe=de+U.displaySize[1]),{image:U,top:de,right:xe,bottom:Fe,left:ze,collisionPadding:G}}const Lp=255,id=128,Nh=Lp*id;function h0(f,u){const{expression:h}=u;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Xo(f+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:w}=h;let K=0;for(;K<v.length&&v[K]<=f;)K++;K=Math.max(0,K-1);let U=K;for(;U<v.length&&v[U]<f+1;)U++;U=Math.min(v.length-1,U);const G=v[K],X=v[U];return h.kind==="composite"?{kind:"composite",minZoom:G,maxZoom:X,interpolationType:w}:{kind:"camera",minZoom:G,maxZoom:X,minSize:h.evaluate(new Xo(G)),maxSize:h.evaluate(new Xo(X)),interpolationType:w}}}function Jf(f,u,h){let v="never";const w=f.get(u);return w?v=w:f.get(h)&&(v="always"),v}const f0=Fl.VectorTileFeature.types,p0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bm(f,u,h,v,w,K,U,G,X,re,de,xe,Fe){const ze=G?Math.min(Nh,Math.round(G[0])):0,Ge=G?Math.min(Nh,Math.round(G[1])):0;f.emplaceBack(u,h,Math.round(32*v),Math.round(32*w),K,U,(ze<<1)+(X?1:0),Ge,16*re,16*de,256*xe,256*Fe)}function ng(f,u,h){f.emplaceBack(u.x,u.y,h),f.emplaceBack(u.x,u.y,h),f.emplaceBack(u.x,u.y,h),f.emplaceBack(u.x,u.y,h)}function m0(f){for(const u of f.sections)if(Wa(u.text))return!0;return!1}class Up{constructor(u){this.layoutVertexArray=new jt,this.indexArray=new xn,this.programConfigurations=u,this.segments=new Bn,this.dynamicLayoutVertexArray=new Rt,this.opacityVertexArray=new nn,this.hasVisibleVertices=!1,this.placedSymbolArray=new N}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,h,v,w){this.isEmpty()||(v&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,nv.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,_f.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,p0,!0),this.opacityVertexBuffer.itemSize=1),(v||w)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}vr("SymbolBuffers",Up);class ep{constructor(u,h,v){this.layoutVertexArray=new u,this.layoutAttributes=h,this.indexArray=new v,this.segments=new Bn,this.collisionVertexArray=new bn}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,e1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}vr("CollisionBuffers",ep);class zp{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(U=>U.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=h0(this.zoom,h["text-size"]),this.iconSizeData=h0(this.zoom,h["icon-size"]);const v=this.layers[0].layout,w=v.get("symbol-sort-key"),K=v.get("symbol-z-order");this.canOverlap=Jf(v,"text-overlap","text-allow-overlap")!=="never"||Jf(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=K!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(K==="viewport-y"||K==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(U=>a.ai[U])),this.stateDependentLayerIds=this.layers.filter(U=>U.isStateDependent()).map(U=>U.id),this.sourceID=u.sourceID}createArrays(){this.text=new Up(new il(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new Up(new il(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new ae,this.lineVertexArray=new Me,this.symbolInstances=new ne,this.textAnchorOffsets=new De}calculateGlyphDependencies(u,h,v,w,K){for(let U=0;U<u.length;U++)if(h[u.charCodeAt(U)]=!0,(v||w)&&K){const G=Ld[u.charAt(U)];G&&(h[G.charCodeAt(0)]=!0)}}populate(u,h,v){const w=this.layers[0],K=w.layout,U=K.get("text-font"),G=K.get("text-field"),X=K.get("icon-image"),re=(G.value.kind!=="constant"||G.value.value instanceof us&&!G.value.value.isEmpty()||G.value.value.toString().length>0)&&(U.value.kind!=="constant"||U.value.value.length>0),de=X.value.kind!=="constant"||!!X.value.value||Object.keys(X.parameters).length>0,xe=K.get("symbol-sort-key");if(this.features=[],!re&&!de)return;const Fe=h.iconDependencies,ze=h.glyphDependencies,Ge=h.availableImages,Je=new Xo(this.zoom);for(const{feature:At,id:xt,index:Wt,sourceLayerIndex:Bt}of u){const Le=w._featureFilter.needGeometry,lt=ac(At,Le);if(!w._featureFilter.filter(Je,lt,v))continue;let It,cn;if(Le||(lt.geometry=Id(At)),re){const vn=w.getValueAndResolveTokens("text-field",lt,v,Ge),Mn=us.factory(vn),ir=this.hasRTLText=this.hasRTLText||m0(Mn);(!ir||Fs.getRTLTextPluginStatus()==="unavailable"||ir&&Fs.isParsed())&&(It=V0(Mn,w,lt))}if(de){const vn=w.getValueAndResolveTokens("icon-image",lt,v,Ge);cn=vn instanceof Eo?vn:Eo.fromString(vn)}if(!It&&!cn)continue;const jn=this.sortFeaturesByKey?xe.evaluate(lt,{},v):void 0;if(this.features.push({id:xt,text:It,icon:cn,index:Wt,sourceLayerIndex:Bt,geometry:lt.geometry,properties:At.properties,type:f0[At.type],sortKey:jn}),cn&&(Fe[cn.name]=!0),It){const vn=U.evaluate(lt,{},v).join(","),Mn=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const ir of It.sections)if(ir.image)Fe[ir.image.name]=!0;else{const zn=Md(It.toString()),dr=ir.fontStack||vn,In=ze[dr]=ze[dr]||{};this.calculateGlyphDependencies(ir.text,In,Mn,this.allowVerticalPlacement,zn)}}}K.get("symbol-placement")==="line"&&(this.features=function(At){const xt={},Wt={},Bt=[];let Le=0;function lt(vn){Bt.push(At[vn]),Le++}function It(vn,Mn,ir){const zn=Wt[vn];return delete Wt[vn],Wt[Mn]=zn,Bt[zn].geometry[0].pop(),Bt[zn].geometry[0]=Bt[zn].geometry[0].concat(ir[0]),zn}function cn(vn,Mn,ir){const zn=xt[Mn];return delete xt[Mn],xt[vn]=zn,Bt[zn].geometry[0].shift(),Bt[zn].geometry[0]=ir[0].concat(Bt[zn].geometry[0]),zn}function jn(vn,Mn,ir){const zn=ir?Mn[0][Mn[0].length-1]:Mn[0][0];return`${vn}:${zn.x}:${zn.y}`}for(let vn=0;vn<At.length;vn++){const Mn=At[vn],ir=Mn.geometry,zn=Mn.text?Mn.text.toString():null;if(!zn){lt(vn);continue}const dr=jn(zn,ir),In=jn(zn,ir,!0);if(dr in Wt&&In in xt&&Wt[dr]!==xt[In]){const Qr=cn(dr,In,ir),Wr=It(dr,In,Bt[Qr].geometry);delete xt[dr],delete Wt[In],Wt[jn(zn,Bt[Wr].geometry,!0)]=Wr,Bt[Qr].geometry=null}else dr in Wt?It(dr,In,ir):In in xt?cn(dr,In,ir):(lt(vn),xt[dr]=Le-1,Wt[In]=Le-1)}return Bt.filter(vn=>vn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((At,xt)=>At.sortKey-xt.sortKey)}update(u,h,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,h,this.layers,v),this.icon.programConfigurations.updatePaintArrays(u,h,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,h){const v=this.lineVertexArray.length;if(u.segment!==void 0){let w=u.dist(h[u.segment+1]),K=u.dist(h[u.segment]);const U={};for(let G=u.segment+1;G<h.length;G++)U[G]={x:h[G].x,y:h[G].y,tileUnitDistanceFromAnchor:w},G<h.length-1&&(w+=h[G+1].dist(h[G]));for(let G=u.segment||0;G>=0;G--)U[G]={x:h[G].x,y:h[G].y,tileUnitDistanceFromAnchor:K},G>0&&(K+=h[G-1].dist(h[G]));for(let G=0;G<h.length;G++){const X=U[G];this.lineVertexArray.emplaceBack(X.x,X.y,X.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(u,h,v,w,K,U,G,X,re,de,xe,Fe){const ze=u.indexArray,Ge=u.layoutVertexArray,Je=u.segments.prepareSegment(4*h.length,Ge,ze,this.canOverlap?U.sortKey:void 0),At=this.glyphOffsetArray.length,xt=Je.vertexLength,Wt=this.allowVerticalPlacement&&G===a.ai.vertical?Math.PI/2:0,Bt=U.text&&U.text.sections;for(let Le=0;Le<h.length;Le++){const{tl:lt,tr:It,bl:cn,br:jn,tex:vn,pixelOffsetTL:Mn,pixelOffsetBR:ir,minFontScaleX:zn,minFontScaleY:dr,glyphOffset:In,isSDF:Qr,sectionIndex:Wr}=h[Le],qr=Je.vertexLength,ti=In[1];Bm(Ge,X.x,X.y,lt.x,ti+lt.y,vn.x,vn.y,v,Qr,Mn.x,Mn.y,zn,dr),Bm(Ge,X.x,X.y,It.x,ti+It.y,vn.x+vn.w,vn.y,v,Qr,ir.x,Mn.y,zn,dr),Bm(Ge,X.x,X.y,cn.x,ti+cn.y,vn.x,vn.y+vn.h,v,Qr,Mn.x,ir.y,zn,dr),Bm(Ge,X.x,X.y,jn.x,ti+jn.y,vn.x+vn.w,vn.y+vn.h,v,Qr,ir.x,ir.y,zn,dr),ng(u.dynamicLayoutVertexArray,X,Wt),ze.emplaceBack(qr,qr+2,qr+1),ze.emplaceBack(qr+1,qr+2,qr+3),Je.vertexLength+=4,Je.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(In[0]),Le!==h.length-1&&Wr===h[Le+1].sectionIndex||u.programConfigurations.populatePaintArrays(Ge.length,U,U.index,{},Fe,Bt&&Bt[Wr])}u.placedSymbolArray.emplaceBack(X.x,X.y,At,this.glyphOffsetArray.length-At,xt,re,de,X.segment,v?v[0]:0,v?v[1]:0,w[0],w[1],G,0,!1,0,xe)}_addCollisionDebugVertex(u,h,v,w,K,U){return h.emplaceBack(0,0),u.emplaceBack(v.x,v.y,w,K,Math.round(U.x),Math.round(U.y))}addCollisionDebugVertices(u,h,v,w,K,U,G){const X=K.segments.prepareSegment(4,K.layoutVertexArray,K.indexArray),re=X.vertexLength,de=K.layoutVertexArray,xe=K.collisionVertexArray,Fe=G.anchorX,ze=G.anchorY;this._addCollisionDebugVertex(de,xe,U,Fe,ze,new k(u,h)),this._addCollisionDebugVertex(de,xe,U,Fe,ze,new k(v,h)),this._addCollisionDebugVertex(de,xe,U,Fe,ze,new k(v,w)),this._addCollisionDebugVertex(de,xe,U,Fe,ze,new k(u,w)),X.vertexLength+=4;const Ge=K.indexArray;Ge.emplaceBack(re,re+1),Ge.emplaceBack(re+1,re+2),Ge.emplaceBack(re+2,re+3),Ge.emplaceBack(re+3,re),X.primitiveLength+=4}addDebugCollisionBoxes(u,h,v,w){for(let K=u;K<h;K++){const U=this.collisionBoxArray.get(K);this.addCollisionDebugVertices(U.x1,U.y1,U.x2,U.y2,w?this.textCollisionBox:this.iconCollisionBox,U.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ep(Xt,o0.members,Cn),this.iconCollisionBox=new ep(Xt,o0.members,Cn);for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(u,h,v,w,K,U,G,X,re){const de={};for(let xe=h;xe<v;xe++){const Fe=u.get(xe);de.textBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.textFeatureIndex=Fe.featureIndex;break}for(let xe=w;xe<K;xe++){const Fe=u.get(xe);de.verticalTextBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.verticalTextFeatureIndex=Fe.featureIndex;break}for(let xe=U;xe<G;xe++){const Fe=u.get(xe);de.iconBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.iconFeatureIndex=Fe.featureIndex;break}for(let xe=X;xe<re;xe++){const Fe=u.get(xe);de.verticalIconBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},de.verticalIconFeatureIndex=Fe.featureIndex;break}return de}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const v=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,h){const v=u.placedSymbolArray.get(h),w=v.vertexStartIndex+4*v.numGlyphs;for(let K=v.vertexStartIndex;K<w;K+=4)u.indexArray.emplaceBack(K,K+2,K+1),u.indexArray.emplaceBack(K+1,K+2,K+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(u),v=Math.cos(u),w=[],K=[],U=[];for(let G=0;G<this.symbolInstances.length;++G){U.push(G);const X=this.symbolInstances.get(G);w.push(0|Math.round(h*X.anchorX+v*X.anchorY)),K.push(X.featureIndex)}return U.sort((G,X)=>w[G]-w[X]||K[X]-K[G]),U}addToSortKeyRanges(u,h){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===h?v.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const v=this.symbolInstances.get(h);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((w,K,U)=>{w>=0&&U.indexOf(w)===K&&this.addIndicesForPlacedSymbol(this.text,w)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Om,m;vr("SymbolBucket",zp,{omit:["layers","collisionBoxArray","features","compareText"]}),zp.MAX_GLYPHS=65535,zp.addDynamicAttributes=ng;var C={get paint(){return m=m||new xs({"icon-opacity":new Zr(Oe.paint_symbol["icon-opacity"]),"icon-color":new Zr(Oe.paint_symbol["icon-color"]),"icon-halo-color":new Zr(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Zr(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Zr(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new yr(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new yr(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Zr(Oe.paint_symbol["text-opacity"]),"text-color":new Zr(Oe.paint_symbol["text-color"],{runtimeType:Ir,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Zr(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new Zr(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new Zr(Oe.paint_symbol["text-halo-blur"]),"text-translate":new yr(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new yr(Oe.paint_symbol["text-translate-anchor"])})},get layout(){return Om=Om||new xs({"symbol-placement":new yr(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new yr(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yr(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Zr(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yr(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yr(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new yr(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new yr(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new yr(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yr(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Zr(Oe.layout_symbol["icon-size"]),"icon-text-fit":new yr(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yr(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Zr(Oe.layout_symbol["icon-image"]),"icon-rotate":new Zr(Oe.layout_symbol["icon-rotate"]),"icon-padding":new Zr(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new yr(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new Zr(Oe.layout_symbol["icon-offset"]),"icon-anchor":new Zr(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yr(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yr(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yr(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new Zr(Oe.layout_symbol["text-field"]),"text-font":new Zr(Oe.layout_symbol["text-font"]),"text-size":new Zr(Oe.layout_symbol["text-size"]),"text-max-width":new Zr(Oe.layout_symbol["text-max-width"]),"text-line-height":new yr(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new Zr(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new Zr(Oe.layout_symbol["text-justify"]),"text-radial-offset":new Zr(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yr(Oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Zr(Oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Zr(Oe.layout_symbol["text-anchor"]),"text-max-angle":new yr(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new yr(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new Zr(Oe.layout_symbol["text-rotate"]),"text-padding":new yr(Oe.layout_symbol["text-padding"]),"text-keep-upright":new yr(Oe.layout_symbol["text-keep-upright"]),"text-transform":new Zr(Oe.layout_symbol["text-transform"]),"text-offset":new Zr(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new yr(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new yr(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new yr(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new yr(Oe.layout_symbol["text-optional"])})}};class F{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Er,this.defaultValue=u}evaluate(u){if(u.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(u.formattedSection))return h.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}vr("FormatSectionOverride",F,{omit:["defaultValue"]});class Q extends uu{constructor(u){super(u,C)}recalculate(u,h){if(super.recalculate(u,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const w=[];for(const K of v)w.indexOf(K)<0&&w.push(K);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,h,v,w){const K=this.layout.get(u).evaluate(h,{},v,w),U=this._unevaluatedLayout._values[u];return U.isDataDriven()||Gl(U.value)||!K?K:function(G,X){return X.replace(/{([^{}]+)}/g,(re,de)=>G&&de in G?String(G[de]):"")}(h.properties,K)}createBucket(u){return new zp(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of C.paint.overridableProperties){if(!Q.hasPaintOverride(this.layout,u))continue;const h=this.paint.get(u),v=new F(h),w=new bu(v,h.property.specification);let K=null;K=h.value.kind==="constant"||h.value.kind==="source"?new th("source",w):new ja("composite",w,h.value.zoomStops),this.paint._values[u]=new ys(h.property,K,h.parameters)}}_handleOverridablePaintPropertyUpdate(u,h,v){return!(!this.layout||h.isDataDriven()||v.isDataDriven())&&Q.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,h){const v=u.get("text-field"),w=C.paint.properties[h];let K=!1;const U=G=>{for(const X of G)if(w.overrides&&w.overrides.hasOverride(X))return void(K=!0)};if(v.value.kind==="constant"&&v.value.value instanceof us)U(v.value.value.sections);else if(v.value.kind==="source"){const G=re=>{K||(re instanceof po&&is(re.value)===Ea?U(re.value.sections):re instanceof hl?U(re.sections):re.eachChild(G))},X=v.value;X._styleExpression&&G(X._styleExpression.expression)}return K}}let ue;var ye={get paint(){return ue=ue||new xs({"background-color":new yr(Oe.paint_background["background-color"]),"background-pattern":new sc(Oe.paint_background["background-pattern"]),"background-opacity":new yr(Oe.paint_background["background-opacity"])})}};class et extends uu{constructor(u){super(u,ye)}}let kt;var Gt={get paint(){return kt=kt||new xs({"raster-opacity":new yr(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new yr(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yr(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yr(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new yr(Oe.paint_raster["raster-saturation"]),"raster-contrast":new yr(Oe.paint_raster["raster-contrast"]),"raster-resampling":new yr(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new yr(Oe.paint_raster["raster-fade-duration"])})}};class wn extends uu{constructor(u){super(u,Gt)}}class cr extends uu{constructor(u){super(u,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class gr{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const tr=63710088e-1;class jr{constructor(u,h){if(isNaN(u)||isNaN(h))throw new Error(`Invalid LngLat object: (${u}, ${h})`);if(this.lng=+u,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new jr(_t(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const h=Math.PI/180,v=this.lat*h,w=u.lat*h,K=Math.sin(v)*Math.sin(w)+Math.cos(v)*Math.cos(w)*Math.cos((u.lng-this.lng)*h);return tr*Math.acos(Math.min(K,1))}static convert(u){if(u instanceof jr)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new jr(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new jr(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const oi=2*Math.PI*tr;function ui(f){return oi*Math.cos(f*Math.PI/180)}function ll(f){return(180+f)/360}function An(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function en(f,u){return f/ui(u)}function hn(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function _r(f,u){return f*ui(hn(u))}class ri{constructor(u,h,v=0){this.x=+u,this.y=+h,this.z=+v}static fromLngLat(u,h=0){const v=jr.convert(u);return new ri(ll(v.lng),An(v.lat),en(h,v.lat))}toLngLat(){return new jr(360*this.x-180,hn(this.y))}toAltitude(){return _r(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/oi*(u=hn(this.y),1/Math.cos(u*Math.PI/180));var u}}function ki(f,u,h){var v=2*Math.PI*6378137/256/Math.pow(2,h);return[f*v-2*Math.PI*6378137/2,u*v-2*Math.PI*6378137/2]}class Ii{constructor(u,h,v){if(!function(w,K,U){return!(w<0||w>25||U<0||U>=Math.pow(2,w)||K<0||K>=Math.pow(2,w))}(u,h,v))throw new Error(`x=${h}, y=${v}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=h,this.y=v,this.key=es(0,u,u,h,v)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,h,v){const w=(U=this.y,G=this.z,X=ki(256*(K=this.x),256*(U=Math.pow(2,G)-U-1),G),re=ki(256*(K+1),256*(U+1),G),X[0]+","+X[1]+","+re[0]+","+re[1]);var K,U,G,X,re;const de=function(xe,Fe,ze){let Ge,Je="";for(let At=xe;At>0;At--)Ge=1<<At-1,Je+=(Fe&Ge?1:0)+(ze&Ge?2:0);return Je}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,de).replace(/{bbox-epsg-3857}/g,w)}isChildOf(u){const h=this.z-u.z;return h>0&&u.x===this.x>>h&&u.y===this.y>>h}getTilePoint(u){const h=Math.pow(2,this.z);return new k((u.x*h-this.x)*st,(u.y*h-this.y)*st)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ji{constructor(u,h){this.wrap=u,this.canonical=h,this.key=es(u,h.z,h.z,h.x,h.y)}}class Ls{constructor(u,h,v,w,K){if(this.terrainRttPosMatrix32f=null,u<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${v}`);this.overscaledZ=u,this.wrap=h,this.canonical=new Ii(v,+w,+K),this.key=es(h,u,v,w,K)}clone(){return new Ls(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-u;return u>this.canonical.z?new Ls(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ls(u,this.wrap,u,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(u,h){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-u;return u>this.canonical.z?es(this.wrap*+h,u,this.canonical.z,this.canonical.x,this.canonical.y):es(this.wrap*+h,u,u,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const h=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>h&&u.canonical.y===this.canonical.y>>h}children(u){if(this.overscaledZ>=u)return[new Ls(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,v=2*this.canonical.x,w=2*this.canonical.y;return[new Ls(h,this.wrap,h,v,w),new Ls(h,this.wrap,h,v+1,w),new Ls(h,this.wrap,h,v,w+1),new Ls(h,this.wrap,h,v+1,w+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Ls(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Ls(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ji(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new ri(u.x-this.wrap,u.y))}}function es(f,u,h,v,w){(f*=2)<0&&(f=-1*f-1);const K=1<<h;return(K*K*f+K*w+v).toString(36)+h.toString(36)+u.toString(36)}vr("CanonicalTileID",Ii),vr("OverscaledTileID",Ls,{omit:["terrainRttPosMatrix32f"]});class Wh{constructor(u,h,v,w=1,K=1,U=1,G=0){if(this.uid=u,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void nt(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const X=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=K,this.blueFactor=U,this.baseShift=G;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let re=0;re<X;re++)this.data[this._idx(-1,re)]=this.data[this._idx(0,re)],this.data[this._idx(X,re)]=this.data[this._idx(X-1,re)],this.data[this._idx(re,-1)]=this.data[this._idx(re,0)],this.data[this._idx(re,X)]=this.data[this._idx(re,X-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(X,-1)]=this.data[this._idx(X-1,0)],this.data[this._idx(-1,X)]=this.data[this._idx(0,X-1)],this.data[this._idx(X,X)]=this.data[this._idx(X-1,X-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let re=0;re<X;re++)for(let de=0;de<X;de++){const xe=this.get(re,de);xe>this.max&&(this.max=xe),xe<this.min&&(this.min=xe)}}get(u,h){const v=new Uint8Array(this.data.buffer),w=4*this._idx(u,h);return this.unpack(v[w],v[w+1],v[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,h){if(u<-1||u>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(u+1)}unpack(u,h,v){return u*this.redFactor+h*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new Ju({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,h,v){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let w=h*this.dim,K=h*this.dim+this.dim,U=v*this.dim,G=v*this.dim+this.dim;switch(h){case-1:w=K-1;break;case 1:K=w+1}switch(v){case-1:U=G-1;break;case 1:G=U+1}const X=-h*this.dim,re=-v*this.dim;for(let de=U;de<G;de++)for(let xe=w;xe<K;xe++)this.data[this._idx(xe,de)]=u.data[this._idx(xe+X,de+re)]}}vr("DEMData",Wh);class s1{constructor(u){this._stringToNumber={},this._numberToString=[];for(let h=0;h<u.length;h++){const v=u[h];this._stringToNumber[v]=h,this._numberToString[h]=v}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class C_{constructor(u,h,v,w,K){this.type="Feature",this._vectorTileFeature=u,u._z=h,u._x=v,u._y=w,this.properties=u.properties,this.id=K}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(u[h]=this[h]);return u}}class __{constructor(u,h){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new dA(st,16,0),this.grid3D=new dA(st,16,0),this.featureIndexArray=new Xe,this.promoteId=h}insert(u,h,v,w,K,U){const G=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,w,K);const X=U?this.grid3D:this.grid;for(let re=0;re<h.length;re++){const de=h[re],xe=[1/0,1/0,-1/0,-1/0];for(let Fe=0;Fe<de.length;Fe++){const ze=de[Fe];xe[0]=Math.min(xe[0],ze.x),xe[1]=Math.min(xe[1],ze.y),xe[2]=Math.max(xe[2],ze.x),xe[3]=Math.max(xe[3],ze.y)}xe[0]<st&&xe[1]<st&&xe[2]>=0&&xe[3]>=0&&X.insert(G,xe[0],xe[1],xe[2],xe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Fl.VectorTile(new l0(this.rawTileData)).layers,this.sourceLayerCoder=new s1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,h,v,w){this.loadVTLayers();const K=u.params,U=st/u.tileSize/u.scale,G=JA(K.filter),X=u.queryGeometry,re=u.queryPadding*U,de=x_(X),xe=this.grid.query(de.minX-re,de.minY-re,de.maxX+re,de.maxY+re),Fe=x_(u.cameraQueryGeometry),ze=this.grid3D.query(Fe.minX-re,Fe.minY-re,Fe.maxX+re,Fe.maxY+re,(At,xt,Wt,Bt)=>function(Le,lt,It,cn,jn){for(const Mn of Le)if(lt<=Mn.x&&It<=Mn.y&&cn>=Mn.x&&jn>=Mn.y)return!0;const vn=[new k(lt,It),new k(lt,jn),new k(cn,jn),new k(cn,It)];if(Le.length>2){for(const Mn of vn)if(Tc(Le,Mn))return!0}for(let Mn=0;Mn<Le.length-1;Mn++)if(gm(Le[Mn],Le[Mn+1],vn))return!0;return!1}(u.cameraQueryGeometry,At-re,xt-re,Wt+re,Bt+re));for(const At of ze)xe.push(At);xe.sort(S3);const Ge={};let Je;for(let At=0;At<xe.length;At++){const xt=xe[At];if(xt===Je)continue;Je=xt;const Wt=this.featureIndexArray.get(xt);let Bt=null;this.loadMatchingFeature(Ge,Wt.bucketIndex,Wt.sourceLayerIndex,Wt.featureIndex,G,K.layers,K.availableImages,h,v,w,(Le,lt,It)=>(Bt||(Bt=Id(Le)),lt.queryIntersectsFeature({queryGeometry:X,feature:Le,featureState:It,geometry:Bt,zoom:this.z,transform:u.transform,pixelsToTileUnits:U,pixelPosMatrix:u.pixelPosMatrix})))}return Ge}loadMatchingFeature(u,h,v,w,K,U,G,X,re,de,xe){const Fe=this.bucketLayerIDs[h];if(U&&!Fe.some(At=>U.has(At)))return;const ze=this.sourceLayerCoder.decode(v),Ge=this.vtLayers[ze].feature(w);if(K.needGeometry){const At=ac(Ge,!0);if(!K.filter(new Xo(this.tileID.overscaledZ),At,this.tileID.canonical))return}else if(!K.filter(new Xo(this.tileID.overscaledZ),Ge))return;const Je=this.getId(Ge,ze);for(let At=0;At<Fe.length;At++){const xt=Fe[At];if(U&&!U.has(xt))continue;const Wt=X[xt];if(!Wt)continue;let Bt={};Je&&de&&(Bt=de.getState(Wt.sourceLayer||"_geojsonTileLayer",Je));const Le=ft({},re[xt]);Le.paint=b_(Le.paint,Wt.paint,Ge,Bt,G),Le.layout=b_(Le.layout,Wt.layout,Ge,Bt,G);const lt=!xe||xe(Ge,Wt,Bt);if(!lt)continue;const It=new C_(Ge,this.z,this.x,this.y,Je);It.layer=Le;let cn=u[xt];cn===void 0&&(cn=u[xt]=[]),cn.push({featureIndex:w,feature:It,intersectionZ:lt})}}lookupSymbolFeatures(u,h,v,w,K,U,G,X){const re={};this.loadVTLayers();const de=JA(K);for(const xe of u)this.loadMatchingFeature(re,v,w,xe,de,U,G,X,h);return re}hasLayer(u){for(const h of this.bucketLayerIDs)for(const v of h)if(u===v)return!0;return!1}getId(u,h){var v;let w=u.id;return this.promoteId&&(w=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((v=u.properties)===null||v===void 0)&&v.cluster)&&this.promoteId&&(w=Number(u.properties.cluster_id))),w}}function b_(f,u,h,v,w){return Tt(f,(K,U)=>{const G=u instanceof ha?u.get(U):null;return G&&G.evaluate?G.evaluate(h,v,w):G})}function x_(f){let u=1/0,h=1/0,v=-1/0,w=-1/0;for(const K of f)u=Math.min(u,K.x),h=Math.min(h,K.y),v=Math.max(v,K.x),w=Math.max(w,K.y);return{minX:u,minY:h,maxX:v,maxY:w}}function S3(f,u){return u-f}function w_(f,u,h,v,w){const K=[];for(let U=0;U<f.length;U++){const G=f[U];let X;for(let re=0;re<G.length-1;re++){let de=G[re],xe=G[re+1];de.x<u&&xe.x<u||(de.x<u?de=new k(u,de.y+(u-de.x)/(xe.x-de.x)*(xe.y-de.y))._round():xe.x<u&&(xe=new k(u,de.y+(u-de.x)/(xe.x-de.x)*(xe.y-de.y))._round()),de.y<h&&xe.y<h||(de.y<h?de=new k(de.x+(h-de.y)/(xe.y-de.y)*(xe.x-de.x),h)._round():xe.y<h&&(xe=new k(de.x+(h-de.y)/(xe.y-de.y)*(xe.x-de.x),h)._round()),de.x>=v&&xe.x>=v||(de.x>=v?de=new k(v,de.y+(v-de.x)/(xe.x-de.x)*(xe.y-de.y))._round():xe.x>=v&&(xe=new k(v,de.y+(v-de.x)/(xe.x-de.x)*(xe.y-de.y))._round()),de.y>=w&&xe.y>=w||(de.y>=w?de=new k(de.x+(w-de.y)/(xe.y-de.y)*(xe.x-de.x),w)._round():xe.y>=w&&(xe=new k(de.x+(w-de.y)/(xe.y-de.y)*(xe.x-de.x),w)._round()),X&&de.equals(X[X.length-1])||(X=[de],K.push(X)),X.push(xe)))))}}return K}vr("FeatureIndex",__,{omit:["rawTileData","sourceLayerCoder"]});class jp extends k{constructor(u,h,v,w){super(u,h),this.angle=v,w!==void 0&&(this.segment=w)}clone(){return new jp(this.x,this.y,this.angle,this.segment)}}function M_(f,u,h,v,w){if(u.segment===void 0||h===0)return!0;let K=u,U=u.segment+1,G=0;for(;G>-h/2;){if(U--,U<0)return!1;G-=f[U].dist(K),K=f[U]}G+=f[U].dist(f[U+1]),U++;const X=[];let re=0;for(;G<h/2;){const de=f[U],xe=f[U+1];if(!xe)return!1;let Fe=f[U-1].angleTo(de)-de.angleTo(xe);for(Fe=Math.abs((Fe+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:G,angleDelta:Fe}),re+=Fe;G-X[0].distance>v;)re-=X.shift().angleDelta;if(re>w)return!1;U++,G+=de.dist(xe)}return!0}function S_(f){let u=0;for(let h=0;h<f.length-1;h++)u+=f[h].dist(f[h+1]);return u}function dh(f,u,h){return f?.6*u*h:0}function E_(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function E3(f,u,h,v,w,K){const U=dh(h,w,K),G=E_(h,v)*K;let X=0;const re=S_(f)/2;for(let de=0;de<f.length-1;de++){const xe=f[de],Fe=f[de+1],ze=xe.dist(Fe);if(X+ze>re){const Ge=(re-X)/ze,Je=Ci.number(xe.x,Fe.x,Ge),At=Ci.number(xe.y,Fe.y,Ge),xt=new jp(Je,At,Fe.angleTo(xe),de);return xt._round(),!U||M_(f,xt,G,U,u)?xt:void 0}X+=ze}}function Im(f,u,h,v,w,K,U,G,X){const re=dh(v,K,U),de=E_(v,w),xe=de*U,Fe=f[0].x===0||f[0].x===X||f[0].y===0||f[0].y===X;return u-xe<u/4&&(u=xe+u/4),Co(f,Fe?u/2*G%u:(de/2+2*K)*U*G%u,u,re,h,xe,Fe,!1,X)}function Co(f,u,h,v,w,K,U,G,X){const re=K/2,de=S_(f);let xe=0,Fe=u-h,ze=[];for(let Ge=0;Ge<f.length-1;Ge++){const Je=f[Ge],At=f[Ge+1],xt=Je.dist(At),Wt=At.angleTo(Je);for(;Fe+h<xe+xt;){Fe+=h;const Bt=(Fe-xe)/xt,Le=Ci.number(Je.x,At.x,Bt),lt=Ci.number(Je.y,At.y,Bt);if(Le>=0&&Le<X&&lt>=0&&lt<X&&Fe-re>=0&&Fe+re<=de){const It=new jp(Le,lt,Wt,Ge);It._round(),v&&!M_(f,It,K,v,w)||ze.push(It)}}xe+=xt}return G||ze.length||U||(ze=Co(f,xe/2,h,v,w,K,U,!0,X)),ze}vr("Anchor",jp);const rg=mA;function Rc(f,u,h,v){const w=[],K=f.image,U=K.pixelRatio,G=K.paddedRect.w-2*rg,X=K.paddedRect.h-2*rg;let re={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const de=K.stretchX||[[0,G]],xe=K.stretchY||[[0,X]],Fe=(In,Qr)=>In+Qr[1]-Qr[0],ze=de.reduce(Fe,0),Ge=xe.reduce(Fe,0),Je=G-ze,At=X-Ge;let xt=0,Wt=ze,Bt=0,Le=Ge,lt=0,It=Je,cn=0,jn=At;if(K.content&&v){const In=K.content,Qr=In[2]-In[0],Wr=In[3]-In[1];(K.textFitWidth||K.textFitHeight)&&(re=Sm(f)),xt=xl(de,0,In[0]),Bt=xl(xe,0,In[1]),Wt=xl(de,In[0],In[2]),Le=xl(xe,In[1],In[3]),lt=In[0]-xt,cn=In[1]-Bt,It=Qr-Wt,jn=Wr-Le}const vn=re.x1,Mn=re.y1,ir=re.x2-vn,zn=re.y2-Mn,dr=(In,Qr,Wr,qr)=>{const ti=Gh(In.stretch-xt,Wt,ir,vn),Ko=a1(In.fixed-lt,It,In.stretch,ze),ul=Gh(Qr.stretch-Bt,Le,zn,Mn),Zl=a1(Qr.fixed-cn,jn,Qr.stretch,Ge),tA=Gh(Wr.stretch-xt,Wt,ir,vn),hh=a1(Wr.fixed-lt,It,Wr.stretch,ze),cc=Gh(qr.stretch-Bt,Le,zn,Mn),Iu=a1(qr.fixed-cn,jn,qr.stretch,Ge),yA=new k(ti,ul),Sl=new k(tA,ul),fu=new k(tA,cc),UA=new k(ti,cc),zA=new k(Ko/U,Zl/U),dc=new k(hh/U,Iu/U),pu=u*Math.PI/180;if(pu){const Fo=Math.sin(pu),vA=Math.cos(pu),Va=[vA,-Fo,Fo,vA];yA._matMult(Va),Sl._matMult(Va),UA._matMult(Va),fu._matMult(Va)}const zd=In.stretch+In.fixed,Dc=Qr.stretch+Qr.fixed;return{tl:yA,tr:Sl,bl:UA,br:fu,tex:{x:K.paddedRect.x+rg+zd,y:K.paddedRect.y+rg+Dc,w:Wr.stretch+Wr.fixed-zd,h:qr.stretch+qr.fixed-Dc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:zA,pixelOffsetBR:dc,minFontScaleX:It/U/ir,minFontScaleY:jn/U/zn,isSDF:h}};if(v&&(K.stretchX||K.stretchY)){const In=B_(de,Je,ze),Qr=B_(xe,At,Ge);for(let Wr=0;Wr<In.length-1;Wr++){const qr=In[Wr],ti=In[Wr+1];for(let Ko=0;Ko<Qr.length-1;Ko++)w.push(dr(qr,Qr[Ko],ti,Qr[Ko+1]))}}else w.push(dr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:G+1},{fixed:0,stretch:X+1}));return w}function xl(f,u,h){let v=0;for(const w of f)v+=Math.max(u,Math.min(h,w[1]))-Math.max(u,Math.min(h,w[0]));return v}function B_(f,u,h){const v=[{fixed:-1,stretch:0}];for(const[w,K]of f){const U=v[v.length-1];v.push({fixed:w-U.stretch,stretch:U.stretch}),v.push({fixed:w-U.stretch,stretch:U.stretch+(K-w)})}return v.push({fixed:u+rg,stretch:h}),v}function Gh(f,u,h,v){return f/u*h+v}function a1(f,u,h,v){return f-u*h/v}class l1{constructor(u,h,v,w,K,U,G,X,re,de){var xe;if(this.boxStartIndex=u.length,re){let Fe=U.top,ze=U.bottom;const Ge=U.collisionPadding;Ge&&(Fe-=Ge[1],ze+=Ge[3]);let Je=ze-Fe;Je>0&&(Je=Math.max(10,Je),this.circleDiameter=Je)}else{const Fe=!((xe=U.image)===null||xe===void 0)&&xe.content&&(U.image.textFitWidth||U.image.textFitHeight)?Sm(U):{x1:U.left,y1:U.top,x2:U.right,y2:U.bottom};Fe.y1=Fe.y1*G-X[0],Fe.y2=Fe.y2*G+X[2],Fe.x1=Fe.x1*G-X[3],Fe.x2=Fe.x2*G+X[1];const ze=U.collisionPadding;if(ze&&(Fe.x1-=ze[0]*G,Fe.y1-=ze[1]*G,Fe.x2+=ze[2]*G,Fe.y2+=ze[3]*G),de){const Ge=new k(Fe.x1,Fe.y1),Je=new k(Fe.x2,Fe.y1),At=new k(Fe.x1,Fe.y2),xt=new k(Fe.x2,Fe.y2),Wt=de*Math.PI/180;Ge._rotate(Wt),Je._rotate(Wt),At._rotate(Wt),xt._rotate(Wt),Fe.x1=Math.min(Ge.x,Je.x,At.x,xt.x),Fe.x2=Math.max(Ge.x,Je.x,At.x,xt.x),Fe.y1=Math.min(Ge.y,Je.y,At.y,xt.y),Fe.y2=Math.max(Ge.y,Je.y,At.y,xt.y)}u.emplaceBack(h.x,h.y,Fe.x1,Fe.y1,Fe.x2,Fe.y2,v,w,K)}this.boxEndIndex=u.length}}class B3{constructor(u=[],h=(v,w)=>v<w?-1:v>w?1:0){if(this.data=u,this.length=this.data.length,this.compare=h,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:h,compare:v}=this,w=h[u];for(;u>0;){const K=u-1>>1,U=h[K];if(v(w,U)>=0)break;h[u]=U,u=K}h[u]=w}_down(u){const{data:h,compare:v}=this,w=this.length>>1,K=h[u];for(;u<w;){let U=1+(u<<1);const G=U+1;if(G<this.length&&v(h[G],h[U])<0&&(U=G),v(h[U],K)>=0)break;h[u]=h[U],u=U}h[u]=K}}function O3(f,u=1,h=!1){let v=1/0,w=1/0,K=-1/0,U=-1/0;const G=f[0];for(let ze=0;ze<G.length;ze++){const Ge=G[ze];(!ze||Ge.x<v)&&(v=Ge.x),(!ze||Ge.y<w)&&(w=Ge.y),(!ze||Ge.x>K)&&(K=Ge.x),(!ze||Ge.y>U)&&(U=Ge.y)}const X=Math.min(K-v,U-w);let re=X/2;const de=new B3([],I3);if(X===0)return new k(v,w);for(let ze=v;ze<K;ze+=X)for(let Ge=w;Ge<U;Ge+=X)de.push(new Np(ze+re,Ge+re,re,f));let xe=function(ze){let Ge=0,Je=0,At=0;const xt=ze[0];for(let Wt=0,Bt=xt.length,Le=Bt-1;Wt<Bt;Le=Wt++){const lt=xt[Wt],It=xt[Le],cn=lt.x*It.y-It.x*lt.y;Je+=(lt.x+It.x)*cn,At+=(lt.y+It.y)*cn,Ge+=3*cn}return new Np(Je/Ge,At/Ge,0,ze)}(f),Fe=de.length;for(;de.length;){const ze=de.pop();(ze.d>xe.d||!xe.d)&&(xe=ze,h&&console.log("found best %d after %d probes",Math.round(1e4*ze.d)/1e4,Fe)),ze.max-xe.d<=u||(re=ze.h/2,de.push(new Np(ze.p.x-re,ze.p.y-re,re,f)),de.push(new Np(ze.p.x+re,ze.p.y-re,re,f)),de.push(new Np(ze.p.x-re,ze.p.y+re,re,f)),de.push(new Np(ze.p.x+re,ze.p.y+re,re,f)),Fe+=4)}return h&&(console.log(`num probes: ${Fe}`),console.log(`best distance: ${xe.d}`)),xe.p}function I3(f,u){return u.max-f.max}function Np(f,u,h,v){this.p=new k(f,u),this.h=h,this.d=function(w,K){let U=!1,G=1/0;for(let X=0;X<K.length;X++){const re=K[X];for(let de=0,xe=re.length,Fe=xe-1;de<xe;Fe=de++){const ze=re[de],Ge=re[Fe];ze.y>w.y!=Ge.y>w.y&&w.x<(Ge.x-ze.x)*(w.y-ze.y)/(Ge.y-ze.y)+ze.x&&(U=!U),G=Math.min(G,Ip(w,ze,Ge))}}return(U?1:-1)*Math.sqrt(G)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}var gA;a.av=void 0,(gA=a.av||(a.av={}))[gA.center=1]="center",gA[gA.left=2]="left",gA[gA.right=3]="right",gA[gA.top=4]="top",gA[gA.bottom=5]="bottom",gA[gA["top-left"]=6]="top-left",gA[gA["top-right"]=7]="top-right",gA[gA["bottom-left"]=8]="bottom-left",gA[gA["bottom-right"]=9]="bottom-right";const Ac=7,u1=Number.POSITIVE_INFINITY;function ig(f,u){return u[1]!==u1?function(h,v,w){let K=0,U=0;switch(v=Math.abs(v),w=Math.abs(w),h){case"top-right":case"top-left":case"top":U=w-Ac;break;case"bottom-right":case"bottom-left":case"bottom":U=-w+Ac}switch(h){case"top-right":case"bottom-right":case"right":K=-v;break;case"top-left":case"bottom-left":case"left":K=v}return[K,U]}(f,u[0],u[1]):function(h,v){let w=0,K=0;v<0&&(v=0);const U=v/Math.SQRT2;switch(h){case"top-right":case"top-left":K=U-Ac;break;case"bottom-right":case"bottom-left":K=-U+Ac;break;case"bottom":K=-v+Ac;break;case"top":K=v-Ac}switch(h){case"top-right":case"bottom-right":w=-U;break;case"top-left":case"bottom-left":w=U;break;case"left":w=v;break;case"right":w=-v}return[w,K]}(f,u[0])}function wl(f,u,h){var v;const w=f.layout,K=(v=w.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(u,{},h);if(K){const G=K.values,X=[];for(let re=0;re<G.length;re+=2){const de=X[re]=G[re],xe=G[re+1].map(Fe=>Fe*$a);de.startsWith("top")?xe[1]-=Ac:de.startsWith("bottom")&&(xe[1]+=Ac),X[re+1]=xe}return new Ds(X)}const U=w.get("text-variable-anchor");if(U){let G;G=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(u,{},h)*$a,u1]:w.get("text-offset").evaluate(u,{},h).map(re=>re*$a);const X=[];for(const re of U)X.push(re,ig(re,G));return new Ds(X)}return null}function Ml(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function O_(f,u,h,v,w,K,U,G,X,re,de,xe){let Fe=K.textMaxSize.evaluate(u,{});Fe===void 0&&(Fe=U);const ze=f.layers[0].layout,Ge=ze.get("icon-offset").evaluate(u,{},de),Je=k_(h.horizontal),At=U/24,xt=f.tilePixelRatio*At,Wt=f.tilePixelRatio*Fe/24,Bt=f.tilePixelRatio*G,Le=f.tilePixelRatio*ze.get("symbol-spacing"),lt=ze.get("text-padding")*f.tilePixelRatio,It=function(Wr,qr,ti,Ko=1){const ul=Wr.get("icon-padding").evaluate(qr,{},ti),Zl=ul&&ul.values;return[Zl[0]*Ko,Zl[1]*Ko,Zl[2]*Ko,Zl[3]*Ko]}(ze,u,de,f.tilePixelRatio),cn=ze.get("text-max-angle")/180*Math.PI,jn=ze.get("text-rotation-alignment")!=="viewport"&&ze.get("symbol-placement")!=="point",vn=ze.get("icon-rotation-alignment")==="map"&&ze.get("symbol-placement")!=="point",Mn=ze.get("symbol-placement"),ir=Le/2,zn=ze.get("icon-text-fit");let dr;v&&zn!=="none"&&(f.allowVerticalPlacement&&h.vertical&&(dr=Em(v,h.vertical,zn,ze.get("icon-text-fit-padding"),Ge,At)),Je&&(v=Em(v,Je,zn,ze.get("icon-text-fit-padding"),Ge,At)));const In=de?xe.line.getGranularityForZoomLevel(de.z):1,Qr=(Wr,qr)=>{qr.x<0||qr.x>=st||qr.y<0||qr.y>=st||function(ti,Ko,ul,Zl,tA,hh,cc,Iu,yA,Sl,fu,UA,zA,dc,pu,zd,Dc,Fo,vA,Va,Al,ku,Tm,od,sg){const fh=ti.addToLineVertexArray(Ko,ul);let sd,nA,jd,np,R_=0,D_=0,K_=0,F_=0,Av=-1,cv=-1;const rp={};let L_=Ta("");if(ti.allowVerticalPlacement&&Zl.vertical){const jA=Iu.layout.get("text-rotate").evaluate(Al,{},od)+90;jd=new l1(yA,Ko,Sl,fu,UA,Zl.vertical,zA,dc,pu,jA),cc&&(np=new l1(yA,Ko,Sl,fu,UA,cc,Dc,Fo,pu,jA))}if(tA){const jA=Iu.layout.get("icon-rotate").evaluate(Al,{}),Nd=Iu.layout.get("icon-text-fit")!=="none",Pm=Rc(tA,jA,Tm,Nd),Wd=cc?Rc(cc,jA,Tm,Nd):void 0;nA=new l1(yA,Ko,Sl,fu,UA,tA,Dc,Fo,!1,jA),R_=4*Pm.length;const Rm=ti.iconSizeData;let xf=null;Rm.kind==="source"?(xf=[id*Iu.layout.get("icon-size").evaluate(Al,{})],xf[0]>Nh&&nt(`${ti.layerIds[0]}: Value for "icon-size" is >= ${Lp}. Reduce your "icon-size".`)):Rm.kind==="composite"&&(xf=[id*ku.compositeIconSizes[0].evaluate(Al,{},od),id*ku.compositeIconSizes[1].evaluate(Al,{},od)],(xf[0]>Nh||xf[1]>Nh)&&nt(`${ti.layerIds[0]}: Value for "icon-size" is >= ${Lp}. Reduce your "icon-size".`)),ti.addSymbols(ti.icon,Pm,xf,Va,vA,Al,a.ai.none,Ko,fh.lineStartIndex,fh.lineLength,-1,od),Av=ti.icon.placedSymbolArray.length-1,Wd&&(D_=4*Wd.length,ti.addSymbols(ti.icon,Wd,xf,Va,vA,Al,a.ai.vertical,Ko,fh.lineStartIndex,fh.lineLength,-1,od),cv=ti.icon.placedSymbolArray.length-1)}const U_=Object.keys(Zl.horizontal);for(const jA of U_){const Nd=Zl.horizontal[jA];if(!sd){L_=Ta(Nd.text);const Wd=Iu.layout.get("text-rotate").evaluate(Al,{},od);sd=new l1(yA,Ko,Sl,fu,UA,Nd,zA,dc,pu,Wd)}const Pm=Nd.positionedLines.length===1;if(K_+=I_(ti,Ko,Nd,hh,Iu,pu,Al,zd,fh,Zl.vertical?a.ai.horizontal:a.ai.horizontalOnly,Pm?U_:[jA],rp,Av,ku,od),Pm)break}Zl.vertical&&(F_+=I_(ti,Ko,Zl.vertical,hh,Iu,pu,Al,zd,fh,a.ai.vertical,["vertical"],rp,cv,ku,od));const P3=sd?sd.boxStartIndex:ti.collisionBoxArray.length,R3=sd?sd.boxEndIndex:ti.collisionBoxArray.length,D3=jd?jd.boxStartIndex:ti.collisionBoxArray.length,K3=jd?jd.boxEndIndex:ti.collisionBoxArray.length,F3=nA?nA.boxStartIndex:ti.collisionBoxArray.length,L3=nA?nA.boxEndIndex:ti.collisionBoxArray.length,U3=np?np.boxStartIndex:ti.collisionBoxArray.length,z3=np?np.boxEndIndex:ti.collisionBoxArray.length;let Qh=-1;const c1=(jA,Nd)=>jA&&jA.circleDiameter?Math.max(jA.circleDiameter,Nd):Nd;Qh=c1(sd,Qh),Qh=c1(jd,Qh),Qh=c1(nA,Qh),Qh=c1(np,Qh);const z_=Qh>-1?1:0;z_&&(Qh*=sg/$a),ti.glyphOffsetArray.length>=zp.MAX_GLYPHS&&nt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Al.sortKey!==void 0&&ti.addToSortKeyRanges(ti.symbolInstances.length,Al.sortKey);const dv=wl(Iu,Al,od),[j_,N_]=function(jA,Nd){const Pm=jA.length,Wd=Nd==null?void 0:Nd.values;if((Wd==null?void 0:Wd.length)>0)for(let Rm=0;Rm<Wd.length;Rm+=2){const xf=Wd[Rm+1];jA.emplaceBack(a.av[Wd[Rm]],xf[0],xf[1])}return[Pm,jA.length]}(ti.textAnchorOffsets,dv);ti.symbolInstances.emplaceBack(Ko.x,Ko.y,rp.right>=0?rp.right:-1,rp.center>=0?rp.center:-1,rp.left>=0?rp.left:-1,rp.vertical||-1,Av,cv,L_,P3,R3,D3,K3,F3,L3,U3,z3,Sl,K_,F_,R_,D_,z_,0,zA,Qh,j_,N_)}(f,qr,Wr,h,v,w,dr,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,xt,[lt,lt,lt,lt],jn,X,Bt,It,vn,Ge,u,K,re,de,U)};if(Mn==="line")for(const Wr of w_(u.geometry,0,0,st,st)){const qr=Jn(Wr,In),ti=Im(qr,Le,cn,h.vertical||Je,v,24,Wt,f.overscaling,st);for(const Ko of ti)Je&&k3(f,Je.text,ir,Ko)||Qr(qr,Ko)}else if(Mn==="line-center"){for(const Wr of u.geometry)if(Wr.length>1){const qr=Jn(Wr,In),ti=E3(qr,cn,h.vertical||Je,v,24,Wt);ti&&Qr(qr,ti)}}else if(u.type==="Polygon")for(const Wr of Nc(u.geometry,0)){const qr=O3(Wr,16);Qr(Jn(Wr[0],In,!0),new jp(qr.x,qr.y,0))}else if(u.type==="LineString")for(const Wr of u.geometry){const qr=Jn(Wr,In);Qr(qr,new jp(qr[0].x,qr[0].y,0))}else if(u.type==="Point")for(const Wr of u.geometry)for(const qr of Wr)Qr([qr],new jp(qr.x,qr.y,0))}function I_(f,u,h,v,w,K,U,G,X,re,de,xe,Fe,ze,Ge){const Je=function(Wt,Bt,Le,lt,It,cn,jn,vn){const Mn=lt.layout.get("text-rotate").evaluate(cn,{})*Math.PI/180,ir=[];for(const zn of Bt.positionedLines)for(const dr of zn.positionedGlyphs){if(!dr.rect)continue;const In=dr.rect||{};let Qr=al+1,Wr=!0,qr=1,ti=0;const Ko=(It||vn)&&dr.vertical,ul=dr.metrics.advance*dr.scale/2;if(vn&&Bt.verticalizable&&(ti=zn.lineOffset/2-(dr.imageName?-($a-dr.metrics.width*dr.scale)/2:(dr.scale-1)*$a)),dr.imageName){const Fo=jn[dr.imageName];Wr=Fo.sdf,qr=Fo.pixelRatio,Qr=mA/qr}const Zl=It?[dr.x+ul,dr.y]:[0,0];let tA=It?[0,0]:[dr.x+ul+Le[0],dr.y+Le[1]-ti],hh=[0,0];Ko&&(hh=tA,tA=[0,0]);const cc=dr.metrics.isDoubleResolution?2:1,Iu=(dr.metrics.left-Qr)*dr.scale-ul+tA[0],yA=(-dr.metrics.top-Qr)*dr.scale+tA[1],Sl=Iu+In.w/cc*dr.scale/qr,fu=yA+In.h/cc*dr.scale/qr,UA=new k(Iu,yA),zA=new k(Sl,yA),dc=new k(Iu,fu),pu=new k(Sl,fu);if(Ko){const Fo=new k(-ul,ul-Fp),vA=-Math.PI/2,Va=$a/2-ul,Al=new k(5-Fp-Va,-(dr.imageName?Va:0)),ku=new k(...hh);UA._rotateAround(vA,Fo)._add(Al)._add(ku),zA._rotateAround(vA,Fo)._add(Al)._add(ku),dc._rotateAround(vA,Fo)._add(Al)._add(ku),pu._rotateAround(vA,Fo)._add(Al)._add(ku)}if(Mn){const Fo=Math.sin(Mn),vA=Math.cos(Mn),Va=[vA,-Fo,Fo,vA];UA._matMult(Va),zA._matMult(Va),dc._matMult(Va),pu._matMult(Va)}const zd=new k(0,0),Dc=new k(0,0);ir.push({tl:UA,tr:zA,bl:dc,br:pu,tex:In,writingMode:Bt.writingMode,glyphOffset:Zl,sectionIndex:dr.sectionIndex,isSDF:Wr,pixelOffsetTL:zd,pixelOffsetBR:Dc,minFontScaleX:0,minFontScaleY:0})}return ir}(0,h,G,w,K,U,v,f.allowVerticalPlacement),At=f.textSizeData;let xt=null;At.kind==="source"?(xt=[id*w.layout.get("text-size").evaluate(U,{})],xt[0]>Nh&&nt(`${f.layerIds[0]}: Value for "text-size" is >= ${Lp}. Reduce your "text-size".`)):At.kind==="composite"&&(xt=[id*ze.compositeTextSizes[0].evaluate(U,{},Ge),id*ze.compositeTextSizes[1].evaluate(U,{},Ge)],(xt[0]>Nh||xt[1]>Nh)&&nt(`${f.layerIds[0]}: Value for "text-size" is >= ${Lp}. Reduce your "text-size".`)),f.addSymbols(f.text,Je,xt,G,K,U,re,u,X.lineStartIndex,X.lineLength,Fe,Ge);for(const Wt of de)xe[Wt]=f.text.placedSymbolArray.length-1;return 4*Je.length}function k_(f){for(const u in f)return f[u];return null}function k3(f,u,h,v){const w=f.compareText;if(u in w){const K=w[u];for(let U=K.length-1;U>=0;U--)if(v.dist(K[U])<h)return!0}else w[u]=[];return w[u].push(v),!1}const T_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ov{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,v]=new Uint8Array(u,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=v>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const K=T_[15&v];if(!K)throw new Error("Unrecognized array type.");const[U]=new Uint16Array(u,2,1),[G]=new Uint32Array(u,4,1);return new ov(G,U,K,u)}constructor(u,h=64,v=Float64Array,w){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=v,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const K=T_.indexOf(this.ArrayType),U=2*u*this.ArrayType.BYTES_PER_ELEMENT,G=u*this.IndexArrayType.BYTES_PER_ELEMENT,X=(8-G%8)%8;if(K<0)throw new Error(`Unexpected typed array class: ${v}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+G+X,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+U+G+X),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+G+X,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+K]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=u)}add(u,h){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=u,this.coords[this._pos++]=h,v}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return sv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,h,v,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:K,coords:U,nodeSize:G}=this,X=[0,K.length-1,0],re=[];for(;X.length;){const de=X.pop()||0,xe=X.pop()||0,Fe=X.pop()||0;if(xe-Fe<=G){for(let At=Fe;At<=xe;At++){const xt=U[2*At],Wt=U[2*At+1];xt>=u&&xt<=v&&Wt>=h&&Wt<=w&&re.push(K[At])}continue}const ze=Fe+xe>>1,Ge=U[2*ze],Je=U[2*ze+1];Ge>=u&&Ge<=v&&Je>=h&&Je<=w&&re.push(K[ze]),(de===0?u<=Ge:h<=Je)&&(X.push(Fe),X.push(ze-1),X.push(1-de)),(de===0?v>=Ge:w>=Je)&&(X.push(ze+1),X.push(xe),X.push(1-de))}return re}within(u,h,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:K,nodeSize:U}=this,G=[0,w.length-1,0],X=[],re=v*v;for(;G.length;){const de=G.pop()||0,xe=G.pop()||0,Fe=G.pop()||0;if(xe-Fe<=U){for(let At=Fe;At<=xe;At++)P_(K[2*At],K[2*At+1],u,h)<=re&&X.push(w[At]);continue}const ze=Fe+xe>>1,Ge=K[2*ze],Je=K[2*ze+1];P_(Ge,Je,u,h)<=re&&X.push(w[ze]),(de===0?u-v<=Ge:h-v<=Je)&&(G.push(Fe),G.push(ze-1),G.push(1-de)),(de===0?u+v>=Ge:h+v>=Je)&&(G.push(ze+1),G.push(xe),G.push(1-de))}return X}}function sv(f,u,h,v,w,K){if(w-v<=h)return;const U=v+w>>1;av(f,u,U,v,w,K),sv(f,u,h,v,U-1,1-K),sv(f,u,h,U+1,w,1-K)}function av(f,u,h,v,w,K){for(;w>v;){if(w-v>600){const re=w-v+1,de=h-v+1,xe=Math.log(re),Fe=.5*Math.exp(2*xe/3),ze=.5*Math.sqrt(xe*Fe*(re-Fe)/re)*(de-re/2<0?-1:1);av(f,u,h,Math.max(v,Math.floor(h-de*Fe/re+ze)),Math.min(w,Math.floor(h+(re-de)*Fe/re+ze)),K)}const U=u[2*h+K];let G=v,X=w;for(tp(f,u,v,h),u[2*w+K]>U&&tp(f,u,v,w);G<X;){for(tp(f,u,G,X),G++,X--;u[2*G+K]<U;)G++;for(;u[2*X+K]>U;)X--}u[2*v+K]===U?tp(f,u,v,X):(X++,tp(f,u,X,w)),X<=h&&(v=X+1),h<=X&&(w=X-1)}}function tp(f,u,h,v){og(f,h,v),og(u,2*h,2*v),og(u,2*h+1,2*v+1)}function og(f,u,h){const v=f[u];f[u]=f[h],f[h]=v}function P_(f,u,h,v){const w=f-h,K=u-v;return w*w+K*K}var A1;a.ce=void 0,(A1=a.ce||(a.ce={})).create="create",A1.load="load",A1.fullLoad="fullLoad";let km=null,LA=[];const Wp=1e3/60,lv="loadTime",uv="fullLoadTime",T3={mark(f){performance.mark(f)},frame(f){const u=f;km!=null&&LA.push(u-km),km=u},clearMetrics(){km=null,LA=[],performance.clearMeasures(lv),performance.clearMeasures(uv);for(const f in a.ce)performance.clearMarks(a.ce[f])},getPerformanceMetrics(){performance.measure(lv,a.ce.create,a.ce.load),performance.measure(uv,a.ce.create,a.ce.fullLoad);const f=performance.getEntriesByName(lv)[0].duration,u=performance.getEntriesByName(uv)[0].duration,h=LA.length,v=1/(LA.reduce((K,U)=>K+U,0)/h/1e3),w=LA.filter(K=>K>Wp).reduce((K,U)=>K+(U-Wp)/Wp,0);return{loadTime:f,fullLoadTime:u,fps:v,percentDroppedFrames:w/(h+w)*100,totalFrames:h}}};a.$=wt,a.A=W,a.B=oh,a.C=function(f){if(zt==null){const u=f.navigator?f.navigator.userAgent:null;zt=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return zt},a.D=yr,a.E=rr,a.F=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new gr(()=>this.process()),this.subscription=function(h,v,w,K){return h.addEventListener(v,w,!1),{unsubscribe:()=>{h.removeEventListener(v,w,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=pt(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise((h,v)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[w]={resolve:h,reject:v},u&&u.signal.addEventListener("abort",()=>{delete this.resolveRejects[w];const G={id:w,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(G)},{once:!0});const K=[],U=Object.assign(Object.assign({},f),{id:w,sourceMapId:this.mapId,origin:location.origin,data:ic(f.data,K)});this.target.postMessage(U,{transfer:K})})}receive(f){const u=f.data,h=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[h];const v=this.abortControllers[h];return delete this.abortControllers[h],void(v&&v.abort())}if(pt(self)||u.mustQueue)return this.tasks[h]=u,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return o(this,void 0,void 0,function*(){if(u.type==="<response>"){const w=this.resolveRejects[f];return delete this.resolveRejects[f],w?void(u.error?w.reject(xd(u.error)):w.resolve(xd(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=xd(u.data),v=new AbortController;this.abortControllers[f]=v;try{const w=yield this.messageHandlers[u.type](u.sourceMapId,h,v);this.completeTask(f,null,w)}catch(w){this.completeTask(f,w)}})}completeTask(f,u,h){const v=[];delete this.abortControllers[f];const w={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?ic(u):null,data:ic(h,v)};this.target.postMessage(w,{transfer:v})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.G=Yn,a.H=function(){var f=new W(16);return W!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},a.I=J0,a.J=function(f,u,h){var v,w,K,U,G,X,re,de,xe,Fe,ze,Ge,Je=h[0],At=h[1],xt=h[2];return u===f?(f[12]=u[0]*Je+u[4]*At+u[8]*xt+u[12],f[13]=u[1]*Je+u[5]*At+u[9]*xt+u[13],f[14]=u[2]*Je+u[6]*At+u[10]*xt+u[14],f[15]=u[3]*Je+u[7]*At+u[11]*xt+u[15]):(w=u[1],K=u[2],U=u[3],G=u[4],X=u[5],re=u[6],de=u[7],xe=u[8],Fe=u[9],ze=u[10],Ge=u[11],f[0]=v=u[0],f[1]=w,f[2]=K,f[3]=U,f[4]=G,f[5]=X,f[6]=re,f[7]=de,f[8]=xe,f[9]=Fe,f[10]=ze,f[11]=Ge,f[12]=v*Je+G*At+xe*xt+u[12],f[13]=w*Je+X*At+Fe*xt+u[13],f[14]=K*Je+re*At+ze*xt+u[14],f[15]=U*Je+de*At+Ge*xt+u[15]),f},a.K=function(f,u,h){var v=h[0],w=h[1],K=h[2];return f[0]=u[0]*v,f[1]=u[1]*v,f[2]=u[2]*v,f[3]=u[3]*v,f[4]=u[4]*w,f[5]=u[5]*w,f[6]=u[6]*w,f[7]=u[7]*w,f[8]=u[8]*K,f[9]=u[9]*K,f[10]=u[10]*K,f[11]=u[11]*K,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},a.L=function(f,u,h){var v=u[0],w=u[1],K=u[2],U=u[3],G=u[4],X=u[5],re=u[6],de=u[7],xe=u[8],Fe=u[9],ze=u[10],Ge=u[11],Je=u[12],At=u[13],xt=u[14],Wt=u[15],Bt=h[0],Le=h[1],lt=h[2],It=h[3];return f[0]=Bt*v+Le*G+lt*xe+It*Je,f[1]=Bt*w+Le*X+lt*Fe+It*At,f[2]=Bt*K+Le*re+lt*ze+It*xt,f[3]=Bt*U+Le*de+lt*Ge+It*Wt,f[4]=(Bt=h[4])*v+(Le=h[5])*G+(lt=h[6])*xe+(It=h[7])*Je,f[5]=Bt*w+Le*X+lt*Fe+It*At,f[6]=Bt*K+Le*re+lt*ze+It*xt,f[7]=Bt*U+Le*de+lt*Ge+It*Wt,f[8]=(Bt=h[8])*v+(Le=h[9])*G+(lt=h[10])*xe+(It=h[11])*Je,f[9]=Bt*w+Le*X+lt*Fe+It*At,f[10]=Bt*K+Le*re+lt*ze+It*xt,f[11]=Bt*U+Le*de+lt*Ge+It*Wt,f[12]=(Bt=h[12])*v+(Le=h[13])*G+(lt=h[14])*xe+(It=h[15])*Je,f[13]=Bt*w+Le*X+lt*Fe+It*At,f[14]=Bt*K+Le*re+lt*ze+It*xt,f[15]=Bt*U+Le*de+lt*Ge+It*Wt,f},a.M=function(f,u){const h={};for(let v=0;v<u.length;v++){const w=u[v];w in f&&(h[w]=f[w])}return h},a.N=jr,a.O=ll,a.P=k,a.Q=An,a.R=Ju,a.S=Ls,a.T=Sc,a.U=ie,a.V=J,a.W=gn,a.X=st,a.Y=ri,a.Z=Ii,a._=o,a.a=Xn,a.a$=function(){return new Float64Array(16)},a.a0=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(h=>{u.onloadstart=()=>{h(u)};for(const v of f){const w=window.document.createElement("source");me(v)||(u.crossOrigin="Anonymous"),w.src=v,u.appendChild(w)}})},a.a1=function(){return Dt++},a.a2=M,a.a3=zp,a.a4=JA,a.a5=ac,a.a6=C_,a.a7=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,v,w,K)=>{const U=w||K;return u[v]=!U||U.toLowerCase(),""}),u["max-age"]){const h=parseInt(u["max-age"],10);isNaN(h)?delete u["max-age"]:u["max-age"]=h}return u},a.a8=function(f){return Math.log(f)/Math.LN2},a.a9=function(f){var u=f[0],h=f[1];return u*u+h*h},a.aA=ks,a.aB=St,a.aC=mt,a.aD=Bn,a.aE=xn,a.aF=85.051129,a.aG=function(f){return Math.pow(2,f)},a.aH=en,a.aI=_t,a.aJ=or,a.aK=_r,a.aL=function(f,u,h){return f[0]=u[0]*h,f[1]=u[1]*h,f[2]=u[2]*h,f},a.aM=function(f,u,h){return f[0]=u[0]+h[0],f[1]=u[1]+h[1],f[2]=u[2]+h[2],f},a.aN=function(f){var u=new W(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},a.aO=function(f,u,h){return f[0]=u[0]*h[0],f[1]=u[1]*h[1],f[2]=u[2]*h[2],f[3]=u[3]*h[3],f},a.aP=function(f,u,h){return f[0]=u[0]-h[0],f[1]=u[1]-h[1],f[2]=u[2]-h[2],f},a.aQ=function(f,u){var h=u[0],v=u[1],w=u[2],K=h*h+v*v+w*w;return K>0&&(K=1/Math.sqrt(K)),f[0]=u[0]*K,f[1]=u[1]*K,f[2]=u[2]*K,f},a.aR=function(f,u,h){var v=u[0],w=u[1],K=u[2],U=h[0],G=h[1],X=h[2];return f[0]=w*X-K*G,f[1]=K*U-v*X,f[2]=v*G-w*U,f},a.aS=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},a.aT=ji,a.aU=es,a.aV=function(f,u,h,v,w){var K,U=1/Math.tan(u/2);return f[0]=U/h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=U,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,w!=null&&w!==1/0?(f[10]=(w+v)*(K=1/(v-w)),f[14]=2*w*v*K):(f[10]=-1,f[14]=-2*v),f},a.aW=function(f){var u=new W(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},a.aX=function(f,u,h){var v=Math.sin(h),w=Math.cos(h),K=u[0],U=u[1],G=u[2],X=u[3],re=u[4],de=u[5],xe=u[6],Fe=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=K*w+re*v,f[1]=U*w+de*v,f[2]=G*w+xe*v,f[3]=X*w+Fe*v,f[4]=re*w-K*v,f[5]=de*w-U*v,f[6]=xe*w-G*v,f[7]=Fe*w-X*v,f},a.aY=function(f,u,h){var v=Math.sin(h),w=Math.cos(h),K=u[4],U=u[5],G=u[6],X=u[7],re=u[8],de=u[9],xe=u[10],Fe=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=K*w+re*v,f[5]=U*w+de*v,f[6]=G*w+xe*v,f[7]=X*w+Fe*v,f[8]=re*w-K*v,f[9]=de*w-U*v,f[10]=xe*w-G*v,f[11]=Fe*w-X*v,f},a.aZ=function(){const f=new Float32Array(16);return fe(f),f},a.a_=function(){const f=new Float64Array(16);return fe(f),f},a.aa=function(f){return f*Math.PI/180},a.ab=vt,a.ac=function(f,u){const h=[];for(const v in f)v in u||h.push(v);return h},a.ad=Ke,a.ae=function(f){return Math.hypot(f[0],f[1])},a.af=function(f){return f[0]=0,f[1]=0,f},a.ag=function(f,u,h){return f[0]=u[0]*h,f[1]=u[1]*h,f},a.ah=function(f,u){let h=0,v=0;if(f.kind==="constant")v=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:w,minZoom:K,maxZoom:U}=f,G=w?vt(Cr.interpolationFactor(w,u,K,U),0,1):0;f.kind==="camera"?v=Ci.number(f.minSize,f.maxSize,G):h=G}return{uSizeT:h,uSize:v}},a.aj=function(f,{uSize:u,uSizeT:h},{lowerSize:v,upperSize:w}){return f.kind==="source"?v/id:f.kind==="composite"?Ci.number(v/id,w/id,h):u},a.ak=ng,a.al=pe,a.am=function(f,u,h,v){const w=u.y-f.y,K=u.x-f.x,U=v.y-h.y,G=v.x-h.x,X=U*K-G*w;if(X===0)return null;const re=(G*(f.y-h.y)-U*(f.x-h.x))/X;return new k(f.x+re*K,f.y+re*w)},a.an=function(f,u){var h=u[0],v=u[1],w=u[2],K=u[3],U=u[4],G=u[5],X=u[6],re=u[7],de=u[8],xe=u[9],Fe=u[10],ze=u[11],Ge=u[12],Je=u[13],At=u[14],xt=u[15],Wt=h*G-v*U,Bt=h*X-w*U,Le=h*re-K*U,lt=v*X-w*G,It=v*re-K*G,cn=w*re-K*X,jn=de*Je-xe*Ge,vn=de*At-Fe*Ge,Mn=de*xt-ze*Ge,ir=xe*At-Fe*Je,zn=xe*xt-ze*Je,dr=Fe*xt-ze*At,In=Wt*dr-Bt*zn+Le*ir+lt*Mn-It*vn+cn*jn;return In?(f[0]=(G*dr-X*zn+re*ir)*(In=1/In),f[1]=(w*zn-v*dr-K*ir)*In,f[2]=(Je*cn-At*It+xt*lt)*In,f[3]=(Fe*It-xe*cn-ze*lt)*In,f[4]=(X*Mn-U*dr-re*vn)*In,f[5]=(h*dr-w*Mn+K*vn)*In,f[6]=(At*Le-Ge*cn-xt*Bt)*In,f[7]=(de*cn-Fe*Le+ze*Bt)*In,f[8]=(U*zn-G*Mn+re*jn)*In,f[9]=(v*Mn-h*zn-K*jn)*In,f[10]=(Ge*It-Je*Le+xt*Wt)*In,f[11]=(xe*Le-de*It-ze*Wt)*In,f[12]=(G*vn-U*ir-X*jn)*In,f[13]=(h*ir-v*vn+w*jn)*In,f[14]=(Je*Bt-Ge*lt-At*Wt)*In,f[15]=(de*lt-xe*Bt+Fe*Wt)*In,f):null},a.ao=w_,a.ap=kd,a.aq=fe,a.ar=function(f){let u=1/0,h=1/0,v=-1/0,w=-1/0;for(const K of f)u=Math.min(u,K.x),h=Math.min(h,K.y),v=Math.max(v,K.x),w=Math.max(w,K.y);return[u,h,v,w]},a.as=$a,a.at=Qe,a.au=function(f,u,h,v,w=!1){if(!h[0]&&!h[1])return[0,0];const K=w?v==="map"?-f.bearingInRadians:0:v==="viewport"?f.bearingInRadians:0;if(K){const U=Math.sin(K),G=Math.cos(K);h=[h[0]*G-h[1]*U,h[0]*U+h[1]*G]}return[w?h[0]:Qe(u,h[0],f.zoom),w?h[1]:Qe(u,h[1],f.zoom)]},a.aw=Jf,a.ax=Ml,a.ay=tg,a.az=ov,a.b=tn,a.b$=f=>f.type==="line",a.b0=function(f,u,h){const v=new Float64Array(4);return function(w,K,U,G){var X=.5*Math.PI/180;K*=X,U*=X,G*=X;var re=Math.sin(K),de=Math.cos(K),xe=Math.sin(U),Fe=Math.cos(U),ze=Math.sin(G),Ge=Math.cos(G);w[0]=re*Fe*Ge-de*xe*ze,w[1]=de*xe*Ge+re*Fe*ze,w[2]=de*Fe*ze-re*xe*Ge,w[3]=de*Fe*Ge+re*xe*ze}(v,f,u-90,h),v},a.b1=function(f,u,h,v){var w,K,U,G,X,re=u[0],de=u[1],xe=u[2],Fe=u[3],ze=h[0],Ge=h[1],Je=h[2],At=h[3];return(K=re*ze+de*Ge+xe*Je+Fe*At)<0&&(K=-K,ze=-ze,Ge=-Ge,Je=-Je,At=-At),1-K>te?(w=Math.acos(K),U=Math.sin(w),G=Math.sin((1-v)*w)/U,X=Math.sin(v*w)/U):(G=1-v,X=v),f[0]=G*re+X*ze,f[1]=G*de+X*Ge,f[2]=G*xe+X*Je,f[3]=G*Fe+X*At,f},a.b2=function(f){const u=new Float64Array(9);var h,v,w,K,U,G,X,re,de,xe,Fe,ze,Ge,Je,At,xt,Wt,Bt;xe=(w=(v=f)[0])*(X=w+w),Fe=(K=v[1])*X,Ge=(U=v[2])*X,Je=U*(re=K+K),xt=(G=v[3])*X,Wt=G*re,Bt=G*(de=U+U),(h=u)[0]=1-(ze=K*re)-(At=U*de),h[3]=Fe-Bt,h[6]=Ge+Wt,h[1]=Fe+Bt,h[4]=1-xe-At,h[7]=Je-xt,h[2]=Ge-Wt,h[5]=Je+xt,h[8]=1-xe-ze;const Le=or(-Math.asin(vt(u[2],-1,1)));let lt,It;return Math.hypot(u[5],u[8])<.001?(lt=0,It=-or(Math.atan2(u[3],u[4]))):(lt=or(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),It=or(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:lt,pitch:Le+90,bearing:It}},a.b3=function(f,u){return f.roll==u.roll&&f.pitch==u.pitch&&f.bearing==u.bearing},a.b4=ci,a.b5=gl,a.b6=Jt,a.b7=qt,a.b8=yt,a.b9=We,a.bA=Tt,a.bB=Ue,a.bC=class extends ml{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},a.bD=class extends ml{constructor(f,u){super(f,u),this.current=PA}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},a.bE=du,a.bF=TA,a.bG=class extends ml{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},a.bH=class extends ml{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},a.bI=oe,a.bJ=function(f,u){var h=Math.sin(u),v=Math.cos(u);return f[0]=v,f[1]=h,f[2]=0,f[3]=-h,f[4]=v,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},a.bK=function(f,u,h){var v=u[0],w=u[1],K=u[2];return f[0]=v*h[0]+w*h[3]+K*h[6],f[1]=v*h[1]+w*h[4]+K*h[7],f[2]=v*h[2]+w*h[5]+K*h[8],f},a.bL=function(f,u,h,v,w,K,U){var G=1/(u-h),X=1/(v-w),re=1/(K-U);return f[0]=-2*G,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*X,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*re,f[11]=0,f[12]=(u+h)*G,f[13]=(w+v)*X,f[14]=(U+K)*re,f[15]=1,f},a.bM=class extends Au{},a.bN=Zf,a.bO=class extends fA{},a.bP=Rd,a.bQ=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},a.bR=hf,a.bS=function(f,u,h){var v=u[0],w=u[1],K=u[2],U=h[3]*v+h[7]*w+h[11]*K+h[15];return f[0]=(h[0]*v+h[4]*w+h[8]*K+h[12])/(U=U||1),f[1]=(h[1]*v+h[5]*w+h[9]*K+h[13])/U,f[2]=(h[2]*v+h[6]*w+h[10]*K+h[14])/U,f},a.bT=class extends kA{},a.bU=class extends l{},a.bV=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},a.bW=function(f,u){var h=f[0],v=f[1],w=f[2],K=f[3],U=f[4],G=f[5],X=f[6],re=f[7],de=f[8],xe=f[9],Fe=f[10],ze=f[11],Ge=f[12],Je=f[13],At=f[14],xt=f[15],Wt=u[0],Bt=u[1],Le=u[2],lt=u[3],It=u[4],cn=u[5],jn=u[6],vn=u[7],Mn=u[8],ir=u[9],zn=u[10],dr=u[11],In=u[12],Qr=u[13],Wr=u[14],qr=u[15];return Math.abs(h-Wt)<=te*Math.max(1,Math.abs(h),Math.abs(Wt))&&Math.abs(v-Bt)<=te*Math.max(1,Math.abs(v),Math.abs(Bt))&&Math.abs(w-Le)<=te*Math.max(1,Math.abs(w),Math.abs(Le))&&Math.abs(K-lt)<=te*Math.max(1,Math.abs(K),Math.abs(lt))&&Math.abs(U-It)<=te*Math.max(1,Math.abs(U),Math.abs(It))&&Math.abs(G-cn)<=te*Math.max(1,Math.abs(G),Math.abs(cn))&&Math.abs(X-jn)<=te*Math.max(1,Math.abs(X),Math.abs(jn))&&Math.abs(re-vn)<=te*Math.max(1,Math.abs(re),Math.abs(vn))&&Math.abs(de-Mn)<=te*Math.max(1,Math.abs(de),Math.abs(Mn))&&Math.abs(xe-ir)<=te*Math.max(1,Math.abs(xe),Math.abs(ir))&&Math.abs(Fe-zn)<=te*Math.max(1,Math.abs(Fe),Math.abs(zn))&&Math.abs(ze-dr)<=te*Math.max(1,Math.abs(ze),Math.abs(dr))&&Math.abs(Ge-In)<=te*Math.max(1,Math.abs(Ge),Math.abs(In))&&Math.abs(Je-Qr)<=te*Math.max(1,Math.abs(Je),Math.abs(Qr))&&Math.abs(At-Wr)<=te*Math.max(1,Math.abs(At),Math.abs(Wr))&&Math.abs(xt-qr)<=te*Math.max(1,Math.abs(xt),Math.abs(qr))},a.bX=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},a.bY=f=>f.type==="symbol",a.bZ=f=>f.type==="circle",a.b_=f=>f.type==="heatmap",a.ba=Ce,a.bb=Qs,a.bc=function(f,u,h,v,w){return We(v,w,vt((f-u)/(h-u),0,1))},a.bd=Ze,a.be=function(){return new Float64Array(4)},a.bf=function(){return new Float64Array(3)},a.bg=function(f,u,h,v){var w=[],K=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],K[0]=w[0]*Math.cos(v)-w[1]*Math.sin(v),K[1]=w[0]*Math.sin(v)+w[1]*Math.cos(v),K[2]=w[2],f[0]=K[0]+h[0],f[1]=K[1]+h[1],f[2]=K[2]+h[2],f},a.bh=function(f,u,h,v){var w=[],K=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],K[0]=w[0],K[1]=w[1]*Math.cos(v)-w[2]*Math.sin(v),K[2]=w[1]*Math.sin(v)+w[2]*Math.cos(v),f[0]=K[0]+h[0],f[1]=K[1]+h[1],f[2]=K[2]+h[2],f},a.bi=function(f,u,h,v){var w=[],K=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],K[0]=w[2]*Math.sin(v)+w[0]*Math.cos(v),K[1]=w[1],K[2]=w[2]*Math.cos(v)-w[0]*Math.sin(v),f[0]=K[0]+h[0],f[1]=K[1]+h[1],f[2]=K[2]+h[2],f},a.bj=function(f,u,h){var v=Math.sin(h),w=Math.cos(h),K=u[0],U=u[1],G=u[2],X=u[3],re=u[8],de=u[9],xe=u[10],Fe=u[11];return u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=K*w-re*v,f[1]=U*w-de*v,f[2]=G*w-xe*v,f[3]=X*w-Fe*v,f[8]=K*v+re*w,f[9]=U*v+de*w,f[10]=G*v+xe*w,f[11]=X*v+Fe*w,f},a.bk=function(f,u){const h=Ze(f,360),v=Ze(u,360),w=v-h,K=v>h?w-360:w+360;return Math.abs(w)<Math.abs(K)?w:K},a.bl=function(f){return f[0]=0,f[1]=0,f[2]=0,f},a.bm=function(f,u,h,v){const w=Math.sqrt(f*f+u*u),K=Math.sqrt(h*h+v*v);f/=w,u/=w,h/=K,v/=K;const U=Math.acos(f*h+u*v);return-u*h+f*v>0?U:-U},a.bn=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]},a.bo=tr,a.bp=function(f,u){const h=Ze(f,2*Math.PI),v=Ze(u,2*Math.PI);return Math.min(Math.abs(h-v),Math.abs(h-v+2*Math.PI),Math.abs(h-v-2*Math.PI))},a.bq=function(f){return Math.hypot(f[0],f[1],f[2])},a.br=function(){const f={},u=Oe.$version;for(const h in Oe.$root){const v=Oe.$root[h];if(v.required){let w=null;w=h==="version"?u:v.type==="array"?[]:{},w!=null&&(f[h]=w)}}return f},a.bs=wd,a.bt=qe,a.bu=function(f){f=f.slice();const u=Object.create(null);for(let h=0;h<f.length;h++)u[f[h].id]=f[h];for(let h=0;h<f.length;h++)"ref"in f[h]&&(f[h]=_e(f[h],u[f[h].ref]));return f},a.bv=function(f){if(f.type==="custom")return new cr(f);switch(f.type){case"background":return new et(f);case"circle":return new qf(f);case"fill":return new To(f);case"fill-extrusion":return new Lh(f);case"heatmap":return new DA(f);case"hillshade":return new Pc(f);case"line":return new $0(f);case"raster":return new wn(f);case"symbol":return new Q(f)}},a.bw=Re,a.bx=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let h=[];try{if(!p(f.version,u.version))return[{command:"setStyle",args:[u]}];p(f.center,u.center)||h.push({command:"setCenter",args:[u.center]}),p(f.centerAltitude,u.centerAltitude)||h.push({command:"setCenterAltitude",args:[u.centerAltitude]}),p(f.zoom,u.zoom)||h.push({command:"setZoom",args:[u.zoom]}),p(f.bearing,u.bearing)||h.push({command:"setBearing",args:[u.bearing]}),p(f.pitch,u.pitch)||h.push({command:"setPitch",args:[u.pitch]}),p(f.roll,u.roll)||h.push({command:"setRoll",args:[u.roll]}),p(f.sprite,u.sprite)||h.push({command:"setSprite",args:[u.sprite]}),p(f.glyphs,u.glyphs)||h.push({command:"setGlyphs",args:[u.glyphs]}),p(f.transition,u.transition)||h.push({command:"setTransition",args:[u.transition]}),p(f.light,u.light)||h.push({command:"setLight",args:[u.light]}),p(f.terrain,u.terrain)||h.push({command:"setTerrain",args:[u.terrain]}),p(f.sky,u.sky)||h.push({command:"setSky",args:[u.sky]}),p(f.projection,u.projection)||h.push({command:"setProjection",args:[u.projection]});const v={},w=[];(function(U,G,X,re){let de;for(de in G=G||{},U=U||{})Object.prototype.hasOwnProperty.call(U,de)&&(Object.prototype.hasOwnProperty.call(G,de)||rt(de,X,re));for(de in G)Object.prototype.hasOwnProperty.call(G,de)&&(Object.prototype.hasOwnProperty.call(U,de)?p(U[de],G[de])||(U[de].type==="geojson"&&G[de].type==="geojson"&&ct(U,G,de)?Ne(X,{command:"setGeoJSONSourceData",args:[de,G[de].data]}):dt(de,G,X,re)):$e(de,G,X))})(f.sources,u.sources,w,v);const K=[];f.layers&&f.layers.forEach(U=>{"source"in U&&v[U.source]?h.push({command:"removeLayer",args:[U.id]}):K.push(U)}),h=h.concat(w),function(U,G,X){G=G||[];const re=(U=U||[]).map(Vt),de=G.map(Vt),xe=U.reduce(Nt,{}),Fe=G.reduce(Nt,{}),ze=re.slice(),Ge=Object.create(null);let Je,At,xt,Wt,Bt;for(let Le=0,lt=0;Le<re.length;Le++)Je=re[Le],Object.prototype.hasOwnProperty.call(Fe,Je)?lt++:(Ne(X,{command:"removeLayer",args:[Je]}),ze.splice(ze.indexOf(Je,lt),1));for(let Le=0,lt=0;Le<de.length;Le++)Je=de[de.length-1-Le],ze[ze.length-1-Le]!==Je&&(Object.prototype.hasOwnProperty.call(xe,Je)?(Ne(X,{command:"removeLayer",args:[Je]}),ze.splice(ze.lastIndexOf(Je,ze.length-lt),1)):lt++,Wt=ze[ze.length-Le],Ne(X,{command:"addLayer",args:[Fe[Je],Wt]}),ze.splice(ze.length-Le,0,Je),Ge[Je]=!0);for(let Le=0;Le<de.length;Le++)if(Je=de[Le],At=xe[Je],xt=Fe[Je],!Ge[Je]&&!p(At,xt))if(p(At.source,xt.source)&&p(At["source-layer"],xt["source-layer"])&&p(At.type,xt.type)){for(Bt in Qt(At.layout,xt.layout,X,Je,null,"setLayoutProperty"),Qt(At.paint,xt.paint,X,Je,null,"setPaintProperty"),p(At.filter,xt.filter)||Ne(X,{command:"setFilter",args:[Je,xt.filter]}),p(At.minzoom,xt.minzoom)&&p(At.maxzoom,xt.maxzoom)||Ne(X,{command:"setLayerZoomRange",args:[Je,xt.minzoom,xt.maxzoom]}),At)Object.prototype.hasOwnProperty.call(At,Bt)&&Bt!=="layout"&&Bt!=="paint"&&Bt!=="filter"&&Bt!=="metadata"&&Bt!=="minzoom"&&Bt!=="maxzoom"&&(Bt.indexOf("paint.")===0?Qt(At[Bt],xt[Bt],X,Je,Bt.slice(6),"setPaintProperty"):p(At[Bt],xt[Bt])||Ne(X,{command:"setLayerProperty",args:[Je,Bt,xt[Bt]]}));for(Bt in xt)Object.prototype.hasOwnProperty.call(xt,Bt)&&!Object.prototype.hasOwnProperty.call(At,Bt)&&Bt!=="layout"&&Bt!=="paint"&&Bt!=="filter"&&Bt!=="metadata"&&Bt!=="minzoom"&&Bt!=="maxzoom"&&(Bt.indexOf("paint.")===0?Qt(At[Bt],xt[Bt],X,Je,Bt.slice(6),"setPaintProperty"):p(At[Bt],xt[Bt])||Ne(X,{command:"setLayerProperty",args:[Je,Bt,xt[Bt]]}))}else Ne(X,{command:"removeLayer",args:[Je]}),Wt=ze[ze.lastIndexOf(Je)+1],Ne(X,{command:"addLayer",args:[xt,Wt]})}(K,u.layers,h)}catch(v){console.warn("Unable to compute style diff:",v),h=[{command:"setStyle",args:[u]}]}return h},a.by=function(f){const u=[],h=f.id;return h===void 0&&u.push({message:`layers.${h}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${h}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),u},a.bz=function f(u,h){if(Array.isArray(u)){if(!Array.isArray(h)||u.length!==h.length)return!1;for(let v=0;v<u.length;v++)if(!f(u[v],h[v]))return!1;return!0}if(typeof u=="object"&&u!==null&&h!==null){if(typeof h!="object"||Object.keys(u).length!==Object.keys(h).length)return!1;for(const v in u)if(!f(u[v],h[v]))return!1;return!0}return u===h},a.c=pn,a.c0=f=>f.type==="fill",a.c1=f=>f.type==="fill-extrusion",a.c2=f=>f.type==="hillshade",a.c3=f=>f.type==="raster",a.c4=f=>f.type==="background",a.c5=f=>f.type==="custom",a.c6=Pe,a.c7=function(f,u,h){const v=ge(u.x-h.x,u.y-h.y),w=ge(f.x-h.x,f.y-h.y);var K,U;return or(Math.atan2(v[0]*w[1]-v[1]*w[0],(K=v)[0]*(U=w)[0]+K[1]*U[1]))},a.c8=it,a.c9=function(f,u,h){var v=u[0],w=u[1];return f[0]=h[0]*v+h[4]*w+h[12],f[1]=h[1]*v+h[5]*w+h[13],f},a.cA=X0,a.cB=Yc,a.cC=Fs,a.ca=function(f,u){const{x:h,y:v}=ri.fromLngLat(u);return!(f<0||f>25||v<0||v>=1||h<0||h>=1)},a.cb=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},a.cc=class extends lh{},a.cd=T3,a.cf=function(f){return f.message===Kn},a.cg=er,a.ch=function(f,u){Xn.REGISTERED_PROTOCOLS[f]=u},a.ci=function(f){delete Xn.REGISTERED_PROTOCOLS[f]},a.cj=function(f,u){const h={};for(let w=0;w<f.length;w++){const K=u&&u[f[w].id]||Zc(f[w]);u&&(u[f[w].id]=K);let U=h[K];U||(U=h[K]=[]),U.push(f[w])}const v=[];for(const w in h)v.push(h[w]);return v},a.ck=vr,a.cl=s1,a.cm=__,a.cn=n1,a.co=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=st/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],h=u.layout,v=u._unevaluatedLayout._values,w={layoutIconSize:v["icon-size"].possiblyEvaluate(new Xo(f.bucket.zoom+1),f.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Xo(f.bucket.zoom+1),f.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Xo(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=f.bucket.textSizeData;w.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Xo(re),f.canonical),v["text-size"].possiblyEvaluate(new Xo(de),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=f.bucket.iconSizeData;w.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Xo(re),f.canonical),v["icon-size"].possiblyEvaluate(new Xo(de),f.canonical)]}const K=h.get("text-line-height")*$a,U=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",G=h.get("text-keep-upright"),X=h.get("text-size");for(const re of f.bucket.features){const de=h.get("text-font").evaluate(re,{},f.canonical).join(","),xe=X.evaluate(re,{},f.canonical),Fe=w.layoutTextSize.evaluate(re,{},f.canonical),ze=w.layoutIconSize.evaluate(re,{},f.canonical),Ge={horizontal:{},vertical:void 0},Je=re.text;let At,xt=[0,0];if(Je){const Le=Je.toString(),lt=h.get("text-letter-spacing").evaluate(re,{},f.canonical)*$a,It=ql(Le)?lt:0,cn=h.get("text-anchor").evaluate(re,{},f.canonical),jn=wl(u,re,f.canonical);if(!jn){const zn=h.get("text-radial-offset").evaluate(re,{},f.canonical);xt=zn?ig(cn,[zn*$a,u1]):h.get("text-offset").evaluate(re,{},f.canonical).map(dr=>dr*$a)}let vn=U?"center":h.get("text-justify").evaluate(re,{},f.canonical);const Mn=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(re,{},f.canonical)*$a:1/0,ir=()=>{f.bucket.allowVerticalPlacement&&Md(Le)&&(Ge.vertical=Xf(Je,f.glyphMap,f.glyphPositions,f.imagePositions,de,Mn,K,cn,"left",It,xt,a.ai.vertical,!0,Fe,xe))};if(!U&&jn){const zn=new Set;if(vn==="auto")for(let In=0;In<jn.values.length;In+=2)zn.add(Ml(jn.values[In]));else zn.add(vn);let dr=!1;for(const In of zn)if(!Ge.horizontal[In])if(dr)Ge.horizontal[In]=Ge.horizontal[0];else{const Qr=Xf(Je,f.glyphMap,f.glyphPositions,f.imagePositions,de,Mn,K,"center",In,It,xt,a.ai.horizontal,!1,Fe,xe);Qr&&(Ge.horizontal[In]=Qr,dr=Qr.positionedLines.length===1)}ir()}else{vn==="auto"&&(vn=Ml(cn));const zn=Xf(Je,f.glyphMap,f.glyphPositions,f.imagePositions,de,Mn,K,cn,vn,It,xt,a.ai.horizontal,!1,Fe,xe);zn&&(Ge.horizontal[vn]=zn),ir(),Md(Le)&&U&&G&&(Ge.vertical=Xf(Je,f.glyphMap,f.glyphPositions,f.imagePositions,de,Mn,K,cn,vn,It,xt,a.ai.vertical,!1,Fe,xe))}}let Wt=!1;if(re.icon&&re.icon.name){const Le=f.imageMap[re.icon.name];Le&&(At=o1(f.imagePositions[re.icon.name],h.get("icon-offset").evaluate(re,{},f.canonical),h.get("icon-anchor").evaluate(re,{},f.canonical)),Wt=!!Le.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Wt:f.bucket.sdfIcons!==Wt&&nt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Le.pixelRatio!==f.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const Bt=k_(Ge.horizontal)||Ge.vertical;f.bucket.iconsInText=!!Bt&&Bt.iconsInText,(Bt||At)&&O_(f.bucket,re,Ge,At,f.imageMap,w,Fe,ze,xt,Wt,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},a.cp=Vf,a.cq=Ur,a.cr=KA,a.cs=Fl,a.ct=l0,a.cu=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},a.cv=function(f,u,h,v,w){return o(this,void 0,void 0,function*(){if(J())try{return yield gn(f,u,h,v,w)}catch{}return function(K,U,G,X,re){const de=K.width,xe=K.height;Nn&&rn||(Nn=new OffscreenCanvas(de,xe),rn=Nn.getContext("2d",{willReadFrequently:!0})),Nn.width=de,Nn.height=xe,rn.drawImage(K,0,0,de,xe);const Fe=rn.getImageData(U,G,X,re);return rn.clearRect(0,0,de,xe),Fe.data}(f,u,h,v,w)})},a.cw=Wh,a.cx=d,a.cy=E,a.cz=Ts,a.d=f=>o(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=ft,a.f=f=>new Promise((u,h)=>{const v=new Image;v.onload=()=>{u(v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame(()=>{v.src=Lt})},v.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(f)],{type:"image/png"});v.src=f.byteLength?URL.createObjectURL(w):Lt}),a.g=Mr,a.h=(f,u)=>ce(ft(f,{type:"json"}),u),a.i=pt,a.j=on,a.k=$t,a.l=(f,u)=>ce(ft(f,{type:"arrayBuffer"}),u),a.m=ce,a.n=function(f){return new l0(f).readFields(iv,[])},a.o=ko,a.p=t1,a.q=xs,a.r=bd,a.s=me,a.t=bs,a.u=Bs,a.v=Oe,a.w=nt,a.x=function([f,u,h]){return u+=90,u*=Math.PI/180,h*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(h),y:f*Math.sin(u)*Math.sin(h),z:f*Math.cos(h)}},a.y=Ci,a.z=Xo}),i("worker",["./shared"],function(a){class o{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,_e){for(const Ne of se){this._layerConfigs[Ne.id]=Ne;const $e=this._layers[Ne.id]=a.bv(Ne);$e._featureFilter=a.a4($e.filter),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id]}for(const Ne of _e)delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne];this.familiesBySource={};const p=a.cj(Object.values(this._layerConfigs),this.keyCache);for(const Ne of p){const $e=Ne.map(Nt=>this._layers[Nt.id]),rt=$e[0];if(rt.visibility==="none")continue;const dt=rt.source||"";let ct=this.familiesBySource[dt];ct||(ct=this.familiesBySource[dt]={});const Qt=rt.sourceLayer||"_geojsonTileLayer";let Vt=ct[Qt];Vt||(Vt=ct[Qt]=[]),Vt.push($e)}}}class d{constructor(se){const _e={},p=[];for(const dt in se){const ct=se[dt],Qt=_e[dt]={};for(const Vt in ct){const Nt=ct[+Vt];if(!Nt||Nt.bitmap.width===0||Nt.bitmap.height===0)continue;const wt={x:0,y:0,w:Nt.bitmap.width+2,h:Nt.bitmap.height+2};p.push(wt),Qt[Vt]={rect:wt,metrics:Nt.metrics}}}const{w:Ne,h:$e}=a.p(p),rt=new a.o({width:Ne||1,height:$e||1});for(const dt in se){const ct=se[dt];for(const Qt in ct){const Vt=ct[+Qt];if(!Vt||Vt.bitmap.width===0||Vt.bitmap.height===0)continue;const Nt=_e[dt][Qt].rect;a.o.copy(Vt.bitmap,rt,{x:0,y:0},{x:Nt.x+1,y:Nt.y+1},Vt.bitmap)}}this.image=rt,this.positions=_e}}a.ck("GlyphAtlas",d);class g{constructor(se){this.tileID=new a.S(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,_e,p,Ne,$e){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new a.a2;const rt=new a.cl(Object.keys(se.layers).sort()),dt=new a.cm(this.tileID,this.promoteId);dt.bucketLayerIDs=[];const ct={},Qt={featureIndex:dt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:p,subdivisionGranularity:$e},Vt=_e.familiesBySource[this.source];for(const Kr in Vt){const Ar=se.layers[Kr];if(!Ar)continue;Ar.version===1&&a.w(`Vector tile source "${this.source}" layer "${Kr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ho=rt.encode(Kr),Ea=[];for(let Yi=0;Yi<Ar.length;Yi++){const vi=Ar.feature(Yi),so=dt.getId(vi,Kr);Ea.push({feature:vi,id:so,index:Yi,sourceLayerIndex:ho})}for(const Yi of Vt[Kr]){const vi=Yi[0];vi.source!==this.source&&a.w(`layer.source = ${vi.source} does not equal this.source = ${this.source}`),vi.minzoom&&this.zoom<Math.floor(vi.minzoom)||vi.maxzoom&&this.zoom>=vi.maxzoom||vi.visibility!=="none"&&(b(Yi,this.zoom,p),(ct[vi.id]=vi.createBucket({index:dt.bucketLayerIDs.length,layers:Yi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ho,sourceID:this.source})).populate(Ea,Qt,this.tileID.canonical),dt.bucketLayerIDs.push(Yi.map(so=>so.id)))}}const Nt=a.bA(Qt.glyphDependencies,Kr=>Object.keys(Kr).map(Number));this.inFlightDependencies.forEach(Kr=>Kr==null?void 0:Kr.abort()),this.inFlightDependencies=[];let wt=Promise.resolve({});if(Object.keys(Nt).length){const Kr=new AbortController;this.inFlightDependencies.push(Kr),wt=Ne.sendAsync({type:"GG",data:{stacks:Nt,source:this.source,tileID:this.tileID,type:"glyphs"}},Kr)}const Dn=Object.keys(Qt.iconDependencies);let On=Promise.resolve({});if(Dn.length){const Kr=new AbortController;this.inFlightDependencies.push(Kr),On=Ne.sendAsync({type:"GI",data:{icons:Dn,source:this.source,tileID:this.tileID,type:"icons"}},Kr)}const pr=Object.keys(Qt.patternDependencies);let Er=Promise.resolve({});if(pr.length){const Kr=new AbortController;this.inFlightDependencies.push(Kr),Er=Ne.sendAsync({type:"GI",data:{icons:pr,source:this.source,tileID:this.tileID,type:"patterns"}},Kr)}const[sn,Wn,Ln]=yield Promise.all([wt,On,Er]),Ir=new d(sn),Br=new a.cn(Wn,Ln);for(const Kr in ct){const Ar=ct[Kr];Ar instanceof a.a3?(b(Ar.layers,this.zoom,p),a.co({bucket:Ar,glyphMap:sn,glyphPositions:Ir.positions,imageMap:Wn,imagePositions:Br.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Qt.subdivisionGranularity})):Ar.hasPattern&&(Ar instanceof a.cp||Ar instanceof a.cq||Ar instanceof a.cr)&&(b(Ar.layers,this.zoom,p),Ar.addFeatures(Qt,this.tileID.canonical,Br.patternPositions))}return this.status="done",{buckets:Object.values(ct).filter(Kr=>!Kr.isEmpty()),featureIndex:dt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ir.image,imageAtlas:Br,glyphMap:this.returnDependencies?sn:null,iconMap:this.returnDependencies?Wn:null,glyphPositions:this.returnDependencies?Ir.positions:null}})}}function b(Oe,se,_e){const p=new a.z(se);for(const Ne of Oe)Ne.recalculate(p,_e)}class E{constructor(se,_e,p){this.actor=se,this.layerIndex=_e,this.availableImages=p,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,_e){return a._(this,void 0,void 0,function*(){const p=yield a.l(se.request,_e);try{return{vectorTile:new a.cs.VectorTile(new a.ct(p.data)),rawData:p.data,cacheControl:p.cacheControl,expires:p.expires}}catch(Ne){const $e=new Uint8Array(p.data);let rt=`Unable to parse the tile at ${se.request.url}, `;throw rt+=$e[0]===31&&$e[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ne.message}`,new Error(rt)}})}loadTile(se){return a._(this,void 0,void 0,function*(){const _e=se.uid,p=!!(se&&se.request&&se.request.collectResourceTiming)&&new a.cu(se.request),Ne=new g(se);this.loading[_e]=Ne;const $e=new AbortController;Ne.abort=$e;try{const rt=yield this.loadVectorTile(se,$e);if(delete this.loading[_e],!rt)return null;const dt=rt.rawData,ct={};rt.expires&&(ct.expires=rt.expires),rt.cacheControl&&(ct.cacheControl=rt.cacheControl);const Qt={};if(p){const Nt=p.finish();Nt&&(Qt.resourceTiming=JSON.parse(JSON.stringify(Nt)))}Ne.vectorTile=rt.vectorTile;const Vt=Ne.parse(rt.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[_e]=Ne,this.fetching[_e]={rawTileData:dt,cacheControl:ct,resourceTiming:Qt};try{const Nt=yield Vt;return a.e({rawTileData:dt.slice(0)},Nt,ct,Qt)}finally{delete this.fetching[_e]}}catch(rt){throw delete this.loading[_e],Ne.status="done",this.loaded[_e]=Ne,rt}})}reloadTile(se){return a._(this,void 0,void 0,function*(){const _e=se.uid;if(!this.loaded||!this.loaded[_e])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const p=this.loaded[_e];if(p.showCollisionBoxes=se.showCollisionBoxes,p.status==="parsing"){const Ne=yield p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let $e;if(this.fetching[_e]){const{rawTileData:rt,cacheControl:dt,resourceTiming:ct}=this.fetching[_e];delete this.fetching[_e],$e=a.e({rawTileData:rt.slice(0)},Ne,dt,ct)}else $e=Ne;return $e}if(p.status==="done"&&p.vectorTile)return p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)})}abortTile(se){return a._(this,void 0,void 0,function*(){const _e=this.loading,p=se.uid;_e&&_e[p]&&_e[p].abort&&(_e[p].abort.abort(),delete _e[p])})}removeTile(se){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class S{constructor(){this.loaded={}}loadTile(se){return a._(this,void 0,void 0,function*(){const{uid:_e,encoding:p,rawImageData:Ne,redFactor:$e,greenFactor:rt,blueFactor:dt,baseShift:ct}=se,Qt=Ne.width+2,Vt=Ne.height+2,Nt=a.b(Ne)?new a.R({width:Qt,height:Vt},yield a.cv(Ne,-1,-1,Qt,Vt)):Ne,wt=new a.cw(_e,Nt,p,$e,rt,dt,ct);return this.loaded=this.loaded||{},this.loaded[_e]=wt,wt})}removeTile(se){const _e=this.loaded,p=se.uid;_e&&_e[p]&&delete _e[p]}}var B,k,z=function(){if(k)return B;function Oe(_e,p){if(_e.length!==0){se(_e[0],p);for(var Ne=1;Ne<_e.length;Ne++)se(_e[Ne],!p)}}function se(_e,p){for(var Ne=0,$e=0,rt=0,dt=_e.length,ct=dt-1;rt<dt;ct=rt++){var Qt=(_e[rt][0]-_e[ct][0])*(_e[ct][1]+_e[rt][1]),Vt=Ne+Qt;$e+=Math.abs(Ne)>=Math.abs(Qt)?Ne-Vt+Qt:Qt-Vt+Ne,Ne=Vt}Ne+$e>=0!=!!p&&_e.reverse()}return k=1,B=function _e(p,Ne){var $e,rt=p&&p.type;if(rt==="FeatureCollection")for($e=0;$e<p.features.length;$e++)_e(p.features[$e],Ne);else if(rt==="GeometryCollection")for($e=0;$e<p.geometries.length;$e++)_e(p.geometries[$e],Ne);else if(rt==="Feature")_e(p.geometry,Ne);else if(rt==="Polygon")Oe(p.coordinates,Ne);else if(rt==="MultiPolygon")for($e=0;$e<p.coordinates.length;$e++)Oe(p.coordinates[$e],Ne);return p}}(),j=a.cx(z);const Y=a.cs.VectorTileFeature.prototype.toGeoJSON;class q{constructor(se){this._feature=se,this.extent=a.X,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const _e of this._feature.geometry)se.push([new a.P(_e[0],_e[1])]);return se}{const se=[];for(const _e of this._feature.geometry){const p=[];for(const Ne of _e)p.push(new a.P(Ne[0],Ne[1]));se.push(p)}return se}}toGeoJSON(se,_e,p){return Y.call(this,se,_e,p)}}class ie{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.X,this.length=se.length,this._features=se}feature(se){return new q(this._features[se])}}var J,$,te,W={exports:{}},oe=function(){if(te)return W.exports;te=1;var Oe=a.cA(),se=function(){if($)return J;$=1;var Vt=a.cy(),Nt=a.cz().VectorTileFeature;function wt(On,pr){this.options=pr||{},this.features=On,this.length=On.length}function Dn(On,pr){this.id=typeof On.id=="number"?On.id:void 0,this.type=On.type,this.rawGeometry=On.type===1?[On.geometry]:On.geometry,this.properties=On.tags,this.extent=pr||4096}return J=wt,wt.prototype.feature=function(On){return new Dn(this.features[On],this.options.extent)},Dn.prototype.loadGeometry=function(){var On=this.rawGeometry;this.geometry=[];for(var pr=0;pr<On.length;pr++){for(var Er=On[pr],sn=[],Wn=0;Wn<Er.length;Wn++)sn.push(new Vt(Er[Wn][0],Er[Wn][1]));this.geometry.push(sn)}return this.geometry},Dn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var On=this.geometry,pr=1/0,Er=-1/0,sn=1/0,Wn=-1/0,Ln=0;Ln<On.length;Ln++)for(var Ir=On[Ln],Br=0;Br<Ir.length;Br++){var Kr=Ir[Br];pr=Math.min(pr,Kr.x),Er=Math.max(Er,Kr.x),sn=Math.min(sn,Kr.y),Wn=Math.max(Wn,Kr.y)}return[pr,sn,Er,Wn]},Dn.prototype.toGeoJSON=Nt.prototype.toGeoJSON,J}();function _e(Vt){var Nt=new Oe;return function(wt,Dn){for(var On in wt.layers)Dn.writeMessage(3,p,wt.layers[On])}(Vt,Nt),Nt.finish()}function p(Vt,Nt){var wt;Nt.writeVarintField(15,Vt.version||1),Nt.writeStringField(1,Vt.name||""),Nt.writeVarintField(5,Vt.extent||4096);var Dn={keys:[],values:[],keycache:{},valuecache:{}};for(wt=0;wt<Vt.length;wt++)Dn.feature=Vt.feature(wt),Nt.writeMessage(2,Ne,Dn);var On=Dn.keys;for(wt=0;wt<On.length;wt++)Nt.writeStringField(3,On[wt]);var pr=Dn.values;for(wt=0;wt<pr.length;wt++)Nt.writeMessage(4,Qt,pr[wt])}function Ne(Vt,Nt){var wt=Vt.feature;wt.id!==void 0&&Nt.writeVarintField(1,wt.id),Nt.writeMessage(2,$e,Vt),Nt.writeVarintField(3,wt.type),Nt.writeMessage(4,ct,wt)}function $e(Vt,Nt){var wt=Vt.feature,Dn=Vt.keys,On=Vt.values,pr=Vt.keycache,Er=Vt.valuecache;for(var sn in wt.properties){var Wn=wt.properties[sn],Ln=pr[sn];if(Wn!==null){Ln===void 0&&(Dn.push(sn),pr[sn]=Ln=Dn.length-1),Nt.writeVarint(Ln);var Ir=typeof Wn;Ir!=="string"&&Ir!=="boolean"&&Ir!=="number"&&(Wn=JSON.stringify(Wn));var Br=Ir+":"+Wn,Kr=Er[Br];Kr===void 0&&(On.push(Wn),Er[Br]=Kr=On.length-1),Nt.writeVarint(Kr)}}}function rt(Vt,Nt){return(Nt<<3)+(7&Vt)}function dt(Vt){return Vt<<1^Vt>>31}function ct(Vt,Nt){for(var wt=Vt.loadGeometry(),Dn=Vt.type,On=0,pr=0,Er=wt.length,sn=0;sn<Er;sn++){var Wn=wt[sn],Ln=1;Dn===1&&(Ln=Wn.length),Nt.writeVarint(rt(1,Ln));for(var Ir=Dn===3?Wn.length-1:Wn.length,Br=0;Br<Ir;Br++){Br===1&&Dn!==1&&Nt.writeVarint(rt(2,Ir-1));var Kr=Wn[Br].x-On,Ar=Wn[Br].y-pr;Nt.writeVarint(dt(Kr)),Nt.writeVarint(dt(Ar)),On+=Kr,pr+=Ar}Dn===3&&Nt.writeVarint(rt(7,1))}}function Qt(Vt,Nt){var wt=typeof Vt;wt==="string"?Nt.writeStringField(1,Vt):wt==="boolean"?Nt.writeBooleanField(7,Vt):wt==="number"&&(Vt%1!=0?Nt.writeDoubleField(3,Vt):Vt<0?Nt.writeSVarintField(6,Vt):Nt.writeVarintField(5,Vt))}return W.exports=_e,W.exports.fromVectorTileJs=_e,W.exports.fromGeojsonVt=function(Vt,Nt){Nt=Nt||{};var wt={};for(var Dn in Vt)wt[Dn]=new se(Vt[Dn].features,Nt),wt[Dn].name=Dn,wt[Dn].version=Nt.version,wt[Dn].extent=Nt.extent;return _e({layers:wt})},W.exports.GeoJSONWrapper=se,W.exports}(),fe=a.cx(oe);const he={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},Se=Math.fround||(pe=new Float32Array(1),Oe=>(pe[0]=+Oe,pe[0]));var pe;const we=3,Ke=5,ge=6;class st{constructor(se){this.options=Object.assign(Object.create(he),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:_e,minZoom:p,maxZoom:Ne}=this.options;_e&&console.time("total time");const $e=`prepare ${se.length} points`;_e&&console.time($e),this.points=se;const rt=[];for(let ct=0;ct<se.length;ct++){const Qt=se[ct];if(!Qt.geometry)continue;const[Vt,Nt]=Qt.geometry.coordinates,wt=Se(We(Vt)),Dn=Se(Ce(Nt));rt.push(wt,Dn,1/0,ct,-1,1),this.options.reduce&&rt.push(0)}let dt=this.trees[Ne+1]=this._createTree(rt);_e&&console.timeEnd($e);for(let ct=Ne;ct>=p;ct--){const Qt=+Date.now();dt=this.trees[ct]=this._createTree(this._cluster(dt,ct)),_e&&console.log("z%d: %d clusters in %dms",ct,dt.numItems,+Date.now()-Qt)}return _e&&console.timeEnd("total time"),this}getClusters(se,_e){let p=((se[0]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,se[1]));let $e=se[2]===180?180:((se[2]+180)%360+360)%360-180;const rt=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)p=-180,$e=180;else if(p>$e){const Nt=this.getClusters([p,Ne,180,rt],_e),wt=this.getClusters([-180,Ne,$e,rt],_e);return Nt.concat(wt)}const dt=this.trees[this._limitZoom(_e)],ct=dt.range(We(p),Ce(rt),We($e),Ce(Ne)),Qt=dt.data,Vt=[];for(const Nt of ct){const wt=this.stride*Nt;Vt.push(Qt[wt+Ke]>1?Qe(Qt,wt,this.clusterProps):this.points[Qt[wt+we]])}return Vt}getChildren(se){const _e=this._getOriginId(se),p=this._getOriginZoom(se),Ne="No cluster with the specified id.",$e=this.trees[p];if(!$e)throw new Error(Ne);const rt=$e.data;if(_e*this.stride>=rt.length)throw new Error(Ne);const dt=this.options.radius/(this.options.extent*Math.pow(2,p-1)),ct=$e.within(rt[_e*this.stride],rt[_e*this.stride+1],dt),Qt=[];for(const Vt of ct){const Nt=Vt*this.stride;rt[Nt+4]===se&&Qt.push(rt[Nt+Ke]>1?Qe(rt,Nt,this.clusterProps):this.points[rt[Nt+we]])}if(Qt.length===0)throw new Error(Ne);return Qt}getLeaves(se,_e,p){const Ne=[];return this._appendLeaves(Ne,se,_e=_e||10,p=p||0,0),Ne}getTile(se,_e,p){const Ne=this.trees[this._limitZoom(se)],$e=Math.pow(2,se),{extent:rt,radius:dt}=this.options,ct=dt/rt,Qt=(p-ct)/$e,Vt=(p+1+ct)/$e,Nt={features:[]};return this._addTileFeatures(Ne.range((_e-ct)/$e,Qt,(_e+1+ct)/$e,Vt),Ne.data,_e,p,$e,Nt),_e===0&&this._addTileFeatures(Ne.range(1-ct/$e,Qt,1,Vt),Ne.data,$e,p,$e,Nt),_e===$e-1&&this._addTileFeatures(Ne.range(0,Qt,ct/$e,Vt),Ne.data,-1,p,$e,Nt),Nt.features.length?Nt:null}getClusterExpansionZoom(se){let _e=this._getOriginZoom(se)-1;for(;_e<=this.options.maxZoom;){const p=this.getChildren(se);if(_e++,p.length!==1)break;se=p[0].properties.cluster_id}return _e}_appendLeaves(se,_e,p,Ne,$e){const rt=this.getChildren(_e);for(const dt of rt){const ct=dt.properties;if(ct&&ct.cluster?$e+ct.point_count<=Ne?$e+=ct.point_count:$e=this._appendLeaves(se,ct.cluster_id,p,Ne,$e):$e<Ne?$e++:se.push(dt),se.length===p)break}return $e}_createTree(se){const _e=new a.az(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let p=0;p<se.length;p+=this.stride)_e.add(se[p],se[p+1]);return _e.finish(),_e.data=se,_e}_addTileFeatures(se,_e,p,Ne,$e,rt){for(const dt of se){const ct=dt*this.stride,Qt=_e[ct+Ke]>1;let Vt,Nt,wt;if(Qt)Vt=Ze(_e,ct,this.clusterProps),Nt=_e[ct],wt=_e[ct+1];else{const pr=this.points[_e[ct+we]];Vt=pr.properties;const[Er,sn]=pr.geometry.coordinates;Nt=We(Er),wt=Ce(sn)}const Dn={type:1,geometry:[[Math.round(this.options.extent*(Nt*$e-p)),Math.round(this.options.extent*(wt*$e-Ne))]],tags:Vt};let On;On=Qt||this.options.generateId?_e[ct+we]:this.points[_e[ct+we]].id,On!==void 0&&(Dn.id=On),rt.features.push(Dn)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,_e){const{radius:p,extent:Ne,reduce:$e,minPoints:rt}=this.options,dt=p/(Ne*Math.pow(2,_e)),ct=se.data,Qt=[],Vt=this.stride;for(let Nt=0;Nt<ct.length;Nt+=Vt){if(ct[Nt+2]<=_e)continue;ct[Nt+2]=_e;const wt=ct[Nt],Dn=ct[Nt+1],On=se.within(ct[Nt],ct[Nt+1],dt),pr=ct[Nt+Ke];let Er=pr;for(const sn of On){const Wn=sn*Vt;ct[Wn+2]>_e&&(Er+=ct[Wn+Ke])}if(Er>pr&&Er>=rt){let sn,Wn=wt*pr,Ln=Dn*pr,Ir=-1;const Br=((Nt/Vt|0)<<5)+(_e+1)+this.points.length;for(const Kr of On){const Ar=Kr*Vt;if(ct[Ar+2]<=_e)continue;ct[Ar+2]=_e;const ho=ct[Ar+Ke];Wn+=ct[Ar]*ho,Ln+=ct[Ar+1]*ho,ct[Ar+4]=Br,$e&&(sn||(sn=this._map(ct,Nt,!0),Ir=this.clusterProps.length,this.clusterProps.push(sn)),$e(sn,this._map(ct,Ar)))}ct[Nt+4]=Br,Qt.push(Wn/Er,Ln/Er,1/0,Br,-1,Er),$e&&Qt.push(Ir)}else{for(let sn=0;sn<Vt;sn++)Qt.push(ct[Nt+sn]);if(Er>1)for(const sn of On){const Wn=sn*Vt;if(!(ct[Wn+2]<=_e)){ct[Wn+2]=_e;for(let Ln=0;Ln<Vt;Ln++)Qt.push(ct[Wn+Ln])}}}}return Qt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,_e,p){if(se[_e+Ke]>1){const rt=this.clusterProps[se[_e+ge]];return p?Object.assign({},rt):rt}const Ne=this.points[se[_e+we]].properties,$e=this.options.map(Ne);return p&&$e===Ne?Object.assign({},$e):$e}}function Qe(Oe,se,_e){return{type:"Feature",id:Oe[se+we],properties:Ze(Oe,se,_e),geometry:{type:"Point",coordinates:[(p=Oe[se],360*(p-.5)),Pe(Oe[se+1])]}};var p}function Ze(Oe,se,_e){const p=Oe[se+Ke],Ne=p>=1e4?`${Math.round(p/1e3)}k`:p>=1e3?Math.round(p/100)/10+"k":p,$e=Oe[se+ge],rt=$e===-1?{}:Object.assign({},_e[$e]);return Object.assign(rt,{cluster:!0,cluster_id:Oe[se+we],point_count:p,point_count_abbreviated:Ne})}function We(Oe){return Oe/360+.5}function Ce(Oe){const se=Math.sin(Oe*Math.PI/180),_e=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return _e<0?0:_e>1?1:_e}function Pe(Oe){const se=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function it(Oe,se,_e,p){let Ne=p;const $e=se+(_e-se>>1);let rt,dt=_e-se;const ct=Oe[se],Qt=Oe[se+1],Vt=Oe[_e],Nt=Oe[_e+1];for(let wt=se+3;wt<_e;wt+=3){const Dn=vt(Oe[wt],Oe[wt+1],ct,Qt,Vt,Nt);if(Dn>Ne)rt=wt,Ne=Dn;else if(Dn===Ne){const On=Math.abs(wt-$e);On<dt&&(rt=wt,dt=On)}}Ne>p&&(rt-se>3&&it(Oe,se,rt,p),Oe[rt+2]=Ne,_e-rt>3&&it(Oe,rt,_e,p))}function vt(Oe,se,_e,p,Ne,$e){let rt=Ne-_e,dt=$e-p;if(rt!==0||dt!==0){const ct=((Oe-_e)*rt+(se-p)*dt)/(rt*rt+dt*dt);ct>1?(_e=Ne,p=$e):ct>0&&(_e+=rt*ct,p+=dt*ct)}return rt=Oe-_e,dt=se-p,rt*rt+dt*dt}function _t(Oe,se,_e,p){const Ne={id:Oe??null,type:se,geometry:_e,tags:p,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")ft(Ne,_e);else if(se==="Polygon")ft(Ne,_e[0]);else if(se==="MultiLineString")for(const $e of _e)ft(Ne,$e);else if(se==="MultiPolygon")for(const $e of _e)ft(Ne,$e[0]);return Ne}function ft(Oe,se){for(let _e=0;_e<se.length;_e+=3)Oe.minX=Math.min(Oe.minX,se[_e]),Oe.minY=Math.min(Oe.minY,se[_e+1]),Oe.maxX=Math.max(Oe.maxX,se[_e]),Oe.maxY=Math.max(Oe.maxY,se[_e+1])}function Dt(Oe,se,_e,p){if(!se.geometry)return;const Ne=se.geometry.coordinates;if(Ne&&Ne.length===0)return;const $e=se.geometry.type,rt=Math.pow(_e.tolerance/((1<<_e.maxZoom)*_e.extent),2);let dt=[],ct=se.id;if(_e.promoteId?ct=se.properties[_e.promoteId]:_e.generateId&&(ct=p||0),$e==="Point")Tt(Ne,dt);else if($e==="MultiPoint")for(const Qt of Ne)Tt(Qt,dt);else if($e==="LineString")Ue(Ne,dt,rt,!1);else if($e==="MultiLineString"){if(_e.lineMetrics){for(const Qt of Ne)dt=[],Ue(Qt,dt,rt,!1),Oe.push(_t(ct,"LineString",dt,se.properties));return}Re(Ne,dt,rt,!1)}else if($e==="Polygon")Re(Ne,dt,rt,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(const Qt of se.geometry.geometries)Dt(Oe,{id:ct,geometry:Qt,properties:se.properties},_e,p);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Qt of Ne){const Vt=[];Re(Qt,Vt,rt,!0),dt.push(Vt)}}Oe.push(_t(ct,$e,dt,se.properties))}function Tt(Oe,se){se.push(Be(Oe[0]),nt(Oe[1]),0)}function Ue(Oe,se,_e,p){let Ne,$e,rt=0;for(let ct=0;ct<Oe.length;ct++){const Qt=Be(Oe[ct][0]),Vt=nt(Oe[ct][1]);se.push(Qt,Vt,0),ct>0&&(rt+=p?(Ne*Vt-Qt*$e)/2:Math.sqrt(Math.pow(Qt-Ne,2)+Math.pow(Vt-$e,2))),Ne=Qt,$e=Vt}const dt=se.length-3;se[2]=1,it(se,0,dt,_e),se[dt+2]=1,se.size=Math.abs(rt),se.start=0,se.end=se.size}function Re(Oe,se,_e,p){for(let Ne=0;Ne<Oe.length;Ne++){const $e=[];Ue(Oe[Ne],$e,_e,p),se.push($e)}}function Be(Oe){return Oe/360+.5}function nt(Oe){const se=Math.sin(Oe*Math.PI/180),_e=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return _e<0?0:_e>1?1:_e}function Ct(Oe,se,_e,p,Ne,$e,rt,dt){if(p/=se,$e>=(_e/=se)&&rt<p)return Oe;if(rt<_e||$e>=p)return null;const ct=[];for(const Qt of Oe){const Vt=Qt.geometry;let Nt=Qt.type;const wt=Ne===0?Qt.minX:Qt.minY,Dn=Ne===0?Qt.maxX:Qt.maxY;if(wt>=_e&&Dn<p){ct.push(Qt);continue}if(Dn<_e||wt>=p)continue;let On=[];if(Nt==="Point"||Nt==="MultiPoint")pt(Vt,On,_e,p,Ne);else if(Nt==="LineString")zt(Vt,On,_e,p,Ne,!1,dt.lineMetrics);else if(Nt==="MultiLineString")Lt(Vt,On,_e,p,Ne,!1);else if(Nt==="Polygon")Lt(Vt,On,_e,p,Ne,!0);else if(Nt==="MultiPolygon")for(const pr of Vt){const Er=[];Lt(pr,Er,_e,p,Ne,!0),Er.length&&On.push(Er)}if(On.length){if(dt.lineMetrics&&Nt==="LineString"){for(const pr of On)ct.push(_t(Qt.id,Nt,pr,Qt.tags));continue}Nt!=="LineString"&&Nt!=="MultiLineString"||(On.length===1?(Nt="LineString",On=On[0]):Nt="MultiLineString"),Nt!=="Point"&&Nt!=="MultiPoint"||(Nt=On.length===3?"Point":"MultiPoint"),ct.push(_t(Qt.id,Nt,On,Qt.tags))}}return ct.length?ct:null}function pt(Oe,se,_e,p,Ne){for(let $e=0;$e<Oe.length;$e+=3){const rt=Oe[$e+Ne];rt>=_e&&rt<=p&&gn(se,Oe[$e],Oe[$e+1],Oe[$e+2])}}function zt(Oe,se,_e,p,Ne,$e,rt){let dt=tn(Oe);const ct=Ne===0?Nn:rn;let Qt,Vt,Nt=Oe.start;for(let Er=0;Er<Oe.length-3;Er+=3){const sn=Oe[Er],Wn=Oe[Er+1],Ln=Oe[Er+2],Ir=Oe[Er+3],Br=Oe[Er+4],Kr=Ne===0?sn:Wn,Ar=Ne===0?Ir:Br;let ho=!1;rt&&(Qt=Math.sqrt(Math.pow(sn-Ir,2)+Math.pow(Wn-Br,2))),Kr<_e?Ar>_e&&(Vt=ct(dt,sn,Wn,Ir,Br,_e),rt&&(dt.start=Nt+Qt*Vt)):Kr>p?Ar<p&&(Vt=ct(dt,sn,Wn,Ir,Br,p),rt&&(dt.start=Nt+Qt*Vt)):gn(dt,sn,Wn,Ln),Ar<_e&&Kr>=_e&&(Vt=ct(dt,sn,Wn,Ir,Br,_e),ho=!0),Ar>p&&Kr<=p&&(Vt=ct(dt,sn,Wn,Ir,Br,p),ho=!0),!$e&&ho&&(rt&&(dt.end=Nt+Qt*Vt),se.push(dt),dt=tn(Oe)),rt&&(Nt+=Qt)}let wt=Oe.length-3;const Dn=Oe[wt],On=Oe[wt+1],pr=Ne===0?Dn:On;pr>=_e&&pr<=p&&gn(dt,Dn,On,Oe[wt+2]),wt=dt.length-3,$e&&wt>=3&&(dt[wt]!==dt[0]||dt[wt+1]!==dt[1])&&gn(dt,dt[0],dt[1],dt[2]),dt.length&&se.push(dt)}function tn(Oe){const se=[];return se.size=Oe.size,se.start=Oe.start,se.end=Oe.end,se}function Lt(Oe,se,_e,p,Ne,$e){for(const rt of Oe)zt(rt,se,_e,p,Ne,$e,!1)}function gn(Oe,se,_e,p){Oe.push(se,_e,p)}function Nn(Oe,se,_e,p,Ne,$e){const rt=($e-se)/(p-se);return gn(Oe,$e,_e+(Ne-_e)*rt,1),rt}function rn(Oe,se,_e,p,Ne,$e){const rt=($e-_e)/(Ne-_e);return gn(Oe,se+(p-se)*rt,$e,1),rt}function or(Oe,se){const _e=[];for(let p=0;p<Oe.length;p++){const Ne=Oe[p],$e=Ne.type;let rt;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")rt=Kn(Ne.geometry,se);else if($e==="MultiLineString"||$e==="Polygon"){rt=[];for(const dt of Ne.geometry)rt.push(Kn(dt,se))}else if($e==="MultiPolygon"){rt=[];for(const dt of Ne.geometry){const ct=[];for(const Qt of dt)ct.push(Kn(Qt,se));rt.push(ct)}}_e.push(_t(Ne.id,$e,rt,Ne.tags))}return _e}function Kn(Oe,se){const _e=[];_e.size=Oe.size,Oe.start!==void 0&&(_e.start=Oe.start,_e.end=Oe.end);for(let p=0;p<Oe.length;p+=3)_e.push(Oe[p]+se,Oe[p+1],Oe[p+2]);return _e}function pn(Oe,se){if(Oe.transformed)return Oe;const _e=1<<Oe.z,p=Oe.x,Ne=Oe.y;for(const $e of Oe.features){const rt=$e.geometry,dt=$e.type;if($e.geometry=[],dt===1)for(let ct=0;ct<rt.length;ct+=2)$e.geometry.push(Xn(rt[ct],rt[ct+1],se,_e,p,Ne));else for(let ct=0;ct<rt.length;ct++){const Qt=[];for(let Vt=0;Vt<rt[ct].length;Vt+=2)Qt.push(Xn(rt[ct][Vt],rt[ct][Vt+1],se,_e,p,Ne));$e.geometry.push(Qt)}}return Oe.transformed=!0,Oe}function Xn(Oe,se,_e,p,Ne,$e){return[Math.round(_e*(Oe*p-Ne)),Math.round(_e*(se*p-$e))]}function Mr(Oe,se,_e,p,Ne){const $e=se===Ne.maxZoom?0:Ne.tolerance/((1<<se)*Ne.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:Oe.length,source:null,x:_e,y:p,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const dt of Oe)Yn(rt,dt,$e,Ne);return rt}function Yn(Oe,se,_e,p){const Ne=se.geometry,$e=se.type,rt=[];if(Oe.minX=Math.min(Oe.minX,se.minX),Oe.minY=Math.min(Oe.minY,se.minY),Oe.maxX=Math.max(Oe.maxX,se.maxX),Oe.maxY=Math.max(Oe.maxY,se.maxY),$e==="Point"||$e==="MultiPoint")for(let dt=0;dt<Ne.length;dt+=3)rt.push(Ne[dt],Ne[dt+1]),Oe.numPoints++,Oe.numSimplified++;else if($e==="LineString")er(rt,Ne,Oe,_e,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(let dt=0;dt<Ne.length;dt++)er(rt,Ne[dt],Oe,_e,$e==="Polygon",dt===0);else if($e==="MultiPolygon")for(let dt=0;dt<Ne.length;dt++){const ct=Ne[dt];for(let Qt=0;Qt<ct.length;Qt++)er(rt,ct[Qt],Oe,_e,!0,Qt===0)}if(rt.length){let dt=se.tags||null;if($e==="LineString"&&p.lineMetrics){dt={};for(const Qt in se.tags)dt[Qt]=se.tags[Qt];dt.mapbox_clip_start=Ne.start/Ne.size,dt.mapbox_clip_end=Ne.end/Ne.size}const ct={geometry:rt,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:dt};se.id!==null&&(ct.id=se.id),Oe.features.push(ct)}}function er(Oe,se,_e,p,Ne,$e){const rt=p*p;if(p>0&&se.size<(Ne?rt:p))return void(_e.numPoints+=se.length/3);const dt=[];for(let ct=0;ct<se.length;ct+=3)(p===0||se[ct+2]>rt)&&(_e.numSimplified++,dt.push(se[ct],se[ct+1])),_e.numPoints++;Ne&&function(ct,Qt){let Vt=0;for(let Nt=0,wt=ct.length,Dn=wt-2;Nt<wt;Dn=Nt,Nt+=2)Vt+=(ct[Nt]-ct[Dn])*(ct[Nt+1]+ct[Dn+1]);if(Vt>0===Qt)for(let Nt=0,wt=ct.length;Nt<wt/2;Nt+=2){const Dn=ct[Nt],On=ct[Nt+1];ct[Nt]=ct[wt-2-Nt],ct[Nt+1]=ct[wt-1-Nt],ct[wt-2-Nt]=Dn,ct[wt-1-Nt]=On}}(dt,$e),Oe.push(dt)}const qe={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ce{constructor(se,_e){const p=(_e=this.options=function($e,rt){for(const dt in rt)$e[dt]=rt[dt];return $e}(Object.create(qe),_e)).debug;if(p&&console.time("preprocess data"),_e.maxZoom<0||_e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(_e.promoteId&&_e.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ne=function($e,rt){const dt=[];if($e.type==="FeatureCollection")for(let ct=0;ct<$e.features.length;ct++)Dt(dt,$e.features[ct],rt,ct);else Dt(dt,$e.type==="Feature"?$e:{geometry:$e},rt);return dt}(se,_e);this.tiles={},this.tileCoords=[],p&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_e.indexMaxZoom,_e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ne=function($e,rt){const dt=rt.buffer/rt.extent;let ct=$e;const Qt=Ct($e,1,-1-dt,dt,0,-1,2,rt),Vt=Ct($e,1,1-dt,2+dt,0,-1,2,rt);return(Qt||Vt)&&(ct=Ct($e,1,-dt,1+dt,0,-1,2,rt)||[],Qt&&(ct=or(Qt,1).concat(ct)),Vt&&(ct=ct.concat(or(Vt,-1)))),ct}(Ne,_e),Ne.length&&this.splitTile(Ne,0,0,0),p&&(Ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,_e,p,Ne,$e,rt,dt){const ct=[se,_e,p,Ne],Qt=this.options,Vt=Qt.debug;for(;ct.length;){Ne=ct.pop(),p=ct.pop(),_e=ct.pop(),se=ct.pop();const Nt=1<<_e,wt=me(_e,p,Ne);let Dn=this.tiles[wt];if(!Dn&&(Vt>1&&console.time("creation"),Dn=this.tiles[wt]=Mr(se,_e,p,Ne,Qt),this.tileCoords.push({z:_e,x:p,y:Ne}),Vt)){Vt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_e,p,Ne,Dn.numFeatures,Dn.numPoints,Dn.numSimplified),console.timeEnd("creation"));const ho=`z${_e}`;this.stats[ho]=(this.stats[ho]||0)+1,this.total++}if(Dn.source=se,$e==null){if(_e===Qt.indexMaxZoom||Dn.numPoints<=Qt.indexMaxPoints)continue}else{if(_e===Qt.maxZoom||_e===$e)continue;if($e!=null){const ho=$e-_e;if(p!==rt>>ho||Ne!==dt>>ho)continue}}if(Dn.source=null,se.length===0)continue;Vt>1&&console.time("clipping");const On=.5*Qt.buffer/Qt.extent,pr=.5-On,Er=.5+On,sn=1+On;let Wn=null,Ln=null,Ir=null,Br=null,Kr=Ct(se,Nt,p-On,p+Er,0,Dn.minX,Dn.maxX,Qt),Ar=Ct(se,Nt,p+pr,p+sn,0,Dn.minX,Dn.maxX,Qt);se=null,Kr&&(Wn=Ct(Kr,Nt,Ne-On,Ne+Er,1,Dn.minY,Dn.maxY,Qt),Ln=Ct(Kr,Nt,Ne+pr,Ne+sn,1,Dn.minY,Dn.maxY,Qt),Kr=null),Ar&&(Ir=Ct(Ar,Nt,Ne-On,Ne+Er,1,Dn.minY,Dn.maxY,Qt),Br=Ct(Ar,Nt,Ne+pr,Ne+sn,1,Dn.minY,Dn.maxY,Qt),Ar=null),Vt>1&&console.timeEnd("clipping"),ct.push(Wn||[],_e+1,2*p,2*Ne),ct.push(Ln||[],_e+1,2*p,2*Ne+1),ct.push(Ir||[],_e+1,2*p+1,2*Ne),ct.push(Br||[],_e+1,2*p+1,2*Ne+1)}}getTile(se,_e,p){se=+se,_e=+_e,p=+p;const Ne=this.options,{extent:$e,debug:rt}=Ne;if(se<0||se>24)return null;const dt=1<<se,ct=me(se,_e=_e+dt&dt-1,p);if(this.tiles[ct])return pn(this.tiles[ct],$e);rt>1&&console.log("drilling down to z%d-%d-%d",se,_e,p);let Qt,Vt=se,Nt=_e,wt=p;for(;!Qt&&Vt>0;)Vt--,Nt>>=1,wt>>=1,Qt=this.tiles[me(Vt,Nt,wt)];return Qt&&Qt.source?(rt>1&&(console.log("found parent tile z%d-%d-%d",Vt,Nt,wt),console.time("drilling down")),this.splitTile(Qt.source,Vt,Nt,wt,se,_e,p),rt>1&&console.timeEnd("drilling down"),this.tiles[ct]?pn(this.tiles[ct],$e):null):null}}function me(Oe,se,_e){return 32*((1<<Oe)*_e+se)+Oe}function tt(Oe,se){return se?Oe.properties[se]:Oe.id}function Et(Oe,se){if(Oe==null)return!0;if(Oe.type==="Feature")return tt(Oe,se)!=null;if(Oe.type==="FeatureCollection"){const _e=new Set;for(const p of Oe.features){const Ne=tt(p,se);if(Ne==null||_e.has(Ne))return!1;_e.add(Ne)}return!0}return!1}function $t(Oe,se){const _e=new Map;if(Oe!=null)if(Oe.type==="Feature")_e.set(tt(Oe,se),Oe);else for(const p of Oe.features)_e.set(tt(p,se),p);return _e}class on extends E{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,_e){return a._(this,void 0,void 0,function*(){const p=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ne=this._geoJSONIndex.getTile(p.z,p.x,p.y);if(!Ne)return null;const $e=new ie(Ne.features);let rt=fe($e);return rt.byteOffset===0&&rt.byteLength===rt.buffer.byteLength||(rt=new Uint8Array(rt)),{vectorTile:$e,rawData:rt.buffer}})}loadData(se){return a._(this,void 0,void 0,function*(){var _e;(_e=this._pendingRequest)===null||_e===void 0||_e.abort();const p=!!(se&&se.request&&se.request.collectResourceTiming)&&new a.cu(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new st(function({superclusterOptions:rt,clusterProperties:dt}){if(!dt||!rt)return rt;const ct={},Qt={},Vt={accumulated:null,zoom:0},Nt={properties:null},wt=Object.keys(dt);for(const Dn of wt){const[On,pr]=dt[Dn],Er=a.cB(pr),sn=a.cB(typeof On=="string"?[On,["accumulated"],["get",Dn]]:On);ct[Dn]=Er.value,Qt[Dn]=sn.value}return rt.map=Dn=>{Nt.properties=Dn;const On={};for(const pr of wt)On[pr]=ct[pr].evaluate(Vt,Nt);return On},rt.reduce=(Dn,On)=>{Nt.properties=On;for(const pr of wt)Vt.accumulated=Dn[pr],Dn[pr]=Qt[pr].evaluate(Vt,Nt)},rt}(se)).load((yield this._pendingData).features):(Ne=yield this._pendingData,new ce(Ne,se.geojsonVtOptions)),this.loaded={};const $e={};if(p){const rt=p.finish();rt&&($e.resourceTiming={},$e.resourceTiming[se.source]=JSON.parse(JSON.stringify(rt)))}return $e}catch($e){if(delete this._pendingRequest,a.cf($e))return{abandoned:!0};throw $e}var Ne})}getData(){return a._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const _e=this.loaded;return _e&&_e[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,_e){return a._(this,void 0,void 0,function*(){let p=yield this.loadGeoJSON(se,_e);if(delete this._pendingRequest,typeof p!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(j(p,!0),se.filter){const Ne=a.cB(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(rt=>`${rt.key}: ${rt.message}`).join(", "));p={type:"FeatureCollection",features:p.features.filter(rt=>Ne.value.evaluate({zoom:0},rt))}}return p})}loadGeoJSON(se,_e){return a._(this,void 0,void 0,function*(){const{promoteId:p}=se;if(se.request){const Ne=yield a.h(se.request,_e);return this._dataUpdateable=Et(Ne.data,p)?$t(Ne.data,p):void 0,Ne.data}if(typeof se.data=="string")try{const Ne=JSON.parse(se.data);return this._dataUpdateable=Et(Ne,p)?$t(Ne,p):void 0,Ne}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ne,$e,rt){var dt,ct,Qt,Vt;if($e.removeAll&&Ne.clear(),$e.remove)for(const Nt of $e.remove)Ne.delete(Nt);if($e.add)for(const Nt of $e.add){const wt=tt(Nt,rt);wt!=null&&Ne.set(wt,Nt)}if($e.update)for(const Nt of $e.update){let wt=Ne.get(Nt.id);if(wt==null)continue;const Dn=!Nt.removeAllProperties&&(((dt=Nt.removeProperties)===null||dt===void 0?void 0:dt.length)>0||((ct=Nt.addOrUpdateProperties)===null||ct===void 0?void 0:ct.length)>0);if((Nt.newGeometry||Nt.removeAllProperties||Dn)&&(wt=Object.assign({},wt),Ne.set(Nt.id,wt),Dn&&(wt.properties=Object.assign({},wt.properties))),Nt.newGeometry&&(wt.geometry=Nt.newGeometry),Nt.removeAllProperties)wt.properties={};else if(((Qt=Nt.removeProperties)===null||Qt===void 0?void 0:Qt.length)>0)for(const On of Nt.removeProperties)Object.prototype.hasOwnProperty.call(wt.properties,On)&&delete wt.properties[On];if(((Vt=Nt.addOrUpdateProperties)===null||Vt===void 0?void 0:Vt.length)>0)for(const{key:On,value:pr}of Nt.addOrUpdateProperties)wt.properties[On]=pr}}(this._dataUpdateable,se.dataDiff,p),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class rr{constructor(se){this.self=se,this.actor=new a.F(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(_e,p)=>{if(this.externalWorkerSourceTypes[_e])throw new Error(`Worker source with name "${_e}" already registered.`);this.externalWorkerSourceTypes[_e]=p},this.self.addProtocol=a.ch,this.self.removeProtocol=a.ci,this.self.registerRTLTextPlugin=_e=>{a.cC.setMethods(_e)},this.actor.registerMessageHandler("LDT",(_e,p)=>this._getDEMWorkerSource(_e,p.source).loadTile(p)),this.actor.registerMessageHandler("RDT",(_e,p)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(_e,p.source).removeTile(p)})),this.actor.registerMessageHandler("GCEZ",(_e,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(_e,p.type,p.source).getClusterExpansionZoom(p)})),this.actor.registerMessageHandler("GCC",(_e,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(_e,p.type,p.source).getClusterChildren(p)})),this.actor.registerMessageHandler("GCL",(_e,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(_e,p.type,p.source).getClusterLeaves(p)})),this.actor.registerMessageHandler("LD",(_e,p)=>this._getWorkerSource(_e,p.type,p.source).loadData(p)),this.actor.registerMessageHandler("GD",(_e,p)=>this._getWorkerSource(_e,p.type,p.source).getData()),this.actor.registerMessageHandler("LT",(_e,p)=>this._getWorkerSource(_e,p.type,p.source).loadTile(p)),this.actor.registerMessageHandler("RT",(_e,p)=>this._getWorkerSource(_e,p.type,p.source).reloadTile(p)),this.actor.registerMessageHandler("AT",(_e,p)=>this._getWorkerSource(_e,p.type,p.source).abortTile(p)),this.actor.registerMessageHandler("RMT",(_e,p)=>this._getWorkerSource(_e,p.type,p.source).removeTile(p)),this.actor.registerMessageHandler("RS",(_e,p)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[_e]||!this.workerSources[_e][p.type]||!this.workerSources[_e][p.type][p.source])return;const Ne=this.workerSources[_e][p.type][p.source];delete this.workerSources[_e][p.type][p.source],Ne.removeSource!==void 0&&Ne.removeSource(p)})),this.actor.registerMessageHandler("RM",_e=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[_e],delete this.availableImages[_e],delete this.workerSources[_e],delete this.demWorkerSources[_e]})),this.actor.registerMessageHandler("SR",(_e,p)=>a._(this,void 0,void 0,function*(){this.referrer=p})),this.actor.registerMessageHandler("SRPS",(_e,p)=>this._syncRTLPluginState(_e,p)),this.actor.registerMessageHandler("IS",(_e,p)=>a._(this,void 0,void 0,function*(){this.self.importScripts(p)})),this.actor.registerMessageHandler("SI",(_e,p)=>this._setImages(_e,p)),this.actor.registerMessageHandler("UL",(_e,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(_e).update(p.layers,p.removedIds)})),this.actor.registerMessageHandler("SL",(_e,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(_e).replace(p)}))}_setImages(se,_e){return a._(this,void 0,void 0,function*(){this.availableImages[se]=_e;for(const p in this.workerSources[se]){const Ne=this.workerSources[se][p];for(const $e in Ne)Ne[$e].availableImages=_e}})}_syncRTLPluginState(se,_e){return a._(this,void 0,void 0,function*(){return yield a.cC.syncState(_e,this.self.importScripts)})}_getAvailableImages(se){let _e=this.availableImages[se];return _e||(_e=[]),_e}_getLayerIndex(se){let _e=this.layerIndexes[se];return _e||(_e=this.layerIndexes[se]=new o),_e}_getWorkerSource(se,_e,p){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][_e]||(this.workerSources[se][_e]={}),!this.workerSources[se][_e][p]){const Ne={sendAsync:($e,rt)=>($e.targetMapId=se,this.actor.sendAsync($e,rt))};switch(_e){case"vector":this.workerSources[se][_e][p]=new E(Ne,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][_e][p]=new on(Ne,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][_e][p]=new this.externalWorkerSourceTypes[_e](Ne,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][_e][p]}_getDEMWorkerSource(se,_e){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][_e]||(this.demWorkerSources[se][_e]=new S),this.demWorkerSources[se][_e]}}return a.i(self)&&(self.worker=new rr(self)),rr}),i("index",["exports","./shared"],function(a,o){var d="5.0.1";function g(){var T=new o.A(4);return o.A!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T}let b,E;const S={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:T=>new Promise((l,c)=>{const _=requestAnimationFrame(l);T.signal.addEventListener("abort",()=>{cancelAnimationFrame(_),c(o.c())})}),getImageData(T,l=0){return this.getImageCanvasContext(T).getImageData(-l,-l,T.width+2*l,T.height+2*l)},getImageCanvasContext(T){const l=window.document.createElement("canvas"),c=l.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return l.width=T.width,l.height=T.height,c.drawImage(T,0,0,T.width,T.height),c},resolveURL:T=>(b||(b=document.createElement("a")),b.href=T,b.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class B{static testProp(l){if(!B.docStyle)return l[0];for(let c=0;c<l.length;c++)if(l[c]in B.docStyle)return l[c];return l[0]}static create(l,c,_){const M=window.document.createElement(l);return c!==void 0&&(M.className=c),_&&_.appendChild(M),M}static createNS(l,c){return window.document.createElementNS(l,c)}static disableDrag(){B.docStyle&&B.selectProp&&(B.userSelect=B.docStyle[B.selectProp],B.docStyle[B.selectProp]="none")}static enableDrag(){B.docStyle&&B.selectProp&&(B.docStyle[B.selectProp]=B.userSelect)}static setTransform(l,c){l.style[B.transformProp]=c}static addEventListener(l,c,_,M={}){l.addEventListener(c,_,"passive"in M?M:M.capture)}static removeEventListener(l,c,_,M={}){l.removeEventListener(c,_,"passive"in M?M:M.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",B.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",B.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",B.suppressClickInternal,!0)},0)}static getScale(l){const c=l.getBoundingClientRect();return{x:c.width/l.offsetWidth||1,y:c.height/l.offsetHeight||1,boundingClientRect:c}}static getPoint(l,c,_){const M=c.boundingClientRect;return new o.P((_.clientX-M.left)/c.x-l.clientLeft,(_.clientY-M.top)/c.y-l.clientTop)}static mousePos(l,c){const _=B.getScale(l);return B.getPoint(l,_,c)}static touchPos(l,c){const _=[],M=B.getScale(l);for(let R=0;R<c.length;R++)_.push(B.getPoint(l,M,c[R]));return _}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const c=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),_=c.querySelectorAll("script");for(const M of _)M.remove();return B.clean(c),c.innerHTML}static isPossiblyDangerous(l,c){const _=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!_.includes("javascript:")&&!_.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const c=l.children;for(const _ of c)B.removeAttributes(_),B.clean(_)}static removeAttributes(l){for(const{name:c,value:_}of l.attributes)B.isPossiblyDangerous(c,_)&&l.removeAttribute(c)}}B.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,B.selectProp=B.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),B.transformProp=B.testProp(["transform","WebkitTransform"]);const k={supported:!1,testSupport:function(T){!Y&&j&&(q?ie(T):z=T)}};let z,j,Y=!1,q=!1;function ie(T){const l=T.createTexture();T.bindTexture(T.TEXTURE_2D,l);try{if(T.texImage2D(T.TEXTURE_2D,0,T.RGBA,T.RGBA,T.UNSIGNED_BYTE,j),T.isContextLost())return;k.supported=!0}catch{}T.deleteTexture(l),Y=!0}var J;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{z&&ie(z),z=null,q=!0},j.onerror=()=>{Y=!0,z=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(T){let l,c,_,M;T.resetRequestQueue=()=>{l=[],c=0,_=0,M={}},T.addThrottleControl=ne=>{const ae=_++;return M[ae]=ne,ae},T.removeThrottleControl=ne=>{delete M[ne],N()},T.getImage=(ne,ae,Me=!0)=>new Promise((ke,De)=>{k.supported&&(ne.headers||(ne.headers={}),ne.headers.accept="image/webp,*/*"),o.e(ne,{type:"image"}),l.push({abortController:ae,requestParameters:ne,supportImageRefresh:Me,state:"queued",onError:Ve=>{De(Ve)},onSuccess:Ve=>{ke(Ve)}}),N()});const R=ne=>o._(this,void 0,void 0,function*(){ne.state="running";const{requestParameters:ae,supportImageRefresh:Me,onError:ke,onSuccess:De,abortController:Ve}=ne,Xe=Me===!1&&!o.i(self)&&!o.g(ae.url)&&(!ae.headers||Object.keys(ae.headers).reduce((gt,bt)=>gt&&bt==="accept",!0));c++;const mt=Xe?V(ae,Ve):o.m(ae,Ve);try{const gt=yield mt;delete ne.abortController,ne.state="completed",gt.data instanceof HTMLImageElement||o.b(gt.data)?De(gt):gt.data&&De({data:yield(ut=gt.data,typeof createImageBitmap=="function"?o.d(ut):o.f(ut)),cacheControl:gt.cacheControl,expires:gt.expires})}catch(gt){delete ne.abortController,ke(gt)}finally{c--,N()}var ut}),N=()=>{const ne=(()=>{for(const ae of Object.keys(M))if(M[ae]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ae=c;ae<ne&&l.length>0;ae++){const Me=l.shift();Me.abortController.signal.aborted?ae--:R(Me)}},V=(ne,ae)=>new Promise((Me,ke)=>{const De=new Image,Ve=ne.url,Xe=ne.credentials;Xe&&Xe==="include"?De.crossOrigin="use-credentials":(Xe&&Xe==="same-origin"||!o.s(Ve))&&(De.crossOrigin="anonymous"),ae.signal.addEventListener("abort",()=>{De.src="",ke(o.c())}),De.fetchPriority="high",De.onload=()=>{De.onerror=De.onload=null,Me({data:De})},De.onerror=()=>{De.onerror=De.onload=null,ae.signal.aborted||ke(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},De.src=Ve})}(J||(J={})),J.resetRequestQueue();class ${constructor(l){this._transformRequestFn=l}transformRequest(l,c){return this._transformRequestFn&&this._transformRequestFn(l,c)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function te(T){const l=[];if(typeof T=="string")l.push({id:"default",url:T});else if(T&&T.length>0){const c=[];for(const{id:_,url:M}of T){const R=`${_}${M}`;c.indexOf(R)===-1&&(c.push(R),l.push({id:_,url:M}))}}return l}function W(T,l,c){try{const _=new URL(T);return _.pathname+=`${l}${c}`,_.toString()}catch{throw new Error(`Invalid sprite URL "${T}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class oe{constructor(l,c,_,M){this.context=l,this.format=_,this.texture=l.gl.createTexture(),this.update(c,M)}update(l,c,_){const{width:M,height:R}=l,N=!(this.size&&this.size[0]===M&&this.size[1]===R||_),{context:V}=this,{gl:ne}=V;if(this.useMipmap=!!(c&&c.useMipmap),ne.bindTexture(ne.TEXTURE_2D,this.texture),V.pixelStoreUnpackFlipY.set(!1),V.pixelStoreUnpack.set(1),V.pixelStoreUnpackPremultiplyAlpha.set(this.format===ne.RGBA&&(!c||c.premultiply!==!1)),N)this.size=[M,R],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?ne.texImage2D(ne.TEXTURE_2D,0,this.format,this.format,ne.UNSIGNED_BYTE,l):ne.texImage2D(ne.TEXTURE_2D,0,this.format,M,R,0,this.format,ne.UNSIGNED_BYTE,l.data);else{const{x:ae,y:Me}=_||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?ne.texSubImage2D(ne.TEXTURE_2D,0,ae,Me,ne.RGBA,ne.UNSIGNED_BYTE,l):ne.texSubImage2D(ne.TEXTURE_2D,0,ae,Me,M,R,ne.RGBA,ne.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ne.generateMipmap(ne.TEXTURE_2D)}bind(l,c,_){const{context:M}=this,{gl:R}=M;R.bindTexture(R.TEXTURE_2D,this.texture),_!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=R.LINEAR),l!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,l),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,_||l),this.filter=l),c!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,c),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function fe(T){const{userImage:l}=T;return!!(l&&l.render&&l.render())&&(T.data.replace(new Uint8Array(l.data.buffer)),!0)}class he extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:c,promiseResolve:_}of this.requestors)_(this._getImagesForIds(c));this.requestors=[]}}getImage(l){const c=this.images[l];if(c&&!c.data&&c.spriteData){const _=c.spriteData;c.data=new o.R({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),c.spriteData=null}return c}addImage(l,c){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,c)&&(this.images[l]=c)}_validate(l,c){let _=!0;const M=c.data||c.spriteData;return this._validateStretch(c.stretchX,M&&M.width)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchX" value`))),_=!1),this._validateStretch(c.stretchY,M&&M.height)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchY" value`))),_=!1),this._validateContent(c.content,c)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "content" value`))),_=!1),_}_validateStretch(l,c){if(!l)return!0;let _=0;for(const M of l){if(M[0]<_||M[1]<M[0]||c<M[1])return!1;_=M[1]}return!0}_validateContent(l,c){if(!l)return!0;if(l.length!==4)return!1;const _=c.spriteData,M=_&&_.width||c.data.width,R=_&&_.height||c.data.height;return!(l[0]<0||M<l[0]||l[1]<0||R<l[1]||l[2]<0||M<l[2]||l[3]<0||R<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,c,_=!0){const M=this.getImage(l);if(_&&(M.data.width!==c.data.width||M.data.height!==c.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=M.version+1,this.images[l]=c,this.updatedImages[l]=!0}removeImage(l){const c=this.images[l];delete this.images[l],delete this.patterns[l],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise((c,_)=>{let M=!0;if(!this.isLoaded())for(const R of l)this.images[R]||(M=!1);this.isLoaded()||M?c(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:c})})}_getImagesForIds(l){const c={};for(const _ of l){let M=this.getImage(_);M||(this.fire(new o.k("styleimagemissing",{id:_})),M=this.getImage(_)),M?c[_]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,textFitWidth:M.textFitWidth,textFitHeight:M.textFitHeight,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.w(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:l,height:c}=this.atlasImage;return{width:l,height:c}}getPattern(l){const c=this.patterns[l],_=this.getImage(l);if(!_)return null;if(c&&c.position.version===_.version)return c.position;if(c)c.position.version=_.version;else{const M={w:_.data.width+2,h:_.data.height+2,x:0,y:0},R=new o.I(M,_);this.patterns[l]={bin:M,position:R}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const c=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe(l,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const R in this.patterns)l.push(this.patterns[R].bin);const{w:c,h:_}=o.p(l),M=this.atlasImage;M.resize({width:c||1,height:_||1});for(const R in this.patterns){const{bin:N}=this.patterns[R],V=N.x+1,ne=N.y+1,ae=this.getImage(R).data,Me=ae.width,ke=ae.height;o.R.copy(ae,M,{x:0,y:0},{x:V,y:ne},{width:Me,height:ke}),o.R.copy(ae,M,{x:0,y:ke-1},{x:V,y:ne-1},{width:Me,height:1}),o.R.copy(ae,M,{x:0,y:0},{x:V,y:ne+ke},{width:Me,height:1}),o.R.copy(ae,M,{x:Me-1,y:0},{x:V-1,y:ne},{width:1,height:ke}),o.R.copy(ae,M,{x:0,y:0},{x:V+Me,y:ne},{width:1,height:ke})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const c of l){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const _=this.getImage(c);_||o.w(`Image with ID: "${c}" was not found`),fe(_)&&this.updateImage(c,_)}}}const Se=1e20;function pe(T,l,c,_,M,R,N,V,ne){for(let ae=l;ae<l+_;ae++)we(T,c*R+ae,R,M,N,V,ne);for(let ae=c;ae<c+M;ae++)we(T,ae*R+l,1,_,N,V,ne)}function we(T,l,c,_,M,R,N){R[0]=0,N[0]=-1e20,N[1]=Se,M[0]=T[l];for(let V=1,ne=0,ae=0;V<_;V++){M[V]=T[l+V*c];const Me=V*V;do{const ke=R[ne];ae=(M[V]-M[ke]+Me-ke*ke)/(V-ke)/2}while(ae<=N[ne]&&--ne>-1);ne++,R[ne]=V,N[ne]=ae,N[ne+1]=Se}for(let V=0,ne=0;V<_;V++){for(;N[ne+1]<V;)ne++;const ae=R[ne],Me=V-ae;T[l+V*c]=M[ae]+Me*Me}}class Ke{constructor(l,c){this.requestManager=l,this.localIdeographFontFamily=c,this.entries={}}setURL(l){this.url=l}getGlyphs(l){return o._(this,void 0,void 0,function*(){const c=[];for(const R in l)for(const N of l[R])c.push(this._getAndCacheGlyphsPromise(R,N));const _=yield Promise.all(c),M={};for(const{stack:R,id:N,glyph:V}of _)M[R]||(M[R]={}),M[R][N]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics};return M})}_getAndCacheGlyphsPromise(l,c){return o._(this,void 0,void 0,function*(){let _=this.entries[l];_||(_=this.entries[l]={glyphs:{},requests:{},ranges:{}});let M=_.glyphs[c];if(M!==void 0)return{stack:l,id:c,glyph:M};if(M=this._tinySDF(_,l,c),M)return _.glyphs[c]=M,{stack:l,id:c,glyph:M};const R=Math.floor(c/256);if(256*R>65535)throw new Error("glyphs > 65535 not supported");if(_.ranges[R])return{stack:l,id:c,glyph:M};if(!this.url)throw new Error("glyphsUrl is not set");if(!_.requests[R]){const V=Ke.loadGlyphRange(l,R,this.url,this.requestManager);_.requests[R]=V}const N=yield _.requests[R];for(const V in N)this._doesCharSupportLocalGlyph(+V)||(_.glyphs[+V]=N[+V]);return _.ranges[R]=!0,{stack:l,id:c,glyph:N[c]||null}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))}_tinySDF(l,c,_){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(_))return;let R=l.tinySDF;if(!R){let V="400";/bold/i.test(c)?V="900":/medium/i.test(c)?V="500":/light/i.test(c)&&(V="200"),R=l.tinySDF=new Ke.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:V})}const N=R.draw(String.fromCharCode(_));return{id:_,bitmap:new o.o({width:N.width||60,height:N.height||60},N.data),metrics:{width:N.glyphWidth/2||24,height:N.glyphHeight/2||24,left:N.glyphLeft/2+.5||0,top:N.glyphTop/2-27.5||-8,advance:N.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ke.loadGlyphRange=function(T,l,c,_){return o._(this,void 0,void 0,function*(){const M=256*l,R=M+255,N=_.transformRequest(c.replace("{fontstack}",T).replace("{range}",`${M}-${R}`),"Glyphs"),V=yield o.l(N,new AbortController);if(!V||!V.data)throw new Error(`Could not load glyph range. range: ${l}, ${M}-${R}`);const ne={};for(const ae of o.n(V.data))ne[ae.id]=ae;return ne})},Ke.TinySDF=class{constructor({fontSize:T=24,buffer:l=3,radius:c=8,cutoff:_=.25,fontFamily:M="sans-serif",fontWeight:R="normal",fontStyle:N="normal"}={}){this.buffer=l,this.cutoff=_,this.radius=c;const V=this.size=T+4*l,ne=this._createCanvas(V),ae=this.ctx=ne.getContext("2d",{willReadFrequently:!0});ae.font=`${N} ${R} ${T}px ${M}`,ae.textBaseline="alphabetic",ae.textAlign="left",ae.fillStyle="black",this.gridOuter=new Float64Array(V*V),this.gridInner=new Float64Array(V*V),this.f=new Float64Array(V),this.z=new Float64Array(V+1),this.v=new Uint16Array(V)}_createCanvas(T){const l=document.createElement("canvas");return l.width=l.height=T,l}draw(T){const{width:l,actualBoundingBoxAscent:c,actualBoundingBoxDescent:_,actualBoundingBoxLeft:M,actualBoundingBoxRight:R}=this.ctx.measureText(T),N=Math.ceil(c),V=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(R-M))),ne=Math.min(this.size-this.buffer,N+Math.ceil(_)),ae=V+2*this.buffer,Me=ne+2*this.buffer,ke=Math.max(ae*Me,0),De=new Uint8ClampedArray(ke),Ve={data:De,width:ae,height:Me,glyphWidth:V,glyphHeight:ne,glyphTop:N,glyphLeft:0,glyphAdvance:l};if(V===0||ne===0)return Ve;const{ctx:Xe,buffer:mt,gridInner:ut,gridOuter:gt}=this;Xe.clearRect(mt,mt,V,ne),Xe.fillText(T,mt,mt+N);const bt=Xe.getImageData(mt,mt,V,ne);gt.fill(Se,0,ke),ut.fill(0,0,ke);for(let Ot=0;Ot<ne;Ot++)for(let Pt=0;Pt<V;Pt++){const Kt=bt.data[4*(Ot*V+Pt)+3]/255;if(Kt===0)continue;const jt=(Ot+mt)*ae+Pt+mt;if(Kt===1)gt[jt]=0,ut[jt]=Se;else{const Rt=.5-Kt;gt[jt]=Rt>0?Rt*Rt:0,ut[jt]=Rt<0?Rt*Rt:0}}pe(gt,0,0,ae,Me,ae,this.f,this.v,this.z),pe(ut,mt,mt,V,ne,ae,this.f,this.v,this.z);for(let Ot=0;Ot<ke;Ot++){const Pt=Math.sqrt(gt[Ot])-Math.sqrt(ut[Ot]);De[Ot]=Math.round(255-255*(Pt/this.radius+this.cutoff))}return Ve}};class ge{constructor(){this.specification=o.v.light.position}possiblyEvaluate(l,c){return o.x(l.expression.evaluate(c))}interpolate(l,c,_){return{x:o.y.number(l.x,c.x,_),y:o.y.number(l.y,c.y,_),z:o.y.number(l.z,c.z,_)}}}let st;class Qe extends o.E{constructor(l){super(),st=st||new o.q({anchor:new o.D(o.v.light.anchor),position:new ge,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(st),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,c={}){if(!this._validate(o.r,l,c))for(const _ in l){const M=l[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),M):this._transitionable.setValue(_,M)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,_){return(!_||_.validate!==!1)&&o.t(this,l.call(o.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Ze=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class We extends o.E{constructor(l){super(),this._transitionable=new o.T(Ze),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(l,c={}){if(!this._validate(o.B,l,c)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const _ in l){const M=l[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),M):this._transitionable.setValue(_,M)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,_={}){return(_==null?void 0:_.validate)!==!1&&o.t(this,l.call(o.u,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Ce{constructor(l,c){this.width=l,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,c){const _=l.join(",")+String(c);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(l,c)),this.dashEntry[_]}getDashRanges(l,c,_){const M=[];let R=l.length%2==1?-l[l.length-1]*_:0,N=l[0]*_,V=!0;M.push({left:R,right:N,isDash:V,zeroLength:l[0]===0});let ne=l[0];for(let ae=1;ae<l.length;ae++){V=!V;const Me=l[ae];R=ne*_,ne+=Me,N=ne*_,M.push({left:R,right:N,isDash:V,zeroLength:Me===0})}return M}addRoundDash(l,c,_){const M=c/2;for(let R=-_;R<=_;R++){const N=this.width*(this.nextRow+_+R);let V=0,ne=l[V];for(let ae=0;ae<this.width;ae++){ae/ne.right>1&&(ne=l[++V]);const Me=Math.abs(ae-ne.left),ke=Math.abs(ae-ne.right),De=Math.min(Me,ke);let Ve;const Xe=R/_*(M+1);if(ne.isDash){const mt=M-Math.abs(Xe);Ve=Math.sqrt(De*De+mt*mt)}else Ve=M-Math.sqrt(De*De+Xe*Xe);this.data[N+ae]=Math.max(0,Math.min(255,Ve+128))}}}addRegularDash(l){for(let V=l.length-1;V>=0;--V){const ne=l[V],ae=l[V+1];ne.zeroLength?l.splice(V,1):ae&&ae.isDash===ne.isDash&&(ae.left=ne.left,l.splice(V,1))}const c=l[0],_=l[l.length-1];c.isDash===_.isDash&&(c.left=_.left-this.width,_.right=c.right+this.width);const M=this.width*this.nextRow;let R=0,N=l[R];for(let V=0;V<this.width;V++){V/N.right>1&&(N=l[++R]);const ne=Math.abs(V-N.left),ae=Math.abs(V-N.right),Me=Math.min(ne,ae);this.data[M+V]=Math.max(0,Math.min(255,(N.isDash?Me:-Me)+128))}}addDash(l,c){const _=c?7:0,M=2*_+1;if(this.nextRow+M>this.height)return o.w("LineAtlas out of space"),null;let R=0;for(let V=0;V<l.length;V++)R+=l[V];if(R!==0){const V=this.width/R,ne=this.getDashRanges(l,this.width,V);c?this.addRoundDash(ne,V,_):this.addRegularDash(ne)}const N={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:R};return this.nextRow+=M,this.dirty=!0,N}bind(l){const c=l.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Pe="maplibre_preloaded_worker_pool";class it{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<it.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Pe]}numActive(){return Object.keys(this.active).length}}const vt=Math.floor(S.hardwareConcurrency/2);let _t,ft;function Dt(){return _t||(_t=new it),_t}it.workerCount=o.C(globalThis)?Math.max(Math.min(vt,3),1):1;class Tt{constructor(l,c){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=c;const _=this.workerPool.acquire(c);for(let M=0;M<_.length;M++){const R=new o.F(_[M],c);R.name=`Worker ${M}`,this.actors.push(R)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,c){const _=[];for(const M of this.actors)_.push(M.sendAsync({type:l,data:c}));return Promise.all(_)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,c){for(const _ of this.actors)_.registerMessageHandler(l,c)}}function Ue(){return ft||(ft=new Tt(Dt(),o.G),ft.registerMessageHandler("GR",(T,l,c)=>o.m(l,c))),ft}function Re(T,l){const c=o.H();return o.J(c,c,[1,1,0]),o.K(c,c,[.5*T.width,.5*T.height,1]),T.calculatePosMatrix?o.L(c,c,T.calculatePosMatrix(l.toUnwrapped())):c}function Be(T,l,c,_,M,R){var N;const V=function(ke,De,Ve){if(ke)for(const Xe of ke){const mt=De[Xe];if(mt&&mt.source===Ve&&mt.type==="fill-extrusion")return!0}else for(const Xe in De){const mt=De[Xe];if(mt.source===Ve&&mt.type==="fill-extrusion")return!0}return!1}((N=M==null?void 0:M.layers)!==null&&N!==void 0?N:null,l,T.id),ne=R.maxPitchScaleFactor(),ae=T.tilesIn(_,ne,V);ae.sort(nt);const Me=[];for(const ke of ae)Me.push({wrappedTileID:ke.tileID.wrapped().key,queryResults:ke.tile.queryRenderedFeatures(l,c,T._state,ke.queryGeometry,ke.cameraQueryGeometry,ke.scale,M,R,ne,Re(T.transform,ke.tileID))});return function(ke,De){for(const Ve in ke)for(const Xe of ke[Ve])Ct(Xe,De);return ke}(function(ke){const De={},Ve={};for(const Xe of ke){const mt=Xe.queryResults,ut=Xe.wrappedTileID,gt=Ve[ut]=Ve[ut]||{};for(const bt in mt){const Ot=mt[bt],Pt=gt[bt]=gt[bt]||{},Kt=De[bt]=De[bt]||[];for(const jt of Ot)Pt[jt.featureIndex]||(Pt[jt.featureIndex]=!0,Kt.push(jt))}}return De}(Me),T)}function nt(T,l){const c=T.tileID,_=l.tileID;return c.overscaledZ-_.overscaledZ||c.canonical.y-_.canonical.y||c.wrap-_.wrap||c.canonical.x-_.canonical.x}function Ct(T,l){const c=T.feature,_=l.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=_}function pt(T,l,c){return o._(this,void 0,void 0,function*(){let _=T;if(T.url?_=(yield o.h(l.transformRequest(T.url,"Source"),c)).data:yield S.frameAsync(c),!_)return null;const M=o.M(o.e(_,T),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(M.vectorLayerIds=_.vector_layers.map(R=>R.id)),M})}class zt{constructor(l,c){l&&(c?this.setSouthWest(l).setNorthEast(c):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}setSouthWest(l){return this._sw=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}extend(l){const c=this._sw,_=this._ne;let M,R;if(l instanceof o.N)M=l,R=l;else{if(!(l instanceof zt))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(zt.convert(l)):this.extend(o.N.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(o.N.convert(l)):this;if(M=l._sw,R=l._ne,!M||!R)return this}return c||_?(c.lng=Math.min(M.lng,c.lng),c.lat=Math.min(M.lat,c.lat),_.lng=Math.max(R.lng,_.lng),_.lat=Math.max(R.lat,_.lat)):(this._sw=new o.N(M.lng,M.lat),this._ne=new o.N(R.lng,R.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:c,lat:_}=o.N.convert(l);let M=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&M}static convert(l){return l instanceof zt?l:l&&new zt(l)}static fromLngLat(l,c=0){const _=360*c/40075017,M=_/Math.cos(Math.PI/180*l.lat);return new zt(new o.N(l.lng-M,l.lat-_),new o.N(l.lng+M,l.lat+_))}adjustAntiMeridian(){const l=new o.N(this._sw.lng,this._sw.lat),c=new o.N(this._ne.lng,this._ne.lat);return new zt(l,l.lng>c.lng?new o.N(c.lng+360,c.lat):c)}}class tn{constructor(l,c,_){this.bounds=zt.convert(this.validateBounds(l)),this.minzoom=c||0,this.maxzoom=_||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const c=Math.pow(2,l.z),_=Math.floor(o.O(this.bounds.getWest())*c),M=Math.floor(o.Q(this.bounds.getNorth())*c),R=Math.ceil(o.O(this.bounds.getEast())*c),N=Math.ceil(o.Q(this.bounds.getSouth())*c);return l.x>=_&&l.x<R&&l.y>=M&&l.y<N}}class Lt extends o.E{constructor(l,c,_,M){if(super(),this.id=l,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(o.e(this,l),l.bounds&&(this.tileBounds=new tn(l.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new o.j(l))}})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(c,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};_.request.collectResourceTiming=this._collectResourceTiming;let M="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise((R,N)=>{l.reloadPromise={resolve:R,reject:N}})}else l.actor=this.dispatcher.getActor(),M="LT";l.abortController=new AbortController;try{const R=yield l.actor.sendAsync({type:M,data:_},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,R)}catch(R){if(delete l.abortController,l.aborted)return;if(R&&R.status!==404)throw R;this._afterTileLoadWorkerResponse(l,null)}})}_afterTileLoadWorkerResponse(l,c){if(c&&c.resourceTiming&&(l.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&l.setExpiryData(c),l.loadVectorData(c,this.map.painter),l.reloadPromise){const _=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(_.resolve).catch(_.reject)}}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class gn extends o.E{constructor(l,c,_,M){super(),this.id=l,this.dispatcher=_,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.M(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(l=!1){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield pt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new tn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(c){this._tileJSONRequest=null,this.fire(new o.j(c))}})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}serialize(){return o.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const _=yield J.getImage(this.map._requestManager.transformRequest(c,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(_&&_.data){this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&l.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const M=this.map.painter.context,R=M.gl,N=_.data;l.texture=this.map.painter.getTileTexture(N.width),l.texture?l.texture.update(N,{useMipmap:!0}):(l.texture=new oe(M,N,R.RGBA,{useMipmap:!0}),l.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(_){if(delete l.abortController,l.aborted)l.state="unloaded";else if(_)throw l.state="errored",_}})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)})}hasTransition(){return!1}}class Nn extends gn{constructor(l,c,_,M){super(l,c,_,M),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_=this.map._requestManager.transformRequest(c,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const M=yield J.getImage(_,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(M&&M.data){const R=M.data;this.map._refreshExpiredTiles&&M.cacheControl&&M.expires&&l.setExpiryData({cacheControl:M.cacheControl,expires:M.expires});const N=o.b(R)&&o.U()?R:yield this.readImageNow(R),V={type:this.type,uid:l.uid,source:this.id,rawImageData:N,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const ne=yield l.actor.sendAsync({type:"LDT",data:V});l.dem=ne,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(M){if(delete l.abortController,l.aborted)l.state="unloaded";else if(M)throw l.state="errored",M}})}readImageNow(l){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.V()){const c=l.width+2,_=l.height+2;try{return new o.R({width:c,height:_},yield o.W(l,-1,-1,c,_))}catch{}}return S.getImageData(l,1)})}_getNeighboringTiles(l){const c=l.canonical,_=Math.pow(2,c.z),M=(c.x-1+_)%_,R=c.x===0?l.wrap-1:l.wrap,N=(c.x+1+_)%_,V=c.x+1===_?l.wrap+1:l.wrap,ne={};return ne[new o.S(l.overscaledZ,R,c.z,M,c.y).key]={backfilled:!1},ne[new o.S(l.overscaledZ,V,c.z,N,c.y).key]={backfilled:!1},c.y>0&&(ne[new o.S(l.overscaledZ,R,c.z,M,c.y-1).key]={backfilled:!1},ne[new o.S(l.overscaledZ,l.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},ne[new o.S(l.overscaledZ,V,c.z,N,c.y-1).key]={backfilled:!1}),c.y+1<_&&(ne[new o.S(l.overscaledZ,R,c.z,M,c.y+1).key]={backfilled:!1},ne[new o.S(l.overscaledZ,l.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},ne[new o.S(l.overscaledZ,V,c.z,N,c.y+1).key]={backfilled:!1}),ne}unloadTile(l){return o._(this,void 0,void 0,function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))})}}class rn extends o.E{constructor(l,c,_,M){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(M),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.X,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(l){return l*(o.X/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}getData(){return o._(this,void 0,void 0,function*(){const l=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})})}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,c,_){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:c,offset:_}})}_updateWorkerData(l){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);l?c.dataDiff=l:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(S.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||_.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let M=null;_.resourceTiming&&_.resourceTiming[this.id]&&(M=_.resourceTiming[this.id].slice(0));const R={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&o.e(R,{resourceTiming:M}),this.fire(new o.k("data",Object.assign(Object.assign({},R),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},R),{sourceDataType:"content"})))}catch(_){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(_))}})}loaded(){return this._pendingLoads===0}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.actor?"RT":"LT";l.actor=this.actor;const _={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const M=yield this.actor.sendAsync({type:c,data:_},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(M,this.map.painter,c==="RT")})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class or extends o.E{constructor(l,c,_,M){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=_,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=c}load(l){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield J.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,l&&(this.coordinates=l),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.j(c))}})}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const c=l.map(o.Y.fromLngLat);var _;return this.tileID=function(M){let R=1/0,N=1/0,V=-1/0,ne=-1/0;for(const De of M)R=Math.min(R,De.x),N=Math.min(N,De.y),V=Math.max(V,De.x),ne=Math.max(ne,De.y);const ae=Math.max(V-R,ne-N),Me=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),ke=Math.pow(2,Me);return new o.Z(Me,Math.floor((R+V)/2*ke),Math.floor((N+ne)/2*ke))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(M=>this.tileID.getTilePoint(M)._round()),this.flippedWindingOrder=((_=this.tileCoords)[1].x-_[0].x)*(_[2].y-_[0].y)-(_[1].y-_[0].y)*(_[2].x-_[0].x)<0,this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,c=l.gl;this.texture||(this.texture=new oe(l,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let _=!1;for(const M in this.tiles){const R=this.tiles[M];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,_=!0)}_&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Kn extends or{constructor(l,c,_,M){super(l,c,_,M),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const c of l.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a0(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const c=this.video.seekable;l<c.start(0)||l>c.end(0)?this.fire(new o.j(new o.$(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,c=l.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new oe(l,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let _=!1;for(const M in this.tiles){const R=this.tiles[M];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,_=!0)}_&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class pn extends or{constructor(l,c,_,M){super(l,c,_,M),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(N=>typeof N!="number"))||this.fire(new o.j(new o.$(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.$(`sources.${l}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.j(new o.$(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.$(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.$(`sources.${l}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,_=c.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe(c,this.canvas,_.RGBA,{premultiply:!0});let M=!1;for(const R in this.tiles){const N=this.tiles[R];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture,M=!0)}M&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Xn={},Mr=T=>{switch(T){case"geojson":return rn;case"image":return or;case"raster":return gn;case"raster-dem":return Nn;case"vector":return Lt;case"video":return Kn;case"canvas":return pn}return Xn[T]},Yn="RTLPluginLoaded";class er extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ue()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return o._(this,arguments,void 0,function*(c,_=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=S.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!_)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(Yn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let qe=null;function ce(){return qe||(qe=new er),qe}class me{constructor(l,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=o.a1(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const c=l+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,c,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(M,R){const N={};if(!R)return N;for(const V of M){const ne=V.layerIds.map(ae=>R.getLayer(ae)).filter(Boolean);if(ne.length!==0){V.layers=ne,V.stateDependentLayerIds&&(V.stateDependentLayers=V.stateDependentLayerIds.map(ae=>ne.filter(Me=>Me.id===ae)[0]));for(const ae of ne)N[ae.id]=V}}return N}(l.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const R=this.buckets[M];if(R instanceof o.a3){if(this.hasSymbolBuckets=!0,!_)break;R.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const R=this.buckets[M];if(R instanceof o.a3&&R.hasRTLText){this.hasRTLText=!0,ce().lazyLoad();break}}this.queryPadding=0;for(const M in this.buckets){const R=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(M).queryRadius(R))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new o.a2}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const _ in this.buckets){const M=this.buckets[_];M.uploadPending()&&M.upload(l)}const c=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new oe(l,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new oe(l,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,c,_,M,R,N,V,ne,ae,Me){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:R,scale:N,tileSize:this.tileSize,pixelPosMatrix:Me,transform:ne,params:V,queryPadding:this.queryPadding*ae},l,c,_):{}}querySourceFeatures(l,c){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const M=_.loadVTLayers(),R=c&&c.sourceLayer?c.sourceLayer:"",N=M._geojsonTileLayer||M[R];if(!N)return;const V=o.a4(c&&c.filter),{z:ne,x:ae,y:Me}=this.tileID.canonical,ke={z:ne,x:ae,y:Me};for(let De=0;De<N.length;De++){const Ve=N.feature(De);if(V.needGeometry){const ut=o.a5(Ve,!0);if(!V.filter(new o.z(this.tileID.overscaledZ),ut,this.tileID.canonical))continue}else if(!V.filter(new o.z(this.tileID.overscaledZ),Ve))continue;const Xe=_.getId(Ve,R),mt=new o.a6(Ve,ne,ae,Me,Xe);mt.tile=ke,l.push(mt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const c=this.expirationTime;if(l.cacheControl){const _=o.a7(l.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const _=Date.now();let M=!1;if(this.expirationTime>_)M=!1;else if(c)if(this.expirationTime<c)M=!0;else{const R=this.expirationTime-c;R?this.expirationTime=_+Math.max(R,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!c.style.hasLayer(M))continue;const R=this.buckets[M],N=R.layers[0].sourceLayer||"_geojsonTileLayer",V=_[N],ne=l[N];if(!V||!ne||Object.keys(ne).length===0)continue;R.update(ne,V,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ae=c&&c.style&&c.style.getLayer(M);ae&&(this.queryPadding=Math.max(this.queryPadding,ae.queryRadius(R)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<S.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=S.now()+l}setDependencies(l,c){const _={};for(const M of c)_[M]=!0;this.dependencies[l]=_}hasDependency(l,c){for(const _ of l){const M=this.dependencies[_];if(M){for(const R of c)if(M[R])return!0}}return!1}}class tt{constructor(l,c){this.max=l,this.onRemove=c,this.reset()}reset(){for(const l in this.data)for(const c of this.data[l])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(l,c,_){const M=l.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const R={value:c,timeout:void 0};if(_!==void 0&&(R.timeout=setTimeout(()=>{this.remove(l,R)},_)),this.data[M].push(R),this.order.push(M),this.order.length>this.max){const N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const c=this.data[l].shift();return c.timeout&&clearTimeout(c.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),c.value}getByKey(l){const c=this.data[l];return c?c[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,c){if(!this.has(l))return this;const _=l.wrapped().key,M=c===void 0?0:this.data[_].indexOf(c),R=this.data[_][M];return this.data[_].splice(M,1),R.timeout&&clearTimeout(R.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(R.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(l){const c=[];for(const _ in this.data)for(const M of this.data[_])l(M.value)||c.push(M);for(const _ of c)this.remove(_.value.tileID,_)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,c,_){const M=String(c);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][M]=this.stateChanges[l][M]||{},o.e(this.stateChanges[l][M],_),this.deletedStates[l]===null){this.deletedStates[l]={};for(const R in this.state[l])R!==M&&(this.deletedStates[l][R]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][M]===null){this.deletedStates[l][M]={};for(const R in this.state[l][M])_[R]||(this.deletedStates[l][M][R]=null)}else for(const R in _)this.deletedStates[l]&&this.deletedStates[l][M]&&this.deletedStates[l][M][R]===null&&delete this.deletedStates[l][M][R]}removeFeatureState(l,c,_){if(this.deletedStates[l]===null)return;const M=String(c);if(this.deletedStates[l]=this.deletedStates[l]||{},_&&c!==void 0)this.deletedStates[l][M]!==null&&(this.deletedStates[l][M]=this.deletedStates[l][M]||{},this.deletedStates[l][M][_]=null);else if(c!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][M])for(_ in this.deletedStates[l][M]={},this.stateChanges[l][M])this.deletedStates[l][M][_]=null;else this.deletedStates[l][M]=null;else this.deletedStates[l]=null}getState(l,c){const _=String(c),M=o.e({},(this.state[l]||{})[_],(this.stateChanges[l]||{})[_]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const R=this.deletedStates[l][c];if(R===null)return{};for(const N in R)delete M[N]}return M}initializeTileState(l,c){l.setFeatureState(this.state,c)}coalesceChanges(l,c){const _={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const R={};for(const N in this.stateChanges[M])this.state[M][N]||(this.state[M][N]={}),o.e(this.state[M][N],this.stateChanges[M][N]),R[N]=this.state[M][N];_[M]=R}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const R={};if(this.deletedStates[M]===null)for(const N in this.state[M])R[N]={},this.state[M][N]={};else for(const N in this.deletedStates[M]){if(this.deletedStates[M][N]===null)this.state[M][N]={};else for(const V of Object.keys(this.deletedStates[M][N]))delete this.state[M][N][V];R[N]=this.state[M][N]}_[M]=_[M]||{},o.e(_[M],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const M in l)l[M].setFeatureState(_,c)}}function $t(T,l,c){const _=l.intersectsFrustum(T);if(!c)return _;const M=l.intersectsPlane(c);return _===0||M===0?0:_===2&&M===2?2:1}function on(T,l,c,_,M){let R=T;const N=Math.atan(l/c),V=Math.hypot(l,c);return R=T+o.a8(_/V/Math.max(.5,Math.cos(o.aa(M/2)))),R+=1*o.a8(Math.cos(N))/2,R+=o.ab(T-R,-0,0),R}function rr(T,l){const c=(l.roundZoom?Math.round:Math.floor)(T.zoom+o.a8(T.tileSize/l.tileSize));return Math.max(0,c)}function Oe(T,l){const c=T.getCameraFrustum(),_=T.getClippingPlane(),M=T.screenPointToMercatorCoordinate(T.getCameraPoint()),R=o.Y.fromLngLat(T.center,T.elevation);M.z=R.z+Math.cos(T.pitchInRadians)*T.cameraToCenterDistance/T.worldSize;const N=T.getCoveringTilesDetailsProvider(),V=N.allowVariableZoom(T,l),ne=rr(T,l),ae=l.minzoom||0,Me=l.maxzoom!==void 0?l.maxzoom:T.maxZoom,ke=Math.min(Math.max(0,ne),Me),De=Math.pow(2,ke),Ve=[De*M.x,De*M.y,0],Xe=[De*R.x,De*R.y,0],mt=Math.hypot(R.x-M.x,R.y-M.y),ut=Math.abs(R.z-M.z),gt=Math.hypot(mt,ut),bt=Kt=>({zoom:0,x:0,y:0,wrap:Kt,fullyVisible:!1}),Ot=[],Pt=[];if(T.renderWorldCopies&&N.allowWorldCopies())for(let Kt=1;Kt<=3;Kt++)Ot.push(bt(-Kt)),Ot.push(bt(Kt));for(Ot.push(bt(0));Ot.length>0;){const Kt=Ot.pop(),jt=Kt.x,Rt=Kt.y;let nn=Kt.fullyVisible;const Xt={x:jt,y:Rt,z:Kt.zoom},bn=N.getTileAABB(Xt,Kt.wrap,T.elevation,l);if(!nn){const Gn=$t(c,bn,_);if(Gn===0)continue;nn=Gn===2}const xn=N.distanceToTile2d(M.x,M.y,Xt,bn);let Cn=ne;V&&(Cn=(l.calculateTileZoom||on)(T.zoom+o.a8(T.tileSize/l.tileSize),xn,ut,gt,T.fov)),Cn=(l.roundZoom?Math.round:Math.floor)(Cn),Cn=Math.max(0,Cn);const kn=Math.min(Cn,Me);if(Kt.wrap=N.getWrap(R,Xt,Kt.wrap),Kt.zoom>=kn){if(Kt.zoom<ae)continue;const Gn=ke-Kt.zoom,Bn=Ve[0]-.5-(jt<<Gn),Pr=Ve[1]-.5-(Rt<<Gn),Oi=l.reparseOverscaled?Math.max(Kt.zoom,Cn):Kt.zoom;Pt.push({tileID:new o.S(Kt.zoom===Me?Oi:Kt.zoom,Kt.wrap,Kt.zoom,jt,Rt),distanceSq:o.a9([Xe[0]-.5-jt,Xe[1]-.5-Rt]),tileDistanceToCamera:Math.sqrt(Bn*Bn+Pr*Pr)})}else for(let Gn=0;Gn<4;Gn++)Ot.push({zoom:Kt.zoom+1,x:(jt<<1)+Gn%2,y:(Rt<<1)+(Gn>>1),wrap:Kt.wrap,fullyVisible:nn})}return Pt.sort((Kt,jt)=>Kt.distanceSq-jt.distanceSq).map(Kt=>Kt.tileID)}class se extends o.E{constructor(l,c,_){super(),this.id=l,this.dispatcher=_,this.on("data",M=>this._dataHandler(M)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((M,R,N,V)=>{const ne=new(Mr(R.type))(M,R,N,V);if(ne.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${ne.id}`);return ne})(l,c,_,this),this._tiles={},this._cache=new tt(0,M=>this._unloadTile(M)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const c=this._tiles[l];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,c,_){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,c,_)}catch(M){l.state="errored",M.status!==404?this._source.fire(new o.j(M,{tile:l})):this.update(this.transform,this.terrain)}})}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new o.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const _=this._tiles[c];_.upload(l),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(_e).map(l=>l.key)}getRenderableIds(l){const c=[];for(const _ in this._tiles)this._isIdRenderable(_,l)&&c.push(this._tiles[_]);return l?c.sort((_,M)=>{const R=_.tileID,N=M.tileID,V=new o.P(R.canonical.x,R.canonical.y)._rotate(-this.transform.bearingInRadians),ne=new o.P(N.canonical.x,N.canonical.y)._rotate(-this.transform.bearingInRadians);return R.overscaledZ-N.overscaledZ||ne.y-V.y||ne.x-V.x}).map(_=>_.tileID.key):c.map(_=>_.tileID).sort(_e).map(_=>_.key)}hasRenderableParent(l){const c=this.findLoadedParent(l,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(l,c){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(c||!this._tiles[l].holdingForFade())}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(l||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(l,c){return o._(this,void 0,void 0,function*(){const _=this._tiles[l];_&&(_.state!=="loading"&&(_.state=c),yield this._loadTile(_,l,c))})}_tileLoaded(l,c,_){l.timeAdded=S.now(),_==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(c,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const c=this.getRenderableIds();for(let M=0;M<c.length;M++){const R=c[M];if(l.neighboringTiles&&l.neighboringTiles[R]){const N=this.getTileByID(R);_(l,N),_(N,l)}}function _(M,R){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let N=R.tileID.canonical.x-M.tileID.canonical.x;const V=R.tileID.canonical.y-M.tileID.canonical.y,ne=Math.pow(2,M.tileID.canonical.z),ae=R.tileID.key;N===0&&V===0||Math.abs(V)>1||(Math.abs(N)>1&&(Math.abs(N+ne)===1?N+=ne:Math.abs(N-ne)===1&&(N-=ne)),R.dem&&M.dem&&(M.dem.backfillBorder(R.dem,N,V),M.neighboringTiles&&M.neighboringTiles[ae]&&(M.neighboringTiles[ae].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,c,_,M){for(const R in this._tiles){let N=this._tiles[R];if(M[R]||!N.hasData()||N.tileID.overscaledZ<=c||N.tileID.overscaledZ>_)continue;let V=N.tileID;for(;N&&N.tileID.overscaledZ>c+1;){const ae=N.tileID.scaledTo(N.tileID.overscaledZ-1);N=this._tiles[ae.key],N&&N.hasData()&&(V=ae)}let ne=V;for(;ne.overscaledZ>c;)if(ne=ne.scaledTo(ne.overscaledZ-1),l[ne.key]||l[ne.canonical.key]){M[V.key]=V;break}}}findLoadedParent(l,c){if(l.key in this._loadedParentTiles){const _=this._loadedParentTiles[l.key];return _&&_.tileID.overscaledZ>=c?_:null}for(let _=l.overscaledZ-1;_>=c;_--){const M=l.scaledTo(_),R=this._getLoadedTile(M);if(R)return R}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const c=this._tiles[l.key];return c&&c.hasData()?c:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const c=Math.ceil(l.width/this._source.tileSize)+1,_=Math.ceil(l.height/this._source.tileSize)+1,M=Math.floor(c*_*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(R)}handleWrapJump(l){const c=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,c){const _={};for(const M in this._tiles){const R=this._tiles[M];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+c),_[R.tileID.key]=R}this._tiles=_;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}_updateCoveredAndRetainedTiles(l,c,_,M,R,N){const V={},ne={},ae=Object.keys(l),Me=S.now();for(const ke of ae){const De=l[ke],Ve=this._tiles[ke];if(!Ve||Ve.fadeEndTime!==0&&Ve.fadeEndTime<=Me)continue;const Xe=this.findLoadedParent(De,c),mt=this.findLoadedSibling(De),ut=Xe||mt||null;ut&&(this._addTile(ut.tileID),V[ut.tileID.key]=ut.tileID),ne[ke]=De}this._retainLoadedChildren(ne,M,_,l);for(const ke in V)l[ke]||(this._coveredTiles[ke]=!0,l[ke]=V[ke]);if(N){const ke={},De={};for(const Ve of R)this._tiles[Ve.key].hasData()?ke[Ve.key]=Ve:De[Ve.key]=Ve;for(const Ve in De){const Xe=De[Ve].children(this._source.maxzoom);this._tiles[Xe[0].key]&&this._tiles[Xe[1].key]&&this._tiles[Xe[2].key]&&this._tiles[Xe[3].key]&&(ke[Xe[0].key]=l[Xe[0].key]=Xe[0],ke[Xe[1].key]=l[Xe[1].key]=Xe[1],ke[Xe[2].key]=l[Xe[2].key]=Xe[2],ke[Xe[3].key]=l[Xe[3].key]=Xe[3],delete De[Ve])}for(const Ve in De){const Xe=De[Ve],mt=this.findLoadedParent(Xe,this._source.minzoom),ut=this.findLoadedSibling(Xe),gt=mt||ut||null;if(gt){ke[gt.tileID.key]=l[gt.tileID.key]=gt.tileID;for(const bt in ke)ke[bt].isChildOf(gt.tileID)&&delete ke[bt]}}for(const Ve in this._tiles)ke[Ve]||(this._coveredTiles[Ve]=!0)}}update(l,c){if(!this._sourceLoaded||this._paused)return;let _;this.transform=l,this.terrain=c,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(Me=>new o.S(Me.canonical.z,Me.wrap,Me.canonical.z,Me.canonical.x,Me.canonical.y)):(_=Oe(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(_=_.filter(Me=>this._source.hasTile(Me)))):_=[];const M=rr(l,this._source),R=Math.max(M-se.maxOverzooming,this._source.minzoom),N=Math.max(M+se.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Me={};for(const ke of _)if(ke.canonical.z>this._source.minzoom){const De=ke.scaledTo(ke.canonical.z-1);Me[De.key]=De;const Ve=ke.scaledTo(Math.max(this._source.minzoom,Math.min(ke.canonical.z,5)));Me[Ve.key]=Ve}_=_.concat(Object.values(Me))}const V=_.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,V&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const ne=this._updateRetainedTiles(_,M);p(this._source.type)&&this._updateCoveredAndRetainedTiles(ne,R,N,M,_,c);for(const Me in ne)this._tiles[Me].clearFadeHold();const ae=o.ac(this._tiles,ne);for(const Me of ae){const ke=this._tiles[Me];ke.hasSymbolBuckets&&!ke.holdingForFade()?ke.setHoldDuration(this.map._fadeDuration):ke.hasSymbolBuckets&&!ke.symbolFadeFinished()||this._removeTile(Me)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,c){var _;const M={},R={},N=Math.max(c-se.maxOverzooming,this._source.minzoom),V=Math.max(c+se.maxUnderzooming,this._source.minzoom),ne={};for(const ae of l){const Me=this._addTile(ae);M[ae.key]=ae,Me.hasData()||c<this._source.maxzoom&&(ne[ae.key]=ae)}this._retainLoadedChildren(ne,c,V,M);for(const ae of l){let Me=this._tiles[ae.key];if(Me.hasData())continue;if(c+1>this._source.maxzoom){const De=ae.children(this._source.maxzoom)[0],Ve=this.getTile(De);if(Ve&&Ve.hasData()){M[De.key]=De;continue}}else{const De=ae.children(this._source.maxzoom);if(M[De[0].key]&&M[De[1].key]&&M[De[2].key]&&M[De[3].key])continue}let ke=Me.wasRequested();for(let De=ae.overscaledZ-1;De>=N;--De){const Ve=ae.scaledTo(De);if(R[Ve.key])break;if(R[Ve.key]=!0,Me=this.getTile(Ve),!Me&&ke&&(Me=this._addTile(Ve)),Me){const Xe=Me.hasData();if((Xe||!(!((_=this.map)===null||_===void 0)&&_.cancelPendingTileRequestsWhileZooming)||ke)&&(M[Ve.key]=Ve),ke=Me.wasRequested(),Xe)break}}}return M}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const c=[];let _,M=this._tiles[l].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){_=this._loadedParentTiles[M.key];break}c.push(M.key);const R=M.scaledTo(M.overscaledZ-1);if(_=this._getLoadedTile(R),_)break;M=R}for(const R of c)this._loadedParentTiles[R]=_}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const c=this._tiles[l].tileID,_=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=_}}_addTile(l){let c=this._tiles[l.key];if(c)return c;c=this._cache.getAndRemove(l),c&&(this._setTileReloadTimer(l.key,c),c.tileID=l,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,c)));const _=c;return c||(c=new me(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(c,l.key,c.state)),c.uses++,this._tiles[l.key]=c,_||this._source.fire(new o.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(l,c){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const _=c.getExpiryTimeout();_&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},_))}_removeTile(l){const c=this._tiles[l];c&&(c.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(l){const c=l.sourceDataType;l.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&c==="content"&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,c,_){const M=[],R=this.transform;if(!R)return M;const N=_?R.getCameraQueryGeometry(l):l,V=l.map(Xe=>R.screenPointToMercatorCoordinate(Xe,this.terrain)),ne=N.map(Xe=>R.screenPointToMercatorCoordinate(Xe,this.terrain)),ae=this.getIds();let Me=1/0,ke=1/0,De=-1/0,Ve=-1/0;for(const Xe of ne)Me=Math.min(Me,Xe.x),ke=Math.min(ke,Xe.y),De=Math.max(De,Xe.x),Ve=Math.max(Ve,Xe.y);for(let Xe=0;Xe<ae.length;Xe++){const mt=this._tiles[ae[Xe]];if(mt.holdingForFade())continue;const ut=mt.tileID,gt=Math.pow(2,R.zoom-mt.tileID.overscaledZ),bt=c*mt.queryPadding*o.X/mt.tileSize/gt,Ot=[ut.getTilePoint(new o.Y(Me,ke)),ut.getTilePoint(new o.Y(De,Ve))];if(Ot[0].x-bt<o.X&&Ot[0].y-bt<o.X&&Ot[1].x+bt>=0&&Ot[1].y+bt>=0){const Pt=V.map(jt=>ut.getTilePoint(jt)),Kt=ne.map(jt=>ut.getTilePoint(jt));M.push({tile:mt,tileID:ut,queryGeometry:Pt,cameraQueryGeometry:Kt,scale:gt})}}return M}getVisibleCoordinates(l){const c=this.getRenderableIds(l).map(_=>this._tiles[_].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(p(this._source.type)){const l=S.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=l)return!0}return!1}setFeatureState(l,c,_){this._state.updateState(l=l||"_geojsonTileLayer",c,_)}removeFeatureState(l,c,_){this._state.removeFeatureState(l=l||"_geojsonTileLayer",c,_)}getFeatureState(l,c){return this._state.getState(l=l||"_geojsonTileLayer",c)}setDependencies(l,c,_){const M=this._tiles[l];M&&M.setDependencies(c,_)}reloadTilesForDependencies(l,c){for(const _ in this._tiles)this._tiles[_].hasDependency(l,c)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(l,c))}}function _e(T,l){const c=Math.abs(2*T.wrap)-+(T.wrap<0),_=Math.abs(2*l.wrap)-+(l.wrap<0);return T.overscaledZ-l.overscaledZ||_-c||l.canonical.y-T.canonical.y||l.canonical.x-T.canonical.x}function p(T){return T==="raster"||T==="image"||T==="video"}se.maxOverzooming=10,se.maxUnderzooming=3;class Ne{constructor(l,c){this.reset(l,c)}reset(l,c){this.points=l||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.ab(l,0,1);let c=1,_=this._distances[c];const M=l*this.paddedLength+this.padding;for(;_<M&&c<this._distances.length;)_=this._distances[++c];const R=c-1,N=this._distances[R],V=_-N,ne=V>0?(M-N)/V:0;return this.points[R].mult(1-ne).add(this.points[c].mult(ne))}}function $e(T,l){let c=!0;return T==="always"||T!=="never"&&l!=="never"||(c=!1),c}class rt{constructor(l,c,_){const M=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(l/_),this.yCellCount=Math.ceil(c/_);for(let N=0;N<this.xCellCount*this.yCellCount;N++)M.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=c,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,c,_,M,R){this._forEachCell(c,_,M,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(c),this.bboxes.push(_),this.bboxes.push(M),this.bboxes.push(R)}insertCircle(l,c,_,M){this._forEachCell(c-M,_-M,c+M,_+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(c),this.circles.push(_),this.circles.push(M)}_insertBoxCell(l,c,_,M,R,N){this.boxCells[R].push(N)}_insertCircleCell(l,c,_,M,R,N){this.circleCells[R].push(N)}_query(l,c,_,M,R,N,V){if(_<0||l>this.width||M<0||c>this.height)return[];const ne=[];if(l<=0&&c<=0&&this.width<=_&&this.height<=M){if(R)return[{key:null,x1:l,y1:c,x2:_,y2:M}];for(let ae=0;ae<this.boxKeys.length;ae++)ne.push({key:this.boxKeys[ae],x1:this.bboxes[4*ae],y1:this.bboxes[4*ae+1],x2:this.bboxes[4*ae+2],y2:this.bboxes[4*ae+3]});for(let ae=0;ae<this.circleKeys.length;ae++){const Me=this.circles[3*ae],ke=this.circles[3*ae+1],De=this.circles[3*ae+2];ne.push({key:this.circleKeys[ae],x1:Me-De,y1:ke-De,x2:Me+De,y2:ke+De})}}else this._forEachCell(l,c,_,M,this._queryCell,ne,{hitTest:R,overlapMode:N,seenUids:{box:{},circle:{}}},V);return ne}query(l,c,_,M){return this._query(l,c,_,M,!1,null)}hitTest(l,c,_,M,R,N){return this._query(l,c,_,M,!0,R,N).length>0}hitTestCircle(l,c,_,M,R){const N=l-_,V=l+_,ne=c-_,ae=c+_;if(V<0||N>this.width||ae<0||ne>this.height)return!1;const Me=[];return this._forEachCell(N,ne,V,ae,this._queryCellCircle,Me,{hitTest:!0,overlapMode:M,circle:{x:l,y:c,radius:_},seenUids:{box:{},circle:{}}},R),Me.length>0}_queryCell(l,c,_,M,R,N,V,ne){const{seenUids:ae,hitTest:Me,overlapMode:ke}=V,De=this.boxCells[R];if(De!==null){const Xe=this.bboxes;for(const mt of De)if(!ae.box[mt]){ae.box[mt]=!0;const ut=4*mt,gt=this.boxKeys[mt];if(l<=Xe[ut+2]&&c<=Xe[ut+3]&&_>=Xe[ut+0]&&M>=Xe[ut+1]&&(!ne||ne(gt))&&(!Me||!$e(ke,gt.overlapMode))&&(N.push({key:gt,x1:Xe[ut],y1:Xe[ut+1],x2:Xe[ut+2],y2:Xe[ut+3]}),Me))return!0}}const Ve=this.circleCells[R];if(Ve!==null){const Xe=this.circles;for(const mt of Ve)if(!ae.circle[mt]){ae.circle[mt]=!0;const ut=3*mt,gt=this.circleKeys[mt];if(this._circleAndRectCollide(Xe[ut],Xe[ut+1],Xe[ut+2],l,c,_,M)&&(!ne||ne(gt))&&(!Me||!$e(ke,gt.overlapMode))){const bt=Xe[ut],Ot=Xe[ut+1],Pt=Xe[ut+2];if(N.push({key:gt,x1:bt-Pt,y1:Ot-Pt,x2:bt+Pt,y2:Ot+Pt}),Me)return!0}}}return!1}_queryCellCircle(l,c,_,M,R,N,V,ne){const{circle:ae,seenUids:Me,overlapMode:ke}=V,De=this.boxCells[R];if(De!==null){const Xe=this.bboxes;for(const mt of De)if(!Me.box[mt]){Me.box[mt]=!0;const ut=4*mt,gt=this.boxKeys[mt];if(this._circleAndRectCollide(ae.x,ae.y,ae.radius,Xe[ut+0],Xe[ut+1],Xe[ut+2],Xe[ut+3])&&(!ne||ne(gt))&&!$e(ke,gt.overlapMode))return N.push(!0),!0}}const Ve=this.circleCells[R];if(Ve!==null){const Xe=this.circles;for(const mt of Ve)if(!Me.circle[mt]){Me.circle[mt]=!0;const ut=3*mt,gt=this.circleKeys[mt];if(this._circlesCollide(Xe[ut],Xe[ut+1],Xe[ut+2],ae.x,ae.y,ae.radius)&&(!ne||ne(gt))&&!$e(ke,gt.overlapMode))return N.push(!0),!0}}}_forEachCell(l,c,_,M,R,N,V,ne){const ae=this._convertToXCellCoord(l),Me=this._convertToYCellCoord(c),ke=this._convertToXCellCoord(_),De=this._convertToYCellCoord(M);for(let Ve=ae;Ve<=ke;Ve++)for(let Xe=Me;Xe<=De;Xe++)if(R.call(this,l,c,_,M,this.xCellCount*Xe+Ve,N,V,ne))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,c,_,M,R,N){const V=M-l,ne=R-c,ae=_+N;return ae*ae>V*V+ne*ne}_circleAndRectCollide(l,c,_,M,R,N,V){const ne=(N-M)/2,ae=Math.abs(l-(M+ne));if(ae>ne+_)return!1;const Me=(V-R)/2,ke=Math.abs(c-(R+Me));if(ke>Me+_)return!1;if(ae<=ne||ke<=Me)return!0;const De=ae-ne,Ve=ke-Me;return De*De+Ve*Ve<=_*_}}function dt(T,l,c){const _=o.H();if(!T){const{vecSouth:ke,vecEast:De}=Qt(l),Ve=g();Ve[0]=De[0],Ve[1]=De[1],Ve[2]=ke[0],Ve[3]=ke[1],M=Ve,(Me=(N=(R=Ve)[0])*(ae=R[3])-(ne=R[2])*(V=R[1]))&&(M[0]=ae*(Me=1/Me),M[1]=-V*Me,M[2]=-ne*Me,M[3]=N*Me),_[0]=Ve[0],_[1]=Ve[1],_[4]=Ve[2],_[5]=Ve[3]}var M,R,N,V,ne,ae,Me;return o.K(_,_,[1/c,1/c,1]),_}function ct(T,l,c,_){if(T){const M=o.H();if(!l){const{vecSouth:R,vecEast:N}=Qt(c);M[0]=N[0],M[1]=N[1],M[4]=R[0],M[5]=R[1]}return o.K(M,M,[_,_,1]),M}return c.pixelsToClipSpaceMatrix}function Qt(T){const l=Math.cos(T.rollInRadians),c=Math.sin(T.rollInRadians),_=Math.cos(T.pitchInRadians),M=Math.cos(T.bearingInRadians),R=Math.sin(T.bearingInRadians),N=o.ad();N[0]=-M*_*c-R*l,N[1]=-R*_*c+M*l;const V=o.ae(N);V<1e-9?o.af(N):o.ag(N,N,1/V);const ne=o.ad();ne[0]=M*_*l-R*c,ne[1]=R*_*l+M*c;const ae=o.ae(ne);return ae<1e-9?o.af(ne):o.ag(ne,ne,1/ae),{vecEast:ne,vecSouth:N}}function Vt(T,l,c,_){let M;_?(M=[T,l,_(T,l),1],o.al(M,M,c)):(M=[T,l,0,1],vi(M,M,c));const R=M[3];return{point:new o.P(M[0]/R,M[1]/R),signedDistanceFromCamera:R,isOccluded:!1}}function Nt(T,l){return .5+T/l*.5}function wt(T,l){return T.x>=-l[0]&&T.x<=l[0]&&T.y>=-l[1]&&T.y<=l[1]}function Dn(T,l,c,_,M,R,N,V,ne,ae,Me,ke,De){const Ve=c?T.textSizeData:T.iconSizeData,Xe=o.ah(Ve,l.transform.zoom),mt=[256/l.width*2+1,256/l.height*2+1],ut=c?T.text.dynamicLayoutVertexArray:T.icon.dynamicLayoutVertexArray;ut.clear();const gt=T.lineVertexArray,bt=c?T.text.placedSymbolArray:T.icon.placedSymbolArray,Ot=l.transform.width/l.transform.height;let Pt=!1;for(let Kt=0;Kt<bt.length;Kt++){const jt=bt.get(Kt);if(jt.hidden||jt.writingMode===o.ai.vertical&&!Pt){Yi(jt.numGlyphs,ut);continue}Pt=!1;const Rt=new o.P(jt.anchorX,jt.anchorY),nn={getElevation:De,pitchedLabelPlaneMatrix:_,lineVertexArray:gt,pitchWithMap:R,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:Rt,unwrappedTileID:ne,width:ae,height:Me,translation:ke},Xt=Br(jt.anchorX,jt.anchorY,nn);if(!wt(Xt.point,mt)){Yi(jt.numGlyphs,ut);continue}const bn=Nt(l.transform.cameraToCenterDistance,Xt.signedDistanceFromCamera),xn=o.aj(Ve,Xe,jt),Cn=R?xn*l.transform.getPitchedTextCorrection(jt.anchorX,jt.anchorY,ne)/bn:xn*bn,kn=Er({projectionContext:nn,pitchedLabelPlaneMatrixInverse:M,symbol:jt,fontSize:Cn,flip:!1,keepUpright:N,glyphOffsetArray:T.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Ot,rotateToLine:V});Pt=kn.useVertical,(kn.notEnoughRoom||Pt||kn.needsFlipping&&Er({projectionContext:nn,pitchedLabelPlaneMatrixInverse:M,symbol:jt,fontSize:Cn,flip:!0,keepUpright:N,glyphOffsetArray:T.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Ot,rotateToLine:V}).notEnoughRoom)&&Yi(jt.numGlyphs,ut)}c?T.text.dynamicLayoutVertexBuffer.updateData(ut):T.icon.dynamicLayoutVertexBuffer.updateData(ut)}function On(T,l,c,_,M,R,N,V){const ne=R.glyphStartIndex+R.numGlyphs,ae=R.lineStartIndex,Me=R.lineStartIndex+R.lineLength,ke=l.getoffsetX(R.glyphStartIndex),De=l.getoffsetX(ne-1),Ve=ho(T*ke,c,_,M,R.segment,ae,Me,V,N);if(!Ve)return null;const Xe=ho(T*De,c,_,M,R.segment,ae,Me,V,N);return Xe?V.projectionCache.anyProjectionOccluded?null:{first:Ve,last:Xe}:null}function pr(T,l,c,_){return T===o.ai.horizontal&&Math.abs(c.y-l.y)>Math.abs(c.x-l.x)*_?{useVertical:!0}:(T===o.ai.vertical?l.y<c.y:l.x>c.x)?{needsFlipping:!0}:null}function Er(T){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:c,symbol:_,fontSize:M,flip:R,keepUpright:N,glyphOffsetArray:V,dynamicLayoutVertexArray:ne,aspectRatio:ae,rotateToLine:Me}=T,ke=M/24,De=_.lineOffsetX*ke,Ve=_.lineOffsetY*ke;let Xe;if(_.numGlyphs>1){const mt=_.glyphStartIndex+_.numGlyphs,ut=_.lineStartIndex,gt=_.lineStartIndex+_.lineLength,bt=On(ke,V,De,Ve,R,_,Me,l);if(!bt)return{notEnoughRoom:!0};const Ot=Ir(bt.first.point.x,bt.first.point.y,l,c),Pt=Ir(bt.last.point.x,bt.last.point.y,l,c);if(N&&!R){const Kt=pr(_.writingMode,Ot,Pt,ae);if(Kt)return Kt}Xe=[bt.first];for(let Kt=_.glyphStartIndex+1;Kt<mt-1;Kt++)Xe.push(ho(ke*V.getoffsetX(Kt),De,Ve,R,_.segment,ut,gt,l,Me));Xe.push(bt.last)}else{if(N&&!R){const ut=Ln(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,gt=_.lineStartIndex+_.segment+1,bt=new o.P(l.lineVertexArray.getx(gt),l.lineVertexArray.gety(gt)),Ot=Ln(bt.x,bt.y,l),Pt=Ot.signedDistanceFromCamera>0?Ot.point:sn(l.tileAnchorPoint,bt,ut,1,l),Kt=Ir(ut.x,ut.y,l,c),jt=Ir(Pt.x,Pt.y,l,c),Rt=pr(_.writingMode,Kt,jt,ae);if(Rt)return Rt}const mt=ho(ke*V.getoffsetX(_.glyphStartIndex),De,Ve,R,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,l,Me);if(!mt||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Xe=[mt]}for(const mt of Xe)o.ak(ne,mt.point,mt.angle);return{}}function sn(T,l,c,_,M){const R=T.add(T.sub(l)._unit()),N=Ln(R.x,R.y,M).point,V=c.sub(N);return c.add(V._mult(_/V.mag()))}function Wn(T,l,c){const _=l.projectionCache;if(_.projections[T])return _.projections[T];const M=new o.P(l.lineVertexArray.getx(T),l.lineVertexArray.gety(T)),R=Ln(M.x,M.y,l);if(R.signedDistanceFromCamera>0)return _.projections[T]=R.point,_.anyProjectionOccluded=_.anyProjectionOccluded||R.isOccluded,R.point;const N=T-c.direction;return sn(c.distanceFromAnchor===0?l.tileAnchorPoint:new o.P(l.lineVertexArray.getx(N),l.lineVertexArray.gety(N)),M,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,l)}function Ln(T,l,c){const _=T+c.translation[0],M=l+c.translation[1];let R;return c.pitchWithMap?(R=Vt(_,M,c.pitchedLabelPlaneMatrix,c.getElevation),R.isOccluded=!1):(R=c.transform.projectTileCoordinates(_,M,c.unwrappedTileID,c.getElevation),R.point.x=(.5*R.point.x+.5)*c.width,R.point.y=(.5*-R.point.y+.5)*c.height),R}function Ir(T,l,c,_){if(c.pitchWithMap){const M=[T,l,0,1];return o.al(M,M,_),c.transform.projectTileCoordinates(M[0]/M[3],M[1]/M[3],c.unwrappedTileID,c.getElevation).point}return{x:T/c.width*2-1,y:l/c.height*2-1}}function Br(T,l,c){return c.transform.projectTileCoordinates(T,l,c.unwrappedTileID,c.getElevation)}function Kr(T,l,c){return T._unit()._perp()._mult(l*c)}function Ar(T,l,c,_,M,R,N,V,ne){if(V.projectionCache.offsets[T])return V.projectionCache.offsets[T];const ae=c.add(l);if(T+ne.direction<_||T+ne.direction>=M)return V.projectionCache.offsets[T]=ae,ae;const Me=Wn(T+ne.direction,V,ne),ke=Kr(Me.sub(c),N,ne.direction),De=c.add(ke),Ve=Me.add(ke);return V.projectionCache.offsets[T]=o.am(R,ae,De,Ve)||ae,V.projectionCache.offsets[T]}function ho(T,l,c,_,M,R,N,V,ne){const ae=_?T-l:T+l;let Me=ae>0?1:-1,ke=0;_&&(Me*=-1,ke=Math.PI),Me<0&&(ke+=Math.PI);let De,Ve=Me>0?R+M:R+M+1;V.projectionCache.cachedAnchorPoint?De=V.projectionCache.cachedAnchorPoint:(De=Ln(V.tileAnchorPoint.x,V.tileAnchorPoint.y,V).point,V.projectionCache.cachedAnchorPoint=De);let Xe,mt,ut=De,gt=De,bt=0,Ot=0;const Pt=Math.abs(ae),Kt=[];let jt;for(;bt+Ot<=Pt;){if(Ve+=Me,Ve<R||Ve>=N)return null;bt+=Ot,gt=ut,mt=Xe;const Xt={absOffsetX:Pt,direction:Me,distanceFromAnchor:bt,previousVertex:gt};if(ut=Wn(Ve,V,Xt),c===0)Kt.push(gt),jt=ut.sub(gt);else{let bn;const xn=ut.sub(gt);bn=xn.mag()===0?Kr(Wn(Ve+Me,V,Xt).sub(ut),c,Me):Kr(xn,c,Me),mt||(mt=gt.add(bn)),Xe=Ar(Ve,bn,ut,R,N,mt,c,V,Xt),Kt.push(mt),jt=Xe.sub(mt)}Ot=jt.mag()}const Rt=jt._mult((Pt-bt)/Ot)._add(mt||gt),nn=ke+Math.atan2(ut.y-gt.y,ut.x-gt.x);return Kt.push(Rt),{point:Rt,angle:ne?nn:0,path:Kt}}const Ea=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Yi(T,l){for(let c=0;c<T;c++){const _=l.length;l.resize(_+4),l.float32.set(Ea,3*_)}}function vi(T,l,c){const _=l[0],M=l[1];return T[0]=c[0]*_+c[4]*M+c[12],T[1]=c[1]*_+c[5]*M+c[13],T[3]=c[3]*_+c[7]*M+c[15],T}const so=100;class So{constructor(l,c=new rt(l.width+200,l.height+200,25),_=new rt(l.width+200,l.height+200,25)){this.transform=l,this.grid=c,this.ignoredGrid=_,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+so,this.screenBottomBoundary=l.height+so,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,c,_,M,R,N,V,ne,ae,Me,ke,De){const Ve=this.projectAndGetPerspectiveRatio(l.anchorPointX+ne[0],l.anchorPointY+ne[1],R,Me,De),Xe=_*Ve.perspectiveRatio;let mt;if(N||V)mt=this._projectCollisionBox(l,Xe,M,R,N,V,ne,Ve,Me,ke,De);else{const jt=Ve.x+(ke?ke.x*Xe:0),Rt=Ve.y+(ke?ke.y*Xe:0);mt={allPointsOccluded:!1,box:[jt+l.x1*Xe,Rt+l.y1*Xe,jt+l.x2*Xe,Rt+l.y2*Xe]}}const[ut,gt,bt,Ot]=mt.box,Pt=N?mt.allPointsOccluded:Ve.isOccluded;let Kt=Pt;return Kt||(Kt=Ve.perspectiveRatio<this.perspectiveRatioCutoff),Kt||(Kt=!this.isInsideGrid(ut,gt,bt,Ot)),Kt||c!=="always"&&this.grid.hitTest(ut,gt,bt,Ot,c,ae)?{box:[ut,gt,bt,Ot],placeable:!1,offscreen:!1,occluded:Pt}:{box:[ut,gt,bt,Ot],placeable:!0,offscreen:this.isOffscreen(ut,gt,bt,Ot),occluded:Pt}}placeCollisionCircles(l,c,_,M,R,N,V,ne,ae,Me,ke,De,Ve,Xe){const mt=[],ut=new o.P(c.anchorX,c.anchorY),gt=this.getPerspectiveRatio(ut.x,ut.y,N,Xe),bt=(ae?R*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,N)/gt:R*gt)/o.as,Ot={getElevation:Xe,pitchedLabelPlaneMatrix:V,lineVertexArray:_,pitchWithMap:ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ut,unwrappedTileID:N,width:this.transform.width,height:this.transform.height,translation:Ve},Pt=On(bt,M,c.lineOffsetX*bt,c.lineOffsetY*bt,!1,c,!1,Ot);let Kt=!1,jt=!1,Rt=!0;if(Pt){const nn=.5*ke*gt+De,Xt=new o.P(-100,-100),bn=new o.P(this.screenRightBoundary,this.screenBottomBoundary),xn=new Ne,Cn=Pt.first,kn=Pt.last;let Gn=[];for(let Oi=Cn.path.length-1;Oi>=1;Oi--)Gn.push(Cn.path[Oi]);for(let Oi=1;Oi<kn.path.length;Oi++)Gn.push(kn.path[Oi]);const Bn=2.5*nn;if(ae){const Oi=this.projectPathToScreenSpace(Gn,Ot);Gn=Oi.some(Vi=>Vi.signedDistanceFromCamera<=0)?[]:Oi.map(Vi=>Vi.point)}let Pr=[];if(Gn.length>0){const Oi=Gn[0].clone(),Vi=Gn[0].clone();for(let Io=1;Io<Gn.length;Io++)Oi.x=Math.min(Oi.x,Gn[Io].x),Oi.y=Math.min(Oi.y,Gn[Io].y),Vi.x=Math.max(Vi.x,Gn[Io].x),Vi.y=Math.max(Vi.y,Gn[Io].y);Pr=Oi.x>=Xt.x&&Vi.x<=bn.x&&Oi.y>=Xt.y&&Vi.y<=bn.y?[Gn]:Vi.x<Xt.x||Oi.x>bn.x||Vi.y<Xt.y||Oi.y>bn.y?[]:o.ao([Gn],Xt.x,Xt.y,bn.x,bn.y)}for(const Oi of Pr){xn.reset(Oi,.25*nn);let Vi=0;Vi=xn.length<=.5*nn?1:Math.ceil(xn.paddedLength/Bn)+1;for(let Io=0;Io<Vi;Io++){const Ei=Io/Math.max(Vi-1,1),No=xn.lerp(Ei),Wo=No.x+so,wo=No.y+so;mt.push(Wo,wo,nn,0);const vo=Wo-nn,Ta=wo-nn,Go=Wo+nn,hs=wo+nn;if(Rt=Rt&&this.isOffscreen(vo,Ta,Go,hs),jt=jt||this.isInsideGrid(vo,Ta,Go,hs),l!=="always"&&this.grid.hitTestCircle(Wo,wo,nn,l,Me)&&(Kt=!0,!ne))return{circles:[],offscreen:!1,collisionDetected:Kt}}}}return{circles:!ne&&Kt||!jt||gt<this.perspectiveRatioCutoff?[]:mt,offscreen:Rt,collisionDetected:Kt}}projectPathToScreenSpace(l,c){const _=function(M,R){const N=o.H();return o.an(N,R.pitchedLabelPlaneMatrix),M.map(V=>{const ne=Vt(V.x,V.y,N,R.getElevation),ae=R.transform.projectTileCoordinates(ne.point.x,ne.point.y,R.unwrappedTileID,R.getElevation);return ae.point.x=(.5*ae.point.x+.5)*R.width,ae.point.y=(.5*-ae.point.y+.5)*R.height,ae})}(l,c);return function(M){let R=0,N=0,V=0,ne=0;for(let ae=0;ae<M.length;ae++)M[ae].isOccluded?(V=ae+1,ne=0):(ne++,ne>N&&(N=ne,R=V));return M.slice(R,R+N)}(_)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let _=1/0,M=1/0,R=-1/0,N=-1/0;for(const Me of l){const ke=new o.P(Me.x+so,Me.y+so);_=Math.min(_,ke.x),M=Math.min(M,ke.y),R=Math.max(R,ke.x),N=Math.max(N,ke.y),c.push(ke)}const V=this.grid.query(_,M,R,N).concat(this.ignoredGrid.query(_,M,R,N)),ne={},ae={};for(const Me of V){const ke=Me.key;if(ne[ke.bucketInstanceId]===void 0&&(ne[ke.bucketInstanceId]={}),ne[ke.bucketInstanceId][ke.featureIndex])continue;const De=[new o.P(Me.x1,Me.y1),new o.P(Me.x2,Me.y1),new o.P(Me.x2,Me.y2),new o.P(Me.x1,Me.y2)];o.ap(c,De)&&(ne[ke.bucketInstanceId][ke.featureIndex]=!0,ae[ke.bucketInstanceId]===void 0&&(ae[ke.bucketInstanceId]=[]),ae[ke.bucketInstanceId].push(ke.featureIndex))}return ae}insertCollisionBox(l,c,_,M,R,N){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:R,collisionGroupID:N,overlapMode:c},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,c,_,M,R,N){const V=_?this.ignoredGrid:this.grid,ne={bucketInstanceId:M,featureIndex:R,collisionGroupID:N,overlapMode:c};for(let ae=0;ae<l.length;ae+=4)V.insertCircle(ne,l[ae],l[ae+1],l[ae+2])}projectAndGetPerspectiveRatio(l,c,_,M,R){if(R){let N;M?(N=[l,c,M(l,c),1],o.al(N,N,R)):(N=[l,c,0,1],vi(N,N,R));const V=N[3];return{x:(N[0]/V+1)/2*this.transform.width+so,y:(-N[1]/V+1)/2*this.transform.height+so,perspectiveRatio:.5+this.transform.cameraToCenterDistance/V*.5,isOccluded:!1,signedDistanceFromCamera:V}}{const N=this.transform.projectTileCoordinates(l,c,_,M);return{x:(N.point.x+1)/2*this.transform.width+so,y:(1-N.point.y)/2*this.transform.height+so,perspectiveRatio:.5+this.transform.cameraToCenterDistance/N.signedDistanceFromCamera*.5,isOccluded:N.isOccluded,signedDistanceFromCamera:N.signedDistanceFromCamera}}}getPerspectiveRatio(l,c,_,M){const R=this.transform.projectTileCoordinates(l,c,_,M);return .5+this.transform.cameraToCenterDistance/R.signedDistanceFromCamera*.5}isOffscreen(l,c,_,M){return _<so||l>=this.screenRightBoundary||M<so||c>this.screenBottomBoundary}isInsideGrid(l,c,_,M){return _>=0&&l<this.gridRightBoundary&&M>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const l=o.aq([]);return o.J(l,l,[-100,-100,0]),l}_projectCollisionBox(l,c,_,M,R,N,V,ne,ae,Me,ke){let De=1,Ve=0,Xe=0,mt=1;const ut=l.anchorPointX+V[0],gt=l.anchorPointY+V[1];if(N&&!R){const Gn=this.projectAndGetPerspectiveRatio(ut+1,gt,M,ae,ke),Bn=Gn.x-ne.x,Pr=Math.atan((Gn.y-ne.y)/Bn)+(Bn<0?Math.PI:0),Oi=Math.sin(Pr),Vi=Math.cos(Pr);De=Vi,Ve=Oi,Xe=-Oi,mt=Vi}else if(!N&&R){const Gn=Qt(this.transform);De=Gn.vecEast[0],Ve=Gn.vecEast[1],Xe=Gn.vecSouth[0],mt=Gn.vecSouth[1]}let bt=ne.x,Ot=ne.y,Pt=c;R&&(bt=ut,Ot=gt,Pt=Math.pow(2,-(this.transform.zoom-_.overscaledZ)),Pt*=this.transform.getPitchedTextCorrection(ut,gt,M),Me||(Pt*=o.ab(.5+ne.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Me&&(bt+=De*Me.x*Pt+Xe*Me.y*Pt,Ot+=Ve*Me.x*Pt+mt*Me.y*Pt);const Kt=l.x1*Pt,jt=l.x2*Pt,Rt=(Kt+jt)/2,nn=l.y1*Pt,Xt=l.y2*Pt,bn=(nn+Xt)/2,xn=[{offsetX:Kt,offsetY:nn},{offsetX:Rt,offsetY:nn},{offsetX:jt,offsetY:nn},{offsetX:jt,offsetY:bn},{offsetX:jt,offsetY:Xt},{offsetX:Rt,offsetY:Xt},{offsetX:Kt,offsetY:Xt},{offsetX:Kt,offsetY:bn}];let Cn=[];for(const{offsetX:Gn,offsetY:Bn}of xn)Cn.push(new o.P(bt+De*Gn+Xe*Bn,Ot+Ve*Gn+mt*Bn));let kn=!1;if(R){const Gn=Cn.map(Bn=>this.projectAndGetPerspectiveRatio(Bn.x,Bn.y,M,ae,ke));kn=Gn.some(Bn=>!Bn.isOccluded),Cn=Gn.map(Bn=>new o.P(Bn.x,Bn.y))}else kn=!0;return{box:o.ar(Cn),allPointsOccluded:!kn}}}class Pi{constructor(l,c,_,M){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?c:-c))):M&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Ua{constructor(l,c,_,M,R){this.text=new Pi(l?l.text:null,c,_,R),this.icon=new Pi(l?l.icon:null,c,M,R)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ba{constructor(l,c,_){this.text=l,this.icon=c,this.skipFade=_}}class rs{constructor(l,c,_,M,R){this.bucketInstanceId=l,this.featureIndex=c,this.sourceLayerIndex=_,this.bucketIndex=M,this.tileID=R}}class ca{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const c=++this.maxGroupID;this.collisionGroups[l]={ID:c,predicate:_=>_.collisionGroupID===c}}return this.collisionGroups[l]}}function dl(T,l,c,_,M){const{horizontalAlign:R,verticalAlign:N}=o.ay(T);return new o.P(-(R-.5)*l+_[0]*M,-(N-.5)*c+_[1]*M)}class lo{constructor(l,c,_,M,R){this.transform=l.clone(),this.terrain=c,this.collisionIndex=new So(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new ca(M),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const c=this.terrain;return c?(_,M)=>c.getElevation(l,_,M):null}getBucketParts(l,c,_,M){const R=_.getBucket(c),N=_.latestFeatureIndex;if(!R||!N||c.id!==R.layerIds[0])return;const V=_.collisionBoxArray,ne=R.layers[0].layout,ae=R.layers[0].paint,Me=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),ke=_.tileSize/o.X,De=_.tileID.toUnwrapped(),Ve=ne.get("text-rotation-alignment")==="map",Xe=o.at(_,1,this.transform.zoom),mt=o.au(this.collisionIndex.transform,_,ae.get("text-translate"),ae.get("text-translate-anchor")),ut=o.au(this.collisionIndex.transform,_,ae.get("icon-translate"),ae.get("icon-translate-anchor")),gt=dt(Ve,this.transform,Xe);this.retainedQueryData[R.bucketInstanceId]=new rs(R.bucketInstanceId,N,R.sourceLayerIndex,R.index,_.tileID);const bt={bucket:R,layout:ne,translationText:mt,translationIcon:ut,unwrappedTileID:De,pitchedLabelPlaneMatrix:gt,scale:Me,textPixelRatio:ke,holdingForFade:_.holdingForFade(),collisionBoxArray:V,partiallyEvaluatedTextSize:o.ah(R.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(M)for(const Ot of R.sortKeyRanges){const{sortKey:Pt,symbolInstanceStart:Kt,symbolInstanceEnd:jt}=Ot;l.push({sortKey:Pt,symbolInstanceStart:Kt,symbolInstanceEnd:jt,parameters:bt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:bt})}attemptAnchorPlacement(l,c,_,M,R,N,V,ne,ae,Me,ke,De,Ve,Xe,mt,ut,gt,bt,Ot,Pt){const Kt=o.av[l.textAnchor],jt=[l.textOffset0,l.textOffset1],Rt=dl(Kt,_,M,jt,R),nn=this.collisionIndex.placeCollisionBox(c,De,ne,ae,Me,V,N,ut,ke.predicate,Ot,Rt,Pt);if((!bt||this.collisionIndex.placeCollisionBox(bt,De,ne,ae,Me,V,N,gt,ke.predicate,Ot,Rt,Pt).placeable)&&nn.placeable){let Xt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ve.crossTileID]&&this.prevPlacement.placements[Ve.crossTileID]&&this.prevPlacement.placements[Ve.crossTileID].text&&(Xt=this.prevPlacement.variableOffsets[Ve.crossTileID].anchor),Ve.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ve.crossTileID]={textOffset:jt,width:_,height:M,anchor:Kt,textBoxScale:R,prevAnchor:Xt},this.markUsedJustification(Xe,Kt,Ve,mt),Xe.allowVerticalPlacement&&(this.markUsedOrientation(Xe,mt,Ve),this.placedOrientations[Ve.crossTileID]=mt),{shift:Rt,placedGlyphBoxes:nn}}}placeLayerBucketPart(l,c,_){const{bucket:M,layout:R,translationText:N,translationIcon:V,unwrappedTileID:ne,pitchedLabelPlaneMatrix:ae,textPixelRatio:Me,holdingForFade:ke,collisionBoxArray:De,partiallyEvaluatedTextSize:Ve,collisionGroup:Xe}=l.parameters,mt=R.get("text-optional"),ut=R.get("icon-optional"),gt=o.aw(R,"text-overlap","text-allow-overlap"),bt=gt==="always",Ot=o.aw(R,"icon-overlap","icon-allow-overlap"),Pt=Ot==="always",Kt=R.get("text-rotation-alignment")==="map",jt=R.get("text-pitch-alignment")==="map",Rt=R.get("icon-text-fit")!=="none",nn=R.get("symbol-z-order")==="viewport-y",Xt=bt&&(Pt||!M.hasIconData()||ut),bn=Pt&&(bt||!M.hasTextData()||mt);!M.collisionArrays&&De&&M.deserializeCollisionBoxes(De);const xn=this.retainedQueryData[M.bucketInstanceId].tileID,Cn=this._getTerrainElevationFunc(xn),kn=this.transform.getFastPathSimpleProjectionMatrix(xn),Gn=(Bn,Pr,Oi)=>{var Vi,Io;if(c[Bn.crossTileID])return;if(ke)return void(this.placements[Bn.crossTileID]=new Ba(!1,!1,!1));let Ei=!1,No=!1,Wo=!0,wo=null,vo={box:null,placeable:!1,offscreen:null,occluded:!1},Ta={box:null,placeable:!1,offscreen:null},Go=null,hs=null,Ga=null,Zu=0,ml=0,gl=0;Pr.textFeatureIndex?Zu=Pr.textFeatureIndex:Bn.useRuntimeCollisionCircles&&(Zu=Bn.featureIndex),Pr.verticalTextFeatureIndex&&(ml=Pr.verticalTextFeatureIndex);const du=Pr.textBox;if(du){const ea=ws=>{let $s=o.ai.horizontal;if(M.allowVerticalPlacement&&!ws&&this.prevPlacement){const il=this.prevPlacement.placedOrientations[Bn.crossTileID];il&&(this.placedOrientations[Bn.crossTileID]=il,$s=il,this.markUsedOrientation(M,$s,Bn))}return $s},yl=(ws,$s)=>{if(M.allowVerticalPlacement&&Bn.numVerticalGlyphVertices>0&&Pr.verticalTextBox){for(const il of M.writingModes)if(il===o.ai.vertical?(vo=$s(),Ta=vo):vo=ws(),vo&&vo.placeable)break}else vo=ws()},aa=Bn.textAnchorOffsetStartIndex,Dl=Bn.textAnchorOffsetEndIndex;if(Dl===aa){const ws=($s,il)=>{const ol=this.collisionIndex.placeCollisionBox($s,gt,Me,xn,ne,jt,Kt,N,Xe.predicate,Cn,void 0,kn);return ol&&ol.placeable&&(this.markUsedOrientation(M,il,Bn),this.placedOrientations[Bn.crossTileID]=il),ol};yl(()=>ws(du,o.ai.horizontal),()=>{const $s=Pr.verticalTextBox;return M.allowVerticalPlacement&&Bn.numVerticalGlyphVertices>0&&$s?ws($s,o.ai.vertical):{box:null,offscreen:null}}),ea(vo&&vo.placeable)}else{let ws=o.av[(Io=(Vi=this.prevPlacement)===null||Vi===void 0?void 0:Vi.variableOffsets[Bn.crossTileID])===null||Io===void 0?void 0:Io.anchor];const $s=(ol,Od,Th)=>{const Ph=ol.x2-ol.x1,Id=ol.y2-ol.y1,ac=Bn.textBoxScale,Rh=Rt&&Ot==="never"?Od:null;let Pa=null,hu=gt==="never"?1:2,kd="never";ws&&hu++;for(let Bp=0;Bp<hu;Bp++){for(let kc=aa;kc<Dl;kc++){const RA=M.textAnchorOffsets.get(kc);if(ws&&RA.textAnchor!==ws)continue;const Qa=this.attemptAnchorPlacement(RA,ol,Ph,Id,ac,Kt,jt,Me,xn,ne,Xe,kd,Bn,M,Th,N,V,Rh,Cn);if(Qa&&(Pa=Qa.placedGlyphBoxes,Pa&&Pa.placeable))return Ei=!0,wo=Qa.shift,Pa}ws?ws=null:kd=gt}return _&&!Pa&&(Pa={box:this.collisionIndex.placeCollisionBox(du,"always",Me,xn,ne,jt,Kt,N,Xe.predicate,Cn,void 0,kn).box,offscreen:!1,placeable:!1,occluded:!1}),Pa};yl(()=>$s(du,Pr.iconBox,o.ai.horizontal),()=>{const ol=Pr.verticalTextBox;return M.allowVerticalPlacement&&(!vo||!vo.placeable)&&Bn.numVerticalGlyphVertices>0&&ol?$s(ol,Pr.verticalIconBox,o.ai.vertical):{box:null,occluded:!0,offscreen:null}}),vo&&(Ei=vo.placeable,Wo=vo.offscreen);const il=ea(vo&&vo.placeable);if(!Ei&&this.prevPlacement){const ol=this.prevPlacement.variableOffsets[Bn.crossTileID];ol&&(this.variableOffsets[Bn.crossTileID]=ol,this.markUsedJustification(M,ol.anchor,Bn,il))}}}if(Go=vo,Ei=Go&&Go.placeable,Wo=Go&&Go.offscreen,Bn.useRuntimeCollisionCircles){const ea=M.text.placedSymbolArray.get(Bn.centerJustifiedTextSymbolIndex),yl=o.aj(M.textSizeData,Ve,ea),aa=R.get("text-padding");hs=this.collisionIndex.placeCollisionCircles(gt,ea,M.lineVertexArray,M.glyphOffsetArray,yl,ne,ae,_,jt,Xe.predicate,Bn.collisionCircleDiameter,aa,N,Cn),hs.circles.length&&hs.collisionDetected&&!_&&o.w("Collisions detected, but collision boxes are not shown"),Ei=bt||hs.circles.length>0&&!hs.collisionDetected,Wo=Wo&&hs.offscreen}if(Pr.iconFeatureIndex&&(gl=Pr.iconFeatureIndex),Pr.iconBox){const ea=yl=>this.collisionIndex.placeCollisionBox(yl,Ot,Me,xn,ne,jt,Kt,V,Xe.predicate,Cn,Rt&&wo?wo:void 0,kn);Ta&&Ta.placeable&&Pr.verticalIconBox?(Ga=ea(Pr.verticalIconBox),No=Ga.placeable):(Ga=ea(Pr.iconBox),No=Ga.placeable),Wo=Wo&&Ga.offscreen}const TA=mt||Bn.numHorizontalGlyphVertices===0&&Bn.numVerticalGlyphVertices===0,PA=ut||Bn.numIconVertices===0;TA||PA?PA?TA||(No=No&&Ei):Ei=No&&Ei:No=Ei=No&&Ei;const Xu=No&&Ga.placeable;if(Ei&&Go.placeable&&this.collisionIndex.insertCollisionBox(Go.box,gt,R.get("text-ignore-placement"),M.bucketInstanceId,Ta&&Ta.placeable&&ml?ml:Zu,Xe.ID),Xu&&this.collisionIndex.insertCollisionBox(Ga.box,Ot,R.get("icon-ignore-placement"),M.bucketInstanceId,gl,Xe.ID),hs&&Ei&&this.collisionIndex.insertCollisionCircles(hs.circles,gt,R.get("text-ignore-placement"),M.bucketInstanceId,Zu,Xe.ID),_&&this.storeCollisionData(M.bucketInstanceId,Oi,Pr,Go,Ga,hs),Bn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Bn.crossTileID]=new Ba((Ei||Xt)&&!(Go!=null&&Go.occluded),(No||bn)&&!(Ga!=null&&Ga.occluded),Wo||M.justReloaded),c[Bn.crossTileID]=!0};if(nn){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Bn=M.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Pr=Bn.length-1;Pr>=0;--Pr){const Oi=Bn[Pr];Gn(M.symbolInstances.get(Oi),M.collisionArrays[Oi],Oi)}}else for(let Bn=l.symbolInstanceStart;Bn<l.symbolInstanceEnd;Bn++)Gn(M.symbolInstances.get(Bn),M.collisionArrays[Bn],Bn);M.justReloaded=!1}storeCollisionData(l,c,_,M,R,N){if(_.textBox||_.iconBox){let V,ne;this.collisionBoxArrays.has(l)?V=this.collisionBoxArrays.get(l):(V=new Map,this.collisionBoxArrays.set(l,V)),V.has(c)?ne=V.get(c):(ne={text:null,icon:null},V.set(c,ne)),_.textBox&&(ne.text=M.box),_.iconBox&&(ne.icon=R.box)}if(N){let V=this.collisionCircleArrays[l];V===void 0&&(V=this.collisionCircleArrays[l]=[]);for(let ne=0;ne<N.circles.length;ne+=4)V.push(N.circles[ne+0]-so),V.push(N.circles[ne+1]-so),V.push(N.circles[ne+2]),V.push(N.collisionDetected?1:0)}}markUsedJustification(l,c,_,M){let R;R=M===o.ai.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[o.ax(c)];const N=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const V of N)V>=0&&(l.text.placedSymbolArray.get(V).crossTileID=R>=0&&V!==R?0:_.crossTileID)}markUsedOrientation(l,c,_){const M=c===o.ai.horizontal||c===o.ai.horizontalOnly?c:0,R=c===o.ai.vertical?c:0,N=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const V of N)l.text.placedSymbolArray.get(V).placedOrientation=M;_.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=R)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let _=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const M=c?c.symbolFadeChange(l):1,R=c?c.opacities:{},N=c?c.variableOffsets:{},V=c?c.placedOrientations:{};for(const ne in this.placements){const ae=this.placements[ne],Me=R[ne];Me?(this.opacities[ne]=new Ua(Me,M,ae.text,ae.icon),_=_||ae.text!==Me.text.placed||ae.icon!==Me.icon.placed):(this.opacities[ne]=new Ua(null,M,ae.text,ae.icon,ae.skipFade),_=_||ae.text||ae.icon)}for(const ne in R){const ae=R[ne];if(!this.opacities[ne]){const Me=new Ua(ae,M,!1,!1);Me.isHidden()||(this.opacities[ne]=Me,_=_||ae.text.placed||ae.icon.placed)}}for(const ne in N)this.variableOffsets[ne]||!this.opacities[ne]||this.opacities[ne].isHidden()||(this.variableOffsets[ne]=N[ne]);for(const ne in V)this.placedOrientations[ne]||!this.opacities[ne]||this.opacities[ne].isHidden()||(this.placedOrientations[ne]=V[ne]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:l)}updateLayerOpacities(l,c){const _={};for(const M of c){const R=M.getBucket(l);R&&M.latestFeatureIndex&&l.id===R.layerIds[0]&&this.updateBucketOpacities(R,M.tileID,_,M.collisionBoxArray)}}updateBucketOpacities(l,c,_,M){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const R=l.layers[0],N=R.layout,V=new Ua(null,0,!1,!1,!0),ne=N.get("text-allow-overlap"),ae=N.get("icon-allow-overlap"),Me=R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ke=N.get("text-rotation-alignment")==="map",De=N.get("text-pitch-alignment")==="map",Ve=N.get("icon-text-fit")!=="none",Xe=new Ua(null,0,ne&&(ae||!l.hasIconData()||N.get("icon-optional")),ae&&(ne||!l.hasTextData()||N.get("text-optional")),!0);!l.collisionArrays&&M&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(M);const mt=(gt,bt,Ot)=>{for(let Pt=0;Pt<bt/4;Pt++)gt.opacityVertexArray.emplaceBack(Ot);gt.hasVisibleVertices=gt.hasVisibleVertices||Ot!==yn},ut=this.collisionBoxArrays.get(l.bucketInstanceId);for(let gt=0;gt<l.symbolInstances.length;gt++){const bt=l.symbolInstances.get(gt),{numHorizontalGlyphVertices:Ot,numVerticalGlyphVertices:Pt,crossTileID:Kt}=bt;let jt=this.opacities[Kt];_[Kt]?jt=V:jt||(jt=Xe,this.opacities[Kt]=jt),_[Kt]=!0;const Rt=bt.numIconVertices>0,nn=this.placedOrientations[bt.crossTileID],Xt=nn===o.ai.vertical,bn=nn===o.ai.horizontal||nn===o.ai.horizontalOnly;if(Ot>0||Pt>0){const Cn=Mt(jt.text);mt(l.text,Ot,Xt?yn:Cn),mt(l.text,Pt,bn?yn:Cn);const kn=jt.text.isHidden();[bt.rightJustifiedTextSymbolIndex,bt.centerJustifiedTextSymbolIndex,bt.leftJustifiedTextSymbolIndex].forEach(Pr=>{Pr>=0&&(l.text.placedSymbolArray.get(Pr).hidden=kn||Xt?1:0)}),bt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(bt.verticalPlacedTextSymbolIndex).hidden=kn||bn?1:0);const Gn=this.variableOffsets[bt.crossTileID];Gn&&this.markUsedJustification(l,Gn.anchor,bt,nn);const Bn=this.placedOrientations[bt.crossTileID];Bn&&(this.markUsedJustification(l,"left",bt,Bn),this.markUsedOrientation(l,Bn,bt))}if(Rt){const Cn=Mt(jt.icon),kn=!(Ve&&bt.verticalPlacedIconSymbolIndex&&Xt);bt.placedIconSymbolIndex>=0&&(mt(l.icon,bt.numIconVertices,kn?Cn:yn),l.icon.placedSymbolArray.get(bt.placedIconSymbolIndex).hidden=jt.icon.isHidden()),bt.verticalPlacedIconSymbolIndex>=0&&(mt(l.icon,bt.numVerticalIconVertices,kn?yn:Cn),l.icon.placedSymbolArray.get(bt.verticalPlacedIconSymbolIndex).hidden=jt.icon.isHidden())}const xn=ut&&ut.has(gt)?ut.get(gt):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Cn=l.collisionArrays[gt];if(Cn){let kn=new o.P(0,0);if(Cn.textBox||Cn.verticalTextBox){let Gn=!0;if(Me){const Bn=this.variableOffsets[Kt];Bn?(kn=dl(Bn.anchor,Bn.width,Bn.height,Bn.textOffset,Bn.textBoxScale),ke&&kn._rotate(De?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Gn=!1}if(Cn.textBox||Cn.verticalTextBox){let Bn;Cn.textBox&&(Bn=Xt),Cn.verticalTextBox&&(Bn=bn),Ku(l.textCollisionBox.collisionVertexArray,jt.text.placed,!Gn||Bn,xn.text,kn.x,kn.y)}}if(Cn.iconBox||Cn.verticalIconBox){const Gn=!!(!bn&&Cn.verticalIconBox);let Bn;Cn.iconBox&&(Bn=Gn),Cn.verticalIconBox&&(Bn=!Gn),Ku(l.iconCollisionBox.collisionVertexArray,jt.icon.placed,Bn,xn.icon,Ve?kn.x:0,Ve?kn.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,c){const _=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*_>l}setStale(){this.stale=!0}}function Ku(T,l,c,_,M,R){_&&_.length!==0||(_=[0,0,0,0]);const N=_[0]-so,V=_[1]-so,ne=_[2]-so,ae=_[3]-so;T.emplaceBack(l?1:0,c?1:0,M||0,R||0,N,V),T.emplaceBack(l?1:0,c?1:0,M||0,R||0,ne,V),T.emplaceBack(l?1:0,c?1:0,M||0,R||0,ne,ae),T.emplaceBack(l?1:0,c?1:0,M||0,R||0,N,ae)}const iu=Math.pow(2,25),ao=Math.pow(2,24),Fr=Math.pow(2,17),Ja=Math.pow(2,16),Rs=Math.pow(2,9),oa=Math.pow(2,8),Ye=Math.pow(2,1);function Mt(T){if(T.opacity===0&&!T.placed)return 0;if(T.opacity===1&&T.placed)return 4294967295;const l=T.placed?1:0,c=Math.floor(127*T.opacity);return c*iu+l*ao+c*Fr+l*Ja+c*Rs+l*oa+c*Ye+l}const yn=0;class $n{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,c,_,M,R){const N=this._bucketParts;for(;this._currentTileIndex<l.length;)if(c.getBucketParts(N,M,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort((V,ne)=>V.sortKey-ne.sortKey));this._currentPartIndex<N.length;)if(c.placeLayerBucketPart(N[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,R())return!0;return!1}}class dn{constructor(l,c,_,M,R,N,V,ne){this.placement=new lo(l,c,N,V,ne),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(l,c,_){const M=S.now(),R=()=>!this._forceFullPlacement&&S.now()-M>2;for(;this._currentPlacementIndex>=0;){const N=c[l[this._currentPlacementIndex]],V=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=V)&&(!N.maxzoom||N.maxzoom>V)){if(this._inProgressLayer||(this._inProgressLayer=new $n(N)),this._inProgressLayer.continuePlacement(_[N.source],this.placement,this._showCollisionBoxes,N,R))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const ar=512/o.X/2;class Ri{constructor(l,c,_){this.tileID=l,this.bucketInstanceId=_,this._symbolsByKey={};const M=new Map;for(let R=0;R<c.length;R++){const N=c.get(R),V=N.key,ne=M.get(V);ne?ne.push(N):M.set(V,[N])}for(const[R,N]of M){const V={positions:N.map(ne=>({x:Math.floor(ne.anchorX*ar),y:Math.floor(ne.anchorY*ar)})),crossTileIDs:N.map(ne=>ne.crossTileID)};if(V.positions.length>128){const ne=new o.az(V.positions.length,16,Uint16Array);for(const{x:ae,y:Me}of V.positions)ne.add(ae,Me);ne.finish(),delete V.positions,V.index=ne}this._symbolsByKey[R]=V}}getScaledCoordinates(l,c){const{x:_,y:M,z:R}=this.tileID.canonical,{x:N,y:V,z:ne}=c.canonical,ae=ar/Math.pow(2,ne-R),Me=(V*o.X+l.anchorY)*ae,ke=M*o.X*ar;return{x:Math.floor((N*o.X+l.anchorX)*ae-_*o.X*ar),y:Math.floor(Me-ke)}}findMatches(l,c,_){const M=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let R=0;R<l.length;R++){const N=l.get(R);if(N.crossTileID)continue;const V=this._symbolsByKey[N.key];if(!V)continue;const ne=this.getScaledCoordinates(N,c);if(V.index){const ae=V.index.range(ne.x-M,ne.y-M,ne.x+M,ne.y+M).sort();for(const Me of ae){const ke=V.crossTileIDs[Me];if(!_[ke]){_[ke]=!0,N.crossTileID=ke;break}}}else if(V.positions)for(let ae=0;ae<V.positions.length;ae++){const Me=V.positions[ae],ke=V.crossTileIDs[ae];if(Math.abs(Me.x-ne.x)<=M&&Math.abs(Me.y-ne.y)<=M&&!_[ke]){_[ke]=!0,N.crossTileID=ke;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class fo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _s{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const c=Math.round((l-this.lng)/360);if(c!==0)for(const _ in this.indexes){const M=this.indexes[_],R={};for(const N in M){const V=M[N];V.tileID=V.tileID.unwrapTo(V.tileID.wrap+c),R[V.tileID.key]=V}this.indexes[_]=R}this.lng=l}addBucket(l,c,_){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let R=0;R<c.symbolInstances.length;R++)c.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const M=this.usedCrossTileIDs[l.overscaledZ];for(const R in this.indexes){const N=this.indexes[R];if(Number(R)>l.overscaledZ)for(const V in N){const ne=N[V];ne.tileID.isChildOf(l)&&ne.findMatches(c.symbolInstances,l,M)}else{const V=N[l.scaledTo(Number(R)).key];V&&V.findMatches(c.symbolInstances,l,M)}}for(let R=0;R<c.symbolInstances.length;R++){const N=c.symbolInstances.get(R);N.crossTileID||(N.crossTileID=_.generate(),M[N.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Ri(l,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(l,c){for(const _ of c.getCrossTileIDsLists())for(const M of _)delete this.usedCrossTileIDs[l][M]}removeStaleBuckets(l){let c=!1;for(const _ in this.indexes){const M=this.indexes[_];for(const R in M)l[M[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,M[R]),delete M[R],c=!0)}return c}}class Gs{constructor(){this.layerIndexes={},this.crossTileIDs=new fo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,c,_){let M=this.layerIndexes[l.id];M===void 0&&(M=this.layerIndexes[l.id]=new _s);let R=!1;const N={};M.handleWrapJump(_);for(const V of c){const ne=V.getBucket(l);ne&&l.id===ne.layerIds[0]&&(ne.bucketInstanceId||(ne.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(V.tileID,ne,this.crossTileIDs)&&(R=!0),N[ne.bucketInstanceId]=!0)}return M.removeStaleBuckets(N)&&(R=!0),R}pruneUnusedLayers(l){const c={};l.forEach(_=>{c[_]=!0});for(const _ in this.layerIndexes)c[_]||delete this.layerIndexes[_]}}var bA="void main() {fragColor=vec4(1.0);}";const ii={prelude:Mi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Mi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Mi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Mi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Mi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Mi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Mi(bA,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Mi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Mi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Mi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Mi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Mi(bA,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Mi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Mi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Mi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Mi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Mi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Mi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Mi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Mi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Mi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Mi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Mi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Mi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Mi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Mi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Mi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Mi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Mi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Mi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Mi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Mi(T,l){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=l.match(/in ([\w]+) ([\w]+)/g),M=T.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=R?R.concat(M):M,V={};return{fragmentSource:T=T.replace(c,(ne,ae,Me,ke,De)=>(V[De]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_${De}
in ${Me} ${ke} ${De};
#else
uniform ${Me} ${ke} u_${De};
#endif
`:`
#ifdef HAS_UNIFORM_u_${De}
    ${Me} ${ke} ${De} = u_${De};
#endif
`)),vertexSource:l=l.replace(c,(ne,ae,Me,ke,De)=>{const Ve=ke==="float"?"vec2":"vec4",Xe=De.match(/color/)?"color":Ve;return V[De]?ae==="define"?`
#ifndef HAS_UNIFORM_u_${De}
uniform lowp float u_${De}_t;
in ${Me} ${Ve} a_${De};
out ${Me} ${ke} ${De};
#else
uniform ${Me} ${ke} u_${De};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${De}
    ${De} = a_${De};
#else
    ${Me} ${ke} ${De} = u_${De};
#endif
`:`
#ifndef HAS_UNIFORM_u_${De}
    ${De} = unpack_mix_${Xe}(a_${De}, u_${De}_t);
#else
    ${Me} ${ke} ${De} = u_${De};
#endif
`:ae==="define"?`
#ifndef HAS_UNIFORM_u_${De}
uniform lowp float u_${De}_t;
in ${Me} ${Ve} a_${De};
#else
uniform ${Me} ${ke} u_${De};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${De}
    ${Me} ${ke} ${De} = a_${De};
#else
    ${Me} ${ke} ${De} = u_${De};
#endif
`:`
#ifndef HAS_UNIFORM_u_${De}
    ${Me} ${ke} ${De} = unpack_mix_${Xe}(a_${De}, u_${De}_t);
#else
    ${Me} ${ke} ${De} = u_${De};
#endif
`}),staticAttributes:_,staticUniforms:N}}class el{constructor(l,c,_){this.vertexBuffer=l,this.indexBuffer=c,this.segments=_}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ci=o.aA([{name:"a_pos",type:"Int16",components:2}]);const da="#define PROJECTION_MERCATOR",aA="mercator";class us{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return aA}get shaderDefine(){return da}get shaderPreludeCode(){return ii.projectionMercator}get vertexShaderPreludeCode(){return ii.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aB.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,c,_,M,R){if(this._cachedMesh)return this._cachedMesh;const N=new o.aC;N.emplaceBack(0,0),N.emplaceBack(o.X,0),N.emplaceBack(0,o.X),N.emplaceBack(o.X,o.X);const V=l.createVertexBuffer(N,ci.members),ne=o.aD.simpleSegment(0,0,4,2),ae=new o.aE;ae.emplaceBack(1,0,2),ae.emplaceBack(1,2,3);const Me=l.createIndexBuffer(ae);return this._cachedMesh=new el(V,Me,ne),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}function Lr(T,l){const c=o.ab(l.lat,-85.051129,o.aF);return new o.P(o.O(l.lng)*T,o.Q(c)*T)}function Bi(T,l){return new o.Y(l.x/T,l.y/T).toLngLat()}function tl(T){return T.cameraToCenterDistance*Math.min(.85*Math.tan(o.aa(90-T.pitch)),Math.tan(o.aa(89.25-T.pitch)))}function Ds(T,l){const c=T.canonical,_=l/o.aG(c.z),M=c.x+Math.pow(2,c.z)*T.wrap,R=o.aq(new Float64Array(16));return o.J(R,R,[M*_,c.y*_,0]),o.K(R,R,[_/o.X,_/o.X,1]),R}function Eo(T,l,c,_,M){const R=o.Y.fromLngLat(T,l),N=M*o.aH(1,T.lat),V=N*Math.cos(o.aa(c)),ne=Math.sqrt(N*N-V*V),ae=ne*Math.sin(o.aa(-_)),Me=ne*Math.cos(o.aa(-_));return new o.Y(R.x+ae,R.y+Me,R.z+V)}class Qs{constructor(l=0,c=0,_=0,M=0){if(isNaN(l)||l<0||isNaN(c)||c<0||isNaN(_)||_<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=c,this.left=_,this.right=M}interpolate(l,c,_){return c.top!=null&&l.top!=null&&(this.top=o.y.number(l.top,c.top,_)),c.bottom!=null&&l.bottom!=null&&(this.bottom=o.y.number(l.bottom,c.bottom,_)),c.left!=null&&l.left!=null&&(this.left=o.y.number(l.left,c.left,_)),c.right!=null&&l.right!=null&&(this.right=o.y.number(l.right,c.right,_)),this}getCenter(l,c){const _=o.ab((this.left+l-this.right)/2,0,l),M=o.ab((this.top+c-this.bottom)/2,0,c);return new o.P(_,M)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Qs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function mu(T,l){if(!T.renderWorldCopies||T.lngRange)return;const c=l.lng-T.center.lng;l.lng+=c>180?-360:c<-180?360:0}function Wl(T){return Math.max(0,Math.floor(T))}class is{constructor(l,c,_,M,R,N){this._callbacks=l,this._tileSize=512,this._renderWorldCopies=N===void 0||!!N,this._minZoom=c||0,this._maxZoom=_||22,this._minPitch=M??0,this._maxPitch=R??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.N(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Wl(this._zoom),this._scale=o.aG(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Qs,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,c,_){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=Wl(this._zoom),this._scale=o.aG(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new Qs(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!_&&l.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const c=o.aI(l,-180,180)*Math.PI/180;var _,M,R,N,V,ne,ae,Me,ke;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=g(),_=this._rotationMatrix,R=-this._bearingInRadians,N=(M=this._rotationMatrix)[0],V=M[1],ne=M[2],ae=M[3],Me=Math.sin(R),ke=Math.cos(R),_[0]=N*ke+ne*Me,_[1]=V*ke+ae*Me,_[2]=N*-Me+ne*ke,_[3]=V*-Me+ae*ke)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const c=o.ab(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const c=l/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aJ(this._fovInRadians)}setFov(l){l=o.ab(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=o.aa(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const c=this.getConstrained(this._center,l).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.aG(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,c){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,c,_){this._unmodified=!1,this._edgeInsets.interpolate(l,c,_),this._constrain(),this._calcMatrices()}resize(l,c,_=!0){this._width=l,this._height=c,_&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new zt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.aF])}getConstrained(l,c){return this._callbacks.getConstrained(l,c)}getCameraQueryGeometry(l,c){if(c.length===1)return[c[0],l];{let _=l.x,M=l.y,R=l.x,N=l.y;for(const V of c)_=Math.min(_,V.x),M=Math.min(M,V.y),R=Math.max(R,V.x),N=Math.max(N,V.y);return[new o.P(_,M),new o.P(R,M),new o.P(R,N),new o.P(_,N),new o.P(_,M)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:c,zoom:_}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(_),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=o.aq(new Float64Array(16));o.K(l,l,[this._width/2,-this._height/2,1]),o.J(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=o.aq(new Float64Array(16)),o.K(l,l,[1,-1,1]),o.J(l,l,[-1,-1,0]),o.K(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,c,_,M){const R=_!==void 0?_:this.bearing,N=M=M!==void 0?M:this.pitch,V=o.Y.fromLngLat(l,c),ne=-Math.cos(o.aa(N)),ae=Math.sin(o.aa(N)),Me=ae*Math.sin(o.aa(R)),ke=-ae*Math.cos(o.aa(R));let De=this.elevation;const Ve=c-De;let Xe;ne*Ve>=0||Math.abs(ne)<.1?(Xe=1e4,De=c+Xe*ne):Xe=-Ve/ne;let mt,ut,gt=o.aK(1,V.y),bt=0;do{if(bt+=1,bt>10)break;ut=Xe/gt,mt=new o.Y(V.x+Me*ut,V.y+ke*ut),gt=1/mt.meterInMercatorCoordinateUnits()}while(Math.abs(Xe-ut*gt)>1e-12);return{center:mt.toLngLat(),elevation:De,zoom:o.a8(this.height/2/Math.tan(this.fovInRadians/2)/ut/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const c=o.aH(1,this.center.lat)*this.worldSize,_=this.cameraToCenterDistance/c,M=o.Y.fromLngLat(this.center,this.elevation),R=Eo(this.center,this.elevation,this.pitch,this.bearing,_);this._elevation=l;const N=this.calculateCenterFromCameraLngLatAlt(R.toLngLat(),o.aK(R.z,M.y),this.bearing,this.pitch);this._elevation=N.elevation,this._center=N.center,this.setZoom(N.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=o.aH(1,this.center.lat)*this.worldSize;return Eo(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const c=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/c,l.canonical.y/c,1/c/o.X,1/c/o.X]}}class Hs{constructor(l,c){this.min=l,this.max=c,this.center=o.aL([],o.aM([],this.min,this.max),.5)}quadrant(l){const c=[l%2==0,l<2],_=o.aN(this.min),M=o.aN(this.max);for(let R=0;R<c.length;R++)_[R]=c[R]?this.min[R]:this.center[R],M[R]=c[R]?this.center[R]:this.max[R];return M[2]=this.max[2],new Hs(_,M)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let c=!0;for(let _=0;_<l.planes.length;_++){const M=this.intersectsPlane(l.planes[_]);if(M===0)return 0;M===1&&(c=!1)}return c?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let c=l[3],_=l[3];for(let M=0;M<3;M++)l[M]>0?(c+=l[M]*this.min[M],_+=l[M]*this.max[M]):(_+=l[M]*this.min[M],c+=l[M]*this.max[M]);return c>=0?2:_<0?0:1}}class po{distanceToTile2d(l,c,_,M){const R=M.distanceX([l,c]),N=M.distanceY([l,c]);return Math.hypot(R,N)}getWrap(l,c,_){return _}getTileAABB(l,c,_,M){var R,N;let V=_,ne=_;if(M.terrain){const Me=new o.S(l.z,c,l.z,l.x,l.y),ke=M.terrain.getMinMaxElevation(Me);V=(R=ke.minElevation)!==null&&R!==void 0?R:_,ne=(N=ke.maxElevation)!==null&&N!==void 0?N:_}const ae=1<<l.z;return new Hs([c+l.x/ae,l.y/ae,V],[c+(l.x+1)/ae,(l.y+1)/ae,ne])}allowVariableZoom(l,c){const _=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,M=o.ab(78.5-_/2,0,60);return!!c.terrain||l.pitch>M||l.padding.top>=.1}allowWorldCopies(){return!0}recalculateCache(){}}class gs{constructor(l,c,_){this.points=l,this.planes=c,this.aabb=_}static fromInvProjectionMatrix(l,c=1,_=0){const M=Math.pow(2,_),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ae=>{const Me=1/(ae=o.al([],ae,l))[3]/c*M;return o.aO(ae,ae,[Me,Me,1/ae[3],Me])}),N=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ae=>{const Me=o.aP([],R[ae[0]],R[ae[1]]),ke=o.aP([],R[ae[2]],R[ae[1]]),De=o.aQ([],o.aR([],Me,ke)),Ve=-o.aS(De,R[ae[1]]);return De.concat(Ve)}),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ne=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ae of R)for(let Me=0;Me<3;Me++)V[Me]=Math.min(V[Me],ae[Me]),ne[Me]=Math.max(ne[Me],ae[Me]);return new gs(R,N,new Hs(V,ne))}}class Ss{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,_){return this._helper.interpolatePadding(l,c,_)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,_=!0){this._helper.resize(l,c,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,c){}constructor(l,c,_,M,R){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new is({calcMatrices:()=>{this._calcMatrices()},getConstrained:(N,V)=>this.getConstrained(N,V)},l,c,_,M,R),this._coveringTilesDetailsProvider=new po}clone(){const l=new Ss;return l.apply(this),l}apply(l,c,_){this._helper.apply(l,c,_)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const c=[new o.aT(0,l)];if(this._helper._renderWorldCopies){const _=this.screenPointToMercatorCoordinate(new o.P(0,0)),M=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),R=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),N=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),V=Math.floor(Math.min(_.x,M.x,R.x,N.x)),ne=Math.floor(Math.max(_.x,M.x,R.x,N.x)),ae=1;for(let Me=V-ae;Me<=ne+ae;Me++)Me!==0&&c.push(new o.aT(Me,l))}return c}getCameraFrustum(){return gs.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const c=this.screenPointToLocation(this.centerPoint,l),_=l?l.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(_)}setLocationAtPoint(l,c){const _=o.aH(this.elevation,this.center.lat),M=this.screenPointToMercatorCoordinateAtZ(c,_),R=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,_),N=o.Y.fromLngLat(l),V=new o.Y(N.x-(M.x-R.x),N.y-(M.y-R.y));this.setCenter(V==null?void 0:V.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,c){return c?this.coordinatePoint(o.Y.fromLngLat(l),c.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.Y.fromLngLat(l))}screenPointToLocation(l,c){var _;return(_=this.screenPointToMercatorCoordinate(l,c))===null||_===void 0?void 0:_.toLngLat()}screenPointToMercatorCoordinate(l,c){if(c){const _=c.pointCoordinate(l);if(_!=null)return _}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,c){const _=c||0,M=[l.x,l.y,0,1],R=[l.x,l.y,1,1];o.al(M,M,this._pixelMatrixInverse),o.al(R,R,this._pixelMatrixInverse);const N=M[3],V=R[3],ne=M[1]/N,ae=R[1]/V,Me=M[2]/N,ke=R[2]/V,De=Me===ke?0:(_-Me)/(ke-Me);return new o.Y(o.y.number(M[0]/N,R[0]/V,De)/this.worldSize,o.y.number(ne,ae,De)/this.worldSize,_)}coordinatePoint(l,c=0,_=this._pixelMatrix){const M=[l.x*this.worldSize,l.y*this.worldSize,c,1];return o.al(M,M,_),new o.P(M[0]/M[3],M[1]/M[3])}getBounds(){const l=Math.max(0,this._helper._height/2-tl(this));return new zt().extend(this.screenPointToLocation(new o.P(0,l))).extend(this.screenPointToLocation(new o.P(this._helper._width,l))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(l,c){return c?c.pointCoordinate(l)!=null:l.y>this.height/2-tl(this)}calculatePosMatrix(l,c=!1,_){var M;const R=(M=l.key)!==null&&M!==void 0?M:o.aU(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),N=c?this._alignedPosMatrixCache:this._posMatrixCache;if(N.has(R)){const ae=N.get(R);return _?ae.f32:ae.f64}const V=Ds(l,this.worldSize);o.L(V,c?this._alignedProjMatrix:this._viewProjMatrix,V);const ne={f64:V,f32:new Float32Array(V)};return N.set(R,ne),_?ne.f32:ne.f64}calculateFogMatrix(l){const c=l.key,_=this._fogMatrixCacheF32;if(_.has(c))return _.get(c);const M=Ds(l,this.worldSize);return o.L(M,this._fogMatrix,M),_.set(c,new Float32Array(M)),_.get(c)}getConstrained(l,c){c=o.ab(+c,this.minZoom,this.maxZoom);const _={center:new o.N(l.lng,l.lat),zoom:c};let M=this._helper._lngRange;this._helper._renderWorldCopies||M!==null||(M=[-179.9999999999,180-1e-10]);const R=this.tileSize*o.aG(_.zoom);let N=0,V=R,ne=0,ae=R,Me=0,ke=0;const{x:De,y:Ve}=this.size;if(this._helper._latRange){const Ot=this._helper._latRange;N=o.Q(Ot[1])*R,V=o.Q(Ot[0])*R,V-N<Ve&&(Me=Ve/(V-N))}M&&(ne=o.aI(o.O(M[0])*R,0,R),ae=o.aI(o.O(M[1])*R,0,R),ae<ne&&(ae+=R),ae-ne<De&&(ke=De/(ae-ne)));const{x:Xe,y:mt}=Lr(R,l);let ut,gt;const bt=Math.max(ke||0,Me||0);if(bt){const Ot=new o.P(ke?(ae+ne)/2:Xe,Me?(V+N)/2:mt);return _.center=Bi(R,Ot).wrap(),_.zoom+=o.a8(bt),_}if(this._helper._latRange){const Ot=Ve/2;mt-Ot<N&&(gt=N+Ot),mt+Ot>V&&(gt=V-Ot)}if(M){const Ot=(ne+ae)/2;let Pt=Xe;this._helper._renderWorldCopies&&(Pt=o.aI(Xe,Ot-R/2,Ot+R/2));const Kt=De/2;Pt-Kt<ne&&(ut=ne+Kt),Pt+Kt>ae&&(ut=ae-Kt)}if(ut!==void 0||gt!==void 0){const Ot=new o.P(ut??Xe,gt??mt);_.center=Bi(R,Ot).wrap()}return _}calculateCenterFromCameraLngLatAlt(l,c,_,M){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,_,M)}_calculateNearFarZIfNeeded(l,c,_){if(!this._helper.autoCalculateNearFarZ)return;const M=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),R=l-M*this._helper._pixelPerMeter/Math.cos(c),N=M<0?R:l,V=Math.PI/2+this.pitchInRadians,ne=o.aa(this.fov)*(Math.abs(Math.cos(o.aa(this.roll)))*this.height+Math.abs(Math.sin(o.aa(this.roll)))*this.width)/this.height*(.5+_.y/this.height),ae=Math.sin(ne)*N/Math.sin(o.ab(Math.PI-V-ne,.01,Math.PI-.01)),Me=tl(this),ke=Math.atan(Me/this._helper.cameraToCenterDistance),De=o.aa(.75),Ve=ke>De?2*ke*(.5+_.y/(2*Me)):De,Xe=Math.sin(Ve)*N/Math.sin(o.ab(Math.PI-V-Ve,.01,Math.PI-.01)),mt=Math.min(ae,Xe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*mt+N),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,c=Lr(this.worldSize,this.center),_=c.x,M=c.y;this._helper._pixelPerMeter=o.aH(1,this.center.lat)*this.worldSize;const R=o.aa(Math.min(this.pitch,89.25)),N=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(R));let V;this._calculateNearFarZIfNeeded(N,R,l),V=new Float64Array(16),o.aV(V,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,V),V[8]=2*-l.x/this._helper._width,V[9]=2*l.y/this._helper._height,this._projectionMatrix=o.aW(V),o.K(V,V,[1,-1,1]),o.J(V,V,[0,0,-this._helper.cameraToCenterDistance]),o.aX(V,V,-this.rollInRadians),o.aY(V,V,this.pitchInRadians),o.aX(V,V,-this.bearingInRadians),o.J(V,V,[-_,-M,0]),this._mercatorMatrix=o.K([],V,[this.worldSize,this.worldSize,this.worldSize]),o.K(V,V,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,V),o.J(V,V,[0,0,-this.elevation]),this._viewProjMatrix=V,this._invViewProjMatrix=o.an([],V);const ne=[0,0,-1,1];o.al(ne,ne,this._invViewProjMatrix),this._cameraPosition=[ne[0]/ne[3],ne[1]/ne[3],ne[2]/ne[3]],this._fogMatrix=new Float64Array(16),o.aV(this._fogMatrix,this.fovInRadians,this.width/this.height,N,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,o.K(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.J(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.aX(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.aY(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.aX(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.J(this._fogMatrix,this._fogMatrix,[-_,-M,0]),o.K(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.J(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,V);const ae=this._helper._width%2/2,Me=this._helper._height%2/2,ke=Math.cos(this.bearingInRadians),De=Math.sin(-this.bearingInRadians),Ve=_-Math.round(_)+ke*ae+De*Me,Xe=M-Math.round(M)+ke*Me+De*ae,mt=new Float64Array(V);if(o.J(mt,mt,[Ve>.5?Ve-1:Ve,Xe>.5?Xe-1:Xe,0]),this._alignedProjMatrix=mt,V=o.an(new Float64Array(16),this._pixelMatrix),!V)throw new Error("failed to invert matrix");this._pixelMatrixInverse=V,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.al(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=o.aH(1,this.center.lat)*this.worldSize;return Eo(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,c){const _=o.Y.fromLngLat(l),M=[_.x*this.worldSize,_.y*this.worldSize,c,1];return o.al(M,M,this._viewProjMatrix),M[2]/M[3]}getProjectionData(l){const{overscaledTileID:c,aligned:_,applyTerrainMatrix:M}=l,R=this._helper.getMercatorTileCoordinates(c),N=c?this.calculatePosMatrix(c,_,!0):null;let V;return V=c&&c.terrainRttPosMatrix32f&&M?c.terrainRttPosMatrix32f:N||o.aZ(),{mainMatrix:V,tileMercatorCoords:R,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:V}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,c,_){return 1}transformLightDirection(l){return o.aN(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,c,_,M){const R=this.calculatePosMatrix(_);let N;M?(N=[l,c,M(l,c),1],o.al(N,N,R)):(N=[l,c,0,1],vi(N,N,R));const V=N[3];return{point:new o.P(N[0]/V,N[1]/V),signedDistanceFromCamera:V,isOccluded:!1}}populateCache(l){for(const c of l)this.calculatePosMatrix(c)}getMatrixForModel(l,c){const _=o.Y.fromLngLat(l,c),M=_.meterInMercatorCoordinateUnits(),R=o.a_();return o.J(R,R,[_.x,_.y,_.z]),o.aX(R,R,Math.PI),o.aY(R,R,Math.PI/2),o.K(R,R,[-M,M,M]),R}getProjectionDataForCustomLayer(l=!0){const c=new o.S(0,0,0,0,0),_=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:l}),M=Ds(c,this.worldSize);o.L(M,this._viewProjMatrix,M),_.tileMercatorCoords=[0,0,1,1];const R=[o.X,o.X,this.worldSize/this._helper.pixelsPerMeter],N=o.a$();return o.K(N,M,R),_.fallbackMatrix=N,_.mainMatrix=N,_}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function nl(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ks(T){if(T.useSlerp)if(T.k<1){const l=o.b0(T.startEulerAngles.roll,T.startEulerAngles.pitch,T.startEulerAngles.bearing),c=o.b0(T.endEulerAngles.roll,T.endEulerAngles.pitch,T.endEulerAngles.bearing),_=new Float64Array(4);o.b1(_,l,c,T.k);const M=o.b2(_);T.tr.setRoll(M.roll),T.tr.setPitch(M.pitch),T.tr.setBearing(M.bearing)}else T.tr.setRoll(T.endEulerAngles.roll),T.tr.setPitch(T.endEulerAngles.pitch),T.tr.setBearing(T.endEulerAngles.bearing);else T.tr.setRoll(o.y.number(T.startEulerAngles.roll,T.endEulerAngles.roll,T.k)),T.tr.setPitch(o.y.number(T.startEulerAngles.pitch,T.endEulerAngles.pitch,T.k)),T.tr.setBearing(o.y.number(T.startEulerAngles.bearing,T.endEulerAngles.bearing,T.k))}function Ol(T,l,c,_,M){const R=M.padding,N=Lr(M.worldSize,c.getNorthWest()),V=Lr(M.worldSize,c.getNorthEast()),ne=Lr(M.worldSize,c.getSouthEast()),ae=Lr(M.worldSize,c.getSouthWest()),Me=o.aa(-_),ke=N.rotate(Me),De=V.rotate(Me),Ve=ne.rotate(Me),Xe=ae.rotate(Me),mt=new o.P(Math.max(ke.x,De.x,Xe.x,Ve.x),Math.max(ke.y,De.y,Xe.y,Ve.y)),ut=new o.P(Math.min(ke.x,De.x,Xe.x,Ve.x),Math.min(ke.y,De.y,Xe.y,Ve.y)),gt=mt.sub(ut),bt=(M.width-(R.left+R.right+l.left+l.right))/gt.x,Ot=(M.height-(R.top+R.bottom+l.top+l.bottom))/gt.y;if(Ot<0||bt<0)return void nl();const Pt=Math.min(o.a8(M.scale*Math.min(bt,Ot)),T.maxZoom),Kt=o.P.convert(T.offset),jt=new o.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(o.aa(_)),Rt=Kt.add(jt).mult(M.scale/o.aG(Pt));return{center:Bi(M.worldSize,N.add(ne).div(2).sub(Rt)),zoom:Pt,bearing:_}}class lA{get useGlobeControls(){return!1}handlePanInertia(l,c){return{easingOffset:l,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(l,c){l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta),l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta)}handleMapControlsPan(l,c,_){l.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(_,l.around)}cameraForBoxAndBearing(l,c,_,M,R){return Ol(l,c,_,M,R)}handleJumpToCenterZoom(l,c){l.zoom!==(c.zoom!==void 0?+c.zoom:l.zoom)&&l.setZoom(+c.zoom),c.center!==void 0&&l.setCenter(o.N.convert(c.center))}handleEaseTo(l,c){const _=l.zoom,M=l.padding,R={roll:l.roll,pitch:l.pitch,bearing:l.bearing},N={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},V=c.zoom!==void 0,ne=!l.isPaddingEqual(c.padding);let ae=!1;const Me=V?+c.zoom:l.zoom;let ke=l.centerPoint.add(c.offsetAsPoint);const De=l.screenPointToLocation(ke),{center:Ve,zoom:Xe}=l.getConstrained(o.N.convert(c.center||De),Me??_);mu(l,Ve);const mt=Lr(l.worldSize,De),ut=Lr(l.worldSize,Ve).sub(mt),gt=o.aG(Xe-_);return ae=Xe!==_,{easeFunc:bt=>{if(ae&&l.setZoom(o.y.number(_,Xe,bt)),o.b3(R,N)||Ks({startEulerAngles:R,endEulerAngles:N,tr:l,k:bt,useSlerp:R.roll!=N.roll}),ne&&(l.interpolatePadding(M,c.padding,bt),ke=l.centerPoint.add(c.offsetAsPoint)),c.around)l.setLocationAtPoint(c.around,c.aroundPoint);else{const Ot=o.aG(l.zoom-_),Pt=Xe>_?Math.min(2,gt):Math.max(.5,gt),Kt=Math.pow(Pt,1-bt),jt=Bi(l.worldSize,mt.add(ut.mult(bt*Kt)).mult(Ot));l.setLocationAtPoint(l.renderWorldCopies?jt.wrap():jt,ke)}},isZooming:ae,elevationCenter:Ve}}handleFlyTo(l,c){const _=c.zoom!==void 0,M=l.zoom,R=l.getConstrained(o.N.convert(c.center||c.locationAtOffset),_?+c.zoom:M),N=R.center,V=R.zoom;mu(l,N);const ne=Lr(l.worldSize,c.locationAtOffset),ae=Lr(l.worldSize,N).sub(ne),Me=ae.mag(),ke=o.aG(V-M);let De;if(c.minZoom!==void 0){const Ve=Math.min(+c.minZoom,M,V),Xe=l.getConstrained(N,Ve).zoom;De=o.aG(Xe-M)}return{easeFunc:(Ve,Xe,mt,ut)=>{l.setZoom(Ve===1?V:M+o.a8(Xe));const gt=Ve===1?N:Bi(l.worldSize,ne.add(ae.mult(mt)).mult(Xe));l.setLocationAtPoint(l.renderWorldCopies?gt.wrap():gt,ut)},scaleOfZoom:ke,targetCenter:N,scaleOfMinZoom:De,pixelPathLength:Me}}}class Hi{constructor(l,c,_){this.blendFunction=l,this.blendColor=c,this.mask=_}}Hi.Replace=[1,0],Hi.disabled=new Hi(Hi.Replace,o.b4.transparent,[!1,!1,!1,!1]),Hi.unblended=new Hi(Hi.Replace,o.b4.transparent,[!0,!0,!0,!0]),Hi.alphaBlended=new Hi([1,771],o.b4.transparent,[!0,!0,!0,!0]);const ou=2305;class zi{constructor(l,c,_){this.enable=l,this.mode=c,this.frontFace=_}}zi.disabled=new zi(!1,1029,ou),zi.backCCW=new zi(!0,1029,ou),zi.frontCCW=new zi(!0,1028,ou);class ei{constructor(l,c,_){this.func=l,this.mask=c,this.range=_}}ei.ReadOnly=!1,ei.ReadWrite=!0,ei.disabled=new ei(519,ei.ReadOnly,[0,1]);const su=7680;class Wi{constructor(l,c,_,M,R,N){this.test=l,this.ref=c,this.mask=_,this.fail=M,this.depthFail=R,this.pass=N}}Wi.disabled=new Wi({func:519,mask:0},0,0,su,su,su);const uo=new WeakMap;function Di(T){var l;if(uo.has(T))return uo.get(T);{const c=(l=T.getParameter(T.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return uo.set(T,c),c}}class ee{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const c=l.context,_=c.gl;this._texFormat=_.RGBA,this._texType=_.UNSIGNED_BYTE;const M=new o.aC;M.emplaceBack(-1,-1),M.emplaceBack(2,-1),M.emplaceBack(-1,2);const R=new o.aE;R.emplaceBack(0,1,2),this._fullscreenTriangle=new el(c.createVertexBuffer(M,ci.members),c.createIndexBuffer(R),o.aD.simpleSegment(0,0,M.length,R.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(_.TEXTURE1);const N=_.createTexture();_.bindTexture(_.TEXTURE_2D,N),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texImage2D(_.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(N),Di(_)&&(this._pbo=_.createBuffer(),_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.bufferData(_.PIXEL_PACK_BUFFER,4,_.STREAM_READ),_.bindBuffer(_.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,c){const _=this._updateCount;return this._readbackQueue?_>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():_>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,c=l.gl;l.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,c){const _=this._cachedRenderContext.context,M=_.gl;if(this._bindFramebuffer(),_.viewport.set([0,0,this._texWidth,this._texHeight]),_.clear({color:o.b4.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(_,M.TRIANGLES,ei.disabled,Wi.disabled,Hi.unblended,zi.disabled,((R,N)=>({u_input:R,u_output_expected:N}))(l,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Di(M)){M.bindBuffer(M.PIXEL_PACK_BUFFER,this._pbo),M.readBuffer(M.COLOR_ATTACHMENT0),M.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),M.bindBuffer(M.PIXEL_PACK_BUFFER,null);const R=M.fenceSync(M.SYNC_GPU_COMMANDS_COMPLETE,0);M.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:R}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Di(l)){const c=l.clientWaitSync(this._readbackQueue.sync,0,0);if(c===l.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ee._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let c=0;return c+=l[0]/256,c+=l[1]/65536,c+=l[2]/16777216,l[3]<127&&(c=-c),c/128}}const Ie=o.X/128;function at(T,l){const c=T.granularity!==void 0?Math.max(T.granularity,1):1,_=c+(T.generateBorders?2:0),M=c+(T.extendToNorthPole||T.generateBorders?1:0)+(T.extendToSouthPole||T.generateBorders?1:0),R=_+1,N=M+1,V=T.generateBorders?-1:0,ne=T.generateBorders||T.extendToNorthPole?-1:0,ae=c+(T.generateBorders?1:0),Me=c+(T.generateBorders||T.extendToSouthPole?1:0),ke=R*N,De=_*M*6,Ve=R*N>65536;if(Ve&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Xe=Ve||l==="32bit",mt=new Int16Array(2*ke);let ut=0;for(let Ot=ne;Ot<=Me;Ot++)for(let Pt=V;Pt<=ae;Pt++){let Kt=Pt/c*o.X;Pt===-1&&(Kt=-64),Pt===c+1&&(Kt=o.X+Ie);let jt=Ot/c*o.X;Ot===-1&&(jt=T.extendToNorthPole?o.b6:-64),Ot===c+1&&(jt=T.extendToSouthPole?o.b7:o.X+Ie),mt[ut++]=Kt,mt[ut++]=jt}const gt=Xe?new Uint32Array(De):new Uint16Array(De);let bt=0;for(let Ot=0;Ot<M;Ot++)for(let Pt=0;Pt<_;Pt++){const Kt=Pt+1+Ot*R,jt=Pt+(Ot+1)*R,Rt=Pt+1+(Ot+1)*R;gt[bt++]=Pt+Ot*R,gt[bt++]=jt,gt[bt++]=Kt,gt[bt++]=Kt,gt[bt++]=jt,gt[bt++]=Rt}return{vertices:mt.buffer.slice(0),indices:gt.buffer.slice(0),uses32bitIndices:Xe}}const Ht=new o.aB({fill:new o.b8(128,2),line:new o.b8(512,0),tile:new o.b8(128,32),stencil:new o.b8(128,1),circle:3});class kr{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ii.projectionGlobe}get vertexShaderPreludeCode(){return ii.projectionMercator.vertexSource}get subdivisionGranularity(){return Ht}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new ee(l));const c=o.Q(this._errorQueryLatitudeDegrees),_=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,M=this._errorMeasurement.updateErrorLoop(c,_),R=S.now();M!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=M,this._errorMeasurementLastChangeTime=R);const N=Math.min(Math.max((R-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.b9(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.ba(N))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,c,_,M,R){const N=(R==="stencil"?Ht.stencil:Ht.tile).getGranularityForZoomLevel(c.z);return this._getMesh(l,{granularity:N,generateBorders:_,extendToNorthPole:c.y===0&&M,extendToSouthPole:c.y===(1<<c.z)-1&&M})}_getMesh(l,c){const _=this._getMeshKey(c);if(_ in this._tileMeshCache)return this._tileMeshCache[_];const M=function(R,N){const V=at(N,"16bit"),ne=o.aC.deserialize({arrayBuffer:V.vertices,length:V.vertices.byteLength/2/2}),ae=o.aE.deserialize({arrayBuffer:V.indices,length:V.indices.byteLength/2/3});return new el(R.createVertexBuffer(ne,ci.members),R.createIndexBuffer(ae),o.aD.simpleSegment(0,0,ne.length,ae.length))}(l,c);return this._tileMeshCache[_]=M,M}recalculate(l){}hasTransition(){const l=S.now();let c=!1;return c=c||(l-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const Vn=new o.q({type:new o.D(o.v.projection.type)});class ai extends o.E{constructor(l){super(),this._transitionable=new o.T(Vn),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0)),this._mercatorProjection=new us,this._verticalPerspectiveProjection=new kr}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof o.bb){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,c,_,M,R){return this.currentProjection.getMeshFromTileID(l,c,_,M,R)}setProjection(l){this._transitionable.setValue("type",(l==null?void 0:l.type)||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function di(T){const l=Ci(T.worldSize,T.center.lat);return 2*Math.PI*l}function Cr(T,l,c,_,M){const R=1/(1<<M),N=l/o.X*R+_*R,V=o.bd((T/o.X*R+c*R)*Math.PI*2+Math.PI,2*Math.PI),ne=2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI,ae=Math.cos(ne),Me=new Float64Array(3);return Me[0]=Math.sin(V)*ae,Me[1]=Math.sin(ne),Me[2]=Math.cos(V)*ae,Me}function Tr(T){return function(l,c){const _=Math.cos(c),M=new Float64Array(3);return M[0]=Math.sin(l)*_,M[1]=Math.sin(c),M[2]=Math.cos(l)*_,M}(T.lng*Math.PI/180,T.lat*Math.PI/180)}function Ci(T,l){return T/(2*Math.PI)/Math.cos(l*Math.PI/180)}function Bo(T){const l=Math.asin(T[1])/Math.PI*180,c=Math.sqrt(T[0]*T[0]+T[2]*T[2]);if(c>1e-6){const _=T[0]/c,M=Math.acos(T[2]/c),R=(_>0?M:-M)/Math.PI*180;return new o.N(o.aI(R,-180,180),l)}return new o.N(0,l)}function Ti(T){return Math.cos(T*Math.PI/180)}function Yr(T,l){const c=Ti(T),_=Ti(l);return o.a8(_/c)}function Zi(T,l){const c=T.rotate(l.bearingInRadians),_=l.zoom+Yr(l.center.lat,0),M=o.b9(1/Ti(l.center.lat),1/Ti(Math.min(Math.abs(l.center.lat),60)),o.bc(_,7,3,0,1)),R=360/di({worldSize:l.worldSize,center:{lat:l.center.lat}});return new o.N(l.center.lng-c.x*R*M,o.ab(l.center.lat+c.y*R,-85.051129,o.aF))}function Xi(T){const l=.5*T,c=Math.sin(l),_=Math.cos(l);return Math.log(c+_)-Math.log(_-c)}function As(T,l,c,_){const M=T.lat+c*_;if(Math.abs(c)>1){const R=(Math.sign(T.lat+c)!==Math.sign(T.lat)?-Math.abs(T.lat):Math.abs(T.lat))*Math.PI/180,N=Math.abs(T.lat+c)*Math.PI/180,V=Xi(R+_*(N-R)),ne=Xi(R),ae=Xi(N);return new o.N(T.lng+l*((V-ne)/(ae-ne)),M)}return new o.N(T.lng+l*_,M)}class va{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=l}recalculateCache(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(l,c,_,M){const R=`${l.z}_${l.x}_${l.y}`,N=this._cache.get(R);if(N)return N;const V=this._cachePrevious.get(R);if(V)return this._cache.set(R,V),V;const ne=this._aabbFactory(l,c,_,M);return this._cache.set(R,ne),this._hadAnyChanges=!0,ne}}function za(T,l,c){const _=T-l;return _<0?-_:Math.max(0,_-c)}function gu(T,l,c,_,M){const R=T-c;let N;return N=R<0?Math.min(-R,1+R-M):R>1?Math.min(Math.max(R-M,0),1-R):0,Math.max(N,za(l,_,M))}class Zs{constructor(){this._aabbCache=new va(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(l,c,_,M){const R=1<<_.z,N=1/R,V=_.x/R,ne=_.y/R;let ae=2;return ae=Math.min(ae,gu(l,c,V,ne,N)),ae=Math.min(ae,gu(l,c,V+.5,-ne-N,N)),ae=Math.min(ae,gu(l,c,V+.5,2-ne-N,N)),ae}getWrap(l,c,_){const M=1<<c.z,R=1/M,N=c.x/M,V=za(l.x,N,R),ne=za(l.x,N-1,R),ae=za(l.x,N+1,R),Me=Math.min(V,ne,ae);return Me===ae?1:Me===ne?-1:0}allowVariableZoom(l,c){return rr(l,c)>4}allowWorldCopies(){return!1}getTileAABB(l,c,_,M){return this._aabbCache.getTileAABB(l,c,_,M)}_computeTileAABB(l,c,_,M){if(l.z<=0)return new Hs([-1,-1,-1],[1,1,1]);if(l.z===1)return new Hs([l.x===0?-1:0,l.y===0?0:-1,-1],[l.x===0?0:1,l.y===0?1:0,1]);{const R=[Cr(0,0,l.x,l.y,l.z),Cr(o.X,0,l.x,l.y,l.z),Cr(o.X,o.X,l.x,l.y,l.z),Cr(0,o.X,l.x,l.y,l.z)],N=[1,1,1],V=[-1,-1,-1];for(const ne of R)for(let ae=0;ae<3;ae++)N[ae]=Math.min(N[ae],ne[ae]),V[ae]=Math.max(V[ae],ne[ae]);if(l.y===0||l.y===(1<<l.z)-1){const ne=[0,l.y===0?1:-1,0];for(let ae=0;ae<3;ae++)N[ae]=Math.min(N[ae],ne[ae]),V[ae]=Math.max(V[ae],ne[ae])}return new Hs(N,V)}}}class mc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,_){return this._helper.interpolatePadding(l,c,_)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c){this._helper.resize(l,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(){this._cachedClippingPlane=o.be(),this._projectionMatrix=o.a_(),this._globeViewProjMatrix32f=o.aZ(),this._globeViewProjMatrixNoCorrection=o.a_(),this._globeViewProjMatrixNoCorrectionInverted=o.a_(),this._globeProjMatrixInverted=o.a_(),this._cameraPosition=o.bf(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new is({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._coveringTilesDetailsProvider=new Zs}clone(){const l=new mc;return l.apply(this),l}apply(l,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=o.bf();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:c,applyGlobeMatrix:_}=l,M=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:M,clippingPlane:this._cachedClippingPlane,projectionTransition:_?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const c=this.pitchInRadians,_=this.cameraToCenterDistance/l,M=Math.sin(c)*_,R=Math.cos(c)*_+1,N=1/Math.sqrt(M*M+R*R)*1;let V=-M,ne=R;const ae=Math.sqrt(V*V+ne*ne);V/=ae,ne/=ae;const Me=[0,V,ne];return o.bg(Me,Me,[0,0,0],-this.bearingInRadians),o.bh(Me,Me,[0,0,0],-1*this.center.lat*Math.PI/180),o.bi(Me,Me,[0,0,0],this.center.lng*Math.PI/180),o.aL(Me,Me,.25),[...Me,.25*-N]}isLocationOccluded(l){return!this.isSurfacePointVisible(Tr(l))}transformLightDirection(l){const c=this._helper._center.lng*Math.PI/180,_=this._helper._center.lat*Math.PI/180,M=Math.cos(_),R=[Math.sin(c)*M,Math.sin(_),Math.cos(c)*M],N=[R[2],0,-R[0]],V=[0,0,0];o.aR(V,N,R),o.aQ(N,N),o.aQ(V,V);const ne=[0,0,0];return o.aQ(ne,[N[0]*l[0]+V[0]*l[1]+R[0]*l[2],N[1]*l[0]+V[1]*l[1]+R[1]*l[2],N[2]*l[0]+V[2]*l[1]+R[2]*l[2]]),ne}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,c,_){const M=function(V,ne,ae){const Me=1/(1<<ae.z);return new o.Y(V/o.X*Me+ae.x*Me,ne/o.X*Me+ae.y*Me)}(l,c,_.canonical),R=(N=M.y,[o.bd(M.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI]);var N;return this.getCircleRadiusCorrection()/Math.cos(R[1])}projectTileCoordinates(l,c,_,M){const R=_.canonical,N=Cr(l,c,R.x,R.y,R.z),V=1+(M?M(l,c):0)/o.bo,ne=[N[0]*V,N[1]*V,N[2]*V,1];o.al(ne,ne,this._globeViewProjMatrixNoCorrection);const ae=this._cachedClippingPlane,Me=ae[0]*N[0]+ae[1]*N[1]+ae[2]*N[2]+ae[3]<0;return{point:new o.P(ne[0]/ne[3],ne[1]/ne[3]),signedDistanceFromCamera:ne[3],isOccluded:Me}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=Ci(this.worldSize,this.center.lat),c=o.a$(),_=o.a$();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),o.aV(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const M=this.centerOffset;c[8]=2*-M.x/this._helper._width,c[9]=2*M.y/this._helper._height,this._projectionMatrix=o.aW(c),this._globeProjMatrixInverted=o.a$(),o.an(this._globeProjMatrixInverted,c),o.J(c,c,[0,0,-this.cameraToCenterDistance]),o.aX(c,c,this.rollInRadians),o.aY(c,c,-this.pitchInRadians),o.aX(c,c,this.bearingInRadians),o.J(c,c,[0,0,-l]);const R=o.bf();R[0]=l,R[1]=l,R[2]=l,o.aY(_,c,this.center.lat*Math.PI/180),o.bj(_,_,-this.center.lng*Math.PI/180),o.K(_,_,R),this._globeViewProjMatrixNoCorrection=_,o.aY(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bj(c,c,-this.center.lng*Math.PI/180),o.K(c,c,R),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.a$(),o.an(this._globeViewProjMatrixNoCorrectionInverted,_);const N=o.bf();this._cameraPosition=o.bf(),this._cameraPosition[2]=this.cameraToCenterDistance/l,o.bg(this._cameraPosition,this._cameraPosition,N,-this.rollInRadians),o.bh(this._cameraPosition,this._cameraPosition,N,this.pitchInRadians),o.bg(this._cameraPosition,this._cameraPosition,N,-this.bearingInRadians),o.aM(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bh(this._cameraPosition,this._cameraPosition,N,-this.center.lat*Math.PI/180),o.bi(this._cameraPosition,this._cameraPosition,N,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const V=o.aW(this._globeViewProjMatrixNoCorrectionInverted);o.K(V,V,[1,1,-1]),this._cachedFrustum=gs.fromInvProjectionMatrix(V)}calculateFogMatrix(l){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.a$();return o.aq(c),c}getVisibleUnwrappedCoordinates(l){return[new o.aT(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const _=Tr(l);o.aL(_,_,1+c/o.bo);const M=o.be();return o.al(M,[_[0],_[1],_[2],1],this._globeViewProjMatrixNoCorrection),M[2]/M[3]}populateCache(l){}getBounds(){const l=.5*this.width,c=.5*this.height,_=[new o.P(0,0),new o.P(l,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(l,this.height),new o.P(0,this.height),new o.P(0,c)],M=[];for(const ke of _)M.push(this.unprojectScreenPoint(ke));let R=0,N=0,V=0,ne=0;const ae=this.center;for(const ke of M){const De=o.bk(ae.lng,ke.lng),Ve=o.bk(ae.lat,ke.lat);De<N&&(N=De),De>R&&(R=De),Ve<ne&&(ne=Ve),Ve>V&&(V=Ve)}const Me=[ae.lng+N,ae.lat+ne,ae.lng+R,ae.lat+V];return this.isSurfacePointOnScreen([0,1,0])&&(Me[3]=90,Me[0]=-180,Me[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Me[1]=-90,Me[0]=-180,Me[2]=180),new zt(Me)}getConstrained(l,c){const _=o.ab(l.lat,-85.051129,o.aF),M=o.ab(+c,this.minZoom+Yr(0,_),this.maxZoom);return{center:new o.N(l.lng,_),zoom:M}}calculateCenterFromCameraLngLatAlt(l,c,_,M){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,_,M)}setLocationAtPoint(l,c){const _=Tr(this.unprojectScreenPoint(c)),M=Tr(l),R=o.bf();o.bl(R);const N=o.bf();o.bi(N,_,R,-this.center.lng*Math.PI/180),o.bh(N,N,R,this.center.lat*Math.PI/180);const V=M[0]*M[0]+M[2]*M[2],ne=N[0]*N[0];if(V<ne)return;const ae=Math.sqrt(V-ne),Me=-ae,ke=o.bm(M[0],M[2],N[0],ae),De=o.bm(M[0],M[2],N[0],Me),Ve=o.bf();o.bi(Ve,M,R,-ke);const Xe=o.bm(Ve[1],Ve[2],N[1],N[2]),mt=o.bf();o.bi(mt,M,R,-De);const ut=o.bm(mt[1],mt[2],N[1],N[2]),gt=.5*Math.PI,bt=Xe>=-gt&&Xe<=gt,Ot=ut>=-gt&&ut<=gt;let Pt,Kt;if(bt&&Ot){const Xt=this.center.lng*Math.PI/180,bn=this.center.lat*Math.PI/180;o.bp(ke,Xt)+o.bp(Xe,bn)<o.bp(De,Xt)+o.bp(ut,bn)?(Pt=ke,Kt=Xe):(Pt=De,Kt=ut)}else if(bt)Pt=ke,Kt=Xe;else{if(!Ot)return;Pt=De,Kt=ut}const jt=Pt/Math.PI*180,Rt=Kt/Math.PI*180,nn=this.center.lat;this.setCenter(new o.N(jt,o.ab(Rt,-90,90))),this.setZoom(this.zoom+Yr(nn,this.center.lat))}locationToScreenPoint(l,c){const _=Tr(l);if(c){const M=c.getElevationForLngLatZoom(l,this._helper._tileZoom);o.aL(_,_,1+M/o.bo)}return this._projectSurfacePointToScreen(_)}_projectSurfacePointToScreen(l){const c=o.be();return o.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,c){if(c){const _=c.pointCoordinate(l);if(_)return _}return o.Y.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,c){var _;return(_=this.screenPointToMercatorCoordinate(l,c))===null||_===void 0?void 0:_.toLngLat()}isPointOnMapSurface(l,c){const _=this._cameraPosition,M=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(_,M)}getRayDirectionFromPixel(l){const c=o.be();c[0]=l.x/this.width*2-1,c[1]=-1*(l.y/this.height*2-1),c[2]=1,c[3]=1,o.al(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const _=o.bf();_[0]=c[0]-this._cameraPosition[0],_[1]=c[1]-this._cameraPosition[1],_[2]=c[2]-this._cameraPosition[2];const M=o.bf();return o.aQ(M,_),M}isSurfacePointVisible(l){const c=this._cachedClippingPlane;return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const c=o.be();return o.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(l,c){const _=o.aS(l,c),M=o.bf(),R=o.bf();o.aL(R,c,_),o.aP(M,l,R);const N=1-o.aS(M,M);if(N<0)return null;const V=o.aS(l,l)-1,ne=-_+(_<0?1:-1)*Math.sqrt(N),ae=V/ne,Me=ne;return{tMin:Math.min(ae,Me),tMax:Math.max(ae,Me)}}unprojectScreenPoint(l){const c=this._cameraPosition,_=this.getRayDirectionFromPixel(l),M=this.rayPlanetIntersection(c,_);if(M){const ae=o.bf();o.aM(ae,c,[_[0]*M.tMin,_[1]*M.tMin,_[2]*M.tMin]);const Me=o.bf();return o.aQ(Me,ae),Bo(Me)}const R=this._cachedClippingPlane[0]*_[0]+this._cachedClippingPlane[1]*_[1]+this._cachedClippingPlane[2]*_[2],N=-o.bn(this._cachedClippingPlane,c)/R,V=o.bf();if(N>0)o.aM(V,c,[_[0]*N,_[1]*N,_[2]*N]);else{const ae=o.bf();o.aM(ae,c,[2*_[0],2*_[1],2*_[2]]);const Me=o.bn(this._cachedClippingPlane,ae);o.aP(V,ae,[this._cachedClippingPlane[0]*Me,this._cachedClippingPlane[1]*Me,this._cachedClippingPlane[2]*Me])}const ne=o.bf();return o.aQ(ne,V),Bo(ne)}getMatrixForModel(l,c){const _=o.N.convert(l),M=1/o.bo,R=o.a_();return o.bj(R,R,_.lng/180*Math.PI),o.aY(R,R,-_.lat/180*Math.PI),o.J(R,R,[0,0,1+c/o.bo]),o.aY(R,R,.5*Math.PI),o.K(R,R,[M,M,M]),R}getProjectionDataForCustomLayer(l=!0){const c=this.getProjectionData({overscaledTileID:new o.S(0,0,0,0,0),applyGlobeMatrix:l});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(l){}}class Oa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,_){return this._helper.interpolatePadding(l,c,_)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,_=!0){this._helper.resize(l,c,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,c){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new is({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._globeness=1,this._mercatorTransform=new Ss,this._verticalPerspectiveTransform=new mc}clone(){const l=new Oa;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const c=this._mercatorTransform.getProjectionData(l),_=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?_.mainMatrix:c.mainMatrix,clippingPlane:_.clippingPlane,tileMercatorCoords:_.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return o.b9(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.b9(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,c,_){const M=this._mercatorTransform.getPitchedTextCorrection(l,c,_),R=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,c,_);return o.b9(M,R,this._globeness)}projectTileCoordinates(l,c,_,M){return this.currentTransform.projectTileCoordinates(l,c,_,M)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){return this.currentTransform.lngLatToCameraDepth(l,c)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}getConstrained(l,c){return this.currentTransform.getConstrained(l,c)}calculateCenterFromCameraLngLatAlt(l,c,_,M){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,_,M)}setLocationAtPoint(l,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,c){return this.currentTransform.locationToScreenPoint(l,c)}screenPointToMercatorCoordinate(l,c){return this.currentTransform.screenPointToMercatorCoordinate(l,c)}screenPointToLocation(l,c){return this.currentTransform.screenPointToLocation(l,c)}isPointOnMapSurface(l,c){return this.currentTransform.isPointOnMapSurface(l,c)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,c){return this.currentTransform.getMatrixForModel(l,c)}getProjectionDataForCustomLayer(l=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return c;const _=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return _.fallbackMatrix=c.mainMatrix,_}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class hl{get useGlobeControls(){return!0}handlePanInertia(l,c){const _=Zi(l,c);return Math.abs(_.lng-c.center.lng)>180&&(_.lng=c.center.lng+179.5*Math.sign(_.lng-c.center.lng)),{easingCenter:_,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,c){const _=l.around,M=c.screenPointToLocation(_);l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta);const R=c.zoom;l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta);const N=c.zoom-R;if(N===0)return;const V=o.bk(c.center.lng,M.lng),ne=V/(Math.abs(V/180)+1),ae=o.bk(c.center.lat,M.lat),Me=c.getRayDirectionFromPixel(_),ke=c.cameraPosition,De=-1*o.aS(ke,Me),Ve=o.bf();o.aM(Ve,ke,[Me[0]*De,Me[1]*De,Me[2]*De]);const Xe=o.bq(Ve)-1,mt=Math.exp(.5*-Math.max(Xe-.3,0)),ut=Ci(c.worldSize,c.center.lat)/Math.min(c.width,c.height),gt=o.bc(ut,.9,.5,1,.25),bt=(1-o.aG(-N))*Math.min(mt,gt),Ot=c.center.lat,Pt=c.zoom,Kt=new o.N(c.center.lng+ne*bt,o.ab(c.center.lat+ae*bt,-85.051129,o.aF));c.setLocationAtPoint(M,_);const jt=c.center,Rt=o.bc(Math.abs(V),45,85,0,1),nn=o.bc(ut,.75,.35,0,1),Xt=Math.pow(Math.max(Rt,nn),.25),bn=o.bk(jt.lng,Kt.lng),xn=o.bk(jt.lat,Kt.lat);c.setCenter(new o.N(jt.lng+bn*Xt,jt.lat+xn*Xt).wrap()),c.setZoom(Pt+Yr(Ot,c.center.lat))}handleMapControlsPan(l,c,_){if(!l.panDelta)return;const M=c.center.lat,R=c.zoom;c.setCenter(Zi(l.panDelta,c).wrap()),c.setZoom(R+Yr(M,c.center.lat))}cameraForBoxAndBearing(l,c,_,M,R){const N=Ol(l,c,_,M,R),V=c.left/R.width*2-1,ne=(R.width-c.right)/R.width*2-1,ae=c.top/R.height*-2+1,Me=(R.height-c.bottom)/R.height*-2+1,ke=o.bk(_.getWest(),_.getEast())<0,De=ke?_.getEast():_.getWest(),Ve=ke?_.getWest():_.getEast(),Xe=Math.max(_.getNorth(),_.getSouth()),mt=Math.min(_.getNorth(),_.getSouth()),ut=De+.5*o.bk(De,Ve),gt=Xe+.5*o.bk(Xe,mt),bt=R.clone();bt.setCenter(N.center),bt.setBearing(N.bearing),bt.setPitch(0),bt.setRoll(0),bt.setZoom(N.zoom);const Ot=bt.modelViewProjectionMatrix,Pt=[Tr(_.getNorthWest()),Tr(_.getNorthEast()),Tr(_.getSouthWest()),Tr(_.getSouthEast()),Tr(new o.N(Ve,gt)),Tr(new o.N(De,gt)),Tr(new o.N(ut,Xe)),Tr(new o.N(ut,mt))],Kt=Tr(N.center);let jt=Number.POSITIVE_INFINITY;for(const Rt of Pt)V<0&&(jt=hl.getLesserNonNegativeNonNull(jt,hl.solveVectorScale(Rt,Kt,Ot,"x",V))),ne>0&&(jt=hl.getLesserNonNegativeNonNull(jt,hl.solveVectorScale(Rt,Kt,Ot,"x",ne))),ae>0&&(jt=hl.getLesserNonNegativeNonNull(jt,hl.solveVectorScale(Rt,Kt,Ot,"y",ae))),Me<0&&(jt=hl.getLesserNonNegativeNonNull(jt,hl.solveVectorScale(Rt,Kt,Ot,"y",Me)));if(Number.isFinite(jt)&&jt!==0)return N.zoom=bt.zoom+o.a8(jt),N;nl()}handleJumpToCenterZoom(l,c){const _=l.center.lat,M=l.getConstrained(c.center?o.N.convert(c.center):l.center,l.zoom).center;l.setCenter(M.wrap());const R=c.zoom!==void 0?+c.zoom:l.zoom+Yr(_,M.lat);l.zoom!==R&&l.setZoom(R)}handleEaseTo(l,c){const _=l.zoom,M=l.center,R=l.padding,N={roll:l.roll,pitch:l.pitch,bearing:l.bearing},V={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},ne=c.zoom!==void 0,ae=!l.isPaddingEqual(c.padding);let Me=!1;const ke=c.center?o.N.convert(c.center):M,De=l.getConstrained(ke,_).center;mu(l,De);const Ve=l.clone();Ve.setCenter(De),Ve.setZoom(ne?+c.zoom:_+Yr(M.lat,ke.lat)),Ve.setBearing(c.bearing);const Xe=new o.P(o.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),o.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));Ve.setLocationAtPoint(De,Xe);const mt=(c.offset&&c.offsetAsPoint.mag())>0?Ve.center:De,ut=ne?+c.zoom:_+Yr(M.lat,mt.lat),gt=_+Yr(M.lat,0),bt=ut+Yr(mt.lat,0),Ot=o.bk(M.lng,mt.lng),Pt=o.bk(M.lat,mt.lat),Kt=o.aG(bt-gt);return Me=ut!==_,{easeFunc:jt=>{if(o.b3(N,V)||Ks({startEulerAngles:N,endEulerAngles:V,tr:l,k:jt,useSlerp:N.roll!=V.roll}),ae&&l.interpolatePadding(R,c.padding,jt),c.around)o.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(c.around,c.aroundPoint);else{const Rt=bt>gt?Math.min(2,Kt):Math.max(.5,Kt),nn=Math.pow(Rt,1-jt),Xt=As(M,Ot,Pt,jt*nn);l.setCenter(Xt.wrap())}if(Me){const Rt=o.y.number(gt,bt,jt)+Yr(0,l.center.lat);l.setZoom(Rt)}},isZooming:Me,elevationCenter:mt}}handleFlyTo(l,c){const _=c.zoom!==void 0,M=l.center,R=l.zoom,N=!l.isPaddingEqual(c.padding),V=l.getConstrained(o.N.convert(c.center||c.locationAtOffset),R).center,ne=_?+c.zoom:l.zoom+Yr(l.center.lat,V.lat),ae=l.clone();ae.setCenter(V),N&&ae.setPadding(c.padding),ae.setZoom(ne),ae.setBearing(c.bearing);const Me=new o.P(o.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),o.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));ae.setLocationAtPoint(V,Me);const ke=ae.center;mu(l,ke);const De=function(Ot,Pt,Kt){const jt=Tr(Pt),Rt=Tr(Kt),nn=o.aS(jt,Rt),Xt=Math.acos(nn),bn=di(Ot);return Xt/(2*Math.PI)*bn}(l,M,ke),Ve=R+Yr(M.lat,0),Xe=ne+Yr(ke.lat,0),mt=o.aG(Xe-Ve);let ut;if(typeof c.minZoom=="number"){const Ot=+c.minZoom+Yr(ke.lat,0),Pt=Math.min(Ot,Ve,Xe)+Yr(0,ke.lat),Kt=l.getConstrained(ke,Pt).zoom+Yr(ke.lat,0);ut=o.aG(Kt-Ve)}const gt=o.bk(M.lng,ke.lng),bt=o.bk(M.lat,ke.lat);return{easeFunc:(Ot,Pt,Kt,jt)=>{const Rt=As(M,gt,bt,Kt),nn=Ot===1?ke:Rt;l.setCenter(nn.wrap());const Xt=Ve+o.a8(Pt);l.setZoom(Ot===1?ne:Xt+Yr(0,nn.lat))},scaleOfZoom:mt,targetCenter:ke,scaleOfMinZoom:ut,pixelPathLength:De}}static solveVectorScale(l,c,_,M,R){const N=M==="x"?[_[0],_[4],_[8],_[12]]:[_[1],_[5],_[9],_[13]],V=[_[3],_[7],_[11],_[15]],ne=l[0]*N[0]+l[1]*N[1]+l[2]*N[2],ae=l[0]*V[0]+l[1]*V[1]+l[2]*V[2],Me=c[0]*N[0]+c[1]*N[1]+c[2]*N[2],ke=c[0]*V[0]+c[1]*V[1]+c[2]*V[2];return Me+R*ae===ne+R*ke||V[3]*(ne-Me)+N[3]*(ke-ae)+ne*ke==Me*ae?null:(Me+N[3]-R*ke-R*V[3])/(Me-ne-R*ke+R*ae)}static getLesserNonNegativeNonNull(l,c){return c!==null&&c>=0&&c<l?c:l}}class dd{constructor(l){this._globe=l,this._mercatorCameraHelper=new lA,this._verticalPerspectiveCameraHelper=new hl}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,c){return this.currentHelper.handlePanInertia(l,c)}handleMapControlsRollPitchBearingZoom(l,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,c)}handleMapControlsPan(l,c,_){this.currentHelper.handleMapControlsPan(l,c,_)}cameraForBoxAndBearing(l,c,_,M,R){return this.currentHelper.cameraForBoxAndBearing(l,c,_,M,R)}handleJumpToCenterZoom(l,c){this.currentHelper.handleJumpToCenterZoom(l,c)}handleEaseTo(l,c){return this.currentHelper.handleEaseTo(l,c)}handleFlyTo(l,c){return this.currentHelper.handleFlyTo(l,c)}}const Fu=(T,l)=>o.t(T,l&&l.filter(c=>c.identifier!=="source.canvas")),Lu=o.br();class Sh extends o.E{constructor(l,c={}){super(),this._rtlPluginLoaded=()=>{for(const _ in this.sourceCaches){const M=this.sourceCaches[_].getSource().type;M!=="vector"&&M!=="geojson"||this.sourceCaches[_].reload()}},this.map=l,this.dispatcher=new Tt(Dt(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",(_,M)=>this.getGlyphs(_,M)),this.dispatcher.registerMessageHandler("GI",(_,M)=>this.getImages(_,M)),this.imageManager=new he,this.imageManager.setEventedParent(this),this.glyphManager=new Ke(l._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ce(256,512),this.crossTileSymbolIndex=new Gs,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bs,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.bt()),ce().on(Yn,this._rtlPluginLoaded),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const M=this.sourceCaches[_.sourceId];if(!M)return;const R=M.getSource();if(R&&R.vectorLayerIds)for(const N in this._layers){const V=this._layers[N];V.source===R.id&&this._validateLayer(V)}})}loadURL(l,c={},_){this.fire(new o.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const M=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const R=this._loadStyleRequest;o.h(M,this._loadStyleRequest).then(N=>{this._loadStyleRequest=null,this._load(N.data,c,_)}).catch(N=>{this._loadStyleRequest=null,N&&!R.signal.aborted&&this.fire(new o.j(N))})}loadJSON(l,c={},_){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(l,c,_)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Lu,{validate:!1})}_load(l,c,_){var M,R;const N=c.transformStyle?c.transformStyle(_,l):l;if(!c.validate||!Fu(this,o.u(N))){this._loaded=!0,this.stylesheet=N;for(const V in N.sources)this.addSource(V,N.sources[V],{validate:!1});N.sprite?this._loadSprite(N.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(N.glyphs),this._createLayers(),this.light=new Qe(this.stylesheet.light),this._setProjectionInternal(((M=this.stylesheet.projection)===null||M===void 0?void 0:M.type)||"mercator"),this.sky=new We(this.stylesheet.sky),this.map.setTerrain((R=this.stylesheet.terrain)!==null&&R!==void 0?R:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const l=o.bu(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of l){const _=o.bv(c);_.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=_}}_loadSprite(l,c=!1,_=void 0){let M;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(R,N,V,ne){return o._(this,void 0,void 0,function*(){const ae=te(R),Me=V>1?"@2x":"",ke={},De={};for(const{id:Ve,url:Xe}of ae){const mt=N.transformRequest(W(Xe,Me,".json"),"SpriteJSON");ke[Ve]=o.h(mt,ne);const ut=N.transformRequest(W(Xe,Me,".png"),"SpriteImage");De[Ve]=J.getImage(ut,ne)}return yield Promise.all([...Object.values(ke),...Object.values(De)]),function(Ve,Xe){return o._(this,void 0,void 0,function*(){const mt={};for(const ut in Ve){mt[ut]={};const gt=S.getImageCanvasContext((yield Xe[ut]).data),bt=(yield Ve[ut]).data;for(const Ot in bt){const{width:Pt,height:Kt,x:jt,y:Rt,sdf:nn,pixelRatio:Xt,stretchX:bn,stretchY:xn,content:Cn,textFitWidth:kn,textFitHeight:Gn}=bt[Ot];mt[ut][Ot]={data:null,pixelRatio:Xt,sdf:nn,stretchX:bn,stretchY:xn,content:Cn,textFitWidth:kn,textFitHeight:Gn,spriteData:{width:Pt,height:Kt,x:jt,y:Rt,context:gt}}}}return mt})}(ke,De)})}(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(R=>{if(this._spriteRequest=null,R)for(const N in R){this._spritesImagesIds[N]=[];const V=this._spritesImagesIds[N]?this._spritesImagesIds[N].filter(ne=>!(ne in R)):[];for(const ne of V)this.imageManager.removeImage(ne),this._changedImages[ne]=!0;for(const ne in R[N]){const ae=N==="default"?ne:`${N}:${ne}`;this._spritesImagesIds[N].push(ae),ae in this.imageManager.images?this.imageManager.updateImage(ae,R[N][ne],!1):this.imageManager.addImage(ae,R[N][ne]),c&&(this._changedImages[ae]=!0)}}}).catch(R=>{this._spriteRequest=null,M=R,this.fire(new o.j(M))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),_&&_(M)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(l){const c=this.sourceCaches[l.source];if(!c)return;const _=l.sourceLayer;if(!_)return;const M=c.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.j(new Error(`Source layer "${_}" does not exist on source "${M.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,c=!1){const _=this._serializedAllLayers();if(!l||l.length===0)return Object.values(c?o.bw(_):_);const M=[];for(const R of l)if(_[R]){const N=c?o.bw(_[R]):_[R];M.push(N)}return M}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const c=Object.keys(this._layers);for(const _ of c){const M=this._layers[_];M.type!=="custom"&&(l[_]=M.serialize())}return l}hasTransitions(){var l,c,_;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((_=this.projection)===null||_===void 0)&&_.hasTransition())return!0;for(const M in this.sourceCaches)if(this.sourceCaches[M].hasTransition())return!0;for(const M in this._layers)if(this._layers[M].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const c=this._changed;if(c){const M=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(M.length||R.length)&&this._updateWorkerLayers(M,R);for(const N in this._updatedSources){const V=this._updatedSources[N];if(V==="reload")this._reloadSource(N);else{if(V!=="clear")throw new Error(`Invalid action ${V}`);this._clearSource(N)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const N in this._updatedPaintProps)this._layers[N].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const _={};for(const M in this.sourceCaches){const R=this.sourceCaches[M];_[M]=R.used,R.used=!1}for(const M of this._order){const R=this._layers[M];R.recalculate(l,this._availableImages),!R.isHidden(l.zoom)&&R.source&&(this.sourceCaches[R.source].used=!0)}for(const M in _){const R=this.sourceCaches[M];!!_[M]!=!!R.used&&R.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,c&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,c={}){var _;this._checkLoaded();const M=this.serialize();if(l=c.transformStyle?c.transformStyle(M,l):l,((_=c.validate)===null||_===void 0||_)&&Fu(this,o.u(l)))return!1;(l=o.bw(l)).layers=o.bu(l.layers);const R=o.bx(M,l),N=this._getOperationsToPerform(R);if(N.unimplemented.length>0)throw new Error(`Unimplemented: ${N.unimplemented.join(", ")}.`);if(N.operations.length===0)return!1;for(const V of N.operations)V();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const c=[],_=[];for(const M of l)switch(M.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,M.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,M.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,M.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,M.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,M.args));break;case"addSource":c.push(()=>this.addSource.apply(this,M.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,M.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,M.args));break;case"setLight":c.push(()=>this.setLight.apply(this,M.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,M.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,M.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,M.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,M.args));break;case"setSky":c.push(()=>this.setSky.apply(this,M.args));break;case"setProjection":this.setProjection.apply(this,M.args);break;case"setTransition":c.push(()=>{});break;default:_.push(M.command)}return{operations:c,unimplemented:_}}addImage(l,c){if(this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,c),this._afterImageUpdated(l)}updateImage(l,c){this.imageManager.updateImage(l,c)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,c,_={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.u.source,`sources.${l}`,c,null,_))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const M=this.sourceCaches[l]=new se(l,c,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:l})),M.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===l)return this.fire(new o.j(new Error(`Source "${l}" cannot be removed while layer "${_}" is using it.`)));const c=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],c.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,c){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const _=this.sourceCaches[l].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(c),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,c,_={}){this._checkLoaded();const M=l.id;if(this.getLayer(M))return void this.fire(new o.j(new Error(`Layer "${M}" already exists on this map.`)));let R;if(l.type==="custom"){if(Fu(this,o.by(l)))return;R=o.bv(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(M,l.source),l=o.bw(l),l=o.e(l,{source:M})),this._validate(o.u.layer,`layers.${M}`,l,{arrayIndex:-1},_))return;R=o.bv(l),this._validateLayer(R),R.setEventedParent(this,{layer:{id:M}})}const N=c?this._order.indexOf(c):this._order.length;if(c&&N===-1)this.fire(new o.j(new Error(`Cannot add layer "${M}" before non-existing layer "${c}".`)));else{if(this._order.splice(N,0,M),this._layerOrderChanged=!0,this._layers[M]=R,this._removedLayers[M]&&R.source&&R.type!=="custom"){const V=this._removedLayers[M];delete this._removedLayers[M],V.type!==R.type?this._updatedSources[R.source]="clear":(this._updatedSources[R.source]="reload",this.sourceCaches[R.source].pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map)}}moveLayer(l,c){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===c)return;const _=this._order.indexOf(l);this._order.splice(_,1);const M=c?this._order.indexOf(c):this._order.length;c&&M===-1?this.fire(new o.j(new Error(`Cannot move layer "${l}" before non-existing layer "${c}".`))):(this._order.splice(M,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const c=this._layers[l];if(!c)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${l}".`)));c.setEventedParent(null);const _=this._order.indexOf(l);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=c,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],c.onRemove&&c.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,c,_){this._checkLoaded();const M=this.getLayer(l);M?M.minzoom===c&&M.maxzoom===_||(c!=null&&(M.minzoom=c),_!=null&&(M.maxzoom=_),this._updateLayer(M)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,c,_={}){this._checkLoaded();const M=this.getLayer(l);if(M){if(!o.bz(M.filter,c))return c==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(o.u.filter,`layers.${M.id}.filter`,c,null,_)||(M.filter=o.bw(c),this._updateLayer(M)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return o.bw(this.getLayer(l).filter)}setLayoutProperty(l,c,_,M={}){this._checkLoaded();const R=this.getLayer(l);R?o.bz(R.getLayoutProperty(c),_)||(R.setLayoutProperty(c,_,M),this._updateLayer(R)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,c){const _=this.getLayer(l);if(_)return _.getLayoutProperty(c);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,c,_,M={}){this._checkLoaded();const R=this.getLayer(l);R?o.bz(R.getPaintProperty(c),_)||(R.setPaintProperty(c,_,M)&&this._updateLayer(R),this._changed=!0,this._updatedPaintProps[l]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,c){return this.getLayer(l).getPaintProperty(c)}setFeatureState(l,c){this._checkLoaded();const _=l.source,M=l.sourceLayer,R=this.sourceCaches[_];if(R===void 0)return void this.fire(new o.j(new Error(`The source '${_}' does not exist in the map's style.`)));const N=R.getSource().type;N==="geojson"&&M?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):N!=="vector"||M?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),R.setFeatureState(M,l.id,c)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,c){this._checkLoaded();const _=l.source,M=this.sourceCaches[_];if(M===void 0)return void this.fire(new o.j(new Error(`The source '${_}' does not exist in the map's style.`)));const R=M.getSource().type,N=R==="vector"?l.sourceLayer:void 0;R!=="vector"||N?c&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(N,l.id,c):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const c=l.source,_=l.sourceLayer,M=this.sourceCaches[c];if(M!==void 0)return M.getSource().type!=="vector"||_?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),M.getFeatureState(_,l.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=o.bA(this.sourceCaches,R=>R.serialize()),c=this._serializeByIds(this._order,!0),_=this.map.getTerrain()||void 0,M=this.stylesheet;return o.bB({version:M.version,name:M.name,metadata:M.metadata,light:M.light,sky:M.sky,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,projection:M.projection,sources:l,layers:c,terrain:_},R=>R!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const c=N=>this._layers[N].type==="fill-extrusion",_={},M=[];for(let N=this._order.length-1;N>=0;N--){const V=this._order[N];if(c(V)){_[V]=N;for(const ne of l){const ae=ne[V];if(ae)for(const Me of ae)M.push(Me)}}}M.sort((N,V)=>V.intersectionZ-N.intersectionZ);const R=[];for(let N=this._order.length-1;N>=0;N--){const V=this._order[N];if(c(V))for(let ne=M.length-1;ne>=0;ne--){const ae=M[ne].feature;if(_[ae.layer.id]<N)break;R.push(ae),M.pop()}else for(const ne of l){const ae=ne[V];if(ae)for(const Me of ae)R.push(Me.feature)}}return R}queryRenderedFeatures(l,c,_){c&&c.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);const M={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.j(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ae of c.layers){const Me=this._layers[ae];if(!Me)return this.fire(new o.j(new Error(`The layer '${ae}' does not exist in the map's style and cannot be queried for features.`))),[];M[Me.source]=!0}}const R=[];c.availableImages=this._availableImages;const N=this._serializedAllLayers(),V=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,ne=Object.assign(Object.assign({},c),{layers:V});for(const ae in this.sourceCaches)c.layers&&!M[ae]||R.push(Be(this.sourceCaches[ae],this._layers,N,l,ne,_));return this.placement&&R.push(function(ae,Me,ke,De,Ve,Xe,mt){const ut={},gt=Xe.queryRenderedSymbols(De),bt=[];for(const Ot of Object.keys(gt).map(Number))bt.push(mt[Ot]);bt.sort(nt);for(const Ot of bt){const Pt=Ot.featureIndex.lookupSymbolFeatures(gt[Ot.bucketInstanceId],Me,Ot.bucketIndex,Ot.sourceLayerIndex,Ve.filter,Ve.layers,Ve.availableImages,ae);for(const Kt in Pt){const jt=ut[Kt]=ut[Kt]||[],Rt=Pt[Kt];Rt.sort((nn,Xt)=>{const bn=Ot.featureSortOrder;if(bn){const xn=bn.indexOf(nn.featureIndex);return bn.indexOf(Xt.featureIndex)-xn}return Xt.featureIndex-nn.featureIndex});for(const nn of Rt)jt.push(nn)}}return function(Ot,Pt,Kt){for(const jt in Ot)for(const Rt of Ot[jt])Ct(Rt,Kt[Pt[jt].source]);return Ot}(ut,ae,ke)}(this._layers,N,this.sourceCaches,l,ne,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(l,c){c&&c.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",c.filter,null,c);const _=this.sourceCaches[l];return _?function(M,R){const N=M.getRenderableIds().map(ae=>M.getTileByID(ae)),V=[],ne={};for(let ae=0;ae<N.length;ae++){const Me=N[ae],ke=Me.tileID.canonical.key;ne[ke]||(ne[ke]=!0,Me.querySourceFeatures(V,R))}return V}(_,c):[]}getLight(){return this.light.getLight()}setLight(l,c={}){this._checkLoaded();const _=this.light.getLight();let M=!1;for(const N in l)if(!o.bz(l[N],_[N])){M=!0;break}if(!M)return;const R={now:S.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,c),this.light.updateTransitions(R)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,c={}){this._checkLoaded();const _=this.getSky();let M=!1;if(!l&&!_)return;if(l&&!_)M=!0;else if(!l&&_)M=!0;else for(const N in l)if(!o.bz(l[N],_[N])){M=!0;break}if(!M)return;const R={now:S.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,c),this.sky.updateTransitions(R)}_setProjectionInternal(l){const c=function(_){if(Array.isArray(_)){const M=new ai({type:_});return{projection:M,transform:new Oa,cameraHelper:new dd(M)}}switch(_){case"mercator":return{projection:new us,transform:new Ss,cameraHelper:new lA};case"globe":{const M=new ai({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new Oa,cameraHelper:new dd(M)}}case"vertical-perspective":return{projection:new kr,transform:new mc,cameraHelper:new hl};default:return o.w(`Unknown projection name: ${_}. Falling back to mercator projection.`),{projection:new us,transform:new Ss,cameraHelper:new lA}}}(l);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const _ in this.sourceCaches)this.sourceCaches[_].reload()}_validate(l,c,_,M,R={}){return(!R||R.validate!==!1)&&Fu(this,l.call(o.u,o.e({key:c,style:this.serialize(),value:_,styleSpec:o.v},M)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ce().off(Yn,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const _=this.sourceCaches[c];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const c in this.sourceCaches)this.sourceCaches[c].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,c,_,M,R=!1){let N=!1,V=!1;const ne={};for(const ae of this._order){const Me=this._layers[ae];if(Me.type!=="symbol")continue;if(!ne[Me.source]){const De=this.sourceCaches[Me.source];ne[Me.source]=De.getRenderableIds(!0).map(Ve=>De.getTileByID(Ve)).sort((Ve,Xe)=>Xe.tileID.overscaledZ-Ve.tileID.overscaledZ||(Ve.tileID.isLessThan(Xe.tileID)?-1:1))}const ke=this.crossTileSymbolIndex.addLayer(Me,ne[Me.source],l.center.lng);N=N||ke}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((R=R||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(S.now(),l.zoom))&&(this.pauseablePlacement=new dn(l,this.map.terrain,this._order,R,c,_,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ne),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(S.now()),V=!0),N&&this.pauseablePlacement.placement.setStale()),V||N)for(const ae of this._order){const Me=this._layers[ae];Me.type==="symbol"&&this.placement.updateLayerOpacities(Me,ne[Me.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(S.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,c){return o._(this,void 0,void 0,function*(){const _=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,c.icons),_})}getGlyphs(l,c){return o._(this,void 0,void 0,function*(){const _=yield this.glyphManager.getGlyphs(c.stacks),M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,[""]),_})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,c={}){this._checkLoaded(),l&&this._validate(o.u.glyphs,"glyphs",l,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,c,_={},M){this._checkLoaded();const R=[{id:l,url:c}],N=[...te(this.stylesheet.sprite),...R];this._validate(o.u.sprite,"sprite",N,null,_)||(this.stylesheet.sprite=N,this._loadSprite(R,!0,M))}removeSprite(l){this._checkLoaded();const c=te(this.stylesheet.sprite);if(c.find(_=>_.id===l)){if(this._spritesImagesIds[l])for(const _ of this._spritesImagesIds[l])this.imageManager.removeImage(_),this._changedImages[_]=!0;c.splice(c.findIndex(_=>_.id===l),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return te(this.stylesheet.sprite)}setSprite(l,c={},_){this._checkLoaded(),l&&this._validate(o.u.sprite,"sprite",l,null,c)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,_):(this._unloadSprite(),_&&_(null)))}}var Es=o.aA([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Uu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,c,_,M,R,N,V,ne,ae){this.context=l;let Me=this.boundPaintVertexBuffers.length!==M.length;for(let ke=0;!Me&&ke<M.length;ke++)this.boundPaintVertexBuffers[ke]!==M[ke]&&(Me=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==_||Me||this.boundIndexBuffer!==R||this.boundVertexOffset!==N||this.boundDynamicVertexBuffer!==V||this.boundDynamicVertexBuffer2!==ne||this.boundDynamicVertexBuffer3!==ae?this.freshBind(c,_,M,R,N,V,ne,ae):(l.bindVertexArray.set(this.vao),V&&V.bind(),R&&R.dynamicDraw&&R.bind(),ne&&ne.bind(),ae&&ae.bind())}freshBind(l,c,_,M,R,N,V,ne){const ae=l.numAttributes,Me=this.context,ke=Me.gl;this.vao&&this.destroy(),this.vao=Me.createVertexArray(),Me.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=M,this.boundVertexOffset=R,this.boundDynamicVertexBuffer=N,this.boundDynamicVertexBuffer2=V,this.boundDynamicVertexBuffer3=ne,c.enableAttributes(ke,l);for(const De of _)De.enableAttributes(ke,l);N&&N.enableAttributes(ke,l),V&&V.enableAttributes(ke,l),ne&&ne.enableAttributes(ke,l),c.bind(),c.setVertexAttribPointers(ke,l,R);for(const De of _)De.bind(),De.setVertexAttribPointers(ke,l,R);N&&(N.bind(),N.setVertexAttribPointers(ke,l,R)),M&&M.bind(),V&&(V.bind(),V.setVertexAttribPointers(ke,l,R)),ne&&(ne.bind(),ne.setVertexAttribPointers(ke,l,R)),Me.currentNumAttributes=ae}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const hd=(T,l,c,_,M)=>({u_texture:0,u_ele_delta:T,u_fog_matrix:l,u_fog_color:c?c.properties.get("fog-color"):o.b4.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:M?0:c?c.calculateFogBlendOpacity(_):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b4.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:M?1:0}),Mp={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function uA(T){const l=[];for(let c=0;c<T.length;c++){if(T[c]===null)continue;const _=T[c].split(" ");l.push(_.pop())}return l}class Hd{constructor(l,c,_,M,R,N,V,ne){const ae=l.gl;this.program=ae.createProgram();const Me=uA(c.staticAttributes),ke=_?_.getBinderAttributes():[],De=Me.concat(ke),Ve=ii.prelude.staticUniforms?uA(ii.prelude.staticUniforms):[],Xe=V.staticUniforms?uA(V.staticUniforms):[],mt=c.staticUniforms?uA(c.staticUniforms):[],ut=_?_.getBinderUniforms():[],gt=Ve.concat(Xe).concat(mt).concat(ut),bt=[];for(const Xt of gt)bt.indexOf(Xt)<0&&bt.push(Xt);const Ot=_?_.defines():[];Di(ae)&&Ot.unshift("#version 300 es"),R&&Ot.push("#define OVERDRAW_INSPECTOR;"),N&&Ot.push("#define TERRAIN3D;"),ne&&Ot.push(ne);let Pt=Ot.concat(ii.prelude.fragmentSource,V.fragmentSource,c.fragmentSource).join(`
`),Kt=Ot.concat(ii.prelude.vertexSource,V.vertexSource,c.vertexSource).join(`
`);Di(ae)||(Pt=function(Xt){return Xt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Pt),Kt=function(Xt){return Xt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Kt));const jt=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(jt,Pt),ae.compileShader(jt),!ae.getShaderParameter(jt,ae.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ae.getShaderInfoLog(jt)}`);ae.attachShader(this.program,jt);const Rt=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(Rt,Kt),ae.compileShader(Rt),!ae.getShaderParameter(Rt,ae.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ae.getShaderInfoLog(Rt)}`);ae.attachShader(this.program,Rt),this.attributes={};const nn={};this.numAttributes=De.length;for(let Xt=0;Xt<this.numAttributes;Xt++)De[Xt]&&(ae.bindAttribLocation(this.program,Xt,De[Xt]),this.attributes[De[Xt]]=Xt);if(ae.linkProgram(this.program),!ae.getProgramParameter(this.program,ae.LINK_STATUS))throw new Error(`Program failed to link: ${ae.getProgramInfoLog(this.program)}`);ae.deleteShader(Rt),ae.deleteShader(jt);for(let Xt=0;Xt<bt.length;Xt++){const bn=bt[Xt];if(bn&&!nn[bn]){const xn=ae.getUniformLocation(this.program,bn);xn&&(nn[bn]=xn)}}this.fixedUniforms=M(l,nn),this.terrainUniforms=((Xt,bn)=>({u_depth:new o.bC(Xt,bn.u_depth),u_terrain:new o.bC(Xt,bn.u_terrain),u_terrain_dim:new o.b5(Xt,bn.u_terrain_dim),u_terrain_matrix:new o.bD(Xt,bn.u_terrain_matrix),u_terrain_unpack:new o.bE(Xt,bn.u_terrain_unpack),u_terrain_exaggeration:new o.b5(Xt,bn.u_terrain_exaggeration)}))(l,nn),this.projectionUniforms=((Xt,bn)=>({u_projection_matrix:new o.bD(Xt,bn.u_projection_matrix),u_projection_tile_mercator_coords:new o.bE(Xt,bn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bE(Xt,bn.u_projection_clipping_plane),u_projection_transition:new o.b5(Xt,bn.u_projection_transition),u_projection_fallback_matrix:new o.bD(Xt,bn.u_projection_fallback_matrix)}))(l,nn),this.binderUniforms=_?_.getUniforms(l,nn):[]}draw(l,c,_,M,R,N,V,ne,ae,Me,ke,De,Ve,Xe,mt,ut,gt,bt,Ot){const Pt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(_),l.setStencilMode(M),l.setColorMode(R),l.setCullFace(N),ne){l.activeTexture.set(Pt.TEXTURE2),Pt.bindTexture(Pt.TEXTURE_2D,ne.depthTexture),l.activeTexture.set(Pt.TEXTURE3),Pt.bindTexture(Pt.TEXTURE_2D,ne.texture);for(const jt in this.terrainUniforms)this.terrainUniforms[jt].set(ne[jt])}if(ae)for(const jt in ae)this.projectionUniforms[Mp[jt]].set(ae[jt]);if(V)for(const jt in this.fixedUniforms)this.fixedUniforms[jt].set(V[jt]);ut&&ut.setUniforms(l,this.binderUniforms,Xe,{zoom:mt});let Kt=0;switch(c){case Pt.LINES:Kt=2;break;case Pt.TRIANGLES:Kt=3;break;case Pt.LINE_STRIP:Kt=1}for(const jt of Ve.get()){const Rt=jt.vaos||(jt.vaos={});(Rt[Me]||(Rt[Me]=new Uu)).bind(l,this,ke,ut?ut.getPaintVertexBuffers():[],De,jt.vertexOffset,gt,bt,Ot),Pt.drawElements(c,jt.primitiveLength*Kt,Pt.UNSIGNED_SHORT,jt.primitiveOffset*Kt*2)}}}function jc(T,l,c){const _=1/o.at(c,1,l.transform.tileZoom),M=Math.pow(2,c.tileID.overscaledZ),R=c.tileSize*Math.pow(2,l.transform.tileZoom)/M,N=R*(c.tileID.canonical.x+c.tileID.wrap*M),V=R*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[_,T.fromScale,T.toScale],u_fade:T.t,u_pixel_coord_upper:[N>>16,V>>16],u_pixel_coord_lower:[65535&N,65535&V]}}const Sp=(T,l,c,_)=>{const M=T.style.light,R=M.properties.get("position"),N=[R.x,R.y,R.z],V=o.bI();M.properties.get("anchor")==="viewport"&&o.bJ(V,T.transform.bearingInRadians),o.bK(N,N,V);const ne=T.transform.transformLightDirection(N),ae=M.properties.get("color");return{u_lightpos:N,u_lightpos_globe:ne,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+l,u_opacity:c,u_fill_translate:_}},zf=(T,l,c,_,M,R,N)=>o.e(Sp(T,l,c,_),jc(R,T,N),{u_height_factor:-Math.pow(2,M.overscaledZ)/N.tileSize/8}),gc=(T,l,c,_)=>o.e(jc(l,T,c),{u_fill_translate:_}),Xs=(T,l)=>({u_world:T,u_fill_translate:l}),Eh=(T,l,c,_,M)=>o.e(gc(T,l,c,M),{u_world:_}),sf=(T,l,c,_,M)=>{const R=T.transform;let N,V,ne=0;if(c.paint.get("circle-pitch-alignment")==="map"){const ae=o.at(l,1,R.zoom);N=!0,V=[ae,ae],ne=ae/(o.X*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*M}else N=!1,V=R.pixelsToGLUnits;return{u_camera_to_center_distance:R.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+N,u_device_pixel_ratio:T.pixelRatio,u_extrude_scale:V,u_globe_extrude_scale:ne,u_translate:_}},fd=T=>({u_pixel_extrude_scale:[1/T.width,1/T.height]}),af=T=>({u_viewport_size:[T.width,T.height]}),pd=(T,l=1)=>({u_color:T,u_overlay:0,u_overlay_scale:l}),yc=(T,l,c,_)=>{const M=o.at(T,1,l)/(o.X*Math.pow(2,T.tileID.overscaledZ))*2*Math.PI*_;return{u_extrude_scale:o.at(T,1,l),u_intensity:c,u_globe_extrude_scale:M}},Bh=(T,l,c,_)=>{const M=o.H();o.bL(M,0,T.width,T.height,0,0,1);const R=T.context.gl;return{u_matrix:M,u_world:[R.drawingBufferWidth,R.drawingBufferHeight],u_image:c,u_color_ramp:_,u_opacity:l.paint.get("heatmap-opacity")}},Oh=(T,l,c)=>{const _=c.paint.get("hillshade-shadow-color"),M=c.paint.get("hillshade-highlight-color"),R=c.paint.get("hillshade-accent-color");let N=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(N+=T.transform.bearingInRadians),{u_image:0,u_latrange:pm(0,l.tileID),u_light:[c.paint.get("hillshade-exaggeration"),N],u_shadow:_,u_highlight:M,u_accent:R}},md=(T,l)=>{const c=l.stride,_=o.H();return o.bL(_,0,o.X,-8192,0,0,1),o.J(_,_,[0,-8192,0]),{u_matrix:_,u_image:1,u_dimension:[c,c],u_zoom:T.overscaledZ,u_unpack:l.getUnpackVector()}};function pm(T,l){const c=Math.pow(2,l.canonical.z),_=l.canonical.y;return[new o.Y(0,_/c).toLngLat().lat,new o.Y(0,(_+1)/c).toLngLat().lat]}const Nc=(T,l,c,_)=>{const M=T.transform;return{u_translation:Wc(T,l,c),u_ratio:_/o.at(l,1,M.zoom),u_device_pixel_ratio:T.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},yu=(T,l,c,_,M)=>o.e(Nc(T,l,c,_),{u_image:0,u_image_height:M}),Ih=(T,l,c,_,M)=>{const R=T.transform,N=AA(l,R);return{u_translation:Wc(T,l,c),u_texsize:l.imageAtlasTexture.size,u_ratio:_/o.at(l,1,R.zoom),u_device_pixel_ratio:T.pixelRatio,u_image:0,u_scale:[N,M.fromScale,M.toScale],u_fade:M.t,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]]}},vu=(T,l,c,_,M,R)=>{const N=T.lineAtlas,V=AA(l,T.transform),ne=c.layout.get("line-cap")==="round",ae=N.getDash(M.from,ne),Me=N.getDash(M.to,ne),ke=ae.width*R.fromScale,De=Me.width*R.toScale;return o.e(Nc(T,l,c,_),{u_patternscale_a:[V/ke,-ae.height/2],u_patternscale_b:[V/De,-Me.height/2],u_sdfgamma:N.width/(256*Math.min(ke,De)*T.pixelRatio)/2,u_image:0,u_tex_y_a:ae.y,u_tex_y_b:Me.y,u_mix:R.t})};function AA(T,l){return 1/o.at(T,1,l.tileZoom)}function Wc(T,l,c){return o.au(T.transform,l,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Zd=(T,l,c,_,M)=>{return{u_tl_parent:T,u_scale_parent:l,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(N=_.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(R=_.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:lf(_.paint.get("raster-hue-rotate")),u_coords_top:[M[0].x,M[0].y,M[1].x,M[1].y],u_coords_bottom:[M[3].x,M[3].y,M[2].x,M[2].y]};var R,N};function lf(T){T*=Math.PI/180;const l=Math.sin(T),c=Math.cos(T);return[(2*c+1)/3,(-Math.sqrt(3)*l-c+1)/3,(Math.sqrt(3)*l-c+1)/3]}const au=(T,l,c,_,M,R,N,V,ne,ae,Me,ke,De)=>{const Ve=N.transform;return{u_is_size_zoom_constant:+(T==="constant"||T==="source"),u_is_size_feature_constant:+(T==="constant"||T==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Ve.cameraToCenterDistance,u_pitch:Ve.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Ve.width/Ve.height,u_fade_change:N.options.fadeDuration?N.symbolFadeChange:1,u_label_plane_matrix:V,u_coord_matrix:ne,u_is_text:+Me,u_pitch_with_map:+_,u_is_along_line:M,u_is_variable_anchor:R,u_texsize:ke,u_texture:0,u_translation:ae,u_pitched_scale:De}},Il=(T,l,c,_,M,R,N,V,ne,ae,Me,ke,De,Ve)=>{const Xe=N.transform;return o.e(au(T,l,c,_,M,R,N,V,ne,ae,Me,ke,Ve),{u_gamma_scale:_?Math.cos(Xe.pitch*Math.PI/180)*Xe.cameraToCenterDistance:1,u_device_pixel_ratio:N.pixelRatio,u_is_halo:1})},YA=(T,l,c,_,M,R,N,V,ne,ae,Me,ke,De)=>o.e(Il(T,l,c,_,M,R,N,V,ne,ae,!0,Me,0,De),{u_texsize_icon:ke,u_texture_icon:1}),Gc=(T,l)=>({u_opacity:T,u_color:l}),uf=(T,l,c,_,M)=>o.e(function(R,N,V,ne){const ae=V.imageManager.getPattern(R.from.toString()),Me=V.imageManager.getPattern(R.to.toString()),{width:ke,height:De}=V.imageManager.getPixelSize(),Ve=Math.pow(2,ne.tileID.overscaledZ),Xe=ne.tileSize*Math.pow(2,V.transform.tileZoom)/Ve,mt=Xe*(ne.tileID.canonical.x+ne.tileID.wrap*Ve),ut=Xe*ne.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:Me.tl,u_pattern_br_b:Me.br,u_texsize:[ke,De],u_mix:N.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:Me.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/o.at(ne,1,V.transform.tileZoom),u_pixel_coord_upper:[mt>>16,ut>>16],u_pixel_coord_lower:[65535&mt,65535&ut]}}(c,M,l,_),{u_opacity:T}),jf=(T,l)=>{},gd={fillExtrusion:(T,l)=>({u_lightpos:new o.bG(T,l.u_lightpos),u_lightpos_globe:new o.bG(T,l.u_lightpos_globe),u_lightintensity:new o.b5(T,l.u_lightintensity),u_lightcolor:new o.bG(T,l.u_lightcolor),u_vertical_gradient:new o.b5(T,l.u_vertical_gradient),u_opacity:new o.b5(T,l.u_opacity),u_fill_translate:new o.bH(T,l.u_fill_translate)}),fillExtrusionPattern:(T,l)=>({u_lightpos:new o.bG(T,l.u_lightpos),u_lightpos_globe:new o.bG(T,l.u_lightpos_globe),u_lightintensity:new o.b5(T,l.u_lightintensity),u_lightcolor:new o.bG(T,l.u_lightcolor),u_vertical_gradient:new o.b5(T,l.u_vertical_gradient),u_height_factor:new o.b5(T,l.u_height_factor),u_opacity:new o.b5(T,l.u_opacity),u_fill_translate:new o.bH(T,l.u_fill_translate),u_image:new o.bC(T,l.u_image),u_texsize:new o.bH(T,l.u_texsize),u_pixel_coord_upper:new o.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(T,l.u_pixel_coord_lower),u_scale:new o.bG(T,l.u_scale),u_fade:new o.b5(T,l.u_fade)}),fill:(T,l)=>({u_fill_translate:new o.bH(T,l.u_fill_translate)}),fillPattern:(T,l)=>({u_image:new o.bC(T,l.u_image),u_texsize:new o.bH(T,l.u_texsize),u_pixel_coord_upper:new o.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(T,l.u_pixel_coord_lower),u_scale:new o.bG(T,l.u_scale),u_fade:new o.b5(T,l.u_fade),u_fill_translate:new o.bH(T,l.u_fill_translate)}),fillOutline:(T,l)=>({u_world:new o.bH(T,l.u_world),u_fill_translate:new o.bH(T,l.u_fill_translate)}),fillOutlinePattern:(T,l)=>({u_world:new o.bH(T,l.u_world),u_image:new o.bC(T,l.u_image),u_texsize:new o.bH(T,l.u_texsize),u_pixel_coord_upper:new o.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(T,l.u_pixel_coord_lower),u_scale:new o.bG(T,l.u_scale),u_fade:new o.b5(T,l.u_fade),u_fill_translate:new o.bH(T,l.u_fill_translate)}),circle:(T,l)=>({u_camera_to_center_distance:new o.b5(T,l.u_camera_to_center_distance),u_scale_with_map:new o.bC(T,l.u_scale_with_map),u_pitch_with_map:new o.bC(T,l.u_pitch_with_map),u_extrude_scale:new o.bH(T,l.u_extrude_scale),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_globe_extrude_scale:new o.b5(T,l.u_globe_extrude_scale),u_translate:new o.bH(T,l.u_translate)}),collisionBox:(T,l)=>({u_pixel_extrude_scale:new o.bH(T,l.u_pixel_extrude_scale)}),collisionCircle:(T,l)=>({u_viewport_size:new o.bH(T,l.u_viewport_size)}),debug:(T,l)=>({u_color:new o.bF(T,l.u_color),u_overlay:new o.bC(T,l.u_overlay),u_overlay_scale:new o.b5(T,l.u_overlay_scale)}),depth:jf,clippingMask:jf,heatmap:(T,l)=>({u_extrude_scale:new o.b5(T,l.u_extrude_scale),u_intensity:new o.b5(T,l.u_intensity),u_globe_extrude_scale:new o.b5(T,l.u_globe_extrude_scale)}),heatmapTexture:(T,l)=>({u_matrix:new o.bD(T,l.u_matrix),u_world:new o.bH(T,l.u_world),u_image:new o.bC(T,l.u_image),u_color_ramp:new o.bC(T,l.u_color_ramp),u_opacity:new o.b5(T,l.u_opacity)}),hillshade:(T,l)=>({u_image:new o.bC(T,l.u_image),u_latrange:new o.bH(T,l.u_latrange),u_light:new o.bH(T,l.u_light),u_shadow:new o.bF(T,l.u_shadow),u_highlight:new o.bF(T,l.u_highlight),u_accent:new o.bF(T,l.u_accent)}),hillshadePrepare:(T,l)=>({u_matrix:new o.bD(T,l.u_matrix),u_image:new o.bC(T,l.u_image),u_dimension:new o.bH(T,l.u_dimension),u_zoom:new o.b5(T,l.u_zoom),u_unpack:new o.bE(T,l.u_unpack)}),line:(T,l)=>({u_translation:new o.bH(T,l.u_translation),u_ratio:new o.b5(T,l.u_ratio),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(T,l.u_units_to_pixels)}),lineGradient:(T,l)=>({u_translation:new o.bH(T,l.u_translation),u_ratio:new o.b5(T,l.u_ratio),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(T,l.u_units_to_pixels),u_image:new o.bC(T,l.u_image),u_image_height:new o.b5(T,l.u_image_height)}),linePattern:(T,l)=>({u_translation:new o.bH(T,l.u_translation),u_texsize:new o.bH(T,l.u_texsize),u_ratio:new o.b5(T,l.u_ratio),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_image:new o.bC(T,l.u_image),u_units_to_pixels:new o.bH(T,l.u_units_to_pixels),u_scale:new o.bG(T,l.u_scale),u_fade:new o.b5(T,l.u_fade)}),lineSDF:(T,l)=>({u_translation:new o.bH(T,l.u_translation),u_ratio:new o.b5(T,l.u_ratio),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(T,l.u_units_to_pixels),u_patternscale_a:new o.bH(T,l.u_patternscale_a),u_patternscale_b:new o.bH(T,l.u_patternscale_b),u_sdfgamma:new o.b5(T,l.u_sdfgamma),u_image:new o.bC(T,l.u_image),u_tex_y_a:new o.b5(T,l.u_tex_y_a),u_tex_y_b:new o.b5(T,l.u_tex_y_b),u_mix:new o.b5(T,l.u_mix)}),raster:(T,l)=>({u_tl_parent:new o.bH(T,l.u_tl_parent),u_scale_parent:new o.b5(T,l.u_scale_parent),u_buffer_scale:new o.b5(T,l.u_buffer_scale),u_fade_t:new o.b5(T,l.u_fade_t),u_opacity:new o.b5(T,l.u_opacity),u_image0:new o.bC(T,l.u_image0),u_image1:new o.bC(T,l.u_image1),u_brightness_low:new o.b5(T,l.u_brightness_low),u_brightness_high:new o.b5(T,l.u_brightness_high),u_saturation_factor:new o.b5(T,l.u_saturation_factor),u_contrast_factor:new o.b5(T,l.u_contrast_factor),u_spin_weights:new o.bG(T,l.u_spin_weights),u_coords_top:new o.bE(T,l.u_coords_top),u_coords_bottom:new o.bE(T,l.u_coords_bottom)}),symbolIcon:(T,l)=>({u_is_size_zoom_constant:new o.bC(T,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(T,l.u_is_size_feature_constant),u_size_t:new o.b5(T,l.u_size_t),u_size:new o.b5(T,l.u_size),u_camera_to_center_distance:new o.b5(T,l.u_camera_to_center_distance),u_pitch:new o.b5(T,l.u_pitch),u_rotate_symbol:new o.bC(T,l.u_rotate_symbol),u_aspect_ratio:new o.b5(T,l.u_aspect_ratio),u_fade_change:new o.b5(T,l.u_fade_change),u_label_plane_matrix:new o.bD(T,l.u_label_plane_matrix),u_coord_matrix:new o.bD(T,l.u_coord_matrix),u_is_text:new o.bC(T,l.u_is_text),u_pitch_with_map:new o.bC(T,l.u_pitch_with_map),u_is_along_line:new o.bC(T,l.u_is_along_line),u_is_variable_anchor:new o.bC(T,l.u_is_variable_anchor),u_texsize:new o.bH(T,l.u_texsize),u_texture:new o.bC(T,l.u_texture),u_translation:new o.bH(T,l.u_translation),u_pitched_scale:new o.b5(T,l.u_pitched_scale)}),symbolSDF:(T,l)=>({u_is_size_zoom_constant:new o.bC(T,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(T,l.u_is_size_feature_constant),u_size_t:new o.b5(T,l.u_size_t),u_size:new o.b5(T,l.u_size),u_camera_to_center_distance:new o.b5(T,l.u_camera_to_center_distance),u_pitch:new o.b5(T,l.u_pitch),u_rotate_symbol:new o.bC(T,l.u_rotate_symbol),u_aspect_ratio:new o.b5(T,l.u_aspect_ratio),u_fade_change:new o.b5(T,l.u_fade_change),u_label_plane_matrix:new o.bD(T,l.u_label_plane_matrix),u_coord_matrix:new o.bD(T,l.u_coord_matrix),u_is_text:new o.bC(T,l.u_is_text),u_pitch_with_map:new o.bC(T,l.u_pitch_with_map),u_is_along_line:new o.bC(T,l.u_is_along_line),u_is_variable_anchor:new o.bC(T,l.u_is_variable_anchor),u_texsize:new o.bH(T,l.u_texsize),u_texture:new o.bC(T,l.u_texture),u_gamma_scale:new o.b5(T,l.u_gamma_scale),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_is_halo:new o.bC(T,l.u_is_halo),u_translation:new o.bH(T,l.u_translation),u_pitched_scale:new o.b5(T,l.u_pitched_scale)}),symbolTextAndIcon:(T,l)=>({u_is_size_zoom_constant:new o.bC(T,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(T,l.u_is_size_feature_constant),u_size_t:new o.b5(T,l.u_size_t),u_size:new o.b5(T,l.u_size),u_camera_to_center_distance:new o.b5(T,l.u_camera_to_center_distance),u_pitch:new o.b5(T,l.u_pitch),u_rotate_symbol:new o.bC(T,l.u_rotate_symbol),u_aspect_ratio:new o.b5(T,l.u_aspect_ratio),u_fade_change:new o.b5(T,l.u_fade_change),u_label_plane_matrix:new o.bD(T,l.u_label_plane_matrix),u_coord_matrix:new o.bD(T,l.u_coord_matrix),u_is_text:new o.bC(T,l.u_is_text),u_pitch_with_map:new o.bC(T,l.u_pitch_with_map),u_is_along_line:new o.bC(T,l.u_is_along_line),u_is_variable_anchor:new o.bC(T,l.u_is_variable_anchor),u_texsize:new o.bH(T,l.u_texsize),u_texsize_icon:new o.bH(T,l.u_texsize_icon),u_texture:new o.bC(T,l.u_texture),u_texture_icon:new o.bC(T,l.u_texture_icon),u_gamma_scale:new o.b5(T,l.u_gamma_scale),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_is_halo:new o.bC(T,l.u_is_halo),u_translation:new o.bH(T,l.u_translation),u_pitched_scale:new o.b5(T,l.u_pitched_scale)}),background:(T,l)=>({u_opacity:new o.b5(T,l.u_opacity),u_color:new o.bF(T,l.u_color)}),backgroundPattern:(T,l)=>({u_opacity:new o.b5(T,l.u_opacity),u_image:new o.bC(T,l.u_image),u_pattern_tl_a:new o.bH(T,l.u_pattern_tl_a),u_pattern_br_a:new o.bH(T,l.u_pattern_br_a),u_pattern_tl_b:new o.bH(T,l.u_pattern_tl_b),u_pattern_br_b:new o.bH(T,l.u_pattern_br_b),u_texsize:new o.bH(T,l.u_texsize),u_mix:new o.b5(T,l.u_mix),u_pattern_size_a:new o.bH(T,l.u_pattern_size_a),u_pattern_size_b:new o.bH(T,l.u_pattern_size_b),u_scale_a:new o.b5(T,l.u_scale_a),u_scale_b:new o.b5(T,l.u_scale_b),u_pixel_coord_upper:new o.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(T,l.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b5(T,l.u_tile_units_to_pixels)}),terrain:(T,l)=>({u_texture:new o.bC(T,l.u_texture),u_ele_delta:new o.b5(T,l.u_ele_delta),u_fog_matrix:new o.bD(T,l.u_fog_matrix),u_fog_color:new o.bF(T,l.u_fog_color),u_fog_ground_blend:new o.b5(T,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b5(T,l.u_fog_ground_blend_opacity),u_horizon_color:new o.bF(T,l.u_horizon_color),u_horizon_fog_blend:new o.b5(T,l.u_horizon_fog_blend),u_is_globe_mode:new o.b5(T,l.u_is_globe_mode)}),terrainDepth:(T,l)=>({u_ele_delta:new o.b5(T,l.u_ele_delta)}),terrainCoords:(T,l)=>({u_texture:new o.bC(T,l.u_texture),u_terrain_coords_id:new o.b5(T,l.u_terrain_coords_id),u_ele_delta:new o.b5(T,l.u_ele_delta)}),projectionErrorMeasurement:(T,l)=>({u_input:new o.b5(T,l.u_input),u_output_expected:new o.b5(T,l.u_output_expected)}),atmosphere:(T,l)=>({u_sun_pos:new o.bG(T,l.u_sun_pos),u_atmosphere_blend:new o.b5(T,l.u_atmosphere_blend),u_globe_position:new o.bG(T,l.u_globe_position),u_globe_radius:new o.b5(T,l.u_globe_radius),u_inv_proj_matrix:new o.bD(T,l.u_inv_proj_matrix)}),sky:(T,l)=>({u_sky_color:new o.bF(T,l.u_sky_color),u_horizon_color:new o.bF(T,l.u_horizon_color),u_horizon:new o.bH(T,l.u_horizon),u_horizon_normal:new o.bH(T,l.u_horizon_normal),u_sky_horizon_blend:new o.b5(T,l.u_sky_horizon_blend),u_sky_blend:new o.b5(T,l.u_sky_blend)})};class xA{constructor(l,c,_){this.context=l;const M=l.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const rl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class kl{constructor(l,c,_,M){this.length=c.length,this.attributes=_,this.itemSize=c.bytesPerElement,this.dynamicDraw=M,this.context=l;const R=l.gl;this.buffer=R.createBuffer(),l.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,c){for(let _=0;_<this.attributes.length;_++){const M=c.attributes[this.attributes[_].name];M!==void 0&&l.enableVertexAttribArray(M)}}setVertexAttribPointers(l,c,_){for(let M=0;M<this.attributes.length;M++){const R=this.attributes[M],N=c.attributes[R.name];N!==void 0&&l.vertexAttribPointer(N,R.components,l[rl[R.type]],!1,this.itemSize,R.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Vo{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class kh extends Vo{getDefault(){return o.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class mm extends Vo{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Qc extends Vo{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class zu extends Vo{getDefault(){return[!0,!0,!0,!0]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Xd extends Vo{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Jd extends Vo{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class vc extends Vo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const c=this.current;(l.func!==c.func||l.ref!==c.ref||l.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class eh extends Vo{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Af extends Vo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=l,this.dirty=!1}}class Cc extends Vo{getDefault(){return[0,1]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Cu extends Vo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=l,this.dirty=!1}}class Zt extends Vo{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Rn extends Vo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.BLEND):c.disable(c.BLEND),this.current=l,this.dirty=!1}}class ln extends Vo{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class zr extends Vo{getDefault(){return o.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class _i extends Vo{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class bo extends Vo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=l,this.dirty=!1}}class sa extends Vo{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Ho extends Vo{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class $A extends Vo{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Ep extends Vo{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Tl extends Vo{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class _u extends Vo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class VA extends Vo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Pl extends Vo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Gi extends Vo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class HA extends Vo{getDefault(){return null}set(l){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class zo extends Vo{getDefault(){return null}set(l){var c;if(l===this.current&&!this.dirty)return;const _=this.gl;Di(_)?_.bindVertexArray(l):(c=_.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class qc extends Vo{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class ZA extends Vo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class wA extends Vo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class cA extends Vo{constructor(l,c){super(l),this.context=l,this.parent=c}getDefault(){return null}}class Rl extends cA{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class _c extends cA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class bu extends cA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const Gl="Framebuffer is not complete";class Yc{constructor(l,c,_,M,R){this.context=l,this.width=c,this.height=_;const N=l.gl,V=this.framebuffer=N.createFramebuffer();if(this.colorAttachment=new Rl(l,V),M)this.depthAttachment=R?new bu(l,V):new _c(l,V);else if(R)throw new Error("Stencil cannot be set without depth");if(N.checkFramebufferStatus(N.FRAMEBUFFER)!==N.FRAMEBUFFER_COMPLETE)throw new Error(Gl)}destroy(){const l=this.context.gl,c=this.colorAttachment.get();if(c&&l.deleteTexture(c),this.depthAttachment){const _=this.depthAttachment.get();_&&l.deleteRenderbuffer(_)}l.deleteFramebuffer(this.framebuffer)}}class th{constructor(l){var c,_;if(this.gl=l,this.clearColor=new kh(this),this.clearDepth=new mm(this),this.clearStencil=new Qc(this),this.colorMask=new zu(this),this.depthMask=new Xd(this),this.stencilMask=new Jd(this),this.stencilFunc=new vc(this),this.stencilOp=new eh(this),this.stencilTest=new Af(this),this.depthRange=new Cc(this),this.depthTest=new Cu(this),this.depthFunc=new Zt(this),this.blend=new Rn(this),this.blendFunc=new ln(this),this.blendColor=new zr(this),this.blendEquation=new _i(this),this.cullFace=new bo(this),this.cullFaceSide=new sa(this),this.frontFace=new Ho(this),this.program=new $A(this),this.activeTexture=new Ep(this),this.viewport=new Tl(this),this.bindFramebuffer=new _u(this),this.bindRenderbuffer=new VA(this),this.bindTexture=new Pl(this),this.bindVertexBuffer=new Gi(this),this.bindElementBuffer=new HA(this),this.bindVertexArray=new zo(this),this.pixelStoreUnpack=new qc(this),this.pixelStoreUnpackPremultiplyAlpha=new ZA(this),this.pixelStoreUnpackFlipY=new wA(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Di(l)){this.HALF_FLOAT=l.HALF_FLOAT;const M=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=l.RGBA16F)!==null&&c!==void 0?c:M==null?void 0:M.RGBA16F_EXT,this.RGB16F=(_=l.RGB16F)!==null&&_!==void 0?_:M==null?void 0:M.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const M=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=M==null?void 0:M.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,c){return new xA(this,l,c)}createVertexBuffer(l,c,_){return new kl(this,l,c,_)}createRenderbuffer(l,c,_){const M=this.gl,R=M.createRenderbuffer();return this.bindRenderbuffer.set(R),M.renderbufferStorage(M.RENDERBUFFER,l,c,_),this.bindRenderbuffer.set(null),R}createFramebuffer(l,c,_,M){return new Yc(this,l,c,_,M)}clear({color:l,depth:c,stencil:_}){const M=this.gl;let R=0;l&&(R|=M.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(R|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),_!==void 0&&(R|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),M.clear(R)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){o.bz(l.blendFunction,Hi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Di(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var c;return Di(this.gl)?this.gl.deleteVertexArray(l):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let ja;function yd(T,l,c,_,M){const R=T.context,N=T.transform,V=R.gl,ne=T.useProgram("collisionBox"),ae=[];let Me=0,ke=0;for(let gt=0;gt<_.length;gt++){const bt=_[gt],Ot=l.getTile(bt).getBucket(c);if(!Ot)continue;const Pt=M?Ot.textCollisionBox:Ot.iconCollisionBox,Kt=Ot.collisionCircleArray;Kt.length>0&&(ae.push({circleArray:Kt,circleOffset:ke,coord:bt}),Me+=Kt.length/4,ke=Me),Pt&&ne.draw(R,V.LINES,ei.disabled,Wi.disabled,T.colorModeForRenderPass(),zi.disabled,fd(T.transform),T.style.map.terrain&&T.style.map.terrain.getTerrainData(bt),N.getProjectionData({overscaledTileID:bt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Pt.layoutVertexBuffer,Pt.indexBuffer,Pt.segments,null,T.transform.zoom,null,null,Pt.collisionVertexBuffer)}if(!M||!ae.length)return;const De=T.useProgram("collisionCircle"),Ve=new o.bM;Ve.resize(4*Me),Ve._trim();let Xe=0;for(const gt of ae)for(let bt=0;bt<gt.circleArray.length/4;bt++){const Ot=4*bt,Pt=gt.circleArray[Ot+0],Kt=gt.circleArray[Ot+1],jt=gt.circleArray[Ot+2],Rt=gt.circleArray[Ot+3];Ve.emplace(Xe++,Pt,Kt,jt,Rt,0),Ve.emplace(Xe++,Pt,Kt,jt,Rt,1),Ve.emplace(Xe++,Pt,Kt,jt,Rt,2),Ve.emplace(Xe++,Pt,Kt,jt,Rt,3)}(!ja||ja.length<2*Me)&&(ja=function(gt){const bt=2*gt,Ot=new o.bO;Ot.resize(bt),Ot._trim();for(let Pt=0;Pt<bt;Pt++){const Kt=6*Pt;Ot.uint16[Kt+0]=4*Pt+0,Ot.uint16[Kt+1]=4*Pt+1,Ot.uint16[Kt+2]=4*Pt+2,Ot.uint16[Kt+3]=4*Pt+2,Ot.uint16[Kt+4]=4*Pt+3,Ot.uint16[Kt+5]=4*Pt+0}return Ot}(Me));const mt=R.createIndexBuffer(ja,!0),ut=R.createVertexBuffer(Ve,o.bN.members,!0);for(const gt of ae){const bt=af(T.transform);De.draw(R,V.TRIANGLES,ei.disabled,Wi.disabled,T.colorModeForRenderPass(),zi.disabled,bt,T.style.map.terrain&&T.style.map.terrain.getTerrainData(gt.coord),null,c.id,ut,mt,o.aD.simpleSegment(0,2*gt.circleOffset,gt.circleArray.length,gt.circleArray.length/2),null,T.transform.zoom,null,null,null)}ut.destroy(),mt.destroy()}const bc=o.aq(new Float32Array(16));function XA(T,l,c,_,M,R){const{horizontalAlign:N,verticalAlign:V}=o.ay(T);return new o.P((-(N-.5)*l/M+_[0])*R,(-(V-.5)*c/M+_[1])*R)}function cf(T,l,c,_,M,R){const N=l.tileAnchorPoint.add(new o.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let V=_.mult(R);c||(V=V.rotate(-M));const ne=N.add(V);return Vt(ne.x,ne.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(c){const V=Ln(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(T),ne=Math.atan(V.y/V.x)+(V.x<0?Math.PI:0);return T.add(_.rotate(ne))}return T.add(_)}function MA(T,l,c,_,M,R,N,V,ne,ae,Me,ke){const De=T.text.placedSymbolArray,Ve=T.text.dynamicLayoutVertexArray,Xe=T.icon.dynamicLayoutVertexArray,mt={};Ve.clear();for(let ut=0;ut<De.length;ut++){const gt=De.get(ut),bt=gt.hidden||!gt.crossTileID||T.allowVerticalPlacement&&!gt.placedOrientation?null:_[gt.crossTileID];if(bt){const Ot=new o.P(gt.anchorX,gt.anchorY),Pt={getElevation:ke,width:M.width,height:M.height,pitchedLabelPlaneMatrix:R,lineVertexArray:null,pitchWithMap:c,transform:M,projectionCache:null,tileAnchorPoint:Ot,translation:ae,unwrappedTileID:Me},Kt=c?Br(Ot.x,Ot.y,Pt):Ln(Ot.x,Ot.y,Pt),jt=Nt(M.cameraToCenterDistance,Kt.signedDistanceFromCamera);let Rt=o.aj(T.textSizeData,V,gt)*jt/o.as;c&&(Rt*=T.tilePixelRatio/N);const{width:nn,height:Xt,anchor:bn,textOffset:xn,textBoxScale:Cn}=bt,kn=XA(bn,nn,Xt,xn,Cn,Rt),Gn=M.getPitchedTextCorrection(Ot.x+ae[0],Ot.y+ae[1],Me),Bn=cf(Kt.point,Pt,l,kn,-M.bearingInRadians,Gn),Pr=T.allowVerticalPlacement&&gt.placedOrientation===o.ai.vertical?Math.PI/2:0;for(let Oi=0;Oi<gt.numGlyphs;Oi++)o.ak(Ve,Bn,Pr);ne&&gt.associatedIconIndex>=0&&(mt[gt.associatedIconIndex]={shiftedAnchor:Bn,angle:Pr})}else Yi(gt.numGlyphs,Ve)}if(ne){Xe.clear();const ut=T.icon.placedSymbolArray;for(let gt=0;gt<ut.length;gt++){const bt=ut.get(gt);if(bt.hidden)Yi(bt.numGlyphs,Xe);else{const Ot=mt[gt];if(Ot)for(let Pt=0;Pt<bt.numGlyphs;Pt++)o.ak(Xe,Ot.shiftedAnchor,Ot.angle);else Yi(bt.numGlyphs,Xe)}}T.icon.dynamicLayoutVertexBuffer.updateData(Xe)}T.text.dynamicLayoutVertexBuffer.updateData(Ve)}function JA(T,l,c){return c.iconsInText&&l?"symbolTextAndIcon":T?"symbolSDF":"symbolIcon"}function $c(T,l,c,_,M,R,N,V,ne,ae,Me,ke,De){const Ve=T.context,Xe=Ve.gl,mt=T.transform,ut=V==="map",gt=ne==="map",bt=V!=="viewport"&&c.layout.get("symbol-placement")!=="point",Ot=ut&&!gt&&!bt,Pt=!c.layout.get("symbol-sort-key").isConstant();let Kt=!1;const jt=T.getDepthModeForSublayer(0,ei.ReadOnly),Rt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),nn=[],Xt=mt.getCircleRadiusCorrection();for(const bn of _){const xn=l.getTile(bn),Cn=xn.getBucket(c);if(!Cn)continue;const kn=M?Cn.text:Cn.icon;if(!kn||!kn.segments.get().length||!kn.hasVisibleVertices)continue;const Gn=kn.programConfigurations.get(c.id),Bn=M||Cn.sdfIcons,Pr=M?Cn.textSizeData:Cn.iconSizeData,Oi=gt||mt.pitch!==0,Vi=T.useProgram(JA(Bn,M,Cn),Gn),Io=o.ah(Pr,mt.zoom),Ei=T.style.map.terrain&&T.style.map.terrain.getTerrainData(bn);let No,Wo,wo,vo,Ta=[0,0],Go=null;if(M)Wo=xn.glyphAtlasTexture,wo=Xe.LINEAR,No=xn.glyphAtlasTexture.size,Cn.iconsInText&&(Ta=xn.imageAtlasTexture.size,Go=xn.imageAtlasTexture,vo=Oi||T.options.rotating||T.options.zooming||Pr.kind==="composite"||Pr.kind==="camera"?Xe.LINEAR:Xe.NEAREST);else{const ws=c.layout.get("icon-size").constantOr(0)!==1||Cn.iconsNeedLinear;Wo=xn.imageAtlasTexture,wo=Bn||T.options.rotating||T.options.zooming||ws||Oi?Xe.LINEAR:Xe.NEAREST,No=xn.imageAtlasTexture.size}const hs=o.at(xn,1,T.transform.zoom),Ga=dt(ut,T.transform,hs),Zu=o.H();o.an(Zu,Ga);const ml=ct(gt,ut,T.transform,hs),gl=o.au(mt,xn,R,N),du=mt.getProjectionData({overscaledTileID:bn,applyGlobeMatrix:!De,applyTerrainMatrix:!0}),TA=Rt&&Cn.hasTextData(),PA=c.layout.get("icon-text-fit")!=="none"&&TA&&Cn.hasIconData();if(bt){const ws=T.style.map.terrain?(il,ol)=>T.style.map.terrain.getElevation(bn,il,ol):null,$s=c.layout.get("text-rotation-alignment")==="map";Dn(Cn,T,M,Ga,Zu,gt,ae,$s,bn.toUnwrapped(),mt.width,mt.height,gl,ws)}const Xu=M&&Rt||PA,ea=bt||Xu?bc:gt?Ga:T.transform.clipSpaceToPixelsMatrix,yl=Bn&&c.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let aa;aa=Bn?Cn.iconsInText?YA(Pr.kind,Io,Ot,gt,bt,Xu,T,ea,ml,gl,No,Ta,Xt):Il(Pr.kind,Io,Ot,gt,bt,Xu,T,ea,ml,gl,M,No,0,Xt):au(Pr.kind,Io,Ot,gt,bt,Xu,T,ea,ml,gl,M,No,Xt);const Dl={program:Vi,buffers:kn,uniformValues:aa,projectionData:du,atlasTexture:Wo,atlasTextureIcon:Go,atlasInterpolation:wo,atlasInterpolationIcon:vo,isSDF:Bn,hasHalo:yl};if(Pt&&Cn.canOverlap){Kt=!0;const ws=kn.segments.get();for(const $s of ws)nn.push({segments:new o.aD([$s]),sortKey:$s.sortKey,state:Dl,terrainData:Ei})}else nn.push({segments:kn.segments,sortKey:0,state:Dl,terrainData:Ei})}Kt&&nn.sort((bn,xn)=>bn.sortKey-xn.sortKey);for(const bn of nn){const xn=bn.state;if(Ve.activeTexture.set(Xe.TEXTURE0),xn.atlasTexture.bind(xn.atlasInterpolation,Xe.CLAMP_TO_EDGE),xn.atlasTextureIcon&&(Ve.activeTexture.set(Xe.TEXTURE1),xn.atlasTextureIcon&&xn.atlasTextureIcon.bind(xn.atlasInterpolationIcon,Xe.CLAMP_TO_EDGE)),xn.isSDF){const Cn=xn.uniformValues;xn.hasHalo&&(Cn.u_is_halo=1,nh(xn.buffers,bn.segments,c,T,xn.program,jt,Me,ke,Cn,xn.projectionData,bn.terrainData)),Cn.u_is_halo=0}nh(xn.buffers,bn.segments,c,T,xn.program,jt,Me,ke,xn.uniformValues,xn.projectionData,bn.terrainData)}}function nh(T,l,c,_,M,R,N,V,ne,ae,Me){const ke=_.context;M.draw(ke,ke.gl.TRIANGLES,R,N,V,zi.backCCW,ne,Me,ae,c.id,T.layoutVertexBuffer,T.indexBuffer,l,c.paint,_.transform.zoom,T.programConfigurations.get(c.id),T.dynamicLayoutVertexBuffer,T.opacityVertexBuffer)}function Zo(T,l,c,_,M){const R=T.context,N=R.gl,V=Wi.disabled,ne=new Hi([N.ONE,N.ONE],o.b4.transparent,[!0,!0,!0,!0]),ae=l.getBucket(c);if(!ae)return;const Me=_.key;let ke=c.heatmapFbos.get(Me);ke||(ke=ec(R,l.tileSize,l.tileSize),c.heatmapFbos.set(Me,ke)),R.bindFramebuffer.set(ke.framebuffer),R.viewport.set([0,0,l.tileSize,l.tileSize]),R.clear({color:o.b4.transparent});const De=ae.programConfigurations.get(c.id),Ve=T.useProgram("heatmap",De,!M),Xe=T.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),mt=T.style.map.terrain.getTerrainData(_);Ve.draw(R,N.TRIANGLES,ei.disabled,V,ne,zi.disabled,yc(l,T.transform.zoom,c.paint.get("heatmap-intensity"),1),mt,Xe,c.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,c.paint,T.transform.zoom,De)}function Vc(T,l,c,_,M){const R=T.context,N=R.gl,V=T.transform;R.setColorMode(T.colorModeForRenderPass());const ne=ju(R,l),ae=c.key,Me=l.heatmapFbos.get(ae);if(!Me)return;R.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,Me.colorAttachment.get()),R.activeTexture.set(N.TEXTURE1),ne.bind(N.LINEAR,N.CLAMP_TO_EDGE);const ke=V.getProjectionData({overscaledTileID:c,applyTerrainMatrix:M,applyGlobeMatrix:!_});T.useProgram("heatmapTexture").draw(R,N.TRIANGLES,ei.disabled,Wi.disabled,T.colorModeForRenderPass(),zi.disabled,Bh(T,l,0,1),null,ke,l.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments,l.paint,V.zoom),Me.destroy(),l.heatmapFbos.delete(ae)}function ec(T,l,c){var _,M;const R=T.gl,N=R.createTexture();R.bindTexture(R.TEXTURE_2D,N),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR);const V=(_=T.HALF_FLOAT)!==null&&_!==void 0?_:R.UNSIGNED_BYTE,ne=(M=T.RGBA16F)!==null&&M!==void 0?M:R.RGBA;R.texImage2D(R.TEXTURE_2D,0,ne,l,c,0,R.RGBA,V,null);const ae=T.createFramebuffer(l,c,!1,!1);return ae.colorAttachment.set(N),ae}function ju(T,l){return l.colorRampTexture||(l.colorRampTexture=new oe(T,l.colorRamp,T.gl.RGBA)),l.colorRampTexture}function Hc(T,l,c,_,M){if(!c||!_||!_.imageAtlas)return;const R=_.imageAtlas.patternPositions;let N=R[c.to.toString()],V=R[c.from.toString()];if(!N&&V&&(N=V),!V&&N&&(V=N),!N||!V){const ne=M.getPaintProperty(l);N=R[ne],V=R[ne]}N&&V&&T.setConstantPatternPositions(N,V)}function rh(T,l,c,_,M,R,N,V){const ne=T.context.gl,ae="fill-pattern",Me=c.paint.get(ae),ke=Me&&Me.constantOr(1),De=c.getCrossfadeParameters();let Ve,Xe,mt,ut,gt;const bt=T.transform,Ot=c.paint.get("fill-translate"),Pt=c.paint.get("fill-translate-anchor");N?(Xe=ke&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ve=ne.LINES):(Xe=ke?"fillPattern":"fill",Ve=ne.TRIANGLES);const Kt=Me.constantOr(null);for(const jt of _){const Rt=l.getTile(jt);if(ke&&!Rt.patternsLoaded())continue;const nn=Rt.getBucket(c);if(!nn)continue;const Xt=nn.programConfigurations.get(c.id),bn=T.useProgram(Xe,Xt),xn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(jt);ke&&(T.context.activeTexture.set(ne.TEXTURE0),Rt.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),Xt.updatePaintBuffers(De)),Hc(Xt,ae,Kt,Rt,c);const Cn=bt.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!V,applyTerrainMatrix:!0}),kn=o.au(bt,Rt,Ot,Pt);if(N){ut=nn.indexBuffer2,gt=nn.segments2;const Bn=[ne.drawingBufferWidth,ne.drawingBufferHeight];mt=Xe==="fillOutlinePattern"&&ke?Eh(T,De,Rt,Bn,kn):Xs(Bn,kn)}else ut=nn.indexBuffer,gt=nn.segments,mt=ke?gc(T,De,Rt,kn):{u_fill_translate:kn};let Gn;if(T.renderPass==="translucent"&&V){const[Bn]=T.getStencilConfigForOverlapAndUpdateStencilID(_);Gn=Bn[jt.overscaledZ]}else Gn=T.stencilModeForClipping(jt);bn.draw(T.context,Ve,M,Gn,R,zi.backCCW,mt,xn,Cn,c.id,nn.layoutVertexBuffer,ut,gt,c.paint,T.transform.zoom,Xt)}}function Zc(T,l,c,_,M,R,N,V){const ne=T.context,ae=ne.gl,Me="fill-extrusion-pattern",ke=c.paint.get(Me),De=ke.constantOr(1),Ve=c.getCrossfadeParameters(),Xe=c.paint.get("fill-extrusion-opacity"),mt=ke.constantOr(null),ut=T.transform;for(const gt of _){const bt=l.getTile(gt),Ot=bt.getBucket(c);if(!Ot)continue;const Pt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(gt),Kt=Ot.programConfigurations.get(c.id),jt=T.useProgram(De?"fillExtrusionPattern":"fillExtrusion",Kt);De&&(T.context.activeTexture.set(ae.TEXTURE0),bt.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Kt.updatePaintBuffers(Ve));const Rt=ut.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!V,applyTerrainMatrix:!0});Hc(Kt,Me,mt,bt,c);const nn=o.au(ut,bt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Xt=c.paint.get("fill-extrusion-vertical-gradient"),bn=De?zf(T,Xt,Xe,nn,gt,Ve,bt):Sp(T,Xt,Xe,nn);jt.draw(ne,ne.gl.TRIANGLES,M,R,N,zi.backCCW,bn,Pt,Rt,c.id,Ot.layoutVertexBuffer,Ot.indexBuffer,Ot.segments,c.paint,T.transform.zoom,Kt,T.style.map.terrain&&Ot.centroidVertexBuffer)}}function xc(T,l,c,_,M,R,N,V,ne){var ae;const Me=T.style.projection,ke=T.context,De=T.transform,Ve=ke.gl,Xe=T.useProgram("hillshade"),mt=!T.options.moving;for(const ut of _){const gt=l.getTile(ut),bt=gt.fbo;if(!bt)continue;const Ot=Me.getMeshFromTileID(ke,ut.canonical,V,!0,"raster"),Pt=(ae=T.style.map.terrain)===null||ae===void 0?void 0:ae.getTerrainData(ut);ke.activeTexture.set(Ve.TEXTURE0),Ve.bindTexture(Ve.TEXTURE_2D,bt.colorAttachment.get());const Kt=De.getProjectionData({overscaledTileID:ut,aligned:mt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0});Xe.draw(ke,Ve.TRIANGLES,R,M[ut.overscaledZ],N,zi.backCCW,Oh(T,gt,c),Pt,Kt,c.id,Ot.vertexBuffer,Ot.indexBuffer,Ot.segments)}}const cs=[new o.P(0,0),new o.P(o.X,0),new o.P(o.X,o.X),new o.P(0,o.X)];function jo(T,l,c,_,M,R,N,V,ne=!1,ae=!1){const Me=_[_.length-1].overscaledZ,ke=T.context,De=ke.gl,Ve=T.useProgram("raster"),Xe=T.transform,mt=T.style.projection,ut=T.colorModeForRenderPass(),gt=!T.options.moving;for(const bt of _){const Ot=T.getDepthModeForSublayer(bt.overscaledZ-Me,c.paint.get("raster-opacity")===1?ei.ReadWrite:ei.ReadOnly,De.LESS),Pt=l.getTile(bt);Pt.registerFadeDuration(c.paint.get("raster-fade-duration"));const Kt=l.findLoadedParent(bt,0),jt=l.findLoadedSibling(bt),Rt=ds(Pt,Kt||jt||null,l,c,T.transform,T.style.map.terrain);let nn,Xt;const bn=c.paint.get("raster-resampling")==="nearest"?De.NEAREST:De.LINEAR;ke.activeTexture.set(De.TEXTURE0),Pt.texture.bind(bn,De.CLAMP_TO_EDGE,De.LINEAR_MIPMAP_NEAREST),ke.activeTexture.set(De.TEXTURE1),Kt?(Kt.texture.bind(bn,De.CLAMP_TO_EDGE,De.LINEAR_MIPMAP_NEAREST),nn=Math.pow(2,Kt.tileID.overscaledZ-Pt.tileID.overscaledZ),Xt=[Pt.tileID.canonical.x*nn%1,Pt.tileID.canonical.y*nn%1]):Pt.texture.bind(bn,De.CLAMP_TO_EDGE,De.LINEAR_MIPMAP_NEAREST),Pt.texture.useMipmap&&ke.extTextureFilterAnisotropic&&T.transform.pitch>20&&De.texParameterf(De.TEXTURE_2D,ke.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ke.extTextureFilterAnisotropicMax);const xn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(bt),Cn=Xe.getProjectionData({overscaledTileID:bt,aligned:gt,applyGlobeMatrix:!ae,applyTerrainMatrix:!0}),kn=Zd(Xt||[0,0],nn||1,Rt,c,V),Gn=mt.getMeshFromTileID(ke,bt.canonical,R,N,"raster");Ve.draw(ke,De.TRIANGLES,Ot,M?M[bt.overscaledZ]:Wi.disabled,ut,ne?zi.frontCCW:zi.backCCW,kn,xn,Cn,c.id,Gn.vertexBuffer,Gn.indexBuffer,Gn.segments)}}function ds(T,l,c,_,M,R){const N=_.paint.get("raster-fade-duration");if(!R&&N>0){const V=S.now(),ne=(V-T.timeAdded)/N,ae=l?(V-l.timeAdded)/N:-1,Me=c.getSource(),ke=rr(M,{tileSize:Me.tileSize,roundZoom:Me.roundZoom}),De=!l||Math.abs(l.tileID.overscaledZ-ke)>Math.abs(T.tileID.overscaledZ-ke),Ve=De&&T.refreshedUponExpiration?1:o.ab(De?ne:1-ae,0,1);return T.refreshedUponExpiration&&ne>=1&&(T.refreshedUponExpiration=!1),l?{opacity:1,mix:1-Ve}:{opacity:Ve,mix:0}}return{opacity:1,mix:0}}const Nf=new o.b4(1,0,0,1),vd=new o.b4(0,1,0,1),Cd=new o.b4(0,0,1,1),Nu=new o.b4(1,0,1,1),tc=new o.b4(0,1,1,1);function Ql(T,l,c,_){fl(T,0,l+c/2,T.transform.width,c,_)}function SA(T,l,c,_){fl(T,l-c/2,0,c,T.transform.height,_)}function fl(T,l,c,_,M,R){const N=T.context,V=N.gl;V.enable(V.SCISSOR_TEST),V.scissor(l*T.pixelRatio,c*T.pixelRatio,_*T.pixelRatio,M*T.pixelRatio),N.clear({color:R}),V.disable(V.SCISSOR_TEST)}function nc(T,l,c){const _=T.context,M=_.gl,R=T.useProgram("debug"),N=ei.disabled,V=Wi.disabled,ne=T.colorModeForRenderPass(),ae="$debug",Me=T.style.map.terrain&&T.style.map.terrain.getTerrainData(c);_.activeTexture.set(M.TEXTURE0);const ke=l.getTileByID(c.key).latestRawTileData,De=Math.floor((ke&&ke.byteLength||0)/1024),Ve=l.getTile(c).tileSize,Xe=512/Math.min(Ve,512)*(c.overscaledZ/T.transform.zoom)*.5;let mt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(mt+=` => ${c.overscaledZ}`),function(gt,bt){gt.initDebugOverlayCanvas();const Ot=gt.debugOverlayCanvas,Pt=gt.context.gl,Kt=gt.debugOverlayCanvas.getContext("2d");Kt.clearRect(0,0,Ot.width,Ot.height),Kt.shadowColor="white",Kt.shadowBlur=2,Kt.lineWidth=1.5,Kt.strokeStyle="white",Kt.textBaseline="top",Kt.font="bold 36px Open Sans, sans-serif",Kt.fillText(bt,5,5),Kt.strokeText(bt,5,5),gt.debugOverlayTexture.update(Ot),gt.debugOverlayTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE)}(T,`${mt} ${De}kB`);const ut=T.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});R.draw(_,M.TRIANGLES,N,V,Hi.alphaBlended,zi.disabled,pd(o.b4.transparent,Xe),null,ut,ae,T.debugBuffer,T.quadTriangleIndexBuffer,T.debugSegments),R.draw(_,M.LINE_STRIP,N,V,ne,zi.disabled,pd(o.b4.red),Me,ut,ae,T.debugBuffer,T.tileBorderIndexBuffer,T.debugSegments)}function Wu(T,l,c,_){const{isRenderingGlobe:M}=_,R=T.context,N=R.gl,V=T.transform,ne=T.colorModeForRenderPass(),ae=T.getDepthModeFor3D(),Me=T.useProgram("terrain");R.bindFramebuffer.set(null),R.viewport.set([0,0,T.width,T.height]);for(const ke of c){const De=l.getTerrainMesh(ke.tileID),Ve=T.renderToTexture.getTexture(ke),Xe=l.getTerrainData(ke.tileID);R.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,Ve.texture);const mt=l.getMeshFrameDelta(V.zoom),ut=V.calculateFogMatrix(ke.tileID.toUnwrapped()),gt=hd(mt,ut,T.style.sky,V.pitch,M),bt=V.getProjectionData({overscaledTileID:ke.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Me.draw(R,N.TRIANGLES,ae,Wi.disabled,ne,zi.backCCW,gt,Xe,bt,"terrain",De.vertexBuffer,De.indexBuffer,De.segments)}}function _d(T,l){if(!l.mesh){const c=new o.aC;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const _=new o.aE;_.emplaceBack(0,1,2),_.emplaceBack(0,2,3),l.mesh=new el(T.createVertexBuffer(c,ci.members),T.createIndexBuffer(_),o.aD.simpleSegment(0,0,c.length,_.length))}return l.mesh}class Gu{constructor(l,c){this.context=new th(l),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.aq(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=se.maxUnderzooming+se.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Gs}resize(l,c,_){if(this.width=Math.floor(l*_),this.height=Math.floor(c*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const l=this.context,c=new o.aC;c.emplaceBack(0,0),c.emplaceBack(o.X,0),c.emplaceBack(0,o.X),c.emplaceBack(o.X,o.X),this.tileExtentBuffer=l.createVertexBuffer(c,ci.members),this.tileExtentSegments=o.aD.simpleSegment(0,0,4,2);const _=new o.aC;_.emplaceBack(0,0),_.emplaceBack(o.X,0),_.emplaceBack(0,o.X),_.emplaceBack(o.X,o.X),this.debugBuffer=l.createVertexBuffer(_,ci.members),this.debugSegments=o.aD.simpleSegment(0,0,4,5);const M=new o.bT;M.emplaceBack(0,0,0,0),M.emplaceBack(o.X,0,o.X,0),M.emplaceBack(0,o.X,0,o.X),M.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=l.createVertexBuffer(M,Es.members),this.rasterBoundsSegments=o.aD.simpleSegment(0,0,4,2);const R=new o.aC;R.emplaceBack(0,0),R.emplaceBack(o.X,0),R.emplaceBack(0,o.X),R.emplaceBack(o.X,o.X),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(R,ci.members),this.rasterBoundsSegmentsPosOnly=o.aD.simpleSegment(0,0,4,5);const N=new o.aC;N.emplaceBack(0,0),N.emplaceBack(1,0),N.emplaceBack(0,1),N.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(N,ci.members),this.viewportSegments=o.aD.simpleSegment(0,0,4,2);const V=new o.bU;V.emplaceBack(0),V.emplaceBack(1),V.emplaceBack(3),V.emplaceBack(2),V.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(V);const ne=new o.aE;ne.emplaceBack(1,0,2),ne.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(ne);const ae=this.context.gl;this.stencilClearMode=new Wi({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO),this.tileExtentMesh=new el(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,c=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=o.H();o.bL(_,0,this.width,this.height,0,0,1),o.K(_,_,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const M={mainMatrix:_,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:_};this.useProgram("clippingMask",null,!0).draw(l,c.TRIANGLES,ei.disabled,this.stencilClearMode,Hi.disabled,zi.disabled,null,null,M,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,c,_){if(this.currentStencilSource===l.source||!l.isTileClipped()||!c||!c.length)return;this.currentStencilSource=l.source,this.nextStencilID+c.length>256&&this.clearStencil();const M=this.context;M.setColorMode(Hi.disabled),M.setDepthMode(ei.disabled);const R={};for(const N of c)R[N.key]=this.nextStencilID++;this._renderTileMasks(R,c,_,!0),this._renderTileMasks(R,c,_,!1),this._tileClippingMaskIDs=R}_renderTileMasks(l,c,_,M){const R=this.context,N=R.gl,V=this.style.projection,ne=this.transform,ae=this.useProgram("clippingMask");for(const Me of c){const ke=l[Me.key],De=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Me),Ve=V.getMeshFromTileID(this.context,Me.canonical,M,!0,"stencil"),Xe=ne.getProjectionData({overscaledTileID:Me,applyGlobeMatrix:!0,applyTerrainMatrix:!0});ae.draw(R,N.TRIANGLES,ei.disabled,new Wi({func:N.ALWAYS,mask:0},ke,255,N.KEEP,N.KEEP,N.REPLACE),Hi.disabled,_?zi.disabled:zi.backCCW,null,De,Xe,"$clipping",Ve.vertexBuffer,Ve.indexBuffer,Ve.segments)}}_renderTilesDepthBuffer(){const l=this.context,c=l.gl,_=this.style.projection,M=this.transform,R=this.useProgram("depth"),N=this.getDepthModeFor3D(),V=Oe(M,{tileSize:M.tileSize});for(const ne of V){const ae=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ne),Me=_.getMeshFromTileID(this.context,ne.canonical,!0,!0,"raster"),ke=M.getProjectionData({overscaledTileID:ne,applyGlobeMatrix:!0,applyTerrainMatrix:!0});R.draw(l,c.TRIANGLES,N,Wi.disabled,Hi.disabled,zi.backCCW,null,ae,ke,"$clipping",Me.vertexBuffer,Me.indexBuffer,Me.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,c=this.context.gl;return new Wi({func:c.NOTEQUAL,mask:255},l,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(l){const c=this.context.gl;return new Wi({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const c=this.context.gl,_=l.sort((N,V)=>V.overscaledZ-N.overscaledZ),M=_[_.length-1].overscaledZ,R=_[0].overscaledZ-M+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const N={};for(let V=0;V<R;V++)N[V+M]=new Wi({func:c.GEQUAL,mask:255},V+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=R,[N,_]}return[{[M]:Wi.disabled},_]}stencilConfigForOverlapTwoPass(l){const c=this.context.gl,_=l.sort((N,V)=>V.overscaledZ-N.overscaledZ),M=_[_.length-1].overscaledZ,R=_[0].overscaledZ-M+1;if(this.clearStencil(),R>1){const N={},V={};for(let ne=0;ne<R;ne++)N[ne+M]=new Wi({func:c.GREATER,mask:255},R+1+ne,255,c.KEEP,c.KEEP,c.REPLACE),V[ne+M]=new Wi({func:c.GREATER,mask:255},1+ne,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*R+1,[N,V,_]}return this.nextStencilID=3,[{[M]:new Wi({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[M]:new Wi({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},_]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Hi([l.CONSTANT_COLOR,l.ONE],new o.b4(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Hi.unblended:Hi.alphaBlended}getDepthModeForSublayer(l,c,_){if(!this.opaquePassEnabledForLayer())return ei.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new ei(_||this.context.gl.LEQUAL,c,[M,M])}getDepthModeFor3D(){return new ei(this.context.gl.LEQUAL,ei.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,c){var _,M;this.style=l,this.options=c,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(S.now()),this.imageManager.beginFrame();const R=this.style._order,N=this.style.sourceCaches,V={},ne={},ae={},Me={isRenderingToTexture:!1,isRenderingGlobe:((_=l.projection)===null||_===void 0?void 0:_.transitionState)>0};for(const De in N){const Ve=N[De];Ve.used&&Ve.prepare(this.context),V[De]=Ve.getVisibleCoordinates(!1),ne[De]=V[De].slice().reverse(),ae[De]=Ve.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let De=0;De<R.length;De++)if(this.style._layers[R[De]].is3D()){this.opaquePassCutoff=De;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const De of R){const Ve=this.style._layers[De];if(!Ve.hasOffscreenPass()||Ve.isHidden(this.transform.zoom))continue;const Xe=ne[Ve.source];(Ve.type==="custom"||Xe.length)&&this.renderLayer(this,N[Ve.source],Ve,Xe,Me)}if((M=this.style.projection)===null||M===void 0||M.updateGPUdependent({context:this.context,useProgram:De=>this.useProgram(De)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b4.black:o.b4.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(De,Ve){const Xe=De.context,mt=Xe.gl,ut=((jt,Rt,nn)=>{const Xt=Math.cos(Rt.rollInRadians),bn=Math.sin(Rt.rollInRadians),xn=tl(Rt),Cn=Rt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:jt.properties.get("sky-color"),u_horizon_color:jt.properties.get("horizon-color"),u_horizon:[(Rt.width/2-xn*bn)*nn,(Rt.height/2+xn*Xt)*nn],u_horizon_normal:[-bn,Xt],u_sky_horizon_blend:jt.properties.get("sky-horizon-blend")*Rt.height/2*nn,u_sky_blend:Cn}})(Ve,De.style.map.transform,De.pixelRatio),gt=new ei(mt.LEQUAL,ei.ReadWrite,[0,1]),bt=Wi.disabled,Ot=De.colorModeForRenderPass(),Pt=De.useProgram("sky"),Kt=_d(Xe,Ve);Pt.draw(Xe,mt.TRIANGLES,gt,bt,Ot,zi.disabled,ut,null,void 0,"sky",Kt.vertexBuffer,Kt.indexBuffer,Kt.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=R.length-1;this.currentLayer>=0;this.currentLayer--){const De=this.style._layers[R[this.currentLayer]],Ve=N[De.source],Xe=V[De.source];this._renderTileClippingMasks(De,Xe,!1),this.renderLayer(this,Ve,De,Xe,Me)}this.renderPass="translucent";let ke=!1;for(this.currentLayer=0;this.currentLayer<R.length;this.currentLayer++){const De=this.style._layers[R[this.currentLayer]],Ve=N[De.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(De,Me))continue;this.opaquePassEnabledForLayer()||ke||(ke=!0,Me.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Xe=(De.type==="symbol"?ae:ne)[De.source];this._renderTileClippingMasks(De,V[De.source],!1),this.renderLayer(this,Ve,De,Xe,Me)}if(Me.isRenderingGlobe&&function(De,Ve,Xe){const mt=De.context,ut=mt.gl,gt=De.useProgram("atmosphere"),bt=new ei(ut.LEQUAL,ei.ReadOnly,[0,1]),Ot=De.transform,Pt=function(Cn,kn){const Gn=Cn.properties.get("position"),Bn=[-Gn.x,-Gn.y,-Gn.z],Pr=o.aq(new Float64Array(16));return Cn.properties.get("anchor")==="map"&&(o.aX(Pr,Pr,kn.rollInRadians),o.aY(Pr,Pr,-kn.pitchInRadians),o.aX(Pr,Pr,kn.bearingInRadians),o.aY(Pr,Pr,kn.center.lat*Math.PI/180),o.bj(Pr,Pr,-kn.center.lng*Math.PI/180)),o.bS(Bn,Bn,Pr),Bn}(Xe,De.transform),Kt=Ot.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),jt=Ve.properties.get("atmosphere-blend")*Kt.projectionTransition;if(jt===0)return;const Rt=Ci(Ot.worldSize,Ot.center.lat),nn=Ot.inverseProjectionMatrix,Xt=new Float64Array(4);Xt[3]=1,o.al(Xt,Xt,Ot.modelViewProjectionMatrix),Xt[0]/=Xt[3],Xt[1]/=Xt[3],Xt[2]/=Xt[3],Xt[3]=1,o.al(Xt,Xt,nn),Xt[0]/=Xt[3],Xt[1]/=Xt[3],Xt[2]/=Xt[3],Xt[3]=1;const bn=((Cn,kn,Gn,Bn,Pr)=>({u_sun_pos:Cn,u_atmosphere_blend:kn,u_globe_position:Gn,u_globe_radius:Bn,u_inv_proj_matrix:Pr}))(Pt,jt,[Xt[0],Xt[1],Xt[2]],Rt,nn),xn=_d(mt,Ve);gt.draw(mt,ut.TRIANGLES,bt,Wi.disabled,Hi.alphaBlended,zi.disabled,bn,null,null,"atmosphere",xn.vertexBuffer,xn.indexBuffer,xn.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const De=function(Ve,Xe){let mt=null;const ut=Object.values(Ve._layers).flatMap(Pt=>Pt.source&&!Pt.isHidden(Xe)?[Ve.sourceCaches[Pt.source]]:[]),gt=ut.filter(Pt=>Pt.getSource().type==="vector"),bt=ut.filter(Pt=>Pt.getSource().type!=="vector"),Ot=Pt=>{(!mt||mt.getSource().maxzoom<Pt.getSource().maxzoom)&&(mt=Pt)};return gt.forEach(Pt=>Ot(Pt)),mt||bt.forEach(Pt=>Ot(Pt)),mt}(this.style,this.transform.zoom);De&&function(Ve,Xe,mt){for(let ut=0;ut<mt.length;ut++)nc(Ve,Xe,mt[ut])}(this,De,De.getVisibleCoordinates())}this.options.showPadding&&function(De){const Ve=De.transform.padding;Ql(De,De.transform.height-(Ve.top||0),3,Nf),Ql(De,Ve.bottom||0,3,vd),SA(De,Ve.left||0,3,Cd),SA(De,De.transform.width-(Ve.right||0),3,Nu);const Xe=De.transform.centerPoint;(function(mt,ut,gt,bt){fl(mt,ut-1,gt-10,2,20,bt),fl(mt,ut-10,gt-1,20,2,bt)})(De,Xe.x,De.transform.height-Xe.y,tc)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,_=this.transform.modelViewProjectionMatrix;let M=this.terrainFacilitator.dirty;M||(M=l?!o.bV(c,_):!o.bW(c,_)),M||(M=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),M&&(o.bX(c,_),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(R,N){const V=R.context,ne=V.gl,ae=R.transform,Me=Hi.unblended,ke=new ei(ne.LEQUAL,ei.ReadWrite,[0,1]),De=N.sourceCache.getRenderableTiles(),Ve=R.useProgram("terrainDepth");V.bindFramebuffer.set(N.getFramebuffer("depth").framebuffer),V.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),V.clear({color:o.b4.transparent,depth:1});for(const Xe of De){const mt=N.getTerrainMesh(Xe.tileID),ut=N.getTerrainData(Xe.tileID),gt=ae.getProjectionData({overscaledTileID:Xe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),bt={u_ele_delta:N.getMeshFrameDelta(ae.zoom)};Ve.draw(V,ne.TRIANGLES,ke,Wi.disabled,Me,zi.backCCW,bt,ut,gt,"terrain",mt.vertexBuffer,mt.indexBuffer,mt.segments)}V.bindFramebuffer.set(null),V.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain),function(R,N){const V=R.context,ne=V.gl,ae=R.transform,Me=Hi.unblended,ke=new ei(ne.LEQUAL,ei.ReadWrite,[0,1]),De=N.getCoordsTexture(),Ve=N.sourceCache.getRenderableTiles(),Xe=R.useProgram("terrainCoords");V.bindFramebuffer.set(N.getFramebuffer("coords").framebuffer),V.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),V.clear({color:o.b4.transparent,depth:1}),N.coordsIndex=[];for(const mt of Ve){const ut=N.getTerrainMesh(mt.tileID),gt=N.getTerrainData(mt.tileID);V.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,De.texture);const bt={u_terrain_coords_id:(255-N.coordsIndex.length)/255,u_texture:0,u_ele_delta:N.getMeshFrameDelta(ae.zoom)},Ot=ae.getProjectionData({overscaledTileID:mt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Xe.draw(V,ne.TRIANGLES,ke,Wi.disabled,Me,zi.backCCW,bt,gt,Ot,"terrain",ut.vertexBuffer,ut.indexBuffer,ut.segments),N.coordsIndex.push(mt.tileID.key)}V.bindFramebuffer.set(null),V.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain))}renderLayer(l,c,_,M,R){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="custom"||(M||[]).length)&&(this.id=_.id,o.bY(_)?function(N,V,ne,ae,Me,ke){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:De}=ke,Ve=Wi.disabled,Xe=N.colorModeForRenderPass();(ne._unevaluatedLayout.hasValue("text-variable-anchor")||ne._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(mt,ut,gt,bt,Ot,Pt,Kt,jt,Rt){const nn=ut.transform,Xt=ut.style.map.terrain,bn=Ot==="map",xn=Pt==="map";for(const Cn of mt){const kn=bt.getTile(Cn),Gn=kn.getBucket(gt);if(!Gn||!Gn.text||!Gn.text.segments.get().length)continue;const Bn=o.ah(Gn.textSizeData,nn.zoom),Pr=o.at(kn,1,ut.transform.zoom),Oi=dt(bn,ut.transform,Pr),Vi=gt.layout.get("icon-text-fit")!=="none"&&Gn.hasIconData();{const Io=Math.pow(2,nn.zoom-kn.tileID.overscaledZ),Ei=Xt?(No,Wo)=>Xt.getElevation(Cn,No,Wo):null;MA(Gn,bn,xn,Rt,nn,Oi,Io,Bn,Vi,o.au(nn,kn,Kt,jt),Cn.toUnwrapped(),Ei)}}}(ae,N,ne,V,ne.layout.get("text-rotation-alignment"),ne.layout.get("text-pitch-alignment"),ne.paint.get("text-translate"),ne.paint.get("text-translate-anchor"),Me),ne.paint.get("icon-opacity").constantOr(1)!==0&&$c(N,V,ne,ae,!1,ne.paint.get("icon-translate"),ne.paint.get("icon-translate-anchor"),ne.layout.get("icon-rotation-alignment"),ne.layout.get("icon-pitch-alignment"),ne.layout.get("icon-keep-upright"),Ve,Xe,De),ne.paint.get("text-opacity").constantOr(1)!==0&&$c(N,V,ne,ae,!0,ne.paint.get("text-translate"),ne.paint.get("text-translate-anchor"),ne.layout.get("text-rotation-alignment"),ne.layout.get("text-pitch-alignment"),ne.layout.get("text-keep-upright"),Ve,Xe,De),V.map.showCollisionBoxes&&(yd(N,V,ne,ae,!0),yd(N,V,ne,ae,!1))}(l,c,_,M,this.style.placement.variableOffsets,R):o.bZ(_)?function(N,V,ne,ae,Me){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=Me,De=ne.paint.get("circle-opacity"),Ve=ne.paint.get("circle-stroke-width"),Xe=ne.paint.get("circle-stroke-opacity"),mt=!ne.layout.get("circle-sort-key").isConstant();if(De.constantOr(1)===0&&(Ve.constantOr(1)===0||Xe.constantOr(1)===0))return;const ut=N.context,gt=ut.gl,bt=N.transform,Ot=N.getDepthModeForSublayer(0,ei.ReadOnly),Pt=Wi.disabled,Kt=N.colorModeForRenderPass(),jt=[],Rt=bt.getCircleRadiusCorrection();for(let nn=0;nn<ae.length;nn++){const Xt=ae[nn],bn=V.getTile(Xt),xn=bn.getBucket(ne);if(!xn)continue;const Cn=ne.paint.get("circle-translate"),kn=ne.paint.get("circle-translate-anchor"),Gn=o.au(bt,bn,Cn,kn),Bn=xn.programConfigurations.get(ne.id),Pr=N.useProgram("circle",Bn),Oi=xn.layoutVertexBuffer,Vi=xn.indexBuffer,Io=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Xt),Ei={programConfiguration:Bn,program:Pr,layoutVertexBuffer:Oi,indexBuffer:Vi,uniformValues:sf(N,bn,ne,Gn,Rt),terrainData:Io,projectionData:bt.getProjectionData({overscaledTileID:Xt,applyGlobeMatrix:!ke,applyTerrainMatrix:!0})};if(mt){const No=xn.segments.get();for(const Wo of No)jt.push({segments:new o.aD([Wo]),sortKey:Wo.sortKey,state:Ei})}else jt.push({segments:xn.segments,sortKey:0,state:Ei})}mt&&jt.sort((nn,Xt)=>nn.sortKey-Xt.sortKey);for(const nn of jt){const{programConfiguration:Xt,program:bn,layoutVertexBuffer:xn,indexBuffer:Cn,uniformValues:kn,terrainData:Gn,projectionData:Bn}=nn.state;bn.draw(ut,gt.TRIANGLES,Ot,Pt,Kt,zi.backCCW,kn,Gn,Bn,ne.id,xn,Cn,nn.segments,ne.paint,N.transform.zoom,Xt)}}(l,c,_,M,R):o.b_(_)?function(N,V,ne,ae,Me){if(ne.paint.get("heatmap-opacity")===0)return;const ke=N.context,{isRenderingToTexture:De,isRenderingGlobe:Ve}=Me;if(N.style.map.terrain){for(const Xe of ae){const mt=V.getTile(Xe);V.hasRenderableParent(Xe)||(N.renderPass==="offscreen"?Zo(N,mt,ne,Xe,Ve):N.renderPass==="translucent"&&Vc(N,ne,Xe,De,Ve))}ke.viewport.set([0,0,N.width,N.height])}else N.renderPass==="offscreen"?function(Xe,mt,ut,gt){const bt=Xe.context,Ot=bt.gl,Pt=Xe.transform,Kt=Wi.disabled,jt=new Hi([Ot.ONE,Ot.ONE],o.b4.transparent,[!0,!0,!0,!0]);(function(Rt,nn,Xt){const bn=Rt.gl;Rt.activeTexture.set(bn.TEXTURE1),Rt.viewport.set([0,0,nn.width/4,nn.height/4]);let xn=Xt.heatmapFbos.get(o.bP);xn?(bn.bindTexture(bn.TEXTURE_2D,xn.colorAttachment.get()),Rt.bindFramebuffer.set(xn.framebuffer)):(xn=ec(Rt,nn.width/4,nn.height/4),Xt.heatmapFbos.set(o.bP,xn))})(bt,Xe,ut),bt.clear({color:o.b4.transparent});for(let Rt=0;Rt<gt.length;Rt++){const nn=gt[Rt];if(mt.hasRenderableParent(nn))continue;const Xt=mt.getTile(nn),bn=Xt.getBucket(ut);if(!bn)continue;const xn=bn.programConfigurations.get(ut.id),Cn=Xe.useProgram("heatmap",xn),kn=Pt.getProjectionData({overscaledTileID:nn,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Gn=Pt.getCircleRadiusCorrection();Cn.draw(bt,Ot.TRIANGLES,ei.disabled,Kt,jt,zi.backCCW,yc(Xt,Pt.zoom,ut.paint.get("heatmap-intensity"),Gn),null,kn,ut.id,bn.layoutVertexBuffer,bn.indexBuffer,bn.segments,ut.paint,Pt.zoom,xn)}bt.viewport.set([0,0,Xe.width,Xe.height])}(N,V,ne,ae):N.renderPass==="translucent"&&function(Xe,mt){const ut=Xe.context,gt=ut.gl;ut.setColorMode(Xe.colorModeForRenderPass());const bt=mt.heatmapFbos.get(o.bP);bt&&(ut.activeTexture.set(gt.TEXTURE0),gt.bindTexture(gt.TEXTURE_2D,bt.colorAttachment.get()),ut.activeTexture.set(gt.TEXTURE1),ju(ut,mt).bind(gt.LINEAR,gt.CLAMP_TO_EDGE),Xe.useProgram("heatmapTexture").draw(ut,gt.TRIANGLES,ei.disabled,Wi.disabled,Xe.colorModeForRenderPass(),zi.disabled,Bh(Xe,mt,0,1),null,null,mt.id,Xe.viewportBuffer,Xe.quadTriangleIndexBuffer,Xe.viewportSegments,mt.paint,Xe.transform.zoom))}(N,ne)}(l,c,_,M,R):o.b$(_)?function(N,V,ne,ae,Me){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=Me,De=ne.paint.get("line-opacity"),Ve=ne.paint.get("line-width");if(De.constantOr(1)===0||Ve.constantOr(1)===0)return;const Xe=N.getDepthModeForSublayer(0,ei.ReadOnly),mt=N.colorModeForRenderPass(),ut=ne.paint.get("line-dasharray"),gt=ne.paint.get("line-pattern"),bt=gt.constantOr(1),Ot=ne.paint.get("line-gradient"),Pt=ne.getCrossfadeParameters(),Kt=bt?"linePattern":ut?"lineSDF":Ot?"lineGradient":"line",jt=N.context,Rt=jt.gl,nn=N.transform;let Xt=!0;for(const bn of ae){const xn=V.getTile(bn);if(bt&&!xn.patternsLoaded())continue;const Cn=xn.getBucket(ne);if(!Cn)continue;const kn=Cn.programConfigurations.get(ne.id),Gn=N.context.program.get(),Bn=N.useProgram(Kt,kn),Pr=Xt||Bn.program!==Gn,Oi=N.style.map.terrain&&N.style.map.terrain.getTerrainData(bn),Vi=gt.constantOr(null);if(Vi&&xn.imageAtlas){const wo=xn.imageAtlas,vo=wo.patternPositions[Vi.to.toString()],Ta=wo.patternPositions[Vi.from.toString()];vo&&Ta&&kn.setConstantPatternPositions(vo,Ta)}const Io=nn.getProjectionData({overscaledTileID:bn,applyGlobeMatrix:!ke,applyTerrainMatrix:!0}),Ei=nn.getPixelScale(),No=bt?Ih(N,xn,ne,Ei,Pt):ut?vu(N,xn,ne,Ei,ut,Pt):Ot?yu(N,xn,ne,Ei,Cn.lineClipsArray.length):Nc(N,xn,ne,Ei);if(bt)jt.activeTexture.set(Rt.TEXTURE0),xn.imageAtlasTexture.bind(Rt.LINEAR,Rt.CLAMP_TO_EDGE),kn.updatePaintBuffers(Pt);else if(ut&&(Pr||N.lineAtlas.dirty))jt.activeTexture.set(Rt.TEXTURE0),N.lineAtlas.bind(jt);else if(Ot){const wo=Cn.gradients[ne.id];let vo=wo.texture;if(ne.gradientVersion!==wo.version){let Ta=256;if(ne.stepInterpolant){const Go=V.getSource().maxzoom,hs=bn.canonical.z===Go?Math.ceil(1<<N.transform.maxZoom-bn.canonical.z):1;Ta=o.ab(o.bQ(Cn.maxLineLength/o.X*1024*hs),256,jt.maxTextureSize)}wo.gradient=o.bR({expression:ne.gradientExpression(),evaluationKey:"lineProgress",resolution:Ta,image:wo.gradient||void 0,clips:Cn.lineClipsArray}),wo.texture?wo.texture.update(wo.gradient):wo.texture=new oe(jt,wo.gradient,Rt.RGBA),wo.version=ne.gradientVersion,vo=wo.texture}jt.activeTexture.set(Rt.TEXTURE0),vo.bind(ne.stepInterpolant?Rt.NEAREST:Rt.LINEAR,Rt.CLAMP_TO_EDGE)}let Wo;if(ke){const[wo]=N.getStencilConfigForOverlapAndUpdateStencilID(ae);Wo=wo[bn.overscaledZ]}else Wo=N.stencilModeForClipping(bn);Bn.draw(jt,Rt.TRIANGLES,Xe,Wo,mt,zi.disabled,No,Oi,Io,ne.id,Cn.layoutVertexBuffer,Cn.indexBuffer,Cn.segments,ne.paint,N.transform.zoom,kn,Cn.layoutVertexBuffer2),Xt=!1}}(l,c,_,M,R):o.c0(_)?function(N,V,ne,ae,Me){const ke=ne.paint.get("fill-color"),De=ne.paint.get("fill-opacity");if(De.constantOr(1)===0)return;const{isRenderingToTexture:Ve}=Me,Xe=N.colorModeForRenderPass(),mt=ne.paint.get("fill-pattern"),ut=N.opaquePassEnabledForLayer()&&!mt.constantOr(1)&&ke.constantOr(o.b4.transparent).a===1&&De.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===ut){const gt=N.getDepthModeForSublayer(1,N.renderPass==="opaque"?ei.ReadWrite:ei.ReadOnly);rh(N,V,ne,ae,gt,Xe,!1,Ve)}if(N.renderPass==="translucent"&&ne.paint.get("fill-antialias")){const gt=N.getDepthModeForSublayer(ne.getPaintProperty("fill-outline-color")?2:0,ei.ReadOnly);rh(N,V,ne,ae,gt,Xe,!0,Ve)}}(l,c,_,M,R):o.c1(_)?function(N,V,ne,ae,Me){const ke=ne.paint.get("fill-extrusion-opacity");if(ke===0)return;const{isRenderingToTexture:De}=Me;if(N.renderPass==="translucent"){const Ve=new ei(N.context.gl.LEQUAL,ei.ReadWrite,N.depthRangeFor3D);if(ke!==1||ne.paint.get("fill-extrusion-pattern").constantOr(1))Zc(N,V,ne,ae,Ve,Wi.disabled,Hi.disabled,De),Zc(N,V,ne,ae,Ve,N.stencilModeFor3D(),N.colorModeForRenderPass(),De);else{const Xe=N.colorModeForRenderPass();Zc(N,V,ne,ae,Ve,Wi.disabled,Xe,De)}}}(l,c,_,M,R):o.c2(_)?function(N,V,ne,ae,Me){if(N.renderPass!=="offscreen"&&N.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=Me,De=N.context,Ve=N.style.projection.useSubdivision,Xe=N.getDepthModeForSublayer(0,ei.ReadOnly),mt=N.colorModeForRenderPass();if(N.renderPass==="offscreen")(function(ut,gt,bt,Ot,Pt,Kt,jt){const Rt=ut.context,nn=Rt.gl;for(const Xt of bt){const bn=gt.getTile(Xt),xn=bn.dem;if(!xn||!xn.data||!bn.needsHillshadePrepare)continue;const Cn=xn.dim,kn=xn.stride,Gn=xn.getPixels();if(Rt.activeTexture.set(nn.TEXTURE1),Rt.pixelStoreUnpackPremultiplyAlpha.set(!1),bn.demTexture=bn.demTexture||ut.getTileTexture(kn),bn.demTexture){const Pr=bn.demTexture;Pr.update(Gn,{premultiply:!1}),Pr.bind(nn.NEAREST,nn.CLAMP_TO_EDGE)}else bn.demTexture=new oe(Rt,Gn,nn.RGBA,{premultiply:!1}),bn.demTexture.bind(nn.NEAREST,nn.CLAMP_TO_EDGE);Rt.activeTexture.set(nn.TEXTURE0);let Bn=bn.fbo;if(!Bn){const Pr=new oe(Rt,{width:Cn,height:Cn,data:null},nn.RGBA);Pr.bind(nn.LINEAR,nn.CLAMP_TO_EDGE),Bn=bn.fbo=Rt.createFramebuffer(Cn,Cn,!0,!1),Bn.colorAttachment.set(Pr.texture)}Rt.bindFramebuffer.set(Bn.framebuffer),Rt.viewport.set([0,0,Cn,Cn]),ut.useProgram("hillshadePrepare").draw(Rt,nn.TRIANGLES,Pt,Kt,jt,zi.disabled,md(bn.tileID,xn),null,null,Ot.id,ut.rasterBoundsBuffer,ut.quadTriangleIndexBuffer,ut.rasterBoundsSegments),bn.needsHillshadePrepare=!1}})(N,V,ae,ne,Xe,Wi.disabled,mt),De.viewport.set([0,0,N.width,N.height]);else if(N.renderPass==="translucent")if(Ve){const[ut,gt,bt]=N.stencilConfigForOverlapTwoPass(ae);xc(N,V,ne,bt,ut,Xe,mt,!1,ke),xc(N,V,ne,bt,gt,Xe,mt,!0,ke)}else{const[ut,gt]=N.getStencilConfigForOverlapAndUpdateStencilID(ae);xc(N,V,ne,gt,ut,Xe,mt,!1,ke)}}(l,c,_,M,R):o.c3(_)?function(N,V,ne,ae,Me){if(N.renderPass!=="translucent"||ne.paint.get("raster-opacity")===0||!ae.length)return;const{isRenderingToTexture:ke}=Me,De=V.getSource(),Ve=N.style.projection.useSubdivision;if(De instanceof or)jo(N,V,ne,ae,null,!1,!1,De.tileCoords,De.flippedWindingOrder,ke);else if(Ve){const[Xe,mt,ut]=N.stencilConfigForOverlapTwoPass(ae);jo(N,V,ne,ut,Xe,!1,!0,cs,!1,ke),jo(N,V,ne,ut,mt,!0,!0,cs,!1,ke)}else{const[Xe,mt]=N.getStencilConfigForOverlapAndUpdateStencilID(ae);jo(N,V,ne,mt,Xe,!1,!0,cs,!1,ke)}}(l,c,_,M,R):o.c4(_)?function(N,V,ne,ae,Me){const ke=ne.paint.get("background-color"),De=ne.paint.get("background-opacity");if(De===0)return;const{isRenderingToTexture:Ve}=Me,Xe=N.context,mt=Xe.gl,ut=N.style.projection,gt=N.transform,bt=gt.tileSize,Ot=ne.paint.get("background-pattern");if(N.isPatternMissing(Ot))return;const Pt=!Ot&&ke.a===1&&De===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass!==Pt)return;const Kt=Wi.disabled,jt=N.getDepthModeForSublayer(0,Pt==="opaque"?ei.ReadWrite:ei.ReadOnly),Rt=N.colorModeForRenderPass(),nn=N.useProgram(Ot?"backgroundPattern":"background"),Xt=ae||Oe(gt,{tileSize:bt,terrain:N.style.map.terrain});Ot&&(Xe.activeTexture.set(mt.TEXTURE0),N.imageManager.bind(N.context));const bn=ne.getCrossfadeParameters();for(const xn of Xt){const Cn=gt.getProjectionData({overscaledTileID:xn,applyGlobeMatrix:!Ve,applyTerrainMatrix:!0}),kn=Ot?uf(De,N,Ot,{tileID:xn,tileSize:bt},bn):Gc(De,ke),Gn=N.style.map.terrain&&N.style.map.terrain.getTerrainData(xn),Bn=ut.getMeshFromTileID(Xe,xn.canonical,!1,!0,"raster");nn.draw(Xe,mt.TRIANGLES,jt,Kt,Rt,zi.backCCW,kn,Gn,Cn,ne.id,Bn.vertexBuffer,Bn.indexBuffer,Bn.segments)}}(l,0,_,M,R):o.c5(_)&&function(N,V,ne,ae){const{isRenderingGlobe:Me}=ae,ke=N.context,De=ne.implementation,Ve=N.style.projection,Xe=N.transform,mt=Xe.getProjectionDataForCustomLayer(Me),ut={farZ:Xe.farZ,nearZ:Xe.nearZ,fov:Xe.fov*Math.PI/180,modelViewProjectionMatrix:Xe.modelViewProjectionMatrix,projectionMatrix:Xe.projectionMatrix,shaderData:{variantName:Ve.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ve.shaderPreludeCode.vertexSource}`,define:Ve.shaderDefine},defaultProjectionData:mt},gt=De.renderingMode?De.renderingMode:"2d";if(N.renderPass==="offscreen"){const bt=De.prerender;bt&&(N.setCustomLayerDefaults(),ke.setColorMode(N.colorModeForRenderPass()),bt.call(De,ke.gl,ut),ke.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),ke.setColorMode(N.colorModeForRenderPass()),ke.setStencilMode(Wi.disabled);const bt=gt==="3d"?N.getDepthModeFor3D():N.getDepthModeForSublayer(0,ei.ReadOnly);ke.setDepthMode(bt),De.render(ke.gl,ut),ke.setDirty(),N.setBaseState(),ke.bindFramebuffer.set(null)}}(l,0,_,R))}saveTileTexture(l){const c=this._tileTextures[l.size[0]];c?c.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const c=this._tileTextures[l];return c&&c.length>0?c.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const c=this.imageManager.getPattern(l.from.toString()),_=this.imageManager.getPattern(l.to.toString());return!c||!_}useProgram(l,c,_=!1){this.cache=this.cache||{};const M=!!this.style.map.terrain,R=this.style.projection,N=l+(c?c.cacheKey:"")+`/${_?aA:R.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(M?"/terrain":"");return this.cache[N]||(this.cache[N]=new Hd(this.context,ii[l],c,gd[l],this._showOverdrawInspector,M,_?ii.projectionMercator:R.shaderPreludeCode,_?da:R.shaderDefine)),this.cache[N]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:c}=this.context.gl;return this.width!==l||this.height!==c}}function ih(T,l){let c,_=!1,M=null,R=null;const N=()=>{M=null,_&&(T.apply(R,c),M=setTimeout(N,l),_=!1)};return(...V)=>(_=!0,R=this,c=V,M||N(),M)}class rc{constructor(l){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let _;return c.split("&").map(M=>M.split("=")).forEach(M=>{M[0]===this._hashName&&(_=M)}),(_&&_[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:_,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const _=c.join("/");let M=_;M.split("&").length>0&&(M=M.split("&")[0]),this._hashName&&(M=`${this._hashName}=${_}`);let R=window.location.hash.replace(M,"");R.startsWith("#&")?R=R.slice(0,1)+R.slice(2):R==="#"&&(R="");let N=window.location.href.replace(/(#.+)?$/,R);N=N.replace("&&","&"),window.history.replaceState(window.history.state,null,N)},this._updateHash=ih(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const c=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,M=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,M),N=Math.round(c.lng*R)/R,V=Math.round(c.lat*R)/R,ne=this._map.getBearing(),ae=this._map.getPitch();let Me="";if(Me+=l?`/${N}/${V}/${_}`:`${_}/${V}/${N}`,(ne||ae)&&(Me+="/"+Math.round(10*ne)/10),ae&&(Me+=`/${Math.round(ae)}`),this._hashName){const ke=this._hashName;let De=!1;const Ve=window.location.hash.slice(1).split("&").map(Xe=>{const mt=Xe.split("=")[0];return mt===ke?(De=!0,`${mt}=${Me}`):Xe}).filter(Xe=>Xe);return De||Ve.push(`${ke}=${Me}`),`#${Ve.join("&")}`}return`#${Me}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new o.N(+l[2],+l[1])}catch{return!1}const c=+l[0],_=+(l[3]||0),M=+(l[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&_>=0&&_<=180&&M>=this._map.getMinPitch()&&M<=this._map.getMaxPitch()}}const Qu={linearity:.3,easing:o.c6(0,0,.3,1)},qu=o.e({deceleration:2500,maxSpeed:1400},Qu),EA=o.e({deceleration:20,maxSpeed:1400},Qu),wc=o.e({deceleration:1e3,maxSpeed:360},Qu),xu=o.e({deceleration:1e3,maxSpeed:90},Qu),Xc=o.e({deceleration:1e3,maxSpeed:360},Qu);class ot{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:S.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,c=S.now();for(;l.length>0&&c-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)c.zoom+=R.zoomDelta||0,c.bearing+=R.bearingDelta||0,c.pitch+=R.pitchDelta||0,c.roll+=R.rollDelta||0,R.panDelta&&c.pan._add(R.panDelta),R.around&&(c.around=R.around),R.pinchAround&&(c.pinchAround=R.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(c.pan.mag()){const R=Oo(c.pan.mag(),_,o.e({},qu,l||{})),N=c.pan.mult(R.amount/c.pan.mag()),V=this._map.cameraHelper.handlePanInertia(N,this._map.transform);M.center=V.easingCenter,M.offset=V.easingOffset,Na(M,R)}if(c.zoom){const R=Oo(c.zoom,_,EA);M.zoom=this._map.transform.zoom+R.amount,Na(M,R)}if(c.bearing){const R=Oo(c.bearing,_,wc);M.bearing=this._map.transform.bearing+o.ab(R.amount,-179,179),Na(M,R)}if(c.pitch){const R=Oo(c.pitch,_,xu);M.pitch=this._map.transform.pitch+R.amount,Na(M,R)}if(c.roll){const R=Oo(c.roll,_,Xc);M.roll=this._map.transform.roll+o.ab(R.amount,-179,179),Na(M,R)}if(M.zoom||M.bearing){const R=c.pinchAround===void 0?c.around:c.pinchAround;M.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),o.e(M,{noMoveStart:!0})}}function Na(T,l){(!T.duration||T.duration<l.duration)&&(T.duration=l.duration,T.easing=l.easing)}function Oo(T,l,c){const{maxSpeed:_,linearity:M,deceleration:R}=c,N=o.ab(T*M/(l/1e3),-_,_),V=Math.abs(N)/(R*M);return{easing:c.easing,duration:1e3*V,amount:N*(V/2)}}class Ki extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,_,M={}){const R=B.mousePos(c.getCanvas(),_),N=c.unproject(R);super(l,o.e({point:R,lngLat:N,originalEvent:_},M)),this._defaultPrevented=!1,this.target=c}}class Vr extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,_){const M=l==="touchend"?_.changedTouches:_.touches,R=B.touchPos(c.getCanvasContainer(),M),N=R.map(ne=>c.unproject(ne)),V=R.reduce((ne,ae,Me,ke)=>ne.add(ae.div(ke.length)),new o.P(0,0));super(l,{points:R,point:V,lngLats:N,lngLat:c.unproject(V),originalEvent:_}),this._defaultPrevented=!1}}class Bs extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,_){super(l,{originalEvent:_}),this._defaultPrevented=!1}}class bd{constructor(l,c){this._map=l,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Bs(l.type,this._map,l))}mousedown(l,c){return this._mousedownPos=c,this._firePreventable(new Ki(l.type,this._map,l))}mouseup(l){this._map.fire(new Ki(l.type,this._map,l))}click(l,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ki(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Ki(l.type,this._map,l))}mouseover(l){this._map.fire(new Ki(l.type,this._map,l))}mouseout(l){this._map.fire(new Ki(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Vr(l.type,this._map,l))}touchmove(l){this._map.fire(new Vr(l.type,this._map,l))}touchend(l){this._map.fire(new Vr(l.type,this._map,l))}touchcancel(l){this._map.fire(new Vr(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class oh{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Ki(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ki("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Ki(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ia{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(o.P.convert(l),this._map.terrain)}}class qs{constructor(l,c){this._map=l,this._tr=new Ia(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,c){this.isEnabled()&&l.shiftKey&&l.button===0&&(B.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(l,c){if(!this._active)return;const _=c;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=_,this._box||(this._box=B.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const R=Math.min(M.x,_.x),N=Math.max(M.x,_.x),V=Math.min(M.y,_.y),ne=Math.max(M.y,_.y);B.setTransform(this._box,`translate(${R}px,${V}px)`),this._box.style.width=N-R+"px",this._box.style.height=ne-V+"px"}mouseupWindow(l,c){if(!this._active||l.button!==0)return;const _=this._startPos,M=c;if(this.reset(),B.suppressClick(),_.x!==M.x||_.y!==M.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:l})),{cameraAnimation:R=>R.fitScreenCoordinates(_,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(B.remove(this._box),this._box=null),B.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,c){return this._map.fire(new o.k(l,{originalEvent:c}))}}function bs(T,l){if(T.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${T.length}, points ${l.length}`);const c={};for(let _=0;_<T.length;_++)c[T[_].identifier]=l[_];return c}class dA{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,c,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),_.length===this.numTouches&&(this.centroid=function(M){const R=new o.P(0,0);for(const N of M)R._add(N);return R.div(M.length)}(c),this.touches=bs(_,c)))}touchmove(l,c,_){if(this.aborted||!this.centroid)return;const M=bs(_,c);for(const R in this.touches){const N=M[R];(!N||N.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(l,c,_){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class Os{constructor(l){this.singleTap=new dA(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,c,_){this.singleTap.touchstart(l,c,_)}touchmove(l,c,_){this.singleTap.touchmove(l,c,_)}touchend(l,c,_){const M=this.singleTap.touchend(l,c,_);if(M){const R=l.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(M)<30;if(R&&N||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class vr{constructor(l){this._tr=new Ia(l),this._zoomIn=new Os({numTouches:1,numTaps:2}),this._zoomOut=new Os({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,c,_){this._zoomIn.touchstart(l,c,_),this._zoomOut.touchstart(l,c,_)}touchmove(l,c,_){this._zoomIn.touchmove(l,c,_),this._zoomOut.touchmove(l,c,_)}touchend(l,c,_){const M=this._zoomIn.touchend(l,c,_),R=this._zoomOut.touchend(l,c,_),N=this._tr;return M?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:V=>V.easeTo({duration:300,zoom:N.zoom+1,around:N.unproject(M)},{originalEvent:l})}):R?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:V=>V.easeTo({duration:300,zoom:N.zoom-1,around:N.unproject(R)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ca{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const c=this._moveFunction(...l);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(l,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,c){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const M=Array.isArray(c)?c[0]:c;return!this._moved&&M.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(_,M))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&B.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Jc={0:1,2:2};class ka{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const c=B.mouseButton(l);this._eventButton=c}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(c,_){const M=Jc[_];return c.buttons===void 0||(c.buttons&M)!==M}(l,this._eventButton)}isValidEndEvent(l){return B.mouseButton(l)===this._eventButton}}class ic{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class xd{constructor(l=new ka({checkCorrectEvent:()=>!0}),c=new ic){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(l,c,_){return l instanceof MouseEvent?c(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?_(l):void 0}startMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const wd=T=>{T.mousedown=T.dragStart,T.mousemoveWindow=T.dragMove,T.mouseup=T.dragEnd,T.contextmenu=l=>{l.preventDefault()}};class Si{constructor(l,c){this._clickTolerance=l.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,c,_){return this._calculateTransform(l,c,_)}touchmove(l,c,_){if(this._active){if(!this._shouldBePrevented(_.length))return l.preventDefault(),this._calculateTransform(l,c,_);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,c,_){this._calculateTransform(l,c,_),this._active&&this._shouldBePrevented(_.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,c,_){_.length>0&&(this._active=!0);const M=bs(_,c),R=new o.P(0,0),N=new o.P(0,0);let V=0;for(const ae in M){const Me=M[ae],ke=this._touches[ae];ke&&(R._add(Me),N._add(Me.sub(ke)),V++,M[ae]=Me)}if(this._touches=M,this._shouldBePrevented(V)||!N.mag())return;const ne=N.div(V);return this._sum._add(ne),this._sum.mag()<this._clickTolerance?void 0:{around:R.div(V),panDelta:ne}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Md{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,c,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([c[0],c[1]]))}touchmove(l,c,_){if(!this._firstTwoTouches)return;l.preventDefault();const[M,R]=this._firstTwoTouches,N=ql(_,c,M),V=ql(_,c,R);if(!N||!V)return;const ne=this._aroundCenter?null:N.add(V).div(2);return this._move([N,V],ne,l)}touchend(l,c,_){if(!this._firstTwoTouches)return;const[M,R]=this._firstTwoTouches,N=ql(_,c,M),V=ql(_,c,R);N&&V||(this._active&&B.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ql(T,l,c){for(let _=0;_<T.length;_++)if(T[_].identifier===c)return l[_]}function Sd(T,l){return Math.log(T/l)/Math.LN2}class Ed extends Md{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,c){const _=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Sd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sd(this._distance,_),pinchAround:c}}}function BA(T,l){return 180*T.angleWith(l)/Math.PI}class oc extends Md{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,c,_){const M=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:BA(this._vector,M),pinchAround:c}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const c=25/(Math.PI*this._minDiameter)*360,_=BA(l,this._startVector);return Math.abs(_)<c}}function hA(T){return Math.abs(T.y)>Math.abs(T.x)}class Mc extends Md{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,c,_){super.touchstart(l,c,_),this._currentTouchCount=_.length}_start(l){this._lastPoints=l,hA(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,c,_){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const M=l[0].sub(this._lastPoints[0]),R=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,R,_.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(M.y+R.y)/2*-.5}):void 0}gestureBeginsVertically(l,c,_){if(this._valid!==void 0)return this._valid;const M=l.mag()>=2,R=c.mag()>=2;if(!M&&!R)return;if(!M||!R)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const N=l.y>0==c.y>0;return hA(l)&&hA(c)&&N}}const Is={panStep:100,bearingStep:15,pitchStep:10};class xo{constructor(l){this._tr=new Ia(l);const c=Is;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let c=0,_=0,M=0,R=0,N=0;switch(l.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:l.shiftKey?_=-1:(l.preventDefault(),R=-1);break;case 39:l.shiftKey?_=1:(l.preventDefault(),R=1);break;case 38:l.shiftKey?M=1:(l.preventDefault(),N=-1);break;case 40:l.shiftKey?M=-1:(l.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(_=0,M=0),{cameraAnimation:V=>{const ne=this._tr;V.easeTo({duration:300,easeId:"keyboardHandler",easing:wu,zoom:c?Math.round(ne.zoom)+c*(l.shiftKey?2:1):ne.zoom,bearing:ne.bearing+_*this._bearingStep,pitch:ne.pitch+M*this._pitchStep,offset:[-R*this._panStep,-N*this._panStep],center:ne.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function wu(T){return T*(2-T)}const Wa=4.000244140625;class Fs{constructor(l,c){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=l,this._tr=new Ia(l),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let c=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const _=S.now(),M=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,c!==0&&c%Wa==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(M*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),l.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=l,this._delta-=c,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=B.mousePos(this._map.getCanvas(),l),_=this._tr;this._aroundPoint=this._aroundCenter?_.transform.locationToScreenPoint(o.N.convert(_.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const V=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=V),typeof this._targetZoom=="number"&&(this._targetZoom+=V)}if(this._delta!==0){const V=this._type==="wheel"&&Math.abs(this._delta)>Wa?this._wheelZoomRate:this._defaultZoomRate;let ne=2/(1+Math.exp(-Math.abs(this._delta*V)));this._delta<0&&ne!==0&&(ne=1/ne);const ae=typeof this._targetZoom!="number"?l.scale:o.aG(this._targetZoom);this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,o.a8(ae*ne))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,_=this._startZoom,M=this._easing;let R,N=!1;if(this._type==="wheel"&&_&&M){const V=S.now()-this._lastWheelEventTime,ne=Math.min((V+5)/200,1),ae=M(ne);R=o.y.number(_,c,ae),ne<1?this._frameId||(this._frameId=!0):N=!0}else R=c,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=R,{noInertia:!0,needsRenderFrame:!N,zoomDelta:R-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let c=o.c8;if(this._prevEase){const _=this._prevEase,M=(S.now()-_.start)/_.duration,R=_.easing(M+.01)-_.easing(M),N=.27/Math.sqrt(R*R+1e-4)*.01,V=Math.sqrt(.0729-N*N);c=o.c6(N,V,.25,1)}return this._prevEase={start:S.now(),duration:l,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Xo{constructor(l,c){this._clickZoom=l,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class lu{constructor(l){this._tr=new Ia(l),this.reset()}reset(){this._active=!1}dblclick(l,c){return l.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yu{constructor(){this._tap=new Os({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,c,_){if(!this._swipePoint)if(this._tapTime){const M=c[0],R=l.timeStamp-this._tapTime<500,N=this._tapPoint.dist(M)<30;R&&N?_.length>0&&(this._swipePoint=M,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(l,c,_)}touchmove(l,c,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const M=c[0],R=M.y-this._swipePoint.y;return this._swipePoint=M,l.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(l,c,_)}touchend(l,c,_){if(this._tapTime)this._swipePoint&&_.length===0&&this.reset();else{const M=this._tap.touchend(l,c,_);M&&(this._tapTime=l.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sc{constructor(l,c,_){this._el=l,this._mousePan=c,this._touchPan=_}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class sh{constructor(l,c,_,M){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=c,this._mousePitch=_,this._mouseRoll=M}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class OA{constructor(l,c,_,M){this._el=l,this._touchZoom=c,this._touchRotate=_,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ec{constructor(l,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=B.create("div","maplibregl-cooperative-gesture-screen",l);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const _=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),M=document.createElement("div");M.className="maplibregl-desktop-message",M.textContent=c,this._container.appendChild(M);const R=document.createElement("div");R.className="maplibregl-mobile-message",R.textContent=_,this._container.appendChild(R),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(B.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,c){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:l,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ys=T=>T.zoom||T.drag||T.roll||T.pitch||T.rotate;class ha extends o.k{}function yr(T){return T.panDelta&&T.panDelta.mag()||T.zoomDelta||T.bearingDelta||T.pitchDelta||T.rollDelta}class Zr{constructor(l,c){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,R)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const N=M.type==="renderFrame"?void 0:M,V={needsRenderFrame:!1},ne={},ae={},Me=M.touches,ke=Me?this._getMapTouches(Me):void 0,De=ke?B.touchPos(this._map.getCanvas(),ke):B.mousePos(this._map.getCanvas(),M);for(const{handlerName:mt,handler:ut,allowed:gt}of this._handlers){if(!ut.isEnabled())continue;let bt;this._blockedByActive(ae,gt,mt)?ut.reset():ut[R||M.type]&&(bt=ut[R||M.type](M,De,ke),this.mergeHandlerResult(V,ne,bt,mt,N),bt&&bt.needsRenderFrame&&this._triggerRenderFrame()),(bt||ut.isActive())&&(ae[mt]=ut)}const Ve={};for(const mt in this._previousActiveHandlers)ae[mt]||(Ve[mt]=N);this._previousActiveHandlers=ae,(Object.keys(Ve).length||yr(V))&&(this._changes.push([V,ne,Ve]),this._triggerRenderFrame()),(Object.keys(ae).length||yr(V))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Xe}=V;Xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Xe(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ot(l),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,R,N]of this._listeners)B.addEventListener(M,R,M===document?this.handleWindowEvent:this.handleEvent,N)}destroy(){for(const[l,c,_]of this._listeners)B.removeEventListener(l,c,l===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(l){const c=this._map,_=c.getCanvasContainer();this._add("mapEvent",new bd(c,l));const M=c.boxZoom=new qs(c,l);this._add("boxZoom",M),l.interactive&&l.boxZoom&&M.enable();const R=c.cooperativeGestures=new Ec(c,l.cooperativeGestures);this._add("cooperativeGestures",R),l.cooperativeGestures&&R.enable();const N=new vr(c),V=new lu(c);c.doubleClickZoom=new Xo(V,N),this._add("tapZoom",N),this._add("clickZoom",V),l.interactive&&l.doubleClickZoom&&c.doubleClickZoom.enable();const ne=new Yu;this._add("tapDragZoom",ne);const ae=c.touchPitch=new Mc(c);this._add("touchPitch",ae),l.interactive&&l.touchPitch&&c.touchPitch.enable(l.touchPitch);const Me=()=>c.project(c.getCenter()),ke=function({enable:Pt,clickTolerance:Kt,aroundCenter:jt=!0,minPixelCenterThreshold:Rt=100,rotateDegreesPerPixelMoved:nn=.8},Xt){const bn=new ka({checkCorrectEvent:xn=>B.mouseButton(xn)===0&&xn.ctrlKey||B.mouseButton(xn)===2&&!xn.ctrlKey});return new Ca({clickTolerance:Kt,move:(xn,Cn)=>{const kn=Xt();if(jt&&Math.abs(kn.y-xn.y)>Rt)return{bearingDelta:o.c7(new o.P(xn.x,Cn.y),Cn,kn)};let Gn=(Cn.x-xn.x)*nn;return jt&&Cn.y<kn.y&&(Gn=-Gn),{bearingDelta:Gn}},moveStateManager:bn,enable:Pt,assignEvents:wd})}(l,Me),De=function({enable:Pt,clickTolerance:Kt,pitchDegreesPerPixelMoved:jt=-.5}){const Rt=new ka({checkCorrectEvent:nn=>B.mouseButton(nn)===0&&nn.ctrlKey||B.mouseButton(nn)===2});return new Ca({clickTolerance:Kt,move:(nn,Xt)=>({pitchDelta:(Xt.y-nn.y)*jt}),moveStateManager:Rt,enable:Pt,assignEvents:wd})}(l),Ve=function({enable:Pt,clickTolerance:Kt,rollDegreesPerPixelMoved:jt=.3},Rt){const nn=new ka({checkCorrectEvent:Xt=>B.mouseButton(Xt)===2&&Xt.ctrlKey});return new Ca({clickTolerance:Kt,move:(Xt,bn)=>{const xn=Rt();let Cn=(bn.x-Xt.x)*jt;return bn.y<xn.y&&(Cn=-Cn),{rollDelta:Cn}},moveStateManager:nn,enable:Pt,assignEvents:wd})}(l,Me);c.dragRotate=new sh(l,ke,De,Ve),this._add("mouseRotate",ke,["mousePitch"]),this._add("mousePitch",De,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ve,["mousePitch"]),l.interactive&&l.dragRotate&&c.dragRotate.enable();const Xe=function({enable:Pt,clickTolerance:Kt}){const jt=new ka({checkCorrectEvent:Rt=>B.mouseButton(Rt)===0&&!Rt.ctrlKey});return new Ca({clickTolerance:Kt,move:(Rt,nn)=>({around:nn,panDelta:nn.sub(Rt)}),activateOnStart:!0,moveStateManager:jt,enable:Pt,assignEvents:wd})}(l),mt=new Si(l,c);c.dragPan=new Sc(_,Xe,mt),this._add("mousePan",Xe),this._add("touchPan",mt,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&c.dragPan.enable(l.dragPan);const ut=new oc,gt=new Ed;c.touchZoomRotate=new OA(_,gt,ut,ne),this._add("touchRotate",ut,["touchPan","touchZoom"]),this._add("touchZoom",gt,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&c.touchZoomRotate.enable(l.touchZoomRotate);const bt=c.scrollZoom=new Fs(c,()=>this._triggerRenderFrame());this._add("scrollZoom",bt,["mousePan"]),l.interactive&&l.scrollZoom&&c.scrollZoom.enable(l.scrollZoom);const Ot=c.keyboard=new xo(c);this._add("keyboard",Ot),l.interactive&&l.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new oh(c))}_add(l,c,_){this._handlers.push({handlerName:l,handler:c,allowed:_}),this._handlersById[l]=c}stop(l){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ys(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,c,_){for(const M in l)if(M!==_&&(!c||c.indexOf(M)<0))return!0;return!1}_getMapTouches(l){const c=[];for(const _ of l)this._el.contains(_.target)&&c.push(_);return c}mergeHandlerResult(l,c,_,M,R){if(!_)return;o.e(l,_);const N={handlerName:M,originalEvent:_.originalEvent||R};_.zoomDelta!==void 0&&(c.zoom=N),_.panDelta!==void 0&&(c.drag=N),_.rollDelta!==void 0&&(c.roll=N),_.pitchDelta!==void 0&&(c.pitch=N),_.bearingDelta!==void 0&&(c.rotate=N)}_applyChanges(){const l={},c={},_={};for(const[M,R,N]of this._changes)M.panDelta&&(l.panDelta=(l.panDelta||new o.P(0,0))._add(M.panDelta)),M.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+M.pitchDelta),M.rollDelta&&(l.rollDelta=(l.rollDelta||0)+M.rollDelta),M.around!==void 0&&(l.around=M.around),M.pinchAround!==void 0&&(l.pinchAround=M.pinchAround),M.noInertia&&(l.noInertia=M.noInertia),o.e(c,R),o.e(_,N);this._updateMapTransform(l,c,_),this._changes=[]}_updateMapTransform(l,c,_){const M=this._map,R=M._getTransformForUpdate(),N=M.terrain;if(!(yr(l)||N&&this._terrainMovement))return this._fireEvents(c,_,!0);M._stop(!0);let{panDelta:V,zoomDelta:ne,bearingDelta:ae,pitchDelta:Me,rollDelta:ke,around:De,pinchAround:Ve}=l;Ve!==void 0&&(De=Ve),De=De||M.transform.centerPoint,N&&!R.isPointOnMapSurface(De)&&(De=R.centerPoint);const Xe={panDelta:V,zoomDelta:ne,rollDelta:ke,pitchDelta:Me,bearingDelta:ae,around:De};this._map.cameraHelper.useGlobeControls&&!R.isPointOnMapSurface(De)&&(De=R.centerPoint);const mt=De.distSqr(R.centerPoint)<.01?R.center:R.screenPointToLocation(V?De.sub(V):De);N?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,R),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?R.setCenter(R.screenPointToLocation(R.centerPoint.sub(V))):this._map.cameraHelper.handleMapControlsPan(Xe,R,mt):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Xe,R,mt))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,R),this._map.cameraHelper.handleMapControlsPan(Xe,R,mt)),M._applyUpdatedTransform(R),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(c,_,!0)}_fireEvents(l,c,_){const M=ys(this._eventsInProgress),R=ys(l),N={};for(const ke in l){const{originalEvent:De}=l[ke];this._eventsInProgress[ke]||(N[`${ke}start`]=De),this._eventsInProgress[ke]=l[ke]}!M&&R&&this._fireEvent("movestart",R.originalEvent);for(const ke in N)this._fireEvent(ke,N[ke]);R&&this._fireEvent("move",R.originalEvent);for(const ke in l){const{originalEvent:De}=l[ke];this._fireEvent(ke,De)}const V={};let ne;for(const ke in this._eventsInProgress){const{handlerName:De,originalEvent:Ve}=this._eventsInProgress[ke];this._handlersById[De].isActive()||(delete this._eventsInProgress[ke],ne=c[De]||Ve,V[`${ke}end`]=ne)}for(const ke in V)this._fireEvent(ke,V[ke]);const ae=ys(this._eventsInProgress),Me=(M||R)&&!ae;if(Me&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ke=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ke.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ke)}if(_&&Me){this._updatingCamera=!0;const ke=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),De=Ve=>Ve!==0&&-this._bearingSnap<Ve&&Ve<this._bearingSnap;!ke||!ke.essential&&S.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:ne})),De(this._map.getBearing())&&this._map.resetNorth()):(De(ke.bearing||this._map.getBearing())&&(ke.bearing=0),ke.freezeElevation=!0,this._map.easeTo(ke,{originalEvent:ne})),this._updatingCamera=!1}}_fireEvent(l,c){this._map.fire(new o.k(l,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new ha("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class $u extends o.E{constructor(l,c,_){super(),this._renderFrameCallback=()=>{const M=Math.min((S.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(M)),M<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=_.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(l,c){l.apply(this.transform),this.transform=l,this.cameraHelper=c}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(l,c){return this.jumpTo({center:l},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,c){return this.jumpTo({elevation:l},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,c,_){return l=o.P.convert(l).mult(-1),this.panTo(this.transform.center,o.e({offset:l},c),_)}panTo(l,c,_){return this.easeTo(o.e({center:l},c),_)}getZoom(){return this.transform.zoom}setZoom(l,c){return this.jumpTo({zoom:l},c),this}zoomTo(l,c,_){return this.easeTo(o.e({zoom:l},c),_)}zoomIn(l,c){return this.zoomTo(this.getZoom()+1,l,c),this}zoomOut(l,c){return this.zoomTo(this.getZoom()-1,l,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,c){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)).fire(new o.k("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(l,c){return this.jumpTo({bearing:l},c),this}getPadding(){return this.transform.padding}setPadding(l,c){return this.jumpTo({padding:l},c),this}rotateTo(l,c,_){return this.easeTo(o.e({bearing:l},c),_)}resetNorth(l,c){return this.rotateTo(0,o.e({duration:1e3},l),c),this}resetNorthPitch(l,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},l),c),this}snapToNorth(l,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,c):this}getPitch(){return this.transform.pitch}setPitch(l,c){return this.jumpTo({pitch:l},c),this}getRoll(){return this.transform.roll}setRoll(l,c){return this.jumpTo({roll:l},c),this}cameraForBounds(l,c){l=zt.convert(l).adjustAntiMeridian();const _=c&&c.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),_,c)}_cameraForBoxAndBearing(l,c,_,M){const R={top:0,bottom:0,right:0,left:0};if(typeof(M=o.e({padding:R,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const ae=M.padding;M.padding={top:ae,bottom:ae,right:ae,left:ae}}const N=o.e(R,M.padding);M.padding=N;const V=this.transform,ne=new zt(l,c);return this.cameraHelper.cameraForBoxAndBearing(M,N,ne,_,V)}fitBounds(l,c,_){return this._fitInternal(this.cameraForBounds(l,c),c,_)}fitScreenCoordinates(l,c,_,M,R){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(l)),this.transform.screenPointToLocation(o.P.convert(c)),_,M),M,R)}_fitInternal(l,c,_){return l?(delete(c=o.e(l,c)).padding,c.linear?this.easeTo(c,_):this.flyTo(c,_)):this}jumpTo(l,c){this.stop();const _=this._getTransformForUpdate();let M=!1,R=!1,N=!1;const V=_.zoom;this.cameraHelper.handleJumpToCenterZoom(_,l);const ne=_.zoom!==V;return"elevation"in l&&_.elevation!==+l.elevation&&_.setElevation(+l.elevation),"bearing"in l&&_.bearing!==+l.bearing&&(M=!0,_.setBearing(+l.bearing)),"pitch"in l&&_.pitch!==+l.pitch&&(R=!0,_.setPitch(+l.pitch)),"roll"in l&&_.roll!==+l.roll&&(N=!0,_.setRoll(+l.roll)),l.padding==null||_.isPaddingEqual(l.padding)||_.setPadding(l.padding),this._applyUpdatedTransform(_),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)),ne&&this.fire(new o.k("zoomstart",c)).fire(new o.k("zoom",c)).fire(new o.k("zoomend",c)),M&&this.fire(new o.k("rotatestart",c)).fire(new o.k("rotate",c)).fire(new o.k("rotateend",c)),R&&this.fire(new o.k("pitchstart",c)).fire(new o.k("pitch",c)).fire(new o.k("pitchend",c)),N&&this.fire(new o.k("rollstart",c)).fire(new o.k("roll",c)).fire(new o.k("rollend",c)),this.fire(new o.k("moveend",c))}calculateCameraOptionsFromTo(l,c,_,M=0){const R=o.Y.fromLngLat(l,c),N=o.Y.fromLngLat(_,M),V=N.x-R.x,ne=N.y-R.y,ae=N.z-R.z,Me=Math.hypot(V,ne,ae);if(Me===0)throw new Error("Can't calculate camera options with same From and To");const ke=Math.hypot(V,ne),De=o.a8(this.transform.cameraToCenterDistance/Me/this.transform.tileSize),Ve=180*Math.atan2(V,-ne)/Math.PI;let Xe=180*Math.acos(ke/Me)/Math.PI;return Xe=ae<0?90-Xe:90+Xe,{center:N.toLngLat(),elevation:M,zoom:De,pitch:Xe,bearing:Ve}}calculateCameraOptionsFromCameraLngLatAltRotation(l,c,_,M,R){const N=this.transform.calculateCenterFromCameraLngLatAlt(l,c,_,M);return{center:N.center,elevation:N.elevation,zoom:N.zoom,bearing:_,pitch:M,roll:R}}easeTo(l,c){this._stop(!1,l.easeId),((l=o.e({offset:[0,0],duration:500,easing:o.c8},l)).animate===!1||!l.essential&&S.prefersReducedMotion)&&(l.duration=0);const _=this._getTransformForUpdate(),M=this.getBearing(),R=_.pitch,N=_.roll,V="bearing"in l?this._normalizeBearing(l.bearing,M):M,ne="pitch"in l?+l.pitch:R,ae="roll"in l?this._normalizeBearing(l.roll,N):N,Me="padding"in l?l.padding:_.padding,ke=o.P.convert(l.offset);let De,Ve;l.around&&(De=o.N.convert(l.around),Ve=_.locationToScreenPoint(De));const Xe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},mt=this.cameraHelper.handleEaseTo(_,{bearing:V,pitch:ne,roll:ae,padding:Me,around:De,aroundPoint:Ve,offsetAsPoint:ke,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||M!==V,this._pitching=this._pitching||ne!==R,this._rolling=this._rolling||ae!==N,this._padding=!_.isPaddingEqual(Me),this._zooming=this._zooming||mt.isZooming,this._easeId=l.easeId,this._prepareEase(c,l.noMoveStart,Xe),this.terrain&&this._prepareElevation(mt.elevationCenter),this._ease(ut=>{mt.easeFunc(ut),this.terrain&&!l.freezeElevation&&this._updateElevation(ut),this._applyUpdatedTransform(_),this._fireMoveEvents(c)},ut=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ut)},l),this}_prepareEase(l,c,_={}){this._moving=!0,c||_.moving||this.fire(new o.k("movestart",l)),this._zooming&&!_.zooming&&this.fire(new o.k("zoomstart",l)),this._rotating&&!_.rotating&&this.fire(new o.k("rotatestart",l)),this._pitching&&!_.pitching&&this.fire(new o.k("pitchstart",l)),this._rolling&&!_.rolling&&this.fire(new o.k("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&c!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(_-(c-(_*l+this._elevationStart))/(1-l)),this._elevationTarget=c}this.transform.setElevation(o.y.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const c=l.getCameraLngLat(),_=l.getCameraAltitude(),M=this.terrain?this.terrain.getElevationForLngLatZoom(c,l.zoom):0;if(_<M){const R=this.calculateCameraOptionsFromTo(c,M,l.center,l.elevation);return{pitch:R.pitch,zoom:R.zoom}}return{}}_applyUpdatedTransform(l){const c=[];if(c.push(M=>this._elevateCameraIfInsideTerrain(M)),this.transformCameraUpdate&&c.push(M=>this.transformCameraUpdate(M)),!c.length)return;const _=l.clone();for(const M of c){const R=_.clone(),{center:N,zoom:V,roll:ne,pitch:ae,bearing:Me,elevation:ke}=M(R);N&&R.setCenter(N),ke!==void 0&&R.setElevation(ke),V!==void 0&&R.setZoom(V),ne!==void 0&&R.setRoll(ne),ae!==void 0&&R.setPitch(ae),Me!==void 0&&R.setBearing(Me),_.apply(R)}this.transform.apply(_)}_fireMoveEvents(l){this.fire(new o.k("move",l)),this._zooming&&this.fire(new o.k("zoom",l)),this._rotating&&this.fire(new o.k("rotate",l)),this._pitching&&this.fire(new o.k("pitch",l)),this._rolling&&this.fire(new o.k("roll",l))}_afterEase(l,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const _=this._zooming,M=this._rotating,R=this._pitching,N=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,_&&this.fire(new o.k("zoomend",l)),M&&this.fire(new o.k("rotateend",l)),R&&this.fire(new o.k("pitchend",l)),N&&this.fire(new o.k("rollend",l)),this.fire(new o.k("moveend",l))}flyTo(l,c){if(!l.essential&&S.prefersReducedMotion){const Cn=o.M(l,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Cn,c)}this.stop(),l=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.c8},l);const _=this._getTransformForUpdate(),M=_.bearing,R=_.pitch,N=_.roll,V=_.padding,ne="bearing"in l?this._normalizeBearing(l.bearing,M):M,ae="pitch"in l?+l.pitch:R,Me="roll"in l?this._normalizeBearing(l.roll,N):N,ke="padding"in l?l.padding:_.padding,De=o.P.convert(l.offset);let Ve=_.centerPoint.add(De);const Xe=_.screenPointToLocation(Ve),mt=this.cameraHelper.handleFlyTo(_,{bearing:ne,pitch:ae,roll:Me,padding:ke,locationAtOffset:Xe,offsetAsPoint:De,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let ut=l.curve;const gt=Math.max(_.width,_.height),bt=gt/mt.scaleOfZoom,Ot=mt.pixelPathLength;typeof mt.scaleOfMinZoom=="number"&&(ut=Math.sqrt(gt/mt.scaleOfMinZoom/Ot*2));const Pt=ut*ut;function Kt(Cn){const kn=(bt*bt-gt*gt+(Cn?-1:1)*Pt*Pt*Ot*Ot)/(2*(Cn?bt:gt)*Pt*Ot);return Math.log(Math.sqrt(kn*kn+1)-kn)}function jt(Cn){return(Math.exp(Cn)-Math.exp(-Cn))/2}function Rt(Cn){return(Math.exp(Cn)+Math.exp(-Cn))/2}const nn=Kt(!1);let Xt=function(Cn){return Rt(nn)/Rt(nn+ut*Cn)},bn=function(Cn){return gt*((Rt(nn)*(jt(kn=nn+ut*Cn)/Rt(kn))-jt(nn))/Pt)/Ot;var kn},xn=(Kt(!0)-nn)/ut;if(Math.abs(Ot)<2e-6||!isFinite(xn)){if(Math.abs(gt-bt)<1e-6)return this.easeTo(l,c);const Cn=bt<gt?-1:1;xn=Math.abs(Math.log(bt/gt))/ut,bn=()=>0,Xt=kn=>Math.exp(Cn*ut*kn)}return l.duration="duration"in l?+l.duration:1e3*xn/("screenSpeed"in l?+l.screenSpeed/ut:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=M!==ne,this._pitching=ae!==R,this._rolling=Me!==N,this._padding=!_.isPaddingEqual(ke),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(mt.targetCenter),this._ease(Cn=>{const kn=Cn*xn,Gn=1/Xt(kn),Bn=bn(kn);this._rotating&&_.setBearing(o.y.number(M,ne,Cn)),this._pitching&&_.setPitch(o.y.number(R,ae,Cn)),this._rolling&&_.setRoll(o.y.number(N,Me,Cn)),this._padding&&(_.interpolatePadding(V,ke,Cn),Ve=_.centerPoint.add(De)),mt.easeFunc(Cn,Gn,Bn,Ve),this.terrain&&!l.freezeElevation&&this._updateElevation(Cn),this._applyUpdatedTransform(_),this._fireMoveEvents(c)},()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,c){var _;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const M=this._onEaseEnd;delete this._onEaseEnd,M.call(this,c)}return l||(_=this.handlers)===null||_===void 0||_.stop(!1),this}_ease(l,c,_){_.animate===!1||_.duration===0?(l(1),c()):(this._easeStart=S.now(),this._easeOptions=_,this._onEaseFrame=l,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,c){l=o.aI(l,-180,180);const _=Math.abs(l-c);return Math.abs(l-360-c)<_&&(l-=360),Math.abs(l+360-c)<_&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(l),this.transform.tileZoom):null}}const sc={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Mu{constructor(l=sc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=B.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=B.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=B.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){B.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._sanitizedAttributionHTML=void 0}_setElementTitle(l,c){const _=this._map._getUIString(`AttributionControl.${c}`);l.title=_,l.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const c=this._map.style.sourceCaches;for(const M in c){const R=c[M];if(R.used||R.usedForTerrain){const N=R.getSource();N.attribution&&l.indexOf(N.attribution)<0&&l.push(N.attribution)}}l=l.filter(M=>String(M).trim()),l.sort((M,R)=>M.length-R.length),l=l.filter((M,R)=>{for(let N=R+1;N<l.length;N++)if(l[N].indexOf(M)>=0)return!1;return!0});const _=l.join(" | ");_!==this._sanitizedAttributionHTML&&(this._sanitizedAttributionHTML=B.sanitize(_),l.length?(this._innerContainer.innerHTML=this._sanitizedAttributionHTML,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class xs{constructor(l={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const _=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=B.create("div","maplibregl-ctrl");const c=B.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){B.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Wf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const c=++this._id;return this._queue.push({callback:l,id:c,cancelled:!1}),c}remove(l){const c=this._currentlyRunning,_=c?this._queue.concat(c):this._queue;for(const M of _)if(M.id===l)return void(M.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const _ of c)if(!_.cancelled&&(_.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var uu=o.aA([{name:"a_pos3d",type:"Int16",components:3}]);class Gf extends o.E{constructor(l){super(),this._lastTilesetChange=S.now(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,c){this.sourceCache.update(l,c),this._renderableTilesKeys=[];const _={};for(const M of Oe(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))_[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.terrainRttPosMatrix32f=new Float64Array(16),o.bL(M.terrainRttPosMatrix32f,0,o.X,o.X,0,0,1),this._tiles[M.key]=new me(M,this.tileSize),this._lastTilesetChange=S.now());for(const M in this._tiles)_[M]||delete this._tiles[M]}freeRtt(l){for(const c in this._tiles){const _=this._tiles[c];(!l||_.tileID.equals(l)||_.tileID.isChildOf(l)||l.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const c={};for(const _ of this._renderableTilesKeys){const M=this._tiles[_].tileID,R=l.clone(),N=o.a$();if(M.canonical.equals(l.canonical))o.bL(N,0,o.X,o.X,0,0,1);else if(M.canonical.isChildOf(l.canonical)){const V=M.canonical.z-l.canonical.z,ne=M.canonical.x-(M.canonical.x>>V<<V),ae=M.canonical.y-(M.canonical.y>>V<<V),Me=o.X>>V;o.bL(N,0,Me,Me,0,0,1),o.J(N,N,[-ne*Me,-ae*Me,0])}else{if(!l.canonical.isChildOf(M.canonical))continue;{const V=l.canonical.z-M.canonical.z,ne=l.canonical.x-(l.canonical.x>>V<<V),ae=l.canonical.y-(l.canonical.y>>V<<V),Me=o.X>>V;o.bL(N,0,o.X,o.X,0,0,1),o.J(N,N,[ne*Me,ae*Me,0]),o.K(N,N,[1/2**V,1/2**V,0])}}R.terrainRttPosMatrix32f=new Float32Array(N),c[_]=R}return c}getSourceTile(l,c){const _=this.sourceCache._source;let M=l.overscaledZ-this.deltaZoom;if(M>_.maxzoom&&(M=_.maxzoom),M<_.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(M).key);let R=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!R||!R.dem)&&c)for(;M>=_.minzoom&&(!R||!R.dem);)R=this.sourceCache.getTileByID(l.scaledTo(M--).key);return R}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}}class Su{constructor(l,c,_){this._meshCache={},this.painter=l,this.sourceCache=new Gf(c),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,c,_,M=o.X){var R;if(!(c>=0&&c<M&&_>=0&&_<M))return 0;const N=this.getTerrainData(l),V=(R=N.tile)===null||R===void 0?void 0:R.dem;if(!V)return 0;const ne=o.c9([],[c/M*o.X,_/M*o.X],N.u_terrain_matrix),ae=[ne[0]*V.dim,ne[1]*V.dim],Me=Math.floor(ae[0]),ke=Math.floor(ae[1]),De=ae[0]-Me,Ve=ae[1]-ke;return V.get(Me,ke)*(1-De)*(1-Ve)+V.get(Me+1,ke)*De*(1-Ve)+V.get(Me,ke+1)*(1-De)*Ve+V.get(Me+1,ke+1)*De*Ve}getElevationForLngLatZoom(l,c){if(!o.ca(c,l.wrap()))return 0;const{tileID:_,mercatorX:M,mercatorY:R}=this._getOverscaledTileIDFromLngLatZoom(l,c);return this.getElevation(_,M%o.X,R%o.X,o.X)}getElevation(l,c,_,M=o.X){return this.getDEMElevation(l,c,_,M)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const M=this.painter.context,R=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new oe(M,R,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new oe(M,new o.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.aq([])}const c=this.sourceCache.getSourceTile(l,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const M=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new oe(M,c.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),c.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const _=c&&c+c.tileID.key+l.key;if(_&&!this._demMatrixCache[_]){const M=this.sourceCache.sourceCache._source.maxzoom;let R=l.canonical.z-c.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=M?R=l.canonical.z-M:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const N=l.canonical.x-(l.canonical.x>>R<<R),V=l.canonical.y-(l.canonical.y>>R<<R),ne=o.cb(new Float64Array(16),[1/(o.X<<R),1/(o.X<<R),0]);o.J(ne,ne,[N*o.X,V*o.X,0]),this._demMatrixCache[l.key]={matrix:ne,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(l){const c=this.painter,_=c.width/devicePixelRatio,M=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new oe(c.context,{width:_,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new oe(c.context,{width:_,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(_,M,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,_,M))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let R=0,N=0;R<this._coordsTextureSize;R++)for(let V=0;V<this._coordsTextureSize;V++,N+=4)c[N+0]=255&V,c[N+1]=255&R,c[N+2]=V>>8<<4|R>>8,c[N+3]=0;const _=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),M=new oe(l,_,l.gl.RGBA,{premultiply:!1});return M.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),_=this.painter.context,M=_.gl,R=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),N=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),V=Math.round(this.painter.height/devicePixelRatio);_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(R,V-N-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),_.bindFramebuffer.set(null);const ne=c[0]+(c[2]>>4<<8),ae=c[1]+((15&c[2])<<8),Me=this.coordsIndex[255-c[3]],ke=Me&&this.sourceCache.getTileByID(Me);if(!ke)return null;const De=this._coordsTextureSize,Ve=(1<<ke.tileID.canonical.z)*De;return new o.Y((ke.tileID.canonical.x*De+ne)/Ve+ke.tileID.wrap,(ke.tileID.canonical.y*De+ae)/Ve,this.getElevation(ke.tileID,ne,ae,De))}depthAtPoint(l){const c=new Uint8Array(4),_=this.painter.context,M=_.gl;return _.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),M.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),_.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(l){var c;const _=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,M=_&&l.canonical.y===0,R=_&&l.canonical.y===(1<<l.canonical.z)-1,N=`m_${M?"n":""}_${R?"s":""}`;if(this._meshCache[N])return this._meshCache[N];const V=this.painter.context,ne=new o.cc,ae=new o.aE,Me=this.meshSize,ke=o.X/Me,De=Me*Me;for(let Rt=0;Rt<=Me;Rt++)for(let nn=0;nn<=Me;nn++)ne.emplaceBack(nn*ke,Rt*ke,0);for(let Rt=0;Rt<De;Rt+=Me+1)for(let nn=0;nn<Me;nn++)ae.emplaceBack(nn+Rt,Me+nn+Rt+1,Me+nn+Rt+2),ae.emplaceBack(nn+Rt,Me+nn+Rt+2,nn+Rt+1);const Ve=ne.length,Xe=Ve+(Me+1),mt=(Me+1)*Me,ut=M?o.b6:0,gt=M?0:1,bt=R?o.b7:o.X,Ot=R?0:1;for(let Rt=0;Rt<=Me;Rt++)ne.emplaceBack(Rt*ke,ut,gt);for(let Rt=0;Rt<=Me;Rt++)ne.emplaceBack(Rt*ke,bt,Ot);for(let Rt=0;Rt<Me;Rt++)ae.emplaceBack(mt+Rt,Xe+Rt,Xe+Rt+1),ae.emplaceBack(mt+Rt,Xe+Rt+1,mt+Rt+1),ae.emplaceBack(0+Rt,Ve+Rt+1,Ve+Rt),ae.emplaceBack(0+Rt,0+Rt+1,Ve+Rt+1);const Pt=ne.length,Kt=Pt+2*(Me+1);for(const Rt of[0,1])for(let nn=0;nn<=Me;nn++)for(const Xt of[0,1])ne.emplaceBack(Rt*o.X,nn*ke,Xt);for(let Rt=0;Rt<2*Me;Rt+=2)ae.emplaceBack(Pt+Rt,Pt+Rt+1,Pt+Rt+3),ae.emplaceBack(Pt+Rt,Pt+Rt+3,Pt+Rt+2),ae.emplaceBack(Kt+Rt,Kt+Rt+3,Kt+Rt+1),ae.emplaceBack(Kt+Rt,Kt+Rt+2,Kt+Rt+3);const jt=new el(V.createVertexBuffer(ne,uu.members),V.createIndexBuffer(ae),o.aD.simpleSegment(0,0,ne.length,ae.length));return this._meshCache[N]=jt,jt}getMeshFrameDelta(l){return 2*Math.PI*o.bo/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,c){var _;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(l,c);return(_=this.getMinMaxElevation(M).minElevation)!==null&&_!==void 0?_:0}getMinMaxElevation(l){const c=this.getTerrainData(l).tile,_={minElevation:null,maxElevation:null};return c&&c.dem&&(_.minElevation=c.dem.min*this.exaggeration,_.maxElevation=c.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(l,c){const _=o.Y.fromLngLat(l.wrap()),M=(1<<c)*o.X,R=_.x*M,N=_.y*M,V=Math.floor(R/o.X),ne=Math.floor(N/o.X);return{tileID:new o.S(c,0,c,V,ne),mercatorX:R,mercatorY:N}}}class Ro{constructor(l,c,_){this._context=l,this._size=c,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(_.texture),{id:l,fbo:c,texture:_,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>l.id!==c),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const ks={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ah{constructor(l,c){this.painter=l,this.terrain=c,this.pool=new Ro(l.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(_=>!l._layers[_].isHidden(c)),this._coordsAscending={};for(const _ in l.sourceCaches){this._coordsAscending[_]={};const M=l.sourceCaches[_].getVisibleCoordinates();for(const R of M){const N=this.terrain.sourceCache.getTerrainCoords(R);for(const V in N)this._coordsAscending[_][V]||(this._coordsAscending[_][V]=[]),this._coordsAscending[_][V].push(N[V])}}this._coordsAscendingStr={};for(const _ of l._order){const M=l._layers[_],R=M.source;if(ks[M.type]&&!this._coordsAscendingStr[R]){this._coordsAscendingStr[R]={};for(const N in this._coordsAscending[R])this._coordsAscendingStr[R][N]=this._coordsAscending[R][N].map(V=>V.key).sort().join()}}for(const _ of this._renderableTiles)for(const M in this._coordsAscendingStr){const R=this._coordsAscendingStr[M][_.tileID.key];R&&R!==_.rttCoords[M]&&(_.rtt=[])}}renderLayer(l,c){if(l.isHidden(this.painter.transform.zoom))return!1;const _=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),M=l.type,R=this.painter,N=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(ks[M]&&(this._prevType&&ks[this._prevType]||this._stacks.push([]),this._prevType=M,this._stacks[this._stacks.length-1].push(l.id),!N))return!0;if(ks[this._prevType]||ks[M]&&N){this._prevType=M;const V=this._stacks.length-1,ne=this._stacks[V]||[];for(const ae of this._renderableTiles){if(this.pool.isFull()&&(Wu(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ae),ae.rtt[V]){const ke=this.pool.getObjectForId(ae.rtt[V].id);if(ke.stamp===ae.rtt[V].stamp){this.pool.useObject(ke);continue}}const Me=this.pool.getOrCreateFreeObject();this.pool.useObject(Me),this.pool.stampObject(Me),ae.rtt[V]={id:Me.id,stamp:Me.stamp},R.context.bindFramebuffer.set(Me.fbo.framebuffer),R.context.clear({color:o.b4.transparent,stencil:0}),R.currentStencilSource=void 0;for(let ke=0;ke<ne.length;ke++){const De=R.style._layers[ne[ke]],Ve=De.source?this._coordsAscending[De.source][ae.tileID.key]:[ae.tileID];R.context.viewport.set([0,0,Me.fbo.width,Me.fbo.height]),R._renderTileClippingMasks(De,Ve,!0),R.renderLayer(R,R.style.sourceCaches[De.source],De,Ve,_),De.source&&(ae.rttCoords[De.source]=this._coordsAscendingStr[De.source][ae.tileID.key])}}return Wu(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects(),ks[M]}return!1}}const IA={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},lh=d,kA={hash:!1,interactive:!0,bearingSnap:7,attributionControl:sc,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ys={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Bc{constructor(l,c,_=!1){this.mousedown=R=>{this.startMove(R,B.mousePos(this.element,R)),B.addEventListener(window,"mousemove",this.mousemove),B.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=R=>{this.move(R,B.mousePos(this.element,R))},this.mouseup=R=>{this._rotatePitchHanlder.dragEnd(R),this.offTemp()},this.touchstart=R=>{R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=B.touchPos(this.element,R.targetTouches)[0],this.startMove(R,this._startPos),B.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),B.addEventListener(window,"touchend",this.touchend))},this.touchmove=R=>{R.targetTouches.length!==1?this.reset():(this._lastPos=B.touchPos(this.element,R.targetTouches)[0],this.move(R,this._lastPos))},this.touchend=R=>{R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const M=new xd;this._rotatePitchHanlder=new Ca({clickTolerance:3,move:(R,N)=>{const V=c.getBoundingClientRect(),ne=new o.P((V.bottom-V.top)/2,(V.right-V.left)/2);return{bearingDelta:o.c7(new o.P(R.x,N.y),N,ne),pitchDelta:_?-.5*(N.y-R.y):void 0}},moveStateManager:M,enable:!0,assignEvents:()=>{}}),this.map=l,B.addEventListener(c,"mousedown",this.mousedown),B.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),B.addEventListener(c,"touchcancel",this.reset)}startMove(l,c){this._rotatePitchHanlder.dragStart(l,c),B.disableDrag()}move(l,c){const _=this.map,{bearingDelta:M,pitchDelta:R}=this._rotatePitchHanlder.dragMove(l,c)||{};M&&_.setBearing(_.getBearing()+M),R&&_.setPitch(_.getPitch()+R)}off(){const l=this.element;B.removeEventListener(l,"mousedown",this.mousedown),B.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),B.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),B.removeEventListener(window,"touchend",this.touchend),B.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){B.enableDrag(),B.removeEventListener(window,"mousemove",this.mousemove),B.removeEventListener(window,"mouseup",this.mouseup),B.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),B.removeEventListener(window,"touchend",this.touchend)}}let Yl;function pl(T,l,c){const _=new o.N(T.lng,T.lat);if(T=new o.N(T.lng,T.lat),l){const M=new o.N(T.lng-360,T.lat),R=new o.N(T.lng+360,T.lat),N=c.locationToScreenPoint(T).distSqr(l);c.locationToScreenPoint(M).distSqr(l)<N?T=M:c.locationToScreenPoint(R).distSqr(l)<N&&(T=R)}for(;Math.abs(T.lng-c.center.lng)>180;){const M=c.locationToScreenPoint(T);if(M.x>=0&&M.y>=0&&M.x<=c.width&&M.y<=c.height)break;T.lng>c.center.lng?T.lng-=360:T.lng+=360}return T.lng!==_.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(T))?T:_}const Vu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Oc(T,l,c){const _=T.classList;for(const M in Vu)_.remove(`maplibregl-${c}-anchor-${M}`);_.add(`maplibregl-${c}-anchor-${l}`)}class Eu extends o.E{constructor(l){if(super(),this._onKeyPress=c=>{const _=c.code,M=c.charCode||c.keyCode;_!=="Space"&&_!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=c=>{const _=c.originalEvent.target,M=this._element;this._popup&&(_===M||M.contains(_))&&this.togglePopup()},this._update=c=>{var _;if(!this._map)return;const M=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!M)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?pl(this._lngLat,this._flatPos,this._map.transform):(_=this._lngLat)===null||_===void 0?void 0:_.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let R="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?R=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(R=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let N="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?N="rotateX(0deg)":this._pitchAlignment==="map"&&(N=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),B.setTransform(this._element,`${Vu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${N} ${R}`),S.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(l==null?void 0:l.opacity,l==null?void 0:l.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=o.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=B.create("div");const c=B.createNS("http://www.w3.org/2000/svg","svg"),_=41,M=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${_}px`),c.setAttributeNS(null,"width",`${M}px`),c.setAttributeNS(null,"viewBox",`0 0 ${M} ${_}`);const R=B.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"stroke","none"),R.setAttributeNS(null,"stroke-width","1"),R.setAttributeNS(null,"fill","none"),R.setAttributeNS(null,"fill-rule","evenodd");const N=B.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill-rule","nonzero");const V=B.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"transform","translate(3.0, 29.0)"),V.setAttributeNS(null,"fill","#000000");const ne=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const gt of ne){const bt=B.createNS("http://www.w3.org/2000/svg","ellipse");bt.setAttributeNS(null,"opacity","0.04"),bt.setAttributeNS(null,"cx","10.5"),bt.setAttributeNS(null,"cy","5.80029008"),bt.setAttributeNS(null,"rx",gt.rx),bt.setAttributeNS(null,"ry",gt.ry),V.appendChild(bt)}const ae=B.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const Me=B.createNS("http://www.w3.org/2000/svg","path");Me.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(Me);const ke=B.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"opacity","0.25"),ke.setAttributeNS(null,"fill","#000000");const De=B.createNS("http://www.w3.org/2000/svg","path");De.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ke.appendChild(De);const Ve=B.createNS("http://www.w3.org/2000/svg","g");Ve.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ve.setAttributeNS(null,"fill","#FFFFFF");const Xe=B.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const mt=B.createNS("http://www.w3.org/2000/svg","circle");mt.setAttributeNS(null,"fill","#000000"),mt.setAttributeNS(null,"opacity","0.25"),mt.setAttributeNS(null,"cx","5.5"),mt.setAttributeNS(null,"cy","5.5"),mt.setAttributeNS(null,"r","5.4999962");const ut=B.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),Xe.appendChild(mt),Xe.appendChild(ut),N.appendChild(V),N.appendChild(ae),N.appendChild(ke),N.appendChild(Ve),N.appendChild(Xe),c.appendChild(N),c.setAttributeNS(null,"height",_*this._scale+"px"),c.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Oc(this._element,this._anchor,"marker"),l&&l.className)for(const c of l.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),B.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.N.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const M=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var c,_;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const ke=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ke&&(this._element.style.opacity=ke))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,R=M.terrain.depthAtPoint(this._pos),N=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,N)-R<.006)return void(this._element.style.opacity=this._opacity);const V=-this._offset.y/M.transform.pixelsPerMeter,ne=Math.sin(M.getPitch()*Math.PI/180)*V,ae=M.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),Me=M.transform.lngLatToCameraDepth(this._lngLat,N+ne)-ae>.006;!((_=this._popup)===null||_===void 0)&&_.isOpen()&&Me&&this._popup.remove(),this._element.style.opacity=Me?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=o.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,c){return l===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const _a={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Js=0,Au=!1;const cu={maxWidth:100,unit:"metric"};function fA(T,l,c){const _=c&&c.maxWidth||100,M=T._container.clientHeight/2,R=T._container.clientWidth/2,N=T.unproject([R-_/2,M]),V=T.unproject([R+_/2,M]),ne=Math.round(T.project(V).x-T.project(N).x),ae=Math.min(_,ne,T._container.clientWidth),Me=N.distanceTo(V);if(c&&c.unit==="imperial"){const ke=3.2808*Me;ke>5280?Bu(l,ae,ke/5280,T._getUIString("ScaleControl.Miles")):Bu(l,ae,ke,T._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Bu(l,ae,Me/1852,T._getUIString("ScaleControl.NauticalMiles")):Me>=1e3?Bu(l,ae,Me/1e3,T._getUIString("ScaleControl.Kilometers")):Bu(l,ae,Me,T._getUIString("ScaleControl.Meters"))}function Bu(T,l,c,_){const M=function(R){const N=Math.pow(10,`${Math.floor(R)}`.length-1);let V=R/N;return V=V>=10?10:V>=5?5:V>=3?3:V>=2?2:V>=1?1:function(ne){const ae=Math.pow(10,Math.ceil(-Math.log(ne)/Math.LN10));return Math.round(ne*ae)/ae}(V),N*V}(c);T.style.width=l*(M/c)+"px",T.innerHTML=`${M}&nbsp;${_}`}const Ic={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Hu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $l(T){if(T){if(typeof T=="number"){const l=Math.round(Math.abs(T)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,T),"top-left":new o.P(l,l),"top-right":new o.P(-l,l),bottom:new o.P(0,-T),"bottom-left":new o.P(l,-l),"bottom-right":new o.P(-l,-l),left:new o.P(T,0),right:new o.P(-T,0)}}if(T instanceof o.P||Array.isArray(T)){const l=o.P.convert(T);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:o.P.convert(T.center||[0,0]),top:o.P.convert(T.top||[0,0]),"top-left":o.P.convert(T["top-left"]||[0,0]),"top-right":o.P.convert(T["top-right"]||[0,0]),bottom:o.P.convert(T.bottom||[0,0]),"bottom-left":o.P.convert(T["bottom-left"]||[0,0]),"bottom-right":o.P.convert(T["bottom-right"]||[0,0]),left:o.P.convert(T.left||[0,0]),right:o.P.convert(T.right||[0,0])}}return $l(new o.P(0,0))}const Bd=d;a.AJAXError=o.cg,a.Event=o.k,a.Evented=o.E,a.LngLat=o.N,a.MercatorCoordinate=o.Y,a.Point=o.P,a.addProtocol=o.ch,a.config=o.a,a.removeProtocol=o.ci,a.AttributionControl=Mu,a.BoxZoomHandler=qs,a.CanvasSource=pn,a.CooperativeGesturesHandler=Ec,a.DoubleClickZoomHandler=Xo,a.DragPanHandler=Sc,a.DragRotateHandler=sh,a.EdgeInsets=Qs,a.FullscreenControl=class extends o.E{constructor(T={}){super(),this._onFullscreenChange=()=>{var l;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=c==null?void 0:c.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,T&&T.container&&(T.container instanceof HTMLElement?this._container=T.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(T){return this._map=T,this._container||(this._container=this._map.getContainer()),this._controlContainer=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){B.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const T=this._fullscreenButton=B.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);B.create("span","maplibregl-ctrl-icon",T).setAttribute("aria-hidden","true"),T.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const T=this._getTitle();this._fullscreenButton.setAttribute("aria-label",T),this._fullscreenButton.title=T}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=rn,a.GeolocateControl=class extends o.E{constructor(T){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const c=new o.N(l.coords.longitude,l.coords.latitude),_=l.coords.accuracy,M=this._map.getBearing(),R=o.e({bearing:M},this.options.fitBoundsOptions),N=zt.fromLngLat(c,_);this._map.fitBounds(N,R,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const c=new o.N(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&Au)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=B.create("button","maplibregl-ctrl-geolocate",this._container),B.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=B.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Eu({element:this._dotElement}),this._circleElement=B.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Eu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},_a,T)}onAdd(T){return this._map=T,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(l=!1){if(Yl!==void 0&&!l)return Yl;if(window.navigator.permissions===void 0)return Yl=!!window.navigator.geolocation,Yl;try{Yl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Yl=!!window.navigator.geolocation}return Yl})}().then(l=>this._finishSetupUI(l)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),B.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Js=0,Au=!1}_isOutOfMapMaxBounds(T){const l=this._map.getMaxBounds(),c=T.coords;return l&&(c.longitude<l.getWest()||c.longitude>l.getEast()||c.latitude<l.getSouth()||c.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const T=this._map.getBounds(),l=T.getSouthEast(),c=T.getNorthEast(),_=l.distanceTo(c),M=Math.ceil(this._accuracy/(_/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Js--,Au=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let T;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Js++,Js>1?(T={maximumAge:6e5,timeout:0},Au=!0):(T=this.options.positionOptions,Au=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,T)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.GlobeControl=class{constructor(){this._toggleProjection=()=>{var T;const l=(T=this._map.getProjection())===null||T===void 0?void 0:T.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var T;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((T=this._map.getProjection())===null||T===void 0?void 0:T.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(T){return this._map=T,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=B.create("button","maplibregl-ctrl-globe",this._container),B.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){B.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},a.Hash=rc,a.ImageSource=or,a.KeyboardHandler=xo,a.LngLatBounds=zt,a.LogoControl=xs,a.Map=class extends $u{constructor(T){var l,c;o.cd.mark(o.ce.create);const _=Object.assign(Object.assign(Object.assign({},kA),T),{canvasContextAttributes:Object.assign(Object.assign({},kA.canvasContextAttributes),T.canvasContextAttributes)});if(_.minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const M=new Ss,R=new lA;if(_.minZoom!==void 0&&M.setMinZoom(_.minZoom),_.maxZoom!==void 0&&M.setMaxZoom(_.maxZoom),_.minPitch!==void 0&&M.setMinPitch(_.minPitch),_.maxPitch!==void 0&&M.setMaxPitch(_.maxPitch),_.renderWorldCopies!==void 0&&M.setRenderWorldCopies(_.renderWorldCopies),super(M,R,{bearingSnap:_.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Wf,this._controls=[],this._mapId=o.a1(),this._contextLost=V=>{V.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:V}))},this._contextRestored=V=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:V}))},this._onMapScroll=V=>{if(V.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},_.canvasContextAttributes),this._trackResize=_.trackResize===!0,this._bearingSnap=_.bearingSnap,this._centerClampedToGround=_.centerClampedToGround,this._refreshExpiredTiles=_.refreshExpiredTiles===!0,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions===!0,this._collectResourceTiming=_.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},IA),_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=_.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=J.addThrottleControl(()=>this.isMoving()),this._requestManager=new $(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let V=!1;const ne=ih(ae=>{this._trackResize&&!this._removed&&(this.resize(ae),this.redraw())},50);this._resizeObserver=new ResizeObserver(ae=>{V?ne(ae):V=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Zr(this,_),this._hash=_.hash&&new rc(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,elevation:_.elevation,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,roll:_.roll}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,o.e({},_.fitBoundsOptions,{duration:0}))));const N=typeof _.style=="string"||((c=(l=_.style)===null||l===void 0?void 0:l.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,N),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Mu(typeof _.attributionControl=="boolean"?void 0:_.attributionControl)),_.maplibreLogo&&this.addControl(new xs,_.logoPosition),this.on("style.load",()=>{if(N||this._resizeTransform(),this.transform.unmodified){const V=o.M(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(V)}}),this.on("data",V=>{this._update(V.dataType==="style"),this.fire(new o.k(`${V.dataType}data`,V))}),this.on("dataloading",V=>{this.fire(new o.k(`${V.dataType}dataloading`,V))}),this.on("dataabort",V=>{this.fire(new o.k("sourcedataabort",V))})}_getMapId(){return this._mapId}addControl(T,l){if(l===void 0&&(l=T.getDefaultPosition?T.getDefaultPosition():"top-right"),!T||!T.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=T.onAdd(this);this._controls.push(T);const _=this._controlPositions[l];return l.indexOf("bottom")!==-1?_.insertBefore(c,_.firstChild):_.appendChild(c),this}removeControl(T){if(!T||!T.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(T);return l>-1&&this._controls.splice(l,1),T.onRemove(this),this}hasControl(T){return this._controls.indexOf(T)>-1}calculateCameraOptionsFromTo(T,l,c,_){return _==null&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(T,l,c,_)}resize(T,l=!0){const[c,_]=this._containerDimensions(),M=this._getClampedPixelRatio(c,_);if(this._resizeCanvas(c,_,M),this.painter.resize(c,_,M),this.painter.overLimit()){const N=this.painter.context.gl;this._maxCanvasSize=[N.drawingBufferWidth,N.drawingBufferHeight];const V=this._getClampedPixelRatio(c,_);this._resizeCanvas(c,_,V),this.painter.resize(c,_,V)}this._resizeTransform(l);const R=!this._moving;return R&&(this.stop(),this.fire(new o.k("movestart",T)).fire(new o.k("move",T))),this.fire(new o.k("resize",T)),R&&this.fire(new o.k("moveend",T)),this}_resizeTransform(T=!0){var l;const[c,_]=this._containerDimensions();this.transform.resize(c,_,T),(l=this._requestedCameraState)===null||l===void 0||l.resize(c,_,T)}_getClampedPixelRatio(T,l){const{0:c,1:_}=this._maxCanvasSize,M=this.getPixelRatio(),R=T*M,N=l*M;return Math.min(R>c?c/R:1,N>_?_/N:1)*M}getPixelRatio(){var T;return(T=this._overridePixelRatio)!==null&&T!==void 0?T:devicePixelRatio}setPixelRatio(T){this._overridePixelRatio=T,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(T){return this.transform.setMaxBounds(zt.convert(T)),this._update()}setMinZoom(T){if((T=T??-2)>=-2&&T<=this.transform.maxZoom)return this.transform.setMinZoom(T),this._update(),this.getZoom()<T&&this.setZoom(T),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(T){if((T=T??22)>=this.transform.minZoom)return this.transform.setMaxZoom(T),this._update(),this.getZoom()>T&&this.setZoom(T),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(T){if((T=T??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(T>=0&&T<=this.transform.maxPitch)return this.transform.setMinPitch(T),this._update(),this.getPitch()<T&&this.setPitch(T),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(T){if((T=T??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(T>=this.transform.minPitch)return this.transform.setMaxPitch(T),this._update(),this.getPitch()>T&&this.setPitch(T),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(T){return this.transform.setRenderWorldCopies(T),this._update()}project(T){return this.transform.locationToScreenPoint(o.N.convert(T),this.style&&this.terrain)}unproject(T){return this.transform.screenPointToLocation(o.P.convert(T),this.terrain)}isMoving(){var T;return this._moving||((T=this.handlers)===null||T===void 0?void 0:T.isMoving())}isZooming(){var T;return this._zooming||((T=this.handlers)===null||T===void 0?void 0:T.isZooming())}isRotating(){var T;return this._rotating||((T=this.handlers)===null||T===void 0?void 0:T.isRotating())}_createDelegatedListener(T,l,c){if(T==="mouseenter"||T==="mouseover"){let _=!1;return{layers:l,listener:c,delegates:{mousemove:R=>{const N=l.filter(ne=>this.getLayer(ne)),V=N.length!==0?this.queryRenderedFeatures(R.point,{layers:N}):[];V.length?_||(_=!0,c.call(this,new Ki(T,this,R.originalEvent,{features:V}))):_=!1},mouseout:()=>{_=!1}}}}if(T==="mouseleave"||T==="mouseout"){let _=!1;return{layers:l,listener:c,delegates:{mousemove:N=>{const V=l.filter(ne=>this.getLayer(ne));(V.length!==0?this.queryRenderedFeatures(N.point,{layers:V}):[]).length?_=!0:_&&(_=!1,c.call(this,new Ki(T,this,N.originalEvent)))},mouseout:N=>{_&&(_=!1,c.call(this,new Ki(T,this,N.originalEvent)))}}}}{const _=M=>{const R=l.filter(V=>this.getLayer(V)),N=R.length!==0?this.queryRenderedFeatures(M.point,{layers:R}):[];N.length&&(M.features=N,c.call(this,M),delete M.features)};return{layers:l,listener:c,delegates:{[T]:_}}}}_saveDelegatedListener(T,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[T]=this._delegatedListeners[T]||[],this._delegatedListeners[T].push(l)}_removeDelegatedListener(T,l,c){if(!this._delegatedListeners||!this._delegatedListeners[T])return;const _=this._delegatedListeners[T];for(let M=0;M<_.length;M++){const R=_[M];if(R.listener===c&&R.layers.length===l.length&&R.layers.every(N=>l.includes(N))){for(const N in R.delegates)this.off(N,R.delegates[N]);return void _.splice(M,1)}}}on(T,l,c){if(c===void 0)return super.on(T,l);const _=typeof l=="string"?[l]:l,M=this._createDelegatedListener(T,_,c);this._saveDelegatedListener(T,M);for(const R in M.delegates)this.on(R,M.delegates[R]);return{unsubscribe:()=>{this._removeDelegatedListener(T,_,c)}}}once(T,l,c){if(c===void 0)return super.once(T,l);const _=typeof l=="string"?[l]:l,M=this._createDelegatedListener(T,_,c);for(const R in M.delegates){const N=M.delegates[R];M.delegates[R]=(...V)=>{this._removeDelegatedListener(T,_,c),N(...V)}}this._saveDelegatedListener(T,M);for(const R in M.delegates)this.once(R,M.delegates[R]);return this}off(T,l,c){return c===void 0?super.off(T,l):(this._removeDelegatedListener(T,typeof l=="string"?[l]:l,c),this)}queryRenderedFeatures(T,l){if(!this.style)return[];let c;const _=T instanceof o.P||Array.isArray(T),M=_?T:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(_?{}:T)||{},M instanceof o.P||typeof M[0]=="number")c=[o.P.convert(M)];else{const R=o.P.convert(M[0]),N=o.P.convert(M[1]);c=[R,new o.P(N.x,R.y),N,new o.P(R.x,N.y),R]}return this.style.queryRenderedFeatures(c,l,this.transform)}querySourceFeatures(T,l){return this.style.querySourceFeatures(T,l)}setStyle(T,l){return(l=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&T?(this._diffStyle(T,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(T,l))}setTransformRequest(T){return this._requestManager.setTransformRequest(T),this}_getUIString(T){const l=this._locale[T];if(l==null)throw new Error(`Missing UI string '${T}'`);return l}_updateStyle(T,l){var c,_;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(T,l));const M=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!T)),T?(this.style=new Sh(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof T=="string"?this.style.loadURL(T,l,M):this.style.loadJSON(T,l,M),this):((_=(c=this.style)===null||c===void 0?void 0:c.projection)===null||_===void 0||_.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Sh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(T,l){if(typeof T=="string"){const c=this._requestManager.transformRequest(T,"Style");o.h(c,new AbortController).then(_=>{this._updateDiff(_.data,l)}).catch(_=>{_&&this.fire(new o.j(_))})}else typeof T=="object"&&this._updateDiff(T,l)}_updateDiff(T,l){try{this.style.setState(T,l)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(T,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(T,l){return this._lazyInitEmptyStyle(),this.style.addSource(T,l),this._update(!0)}isSourceLoaded(T){const l=this.style&&this.style.sourceCaches[T];if(l!==void 0)return l.loaded();this.fire(new o.j(new Error(`There is no source with ID '${T}'`)))}setTerrain(T){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),T){const l=this.style.sourceCaches[T.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${T.source}`);this.terrain===null&&l.reload();for(const c in this.style._layers){const _=this.style._layers[c];_.type==="hillshade"&&_.source===T.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Su(this.painter,l,T),this.painter.renderToTexture=new ah(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==T.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.k("terrain",{terrain:T})),this}getTerrain(){var T,l;return(l=(T=this.terrain)===null||T===void 0?void 0:T.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const T=this.style&&this.style.sourceCaches;for(const l in T){const c=T[l]._tiles;for(const _ in c){const M=c[_];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}removeSource(T){return this.style.removeSource(T),this._update(!0)}getSource(T){return this.style.getSource(T)}addImage(T,l,c={}){const{pixelRatio:_=1,sdf:M=!1,stretchX:R,stretchY:N,content:V,textFitWidth:ne,textFitHeight:ae}=c;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||o.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Me,height:ke,data:De}=l,Ve=l;return this.style.addImage(T,{data:new o.R({width:Me,height:ke},new Uint8Array(De)),pixelRatio:_,stretchX:R,stretchY:N,content:V,textFitWidth:ne,textFitHeight:ae,sdf:M,version:0,userImage:Ve}),Ve.onAdd&&Ve.onAdd(this,T),this}}{const{width:Me,height:ke,data:De}=S.getImageData(l);this.style.addImage(T,{data:new o.R({width:Me,height:ke},De),pixelRatio:_,stretchX:R,stretchY:N,content:V,textFitWidth:ne,textFitHeight:ae,sdf:M,version:0})}}updateImage(T,l){const c=this.style.getImage(T);if(!c)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=l instanceof HTMLImageElement||o.b(l)?S.getImageData(l):l,{width:M,height:R,data:N}=_;if(M===void 0||R===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==c.data.width||R!==c.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const V=!(l instanceof HTMLImageElement||o.b(l));return c.data.replace(N,V),this.style.updateImage(T,c),this}getImage(T){return this.style.getImage(T)}hasImage(T){return T?!!this.style.getImage(T):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(T){this.style.removeImage(T)}loadImage(T){return J.getImage(this._requestManager.transformRequest(T,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(T,l){return this._lazyInitEmptyStyle(),this.style.addLayer(T,l),this._update(!0)}moveLayer(T,l){return this.style.moveLayer(T,l),this._update(!0)}removeLayer(T){return this.style.removeLayer(T),this._update(!0)}getLayer(T){return this.style.getLayer(T)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(T,l,c){return this.style.setLayerZoomRange(T,l,c),this._update(!0)}setFilter(T,l,c={}){return this.style.setFilter(T,l,c),this._update(!0)}getFilter(T){return this.style.getFilter(T)}setPaintProperty(T,l,c,_={}){return this.style.setPaintProperty(T,l,c,_),this._update(!0)}getPaintProperty(T,l){return this.style.getPaintProperty(T,l)}setLayoutProperty(T,l,c,_={}){return this.style.setLayoutProperty(T,l,c,_),this._update(!0)}getLayoutProperty(T,l){return this.style.getLayoutProperty(T,l)}setGlyphs(T,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(T,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(T,l,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(T,l,c,_=>{_||this._update(!0)}),this}removeSprite(T){return this._lazyInitEmptyStyle(),this.style.removeSprite(T),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(T,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(T,l,c=>{c||this._update(!0)}),this}setLight(T,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(T,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(T,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(T,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(T,l){return this.style.setFeatureState(T,l),this._update()}removeFeatureState(T,l){return this.style.removeFeatureState(T,l),this._update()}getFeatureState(T){return this.style.getFeatureState(T)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let T=0,l=0;return this._container&&(T=this._container.clientWidth||400,l=this._container.clientHeight||300),[T,l]}_setupContainer(){const T=this._container;T.classList.add("maplibregl-map");const l=this._canvasContainer=B.create("div","maplibregl-canvas-container",T);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=B.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),_=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],_);const M=this._controlContainer=B.create("div","maplibregl-control-container",T),R=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(N=>{R[N]=B.create("div",`maplibregl-ctrl-${N} `,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(T,l,c){this._canvas.width=Math.floor(c*T),this._canvas.height=Math.floor(c*l),this._canvas.style.width=`${T}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const T=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",_=>{l={requestedAttributes:T},_&&(l.statusMessage=_.statusMessage,l.type=_.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,T):this._canvas.getContext("webgl2",T)||this._canvas.getContext("webgl",T),!c){const _="Failed to initialize WebGL";throw l?(l.message=_,new Error(JSON.stringify(l))):new Error(_)}this.painter=new Gu(c,this.transform),k.testSupport(c)}migrateProjection(T,l){super.migrateProjection(T,l),this.painter.transform=T,this.fire(new o.k("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(T){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||T,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(T){return this._update(),this._renderTaskQueue.add(T)}_cancelRenderFrame(T){this._renderTaskQueue.remove(T)}_render(T){var l,c,_,M,R;const N=this._idleTriggered?this._fadeDuration:0,V=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(T),this._removed)return;let ne=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ke=this.transform.zoom,De=S.now();this.style.zoomHistory.update(ke,De);const Ve=new o.z(ke,{now:De,fadeDuration:N,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Xe=Ve.crossFadingFactor();Xe===1&&Xe===this._crossFadingFactor||(ne=!0,this._crossFadingFactor=Xe),this.style.update(Ve)}const ae=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==V;(_=this.style.projection)===null||_===void 0||_.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((M=this.style.projection)===null||M===void 0?void 0:M.transitionState,(R=this.style.projection)===null||R===void 0?void 0:R.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ae)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,N,this._crossSourceCollisions,ae),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:N,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cd.mark(o.ce.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||ne)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const Me=this._sourcesDirty||this._styleDirty||this._placementDirty;return Me||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||Me||(this._fullyLoaded=!0,o.cd.mark(o.ce.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var T;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),J.removeThrottleControl(this._imageQueueHandle),(T=this._resizeObserver)===null||T===void 0||T.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l!=null&&l.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),B.remove(this._canvasContainer),B.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cd.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then(T=>{o.cd.frame(T),this._frameRequest=null,this._render(T)}).catch(T=>{if(!o.cf(T)&&!function(l){return l.message===Gl}(T))throw T}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(T){this._showTileBoundaries!==T&&(this._showTileBoundaries=T,this._update())}get showPadding(){return!!this._showPadding}set showPadding(T){this._showPadding!==T&&(this._showPadding=T,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(T){this._showCollisionBoxes!==T&&(this._showCollisionBoxes=T,T?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(T){this._showOverdrawInspector!==T&&(this._showOverdrawInspector=T,this._update())}get repaint(){return!!this._repaint}set repaint(T){this._repaint!==T&&(this._repaint=T,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(T){this._vertices=T,this._update()}get version(){return lh}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(T){return this._lazyInitEmptyStyle(),this.style.setProjection(T),this._update(!0)}},a.MapMouseEvent=Ki,a.MapTouchEvent=Vr,a.MapWheelEvent=Bs,a.Marker=Eu,a.NavigationControl=class{constructor(T){this._updateZoomButtons=()=>{const l=this._map.getZoom(),c=l===this._map.getMaxZoom(),_=l===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,c)=>{const _=this._map._getUIString(`NavigationControl.${c}`);l.title=_,l.setAttribute("aria-label",_)},this.options=o.e({},Ys,T),this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),B.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),B.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=B.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(T){return this._map=T,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){B.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(T,l){const c=B.create("button",T,this._container);return c.type="button",c.addEventListener("click",l),c}},a.Popup=class extends o.E{constructor(T){super(),this.remove=()=>(this._content&&B.remove(this._content),this._container&&(B.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=B.create("div","maplibregl-popup",this._map.getContainer()),this._tip=B.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const V of this.options.className.split(" "))this._container.classList.add(V);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?pl(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!l)return;const _=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let M=this.options.anchor;const R=$l(this.options.offset);if(!M){const V=this._container.offsetWidth,ne=this._container.offsetHeight;let ae;ae=_.y+R.bottom.y<ne?["top"]:_.y>this._map.transform.height-ne?["bottom"]:[],_.x<V/2?ae.push("left"):_.x>this._map.transform.width-V/2&&ae.push("right"),M=ae.length===0?"bottom":ae.join("-")}let N=_.add(R[M]);this.options.subpixelPositioning||(N=N.round()),B.setTransform(this._container,`${Vu[M]} translate(${N.x}px,${N.y}px)`),Oc(this._container,M,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Ic),T)}addTo(T){return this._map&&this.remove(),this._map=T,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(T){return this._lngLat=o.N.convert(T),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(T){return this.setDOMContent(document.createTextNode(T))}setHTML(T){const l=document.createDocumentFragment(),c=document.createElement("body");let _;for(c.innerHTML=T;_=c.firstChild,_;)l.appendChild(_);return this.setDOMContent(l)}getMaxWidth(){var T;return(T=this._container)===null||T===void 0?void 0:T.style.maxWidth}setMaxWidth(T){return this.options.maxWidth=T,this._update(),this}setDOMContent(T){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=B.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(T),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(T){return this._container&&this._container.classList.add(T),this}removeClassName(T){return this._container&&this._container.classList.remove(T),this}setOffset(T){return this.options.offset=T,this._update(),this}toggleClassName(T){if(this._container)return this._container.classList.toggle(T)}setSubpixelPositioning(T){this.options.subpixelPositioning=T}_createCloseButton(){this.options.closeButton&&(this._closeButton=B.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const T=this._container.querySelector(Hu);T&&T.focus()}},a.RasterDEMTileSource=Nn,a.RasterTileSource=gn,a.ScaleControl=class{constructor(T){this._onMove=()=>{fA(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,fA(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},cu),T)}getDefaultPosition(){return"bottom-left"}onAdd(T){return this._map=T,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-scale",T.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){B.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=Fs,a.Style=Sh,a.TerrainControl=class{constructor(T){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=T}onAdd(T){return this._map=T,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=B.create("button","maplibregl-ctrl-terrain",this._container),B.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){B.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=Mc,a.TwoFingersTouchRotateHandler=oc,a.TwoFingersTouchZoomHandler=Ed,a.TwoFingersTouchZoomRotateHandler=OA,a.VectorTileSource=Lt,a.VideoSource=Kn,a.addSourceType=(T,l)=>o._(void 0,void 0,void 0,function*(){if(Mr(T))throw new Error(`A source type called "${T}" already exists.`);((c,_)=>{Xn[c]=_})(T,l)}),a.clearPrewarmedResources=function(){const T=_t;T&&(T.isPreloaded()&&T.numActive()===1?(T.release(Pe),_t=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.createTileMesh=at,a.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return ce().getRTLTextPluginStatus()},a.getVersion=function(){return Bd},a.getWorkerCount=function(){return it.workerCount},a.getWorkerUrl=function(){return o.a.WORKER_URL},a.importScriptInWorkers=function(T){return Ue().broadcast("IS",T)},a.prewarm=function(){Dt().acquire(Pe)},a.setMaxParallelImageRequests=function(T){o.a.MAX_PARALLEL_IMAGE_REQUESTS=T},a.setRTLTextPlugin=function(T,l){return ce().setRTLTextPlugin(T,l)},a.setWorkerCount=function(T){it.workerCount=T},a.setWorkerUrl=function(T){o.a.WORKER_URL=T}});var s=t;return s})}(Fb)),Fb.exports}var eZ=JH();const Y1=Xa(eZ);var Z_=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function XU(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pv={exports:{}};Pv.exports;var N7;function tZ(){return N7||(N7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",d="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",E="[object Date]",S="[object Error]",B="[object Function]",k="[object GeneratorFunction]",z="[object Map]",j="[object Number]",Y="[object Null]",q="[object Object]",ie="[object Promise]",J="[object Proxy]",$="[object RegExp]",te="[object Set]",W="[object String]",oe="[object Symbol]",fe="[object Undefined]",he="[object WeakMap]",Se="[object ArrayBuffer]",pe="[object DataView]",we="[object Float32Array]",Ke="[object Float64Array]",ge="[object Int8Array]",st="[object Int16Array]",Qe="[object Int32Array]",Ze="[object Uint8Array]",We="[object Uint8ClampedArray]",Ce="[object Uint16Array]",Pe="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,vt=/^\[object .+?Constructor\]$/,_t=/^(?:0|[1-9]\d*)$/,ft={};ft[we]=ft[Ke]=ft[ge]=ft[st]=ft[Qe]=ft[Ze]=ft[We]=ft[Ce]=ft[Pe]=!0,ft[o]=ft[d]=ft[Se]=ft[b]=ft[pe]=ft[E]=ft[S]=ft[B]=ft[z]=ft[j]=ft[q]=ft[$]=ft[te]=ft[W]=ft[he]=!1;var Dt=typeof Z_=="object"&&Z_&&Z_.Object===Object&&Z_,Tt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Dt||Tt||Function("return this")(),Re=e&&!e.nodeType&&e,Be=Re&&!0&&n&&!n.nodeType&&n,nt=Be&&Be.exports===Re,Ct=nt&&Dt.process,pt=function(){try{return Ct&&Ct.binding&&Ct.binding("util")}catch{}}(),zt=pt&&pt.isTypedArray;function tn(ee,Ie){for(var at=-1,Ht=ee==null?0:ee.length,kr=0,Vn=[];++at<Ht;){var ai=ee[at];Ie(ai,at,ee)&&(Vn[kr++]=ai)}return Vn}function Lt(ee,Ie){for(var at=-1,Ht=Ie.length,kr=ee.length;++at<Ht;)ee[kr+at]=Ie[at];return ee}function gn(ee,Ie){for(var at=-1,Ht=ee==null?0:ee.length;++at<Ht;)if(Ie(ee[at],at,ee))return!0;return!1}function Nn(ee,Ie){for(var at=-1,Ht=Array(ee);++at<ee;)Ht[at]=Ie(at);return Ht}function rn(ee){return function(Ie){return ee(Ie)}}function or(ee,Ie){return ee.has(Ie)}function Kn(ee,Ie){return ee==null?void 0:ee[Ie]}function pn(ee){var Ie=-1,at=Array(ee.size);return ee.forEach(function(Ht,kr){at[++Ie]=[kr,Ht]}),at}function Xn(ee,Ie){return function(at){return ee(Ie(at))}}function Mr(ee){var Ie=-1,at=Array(ee.size);return ee.forEach(function(Ht){at[++Ie]=Ht}),at}var Yn=Array.prototype,er=Function.prototype,qe=Object.prototype,ce=Ue["__core-js_shared__"],me=er.toString,tt=qe.hasOwnProperty,Et=function(){var ee=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),$t=qe.toString,on=RegExp("^"+me.call(tt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rr=nt?Ue.Buffer:void 0,Oe=Ue.Symbol,se=Ue.Uint8Array,_e=qe.propertyIsEnumerable,p=Yn.splice,Ne=Oe?Oe.toStringTag:void 0,$e=Object.getOwnPropertySymbols,rt=rr?rr.isBuffer:void 0,dt=Xn(Object.keys,Object),ct=Bi(Ue,"DataView"),Qt=Bi(Ue,"Map"),Vt=Bi(Ue,"Promise"),Nt=Bi(Ue,"Set"),wt=Bi(Ue,"WeakMap"),Dn=Bi(Object,"create"),On=po(ct),pr=po(Qt),Er=po(Vt),sn=po(Nt),Wn=po(wt),Ln=Oe?Oe.prototype:void 0,Ir=Ln?Ln.valueOf:void 0;function Br(ee){var Ie=-1,at=ee==null?0:ee.length;for(this.clear();++Ie<at;){var Ht=ee[Ie];this.set(Ht[0],Ht[1])}}function Kr(){this.__data__=Dn?Dn(null):{},this.size=0}function Ar(ee){var Ie=this.has(ee)&&delete this.__data__[ee];return this.size-=Ie?1:0,Ie}function ho(ee){var Ie=this.__data__;if(Dn){var at=Ie[ee];return at===r?void 0:at}return tt.call(Ie,ee)?Ie[ee]:void 0}function Ea(ee){var Ie=this.__data__;return Dn?Ie[ee]!==void 0:tt.call(Ie,ee)}function Yi(ee,Ie){var at=this.__data__;return this.size+=this.has(ee)?0:1,at[ee]=Dn&&Ie===void 0?r:Ie,this}Br.prototype.clear=Kr,Br.prototype.delete=Ar,Br.prototype.get=ho,Br.prototype.has=Ea,Br.prototype.set=Yi;function vi(ee){var Ie=-1,at=ee==null?0:ee.length;for(this.clear();++Ie<at;){var Ht=ee[Ie];this.set(Ht[0],Ht[1])}}function so(){this.__data__=[],this.size=0}function So(ee){var Ie=this.__data__,at=ar(Ie,ee);if(at<0)return!1;var Ht=Ie.length-1;return at==Ht?Ie.pop():p.call(Ie,at,1),--this.size,!0}function Pi(ee){var Ie=this.__data__,at=ar(Ie,ee);return at<0?void 0:Ie[at][1]}function Ua(ee){return ar(this.__data__,ee)>-1}function Ba(ee,Ie){var at=this.__data__,Ht=ar(at,ee);return Ht<0?(++this.size,at.push([ee,Ie])):at[Ht][1]=Ie,this}vi.prototype.clear=so,vi.prototype.delete=So,vi.prototype.get=Pi,vi.prototype.has=Ua,vi.prototype.set=Ba;function rs(ee){var Ie=-1,at=ee==null?0:ee.length;for(this.clear();++Ie<at;){var Ht=ee[Ie];this.set(Ht[0],Ht[1])}}function ca(){this.size=0,this.__data__={hash:new Br,map:new(Qt||vi),string:new Br}}function dl(ee){var Ie=Lr(this,ee).delete(ee);return this.size-=Ie?1:0,Ie}function lo(ee){return Lr(this,ee).get(ee)}function Ku(ee){return Lr(this,ee).has(ee)}function iu(ee,Ie){var at=Lr(this,ee),Ht=at.size;return at.set(ee,Ie),this.size+=at.size==Ht?0:1,this}rs.prototype.clear=ca,rs.prototype.delete=dl,rs.prototype.get=lo,rs.prototype.has=Ku,rs.prototype.set=iu;function ao(ee){var Ie=-1,at=ee==null?0:ee.length;for(this.__data__=new rs;++Ie<at;)this.add(ee[Ie])}function Fr(ee){return this.__data__.set(ee,r),this}function Ja(ee){return this.__data__.has(ee)}ao.prototype.add=ao.prototype.push=Fr,ao.prototype.has=Ja;function Rs(ee){var Ie=this.__data__=new vi(ee);this.size=Ie.size}function oa(){this.__data__=new vi,this.size=0}function Ye(ee){var Ie=this.__data__,at=Ie.delete(ee);return this.size=Ie.size,at}function Mt(ee){return this.__data__.get(ee)}function yn(ee){return this.__data__.has(ee)}function $n(ee,Ie){var at=this.__data__;if(at instanceof vi){var Ht=at.__data__;if(!Qt||Ht.length<t-1)return Ht.push([ee,Ie]),this.size=++at.size,this;at=this.__data__=new rs(Ht)}return at.set(ee,Ie),this.size=at.size,this}Rs.prototype.clear=oa,Rs.prototype.delete=Ye,Rs.prototype.get=Mt,Rs.prototype.has=yn,Rs.prototype.set=$n;function dn(ee,Ie){var at=nl(ee),Ht=!at&&Ss(ee),kr=!at&&!Ht&&Ol(ee),Vn=!at&&!Ht&&!kr&&su(ee),ai=at||Ht||kr||Vn,di=ai?Nn(ee.length,String):[],Cr=di.length;for(var Tr in ee)tt.call(ee,Tr)&&!(ai&&(Tr=="length"||kr&&(Tr=="offset"||Tr=="parent")||Vn&&(Tr=="buffer"||Tr=="byteLength"||Tr=="byteOffset")||Qs(Tr,Cr)))&&di.push(Tr);return di}function ar(ee,Ie){for(var at=ee.length;at--;)if(gs(ee[at][0],Ie))return at;return-1}function Ri(ee,Ie,at){var Ht=Ie(ee);return nl(ee)?Ht:Lt(Ht,at(ee))}function fo(ee){return ee==null?ee===void 0?fe:Y:Ne&&Ne in Object(ee)?tl(ee):Hs(ee)}function _s(ee){return ei(ee)&&fo(ee)==o}function Gs(ee,Ie,at,Ht,kr){return ee===Ie?!0:ee==null||Ie==null||!ei(ee)&&!ei(Ie)?ee!==ee&&Ie!==Ie:bA(ee,Ie,at,Ht,Gs,kr)}function bA(ee,Ie,at,Ht,kr,Vn){var ai=nl(ee),di=nl(Ie),Cr=ai?d:Eo(ee),Tr=di?d:Eo(Ie);Cr=Cr==o?q:Cr,Tr=Tr==o?q:Tr;var Ci=Cr==q,Bo=Tr==q,Ti=Cr==Tr;if(Ti&&Ol(ee)){if(!Ol(Ie))return!1;ai=!0,Ci=!1}if(Ti&&!Ci)return Vn||(Vn=new Rs),ai||su(ee)?ci(ee,Ie,at,Ht,kr,Vn):da(ee,Ie,Cr,at,Ht,kr,Vn);if(!(at&i)){var Yr=Ci&&tt.call(ee,"__wrapped__"),Zi=Bo&&tt.call(Ie,"__wrapped__");if(Yr||Zi){var Xi=Yr?ee.value():ee,As=Zi?Ie.value():Ie;return Vn||(Vn=new Rs),kr(Xi,As,at,Ht,Vn)}}return Ti?(Vn||(Vn=new Rs),aA(ee,Ie,at,Ht,kr,Vn)):!1}function ii(ee){if(!zi(ee)||Wl(ee))return!1;var Ie=Hi(ee)?on:vt;return Ie.test(po(ee))}function Mi(ee){return ei(ee)&&ou(ee.length)&&!!ft[fo(ee)]}function el(ee){if(!is(ee))return dt(ee);var Ie=[];for(var at in Object(ee))tt.call(ee,at)&&at!="constructor"&&Ie.push(at);return Ie}function ci(ee,Ie,at,Ht,kr,Vn){var ai=at&i,di=ee.length,Cr=Ie.length;if(di!=Cr&&!(ai&&Cr>di))return!1;var Tr=Vn.get(ee);if(Tr&&Vn.get(Ie))return Tr==Ie;var Ci=-1,Bo=!0,Ti=at&s?new ao:void 0;for(Vn.set(ee,Ie),Vn.set(Ie,ee);++Ci<di;){var Yr=ee[Ci],Zi=Ie[Ci];if(Ht)var Xi=ai?Ht(Zi,Yr,Ci,Ie,ee,Vn):Ht(Yr,Zi,Ci,ee,Ie,Vn);if(Xi!==void 0){if(Xi)continue;Bo=!1;break}if(Ti){if(!gn(Ie,function(As,va){if(!or(Ti,va)&&(Yr===As||kr(Yr,As,at,Ht,Vn)))return Ti.push(va)})){Bo=!1;break}}else if(!(Yr===Zi||kr(Yr,Zi,at,Ht,Vn))){Bo=!1;break}}return Vn.delete(ee),Vn.delete(Ie),Bo}function da(ee,Ie,at,Ht,kr,Vn,ai){switch(at){case pe:if(ee.byteLength!=Ie.byteLength||ee.byteOffset!=Ie.byteOffset)return!1;ee=ee.buffer,Ie=Ie.buffer;case Se:return!(ee.byteLength!=Ie.byteLength||!Vn(new se(ee),new se(Ie)));case b:case E:case j:return gs(+ee,+Ie);case S:return ee.name==Ie.name&&ee.message==Ie.message;case $:case W:return ee==Ie+"";case z:var di=pn;case te:var Cr=Ht&i;if(di||(di=Mr),ee.size!=Ie.size&&!Cr)return!1;var Tr=ai.get(ee);if(Tr)return Tr==Ie;Ht|=s,ai.set(ee,Ie);var Ci=ci(di(ee),di(Ie),Ht,kr,Vn,ai);return ai.delete(ee),Ci;case oe:if(Ir)return Ir.call(ee)==Ir.call(Ie)}return!1}function aA(ee,Ie,at,Ht,kr,Vn){var ai=at&i,di=us(ee),Cr=di.length,Tr=us(Ie),Ci=Tr.length;if(Cr!=Ci&&!ai)return!1;for(var Bo=Cr;Bo--;){var Ti=di[Bo];if(!(ai?Ti in Ie:tt.call(Ie,Ti)))return!1}var Yr=Vn.get(ee);if(Yr&&Vn.get(Ie))return Yr==Ie;var Zi=!0;Vn.set(ee,Ie),Vn.set(Ie,ee);for(var Xi=ai;++Bo<Cr;){Ti=di[Bo];var As=ee[Ti],va=Ie[Ti];if(Ht)var za=ai?Ht(va,As,Ti,Ie,ee,Vn):Ht(As,va,Ti,ee,Ie,Vn);if(!(za===void 0?As===va||kr(As,va,at,Ht,Vn):za)){Zi=!1;break}Xi||(Xi=Ti=="constructor")}if(Zi&&!Xi){var gu=ee.constructor,Zs=Ie.constructor;gu!=Zs&&"constructor"in ee&&"constructor"in Ie&&!(typeof gu=="function"&&gu instanceof gu&&typeof Zs=="function"&&Zs instanceof Zs)&&(Zi=!1)}return Vn.delete(ee),Vn.delete(Ie),Zi}function us(ee){return Ri(ee,Wi,Ds)}function Lr(ee,Ie){var at=ee.__data__;return mu(Ie)?at[typeof Ie=="string"?"string":"hash"]:at.map}function Bi(ee,Ie){var at=Kn(ee,Ie);return ii(at)?at:void 0}function tl(ee){var Ie=tt.call(ee,Ne),at=ee[Ne];try{ee[Ne]=void 0;var Ht=!0}catch{}var kr=$t.call(ee);return Ht&&(Ie?ee[Ne]=at:delete ee[Ne]),kr}var Ds=$e?function(ee){return ee==null?[]:(ee=Object(ee),tn($e(ee),function(Ie){return _e.call(ee,Ie)}))}:uo,Eo=fo;(ct&&Eo(new ct(new ArrayBuffer(1)))!=pe||Qt&&Eo(new Qt)!=z||Vt&&Eo(Vt.resolve())!=ie||Nt&&Eo(new Nt)!=te||wt&&Eo(new wt)!=he)&&(Eo=function(ee){var Ie=fo(ee),at=Ie==q?ee.constructor:void 0,Ht=at?po(at):"";if(Ht)switch(Ht){case On:return pe;case pr:return z;case Er:return ie;case sn:return te;case Wn:return he}return Ie});function Qs(ee,Ie){return Ie=Ie??a,!!Ie&&(typeof ee=="number"||_t.test(ee))&&ee>-1&&ee%1==0&&ee<Ie}function mu(ee){var Ie=typeof ee;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ee!=="__proto__":ee===null}function Wl(ee){return!!Et&&Et in ee}function is(ee){var Ie=ee&&ee.constructor,at=typeof Ie=="function"&&Ie.prototype||qe;return ee===at}function Hs(ee){return $t.call(ee)}function po(ee){if(ee!=null){try{return me.call(ee)}catch{}try{return ee+""}catch{}}return""}function gs(ee,Ie){return ee===Ie||ee!==ee&&Ie!==Ie}var Ss=_s(function(){return arguments}())?_s:function(ee){return ei(ee)&&tt.call(ee,"callee")&&!_e.call(ee,"callee")},nl=Array.isArray;function Ks(ee){return ee!=null&&ou(ee.length)&&!Hi(ee)}var Ol=rt||Di;function lA(ee,Ie){return Gs(ee,Ie)}function Hi(ee){if(!zi(ee))return!1;var Ie=fo(ee);return Ie==B||Ie==k||Ie==g||Ie==J}function ou(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=a}function zi(ee){var Ie=typeof ee;return ee!=null&&(Ie=="object"||Ie=="function")}function ei(ee){return ee!=null&&typeof ee=="object"}var su=zt?rn(zt):Mi;function Wi(ee){return Ks(ee)?dn(ee):el(ee)}function uo(){return[]}function Di(){return!1}n.exports=lA}(Pv,Pv.exports)),Pv.exports}var nZ=tZ(),rZ=XU(nZ);function F6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function L6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function U6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function iZ(n,e){const t=[],r=[],i=[];function s(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const o=n[a];if(!o||o.length===0){const d=s(a);r.push(F6(d.circle,a)),i.push(U6(d.line,a)),t.push(L6(d.polygon,d.polygonOutline,a))}else o.forEach(d=>{const g=s(d);r.push(F6(g.circle,a,d)),i.push(U6(g.line,a,d)),t.push(L6(g.polygon,g.polygonOutline,a,d))})}),t.concat(i).concat(r)}function oZ(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const a=n.sources[s];(a.type==="vector"||a.type==="geojson")&&(i[s]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var W7={polygonLayer:L6,lineLayer:U6,circleLayer:F6,generateInspectStyle:oZ,generateColoredLayers:iZ};class sZ{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function aZ(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function g4(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${aZ(e)}</div></div>`}function lZ(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function uZ(n){const e=lZ(n.layer["source-layer"]||n.layer.source),t=g4("$id",n.id),r=g4("$type",n.geometry.type),i=Object.keys(n.properties).map(s=>g4(s,n.properties[s]));return[e,t,r].concat(i).join("")}function AZ(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${uZ(e)}</div>`).join("")}function cZ(n){return`<div class="maplibregl-inspect_popup">${AZ(n)}</div>`}var Rv={exports:{}},dZ=Rv.exports,G7;function hZ(){return G7||(G7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(dZ,function(){var t=null,r={};Y();var i=[],s=function(W){if(W=W||{},W.seed!==void 0&&W.seed!==null&&W.seed===parseInt(W.seed,10))t=W.seed;else if(typeof W.seed=="string")t=$(W.seed);else{if(W.seed!==void 0&&W.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,fe,he;if(W.count!==null&&W.count!==void 0){for(var Se=W.count,pe=[],we=0;we<W.count;we++)i.push(!1);for(W.count=null;Se>pe.length;){var Ke=s(W);t!==null&&(W.seed=t),pe.push(Ke)}return W.count=Se,pe}return oe=a(W),fe=o(oe,W),he=d(oe,fe,W),g([oe,fe,he],W)};function a(W){if(i.length>0){var oe=te(W.hue),fe=k(oe),he=(oe[1]-oe[0])/i.length,Se=parseInt((fe-oe[0])/he);i[Se]===!0?Se=(Se+2)%i.length:i[Se]=!0;var pe=(oe[0]+Se*he)%359,we=(oe[0]+(Se+1)*he)%359;return oe=[pe,we],fe=k(oe),fe<0&&(fe=360+fe),fe}else{var oe=E(W.hue);return fe=k(oe),fe<0&&(fe=360+fe),fe}}function o(W,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return k([0,100]);var fe=S(W),he=fe[0],Se=fe[1];switch(oe.luminosity){case"bright":he=55;break;case"dark":he=Se-10;break;case"light":Se=55;break}return k([he,Se])}function d(W,oe,fe){var he=b(W,oe),Se=100;switch(fe.luminosity){case"dark":Se=he+20;break;case"light":he=(Se+he)/2;break;case"random":he=0,Se=100;break}return k([he,Se])}function g(W,oe){switch(oe.format){case"hsvArray":return W;case"hslArray":return J(W);case"hsl":var fe=J(W);return"hsl("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%)";case"hsla":var he=J(W),we=oe.alpha||Math.random();return"hsla("+he[0]+", "+he[1]+"%, "+he[2]+"%, "+we+")";case"rgbArray":return q(W);case"rgb":var Se=q(W);return"rgb("+Se.join(", ")+")";case"rgba":var pe=q(W),we=oe.alpha||Math.random();return"rgba("+pe.join(", ")+", "+we+")";default:return z(W)}}function b(W,oe){for(var fe=B(W).lowerBounds,he=0;he<fe.length-1;he++){var Se=fe[he][0],pe=fe[he][1],we=fe[he+1][0],Ke=fe[he+1][1];if(oe>=Se&&oe<=we){var ge=(Ke-pe)/(we-Se),st=pe-ge*Se;return ge*oe+st}}return 0}function E(W){if(typeof parseInt(W)=="number"){var oe=parseInt(W);if(oe<360&&oe>0)return[oe,oe]}if(typeof W=="string"){if(r[W]){var fe=r[W];if(fe.hueRange)return fe.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var he=ie(W)[0];return[he,he]}}return[0,360]}function S(W){return B(W).saturationRange}function B(W){W>=334&&W<=360&&(W-=360);for(var oe in r){var fe=r[oe];if(fe.hueRange&&W>=fe.hueRange[0]&&W<=fe.hueRange[1])return r[oe]}return"Color not found"}function k(W){if(t===null){var oe=.618033988749895,fe=Math.random();return fe+=oe,fe%=1,Math.floor(W[0]+fe*(W[1]+1-W[0]))}else{var he=W[1]||1,Se=W[0]||0;t=(t*9301+49297)%233280;var pe=t/233280;return Math.floor(Se+pe*(he-Se))}}function z(W){var oe=q(W);function fe(Se){var pe=Se.toString(16);return pe.length==1?"0"+pe:pe}var he="#"+fe(oe[0])+fe(oe[1])+fe(oe[2]);return he}function j(W,oe,fe){var he=fe[0][0],Se=fe[fe.length-1][0],pe=fe[fe.length-1][1],we=fe[0][1];r[W]={hueRange:oe,lowerBounds:fe,saturationRange:[he,Se],brightnessRange:[pe,we]}}function Y(){j("monochrome",null,[[0,0],[100,0]]),j("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),j("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),j("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),j("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),j("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),j("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),j("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function q(W){var oe=W[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var fe=W[1]/100,he=W[2]/100,Se=Math.floor(oe*6),pe=oe*6-Se,we=he*(1-fe),Ke=he*(1-pe*fe),ge=he*(1-(1-pe)*fe),st=256,Qe=256,Ze=256;switch(Se){case 0:st=he,Qe=ge,Ze=we;break;case 1:st=Ke,Qe=he,Ze=we;break;case 2:st=we,Qe=he,Ze=ge;break;case 3:st=we,Qe=Ke,Ze=he;break;case 4:st=ge,Qe=we,Ze=he;break;case 5:st=he,Qe=we,Ze=Ke;break}var We=[Math.floor(st*255),Math.floor(Qe*255),Math.floor(Ze*255)];return We}function ie(W){W=W.replace(/^#/,""),W=W.length===3?W.replace(/(.)/g,"$1$1"):W;var oe=parseInt(W.substr(0,2),16)/255,fe=parseInt(W.substr(2,2),16)/255,he=parseInt(W.substr(4,2),16)/255,Se=Math.max(oe,fe,he),pe=Se-Math.min(oe,fe,he),we=Se?pe/Se:0;switch(Se){case oe:return[60*((fe-he)/pe%6)||0,we,Se];case fe:return[60*((he-oe)/pe+2)||0,we,Se];case he:return[60*((oe-fe)/pe+4)||0,we,Se]}}function J(W){var oe=W[0],fe=W[1]/100,he=W[2]/100,Se=(2-fe)*he;return[oe,Math.round(fe*he/(Se<1?Se:2-Se)*1e4)/100,Se/2*100]}function $(W){for(var oe=0,fe=0;fe!==W.length&&!(oe>=Number.MAX_SAFE_INTEGER);fe++)oe+=W.charCodeAt(fe);return oe}function te(W){if(isNaN(W)){if(typeof W=="string"){if(r[W]){var fe=r[W];if(fe.hueRange)return fe.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var he=ie(W)[0];return B(he).hueRange}}}else{var oe=parseInt(W);if(oe<360&&oe>0)return B(W).hueRange}return[0,360]}return s})}(Rv,Rv.exports)),Rv.exports}var fZ=hZ(),pZ=XU(fZ);function mZ(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${pZ({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var gZ={brightColor:mZ};function yZ(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function vZ(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class d8{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!rZ(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();yZ(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const s=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=s.length?"pointer":"",!s.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const a=this.options.renderPopup(s);typeof a=="string"?this._popup.setHTML(a):this._popup.setDOMContent(a),this._popup.addTo(this._map)}}},!(this instanceof d8))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:gZ.brightColor,buildInspectStyle:W7.generateInspectStyle,renderPopup:cZ,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new sZ({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=W7.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(vZ(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var Dv={exports:{}},CZ=Dv.exports,Q7;function _Z(){return Q7||(Q7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(CZ,function(){var t=null,r={};Y();var i=[],s=function(W){if(W=W||{},W.seed!==void 0&&W.seed!==null&&W.seed===parseInt(W.seed,10))t=W.seed;else if(typeof W.seed=="string")t=$(W.seed);else{if(W.seed!==void 0&&W.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,fe,he;if(W.count!==null&&W.count!==void 0){for(var Se=W.count,pe=[],we=0;we<W.count;we++)i.push(!1);for(W.count=null;Se>pe.length;){var Ke=s(W);t!==null&&(W.seed=t),pe.push(Ke)}return W.count=Se,pe}return oe=a(W),fe=o(oe,W),he=d(oe,fe,W),g([oe,fe,he],W)};function a(W){if(i.length>0){var oe=te(W.hue),fe=k(oe),he=(oe[1]-oe[0])/i.length,Se=parseInt((fe-oe[0])/he);i[Se]===!0?Se=(Se+2)%i.length:i[Se]=!0;var pe=(oe[0]+Se*he)%359,we=(oe[0]+(Se+1)*he)%359;return oe=[pe,we],fe=k(oe),fe<0&&(fe=360+fe),fe}else{var oe=E(W.hue);return fe=k(oe),fe<0&&(fe=360+fe),fe}}function o(W,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return k([0,100]);var fe=S(W),he=fe[0],Se=fe[1];switch(oe.luminosity){case"bright":he=55;break;case"dark":he=Se-10;break;case"light":Se=55;break}return k([he,Se])}function d(W,oe,fe){var he=b(W,oe),Se=100;switch(fe.luminosity){case"dark":Se=he+20;break;case"light":he=(Se+he)/2;break;case"random":he=0,Se=100;break}return k([he,Se])}function g(W,oe){switch(oe.format){case"hsvArray":return W;case"hslArray":return J(W);case"hsl":var fe=J(W);return"hsl("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%)";case"hsla":var he=J(W),we=oe.alpha||Math.random();return"hsla("+he[0]+", "+he[1]+"%, "+he[2]+"%, "+we+")";case"rgbArray":return q(W);case"rgb":var Se=q(W);return"rgb("+Se.join(", ")+")";case"rgba":var pe=q(W),we=oe.alpha||Math.random();return"rgba("+pe.join(", ")+", "+we+")";default:return z(W)}}function b(W,oe){for(var fe=B(W).lowerBounds,he=0;he<fe.length-1;he++){var Se=fe[he][0],pe=fe[he][1],we=fe[he+1][0],Ke=fe[he+1][1];if(oe>=Se&&oe<=we){var ge=(Ke-pe)/(we-Se),st=pe-ge*Se;return ge*oe+st}}return 0}function E(W){if(typeof parseInt(W)=="number"){var oe=parseInt(W);if(oe<360&&oe>0)return[oe,oe]}if(typeof W=="string"){if(r[W]){var fe=r[W];if(fe.hueRange)return fe.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var he=ie(W)[0];return[he,he]}}return[0,360]}function S(W){return B(W).saturationRange}function B(W){W>=334&&W<=360&&(W-=360);for(var oe in r){var fe=r[oe];if(fe.hueRange&&W>=fe.hueRange[0]&&W<=fe.hueRange[1])return r[oe]}return"Color not found"}function k(W){if(t===null){var oe=.618033988749895,fe=Math.random();return fe+=oe,fe%=1,Math.floor(W[0]+fe*(W[1]+1-W[0]))}else{var he=W[1]||1,Se=W[0]||0;t=(t*9301+49297)%233280;var pe=t/233280;return Math.floor(Se+pe*(he-Se))}}function z(W){var oe=q(W);function fe(Se){var pe=Se.toString(16);return pe.length==1?"0"+pe:pe}var he="#"+fe(oe[0])+fe(oe[1])+fe(oe[2]);return he}function j(W,oe,fe){var he=fe[0][0],Se=fe[fe.length-1][0],pe=fe[fe.length-1][1],we=fe[0][1];r[W]={hueRange:oe,lowerBounds:fe,saturationRange:[he,Se],brightnessRange:[pe,we]}}function Y(){j("monochrome",null,[[0,0],[100,0]]),j("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),j("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),j("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),j("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),j("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),j("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),j("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function q(W){var oe=W[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var fe=W[1]/100,he=W[2]/100,Se=Math.floor(oe*6),pe=oe*6-Se,we=he*(1-fe),Ke=he*(1-pe*fe),ge=he*(1-(1-pe)*fe),st=256,Qe=256,Ze=256;switch(Se){case 0:st=he,Qe=ge,Ze=we;break;case 1:st=Ke,Qe=he,Ze=we;break;case 2:st=we,Qe=he,Ze=ge;break;case 3:st=we,Qe=Ke,Ze=he;break;case 4:st=ge,Qe=we,Ze=he;break;case 5:st=he,Qe=we,Ze=Ke;break}var We=[Math.floor(st*255),Math.floor(Qe*255),Math.floor(Ze*255)];return We}function ie(W){W=W.replace(/^#/,""),W=W.length===3?W.replace(/(.)/g,"$1$1"):W;var oe=parseInt(W.substr(0,2),16)/255,fe=parseInt(W.substr(2,2),16)/255,he=parseInt(W.substr(4,2),16)/255,Se=Math.max(oe,fe,he),pe=Se-Math.min(oe,fe,he),we=Se?pe/Se:0;switch(Se){case oe:return[60*((fe-he)/pe%6)||0,we,Se];case fe:return[60*((he-oe)/pe+2)||0,we,Se];case he:return[60*((oe-fe)/pe+4)||0,we,Se]}}function J(W){var oe=W[0],fe=W[1]/100,he=W[2]/100,Se=(2-fe)*he;return[oe,Math.round(fe*he/(Se<1?Se:2-Se)*1e4)/100,Se/2*100]}function $(W){for(var oe=0,fe=0;fe!==W.length&&!(oe>=Number.MAX_SAFE_INTEGER);fe++)oe+=W.charCodeAt(fe);return oe}function te(W){if(isNaN(W)){if(typeof W=="string"){if(r[W]){var fe=r[W];if(fe.hueRange)return fe.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var he=ie(W)[0];return B(he).hueRange}}}else{var oe=parseInt(W);if(oe<360&&oe>0)return B(W).hueRange}return[0,360]}return s})}(Dv,Dv.exports)),Dv.exports}var bZ=_Z();const xZ=Xa(bZ);function wZ(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${xZ({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const JU={brightColor:wZ};var y4={exports:{}},v4,q7;function MZ(){if(q7)return v4;q7=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return v4=n,v4}var C4,Y7;function SZ(){if(Y7)return C4;Y7=1;var n=MZ();function e(){}function t(){}return t.resetWarningCache=e,C4=function(){function r(a,o,d,g,b,E){if(E!==n){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},C4}var $7;function Cp(){return $7||($7=1,y4.exports=SZ()()),y4.exports}var EZ=Cp();const pi=Xa(EZ);var V7=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function BZ(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var z0=function(e,t){var r=e.children,i=e.color,s=e.size,a=e.style,o=e.width,d=e.height,g=BZ(e,["children","color","size","style","width","height"]),b=t.reactIconBase,E=b===void 0?{}:b,S=s||E.size||"1em";return nr.createElement("svg",V7({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:d||S,width:o||S},E,g,{style:V7({verticalAlign:"middle",color:i||E.color},E.style||{},a)}))};z0.propTypes={color:pi.string,size:pi.oneOfType([pi.string,pi.number]),width:pi.oneOfType([pi.string,pi.number]),height:pi.oneOfType([pi.string,pi.number]),style:pi.object};z0.contextTypes={reactIconBase:pi.shape(z0.propTypes)};function a2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return a2=function(){return a},a}a2();class OZ extends nr.Component{render(){return a2().f[0]++,a2().s[0]++,le.jsx(z0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function l2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return l2=function(){return a},a}l2();class X_ extends nr.Component{render(){return l2().f[0]++,l2().s[0]++,le.jsx(z0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function u2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return u2=function(){return a},a}u2();class IZ extends nr.Component{render(){return u2().f[0]++,u2().s[0]++,le.jsx(z0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:le.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function A2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return A2=function(){return a},a}A2();class H7 extends nr.Component{render(){return A2().f[0]++,A2().s[0]++,le.jsx(z0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function c2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return c2=function(){return a},a}c2();class kZ extends nr.Component{render(){return c2().f[0]++,c2().s[0]++,le.jsx(z0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function Gy(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function TZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function PZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function RZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function DZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function KZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function FZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function LZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function UZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function zZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function ez(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function jZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function z6(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function NZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function WZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function GZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function Z7(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function QZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function qZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function YZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function $Z(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function VZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function HZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function ZZ(n){return ru({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function d2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return d2=function(){return a},a}d2();class XZ extends nr.Component{render(){return d2().f[0]++,d2().s[0]++,le.jsx(ZZ,{...this.props})}}function Ll(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ll=function(){return a},a}Ll();class tz extends nr.Component{render(){Ll().f[0]++;const e=(Ll().s[0]++,{style:this.props.style});switch(Ll().s[1]++,this.props.type){case"fill-extrusion":return Ll().b[0][0]++,Ll().s[2]++,le.jsx(H7,{...e});case"raster":return Ll().b[0][1]++,Ll().s[3]++,le.jsx(X_,{...e});case"hillshade":return Ll().b[0][2]++,Ll().s[4]++,le.jsx(X_,{...e});case"heatmap":return Ll().b[0][3]++,Ll().s[5]++,le.jsx(X_,{...e});case"fill":return Ll().b[0][4]++,Ll().s[6]++,le.jsx(X_,{...e});case"background":return Ll().b[0][5]++,Ll().s[7]++,le.jsx(H7,{...e});case"line":return Ll().b[0][6]++,Ll().s[8]++,le.jsx(OZ,{...e});case"symbol":return Ll().b[0][7]++,Ll().s[9]++,le.jsx(IZ,{...e});case"circle":return Ll().b[0][8]++,Ll().s[10]++,le.jsx(kZ,{...e});default:return Ll().b[0][9]++,Ll().s[11]++,le.jsx(XZ,{...e})}}}function ni(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ni=function(){return a},a}ni();function JZ(n){ni().f[0]++;const e=(ni().s[0]++,{}),t=(ni().s[1]++,{});return ni().s[2]++,n.forEach(r=>{ni().f[1]++;const i=(ni().s[3]++,r.layer["source-layer"]);if(ni().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){ni().b[0][0]++,ni().s[5]++,t[r.layer.id]++;const s=(ni().s[6]++,e[i].find(a=>(ni().f[2]++,ni().s[7]++,a.layer.id===r.layer.id)));ni().s[8]++,s.counter=t[r.layer.id]}else ni().b[0][1]++,ni().s[9]++,e[i]=(ni().b[1][0]++,e[i]||(ni().b[1][1]++,[])),ni().s[10]++,e[i].push(r),ni().s[11]++,t[r.layer.id]=1}),ni().s[12]++,e}class nz extends nr.Component{_getFeatureColor(e,t){if(ni().f[3]++,ni().s[13]++,e.layer.paint)ni().b[2][1]++;else{ni().b[2][0]++,ni().s[14]++;return}ni().s[15]++;try{const r=(ni().s[16]++,e.layer.paint);return ni().s[17]++,ni().b[4][0]++,"text-color"in r&&(ni().b[4][1]++,r["text-color"])?(ni().b[3][0]++,ni().s[18]++,String(r["text-color"])):(ni().b[3][1]++,ni().s[19]++,ni().b[6][0]++,"fill-color"in r&&(ni().b[6][1]++,r["fill-color"])?(ni().b[5][0]++,ni().s[20]++,String(r["fill-color"])):(ni().b[5][1]++,ni().s[21]++,ni().b[8][0]++,"line-color"in r&&(ni().b[8][1]++,r["line-color"])?(ni().b[7][0]++,ni().s[22]++,String(r["line-color"])):(ni().b[7][1]++,ni().s[23]++,ni().b[10][0]++,"fill-extrusion-color"in r&&(ni().b[10][1]++,r["fill-extrusion-color"])?(ni().b[9][0]++,ni().s[24]++,String(r["fill-extrusion-color"])):(ni().b[9][1]++,ni().s[25]++,"black"))))}catch(r){return ni().s[26]++,console.warn("Unable to get feature color, error:",r),ni().s[27]++,"black"}}render(){ni().f[4]++;const e=(ni().s[28]++,JZ(this.props.features)),t=(ni().s[29]++,Object.keys(e).map(r=>{ni().f[5]++;const i=(ni().s[30]++,e[r].map((s,a)=>{ni().f[6]++;const o=(ni().s[31]++,this._getFeatureColor(s,this.props.zoom));return ni().s[32]++,le.jsxs("div",{className:"maputnik-popup-layer",children:[le.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),le.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{ni().f[7]++,ni().s[33]++,this.props.onLayerSelect(s.layer.id)},children:[(ni().b[11][0]++,s.layer.type&&(ni().b[11][1]++,le.jsx(tz,{type:s.layer.type,style:{width:14,height:14,paddingRight:3}}))),s.layer.id,(ni().b[12][0]++,s.counter&&(ni().b[12][1]++,le.jsxs("span",{children:[" × ",s.counter]})))]})]},a)}));return ni().s[34]++,le.jsxs("div",{children:[le.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return ni().s[35]++,le.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function $i(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return $i=function(){return a},a}$i();function X7(n){return $i().f[0]++,$i().s[0]++,$i().b[1][0]++,typeof n>"u"||($i().b[1][1]++,n===null)?($i().b[0][0]++,$i().s[1]++,n):($i().b[0][1]++,$i().s[2]++,n instanceof Date?($i().b[2][0]++,$i().s[3]++,n.toLocaleString()):($i().b[2][1]++,$i().s[4]++,$i().b[4][0]++,typeof n=="object"||($i().b[4][1]++,typeof n=="number")||($i().b[4][2]++,typeof n=="string")?($i().b[3][0]++,$i().s[5]++,n.toString()):($i().b[3][1]++,$i().s[6]++,n)))}function _4(n,e){return $i().f[1]++,$i().s[7]++,le.jsxs("tr",{children:[le.jsx("td",{className:"maputnik-popup-table-cell",children:n}),le.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function eX(n,e){return $i().f[2]++,$i().s[8]++,le.jsxs(nr.Fragment,{children:[le.jsx("tr",{children:le.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],($i().b[5][0]++,n.inspectModeCounter&&($i().b[5][1]++,le.jsxs("span",{children:[" × ",n.inspectModeCounter]})))]})}),_4("$type",n.geometry.type),_4("$id",X7(n.id)),Object.keys(n.properties).map(t=>{$i().f[3]++;const r=($i().s[9]++,n.properties[t]);return $i().s[10]++,_4(t,X7(r))})]},e)}function tX(n){$i().f[4]++;const e=($i().s[11]++,[]);return $i().s[12]++,n.forEach(t=>{$i().f[5]++;const r=($i().s[13]++,e.findIndex(i=>($i().f[6]++,$i().s[14]++,$i().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&($i().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));$i().s[15]++,r===-1?($i().b[7][0]++,$i().s[16]++,e.push(t)):($i().b[7][1]++,$i().s[17]++,"inspectModeCounter"in e[r]?($i().b[8][0]++,$i().s[18]++,e[r].inspectModeCounter++):($i().b[8][1]++,$i().s[19]++,e[r].inspectModeCounter=2))}),$i().s[20]++,e}class nX extends nr.Component{render(){$i().f[7]++;const e=($i().s[21]++,tX(this.props.features));return $i().s[22]++,le.jsx("div",{className:"maputnik-feature-property-popup",children:le.jsx("table",{className:"maputnik-popup-table",children:le.jsx("tbody",{children:e.map(eX)})})})}}var b4={exports:{}},x4,J7;function rz(){return J7||(J7=1,x4={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),x4}var w4={exports:{}},M4,e9;function rX(){return e9||(e9=1,M4=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}),M4}var t9;function iX(){if(t9)return w4.exports;t9=1;var n=rX(),e=Array.prototype.concat,t=Array.prototype.slice,r=w4.exports=function(s){for(var a=[],o=0,d=s.length;o<d;o++){var g=s[o];n(g)?a=e.call(a,t.call(g)):a.push(g)}return a};return r.wrap=function(i){return function(){return i(r(arguments))}},w4.exports}var n9;function oX(){if(n9)return b4.exports;n9=1;var n=rz(),e=iX(),t=Object.hasOwnProperty,r=Object.create(null);for(var i in n)t.call(n,i)&&(r[n[i]]=i);var s=b4.exports={to:{},get:{}};s.get=function(d){var g=d.substring(0,3).toLowerCase(),b,E;switch(g){case"hsl":b=s.get.hsl(d),E="hsl";break;case"hwb":b=s.get.hwb(d),E="hwb";break;default:b=s.get.rgb(d),E="rgb";break}return b?{model:E,value:b}:null},s.get.rgb=function(d){if(!d)return null;var g=/^#([a-f0-9]{3,4})$/i,b=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,E=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,S=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,B=/^(\w+)$/,k=[0,0,0,1],z,j,Y;if(z=d.match(b)){for(Y=z[2],z=z[1],j=0;j<3;j++){var q=j*2;k[j]=parseInt(z.slice(q,q+2),16)}Y&&(k[3]=parseInt(Y,16)/255)}else if(z=d.match(g)){for(z=z[1],Y=z[3],j=0;j<3;j++)k[j]=parseInt(z[j]+z[j],16);Y&&(k[3]=parseInt(Y+Y,16)/255)}else if(z=d.match(E)){for(j=0;j<3;j++)k[j]=parseInt(z[j+1],0);z[4]&&(z[5]?k[3]=parseFloat(z[4])*.01:k[3]=parseFloat(z[4]))}else if(z=d.match(S)){for(j=0;j<3;j++)k[j]=Math.round(parseFloat(z[j+1])*2.55);z[4]&&(z[5]?k[3]=parseFloat(z[4])*.01:k[3]=parseFloat(z[4]))}else return(z=d.match(B))?z[1]==="transparent"?[0,0,0,0]:t.call(n,z[1])?(k=n[z[1]],k[3]=1,k):null:null;for(j=0;j<3;j++)k[j]=a(k[j],0,255);return k[3]=a(k[3],0,1),k},s.get.hsl=function(d){if(!d)return null;var g=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,b=d.match(g);if(b){var E=parseFloat(b[4]),S=(parseFloat(b[1])%360+360)%360,B=a(parseFloat(b[2]),0,100),k=a(parseFloat(b[3]),0,100),z=a(isNaN(E)?1:E,0,1);return[S,B,k,z]}return null},s.get.hwb=function(d){if(!d)return null;var g=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,b=d.match(g);if(b){var E=parseFloat(b[4]),S=(parseFloat(b[1])%360+360)%360,B=a(parseFloat(b[2]),0,100),k=a(parseFloat(b[3]),0,100),z=a(isNaN(E)?1:E,0,1);return[S,B,k,z]}return null},s.to.hex=function(){var d=e(arguments);return"#"+o(d[0])+o(d[1])+o(d[2])+(d[3]<1?o(Math.round(d[3]*255)):"")},s.to.rgb=function(){var d=e(arguments);return d.length<4||d[3]===1?"rgb("+Math.round(d[0])+", "+Math.round(d[1])+", "+Math.round(d[2])+")":"rgba("+Math.round(d[0])+", "+Math.round(d[1])+", "+Math.round(d[2])+", "+d[3]+")"},s.to.rgb.percent=function(){var d=e(arguments),g=Math.round(d[0]/255*100),b=Math.round(d[1]/255*100),E=Math.round(d[2]/255*100);return d.length<4||d[3]===1?"rgb("+g+"%, "+b+"%, "+E+"%)":"rgba("+g+"%, "+b+"%, "+E+"%, "+d[3]+")"},s.to.hsl=function(){var d=e(arguments);return d.length<4||d[3]===1?"hsl("+d[0]+", "+d[1]+"%, "+d[2]+"%)":"hsla("+d[0]+", "+d[1]+"%, "+d[2]+"%, "+d[3]+")"},s.to.hwb=function(){var d=e(arguments),g="";return d.length>=4&&d[3]!==1&&(g=", "+d[3]),"hwb("+d[0]+", "+d[1]+"%, "+d[2]+"%"+g+")"},s.to.keyword=function(d){return r[d.slice(0,3)]};function a(d,g,b){return Math.min(Math.max(g,d),b)}function o(d){var g=Math.round(d).toString(16).toUpperCase();return g.length<2?"0"+g:g}return b4.exports}var S4,r9;function iz(){if(r9)return S4;r9=1;const n=rz(),e={};for(const i of Object.keys(n))e[n[i]]=i;const t={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};S4=t;for(const i of Object.keys(t)){if(!("channels"in t[i]))throw new Error("missing channels property: "+i);if(!("labels"in t[i]))throw new Error("missing channel labels property: "+i);if(t[i].labels.length!==t[i].channels)throw new Error("channel and label counts mismatch: "+i);const{channels:s,labels:a}=t[i];delete t[i].channels,delete t[i].labels,Object.defineProperty(t[i],"channels",{value:s}),Object.defineProperty(t[i],"labels",{value:a})}t.rgb.hsl=function(i){const s=i[0]/255,a=i[1]/255,o=i[2]/255,d=Math.min(s,a,o),g=Math.max(s,a,o),b=g-d;let E,S;g===d?E=0:s===g?E=(a-o)/b:a===g?E=2+(o-s)/b:o===g&&(E=4+(s-a)/b),E=Math.min(E*60,360),E<0&&(E+=360);const B=(d+g)/2;return g===d?S=0:B<=.5?S=b/(g+d):S=b/(2-g-d),[E,S*100,B*100]},t.rgb.hsv=function(i){let s,a,o,d,g;const b=i[0]/255,E=i[1]/255,S=i[2]/255,B=Math.max(b,E,S),k=B-Math.min(b,E,S),z=function(j){return(B-j)/6/k+1/2};return k===0?(d=0,g=0):(g=k/B,s=z(b),a=z(E),o=z(S),b===B?d=o-a:E===B?d=1/3+s-o:S===B&&(d=2/3+a-s),d<0?d+=1:d>1&&(d-=1)),[d*360,g*100,B*100]},t.rgb.hwb=function(i){const s=i[0],a=i[1];let o=i[2];const d=t.rgb.hsl(i)[0],g=1/255*Math.min(s,Math.min(a,o));return o=1-1/255*Math.max(s,Math.max(a,o)),[d,g*100,o*100]},t.rgb.cmyk=function(i){const s=i[0]/255,a=i[1]/255,o=i[2]/255,d=Math.min(1-s,1-a,1-o),g=(1-s-d)/(1-d)||0,b=(1-a-d)/(1-d)||0,E=(1-o-d)/(1-d)||0;return[g*100,b*100,E*100,d*100]};function r(i,s){return(i[0]-s[0])**2+(i[1]-s[1])**2+(i[2]-s[2])**2}return t.rgb.keyword=function(i){const s=e[i];if(s)return s;let a=1/0,o;for(const d of Object.keys(n)){const g=n[d],b=r(i,g);b<a&&(a=b,o=d)}return o},t.keyword.rgb=function(i){return n[i]},t.rgb.xyz=function(i){let s=i[0]/255,a=i[1]/255,o=i[2]/255;s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;const d=s*.4124+a*.3576+o*.1805,g=s*.2126+a*.7152+o*.0722,b=s*.0193+a*.1192+o*.9505;return[d*100,g*100,b*100]},t.rgb.lab=function(i){const s=t.rgb.xyz(i);let a=s[0],o=s[1],d=s[2];a/=95.047,o/=100,d/=108.883,a=a>.008856?a**(1/3):7.787*a+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,d=d>.008856?d**(1/3):7.787*d+16/116;const g=116*o-16,b=500*(a-o),E=200*(o-d);return[g,b,E]},t.hsl.rgb=function(i){const s=i[0]/360,a=i[1]/100,o=i[2]/100;let d,g,b;if(a===0)return b=o*255,[b,b,b];o<.5?d=o*(1+a):d=o+a-o*a;const E=2*o-d,S=[0,0,0];for(let B=0;B<3;B++)g=s+1/3*-(B-1),g<0&&g++,g>1&&g--,6*g<1?b=E+(d-E)*6*g:2*g<1?b=d:3*g<2?b=E+(d-E)*(2/3-g)*6:b=E,S[B]=b*255;return S},t.hsl.hsv=function(i){const s=i[0];let a=i[1]/100,o=i[2]/100,d=a;const g=Math.max(o,.01);o*=2,a*=o<=1?o:2-o,d*=g<=1?g:2-g;const b=(o+a)/2,E=o===0?2*d/(g+d):2*a/(o+a);return[s,E*100,b*100]},t.hsv.rgb=function(i){const s=i[0]/60,a=i[1]/100;let o=i[2]/100;const d=Math.floor(s)%6,g=s-Math.floor(s),b=255*o*(1-a),E=255*o*(1-a*g),S=255*o*(1-a*(1-g));switch(o*=255,d){case 0:return[o,S,b];case 1:return[E,o,b];case 2:return[b,o,S];case 3:return[b,E,o];case 4:return[S,b,o];case 5:return[o,b,E]}},t.hsv.hsl=function(i){const s=i[0],a=i[1]/100,o=i[2]/100,d=Math.max(o,.01);let g,b;b=(2-a)*o;const E=(2-a)*d;return g=a*d,g/=E<=1?E:2-E,g=g||0,b/=2,[s,g*100,b*100]},t.hwb.rgb=function(i){const s=i[0]/360;let a=i[1]/100,o=i[2]/100;const d=a+o;let g;d>1&&(a/=d,o/=d);const b=Math.floor(6*s),E=1-o;g=6*s-b,b&1&&(g=1-g);const S=a+g*(E-a);let B,k,z;switch(b){default:case 6:case 0:B=E,k=S,z=a;break;case 1:B=S,k=E,z=a;break;case 2:B=a,k=E,z=S;break;case 3:B=a,k=S,z=E;break;case 4:B=S,k=a,z=E;break;case 5:B=E,k=a,z=S;break}return[B*255,k*255,z*255]},t.cmyk.rgb=function(i){const s=i[0]/100,a=i[1]/100,o=i[2]/100,d=i[3]/100,g=1-Math.min(1,s*(1-d)+d),b=1-Math.min(1,a*(1-d)+d),E=1-Math.min(1,o*(1-d)+d);return[g*255,b*255,E*255]},t.xyz.rgb=function(i){const s=i[0]/100,a=i[1]/100,o=i[2]/100;let d,g,b;return d=s*3.2406+a*-1.5372+o*-.4986,g=s*-.9689+a*1.8758+o*.0415,b=s*.0557+a*-.204+o*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,b=b>.0031308?1.055*b**(1/2.4)-.055:b*12.92,d=Math.min(Math.max(0,d),1),g=Math.min(Math.max(0,g),1),b=Math.min(Math.max(0,b),1),[d*255,g*255,b*255]},t.xyz.lab=function(i){let s=i[0],a=i[1],o=i[2];s/=95.047,a/=100,o/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;const d=116*a-16,g=500*(s-a),b=200*(a-o);return[d,g,b]},t.lab.xyz=function(i){const s=i[0],a=i[1],o=i[2];let d,g,b;g=(s+16)/116,d=a/500+g,b=g-o/200;const E=g**3,S=d**3,B=b**3;return g=E>.008856?E:(g-16/116)/7.787,d=S>.008856?S:(d-16/116)/7.787,b=B>.008856?B:(b-16/116)/7.787,d*=95.047,g*=100,b*=108.883,[d,g,b]},t.lab.lch=function(i){const s=i[0],a=i[1],o=i[2];let d;d=Math.atan2(o,a)*360/2/Math.PI,d<0&&(d+=360);const b=Math.sqrt(a*a+o*o);return[s,b,d]},t.lch.lab=function(i){const s=i[0],a=i[1],d=i[2]/360*2*Math.PI,g=a*Math.cos(d),b=a*Math.sin(d);return[s,g,b]},t.rgb.ansi16=function(i,s=null){const[a,o,d]=i;let g=s===null?t.rgb.hsv(i)[2]:s;if(g=Math.round(g/50),g===0)return 30;let b=30+(Math.round(d/255)<<2|Math.round(o/255)<<1|Math.round(a/255));return g===2&&(b+=60),b},t.hsv.ansi16=function(i){return t.rgb.ansi16(t.hsv.rgb(i),i[2])},t.rgb.ansi256=function(i){const s=i[0],a=i[1],o=i[2];return s===a&&a===o?s<8?16:s>248?231:Math.round((s-8)/247*24)+232:16+36*Math.round(s/255*5)+6*Math.round(a/255*5)+Math.round(o/255*5)},t.ansi16.rgb=function(i){let s=i%10;if(s===0||s===7)return i>50&&(s+=3.5),s=s/10.5*255,[s,s,s];const a=(~~(i>50)+1)*.5,o=(s&1)*a*255,d=(s>>1&1)*a*255,g=(s>>2&1)*a*255;return[o,d,g]},t.ansi256.rgb=function(i){if(i>=232){const g=(i-232)*10+8;return[g,g,g]}i-=16;let s;const a=Math.floor(i/36)/5*255,o=Math.floor((s=i%36)/6)/5*255,d=s%6/5*255;return[a,o,d]},t.rgb.hex=function(i){const a=(((Math.round(i[0])&255)<<16)+((Math.round(i[1])&255)<<8)+(Math.round(i[2])&255)).toString(16).toUpperCase();return"000000".substring(a.length)+a},t.hex.rgb=function(i){const s=i.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];let a=s[0];s[0].length===3&&(a=a.split("").map(E=>E+E).join(""));const o=parseInt(a,16),d=o>>16&255,g=o>>8&255,b=o&255;return[d,g,b]},t.rgb.hcg=function(i){const s=i[0]/255,a=i[1]/255,o=i[2]/255,d=Math.max(Math.max(s,a),o),g=Math.min(Math.min(s,a),o),b=d-g;let E,S;return b<1?E=g/(1-b):E=0,b<=0?S=0:d===s?S=(a-o)/b%6:d===a?S=2+(o-s)/b:S=4+(s-a)/b,S/=6,S%=1,[S*360,b*100,E*100]},t.hsl.hcg=function(i){const s=i[1]/100,a=i[2]/100,o=a<.5?2*s*a:2*s*(1-a);let d=0;return o<1&&(d=(a-.5*o)/(1-o)),[i[0],o*100,d*100]},t.hsv.hcg=function(i){const s=i[1]/100,a=i[2]/100,o=s*a;let d=0;return o<1&&(d=(a-o)/(1-o)),[i[0],o*100,d*100]},t.hcg.rgb=function(i){const s=i[0]/360,a=i[1]/100,o=i[2]/100;if(a===0)return[o*255,o*255,o*255];const d=[0,0,0],g=s%1*6,b=g%1,E=1-b;let S=0;switch(Math.floor(g)){case 0:d[0]=1,d[1]=b,d[2]=0;break;case 1:d[0]=E,d[1]=1,d[2]=0;break;case 2:d[0]=0,d[1]=1,d[2]=b;break;case 3:d[0]=0,d[1]=E,d[2]=1;break;case 4:d[0]=b,d[1]=0,d[2]=1;break;default:d[0]=1,d[1]=0,d[2]=E}return S=(1-a)*o,[(a*d[0]+S)*255,(a*d[1]+S)*255,(a*d[2]+S)*255]},t.hcg.hsv=function(i){const s=i[1]/100,a=i[2]/100,o=s+a*(1-s);let d=0;return o>0&&(d=s/o),[i[0],d*100,o*100]},t.hcg.hsl=function(i){const s=i[1]/100,o=i[2]/100*(1-s)+.5*s;let d=0;return o>0&&o<.5?d=s/(2*o):o>=.5&&o<1&&(d=s/(2*(1-o))),[i[0],d*100,o*100]},t.hcg.hwb=function(i){const s=i[1]/100,a=i[2]/100,o=s+a*(1-s);return[i[0],(o-s)*100,(1-o)*100]},t.hwb.hcg=function(i){const s=i[1]/100,o=1-i[2]/100,d=o-s;let g=0;return d<1&&(g=(o-d)/(1-d)),[i[0],d*100,g*100]},t.apple.rgb=function(i){return[i[0]/65535*255,i[1]/65535*255,i[2]/65535*255]},t.rgb.apple=function(i){return[i[0]/255*65535,i[1]/255*65535,i[2]/255*65535]},t.gray.rgb=function(i){return[i[0]/100*255,i[0]/100*255,i[0]/100*255]},t.gray.hsl=function(i){return[0,0,i[0]]},t.gray.hsv=t.gray.hsl,t.gray.hwb=function(i){return[0,100,i[0]]},t.gray.cmyk=function(i){return[0,0,0,i[0]]},t.gray.lab=function(i){return[i[0],0,0]},t.gray.hex=function(i){const s=Math.round(i[0]/100*255)&255,o=((s<<16)+(s<<8)+s).toString(16).toUpperCase();return"000000".substring(o.length)+o},t.rgb.gray=function(i){return[(i[0]+i[1]+i[2])/3/255*100]},S4}var E4,i9;function sX(){if(i9)return E4;i9=1;const n=iz();function e(){const s={},a=Object.keys(n);for(let o=a.length,d=0;d<o;d++)s[a[d]]={distance:-1,parent:null};return s}function t(s){const a=e(),o=[s];for(a[s].distance=0;o.length;){const d=o.pop(),g=Object.keys(n[d]);for(let b=g.length,E=0;E<b;E++){const S=g[E],B=a[S];B.distance===-1&&(B.distance=a[d].distance+1,B.parent=d,o.unshift(S))}}return a}function r(s,a){return function(o){return a(s(o))}}function i(s,a){const o=[a[s].parent,s];let d=n[a[s].parent][s],g=a[s].parent;for(;a[g].parent;)o.unshift(a[g].parent),d=r(n[a[g].parent][g],d),g=a[g].parent;return d.conversion=o,d}return E4=function(s){const a=t(s),o={},d=Object.keys(a);for(let g=d.length,b=0;b<g;b++){const E=d[b];a[E].parent!==null&&(o[E]=i(E,a))}return o},E4}var B4,o9;function aX(){if(o9)return B4;o9=1;const n=iz(),e=sX(),t={},r=Object.keys(n);function i(a){const o=function(...d){const g=d[0];return g==null?g:(g.length>1&&(d=g),a(d))};return"conversion"in a&&(o.conversion=a.conversion),o}function s(a){const o=function(...d){const g=d[0];if(g==null)return g;g.length>1&&(d=g);const b=a(d);if(typeof b=="object")for(let E=b.length,S=0;S<E;S++)b[S]=Math.round(b[S]);return b};return"conversion"in a&&(o.conversion=a.conversion),o}return r.forEach(a=>{t[a]={},Object.defineProperty(t[a],"channels",{value:n[a].channels}),Object.defineProperty(t[a],"labels",{value:n[a].labels});const o=e(a);Object.keys(o).forEach(g=>{const b=o[g];t[a][g]=s(b),t[a][g].raw=i(b)})}),B4=t,B4}var O4,s9;function lX(){if(s9)return O4;s9=1;const n=oX(),e=aX(),t=["keyword","gray","hex"],r={};for(const S of Object.keys(e))r[[...e[S].labels].sort().join("")]=S;const i={};function s(S,B){if(!(this instanceof s))return new s(S,B);if(B&&B in t&&(B=null),B&&!(B in e))throw new Error("Unknown model: "+B);let k,z;if(S==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(S instanceof s)this.model=S.model,this.color=[...S.color],this.valpha=S.valpha;else if(typeof S=="string"){const j=n.get(S);if(j===null)throw new Error("Unable to parse color from string: "+S);this.model=j.model,z=e[this.model].channels,this.color=j.value.slice(0,z),this.valpha=typeof j.value[z]=="number"?j.value[z]:1}else if(S.length>0){this.model=B||"rgb",z=e[this.model].channels;const j=Array.prototype.slice.call(S,0,z);this.color=E(j,z),this.valpha=typeof S[z]=="number"?S[z]:1}else if(typeof S=="number")this.model="rgb",this.color=[S>>16&255,S>>8&255,S&255],this.valpha=1;else{this.valpha=1;const j=Object.keys(S);"alpha"in S&&(j.splice(j.indexOf("alpha"),1),this.valpha=typeof S.alpha=="number"?S.alpha:0);const Y=j.sort().join("");if(!(Y in r))throw new Error("Unable to parse color from object: "+JSON.stringify(S));this.model=r[Y];const{labels:q}=e[this.model],ie=[];for(k=0;k<q.length;k++)ie.push(S[q[k]]);this.color=E(ie)}if(i[this.model])for(z=e[this.model].channels,k=0;k<z;k++){const j=i[this.model][k];j&&(this.color[k]=j(this.color[k]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}s.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(S){let B=this.model in n.to?this:this.rgb();B=B.round(typeof S=="number"?S:1);const k=B.valpha===1?B.color:[...B.color,this.valpha];return n.to[B.model](k)},percentString(S){const B=this.rgb().round(typeof S=="number"?S:1),k=B.valpha===1?B.color:[...B.color,this.valpha];return n.to.rgb.percent(k)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const S={},{channels:B}=e[this.model],{labels:k}=e[this.model];for(let z=0;z<B;z++)S[k[z]]=this.color[z];return this.valpha!==1&&(S.alpha=this.valpha),S},unitArray(){const S=this.rgb().color;return S[0]/=255,S[1]/=255,S[2]/=255,this.valpha!==1&&S.push(this.valpha),S},unitObject(){const S=this.rgb().object();return S.r/=255,S.g/=255,S.b/=255,this.valpha!==1&&(S.alpha=this.valpha),S},round(S){return S=Math.max(S||0,0),new s([...this.color.map(o(S)),this.valpha],this.model)},alpha(S){return S!==void 0?new s([...this.color,Math.max(0,Math.min(1,S))],this.model):this.valpha},red:d("rgb",0,g(255)),green:d("rgb",1,g(255)),blue:d("rgb",2,g(255)),hue:d(["hsl","hsv","hsl","hwb","hcg"],0,S=>(S%360+360)%360),saturationl:d("hsl",1,g(100)),lightness:d("hsl",2,g(100)),saturationv:d("hsv",1,g(100)),value:d("hsv",2,g(100)),chroma:d("hcg",1,g(100)),gray:d("hcg",2,g(100)),white:d("hwb",1,g(100)),wblack:d("hwb",2,g(100)),cyan:d("cmyk",0,g(100)),magenta:d("cmyk",1,g(100)),yellow:d("cmyk",2,g(100)),black:d("cmyk",3,g(100)),x:d("xyz",0,g(95.047)),y:d("xyz",1,g(100)),z:d("xyz",2,g(108.833)),l:d("lab",0,g(100)),a:d("lab",1),b:d("lab",2),keyword(S){return S!==void 0?new s(S):e[this.model].keyword(this.color)},hex(S){return S!==void 0?new s(S):n.to.hex(this.rgb().round().color)},hexa(S){if(S!==void 0)return new s(S);const B=this.rgb().round().color;let k=Math.round(this.valpha*255).toString(16).toUpperCase();return k.length===1&&(k="0"+k),n.to.hex(B)+k},rgbNumber(){const S=this.rgb().color;return(S[0]&255)<<16|(S[1]&255)<<8|S[2]&255},luminosity(){const S=this.rgb().color,B=[];for(const[k,z]of S.entries()){const j=z/255;B[k]=j<=.04045?j/12.92:((j+.055)/1.055)**2.4}return .2126*B[0]+.7152*B[1]+.0722*B[2]},contrast(S){const B=this.luminosity(),k=S.luminosity();return B>k?(B+.05)/(k+.05):(k+.05)/(B+.05)},level(S){const B=this.contrast(S);return B>=7?"AAA":B>=4.5?"AA":""},isDark(){const S=this.rgb().color;return(S[0]*2126+S[1]*7152+S[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const S=this.rgb();for(let B=0;B<3;B++)S.color[B]=255-S.color[B];return S},lighten(S){const B=this.hsl();return B.color[2]+=B.color[2]*S,B},darken(S){const B=this.hsl();return B.color[2]-=B.color[2]*S,B},saturate(S){const B=this.hsl();return B.color[1]+=B.color[1]*S,B},desaturate(S){const B=this.hsl();return B.color[1]-=B.color[1]*S,B},whiten(S){const B=this.hwb();return B.color[1]+=B.color[1]*S,B},blacken(S){const B=this.hwb();return B.color[2]+=B.color[2]*S,B},grayscale(){const S=this.rgb().color,B=S[0]*.3+S[1]*.59+S[2]*.11;return s.rgb(B,B,B)},fade(S){return this.alpha(this.valpha-this.valpha*S)},opaquer(S){return this.alpha(this.valpha+this.valpha*S)},rotate(S){const B=this.hsl();let k=B.color[0];return k=(k+S)%360,k=k<0?360+k:k,B.color[0]=k,B},mix(S,B){if(!S||!S.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof S);const k=S.rgb(),z=this.rgb(),j=B===void 0?.5:B,Y=2*j-1,q=k.alpha()-z.alpha(),ie=((Y*q===-1?Y:(Y+q)/(1+Y*q))+1)/2,J=1-ie;return s.rgb(ie*k.red()+J*z.red(),ie*k.green()+J*z.green(),ie*k.blue()+J*z.blue(),k.alpha()*j+z.alpha()*(1-j))}};for(const S of Object.keys(e)){if(t.includes(S))continue;const{channels:B}=e[S];s.prototype[S]=function(...k){return this.model===S?new s(this):k.length>0?new s(k,S):new s([...b(e[this.model][S].raw(this.color)),this.valpha],S)},s[S]=function(...k){let z=k[0];return typeof z=="number"&&(z=E(k,B)),new s(z,S)}}function a(S,B){return Number(S.toFixed(B))}function o(S){return function(B){return a(B,S)}}function d(S,B,k){S=Array.isArray(S)?S:[S];for(const z of S)(i[z]||(i[z]=[]))[B]=k;return S=S[0],function(z){let j;return z!==void 0?(k&&(z=k(z)),j=this[S](),j.color[B]=z,j):(j=this[S]().color[B],k&&(j=k(j)),j)}}function g(S){return function(B){return Math.max(0,Math.min(S,B))}}function b(S){return Array.isArray(S)?S:[S]}function E(S,B){for(let k=0;k<B;k++)typeof S[k]!="number"&&(S[k]=0);return S}return O4=s,O4}var uX=lX();const j6=Xa(uX);function ta(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ta=function(){return a},a}ta();class AX{constructor(){Tn(this,"_map",(ta().s[0]++,void 0));Tn(this,"_container",(ta().s[1]++,void 0));Tn(this,"_textEl",(ta().s[2]++,null));ta().f[0]++}onAdd(e){return ta().f[1]++,ta().s[3]++,this._map=e,ta().s[4]++,this._container=document.createElement("div"),ta().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",ta().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),ta().s[7]++,this.setLabel("Zoom:"),ta().s[8]++,this.addEventListeners(),ta().s[9]++,this._container}updateZoomLevel(){ta().f[2]++,ta().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){ta().f[3]++,ta().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,ta().s[12]++,this._textEl=this._container.querySelector("span"),ta().s[13]++,this.updateZoomLevel()}addEventListeners(){ta().f[4]++,ta().s[14]++,this._map.on("render",()=>(ta().f[5]++,ta().s[15]++,this.updateZoomLevel())),ta().s[16]++,this._map.on("zoomIn",()=>(ta().f[6]++,ta().s[17]++,this.updateZoomLevel())),ta().s[18]++,this._map.on("zoomOut",()=>(ta().f[7]++,ta().s[19]++,this.updateZoomLevel()))}onRemove(){ta().f[8]++,ta().s[20]++,this._container.parentNode.removeChild(this._container),ta().s[21]++,this._map=void 0}}function N6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function W6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function G6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function cX(n,e){const t=[],r=[],i=[];function s(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const o=n[a];if(!o||o.length===0){const d=s(a);r.push(N6(d.circle,a)),i.push(G6(d.line,a)),t.push(W6(d.polygon,d.polygonOutline,a))}else o.forEach(d=>{const g=s(d);r.push(N6(g.circle,a,d)),i.push(G6(g.line,a,d)),t.push(W6(g.polygon,g.polygonOutline,a,d))})}),t.concat(i).concat(r)}function dX(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const a=n.sources[s];(a.type==="vector"||a.type==="geojson")&&(i[s]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const I4={polygonLayer:W6,lineLayer:G6,circleLayer:N6,generateInspectStyle:dX,generateColoredLayers:cX};function go(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return go=function(){return a},a}go();function k4(n,e){return go().f[0]++,go().s[0]++,n.type==="circle"?(go().b[0][0]++,go().s[1]++,n.paint["circle-radius"]=3):(go().b[0][1]++,go().s[2]++,n.type==="line"?(go().b[1][0]++,go().s[3]++,n.paint["line-width"]=2):go().b[1][1]++),go().s[4]++,"filter"in e?(go().b[2][0]++,go().s[5]++,n.filter=e.filter):(go().b[2][1]++,go().s[6]++,delete n.filter),go().s[7]++,n.id=n.id+"_highlight",go().s[8]++,n}function hX(n){if(go().f[1]++,go().s[9]++,go().b[4][0]++,!n||(go().b[4][1]++,n.type==="background")||(go().b[4][2]++,n.type==="raster"))return go().b[3][0]++,go().s[10]++,null;go().b[3][1]++;const e=(go().s[11]++,go().b[5][0]++,n["source-layer"]||(go().b[5][1]++,"")),t=(go().s[12]++,JU.brightColor(e,1));return go().s[13]++,go().b[7][0]++,n.type==="fill"||(go().b[7][1]++,n.type==="fill-extrusion")?(go().b[6][0]++,go().s[14]++,k4(I4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(go().b[6][1]++,go().s[15]++,go().b[9][0]++,n.type==="symbol"||(go().b[9][1]++,n.type==="circle")?(go().b[8][0]++,go().s[16]++,k4(I4.circleLayer(t,n.source,n["source-layer"]),n)):(go().b[8][1]++,go().s[17]++,n.type==="line"?(go().b[10][0]++,go().s[18]++,k4(I4.lineLayer(t,n.source,n["source-layer"]),n)):(go().b[10][1]++,go().s[19]++,null)))}function h8(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return h8=function(){return a},a}h8();h8().s[0]++;Y1.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function T4(n,e,t,r){return new(t||(t=Promise))(function(i,s){function a(g){try{d(r.next(g))}catch(b){s(b)}}function o(g){try{d(r.throw(g))}catch(b){s(b)}}function d(g){g.done?i(g.value):new t(function(b){b(g.value)}).then(a,o)}d((r=r.apply(n,e||[])).next())})}var J_=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function wx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var P4,a9;function oz(){if(a9)return P4;a9=1,P4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)n.call(i,s)&&(t[s]=i[s])}return t}return P4}var R4={exports:{}},l9;function fX(){return l9||(l9=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(s){return t.test(r,s)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,s){s=s||{};var a=0,o=[],d=i.length,g=0,b=0,E=s.pre||"",S=s.post||"",B=s.caseSensitive&&i||i.toLowerCase(),k;r=s.caseSensitive&&r||r.toLowerCase();for(var z=0;z<d;z++)k=i[z],B[z]===r[a]?(k=E+k+S,a+=1,b+=1+b):b=0,g+=b,o[o.length]=k;return a===r.length?(g=B===r?1/0:g,{rendered:o.join(""),score:g}):null},t.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(a,o,d,g){var b=o;s.extract&&(b=s.extract(o));var E=t.match(r,b,s);return E!=null&&(a[a.length]={string:E.rendered,score:E.score,index:d,original:o}),a},[]).sort(function(a,o){var d=o.score-a.score;return d||a.index-o.index}))}})()}(R4)),R4.exports}var D4,u9;function pX(){if(u9)return D4;u9=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},D4=n,D4}var K4,A9;function mX(){if(A9)return K4;A9=1;var n=oz(),e=fX(),t=pX(),r=function(i,s,a){return a=a||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},a),this.el=i,this.data=s||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,s){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),s.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var a=0;a<s.length&&(this.list.add(s[a]),a!==this.options.limit-1);a++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},a;this.options.filter?(a=e.filter(this.query,this.data,s),a=a.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):a=this.data.map((function(o){var d=this.render(o);return{original:o,string:d}}).bind(this)),i(a)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var a=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(a),d=o.lastIndexOf(this.query);d>-1;){var g=d+this.query.length;a=a.slice(0,d)+"<strong>"+a.slice(d,g)+"</strong>"+a.slice(g),d=o.slice(0,d).lastIndexOf(this.query)}return a},r.prototype.renderError=function(i){this.list.drawError(i)},K4=r,K4}var F4,c9;function gX(){if(c9)return F4;c9=1;var n=mX();return F4=n,typeof window<"u"&&(window.Suggestions=n),F4}var yX=gX(),vX=wx(yX),Lb={exports:{}},CX=Lb.exports,d9;function _X(){return d9||(d9=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(CX,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(d){return d.match(t)||[]}function i(d){return r(d).filter(function(g,b){return g&&b})}function s(d){return d=r(d),{language:d[1]||e,extlang:d[2]||e,script:d[3]||e,region:d[4]||e}}function a(d,g,b){Object.defineProperty(d,g,{value:b,enumerable:!0})}function o(d,g,b){function E(S){return r(S)[d]||e}a(E,"pattern",g),a(s,b,E)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),a(s,"split",i),s})}(Lb)),Lb.exports}var bX=_X(),xX=wx(bX),L4,h9;function wX(){if(h9)return L4;h9=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,d=typeof J_=="object"&&J_&&J_.Object===Object&&J_,g=typeof self=="object"&&self&&self.Object===Object&&self,b=d||g||Function("return this")(),E=Object.prototype,S=E.toString,B=Math.max,k=Math.min,z=function(){return b.Date.now()};function j($,te,W){var oe,fe,he,Se,pe,we,Ke=0,ge=!1,st=!1,Qe=!0;if(typeof $!="function")throw new TypeError(n);te=J(te)||0,Y(W)&&(ge=!!W.leading,st="maxWait"in W,he=st?B(J(W.maxWait)||0,te):he,Qe="trailing"in W?!!W.trailing:Qe);function Ze(Tt){var Ue=oe,Re=fe;return oe=fe=void 0,Ke=Tt,Se=$.apply(Re,Ue),Se}function We(Tt){return Ke=Tt,pe=setTimeout(it,te),ge?Ze(Tt):Se}function Ce(Tt){var Ue=Tt-we,Re=Tt-Ke,Be=te-Ue;return st?k(Be,he-Re):Be}function Pe(Tt){var Ue=Tt-we,Re=Tt-Ke;return we===void 0||Ue>=te||Ue<0||st&&Re>=he}function it(){var Tt=z();if(Pe(Tt))return vt(Tt);pe=setTimeout(it,Ce(Tt))}function vt(Tt){return pe=void 0,Qe&&oe?Ze(Tt):(oe=fe=void 0,Se)}function _t(){pe!==void 0&&clearTimeout(pe),Ke=0,oe=we=fe=pe=void 0}function ft(){return pe===void 0?Se:vt(z())}function Dt(){var Tt=z(),Ue=Pe(Tt);if(oe=arguments,fe=this,we=Tt,Ue){if(pe===void 0)return We(we);if(st)return pe=setTimeout(it,te),Ze(we)}return pe===void 0&&(pe=setTimeout(it,te)),Se}return Dt.cancel=_t,Dt.flush=ft,Dt}function Y($){var te=typeof $;return!!$&&(te=="object"||te=="function")}function q($){return!!$&&typeof $=="object"}function ie($){return typeof $=="symbol"||q($)&&S.call($)==t}function J($){if(typeof $=="number")return $;if(ie($))return e;if(Y($)){var te=typeof $.valueOf=="function"?$.valueOf():$;$=Y(te)?te+"":te}if(typeof $!="string")return $===0?$:+$;$=$.replace(r,"");var W=s.test($);return W||a.test($)?o($.slice(2),W?2:8):i.test($)?e:+$}return L4=j,L4}var MX=wX(),SX=wx(MX),EX=oz(),sp=wx(EX),eb={exports:{}},f9;function BX(){if(f9)return eb.exports;f9=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function($,te,W){return Function.prototype.apply.call($,te,W)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:t=function($){return Object.getOwnPropertyNames($)};function r(J){console&&console.warn&&console.warn(J)}var i=Number.isNaN||function($){return $!==$};function s(){s.init.call(this)}eb.exports=s,eb.exports.once=Y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(J){if(typeof J!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof J)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(J){if(typeof J!="number"||J<0||i(J))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+J+".");a=J}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function($){if(typeof $!="number"||$<0||i($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this};function d(J){return J._maxListeners===void 0?s.defaultMaxListeners:J._maxListeners}s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function($){for(var te=[],W=1;W<arguments.length;W++)te.push(arguments[W]);var oe=$==="error",fe=this._events;if(fe!==void 0)oe=oe&&fe.error===void 0;else if(!oe)return!1;if(oe){var he;if(te.length>0&&(he=te[0]),he instanceof Error)throw he;var Se=new Error("Unhandled error."+(he?" ("+he.message+")":""));throw Se.context=he,Se}var pe=fe[$];if(pe===void 0)return!1;if(typeof pe=="function")e(pe,this,te);else for(var we=pe.length,Ke=k(pe,we),W=0;W<we;++W)e(Ke[W],this,te);return!0};function g(J,$,te,W){var oe,fe,he;if(o(te),fe=J._events,fe===void 0?(fe=J._events=Object.create(null),J._eventsCount=0):(fe.newListener!==void 0&&(J.emit("newListener",$,te.listener?te.listener:te),fe=J._events),he=fe[$]),he===void 0)he=fe[$]=te,++J._eventsCount;else if(typeof he=="function"?he=fe[$]=W?[te,he]:[he,te]:W?he.unshift(te):he.push(te),oe=d(J),oe>0&&he.length>oe&&!he.warned){he.warned=!0;var Se=new Error("Possible EventEmitter memory leak detected. "+he.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");Se.name="MaxListenersExceededWarning",Se.emitter=J,Se.type=$,Se.count=he.length,r(Se)}return J}s.prototype.addListener=function($,te){return g(this,$,te,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function($,te){return g(this,$,te,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(J,$,te){var W={fired:!1,wrapFn:void 0,target:J,type:$,listener:te},oe=b.bind(W);return oe.listener=te,W.wrapFn=oe,oe}s.prototype.once=function($,te){return o(te),this.on($,E(this,$,te)),this},s.prototype.prependOnceListener=function($,te){return o(te),this.prependListener($,E(this,$,te)),this},s.prototype.removeListener=function($,te){var W,oe,fe,he,Se;if(o(te),oe=this._events,oe===void 0)return this;if(W=oe[$],W===void 0)return this;if(W===te||W.listener===te)--this._eventsCount===0?this._events=Object.create(null):(delete oe[$],oe.removeListener&&this.emit("removeListener",$,W.listener||te));else if(typeof W!="function"){for(fe=-1,he=W.length-1;he>=0;he--)if(W[he]===te||W[he].listener===te){Se=W[he].listener,fe=he;break}if(fe<0)return this;fe===0?W.shift():z(W,fe),W.length===1&&(oe[$]=W[0]),oe.removeListener!==void 0&&this.emit("removeListener",$,Se||te)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function($){var te,W,oe;if(W=this._events,W===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[$]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete W[$]),this;if(arguments.length===0){var fe=Object.keys(W),he;for(oe=0;oe<fe.length;++oe)he=fe[oe],he!=="removeListener"&&this.removeAllListeners(he);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(te=W[$],typeof te=="function")this.removeListener($,te);else if(te!==void 0)for(oe=te.length-1;oe>=0;oe--)this.removeListener($,te[oe]);return this};function S(J,$,te){var W=J._events;if(W===void 0)return[];var oe=W[$];return oe===void 0?[]:typeof oe=="function"?te?[oe.listener||oe]:[oe]:te?j(oe):k(oe,oe.length)}s.prototype.listeners=function($){return S(this,$,!0)},s.prototype.rawListeners=function($){return S(this,$,!1)},s.listenerCount=function(J,$){return typeof J.listenerCount=="function"?J.listenerCount($):B.call(J,$)},s.prototype.listenerCount=B;function B(J){var $=this._events;if($!==void 0){var te=$[J];if(typeof te=="function")return 1;if(te!==void 0)return te.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function k(J,$){for(var te=new Array($),W=0;W<$;++W)te[W]=J[W];return te}function z(J,$){for(;$+1<J.length;$++)J[$]=J[$+1];J.pop()}function j(J){for(var $=new Array(J.length),te=0;te<$.length;++te)$[te]=J[te].listener||J[te];return $}function Y(J,$){return new Promise(function(te,W){function oe(he){J.removeListener($,fe),W(he)}function fe(){typeof J.removeListener=="function"&&J.removeListener("error",oe),te([].slice.call(arguments))}ie(J,$,fe,{once:!0}),$!=="error"&&q(J,oe,{once:!0})})}function q(J,$,te){typeof J.on=="function"&&ie(J,"error",$,te)}function ie(J,$,te,W){if(typeof J.on=="function")W.once?J.once($,te):J.on($,te);else if(typeof J.addEventListener=="function")J.addEventListener($,function oe(fe){W.once&&J.removeEventListener($,oe),te(fe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof J)}return eb.exports}var OX=BX();const p9={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},IX={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},kX=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class TX{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const s=r.text,a=s.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,d=s.substring(0,a),g=s.substring(a,a+o),b=s.substring(a+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+d+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+g+"</span>"+b+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new OX.EventEmitter,this.options=sp({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();i.appendChild(s)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",SX(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new vX(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const s=i.firstChild,a=s.firstChild;r.appendChild(a)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const s=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!(s?s.value:""))return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s.value);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s.value,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s.value)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&p9[e.properties.short_code])t=sp({},this.options.flyTo),this._map&&this._map.fitBounds(p9[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=sp({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=sp({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return T4(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const s=this._getConfigForRequest(),a=this._createGeocodeRequest(s,t,r,i),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const d=yield a;yield this._handleGeocodeResponse(d,s,t,r,o)}catch(d){this._handleGeocodeErrorResponse(d,o)}return a})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&kX.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,s){return T4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let a={};e?a=e:a={type:"FeatureCollection",features:[]},a.config=t,this.fresh&&(this.fresh=!1),a.features=a.features?s.concat(a.features):s;const o=this.options.externalGeocoder?this.options.externalGeocoder(r,a.features,t)||Promise.resolve([]):Promise.resolve([]);try{const g=yield o;a.features=a.features?g.concat(a.features):g}catch{}this.options.filter&&a.features.length&&(a.features=a.features.filter(this.options.filter));let d=[];"suggestions"in a?d=a.suggestions:"place"in a?d=[a.place]:d=a.features,d.length?(this._clearEl.style.display="block",this._typeahead.update(d),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(a.features.length>0||"place"in a)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",a))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return T4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){this._renderMessage("<div class='maplibre-gl-geocoder--error'>There was an error reaching the server</div>")}_renderNoResults(){this._renderMessage("<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_getPlaceholderText(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){const e=this.options.language.split(",")[0],t=xX.language(e),r=IX[t];if(r)return r}return"Search"}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=sp({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const s of e)i.extend(s.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=sp({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const a=sp({},{},this.options.popup);i=new this._maplibregl.Popup(a).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=sp({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let s;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(s=this.options.showResultMarkers.element.cloneNode(!0),r=sp(r,{element:s}));const a=new this._maplibregl.Marker(sp({},r,{element:s}));let o;if(this.options.popup){const g=sp({},{},this.options.popup);o=new this._maplibregl.Popup(g).setHTML(this.options.popupRender(i))}i.center?(a.setLngLat(i.center).addTo(this._map),this.options.popup&&a.setPopup(o)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(a.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&a.setPopup(o)),this.resultMarkers.push(a)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Sn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="300acb3537cd75ba7433c8df32ce2e40c6bb2cf5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:2},end:{line:21,column:36}},1:{start:{line:22,column:2},end:{line:22,column:19}},2:{start:{line:25,column:26},end:{line:31,column:3}},3:{start:{line:32,column:16},end:{line:32,column:55}},4:{start:{line:33,column:2},end:{line:35,column:3}},5:{start:{line:34,column:4},end:{line:34,column:30}},6:{start:{line:36,column:18},end:{line:36,column:20}},7:{start:{line:37,column:2},end:{line:42,column:5}},8:{start:{line:38,column:19},end:{line:38,column:53}},9:{start:{line:39,column:4},end:{line:41,column:5}},10:{start:{line:40,column:6},end:{line:40,column:33}},11:{start:{line:43,column:23},end:{line:47,column:3}},12:{start:{line:48,column:2},end:{line:48,column:22}},13:{start:{line:51,column:24},end:{line:61,column:3}},14:{start:{line:62,column:14},end:{line:62,column:18}},15:{start:{line:64,column:4},end:{line:64,column:17}},16:{start:{line:65,column:4},end:{line:70,column:6}},17:{start:{line:71,column:4},end:{line:73,column:7}},18:{start:{line:72,column:6},end:{line:72,column:25}},19:{start:{line:76,column:17},end:{line:76,column:22}},20:{start:{line:77,column:4},end:{line:80,column:5}},21:{start:{line:78,column:6},end:{line:78,column:132}},22:{start:{line:81,column:4},end:{line:81,column:18}},23:{start:{line:84,column:16},end:{line:84,column:30}},24:{start:{line:85,column:28},end:{line:85,column:79}},25:{start:{line:86,column:4},end:{line:91,column:5}},26:{start:{line:87,column:6},end:{line:87,column:52}},27:{start:{line:88,column:6},end:{line:88,column:70}},28:{start:{line:89,column:6},end:{line:89,column:70}},29:{start:{line:90,column:6},end:{line:90,column:76}},30:{start:{line:92,column:4},end:{line:94,column:5}},31:{start:{line:93,column:6},end:{line:93,column:43}},32:{start:{line:95,column:4},end:{line:100,column:5}},33:{start:{line:96,column:6},end:{line:96,column:59}},34:{start:{line:97,column:6},end:{line:99,column:14}},35:{start:{line:98,column:8},end:{line:98,column:36}},36:{start:{line:103,column:20},end:{line:112,column:5}},37:{start:{line:113,column:21},end:{line:113,column:53}},38:{start:{line:114,column:4},end:{line:114,column:53}},39:{start:{line:115,column:16},end:{line:115,column:43}},40:{start:{line:116,column:26},end:{line:120,column:5}},41:{start:{line:117,column:21},end:{line:117,column:36}},42:{start:{line:118,column:19},end:{line:118,column:32}},43:{start:{line:119,column:6},end:{line:119,column:44}},44:{start:{line:121,column:4},end:{line:121,column:20}},45:{start:{line:122,column:4},end:{line:122,column:56}},46:{start:{line:123,column:4},end:{line:123,column:56}},47:{start:{line:124,column:4},end:{line:124,column:62}},48:{start:{line:125,column:21},end:{line:125,column:43}},49:{start:{line:126,column:24},end:{line:126,column:41}},50:{start:{line:127,column:4},end:{line:127,column:45}},51:{start:{line:128,column:16},end:{line:128,column:74}},52:{start:{line:129,column:4},end:{line:129,column:37}},53:{start:{line:130,column:20},end:{line:130,column:49}},54:{start:{line:131,column:20},end:{line:151,column:6}},55:{start:{line:141,column:8},end:{line:141,column:82}},56:{start:{line:143,column:62},end:{line:143,column:141}},57:{start:{line:145,column:8},end:{line:149,column:9}},58:{start:{line:146,column:10},end:{line:146,column:108}},59:{start:{line:148,column:10},end:{line:148,column:160}},60:{start:{line:152,column:4},end:{line:152,column:28}},61:{start:{line:153,column:4},end:{line:161,column:7}},62:{start:{line:154,column:6},end:{line:160,column:9}},63:{start:{line:162,column:4},end:{line:167,column:7}},64:{start:{line:163,column:6},end:{line:163,column:40}},65:{start:{line:163,column:33},end:{line:163,column:40}},66:{start:{line:164,column:6},end:{line:166,column:9}},67:{start:{line:168,column:4},end:{line:170,column:7}},68:{start:{line:169,column:6},end:{line:169,column:30}},69:{start:{line:171,column:4},end:{line:175,column:7}},70:{start:{line:172,column:6},end:{line:174,column:9}},71:{start:{line:176,column:4},end:{line:176,column:37}},72:{start:{line:177,column:4},end:{line:177,column:37}},73:{start:{line:179,column:22},end:{line:182,column:3}},74:{start:{line:180,column:18},end:{line:180,column:82}},75:{start:{line:180,column:66},end:{line:180,column:81}},76:{start:{line:181,column:4},end:{line:181,column:36}},77:{start:{line:184,column:27},end:{line:217,column:5}},78:{start:{line:186,column:25},end:{line:186,column:27}},79:{start:{line:187,column:8},end:{line:212,column:9}},80:{start:{line:188,column:26},end:{line:188,column:138}},81:{start:{line:189,column:27},end:{line:189,column:47}},82:{start:{line:190,column:26},end:{line:190,column:47}},83:{start:{line:191,column:10},end:{line:209,column:11}},84:{start:{line:192,column:27},end:{line:195,column:13}},85:{start:{line:196,column:26},end:{line:207,column:13}},86:{start:{line:208,column:12},end:{line:208,column:33}},87:{start:{line:211,column:10},end:{line:211,column:69}},88:{start:{line:213,column:8},end:{line:215,column:10}},89:{start:{line:218,column:21},end:{line:221,column:6}},90:{start:{line:222,column:4},end:{line:222,column:41}},91:{start:{line:223,column:4},end:{line:223,column:20}},92:{start:{line:226,column:14},end:{line:226,column:26}},93:{start:{line:227,column:4},end:{line:227,column:53}},94:{start:{line:228,column:4},end:{line:228,column:49}},95:{start:{line:229,column:4},end:{line:238,column:6}},96:{start:{line:235,column:20},end:{line:235,column:38}},97:{start:{line:241,column:22},end:{line:241,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:39},end:{line:23,column:1}},line:20},1:{name:"buildInspectStyle",decl:{start:{line:24,column:9},end:{line:24,column:26}},loc:{start:{line:24,column:78},end:{line:49,column:1}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:37,column:48},end:{line:37,column:49}},loc:{start:{line:37,column:62},end:{line:42,column:3}},line:37},3:{name:"(anonymous_3)",decl:{start:{line:52,column:17},end:{line:52,column:18}},loc:{start:{line:52,column:23},end:{line:53,column:5}},line:52},4:{name:"(anonymous_4)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:24},end:{line:55,column:5}},line:54},5:{name:"(anonymous_5)",decl:{start:{line:56,column:19},end:{line:56,column:20}},loc:{start:{line:56,column:25},end:{line:57,column:5}},line:56},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:59,column:5}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:63,column:2},end:{line:63,column:3}},loc:{start:{line:63,column:21},end:{line:74,column:3}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:71,column:34},end:{line:71,column:35}},loc:{start:{line:71,column:40},end:{line:73,column:5}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:46},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:101,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:97,column:17},end:{line:97,column:18}},loc:{start:{line:97,column:23},end:{line:99,column:7}},line:97},12:{name:"(anonymous_12)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:22},end:{line:178,column:3}},line:102},13:{name:"(anonymous_13)",decl:{start:{line:116,column:26},end:{line:116,column:27}},loc:{start:{line:116,column:32},end:{line:120,column:5}},line:116},14:{name:"(anonymous_14)",decl:{start:{line:140,column:24},end:{line:140,column:25}},loc:{start:{line:140,column:44},end:{line:142,column:7}},line:140},15:{name:"(anonymous_15)",decl:{start:{line:143,column:25},end:{line:143,column:26}},loc:{start:{line:143,column:62},end:{line:143,column:141}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:144,column:19},end:{line:144,column:20}},loc:{start:{line:144,column:33},end:{line:150,column:7}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:31},end:{line:161,column:5}},line:153},18:{name:"(anonymous_18)",decl:{start:{line:162,column:19},end:{line:162,column:20}},loc:{start:{line:162,column:26},end:{line:167,column:5}},line:162},19:{name:"(anonymous_19)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:27},end:{line:170,column:5}},line:168},20:{name:"(anonymous_20)",decl:{start:{line:171,column:19},end:{line:171,column:20}},loc:{start:{line:171,column:27},end:{line:175,column:5}},line:171},21:{name:"(anonymous_21)",decl:{start:{line:179,column:22},end:{line:179,column:23}},loc:{start:{line:179,column:30},end:{line:182,column:3}},line:179},22:{name:"(anonymous_22)",decl:{start:{line:180,column:55},end:{line:180,column:56}},loc:{start:{line:180,column:66},end:{line:180,column:81}},line:180},23:{name:"(anonymous_23)",decl:{start:{line:183,column:2},end:{line:183,column:3}},loc:{start:{line:183,column:20},end:{line:224,column:3}},line:183},24:{name:"(anonymous_24)",decl:{start:{line:185,column:22},end:{line:185,column:23}},loc:{start:{line:185,column:40},end:{line:216,column:7}},line:185},25:{name:"(anonymous_25)",decl:{start:{line:225,column:2},end:{line:225,column:3}},loc:{start:{line:225,column:11},end:{line:239,column:3}},line:225},26:{name:"(anonymous_26)",decl:{start:{line:235,column:13},end:{line:235,column:14}},loc:{start:{line:235,column:20},end:{line:235,column:38}},line:235}},branchMap:{0:{loc:{start:{line:33,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:35,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},1:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:39,column:8},end:{line:39,column:64}},type:"binary-expr",locations:[{start:{line:39,column:8},end:{line:39,column:32}},{start:{line:39,column:36},end:{line:39,column:64}}],line:39},3:{loc:{start:{line:78,column:15},end:{line:78,column:131}},type:"binary-expr",locations:[{start:{line:78,column:15},end:{line:78,column:71}},{start:{line:78,column:75},end:{line:78,column:131}}],line:78},4:{loc:{start:{line:86,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:91,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:86},5:{loc:{start:{line:92,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},6:{loc:{start:{line:92,column:8},end:{line:92,column:98}},type:"binary-expr",locations:[{start:{line:92,column:8},end:{line:92,column:26}},{start:{line:92,column:30},end:{line:92,column:98}}],line:92},7:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95},8:{loc:{start:{line:95,column:8},end:{line:95,column:59}},type:"binary-expr",locations:[{start:{line:95,column:8},end:{line:95,column:26}},{start:{line:95,column:30},end:{line:95,column:59}}],line:95},9:{loc:{start:{line:145,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:149,column:9}},{start:{line:147,column:15},end:{line:149,column:9}}],line:145},10:{loc:{start:{line:163,column:6},end:{line:163,column:40}},type:"if",locations:[{start:{line:163,column:6},end:{line:163,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:163}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA+L6B;AA/L7B,OAAO,WAAuB;AAC9B,OAAO,cAAc;AACrB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,YAAY,OAAoB,WAA4C;AACnF,WAAS,OAAO,OAAO,SAAS;AAChC,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO,IAAI,WAAW,MAAM;AAAA,QAC1B,cAAc;AAAA,MAChB,CAAC;AAAA,MACD,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO,YAAY,oBAAC,qCAAkC,UAAoB,GAAI,OAAO;AAAA,QACvF,OAAO;AACL,iBAAO,YAAY,oBAAC,2BAAwB,UAAoB,eAAe,KAAK,mBAAmB,MAAM,KAAK,MAAM,MAAM,GAAI,OAAO;AAAA,QAC3I;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"300acb3537cd75ba7433c8df32ce2e40c6bb2cf5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Sn=function(){return a},a}Sn();function m9(n,e){return Sn().f[0]++,Sn().s[0]++,ZH.render(n,e),Sn().s[1]++,e}function PX(n,e,t){Sn().f[1]++;const r=(Sn().s[2]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(Sn().s[3]++,hX(t));Sn().s[4]++,i?(Sn().b[0][0]++,Sn().s[5]++,e.push(i)):Sn().b[0][1]++;const s=(Sn().s[6]++,{});Sn().s[7]++,Object.keys(n.sources).forEach(o=>{Sn().f[2]++;const d=(Sn().s[8]++,n.sources[o]);Sn().s[9]++,Sn().b[2][0]++,d.type!=="raster"&&(Sn().b[2][1]++,d.type!=="raster-dem")?(Sn().b[1][0]++,Sn().s[10]++,s[o]=d):Sn().b[1][1]++});const a=(Sn().s[11]++,{...n,sources:s,layers:[r].concat(e)});return Sn().s[12]++,a}class sz extends nr.Component{constructor(t){Sn().f[7]++,Sn().s[15]++;super(t);Tn(this,"container",(Sn().s[14]++,null));Tn(this,"onLayerSelectById",(Sn().s[73]++,t=>{Sn().f[21]++;const r=(Sn().s[74]++,this.props.mapStyle.layers.findIndex(i=>(Sn().f[22]++,Sn().s[75]++,i.id===t)));Sn().s[76]++,this.props.onLayerSelect(r)}));Sn().s[16]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Sn().s[17]++,zc.on("languageChanged",()=>{Sn().f[8]++,Sn().s[18]++,this.forceUpdate()})}shouldComponentUpdate(t,r){Sn().f[9]++;let i=(Sn().s[19]++,!1);Sn().s[20]++;try{Sn().s[21]++,i=(Sn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(t)||(Sn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(r)))}catch{}return Sn().s[22]++,i}componentDidUpdate(){var i,s,a;Sn().f[10]++;const t=(Sn().s[23]++,this.state.map),r=(Sn().s[24]++,this.props.replaceAccessTokens(this.props.mapStyle));Sn().s[25]++,t?(Sn().b[4][0]++,Sn().s[26]++,t.setStyle(r,{diff:!0}),Sn().s[27]++,t.showTileBoundaries=(i=this.props.options)==null?void 0:i.showTileBoundaries,Sn().s[28]++,t.showCollisionBoxes=(s=this.props.options)==null?void 0:s.showCollisionBoxes,Sn().s[29]++,t.showOverdrawInspector=(a=this.props.options)==null?void 0:a.showOverdrawInspector):Sn().b[4][1]++,Sn().s[30]++,Sn().b[6][0]++,this.state.inspect&&(Sn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Sn().b[5][0]++,Sn().s[31]++,this.state.inspect.toggleInspector()):Sn().b[5][1]++,Sn().s[32]++,Sn().b[8][0]++,this.state.inspect&&(Sn().b[8][1]++,this.props.inspectModeEnabled)?(Sn().b[7][0]++,Sn().s[33]++,this.state.inspect.setOriginalStyle(r),Sn().s[34]++,setTimeout(()=>{Sn().f[11]++,Sn().s[35]++,this.state.inspect.render()},500)):Sn().b[7][1]++}componentDidMount(){Sn().f[12]++;const t=(Sn().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),r=(Sn().s[37]++,new NY({metadata:!0}));Sn().s[38]++,Y1.addProtocol("pmtiles",r.tile);const i=(Sn().s[39]++,new Y1.Map(t));Sn().s[40]++;const s=()=>{Sn().f[13]++;const E=(Sn().s[41]++,i.getCenter()),S=(Sn().s[42]++,i.getZoom());Sn().s[43]++,this.props.onChange({center:E,zoom:S})};Sn().s[44]++,s(),Sn().s[45]++,i.showTileBoundaries=t.showTileBoundaries,Sn().s[46]++,i.showCollisionBoxes=t.showCollisionBoxes,Sn().s[47]++,i.showOverdrawInspector=t.showOverdrawInspector;const a=(Sn().s[48]++,this.initGeocoder(i)),o=(Sn().s[49]++,new AX);Sn().s[50]++,i.addControl(o,"top-right");const d=(Sn().s[51]++,new Y1.NavigationControl({visualizePitch:!0}));Sn().s[52]++,i.addControl(d,"top-right");const g=(Sn().s[53]++,document.createElement("div")),b=(Sn().s[54]++,new d8({popup:new Y1.Popup({closeOnClick:!1}),showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(E,S)=>(Sn().f[14]++,Sn().s[55]++,j6(JU.brightColor(E,S)).desaturate(.5).string()),buildInspectStyle:(E,S)=>(Sn().f[15]++,Sn().s[56]++,PX(E,S,this.props.highlightedLayer)),renderPopup:E=>(Sn().f[16]++,Sn().s[57]++,this.props.inspectModeEnabled?(Sn().b[9][0]++,Sn().s[58]++,m9(le.jsx(nX,{features:E}),g)):(Sn().b[9][1]++,Sn().s[59]++,m9(le.jsx(nz,{features:E,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),g)))}));Sn().s[60]++,i.addControl(b),Sn().s[61]++,i.on("style.load",()=>{Sn().f[17]++,Sn().s[62]++,this.setState({map:i,inspect:b,geocoder:a,zoomControl:o,zoom:i.getZoom()})}),Sn().s[63]++,i.on("data",E=>{if(Sn().f[18]++,Sn().s[64]++,E.dataType!=="tile"){Sn().b[10][0]++,Sn().s[65]++;return}else Sn().b[10][1]++;Sn().s[66]++,this.props.onDataChange({map:this.state.map})}),Sn().s[67]++,i.on("error",E=>{Sn().f[19]++,Sn().s[68]++,console.log("ERROR",E)}),Sn().s[69]++,i.on("zoom",E=>{Sn().f[20]++,Sn().s[70]++,this.setState({zoom:i.getZoom()})}),Sn().s[71]++,i.on("dragend",s),Sn().s[72]++,i.on("zoomend",s)}initGeocoder(t){Sn().f[23]++;const r=(Sn().s[77]++,{forwardGeocode:async s=>{Sn().f[24]++;const a=(Sn().s[78]++,[]);Sn().s[79]++;try{const o=(Sn().s[80]++,`https://nominatim.openstreetmap.org/search?q=${s.query}&format=geojson&polygon_geojson=1&addressdetails=1`),d=(Sn().s[81]++,await fetch(o)),g=(Sn().s[82]++,await d.json());Sn().s[83]++;for(const b of g.features){const E=(Sn().s[84]++,[b.bbox[0]+(b.bbox[2]-b.bbox[0])/2,b.bbox[1]+(b.bbox[3]-b.bbox[1])/2]),S=(Sn().s[85]++,{type:"Feature",geometry:{type:"Point",coordinates:E},place_name:b.properties.display_name,properties:b.properties,text:b.properties.display_name,place_type:["place"],center:E});Sn().s[86]++,a.push(S)}}catch(o){Sn().s[87]++,console.error(`Failed to forwardGeocode with error: ${o}`)}return Sn().s[88]++,{features:a}}}),i=(Sn().s[89]++,new TX(r,{placeholder:this.props.t("Search"),maplibregl:Y1}));return Sn().s[90]++,t.addControl(i,"top-left"),Sn().s[91]++,i}render(){var r,i;Sn().f[25]++;const t=(Sn().s[92]++,this.props.t);return Sn().s[93]++,(r=this.state.geocoder)==null||r.setPlaceholder(t("Search")),Sn().s[94]++,(i=this.state.zoomControl)==null||i.setLabel(t("Zoom:")),Sn().s[95]++,le.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":t("Map view"),ref:s=>(Sn().f[26]++,Sn().s[96]++,this.container=s),"data-wd-key":"maplibre:map"})}}Tn(sz,"defaultProps",(Sn().s[13]++,{onMapLoaded:()=>{Sn().f[3]++},onDataChange:()=>{Sn().f[4]++},onLayerSelect:()=>{Sn().f[5]++},onChange:()=>{Sn().f[6]++},options:{}}));const RX=(Sn().s[97]++,Vs()(sz));class ZC{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}class _p{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function DX(n,e,t){let r,i;t=t||qm;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function qm(n,e){return n>e?1:n<e?-1:0}function KX(n,e){return n<e?1:n>e?-1:0}function Mx(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function FX(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function om(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function G0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function LX(n,e,t){const r=e;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function vC(){return!0}function Sx(){return!1}function Oy(){}function az(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!G0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function Iy(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function XC(n){for(const e in n)delete n[e]}function j0(n){let e;for(e in n)return!1;return!e}class JC extends ZC{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new _p(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let d;for(let g=0,b=i.length;g<b;++g)if("handleEvent"in i[g]?d=i[g].handleEvent(s):d=i[g].call(this,s),d===!1||s.propagationStopped){d=!1;break}if(--a[r]===0){let g=o[r];for(delete o[r];g--;)this.removeEventListener(r,Oy);delete a[r]}return d}disposeInternal(){this.listeners_&&XC(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Oy,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}const oo={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"},fi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},CC={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Fc={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Fc.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Fc.max=Fc.whitepoint[2].D65;Fc.rgb=function(n,e){e=e||Fc.whitepoint[2].E;var t=n[0]/e[0],r=n[1]/e[1],i=n[2]/e[2],s,a,o;return s=t*3.240969941904521+r*-1.537383177570093+i*-.498610760293,a=t*-.96924363628087+r*1.87596750150772+i*.041555057407175,o=t*.055630079696993+r*-.20397695888897+i*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[s*255,a*255,o*255]};CC.xyz=function(n,e){var t=n[0]/255,r=n[1]/255,i=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var s=t*.41239079926595+r*.35758433938387+i*.18048078840183,a=t*.21263900587151+r*.71516867876775+i*.072192315360733,o=t*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||Fc.whitepoint[2].E,[s*e[0],a*e[1],o*e[2]]};const f8={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var r,i,s,a,o,d,g,b,E,S,B,k,z;if(s=n[0],a=n[1],o=n[2],s===0)return[0,0,0];var j=.0011070564598794539;return e=e||"D65",t=t||2,E=Fc.whitepoint[t][e][0],S=Fc.whitepoint[t][e][1],B=Fc.whitepoint[t][e][2],k=4*E/(E+15*S+3*B),z=9*S/(E+15*S+3*B),r=a/(13*s)+k||0,i=o/(13*s)+z||0,g=s>8?S*Math.pow((s+16)/116,3):S*s*j,d=g*9*r/(4*i)||0,b=g*(12-3*r-20*i)/(4*i)||0,[d,g,b]}};Fc.luv=function(n,e,t){var r,i,s,a,o,d,g,b,E,S,B,k,z,j=.008856451679035631,Y=903.2962962962961;e=e||"D65",t=t||2,E=Fc.whitepoint[t][e][0],S=Fc.whitepoint[t][e][1],B=Fc.whitepoint[t][e][2],k=4*E/(E+15*S+3*B),z=9*S/(E+15*S+3*B),d=n[0],g=n[1],b=n[2],r=4*d/(d+15*g+3*b)||0,i=9*g/(d+15*g+3*b)||0;var q=g/S;return s=q<=j?Y*q:116*Math.pow(q,1/3)-16,a=13*s*(r-k),o=13*s*(i-z),[s,a,o]};var lz={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],r=n[2],i,s,a;return a=r/360*2*Math.PI,i=t*Math.cos(a),s=t*Math.sin(a),[e,i,s]},xyz:function(n){return f8.xyz(lz.luv(n))}};f8.lchuv=function(n){var e=n[0],t=n[1],r=n[2],i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t),a=s*360/2/Math.PI;return a<0&&(a+=360),[e,i,a]};Fc.lchuv=function(n){return f8.lchuv(Fc.luv(n))};const g9={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var y9={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function UX(n){var b,E;var e,t=[],r=1,i;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),g9[n])t=g9[n].slice(),i="rgb";else if(n==="transparent")r=0,i="rgb",t=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),a=s.length,o=a<=4;r=1,o?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],a===4&&(r=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],a===8&&(r=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var d=e[1];i=d.replace(/a$/,"");var g=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(S,B){if(S[S.length-1]==="%")return S=parseFloat(S)/100,B===3?S:i==="rgb"?S*255:i[0]==="h"||i[0]==="l"&&!B?S*100:i==="lab"?S*125:i==="lch"?B<2?S*150:S*360:i[0]==="o"&&!B?S:i==="oklab"?S*.4:i==="oklch"?B<2?S*.4:S*360:S;if(i[B]==="h"||B===2&&i[i.length-1]==="h"){if(y9[S]!==void 0)return y9[S];if(S.endsWith("deg"))return parseFloat(S);if(S.endsWith("turn"))return parseFloat(S)*360;if(S.endsWith("grad"))return parseFloat(S)*360/400;if(S.endsWith("rad"))return parseFloat(S)*180/Math.PI}return S==="none"?0:parseFloat(S)}),r=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(S){return parseFloat(S)}),i=((E=(b=n.match(/([a-z])/ig))==null?void 0:b.join(""))==null?void 0:E.toLowerCase())||"rgb");return{space:i,values:t,alpha:r}}const U4={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,r=n[2]/100,i,s,a,o,d,g=0;if(t===0)return d=r*255,[d,d,d];for(s=r<.5?r*(1+t):r+t-r*t,i=2*r-s,o=[0,0,0];g<3;)a=e+1/3*-(g-1),a<0?a++:a>1&&a--,d=6*a<1?i+(s-i)*6*a:2*a<1?s:3*a<2?i+(s-i)*(2/3-a)*6:i,o[g++]=d*255;return o}};CC.hsl=function(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),a=s-i,o,d,g;return s===i?o=0:e===s?o=(t-r)/a:t===s?o=2+(r-e)/a:r===s&&(o=4+(e-t)/a),o=Math.min(o*60,360),o<0&&(o+=360),g=(i+s)/2,s===i?d=0:g<=.5?d=a/(s+i):d=a/(2-s-i),[o,d*100,g*100]};function zX(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=UX(n);if(!t.space)return[];const r=t.space[0]==="h"?U4.min:CC.min,i=t.space[0]==="h"?U4.max:CC.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),i[2]),t.space[0]==="h"&&(e=U4.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function Du(n,e,t){return Math.min(Math.max(n,e),t)}function jX(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const d=((n-t)*a+(e-r)*o)/(a*a+o*o);d>1?(t=i,r=s):d>0&&(t+=a*d,r+=o*d)}return Tg(n,e,t,r)}function Tg(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function NX(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const d=Math.abs(n[o][r]);d>s&&(s=d,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const d=-n[o][r]/n[r][r];for(let g=r;g<e+1;g++)r==g?n[o][g]=0:n[o][g]+=d*n[r][g]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function v9(n){return n*180/Math.PI}function K0(n){return n*Math.PI/180}function Pg(n,e){const t=n%e;return t*e<0?t+e:t}function Vh(n,e,t){return n+t*(e-n)}function p8(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function tb(n,e){return Math.floor(p8(n,e))}function O0(n,e){return Math.ceil(p8(n,e))}function Q6(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}const m8=[NaN,NaN,NaN,0];function WX(n){return typeof n=="string"?n:y8(n)}const GX=1024,Cv={};let z4=0;function QX(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function C9(n){const e=Fc.lchuv(CC.xyz(n));return e[3]=n[3],e}function qX(n){const e=Fc.rgb(lz.xyz(n));return e[3]=n[3],e}function g8(n){if(n==="none")return m8;if(Cv.hasOwnProperty(n))return Cv[n];if(z4>=GX){let t=0;for(const r in Cv)t++&3||(delete Cv[r],--z4)}const e=zX(n);if(e.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+n+'" as color');return uz(e),Cv[n]=e,++z4,e}function ky(n){return Array.isArray(n)?n:g8(n)}function uz(n){return n[0]=Du(n[0]+.5|0,0,255),n[1]=Du(n[1]+.5|0,0,255),n[2]=Du(n[2]+.5|0,0,255),n[3]=Du(n[3],0,1),n}function y8(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}const N0=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",YX=N0.includes("firefox"),$X=N0.includes("safari")&&!N0.includes("chrom");$X&&(N0.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(N0));const VX=N0.includes("webkit")&&!N0.includes("edge"),Az=N0.includes("macintosh"),cz=typeof devicePixelRatio<"u"?devicePixelRatio:1,v8=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,dz=typeof Image<"u"&&Image.prototype.decode,hz=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function nu(n,e,t,r){let i;return t&&t.length?i=t.shift():v8?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let j4;function h2(){return j4||(j4=nu(1,1)),j4}function e_(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function HX(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function ZX(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function _9(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function fz(n){for(;n.lastChild;)n.lastChild.remove()}function XX(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function Ps(n,e,t,r,i){if(i){const a=t;t=function(){n.removeEventListener(e,t),a.apply(r??this,arguments)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function f2(n,e,t,r){return Ps(n,e,t,r,!0)}function Fa(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),XC(n))}class C8 extends JC{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?fi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(oo.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==fi.IDLE&&this.loader){this.state=fi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Iy(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=fi.LOADED}).catch(r=>{this.state=fi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function JX(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[f2(r,oo.LOAD,function(){a=!0,s||e()})];return r.src&&dz?(s=!0,r.decode().then(function(){i&&e()}).catch(function(d){i&&(a?e():t())})):o.push(f2(r,oo.ERROR,t)),function(){i=!1,o.forEach(Fa)}}function eJ(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function tJ(n,e){return e&&(n.src=e),n.src&&dz?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):eJ(n)}class nJ{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];!(e++&3)&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=N4(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=N4(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=N4(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===fi.IDLE&&i.load(),i.getImageState()===fi.LOADING?i.ready().then(()=>{this.patternCache_[a]=h2().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=h2().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function N4(n,e,t){const r=t?ky(t):"null";return e+":"+n+":"+r}const Tf=new nJ;let _v=null;class pz extends JC{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?fi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===fi.LOADED){_v||(_v=nu(1,1,void 0,{willReadFrequently:!0})),_v.drawImage(this.image_,0,0);try{_v.getImageData(0,0,1,1),this.tainted_=!1}catch{_v=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(oo.CHANGE)}handleImageError_(){this.imageState_=fi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=fi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=nu(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===fi.IDLE){this.image_||this.initializeImage_(),this.imageState_=fi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&tJ(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==fi.LOADED)return;const t=this.image_,r=nu(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=WX(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)e();else{const t=()=>{(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)&&(this.removeEventListener(oo.CHANGE,t),e())};this.addEventListener(oo.CHANGE,t)}})),this.ready_}}function _8(n,e,t,r,i,s){let a=e===void 0?void 0:Tf.get(e,t,i);return a||(a=new pz(n,n&&"src"in n?n.src||void 0:e,t,r,i),Tf.set(e,t,i,a,s)),s&&a&&!Tf.getPattern(e,t,i)&&Tf.set(e,t,i,a,s),a}function yo(){throw new Error("Unimplemented abstract method.")}let rJ=0;function Uo(n){return n.ol_uid||(n.ol_uid=String(++rJ))}function b9(n){return n[0]>0&&n[1]>0}function iJ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function cd(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Ex{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=cd(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ex({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return yo()}getImage(e){return yo()}getHitDetectionImage(){return yo()}getPixelRatio(e){return 1}getImageState(){return yo()}getImageSize(){return yo()}getOrigin(){return yo()}getSize(){return yo()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=cd(e)}listenImageChange(e){yo()}load(){yo()}unlistenImageChange(e){yo()}ready(){return Promise.resolve()}}function em(n){return n?Array.isArray(n)?y8(n):typeof n=="object"&&"src"in n?oJ(n):n:null}function oJ(n){if(!n.offset||!n.size)return Tf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Tf.getPattern(e,void 0,n.color);if(t)return t;const r=Tf.get(n.src,"anonymous",null);if(r.getImageState()!==fi.LOADED)return null;const i=nu(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),_8(i.canvas,e,void 0,fi.LOADED,n.color,!0),Tf.getPattern(e,void 0,n.color)}const Ty={PROPERTYCHANGE:"propertychange"};class t_ extends JC{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(oo.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ps(this,e[s],t);return i}return Ps(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=f2(this,e[s],t)}else r=f2(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)sJ(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}t_.prototype.on;t_.prototype.once;t_.prototype.un;function sJ(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Fa(n[e]);else Fa(n)}class x9 extends _p{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class bp extends t_{constructor(e){super(),this.on,this.once,this.un,Uo(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new x9(r,e,t)),r=Ty.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new x9(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],j0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const nb="ol-hidden",aJ="ol-selectable",Bx="ol-unselectable",b8="ol-control",w9="ol-collapsed",lJ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),M9=["style","variant","weight","size","lineHeight","family"],mz=function(n){const e=n.match(lJ);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=M9.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[M9[r]]=s)}return t.families=t.family.split(/,\s?/),t},gz="10px sans-serif",Ch="#000",Py="round",Ym=[],$m=0,Ry="round",_C=10,bC="#000",xC="center",p2="middle",wg=[0,0,0,0],wC=1,Gp=new bp;let $1=null,q6;const Y6={},yz=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let s,a;function o(g,b,E){let S=!0;for(let B=0;B<r;++B){const k=t[B];if(a=m2(g+" "+b+" "+e+k,i),E!=k){const z=m2(g+" "+b+" "+e+E+","+k,i);S=S&&z!=a}}return!!S}function d(){let g=!0;const b=Gp.getKeys();for(let E=0,S=b.length;E<S;++E){const B=b[E];if(Gp.get(B)<100){const[k,z,j]=B.split(`
`);o(k,z,j)?(XC(Y6),$1=null,q6=void 0,Gp.set(B,100)):(Gp.set(B,Gp.get(B)+1,!0),g=!1)}}g&&(clearInterval(s),s=void 0)}return function(g){const b=mz(g);if(!b)return;const E=b.families;for(let S=0,B=E.length;S<B;++S){const k=E[S],z=b.style+`
`+b.weight+`
`+k;Gp.get(z)===void 0&&(Gp.set(z,100,!0),o(b.style,b.weight,k)||(Gp.set(z,0,!0),s===void 0&&(s=setInterval(d,32))))}}}(),uJ=function(){let n;return function(e){let t=Y6[e];if(t==null){if(v8){const r=mz(e),i=vz(e,"Žg");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Y6[e]=t}return t}}();function vz(n,e){return $1||($1=nu(1,1)),n!=q6&&($1.font=n,q6=$1.font),$1.measureText(e)}function m2(n,e){return vz(n,e).width}function S9(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,m2(n,s)),0);return t[e]=r,r}function AJ(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,d=0;for(let g=0,b=e.length;g<=b;g+=2){const E=e[g];if(E===`
`||g===b){s=Math.max(s,a),i.push(a),a=0,o+=d,d=0;continue}const S=e[g+1]||n.font,B=m2(S,E);t.push(B),a+=B;const k=uJ(S);r.push(k),d=Math.max(d,k)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function cJ(n,e,t,r,i,s,a,o,d,g,b){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=E=>E.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(d,g),n.scale(b[0],b[1]),dJ(r,n)):b[0]<0||b[1]<0?(n.translate(d,g),n.scale(b[0],b[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,d,g,a*b[0],o*b[1]),n.restore()}function dJ(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class Ox extends Ex{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?fi.LOADING:fi.LOADED,this.imageState_===fi.LOADING&&this.ready().then(()=>this.imageState_=fi.LOADED),this.render()}clone(){const e=this.getScale(),t=new Ox({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,a;const t=(s=this.fill_)==null?void 0:s.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(a=Tf.get(r,null,null))==null?void 0:a.getImage(1);if(!i){const o=this.renderOptions_,d=Math.ceil(o.size*e),g=nu(d,d);this.draw_(o,g,e),i=g.canvas,Tf.set(r,null,null,new pz(i,void 0,null,fi.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const te=i;i=s,s=te}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,d=s*Math.sin(o),g=Math.sqrt(s*s-d*d),b=i-g,E=Math.sqrt(d*d+b*b),S=E/d;if(e==="miter"&&S<=r)return S*t;const B=t/2/S,k=t/2*(b/E),j=Math.sqrt((i+B)*(i+B)+k*k)-i;if(this.radius2_===void 0||e==="bevel")return j*2;const Y=i*Math.sin(o),q=Math.sqrt(i*i-Y*Y),ie=s-q,$=Math.sqrt(Y*Y+ie*ie)/Y;if($<=r){const te=$*t/2-s-i;return 2*Math.max(j,te)}return j*2}createRenderOptions(){let e=Py,t=Ry,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=em(this.stroke_.getColor()??bC),o=this.stroke_.getWidth()??wC,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Ry,e=this.stroke_.getLineCap()??Py,r=this.stroke_.getMiterLimit()??_C);const d=this.calculateLineJoinSize_(t,o,r),g=Math.max(this.radius,this.radius2_||0),b=Math.ceil(2*g+d);return{strokeStyle:a,strokeWidth:o,size:b,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=Ch),t.fillStyle=em(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=ky(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=nu(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const d=s+o*a,g=o%2===0?r:i;e.lineTo(g*Math.cos(d),g*Math.sin(d))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ch,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class n_ extends Ox{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new n_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Gm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Gm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=_8(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===fi.IDLE&&t.load(),t.getImageState()===fi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Uo(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:ky(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function ia(n,e){if(!n)throw new Error(e)}function E9(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let g2=class Cz extends Ex{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;ia(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||Uo(a)),ia(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),ia(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(e.src!==void 0?d=fi.IDLE:a!==void 0&&("complete"in a?a.complete?d=a.src?fi.LOADED:fi.IDLE:d=fi.LOADING:d=fi.LOADED),this.color_=e.color!==void 0?ky(e.color):null,this.iconImage_=_8(a,o,this.crossOrigin_,d,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,b;if(e.size)[g,b]=e.size;else{const E=this.getImage(1);if(E.width&&E.height)g=E.width,b=E.height;else if(E instanceof HTMLImageElement){this.initialOptions_=e;const S=()=>{if(this.unlistenImageChange(S),!this.initialOptions_)return;const B=this.iconImage_.getSize();this.setScale(E9(B[0],B[1],e.width,e.height))};this.listenImageChange(S);return}}g!==void 0&&this.setScale(E9(g,b,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Cz({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(oo.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(oo.CHANGE,e)}ready(){return this.iconImage_.ready()}};class Ix extends bp{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Ix(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Fa(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ps(e,oo.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?hJ(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function hJ(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ia(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const _z=new Array(6);function wh(){return[1,0,0,1,0,0]}function B9(n){return w8(n,1,0,0,1,0,0)}function x8(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=n[4],o=n[5],d=e[0],g=e[1],b=e[2],E=e[3],S=e[4],B=e[5];return n[0]=t*d+i*g,n[1]=r*d+s*g,n[2]=t*b+i*E,n[3]=r*b+s*E,n[4]=t*S+i*B+a,n[5]=r*S+s*B+o,n}function w8(n,e,t,r,i,s,a){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=a,n}function fJ(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function _A(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function W4(n,e,t){return x8(n,w8(_z,e,0,0,t,0,0))}function pJ(n,e,t){return x8(n,w8(_z,1,0,0,1,e,t))}function lm(n,e,t,r,i,s,a,o){const d=Math.sin(s),g=Math.cos(s);return n[0]=r*g,n[1]=i*d,n[2]=-r*d,n[3]=i*g,n[4]=a*r*g-o*r*d+e,n[5]=a*i*d+o*i*g+t,n}function bz(n,e){const t=mJ(e);ia(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],d=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*d-a*o)/t,n[5]=-(r*d-i*o)/t,n}function mJ(n){return n[0]*n[3]-n[1]*n[2]}const O9=[1e6,1e6,1e6,1e6,2,2];function gJ(n){return"matrix("+n.map((t,r)=>Math.round(t*O9[r])/O9[r]).join(", ")+")"}const hc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function $6(n){const e=nf();for(let t=0,r=n.length;t<r;++t)rC(e,n[t]);return e}function yJ(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),a=Math.max.apply(null,e);return Zm(r,i,s,a,t)}function F0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function xz(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function qg(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Ug(n,e){return M8(n,e[0],e[1])}function mp(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function M8(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function V6(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let d=hc.UNKNOWN;return a<t?d=d|hc.LEFT:a>i&&(d=d|hc.RIGHT),o<r?d=d|hc.BELOW:o>s&&(d=d|hc.ABOVE),d===hc.UNKNOWN&&(d=hc.INTERSECTING),d}function nf(){return[1/0,1/0,-1/0,-1/0]}function Zm(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Qy(n){return Zm(1/0,1/0,-1/0,-1/0,n)}function wz(n,e){const t=n[0],r=n[1];return Zm(t,r,t,r,e)}function S8(n,e,t,r,i){const s=Qy(i);return Mz(s,n,e,t,r)}function Xm(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function E8(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function rC(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function Mz(n,e,t,r,i){for(;t<r;t+=i)vJ(n,e[t],e[t+1]);return n}function vJ(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Sz(n,e){let t;return t=e(kx(n)),t||(t=e(Tx(n)),t)||(t=e(Px(n)),t)||(t=e(yp(n)),t)?t:!1}function MC(n){let e=0;return Yg(n)||(e=ms(n)*Jl(n)),e}function kx(n){return[n[0],n[1]]}function Tx(n){return[n[2],n[1]]}function Kf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function CJ(n,e){let t;if(e==="bottom-left")t=kx(n);else if(e==="bottom-right")t=Tx(n);else if(e==="top-left")t=yp(n);else if(e==="top-right")t=Px(n);else throw new Error("Invalid corner");return t}function y2(n,e,t,r,i){const[s,a,o,d,g,b,E,S]=_J(n,e,t,r);return Zm(Math.min(s,o,g,E),Math.min(a,d,b,S),Math.max(s,o,g,E),Math.max(a,d,b,S),i)}function _J(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),d=i*a,g=i*o,b=s*a,E=s*o,S=n[0],B=n[1];return[S-d+E,B-g-b,S-d-E,B-g+b,S+d-E,B+g+b,S+d+E,B+g-b,S-d+E,B-g-b]}function Jl(n){return n[3]-n[1]}function Vd(n,e,t){const r=t||nf();return Ru(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Qy(r),r}function yp(n){return[n[0],n[3]]}function Px(n){return[n[2],n[3]]}function ms(n){return n[2]-n[0]}function Ru(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Yg(n){return n[2]<n[0]||n[3]<n[1]}function bJ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function xJ(n,e,t){let r=!1;const i=V6(n,e),s=V6(n,t);if(i===hc.INTERSECTING||s===hc.INTERSECTING)r=!0;else{const a=n[0],o=n[1],d=n[2],g=n[3],b=e[0],E=e[1],S=t[0],B=t[1],k=(B-E)/(S-b);let z,j;s&hc.ABOVE&&!(i&hc.ABOVE)&&(z=S-(B-g)/k,r=z>=a&&z<=d),!r&&s&hc.RIGHT&&!(i&hc.RIGHT)&&(j=B-(S-d)*k,r=j>=o&&j<=g),!r&&s&hc.BELOW&&!(i&hc.BELOW)&&(z=S-(B-o)/k,r=z>=a&&z<=d),!r&&s&hc.LEFT&&!(i&hc.LEFT)&&(j=B-(S-a)*k,r=j>=o&&j<=g)}return r}function wJ(n,e,t,r){if(Yg(n))return Qy(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],a=[];for(let o=0,d=i.length;o<d;o+=2)s.push(i[o]),a.push(i[o+1]);return yJ(s,a,t)}function Ez(n,e){const t=e.getExtent(),r=Kf(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=ms(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function B8(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];Ez(n,e);const i=ms(r);if(ms(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}const W0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Rx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||W0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const r_=6378137,ny=Math.PI*r_,MJ=[-ny,-ny,ny,ny],SJ=[-180,-85,180,85],rb=r_*Math.log(Math.tan(Math.PI/2));class p1 extends Rx{constructor(e){super({code:e,units:"m",extent:MJ,global:!0,worldExtent:SJ,getPointResolution:function(t,r){return t/Math.cosh(r[1]/r_)}})}}const I9=[new p1("EPSG:3857"),new p1("EPSG:102100"),new p1("EPSG:102113"),new p1("EPSG:900913"),new p1("http://www.opengis.net/def/crs/EPSG/0/3857"),new p1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function EJ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=ny*n[s]/180;let a=r_*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>rb?a=rb:a<-rb&&(a=-rb),e[s+1]=a}return e}function BJ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/ny,e[s+1]=360*Math.atan(Math.exp(n[s+1]/r_))/Math.PI-90;return e}const OJ=6378137,k9=[-180,-90,180,90],IJ=Math.PI*OJ/180;class lg extends Rx{constructor(e,t){super({code:e,units:"degrees",extent:k9,axisOrientation:t,global:!0,metersPerUnit:IJ,worldExtent:k9})}}const T9=[new lg("CRS:84"),new lg("EPSG:4326","neu"),new lg("urn:ogc:def:crs:OGC:1.3:CRS84"),new lg("urn:ogc:def:crs:OGC:2:84"),new lg("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new lg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new lg("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let H6={};function kJ(n){return H6[n]||H6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function TJ(n,e){H6[n]=e}let fy={};function SC(n,e,t){const r=n.getCode(),i=e.getCode();r in fy||(fy[r]={}),fy[r][i]=t}function G4(n,e){return n in fy&&e in fy[n]?fy[n][e]:null}function PJ(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function v2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function O8(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function RJ(n,e){return n[0]*=e,n[1]*=e,n}function I8(n,e){if(e.canWrapX()){const t=ms(e.getExtent()),r=DJ(n,e,t);r&&(n[0]-=r*t)}return n}function DJ(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||ms(r),i=Math.floor((n[0]-r[0])/t)),i}const KJ=63710088e-1;function P9(n,e,t){t=t||KJ;const r=K0(n[1]),i=K0(e[1]),s=(i-r)/2,a=K0(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const C2=.9996,Df=.00669438,Dx=Df*Df,Kx=Dx*Df,Mg=Df/(1-Df),R9=Math.sqrt(1-Df),Dy=(1-R9)/(1+R9),Bz=Dy*Dy,k8=Bz*Dy,T8=k8*Dy,Oz=T8*Dy,Iz=1-Df/4-3*Dx/64-5*Kx/256,FJ=3*Df/8+3*Dx/32+45*Kx/1024,LJ=15*Dx/256+45*Kx/1024,UJ=35*Kx/3072,zJ=3/2*Dy-27/32*k8+269/512*Oz,jJ=21/16*Bz-55/32*T8,NJ=151/96*k8-417/128*Oz,WJ=1097/512*T8,_2=6378137;function GJ(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/C2/(_2*Iz),o=a+zJ*Math.sin(2*a)+jJ*Math.sin(4*a)+NJ*Math.sin(6*a)+WJ*Math.sin(8*a),d=Math.sin(o),g=d*d,b=Math.cos(o),E=d/b,S=E*E,B=S*S,k=1-Df*g,z=Math.sqrt(1-Df*g),j=_2/z,Y=(1-Df)/k,q=Mg*b**2,ie=q*q,J=r/(j*C2),$=J*J,te=$*J,W=te*J,oe=W*J,fe=oe*J,he=o-E/Y*($/2-W/24*(5+3*S+10*q-4*ie-9*Mg))+fe/720*(61+90*S+298*q+45*B-252*Mg-3*ie);let Se=(J-te/6*(1+2*S+q)+oe/120*(5-2*q+28*S-3*ie+8*Mg+24*B))/b;return Se=Q6(Se+K0(kz(t.number)),-Math.PI,Math.PI),[v9(Se),v9(he)]}const D9=-80,K9=84,QJ=-180,qJ=180;function YJ(n,e,t){n=Q6(n,QJ,qJ),e<D9?e=D9:e>K9&&(e=K9);const r=K0(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,d=o*o,g=K0(n),b=kz(t.number),E=K0(b),S=_2/Math.sqrt(1-Df*i**2),B=Mg*s**2,k=s*Q6(g-E,-Math.PI,Math.PI),z=k*k,j=z*k,Y=j*k,q=Y*k,ie=q*k,J=_2*(Iz*r-FJ*Math.sin(2*r)+LJ*Math.sin(4*r)-UJ*Math.sin(6*r)),$=C2*S*(k+j/6*(1-o+B)+q/120*(5-18*o+d+72*B-58*Mg))+5e5;let te=C2*(J+S*a*(z/2+Y/24*(5-o+9*B+4*B**2)+ie/720*(61-58*o+d+600*B-330*Mg)));return t.north||(te+=1e7),[$,te]}function kz(n){return(n-1)*6-180+3}const $J=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Tz(n){let e=0;for(const i of $J){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function F9(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const d=t[o],g=t[o+1],b=n(d,g,e);r[o]=b[0],r[o+1]=b[1]}return r}}function VJ(n){return Tz(n)?new Rx({code:n,units:"m"}):null}function HJ(n){const e=Tz(n.getCode());return e?{forward:F9(YJ,e),inverse:F9(GJ,e)}:null}function Pz(...n){console.warn(...n)}const ZJ=[HJ],XJ=[VJ];let Z6=!0;function Rz(n){Z6=!1}function P8(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function X6(n){TJ(n.getCode(),n),SC(n,n,P8)}function JJ(n){n.forEach(X6)}function Sa(n){if(typeof n!="string")return n;const e=kJ(n);if(e)return e;for(const t of XJ){const r=t(n);if(r)return r}return null}function J6(n,e,t,r){n=Sa(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/W0[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=i_(n,Sa("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=o(g,g,2);const b=P9(g.slice(0,2),g.slice(2,4)),E=P9(g.slice(4,6),g.slice(6,8));i=(b+E)/2}const d=r?W0[r]:n.getMetersPerUnit();d!==void 0&&(i/=d)}}return i}function L9(n){JJ(n),n.forEach(function(e){n.forEach(function(t){e!==t&&SC(e,t,P8)})})}function eee(n,e,t,r){n.forEach(function(i){e.forEach(function(s){SC(i,s,t),SC(s,i,r)})})}function R8(n,e){return n?typeof n=="string"?Sa(n):n:Sa(e)}function tee(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),d=o.length;for(let g=0,b=i;g<b;++g)t[a+g]=g>=d?e[a+g]:o[g]}return t}}function eB(n,e){return Rz(),Fx(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Q4(n,e){const t=Fx(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Pg(r+180,360)-180),t}function Rg(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||i_(n,e)===P8)&&t}function i_(n,e){const t=n.getCode(),r=e.getCode();let i=G4(t,r);if(i)return i;let s=null,a=null;for(const d of ZJ)s||(s=d(n)),a||(a=d(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=q4(s.inverse,a.forward);else{const d=G4(t,o);d&&(i=q4(d,a.forward))}else{const d=G4(o,r);d&&(i=q4(s.inverse,d))}return i&&(X6(n),X6(e),SC(n,e,i)),i}function q4(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function EC(n,e){const t=Sa(n),r=Sa(e);return i_(t,r)}function Fx(n,e,t){const r=EC(e,t);if(!r){const i=Sa(e).getCode(),s=Sa(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let nee=null;function ree(){return nee}function tB(n,e){return n}function Um(n,e){return Z6&&!v2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Z6=!1,Pz("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function D8(n,e){return n}function tm(n,e){return n}function iee(){L9(I9),L9(T9),eee(T9,I9,EJ,BJ)}iee();function L0(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let d=e;d<t;d+=r){const g=n[d],b=n[d+1];s[o++]=i[0]*g+i[2]*b+i[4],s[o++]=i[1]*g+i[3]*b+i[5];for(let E=2;E<a;E++)s[o++]=n[d+E]}return s&&s.length!=o&&(s.length=o),s}function Dz(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),d=Math.sin(i),g=s[0],b=s[1];let E=0;for(let S=e;S<t;S+=r){const B=n[S]-g,k=n[S+1]-b;a[E++]=g+B*o-k*d,a[E++]=b+B*d+k*o;for(let z=S+2;z<S+r;++z)a[E++]=n[z]}return a&&a.length!=E&&(a.length=E),a}function oee(n,e,t,r,i,s,a,o){o=o||[];const d=a[0],g=a[1];let b=0;for(let E=e;E<t;E+=r){const S=n[E]-d,B=n[E+1]-g;o[b++]=d+i*S,o[b++]=g+s*B;for(let k=E+2;k<E+r;++k)o[b++]=n[k]}return o&&o.length!=b&&(o.length=b),o}function see(n,e,t,r,i,s,a){a=a||[];let o=0;for(let d=e;d<t;d+=r){a[o++]=n[d]+i,a[o++]=n[d+1]+s;for(let g=d+2;g<d+r;++g)a[o++]=n[g]}return a&&a.length!=o&&(a.length=o),a}const U9=wh();class Kz extends bp{constructor(){super(),this.extent_=nf(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=az((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return yo()}closestPointXY(e,t,r,i){return yo()}containsXY(e,t){const r=this.getClosestPoint([e,t]);return r[0]===e&&r[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return yo()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Qy(t),this.extentRevision_=this.getRevision()}return bJ(this.extent_,e)}rotate(e,t){yo()}scale(e,t,r){yo()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return yo()}getType(){return yo()}applyTransform(e){yo()}intersectsExtent(e){return yo()}translate(e,t){yo()}transform(e,t){const r=Sa(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const d=r.getExtent(),g=r.getWorldExtent(),b=Jl(g)/Jl(d);lm(U9,g[0],g[3],b,-b,0,0,0);const E=L0(s,0,s.length,o,U9,a),S=EC(r,t);return S?S(E,E,o):E}:EC(r,t);return this.applyTransform(i),this}}class $g extends Kz{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return S8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return yo()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=z9(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){yo()}setLayout(e,t,r){let i;if(e)i=z9(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Vg(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();Dz(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Kf(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();oee(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();see(r,0,r.length,i,e,t,r),this.changed()}}}function Vg(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function z9(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function aee(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return L0(r,0,r.length,i,e,t)}function lee(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function Lx(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function o_(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=Lx(n,e,t[a],r);i[s++]=d,e=d}return i.length=s,i}function Fz(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=o_(n,e,t[a],r,i[s]);d.length===0&&(d[0]=e),i[s++]=d,e=d[d.length-1]}return i.length=s,i}class b2 extends Kz{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Fa),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Ps(e[t],oo.CHANGE,this.changed,this))}clone(){const e=new b2(Y4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<qg(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Qy(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)E8(e,t[r].getExtent());return e}getGeometries(){return Y4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],d=o.getSimplifiedGeometry(e);t.push(d),d!==o&&(i=!0)}return i?new b2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Kf(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(Y4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Y4(n){return n.map(e=>e.clone())}function j9(n,e,t,r,i,s,a){const o=n[e],d=n[e+1],g=n[t]-o,b=n[t+1]-d;let E;if(g===0&&b===0)E=e;else{const S=((i-o)*g+(s-d)*b)/(g*g+b*b);if(S>1)E=t;else if(S>0){for(let B=0;B<r;++B)a[B]=Vh(n[e+B],n[t+B],S);a.length=r;return}else E=e}for(let S=0;S<r;++S)a[S]=n[E+S];a.length=r}function K8(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],d=n[e+1],g=Tg(s,a,o,d);g>i&&(i=g),s=o,a=d}return i}function F8(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=K8(n,e,o,r,i),e=o}return i}function uee(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=F8(n,e,o,r,i),e=o[o.length-1]}return i}function L8(n,e,t,r,i,s,a,o,d,g,b){if(e==t)return g;let E,S;if(i===0){if(S=Tg(a,o,n[e],n[e+1]),S<g){for(E=0;E<r;++E)d[E]=n[e+E];return d.length=r,S}return g}b=b||[NaN,NaN];let B=e+r;for(;B<t;)if(j9(n,B-r,B,r,a,o,b),S=Tg(a,o,b[0],b[1]),S<g){for(g=S,E=0;E<r;++E)d[E]=b[E];d.length=r,B+=r}else B+=r*Math.max((Math.sqrt(S)-Math.sqrt(g))/i|0,1);if(s&&(j9(n,t-r,e,r,a,o,b),S=Tg(a,o,b[0],b[1]),S<g)){for(g=S,E=0;E<r;++E)d[E]=b[E];d.length=r}return g}function U8(n,e,t,r,i,s,a,o,d,g,b){b=b||[NaN,NaN];for(let E=0,S=t.length;E<S;++E){const B=t[E];g=L8(n,e,B,r,i,s,a,o,d,g,b),e=B}return g}function Aee(n,e,t,r,i,s,a,o,d,g,b){b=b||[NaN,NaN];for(let E=0,S=t.length;E<S;++E){const B=t[E];g=U8(n,e,B,r,i,s,a,o,d,g,b),e=B[B.length-1]}return g}function Ux(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const d=new Array(o);d[0]=1,d[o-1]=1;const g=[e,t-r];let b=0;for(;g.length>0;){const E=g.pop(),S=g.pop();let B=0;const k=n[S],z=n[S+1],j=n[E],Y=n[E+1];for(let q=S+r;q<E;q+=r){const ie=n[q],J=n[q+1],$=jX(ie,J,k,z,j,Y);$>B&&(b=q,B=$)}B>i&&(d[(b-e)/r]=1,S+r<b&&g.push(S,b),b+r<E&&g.push(b,E))}for(let E=0;E<o;++E)d[E]&&(s[a++]=n[e+E*r],s[a++]=n[e+E*r+1]);return a}function Lz(n,e,t,r,i,s,a,o){for(let d=0,g=t.length;d<g;++d){const b=t[d];a=Ux(n,e,b,r,i,s,a),o.push(a),e=b}return a}function gg(n,e){return e*Math.round(n/e)}function cee(n,e,t,r,i,s,a){if(e==t)return a;let o=gg(n[e],i),d=gg(n[e+1],i);e+=r,s[a++]=o,s[a++]=d;let g,b;do if(g=gg(n[e],i),b=gg(n[e+1],i),e+=r,e==t)return s[a++]=g,s[a++]=b,a;while(g==o&&b==d);for(;e<t;){const E=gg(n[e],i),S=gg(n[e+1],i);if(e+=r,E==g&&S==b)continue;const B=g-o,k=b-d,z=E-o,j=S-d;if(B*j==k*z&&(B<0&&z<B||B==z||B>0&&z>B)&&(k<0&&j<k||k==j||k>0&&j>k)){g=E,b=S;continue}s[a++]=g,s[a++]=b,o=g,d=b,g=E,b=S}return s[a++]=g,s[a++]=b,a}function z8(n,e,t,r,i,s,a,o){for(let d=0,g=t.length;d<g;++d){const b=t[d];a=cee(n,e,b,r,i,s,a),o.push(a),e=b}return a}function dee(n,e,t,r,i,s,a,o){for(let d=0,g=t.length;d<g;++d){const b=t[d],E=[];a=z8(n,e,b,r,i,s,a,E),o.push(E),e=b[b.length-1]}return a}function I0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function BC(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=t[a];i[s++]=I0(n,e,d,r,i[s]),e=d}return i.length=s,i}function nB(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=t[a];i[s++]=d.length===1&&d[0]===e?[]:BC(n,e,d,r,i[s]),e=d[d.length-1]}return i.length=s,i}function Uz(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,d=0;for(;e<t;e+=r){const g=n[e]-s,b=n[e+1]-a;i+=d*g-o*b,o=g,d=b}return i/2}function zz(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=Uz(n,e,o,r),e=o}return i}function hee(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=zz(n,e,o,r),e=o[o.length-1]}return i}class OC extends $g{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new OC(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(K8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),L8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return Uz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return I0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Ux(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new OC(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Lx(this.flatCoordinates,0,e,this.stride),this.changed()}}function jz(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function x2(n,e,t,r,i,s,a){let o,d;const g=(t-e)/r;if(g===1)o=e;else if(g===2)o=e,d=i;else if(g!==0){let b=n[e],E=n[e+1],S=0;const B=[0];for(let j=e+r;j<t;j+=r){const Y=n[j],q=n[j+1];S+=Math.sqrt((Y-b)*(Y-b)+(q-E)*(q-E)),B.push(S),b=Y,E=q}const k=i*S,z=DX(B,k);z<0?(d=(k-B[-z-2])/(B[-z-1]-B[-z-2]),o=e+(-z-2)*r):o=e+z*r}a=a>1?a:2,s=s||new Array(a);for(let b=0;b<a;++b)s[b]=o===void 0?NaN:d===void 0?n[o+b]:Vh(n[o+b],n[o+r+b],d);return s}function rB(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,d=t/r;for(;o<d;){const S=o+d>>1;i<n[(S+1)*r-1]?d=S:o=S+1}const g=n[o*r-1];if(i==g)return n.slice((o-1)*r,(o-1)*r+r);const b=n[(o+1)*r-1],E=(i-g)/(b-g);a=[];for(let S=0;S<r-1;++S)a.push(Vh(n[(o-1)*r+S],n[o*r+S],E));return a.push(i),a}function fee(n,e,t,r,i,s,a){if(a)return rB(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let d=0,g=t.length;d<g;++d){const b=t[d];if(e!=b){if(i<n[e+r-1])return null;if(i<=n[b-1])return rB(n,e,b,r,i,!1);e=b}}return null}function pee(n,e,t,r,i){return!Sz(i,function(a){return!Sg(n,e,t,r,a[0],a[1])})}function Sg(n,e,t,r,i,s){let a=0,o=n[t-r],d=n[t-r+1];for(;e<t;e+=r){const g=n[e],b=n[e+1];d<=s?b>s&&(g-o)*(s-d)-(i-o)*(b-d)>0&&a++:b<=s&&(g-o)*(s-d)-(i-o)*(b-d)<0&&a--,o=g,d=b}return a!==0}function j8(n,e,t,r,i,s){if(t.length===0||!Sg(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(Sg(n,t[a-1],t[a],r,i,s))return!1;return!0}function mee(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const d=t[a];if(j8(n,e,d,r,i,s))return!0;e=d[d.length-1]}return!1}function zx(n,e,t,r,i){const s=Mz(nf(),n,e,t,r);return Ru(i,s)?mp(i,s)||s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:jz(n,e,t,r,function(a,o){return xJ(i,a,o)}):!1}function gee(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(zx(n,e,t[s],r,i))return!0;e=t[s]}return!1}function Nz(n,e,t,r,i){return!!(zx(n,e,t,r,i)||Sg(n,e,t,r,i[0],i[1])||Sg(n,e,t,r,i[0],i[3])||Sg(n,e,t,r,i[2],i[1])||Sg(n,e,t,r,i[2],i[3]))}function Wz(n,e,t,r,i){if(!Nz(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(pee(n,t[s-1],t[s],r,i)&&!zx(n,t[s-1],t[s],r,i))return!1;return!0}function yee(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(Wz(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function Gz(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const d=n[o],g=n[o+1];a+=Math.sqrt((d-i)*(d-i)+(g-s)*(g-s)),i=d,s=g}return a}class zg extends $g{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){om(this.flatCoordinates,e),this.changed()}clone(){const e=new zg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(K8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),L8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return jz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,rB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return I0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return x2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Gz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Ux(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new zg(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return zx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Lx(this.flatCoordinates,0,e,this.stride),this.changed()}}class IC extends $g{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let d=0,g=i.length;d<g;++d){const b=i[d];om(s,b.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){om(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new IC(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F8(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),U8(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,fee(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return BC(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new zg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=t[a],g=new zg(e.slice(s,d),r);i.push(g),s=d}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const d=i[a],g=x2(t,r,d,s,.5);om(e,g),r=d}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=Lz(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new IC(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return gee(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=o_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class jg extends $g{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new jg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=Tg(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let d=0;d<o;++d)r[d]=s[d];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return wz(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return M8(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lee(this.flatCoordinates,0,e,this.stride),this.changed()}}class s_ extends $g{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){om(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new s_(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<qg(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,d=s.length;o<d;o+=a){const g=Tg(e,t,s[o],s[o+1]);if(g<i){i=g;for(let b=0;b<a;++b)r[b]=s[o+b];r.length=a}}return i}getCoordinates(){return I0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new jg(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new jg(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(M8(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Lx(this.flatCoordinates,0,e,this.stride),this.changed()}}function N8(n,e,t,r,i,s,a){let o,d,g,b,E,S,B;const k=i[s+1],z=[];for(let q=0,ie=t.length;q<ie;++q){const J=t[q];for(b=n[J-r],S=n[J-r+1],o=e;o<J;o+=r)E=n[o],B=n[o+1],(k<=S&&B<=k||S<=k&&k<=B)&&(g=(k-S)/(B-S)*(E-b)+b,z.push(g)),b=E,S=B}let j=NaN,Y=-1/0;for(z.sort(qm),b=z[0],o=1,d=z.length;o<d;++o){E=z[o];const q=Math.abs(E-b);q>Y&&(g=(b+E)/2,j8(n,e,t,r,g,k)&&(j=g,Y=q)),b=E}return isNaN(j)&&(j=i[s]),a?(a.push(j,k,Y),a):[j,k,Y]}function Qz(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const d=t[a];s=N8(n,e,d,r,i,2*a,s),e=d[d.length-1]}return s}function vee(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function W8(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],d=n[e+1];i+=(o-s)*(d+a),s=o,a=d}return i===0?void 0:i>0}function G8(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],d=W8(n,e,o,r);if(s===0){if(i&&d||!i&&!d)return!1}else if(i&&!d||!i&&d)return!1;e=o}return!0}function qz(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!G8(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function w2(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],d=W8(n,e,o,r);(s===0?i&&d||!i&&!d:i&&!d||!i&&d)&&vee(n,e,o,r),e=o}return e}function iB(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=w2(n,e,t[s],r,i);return e}function Yz(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const d=e[a],g=W8(n,r,d,2);if(s===void 0&&(s=g),g===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=d}return t}class Jm extends $g{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?om(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Jm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F8(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),U8(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return j8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return zz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),w2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,BC(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Kf(this.getExtent());this.flatInteriorPoint_=N8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new jg(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new OC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const d=r[a],g=new OC(t.slice(s,d),e);i.push(g),s=d}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;G8(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=w2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=z8(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Jm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return Wz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=o_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function N9(n){if(Yg(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Jm(s,"XY",[s.length])}function $z(n,e,t,r){const i=[];let s=nf();for(let a=0,o=t.length;a<o;++a){const d=t[a];s=S8(n,e,d[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=d[d.length-1]}return i}class kC extends $g{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,d=i.length;o<d;++o){const g=i[o],b=s.length,E=g.getEnds();for(let S=0,B=E.length;S<B;++S)E[S]+=b;om(s,g.getFlatCoordinates()),a.push(E)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;om(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new kC(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<qg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uee(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Aee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return mee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return hee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),iB(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,nB(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=$z(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Qz(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new s_(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;qz(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=iB(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=dee(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new kC(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new Jm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const d=r[a].slice(),g=d[d.length-1];if(s!==0)for(let E=0,S=d.length;E<S;++E)d[E]-=s;const b=new Jm(t.slice(s,g),e,d);i.push(b),s=g}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return yee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=Fz(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const W9=wh();class Ad{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?wz(this.flatCoordinates_):S8(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Kf(this.getExtent());this.flatInteriorPoints_=N8(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Yz(this.flatCoordinates_,this.ends_),t=$z(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Qz(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=x2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=x2(e,t,a,2,.5);om(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Sa(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=Jl(r)/Jl(t);lm(W9,r[0],r[3],i,-i,0,0,0),L0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,W9,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Ad(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=az((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=Ux(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=Lz(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=z8(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new Ad(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Ad.prototype.getFlatCoordinates=Ad.prototype.getOrientedFlatCoordinates;class k0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new k0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Hh{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=G9,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Hh({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=G9,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Cee(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ia(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let $4=null;function Vz(n,e){if(!$4){const t=new Gm({color:"rgba(255,255,255,0.4)"}),r=new k0({color:"#3399CC",width:1.25});$4=[new Hh({image:new n_({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return $4}function G9(n){return n.getGeometry()}const _ee="#333";class jx{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=cd(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Gm({color:_ee}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new jx({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=cd(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const wr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},_h={ADD:"add",REMOVE:"remove"},Q9={LENGTH:"length"};class ib extends _p{constructor(e,t,r){super(e),this.element=t,this.index=r}}class nm extends bp{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Q9.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new ib(_h.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new ib(_h.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new ib(_h.REMOVE,i,e)),this.dispatchEvent(new ib(_h.ADD,t,e))}updateLength_(){this.set(Q9.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const Pf={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Da={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Hz extends bp{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Da.OPACITY]=e.opacity!==void 0?e.opacity:1,ia(typeof t[Da.OPACITY]=="number","Layer opacity must be a number"),t[Da.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Da.Z_INDEX]=e.zIndex,t[Da.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Da.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Da.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Da.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Du(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return yo()}getLayerStatesArray(e){return yo()}getExtent(){return this.get(Da.EXTENT)}getMaxResolution(){return this.get(Da.MAX_RESOLUTION)}getMinResolution(){return this.get(Da.MIN_RESOLUTION)}getMinZoom(){return this.get(Da.MIN_ZOOM)}getMaxZoom(){return this.get(Da.MAX_ZOOM)}getOpacity(){return this.get(Da.OPACITY)}getSourceState(){return yo()}getVisible(){return this.get(Da.VISIBLE)}getZIndex(){return this.get(Da.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Da.EXTENT,e)}setMaxResolution(e){this.set(Da.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Da.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Da.MAX_ZOOM,e)}setMinZoom(e){this.set(Da.MIN_ZOOM,e)}setOpacity(e){ia(typeof e=="number","Layer opacity must be a number"),this.set(Da.OPACITY,e)}setVisible(e){this.set(Da.VISIBLE,e)}setZIndex(e){this.set(Da.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Xl={ANIMATING:0,INTERACTING:1},ap={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Zz=42,Q8=256;function q9(n,e,t){return function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const d=e?0:s[0]*i,g=e?0:s[1]*i,b=o?o[0]:0,E=o?o[1]:0;let S=n[0]+d/2+b,B=n[2]-d/2+b,k=n[1]+g/2+E,z=n[3]-g/2+E;S>B&&(S=(B+S)/2,B=S),k>z&&(k=(z+k)/2,z=k);let j=Du(r[0],S,B),Y=Du(r[1],k,z);if(a&&t&&i){const q=30*i;j+=-q*Math.log(1+Math.max(0,S-r[0])/q)+q*Math.log(1+Math.max(0,r[0]-B)/q),Y+=-q*Math.log(1+Math.max(0,k-r[1])/q)+q*Math.log(1+Math.max(0,r[1]-z)/q)}return[j,Y]}}function bee(n){return n}function q8(n,e,t,r){const i=ms(e)/t[0],s=Jl(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function Y8(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Du(r,t/2,e*2)}function xee(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,a,o){if(i!==void 0){const d=n[0],g=n[n.length-1],b=t?q8(d,t,a,r):d;if(o)return e?Y8(i,b,g):Du(i,g,b);const E=Math.min(b,i),S=Math.floor(Mx(n,E,s));return n[S]>b&&S<n.length-1?n[S+1]:n[S]}}}function wee(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(a,o,d,g){if(a!==void 0){const b=i?q8(e,i,d,s):e;if(g)return r?Y8(a,b,t):Du(a,t,b);const E=1e-9,S=Math.ceil(Math.log(e/b)/Math.log(n)-E),B=-o*(.5-E)+.5,k=Math.min(b,a),z=Math.floor(Math.log(e/k)/Math.log(n)+B),j=Math.max(S,z),Y=e/Math.pow(n,j);return Du(Y,t,b)}}}function Y9(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,a,o,d){if(s!==void 0){const g=r?q8(n,r,o,i):n;return!t||!d?Du(s,e,g):Y8(s,g,e)}}}function $8(n){if(n!==void 0)return 0}function $9(n){if(n!==void 0)return n}function Mee(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function See(n){const e=K0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}function Xz(n){return Math.pow(n,3)}function qy(n){return 1-Xz(1-n)}function Eee(n){return 3*n*n-2*n*n*n}function Bee(n){return n}const V4=0;class hp extends bp{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=R8(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Rz(),e.center&&(e.center=Um(e.center,this.projection_)),e.extent&&(e.extent=tm(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in ap)delete t[o];this.setProperties(t,!0);const r=Iee(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=Oee(e),s=r.constraint,a=kee(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Um(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Um(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const b=arguments[i];b.center&&this.setCenterInternal(b.center),b.zoom!==void 0?this.setZoom(b.zoom):b.resolution&&this.setResolution(b.resolution),b.rotation!==void 0&&this.setRotation(b.rotation)}if(i===t){r&&ob(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,d=this.targetRotation_;const g=[];for(;i<t;++i){const b=arguments[i],E={start:s,complete:!1,anchor:b.anchor,duration:b.duration!==void 0?b.duration:1e3,easing:b.easing||Eee,callback:r};if(b.center&&(E.sourceCenter=a,E.targetCenter=b.center.slice(),a=E.targetCenter),b.zoom!==void 0?(E.sourceResolution=o,E.targetResolution=this.getResolutionForZoom(b.zoom),o=E.targetResolution):b.resolution&&(E.sourceResolution=o,E.targetResolution=b.resolution,o=E.targetResolution),b.rotation!==void 0){E.sourceRotation=d;const S=Pg(b.rotation-d+Math.PI,2*Math.PI)-Math.PI;E.targetRotation=d+S,d=E.targetRotation}Tee(E)?E.complete=!0:s+=E.duration,g.push(E)}this.animations_.push(g),this.setHint(Xl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Xl.ANIMATING]>0}getInteracting(){return this.hints_[Xl.INTERACTING]>0}cancelAnimations(){this.setHint(Xl.ANIMATING,-this.hints_[Xl.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&ob(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const d=i[a];if(d.complete)continue;const g=e-d.start;let b=d.duration>0?g/d.duration:1;b>=1?(d.complete=!0,b=1):s=!1;const E=d.easing(b);if(d.sourceCenter){const S=d.sourceCenter[0],B=d.sourceCenter[1],k=d.targetCenter[0],z=d.targetCenter[1];this.nextCenter_=d.targetCenter;const j=S+E*(k-S),Y=B+E*(z-B);this.targetCenter_=[j,Y]}if(d.sourceResolution&&d.targetResolution){const S=E===1?d.targetResolution:d.sourceResolution+E*(d.targetResolution-d.sourceResolution);if(d.anchor){const B=this.getViewportSize_(this.getRotation()),k=this.constraints_.resolution(S,0,B,!0);this.targetCenter_=this.calculateCenterZoom(k,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=S,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const S=E===1?Pg(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+E*(d.targetRotation-d.sourceRotation);if(d.anchor){const B=this.constraints_.rotation(S,!0);this.targetCenter_=this.calculateCenterRotate(B,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=S}if(this.applyTargetState_(!0),t=!0,!d.complete)break}if(s){this.animations_[r]=null,this.setHint(Xl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&ob(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],O8(r,e-this.getRotation()),PJ(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&tB(e,this.getProjection())}getCenterInternal(){return this.get(ap.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return D8(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ia(t,"The view center is not defined");const r=this.getResolution();ia(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return ia(i!==void 0,"The view rotation is not defined"),y2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ap.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(tm(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=ms(e)/t[0],i=Jl(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(ap.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(a){return Math.log(r/a)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=H4(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=Mx(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=Du(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,Du(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(ia(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ia(!Yg(e),"Cannot fit empty extent provided as `geometry`");const i=tm(e,this.getProjection());r=N9(i)}else if(e.getType()==="Circle"){const i=tm(e.getExtent(),this.getProjection());r=N9(i),r.rotate(this.getRotation(),Kf(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,d=1/0,g=-1/0,b=-1/0;for(let E=0,S=s.length;E<S;E+=a){const B=s[E]*r-s[E+1]*i,k=s[E]*i+s[E+1]*r;o=Math.min(o,B),d=Math.min(d,k),g=Math.max(g,B),b=Math.max(b,k)}return[o,d,g,b]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let d=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);d=isNaN(d)?a:Math.max(d,a),d=this.getConstrainedResolution(d,s?0:1);const g=this.getRotation(),b=Math.sin(g),E=Math.cos(g),S=Kf(o);S[0]+=(i[1]-i[3])/2*d,S[1]+=(i[0]-i[2])/2*d;const B=S[0]*E-S[1]*b,k=S[1]*E+S[0]*b,z=this.getConstrainedCenter([B,k],d),j=t.callback?t.callback:Oy;t.duration!==void 0?this.animateInternal({resolution:d,center:z,duration:t.duration,easing:t.easing},j):(this.targetResolution_=d,this.targetCenter_=z,this.applyTargetState_(!1,!0),ob(j,!0))}centerOn(e,t,r){this.centerOnInternal(Um(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(H4(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),d=H4(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-d[0],e[1]-d[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=tB(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Um(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Um(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Um(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(ap.ROTATION)!==i&&this.set(ap.ROTATION,i),this.get(ap.RESOLUTION)!==a&&(this.set(ap.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(ap.CENTER)||!v2(this.get(ap.CENTER),o))&&this.set(ap.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),d=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=d,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!v2(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:d,resolution:o,duration:e,easing:qy,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Xl.INTERACTING,1)}endInteraction(e,t,r){r=r&&Um(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Xl.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function ob(n,e){setTimeout(function(){n(e)},0)}function Oee(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return q9(n.extent,n.constrainOnlyCenter,t)}const e=R8(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,q9(t,!1,!1)}return bee}function Iee(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:V4,o=n.maxZoom!==void 0?n.maxZoom:28;const d=n.zoomFactor!==void 0?n.zoomFactor:2,g=n.multiWorld!==void 0?n.multiWorld:!1,b=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,E=n.showFullExtent!==void 0?n.showFullExtent:!1,S=R8(n.projection,"EPSG:3857"),B=S.getExtent();let k=n.constrainOnlyCenter,z=n.extent;if(!g&&!z&&S.isGlobal()&&(k=!1,z=B),n.resolutions!==void 0){const j=n.resolutions;t=j[a],r=j[o]!==void 0?j[o]:j[j.length-1],n.constrainResolution?e=xee(j,b,!k&&z,E):e=Y9(t,r,b,!k&&z,E)}else{const Y=(B?Math.max(ms(B),Jl(B)):360*W0.degrees/S.getMetersPerUnit())/Q8/Math.pow(2,V4),q=Y/Math.pow(2,28-V4);t=n.maxResolution,t!==void 0?a=0:t=Y/Math.pow(d,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(d,o):r=Y/Math.pow(d,o):r=q),o=a+Math.floor(Math.log(t/r)/Math.log(d)),r=t/Math.pow(d,o-a),n.constrainResolution?e=wee(d,t,r,b,!k&&z,E):e=Y9(t,r,b,!k&&z,E)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:d}}function kee(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?See():t===!1?$9:typeof t=="number"?Mee(t):$9}return $8}function Tee(n){return!(n.sourceCenter&&n.targetCenter&&!v2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function H4(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,d=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,d+=(t[1]-e[1]/2)*r,a=-a;const g=o*s-d*a,b=d*s+o*a;return[g,b]}class Yy extends Hz{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Da.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Da.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Fa(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ps(e,oo.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof hp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return V8(i,t.viewState)&&(!s||Ru(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const r=e instanceof hp?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Da.MAP,e)}getMapInternal(){return this.get(Da.MAP)}setMap(e){this.mapPrecomposeKey_&&(Fa(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Fa(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ps(e,Pf.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ps(this,oo.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);ia(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Da.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function V8(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}function Jz(n,e,t=0,r=n.length-1,i=Pee){for(;r>t;){if(r-t>600){const d=r-t+1,g=e-t+1,b=Math.log(d),E=.5*Math.exp(2*b/3),S=.5*Math.sqrt(b*E*(d-E)/d)*(g-d/2<0?-1:1),B=Math.max(t,Math.floor(e-g*E/d+S)),k=Math.min(r,Math.floor(e+(d-g)*E/d+S));Jz(n,e,B,k,i)}const s=n[e];let a=t,o=r;for(bv(n,t,e),i(n[r],s)>0&&bv(n,t,r);a<o;){for(bv(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?bv(n,t,o):(o++,bv(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function bv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Pee(n,e){return n<e?-1:n>e?1:0}let ej=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!ab(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],d=t.leaf?i(o):o;ab(e,d)&&(t.leaf?r.push(o):X4(e,d)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!ab(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(ab(e,a)){if(t.leaf||X4(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=V1([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,d,g;for(;r||s.length;){if(r||(r=s.pop(),d=s[s.length-1],o=a.pop(),g=!0),r.leaf){const b=Ree(e,r.children,t);if(b!==-1)return r.children.splice(b,1),s.push(r),this._condense(s),this}!g&&!r.leaf&&X4(r,i)?(s.push(r),a.push(o),o=0,d=r,r=r.children[0]):d?(o++,r=d.children[o],g=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=V1(e.slice(t,r+1)),m1(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=V1([]),o.leaf=!1,o.height=i;const d=Math.ceil(s/a),g=d*Math.ceil(Math.sqrt(a));V9(e,t,r,g,this.compareMinX);for(let b=t;b<=r;b+=g){const E=Math.min(b+g-1,r);V9(e,b,E,d,this.compareMinY);for(let S=b;S<=E;S+=d){const B=Math.min(S+d-1,E);o.children.push(this._build(e,S,B,i-1))}}return m1(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let d=0;d<t.children.length;d++){const g=t.children[d],b=Z4(g),E=Fee(e,g)-b;E<a?(a=E,s=b<s?b:s,o=g):E===a&&b<s&&(s=b,o=g)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),Fv(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=V1(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,m1(r,this.toBBox),m1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=V1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,m1(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const d=Kv(e,0,o,this.toBBox),g=Kv(e,o,r,this.toBBox),b=Lee(d,g),E=Z4(d)+Z4(g);b<s?(s=b,i=o,a=E<a?E:a):b===s&&E<a&&(a=E,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:Dee,s=e.leaf?this.compareMinY:Kee,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=Kv(e,0,t,s),o=Kv(e,r-t,r,s);let d=sb(a)+sb(o);for(let g=t;g<r-t;g++){const b=e.children[g];Fv(a,e.leaf?s(b):b),d+=sb(a)}for(let g=r-t-1;g>=t;g--){const b=e.children[g];Fv(o,e.leaf?s(b):b),d+=sb(o)}return d}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Fv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():m1(e[t],this.toBBox)}};function Ree(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function m1(n,e){Kv(n,0,n.children.length,e,n)}function Kv(n,e,t,r,i){i||(i=V1(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Fv(i,n.leaf?r(a):a)}return i}function Fv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Dee(n,e){return n.minX-e.minX}function Kee(n,e){return n.minY-e.minY}function Z4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function sb(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Fee(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Lee(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function X4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function ab(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function V1(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function V9(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;Jz(n,a,e,t,i),s.push(e,a,a,t)}}let Hg=0;const qd=1<<Hg++,js=1<<Hg++,bh=1<<Hg++,fp=1<<Hg++,Ng=1<<Hg++,Lv=1<<Hg++,lb=Math.pow(2,Hg)-1,H8={[qd]:"boolean",[js]:"number",[bh]:"string",[fp]:"color",[Ng]:"number[]",[Lv]:"size"},Uee=Object.keys(H8).map(Number).sort(qm);function zee(n){return n in H8}function Uv(n){const e=[];for(const t of Uee)zv(n,t)&&e.push(H8[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function zv(n,e){return(n&e)===e}function y0(n,e){return n===e}class WA{constructor(e,t){if(!zee(e))throw new Error(`literal expressions must have a specific type, got ${Uv(e)}`);this.type=e,this.value=t}}class jee{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function tj(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Lc(n,e,t){switch(typeof n){case"boolean":{if(y0(e,bh))return new WA(bh,n?"true":"false");if(!zv(e,qd))throw new Error(`got a boolean, but expected ${Uv(e)}`);return new WA(qd,n)}case"number":{if(y0(e,Lv))return new WA(Lv,cd(n));if(y0(e,qd))return new WA(qd,!!n);if(y0(e,bh))return new WA(bh,n.toString());if(!zv(e,js))throw new Error(`got a number, but expected ${Uv(e)}`);return new WA(js,n)}case"string":{if(y0(e,fp))return new WA(fp,g8(n));if(y0(e,qd))return new WA(qd,!!n);if(!zv(e,bh))throw new Error(`got a string, but expected ${Uv(e)}`);return new WA(bh,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Xee(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(y0(e,Lv)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new WA(Lv,n)}if(y0(e,fp)){if(n.length===3)return new WA(fp,[...n,1]);if(n.length===4)return new WA(fp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!zv(e,Ng))throw new Error(`got an array of numbers, but expected ${Uv(e)}`);return new WA(Ng,n)}const Qn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Nee={[Qn.Get]:mo(ts(1,1/0),H9),[Qn.Var]:mo(ts(1,1),Wee),[Qn.Has]:mo(ts(1,1/0),H9),[Qn.Id]:mo(Gee,g1),[Qn.Concat]:mo(ts(2,1/0),ma(bh)),[Qn.GeometryType]:mo(Qee,g1),[Qn.LineMetric]:mo(g1),[Qn.Resolution]:mo(g1),[Qn.Zoom]:mo(g1),[Qn.Time]:mo(g1),[Qn.Any]:mo(ts(2,1/0),ma(qd)),[Qn.All]:mo(ts(2,1/0),ma(qd)),[Qn.Not]:mo(ts(1,1),ma(qd)),[Qn.Equal]:mo(ts(2,2),ma(lb)),[Qn.NotEqual]:mo(ts(2,2),ma(lb)),[Qn.GreaterThan]:mo(ts(2,2),ma(js)),[Qn.GreaterThanOrEqualTo]:mo(ts(2,2),ma(js)),[Qn.LessThan]:mo(ts(2,2),ma(js)),[Qn.LessThanOrEqualTo]:mo(ts(2,2),ma(js)),[Qn.Multiply]:mo(ts(2,1/0),Z9),[Qn.Coalesce]:mo(ts(2,1/0),Z9),[Qn.Divide]:mo(ts(2,2),ma(js)),[Qn.Add]:mo(ts(2,1/0),ma(js)),[Qn.Subtract]:mo(ts(2,2),ma(js)),[Qn.Clamp]:mo(ts(3,3),ma(js)),[Qn.Mod]:mo(ts(2,2),ma(js)),[Qn.Pow]:mo(ts(2,2),ma(js)),[Qn.Abs]:mo(ts(1,1),ma(js)),[Qn.Floor]:mo(ts(1,1),ma(js)),[Qn.Ceil]:mo(ts(1,1),ma(js)),[Qn.Round]:mo(ts(1,1),ma(js)),[Qn.Sin]:mo(ts(1,1),ma(js)),[Qn.Cos]:mo(ts(1,1),ma(js)),[Qn.Atan]:mo(ts(1,2),ma(js)),[Qn.Sqrt]:mo(ts(1,1),ma(js)),[Qn.Match]:mo(ts(4,1/0),X9,Yee),[Qn.Between]:mo(ts(3,3),ma(js)),[Qn.Interpolate]:mo(ts(6,1/0),X9,$ee),[Qn.Case]:mo(ts(3,1/0),qee,Vee),[Qn.In]:mo(ts(2,2),Hee),[Qn.Number]:mo(ts(1,1/0),ma(lb)),[Qn.String]:mo(ts(1,1/0),ma(lb)),[Qn.Array]:mo(ts(1,1/0),ma(js)),[Qn.Color]:mo(ts(1,4),ma(js)),[Qn.Band]:mo(ts(1,3),ma(js)),[Qn.Palette]:mo(ts(2,2),Zee),[Qn.ToString]:mo(ts(1,1),ma(qd|js|bh|fp))};function H9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new WA(js,a);break}case"string":{i[s]=new WA(bh,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function Wee(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new WA(bh,r)]}function Gee(n,e,t){t.featureId=!0}function Qee(n,e,t){t.geometryType=!0}function g1(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function ts(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function Z9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=Lc(n[s+1],e,t);i[s]=a}return i}function ma(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=Lc(e[a+1],n,r);s[a]=o}return s}}function qee(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function X9(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function Yee(n,e,t){const r=n.length-1,i=bh|js|qd,s=Lc(n[1],i,t),a=Lc(n[n.length-1],e,t),o=new Array(r-2);for(let d=0;d<r-2;d+=2){try{const g=Lc(n[d+2],s.type,t);o[d]=g}catch(g){throw new Error(`failed to parse argument ${d+1} of match expression: ${g.message}`)}try{const g=Lc(n[d+3],a.type,t);o[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+2} of match expression: ${g.message}`)}}return[s,...o,a]}function $ee(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const d=r[1];if(typeof d!="number"||d<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(d)} instead`);i=d;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new WA(js,i);let a;try{a=Lc(n[2],js,t)}catch(d){throw new Error(`failed to parse argument 1 in interpolate expression: ${d.message}`)}const o=new Array(n.length-3);for(let d=0;d<o.length;d+=2){try{const g=Lc(n[d+3],js,t);o[d]=g}catch(g){throw new Error(`failed to parse argument ${d+2} for interpolate expression: ${g.message}`)}try{const g=Lc(n[d+4],e,t);o[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+3} for interpolate expression: ${g.message}`)}}return[s,a,...o]}function Vee(n,e,t){const r=Lc(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=Lc(n[s+1],qd,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=Lc(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function Hee(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=bh}else i=js;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const d=Lc(r[o],i,t);s[o]=d}catch(d){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${d.message}`)}return[Lc(n[1],i,t),...s]}function Zee(n,e,t){let r;try{r=Lc(n[1],js,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=Lc(i[a],fp,t)}catch(d){throw new Error(`failed to parse color at index ${a} in palette expression: ${d.message}`)}if(!(o instanceof WA))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function mo(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new jee(t,i,...s)}}function Xee(n,e,t){const r=n[0],i=Nee[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function nj(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return nj(n.getGeometries()[0]);default:return""}}function rj(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function e0(n,e,t){const r=Lc(n,e,t);return vp(r)}function vp(n,e){if(n instanceof WA){if(n.type===fp&&typeof n.value=="string"){const r=g8(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Qn.Number:case Qn.String:case Qn.Coalesce:return Jee(n);case Qn.Get:case Qn.Var:case Qn.Has:return ete(n);case Qn.Id:return r=>r.featureId;case Qn.GeometryType:return r=>r.geometryType;case Qn.Concat:{const r=n.args.map(i=>vp(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Qn.Resolution:return r=>r.resolution;case Qn.Any:case Qn.All:case Qn.Between:case Qn.In:case Qn.Not:return nte(n);case Qn.Equal:case Qn.NotEqual:case Qn.LessThan:case Qn.LessThanOrEqualTo:case Qn.GreaterThan:case Qn.GreaterThanOrEqualTo:return tte(n);case Qn.Multiply:case Qn.Divide:case Qn.Add:case Qn.Subtract:case Qn.Clamp:case Qn.Mod:case Qn.Pow:case Qn.Abs:case Qn.Floor:case Qn.Ceil:case Qn.Round:case Qn.Sin:case Qn.Cos:case Qn.Atan:case Qn.Sqrt:return rte(n);case Qn.Case:return ite(n);case Qn.Match:return ote(n);case Qn.Interpolate:return ste(n);case Qn.ToString:return ate(n);default:throw new Error(`Unsupported operator ${t}`)}}function Jee(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=vp(n.args[s]);switch(t){case Qn.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Qn.Number:case Qn.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function ete(n,e){const r=n.args[0].value;switch(n.operator){case Qn.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,d=s.length;o<d;++o){const b=s[o].value;a=a[b]}return a};case Qn.Var:return i=>i.variables[r];case Qn.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,d=s.length;o<d;++o){const b=s[o].value;if(!a||!Object.hasOwn(a,b))return!1;a=a[b]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function tte(n,e){const t=n.operator,r=vp(n.args[0]),i=vp(n.args[1]);switch(t){case Qn.Equal:return s=>r(s)===i(s);case Qn.NotEqual:return s=>r(s)!==i(s);case Qn.LessThan:return s=>r(s)<i(s);case Qn.LessThanOrEqualTo:return s=>r(s)<=i(s);case Qn.GreaterThan:return s=>r(s)>i(s);case Qn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function nte(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=vp(n.args[s]);switch(t){case Qn.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case Qn.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case Qn.Between:return s=>{const a=i[0](s),o=i[1](s),d=i[2](s);return a>=o&&a<=d};case Qn.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case Qn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function rte(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=vp(n.args[s]);switch(t){case Qn.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case Qn.Divide:return s=>i[0](s)/i[1](s);case Qn.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case Qn.Subtract:return s=>i[0](s)-i[1](s);case Qn.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const d=i[2](s);return a>d?d:a};case Qn.Mod:return s=>i[0](s)%i[1](s);case Qn.Pow:return s=>Math.pow(i[0](s),i[1](s));case Qn.Abs:return s=>Math.abs(i[0](s));case Qn.Floor:return s=>Math.floor(i[0](s));case Qn.Ceil:return s=>Math.ceil(i[0](s));case Qn.Round:return s=>Math.round(i[0](s));case Qn.Sin:return s=>Math.sin(i[0](s));case Qn.Cos:return s=>Math.cos(i[0](s));case Qn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Qn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function ite(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=vp(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function ote(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=vp(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function ste(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=vp(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,d;for(let g=2;g<t;g+=2){const b=r[g](i);let E=r[g+1](i);const S=Array.isArray(E);if(S&&(E=QX(E)),b>=a)return g===2?E:S?lte(s,a,o,d,b,E):jv(s,a,o,d,b,E);o=b,d=E}return d}}function ate(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=vp(n.args[s]);switch(t){case Qn.ToString:return s=>{const a=i[0](s);return n.args[0].type===fp?y8(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function jv(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,d=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+d*(s-r)}function lte(n,e,t,r,i,s){if(i-t===0)return r;const o=C9(r),d=C9(s);let g=d[2]-o[2];g>180?g-=360:g<-180&&(g+=360);const b=[jv(n,e,t,o[0],i,d[0]),jv(n,e,t,o[1],i,d[1]),o[2]+jv(n,e,t,0,i,g),jv(n,e,t,r[3],i,s[3])];return uz(qX(b))}function ute(n){return!0}function Ate(n){const e=tj(),t=cte(n,e),r=rj();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=nj(i.getGeometry())),t(r)}}function J9(n){const e=tj(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=oB(n[a],e);const i=rj(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const g=a.getId();g!==void 0?i.featureId=g:i.featureId=null}let d=0;for(let g=0;g<t;++g){const b=r[g](i);b&&(s[d]=b,d+=1)}return s.length=d,s}}function cte(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?e0(s.filter,qd,e):ute;let o;if(Array.isArray(s.style)){const d=s.style.length;o=new Array(d);for(let g=0;g<d;++g)o[g]=oB(s.style[g],e)}else o=[oB(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const d=r[o].filter;if(d(i)&&!(n[o].else&&a)){a=!0;for(const g of r[o].styles){const b=g(i);b&&s.push(b)}}}return s}}function oB(n,e){const t=TC(n,"",e),r=PC(n,"",e),i=dte(n,e),s=hte(n,e),a=xh(n,"z-index",e);if(!t&&!r&&!i&&!s&&!j0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Hh;return function(d){let g=!0;if(t){const b=t(d);b&&(g=!1),o.setFill(b)}if(r){const b=r(d);b&&(g=!1),o.setStroke(b)}if(i){const b=i(d);b&&(g=!1),o.setText(b)}if(s){const b=s(d);b&&(g=!1),o.setImage(b)}return a&&o.setZIndex(a(d)),g?null:o}}function TC(n,e,t){let r;if(e+"fill-pattern-src"in n)r=gte(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=Z8(n,e+"fill-color",t)}if(!r)return null;const i=new Gm;return function(s){const a=r(s);return a===m8?null:(i.setColor(a),i)}}function PC(n,e,t){const r=xh(n,e+"stroke-width",t),i=Z8(n,e+"stroke-color",t);if(!r&&!i)return null;const s=jm(n,e+"stroke-line-cap",t),a=jm(n,e+"stroke-line-join",t),o=ij(n,e+"stroke-line-dash",t),d=xh(n,e+"stroke-line-dash-offset",t),g=xh(n,e+"stroke-miter-limit",t),b=new k0;return function(E){if(i){const S=i(E);if(S===m8)return null;b.setColor(S)}if(r&&b.setWidth(r(E)),s){const S=s(E);if(S!=="butt"&&S!=="round"&&S!=="square")throw new Error("Expected butt, round, or square line cap");b.setLineCap(S)}if(a){const S=a(E);if(S!=="bevel"&&S!=="round"&&S!=="miter")throw new Error("Expected bevel, round, or miter line join");b.setLineJoin(S)}return o&&b.setLineDash(o(E)),d&&b.setLineDashOffset(d(E)),g&&b.setMiterLimit(g(E)),b}}function dte(n,e){const t="text-",r=jm(n,t+"value",e);if(!r)return null;const i=TC(n,t,e),s=TC(n,t+"background-",e),a=PC(n,t,e),o=PC(n,t+"background-",e),d=jm(n,t+"font",e),g=xh(n,t+"max-angle",e),b=xh(n,t+"offset-x",e),E=xh(n,t+"offset-y",e),S=py(n,t+"overflow",e),B=jm(n,t+"placement",e),k=xh(n,t+"repeat",e),z=Nx(n,t+"scale",e),j=py(n,t+"rotate-with-view",e),Y=xh(n,t+"rotation",e),q=jm(n,t+"align",e),ie=jm(n,t+"justify",e),J=jm(n,t+"baseline",e),$=py(n,t+"keep-upright",e),te=ij(n,t+"padding",e),W=Wx(n,t+"declutter-mode"),oe=new jx({declutterMode:W});return function(fe){if(oe.setText(r(fe)),i&&oe.setFill(i(fe)),s&&oe.setBackgroundFill(s(fe)),a&&oe.setStroke(a(fe)),o&&oe.setBackgroundStroke(o(fe)),d&&oe.setFont(d(fe)),g&&oe.setMaxAngle(g(fe)),b&&oe.setOffsetX(b(fe)),E&&oe.setOffsetY(E(fe)),S&&oe.setOverflow(S(fe)),B){const he=B(fe);if(he!=="point"&&he!=="line")throw new Error("Expected point or line for text-placement");oe.setPlacement(he)}if(k&&oe.setRepeat(k(fe)),z&&oe.setScale(z(fe)),j&&oe.setRotateWithView(j(fe)),Y&&oe.setRotation(Y(fe)),q){const he=q(fe);if(he!=="left"&&he!=="center"&&he!=="right"&&he!=="end"&&he!=="start")throw new Error("Expected left, right, center, start, or end for text-align");oe.setTextAlign(he)}if(ie){const he=ie(fe);if(he!=="left"&&he!=="right"&&he!=="center")throw new Error("Expected left, right, or center for text-justify");oe.setJustify(he)}if(J){const he=J(fe);if(he!=="bottom"&&he!=="top"&&he!=="middle"&&he!=="alphabetic"&&he!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");oe.setTextBaseline(he)}return te&&oe.setPadding(te(fe)),$&&oe.setKeepUpright($(fe)),oe}}function hte(n,e){return"icon-src"in n?fte(n,e):"shape-points"in n?pte(n,e):"circle-radius"in n?mte(n,e):null}function fte(n,e){const t="icon-",r=t+"src",i=oj(n[r],r),s=M2(n,t+"anchor",e),a=Nx(n,t+"scale",e),o=xh(n,t+"opacity",e),d=M2(n,t+"displacement",e),g=xh(n,t+"rotation",e),b=py(n,t+"rotate-with-view",e),E=tk(n,t+"anchor-origin"),S=nk(n,t+"anchor-x-units"),B=nk(n,t+"anchor-y-units"),k=_te(n,t+"color"),z=vte(n,t+"cross-origin"),j=Cte(n,t+"offset"),Y=tk(n,t+"offset-origin"),q=S2(n,t+"width"),ie=S2(n,t+"height"),J=yte(n,t+"size"),$=Wx(n,t+"declutter-mode"),te=new g2({src:i,anchorOrigin:E,anchorXUnits:S,anchorYUnits:B,color:k,crossOrigin:z,offset:j,offsetOrigin:Y,height:ie,width:q,size:J,declutterMode:$});return function(W){return o&&te.setOpacity(o(W)),d&&te.setDisplacement(d(W)),g&&te.setRotation(g(W)),b&&te.setRotateWithView(b(W)),a&&te.setScale(a(W)),s&&te.setAnchor(s(W)),te}}function pte(n,e){const t="shape-",r=t+"points",i=t+"radius",s=sB(n[r],r),a=sB(n[i],i),o=TC(n,t,e),d=PC(n,t,e),g=Nx(n,t+"scale",e),b=M2(n,t+"displacement",e),E=xh(n,t+"rotation",e),S=py(n,t+"rotate-with-view",e),B=S2(n,t+"radius2"),k=S2(n,t+"angle"),z=Wx(n,t+"declutter-mode"),j=new Ox({points:s,radius:a,radius2:B,angle:k,declutterMode:z});return function(Y){return o&&j.setFill(o(Y)),d&&j.setStroke(d(Y)),b&&j.setDisplacement(b(Y)),E&&j.setRotation(E(Y)),S&&j.setRotateWithView(S(Y)),g&&j.setScale(g(Y)),j}}function mte(n,e){const t="circle-",r=TC(n,t,e),i=PC(n,t,e),s=xh(n,t+"radius",e),a=Nx(n,t+"scale",e),o=M2(n,t+"displacement",e),d=xh(n,t+"rotation",e),g=py(n,t+"rotate-with-view",e),b=Wx(n,t+"declutter-mode"),E=new n_({radius:5,declutterMode:b});return function(S){return s&&E.setRadius(s(S)),r&&E.setFill(r(S)),i&&E.setStroke(i(S)),o&&E.setDisplacement(o(S)),d&&E.setRotation(d(S)),g&&E.setRotateWithView(g(S)),a&&E.setScale(a(S)),E}}function xh(n,e,t){if(!(e in n))return;const r=e0(n[e],js,t);return function(i){return sB(r(i),e)}}function jm(n,e,t){if(!(e in n))return null;const r=e0(n[e],bh,t);return function(i){return oj(r(i),e)}}function gte(n,e,t){const r=jm(n,e+"pattern-src",t),i=ek(n,e+"pattern-offset",t),s=ek(n,e+"pattern-size",t),a=Z8(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function py(n,e,t){if(!(e in n))return null;const r=e0(n[e],qd,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function Z8(n,e,t){if(!(e in n))return null;const r=e0(n[e],fp,t);return function(i){return sj(r(i),e)}}function ij(n,e,t){if(!(e in n))return null;const r=e0(n[e],Ng,t);return function(i){return a_(r(i),e)}}function M2(n,e,t){if(!(e in n))return null;const r=e0(n[e],Ng,t);return function(i){const s=a_(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function ek(n,e,t){if(!(e in n))return null;const r=e0(n[e],Ng,t);return function(i){return aj(r(i),e)}}function Nx(n,e,t){if(!(e in n))return null;const r=e0(n[e],Ng|js,t);return function(i){return bte(r(i),e)}}function S2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function yte(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return cd(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function vte(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function tk(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function nk(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Cte(n,e){const t=n[e];if(t!==void 0)return a_(t,e)}function Wx(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function _te(n,e){const t=n[e];if(t!==void 0)return sj(t,e)}function a_(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function oj(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function sB(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function sj(n,e){if(typeof n=="string")return n;const t=a_(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function aj(n,e){const t=a_(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function bte(n,e){return typeof n=="number"?n:aj(n,e)}const rk={RENDER_ORDER:"renderOrder"};class X8 extends Yy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(rk.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new ej(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(rk.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?Vz:e;const t=xte(e);this.styleFunction_=e===null?void 0:Cee(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function xte(n){if(n===void 0)return Vz;if(!n)return null;if(typeof n=="function"||n instanceof Hh)return n;if(!Array.isArray(n))return J9([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Hh){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof Hh))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return Ate(i)}return J9(n)}const qi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ub=[qi.FILL],T0=[qi.STROKE],Eg=[qi.BEGIN_PATH],ik=[qi.CLOSE_PATH];class lj{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class l_ extends lj{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,d=e.length;o<d;o+=t)i[0]=e[o],i[1]=e[o+1],Ug(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let d=o.length;const g=this.getBufferedMaxExtent();a&&(t+=i);let b=e[t],E=e[t+1];const S=this.tmpCoordinate_;let B=!0,k,z,j;for(k=t+i;k<r;k+=i)S[0]=e[k],S[1]=e[k+1],j=V6(g,S),j!==z?(B&&(o[d++]=b,o[d++]=E,B=!1),o[d++]=S[0],o[d++]=S[1]):j===hc.INTERSECTING?(o[d++]=S[0],o[d++]=S[1],B=!1):B=!0,b=S[0],E=S[1],z=j;return(s&&B||k===t+i)&&(o[d++]=b,o[d++]=E),d}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const d=r[a],g=this.appendFlatLineCoordinates(e,t,d,i,!1,!1);s.push(g),t=d}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),d=this.coordinates.length;let g,b,E,S,B;switch(a){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),S=[];const k=e.getEndss();B=0;for(let z=0,j=k.length;z<j;++z){const Y=[];B=this.drawCustomCoordinates_(g,B,k[z],o,Y),S.push(Y)}this.instructions.push([qi.CUSTOM,d,S,e,r,nB,s]),this.hitDetectionInstructions.push([qi.CUSTOM,d,S,e,i||r,nB,s]);break;case"Polygon":case"MultiLineString":E=[],g=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),B=this.drawCustomCoordinates_(g,0,e.getEnds(),o,E),this.instructions.push([qi.CUSTOM,d,E,e,r,BC,s]),this.hitDetectionInstructions.push([qi.CUSTOM,d,E,e,i||r,BC,s]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),b=this.appendFlatLineCoordinates(g,0,g.length,o,!1,!1),this.instructions.push([qi.CUSTOM,d,b,e,r,I0,s]),this.hitDetectionInstructions.push([qi.CUSTOM,d,b,e,i||r,I0,s]);break;case"MultiPoint":g=e.getFlatCoordinates(),b=this.appendFlatPointCoordinates(g,o),b>d&&(this.instructions.push([qi.CUSTOM,d,b,e,r,I0,s]),this.hitDetectionInstructions.push([qi.CUSTOM,d,b,e,i||r,I0,s]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),b=this.coordinates.length,this.instructions.push([qi.CUSTOM,d,b,e,r,void 0,s]),this.hitDetectionInstructions.push([qi.CUSTOM,d,b,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[qi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[qi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==qi.END_GEOMETRY?a=t:s==qi.BEGIN_GEOMETRY&&(i[2]=t,FX(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(e,t){const r=this.state;if(e){const i=e.getColor();r.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,r.fillStyle=em(i||Ch)}else r.fillStyle=void 0;if(t){const i=t.getColor();r.strokeStyle=em(i||bC);const s=t.getLineCap();r.lineCap=s!==void 0?s:Py;const a=t.getLineDash();r.lineDash=a?a.slice():Ym;const o=t.getLineDashOffset();r.lineDashOffset=o||$m;const d=t.getLineJoin();r.lineJoin=d!==void 0?d:Ry;const g=t.getWidth();r.lineWidth=g!==void 0?g:wC;const b=t.getMiterLimit();r.miterLimit=b!==void 0?b:_C,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const t=e.fillStyle,r=[qi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[qi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,d=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!G0(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=d||e.currentMiterLimit!=g)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=d,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[qi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=xz(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;F0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class wte extends l_{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Ug(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([qi.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let d=0,g=i.length;d<g;d+=e.getStride())(!this.maxExtent||Ug(this.maxExtent,i.slice(d,d+2)))&&s.push(i[d],i[d+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([qi.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Mte extends l_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[qi.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ym,$m],Eg);const o=e.getFlatCoordinates(),d=e.getStride();this.drawFlatCoordinates_(o,0,o.length,d),this.hitDetectionInstructions.push(T0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ym,$m],Eg);const o=e.getEnds(),d=e.getFlatCoordinates(),g=e.getStride();let b=0;for(let E=0,S=o.length;E<S;++E)b=this.drawFlatCoordinates_(d,b,o[E],g);this.hitDetectionInstructions.push(T0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(T0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(T0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Eg)}}class ok extends l_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,d=r.length;this.instructions.push(Eg),this.hitDetectionInstructions.push(Eg);for(let g=0;g<d;++g){const b=r[g],E=this.coordinates.length,S=this.appendFlatLineCoordinates(e,t,b,i,!0,!o),B=[qi.MOVE_TO_LINE_TO,E,S];this.instructions.push(B),this.hitDetectionInstructions.push(B),o&&(this.instructions.push(ik),this.hitDetectionInstructions.push(ik)),t=b}return a&&(this.instructions.push(ub),this.hitDetectionInstructions.push(ub)),o&&(this.instructions.push(T0),this.hitDetectionInstructions.push(T0)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,Ch]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ym,$m]);const o=e.getFlatCoordinates(),d=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,d,!1,!1);const b=[qi.CIRCLE,g];this.instructions.push(Eg,b),this.hitDetectionInstructions.push(Eg,b),i.fillStyle!==void 0&&(this.instructions.push(ub),this.hitDetectionInstructions.push(ub)),i.strokeStyle!==void 0&&(this.instructions.push(T0),this.hitDetectionInstructions.push(T0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,Ch]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ym,$m]);const o=e.getEnds(),d=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(d,0,o,g),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,Ch]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ym,$m]);const o=e.getEndss(),d=e.getOrientedFlatCoordinates(),g=e.getStride();let b=0;for(let E=0,S=o.length;E<S;++E)b=this.drawFlatCoordinatess_(d,b,o[E],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=gg(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function Ste(n,e,t,r,i){const s=[];let a=t,o=0,d=e.slice(t,2);for(;o<n&&a+i<r;){const[g,b]=d.slice(-2),E=e[a+i],S=e[a+i+1],B=Math.sqrt((E-g)*(E-g)+(S-b)*(S-b));if(o+=B,o>=n){const k=(n-o+B)/B,z=Vh(g,E,k),j=Vh(b,S,k);d.push(z,j),s.push(d),d=[z,j],o==n&&(a+=i),o=0}else if(o<n)d.push(e[a+i],e[a+i+1]),a+=i;else{const k=B-o,z=Vh(g,E,k/B),j=Vh(b,S,k/B);d.push(z,j),s.push(d),d=[z,j],o=0,a+=i}}return o>0&&s.push(d),s}function Ete(n,e,t,r,i){let s=t,a=t,o=0,d=0,g=t,b,E,S,B,k,z,j,Y,q,ie;for(E=t;E<r;E+=i){const J=e[E],$=e[E+1];k!==void 0&&(q=J-k,ie=$-z,B=Math.sqrt(q*q+ie*ie),j!==void 0&&(d+=S,b=Math.acos((j*q+Y*ie)/(S*B)),b>n&&(d>o&&(o=d,s=g,a=E),d=0,g=E-i)),S=B,j=q,Y=ie),k=J,z=$}return d+=B,d>o?[g,E]:[s,a]}const E2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Bte extends l_{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ch]={fillStyle:Ch},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let d=o.length;const g=e.getType();let b=null,E=e.getStride();if(a.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!Ru(this.maxExtent,e.getExtent()))return;let S;if(b=e.getFlatCoordinates(),g=="LineString")S=[b.length];else if(g=="MultiLineString")S=e.getEnds();else if(g=="Polygon")S=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const j=e.getEndss();S=[];for(let Y=0,q=j.length;Y<q;++Y)S.push(j[Y][0])}this.beginGeometry(e,t,r);const B=a.repeat,k=B?void 0:a.textAlign;let z=0;for(let j=0,Y=S.length;j<Y;++j){let q;B?q=Ste(B*this.resolution,b,z,S[j],E):q=[b.slice(z,S[j])];for(let ie=0,J=q.length;ie<J;++ie){const $=q[ie];let te=0,W=$.length;if(k==null){const fe=Ete(a.maxAngle,$,0,$.length,2);te=fe[0],W=fe[1]}for(let fe=te;fe<W;fe+=E)o.push($[fe],$[fe+1]);const oe=o.length;z=S[j],this.drawChars_(d,oe),d=oe}}this.endGeometry(t)}else{let S=a.overflow?null:[];switch(g){case"Point":case"MultiPoint":b=e.getFlatCoordinates();break;case"LineString":b=e.getFlatMidpoint();break;case"Circle":b=e.getCenter();break;case"MultiLineString":b=e.getFlatMidpoints(),E=2;break;case"Polygon":b=e.getFlatInteriorPoint(),a.overflow||S.push(b[2]/this.resolution),E=3;break;case"MultiPolygon":const q=e.getFlatInteriorPoints();b=[];for(let ie=0,J=q.length;ie<J;ie+=3)a.overflow||S.push(q[ie+2]/this.resolution),b.push(q[ie],q[ie+1]);if(b.length===0)return;E=2;break}const B=this.appendFlatPointCoordinates(b,E);if(B===d)return;if(S&&(B-d)/2!==b.length/E){let q=d/2;S=S.filter((ie,J)=>{const $=o[(q+J)*2]===b[J*E]&&o[(q+J)*2+1]===b[J*E+1];return $||--q,$})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,r);let k=a.padding;if(k!=wg&&(a.scale[0]<0||a.scale[1]<0)){let q=a.padding[0],ie=a.padding[1],J=a.padding[2],$=a.padding[3];a.scale[0]<0&&(ie=-ie,$=-$),a.scale[1]<0&&(q=-q,J=-J),k=[q,ie,J,$]}const z=this.pixelRatio;this.instructions.push([qi.DRAW_IMAGE,d,B,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,k==wg?wg:k.map(function(q){return q*z}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]);const j=1/z,Y=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=Ch,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,d,B,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[j,j],NaN,this.declutterMode_,this.declutterImageWithText_,k,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ch:this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]),a.backgroundFill&&(this.state.fillStyle=Y,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||xC,justify:t.justify,textBaseline:t.textBaseline||p2,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const d=this.pixelRatio,g=E2[i.textBaseline],b=this.textOffsetY_*d,E=this.text_,S=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([qi.DRAW_CHARS,e,t,g,i.overflow,o,i.maxAngle,d,b,s,S*d,E,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([qi.DRAW_CHARS,e,t,g,i.overflow,o&&Ch,i.maxAngle,d,b,s,S*d,E,a,1/d,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=em(a.getColor()||Ch)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const z=o.getLineDash(),j=o.getLineDashOffset(),Y=o.getWidth(),q=o.getMiterLimit();s.lineCap=o.getLineCap()||Py,s.lineDash=z?z.slice():Ym,s.lineDashOffset=j===void 0?$m:j,s.lineJoin=o.getLineJoin()||Ry,s.lineWidth=Y===void 0?wC:Y,s.miterLimit=q===void 0?_C:q,s.strokeStyle=em(o.getColor()||bC)}r=this.textState_;const d=e.getFont()||gz;yz(d);const g=e.getScaleArray();r.overflow=e.getOverflow(),r.font=d,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||p2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||wg,r.scale=g===void 0?[1,1]:g;const b=e.getOffsetX(),E=e.getOffsetY(),S=e.getRotateWithView(),B=e.getKeepUpright(),k=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=b===void 0?0:b,this.textOffsetY_=E===void 0?0:E,this.textRotateWithView_=S===void 0?!1:S,this.textKeepUpright_=B===void 0?!0:B,this.textRotation_=k===void 0?0:k,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Uo(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Uo(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Ote={Circle:ok,Default:l_,Image:wte,LineString:Mte,Polygon:ok,Text:Bte};class uj{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=Ote[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}const Ite=5;class kte extends t_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Ite}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return yo()}getData(e){return null}prepareFrame(e){return yo()}renderFrame(e,t){return yo()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===fi.LOADED||t.getState()===fi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=fi.LOADED&&t!=fi.ERROR&&e.addEventListener(oo.CHANGE,this.boundHandleImageChange_),t==fi.IDLE&&(e.load(),t=e.getState()),t==fi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Aj extends _p{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}class J8{constructor(){Tn(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(h2(),{get:(e,t)=>{if(typeof h2()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const sk=[];let H1=null;function Tte(){H1=nu(1,1,void 0,{willReadFrequently:!0})}class eO extends kte{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=wh(),this.pixelTransform=wh(),this.inversePixelTransform=wh(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){H1||Tte(),H1.clearRect(0,0,1,1);let i;try{H1.drawImage(e,t,r,1,1,0,0,1,1),i=H1.getImageData(0,0,1,1).data}catch{return H1=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&G0(ky(e.style.backgroundColor),ky(r)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(a=o.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=nu();const d=a.canvas;s.appendChild(d),o=d.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=yp(r),s=Px(r),a=Tx(r),o=kx(r);_A(t.coordinateToPixelTransform,i),_A(t.coordinateToPixelTransform,s),_A(t.coordinateToPixelTransform,a),_A(t.coordinateToPixelTransform,o);const d=this.inversePixelTransform;_A(d,i),_A(d,s),_A(d,a),_A(d,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(ms(r)/i*a),d=Math.round(Jl(r)/i*a);lm(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-d/2),bz(this.inversePixelTransform,this.pixelTransform);const g=gJ(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const b=this.context.canvas;b.width!=o||b.height!=d?(b.width=o,b.height=d):this.context.clearRect(0,0,o,d),g!==b.style.transform&&(b.style.transform=g)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new Aj(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Pf.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Pf.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new J8),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Pf.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Pf.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const d=s/2,g=a/2,b=i/t,E=-b,S=-e[0]+o,B=-e[1];return lm(this.tempTransform,d,g,b,E,-r,S,B)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function Pte(n,e,t,r,i,s,a,o,d,g,b,E,S=!0){let B=n[e],k=n[e+1],z=0,j=0,Y=0,q=0;function ie(){z=B,j=k,e+=r,B=n[e],k=n[e+1],q+=Y,Y=Math.sqrt((B-z)*(B-z)+(k-j)*(k-j))}do ie();while(e<t-r&&q+Y<s);let J=Y===0?0:(s-q)/Y;const $=Vh(z,B,J),te=Vh(j,k,J),W=e-r,oe=q,fe=s+o*d(g,i,b);for(;e<t-r&&q+Y<fe;)ie();J=Y===0?0:(fe-q)/Y;const he=Vh(z,B,J),Se=Vh(j,k,J);let pe=!1;if(S)if(E){const Qe=[$,te,he,Se];Dz(Qe,0,4,2,E,Qe,Qe),pe=Qe[0]>Qe[2]}else pe=$>he;const we=Math.PI,Ke=[],ge=W+r===e;e=W,Y=0,q=oe,B=n[e],k=n[e+1];let st;if(ge){ie(),st=Math.atan2(k-j,B-z),pe&&(st+=st>0?-we:we);const Qe=(he+$)/2,Ze=(Se+te)/2;return Ke[0]=[Qe,Ze,(fe-s)/2,st,i],Ke}i=i.replace(/\n/g," ");for(let Qe=0,Ze=i.length;Qe<Ze;){ie();let We=Math.atan2(k-j,B-z);if(pe&&(We+=We>0?-we:we),st!==void 0){let ft=We-st;if(ft+=ft>we?-2*we:ft<-we?2*we:0,Math.abs(ft)>a)return null}st=We;const Ce=Qe;let Pe=0;for(;Qe<Ze;++Qe){const ft=pe?Ze-Qe-1:Qe,Dt=o*d(g,i[ft],b);if(e+r<t&&q+Y<s+Pe+Dt/2)break;Pe+=Dt}if(Qe===Ce)continue;const it=pe?i.substring(Ze-Ce,Ze-Qe):i.substring(Ce,Qe);J=Y===0?0:(s+Pe/2-q)/Y;const vt=Vh(z,B,J),_t=Vh(j,k,J);Ke.push([vt,_t,Pe/2,We,it]),s+=Pe}return Ke}const y1=nf(),v0=[],Km=[],Fm=[],C0=[];function ak(n){return n[3].declutterBox}const lk=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function J4(n,e){return e==="start"?e=lk.test(n)?"right":"left":e==="end"&&(e=lk.test(n)?"left":"right"),E2[e]}function Rte(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class Dte{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=wh(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new J8:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,d=this.textStates[t],g=this.pixelRatio,b=[d.scale[0]*g,d.scale[1]*g],E=d.justify?E2[d.justify]:J4(Array.isArray(e)?e[0]:e,d.textAlign||xC),S=i&&a.lineWidth?a.lineWidth:0,B=Array.isArray(e)?e:String(e).split(`
`).reduce(Rte,[]),{width:k,height:z,widths:j,heights:Y,lineWidths:q}=AJ(d,B),ie=k+S,J=[],$=(ie+2)*b[0],te=(z+S)*b[1],W={width:$<0?Math.floor($):Math.ceil($),height:te<0?Math.floor(te):Math.ceil(te),contextInstructions:J};(b[0]!=1||b[1]!=1)&&J.push("scale",b),i&&(J.push("strokeStyle",a.strokeStyle),J.push("lineWidth",S),J.push("lineCap",a.lineCap),J.push("lineJoin",a.lineJoin),J.push("miterLimit",a.miterLimit),J.push("setLineDash",[a.lineDash]),J.push("lineDashOffset",a.lineDashOffset)),r&&J.push("fillStyle",o.fillStyle),J.push("textBaseline","middle"),J.push("textAlign","center");const oe=.5-E;let fe=E*ie+oe*S;const he=[],Se=[];let pe=0,we=0,Ke=0,ge=0,st;for(let Qe=0,Ze=B.length;Qe<Ze;Qe+=2){const We=B[Qe];if(We===`
`){we+=pe,pe=0,fe=E*ie+oe*S,++ge;continue}const Ce=B[Qe+1]||d.font;Ce!==st&&(i&&he.push("font",Ce),r&&Se.push("font",Ce),st=Ce),pe=Math.max(pe,Y[Ke]);const Pe=[We,fe+oe*j[Ke]+E*(j[Ke]-q[ge]),.5*(S+pe)+we];fe+=j[Ke],i&&he.push("strokeText",Pe),r&&Se.push("fillText",Pe),++Ke}return Array.prototype.push.apply(J,he),Array.prototype.push.apply(J,Se),this.labels_[s]=W,W}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,d,g,b,E,S,B,k,z,j){o*=S[0],d*=S[1];let Y=r-o,q=i-d;const ie=s+g>e?e-g:s,J=a+b>t?t-b:a,$=k[3]+ie*S[0]+k[1],te=k[0]+J*S[1]+k[2],W=Y-k[3],oe=q-k[0];(z||E!==0)&&(v0[0]=W,C0[0]=W,v0[1]=oe,Km[1]=oe,Km[0]=W+$,Fm[0]=Km[0],Fm[1]=oe+te,C0[1]=Fm[1]);let fe;return E!==0?(fe=lm(wh(),r,i,1,1,E,-r,-i),_A(fe,v0),_A(fe,Km),_A(fe,Fm),_A(fe,C0),Zm(Math.min(v0[0],Km[0],Fm[0],C0[0]),Math.min(v0[1],Km[1],Fm[1],C0[1]),Math.max(v0[0],Km[0],Fm[0],C0[0]),Math.max(v0[1],Km[1],Fm[1],C0[1]),y1)):Zm(Math.min(W,W+$),Math.min(oe,oe+te),Math.max(W,W+$),Math.max(oe,oe+te),y1),B&&(Y=Math.round(Y),q=Math.round(q)),{drawImageX:Y,drawImageY:q,drawImageW:ie,drawImageH:J,originX:g,originY:b,declutterBox:{minX:y1[0],minY:y1[1],maxX:y1[2],maxY:y1[3],value:j},canvasTransform:fe,scale:S}}replayImageOrLabel_(e,t,r,i,s,a,o){const d=!!(a||o),g=i.declutterBox,b=o?o[2]*i.scale[0]/2:0;return g.minX-b<=t[0]&&g.maxX+b>=0&&g.minY-b<=t[1]&&g.maxY+b>=0&&(d&&this.replayTextBackground_(e,v0,Km,Fm,C0,a,o),cJ(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=_A(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],d=this.pixelRatio,g=J4(Array.isArray(e)?e[0]:e,s.textAlign||xC),b=E2[s.textBaseline||p2],E=o&&o.lineWidth?o.lineWidth:0,S=a.width/d-2*s.scale[0],B=g*S+2*(.5-g)*E,k=b*a.height/d+2*(.5-b)*E;return{label:a,anchorX:B,anchorY:k}}execute_(e,t,r,i,s,a,o,d){const g=this.zIndexContext_;let b;this.pixelCoordinates_&&G0(r,this.renderedTransform_)?b=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),b=L0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),fJ(this.renderedTransform_,r));let E=0;const S=i.length;let B=0,k,z,j,Y,q,ie,J,$,te,W,oe,fe,he,Se=0,pe=0,we=null,Ke=null;const ge=this.coordinateCache_,st=this.viewRotation_,Qe=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Ze={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:st},We=this.instructions!=i||this.overlaps?0:200;let Ce,Pe,it,vt;for(;E<S;){const _t=i[E];switch(_t[0]){case qi.BEGIN_GEOMETRY:Ce=_t[1],vt=_t[3],Ce.getGeometry()?o!==void 0&&!Ru(o,vt.getExtent())?E=_t[2]+1:++E:E=_t[2],g&&(g.zIndex=_t[4]);break;case qi.BEGIN_PATH:Se>We&&(this.fill_(e),Se=0),pe>We&&(e.stroke(),pe=0),!Se&&!pe&&(e.beginPath(),q=NaN,ie=NaN),++E;break;case qi.CIRCLE:B=_t[1];const Dt=b[B],Tt=b[B+1],Ue=b[B+2],Re=b[B+3],Be=Ue-Dt,nt=Re-Tt,Ct=Math.sqrt(Be*Be+nt*nt);e.moveTo(Dt+Ct,Tt),e.arc(Dt,Tt,Ct,0,2*Math.PI,!0),++E;break;case qi.CLOSE_PATH:e.closePath(),++E;break;case qi.CUSTOM:B=_t[1],k=_t[2];const pt=_t[3],zt=_t[4],tn=_t[5];Ze.geometry=pt,Ze.feature=Ce,E in ge||(ge[E]=[]);const Lt=ge[E];tn?tn(b,B,k,2,Lt):(Lt[0]=b[B],Lt[1]=b[B+1],Lt.length=2),g&&(g.zIndex=_t[6]),zt(Lt,Ze),++E;break;case qi.DRAW_IMAGE:B=_t[1],k=_t[2],te=_t[3],z=_t[4],j=_t[5];let gn=_t[6];const Nn=_t[7],rn=_t[8],or=_t[9],Kn=_t[10];let pn=_t[11];const Xn=_t[12];let Mr=_t[13];Y=_t[14]||"declutter";const Yn=_t[15];if(!te&&_t.length>=20){W=_t[19],oe=_t[20],fe=_t[21],he=_t[22];const wt=this.drawLabelWithPointPlacement_(W,oe,fe,he);te=wt.label,_t[3]=te;const Dn=_t[23];z=(wt.anchorX-Dn)*this.pixelRatio,_t[4]=z;const On=_t[24];j=(wt.anchorY-On)*this.pixelRatio,_t[5]=j,gn=te.height,_t[6]=gn,Mr=te.width,_t[13]=Mr}let er;_t.length>25&&(er=_t[25]);let qe,ce,me;_t.length>17?(qe=_t[16],ce=_t[17],me=_t[18]):(qe=wg,ce=!1,me=!1),Kn&&Qe?pn+=st:!Kn&&!Qe&&(pn-=st);let tt=0;for(;B<k;B+=2){if(er&&er[tt++]<Mr/this.pixelRatio)continue;const wt=this.calculateImageOrLabelDimensions_(te.width,te.height,b[B],b[B+1],Mr,gn,z,j,rn,or,pn,Xn,s,qe,ce||me,Ce),Dn=[e,t,te,wt,Nn,ce?we:null,me?Ke:null];if(d){let On,pr,Er;if(Yn){const Ln=k-B;if(!Yn[Ln]){Yn[Ln]={args:Dn,declutterMode:Y};continue}const Ir=Yn[Ln];On=Ir.args,pr=Ir.declutterMode,delete Yn[Ln],Er=ak(On)}let sn,Wn;if(On&&(pr!=="declutter"||!d.collides(Er))&&(sn=!0),(Y!=="declutter"||!d.collides(wt.declutterBox))&&(Wn=!0),pr==="declutter"&&Y==="declutter"){const Ln=sn&&Wn;sn=Ln,Wn=Ln}sn&&(pr!=="none"&&d.insert(Er),this.replayImageOrLabel_.apply(this,On)),Wn&&(Y!=="none"&&d.insert(wt.declutterBox),this.replayImageOrLabel_.apply(this,Dn))}else this.replayImageOrLabel_.apply(this,Dn)}++E;break;case qi.DRAW_CHARS:const Et=_t[1],$t=_t[2],on=_t[3],rr=_t[4];he=_t[5];const Oe=_t[6],se=_t[7],_e=_t[8];fe=_t[9];const p=_t[10];W=_t[11],oe=_t[12];const Ne=[_t[13],_t[13]];Y=_t[14]||"declutter";const $e=_t[15],rt=this.textStates[oe],dt=rt.font,ct=[rt.scale[0]*se,rt.scale[1]*se];let Qt;dt in this.widths_?Qt=this.widths_[dt]:(Qt={},this.widths_[dt]=Qt);const Vt=Gz(b,Et,$t,2),Nt=Math.abs(ct[0])*S9(dt,W,Qt);if(rr||Nt<=Vt){const wt=this.textStates[oe].textAlign,Dn=(Vt-Nt)*J4(W,wt),On=Pte(b,Et,$t,2,W,Dn,Oe,Math.abs(ct[0]),S9,dt,Qt,Qe?0:this.viewRotation_,$e);e:if(On){const pr=[];let Er,sn,Wn,Ln,Ir;if(fe)for(Er=0,sn=On.length;Er<sn;++Er){Ir=On[Er],Wn=Ir[4],Ln=this.createLabel(Wn,oe,"",fe),z=Ir[2]+(ct[0]<0?-p:p),j=on*Ln.height+(.5-on)*2*p*ct[1]/ct[0]-_e;const Br=this.calculateImageOrLabelDimensions_(Ln.width,Ln.height,Ir[0],Ir[1],Ln.width,Ln.height,z,j,0,0,Ir[3],Ne,!1,wg,!1,Ce);if(d&&Y==="declutter"&&d.collides(Br.declutterBox))break e;pr.push([e,t,Ln,Br,1,null,null])}if(he)for(Er=0,sn=On.length;Er<sn;++Er){Ir=On[Er],Wn=Ir[4],Ln=this.createLabel(Wn,oe,he,""),z=Ir[2],j=on*Ln.height-_e;const Br=this.calculateImageOrLabelDimensions_(Ln.width,Ln.height,Ir[0],Ir[1],Ln.width,Ln.height,z,j,0,0,Ir[3],Ne,!1,wg,!1,Ce);if(d&&Y==="declutter"&&d.collides(Br.declutterBox))break e;pr.push([e,t,Ln,Br,1,null,null])}d&&Y!=="none"&&d.load(pr.map(ak));for(let Br=0,Kr=pr.length;Br<Kr;++Br)this.replayImageOrLabel_.apply(this,pr[Br])}}++E;break;case qi.END_GEOMETRY:if(a!==void 0){Ce=_t[1];const wt=a(Ce,vt,Y);if(wt)return wt}++E;break;case qi.FILL:We?Se++:this.fill_(e),++E;break;case qi.MOVE_TO_LINE_TO:for(B=_t[1],k=_t[2],Pe=b[B],it=b[B+1],e.moveTo(Pe,it),q=Pe+.5|0,ie=it+.5|0,B+=2;B<k;B+=2)Pe=b[B],it=b[B+1],J=Pe+.5|0,$=it+.5|0,(B==k-2||J!==q||$!==ie)&&(e.lineTo(Pe,it),q=J,ie=$);++E;break;case qi.SET_FILL_STYLE:we=_t,this.alignAndScaleFill_=_t[2],Se&&(this.fill_(e),Se=0,pe&&(e.stroke(),pe=0)),e.fillStyle=_t[1],++E;break;case qi.SET_STROKE_STYLE:Ke=_t,pe&&(e.stroke(),pe=0),this.setStrokeStyle_(e,_t),++E;break;case qi.STROKE:We?pe++:e.stroke(),++E;break;default:++E;break}}Se&&this.fill_(e),pe&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const ry=["Polygon","Circle","LineString","Image","Text","Default"],B2=["Image","Text"],Kte=ry.filter(n=>!B2.includes(n));class cj{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=wh(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new Dte(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,d=lm(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=nu(o,o,void 0,{willReadFrequently:!0}));const b=this.hitDetectionContext_;b.canvas.width!==o||b.canvas.height!==o?(b.canvas.width=o,b.canvas.height=o):g||b.clearRect(0,0,o,o);let E;this.renderBuffer_!==void 0&&(E=nf(),rC(E,e),F0(E,t*(this.renderBuffer_+i),E));const S=Fte(i);let B;function k($,te,W){const oe=b.getImageData(0,0,o,o).data;for(let fe=0,he=S.length;fe<he;fe++)if(oe[S[fe]]>0){if(!a||W==="none"||B!=="Image"&&B!=="Text"||a.includes($)){const Se=(S[fe]-3)/4,pe=i-Se%o,we=i-(Se/o|0),Ke=s($,te,pe*pe+we*we);if(Ke)return Ke}b.clearRect(0,0,o,o);break}}const z=Object.keys(this.executorsByZIndex_).map(Number);z.sort(qm);let j,Y,q,ie,J;for(j=z.length-1;j>=0;--j){const $=z[j].toString();for(q=this.executorsByZIndex_[$],Y=ry.length-1;Y>=0;--Y)if(B=ry[Y],ie=q[B],ie!==void 0&&(J=ie.executeHitDetection(b,d,r,k,E),J))return J}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return L0(o,0,8,2,e,o),o}isEmpty(){return j0(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(o?KX:qm),a=a||ry;const g=ry.length;for(let b=0,E=d.length;b<E;++b){const S=d[b].toString(),B=this.executorsByZIndex_[S];for(let k=0,z=a.length;k<z;++k){const j=a[k],Y=B[j];if(Y!==void 0){const q=o===null?void 0:Y.getZIndexContext(),ie=q?q.getContext():e,J=this.maxExtent_&&j!=="Image"&&j!=="Text";if(J&&(ie.save(),this.clip(ie,r)),!q||j==="Text"||j==="Image"?Y.execute(ie,t,r,i,s,o):q.pushFunction($=>Y.execute($,t,r,i,s,o)),J&&ie.restore(),q){q.offset();const $=d[b]*g+k;this.deferredZIndexContexts_[$]||(this.deferredZIndexContexts_[$]=[]),this.deferredZIndexContexts_[$].push(q)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(qm);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const e5={};function Fte(n){if(e5[n]!==void 0)return e5[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let d=r[o];d||(d=[],r[o]=d),d.push(((n+s)*e+(n+a))*4+3),s>0&&d.push(((n-s)*e+(n+a))*4+3),a>0&&(d.push(((n+s)*e+(n-a))*4+3),s>0&&d.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return e5[n]=i,i}class Lte extends lj{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?p8(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=wh()}drawImages_(e,t,r,i){if(!this.image_)return;const s=L0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,d=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=d*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let b=0,E=s.length;b<E;b+=2){const S=s[b]-this.imageAnchorX_,B=s[b+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const k=S+this.imageAnchorX_,z=B+this.imageAnchorY_;lm(o,k,z,1,1,g,-k,-z),a.save(),a.transform.apply(a,o),a.translate(k,z),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,B,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=d)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=L0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const d=s[t]+this.textOffsetX_,g=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(d-this.textOffsetX_,g-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,d,g),this.textFillState_&&a.fillText(this.text_,d,g))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=L0(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let d=o.length;s&&(d-=2);for(let g=2;g<d;g+=2)a.lineTo(o[g],o[g+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ru(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=aee(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ru(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Ru(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let d=0,g=a.length;d<g;++d)s=this.moveToLineTo_(i,s,a[d],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ru(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ru(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,d=s.length;o<d;++o){const g=s[o];i=this.drawRings_(r,i,g,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),G0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:xC;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:em(r||Ch)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),d=t.getWidth(),g=t.getMiterLimit(),b=s||Ym;this.strokeState_={lineCap:i!==void 0?i:Py,lineDash:this.pixelRatio_===1?b:b.map(E=>E*this.pixelRatio_),lineDashOffset:(a||$m)*this.pixelRatio_,lineJoin:o!==void 0?o:Ry,lineWidth:(d!==void 0?d:wC)*this.pixelRatio_,miterLimit:g!==void 0?g:_C,strokeStyle:em(r||bC)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const B=t.getColor();this.textFillState_={fillStyle:em(B||Ch)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const B=r.getColor(),k=r.getLineCap(),z=r.getLineDash(),j=r.getLineDashOffset(),Y=r.getLineJoin(),q=r.getWidth(),ie=r.getMiterLimit();this.textStrokeState_={lineCap:k!==void 0?k:Py,lineDash:z||Ym,lineDashOffset:j||$m,lineJoin:Y!==void 0?Y:Ry,lineWidth:q!==void 0?q:wC,miterLimit:ie!==void 0?ie:_C,strokeStyle:em(B||bC)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),d=e.getRotation(),g=e.getScaleArray(),b=e.getText(),E=e.getTextAlign(),S=e.getTextBaseline();this.textState_={font:i!==void 0?i:gz,textAlign:E!==void 0?E:xC,textBaseline:S!==void 0?S:p2},this.text_=b!==void 0?Array.isArray(b)?b.reduce((B,k,z)=>B+=z%2?" ":k,""):b:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const Jh=.5;function dj(n,e,t,r,i,s,a,o,d){const g=d?D8(i):i,b=n[0]*Jh,E=n[1]*Jh,S=nu(b,E);S.imageSmoothingEnabled=!1;const B=S.canvas,k=new Lte(S,Jh,i,null,a,o,d?i_(ree(),d):null),z=t.length,j=Math.floor((256*256*256-1)/z),Y={};for(let ie=1;ie<=z;++ie){const J=t[ie-1],$=J.getStyleFunction()||r;if(!$)continue;let te=$(J,s);if(!te)continue;Array.isArray(te)||(te=[te]);const oe=(ie*j).toString(16).padStart(7,"#00000");for(let fe=0,he=te.length;fe<he;++fe){const Se=te[fe],pe=Se.getGeometryFunction()(J);if(!pe||!Ru(g,pe.getExtent()))continue;const we=Se.clone(),Ke=we.getFill();Ke&&Ke.setColor(oe);const ge=we.getStroke();ge&&(ge.setColor(oe),ge.setLineDash(null)),we.setText(void 0);const st=Se.getImage();if(st){const Ce=st.getImageSize();if(!Ce)continue;const Pe=nu(Ce[0],Ce[1],void 0,{alpha:!1}),it=Pe.canvas;Pe.fillStyle=oe,Pe.fillRect(0,0,it.width,it.height),we.setImage(new g2({img:it,anchor:st.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:st.getOrigin(),opacity:1,size:st.getSize(),scale:st.getScale(),rotation:st.getRotation(),rotateWithView:st.getRotateWithView()}))}const Qe=we.getZIndex()||0;let Ze=Y[Qe];Ze||(Ze={},Y[Qe]=Ze,Ze.Polygon=[],Ze.Circle=[],Ze.LineString=[],Ze.Point=[]);const We=pe.getType();if(We==="GeometryCollection"){const Ce=pe.getGeometriesArrayRecursive();for(let Pe=0,it=Ce.length;Pe<it;++Pe){const vt=Ce[Pe];Ze[vt.getType().replace("Multi","")].push(vt,we)}}else Ze[We.replace("Multi","")].push(pe,we)}}const q=Object.keys(Y).map(Number).sort(qm);for(let ie=0,J=q.length;ie<J;++ie){const $=Y[q[ie]];for(const te in $){const W=$[te];for(let oe=0,fe=W.length;oe<fe;oe+=2){k.setStyle(W[oe+1]);for(let he=0,Se=e.length;he<Se;++he)k.setTransform(e[he]),k.drawGeometry(W[oe])}}}return S.getImageData(0,0,B.width,B.height)}function hj(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*Jh),s=Math.floor(Math.round(n[1])*Jh),a=(Du(i,0,t.width-1)+Du(s,0,t.height-1)*t.width)*4,o=t.data[a],d=t.data[a+1],b=t.data[a+2]+256*(d+256*o),E=Math.floor((256*256*256-1)/e.length);b&&b%E===0&&r.push(e[b/E-1])}return r}const Ute=.5,fj={Point:Yte,LineString:Gte,Polygon:Vte,MultiPoint:$te,MultiLineString:Qte,MultiPolygon:qte,GeometryCollection:Wte,Circle:jte};function zte(n,e){return parseInt(Uo(n),10)-parseInt(Uo(e),10)}function aB(n,e){const t=pj(n,e);return t*t}function pj(n,e){return Ute*n/e}function jte(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const d=n.getBuilder(t.getZIndex(),"Circle");d.setFillStrokeStyle(s,a),d.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(o),d.drawText(e,r)}}function O2(n,e,t,r,i,s,a,o){const d=[],g=t.getImage();if(g){let S=!0;const B=g.getImageState();B==fi.LOADED||B==fi.ERROR?S=!1:B==fi.IDLE&&g.load(),S&&d.push(g.ready())}const b=t.getFill();b&&b.loading()&&d.push(b.ready());const E=d.length>0;return E&&Promise.all(d).then(()=>i(null)),Nte(n,e,t,r,s,a,o),E}function Nte(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const d=o.simplifyTransformed(r,i);if(t.getRenderer())mj(n,d,t,e,a);else{const b=fj[d.getType()];b(n,d,t,e,a,s)}}function mj(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,d=a.length;o<d;++o)mj(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function Wte(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,d;for(o=0,d=a.length;o<d;++o){const g=fj[a[o].getType()];g(n,a[o],t,r,i,s)}}function Gte(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function Qte(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function qte(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const d=n.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(s,a),d.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(o),d.drawText(e,r,i)}}function Yte(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),d=o&&o.getText(),g=s&&a&&d?{}:void 0;if(a){if(a.getImageState()!=fi.LOADED)return;const b=n.getBuilder(t.getZIndex(),"Image");b.setImageStyle(a,g),b.drawPoint(e,r,i)}if(d){const b=n.getBuilder(t.getZIndex(),"Text");b.setTextStyle(o,g),b.drawText(e,r,i)}}function $te(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,d=t.getText(),g=d&&d.getText(),b=s&&o&&g?{}:void 0;if(o){if(a.getImageState()!=fi.LOADED)return;const E=n.getBuilder(t.getZIndex(),"Image");E.setImageStyle(a,b),E.drawMultiPoint(e,r,i)}if(g){const E=n.getBuilder(t.getZIndex(),"Text");E.setTextStyle(d,b),E.drawText(e,r,i)}}function Vte(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const d=n.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(s,a),d.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(o),d.drawText(e,r,i)}}class Hte extends eO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=nf(),this.wrappedRenderedExtent_=nf(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,d=s.projection,g=s.rotation,b=d.getExtent(),E=this.getLayer().getSource(),S=this.getLayer().getDeclutter(),B=t.pixelRatio,k=t.viewHints,z=!(k[Xl.ANIMATING]||k[Xl.INTERACTING]),j=this.context,Y=Math.round(ms(i)/o*B),q=Math.round(Jl(i)/o*B),ie=E.getWrapX()&&d.canWrapX(),J=ie?ms(b):null,$=ie?Math.ceil((i[2]-b[2])/J)+1:1;let te=ie?Math.floor((i[0]-b[0])/J):0;do{let W=this.getRenderTransform(a,o,0,B,Y,q,te*J);t.declutter&&(W=W.slice(0)),e.execute(j,[j.canvas.width,j.canvas.height],W,g,z,r===void 0?ry:r?B2:Kte,r?S&&t.declutter[S]:void 0)}while(++te<$)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=nu(this.context.canvas.width,this.context.canvas.height,sk))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,e_(this.context),sk.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(Pf.PRERENDER)||this.getLayer().hasListener(Pf.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const d=tm(r.extent);o=Ru(d,e.extent),this.clipped_=o&&!mp(d,e.extent),this.clipped_&&this.clipUnrotated(s,e,d)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,d=this.wrappedRenderedExtent_,g=this.getLayer(),b=[],E=r[0]*Jh,S=r[1]*Jh;b.push(this.getRenderTransform(i,s,a,Jh,E,S,0).slice());const B=g.getSource(),k=o.getExtent();if(B.getWrapX()&&o.canWrapX()&&!mp(k,d)){let z=d[0];const j=ms(k);let Y=0,q;for(;z<k[0];)--Y,q=j*Y,b.push(this.getRenderTransform(i,s,a,Jh,E,S,q).slice()),z+=j;for(Y=0,z=d[2];z>k[2];)++Y,q=j*Y,b.push(this.getRenderTransform(i,s,a,Jh,E,S,q).slice()),z-=j}this.hitDetectionImageData_=dj(r,b,this.renderedFeatures_,g.getStyleFunction(),d,s,a,aB(s,this.renderedPixelRatio_),null)}t(hj(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,d=this.getLayer(),g={},b=function(S,B,k){const z=Uo(S),j=g[z];if(j){if(j!==!0&&k<j.distanceSq){if(k===0)return g[z]=!0,s.splice(s.lastIndexOf(j),1),i(S,d,B);j.geometry=B,j.distanceSq=k}}else{if(k===0)return g[z]=!0,i(S,d,B);s.push(g[z]={feature:S,layer:d,geometry:B,distanceSq:k,callback:i})}},E=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,b,E?t.declutter[E].all().map(S=>S.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Xl.ANIMATING],s=e.viewHints[Xl.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=e.extent,g=e.viewState,b=g.projection,E=g.resolution,S=e.pixelRatio,B=t.getRevision(),k=t.getRenderBuffer();let z=t.getRenderOrder();z===void 0&&(z=zte);const j=g.center.slice(),Y=F0(d,k*E),q=Y.slice(),ie=[Y.slice()],J=b.getExtent();if(r.getWrapX()&&b.canWrapX()&&!mp(J,e.extent)){const Ke=ms(J),ge=Math.max(ms(Y)/2,Ke);Y[0]=J[0]-ge,Y[2]=J[2]+ge,I8(j,b);const st=Ez(ie[0],b);st[0]<J[0]&&st[2]<J[2]?ie.push([st[0]+Ke,st[1],st[2]+Ke,st[3]]):st[0]>J[0]&&st[2]>J[2]&&ie.push([st[0]-Ke,st[1],st[2]-Ke,st[3]])}if(this.ready&&this.renderedResolution_==E&&this.renderedRevision_==B&&this.renderedRenderOrder_==z&&this.renderedFrameDeclutter_===!!e.declutter&&mp(this.wrappedRenderedExtent_,Y))return G0(this.renderedExtent_,q)||(this.hitDetectionImageData_=null,this.renderedExtent_=q),this.renderedCenter_=j,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const $=new uj(pj(E,S),Y,E,S);let te;for(let Ke=0,ge=ie.length;Ke<ge;++Ke)r.loadFeatures(ie[Ke],E,b);const W=aB(E,S);let oe=!0;const fe=(Ke,ge)=>{let st;const Qe=Ke.getStyleFunction()||t.getStyleFunction();if(Qe&&(st=Qe(Ke,E)),st){const Ze=this.renderFeature(Ke,W,st,$,te,this.getLayer().getDeclutter(),ge);oe=oe&&!Ze}},he=D8(Y),Se=r.getFeaturesInExtent(he);z&&Se.sort(z);for(let Ke=0,ge=Se.length;Ke<ge;++Ke)fe(Se[Ke],Ke);this.renderedFeatures_=Se,this.ready=oe;const pe=$.finish(),we=new cj(Y,E,S,r.getOverlaps(),pe,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=E,this.renderedRevision_=B,this.renderedRenderOrder_=z,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=q,this.wrappedRenderedExtent_=Y,this.renderedCenter_=j,this.renderedProjection_=b,this.renderedPixelRatio_=S,this.replayGroup_=we,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let d=!1;if(Array.isArray(r))for(let g=0,b=r.length;g<b;++g)d=O2(i,e,r[g],t,this.boundHandleStyleImageChange_,s,a,o)||d;else d=O2(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return d}}class tO extends X8{constructor(e){super(e)}createRenderer(){return new Hte(this)}}class uk{constructor(e){this.rbush_=new ej(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Uo(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],d={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=d,this.items_[Uo(o)]=d}this.rbush_.load(r)}remove(e){const t=Uo(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Uo(t)],i=[r.minX,r.minY,r.maxX,r.maxY];Xm(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return j0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Zm(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class $y extends bp{constructor(e){super(),this.projection=Sa(e.projection),this.attributions_=Ak(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Ak(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Ak(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const wf={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Zte(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Xte(n,e){return[n]}let Jte=!1;function gj(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=Jte,o.onload=function(d){if(!o.status||o.status>=200&&o.status<300){const g=e.getType();try{let b;g=="text"||g=="json"?b=o.responseText:g=="xml"?b=o.responseXML||o.responseText:g=="arraybuffer"&&(b=o.response),b?s(e.readFeatures(b,{extent:t,featureProjection:i}),e.readProjection(b)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function ck(n,e){return function(t,r,i,s,a){const o=this;gj(n,e,t,r,i,function(d,g){o.addFeatures(d),s!==void 0&&s(d)},a||Oy)}}class _0 extends _p{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class Ub extends $y{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Oy,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ia(this.format_,"`format` must be set when `url` is set"),this.loader_=ck(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Zte;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new uk:null,this.loadedExtentsRtree_=new uk,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new nm(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Uo(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new _0(wf.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Ad||(this.featureChangeKeys_[e]=[Ps(t,oo.CHANGE,this.handleFeatureChange_,this),Ps(t,Ty.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof Ad){const s=this.idIndex_[i];s instanceof Ad?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(ia(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],d=Uo(o);this.addToIndex_(d,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],d=Uo(o);this.setupChangeEvents_(d,o);const g=o.getGeometry();if(g){const b=g.getExtent();t.push(b),i.push(o)}else this.nullGeometryFeatures_[d]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(wf.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new _0(wf.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(wf.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(wf.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(_h.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(_h.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Fa);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new _0(wf.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof Ad||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof Ad||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),j0(this.nullGeometryFeatures_)||om(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=B8(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const d=[-1/0,-1/0,1/0,1/0];return t=t||vC,this.featuresRtree_.forEachInExtent(d,function(g){if(t(g)){const b=g.getGeometry(),E=o;if(o=b instanceof Ad?0:b.closestPointXY(r,i,a,o),o<E){s=g;const S=Math.sqrt(o);d[0]=r-S,d[1]=i-S,d[2]=r+S,d[3]=i+S}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Uo(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new _0(wf.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Uo(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&j0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const d=s[a];i.forEachInExtent(d,function(b){return mp(b.extent,d)})||(++this.loadingExtentsCount_,this.dispatchEvent(new _0(wf.FEATURESLOADSTART)),this.loader_.call(this,d,t,r,b=>{--this.loadingExtentsCount_,this.dispatchEvent(new _0(wf.FEATURESLOADEND,void 0,b))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new _0(wf.FEATURESLOADERROR))}),i.insert(d,{extent:d.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(Xm(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Uo(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(Fa),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(wf.REMOVEFEATURE)&&this.dispatchEvent(new _0(wf.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ia(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(ck(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class ene extends C8{constructor(e,t,r,i,s){const a=s!==void 0?fi.IDLE:fi.LOADED;super(e,t,r,a),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=fi.ERROR):this.state=fi.LOADED,this.changed()}load(){this.state==fi.IDLE&&(this.state=fi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class u_ extends JC{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(oo.CHANGE)}release(){this.state===wr.ERROR&&this.setState(wr.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==wr.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){yo()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:Xz(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class yj extends u_{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=wr.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=wr.ERROR,this.unlistenImage_(),this.image_=tne(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=wr.LOADED:this.state=wr.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==wr.ERROR&&(this.state=wr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==wr.IDLE&&(this.state=wr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=JX(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function tne(){const n=nu(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class nne{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class rne extends ZC{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){yo()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;lm(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),bz(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,d){let g;const b=t.viewState;function E(J,$,te,W){return s.call(a,$,J?te:null,W)}const S=b.projection,B=I8(e.slice(),S),k=[[0,0]];if(S.canWrapX()&&i){const J=S.getExtent(),$=ms(J);k.push([-$,0],[$,0])}const z=t.layerStatesArray,j=z.length,Y=[],q=[];for(let J=0;J<k.length;J++)for(let $=j-1;$>=0;--$){const te=z[$],W=te.layer;if(W.hasRenderer()&&V8(te,b)&&o.call(d,W)){const oe=W.getRenderer(),fe=W.getSource();if(oe&&fe){const he=fe.getWrapX()?B:e,Se=E.bind(null,te.managed);q[0]=he[0]+k[J][0],q[1]=he[1]+k[J][1],g=oe.forEachFeatureAtCoordinate(q,t,r,Se,Y)}if(g)return g}}if(Y.length===0)return;const ie=1/Y.length;return Y.forEach((J,$)=>J.distanceSq+=$*ie),Y.sort((J,$)=>J.distanceSq-$.distanceSq),Y.some(J=>g=J.callback(J.feature,J.layer,J.geometry)),g}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,vC,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){yo()}scheduleExpireIconCache(e){Tf.canExpireCache()&&e.postRenderFunctions.push(ine)}}function ine(n,e){Tf.expire()}class one extends rne{constructor(e){super(e),this.fontChangeListenerKey_=Ps(Gp,Ty.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Bx+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new Aj(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Fa(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Pf.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,d)=>o.zIndex-d.zIndex);t.some(o=>o.layer instanceof X8&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let o=0,d=t.length;o<d;++o){const g=t[o];e.layerIndex=o;const b=g.layer,E=b.getSourceState();if(!V8(g,i)||E!="ready"&&E!="undefined"){b.unrender();continue}const S=b.render(e,a);S&&(S!==a&&(this.children_.push(S),a=S),s.push(g))}this.declutter(e,s),XX(this.element_,this.children_),this.dispatchRenderEvent(Pf.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}class S0 extends _p{constructor(e,t){super(e),this.layer=t}}const t5={LAYERS:"layers"};class Vy extends Hz{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(t5.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new nm(r.slice(),{unique:!0}):ia(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new nm(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Fa),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ps(e,_h.ADD,this.handleLayersAdd_,this),Ps(e,_h.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Fa);XC(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new S0("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Ps(e,Ty.PROPERTYCHANGE,this.handleLayerChange_,this),Ps(e,oo.CHANGE,this.handleLayerChange_,this)];e instanceof Vy&&t.push(Ps(e,"addlayer",this.handleLayerGroupAdd_,this),Ps(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Uo(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new S0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new S0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new S0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Uo(t);this.listenerKeys_[r].forEach(Fa),delete this.listenerKeys_[r],this.dispatchEvent(new S0("removelayer",t)),this.changed()}getLayers(){return this.get(t5.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new S0("removelayer",r[i]))}this.set(t5.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const d=t[a];d.opacity*=i.opacity,d.visible=d.visible&&i.visible,d.maxResolution=Math.min(d.maxResolution,i.maxResolution),d.minResolution=Math.max(d.minResolution,i.minResolution),d.minZoom=Math.max(d.minZoom,i.minZoom),d.maxZoom=Math.min(d.maxZoom,i.maxZoom),i.extent!==void 0&&(d.extent!==void 0?d.extent=Vd(d.extent,i.extent):d.extent=i.extent),d.zIndex===void 0&&(d.zIndex=s)}return t}getSourceState(){return"ready"}}class Z1 extends _p{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class w0 extends Z1{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Tu={SINGLECLICK:"singleclick",CLICK:oo.CLICK,DBLCLICK:oo.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},lB={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class sne extends JC{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Ps(r,lB.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ps(r,lB.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(oo.TOUCHMOVE,this.boundHandleTouchMove_,hz?{passive:!1}:!1)}emulateClick_(e){let t=new w0(Tu.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new w0(Tu.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new w0(Tu.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==Tu.POINTERUP||t.type==Tu.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==Tu.POINTERDOWN||t.type==Tu.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new w0(Tu.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Fa),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new w0(Tu.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ps(r,Tu.POINTERMOVE,this.handlePointerMove_,this),Ps(r,Tu.POINTERUP,this.handlePointerUp_,this),Ps(this.element_,Tu.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Ps(this.element_.getRootNode(),Tu.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new w0(Tu.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new w0(Tu.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Fa(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(oo.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Fa(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Fa),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const zm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ld={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},I2=1/0;class ane{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,XC(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){ia(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=I2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const d=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),b=g<i&&r[g]<r[d]?g:d;t[e]=t[b],r[e]=r[b],e=b}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,d;for(o=0;o<s;++o)a=t[o],d=e(a),d==I2?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=d,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class vj extends ane{constructor(e,t){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(oo.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===wr.LOADED||r===wr.ERROR||r===wr.EMPTY){r!==wr.ERROR&&t.removeEventListener(oo.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===wr.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function lne(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return I2;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class nO extends bp{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)Fa(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==Oy&&this.listenerKeys.push(Ps(e,zm.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class une extends nO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(oo.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+Bx+" "+b8+(this.collapsed_&&this.collapsible_?" "+w9:"")+(this.collapsible_?"":" ol-uncollapsible"),b=this.element;b.className=g,b.appendChild(this.toggleButton_),b.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>{var a;return((a=s.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>Iy(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!G0(t,this.renderedAttributions_)){fz(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(w9),this.collapsed_?_9(this.collapseLabel_,this.label_):_9(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Ane extends nO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"⇧",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(oo.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Bx+" "+b8,d=this.element;d.className=o,d.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(nb)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:qy}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(nb);!s&&r===0?this.element.classList.add(nb):s&&r!==0&&this.element.classList.remove(nb)}this.label_.style.transform=i}this.rotation_=r}}class cne extends nO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",d=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",b=document.createElement("button");b.className=i,b.setAttribute("type","button"),b.title=d,b.appendChild(typeof a=="string"?document.createTextNode(a):a),b.addEventListener(oo.CLICK,this.handleClick_.bind(this,r),!1);const E=document.createElement("button");E.className=s,E.setAttribute("type","button"),E.title=g,E.appendChild(typeof o=="string"?document.createTextNode(o):o),E.addEventListener(oo.CLICK,this.handleClick_.bind(this,-r),!1);const S=t+" "+Bx+" "+b8,B=this.element;B.className=S,B.appendChild(b),B.appendChild(E),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:qy})):r.setZoom(s)}}}function dne(n){n=n||{};const e=new nm;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new cne(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new Ane(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new une(n.attributionOptions)),e}const dk={ACTIVE:"active"};class A_ extends bp{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(dk.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(dk.ACTIVE,e)}setMap(e){this.map_=e}}function hne(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:Bee,center:n.getConstrainedCenter(i)})}}function rO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:qy})}class fne extends A_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Tu.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();rO(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}class c_ extends A_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Tu.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Tu.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Tu.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Tu.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function iO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}function uB(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const pne=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},mne=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},Cj=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?mne(n):!0},gne=vC,_j=function(n){const e=n.originalEvent;return e.button==0&&!(VX&&Az&&e.ctrlKey)},bj=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},yne=function(n){const e=n.originalEvent;return Az?e.metaKey:e.ctrlKey},vne=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},xj=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},n5=function(n){const e=n.originalEvent;return ia(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},Cne=function(n){const e=n.originalEvent;return ia(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class _ne extends c_{constructor(e){super({stopDown:Sx}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:uB(bj,Cne);this.condition_=e.onFocusOnly?uB(Cj,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(iO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();RJ(s,o.getResolution()),O8(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),d=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(d),duration:500,easing:qy})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class bne extends c_{constructor(e){e=e||{},super({stopDown:Sx}),this.condition_=e.condition?e.condition:pne,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!n5(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===$8)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return n5(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return n5(e)&&_j(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class xne extends ZC{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Jm([i])}getGeometry(){return this.geometry_}}const v1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class xv extends _p{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class wne extends c_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new xne(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??_j,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new xv(v1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new xv(t?v1.BOXEND:v1.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new xv(v1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new xv(v1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new xv(v1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Mne extends wne{constructor(e){e=e||{};const t=e.condition?e.condition:vne;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:qy})}}const ug={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Sne extends A_{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return bj(t)&&xj(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==oo.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==ug.DOWN||i==ug.LEFT||i==ug.RIGHT||i==ug.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let d=0,g=0;i==ug.DOWN?g=-o:i==ug.LEFT?d=-o:i==ug.RIGHT?d=o:g=o;const b=[d,g];O8(b,a.getRotation()),hne(a,b,this.duration_),r.preventDefault(),t=!0}}return!t}}class Ene extends A_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!yne(t)&&xj(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==oo.KEYDOWN||e.type==oo.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();rO(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class Bne extends A_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:gne;this.condition_=e.onFocusOnly?uB(Cj,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==oo.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==oo.WHEEL&&(s=i.deltaY,YX&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=cz),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const d=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),d),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Du(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),rO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class One extends c_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Sx),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const d=s-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=d}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==$8&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(iO(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class Ine extends c_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Sx),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const d=e.map,g=d.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(iO(this.targetPointers))),d.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function kne(n){n=n||{};const e=new nm,t=new nne(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new bne),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new fne({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new _ne({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new One),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new Ine({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new Sne),e.push(new Ene({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new Bne({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new Mne({duration:n.zoomDuration})),e}function wj(n){if(n instanceof Yy){n.setMapInternal(null);return}n instanceof Vy&&n.getLayers().forEach(wj)}function Mj(n,e){if(n instanceof Yy){n.setMapInternal(e);return}if(n instanceof Vy){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)Mj(t[r],e)}}let oO=class extends bp{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Tne(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:cz,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=wh(),this.pixelToCoordinateTransform_=wh(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||dne(),this.interactions=t.interactions||kne({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new vj(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ld.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ld.VIEW,this.handleViewChanged_),this.addChangeListener(ld.SIZE,this.handleSizeChanged_),this.addChangeListener(ld.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof hp)&&e.view.then(function(i){r.setView(new hp(i))}),this.controls.addEventListener(_h.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(_h.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(_h.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(_h.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(_h.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(_h.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Mj(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:vC,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Vy?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:vC,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(ld.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return tB(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?_A(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ld.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof nm){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Um(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?_A(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ld.SIZE)}getView(){return this.get(ld.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return lne(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new w0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===lB.POINTERDOWN||r===oo.WHEEL||r===oo.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[Xl.ANIMATING]||a[Xl.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Pf.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Pf.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Z1(zm.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Z1(zm.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Fa(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(oo.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(oo.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new one(this)),this.mapBrowserEventHandler_=new sne(this,this.moveTolerance_);for(const s in Tu)this.mapBrowserEventHandler_.addEventListener(Tu[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(oo.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(oo.WHEEL,this.boundHandleBrowserEvent_,hz?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Ps(r,oo.KEYDOWN,this.handleBrowserEvent,this),Ps(r,oo.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Fa(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Fa(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ps(e,Ty.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ps(e,oo.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Fa),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new S0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ps(e,Ty.PROPERTYCHANGE,this.render,this),Ps(e,oo.CHANGE,this.render,this),Ps(e,"addlayer",this.handleLayerAdd_,this),Ps(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){wj(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&b9(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:y2(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:Uo(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const d=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=y2(o.nextCenter,o.nextResolution,d,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Yg(this.previousExtent_)&&!Xm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Z1(zm.MOVESTART,this,i)),this.previousExtent_=Qy(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Xl.ANIMATING]&&!s.viewHints[Xl.INTERACTING]&&!Xm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Z1(zm.MOVEEND,this,s)),xz(s.extent,this.previousExtent_))),this.dispatchEvent(new Z1(zm.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(zm.LOADSTART)||this.hasListener(zm.LOADEND)||this.hasListener(Pf.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new S0("removelayer",t)),this.set(ld.LAYERGROUP,e)}setSize(e){this.set(ld.SIZE,e)}setTarget(e){this.set(ld.TARGET,e)}setView(e){if(!e||e instanceof hp){this.set(ld.VIEW,e);return}this.set(ld.VIEW,new hp);const t=this;e.then(function(r){t.setView(new hp(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(a)&&(t=[Math.max(0,s),Math.max(0,a)],!b9(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Pz("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!G0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Tne(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Vy({layers:n.layers});t[ld.LAYERGROUP]=r,t[ld.TARGET]=n.target,t[ld.VIEW]=n.view instanceof hp?n.view:new hp;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new nm(n.controls.slice()):(ia(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new nm(n.interactions.slice()):(ia(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new nm(n.overlays.slice()):(ia(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new nm,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const ad={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Pne extends bp{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+aJ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(ad.ELEMENT,this.handleElementChanged),this.addChangeListener(ad.MAP,this.handleMapChanged),this.addChangeListener(ad.OFFSET,this.handleOffsetChanged),this.addChangeListener(ad.POSITION,this.handlePositionChanged),this.addChangeListener(ad.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(ad.ELEMENT)}getId(){return this.id}getMap(){return this.get(ad.MAP)||null}getOffset(){return this.get(ad.OFFSET)}getPosition(){return this.get(ad.POSITION)}getPositioning(){return this.get(ad.POSITIONING)}handleElementChanged(){fz(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),Fa(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ps(e,zm.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(ad.ELEMENT,e)}setMap(e){this.set(ad.MAP,e)}setOffset(e){this.set(ad.OFFSET,e)}setPosition(e){this.set(ad.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(ad.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[HX(i),ZX(i)]);e=e||{};const a=e.margin===void 0?20:e.margin;if(!mp(r,s)){const o=s[0]-r[0],d=r[2]-s[2],g=s[1]-r[1],b=r[3]-s[3],E=[0,0];if(o<0?E[0]=o-a:d<0&&(E[0]=Math.abs(d)+a),g<0?E[1]=g-a:b<0&&(E[1]=Math.abs(b)+a),E[0]!==0||E[1]!==0){const S=t.getView().getCenterInternal(),B=t.getPixelFromCoordinateInternal(S);if(!B)return;const k=[B[0]+E[0],B[1]+E[1]],z=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(k),duration:z.duration,easing:z.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}setPositioning(e){this.set(ad.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const a=Math.round(e[0]+i[0])+"px",o=Math.round(e[1]+i[1])+"px";let d="0%",g="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?d="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(d="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?g="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(g="-50%");const b=`translate(${d}, ${g}) translate(${a}, ${o})`;this.rendered.transform_!=b&&(this.rendered.transform_=b,r.transform=b)}getOptions(){return this.options}}class Rne{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof ZC&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return ia(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return ia(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ia(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function k2(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function Dne(n,e,t){return n+"/"+e+"/"+t}function Kne(n){return Fne(n[0],n[1],n[2])}function Fne(n,e,t){return(e<<n)+t}function Lne(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class sO{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function C1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new sO(n,e,t,r)}const hk=[];class Une extends u_{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=nu(1,1,hk)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Uo(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(e_(this.context_),hk.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Sj=class extends u_{constructor(e,t,r,i,s,a){super(e,t,a),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==wr.IDLE&&(this.setState(wr.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(wr.ERROR)}setFeatures(e){this.features_=e,this.setState(wr.LOADED)}setLoader(e){this.loader_=e}};class Ej{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Ix,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Sa(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Sa(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return yo()}readFeature(e,t){return yo()}readFeatures(e,t){return yo()}readGeometry(e,t){return yo()}readProjection(e){return yo()}writeFeature(e,t){return yo()}writeFeatures(e,t){return yo()}writeGeometry(e,t){return yo()}}function Gx(n,e,t){const r=t?Sa(t.featureProjection):null,i=t?Sa(t.dataProjection):null;let s=n;if(r&&i&&!Rg(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(EC(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(d){for(let g=0,b=d.length;g<b;++g)d[g]=Math.round(d[g]*a)/a;return d};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const zne={Point:jg,LineString:zg,Polygon:Jm,MultiPoint:s_,MultiLineString:IC,MultiPolygon:kC};function jne(n,e,t){return Array.isArray(e[0])?(qz(n,0,e,t)||(n=n.slice(),iB(n,0,e,t)),n):(G8(n,0,e,t)||(n=n.slice(),w2(n,0,e,t)),n)}function Bj(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(a=>Bj({...n,geometry:a})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return Gx(new Ad(r,r==="Polygon"?jne(t.flatCoordinates,t.ends,i):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function aO(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>aO(i,e));return new b2(r)}const t=zne[n.type];return Gx(new t(n.flatCoordinates,n.layout,n.ends),!1,e)}class Nne extends Ej{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Ab(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Ab(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return yo()}readFeaturesFromObject(e,t){return yo()}readGeometry(e,t){return this.readGeometryFromObject(Ab(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return yo()}readProjection(e){return this.readProjectionFromObject(Ab(e))}readProjectionFromObject(e){return yo()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return yo()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return yo()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return yo()}}function Ab(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class fk extends Nne{constructor(e){e=e||{},super(),this.dataProjection=Sa(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Sa(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=lO(r.geometry);if(this.featureClass===Ad)return Bj({geometry:i,id:r.id,properties:r.properties},t);const s=new Ix;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(aO(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,d=a.length;o<d;++o){const g=this.readFeatureFromObject(a[o],t);g&&i.push(g)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return Wne(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Sa(t.properties.name);else if(t.type==="EPSG")r=Sa("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=AB(a,t),delete s[e.getGeometryName()]),j0(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return AB(e,this.adaptOptions(t))}}function lO(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Qne(n);break}case"LineString":{t=qne(n);break}case"Polygon":{t=Hne(n);break}case"MultiPoint":{t=$ne(n);break}case"MultiLineString":{t=Yne(n);break}case"MultiPolygon":{t=Vne(n);break}case"GeometryCollection":{t=Gne(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Wne(n,e){const t=lO(n);return aO(t,e)}function Gne(n,e){return n.geometries.map(function(r){return lO(r)})}function Qne(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Vg(e.length)}}function qne(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Vg(((r=e[0])==null?void 0:r.length)||2)}}function Yne(n){var s,a;const e=n.coordinates,t=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length)||2,r=[],i=o_(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Vg(t)}}function $ne(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Vg(((t=e[0])==null?void 0:t.length)||2)}}function Vne(n){var s,a;const e=n.coordinates,t=[],r=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a[0].length)||2,i=Fz(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Vg(r)}}function Hne(n){var s,a;const e=n.coordinates,t=[],r=(a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length,i=o_(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Vg(r)}}function AB(n,e){n=Gx(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=nre(n);break}case"LineString":{r=Xne(n);break}case"Polygon":{r=rre(n,e);break}case"MultiPoint":{r=ere(n);break}case"MultiLineString":{r=Jne(n);break}case"MultiPolygon":{r=tre(n,e);break}case"GeometryCollection":{r=Zne(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function Zne(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return AB(r,e)})}}function Xne(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Jne(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function ere(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function tre(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function nre(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function rre(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}class ire extends Yy{constructor(e){e=e||{},super(e)}}class ore extends eO{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let d=e.extent;if(t.extent!==void 0&&(d=Vd(d,tm(t.extent,i.projection))),!o[Xl.ANIMATING]&&!o[Xl.INTERACTING]&&!Yg(d))if(a){const g=i.projection,b=a.getImage(d,s,r,g);b&&(this.loadImage(b)?this.image=b:b.getState()===fi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=_A(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ug(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),d=ms(a),g=Math.floor(o.width*((i[0]-a[0])/d));if(g<0||g>=o.width)return null;const b=Jl(a),E=Math.floor(o.height*((a[3]-i[1])/b));return E<0||E>=o.height?null:this.getImageData(o,g,E)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],d=r.getPixelRatio(),g=e.layerStatesArray[e.layerIndex],b=e.pixelRatio,E=e.viewState,S=E.center,B=E.resolution,k=b*a/(B*d),z=b*o/(B*d);this.prepareContainer(e,t);const j=this.context.canvas.width,Y=this.context.canvas.height,q=this.getRenderContext(e);let ie=!1,J=!0;if(g.extent){const fe=tm(g.extent,E.projection);J=Ru(fe,e.extent),ie=J&&!mp(fe,e.extent),ie&&this.clipUnrotated(q,e,fe)}const $=r.getImage(),te=lm(this.tempTransform,j/2,Y/2,k,z,0,d*(i[0]-S[0])/a,d*(S[1]-i[3])/o);this.renderedResolution=o*b/d;const W=$.width*te[0],oe=$.height*te[3];if(this.getLayer().getSource().getInterpolate()||(q.imageSmoothingEnabled=!1),this.preRender(q,e),J&&W>=.5&&oe>=.5){const fe=te[4],he=te[5],Se=g.opacity;Se!==1&&(q.save(),q.globalAlpha=Se),q.drawImage($,0,0,+$.width,+$.height,fe,he,W,oe),Se!==1&&q.restore()}return this.postRender(this.context,e),ie&&q.restore(),q.imageSmoothingEnabled=!0,this.container}}class Oj extends ire{constructor(e){super(e)}createRenderer(){return new ore(this)}getData(e){return super.getData(e)}}const cB=65536*65536,pk=1/cB,sre=12,mk=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),r5=0,cb=1,wv=2,db=5;class are{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,a=this.pos;this.type=i&7,e(s,t,this),this.pos===a&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*cB;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*cB;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,lre(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=sre&&mk?mk.decode(this.buf.subarray(t,e)):_re(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===wv?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===r5)for(;this.buf[this.pos++]>127;);else if(t===wv)this.pos=this.readVarint()+this.pos;else if(t===db)this.pos+=4;else if(t===cb)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*pk),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*pk),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){ure(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=bre(this.buf,e,this.pos);const r=this.pos-t;r>=128&&gk(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&gk(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,wv),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,dre,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,hre,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,mre,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,fre,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,pre,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,gre,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,yre,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,vre,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,Cre,t)}writeBytesField(e,t){this.writeTag(e,wv),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,db),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,db),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,cb),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,cb),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,r5),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,r5),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,wv),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,db),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,cb),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function lre(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return _1(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function _1(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function ure(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Are(t,r,e),cre(r,e)}function Are(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function cre(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function gk(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function dre(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function hre(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function fre(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function pre(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function mre(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function gre(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function yre(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function vre(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function Cre(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function _re(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let a=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o>t)break;let d,g,b;o===1?s<128&&(a=s):o===2?(d=n[i+1],(d&192)===128&&(a=(s&31)<<6|d&63,a<=127&&(a=null))):o===3?(d=n[i+1],g=n[i+2],(d&192)===128&&(g&192)===128&&(a=(s&15)<<12|(d&63)<<6|g&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):o===4&&(d=n[i+1],g=n[i+2],b=n[i+3],(d&192)===128&&(g&192)===128&&(b&192)===128&&(a=(s&15)<<18|(d&63)<<12|(g&63)<<6|b&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,o=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),r+=String.fromCharCode(a),i+=o}return r}function bre(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class xre extends Ej{constructor(e){super(),e=e||{},this.dataProjection=new Rx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Ad,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let a=1,o=0,d=0,g=0,b=0,E=0;for(;e.pos<s;){if(!o){const S=e.readVarint();a=S&7,o=S>>3}if(o--,a===1||a===2)d+=e.readSVarint(),g+=e.readSVarint(),a===1&&b>E&&(i.push(b),E=b),r.push(d,g),b+=2;else if(a===7)b>E&&(r.push(r[E],r[E+1]),b+=2);else throw new Error("Invalid command found in the PBF")}b>E&&(i.push(b),E=b)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const a=t.properties;let o;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=t.id,a[this.layerName_]=t.layer.name;const d=[],g=[];this.readRawGeometry_(e,t,d,g);const b=Bre(i,g.length);if(this.featureClass===Ad)s=new this.featureClass(b,d,g,2,a,o),s.transform(r.dataProjection);else{let E;if(b=="Polygon"){const k=Yz(d,g);E=k.length>1?new kC(d,"XY",k):new Jm(d,"XY",g)}else E=b==="Point"?new jg(d,"XY"):b==="LineString"?new zg(d,"XY"):b==="MultiPoint"?new s_(d,"XY"):b==="MultiLineString"?new IC(d,"XY",g):null;const S=this.featureClass;s=new S,this.geometryName_&&s.setGeometryName(this.geometryName_);const B=Gx(E,!1,r);s.setGeometry(B),o!==void 0&&s.setId(o),s.setProperties(a,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=Sa(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new are(e),a=s.readFields(wre,{}),o=[];for(const d in a){if(r&&!r.includes(d))continue;const g=a[d],b=g?[0,0,g.extent,g.extent]:null;i.setExtent(b);for(let E=0,S=g.length;E<S;++E){const B=Ere(s,g,E),k=this.createFeature_(s,B,t);k!==null&&o.push(k)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function wre(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Mre,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Mre(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function Sre(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Ere(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(Sre,i,r),i}function Bre(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}const uO=.5,Ore=10,yk=.25;class AO{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let d={};const g=o?tee(ie=>_A(o,Fx(ie,this.targetProj_,this.sourceProj_))):EC(this.targetProj_,this.sourceProj_);this.transformInv_=function(ie){const J=ie[0]+"/"+ie[1];return d[J]||(d[J]=g(ie)),d[J]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ms(i)>=ms(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ms(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ms(this.targetProj_.getExtent()):null;const b=yp(r),E=Px(r),S=Tx(r),B=kx(r),k=this.transformInv_(b),z=this.transformInv_(E),j=this.transformInv_(S),Y=this.transformInv_(B),q=Ore+(a?Math.max(0,Math.ceil(Math.log2(MC(r)/(a*a*256*256)))):0);if(this.addQuad_(b,E,S,B,k,z,j,Y,q),this.wrapsXInSource_){let ie=1/0;this.triangles_.forEach(function(J,$,te){ie=Math.min(ie,J.source[0][0],J.source[1][0],J.source[2][0])}),this.triangles_.forEach(J=>{if(Math.max(J.source[0][0],J.source[1][0],J.source[2][0])-ie>this.sourceWorldWidth_/2){const $=[[J.source[0][0],J.source[0][1]],[J.source[1][0],J.source[1][1]],[J.source[2][0],J.source[2][1]]];$[0][0]-ie>this.sourceWorldWidth_/2&&($[0][0]-=this.sourceWorldWidth_),$[1][0]-ie>this.sourceWorldWidth_/2&&($[1][0]-=this.sourceWorldWidth_),$[2][0]-ie>this.sourceWorldWidth_/2&&($[2][0]-=this.sourceWorldWidth_);const te=Math.min($[0][0],$[1][0],$[2][0]);Math.max($[0][0],$[1][0],$[2][0])-te<this.sourceWorldWidth_/2&&(J.source=$)}})}d={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,d,g){const b=$6([s,a,o,d]),E=this.sourceWorldWidth_?ms(b)/this.sourceWorldWidth_:null,S=this.sourceWorldWidth_,B=this.sourceProj_.canWrapX()&&E>.5&&E<1;let k=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const j=$6([e,t,r,i]);k=ms(j)/this.targetWorldWidth_>yk||k}!B&&this.sourceProj_.isGlobal()&&E&&(k=E>yk||k)}if(!k&&this.maxSourceExtent_&&isFinite(b[0])&&isFinite(b[1])&&isFinite(b[2])&&isFinite(b[3])&&!Ru(b,this.maxSourceExtent_))return;let z=0;if(!k&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(d[0])||!isFinite(d[1]))){if(g>0)k=!0;else if(z=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),z!=1&&z!=2&&z!=4&&z!=8)return}if(g>0){if(!k){const j=[(e[0]+r[0])/2,(e[1]+r[1])/2],Y=this.transformInv_(j);let q;B?q=(Pg(s[0],S)+Pg(o[0],S))/2-Pg(Y[0],S):q=(s[0]+o[0])/2-Y[0];const ie=(s[1]+o[1])/2-Y[1];k=q*q+ie*ie>this.errorThresholdSquared_}if(k){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const j=[(t[0]+r[0])/2,(t[1]+r[1])/2],Y=this.transformInv_(j),q=[(i[0]+e[0])/2,(i[1]+e[1])/2],ie=this.transformInv_(q);this.addQuad_(e,t,j,q,s,a,Y,ie,g-1),this.addQuad_(q,j,r,i,ie,Y,o,d,g-1)}else{const j=[(e[0]+t[0])/2,(e[1]+t[1])/2],Y=this.transformInv_(j),q=[(r[0]+i[0])/2,(r[1]+i[1])/2],ie=this.transformInv_(q);this.addQuad_(e,j,q,i,s,Y,ie,d,g-1),this.addQuad_(j,t,r,q,Y,a,o,ie,g-1)}return}}if(B){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}z&11||this.addTriangle_(e,r,i,s,o,d),z&14||this.addTriangle_(e,r,t,s,o,a),z&&(z&13||this.addTriangle_(t,i,e,a,d,s),z&7||this.addTriangle_(t,i,r,a,d,o))}calculateSourceExtent(){const e=nf();return this.triangles_.forEach(function(t,r,i){const s=t.source;rC(e,s[0]),rC(e,s[1]),rC(e,s[2])}),e}getTriangles(){return this.triangles_}}let i5;const my=[];function vk(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function o5(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Ire(){if(i5===void 0){const n=nu(6,6,my);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",vk(n,4,5,4,0),vk(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;i5=o5(e,0)||o5(e,4)||o5(e,8),e_(n),my.push(n.canvas)}return i5}function dB(n,e,t,r){const i=Fx(t,e,n);let s=J6(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const d=n.getExtent();if(!d||Ug(d,i)){const g=J6(n,s,i)/s;isFinite(g)&&g>0&&(s/=g)}return s}function Ij(n,e,t,r){const i=Kf(t);let s=dB(n,e,i,r);return(!isFinite(s)||s<=0)&&Sz(t,function(a){return s=dB(n,e,a,r),isFinite(s)&&s>0}),s}function kj(n,e,t,r,i,s,a,o,d,g,b,E,S,B){const k=nu(Math.round(t*n),Math.round(t*e),my);if(E||(k.imageSmoothingEnabled=!1),d.length===0)return k.canvas;k.scale(t,t);function z($){return Math.round($*t)/t}k.globalCompositeOperation="lighter";const j=nf();d.forEach(function($,te,W){E8(j,$.extent)});let Y;const q=t/r,ie=(E?1:1+Math.pow(2,-24))/q;if(!S||d.length!==1||g!==0){if(Y=nu(Math.round(ms(j)*q),Math.round(Jl(j)*q),my),E||(Y.imageSmoothingEnabled=!1),i&&B){const $=(i[0]-j[0])*q,te=-(i[3]-j[3])*q,W=ms(i)*q,oe=Jl(i)*q;Y.rect($,te,W,oe),Y.clip()}d.forEach(function($,te,W){if($.image.width>0&&$.image.height>0){if($.clipExtent){Y.save();const pe=($.clipExtent[0]-j[0])*q,we=-($.clipExtent[3]-j[3])*q,Ke=ms($.clipExtent)*q,ge=Jl($.clipExtent)*q;Y.rect(E?pe:Math.round(pe),E?we:Math.round(we),E?Ke:Math.round(pe+Ke)-Math.round(pe),E?ge:Math.round(we+ge)-Math.round(we)),Y.clip()}const oe=($.extent[0]-j[0])*q,fe=-($.extent[3]-j[3])*q,he=ms($.extent)*q,Se=Jl($.extent)*q;Y.drawImage($.image,g,g,$.image.width-2*g,$.image.height-2*g,E?oe:Math.round(oe),E?fe:Math.round(fe),E?he:Math.round(oe+he)-Math.round(oe),E?Se:Math.round(fe+Se)-Math.round(fe)),$.clipExtent&&Y.restore()}})}const J=yp(a);return o.getTriangles().forEach(function($,te,W){const oe=$.source,fe=$.target;let he=oe[0][0],Se=oe[0][1],pe=oe[1][0],we=oe[1][1],Ke=oe[2][0],ge=oe[2][1];const st=z((fe[0][0]-J[0])/s),Qe=z(-(fe[0][1]-J[1])/s),Ze=z((fe[1][0]-J[0])/s),We=z(-(fe[1][1]-J[1])/s),Ce=z((fe[2][0]-J[0])/s),Pe=z(-(fe[2][1]-J[1])/s),it=he,vt=Se;he=0,Se=0,pe-=it,we-=vt,Ke-=it,ge-=vt;const _t=[[pe,we,0,0,Ze-st],[Ke,ge,0,0,Ce-st],[0,0,pe,we,We-Qe],[0,0,Ke,ge,Pe-Qe]],ft=NX(_t);if(!ft)return;if(k.save(),k.beginPath(),Ire()||!E){k.moveTo(Ze,We);const Tt=4,Ue=st-Ze,Re=Qe-We;for(let Be=0;Be<Tt;Be++)k.lineTo(Ze+z((Be+1)*Ue/Tt),We+z(Be*Re/(Tt-1))),Be!=Tt-1&&k.lineTo(Ze+z((Be+1)*Ue/Tt),We+z((Be+1)*Re/(Tt-1)));k.lineTo(Ce,Pe)}else k.moveTo(Ze,We),k.lineTo(st,Qe),k.lineTo(Ce,Pe);k.clip(),k.transform(ft[0],ft[2],ft[1],ft[3],st,Qe),k.translate(j[0]-it,j[3]-vt);let Dt;if(Y)Dt=Y.canvas,k.scale(ie,-ie);else{const Tt=d[0],Ue=Tt.extent;Dt=Tt.image,k.scale(ms(Ue)/Dt.width,-Jl(Ue)/Dt.height)}k.drawImage(Dt,0,0),k.restore()}),Y&&(e_(Y),my.push(Y.canvas)),b&&(k.save(),k.globalCompositeOperation="source-over",k.strokeStyle="black",k.lineWidth=1,o.getTriangles().forEach(function($,te,W){const oe=$.target,fe=(oe[0][0]-J[0])/s,he=-(oe[0][1]-J[1])/s,Se=(oe[1][0]-J[0])/s,pe=-(oe[1][1]-J[1])/s,we=(oe[2][0]-J[0])/s,Ke=-(oe[2][1]-J[1])/s;k.beginPath(),k.moveTo(Se,pe),k.lineTo(fe,he),k.lineTo(we,Ke),k.closePath(),k.stroke()}),k.restore()),k.canvas}function hB(n){return Array.isArray(n)?Math.min(...n):n}class kre extends C8{constructor(e,t,r,i,s,a,o){let d=e.getExtent();d&&e.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);let g=t.getExtent();g&&t.canWrapX()&&(g=g.slice(),g[0]=-1/0,g[2]=1/0);const b=g?Vd(r,g):r,E=Kf(b),S=dB(e,t,E,i),B=uO,k=new AO(e,t,b,d,S*B,i),z=k.calculateSourceExtent(),j=Yg(z)?null:a(z,S,s),Y=j?fi.IDLE:fi.EMPTY,q=j?j.getPixelRatio():1;super(r,i,q,Y),this.targetProj_=t,this.maxSourceExtent_=d,this.triangulation_=k,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=j,this.sourcePixelRatio_=q,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==fi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==fi.LOADED){const t=ms(this.targetExtent_)/this.targetResolution_,r=Jl(this.targetExtent_)/this.targetResolution_;this.canvas_=kj(t,r,this.sourcePixelRatio_,hB(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==fi.IDLE){this.state=fi.LOADING,this.changed();const e=this.sourceImage_.getState();e==fi.LOADED||e==fi.ERROR?this.reproject_():(this.sourceListenerKey_=Ps(this.sourceImage_,oo.CHANGE,t=>{const r=this.sourceImage_.getState();(r==fi.LOADED||r==fi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Fa(this.sourceListenerKey_),this.sourceListenerKey_=null}}const hb=4,s5={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Tre extends _p{constructor(e,t){super(e),this.image=t}}class Tj extends $y{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Mx(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||Rg(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Rg(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Xm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new kre(s,i,e,t,r,(a,o,d)=>this.getImageInternal(a,o,d,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=Pre(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&mp(this.wantedExtent_,s)||mp(this.image.getExtent(),s))&&(this.wantedResolution_&&hB(this.wantedResolution_)===a||hB(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new C8(s,a,r,this.loader),this.image.addEventListener(oo.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case fi.LOADING:this.loading=!0,r=s5.IMAGELOADSTART;break;case fi.LOADED:this.loading=!1,r=s5.IMAGELOADEND;break;case fi.ERROR:this.loading=!1,r=s5.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new Tre(r,t))}}function Pre(n,e,t,r){const i=e/t,s=Kf(n),a=O0(ms(n)/i,hb),o=O0(Jl(n)/i,hb),d=O0((r-1)*a/2,hb),g=a+2*d,b=O0((r-1)*o/2,hb),E=o+2*b;return y2(s,i,0,[g,E])}const P0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Rre extends Yy{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(P0.PRELOAD)}setPreload(e){this.set(P0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(P0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(P0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function T2(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}function Dre(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Float32Array||n instanceof DataView?n:null}const Kre=new Error("disposed");let b1=null;function Fre(n){b1||(b1=nu(n.width,n.height,void 0,{willReadFrequently:!0}));const e=b1.canvas,t=n.width;e.width!==t&&(e.width=t);const r=n.height;return e.height!==r&&(e.height=r),b1.clearRect(0,0,t,r),b1.drawImage(n,0,0),b1.getImageData(0,0,t,r).data}const Lre=[256,256];class fB extends u_{constructor(e){const t=wr.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=T2(this.data_);return e?[e.width,e.height]:Lre}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==wr.IDLE&&this.state!==wr.ERROR)return;this.state=wr.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=wr.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=wr.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Kre),this.controller_=null),super.disposeInternal()}}function Qx(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function pB(n,e,t,r,i,s,a){a=a??Qx();const o=1/(n-e),d=1/(t-r),g=1/(i-s);return a[0]=-2*o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*g,a[11]=0,a[12]=(n+e)*o,a[13]=(r+t)*d,a[14]=(s+i)*g,a[15]=1,a}function Ck(n,e,t,r,i){return i=i??Qx(),i[0]=n[0]*e,i[1]=n[1]*e,i[2]=n[2]*e,i[3]=n[3]*e,i[4]=n[4]*t,i[5]=n[5]*t,i[6]=n[6]*t,i[7]=n[7]*t,i[8]=n[8]*r,i[9]=n[9]*r,i[10]=n[10]*r,i[11]=n[11]*r,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function Ure(n,e,t,r,i){i=i??Qx();let s,a,o,d,g,b,E,S,B,k,z,j;return n===i?(i[12]=n[0]*e+n[4]*t+n[8]*r+n[12],i[13]=n[1]*e+n[5]*t+n[9]*r+n[13],i[14]=n[2]*e+n[6]*t+n[10]*r+n[14],i[15]=n[3]*e+n[7]*t+n[11]*r+n[15]):(s=n[0],a=n[1],o=n[2],d=n[3],g=n[4],b=n[5],E=n[6],S=n[7],B=n[8],k=n[9],z=n[10],j=n[11],i[0]=s,i[1]=a,i[2]=o,i[3]=d,i[4]=g,i[5]=b,i[6]=E,i[7]=S,i[8]=B,i[9]=k,i[10]=z,i[11]=j,i[12]=s*e+g*t+B*r+n[12],i[13]=a*e+b*t+k*r+n[13],i[14]=o*e+E*t+z*r+n[14],i[15]=d*e+S*t+j*r+n[15]),i}function zre(n,e,t,r){return r=r??Qx(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n,r[13]=e,r[14]=t,r[15]=1,r}const jre=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Nre=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Wre{constructor(e){this.gl_=e,this.program_=mB(e,Nre,jre),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,r,i,s,a,o,d,g,b,E,S,B){const k=this.gl_;d===void 0&&(d=i),g===void 0&&(g=s),a===void 0&&(a=t),o===void 0&&(o=r),b===void 0&&(b=a),E===void 0&&(E=o),S===void 0&&(S=k.canvas.width),B===void 0&&(B=k.canvas.height),k.bindTexture(k.TEXTURE_2D,e),k.useProgram(this.program_),k.bindBuffer(k.ARRAY_BUFFER,this.positionBuffer),k.enableVertexAttribArray(this.positionLocation),k.vertexAttribPointer(this.positionLocation,2,k.FLOAT,!1,0,0),k.bindBuffer(k.ARRAY_BUFFER,this.texcoordBuffer),k.enableVertexAttribArray(this.texcoordLocation),k.vertexAttribPointer(this.texcoordLocation,2,k.FLOAT,!1,0,0);let z=pB(0,S,0,B,-1,1);z=Ure(z,d,g,0),z=Ck(z,b,E,1),k.uniformMatrix4fv(this.matrixLocation,!1,z);let j=zre(i/t,s/r,0);j=Ck(j,a/t,o/r,1),k.uniformMatrix4fv(this.textureMatrixLocation,!1,j),k.uniform1i(this.textureLocation,0),k.drawArrays(k.TRIANGLES,0,this.positions.length/2)}}function _k(n,e,t){const r=n.createShader(e);if(r===null)throw new Error("Shader compilation failed");if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){const i=n.getShaderInfoLog(r);throw i===null?new Error("Shader info log creation failed"):new Error(i)}return r}function mB(n,e,t){const r=n.createProgram(),i=_k(n,n.VERTEX_SHADER,t),s=_k(n,n.FRAGMENT_SHADER,e);if(r===null)throw new Error("Program creation failed");if(n.attachShader(r,i),n.attachShader(r,s),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw n.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}const Gre=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,Qre=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,qre=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,Yre=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function $re(n,e,t,r){let i;return t.length?i=t.shift():v8?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("webgl",r)}function Vre(n){const e=n.canvas;e.width=1,e.height=1,n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)}const bk=[];function Hre(n,e,t,r,i,s,a,o,d,g,b,E,S,B){const k=Math.round(r*e),z=Math.round(r*t);n.canvas.width=k,n.canvas.height=z;let j,Y;if(Y=n.createTexture(),n.bindTexture(n.TEXTURE_2D,Y),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),S?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,k,z,0,n.RGBA,b,null),j=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,j),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Y,0),j===null)throw new Error("Could not create framebuffer");if(Y===null)throw new Error("Could not create texture");if(d.length===0)return{width:k,height:z,framebuffer:j,texture:Y};const q=nf();d.forEach(function(he,Se,pe){E8(q,he.extent)});let ie,J,$;const te=1/i;{if(ie=n.createTexture(),Y===null)throw new Error("Could not create texture");J=Math.round(ms(q)*te),$=Math.round(Jl(q)*te);const he=n.getParameter(n.MAX_TEXTURE_SIZE),Se=Math.max(J,$),pe=Se>he?he/Se:1,we=Math.round(J*pe),Ke=Math.round($*pe);n.bindTexture(n.TEXTURE_2D,ie),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),S?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,we,Ke,0,n.RGBA,b,null);const ge=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,ge),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ie,0);const st=new Wre(n);d.forEach(function(Qe,Ze,We){const Ce=(Qe.extent[0]-q[0])*te*pe,Pe=-(Qe.extent[3]-q[3])*te*pe,it=ms(Qe.extent)*te*pe,vt=Jl(Qe.extent)*te*pe;if(n.bindFramebuffer(n.FRAMEBUFFER,ge),n.viewport(0,0,we,Ke),Qe.clipExtent){const _t=(Qe.clipExtent[0]-q[0])*te*pe,ft=-(Qe.clipExtent[3]-q[3])*te*pe,Dt=ms(Qe.clipExtent)*te*pe,Tt=Jl(Qe.clipExtent)*te*pe;n.enable(n.SCISSOR_TEST),n.scissor(S?_t:Math.round(_t),S?ft:Math.round(ft),S?Dt:Math.round(_t+Dt)-Math.round(_t),S?Tt:Math.round(ft+Tt)-Math.round(ft))}st.drawImage(Qe.texture,Qe.width,Qe.height,g,g,Qe.width-2*g,Qe.height-2*g,S?Ce:Math.round(Ce),S?Pe:Math.round(Pe),S?it:Math.round(Ce+it)-Math.round(Ce),S?vt:Math.round(Pe+vt)-Math.round(Pe),we,Ke),n.disable(n.SCISSOR_TEST)}),n.deleteFramebuffer(ge)}const W=yp(a),oe=yp(q),fe=he=>{const Se=(he[0][0]-W[0])/s*r,pe=-(he[0][1]-W[1])/s*r,we=(he[1][0]-W[0])/s*r,Ke=-(he[1][1]-W[1])/s*r,ge=(he[2][0]-W[0])/s*r,st=-(he[2][1]-W[1])/s*r;return{u1:we,v1:Ke,u0:Se,v0:pe,u2:ge,v2:st}};n.bindFramebuffer(n.FRAMEBUFFER,j),n.viewport(0,0,k,z);{const he=[],Se=[],pe=mB(n,Yre,qre);n.useProgram(pe);const we=n.getUniformLocation(pe,"u_texture");n.bindTexture(n.TEXTURE_2D,ie),n.uniform1i(we,0),o.getTriangles().forEach(function(Ce,Pe,it){const vt=Ce.source,_t=Ce.target,{u1:ft,v1:Dt,u0:Tt,v0:Ue,u2:Re,v2:Be}=fe(_t),nt=(vt[0][0]-oe[0])/i/J,Ct=-(vt[0][1]-oe[1])/i/$,pt=(vt[1][0]-oe[0])/i/J,zt=-(vt[1][1]-oe[1])/i/$,tn=(vt[2][0]-oe[0])/i/J,Lt=-(vt[2][1]-oe[1])/i/$;he.push(ft,Dt,Tt,Ue,Re,Be),Se.push(pt,zt,nt,Ct,tn,Lt)});const Ke=pB(0,k,z,0,-1,1),ge=n.getUniformLocation(pe,"u_matrix");n.uniformMatrix4fv(ge,!1,Ke);const st=n.getAttribLocation(pe,"a_position"),Qe=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Qe),n.bufferData(n.ARRAY_BUFFER,new Float32Array(he),n.STATIC_DRAW),n.vertexAttribPointer(st,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(st);const Ze=n.getAttribLocation(pe,"a_texcoord"),We=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,We),n.bufferData(n.ARRAY_BUFFER,new Float32Array(Se),n.STATIC_DRAW),n.vertexAttribPointer(Ze,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(Ze),n.drawArrays(n.TRIANGLES,0,he.length/2)}if(E){const he=mB(n,Qre,Gre);n.useProgram(he);const Se=pB(0,k,z,0,-1,1),pe=n.getUniformLocation(he,"u_matrix");n.uniformMatrix4fv(pe,!1,Se);const we=Array.isArray(E)?E:[0,0,0,255],Ke=n.getUniformLocation(he,"u_val");n.uniform4fv(Ke,we);const ge=n.getAttribLocation(he,"a_position"),st=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,st),n.vertexAttribPointer(ge,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(ge);const Qe=o.getTriangles().reduce(function(Ze,We){const Ce=We.target,{u1:Pe,v1:it,u0:vt,v0:_t,u2:ft,v2:Dt}=fe(Ce);return Ze.concat([Pe,it,vt,_t,vt,_t,ft,Dt,ft,Dt,Pe,it])},[]);n.bufferData(n.ARRAY_BUFFER,new Float32Array(Qe),n.STATIC_DRAW),n.drawArrays(n.LINES,0,Qe.length/2)}return{width:k,height:z,framebuffer:j,texture:Y}}class Zre extends fB{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,r=t.getExtent(),i=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?i?Vd(r,i):r:i;const s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let o=this.sourceTileGrid_.getExtent();const d=a?Vd(s,a):s;if(MC(d)===0){this.state=wr.EMPTY;return}r&&(o?o=Vd(o,r):o=r);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),b=e.targetProj,E=Ij(t,b,d,g);if(!isFinite(E)||E<=0){this.state=wr.EMPTY;return}const S=e.errorThreshold!==void 0?e.errorThreshold:uO;if(this.triangulation_=new AO(t,b,d,o,E*S,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=wr.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(E);let B=this.triangulation_.calculateSourceExtent();if(o&&(t.canWrapX()?(B[1]=Du(B[1],o[1],o[3]),B[3]=Du(B[3],o[1],o[3])):B=Vd(B,o)),!MC(B))this.state=wr.EMPTY;else{let k=0,z=0;t.canWrapX()&&(k=ms(r),z=Math.floor((B[0]-r[0])/k)),B8(B.slice(),t,!0).forEach(Y=>{const q=this.sourceTileGrid_.getTileRangeForExtentAndZ(Y,this.sourceZ_),ie=e.getTileFunction;for(let J=q.minX;J<=q.maxX;J++)for(let $=q.minY;$<=q.maxY;$++){const te=ie(this.sourceZ_,J,$,this.pixelRatio_);if(te){const W=z*k;this.sourceTiles_.push({tile:te,offset:W})}}++z}),this.sourceTiles_.length===0&&(this.state=wr.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(J=>{var Pe;const $=J.tile;if(!$||$.getState()!==wr.LOADED)return;const te=$.getSize(),W=this.gutter_;let oe;const fe=Dre($.getData());fe?oe=fe:(t=!0,oe=Fre(T2($.getData())));const he=[te[0]+2*W,te[1]+2*W],Se=oe instanceof Float32Array,pe=he[0]*he[1],we=Se?Float32Array:Uint8ClampedArray,Ke=new we(oe.buffer),ge=we.BYTES_PER_ELEMENT,st=ge*Ke.length/pe,Qe=Ke.byteLength/he[1],Ze=Math.floor(Qe/ge/he[0]),We=this.sourceTileGrid_.getTileCoordExtent($.tileCoord);We[0]+=J.offset,We[2]+=J.offset;const Ce=(Pe=this.clipExtent_)==null?void 0:Pe.slice();Ce&&(Ce[0]+=J.offset,Ce[2]+=J.offset),e.push({extent:We,clipExtent:Ce,data:Ke,dataType:we,bytesPerPixel:st,pixelSize:he,bandCount:Ze})}),this.sourceTiles_.length=0,e.length===0){this.state=wr.ERROR,this.changed();return}const r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),s=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],o=s*this.pixelRatio_,d=a*this.pixelRatio_,g=this.targetTileGrid_.getResolution(r),b=this.sourceTileGrid_.getResolution(this.sourceZ_),E=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),S=e[0].bandCount,B=new e[0].dataType(S*o*d),k=$re(o,d,bk,{premultipliedAlpha:!1,antialias:!1});let z;const j=k.RGBA;let Y;e[0].dataType==Float32Array?(Y=k.FLOAT,k.getExtension("WEBGL_color_buffer_float"),k.getExtension("OES_texture_float"),k.getExtension("EXT_float_blend"),z=k.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(Y=k.UNSIGNED_BYTE,z=this.interpolate);const q=4,ie=Math.ceil(S/q);for(let J=ie-1;J>=0;--J){const $=[];for(let we=0,Ke=e.length;we<Ke;++we){const ge=e[we],st=ge.pixelSize,Qe=st[0],Ze=st[1],We=new ge.dataType(q*Qe*Ze),Ce=ge.data;let Pe=J*q;for(let vt=0,_t=We.length;vt<_t;vt+=q)We[vt]=Ce[Pe],We[vt+1]=Ce[Pe+1],We[vt+2]=Ce[Pe+2],We[vt+3]=Ce[Pe+3],Pe+=S;const it=k.createTexture();k.bindTexture(k.TEXTURE_2D,it),z?(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR)):(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST)),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texImage2D(k.TEXTURE_2D,0,j,Qe,Ze,0,j,Y,We),$.push({extent:ge.extent,clipExtent:ge.clipExtent,texture:it,width:Qe,height:Ze})}const{framebuffer:te,width:W,height:oe}=Hre(k,s,a,this.pixelRatio_,b,g,E,this.triangulation_,$,this.gutter_,Y,this.renderEdges_,z),fe=W,he=oe*q,Se=new e[0].dataType(fe*he);k.bindFramebuffer(k.FRAMEBUFFER,te),k.readPixels(0,0,W,oe,k.RGBA,Y,Se);let pe=J*q;for(let we=0,Ke=Se.length;we<Ke;we+=q){const ge=(fe-1-(we/he|0))*he+we%he;B[pe]=Se[ge],B[pe+1]=Se[ge+1],B[pe+2]=Se[ge+2],B[pe+3]=Se[ge+3],pe+=S}}if(Vre(k),bk.push(k.canvas),t){const J=nu(s,a),$=new ImageData(B,s);J.putImageData($,0,0),this.reprojData_=J.canvas}else this.reprojData_=B;this.reprojSize_=[Math.round(o),Math.round(d)],this.state=wr.LOADED,this.changed()}load(){if(this.state!==wr.IDLE&&this.state!==wr.ERROR)return;this.state=wr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r!==wr.IDLE&&r!==wr.LOADING)return;e++;const i=Ps(t,oo.CHANGE,()=>{const s=t.getState();(s==wr.LOADED||s==wr.ERROR||s==wr.EMPTY)&&(Fa(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==wr.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Fa),this.sourcesListenerKeys_=null}}class gB extends u_{constructor(e,t,r,i,s,a,o,d,g,b,E,S){super(s,wr.IDLE,S),this.renderEdges_=E!==void 0?E:!1,this.pixelRatio_=o,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const B=i.getTileCoordExtent(this.wrappedTileCoord_),k=this.targetTileGrid_.getExtent();let z=this.sourceTileGrid_.getExtent();const j=k?Vd(B,k):B;if(MC(j)===0){this.state=wr.EMPTY;return}const Y=e.getExtent();Y&&(z?z=Vd(z,Y):z=Y);const q=i.getResolution(this.wrappedTileCoord_[0]),ie=Ij(e,r,j,q);if(!isFinite(ie)||ie<=0){this.state=wr.EMPTY;return}const J=b!==void 0?b:uO;if(this.triangulation_=new AO(e,r,j,z,ie*J,q),this.triangulation_.getTriangles().length===0){this.state=wr.EMPTY;return}this.sourceZ_=t.getZForResolution(ie);let $=this.triangulation_.calculateSourceExtent();if(z&&(e.canWrapX()?($[1]=Du($[1],z[1],z[3]),$[3]=Du($[3],z[1],z[3])):$=Vd($,z)),!MC($))this.state=wr.EMPTY;else{let te=0,W=0;e.canWrapX()&&(te=ms(Y),W=Math.floor(($[0]-Y[0])/te)),B8($.slice(),e,!0).forEach(fe=>{const he=t.getTileRangeForExtentAndZ(fe,this.sourceZ_);for(let Se=he.minX;Se<=he.maxX;Se++)for(let pe=he.minY;pe<=he.maxY;pe++){const we=g(this.sourceZ_,Se,pe,o);if(we){const Ke=W*te;this.sourceTiles_.push({tile:we,offset:Ke})}}++W}),this.sourceTiles_.length===0&&(this.state=wr.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==wr.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const a=(i=this.clipExtent_)==null?void 0:i.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:s,clipExtent:a,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=wr.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=kj(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,d,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=wr.LOADED}this.changed()}load(){if(this.state==wr.IDLE){this.state=wr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==wr.IDLE||r==wr.LOADING){e++;const i=Ps(t,oo.CHANGE,s=>{const a=t.getState();(a==wr.LOADED||a==wr.ERROR||a==wr.EMPTY)&&(Fa(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==wr.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Fa),this.sourcesListenerKeys_=null}release(){this.canvas_&&(e_(this.canvas_.getContext("2d")),my.push(this.canvas_),this.canvas_=null),super.release()}}function a5(n,e,t,r){return`${n},${Dne(e,t,r)}`}function l5(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function Xre(n,e,t){const r=n[t];return r?r.delete(e):!1}function xk(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Vd(e,tm(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Vd(e,i))}return e}class Pj extends eO{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=nf(),this.tempTileRange_=new sO(0,0,0,0),this.tempTileCoord_=k2(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Rne(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),d=a5(o.getKey(),e,t,r);let g;if(s.containsKey(d))g=s.get(d);else{if(g=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!g)return null;s.set(d,g)}return g}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=_A(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ug(s,i))return null;const a=t.viewState,o=r.getRenderSource(),d=o.getTileGridForProjection(a.projection),g=o.getTilePixelRatio(t.pixelRatio);for(let b=d.getZForResolution(a.resolution);b>=d.getMinZoom();--b){const E=d.getTileCoordForCoordAndZ(i,b),S=this.getTile(b,E[1],E[2],t);if(!S||S.getState()!==wr.LOADED)continue;const B=d.getOrigin(b),k=cd(d.getTileSize(b)),z=d.getResolution(b);let j;if(S instanceof yj||S instanceof gB)j=S.getImage();else if(S instanceof fB){if(j=T2(S.getData()),!j)continue}else continue;const Y=Math.floor(g*((i[0]-B[0])/z-E[1]*k[0])),q=Math.floor(g*((B[1]-i[1])/z-E[2]*k[1])),ie=Math.round(g*o.getGutterForProjection(a.projection));return this.getImageData(j,Y+ie,q+ie)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),d=o.getRenderSource(),g=d.getTileGridForProjection(a.projection),b=Uo(d);b in e.wantedTiles||(e.wantedTiles[b]={});const E=e.wantedTiles[b],S=o.getMapInternal(),B=Math.max(r-s,g.getMinZoom(),g.getZForResolution(Math.min(o.getMaxResolution(),S?S.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):g.getResolution(0)),d.zDirection));for(let k=r;k>=B;--k){const z=g.getTileRangeForExtentAndZ(t,k,this.tempTileRange_),j=g.getResolution(k);for(let Y=z.minX;Y<=z.maxX;++Y)for(let q=z.minY;q<=z.maxY;++q){const ie=this.getTile(k,Y,q,e);if(!ie||!l5(i,ie,k))continue;const $=ie.getKey();if(E[$]=!0,ie.getState()===wr.IDLE&&!e.tileQueue.isKeyQueued($)){const te=k2(k,Y,q,this.tempTileCoord_);e.tileQueue.enqueue([ie,b,g.getTileCoordCenter(te),j])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let d=0;d<o.length;++d){const g=a5(o[d],i,s,a);if(r.containsKey(g)){const b=r.get(g);if(b.getState()===wr.LOADED)return b.endTransition(Uo(this)),l5(t,b,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let b=s.minX;b<=s.maxX;++b)for(let E=s.minY;E<=s.maxY;++E){const S=a5(g,r,b,E);let B=!1;if(o.containsKey(S)){const k=o.get(S);k.getState()===wr.LOADED&&(l5(i,k,r),B=!0)}B||(a=!1)}return a}renderFrame(e,t){let r=!0;this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],s=e.viewState,a=s.projection,o=s.resolution,d=s.center,g=e.pixelRatio,b=this.getLayer(),E=b.getSource(),S=E.getRevision(),B=E.getTileGridForProjection(a),k=B.getZForResolution(o,E.zDirection),z=B.getResolution(k),j=E.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==j&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=j):this.renderedSourceKey_=j;let Y=e.extent;const q=E.getTilePixelRatio(g);this.prepareContainer(e,t);const ie=this.context.canvas.width,J=this.context.canvas.height,$=i.extent&&tm(i.extent);$&&(Y=Vd(Y,tm(i.extent)));const te=z*ie/2/q,W=z*J/2/q,oe=[d[0]-te,d[1]-W,d[0]+te,d[1]+W],fe={};this.renderedTiles.length=0;const he=b.getPreload();if(e.nextExtent){const Ce=B.getZForResolution(s.nextResolution,E.zDirection),Pe=xk(e,e.nextExtent);this.enqueueTiles(e,Pe,Ce,fe,he)}const Se=xk(e,Y);if(this.enqueueTiles(e,Se,k,fe,0),he>0&&setTimeout(()=>{this.enqueueTiles(e,Se,k-1,fe,he-1)},0),!(k in fe))return this.container;const pe=Uo(this),we=e.time;for(const Ce of fe[k]){const Pe=Ce.getState();if((Ce instanceof gB||Ce instanceof Zre)&&Pe===wr.EMPTY)continue;const it=Ce.tileCoord;if(Pe===wr.LOADED&&Ce.getAlpha(pe,we)===1){Ce.endTransition(pe);continue}if(Pe!==wr.IDLE&&(r=!1),Pe!==wr.ERROR&&(this.renderComplete=!1),this.findStaleTile_(it,fe)){Xre(fe,Ce,k),e.animate=!0;continue}if(this.findAltTiles_(B,it,k+1,fe))continue;const ft=B.getMinZoom();for(let Dt=k-1;Dt>=ft&&!this.findAltTiles_(B,it,Dt,fe);--Dt);}const Ke=z/o*g/q,ge=this.getRenderContext(e);lm(this.tempTransform,ie/2,J/2,Ke,Ke,0,-ie/2,-J/2),i.extent&&this.clipUnrotated(ge,e,$),E.getInterpolate()||(ge.imageSmoothingEnabled=!1),this.preRender(ge,e);const st=Object.keys(fe).map(Number);st.sort(qm);let Qe;const Ze=[],We=[];for(let Ce=st.length-1;Ce>=0;--Ce){const Pe=st[Ce],it=E.getTilePixelSize(Pe,g,a),_t=B.getResolution(Pe)/z,ft=it[0]*_t*Ke,Dt=it[1]*_t*Ke,Tt=B.getTileCoordForCoordAndZ(yp(oe),Pe),Ue=B.getTileCoordExtent(Tt),Re=_A(this.tempTransform,[q*(Ue[0]-oe[0])/z,q*(oe[3]-Ue[3])/z]),Be=q*E.getGutterForProjection(a);for(const nt of fe[Pe]){if(nt.getState()!==wr.LOADED)continue;const Ct=nt.tileCoord,pt=Tt[1]-Ct[1],zt=Math.round(Re[0]-(pt-1)*ft),tn=Tt[2]-Ct[2],Lt=Math.round(Re[1]-(tn-1)*Dt),gn=Math.round(Re[0]-pt*ft),Nn=Math.round(Re[1]-tn*Dt),rn=zt-gn,or=Lt-Nn,Kn=st.length===1;let pn=!1;Qe=[gn,Nn,gn+rn,Nn,gn+rn,Nn+or,gn,Nn+or];for(let Xn=0,Mr=Ze.length;Xn<Mr;++Xn)if(!Kn&&Pe<We[Xn]){const Yn=Ze[Xn];Ru([gn,Nn,gn+rn,Nn+or],[Yn[0],Yn[3],Yn[4],Yn[7]])&&(pn||(ge.save(),pn=!0),ge.beginPath(),ge.moveTo(Qe[0],Qe[1]),ge.lineTo(Qe[2],Qe[3]),ge.lineTo(Qe[4],Qe[5]),ge.lineTo(Qe[6],Qe[7]),ge.moveTo(Yn[6],Yn[7]),ge.lineTo(Yn[4],Yn[5]),ge.lineTo(Yn[2],Yn[3]),ge.lineTo(Yn[0],Yn[1]),ge.clip())}Ze.push(Qe),We.push(Pe),this.drawTile(nt,e,gn,Nn,rn,or,Be,Kn),pn&&ge.restore(),this.renderedTiles.unshift(nt),this.updateUsedTiles(e.usedTiles,E,nt)}}if(this.renderedRevision=S,this.renderedResolution=z,this.extentChanged=!this.renderedExtent_||!Xm(this.renderedExtent_,oe),this.renderedExtent_=oe,this.renderedPixelRatio=g,this.postRender(this.context,e),i.extent&&ge.restore(),ge.imageSmoothingEnabled=!0,this.renderComplete){const Ce=(Pe,it)=>{const vt=Uo(E),_t=it.wantedTiles[vt],ft=_t?Object.keys(_t).length:0;this.updateCacheSize(ft),this.tileCache_.expireCache()};e.postRenderFunctions.push(Ce)}return!this.renderComplete&&!r&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,d){let g;if(e instanceof fB){if(g=T2(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const b=this.getRenderContext(t),E=Uo(this),S=t.layerStatesArray[t.layerIndex],B=S.opacity*(d?e.getAlpha(E,t.time):1),k=B!==b.globalAlpha;k&&(b.save(),b.globalAlpha=B),b.drawImage(g,o,o,g.width-2*o,g.height-2*o,r,i,s,a),k&&b.restore(),B!==S.opacity?t.animate=!0:d&&e.endTransition(E)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Uo(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}class Rj extends Rre{constructor(e){super(e)}createRenderer(){return new Pj(this,{cacheSize:this.getCacheSize()})}}const x1=[0,0,0],b0=5;class qx{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ia(LX(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ia(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=yp(r)),ia(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ia(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Q8,ia(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new sO(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,d=i.maxY;o<=d;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,d=null,g=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):d=this.getTileCoordExtent(e,i);g>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=C1(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(d,g,r),t(g,s))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return C1(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return C1(s,a,s,a,r);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,t-i),g=Math.floor(s*d),b=Math.floor(a*d);if(t<i)return C1(g,g,b,b,r);const E=Math.floor(d*(s+1))-1,S=Math.floor(d*(a+1))-1;return C1(g,E,b,S,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,x1);const i=x1[1],s=x1[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,x1);const a=x1[1],o=x1[2];return C1(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=cd(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=cd(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,d=a+s[0]*i,g=o+s[1]*i;return Zm(a,o,d,g,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),d=this.getOrigin(a),g=cd(this.getTileSize(a),this.tmpSize_);let b=o*(e-d[0])/r/g[0],E=o*(d[1]-t)/r/g[1];return i?(b=O0(b,b0)-1,E=O0(E,b0)-1):(b=tb(b,b0),E=tb(E,b0)),k2(a,b,E,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),d=cd(this.getTileSize(r),this.tmpSize_);let g=(e-a[0])/o/d[0],b=(a[1]-t)/o/d[1];return i?(g=O0(g,b0)-1,b=O0(b,b0)-1):(g=tb(g,b0),b=tb(b,b0)),k2(r,g,b,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Mx(this.resolutions_,e,t||0);return Du(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Nz(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function Dj(n){let e=n.getDefaultTileGrid();return e||(e=tie(n),n.setDefaultTileGrid(e)),e}function Jre(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=Yx(t);if(!Ug(s,i)){const a=ms(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function eie(n,e,t,r){r=r!==void 0?r:"top-left";const i=Kj(n,e,t);return new qx({extent:n,origin:CJ(n,r),resolutions:i,tileSize:t})}function cO(n){const e=n||{},t=e.extent||Sa("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Kj(t,e.maxZoom,e.tileSize,e.maxResolution)};return new qx(r)}function Kj(n,e,t,r){e=e!==void 0?e:Zz,t=cd(t!==void 0?t:Q8);const i=Jl(n),s=ms(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let d=0;d<a;++d)o[d]=r/Math.pow(2,d);return o}function tie(n,e,t,r){const i=Yx(n);return eie(i,e,t,r)}function Yx(n){n=Sa(n);let e=n.getExtent();if(!e){const t=180*W0.degrees/n.getMetersPerUnit();e=Zm(-t,-t,t,t)}return e}class Fj extends $y{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&cd(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Uo(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return yo()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Dj(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=cd(i.getTileSize(e),this.tmpSize);return s==1?a:iJ(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=Jre(i,e,r)),Lne(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class nie extends _p{constructor(e,t){super(e),this.tile=t}}function Lj(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,a=e.height,o=t.length,d=t[0].byteLength;if(i){const S=new Array(o);for(let k=0;k<o;++k)S[k]=new ImageData(new Uint8ClampedArray(t[k]),s,a);return n(S,r).data.buffer}const g=new Uint8ClampedArray(d),b=new Array(o),E=new Array(o);for(let S=0;S<o;++S)b[S]=new Uint8ClampedArray(t[S]),E[S]=[0,0,0,0];for(let S=0;S<d;S+=4){for(let k=0;k<o;++k){const z=b[k];E[k][0]=z[S],E[k][1]=z[S+1],E[k][2]=z[S+2],E[k][3]=z[S+3]}const B=n(E,r);g[S]=B[0],g[S+1]=B[1],g[S+2]=B[2],g[S+3]=B[3]}return g.buffer}}function rie(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+Lj.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function iie(n,e){const t=Lj(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class oie extends ZC{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=rie(e,this.onWorkerMessage_.bind(this,i));else r[0]=iie(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(d){return d.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const a=e.inputs[0].data.length,o=4*Math.ceil(a/4/s);for(let d=0;d<s;++d){const g=d*o,b=[];for(let E=0,S=i.length;E<S;++E)b.push(i[E].slice(g,g+o));this.workers_[d].postMessage({buffers:b,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},b)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const a=4*Math.ceil(s/4/t);for(let o=0;o<t;++o){const d=this.dataLookup_[o].buffer,g=o*a;r.set(new Uint8ClampedArray(d),g),i[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const wk={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Mk extends _p{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class Uj extends Tj{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=lie(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(oo.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new vj(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:wh(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:aie(this.layers_),pixelRatio:1,pixelToCoordinateTransform:wh(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Uo(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let a=0,o=e.sources.length;a<o;++a){const d=e.sources[a],g=d instanceof $y?d:d.getSource();if(!g)continue;const b=(s=g.getAttributions())==null?void 0:s(r);typeof b=="string"?i.push(b):b!==void 0&&i.push(...b)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new oie({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Kf(e);i.size[0]=Math.ceil(ms(e)/t),i.size[1]=Math.ceil(Jl(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const a=i.viewState;return a.center=s,a.projection=r,a.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const a=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==a||!Xm(s.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const a=sie(this.layers_[s],e);if(a)r[s]=a;else return}const i={};this.dispatchEvent(new Mk(wk.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,a=e.viewState.resolution;if(a!==this.requestedFrameState_.viewState.resolution||!Xm(s,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const d=Math.round(ms(s)/a),g=Math.round(Jl(s)/a);o=nu(d,g),this.renderedImageCanvas_=new ene(s,a,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Mk(wk.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Uj.prototype.dispose;let Ag=null;function sie(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let a;if(s instanceof HTMLCanvasElement)a=s;else{if(s&&(a=s.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+a);if(a.width===r&&a.height===i)return a.getContext("2d").getImageData(0,0,r,i)}if(!Ag)Ag=nu(r,i,void 0,{willReadFrequently:!0});else{const o=Ag.canvas;o.width!==r||o.height!==i?Ag=nu(r,i,void 0,{willReadFrequently:!0}):Ag.clearRect(0,0,r,i)}return Ag.drawImage(a,0,0,r,i),Ag.getImageData(0,0,r,i)}function aie(n){return n.map(function(e){return e.getLayerState()})}function lie(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=uie(n[r]);return t}function uie(n){let e;return n instanceof $y?n instanceof Fj?e=new Rj({source:n}):n instanceof Tj&&(e=new Oj({source:n})):e=n,e}const u5={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Aie=/\{z\}/g,cie=/\{x\}/g,die=/\{y\}/g,hie=/\{-y\}/g;function fie(n,e,t,r,i){return n.replace(Aie,e.toString()).replace(cie,t.toString()).replace(die,r.toString()).replace(hie,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function pie(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function mie(n,e){return function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return fie(n,a,t[1],t[2],s)}}function zj(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=mie(n[i],e);return gie(r)}function gie(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=Kne(e),s=Pg(i,n.length);return n[s](e,t,r)}}class $x extends Fj{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===$x.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Uo(t),i=t.getState();let s;i==wr.LOADING?(this.tileLoadingKeys_[r]=!0,s=u5.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==wr.ERROR?u5.TILELOADERROR:i==wr.LOADED?u5.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new nie(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=pie(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(zj(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class yie extends $x{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:vie,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:yj,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Rg(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Rg(t,e)))return this.tileGrid;const r=Uo(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Dj(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],d=this.getTileCoordForTileUrlFunction(o,s),g=d?this.tileUrlFunction(d,i,s):void 0,b=new this.tileClass(o,g!==void 0?wr.IDLE:wr.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return b.key=a,b.addEventListener(oo.CHANGE,this.handleTileChange.bind(this)),b}getTile(e,t,r,i,s){const a=this.getProjection();if(!a||!s||Rg(a,s))return this.getTileInternal(e,t,r,i,a||s);const o=[e,t,r],d=this.getKey(),g=this.getTileGridForProjection(a),b=this.getTileGridForProjection(s),E=this.getTileCoordForTileUrlFunction(o,s),S=new gB(a,g,s,b,o,E,this.getTilePixelRatio(i),this.getGutter(),(B,k,z,j)=>this.getTileInternal(B,k,z,j,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return S.key=d,S}getTileInternal(e,t,r,i,s){const a=this.getKey();return this.createTile_(e,t,r,i,s,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Sa(e);if(r){const i=Uo(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function vie(n,e){n.getImage().src=e}function Cie(n,e,t,r){const i=document.createElement("script"),s="olc_"+Uo(e);function a(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const o=setTimeout(function(){a(),t&&t()},1e4);window[s]=function(d){clearTimeout(o),a(),e(d)},document.head.appendChild(i)}class jj extends yie{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Sa("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Cie(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Sa("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const g=i_(t,r);i=wJ(e.bounds,g)}const s=Yx(r),a=e.minzoom||0,o=e.maxzoom||22,d=cO({extent:s,maxZoom:o,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=d,this.tileUrlFunction=zj(e.tiles,d),e.attribution&&!this.getAttributions()){const g=i!==void 0?i:s;this.setAttributions(function(b){return Ru(g,b.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const _ie={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Sk={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class bie extends Pj{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=wh(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,a,o,d){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,a,o,d)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const o=i.viewState.resolution,d=i.viewHints;return(!(d[Xl.ANIMATING]||d[Xl.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=o),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),a=i.getRenderOrder()||null,o=e.wantedResolution,d=e.getReplayState(i);if(!d.dirty&&d.renderedResolution===o&&d.renderedRevision==s&&d.renderedRenderOrder==a)return;const g=i.getSource(),b=!!i.getDeclutter(),E=g.getTileGrid(),B=g.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),k=g.getSourceTiles(t,r,e),z=Uo(i);delete e.hitDetectionImageData[z],e.executorGroups[z]=[],d.dirty=!1;for(let j=0,Y=k.length;j<Y;++j){const q=k[j];if(q.getState()!=wr.LOADED)continue;const ie=q.tileCoord,J=E.getTileCoordExtent(ie),$=Vd(B,J),te=F0($,i.getRenderBuffer()*o,this.tempExtent),W=Xm(J,$)?null:te,oe=new uj(0,$,o,t),fe=aB(o,t),he=function(ge,st){let Qe;const Ze=ge.getStyleFunction()||i.getStyleFunction();if(Ze&&(Qe=Ze(ge,o)),Qe){const We=this.renderFeature(ge,fe,Qe,oe,b,st);d.dirty=d.dirty||We}},Se=q.getFeatures();a&&a!==d.renderedRenderOrder&&Se.sort(a);for(let ge=0,st=Se.length;ge<st;++ge){const Qe=Se[ge];(!W||Ru(W,Qe.getGeometry().getExtent()))&&he.call(this,Qe,ge)}const pe=oe.finish(),we=i.getRenderMode()!=="vector"&&b&&k.length===1?null:$,Ke=new cj(we,o,t,g.getOverlaps(),pe,i.getRenderBuffer(),!0);e.executorGroups[z].push(Ke)}d.renderedRevision=s,d.renderedRenderOrder=a,d.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,i,s){const a=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const d=this.getLayer(),b=d.getSource().getTileGridForProjection(t.viewState.projection),E=$6([e]);F0(E,a*r,E);const S={},B=function(ie,J,$){let te=ie.getId();te===void 0&&(te=Uo(ie));const W=S[te];if(W){if(W!==!0&&$<W.distanceSq){if($===0)return S[te]=!0,s.splice(s.lastIndexOf(W),1),i(ie,d,J);W.geometry=J,W.distanceSq=$}}else{if($===0)return S[te]=!0,i(ie,d,J);s.push(S[te]={feature:ie,layer:d,geometry:J,distanceSq:$,callback:i})}},k=this.renderedTiles,z=Uo(d),j=d.getDeclutter(),Y=j?t.declutter[j].all().map(ie=>ie.value):null;let q;e:for(let ie=0,J=k.length;ie<J;++ie){const $=k[ie],te=b.getTileCoordExtent($.wrappedTileCoord);if(!Ru(te,E))continue;const W=$.executorGroups[z];for(let oe=0,fe=W.length;oe<fe;++oe)if(q=W[oe].forEachFeatureAtCoordinate(e,a,o,r,B,Y),q)break e}return q}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),a=this.renderedProjection,o=a.getExtent(),d=this.renderedResolution,g=s.getTileGridForProjection(a),b=_A(this.renderedPixelToCoordinateTransform_,e.slice()),E=g.getTileCoordForCoordAndResolution(b,d).toString(),S=this.renderedTiles.find(ie=>ie.tileCoord.toString()===E&&ie.getState()===wr.LOADED);if(!S||S.loadingSourceTiles>0){t([]);return}s.getWrapX()&&a.canWrapX()&&!mp(o,g.getTileCoordExtent(S.tileCoord))&&I8(b,a);const B=Uo(i),k=g.getTileCoordExtent(S.wrappedTileCoord),z=yp(k),j=[(b[0]-z[0])/d,(z[1]-b[1])/d],Y=S.getSourceTiles().reduce((ie,J)=>ie.concat(J.getFeatures()),[]);let q=S.hitDetectionImageData[B];if(!q){const ie=cd(g.getTileSize(g.getZForResolution(d,s.zDirection))),J=this.renderedRotation_,$=[this.getRenderTransform(g.getTileCoordCenter(S.wrappedTileCoord),d,0,Jh,ie[0]*Jh,ie[1]*Jh,0)];q=dj(ie,$,Y,i.getStyleFunction(),g.getTileCoordExtent(S.wrappedTileCoord),S.getReplayState(i).renderedResolution,J),S.hitDetectionImageData[B]=q}t(hj(j,Y,q))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),a=s.getZForResolution(this.renderedResolution),o={};return r.forEach(d=>{if(d.tileCoord[0]!==a||d.getState()!==wr.LOADED)return;const g=d.getSourceTiles();for(let b=0,E=g.length;b<E;++b){const S=g[b],B=S.getKey();if(B in o)continue;o[B]=!0;const k=S.tileCoord;if(Ru(e,s.getTileCoordExtent(k))){const z=S.getFeatures();if(z)for(let j=0,Y=z.length;j<Y;++j){const q=z[j],ie=q.getGeometry();Ru(e,ie.getExtent())&&t.push(q)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,a=!(s[Xl.ANIMATING]||s[Xl.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],d=this.getLayer().getDeclutter(),g=d?e.declutter[d]:void 0,b=Uo(this.getLayer()),E=this.renderedTiles;for(let S=0,B=E.length;S<B;++S){const k=E[S],z=k.executorGroups[b];if(z)for(let j=z.length-1;j>=0;--j)z[j].execute(this.context,o,this.getTileRenderTransform(k,e),e.viewState.rotation,a,B2,g)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=Uo(this.getLayer()),i=t.reduce((d,g,b)=>(g.executorGroups[r].forEach(E=>d.push({executorGroup:E,index:b})),d),[]),s=i.map(({executorGroup:d})=>d.getDeferredZIndexContexts()),a={};for(let d=0,g=i.length;d<g;++d){const b=i[d].executorGroup.getDeferredZIndexContexts();for(const E in b)a[E]=!0}Object.keys(a).map(Number).sort(qm).forEach(d=>{s.forEach((g,b)=>{g[d]&&(g[d].forEach(E=>{const{executorGroup:S,index:B}=i[b],k=S.getRenderedContext(),z=k.globalAlpha;k.globalAlpha=this.renderedOpacity_;const j=this.tileClipContexts_[B];j&&j.draw(k),E.draw(k),j&&k.restore(),k.globalAlpha=z,E.clear()}),g[d].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,a=i.resolution,o=i.rotation,d=t.size,g=Math.round(d[0]*r),b=Math.round(d[1]*r),S=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),B=e.tileCoord,k=S.getTileCoordExtent(e.wrappedTileCoord),z=S.getTileCoordExtent(B,this.tempExtent)[0]-k[0];return x8(W4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,a,o,r,g,b,z))}postRender(e,t){var $;const r=t.viewHints,i=!(r[Xl.ANIMATING]||r[Xl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),a=s.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const d=s.getDeclutter(),g=d?Sk[a].filter(te=>!B2.includes(te)):Sk[a],b=t.viewState,E=b.rotation,S=s.getSource(),k=S.getTileGridForProjection(b.projection).getZForResolution(b.resolution,S.zDirection),z=this.renderedTiles,j=[],Y=[],q=[],ie=Uo(s);let J=!0;for(let te=z.length-1;te>=0;--te){const W=z[te];J=J&&!W.getReplayState(s).dirty;const oe=W.executorGroups[ie].filter(ge=>ge.hasExecutors(g));if(oe.length===0)continue;const fe=this.getTileRenderTransform(W,t),he=W.tileCoord[0];let Se=!1;const pe=oe[0].getClipCoords(fe);let we=e,Ke;if(pe){Ke=new J8,we=Ke.getContext();for(let ge=0,st=j.length;ge<st;++ge)if(k!==he&&he<Y[ge]){const Qe=j[ge];Ru([pe[0],pe[3],pe[4],pe[7]],[Qe[0],Qe[3],Qe[4],Qe[7]])&&(Se||(we.save(),Se=!0),we.beginPath(),we.moveTo(pe[0],pe[1]),we.lineTo(pe[2],pe[3]),we.lineTo(pe[4],pe[5]),we.lineTo(pe[6],pe[7]),we.moveTo(Qe[6],Qe[7]),we.lineTo(Qe[4],Qe[5]),we.lineTo(Qe[2],Qe[3]),we.lineTo(Qe[0],Qe[1]),we.clip())}j.push(pe),Y.push(he)}for(let ge=0,st=oe.length;ge<st;++ge)oe[ge].execute(e,[e.canvas.width,e.canvas.height],fe,E,i,g,($=t.declutter)==null?void 0:$[d]);Se&&(we===e?we.restore():q[te]=Ke)}e.globalAlpha=o,this.ready=J,this.tileClipContexts_=q,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,a){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let d=0,g=r.length;d<g;++d)o=O2(i,e,r[d],t,this.boundHandleStyleImageChange_,void 0,s,a)||o;else o=O2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,a);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),a=e.executorGroups[Uo(r)];i.renderedTileRevision=s;const o=e.wrappedTileCoord,d=o[0],g=r.getSource();let b=t.pixelRatio;const S=t.viewState.projection,B=g.getTileGridForProjection(S),k=B.getResolution(e.tileCoord[0]),z=t.pixelRatio/e.wantedResolution*k,j=B.getResolution(d),Y=e.getContext();b=Math.round(Math.max(b,z/b));const q=g.getTilePixelSize(d,b,S);Y.canvas.width=q[0],Y.canvas.height=q[1];const ie=b/z;if(ie!==1){const W=B9(this.tmpTransform_);W4(W,ie,ie),Y.setTransform.apply(Y,W)}const J=B.getTileCoordExtent(o,this.tempExtent),$=z/j,te=B9(this.tmpTransform_);W4(te,$,-$),pJ(te,-J[0],-J[3]);for(let W=0,oe=a.length;W<oe;++W)a[W].execute(Y,[Y.canvas.width*ie,Y.canvas.height*ie],te,0,!0,_ie[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class iC extends X8{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";ia(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new bie(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(P0.PRELOAD)}getUseInterimTilesOnError(){return this.get(P0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(P0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(P0.USE_INTERIM_TILES_ON_ERROR,e)}}class Nj extends $x{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||Yx(t),i=e.tileGrid||cO({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Wj,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Sj,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===wr.IDLE){r.setState(wr.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),a=s.getTileCoordExtent(i),o=i[0],d=s.getResolution(o);F0(a,-d,a);const g=this.tileGrid,b=g.getExtent();b&&Vd(a,b,a);const E=g.getZForResolution(d,this.zDirection);g.forEachTileCoord(a,E,S=>{const B=this.tileUrlFunction(S,e,t);this.sourceTiles_[B]||(this.sourceTiles_[B]=new this.tileClass(S,B?wr.IDLE:wr.EMPTY,B,this.format_,this.tileLoadFunction));const k=this.sourceTiles_[B];r.sourceTiles.push(k),this.tileKeysBySourceTileUrl_[B]||(this.tileKeysBySourceTileUrl_[B]=[]),this.tileKeysBySourceTileUrl_[B].push(r.getKey());const z=k.getState();if(z<wr.LOADED){const j=Y=>{this.handleTileChange(Y);const q=k.getState();if(q===wr.LOADED||q===wr.ERROR){const ie=k.getKey();ie in r.errorTileKeys?k.getState()===wr.LOADED&&delete r.errorTileKeys[ie]:r.loadingSourceTiles--,q===wr.ERROR?r.errorTileKeys[ie]=!0:k.removeEventListener(oo.CHANGE,j),r.loadingSourceTiles===0&&r.setState(j0(r.errorTileKeys)?wr.LOADED:wr.ERROR)}};k.addEventListener(oo.CHANGE,j),r.loadingSourceTiles++}z===wr.IDLE&&(k.extent=g.getTileCoordExtent(S),k.projection=t,k.resolution=g.getResolution(S[0]),k.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(S=>S.getState()===wr.ERROR)?wr.ERROR:wr.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.sourceTiles;for(let r=0,i=t.length;r<i;++r){const s=t[r].getTileUrl(),a=this.getKey();if(!this.tileKeysBySourceTileUrl_[s])return;const o=this.tileKeysBySourceTileUrl_[s][a];o!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(o,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,r,i,s){const a=[e,t,r];let o=this.getTileCoordForTileUrlFunction(a,s);const d=this.getTileGrid().getExtent(),g=this.getTileGridForProjection(s);if(o&&d){const S=g.getTileCoordExtent(o);F0(S,-g.getResolution(e),S),Ru(d,S)||(o=null)}let b=!0;if(o!==null){const S=this.tileGrid,B=g.getResolution(e),k=S.getZForResolution(B,1),z=g.getTileCoordExtent(o);F0(z,-B,z),S.forEachTileCoord(z,k,j=>{b=b&&!this.tileUrlFunction(j,i,s)})}const E=new Une(a,b?wr.EMPTY:wr.IDLE,o,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return E.key=this.getKey(),E}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.tileGrid,s=i.getResolutions().slice(),a=s.map(function(g,b){return i.getOrigin(b)}),o=s.map(function(g,b){return i.getTileSize(b)}),d=Zz+1;for(let g=s.length;g<d;++g)s.push(s[g-1]/2),a.push(a[g-1]),o.push(o[g-1]);r=new qx({extent:i.getExtent(),origins:a,resolutions:s,tileSizes:o}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=cd(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Wj(n,e){n.setLoader(function(t,r,i){gj(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function Gj(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xie={},Qj,Ek={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function oC(n){return n=Math.round(n),n<0?0:n>255?255:n}function Bk(n){return n<0?0:n>1?1:n}function A5(n){return n[n.length-1]==="%"?oC(parseFloat(n)/100*255):oC(parseInt(n))}function fb(n){return n[n.length-1]==="%"?Bk(parseFloat(n)/100):Bk(parseFloat(n))}function c5(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function wie(n){var e=n.replace(/ /g,"").toLowerCase();if(e in Ek)return Ek[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var r=e.indexOf("("),i=e.indexOf(")");if(r!==-1&&i+1===e.length){var s=e.substr(0,r),a=e.substr(r+1,i-(r+1)).split(","),o=1;switch(s){case"rgba":if(a.length!==4)return null;o=fb(a.pop());case"rgb":return a.length!==3?null:[A5(a[0]),A5(a[1]),A5(a[2]),o];case"hsla":if(a.length!==4)return null;o=fb(a.pop());case"hsl":if(a.length!==3)return null;var d=(parseFloat(a[0])%360+360)%360/360,g=fb(a[1]),b=fb(a[2]),E=b<=.5?b*(g+1):b+g-b*g,S=b*2-E;return[oC(c5(S,E,d+1/3)*255),oC(c5(S,E,d)*255),oC(c5(S,E,d-1/3)*255),o];default:return null}}return null}try{Qj=xie.parseCSSColor=wie}catch{}class Mh{constructor(e,t,r,i=1){this.r=e,this.g=t,this.b=r,this.a=i}static parse(e){if(!e)return;if(e instanceof Mh)return e;if(typeof e!="string")return;const t=Qj(e);if(t)return new Mh(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,r,i]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(r)},${i})`}toArray(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e*255/i,t*255/i,r*255/i,i]}toArray01(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e/i,t/i,r/i,i]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:r,a:i}=this;return[e,t,r,i]}}Mh.black=new Mh(0,0,0,1);Mh.white=new Mh(1,1,1,1);Mh.transparent=new Mh(0,0,0,0);Mh.red=new Mh(1,0,0,1);Mh.blue=new Mh(0,0,1,1);var rf=Mh;function RC(n){return typeof n=="object"?["literal",n]:n}function Mie(n,e){let t=n.stops;if(!t)return Sie(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],Iie(a[1])]:[a[0],RC(a[1])]),r?Eie(n,e,t):s?Oie(n,e,t):yB(n,e,t)}function Sie(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,RC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function dO(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Eie(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const d=t[o],g=d[0].zoom;r[g]===void 0&&(r[g]={zoom:g,type:n.type,property:n.property,default:n.default},i[g]=[],s.push(g)),i[g].push([d[0].value,d[1]])}if(fO({},e)==="exponential"){const o=[dO(n),["linear"],["zoom"]];for(const d of s){const g=yB(r[d],e,i[d]);gy(o,d,g,!1)}return o}else{const o=["step",["zoom"]];for(const d of s){const g=yB(r[d],e,i[d]);gy(o,d,g,!0)}return hO(o),o}}function Bie(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Ok(n,e){const t=RC(Bie(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function yB(n,e,t){const r=fO(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const a of t)s.push(["==",i,a[0]],a[1]);return s.push(Ok(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const a of t)gy(s,a[0],a[1],!1);return s.push(Ok(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const a of t)gy(s,a[0],a[1],!0);return hO(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,RC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,a=[dO(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)gy(a,o[0],o[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,RC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function Oie(n,e,t,r=["zoom"]){const i=fO(n,e);let s,a=!1;if(i==="interval")s=["step",r],a=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[dO(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)gy(s,o[0],o[1],a);return hO(s),s}function hO(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function gy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function fO(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function Iie(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}class kie extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var Xp=kie;class pO{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new pO(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Tie=pO;const Vx={kind:"null"},Rr={kind:"number"},ls={kind:"string"},qo={kind:"boolean"},Vm={kind:"color"},yy={kind:"object"},$o={kind:"value"},Pie={kind:"error"},Hx={kind:"collator"},Zx={kind:"formatted"},d_={kind:"resolvedImage"};function If(n,e){return{kind:"array",itemType:n,N:e}}function tu(n){if(n.kind==="array"){const e=tu(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Rie=[Vx,Rr,ls,qo,Vm,Zx,yy,If($o),d_];function DC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!DC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Rie)if(!DC(t,e))return null}}return`Expected ${tu(n)} but found ${tu(e)} instead.`}function mO(n,e){return e.some(t=>t.kind===n.kind)}function KC(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}class gO{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class vB{constructor(e,t,r,i,s){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s}}class sm{constructor(e){this.sections=e}static fromString(e){return new sm([new vB(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof sm?e:sm.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class Q0{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Q0({name:e,available:!1}):null}serialize(){return["image",this.name]}}function qj(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function P2(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof rf)return!0;if(n instanceof gO)return!0;if(n instanceof sm)return!0;if(n instanceof Q0)return!0;if(Array.isArray(n)){for(const e of n)if(!P2(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!P2(n[e]))return!1;return!0}else return!1}function qA(n){if(n===null)return Vx;if(typeof n=="string")return ls;if(typeof n=="boolean")return qo;if(typeof n=="number")return Rr;if(n instanceof rf)return Vm;if(n instanceof gO)return Hx;if(n instanceof sm)return Zx;if(n instanceof Q0)return d_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=qA(r);if(!t)t=i;else{if(t===i)continue;t=$o;break}}return If(t||$o,e)}else return yy}function sC(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof rf||n instanceof sm||n instanceof Q0?n.toString():JSON.stringify(n)}class yO{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!P2(e[1]))return t.error("invalid value");const r=e[1];let i=qA(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new yO(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof rf?["rgba"].concat(this.value.toArray()):this.value instanceof sm?this.value.serialize():this.value}}var R2=yO;class Die{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var Uc=Die;const d5={string:ls,number:Rr,boolean:qo,object:yy};class vO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in d5)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=d5[g],r++}else o=$o;let d;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);d=e[2],r++}i=If(o,d)}else i=d5[s];const a=[];for(;r<e.length;r++){const o=t.parse(e[r],r,$o);if(!o)return null;a.push(o)}return new vO(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(DC(this.type,qA(r))){if(t===this.args.length-1)throw new Uc(`Expected value to be of type ${tu(this.type)}, but found ${tu(qA(r))} instead.`)}else return r}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const r=e.itemType;if(r.kind==="string"||r.kind==="number"||r.kind==="boolean"){t.push(r.kind);const i=e.N;(typeof i=="number"||this.args.length>1)&&t.push(i)}}return t.concat(this.args.map(r=>r.serialize()))}}var Wm=vO;class Xx{constructor(e){this.type=Zx,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let a=1;a<=e.length-1;++a){const o=e[a];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let d=null;if(o["font-scale"]&&(d=t.parse(o["font-scale"],1,Rr),!d))return null;let g=null;if(o["text-font"]&&(g=t.parse(o["text-font"],1,If(ls)),!g))return null;let b=null;if(o["text-color"]&&(b=t.parse(o["text-color"],1,Vm),!b))return null;const E=i[i.length-1];E.scale=d,E.font=g,E.textColor=b}else{const d=t.parse(e[a],1,$o);if(!d)return null;const g=d.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:d,scale:null,font:null,textColor:null})}}return new Xx(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return qA(i)===d_?new vB("",i,null,null,null):new vB(sC(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)};return new sm(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class Jx{constructor(e){this.type=d_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ls);return r?new Jx(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Q0.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Kie={"to-boolean":qo,"to-color":Vm,"to-number":Rr,"to-string":ls};class CO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=Kie[r],s=[];for(let a=1;a<e.length;a++){const o=t.parse(e[a],a,$o);if(!o)return null;s.push(o)}return new CO(i,s)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof rf)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=qj(t[0],t[1],t[2],t[3]),!r))return new rf(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Uc(r||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new Uc(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?sm.fromString(sC(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Q0.fromString(sC(this.args[0].evaluate(e))):sC(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Xx([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Jx(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var iy=CO;const Fie=["Unknown","Point","LineString","Polygon"];class Lie{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Fie[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:r,y:i}=this.featureTileCoord,s=r*t-e[0],a=i*t-e[1],o=this.featureDistanceData.bearing[0],d=this.featureDistanceData.bearing[1];return o*s+d*a}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=rf.parse(e)),t}}var Yj=Lie;class oy{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const r=e[0],i=oy.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let d=null;for(const[g,b]of o){d=new Xj(t.registry,t.path,null,t.scope);const E=[];let S=!1;for(let B=1;B<e.length;B++){const k=e[B],z=Array.isArray(g)?g[B-1]:g.type,j=d.parse(k,1+E.length,z);if(!j){S=!0;break}E.push(j)}if(!S){if(Array.isArray(g)&&g.length!==E.length){d.error(`Expected ${g.length} arguments, but found ${E.length} instead.`);continue}for(let B=0;B<E.length;B++){const k=Array.isArray(g)?g[B]:g.type,z=E[B];d.concat(B+1).checkSubtype(k,z.type)}if(d.errors.length===0)return new oy(r,s,b,E)}}if(o.length===1)t.errors.push(...d.errors);else{const b=(o.length?o:a).map(([S])=>Uie(S)).join(" | "),E=[];for(let S=1;S<e.length;S++){const B=t.parse(e[S],1+E.length);if(!B)return null;E.push(tu(B.type))}t.error(`Expected arguments of type ${b}, but found (${E.join(", ")}) instead.`)}return null}static register(e,t){oy.definitions=t;for(const r in t)e[r]=oy}}function Uie(n){return Array.isArray(n)?`(${n.map(tu).join(", ")})`:`(${tu(n.type)}...)`}var Hy=oy;class e3{constructor(e,t,r){this.type=Hx,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,qo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,qo);if(!s)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,ls),!a)?null:new e3(i,s,a)}evaluate(e){return new gO(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const U0=8192;function _O(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function zie(n){return(180+n)/360}function jie(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function D2(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Nie(n,e){const t=zie(n[0]),r=jie(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*U0),Math.round(r*i*U0)]}function Wie(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],a=n[1]-t[1];return r*a-s*i===0&&r*s<=0&&i*a<=0}function Gie(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function bO(n,e){let t=!1;for(let r=0,i=e.length;r<i;r++){const s=e[r];for(let a=0,o=s.length;a<o-1;a++){if(Wie(n,s[a],s[a+1]))return!1;Gie(n,s[a],s[a+1])&&(t=!t)}}return t}function Qie(n,e){for(let t=0;t<e.length;t++)if(bO(n,e[t]))return!0;return!1}function qie(n,e){return n[0]*e[1]-n[1]*e[0]}function Ik(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],a=e[0]-t[0],o=e[1]-t[1],d=r[0]-t[0],g=r[1]-t[1],b=i*g-d*s,E=a*g-d*o;return b>0&&E<0||b<0&&E>0}function Yie(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return qie(s,i)===0?!1:!!(Ik(n,e,t,r)&&Ik(t,r,n,e))}function $ie(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Yie(n,e,r[i],r[i+1]))return!0;return!1}function $j(n,e){for(let t=0;t<n.length;++t)if(!bO(n[t],e))return!1;for(let t=0;t<n.length-1;++t)if($ie(n[t],n[t+1],e))return!1;return!0}function Vie(n,e){for(let t=0;t<e.length;t++)if($j(n,e[t]))return!0;return!1}function xO(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let a=0;a<n[i].length;a++){const o=Nie(n[i][a],t);_O(e,o),s.push(o)}r.push(s)}return r}function Vj(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=xO(n[i],e,t);r.push(s)}return r}function Hj(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}_O(e,n)}function Hie(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function kk(n,e,t,r){const i=Math.pow(2,r.z)*U0,s=[r.x*U0,r.y*U0],a=[];if(!n)return a;for(const o of n)for(const d of o){const g=[d.x+s[0],d.y+s[1]];Hj(g,e,t,i),a.push(g)}return a}function Tk(n,e,t,r){const i=Math.pow(2,r.z)*U0,s=[r.x*U0,r.y*U0],a=[];if(!n)return a;for(const o of n){const d=[];for(const g of o){const b=[g.x+s[0],g.y+s[1]];_O(e,b),d.push(b)}a.push(d)}if(e[2]-e[0]<=i/2){Hie(e);for(const o of a)for(const d of o)Hj(d,e,t,i)}return a}function Zie(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const s=xO(e.coordinates,r,i),a=kk(n.geometry(),t,r,i);if(!D2(t,r))return!1;for(const o of a)if(!bO(o,s))return!1}if(e.type==="MultiPolygon"){const s=Vj(e.coordinates,r,i),a=kk(n.geometry(),t,r,i);if(!D2(t,r))return!1;for(const o of a)if(!Qie(o,s))return!1}return!0}function Xie(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const s=xO(e.coordinates,r,i),a=Tk(n.geometry(),t,r,i);if(!D2(t,r))return!1;for(const o of a)if(!$j(o,s))return!1}if(e.type==="MultiPolygon"){const s=Vj(e.coordinates,r,i),a=Tk(n.geometry(),t,r,i);if(!D2(t,r))return!1;for(const o of a)if(!Vie(o,s))return!1}return!0}class aC{constructor(e,t){this.type=qo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(P2(e[1])){const r=e[1];if(r.type==="FeatureCollection")for(let i=0;i<r.features.length;++i){const s=r.features[i].geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new aC(r,r.features[i].geometry)}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new aC(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new aC(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Zie(e,this.geometries);if(e.geometryType()==="LineString")return Xie(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var wO=aC;function t3(n){if(n instanceof Hy){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof wO)return!1;let e=!0;return n.eachChild(t=>{e&&!t3(t)&&(e=!1)}),e}function MO(n){if(n instanceof Hy&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!MO(t)&&(e=!1)}),e}function SO(n,e){if(n instanceof Hy&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!SO(r,e)&&(t=!1)}),t}class EO{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new EO(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Zj=EO;class BO{constructor(e,t=[],r,i=new Tie,s=[]){this.registry=e,this.path=t,this.key=t.map(a=>`[${a}]`).join(""),this.scope=i,this.errors=s,this.expectedType=r}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,a){return a==="assert"?new Wm(s,[i]):a==="coerce"?new iy(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let a=s.parse(e,this);if(!a)return null;if(this.expectedType){const o=this.expectedType,d=a.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&d.kind==="value")a=r(a,o,t.typeAnnotation||"assert");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(d.kind==="value"||d.kind==="string"))a=r(a,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,d))return null}if(!(a instanceof R2)&&a.type.kind!=="resolvedImage"&&CB(a)){const o=new Yj;try{a=new R2(a.type,a.evaluate(o))}catch(d){return this.error(d.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new BO(this.registry,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Xp(r,e))}checkSubtype(e,t){const r=DC(e,t);return r&&this.error(r),r}}var Xj=BO;function CB(n){if(n instanceof Zj)return CB(n.boundExpression);if(n instanceof Hy&&n.name==="error")return!1;if(n instanceof e3)return!1;if(n instanceof wO)return!1;const e=n instanceof iy||n instanceof Wm;let t=!0;return n.eachChild(r=>{e?t=t&&CB(r):t=t&&r instanceof R2}),t?t3(n)&&SO(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function Jj(n,e){const t=n.length-1;let r=0,i=t,s=0,a,o;for(;r<=i;)if(s=Math.floor((r+i)/2),a=n[s],o=n[s+1],a<=e){if(s===t||e<o)return s;r=s+1}else if(a>e)i=s-1;else throw new Uc("Input is not a number.");return 0}class OO{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Rr);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let a=1;a<e.length;a+=2){const o=a===1?-1/0:e[a],d=e[a+1],g=a,b=a+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const E=t.parse(d,b,s);if(!E)return null;s=s||E.type,i.push([o,E])}return new OO(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=Jj(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var eN=OO,Jie=Zy;function Zy(n,e,t,r){this.cx=3*n,this.bx=3*(t-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=r,this.p2x=t,this.p2y=r}Zy.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n};Zy.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n};Zy.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx};Zy.prototype.solveCurveX=function(n,e){typeof e>"u"&&(e=1e-6);var t,r,i,s,a;for(i=n,a=0;a<8;a++){if(s=this.sampleCurveX(i)-n,Math.abs(s)<e)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i=i-s/o}if(t=0,r=1,i=n,i<t)return t;if(i>r)return r;for(;t<r;){if(s=this.sampleCurveX(i),Math.abs(s-n)<e)return i;n>s?t=i:r=i,i=(r-t)*.5+t}return i};Zy.prototype.solve=function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))};var eoe=Gj(Jie);function ef(n,e,t){return n*(1-t)+e*t}function toe(n,e,t){return new rf(ef(n.r,e.r,t),ef(n.g,e.g,t),ef(n.b,e.b,t),ef(n.a,e.a,t))}function noe(n,e,t){return n.map((r,i)=>ef(r,e[i],t))}var roe=Object.freeze({__proto__:null,number:ef,color:toe,array:noe});const tN=.95047,nN=1,rN=1.08883,iN=4/29,vy=6/29,oN=3*vy*vy,ioe=vy*vy*vy,ooe=Math.PI/180,soe=180/Math.PI;function h5(n){return n>ioe?Math.pow(n,1/3):n/oN+iN}function f5(n){return n>vy?n*n*n:oN*(n-iN)}function p5(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function m5(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function sN(n){const e=m5(n.r),t=m5(n.g),r=m5(n.b),i=h5((.4124564*e+.3575761*t+.1804375*r)/tN),s=h5((.2126729*e+.7151522*t+.072175*r)/nN),a=h5((.0193339*e+.119192*t+.9503041*r)/rN);return{l:116*s-16,a:500*(i-s),b:200*(s-a),alpha:n.a}}function aN(n){let e=(n.l+16)/116,t=isNaN(n.a)?e:e+n.a/500,r=isNaN(n.b)?e:e-n.b/200;return e=nN*f5(e),t=tN*f5(t),r=rN*f5(r),new rf(p5(3.2404542*t-1.5371385*e-.4985314*r),p5(-.969266*t+1.8760108*e+.041556*r),p5(.0556434*t-.2040259*e+1.0572252*r),n.alpha)}function aoe(n,e,t){return{l:ef(n.l,e.l,t),a:ef(n.a,e.a,t),b:ef(n.b,e.b,t),alpha:ef(n.alpha,e.alpha,t)}}function loe(n){const{l:e,a:t,b:r}=sN(n),i=Math.atan2(r,t)*soe;return{h:i<0?i+360:i,c:Math.sqrt(t*t+r*r),l:e,alpha:n.a}}function uoe(n){const e=n.h*ooe,t=n.c,r=n.l;return aN({l:r,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:n.alpha})}function Aoe(n,e,t){const r=e-n;return n+t*(r>180||r<-180?r-360*Math.round(r/360):r)}function coe(n,e,t){return{h:Aoe(n.h,e.h,t),c:ef(n.c,e.c,t),l:ef(n.l,e.l,t),alpha:ef(n.alpha,e.alpha,t)}}const pb={forward:sN,reverse:aN,interpolate:aoe},mb={forward:loe,reverse:uoe,interpolate:coe};class K2{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,o]of s)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=g5(t,e.base,r,i);else if(e.name==="linear")s=g5(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;s=new eoe(a[0],a[1],a[2],a[3]).solve(g5(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,Rr),!s)return null;const o=[];let d=null;r==="interpolate-hcl"||r==="interpolate-lab"?d=Vm:t.expectedType&&t.expectedType.kind!=="value"&&(d=t.expectedType);for(let g=0;g<a.length;g+=2){const b=a[g],E=a[g+1],S=g+3,B=g+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(o.length&&o[o.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',S);const k=t.parse(E,B,d);if(!k)return null;d=d||k.type,o.push([b,k])}return d.kind!=="number"&&d.kind!=="color"&&!(d.kind==="array"&&d.itemType.kind==="number"&&typeof d.N=="number")?t.error(`Type ${tu(d)} is not interpolatable.`):new K2(d,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=Jj(t,i),o=t[a],d=t[a+1],g=K2.interpolationFactor(this.interpolation,i,o,d),b=r[a].evaluate(e),E=r[a+1].evaluate(e);return this.operator==="interpolate"?roe[this.type.kind.toLowerCase()](b,E,g):this.operator==="interpolate-hcl"?mb.reverse(mb.interpolate(mb.forward(b),mb.forward(E),g)):pb.reverse(pb.interpolate(pb.forward(b),pb.forward(E),g))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t}}function g5(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}var Dg=K2;class F2{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const d=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!d)return null;r=r||d.type,s.push(d)}return i&&s.some(o=>DC(i,o.type))?new F2($o,s):new F2(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args){if(r++,t=s.evaluate(e),t&&t instanceof Q0&&!t.available&&(i||(i=t),t=null,r===this.args.length))return i;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var lN=F2;class IO{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const a=e[s];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,s);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([a,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new IO(r,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}var uN=IO;class kO{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Rr),i=t.parse(e[2],2,If(t.expectedType||$o));if(!r||!i)return null;const s=i.type;return new kO(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Uc(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new Uc(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new Uc(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var doe=kO;class TO{constructor(e,t){this.type=qo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,$o),i=t.parse(e[2],2,$o);return!r||!i?null:mO(r.type,[qo,ls,Rr,Vx,$o])?new TO(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${tu(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(r==null)return!1;if(!KC(t,["boolean","string","number","null"]))throw new Uc(`Expected first argument to be of type boolean, string, number or null, but found ${tu(qA(t))} instead.`);if(!KC(r,["string","array"]))throw new Uc(`Expected second argument to be of type array or string, but found ${tu(qA(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var hoe=TO;class L2{constructor(e,t,r){this.type=Rr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,$o),i=t.parse(e[2],2,$o);if(!r||!i)return null;if(!mO(r.type,[qo,ls,Rr,Vx,$o]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${tu(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Rr);return s?new L2(r,i,s):null}else return new L2(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!KC(t,["boolean","string","number","null"]))throw new Uc(`Expected first argument to be of type boolean, string, number or null, but found ${tu(qA(t))} instead.`);if(!KC(r,["string","array"]))throw new Uc(`Expected second argument to be of type array or string, but found ${tu(qA(r))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(e);return r.indexOf(t,i)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var foe=L2;class PO{constructor(e,t,r,i,s,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},a=[];for(let g=2;g<e.length-1;g+=2){let b=e[g];const E=e[g+1];Array.isArray(b)||(b=[b]);const S=t.concat(g);if(b.length===0)return S.error("Expected at least one branch label.");for(const k of b){if(typeof k!="number"&&typeof k!="string")return S.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return S.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return S.error("Numeric branch labels must be integer values.");if(!r)r=qA(k);else if(S.checkSubtype(r,qA(k)))return null;if(typeof s[String(k)]<"u")return S.error("Branch labels must be unique.");s[String(k)]=a.length}const B=t.parse(E,g,i);if(!B)return null;i=i||B.type,a.push(B)}const o=t.parse(e[1],1,$o);if(!o)return null;const d=t.parse(e[e.length-1],e.length-1,i);return!d||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new PO(r,i,o,s,a,d)}evaluate(e){const t=this.input.evaluate(e);return(qA(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],i={};for(const a of t){const o=i[this.cases[a]];o===void 0?(i[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[o][1].push(a)}const s=a=>this.inputType.kind==="number"?Number(a):a;for(const[a,o]of r)o.length===1?e.push(s(o[0])):e.push(o.map(s)),e.push(this.outputs[a].serialize());return e.push(this.otherwise.serialize()),e}}var poe=PO;class RO{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const o=t.parse(e[a],a,qo);if(!o)return null;const d=t.parse(e[a+1],a+1,r);if(!d)return null;i.push([o,d]),r=r||d.type}const s=t.parse(e[e.length-1],e.length-1,r);return s?new RO(r,i,s):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var moe=RO;class U2{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,$o),i=t.parse(e[2],2,Rr);if(!r||!i)return null;if(!mO(r.type,[If($o),ls,$o]))return t.error(`Expected first argument to be of type array or string, but found ${tu(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Rr);return s?new U2(r.type,r,i,s):null}else return new U2(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!KC(t,["string","array"]))throw new Uc(`Expected first argument to be of type array or string, but found ${tu(qA(t))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(e);return t.slice(r,i)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var goe=U2;function Pk(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function yoe(n,e,t){return e===t}function voe(n,e,t){return e!==t}function Coe(n,e,t){return e<t}function _oe(n,e,t){return e>t}function boe(n,e,t){return e<=t}function xoe(n,e,t){return e>=t}function AN(n,e,t,r){return r.compare(e,t)===0}function woe(n,e,t,r){return!AN(n,e,t,r)}function Moe(n,e,t,r){return r.compare(e,t)<0}function Soe(n,e,t,r){return r.compare(e,t)>0}function Eoe(n,e,t,r){return r.compare(e,t)<=0}function Boe(n,e,t,r){return r.compare(e,t)>=0}function Xy(n,e,t){const r=n!=="=="&&n!=="!=";return class cN{constructor(s,a,o){this.type=qo,this.lhs=s,this.rhs=a,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||a.type.kind==="value"}static parse(s,a){if(s.length!==3&&s.length!==4)return a.error("Expected two or three arguments.");const o=s[0];let d=a.parse(s[1],1,$o);if(!d)return null;if(!Pk(o,d.type))return a.concat(1).error(`"${o}" comparisons are not supported for type '${tu(d.type)}'.`);let g=a.parse(s[2],2,$o);if(!g)return null;if(!Pk(o,g.type))return a.concat(2).error(`"${o}" comparisons are not supported for type '${tu(g.type)}'.`);if(d.type.kind!==g.type.kind&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error(`Cannot compare types '${tu(d.type)}' and '${tu(g.type)}'.`);r&&(d.type.kind==="value"&&g.type.kind!=="value"?d=new Wm(g.type,[d]):d.type.kind!=="value"&&g.type.kind==="value"&&(g=new Wm(d.type,[g])));let b=null;if(s.length===4){if(d.type.kind!=="string"&&g.type.kind!=="string"&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(b=a.parse(s[3],3,Hx),!b)return null}return new cN(d,g,b)}evaluate(s){const a=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const d=qA(a),g=qA(o);if(d.kind!==g.kind||!(d.kind==="string"||d.kind==="number"))throw new Uc(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${d.kind}, ${g.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const d=qA(a),g=qA(o);if(d.kind!=="string"||g.kind!=="string")return e(s,a,o)}return this.collator?t(s,a,o,this.collator.evaluate(s)):e(s,a,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}serialize(){const s=[n];return this.eachChild(a=>{s.push(a.serialize())}),s}}}const Ooe=Xy("==",yoe,AN),Ioe=Xy("!=",voe,woe),koe=Xy("<",Coe,Moe),Toe=Xy(">",_oe,Soe),Poe=Xy("<=",boe,Eoe),Roe=Xy(">=",xoe,Boe);class DO{constructor(e,t,r,i,s,a){this.type=ls,this.number=e,this.locale=t,this.currency=r,this.unit=i,this.minFractionDigits=s,this.maxFractionDigits=a}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Rr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,ls),!s))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,ls),!a))return null;let o=null;if(i.unit&&(o=t.parse(i.unit,1,ls),!o))return null;let d=null;if(i["min-fraction-digits"]&&(d=t.parse(i["min-fraction-digits"],1,Rr),!d))return null;let g=null;return i["max-fraction-digits"]&&(g=t.parse(i["max-fraction-digits"],1,Rr),!g)?null:new DO(r,s,a,o,d,g)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class KO{constructor(e){this.type=Rr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${tu(r.type)} instead.`):new KO(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new Uc(`Expected value to be of type string or array, but found ${tu(qA(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Doe=KO;const dN={"==":Ooe,"!=":Ioe,">":Toe,"<":koe,">=":Roe,"<=":Poe,array:Wm,at:doe,boolean:Wm,case:moe,coalesce:lN,collator:e3,format:Xx,image:Jx,in:hoe,"index-of":foe,interpolate:Dg,"interpolate-hcl":Dg,"interpolate-lab":Dg,length:Doe,let:uN,literal:R2,match:poe,number:Wm,"number-format":DO,object:Wm,slice:goe,step:eN,string:Wm,"to-boolean":iy,"to-color":iy,"to-number":iy,"to-string":iy,var:Zj,within:wO};function Rk(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,a=qj(e,t,r,s);if(a)throw new Uc(a);return new rf(e/255*s,t/255*s,r/255*s,s)}function Dk(n,e){return n in e}function y5(n,e){const t=e[n];return typeof t>"u"?null:t}function Koe(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function cg(n){return{type:n}}Hy.register(dN,{error:[Pie,[ls],(n,[e])=>{throw new Uc(e.evaluate(n))}],typeof:[ls,[$o],(n,[e])=>tu(qA(e.evaluate(n)))],"to-rgba":[If(Rr,4),[Vm],(n,[e])=>e.evaluate(n).toArray()],rgb:[Vm,[Rr,Rr,Rr],Rk],rgba:[Vm,[Rr,Rr,Rr,Rr],Rk],has:{type:qo,overloads:[[[ls],(n,[e])=>Dk(e.evaluate(n),n.properties())],[[ls,yy],(n,[e,t])=>Dk(e.evaluate(n),t.evaluate(n))]]},get:{type:$o,overloads:[[[ls],(n,[e])=>y5(e.evaluate(n),n.properties())],[[ls,yy],(n,[e,t])=>y5(e.evaluate(n),t.evaluate(n))]]},"feature-state":[$o,[ls],(n,[e])=>y5(e.evaluate(n),n.featureState||{})],properties:[yy,[],n=>n.properties()],"geometry-type":[ls,[],n=>n.geometryType()],id:[$o,[],n=>n.id()],zoom:[Rr,[],n=>n.globals.zoom],pitch:[Rr,[],n=>n.globals.pitch||0],"distance-from-center":[Rr,[],n=>n.distanceFromCenter()],"heatmap-density":[Rr,[],n=>n.globals.heatmapDensity||0],"line-progress":[Rr,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[Rr,[],n=>n.globals.skyRadialProgress||0],accumulated:[$o,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Rr,cg(Rr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Rr,cg(Rr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Rr,overloads:[[[Rr,Rr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Rr],(n,[e])=>-e.evaluate(n)]]},"/":[Rr,[Rr,Rr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Rr,[Rr,Rr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Rr,[],()=>Math.LN2],pi:[Rr,[],()=>Math.PI],e:[Rr,[],()=>Math.E],"^":[Rr,[Rr,Rr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Rr,[Rr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Rr,[Rr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Rr,[Rr],(n,[e])=>Math.log(e.evaluate(n))],log2:[Rr,[Rr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Rr,[Rr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Rr,[Rr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Rr,[Rr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Rr,[Rr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Rr,[Rr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Rr,[Rr],(n,[e])=>Math.atan(e.evaluate(n))],min:[Rr,cg(Rr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Rr,cg(Rr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Rr,[Rr],(n,[e])=>Math.abs(e.evaluate(n))],round:[Rr,[Rr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Rr,[Rr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Rr,[Rr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[qo,[ls,$o],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[qo,[$o],(n,[e])=>n.id()===e.value],"filter-type-==":[qo,[ls],(n,[e])=>n.geometryType()===e.value],"filter-<":[qo,[ls,$o],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[qo,[$o],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[qo,[ls,$o],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[qo,[$o],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[qo,[ls,$o],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[qo,[$o],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[qo,[ls,$o],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[qo,[$o],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[qo,[$o],(n,[e])=>e.value in n.properties()],"filter-has-id":[qo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[qo,[If(ls)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[qo,[If($o)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[qo,[ls,If($o)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[qo,[ls,If($o)],(n,[e,t])=>Koe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:qo,overloads:[[[qo,qo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[cg(qo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:qo,overloads:[[[qo,qo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[cg(qo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[qo,[qo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[qo,[ls],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[ls,[ls],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[ls,[ls],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[ls,cg($o),(n,e)=>e.map(t=>sC(t.evaluate(n))).join("")],"resolved-locale":[ls,[Hx],(n,[e])=>e.evaluate(n).resolvedLocale()]});var hN=dN;function _B(n){return{result:"success",value:n}}function X1(n){return{result:"error",value:n}}function Foe(n){return n["property-type"]==="data-driven"}function Loe(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Uoe(n){return!!n.expression&&n.expression.interpolated}function fN(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}class zoe{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Yj,this._defaultValue=t?Goe(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,a,o,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=d||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,a,o,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=d||null;try{const g=this.expression.evaluate(this._evaluator);if(g==null||typeof g=="number"&&g!==g)return this._defaultValue;if(this._enumValues&&!(g in this._enumValues))throw new Uc(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(g)} instead.`);return g}catch(g){return this._warningHistory[g.message]||(this._warningHistory[g.message]=!0,typeof console<"u"&&console.warn(g.message)),this._defaultValue}}}function joe(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in hN}function bB(n,e){const t=new Xj(hN,[],e?Woe(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?_B(new zoe(r,e)):X1(t.errors)}class Kk{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!MO(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}}class Fk{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!MO(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}interpolationFactor(e,t,r){return this.interpolationType?Dg.interpolationFactor(this.interpolationType,e,t,r):0}}function Noe(n,e){if(n=bB(n,e),n.result==="error")return n;const t=n.value.expression,r=t3(t);if(!r&&!Foe(e))return X1([new Xp("","data expressions not supported")]);const i=SO(t,["zoom","pitch","distance-from-center"]);if(!i&&!Loe(e))return X1([new Xp("","zoom expressions not supported")]);const s=zb(t);if(!s&&!i)return X1([new Xp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Xp)return X1([s]);if(s instanceof Dg&&!Uoe(e))return X1([new Xp("",'"interpolate" expressions cannot be used with this property')]);if(!s)return _B(r?new Kk("constant",n.value):new Kk("source",n.value));const a=s instanceof Dg?s.interpolation:void 0;return _B(r?new Fk("camera",n.value,s.labels,a):new Fk("composite",n.value,s.labels,a))}function zb(n){let e=null;if(n instanceof uN)e=zb(n.result);else if(n instanceof lN){for(const t of n.args)if(e=zb(t),e)break}else(n instanceof eN||n instanceof Dg)&&n.input instanceof Hy&&n.input.name==="zoom"&&(e=n);return e instanceof Xp||n.eachChild(t=>{const r=zb(t);r instanceof Xp?e=r:!e&&r?e=new Xp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Xp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Woe(n){const e={color:Vm,string:ls,number:Rr,enum:ls,boolean:qo,formatted:Zx,resolvedImage:d_};return n.type==="array"?If(e[n.value]||$o,n.length):e[n.type]}function Goe(n){return n.type==="color"&&(fN(n.default)||Array.isArray(n.default))?new rf(0,0,0,0):n.type==="color"?rf.parse(n.default)||null:n.default===void 0?null:n.default}function Qoe(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function xB(n){if(Array.isArray(n))return n.map(xB);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=xB(n[t]);return e}return Qoe(n)}var pN={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function mN(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!mN(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function qoe(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};mN(n)||(n=z2(n));const t=n;let r=!0;try{r=Yoe(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const i=pN[`filter_${e}`],s=bB(r,i);let a=null;if(s.result==="error")throw new Error(s.value.map(b=>`${b.key}: ${b.message}`).join(", "));a=(b,E,S)=>s.value.evaluate(b,E,{},S);let o=null,d=null;if(r!==t){const b=bB(t,i);if(b.result==="error")throw new Error(b.value.map(E=>`${E.key}: ${E.message}`).join(", "));o=(E,S,B,k,z)=>b.value.evaluate(E,S,{},B,void 0,void 0,k,z),d=!t3(b.value.expression)}a=a;const g=vN(r);return{filter:a,dynamicFilter:o||void 0,needGeometry:g,needFeature:!!d}}function Yoe(n){if(!Cy(n))return n;let e=xB(n);return yN(e),e=gN(e),e}function gN(n){if(!Array.isArray(n))return n;const e=Hoe(n);return e===!0?e:e.map(t=>gN(t))}function yN(n){let e=!1;const t=[];if(n[0]==="case"){for(let r=1;r<n.length-1;r+=2)e=e||Cy(n[r]),t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="match"){e=e||Cy(n[1]);for(let r=2;r<n.length-1;r+=2)t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="step"){e=e||Cy(n[1]);for(let r=1;r<n.length-1;r+=2)t.push(n[r+1])}e&&(n.length=0,n.push("any",...t));for(let r=1;r<n.length;r++)yN(n[r])}function Cy(n){if(!Array.isArray(n))return!1;if($oe(n[0]))return!0;for(let e=1;e<n.length;e++){const t=n[e];if(Cy(t))return!0}return!1}function $oe(n){return n==="pitch"||n==="distance-from-center"}const Voe=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Hoe(n){if(Voe.has(n[0]))for(let e=1;e<n.length;e++){const t=n[e];if(Cy(t))return!0}return n}function Zoe(n,e){return n<e?-1:n>e?1:0}function vN(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(vN(n[e]))return!0;return!1}function z2(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?v5(n[1],n[2],"=="):e==="!="?gb(v5(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?v5(n[1],n[2],e):e==="any"?Xoe(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(z2)):e==="none"?["all"].concat(n.slice(1).map(z2).map(gb)):e==="in"?Lk(n[1],n.slice(2)):e==="!in"?gb(Lk(n[1],n.slice(2))):e==="has"?Uk(n[1]):e==="!has"?gb(Uk(n[1])):e==="within"?n:!0}function v5(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function Xoe(n){return["any"].concat(n.map(z2))}function Lk(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Zoe)]]:["filter-in-small",n,["literal",e]]}}function Uk(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function gb(n){return["!",n]}var Joe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ese(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return Joe.forEach(r=>{r in e&&(t[r]=e[r])}),t}function CN(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=ese(n[t],e[n[t].ref]));return n}var zk={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Mv=" ",jk=/(italic|oblique)$/i,Nk={},tse=function(n,e,t){var r=Nk[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",a=[],o,d,g=0,b=n.length;g<b;++g){var E=n[g],S=E.split(" "),B=S[S.length-1].toLowerCase();B=="normal"||B=="italic"||B=="oblique"?(s=d?s:B,d=!0,S.pop(),B=S[S.length-1].toLowerCase()):jk.test(B)&&(B=B.replace(jk,""),s=d?s:S[S.length-1].replace(B,""),d=!0);for(var k in zk){var z=S.length>1?S[S.length-2].toLowerCase():"";if(B==k||B==k.replace("-","")||z+"-"+B==k){i=o?i:zk[k],S.pop(),z&&k.startsWith(z)&&S.pop();break}}!o&&typeof B=="number"&&(i=B,o=!0);var j=S.join(Mv).replace("Klokantech Noto Sans","Noto Sans");j.indexOf(Mv)!==-1&&(j='"'+j+'"'),a.push(j)}r=Nk[n]=[s,i,a]}return r[0]+Mv+r[1]+Mv+e+"px"+(t?"/"+t:"")+Mv+r[2]},wB=Gj(tse);const _N="https://api.mapbox.com";function FO(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function nse(n,e,t){const r=FO(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${_N}/styles/v1/${s}/sprite?access_token=${e}`}function j2(n,e){const t=FO(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${_N}/styles/v1/${i}?&access_token=${e}`}const rse=["a","b","c","d"];function jb(n,e,t,r){const i=new URL(n,r),s=FO(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const a=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${a}.webp?access_token=${e}`]}return rse.map(a=>`https://${a}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const Wk={},Gk={};let ise=0;function LO(n){return n.id||(n.id=ise++),n.id}function ose(n,e){return LO(n)+"."+Uo(e)}function bN(n){let e=Wk[n.id];return e||(e={},Wk[LO(n)]=e),e}function sse(n){let e=Gk[n.id];return e||(e={},Gk[LO(n)]=e),e}function C5(n){return n*Math.PI/180}const am=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function n3(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function UO(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function Nv(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const w1={};function Ky(n,e,t={},r){if(e in w1)return r&&(r.request=w1[e][0]),w1[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=Iy(()=>i).then(a=>(a instanceof Request||(a=new Request(a)),a.headers.get("Accept")||a.headers.set("Accept","application/json"),r&&(r.request=a),fetch(a).then(function(o){return delete w1[e],o.ok?o.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(o){return delete w1[e],Promise.reject(new Error("Error fetching source "+e))})));return w1[e]=[i,s],s}function xN(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=j2(n,e.accessToken),Ky("Style",n,e);else return Promise.resolve(n)}const Qk={};function wN(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=Qk[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(o,d)=>{const g=t.transformRequest&&t.transformRequest(d,"Tiles")||d;if(o instanceof Sj)o.setLoader((b,E,S)=>{Iy(()=>g).then(B=>{fetch(B).then(k=>k.arrayBuffer()).then(k=>{const j=o.getFormat().readFeatures(k,{extent:b,featureProjection:S});o.setFeatures(j)}).catch(k=>o.setState(wr.ERROR))})});else{const b=o.getImage();Iy(()=>g).then(E=>{E instanceof Request?fetch(E).then(S=>S.blob()).then(S=>{const B=URL.createObjectURL(S);b.addEventListener("load",()=>URL.revokeObjectURL(B)),b.addEventListener("error",()=>URL.revokeObjectURL(B)),b.src=B}).catch(S=>o.setState(wr.ERROR)):b.src=E})}});const a=n.url;if(a&&!n.tiles){const o=jb(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:s});else{const d={};i=Ky("Source",o[0],t,d).then(function(g){return g.tiles=g.tiles.map(function(b){return g.scheme==="tms"&&(b=b.replace("{y}","{-y}")),jb(b,t.accessToken,t.accessTokenParam||"access_token",d.request.url)[0]}),Promise.resolve({tileJson:g,tileLoadFunction:s})})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),jb(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s});Qk[r]=i}return i}function qk(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=n3(i[0],i[1]),a=s.getContext("2d");a.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=a.getImageData(0,0,i[0],i[1]);a.globalCompositeOperation="destination-over",a.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const d=o.data;for(let g=0,b=o.width;g<b;++g)for(let E=0,S=o.height;E<S;++E){const B=(E*b+g)*4;d[B+3]>0&&a.arc(g,E,t*e.pixelRatio,0,2*Math.PI)}return a.fill(),s}function ase(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function Yk(n,e,t){const r=n3(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),a=s.data;for(let o=0,d=s.width;o<d;++o)for(let g=0,b=s.height;g<b;++g){const E=(g*d+o)*4,S=a[E+3]/255,B=.75,k=.1,z=ase(B-k,B+k,S);z>0?(a[E+0]=Math.round(255*t.r*z),a[E+1]=Math.round(255*t.g*z),a[E+2]=Math.round(255*t.b*z),a[E+3]=Math.round(255*z)):a[E+3]=0}return i.putImageData(s,0,0),r}const lse=Array(256).join(" ");function MB(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=lse.slice(0,Math.round(e/.1));for(let s=0,a=r.length;s<a;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let _5;function MN(){return _5||(_5=n3(1,1).getContext("2d")),_5}function dg(n,e){return MN().measureText(n).width+(n.length-1)*e}const $k={};function SB(n,e,t,r){if(n.indexOf(`
`)!==-1){const a=n.split(`
`),o=[];for(let d=0,g=a.length;d<g;++d)o.push(SB(a[d],e,t,r));return o.join(`
`)}const i=t+","+e+","+n+","+r;let s=$k[i];if(!s){const a=n.split(" ");if(a.length>1){const o=MN();o.font=e;const g=o.measureText("M").width*t;let b="";const E=[];for(let S=0,B=a.length;S<B;++S){const k=a[S],z=b+(b?" ":"")+k;dg(z,r)<=g?b=z:(b&&E.push(b),b=k)}b&&E.push(b);for(let S=0,B=E.length;S<B&&B>1;++S){const k=E[S];if(dg(k,r)<g*.35){const z=S>0?dg(E[S-1],r):1/0,j=S<B-1?dg(E[S+1],r):1/0;E.splice(S,1),B-=1,z<j?(E[S-1]+=" "+k,S-=1):E[S]=k+" "+E[S]}}for(let S=0,B=E.length-1;S<B;++S){const k=E[S],z=E[S+1];if(dg(k,r)>g*.7&&dg(z,r)<g*.6){const j=k.split(" "),Y=j.pop();dg(Y,r)<g*.2&&(E[S]=j.join(" "),E[S+1]=Y+" "+z),B-=1}}s=E.join(`
`)}else s=n;s=MB(s,r),$k[i]=s}return s}const use=/font-family: ?([^;]*);/,Ase=/("|')/g;let yb;function cse(n){if(!yb){yb={};const e=document.styleSheets;for(let t=0,r=e.length;t<r;++t){const i=e[t];try{const s=i.rules||i.cssRules;if(s)for(let a=0,o=s.length;a<o;++a){const d=s[a];if(d.type==5){const g=d.cssText.match(use);yb[g[1].replace(Ase,"")]=!0}}}catch{}}}return n in yb}const b5={};function dse(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in b5)return b5[t];const r=[];for(let i=0,s=n.length;i<s;++i){n[i]=n[i].replace("Arial Unicode MS","Arial");const a=n[i],o=wB(a,1);yz(o);const d=o.split(" ");r.push([d.slice(3).join(" ").replace(/"/g,""),d[1],d[0]])}for(let i=0,s=r.length;i<s;++i){const a=r[i],o=a[0];if(!cse(o)&&Gp.get(`${a[2]}
${a[1]} 
${o}`)!==100){const d=e.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",a[1]).replace("{-fontstyle}",a[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",a[2]);if(!document.querySelector('link[href="'+d+'"]')){const g=document.createElement("link");g.href=d,g.rel="stylesheet",document.head.appendChild(g)}}}return b5[t]=n,n}const hse={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},fse={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},pse=function(n,e){const t=Noe(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},EB={},N2={zoom:0};let vb,x5;function bi(n,e,t,r,i,s,a){const o=n.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[o]||(s[o]={});const d=s[o];if(!d[t]){let g=(n[e]||EB)[t];const b=pN[`${e}_${n.type}`][t];g===void 0&&(g=b.default);let E=joe(g);if(!E&&fN(g)&&(g=Mie(g,b),E=!0),E){const S=pse(g,b);d[t]=S.evaluate.bind(S)}else b.type=="color"&&(g=rf.parse(g)),d[t]=function(){return g}}return N2.zoom=r,d[t](N2,i,a)}function Vk(n,e,t,r,i){return bi(n,"layout",`${r}-allow-overlap`,e,t,i)?bi(n,"layout",`${r}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function mse(n,e,t,r,i){return i||console.warn("No filterCache provided to evaluateFilter()"),n in i||(i[n]=qoe(e).filter),N2.zoom=r,i[n](N2,t)}function M0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const gse=/\{[^{}}]*\}/g;function w5(n,e){return n.replace(gse,function(t){return e[t.slice(1,-1)]||""})}const yse={};function vse(n,e,t,r=am,i=void 0,s=void 0,a=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");yse[ose(e,n)]=Array.from(arguments);let d,g,b;if(s){if(typeof Image<"u"){const W=new Image;let oe;Iy(()=>s).then(fe=>{fe instanceof Request?fetch(fe).then(he=>he.blob()).then(he=>{oe=URL.createObjectURL(he),W.src=oe}).catch(()=>{}):(W.crossOrigin="anonymous",W.src=fe,oe&&URL.revokeObjectURL(oe))}),W.onload=function(){d=W,g=[W.width,W.height],n.changed(),W.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const W=self;W.postMessage({action:"loadImage",src:s}),W.addEventListener("message",function(fe){fe.data.action==="imageLoaded"&&fe.data.src===s&&(d=fe.data.image,g=[d.width,d.height])})}}const E=CN(e.layers),S={},B=[],k={},z={},j=bN(e),Y=sse(e);let q;for(let W=0,oe=E.length;W<oe;++W){const fe=E[W],he=fe.id;if(typeof t=="string"&&fe.source==t||Array.isArray(t)&&t.indexOf(he)!==-1){const Se=fe["source-layer"];if(q){if(fe.source!==q)throw new Error(`Layer "${he}" does not use source "${q}`)}else{q=fe.source;const we=e.sources[q];if(!we)throw new Error(`Source "${q}" is not defined`);const Ke=we.type;if(Ke!=="vector"&&Ke!=="geojson")throw new Error(`Source "${q}" is not of type "vector" or "geojson", but "${Ke}"`)}let pe=S[Se];pe||(pe=[],S[Se]=pe),pe.push({layer:fe,index:W}),B.push(he)}}const ie=new k0,J=new Gm,$=[],te=function(W,oe,fe){const he=W.getProperties(),Se=S[he.layer];if(!Se)return;let pe=r.indexOf(oe);pe==-1&&(pe=UO(oe,r));const we=hse[W.getGeometry().getType()],Ke={id:W.getId(),properties:he,type:we},ge=n.get("mapbox-featurestate")[W.getId()];let st=-1;for(let Qe=0,Ze=Se.length;Qe<Ze;++Qe){const We=Se[Qe],Ce=We.layer,Pe=Ce.id;if(fe!==void 0&&fe!==Pe)continue;const it=Ce.layout||EB,vt=Ce.paint||EB;if(it.visibility==="none"||"minzoom"in Ce&&pe<Ce.minzoom||"maxzoom"in Ce&&pe>=Ce.maxzoom)continue;const _t=Ce.filter;if(!_t||mse(Pe,_t,Ke,pe,Y)){let ft,Dt,Tt,Ue,Re,Be;const nt=We.index;if(we==3&&(Ce.type=="fill"||Ce.type=="fill-extrusion"))if(Dt=bi(Ce,"paint",Ce.type+"-opacity",pe,Ke,j,ge),Ce.type+"-pattern"in vt){const Mr=bi(Ce,"paint",Ce.type+"-pattern",pe,Ke,j,ge);if(Mr){const Yn=typeof Mr=="string"?w5(Mr,he):Mr.toString();if(d&&i&&i[Yn]){++st,Be=$[st],(!Be||!Be.getFill()||Be.getStroke()||Be.getText())&&(Be=new Hh({fill:new Gm}),$[st]=Be),Tt=Be.getFill(),Be.setZIndex(nt);const er=Yn+"."+Dt;let qe=z[er];if(!qe){const ce=i[Yn],me=n3(ce.width,ce.height),tt=me.getContext("2d");tt.globalAlpha=Dt,tt.drawImage(d,ce.x,ce.y,ce.width,ce.height,0,0,ce.width,ce.height),qe=tt.createPattern(me,"repeat"),z[er]=qe}Tt.setColor(qe)}}}else ft=M0(bi(Ce,"paint",Ce.type+"-color",pe,Ke,j,ge),Dt),Ce.type+"-outline-color"in vt&&(Re=M0(bi(Ce,"paint",Ce.type+"-outline-color",pe,Ke,j,ge),Dt)),Re||(Re=ft),(ft||Re)&&(++st,Be=$[st],(!Be||ft&&!Be.getFill()||!ft&&Be.getFill()||Re&&!Be.getStroke()||!Re&&Be.getStroke()||Be.getText())&&(Be=new Hh({fill:ft?new Gm:void 0,stroke:Re?new k0:void 0}),$[st]=Be),ft&&(Tt=Be.getFill(),Tt.setColor(ft)),Re&&(Ue=Be.getStroke(),Ue.setColor(Re),Ue.setWidth(.5)),Be.setZIndex(nt));if(we!=1&&Ce.type=="line"){"line-pattern"in vt?ft=void 0:ft=M0(bi(Ce,"paint","line-color",pe,Ke,j,ge),bi(Ce,"paint","line-opacity",pe,Ke,j,ge));const Mr=bi(Ce,"paint","line-width",pe,Ke,j,ge);ft&&Mr>0&&(++st,Be=$[st],(!Be||!Be.getStroke()||Be.getFill()||Be.getText())&&(Be=new Hh({stroke:new k0}),$[st]=Be),Ue=Be.getStroke(),Ue.setLineCap(bi(Ce,"layout","line-cap",pe,Ke,j,ge)),Ue.setLineJoin(bi(Ce,"layout","line-join",pe,Ke,j,ge)),Ue.setMiterLimit(bi(Ce,"layout","line-miter-limit",pe,Ke,j,ge)),Ue.setColor(ft),Ue.setWidth(Mr),Ue.setLineDash(vt["line-dasharray"]?bi(Ce,"paint","line-dasharray",pe,Ke,j,ge).map(function(Yn){return Yn*Mr}):null),Be.setZIndex(nt))}let Ct=!1,pt=null,zt=0,tn,Lt,gn;if((we==1||we==2)&&"icon-image"in it){const Mr=bi(Ce,"layout","icon-image",pe,Ke,j,ge);if(Mr){tn=typeof Mr=="string"?w5(Mr,he):Mr.toString();let Yn;const er=o?o(n,tn):void 0;if(d&&i&&i[tn]||er){const qe=bi(Ce,"layout","icon-rotation-alignment",pe,Ke,j,ge);if(we==2){const ce=W.getGeometry();if(ce.getFlatMidpoint||ce.getFlatMidpoints){const me=ce.getExtent();if(Math.sqrt(Math.max(Math.pow((me[2]-me[0])/oe,2),Math.pow((me[3]-me[1])/oe,2)))>150){const Et=ce.getType()==="MultiLineString"?ce.getFlatMidpoints():ce.getFlatMidpoint();if(x5||(vb=[NaN,NaN],x5=new Ad("Point",vb,[],2,{},void 0)),Yn=x5,vb[0]=Et[0],vb[1]=Et[1],bi(Ce,"layout","symbol-placement",pe,Ke,j,ge)==="line"&&qe==="map"){const on=ce.getStride(),rr=ce.getFlatCoordinates();for(let Oe=0,se=rr.length-on;Oe<se;Oe+=on){const _e=rr[Oe],p=rr[Oe+1],Ne=rr[Oe+on],$e=rr[Oe+on+1],rt=Math.min(_e,Ne),dt=Math.max(_e,Ne),ct=Et[0],Qt=Et[1],Vt=($e-p)*(ct-_e)-(Ne-_e)*(Qt-p);if(Math.abs(Vt)<.001&&ct<=dt&&ct>=rt){zt=Math.atan2(p-$e,Ne-_e);break}}}}}}if(we!==2||Yn){const ce=bi(Ce,"layout","icon-size",pe,Ke,j,ge),me=vt["icon-color"]!==void 0?bi(Ce,"paint","icon-color",pe,Ke,j,ge):null;if(!me||me.a!==0){const tt=bi(Ce,"paint","icon-halo-color",pe,Ke,j,ge),Et=bi(Ce,"paint","icon-halo-width",pe,Ke,j,ge);let $t=`${tn}.${ce}.${Et}.${tt}`;if(me!==null&&($t+=`.${me}`),Lt=k[$t],!Lt){const on=Vk(Ce,pe,Ke,"icon",j);let rr;"icon-offset"in it&&(rr=bi(Ce,"layout","icon-offset",pe,Ke,j,ge).slice(0),rr[0]*=ce,rr[1]*=-ce);let Oe=me?[me.r*255,me.g*255,me.b*255,me.a]:void 0;if(er){const se={color:Oe,rotateWithView:qe==="map",displacement:rr,declutterMode:on,scale:ce};typeof er=="string"?se.src=er:(se.img=er,se.imgSize=[er.width,er.height]),Lt=new g2(se)}else{const se=i[tn];let _e,p,Ne;Et?se.sdf?(_e=qk(Yk(d,se,me||[0,0,0,1]),{x:0,y:0,width:se.width,height:se.height,pixelRatio:se.pixelRatio},Et,tt),Oe=void 0):_e=qk(d,se,Et,tt):(se.sdf?(b||(b=Yk(d,{x:0,y:0,width:g[0],height:g[1]},{r:1,g:1,b:1,a:1})),_e=b):_e=d,p=[se.width,se.height],Ne=[se.x,se.y]),Lt=new g2({color:Oe,img:_e,imgSize:g,size:p,offset:Ne,rotateWithView:qe==="map",scale:ce/se.pixelRatio,displacement:rr,declutterMode:on})}k[$t]=Lt}}Lt&&(++st,Be=$[st],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new Hh,$[st]=Be),Be.setGeometry(Yn),Lt.setRotation(zt+C5(bi(Ce,"layout","icon-rotate",pe,Ke,j,ge))),Lt.setOpacity(bi(Ce,"paint","icon-opacity",pe,Ke,j,ge)),Lt.setAnchor(fse[bi(Ce,"layout","icon-anchor",pe,Ke,j,ge)]),Be.setImage(Lt),pt=Be.getText(),Be.setText(void 0),Be.setZIndex(nt),Ct=!0,gn=!1)}else gn=!0}}}if(we==1&&Ce.type==="circle"){++st,Be=$[st],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new Hh,$[st]=Be);const Mr="circle-radius"in vt?bi(Ce,"paint","circle-radius",pe,Ke,j,ge):5,Yn=M0(bi(Ce,"paint","circle-stroke-color",pe,Ke,j,ge),bi(Ce,"paint","circle-stroke-opacity",pe,Ke,j,ge)),er=bi(Ce,"paint","circle-translate",pe,Ke,j,ge),qe=M0(bi(Ce,"paint","circle-color",pe,Ke,j,ge),bi(Ce,"paint","circle-opacity",pe,Ke,j,ge)),ce=bi(Ce,"paint","circle-stroke-width",pe,Ke,j,ge),me=Mr+"."+Yn+"."+qe+"."+ce+"."+er[0]+"."+er[1];Lt=k[me],Lt||(Lt=new n_({radius:Mr,displacement:[er[0],-er[1]],stroke:Yn&&ce>0?new k0({width:ce,color:Yn}):void 0,fill:qe?new Gm({color:qe}):void 0,declutterMode:"none"}),k[me]=Lt),Be.setImage(Lt),pt=Be.getText(),Be.setText(void 0),Be.setGeometry(void 0),Be.setZIndex(nt),Ct=!0}let Nn,rn,or,Kn,pn,Xn;if("text-field"in it){Kn=Math.round(bi(Ce,"layout","text-size",pe,Ke,j,ge));const Mr=bi(Ce,"layout","text-font",pe,Ke,j,ge);or=bi(Ce,"layout","text-line-height",pe,Ke,j,ge),rn=wB(a?a(Mr,e.metadata?e.metadata["ol:webfonts"]:void 0):Mr,Kn,or),rn.includes("sans-serif")||(rn+=",sans-serif"),pn=bi(Ce,"layout","text-letter-spacing",pe,Ke,j,ge),Xn=bi(Ce,"layout","text-max-width",pe,Ke,j,ge);const Yn=bi(Ce,"layout","text-field",pe,Ke,j,ge);typeof Yn=="object"&&Yn.sections?Yn.sections.length===1?Nn=Yn.toString():Nn=Yn.sections.reduce((er,qe,ce)=>{const me=qe.fontStack?qe.fontStack.split(","):Mr,tt=wB(a?a(me):me,Kn*(qe.scale||1),or);let Et=qe.text;if(Et===`
`)return er.push(`
`,""),er;if(we==2)return er.push(MB(Et,pn),tt),er;Et=SB(Et,tt,Xn,pn).split(`
`);for(let $t=0,on=Et.length;$t<on;++$t)$t>0&&er.push(`
`,""),er.push(Et[$t],tt);return er},[]):Nn=w5(Yn,he).trim(),Dt=bi(Ce,"paint","text-opacity",pe,Ke,j,ge)}if(Nn&&Dt&&!gn){Ct||(++st,Be=$[st],(!Be||!Be.getText()||Be.getFill()||Be.getStroke())&&(Be=new Hh,$[st]=Be),Be.setImage(void 0),Be.setGeometry(void 0));const Mr=Vk(Ce,pe,Ke,"text",j);Be.getText()||Be.setText(pt),pt=Be.getText(),(!pt||"getDeclutterMode"in pt&&pt.getDeclutterMode()!==Mr)&&(pt=new jx({padding:[2,2,2,2],declutterMode:Mr}),Be.setText(pt));const Yn=bi(Ce,"layout","text-transform",pe,Ke,j,ge);Yn=="uppercase"?Nn=Array.isArray(Nn)?Nn.map(($e,rt)=>rt%2?$e:$e.toUpperCase()):Nn.toUpperCase():Yn=="lowercase"&&(Nn=Array.isArray(Nn)?Nn.map(($e,rt)=>rt%2?$e:$e.toLowerCase()):Nn.toLowerCase());const er=Array.isArray(Nn)?Nn:we==2?MB(Nn,pn):SB(Nn,rn,Xn,pn);if(pt.setText(er),pt.setFont(rn),pt.setRotation(C5(bi(Ce,"layout","text-rotate",pe,Ke,j,ge))),typeof pt.setKeepUpright=="function"){const $e=bi(Ce,"layout","text-keep-upright",pe,Ke,j,ge);pt.setKeepUpright($e)}const qe=bi(Ce,"layout","text-anchor",pe,Ke,j,ge),ce=Ct||we==1?"point":bi(Ce,"layout","symbol-placement",pe,Ke,j,ge);let me;if(ce==="line-center"?(pt.setPlacement("line"),me="center"):pt.setPlacement(ce),ce==="line"&&typeof pt.setRepeat=="function"){const $e=bi(Ce,"layout","symbol-spacing",pe,Ke,j,ge);pt.setRepeat($e*2)}pt.setOverflow(ce==="point");let tt=bi(Ce,"paint","text-halo-width",pe,Ke,j,ge);const Et=bi(Ce,"layout","text-offset",pe,Ke,j,ge),$t=bi(Ce,"paint","text-translate",pe,Ke,j,ge);let on=0,rr=0;if(ce=="point"){me="center",qe.indexOf("left")!==-1?(me="left",rr=tt):qe.indexOf("right")!==-1&&(me="right",rr=-tt);const $e=bi(Ce,"layout","text-rotation-alignment",pe,Ke,j,ge);pt.setRotateWithView($e=="map")}else pt.setMaxAngle(C5(bi(Ce,"layout","text-max-angle",pe,Ke,j,ge))*Nn.length/er.length),pt.setRotateWithView(!1);pt.setTextAlign(me);let Oe="middle";qe.indexOf("bottom")==0?(Oe="bottom",on=-tt-.5*(or-1)*Kn):qe.indexOf("top")==0&&(Oe="top",on=tt+.5*(or-1)*Kn),pt.setTextBaseline(Oe);const se=bi(Ce,"layout","text-justify",pe,Ke,j,ge);pt.setJustify(se==="auto"?void 0:se),pt.setOffsetX(Et[0]*Kn+rr+$t[0]),pt.setOffsetY(Et[1]*Kn+on+$t[1]),J.setColor(M0(bi(Ce,"paint","text-color",pe,Ke,j,ge),Dt)),pt.setFill(J);const _e=M0(bi(Ce,"paint","text-halo-color",pe,Ke,j,ge),Dt);if(_e&&tt>0){ie.setColor(_e),tt*=2;const $e=.5*Kn;ie.setWidth(tt<=$e?tt:$e),pt.setStroke(ie)}else pt.setStroke(void 0);const p=bi(Ce,"layout","text-padding",pe,Ke,j,ge),Ne=pt.getPadding();p!==Ne[0]&&(Ne[0]=p,Ne[1]=p,Ne[2]=p,Ne[3]=p),Be.setZIndex(nt)}}}if(st>-1)return $.length=st+1,$};return n.setStyle(te),n.set("mapbox-source",q),n.set("mapbox-layers",B),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),te}function Cse(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,a=new Uint8ClampedArray(s.length),o=e.resolution*2,d=r-1,g=i-1,b=[0,0,0,0],E=2*Math.PI,S=Math.PI/2,B=Math.PI*e.sunEl/180,k=Math.PI*e.sunAz/180,z=Math.cos(B),j=Math.sin(B),Y=e.highlightColor,q=e.shadowColor,ie=e.accentColor,J=e.encoding;let $,te,W,oe,fe,he,Se,pe,we,Ke,ge,st,Qe,Ze,We,Ce,Pe,it,vt,_t,ft,Dt;function Tt(Ue,Re="mapbox"){if(Re==="mapbox")return(Ue[0]*256*256+Ue[1]*256+Ue[2])*.1-1e4;if(Re==="terrarium")return Ue[0]*256+Ue[1]+Ue[2]/256-32768}for(te=0;te<=g;++te)for(fe=te===0?0:te-1,he=te===g?g:te+1,$=0;$<=d;++$)W=$===0?0:$-1,oe=$===d?d:$+1,Se=(te*r+W)*4,b[0]=s[Se],b[1]=s[Se+1],b[2]=s[Se+2],b[3]=s[Se+3],pe=e.vert*Tt(b,J),Se=(te*r+oe)*4,b[0]=s[Se],b[1]=s[Se+1],b[2]=s[Se+2],b[3]=s[Se+3],we=e.vert*Tt(b,J),Ke=(we-pe)/o,Se=(fe*r+$)*4,b[0]=s[Se],b[1]=s[Se+1],b[2]=s[Se+2],b[3]=s[Se+3],pe=e.vert*Tt(b,J),Se=(he*r+$)*4,b[0]=s[Se],b[1]=s[Se+1],b[2]=s[Se+2],b[3]=s[Se+3],we=e.vert*Tt(b,J),ge=(we-pe)/o,Qe=Math.atan2(ge,-Ke),Qe<0?Qe=S-Qe:Qe>S?Qe=E-Qe+S:Qe=S-Qe,st=Math.atan(Math.sqrt(Ke*Ke+ge*ge)),Dt=j*Math.cos(st)+z*Math.sin(st)*Math.cos(k-Qe),Ze=Math.cos(st),We=255*Dt,vt=Math.min(Math.max(2*e.sunEl,0),1),_t=1.875-e.opacity*1.75,ft=e.opacity!==.5?S*((Math.pow(_t,st)-1)/(Math.pow(_t,S)-1)):st,Pe={r:(1-Ze)*ie.r*vt*255,g:(1-Ze)*ie.g*vt*255,b:(1-Ze)*ie.b*vt*255,a:(1-Ze)*ie.a*vt*255},Ce=Math.abs(((Qe+k)/Math.PI+.5)%2-1),it={r:(Y.r*(1-Ce)+q.r*Ce)*We,g:(Y.g*(1-Ce)+q.g*Ce)*We,b:(Y.b*(1-Ce)+q.b*Ce)*We,a:(Y.a*(1-Ce)+q.a*Ce)*We},Se=(te*r+$)*4,a[Se]=Pe.r*(1-Ce)+it.r,a[Se+1]=Pe.g*(1-Ce)+it.g,a[Se+2]=Pe.b*(1-Ce)+it.b,a[Se+3]=s[Se+3]*e.opacity*vt*Math.sin(ft);return new ImageData(a,r,i)}function _se(n,e=512){return n.getExtent()?cO({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():am}function SN(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function bse(n,e,t="",r={},i=void 0){let s,a,o,d,g=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,d=o.source||o.layers,r=o):d=t,typeof r=="string"?(s=r,o={}):(s=r.styleUrl,o=r),o.updateSource===!1&&(g=!1),i||(i=o.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:j2(s,o.accessToken),o=SN(s,o)),new Promise(function(b,E){xN(e,o).then(function(S){if(S.version!=8)return E(new Error("glStyle version 8 required."));if(!(n instanceof tO||n instanceof iC))return E(new Error("Can only apply to VectorLayer or VectorTileLayer"));const B=n instanceof iC?"vector":"geojson";if(d?Array.isArray(d)?a=S.layers.find(function(J){return J.id===d[0]}).source:a=d:(a=Object.keys(S.sources).find(function(J){return S.sources[J].type===B}),d=a),!a)return E(new Error(`No ${B} source found in the glStyle.`));function k(){if(!g)return Promise.resolve();if(n instanceof iC)return ON(S.sources[a],s,o).then(function(W){const oe=n.getSource();oe?W!==oe&&(oe.setTileUrlFunction(W.getTileUrlFunction()),typeof oe.setUrls=="function"&&typeof W.getUrls=="function"&&oe.setUrls(W.getUrls()),oe.format_||(oe.format_=W.format_),oe.getAttributions()||oe.setAttributions(W.getAttributions()),oe.getTileLoadFunction()===Wj&&oe.setTileLoadFunction(W.getTileLoadFunction()),Rg(oe.getProjection(),W.getProjection())&&(oe.tileGrid=W.getTileGrid())):n.setSource(W);const fe=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&fe.getMinZoom()>0&&n.setMaxResolution(Nv(Math.max(0,fe.getMinZoom()-1e-12),fe.getResolutions()))});const J=S.sources[a];let $=n.getSource();(!$||$.get("mapbox-source")!==J)&&($=TN(J,s,o));const te=n.getSource();return te?$!==te&&(te.getAttributions()||te.setAttributions($.getAttributions()),te.format_||(te.format_=$.getFormat()),te.url_=$.getUrl()):n.setSource($),Promise.resolve()}let z,j,Y,q;function ie(){if(!q&&(!S.sprite||j)){if(o.projection&&!i){const $=Sa(o.projection).getUnits();$!=="m"&&(i=am.map(te=>te/W0[$]))}q=vse(n,S,d,i,j,Y,(J,$=o.webfonts)=>dse(J,$),o.getImage),n.getStyle()?k().then(b).catch(E):E(new Error(`Nothing to show for source [${a}]`))}else q?(n.setStyle(q),k().then(b).catch(E)):E(new Error("Something went wrong trying to apply style."))}if(S.sprite){const J=new URL(nse(S.sprite,o.accessToken,s||location.href));z=window.devicePixelRatio>=1.5?.5:1;const $=z==.5?"@2x":"";let te=J.origin+J.pathname+$+".json"+J.search;new Promise(function(W,oe){Ky("Sprite",te,o).then(W).catch(function(fe){te=J.origin+J.pathname+".json"+J.search,Ky("Sprite",te,o).then(W).catch(oe)})}).then(function(W){if(W===void 0&&E(new Error("No sprites found.")),j=W,Y=J.origin+J.pathname+$+".png"+J.search,o.transformRequest){const oe=o.transformRequest(Y,"SpriteImage")||Y;(oe instanceof Request||oe instanceof Promise)&&(Y=oe)}ie()}).catch(function(W){E(new Error(`Sprites cannot be loaded: ${te}: ${W.message}`))})}else ie()}).catch(E)})}const E0={};function EN(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function xse(n,e){const t=n.bounds;if(t){const r=eB([t[0],t[1]],e),i=eB([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return Sa(e).getExtent()}function BN(n,e,t){const r=new jj({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),a=Sa(t.projection||"EPSG:3857"),o=xse(i,a),d=a.getExtent(),g=i.minzoom||0,b=i.maxzoom||22,E={attributions:r.getAttributions(),projection:a,tileGrid:new qx({origin:d?yp(d):s.getOrigin(0),extent:o||s.getExtent(),minZoom:g,resolutions:_se(a,e.tileSize).slice(0,b+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?E.urls=i.tiles:E.url=i.tiles,E}function wse(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},a=n.paint||{};i.paint=a;const o=UO(e,t.resolutions||am);let d;const g=bi(i,"paint","background-color",o,E0,r);return a["background-opacity"]!==void 0&&(d=bi(i,"paint","background-opacity",o,E0,r)),s.visibility=="none"?void 0:M0(g,d)}function Mse(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Yy({source:new $y({}),render(i){const s=wse(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function ON(n,e,t){return new Promise(function(r,i){wN(n,e,t).then(function({tileJson:s,tileLoadFunction:a}){const o=BN(n,s,t);o.tileLoadFunction=a,o.format=new xre,r(new Nj(o))}).catch(i)})}function Sse(n,e,t){const r=new iC({declutter:!0,visible:!1});return ON(n,e,t).then(function(i){i.set("mapbox-source",n),r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function IN(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Ese(n,e,t){return new Promise(function(r,i){wN(n,e,t).then(function({tileJson:s,tileLoadFunction:a}){const o=new jj({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});o.tileGrid=BN(n,s,t).tileGrid,t.projection&&(o.projection=Sa(t.projection));const d=o.getTileUrlFunction();a&&o.setTileLoadFunction(a),o.setTileUrlFunction(function(g,b,E){const S=IN(E);let B=d(g,b,E);if(B.indexOf(S)!=-1){const k=o.getTileGrid().getTileCoordExtent(g);B=B.replace(S,k.toString())}return B}),o.set("mapbox-source",n),r(o)}).catch(function(s){i(s)})})}function kN(n,e,t){const r=new Rj;return Ese(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function Bse(n,e,t){const r=kN(n,e,t);return new Oj({source:new Uj({operationType:"image",operation:Cse,sources:[r]})})}function TN(n,e,t){const r=t.projection?new fk({dataProjection:t.projection}):new fk,i=n.data,s={};if(typeof i=="string"){const[o]=jb(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const g=(E,S,B)=>{const k=IN(B);return o.replace(k,`${E.join(",")}`)},b=new Ub({attributions:n.attribution,format:r,loader:(E,S,B,k,z)=>{const j=typeof g=="function"?g(E,S,B):g;Ky("GeoJSON",j,t).then(Y=>{const q=b.getFormat().readFeatures(Y,{featureProjection:B});b.addFeatures(q),k(q)}).catch(Y=>{b.removeLoadedExtent(E),z()})},strategy:Xte});return b.set("mapbox-source",n),b}const d=new Ub({attributions:n.attribution,format:r,url:o,loader:(g,b,E,S,B)=>{Ky("GeoJSON",o,t).then(k=>{const z=d.getFormat().readFeatures(k,{featureProjection:E});d.addFeatures(z),S(z)}).catch(k=>{d.removeLoadedExtent(g),B()})}});return d}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const a=new Ub(Object.assign({attributions:n.attribution,format:r},s));return a.set("mapbox-source",n),a}function Ose(n,e,t){return new tO({declutter:!0,source:TN(n,e,t),visible:!1})}function Ise(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],kse(n,e,r,t))}}function kse(n,e,t,r){const i=bi(n,"paint","raster-opacity",t,E0,r);e.setOpacity(i)}function Tse(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=CN(r.layers),s=n.get("mapbox-layers"),a=i.filter(function(o){return s.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==a&&n.setVisible(a)}n.on("change",t),t()}function Pse(n,e,t,r){const i=bN(n),s=n.layers,a=t.type,o=t.source||EN(s,t.ref),d=n.sources[o];let g;if(a=="background")g=Mse(t,r,i);else if(d.type=="vector")g=Sse(d,e,r);else if(d.type=="raster")g=kN(d,e,r),g.setVisible(t.layout?t.layout.visibility!=="none":!0),g.on("prerender",Ise(t,g,i));else if(d.type=="geojson")g=Ose(d,e,r);else if(d.type=="raster-dem"&&t.type=="hillshade"){const E=Bse(d,e,r);g=E,E.getSource().on("beforeoperations",function(S){const B=S.data;B.resolution=J6(r.projection||"EPSG:3857",S.resolution,Kf(S.extent),"m");const k=UO(S.resolution,r.resolutions||am);B.encoding=d.encoding,B.vert=5*bi(t,"paint","hillshade-exaggeration",k,E0,i),B.sunAz=bi(t,"paint","hillshade-illumination-direction",k,E0,i),B.sunEl=35,B.opacity=.3,B.highlightColor=bi(t,"paint","hillshade-highlight-color",k,E0,i),B.shadowColor=bi(t,"paint","hillshade-shadow-color",k,E0,i),B.accentColor=bi(t,"paint","hillshade-accent-color",k,E0,i)}),g.setVisible(t.layout?t.layout.visibility!=="none":!0)}const b=o;return g&&g.set("mapbox-source",b),g}function Hk(n,e,t,r){const i=[];let s=null;if(e instanceof oO){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const E=r.projection?Sa(r.projection):s.getProjection();s=new hp(Object.assign(s.getProperties(),{maxResolution:am[0]/W0[E.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(eB(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(am[0]/W0[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const a=n.layers;let o=[],d,g,b;for(let E=0,S=a.length;E<S;++E){const B=a[E],k=B.type;if(k=="heatmap"){console.debug(`layers[${E}].type "${k}" not supported`);continue}else b=B.source||EN(a,B.ref),(!b||b!=g)&&(o.length&&(i.push(Zk(d,o,n,t,e,r)),o=[]),d=Pse(n,t,B,r),d instanceof tO||d instanceof iC||(o=[]),g=d.get("mapbox-source")),o.push(B.id)}return i.push(Zk(d,o,n,t,e,r)),Promise.all(i)}function Rse(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new oO({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:j2(e,t.accessToken);t=SN(s,t),r=new Promise(function(a,o){xN(e,t).then(function(d){Hk(d,i,s,t).then(function(){a(i)}).catch(o)}).catch(function(d){o(new Error(`Could not load ${e}: ${d.message}`))})})}else r=new Promise(function(s,a){Hk(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:j2(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(a)});return r}function Zk(n,e,t,r,i,s={}){let a=24,o=0;const d=t.layers;for(let g=0,b=d.length;g<b;++g){const E=d[g];e.indexOf(E.id)!==-1&&(a=Math.min("minzoom"in E?E.minzoom:0,a),o=Math.max("maxzoom"in E?E.maxzoom:24,o))}return new Promise(function(g,b){const E=function(){const B=n.getSource();if(!B||B.getState()==="error"){b(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in B){const k=B.getTileGrid();if(k){const z=k.getMinZoom();(a>0||z>0)&&n.setMaxResolution(Math.min(Nv(Math.max(0,a-1e-12),am),Nv(Math.max(0,z-1e-12),k.getResolutions()))),o<24&&n.setMinResolution(Nv(o,am))}}else a>0&&n.setMaxResolution(Nv(Math.max(0,a-1e-12),am));B instanceof Ub||B instanceof Nj?bse(n,t,e,Object.assign({styleUrl:r},s)).then(function(){Tse(n,i),g()}).catch(b):g()};n.set("mapbox-layers",e);const S=i.getLayers();S.getArray().indexOf(n)===-1&&S.push(n),n.getSource()?E():n.once("change:source",E)})}function si(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return si=function(){return a},a}si();function Xk(n){return si().f[0]++,si().s[0]++,si().b[1][0]++,!n||(si().b[1][1]++,n.length<2)?(si().b[0][0]++,si().s[1]++,null):(si().b[0][1]++,si().s[2]++,le.jsx("span",{className:"maputnik-coords",children:n.map(e=>(si().f[1]++,si().s[3]++,String(e).padStart(7," "))).join(", ")}))}class PN extends nr.Component{constructor(t){si().f[5]++,si().s[7]++;super(t);Tn(this,"updateStyle");Tn(this,"map");Tn(this,"container",(si().s[5]++,null));Tn(this,"overlay");Tn(this,"popupContainer",(si().s[6]++,null));Tn(this,"closeOverlay",(si().s[32]++,t=>{si().f[12]++,si().s[33]++,t.target.blur(),si().s[34]++,this.overlay.setPosition(void 0)}));si().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},si().s[9]++,this.updateStyle=ux.throttle(this._updateStyle.bind(this),200)}_updateStyle(t){if(si().f[6]++,si().s[10]++,this.map)si().b[2][1]++;else{si().b[2][0]++,si().s[11]++;return}si().s[12]++,this.map.getLayers().clear(),si().s[13]++,Rse(this.map,t)}componentDidUpdate(t){si().f[7]++,si().s[14]++,this.props.mapStyle!==t.mapStyle?(si().b[3][0]++,si().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):si().b[3][1]++}componentDidMount(){si().f[8]++,si().s[16]++,this.overlay=new Pne({element:this.popupContainer,autoPan:{animation:{duration:250}}});const t=(si().s[17]++,new oO({target:this.container,overlays:[this.overlay],view:new hp({zoom:1,center:[180,-90]})}));si().s[18]++,t.on("pointermove",i=>{si().f[9]++;const s=(si().s[19]++,Q4(i.coordinate));si().s[20]++,this.setState({cursor:[s[0].toFixed(2),s[1].toFixed(2)]})}),si().s[21]++;const r=()=>{si().f[10]++;const i=(si().s[22]++,t.getView().getZoom()),s=(si().s[23]++,Q4(t.getView().getCenter()));si().s[24]++,this.props.onChange({zoom:i,center:{lng:s[0],lat:s[1]}})};si().s[25]++,r(),si().s[26]++,t.on("moveend",r),si().s[27]++,t.on("postrender",i=>{si().f[11]++;const s=(si().s[28]++,Q4(t.getView().getCenter()));si().s[29]++,this.setState({center:[s[0].toFixed(2),s[1].toFixed(2)],rotation:t.getView().getRotation().toFixed(2),zoom:t.getView().getZoom().toFixed(2)})}),si().s[30]++,this.map=t,si().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}render(){si().f[13]++;const t=(si().s[35]++,this.props.t);return si().s[36]++,le.jsxs("div",{className:"maputnik-ol-container",children:[le.jsxs("div",{ref:r=>(si().f[14]++,si().s[37]++,this.popupContainer=r),style:{background:"black"},className:"maputnik-popup",children:[le.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":t("Close popup"),children:"×"}),le.jsx(nz,{features:(si().b[4][0]++,this.state.selectedFeatures||(si().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),le.jsxs("div",{className:"maputnik-ol-zoom",children:[t("Zoom:")," ",this.state.zoom]}),(si().b[5][0]++,this.props.debugToolbox&&(si().b[5][1]++,le.jsxs("div",{className:"maputnik-ol-debug",children:[le.jsxs("div",{children:[le.jsxs("label",{children:[t("cursor:")," "]}),le.jsx("span",{children:Xk(this.state.cursor)})]}),le.jsxs("div",{children:[le.jsxs("label",{children:[t("center:")," "]}),le.jsx("span",{children:Xk(this.state.center)})]}),le.jsxs("div",{children:[le.jsxs("label",{children:[t("rotation:")," "]}),le.jsx("span",{children:this.state.rotation})]})]}))),le.jsx("div",{className:"maputnik-ol",ref:r=>(si().f[15]++,si().s[38]++,this.container=r),role:"region","aria-label":t("Map view"),style:{...this.props.style}})]})}}Tn(PN,"defaultProps",(si().s[4]++,{onMapLoaded:()=>{si().f[2]++},onDataChange:()=>{si().f[3]++},onLayerSelect:()=>{si().f[4]++}}));const Dse=(si().s[39]++,Vs()(PN));var M5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Jk;function Kse(){return Jk||(Jk=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(M5)),M5.exports}var Fse=Kse();const um=Xa(Fse);function Cg(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Cg=function(){return a},a}Cg();class Lse extends nr.Component{render(){Cg().f[0]++;const e=(Cg().s[0]++,{width:20,height:20,...this.props.style});return Cg().s[1]++,this.props.isCollapsed?(Cg().b[0][0]++,le.jsx($Z,{style:e})):(Cg().b[0][1]++,le.jsx(YZ,{style:e}))}}function sy(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return sy=function(){return a},a}sy();class Use extends nr.Component{render(){return sy().f[0]++,sy().s[0]++,le.jsx("li",{className:"maputnik-layer-list-group",children:le.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(sy().f[1]++,sy().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[le.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),le.jsx("span",{className:"maputnik-space"}),le.jsx(Lse,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function FC(){return FC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},FC.apply(null,arguments)}function zse(n){if(Array.isArray(n))return n}function jse(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],d=!0,g=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(d=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);d=!0);}catch(b){g=!0,i=b}finally{try{if(!d&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(g)throw i}}return o}}function BB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function RN(n,e){if(n){if(typeof n=="string")return BB(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?BB(n,e):void 0}}function Nse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DN(n,e){return zse(n)||jse(n,e)||RN(n,e)||Nse()}function Fy(n){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(n)}function Wse(n,e){if(Fy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Fy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KN(n){var e=Wse(n,"string");return Fy(e)=="symbol"?e:e+""}function Ka(n,e,t){return(e=KN(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function S5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.forEach(function(i){Ka(n,i,t[i])})}return n}function h_(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Gse(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,KN(r.key),r)}}function f_(n,e,t){return e&&Gse(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ps(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zO(n,e){if(e&&(Fy(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ps(n)}function LC(n){return LC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},LC(n)}function OB(n,e){return OB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},OB(n,e)}function jO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&OB(n,e)}var E5,eT;function Qse(){if(eT)return E5;eT=1;var n=function(e,t,r,i,s,a,o,d){if(!e){var g;if(t===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[r,i,s,a,o,d],E=0;g=new Error(t.replace(/%s/g,function(){return b[E++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}};return E5=n,E5}var qse=Qse();const Wg=Xa(qse);function Yse(n){if(Array.isArray(n))return BB(n)}function $se(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Vse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hse(n){return Yse(n)||$se(n)||RN(n)||Vse()}var Zse=function(){function n(){h_(this,n),Ka(this,"refs",{})}return f_(n,[{key:"add",value:function(t,r){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(r)}},{key:"remove",value:function(t,r){var i=this.getIndex(t,r);i!==-1&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(r){var i=r.node;return i.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,r){return this.refs[t].indexOf(r)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(Xse)}}]),n}();function Xse(n,e){var t=n.node.sortableInfo.index,r=e.node.sortableInfo.index;return t-r}function FN(n,e){return Object.keys(n).reduce(function(t,r){return e.indexOf(r)===-1&&(t[r]=n[r]),t},{})}var M1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},LN=function(){if(typeof window>"u"||typeof document>"u")return"";var n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function Cb(n,e){Object.keys(e).forEach(function(t){n.style[t]=e[t]})}function _b(n,e){n.style["".concat(LN,"Transform")]=e==null?"":"translate3d(".concat(e.x,"px,").concat(e.y,"px,0)")}function B5(n,e){n.style["".concat(LN,"TransitionDuration")]=e==null?"":"".concat(e,"ms")}function Wv(n,e){for(;n;){if(e(n))return n;n=n.parentNode}return null}function tT(n,e,t){return Math.max(n,Math.min(t,e))}function ay(n){return n.substr(-2)==="px"?parseFloat(n):0}function Jse(n){var e=window.getComputedStyle(n);return{bottom:ay(e.marginBottom),left:ay(e.marginLeft),right:ay(e.marginRight),top:ay(e.marginTop)}}function NO(n,e){var t=e.displayName||e.name;return t?"".concat(n,"(").concat(t,")"):n}function O5(n,e){var t=n.getBoundingClientRect();return{top:t.top+e.top,left:t.left+e.left}}function Sv(n){return n.touches&&n.touches.length?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.changedTouches&&n.changedTouches.length?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY}}function eae(n){return n.touches&&n.touches.length||n.changedTouches&&n.changedTouches.length}function Nb(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(n){var r={left:t.left+n.offsetLeft,top:t.top+n.offsetTop};return n.parentNode===e?r:Nb(n.parentNode,e,r)}}function tae(n,e,t){return n<t&&n>e?n-1:n>t&&n<e?n+1:n}function nT(n){var e=n.lockOffset,t=n.width,r=n.height,i=e,s=e,a="px";if(typeof e=="string"){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);Wg(o!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),i=parseFloat(e),s=parseFloat(e),a=o[1]}return Wg(isFinite(i)&&isFinite(s),"lockOffset value should be a finite. Given %s",e),a==="%"&&(i=i*t/100,s=s*r/100),{x:i,y:s}}function nae(n){var e=n.height,t=n.width,r=n.lockOffset,i=Array.isArray(r)?r:[r,r];Wg(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var s=DN(i,2),a=s[0],o=s[1];return[nT({height:e,lockOffset:a,width:t}),nT({height:e,lockOffset:o,width:t})]}function rae(n){var e=window.getComputedStyle(n),t=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return t.test(e[i])})}function UN(n){return n instanceof HTMLElement?rae(n)?n:UN(n.parentNode):null}function iae(n){var e=window.getComputedStyle(n);return e.display==="grid"?{x:ay(e.gridColumnGap),y:ay(e.gridRowGap)}:{x:0,y:0}}var hg={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},_g={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function oae(n){var e="input, textarea, select, canvas, [contenteditable]",t=n.querySelectorAll(e),r=n.cloneNode(!0),i=Hse(r.querySelectorAll(e));return i.forEach(function(s,a){if(s.type!=="file"&&(s.value=t[a].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===_g.Canvas&&t[a].width>0&&t[a].height>0){var o=s.getContext("2d");o.drawImage(t[a],0,0)}}),r}function sae(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){jO(s,i);function s(){var a,o;h_(this,s);for(var d=arguments.length,g=new Array(d),b=0;b<d;b++)g[b]=arguments[b];return o=zO(this,(a=LC(s)).call.apply(a,[this].concat(g))),Ka(ps(ps(o)),"wrappedInstance",Ai.createRef()),o}return f_(s,[{key:"componentDidMount",value:function(){var o=xx.findDOMNode(this);o.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Wg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return Ai.createElement(n,FC({ref:o},this.props))}}]),s}(Ai.Component),Ka(e,"displayName",NO("sortableHandle",n)),t}function rT(n){return n.sortableHandle!=null}var aae=function(){function n(e,t){h_(this,n),this.container=e,this.onScrollCallback=t}return f_(n,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var r=this,i=t.translate,s=t.minTranslate,a=t.maxTranslate,o=t.width,d=t.height,g={x:0,y:0},b={x:1,y:1},E={x:10,y:10},S=this.container,B=S.scrollTop,k=S.scrollLeft,z=S.scrollHeight,j=S.scrollWidth,Y=S.clientHeight,q=S.clientWidth,ie=B===0,J=z-B-Y===0,$=k===0,te=j-k-q===0;i.y>=a.y-d/2&&!J?(g.y=1,b.y=E.y*Math.abs((a.y-d/2-i.y)/d)):i.x>=a.x-o/2&&!te?(g.x=1,b.x=E.x*Math.abs((a.x-o/2-i.x)/o)):i.y<=s.y+d/2&&!ie?(g.y=-1,b.y=E.y*Math.abs((i.y-d/2-s.y)/d)):i.x<=s.x+o/2&&!$&&(g.x=-1,b.x=E.x*Math.abs((i.x-o/2-s.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(g.x!==0||g.y!==0)&&(this.interval=setInterval(function(){r.isAutoScrolling=!0;var W={left:b.x*g.x,top:b.y*g.y};r.container.scrollTop+=W.top,r.container.scrollLeft+=W.left,r.onScrollCallback(W)},5))}}]),n}();function lae(n){var e=n.node;return{height:e.offsetHeight,width:e.offsetWidth}}function uae(n){var e=[_g.Input,_g.Textarea,_g.Select,_g.Option,_g.Button];return!!(e.indexOf(n.target.tagName)!==-1||Wv(n.target,function(t){return t.contentEditable==="true"}))}var zN={axis:pi.oneOf(["x","y","xy"]),contentWindow:pi.any,disableAutoscroll:pi.bool,distance:pi.number,getContainer:pi.func,getHelperDimensions:pi.func,helperClass:pi.string,helperContainer:pi.oneOfType([pi.func,typeof HTMLElement>"u"?pi.any:pi.instanceOf(HTMLElement)]),hideSortableGhost:pi.bool,keyboardSortingTransitionDuration:pi.number,lockAxis:pi.string,lockOffset:pi.oneOfType([pi.number,pi.string,pi.arrayOf(pi.oneOfType([pi.number,pi.string]))]),lockToContainerEdges:pi.bool,onSortEnd:pi.func,onSortMove:pi.func,onSortOver:pi.func,onSortStart:pi.func,pressDelay:pi.number,pressThreshold:pi.number,keyCodes:pi.shape({lift:pi.arrayOf(pi.number),drop:pi.arrayOf(pi.number),cancel:pi.arrayOf(pi.number),up:pi.arrayOf(pi.number),down:pi.arrayOf(pi.number)}),shouldCancelStart:pi.func,transitionDuration:pi.number,updateBeforeSortStart:pi.func,useDragHandle:pi.bool,useWindowAsScrollContainer:pi.bool},jN={lift:[hg.SPACE],drop:[hg.SPACE],cancel:[hg.ESC],up:[hg.UP,hg.LEFT],down:[hg.DOWN,hg.RIGHT]},Aae={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:lae,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:jN,shouldCancelStart:uae,transitionDuration:300,useWindowAsScrollContainer:!1},cae=Object.keys(zN);function dae(n){Wg(!(n.distance&&n.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function hae(n,e){try{var t=n()}catch(r){return e(!0,r)}return t&&t.then?t.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var NN=Ai.createContext({manager:{}});function fae(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){jO(s,i);function s(a){var o;h_(this,s),o=zO(this,LC(s).call(this,a)),Ka(ps(ps(o)),"state",{}),Ka(ps(ps(o)),"handleStart",function(g){var b=o.props,E=b.distance,S=b.shouldCancelStart;if(!(g.button===2||S(g))){o.touched=!0,o.position=Sv(g);var B=Wv(g.target,function(ie){return ie.sortableInfo!=null});if(B&&B.sortableInfo&&o.nodeIsChild(B)&&!o.state.sorting){var k=o.props.useDragHandle,z=B.sortableInfo,j=z.index,Y=z.collection,q=z.disabled;if(q||k&&!Wv(g.target,rT))return;o.manager.active={collection:Y,index:j},!eae(g)&&g.target.tagName===_g.Anchor&&g.preventDefault(),E||(o.props.pressDelay===0?o.handlePress(g):o.pressTimer=setTimeout(function(){return o.handlePress(g)},o.props.pressDelay))}}}),Ka(ps(ps(o)),"nodeIsChild",function(g){return g.sortableInfo.manager===o.manager}),Ka(ps(ps(o)),"handleMove",function(g){var b=o.props,E=b.distance,S=b.pressThreshold;if(!o.state.sorting&&o.touched&&!o._awaitingUpdateBeforeSortStart){var B=Sv(g),k={x:o.position.x-B.x,y:o.position.y-B.y},z=Math.abs(k.x)+Math.abs(k.y);o.delta=k,!E&&(!S||z>=S)?(clearTimeout(o.cancelTimer),o.cancelTimer=setTimeout(o.cancel,0)):E&&z>=E&&o.manager.isActive()&&o.handlePress(g)}}),Ka(ps(ps(o)),"handleEnd",function(){o.touched=!1,o.cancel()}),Ka(ps(ps(o)),"cancel",function(){var g=o.props.distance,b=o.state.sorting;b||(g||clearTimeout(o.pressTimer),o.manager.active=null)}),Ka(ps(ps(o)),"handlePress",function(g){try{var b=o.manager.getActive(),E=function(){if(b){var S=function(){var he=$.sortableInfo.index,Se=Jse($),pe=iae(o.container),we=o.scrollContainer.getBoundingClientRect(),Ke=z({index:he,node:$,collection:te});if(o.node=$,o.margin=Se,o.gridGap=pe,o.width=Ke.width,o.height=Ke.height,o.marginOffset={x:o.margin.left+o.margin.right+o.gridGap.x,y:Math.max(o.margin.top,o.margin.bottom,o.gridGap.y)},o.boundingClientRect=$.getBoundingClientRect(),o.containerBoundingRect=we,o.index=he,o.newIndex=he,o.axis={x:k.indexOf("x")>=0,y:k.indexOf("y")>=0},o.offsetEdge=Nb($,o.container),W?o.initialOffset=Sv(S5({},g,{pageX:o.boundingClientRect.left,pageY:o.boundingClientRect.top})):o.initialOffset=Sv(g),o.initialScroll={left:o.scrollContainer.scrollLeft,top:o.scrollContainer.scrollTop},o.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},o.helper=o.helperContainer.appendChild(oae($)),Cb(o.helper,{boxSizing:"border-box",height:"".concat(o.height,"px"),left:"".concat(o.boundingClientRect.left-Se.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(o.boundingClientRect.top-Se.top,"px"),width:"".concat(o.width,"px")}),W&&o.helper.focus(),Y&&(o.sortableGhost=$,Cb($,{opacity:0,visibility:"hidden"})),o.minTranslate={},o.maxTranslate={},W){var ge=J?{top:0,left:0,width:o.contentWindow.innerWidth,height:o.contentWindow.innerHeight}:o.containerBoundingRect,st=ge.top,Qe=ge.left,Ze=ge.width,We=ge.height,Ce=st+We,Pe=Qe+Ze;o.axis.x&&(o.minTranslate.x=Qe-o.boundingClientRect.left,o.maxTranslate.x=Pe-(o.boundingClientRect.left+o.width)),o.axis.y&&(o.minTranslate.y=st-o.boundingClientRect.top,o.maxTranslate.y=Ce-(o.boundingClientRect.top+o.height))}else o.axis.x&&(o.minTranslate.x=(J?0:we.left)-o.boundingClientRect.left-o.width/2,o.maxTranslate.x=(J?o.contentWindow.innerWidth:we.left+we.width)-o.boundingClientRect.left-o.width/2),o.axis.y&&(o.minTranslate.y=(J?0:we.top)-o.boundingClientRect.top-o.height/2,o.maxTranslate.y=(J?o.contentWindow.innerHeight:we.top+we.height)-o.boundingClientRect.top-o.height/2);j&&j.split(" ").forEach(function(it){return o.helper.classList.add(it)}),o.listenerNode=g.touches?g.target:o.contentWindow,W?(o.listenerNode.addEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.addEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.addEventListener("keydown",o.handleKeyDown)):(M1.move.forEach(function(it){return o.listenerNode.addEventListener(it,o.handleSortMove,!1)}),M1.end.forEach(function(it){return o.listenerNode.addEventListener(it,o.handleSortEnd,!1)})),o.setState({sorting:!0,sortingIndex:he}),ie&&ie({node:$,index:he,collection:te,isKeySorting:W,nodes:o.manager.getOrderedRefs(),helper:o.helper},g),W&&o.keyMove(0)},B=o.props,k=B.axis,z=B.getHelperDimensions,j=B.helperClass,Y=B.hideSortableGhost,q=B.updateBeforeSortStart,ie=B.onSortStart,J=B.useWindowAsScrollContainer,$=b.node,te=b.collection,W=o.manager.isKeySorting,oe=function(){if(typeof q=="function"){o._awaitingUpdateBeforeSortStart=!0;var fe=hae(function(){var he=$.sortableInfo.index;return Promise.resolve(q({collection:te,index:he,node:$,isKeySorting:W},g)).then(function(){})},function(he,Se){if(o._awaitingUpdateBeforeSortStart=!1,he)throw Se;return Se});if(fe&&fe.then)return fe.then(function(){})}}();return oe&&oe.then?oe.then(S):S(oe)}}();return Promise.resolve(E&&E.then?E.then(function(){}):void 0)}catch(S){return Promise.reject(S)}}),Ka(ps(ps(o)),"handleSortMove",function(g){var b=o.props.onSortMove;typeof g.preventDefault=="function"&&g.cancelable&&g.preventDefault(),o.updateHelperPosition(g),o.animateNodes(),o.autoscroll(),b&&b(g)}),Ka(ps(ps(o)),"handleSortEnd",function(g){var b=o.props,E=b.hideSortableGhost,S=b.onSortEnd,B=o.manager,k=B.active.collection,z=B.isKeySorting,j=o.manager.getOrderedRefs();o.listenerNode&&(z?(o.listenerNode.removeEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("keydown",o.handleKeyDown)):(M1.move.forEach(function($){return o.listenerNode.removeEventListener($,o.handleSortMove)}),M1.end.forEach(function($){return o.listenerNode.removeEventListener($,o.handleSortEnd)}))),o.helper.parentNode.removeChild(o.helper),E&&o.sortableGhost&&Cb(o.sortableGhost,{opacity:"",visibility:""});for(var Y=0,q=j.length;Y<q;Y++){var ie=j[Y],J=ie.node;ie.edgeOffset=null,ie.boundingClientRect=null,_b(J,null),B5(J,null),ie.translate=null}o.autoScroller.clear(),o.manager.active=null,o.manager.isKeySorting=!1,o.setState({sorting:!1,sortingIndex:null}),typeof S=="function"&&S({collection:k,newIndex:o.newIndex,oldIndex:o.index,isKeySorting:z,nodes:j},g),o.touched=!1}),Ka(ps(ps(o)),"autoscroll",function(){var g=o.props.disableAutoscroll,b=o.manager.isKeySorting;if(g){o.autoScroller.clear();return}if(b){var E=S5({},o.translate),S=0,B=0;o.axis.x&&(E.x=Math.min(o.maxTranslate.x,Math.max(o.minTranslate.x,o.translate.x)),S=o.translate.x-E.x),o.axis.y&&(E.y=Math.min(o.maxTranslate.y,Math.max(o.minTranslate.y,o.translate.y)),B=o.translate.y-E.y),o.translate=E,_b(o.helper,o.translate),o.scrollContainer.scrollLeft+=S,o.scrollContainer.scrollTop+=B;return}o.autoScroller.update({height:o.height,maxTranslate:o.maxTranslate,minTranslate:o.minTranslate,translate:o.translate,width:o.width})}),Ka(ps(ps(o)),"onAutoScroll",function(g){o.translate.x+=g.left,o.translate.y+=g.top,o.animateNodes()}),Ka(ps(ps(o)),"handleKeyDown",function(g){var b=g.keyCode,E=o.props,S=E.shouldCancelStart,B=E.keyCodes,k=B===void 0?{}:B,z=S5({},jN,k);o.manager.active&&!o.manager.isKeySorting||!o.manager.active&&(!z.lift.includes(b)||S(g)||!o.isValidSortingTarget(g))||(g.stopPropagation(),g.preventDefault(),z.lift.includes(b)&&!o.manager.active?o.keyLift(g):z.drop.includes(b)&&o.manager.active?o.keyDrop(g):z.cancel.includes(b)?(o.newIndex=o.manager.active.index,o.keyDrop(g)):z.up.includes(b)?o.keyMove(-1):z.down.includes(b)&&o.keyMove(1))}),Ka(ps(ps(o)),"keyLift",function(g){var b=g.target,E=Wv(b,function(z){return z.sortableInfo!=null}),S=E.sortableInfo,B=S.index,k=S.collection;o.initialFocusedNode=b,o.manager.isKeySorting=!0,o.manager.active={index:B,collection:k},o.handlePress(g)}),Ka(ps(ps(o)),"keyMove",function(g){var b=o.manager.getOrderedRefs(),E=b[b.length-1].node.sortableInfo.index,S=o.newIndex+g,B=o.newIndex;if(!(S<0||S>E)){o.prevIndex=B,o.newIndex=S;var k=tae(o.newIndex,o.prevIndex,o.index),z=b.find(function(W){var oe=W.node;return oe.sortableInfo.index===k}),j=z.node,Y=o.containerScrollDelta,q=z.boundingClientRect||O5(j,Y),ie=z.translate||{x:0,y:0},J={top:q.top+ie.y-Y.top,left:q.left+ie.x-Y.left},$=B<S,te={x:$&&o.axis.x?j.offsetWidth-o.width:0,y:$&&o.axis.y?j.offsetHeight-o.height:0};o.handleSortMove({pageX:J.left+te.x,pageY:J.top+te.y,ignoreTransition:g===0})}}),Ka(ps(ps(o)),"keyDrop",function(g){o.handleSortEnd(g),o.initialFocusedNode&&o.initialFocusedNode.focus()}),Ka(ps(ps(o)),"handleKeyEnd",function(g){o.manager.active&&o.keyDrop(g)}),Ka(ps(ps(o)),"isValidSortingTarget",function(g){var b=o.props.useDragHandle,E=g.target,S=Wv(E,function(B){return B.sortableInfo!=null});return S&&S.sortableInfo&&!S.sortableInfo.disabled&&(b?rT(E):E.sortableInfo)});var d=new Zse;return dae(a),o.manager=d,o.wrappedInstance=Ai.createRef(),o.sortableContextValue={manager:d},o.events={end:o.handleEnd,move:o.handleMove,start:o.handleStart},o}return f_(s,[{key:"componentDidMount",value:function(){var o=this,d=this.props.useWindowAsScrollContainer,g=this.getContainer();Promise.resolve(g).then(function(b){o.container=b,o.document=o.container.ownerDocument||document;var E=o.props.contentWindow||o.document.defaultView||window;o.contentWindow=typeof E=="function"?E():E,o.scrollContainer=d?o.document.scrollingElement||o.document.documentElement:UN(o.container)||o.container,o.autoScroller=new aae(o.scrollContainer,o.onAutoScroll),Object.keys(o.events).forEach(function(S){return M1[S].forEach(function(B){return o.container.addEventListener(B,o.events[S],!1)})}),o.container.addEventListener("keydown",o.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var o=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(d){return M1[d].forEach(function(g){return o.container.removeEventListener(g,o.events[d])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(o){var d=this.props,g=d.lockAxis,b=d.lockOffset,E=d.lockToContainerEdges,S=d.transitionDuration,B=d.keyboardSortingTransitionDuration,k=B===void 0?S:B,z=this.manager.isKeySorting,j=o.ignoreTransition,Y=Sv(o),q={x:Y.x-this.initialOffset.x,y:Y.y-this.initialOffset.y};if(q.y-=window.pageYOffset-this.initialWindowScroll.top,q.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=q,E){var ie=nae({height:this.height,lockOffset:b,width:this.width}),J=DN(ie,2),$=J[0],te=J[1],W={x:this.width/2-$.x,y:this.height/2-$.y},oe={x:this.width/2-te.x,y:this.height/2-te.y};q.x=tT(this.minTranslate.x+W.x,this.maxTranslate.x-oe.x,q.x),q.y=tT(this.minTranslate.y+W.y,this.maxTranslate.y-oe.y,q.y)}g==="x"?q.y=0:g==="y"&&(q.x=0),z&&k&&!j&&B5(this.helper,k),_b(this.helper,q)}},{key:"animateNodes",value:function(){var o=this.props,d=o.transitionDuration,g=o.hideSortableGhost,b=o.onSortOver,E=this.containerScrollDelta,S=this.windowScrollDelta,B=this.manager.getOrderedRefs(),k={left:this.offsetEdge.left+this.translate.x+E.left,top:this.offsetEdge.top+this.translate.y+E.top},z=this.manager.isKeySorting,j=this.newIndex;this.newIndex=null;for(var Y=0,q=B.length;Y<q;Y++){var ie=B[Y].node,J=ie.sortableInfo.index,$=ie.offsetWidth,te=ie.offsetHeight,W={height:this.height>te?te/2:this.height/2,width:this.width>$?$/2:this.width/2},oe=z&&J>this.index&&J<=j,fe=z&&J<this.index&&J>=j,he={x:0,y:0},Se=B[Y].edgeOffset;Se||(Se=Nb(ie,this.container),B[Y].edgeOffset=Se,z&&(B[Y].boundingClientRect=O5(ie,E)));var pe=Y<B.length-1&&B[Y+1],we=Y>0&&B[Y-1];if(pe&&!pe.edgeOffset&&(pe.edgeOffset=Nb(pe.node,this.container),z&&(pe.boundingClientRect=O5(pe.node,E))),J===this.index){g&&(this.sortableGhost=ie,Cb(ie,{opacity:0,visibility:"hidden"}));continue}d&&B5(ie,d),this.axis.x?this.axis.y?fe||J<this.index&&(k.left+S.left-W.width<=Se.left&&k.top+S.top<=Se.top+W.height||k.top+S.top+W.height<=Se.top)?(he.x=this.width+this.marginOffset.x,Se.left+he.x>this.containerBoundingRect.width-W.width&&pe&&(he.x=pe.edgeOffset.left-Se.left,he.y=pe.edgeOffset.top-Se.top),this.newIndex===null&&(this.newIndex=J)):(oe||J>this.index&&(k.left+S.left+W.width>=Se.left&&k.top+S.top+W.height>=Se.top||k.top+S.top+W.height>=Se.top+te))&&(he.x=-(this.width+this.marginOffset.x),Se.left+he.x<this.containerBoundingRect.left+W.width&&we&&(he.x=we.edgeOffset.left-Se.left,he.y=we.edgeOffset.top-Se.top),this.newIndex=J):oe||J>this.index&&k.left+S.left+W.width>=Se.left?(he.x=-(this.width+this.marginOffset.x),this.newIndex=J):(fe||J<this.index&&k.left+S.left<=Se.left+W.width)&&(he.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=J)):this.axis.y&&(oe||J>this.index&&k.top+S.top+W.height>=Se.top?(he.y=-(this.height+this.marginOffset.y),this.newIndex=J):(fe||J<this.index&&k.top+S.top<=Se.top+W.height)&&(he.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=J))),_b(ie,he),B[Y].translate=he}this.newIndex==null&&(this.newIndex=this.index),z&&(this.newIndex=j);var Ke=z?this.prevIndex:j;b&&this.newIndex!==Ke&&b({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:Ke,isKeySorting:z,nodes:B,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Wg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var o=this.props.getContainer;return typeof o!="function"?xx.findDOMNode(this):o(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return Ai.createElement(NN.Provider,{value:this.sortableContextValue},Ai.createElement(n,FC({ref:o},FN(this.props,cae))))}},{key:"helperContainer",get:function(){var o=this.props.helperContainer;return typeof o=="function"?o():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var o=this.props.useWindowAsScrollContainer;return o?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s}(Ai.Component),Ka(e,"displayName",NO("sortableList",n)),Ka(e,"defaultProps",Aae),Ka(e,"propTypes",zN),t}var WN={index:pi.number.isRequired,collection:pi.oneOfType([pi.number,pi.string]),disabled:pi.bool},pae=Object.keys(WN);function mae(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){jO(s,i);function s(){var a,o;h_(this,s);for(var d=arguments.length,g=new Array(d),b=0;b<d;b++)g[b]=arguments[b];return o=zO(this,(a=LC(s)).call.apply(a,[this].concat(g))),Ka(ps(ps(o)),"wrappedInstance",Ai.createRef()),o}return f_(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(o){this.node&&(o.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),o.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),o.collection!==this.props.collection&&(this.unregister(o.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var o=this.props,d=o.collection,g=o.disabled,b=o.index,E=xx.findDOMNode(this);E.sortableInfo={collection:d,disabled:g,index:b,manager:this.context.manager},this.node=E,this.ref={node:E},this.context.manager.add(d,this.ref)}},{key:"unregister",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(o,this.ref)}},{key:"getWrappedInstance",value:function(){return Wg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return Ai.createElement(n,FC({ref:o},FN(this.props,pae)))}}]),s}(Ai.Component),Ka(e,"displayName",NO("sortableElement",n)),Ka(e,"contextType",NN),Ka(e,"propTypes",WN),Ka(e,"defaultProps",{collection:0}),t}function io(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="c4894131c5d7f6ef28da960f43f4c830425a38cb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:8,column:23},end:{line:19,column:2}},1:{start:{line:9,column:2},end:{line:18,column:7}},2:{start:{line:22,column:4},end:{line:31,column:5}},3:{start:{line:24,column:8},end:{line:24,column:54}},4:{start:{line:26,column:8},end:{line:26,column:53}},5:{start:{line:28,column:8},end:{line:28,column:56}},6:{start:{line:30,column:8},end:{line:30,column:49}},7:{start:{line:34,column:51},end:{line:34,column:61}},8:{start:{line:35,column:25},end:{line:35,column:27}},9:{start:{line:36,column:4},end:{line:41,column:5}},10:{start:{line:37,column:6},end:{line:37,column:76}},11:{start:{line:38,column:6},end:{line:40,column:7}},12:{start:{line:39,column:8},end:{line:39,column:103}},13:{start:{line:42,column:4},end:{line:53,column:6}},14:{start:{line:57,column:24},end:{line:66,column:3}},15:{start:{line:67,column:29},end:{line:69,column:3}},16:{start:{line:71,column:4},end:{line:73,column:6}},17:{start:{line:76,column:29},end:{line:76,column:82}},18:{start:{line:77,column:4},end:{line:122,column:6}},19:{start:{line:81,column:25},end:{line:81,column:72}},20:{start:{line:97,column:31},end:{line:97,column:79}},21:{start:{line:106,column:31},end:{line:106,column:76}},22:{start:{line:116,column:31},end:{line:116,column:88}},23:{start:{line:125,column:30},end:{line:125,column:106}},24:{start:{line:125,column:73},end:{line:125,column:105}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:38},end:{line:8,column:39}},loc:{start:{line:8,column:49},end:{line:19,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:15},end:{line:32,column:3}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:54,column:3}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:61,column:5}},line:60},4:{name:"(anonymous_4)",decl:{start:{line:62,column:20},end:{line:62,column:21}},loc:{start:{line:62,column:26},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:29},end:{line:64,column:30}},loc:{start:{line:64,column:35},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:20},end:{line:74,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:11},end:{line:123,column:3}},line:75},8:{name:"(anonymous_8)",decl:{start:{line:81,column:17},end:{line:81,column:18}},loc:{start:{line:81,column:25},end:{line:81,column:72}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:97,column:23},end:{line:97,column:24}},loc:{start:{line:97,column:31},end:{line:97,column:79}},line:97},10:{name:"(anonymous_10)",decl:{start:{line:106,column:23},end:{line:106,column:24}},loc:{start:{line:106,column:31},end:{line:106,column:76}},line:106},11:{name:"(anonymous_11)",decl:{start:{line:116,column:23},end:{line:116,column:24}},loc:{start:{line:116,column:31},end:{line:116,column:88}},line:116},12:{name:"(anonymous_12)",decl:{start:{line:125,column:46},end:{line:125,column:47}},loc:{start:{line:125,column:73},end:{line:125,column:105}},line:125}},branchMap:{0:{loc:{start:{line:22,column:4},end:{line:31,column:5}},type:"switch",locations:[{start:{line:23,column:6},end:{line:24,column:54}},{start:{line:25,column:6},end:{line:26,column:53}},{start:{line:27,column:6},end:{line:28,column:56}},{start:{line:29,column:6},end:{line:30,column:49}}],line:22},1:{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},2:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},3:{loc:{start:{line:76,column:29},end:{line:76,column:82}},type:"cond-expr",locations:[{start:{line:76,column:67},end:{line:76,column:73}},{start:{line:76,column:76},end:{line:76,column:82}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAgBS,SACL,KADK;AAhBT,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AAEvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AAErE,OAAO,eAAe;AACtB,SAAQ,iBAAiB,sBAAqB;AAQ9C,MAAM,iBAAiB,eAAe,CAAC,UAA+B;AACpE,SAAO,qBAAC,SAAI,WAAU,mCACpB;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF,CAAC;AAUD,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,yBAAyB,MAAM;AAAA,IAAC;AAAA,EAClC;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,mBAAmB,KAAK,MAAM,eAAe,YAAY,SAAS;AAExE,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QAEf,SAAS,QAAM,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU;AAAA,QAC7D,eAAa,qBAAmB,KAAK,MAAM;AAAA,QAC3C,WAAW,WAAW;AAAA,UACpB,4BAA4B;AAAA,UAC5B,qCAAqC,KAAK,MAAM;AAAA,UAChD,CAAC,KAAK,MAAM,SAAU,GAAG;AAAA,QAC3B,CAAC;AAAA,QACD;AAAA,8BAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,UAChC,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,UAC5B;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,eAAgB,KAAK,MAAM,UAAU;AAAA;AAAA,UACjE;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,YAAa,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,oBAAoB;AAAA,cACpB,SAAS,QAAM,KAAK,MAAM,wBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1E;AAAA;AAAA;AAAA,MA5BK,KAAK,MAAM;AAAA,IA6BlB;AAAA,EACF;AACF;AAEA,MAAM,wBAAwB,gBAAoC,CAAC,UAA8B,oBAAC,iBAAe,GAAG,OAAO,CAAE;AAE7H,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4894131c5d7f6ef28da960f43f4c830425a38cb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return io=function(){return a},a}io();const gae=(io().s[0]++,sae(n=>(io().f[0]++,io().s[1]++,le.jsxs("div",{className:"maputnik-layer-list-item-handle",children:[le.jsx(tz,{className:"layer-handle__icon",type:n.layerType}),le.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]}))));class I5 extends nr.Component{renderIcon(){switch(io().f[1]++,io().s[2]++,this.props.action){case"duplicate":return io().b[0][0]++,io().s[3]++,le.jsx(jZ,{});case"show":return io().b[0][1]++,io().s[4]++,le.jsx(zZ,{});case"hide":return io().b[0][2]++,io().s[5]++,le.jsx(UZ,{});case"delete":return io().b[0][3]++,io().s[6]++,le.jsx(Gy,{})}}render(){io().f[2]++;const{classBlockName:e,classBlockModifier:t}=(io().s[7]++,this.props);let r=(io().s[8]++,"");return io().s[9]++,e?(io().b[1][0]++,io().s[10]++,r=`maputnik-layer-list-icon-action__${e}`,io().s[11]++,t?(io().b[2][0]++,io().s[12]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):io().b[2][1]++):io().b[1][1]++,io().s[13]++,le.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}class IB extends nr.Component{getChildContext(){return io().f[6]++,io().s[16]++,{reactIconBase:{size:14}}}render(){io().f[7]++;const e=(io().s[17]++,this.props.visibility==="visible"?(io().b[3][0]++,"show"):(io().b[3][1]++,"hide"));return io().s[18]++,le.jsxs("li",{id:this.props.id,onClick:t=>(io().f[8]++,io().s[19]++,this.props.onLayerSelect(this.props.layerIndex)),"data-wd-key":"layer-list-item:"+this.props.layerId,className:um({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":this.props.isSelected,[this.props.className]:!0}),children:[le.jsx(gae,{...this.props}),le.jsx("span",{style:{flexGrow:1}}),le.jsx(I5,{wdKey:"layer-list-item:"+this.props.layerId+":delete",action:"delete",classBlockName:"delete",onClick:t=>(io().f[9]++,io().s[20]++,this.props.onLayerDestroy(this.props.layerIndex))}),le.jsx(I5,{wdKey:"layer-list-item:"+this.props.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:t=>(io().f[10]++,io().s[21]++,this.props.onLayerCopy(this.props.layerIndex))}),le.jsx(I5,{wdKey:"layer-list-item:"+this.props.layerId+":toggle-visibility",action:e,classBlockName:"visibility",classBlockModifier:e,onClick:t=>(io().f[11]++,io().s[22]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))})]},this.props.layerId)}}Tn(IB,"defaultProps",(io().s[14]++,{isSelected:!1,visibility:"visible",onLayerCopy:()=>{io().f[3]++},onLayerDestroy:()=>{io().f[4]++},onLayerVisibilityToggle:()=>{io().f[5]++}})),Tn(IB,"childContextTypes",(io().s[15]++,{reactIconBase:pi.object}));const yae=(io().s[23]++,mae(n=>(io().f[12]++,io().s[24]++,le.jsx(IB,{...n}))));function W2(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return W2=function(){return a},a}W2();class Za extends nr.Component{render(){return W2().f[0]++,W2().s[0]++,le.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:um("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var GN=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],G2=GN.join(","),QN=typeof Element>"u",Gg=QN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Q2=!QN&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},q2=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",a=s||t&&e&&n(e.parentNode);return a},vae=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},qN=function(e,t,r){if(q2(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(G2));return t&&Gg.call(e,G2)&&i.unshift(e),i=i.filter(r),i},YN=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var a=s.shift();if(!q2(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),d=o.length?o:a.children,g=n(d,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:a,candidates:g})}else{var b=Gg.call(a,G2);b&&r.filter(a)&&(t||!e.includes(a))&&i.push(a);var E=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),S=!q2(E,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(E&&S){var B=n(E===!0?a.children:E.children,!0,r);r.flatten?i.push.apply(i,B):i.push({scopeParent:a,candidates:B})}else s.unshift.apply(s,a.children)}}return i},$N=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},B0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||vae(e))&&!$N(e)?0:e.tabIndex},Cae=function(e,t){var r=B0(e);return r<0&&t&&!$N(e)?0:r},_ae=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},VN=function(e){return e.tagName==="INPUT"},bae=function(e){return VN(e)&&e.type==="hidden"},xae=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},wae=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Mae=function(e){if(!e.name)return!0;var t=e.form||Q2(e),r=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=wae(i,e.form);return!s||s===e},Sae=function(e){return VN(e)&&e.type==="radio"},Eae=function(e){return Sae(e)&&!Mae(e)},Bae=function(e){var t,r=e&&Q2(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var a,o,d;for(s=!!((a=i)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(d=e.ownerDocument)!==null&&d!==void 0&&d.contains(e));!s&&i;){var g,b,E;r=Q2(i),i=(g=r)===null||g===void 0?void 0:g.host,s=!!((b=i)!==null&&b!==void 0&&(E=b.ownerDocument)!==null&&E!==void 0&&E.contains(i))}}return s},iT=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},Oae=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Gg.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(Gg.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var d=e.parentElement,g=Q2(e);if(d&&!d.shadowRoot&&i(d)===!0)return iT(e);e.assignedSlot?e=e.assignedSlot:!d&&g!==e.ownerDocument?e=g.host:e=d}e=o}if(Bae(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return iT(e);return!1},Iae=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Gg.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},Y2=function(e,t){return!(t.disabled||q2(t)||bae(t)||Oae(t,e)||xae(t)||Iae(t))},kB=function(e,t){return!(Eae(t)||B0(t)<0||!Y2(e,t))},kae=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Tae=function n(e){var t=[],r=[];return e.forEach(function(i,s){var a=!!i.scopeParent,o=a?i.scopeParent:i,d=Cae(o,a),g=a?n(i.candidates):o;d===0?a?t.push.apply(t,g):t.push(o):r.push({documentOrder:s,tabIndex:d,item:i,isScope:a,content:g})}),r.sort(_ae).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},HN=function(e,t){t=t||{};var r;return t.getShadowRoot?r=YN([e],t.includeContainer,{filter:kB.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:kae}):r=qN(e,t.includeContainer,kB.bind(null,t)),Tae(r)},ZN=function(e,t){t=t||{};var r;return t.getShadowRoot?r=YN([e],t.includeContainer,{filter:Y2.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=qN(e,t.includeContainer,Y2.bind(null,t)),r},yg=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Gg.call(e,G2)===!1?!1:kB(t,e)},Pae=GN.concat("iframe").join(","),Wb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Gg.call(e,Pae)===!1?!1:Y2(t,e)};const Rae=Object.freeze(Object.defineProperty({__proto__:null,focusable:ZN,getTabIndex:B0,isFocusable:Wb,isTabbable:yg,tabbable:HN},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function oT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function sT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oT(Object(t),!0).forEach(function(r){Dae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Dae(n,e,t){return e=Fae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Kae(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Fae(n){var e=Kae(n,"string");return typeof e=="symbol"?e:String(e)}var aT={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Lae=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Uae=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},lC=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},zae=function(e){return lC(e)&&!e.shiftKey},jae=function(e){return lC(e)&&e.shiftKey},lT=function(e){return setTimeout(e,0)},uT=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},Ev=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},bb=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Nae=[],Wae=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||Nae,s=sT({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:zae,isKeyBackward:jae},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,d=function(pe,we,Ke){return pe&&pe[we]!==void 0?pe[we]:s[Ke||we]},g=function(pe,we){var Ke=typeof(we==null?void 0:we.composedPath)=="function"?we.composedPath():void 0;return a.containerGroups.findIndex(function(ge){var st=ge.container,Qe=ge.tabbableNodes;return st.contains(pe)||(Ke==null?void 0:Ke.includes(st))||Qe.find(function(Ze){return Ze===pe})})},b=function(pe){var we=s[pe];if(typeof we=="function"){for(var Ke=arguments.length,ge=new Array(Ke>1?Ke-1:0),st=1;st<Ke;st++)ge[st-1]=arguments[st];we=we.apply(void 0,ge)}if(we===!0&&(we=void 0),!we){if(we===void 0||we===!1)return we;throw new Error("`".concat(pe,"` was specified but was not a node, or did not return a node"))}var Qe=we;if(typeof we=="string"&&(Qe=r.querySelector(we),!Qe))throw new Error("`".concat(pe,"` as selector refers to no known node"));return Qe},E=function(){var pe=b("initialFocus");if(pe===!1)return!1;if(pe===void 0||!Wb(pe,s.tabbableOptions))if(g(r.activeElement)>=0)pe=r.activeElement;else{var we=a.tabbableGroups[0],Ke=we&&we.firstTabbableNode;pe=Ke||b("fallbackFocus")}if(!pe)throw new Error("Your focus-trap needs to have at least one focusable element");return pe},S=function(){if(a.containerGroups=a.containers.map(function(pe){var we=HN(pe,s.tabbableOptions),Ke=ZN(pe,s.tabbableOptions),ge=we.length>0?we[0]:void 0,st=we.length>0?we[we.length-1]:void 0,Qe=Ke.find(function(Ce){return yg(Ce)}),Ze=Ke.slice().reverse().find(function(Ce){return yg(Ce)}),We=!!we.find(function(Ce){return B0(Ce)>0});return{container:pe,tabbableNodes:we,focusableNodes:Ke,posTabIndexesFound:We,firstTabbableNode:ge,lastTabbableNode:st,firstDomTabbableNode:Qe,lastDomTabbableNode:Ze,nextTabbableNode:function(Pe){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,vt=we.indexOf(Pe);return vt<0?it?Ke.slice(Ke.indexOf(Pe)+1).find(function(_t){return yg(_t)}):Ke.slice(0,Ke.indexOf(Pe)).reverse().find(function(_t){return yg(_t)}):we[vt+(it?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(pe){return pe.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!b("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(pe){return pe.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},B=function Se(pe){var we=pe.activeElement;if(we)return we.shadowRoot&&we.shadowRoot.activeElement!==null?Se(we.shadowRoot):we},k=function Se(pe){if(pe!==!1&&pe!==B(document)){if(!pe||!pe.focus){Se(E());return}pe.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=pe,Lae(pe)&&pe.select()}},z=function(pe){var we=b("setReturnFocus",pe);return we||(we===!1?!1:pe)},j=function(pe){var we=pe.target,Ke=pe.event,ge=pe.isBackward,st=ge===void 0?!1:ge;we=we||bb(Ke),S();var Qe=null;if(a.tabbableGroups.length>0){var Ze=g(we,Ke),We=Ze>=0?a.containerGroups[Ze]:void 0;if(Ze<0)st?Qe=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:Qe=a.tabbableGroups[0].firstTabbableNode;else if(st){var Ce=uT(a.tabbableGroups,function(Dt){var Tt=Dt.firstTabbableNode;return we===Tt});if(Ce<0&&(We.container===we||Wb(we,s.tabbableOptions)&&!yg(we,s.tabbableOptions)&&!We.nextTabbableNode(we,!1))&&(Ce=Ze),Ce>=0){var Pe=Ce===0?a.tabbableGroups.length-1:Ce-1,it=a.tabbableGroups[Pe];Qe=B0(we)>=0?it.lastTabbableNode:it.lastDomTabbableNode}else lC(Ke)||(Qe=We.nextTabbableNode(we,!1))}else{var vt=uT(a.tabbableGroups,function(Dt){var Tt=Dt.lastTabbableNode;return we===Tt});if(vt<0&&(We.container===we||Wb(we,s.tabbableOptions)&&!yg(we,s.tabbableOptions)&&!We.nextTabbableNode(we))&&(vt=Ze),vt>=0){var _t=vt===a.tabbableGroups.length-1?0:vt+1,ft=a.tabbableGroups[_t];Qe=B0(we)>=0?ft.firstTabbableNode:ft.firstDomTabbableNode}else lC(Ke)||(Qe=We.nextTabbableNode(we))}}else Qe=b("fallbackFocus");return Qe},Y=function(pe){var we=bb(pe);if(!(g(we,pe)>=0)){if(Ev(s.clickOutsideDeactivates,pe)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Ev(s.allowOutsideClick,pe)||pe.preventDefault()}},q=function(pe){var we=bb(pe),Ke=g(we,pe)>=0;if(Ke||we instanceof Document)Ke&&(a.mostRecentlyFocusedNode=we);else{pe.stopImmediatePropagation();var ge,st=!0;if(a.mostRecentlyFocusedNode)if(B0(a.mostRecentlyFocusedNode)>0){var Qe=g(a.mostRecentlyFocusedNode),Ze=a.containerGroups[Qe].tabbableNodes;if(Ze.length>0){var We=Ze.findIndex(function(Ce){return Ce===a.mostRecentlyFocusedNode});We>=0&&(s.isKeyForward(a.recentNavEvent)?We+1<Ze.length&&(ge=Ze[We+1],st=!1):We-1>=0&&(ge=Ze[We-1],st=!1))}}else a.containerGroups.some(function(Ce){return Ce.tabbableNodes.some(function(Pe){return B0(Pe)>0})})||(st=!1);else st=!1;st&&(ge=j({target:a.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(a.recentNavEvent)})),k(ge||a.mostRecentlyFocusedNode||E())}a.recentNavEvent=void 0},ie=function(pe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=pe;var Ke=j({event:pe,isBackward:we});Ke&&(lC(pe)&&pe.preventDefault(),k(Ke))},J=function(pe){if(Uae(pe)&&Ev(s.escapeDeactivates,pe)!==!1){pe.preventDefault(),o.deactivate();return}(s.isKeyForward(pe)||s.isKeyBackward(pe))&&ie(pe,s.isKeyBackward(pe))},$=function(pe){var we=bb(pe);g(we,pe)>=0||Ev(s.clickOutsideDeactivates,pe)||Ev(s.allowOutsideClick,pe)||(pe.preventDefault(),pe.stopImmediatePropagation())},te=function(){if(a.active)return aT.activateTrap(i,o),a.delayInitialFocusTimer=s.delayInitialFocus?lT(function(){k(E())}):k(E()),r.addEventListener("focusin",q,!0),r.addEventListener("mousedown",Y,{capture:!0,passive:!1}),r.addEventListener("touchstart",Y,{capture:!0,passive:!1}),r.addEventListener("click",$,{capture:!0,passive:!1}),r.addEventListener("keydown",J,{capture:!0,passive:!1}),o},W=function(){if(a.active)return r.removeEventListener("focusin",q,!0),r.removeEventListener("mousedown",Y,!0),r.removeEventListener("touchstart",Y,!0),r.removeEventListener("click",$,!0),r.removeEventListener("keydown",J,!0),o},oe=function(pe){var we=pe.some(function(Ke){var ge=Array.from(Ke.removedNodes);return ge.some(function(st){return st===a.mostRecentlyFocusedNode})});we&&k(E())},fe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(oe):void 0,he=function(){fe&&(fe.disconnect(),a.active&&!a.paused&&a.containers.map(function(pe){fe.observe(pe,{subtree:!0,childList:!0})}))};return o={get active(){return a.active},get paused(){return a.paused},activate:function(pe){if(a.active)return this;var we=d(pe,"onActivate"),Ke=d(pe,"onPostActivate"),ge=d(pe,"checkCanFocusTrap");ge||S(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,we==null||we();var st=function(){ge&&S(),te(),he(),Ke==null||Ke()};return ge?(ge(a.containers.concat()).then(st,st),this):(st(),this)},deactivate:function(pe){if(!a.active)return this;var we=sT({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},pe);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,W(),a.active=!1,a.paused=!1,he(),aT.deactivateTrap(i,o);var Ke=d(we,"onDeactivate"),ge=d(we,"onPostDeactivate"),st=d(we,"checkCanReturnFocus"),Qe=d(we,"returnFocus","returnFocusOnDeactivate");Ke==null||Ke();var Ze=function(){lT(function(){Qe&&k(z(a.nodeFocusedBeforeActivation)),ge==null||ge()})};return Qe&&st?(st(z(a.nodeFocusedBeforeActivation)).then(Ze,Ze),this):(Ze(),this)},pause:function(pe){if(a.paused||!a.active)return this;var we=d(pe,"onPause"),Ke=d(pe,"onPostPause");return a.paused=!0,we==null||we(),W(),he(),Ke==null||Ke(),this},unpause:function(pe){if(!a.paused||!a.active)return this;var we=d(pe,"onUnpause"),Ke=d(pe,"onPostUnpause");return a.paused=!1,we==null||we(),S(),te(),he(),Ke==null||Ke(),this},updateContainerElements:function(pe){var we=[].concat(pe).filter(Boolean);return a.containers=we.map(function(Ke){return typeof Ke=="string"?r.querySelector(Ke):Ke}),a.active&&S(),he(),this}},o.updateContainerElements(e),o};const Gae=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Wae},Symbol.toStringTag,{value:"Module"})),Qae=UB(Gae),qae=UB(Rae);var k5,AT;function Yae(){if(AT)return k5;AT=1;function n(te){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n(te)}function e(te,W){if(!(te instanceof W))throw new TypeError("Cannot call a class as a function")}function t(te,W){for(var oe=0;oe<W.length;oe++){var fe=W[oe];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(te,S(fe.key),fe)}}function r(te,W,oe){return t(te.prototype,W),Object.defineProperty(te,"prototype",{writable:!1}),te}function i(te,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(W&&W.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),Object.defineProperty(te,"prototype",{writable:!1}),W&&s(te,W)}function s(te,W){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(fe,he){return fe.__proto__=he,fe},s(te,W)}function a(te){var W=g();return function(){var fe=b(te),he;if(W){var Se=b(this).constructor;he=Reflect.construct(fe,arguments,Se)}else he=fe.apply(this,arguments);return o(this,he)}}function o(te,W){if(W&&(n(W)==="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(te)}function d(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(te){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},b(te)}function E(te,W,oe){return W=S(W),W in te?Object.defineProperty(te,W,{value:oe,enumerable:!0,configurable:!0,writable:!0}):te[W]=oe,te}function S(te){var W=B(te,"string");return n(W)==="symbol"?W:String(W)}function B(te,W){if(n(te)!=="object"||te===null)return te;var oe=te[Symbol.toPrimitive];if(oe!==void 0){var fe=oe.call(te,W||"default");if(n(fe)!=="object")return fe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(te)}var k=La(),z=Cp(),j=Qae,Y=j.createFocusTrap,q=qae,ie=q.isFocusable,J=function(te){i(oe,te);var W=a(oe);function oe(fe){var he;e(this,oe),he=W.call(this,fe),E(d(he),"getNodeForOption",function(we){var Ke,ge=(Ke=this.internalOptions[we])!==null&&Ke!==void 0?Ke:this.originalOptions[we];if(typeof ge=="function"){for(var st=arguments.length,Qe=new Array(st>1?st-1:0),Ze=1;Ze<st;Ze++)Qe[Ze-1]=arguments[Ze];ge=ge.apply(void 0,Qe)}if(ge===!0&&(ge=void 0),!ge){if(ge===void 0||ge===!1)return ge;throw new Error("`".concat(we,"` was specified but was not a node, or did not return a node"))}var We=ge;if(typeof ge=="string"){var Ce;if(We=(Ce=this.getDocument())===null||Ce===void 0?void 0:Ce.querySelector(ge),!We)throw new Error("`".concat(we,"` as selector refers to no known node"))}return We}),he.handleDeactivate=he.handleDeactivate.bind(d(he)),he.handlePostDeactivate=he.handlePostDeactivate.bind(d(he)),he.handleClickOutsideDeactivates=he.handleClickOutsideDeactivates.bind(d(he)),he.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:he.handleDeactivate,onPostDeactivate:he.handlePostDeactivate,clickOutsideDeactivates:he.handleClickOutsideDeactivates},he.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var Se=fe.focusTrapOptions;for(var pe in Se)if(Object.prototype.hasOwnProperty.call(Se,pe)){if(pe==="returnFocusOnDeactivate"||pe==="onDeactivate"||pe==="onPostDeactivate"||pe==="checkCanReturnFocus"||pe==="clickOutsideDeactivates"){he.originalOptions[pe]=Se[pe];continue}he.internalOptions[pe]=Se[pe]}return he.outsideClick=null,he.focusTrapElements=fe.containerElements||[],he.updatePreviousElement(),he}return r(oe,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var he=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return he||(he===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var he=this.getDocument();he&&(this.previouslyFocusedElement=he.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(he){var Se=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,he):this.originalOptions.clickOutsideDeactivates;return Se&&(this.outsideClick={target:he.target,allowDeactivation:Se}),Se}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var he=this,Se=function(){var we=he.getReturnFocusNode(),Ke=!!(he.originalOptions.returnFocusOnDeactivate&&we!==null&&we!==void 0&&we.focus&&(!he.outsideClick||he.outsideClick.allowDeactivation&&!ie(he.outsideClick.target,he.internalOptions.tabbableOptions))),ge=he.internalOptions.preventScroll,st=ge===void 0?!1:ge;Ke&&we.focus({preventScroll:st}),he.originalOptions.onPostDeactivate&&he.originalOptions.onPostDeactivate.call(null),he.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(Se,Se):Se()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var he=this.focusTrapElements.some(Boolean);he&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(he){if(this.focusTrap){he.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var Se=!he.active&&this.props.active,pe=he.active&&!this.props.active,we=!he.paused&&this.props.paused,Ke=he.paused&&!this.props.paused;if(Se&&(this.updatePreviousElement(),this.focusTrap.activate()),pe){this.deactivateTrap();return}we&&this.focusTrap.pause(),Ke&&this.focusTrap.unpause()}else he.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var he=this,Se=this.props.children?k.Children.only(this.props.children):void 0;if(Se){if(Se.type&&Se.type===k.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var pe=function(ge){var st=he.props.containerElements;Se&&(typeof Se.ref=="function"?Se.ref(ge):Se.ref&&(Se.ref.current=ge)),he.focusTrapElements=st||[ge]},we=k.cloneElement(Se,{ref:pe});return we}return null}}]),oe}(k.Component),$=typeof Element>"u"?Function:Element;return J.propTypes={active:z.bool,paused:z.bool,focusTrapOptions:z.shape({document:z.object,onActivate:z.func,onPostActivate:z.func,checkCanFocusTrap:z.func,onPause:z.func,onPostPause:z.func,onUnpause:z.func,onPostUnpause:z.func,onDeactivate:z.func,onPostDeactivate:z.func,checkCanReturnFocus:z.func,initialFocus:z.oneOfType([z.instanceOf($),z.string,z.bool,z.func]),fallbackFocus:z.oneOfType([z.instanceOf($),z.string,z.func]),escapeDeactivates:z.oneOfType([z.bool,z.func]),clickOutsideDeactivates:z.oneOfType([z.bool,z.func]),returnFocusOnDeactivate:z.bool,setReturnFocus:z.oneOfType([z.instanceOf($),z.string,z.bool,z.func]),allowOutsideClick:z.oneOfType([z.bool,z.func]),preventScroll:z.bool,tabbableOptions:z.shape({displayCheck:z.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:z.oneOfType([z.bool,z.func])}),trapStack:z.array,isKeyForward:z.func,isKeyBackward:z.func}),containerElements:z.arrayOf(z.instanceOf($)),children:z.oneOfType([z.element,z.instanceOf($)])},J.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:Y},k5=J,k5}var T5={exports:{}},cT;function $ae(){return cT||(cT=1,function(n){(function(e){var t=!1,r,i;function s(){if(typeof r<"u")return r;var E=document.documentElement,S=document.createElement("div");return S.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),E.appendChild(S),r=S.offsetWidth-S.clientWidth,E.removeChild(S),r}function a(){return document.documentElement.scrollHeight>window.innerHeight}function o(E){if(!(typeof document>"u"||t)){var S=document.documentElement;i=window.pageYOffset,a()?S.style.width="calc(100% - "+s()+"px)":S.style.width="100%",S.style.position="fixed",S.style.top=-i+"px",S.style.overflow="hidden",t=!0}}function d(){if(!(typeof document>"u"||!t)){var E=document.documentElement;E.style.width="",E.style.position="",E.style.top="",E.style.overflow="",window.scroll(0,i),t=!1}}function g(){if(t){d();return}o()}var b={on:o,off:d,toggle:g};n.exports=b})()}(T5)),T5.exports}var P5,dT;function Vae(){if(dT)return P5;dT=1;function n(ie){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},n(ie)}function e(ie,J){if(!(ie instanceof J))throw new TypeError("Cannot call a class as a function")}function t(ie,J){for(var $=0;$<J.length;$++){var te=J[$];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ie,te.key,te)}}function r(ie,J,$){return J&&t(ie.prototype,J),Object.defineProperty(ie,"prototype",{writable:!1}),ie}function i(ie,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(J&&J.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),Object.defineProperty(ie,"prototype",{writable:!1}),J&&s(ie,J)}function s(ie,J){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,W){return te.__proto__=W,te},s(ie,J)}function a(ie){var J=g();return function(){var te=b(ie),W;if(J){var oe=b(this).constructor;W=Reflect.construct(te,arguments,oe)}else W=te.apply(this,arguments);return o(this,W)}}function o(ie,J){if(J&&(n(J)==="object"||typeof J=="function"))return J;if(J!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(ie)}function d(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(ie){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},b(ie)}function E(ie,J,$){return J in ie?Object.defineProperty(ie,J,{value:$,enumerable:!0,configurable:!0,writable:!0}):ie[J]=$,ie}var S=La(),B=GC(),k=Yae(),z=$ae(),j=function(ie){i($,ie);var J=a($);function $(te){var W;if(e(this,$),W=J.call(this,te),E(d(W),"getApplicationNode",function(){return W.props.getApplicationNode?W.props.getApplicationNode():W.props.applicationNode}),E(d(W),"checkUnderlayClick",function(oe){W.dialogNode&&W.dialogNode.contains(oe.target)||oe.pageX>oe.target.ownerDocument.documentElement.offsetWidth||oe.pageY>oe.target.ownerDocument.documentElement.offsetHeight||W.exit(oe)}),E(d(W),"checkDocumentKeyDown",function(oe){W.props.escapeExits&&(oe.key==="Escape"||oe.key==="Esc"||oe.keyCode===27)&&W.exit(oe)}),E(d(W),"exit",function(oe){W.props.onExit&&W.props.onExit(oe)}),!te.titleText&&!te.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return W}return r($,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var W=this.getApplicationNode();setTimeout(function(){W&&W.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&z.on()}},{key:"componentDidUpdate",value:function(W){W.scrollDisabled&&!this.props.scrollDisabled?z.off():!W.scrollDisabled&&this.props.scrollDisabled&&z.on(),this.props.escapeExits&&!W.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&W.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&z.off();var W=this.getApplicationNode();W&&W.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var W=this;setTimeout(function(){document.addEventListener("keydown",W.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var W=this;setTimeout(function(){document.removeEventListener("keydown",W.checkDocumentKeyDown)})}},{key:"render",value:function(){var W=this.props,oe={};if(W.includeDefaultStyles&&(oe={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},W.underlayColor&&(oe.background=W.underlayColor),W.underlayClickExits&&(oe.cursor="pointer")),W.underlayStyle)for(var fe in W.underlayStyle)W.underlayStyle.hasOwnProperty(fe)&&(oe[fe]=W.underlayStyle[fe]);var he={className:W.underlayClass,style:oe};W.underlayClickExits&&(he.onMouseDown=this.checkUnderlayClick);for(var Se in this.props.underlayProps)he[Se]=this.props.underlayProps[Se];var pe={};W.includeDefaultStyles&&(pe={display:"inline-block",height:"100%",verticalAlign:"middle"});var we={key:"a",style:pe},Ke={};if(W.includeDefaultStyles&&(Ke={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:W.focusDialog?0:null},W.verticallyCenter&&(Ke.verticalAlign="middle",Ke.top=0)),W.dialogStyle)for(var ge in W.dialogStyle)W.dialogStyle.hasOwnProperty(ge)&&(Ke[ge]=W.dialogStyle[ge]);var st={key:"b",ref:(function(Ce){this.dialogNode=Ce}).bind(this),role:W.alert?"alertdialog":"dialog",id:W.dialogId,className:W.dialogClass,style:Ke};W.titleId?st["aria-labelledby"]=W.titleId:W.titleText&&(st["aria-label"]=W.titleText),W.focusDialog&&(st.tabIndex="-1");for(var Qe in W)/^(data-|aria-)/.test(Qe)&&(st[Qe]=W[Qe]);var Ze=[S.createElement("div",st,W.children)];W.verticallyCenter&&Ze.unshift(S.createElement("div",we));var We=W.focusTrapOptions||{};return(W.focusDialog||W.initialFocus)&&(We.initialFocus=W.focusDialog?"#".concat(this.props.dialogId):W.initialFocus),We.escapeDeactivates=W.escapeExits,S.createElement(k,{focusTrapOptions:We,paused:W.focusTrapPaused},S.createElement("div",he,Ze))}}]),$}(S.Component);E(j,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function Y(ie,J){if(!window.document)return function(){return null};J=J||{};var $=function(te){i(oe,te);var W=a(oe);function oe(){var fe;e(this,oe);for(var he=arguments.length,Se=new Array(he),pe=0;pe<he;pe++)Se[pe]=arguments[pe];return fe=W.call.apply(W,[this].concat(Se)),E(d(fe),"container",null),fe}return r(oe,[{key:"componentDidMount",value:function(){J.renderTo?this.container=typeof J.renderTo=="string"?document.querySelector(J.renderTo):J.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){J.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:B.createPortal(S.createElement(ie,this.props,this.props.children),this.container)}}]),oe}(S.Component);return E($,"defaultProps",{mounted:!0}),$}var q=Y(j);return q.renderTo=function(ie){return Y(j,{renderTo:ie})},P5=q,P5}var Hae=Vae();const Zae=Xa(Hae);function CA(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return CA=function(){return a},a}CA();class XN extends nr.Component{constructor(){super(...arguments);Tn(this,"onClose",(CA().s[1]++,()=>{CA().f[0]++,CA().s[2]++,document.activeElement?(CA().b[0][0]++,CA().s[3]++,document.activeElement.blur()):CA().b[0][1]++,CA().s[4]++,setTimeout(()=>{CA().f[1]++,CA().s[5]++,this.props.onOpenToggle(!1)},0)}))}render(){CA().f[2]++;const t=(CA().s[6]++,this.props.t);return CA().s[7]++,this.props.isOpen?(CA().b[1][0]++,CA().s[8]++,le.jsx(Zae,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:le.jsxs("div",{className:um("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[le.jsxs("header",{className:"maputnik-modal-header",children:[le.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),le.jsx("span",{className:"maputnik-modal-header-space"}),le.jsx("button",{className:"maputnik-modal-header-toggle",title:t("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:le.jsx(VZ,{})})]}),le.jsx("div",{className:"maputnik-modal-scroller",children:le.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(CA().b[1][1]++,CA().s[9]++,!1)}}Tn(XN,"defaultProps",(CA().s[0]++,{underlayClickExits:!0}));const q0=(CA().s[10]++,Vs()(XN)),Xae=8,Jae={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"styleeditor:slimmode":!0,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{String:"one",Number:2,Boolean:!1}}},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},centerAltitude:{type:"number",doc:"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:123.4,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2980",ios:"https://github.com/maplibre/maplibre-native/issues/2980"}}},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},roll:{type:"number",default:0,units:"degrees",doc:"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:45,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2941",ios:"https://github.com/maplibre/maplibre-native/issues/2941"}}},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sky:{type:"sky",doc:"The map's sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.",example:{"sky-color":"#199EF3","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#0000ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},projection:{type:"projection",doc:"The projection configuration",example:{type:["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},terrain:{type:"terrain",doc:"The terrain configuration.",example:{source:"raster-dem-source",exaggeration:.5}},sources:{required:!0,type:"sources",doc:"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn't enough to make data appear on the map because sources don't contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\n\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).",example:{"maplibre-demotiles":{type:"vector",url:"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{type:"vector",url:"http://api.example.com/tilejson.json"},"maplibre-streets":{type:"vector",tiles:["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],maxzoom:14},"wms-imagery":{type:"raster",tiles:["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],tileSize:256}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:`A URL template for loading signed-distance-field glyph sets in PBF format. 

The URL must include:

 - \`{fontstack}\` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the text-font property of a symbol layer. 

 - \`{range}\` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.

This property is required if any layer uses the \`text-field\` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).`,example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"A style's `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`.\n\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.",example:[{id:"coastline",source:"maplibre","source-layer":"countries",type:"line",paint:{"line-color":"#198EC8"}}]}},ele={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},tle=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],nle={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},rle={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},ile={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},ole={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},sle={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},ale={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},lle={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},ule=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Ale={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},cle={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},dle={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},hle={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},fle={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},ple=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Font stack to use for displaying text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),mle={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},gle={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},yle={type:"array",value:"*",doc:"A filter selects specific features from a layer."},vle={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},Cle={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},_le={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},ble={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},xle=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string","value","expression"],"result":"value"},"value":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["var","density"]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["JSON object or array"],"result":"array | object"},"value":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.","example":{"syntax":{"method":["value","string?","number?"],"result":"array"},"value":["array",["literal",["a","b","c"]],"string",3]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","example":{"syntax":{"method":["number","value"],"result":"value"},"value":["at",1,["literal",["a","b","c"]]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure/)","example":{"syntax":{"method":["value","value"],"result":"boolean"},"value":["in","$type","Point"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","value","number?"],"result":"number"},"value":["index-of","foo",["baz","bar","hello","foo","world"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","number","number?"],"result":"value"},"value":["slice",["get","name"],0,3]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["case",["boolean",["feature-state","hover"],false],1,0.5]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["coalesce","value","fallback"],"result":"value"},"value":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["step","number","number","number","..."],"result":"number"},"value":["step",["get","point_count"],20,100,30,750,40]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"number | array<number> | color"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns mathematical constant ln(2).","example":{"syntax":{"method":[],"result":"number"},"value":["ln2"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","example":{"syntax":{"method":[],"result":"number"},"value":["pi"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","example":{"syntax":{"method":[],"result":"number"},"value":["e"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","example":{"syntax":{"method":["value"],"result":"string"},"value":["typeof",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"string"},"value":["string",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["number",["get","population"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"boolean"},"value":["boolean",["feature-state","hover"],false]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"object"},"value":["object",["get","some-property"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","example":{"syntax":{"method":["collator","{ \\"case-sensitive\\": boolean, \\"diacritic-sensitive\\": boolean, \\"locale\\": string }"],"result":"collator"},"value":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["value","{ \\"text-font\\": string, \\"text-color\\": color, \\"font-scale\\": number, \\"vertical-align\\": \\"bottom\\" | \\"center\\" | \\"top\\" }","..."],"result":"formatted"},"value":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/5043","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["value"],"result":"image"},"value":["image","marker_15"]},"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["number","{ \\"locale\\": string, \\"currency\\": string, \\"min-fraction-digits\\": number, \\"max-fraction-digits\\": number }"],"result":"string"},"value":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)","example":{"syntax":{"method":["value"],"result":"string"},"value":["to-string",["get","mag"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["to-number","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","example":{"syntax":{"method":["value"],"result":"boolean"},"value":["to-boolean","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","example":{"syntax":{"method":["color"],"result":"array"},"value":["to-rgba","#ff0000"]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"color"},"value":["to-color","#edf8e9"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number"],"result":"color"},"value":["rgb",255,0,0]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number","number"],"result":"color"},"value":["rgba",255,0,0,1]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/3d-extrusion-floorplan/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["get","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of an property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["has","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["array"],"result":"number"},"value":["length",["get","myArray"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","example":{"syntax":{"method":[],"result":"value"},"value":["properties"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["feature-state","hover"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","example":{"syntax":{"method":[],"result":"string"},"value":["==",["geometry-type"],"Polygon"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","example":{"syntax":{"method":[],"result":"value"},"value":["id"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","example":{"syntax":{"method":[],"result":"number"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","example":{"syntax":{"method":[],"result":"number"},"value":["heatmap-density"]},"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","example":{"syntax":{"method":["number"],"result":"number"},"value":["line-progress",0.5]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","example":{"syntax":{"method":["string"],"result":"value"},"value":["accumulated","sum"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["+",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["*",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","example":{"syntax":{"method":["number","number?"],"result":"number"},"value":["-",10]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["/",["get","population"],["get","sq-km"]]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["%",10,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["^",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sqrt",9]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log10",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ln",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log2",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["cos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["tan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["asin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["acos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["atan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["min",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["max",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","example":{"syntax":{"method":["number"],"result":"number"},"value":["round",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["abs",-1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ceil",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["floor",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"number"},"value":["distance",{"type":"Point","coordinates":[0,0]}]},"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/3d-buildings/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-markers/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["==","$type","Polygon"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!=","cluster",true]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["all",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["any",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!",["has","point_count"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"boolean"},"value":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}]},"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["is-supported-script","दिल्ली"]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["upcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["downcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-image-missing-generated/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","example":{"syntax":{"method":["string","string","..."],"result":"string"},"value":["concat","square-rgb-",["get","color"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","example":{"syntax":{"method":["collator"],"result":"string"},"value":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),wle={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},Mle={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},Sle={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},Ele={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Ble=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Ole={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Ile={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"https://github.com/maplibre/maplibre-gl-js/issues/1235",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},kle={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Tle={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ple={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Rle={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Dle={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Kle={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Fle={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},Lle={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},ns={$version:Xae,$root:Jae,sources:ele,source:tle,source_vector:nle,source_raster:rle,source_raster_dem:ile,source_geojson:ole,source_video:sle,source_image:ale,layer:lle,layout:ule,layout_background:Ale,layout_fill:cle,layout_circle:dle,layout_heatmap:hle,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:fle,layout_symbol:ple,layout_raster:mle,layout_hillshade:gle,filter:yle,filter_operator:vle,geometry_type:Cle,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:_le,expression:ble,expression_name:xle,light:wle,sky:Mle,terrain:Sle,projection:Ele,paint:Ble,paint_fill:Ole,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Ile,paint_circle:kle,paint_heatmap:Tle,paint_symbol:Ple,paint_raster:Rle,paint_hillshade:Dle,paint_background:Kle,transition:Fle,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:Lle};function zs(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="3158bd93bbefd1bd0e63d26617da070781685c25",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:17}},1:{start:{line:7,column:4},end:{line:9,column:6}},2:{start:{line:11,column:16},end:{line:19,column:3}},3:{start:{line:12,column:4},end:{line:18,column:7}},4:{start:{line:15,column:6},end:{line:17,column:7}},5:{start:{line:16,column:8},end:{line:16,column:48}},6:{start:{line:21,column:33},end:{line:21,column:43}},7:{start:{line:22,column:20},end:{line:22,column:35}},8:{start:{line:23,column:4},end:{line:42,column:5}},9:{start:{line:24,column:6},end:{line:37,column:14}},10:{start:{line:32,column:27},end:{line:32,column:61}},11:{start:{line:38,column:11},end:{line:42,column:5}},12:{start:{line:39,column:6},end:{line:39,column:174}},13:{start:{line:41,column:22},end:{line:41,column:37}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:21},end:{line:10,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:16},end:{line:11,column:17}},loc:{start:{line:11,column:26},end:{line:19,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:7},end:{line:14,column:8}},loc:{start:{line:14,column:13},end:{line:18,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:43,column:3}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:27},end:{line:32,column:61}},line:32}},branchMap:{0:{loc:{start:{line:15,column:6},end:{line:17,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:17,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:22,column:20},end:{line:22,column:35}},type:"binary-expr",locations:[{start:{line:22,column:20},end:{line:22,column:29}},{start:{line:22,column:33},end:{line:22,column:35}}],line:22},2:{loc:{start:{line:23,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:42,column:5}},{start:{line:38,column:11},end:{line:42,column:5}}],line:23},3:{loc:{start:{line:30,column:26},end:{line:30,column:106}},type:"cond-expr",locations:[{start:{line:30,column:44},end:{line:30,column:74}},{start:{line:30,column:77},end:{line:30,column:106}}],line:30},4:{loc:{start:{line:31,column:67},end:{line:31,column:102}},type:"cond-expr",locations:[{start:{line:31,column:85},end:{line:31,column:91}},{start:{line:31,column:94},end:{line:31,column:102}}],line:31},5:{loc:{start:{line:34,column:22},end:{line:34,column:120}},type:"cond-expr",locations:[{start:{line:34,column:56},end:{line:34,column:79}},{start:{line:34,column:98},end:{line:34,column:120}}],line:34},6:{loc:{start:{line:38,column:11},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:42,column:5}},{start:{line:40,column:11},end:{line:42,column:5}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AAuCQ,SASuB,KATvB;AAvCR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAc5C,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,IACR;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC/B,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,MAAM,aAAa;AAC1B,aAAK,MAAM,YAAY,KAAK,MAAM,IAAI;AAAA,MACxC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,UAAM,EAAC,IAAG,IAAI,aAAa,CAAC;AAE5B,QAAI,KAAK;AACP,aAAO,oBAAC,WAAM,WAAU,wBACtB,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,QACA;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,KAAK,MAAM,OAAO,iCAAiC;AAAA,YAC/D,WAAW,4CAA4C,KAAK,MAAM,OAAO,SAAS,QAAQ;AAAA,YAC1F,SAAS,MAAM,KAAK,YAAY,CAAC,KAAK,MAAM,IAAI;AAAA,YAChD,eAAa,sBAAoB;AAAA,YAEhC,eAAK,MAAM,OAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,QACzD;AAAA,SACF,GACF;AAAA,IACF,WACS,OAAO;AACd,aAAO,oBAAC,WAAM,WAAU,wBACtB,8BAAC,SAAI,WAAU,uBACZ,iBACH,GACF;AAAA,IACF,OACK;AACH,0BAAC,SAAI;AAAA,IACP;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3158bd93bbefd1bd0e63d26617da070781685c25"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return zs=function(){return a},a}zs();class WO extends nr.Component{constructor(t){zs().f[0]++,zs().s[0]++;super(t);Tn(this,"onToggleDoc",(zs().s[2]++,t=>{zs().f[1]++,zs().s[3]++,this.setState({open:t},()=>{zs().f[2]++,zs().s[4]++,this.props.onToggleDoc?(zs().b[0][0]++,zs().s[5]++,this.props.onToggleDoc(this.state.open)):zs().b[0][1]++})}));zs().s[1]++,this.state={open:!1}}render(){zs().f[3]++;const{label:t,fieldSpec:r}=(zs().s[6]++,this.props),{doc:i}=(zs().s[7]++,zs().b[1][0]++,r||(zs().b[1][1]++,{}));if(zs().s[8]++,i)return zs().b[2][0]++,zs().s[9]++,le.jsx("label",{className:"maputnik-doc-wrapper",children:le.jsxs("div",{className:"maputnik-doc-target",children:[t," ",le.jsx("button",{"aria-label":this.state.open?(zs().b[3][0]++,"close property documentation"):(zs().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${this.state.open?(zs().b[4][0]++,"open"):(zs().b[4][1]++,"closed")}`,onClick:()=>(zs().f[4]++,zs().s[10]++,this.onToggleDoc(!this.state.open)),"data-wd-key":"field-doc-button-"+t,children:this.state.open?(zs().b[5][0]++,le.jsx(RZ,{})):(zs().b[5][1]++,le.jsx(DZ,{}))})]})});if(zs().b[2][1]++,zs().s[11]++,t)return zs().b[6][0]++,zs().s[12]++,le.jsx("label",{className:"maputnik-doc-wrapper",children:le.jsx("div",{className:"maputnik-doc-target",children:t})});zs().b[6][1]++,zs().s[13]++}}function Aa(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Aa=function(){return a},a}Aa();const hT=(Aa().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class GO extends nr.Component{render(){Aa().f[0]++;const{fieldSpec:e}=(Aa().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:s}=(Aa().s[2]++,e),a=(Aa().s[3]++,e["sdk-support"]),o=(Aa().s[4]++,Aa().b[0][0]++,!!r&&(Aa().b[0][1]++,!Array.isArray(r)));return Aa().s[5]++,le.jsxs(le.Fragment,{children:[(Aa().b[1][0]++,t&&(Aa().b[1][1]++,le.jsxs("div",{className:"SpecDoc",children:[le.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(Aa().b[2][0]++,o&&(Aa().b[2][1]++,le.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([d,g])=>(Aa().f[1]++,Aa().s[6]++,le.jsxs("li",{children:[le.jsx("code",{children:JSON.stringify(d)}),le.jsx("div",{children:g.doc})]},d)))})))]}))),(Aa().b[3][0]++,a&&(Aa().b[3][1]++,le.jsx("div",{className:"SpecDoc__sdk-support",children:le.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{}),Object.values(hT).map(d=>(Aa().f[2]++,Aa().s[7]++,le.jsx("th",{children:d},d)))]})}),le.jsx("tbody",{children:Object.entries(a).map(([d,g])=>(Aa().f[3]++,Aa().s[8]++,le.jsxs("tr",{children:[le.jsx("td",{children:d}),Object.keys(hT).map(b=>(Aa().f[4]++,Aa().s[9]++,Object.prototype.hasOwnProperty.call(g,b)?(Aa().b[4][0]++,Aa().s[10]++,le.jsx("td",{children:g[b]},b)):(Aa().b[4][1]++,Aa().s[11]++,le.jsx("td",{children:"no"},b))))]},d)))})]})}))),(Aa().b[5][0]++,i&&(Aa().b[5][1]++,s)&&(Aa().b[5][2]++,le.jsx("div",{className:"SpecDoc__learn-more",children:le.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:s})})))]})}}function Lo(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Lo=function(){return a},a}Lo();class ya extends nr.Component{constructor(t){Lo().f[0]++,Lo().s[1]++;super(t);Tn(this,"_blockEl",(Lo().s[0]++,null));Tn(this,"onToggleDoc",(Lo().s[6]++,t=>{Lo().f[2]++,Lo().s[7]++,this.setState({showDoc:t})}));Tn(this,"onLabelClick",(Lo().s[8]++,t=>{var s;Lo().f[3]++;const r=(Lo().s[9]++,t.nativeEvent.target),i=(Lo().s[10]++,(s=this._blockEl)==null?void 0:s.contains(r));Lo().s[11]++,Lo().b[3][0]++,t.nativeEvent.target.nodeName!=="INPUT"&&(Lo().b[3][1]++,!i)?(Lo().b[2][0]++,Lo().s[12]++,t.stopPropagation()):Lo().b[2][1]++,Lo().s[13]++,t.nativeEvent.target.nodeName!=="A"?(Lo().b[4][0]++,Lo().s[14]++,t.preventDefault()):Lo().b[4][1]++}));Lo().s[2]++,this.state={showDoc:!1}}onChange(t){Lo().f[1]++;const r=(Lo().s[3]++,t.target.value);if(Lo().s[4]++,this.props.onChange)return Lo().b[0][0]++,Lo().s[5]++,this.props.onChange(r===""?(Lo().b[1][0]++,void 0):(Lo().b[1][1]++,r));Lo().b[0][1]++}render(){return Lo().f[4]++,Lo().s[15]++,le.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:um({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Lo().b[5][0]++,this.props.fieldSpec&&(Lo().b[5][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:le.jsx(WO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Lo().b[6][0]++,!this.props.fieldSpec&&(Lo().b[6][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),le.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),le.jsx("div",{className:"maputnik-input-block-content",ref:t=>(Lo().f[5]++,Lo().s[16]++,this._blockEl=t),children:this.props.children}),(Lo().b[7][0]++,this.props.fieldSpec&&(Lo().b[7][1]++,le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Lo().b[8][0]++,""):(Lo().b[8][1]++,"none")},children:le.jsx(GO,{fieldSpec:this.props.fieldSpec})})))]})}}function Kc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Kc=function(){return a},a}Kc();class Zg extends nr.Component{render(){Kc().f[0]++;let e=(Kc().s[0]++,this.props.options);return Kc().s[1]++,Kc().b[1][0]++,e.length>0&&(Kc().b[1][1]++,!Array.isArray(e[0]))?(Kc().b[0][0]++,Kc().s[2]++,e=e.map(t=>(Kc().f[1]++,Kc().s[3]++,[t,t]))):Kc().b[0][1]++,Kc().s[4]++,le.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Kc().f[2]++,Kc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Kc().f[3]++,Kc().s[6]++,le.jsx("option",{value:t,children:r},t)))})}}function Fi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Fi=function(){return a},a}Fi();class Ff extends nr.Component{constructor(e){Fi().f[1]++,Fi().s[1]++,super(e),Fi().s[2]++,this.state={editing:!1,value:(Fi().b[0][0]++,e.value||(Fi().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Fi().f[2]++,Fi().s[3]++,t.editing)Fi().b[1][1]++;else return Fi().b[1][0]++,Fi().s[4]++,{value:e.value};return Fi().s[5]++,{}}render(){Fi().f[3]++;let e,t;return Fi().s[6]++,this.props.multi?(Fi().b[2][0]++,Fi().s[7]++,e="textarea",Fi().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Fi().b[2][1]++,Fi().s[9]++,e="input",Fi().s[10]++,t=["maputnik-string"]),Fi().s[11]++,this.props.disabled?(Fi().b[3][0]++,Fi().s[12]++,t.push("maputnik-string--disabled")):Fi().b[3][1]++,Fi().s[13]++,nr.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Fi().b[4][0]++,this.props.spellCheck):(Fi().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Fi().b[5][0]++,""):(Fi().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Fi().f[4]++,Fi().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Fi().f[5]++,Fi().s[15]++,this.props.onInput?(Fi().b[6][0]++,Fi().s[16]++,this.props.onInput(this.state.value)):Fi().b[6][1]++})},onBlur:()=>{Fi().f[6]++,Fi().s[17]++,this.state.value!==this.props.value?(Fi().b[7][0]++,Fi().s[18]++,this.setState({editing:!1}),Fi().s[19]++,this.props.onChange?(Fi().b[8][0]++,Fi().s[20]++,this.props.onChange(this.state.value)):Fi().b[8][1]++):Fi().b[7][1]++},onKeyDown:r=>{Fi().f[7]++,Fi().s[21]++,Fi().b[10][0]++,r.keyCode===13&&(Fi().b[10][1]++,this.props.onChange)?(Fi().b[9][0]++,Fi().s[22]++,this.props.onChange(this.state.value)):Fi().b[9][1]++},required:this.props.required})}}Tn(Ff,"defaultProps",(Fi().s[0]++,{onInput:()=>{Fi().f[0]++}}));function up(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="7881723dfc9d5af5c18468677e4f429a5a061179",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:9,column:24},end:{line:11,column:3}},1:{start:{line:13,column:14},end:{line:13,column:26}},2:{start:{line:14,column:4},end:{line:50,column:6}},3:{start:{line:53,column:18},end:{line:53,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:11},end:{line:51,column:3}},line:12}},branchMap:{0:{loc:{start:{line:22,column:10},end:{line:28,column:11}},type:"binary-expr",locations:[{start:{line:22,column:10},end:{line:22,column:29}},{start:{line:22,column:49},end:{line:28,column:11}}],line:22},1:{loc:{start:{line:29,column:10},end:{line:47,column:11}},type:"binary-expr",locations:[{start:{line:29,column:10},end:{line:29,column:30}},{start:{line:29,column:50},end:{line:47,column:11}}],line:29}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AAuBW,SAKH,KALG;AAvBX,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAUjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,eAAe;AAAA,IACpB,UAAU;AAAA,EACZ;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,MAAM;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QACtD,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAEjB;AAAA,eAAK,MAAM,YACV;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU;AAAA;AAAA,UACZ;AAAA,UAED,CAAC,KAAK,MAAM,YACX;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,gBACP,CAAC,cAAc,YAAY;AAAA,gBAC3B,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,kBAAkB,gBAAgB;AAAA,gBACnC,CAAC,aAAa,WAAW;AAAA,gBACzB,CAAC,WAAW,SAAS;AAAA,cACvB;AAAA,cACA,UAAU,KAAK,MAAM;AAAA,cACrB,OAAO,KAAK,MAAM;AAAA,cAClB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,UAClC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7881723dfc9d5af5c18468677e4f429a5a061179"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return up=function(){return a},a}up();class JN extends nr.Component{render(){up().f[0]++;const e=(up().s[1]++,this.props.t);return up().s[2]++,le.jsxs(ya,{label:e("Type"),fieldSpec:ns.layer.type,"data-wd-key":this.props.wdKey,error:this.props.error,children:[(up().b[0][0]++,this.props.disabled&&(up().b[0][1]++,le.jsx(Ff,{value:this.props.value,disabled:!0}))),(up().b[1][0]++,!this.props.disabled&&(up().b[1][1]++,le.jsx(Zg,{options:[["background","Background"],["fill","Fill"],["line","Line"],["symbol","Symbol"],["raster","Raster"],["circle","Circle"],["fill-extrusion","Fill Extrusion"],["hillshade","Hillshade"],["heatmap","Heatmap"]],onChange:this.props.onChange,value:this.props.value,"data-wd-key":this.props.wdKey+".select"})))]})}}Tn(JN,"defaultProps",(up().s[0]++,{disabled:!1}));const eW=(up().s[3]++,Vs()(JN));function $2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="f6ac2bd12dbef0198dd96da668f75e4659321d69",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:24,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:25,column:3}},line:7}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,qBAAqB,gBAAgB,MAAM,UAAwB;AAAA,EACjE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAM;AAAA,QAAK,WAAW,OAAO,MAAM;AAAA,QAE/C,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,SAAS,KAAK,MAAM;AAAA,YACpB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,QAClC;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f6ac2bd12dbef0198dd96da668f75e4659321d69"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return $2=function(){return a},a}$2();class tW extends nr.Component{render(){return $2().f[0]++,$2().s[0]++,le.jsx(ya,{label:"ID",fieldSpec:ns.layer.id,"data-wd-key":this.props.wdKey,error:this.props.error,children:le.jsx(Ff,{value:this.props.value,onInput:this.props.onChange,"data-wd-key":this.props.wdKey+".input"})})}}var R5={exports:{}},fT;function Ule(){if(fT)return R5.exports;fT=1;var n=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function e(Qe){var Ze,We,Ce,Pe=Qe.ownerDocument,it=Pe.body,vt=Pe&&Pe.documentElement;return Ze=Qe.getBoundingClientRect(),We=Ze.left,Ce=Ze.top,We-=vt.clientLeft||it.clientLeft||0,Ce-=vt.clientTop||it.clientTop||0,{left:We,top:Ce}}function t(Qe,Ze){var We=Qe["page"+(Ze?"Y":"X")+"Offset"],Ce="scroll"+(Ze?"Top":"Left");if(typeof We!="number"){var Pe=Qe.document;We=Pe.documentElement[Ce],typeof We!="number"&&(We=Pe.body[Ce])}return We}function r(Qe){return t(Qe)}function i(Qe){return t(Qe,!0)}function s(Qe){var Ze=e(Qe),We=Qe.ownerDocument,Ce=We.defaultView||We.parentWindow;return Ze.left+=r(Ce),Ze.top+=i(Ce),Ze}function a(Qe,Ze,We){var Ce="",Pe=Qe.ownerDocument;return(We=We||Pe.defaultView.getComputedStyle(Qe,null))&&(Ce=We.getPropertyValue(Ze)||We[Ze]),Ce}var o=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),d=/^(top|right|bottom|left)$/,g="currentStyle",b="runtimeStyle",E="left",S="px";function B(Qe,Ze){var We=Qe[g]&&Qe[g][Ze];if(o.test(We)&&!d.test(Ze)){var Ce=Qe.style,Pe=Ce[E],it=Qe[b][E];Qe[b][E]=Qe[g][E],Ce[E]=Ze==="fontSize"?"1em":We||0,We=Ce.pixelLeft+S,Ce[E]=Pe,Qe[b][E]=it}return We===""?"auto":We}var k;typeof window<"u"&&(k=window.getComputedStyle?a:B);function z(Qe,Ze){Ke(Qe,"position")==="static"&&(Qe.style.position="relative");var We=s(Qe),Ce={},Pe,it;for(it in Ze)Pe=parseFloat(Ke(Qe,it))||0,Ce[it]=Pe+Ze[it]-We[it];Ke(Qe,Ce)}function j(Qe,Ze){for(var We=0;We<Qe.length;We++)Ze(Qe[We])}function Y(Qe){return k(Qe,"boxSizing")==="border-box"}var q=["margin","border","padding"],ie=-1,J=2,$=1,te=0;function W(Qe,Ze,We){var Ce={},Pe=Qe.style,it;for(it in Ze)Ce[it]=Pe[it],Pe[it]=Ze[it];We.call(Qe);for(it in Ze)Pe[it]=Ce[it]}function oe(Qe,Ze,We){var Ce=0,Pe,it,vt;for(it=0;it<Ze.length;it++)if(Pe=Ze[it],Pe)for(vt=0;vt<We.length;vt++){var _t;Pe==="border"?_t=Pe+We[vt]+"Width":_t=Pe+We[vt],Ce+=parseFloat(k(Qe,_t))||0}return Ce}function fe(Qe){return Qe!=null&&Qe==Qe.window}var he={};j(["Width","Height"],function(Qe){he["doc"+Qe]=function(Ze){var We=Ze.document;return Math.max(We.documentElement["scroll"+Qe],We.body["scroll"+Qe],he["viewport"+Qe](We))},he["viewport"+Qe]=function(Ze){var We="client"+Qe,Ce=Ze.document,Pe=Ce.body,it=Ce.documentElement,vt=it[We];return Ce.compatMode==="CSS1Compat"&&vt||Pe&&Pe[We]||vt}});function Se(Qe,Ze,We){if(fe(Qe))return Ze==="width"?he.viewportWidth(Qe):he.viewportHeight(Qe);if(Qe.nodeType===9)return Ze==="width"?he.docWidth(Qe):he.docHeight(Qe);var Ce=Ze==="width"?["Left","Right"]:["Top","Bottom"],Pe=Ze==="width"?Qe.offsetWidth:Qe.offsetHeight;k(Qe);var it=Y(Qe),vt=0;(Pe==null||Pe<=0)&&(Pe=void 0,vt=k(Qe,Ze),(vt==null||Number(vt)<0)&&(vt=Qe.style[Ze]||0),vt=parseFloat(vt)||0),We===void 0&&(We=it?$:ie);var _t=Pe!==void 0||it,ft=Pe||vt;return We===ie?_t?ft-oe(Qe,["border","padding"],Ce):vt:_t?ft+(We===$?0:We===J?-oe(Qe,["border"],Ce):oe(Qe,["margin"],Ce)):vt+oe(Qe,q.slice(We),Ce)}var pe={position:"absolute",visibility:"hidden",display:"block"};function we(Qe){var Ze,We=arguments;return Qe.offsetWidth!==0?Ze=Se.apply(void 0,We):W(Qe,pe,function(){Ze=Se.apply(void 0,We)}),Ze}j(["width","height"],function(Qe){var Ze=Qe.charAt(0).toUpperCase()+Qe.slice(1);he["outer"+Ze]=function(Ce,Pe){return Ce&&we(Ce,Qe,Pe?te:$)};var We=Qe==="width"?["Left","Right"]:["Top","Bottom"];he[Qe]=function(Ce,Pe){if(Pe!==void 0){if(Ce){k(Ce);var it=Y(Ce);return it&&(Pe+=oe(Ce,["padding","border"],We)),Ke(Ce,Qe,Pe)}return}return Ce&&we(Ce,Qe,ie)}});function Ke(Qe,Ze,We){if(typeof Ze=="object"){for(var Ce in Ze)Ke(Qe,Ce,Ze[Ce]);return}if(typeof We<"u")typeof We=="number"&&(We=We+"px"),Qe.style[Ze]=We;else return k(Qe,Ze)}function ge(Qe,Ze){for(var We in Ze)Qe[We]=Ze[We];return Qe}var st=R5.exports={getWindow:function(Qe){var Ze=Qe.ownerDocument||Qe;return Ze.defaultView||Ze.parentWindow},offset:function(Qe,Ze){if(typeof Ze<"u")z(Qe,Ze);else return s(Qe)},isWindow:fe,each:j,css:Ke,clone:function(Qe){var Ze={};for(var We in Qe)Ze[We]=Qe[We];var Ce=Qe.overflow;if(Ce)for(We in Qe)Ze.overflow[We]=Qe.overflow[We];return Ze},mix:ge,scrollLeft:function(Qe,Ze){if(fe(Qe)){if(Ze===void 0)return r(Qe);window.scrollTo(Ze,i(Qe))}else{if(Ze===void 0)return Qe.scrollLeft;Qe.scrollLeft=Ze}},scrollTop:function(Qe,Ze){if(fe(Qe)){if(Ze===void 0)return i(Qe);window.scrollTo(r(Qe),Ze)}else{if(Ze===void 0)return Qe.scrollTop;Qe.scrollTop=Ze}},merge:function(){for(var Qe={},Ze=0;Ze<arguments.length;Ze++)st.mix(Qe,arguments[Ze]);return Qe},viewportWidth:0,viewportHeight:0};return ge(st,he),R5.exports}var D5,pT;function zle(){if(pT)return D5;pT=1;var n=Ule();function e(t,r,i){i=i||{},r.nodeType===9&&(r=n.getWindow(r));var s=i.allowHorizontalScroll,a=i.onlyScrollIfNeeded,o=i.alignWithTop,d=i.alignWithLeft;s=s===void 0?!0:s;var g=n.isWindow(r),b=n.offset(t),E=n.outerHeight(t),S=n.outerWidth(t),B,k,z,j,Y,q,ie,J,$,te;g?(ie=r,te=n.height(ie),$=n.width(ie),J={left:n.scrollLeft(ie),top:n.scrollTop(ie)},Y={left:b.left-J.left,top:b.top-J.top},q={left:b.left+S-(J.left+$),top:b.top+E-(J.top+te)},j=J):(B=n.offset(r),k=r.clientHeight,z=r.clientWidth,j={left:r.scrollLeft,top:r.scrollTop},Y={left:b.left-(B.left+(parseFloat(n.css(r,"borderLeftWidth"))||0)),top:b.top-(B.top+(parseFloat(n.css(r,"borderTopWidth"))||0))},q={left:b.left+S-(B.left+z+(parseFloat(n.css(r,"borderRightWidth"))||0)),top:b.top+E-(B.top+k+(parseFloat(n.css(r,"borderBottomWidth"))||0))}),Y.top<0||q.top>0?o===!0?n.scrollTop(r,j.top+Y.top):o===!1?n.scrollTop(r,j.top+q.top):Y.top<0?n.scrollTop(r,j.top+Y.top):n.scrollTop(r,j.top+q.top):a||(o=o===void 0?!0:!!o,o?n.scrollTop(r,j.top+Y.top):n.scrollTop(r,j.top+q.top)),s&&(Y.left<0||q.left>0?d===!0?n.scrollLeft(r,j.left+Y.left):d===!1?n.scrollLeft(r,j.left+q.left):Y.left<0?n.scrollLeft(r,j.left+Y.left):n.scrollLeft(r,j.left+q.left):a||(d=d===void 0?!0:!!d,d?n.scrollLeft(r,j.left+Y.left):n.scrollLeft(r,j.left+q.left)))}return D5=e,D5}var K5,mT;function jle(){return mT||(mT=1,K5=zle()),K5}var F5,gT;function Nle(){if(gT)return F5;gT=1;var n=Object.assign||function(B){for(var k=1;k<arguments.length;k++){var z=arguments[k];for(var j in z)Object.prototype.hasOwnProperty.call(z,j)&&(B[j]=z[j])}return B},e=function(){function B(k,z){for(var j=0;j<z.length;j++){var Y=z[j];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(k,Y.key,Y)}}return function(k,z,j){return z&&B(k.prototype,z),j&&B(k,j),k}}();function t(B,k){if(!(B instanceof k))throw new TypeError("Cannot call a class as a function")}function r(B,k){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:B}function i(B,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);B.prototype=Object.create(k&&k.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(B,k):B.__proto__=k)}var s=La(),a=Cp(),o=GC(),d=o.findDOMNode,g=jle(),b=["blur","checkValidity","click","focus","select","setCustomValidity","setSelectionRange","setRangeText"];function E(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}var S=function(B){i(k,B);function k(z){t(this,k);var j=r(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,z));return j.state={isOpen:!1,highlightedIndex:null},j._debugStates=[],j.ensureHighlightedIndex=j.ensureHighlightedIndex.bind(j),j.exposeAPI=j.exposeAPI.bind(j),j.handleInputFocus=j.handleInputFocus.bind(j),j.handleInputBlur=j.handleInputBlur.bind(j),j.handleChange=j.handleChange.bind(j),j.handleKeyDown=j.handleKeyDown.bind(j),j.handleInputClick=j.handleInputClick.bind(j),j.maybeAutoCompleteText=j.maybeAutoCompleteText.bind(j),j}return e(k,[{key:"componentWillMount",value:function(){this.refs={},this._ignoreBlur=!1,this._ignoreFocus=!1,this._scrollOffset=null,this._scrollTimer=null}},{key:"componentWillUnmount",value:function(){clearTimeout(this._scrollTimer),this._scrollTimer=null}},{key:"componentWillReceiveProps",value:function(j){this.state.highlightedIndex!==null&&this.setState(this.ensureHighlightedIndex),j.autoHighlight&&(this.props.value!==j.value||this.state.highlightedIndex===null)&&this.setState(this.maybeAutoCompleteText)}},{key:"componentDidMount",value:function(){this.isOpen()&&this.setMenuPositions()}},{key:"componentDidUpdate",value:function(j,Y){(this.state.isOpen&&!Y.isOpen||"open"in this.props&&this.props.open&&!j.open)&&this.setMenuPositions(),this.maybeScrollItemIntoView(),Y.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen)}},{key:"exposeAPI",value:function(j){var Y=this;this.refs.input=j,b.forEach(function(q){return Y[q]=j&&j[q]&&j[q].bind(j)})}},{key:"maybeScrollItemIntoView",value:function(){if(this.isOpen()&&this.state.highlightedIndex!==null){var j=this.refs["item-"+this.state.highlightedIndex],Y=this.refs.menu;g(d(j),d(Y),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(j){k.keyDownHandlers[j.key]?k.keyDownHandlers[j.key].call(this,j):this.isOpen()||this.setState({isOpen:!0})}},{key:"handleChange",value:function(j){this.props.onChange(j,j.target.value)}},{key:"getFilteredItems",value:function(j){var Y=j.items;return j.shouldItemRender&&(Y=Y.filter(function(q){return j.shouldItemRender(q,j.value)})),j.sortItems&&Y.sort(function(q,ie){return j.sortItems(q,ie,j.value)}),Y}},{key:"maybeAutoCompleteText",value:function(j,Y){for(var q=j.highlightedIndex,ie=Y.value,J=Y.getItemValue,$=q===null?0:q,te=this.getFilteredItems(Y),W=0;W<te.length&&!Y.isItemSelectable(te[$]);W++)$=($+1)%te.length;var oe=te[$]&&Y.isItemSelectable(te[$])?te[$]:null;if(ie!==""&&oe){var fe=J(oe),he=fe.toLowerCase().indexOf(ie.toLowerCase())===0;if(he)return{highlightedIndex:$}}return{highlightedIndex:null}}},{key:"ensureHighlightedIndex",value:function(j,Y){if(j.highlightedIndex>=this.getFilteredItems(Y).length)return{highlightedIndex:null}}},{key:"setMenuPositions",value:function(){var j=this.refs.input,Y=j.getBoundingClientRect(),q=window.window.getComputedStyle(j),ie=parseInt(q.marginBottom,10)||0,J=parseInt(q.marginLeft,10)||0,$=parseInt(q.marginRight,10)||0;this.setState({menuTop:Y.bottom+ie,menuLeft:Y.left+J,menuWidth:Y.width+J+$})}},{key:"highlightItemFromMouse",value:function(j){this.setState({highlightedIndex:j})}},{key:"selectItemFromMouse",value:function(j){var Y=this,q=this.props.getItemValue(j);this.setIgnoreBlur(!1),this.setState({isOpen:!1,highlightedIndex:null},function(){Y.props.onSelect(q,j)})}},{key:"setIgnoreBlur",value:function(j){this._ignoreBlur=j}},{key:"renderMenu",value:function(){var j=this,Y=this.getFilteredItems(this.props).map(function(J,$){var te=j.props.renderItem(J,j.state.highlightedIndex===$,{cursor:"default"});return s.cloneElement(te,{onMouseEnter:j.props.isItemSelectable(J)?function(){return j.highlightItemFromMouse($)}:null,onClick:j.props.isItemSelectable(J)?function(){return j.selectItemFromMouse(J)}:null,ref:function(oe){return j.refs["item-"+$]=oe}})}),q={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth},ie=this.props.renderMenu(Y,this.props.value,q);return s.cloneElement(ie,{ref:function($){return j.refs.menu=$},onTouchStart:function(){return j.setIgnoreBlur(!0)},onMouseEnter:function(){return j.setIgnoreBlur(!0)},onMouseLeave:function(){return j.setIgnoreBlur(!1)}})}},{key:"handleInputBlur",value:function(j){var Y=this;if(this._ignoreBlur){this._ignoreFocus=!0,this._scrollOffset=E(),this.refs.input.focus();return}var q=void 0,ie=this.state.highlightedIndex;if(this.props.selectOnBlur&&ie!==null){var J=this.getFilteredItems(this.props),$=J[ie],te=this.props.getItemValue($);q=function(){return Y.props.onSelect(te,$)}}this.setState({isOpen:!1,highlightedIndex:null},q);var W=this.props.inputProps.onBlur;W&&W(j)}},{key:"handleInputFocus",value:function(j){var Y=this;if(this._ignoreFocus){this._ignoreFocus=!1;var q=this._scrollOffset,ie=q.x,J=q.y;this._scrollOffset=null,window.scrollTo(ie,J),clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(function(){Y._scrollTimer=null,window.scrollTo(ie,J)},0);return}this.setState({isOpen:!0});var $=this.props.inputProps.onFocus;$&&$(j)}},{key:"isInputFocused",value:function(){var j=this.refs.input;return j.ownerDocument&&j===j.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!this.isOpen()&&this.setState({isOpen:!0})}},{key:"composeEventHandlers",value:function(j,Y){return Y?function(q){j(q),Y(q)}:j}},{key:"isOpen",value:function(){return"open"in this.props?this.props.open:this.state.isOpen}},{key:"render",value:function(){this.props.debug&&this._debugStates.push({id:this._debugStates.length,state:this.state});var j=this.props.inputProps,Y=this.isOpen();return s.createElement("div",n({style:n({},this.props.wrapperStyle)},this.props.wrapperProps),this.props.renderInput(n({},j,{role:"combobox","aria-autocomplete":"list","aria-expanded":Y,autoComplete:"off",ref:this.exposeAPI,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange,onKeyDown:this.composeEventHandlers(this.handleKeyDown,j.onKeyDown),onClick:this.composeEventHandlers(this.handleInputClick,j.onClick),value:this.props.value})),Y&&this.renderMenu(),this.props.debug&&s.createElement("pre",{style:{marginLeft:300}},JSON.stringify(this._debugStates.slice(Math.max(0,this._debugStates.length-5),this._debugStates.length),null,2)))}}]),k}(s.Component);return S.propTypes={items:a.array.isRequired,value:a.any,onChange:a.func,onSelect:a.func,shouldItemRender:a.func,isItemSelectable:a.func,sortItems:a.func,getItemValue:a.func.isRequired,renderItem:a.func.isRequired,renderMenu:a.func,menuStyle:a.object,renderInput:a.func,inputProps:a.object,wrapperProps:a.object,wrapperStyle:a.object,autoHighlight:a.bool,selectOnBlur:a.bool,onMenuVisibilityChange:a.func,open:a.bool,debug:a.bool},S.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},renderInput:function(k){return s.createElement("input",k)},onChange:function(){},onSelect:function(){},isItemSelectable:function(){return!0},renderMenu:function(k,z,j){return s.createElement("div",{style:n({},j,this.menuStyle),children:k})},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,selectOnBlur:!1,onMenuVisibilityChange:function(){}},S.keyDownHandlers={ArrowDown:function(k){k.preventDefault();var z=this.getFilteredItems(this.props);if(z.length){for(var j=this.state.highlightedIndex,Y=j===null?-1:j,q=0;q<z.length;q++){var ie=(Y+q+1)%z.length;if(this.props.isItemSelectable(z[ie])){Y=ie;break}}Y>-1&&Y!==j&&this.setState({highlightedIndex:Y,isOpen:!0})}},ArrowUp:function(k){k.preventDefault();var z=this.getFilteredItems(this.props);if(z.length){for(var j=this.state.highlightedIndex,Y=j===null?z.length:j,q=0;q<z.length;q++){var ie=(Y-(1+q)+z.length)%z.length;if(this.props.isItemSelectable(z[ie])){Y=ie;break}}Y!==z.length&&this.setState({highlightedIndex:Y,isOpen:!0})}},Enter:function(k){var z=this;if(k.keyCode===13)if(this.setIgnoreBlur(!1),this.isOpen())if(this.state.highlightedIndex==null)this.setState({isOpen:!1},function(){z.refs.input.select()});else{k.preventDefault();var j=this.getFilteredItems(this.props)[this.state.highlightedIndex],Y=this.props.getItemValue(j);this.setState({isOpen:!1,highlightedIndex:null},function(){z.refs.input.setSelectionRange(Y.length,Y.length),z.props.onSelect(Y,j)})}else return},Escape:function(){this.setIgnoreBlur(!1),this.setState({highlightedIndex:null,isOpen:!1})},Tab:function(){this.setIgnoreBlur(!1)}},F5=S,F5}var Wle=Nle();const Gle=Xa(Wle);function Po(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="6ef9facf9aeabdae687b5aca973710969d826d60",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:7,column:10},end:{line:9,column:3}},2:{start:{line:10,column:23},end:{line:10,column:27}},3:{start:{line:11,column:24},end:{line:15,column:3}},4:{start:{line:17,column:4},end:{line:25,column:5}},5:{start:{line:18,column:24},end:{line:18,column:96}},6:{start:{line:19,column:31},end:{line:19,column:62}},7:{start:{line:20,column:6},end:{line:24,column:7}},8:{start:{line:21,column:8},end:{line:23,column:11}},9:{start:{line:28,column:4},end:{line:28,column:25}},10:{start:{line:31,column:4},end:{line:31,column:25}},11:{start:{line:34,column:4},end:{line:34,column:47}},12:{start:{line:37,column:4},end:{line:86,column:6}},13:{start:{line:41,column:10},end:{line:41,column:39}},14:{start:{line:63,column:36},end:{line:63,column:43}},15:{start:{line:64,column:29},end:{line:64,column:45}},16:{start:{line:65,column:33},end:{line:65,column:49}},17:{start:{line:67,column:14},end:{line:69,column:15}},18:{start:{line:68,column:16},end:{line:68,column:79}},19:{start:{line:70,column:14},end:{line:70,column:27}},20:{start:{line:72,column:65},end:{line:82,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:20},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:18},end:{line:26,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:29,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:30,column:2},end:{line:30,column:3}},loc:{start:{line:30,column:23},end:{line:32,column:3}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:14},end:{line:35,column:3}},line:33},5:{name:"(anonymous_5)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:87,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:40,column:13},end:{line:40,column:14}},loc:{start:{line:40,column:21},end:{line:42,column:9}},line:40},7:{name:"(anonymous_7)",decl:{start:{line:63,column:26},end:{line:63,column:27}},loc:{start:{line:63,column:36},end:{line:63,column:43}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:29},end:{line:64,column:45}},line:64},9:{name:"(anonymous_9)",decl:{start:{line:65,column:22},end:{line:65,column:23}},loc:{start:{line:65,column:33},end:{line:65,column:49}},line:65},10:{name:"(anonymous_10)",decl:{start:{line:66,column:30},end:{line:66,column:31}},loc:{start:{line:66,column:52},end:{line:71,column:13}},line:66},11:{name:"(anonymous_11)",decl:{start:{line:72,column:24},end:{line:72,column:25}},loc:{start:{line:72,column:65},end:{line:82,column:13}},line:72}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:6},end:{line:24,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:24,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:34,column:24},end:{line:34,column:45}},type:"cond-expr",locations:[{start:{line:34,column:35},end:{line:34,column:41}},{start:{line:34,column:44},end:{line:34,column:45}}],line:34},3:{loc:{start:{line:66,column:37},end:{line:66,column:47}},type:"default-arg",locations:[{start:{line:66,column:45},end:{line:66,column:47}}],line:66},4:{loc:{start:{line:67,column:14},end:{line:69,column:15}},type:"if",locations:[{start:{line:67,column:14},end:{line:69,column:15}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAsFU;AAtFV,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,kBAAkB;AAGzB,MAAM,aAAa;AAUnB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,QAAQ;AAAA,IACN,WAAW;AAAA,EACb;AAAA,EAEA,qBAA4C;AAAA,EAE5C,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,gBAAgB;AACd,QAAG,KAAK,MAAM,4BAA4B;AACxC,YAAM,YAAY,OAAO,cAAc,KAAK,mBAAoB,sBAAsB,EAAE;AACxF,YAAM,mBAAmB,KAAK,IAAI,WAAW,UAAU;AAEvD,UAAG,oBAAoB,KAAK,MAAM,WAAW;AAC3C,aAAK,SAAS;AAAA,UACZ,WAAW;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,qBAAqB;AACnB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,SAAS,GAAW;AAClB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,KAAK,CAAC,OAAO;AACX,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,WAAW;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,WAAW,KAAK,MAAM;AAAA,cACtB,QAAQ;AAAA,YACV;AAAA,YACA,cAAc;AAAA,cACZ,WAAW;AAAA,cACX,OAAO,CAAC;AAAA,YACV;AAAA,YACA,YAAY;AAAA,cACV,cAAc,KAAK,MAAM,YAAY;AAAA,cACrC,WAAW;AAAA,cACX,YAAY;AAAA,YACd;AAAA,YACA,OAAO,KAAK,MAAM;AAAA,YAClB,OAAO,KAAK,MAAM;AAAA,YAClB,cAAc,CAAC,SAAS,KAAK,CAAC;AAAA,YAC9B,UAAU,OAAK,KAAK,SAAS,CAAC;AAAA,YAC9B,UAAU,CAAC,IAAI,MAAM,KAAK,SAAS,CAAC;AAAA,YACpC,kBAAkB,CAAC,MAAM,QAAM,OAAO;AACpC,kBAAI,OAAO,UAAW,UAAU;AAC9B,uBAAO,KAAK,CAAC,EAAE,YAAY,EAAE,QAAQ,MAAM,YAAY,CAAC,IAAI;AAAA,cAC9D;AACA,qBAAO;AAAA,YACT;AAAA,YACA,YAAY,CAAC,MAAM,kBACjB;AAAA,cAAC;AAAA;AAAA,gBAEC,WAAW,WAAW;AAAA,kBACpB,mCAAmC;AAAA,kBACnC,4CAA4C;AAAA,gBAC9C,CAAC;AAAA,gBAEA,eAAK,CAAC;AAAA;AAAA,cANF,KAAK,CAAC;AAAA,YAOb;AAAA;AAAA,QAEJ;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ef9facf9aeabdae687b5aca973710969d826d60"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Po=function(){return a},a}Po();const yT=(Po().s[0]++,140);class Jy extends nr.Component{constructor(){super(...arguments);Tn(this,"state",(Po().s[1]++,{maxHeight:yT}));Tn(this,"autocompleteMenuEl",(Po().s[2]++,null))}calcMaxHeight(){if(Po().f[1]++,Po().s[4]++,this.props.keepMenuWithinWindowBounds){Po().b[0][0]++;const t=(Po().s[5]++,window.innerHeight-this.autocompleteMenuEl.getBoundingClientRect().top),r=(Po().s[6]++,Math.min(t,yT));Po().s[7]++,r!=this.state.maxHeight?(Po().b[1][0]++,Po().s[8]++,this.setState({maxHeight:r})):Po().b[1][1]++}else Po().b[0][1]++}componentDidMount(){Po().f[2]++,Po().s[9]++,this.calcMaxHeight()}componentDidUpdate(){Po().f[3]++,Po().s[10]++,this.calcMaxHeight()}onChange(t){Po().f[4]++,Po().s[11]++,this.props.onChange(t===""?(Po().b[2][0]++,void 0):(Po().b[2][1]++,t))}render(){return Po().f[5]++,Po().s[12]++,le.jsx("div",{ref:t=>{Po().f[6]++,Po().s[13]++,this.autocompleteMenuEl=t},children:le.jsx(Gle,{menuStyle:{position:"fixed",overflow:"auto",maxHeight:this.state.maxHeight,zIndex:"998"},wrapperProps:{className:"maputnik-autocomplete",style:{}},inputProps:{"aria-label":this.props["aria-label"],className:"maputnik-string",spellCheck:!1},value:this.props.value,items:this.props.options,getItemValue:t=>(Po().f[7]++,Po().s[14]++,t[0]),onSelect:t=>(Po().f[8]++,Po().s[15]++,this.onChange(t)),onChange:(t,r)=>(Po().f[9]++,Po().s[16]++,this.onChange(r)),shouldItemRender:(t,r=(Po().b[3][0]++,""))=>(Po().f[10]++,Po().s[17]++,typeof r=="string"?(Po().b[4][0]++,Po().s[18]++,t[0].toLowerCase().indexOf(r.toLowerCase())>-1):(Po().b[4][1]++,Po().s[19]++,!1)),renderItem:(t,r)=>(Po().f[11]++,Po().s[20]++,le.jsx("div",{className:um({"maputnik-autocomplete-menu-item":!0,"maputnik-autocomplete-menu-item-selected":r}),children:t[1]},t[0]))})})}}Tn(Jy,"defaultProps",(Po().s[3]++,{onChange:()=>{Po().f[0]++},options:[]}));function $p(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:12,column:3}},1:{start:{line:14,column:14},end:{line:14,column:26}},2:{start:{line:15,column:4},end:{line:31,column:6}},3:{start:{line:27,column:56},end:{line:27,column:66}},4:{start:{line:34,column:20},end:{line:34,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:32,column:3}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:27,column:47},end:{line:27,column:48}},loc:{start:{line:27,column:56},end:{line:27,column:66}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA6BM;AA7BN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,WAAW,CAAC;AAAA,EACd;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,QAAQ;AAAA,QACjB,WAAW,OAAO,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAClB,eAAa,KAAK,MAAM;AAAA,QAExB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,WAAW,IAAI,SAAO,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,QACtD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return $p=function(){return a},a}$p();class nW extends nr.Component{render(){var t;$p().f[1]++;const e=($p().s[1]++,this.props.t);return $p().s[2]++,le.jsx(ya,{label:e("Source"),fieldSpec:ns.layer.source,error:this.props.error,"data-wd-key":this.props.wdKey,children:le.jsx(Jy,{value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceIds)==null?void 0:t.map(r=>($p().f[2]++,$p().s[3]++,[r,r]))})})}}Tn(nW,"defaultProps",($p().s[0]++,{onChange:()=>{$p().f[0]++},sourceIds:[]}));const rW=($p().s[4]++,Vs()(nW));function Vp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d17faa4f03faf23184e12eb0563d322067d1f63d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:14},end:{line:15,column:26}},2:{start:{line:16,column:4},end:{line:33,column:6}},3:{start:{line:29,column:59},end:{line:29,column:65}},4:{start:{line:36,column:25},end:{line:36,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:34,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:65}},line:29}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA8BM;AA9BN,OAAO,WAAW;AAElB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,gBAAgB,CAAC;AAAA,IACjB,SAAS;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,cAAc;AAAA,QACvB,WAAW,OAAO,MAAM,cAAc;AAAA,QACtC,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,4BAA4B,CAAC,CAAC,KAAK,MAAM;AAAA,YACzC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,gBAAgB,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,QACrD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17faa4f03faf23184e12eb0563d322067d1f63d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Vp=function(){return a},a}Vp();class iW extends nr.Component{render(){var t;Vp().f[1]++;const e=(Vp().s[1]++,this.props.t);return Vp().s[2]++,le.jsx(ya,{label:e("Source Layer"),fieldSpec:Ns.layer["source-layer"],"data-wd-key":"layer-source-layer",error:this.props.error,children:le.jsx(Jy,{keepMenuWithinWindowBounds:!!this.props.isFixed,value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceLayerIds)==null?void 0:t.map(r=>(Vp().f[2]++,Vp().s[3]++,[r,r]))})})}}Tn(iW,"defaultProps",(Vp().s[0]++,{onChange:()=>{Vp().f[0]++},sourceLayerIds:[],isFixed:!1}));const oW=(Vp().s[4]++,Vs()(iW));function $r(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="7a9f0314912c2a2e8e47cddf3aaf5469476531e0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:11,column:13},end:{line:26,column:3}},1:{start:{line:12,column:26},end:{line:12,column:52}},2:{start:{line:13,column:18},end:{line:16,column:5}},3:{start:{line:17,column:4},end:{line:22,column:5}},4:{start:{line:18,column:6},end:{line:18,column:39}},5:{start:{line:19,column:6},end:{line:21,column:7}},6:{start:{line:20,column:8},end:{line:20,column:59}},7:{start:{line:23,column:4},end:{line:23,column:30}},8:{start:{line:24,column:4},end:{line:24,column:45}},9:{start:{line:25,column:4},end:{line:25,column:35}},10:{start:{line:28,column:4},end:{line:28,column:17}},11:{start:{line:29,column:18},end:{line:32,column:5}},12:{start:{line:33,column:4},end:{line:36,column:5}},13:{start:{line:34,column:6},end:{line:34,column:56}},14:{start:{line:35,column:6},end:{line:35,column:66}},15:{start:{line:37,column:4},end:{line:37,column:23}},16:{start:{line:40,column:20},end:{line:40,column:34}},17:{start:{line:41,column:20},end:{line:41,column:35}},18:{start:{line:42,column:32},end:{line:42,column:56}},19:{start:{line:43,column:32},end:{line:43,column:56}},20:{start:{line:44,column:4},end:{line:51,column:5}},21:{start:{line:48,column:6},end:{line:50,column:9}},22:{start:{line:54,column:22},end:{line:54,column:54}},23:{start:{line:55,column:4},end:{line:55,column:34}},24:{start:{line:58,column:20},end:{line:58,column:22}},25:{start:{line:59,column:18},end:{line:79,column:5}},26:{start:{line:80,column:4},end:{line:85,column:5}},27:{start:{line:81,column:22},end:{line:81,column:30}},28:{start:{line:82,column:6},end:{line:84,column:7}},29:{start:{line:83,column:8},end:{line:83,column:26}},30:{start:{line:86,column:4},end:{line:86,column:19}},31:{start:{line:89,column:14},end:{line:89,column:26}},32:{start:{line:90,column:20},end:{line:90,column:52}},33:{start:{line:91,column:19},end:{line:91,column:61}},34:{start:{line:92,column:4},end:{line:148,column:6}},35:{start:{line:107,column:16},end:{line:107,column:41}},36:{start:{line:116,column:31},end:{line:116,column:57}},37:{start:{line:125,column:31},end:{line:125,column:59}},38:{start:{line:134,column:31},end:{line:134,column:67}},39:{start:{line:151,column:17},end:{line:151,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:19},end:{line:26,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:21},end:{line:38,column:3}},line:27},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:44},end:{line:52,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:29},end:{line:56,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:19},end:{line:87,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:149,column:3}},line:88},6:{name:"(anonymous_6)",decl:{start:{line:106,column:24},end:{line:106,column:25}},loc:{start:{line:106,column:31},end:{line:108,column:15}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:116,column:24},end:{line:116,column:25}},loc:{start:{line:116,column:31},end:{line:116,column:57}},line:116},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:31},end:{line:125,column:59}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:31},end:{line:134,column:67}},line:134}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:19,column:10},end:{line:19,column:68}},type:"binary-expr",locations:[{start:{line:19,column:10},end:{line:19,column:38}},{start:{line:19,column:42},end:{line:19,column:68}}],line:19},3:{loc:{start:{line:33,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},4:{loc:{start:{line:44,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},5:{loc:{start:{line:46,column:6},end:{line:46,column:160}},type:"binary-expr",locations:[{start:{line:46,column:6},end:{line:46,column:25}},{start:{line:46,column:29},end:{line:46,column:52}},{start:{line:46,column:56},end:{line:46,column:106}},{start:{line:46,column:110},end:{line:46,column:160}}],line:46},6:{loc:{start:{line:54,column:22},end:{line:54,column:54}},type:"binary-expr",locations:[{start:{line:54,column:22},end:{line:54,column:48}},{start:{line:54,column:52},end:{line:54,column:54}}],line:54},7:{loc:{start:{line:55,column:11},end:{line:55,column:33}},type:"binary-expr",locations:[{start:{line:55,column:11},end:{line:55,column:27}},{start:{line:55,column:31},end:{line:55,column:33}}],line:55},8:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},9:{loc:{start:{line:82,column:10},end:{line:82,column:61}},type:"binary-expr",locations:[{start:{line:82,column:10},end:{line:82,column:24}},{start:{line:82,column:28},end:{line:82,column:61}}],line:82},10:{loc:{start:{line:119,column:10},end:{line:127,column:11}},type:"binary-expr",locations:[{start:{line:119,column:10},end:{line:119,column:42}},{start:{line:119,column:62},end:{line:127,column:11}}],line:119},11:{loc:{start:{line:128,column:10},end:{line:136,column:11}},type:"binary-expr",locations:[{start:{line:128,column:10},end:{line:128,column:87}},{start:{line:128,column:107},end:{line:136,column:11}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AA2IM,SACE,KADF;AA3IN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AAkBjD,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,KAAK,MAAM,SAAS,YAAY,KAAK,MAAM,cAAc,GAAG;AAC7D,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAE9C,SAAK,MAAM,eAAe,aAAa;AACvC,SAAK,MAAM,aAAa,KAAK;AAAA,EAC/B;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,IACN;AAEA,QAAG,MAAM,QAAQ,SAAS,GAAG;AAC3B,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,cAAc,IAAI,KAAK,MAAM,QAAQ,MAAM,MAAgD,EAAE,CAAC;AAAA,IACtG;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAc;AACvB,UAAM,UAAU,CAAC;AAEjB,UAAM,QAAQ;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAU;AACjE,YAAM,UAAU,IAAI;AACpB,UAAG,MAAM,OAAO,KAAK,MAAM,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI;AACtD,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AAEzD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAEV,+BAAC,SAAI,WAAU,sBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAc;AACvB,qBAAK,SAAS,EAAE,IAAI,EAAE,CAAC;AAAA,cACzB;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,UACxE;AAAA,UACC,KAAK,MAAM,SAAS,gBACvB;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,cACX,OAAM;AAAA,cACN,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,UACtD;AAAA,UAEG,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,IAAI,IAAI,KAC/E;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,OAAO,KAAK,MAAM,cAAc;AAAA,cAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,UAC9D;AAAA,UAEE;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,eAAY;AAAA,cAEX,YAAE,WAAW;AAAA;AAAA,UAChB;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7a9f0314912c2a2e8e47cddf3aaf5469476531e0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return $r=function(){return a},a}$r();class Qle extends nr.Component{constructor(t){$r().f[1]++,$r().s[10]++;super(t);Tn(this,"addLayer",($r().s[0]++,()=>{$r().f[0]++;const t=($r().s[1]++,this.props.layers.slice(0)),r=($r().s[2]++,{id:this.state.id,type:this.state.type});$r().s[3]++,this.state.type!=="background"?($r().b[0][0]++,$r().s[4]++,r.source=this.state.source,$r().s[5]++,$r().b[2][0]++,this.state.type!=="raster"&&($r().b[2][1]++,this.state["source-layer"])?($r().b[1][0]++,$r().s[6]++,r["source-layer"]=this.state["source-layer"]):$r().b[1][1]++):$r().b[0][1]++,$r().s[7]++,t.push(r),$r().s[8]++,this.props.onLayersChange(t),$r().s[9]++,this.props.onOpenToggle(!1)}));const r=($r().s[11]++,{type:"fill",id:""});$r().s[12]++,t.sources.length>0?($r().b[3][0]++,$r().s[13]++,r.source=Object.keys(this.props.sources)[0],$r().s[14]++,r["source-layer"]=this.props.sources[r.source][0]):$r().b[3][1]++,$r().s[15]++,this.state=r}componentDidUpdate(t,r){$r().f[2]++;const i=($r().s[16]++,r.type),s=($r().s[17]++,this.state.type),a=($r().s[18]++,this.getSources(i)),o=($r().s[19]++,this.getSources(s));$r().s[20]++,$r().b[5][0]++,i!==s&&($r().b[5][1]++,r.source!=="")&&($r().b[5][2]++,a.indexOf(r.source)>-1)&&($r().b[5][3]++,o.indexOf(this.state.source)<0)?($r().b[4][0]++,$r().s[21]++,this.setState({source:""})):$r().b[4][1]++}getLayersForSource(t){$r().f[3]++;const r=($r().s[22]++,$r().b[6][0]++,this.props.sources[t]||($r().b[6][1]++,{}));return $r().s[23]++,$r().b[7][0]++,r.layers||($r().b[7][1]++,[])}getSources(t){$r().f[4]++;const r=($r().s[24]++,[]),i=($r().s[25]++,{vector:["fill","line","symbol","circle","fill-extrusion","heatmap"],raster:["raster"],geojson:["fill","line","symbol","circle","fill-extrusion","heatmap"]});$r().s[26]++;for(const[s,a]of Object.entries(this.props.sources)){const o=($r().s[27]++,a.type);$r().s[28]++,$r().b[9][0]++,i[o]&&($r().b[9][1]++,i[o].indexOf(t)>-1)?($r().b[8][0]++,$r().s[29]++,r.push(s)):$r().b[8][1]++}return $r().s[30]++,r}render(){$r().f[5]++;const t=($r().s[31]++,this.props.t),r=($r().s[32]++,this.getSources(this.state.type)),i=($r().s[33]++,this.getLayersForSource(this.state.source));return $r().s[34]++,le.jsx(q0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:le.jsxs("div",{className:"maputnik-add-layer",children:[le.jsx(tW,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:s=>{$r().f[6]++,$r().s[35]++,this.setState({id:s})}}),le.jsx(eW,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:s=>($r().f[7]++,$r().s[36]++,this.setState({type:s}))}),($r().b[10][0]++,this.state.type!=="background"&&($r().b[10][1]++,le.jsx(rW,{sourceIds:r,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:s=>($r().f[8]++,$r().s[37]++,this.setState({source:s}))}))),($r().b[11][0]++,["background","raster","hillshade","heatmap"].indexOf(this.state.type)<0&&($r().b[11][1]++,le.jsx(oW,{isFixed:!0,sourceLayerIds:i,value:this.state["source-layer"],onChange:s=>($r().f[9]++,$r().s[38]++,this.setState({"source-layer":s}))}))),le.jsx(Za,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:t("Add Layer")})]})})}}const qle=($r().s[39]++,Vs()(Qle));function Bg(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Bg=function(){return a},a}Bg();let vT=(Bg().s[0]++,0);function Ly(n=(Bg().b[0][0]++,"")){return Bg().f[0]++,Bg().s[1]++,vT++,Bg().s[2]++,n+vT}function Ni(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ni=function(){return a},a}Ni();function Yle(n,e){Ni().f[0]++;const t=(Ni().s[0]++,{...n.paint});Ni().s[1]++,Object.keys(t).forEach(i=>{Ni().f[1]++,Ni().s[2]++,i in Ns["paint_"+e]?Ni().b[0][1]++:(Ni().b[0][0]++,Ni().s[3]++,delete t[i])});const r=(Ni().s[4]++,{...n.layout});return Ni().s[5]++,Object.keys(r).forEach(i=>{Ni().f[2]++,Ni().s[6]++,i in Ns["layout_"+e]?Ni().b[1][1]++:(Ni().b[1][0]++,Ni().s[7]++,delete r[i])}),Ni().s[8]++,{...n,paint:t,layout:r,type:e}}function $le(n,e,t,r){if(Ni().f[3]++,Ni().s[9]++,r===void 0)if(Ni().b[2][0]++,Ni().s[10]++,e){Ni().b[3][0]++;const i=(Ni().s[11]++,{...n,[e]:{...n[e]}});return Ni().s[12]++,delete i[e][t],Ni().s[13]++,Object.keys(i[e]).length<1?(Ni().b[4][0]++,Ni().s[14]++,delete i[e]):Ni().b[4][1]++,Ni().s[15]++,i}else{Ni().b[3][1]++;const i=(Ni().s[16]++,{...n});return Ni().s[17]++,delete i[t],Ni().s[18]++,i}else return Ni().b[2][1]++,Ni().s[19]++,e?(Ni().b[5][0]++,Ni().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(Ni().b[5][1]++,Ni().s[21]++,{...n,[t]:r})}function ly(n){return Ni().f[4]++,Ni().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function Vle(n,e){Ni().f[5]++;const t=(Ni().s[23]++,ly(n[e].id));let r=(Ni().s[24]++,e);Ni().s[25]++;for(let i=(Ni().s[26]++,e);i>0;i--){const s=(Ni().s[27]++,ly(n[i-1].id));if(Ni().s[28]++,s===t)Ni().b[6][0]++,Ni().s[29]++,r=i-1;else return Ni().b[6][1]++,Ni().s[30]++,r}return Ni().s[31]++,r}function _n(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="fce844afd94013ad4b9b4e84bd148b8b849d3079",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:13,column:24},end:{line:16,column:3}},1:{start:{line:20,column:4},end:{line:20,column:17}},2:{start:{line:21,column:4},end:{line:21,column:45}},3:{start:{line:22,column:4},end:{line:22,column:48}},4:{start:{line:23,column:4},end:{line:32,column:6}},5:{start:{line:35,column:4},end:{line:44,column:7}},6:{start:{line:46,column:17},end:{line:63,column:3}},7:{start:{line:47,column:14},end:{line:47,column:15}},8:{start:{line:48,column:22},end:{line:48,column:24}},9:{start:{line:49,column:4},end:{line:58,column:7}},10:{start:{line:50,column:26},end:{line:50,column:51}},11:{start:{line:51,column:24},end:{line:51,column:52}},12:{start:{line:52,column:6},end:{line:54,column:7}},13:{start:{line:53,column:8},end:{line:53,column:63}},14:{start:{line:55,column:6},end:{line:57,column:9}},15:{start:{line:56,column:8},end:{line:56,column:17}},16:{start:{line:59,column:4},end:{line:62,column:7}},17:{start:{line:65,column:19},end:{line:65,column:21}},18:{start:{line:66,column:41},end:{line:66,column:50}},19:{start:{line:67,column:4},end:{line:84,column:5}},20:{start:{line:67,column:17},end:{line:67,column:18}},21:{start:{line:68,column:24},end:{line:68,column:44}},22:{start:{line:69,column:28},end:{line:69,column:52}},23:{start:{line:70,column:6},end:{line:73,column:8}},24:{start:{line:74,column:20},end:{line:77,column:7}},25:{start:{line:78,column:6},end:{line:83,column:7}},26:{start:{line:79,column:26},end:{line:79,column:51}},27:{start:{line:80,column:8},end:{line:80,column:30}},28:{start:{line:82,column:8},end:{line:82,column:29}},29:{start:{line:85,column:4},end:{line:85,column:18}},30:{start:{line:88,column:22},end:{line:88,column:50}},31:{start:{line:89,column:22},end:{line:89,column:55}},32:{start:{line:90,column:4},end:{line:94,column:5}},33:{start:{line:91,column:6},end:{line:91,column:68}},34:{start:{line:93,column:6},end:{line:93,column:35}},35:{start:{line:95,column:4},end:{line:97,column:7}},36:{start:{line:100,column:22},end:{line:100,column:78}},37:{start:{line:101,column:4},end:{line:101,column:51}},38:{start:{line:104,column:4},end:{line:106,column:5}},39:{start:{line:105,column:6},end:{line:105,column:18}},40:{start:{line:108,column:18},end:{line:110,column:7}},41:{start:{line:111,column:6},end:{line:115,column:7}},42:{start:{line:112,column:8},end:{line:114,column:10}},43:{start:{line:116,column:6},end:{line:116,column:17}},44:{start:{line:118,column:24},end:{line:121,column:5}},45:{start:{line:123,column:18},end:{line:125,column:7}},46:{start:{line:126,column:6},end:{line:126,column:27}},47:{start:{line:127,column:6},end:{line:127,column:17}},48:{start:{line:129,column:23},end:{line:132,column:5}},49:{start:{line:133,column:25},end:{line:133,column:53}},50:{start:{line:134,column:4},end:{line:134,column:24}},51:{start:{line:137,column:4},end:{line:153,column:5}},52:{start:{line:138,column:31},end:{line:138,column:59}},53:{start:{line:139,column:6},end:{line:152,column:7}},54:{start:{line:140,column:23},end:{line:140,column:44}},55:{start:{line:141,column:24},end:{line:144,column:9}},56:{start:{line:145,column:25},end:{line:150,column:19}},57:{start:{line:146,column:10},end:{line:146,column:37}},58:{start:{line:147,column:10},end:{line:149,column:11}},59:{start:{line:148,column:12},end:{line:148,column:36}},60:{start:{line:151,column:8},end:{line:151,column:33}},61:{start:{line:156,column:22},end:{line:156,column:24}},62:{start:{line:157,column:14},end:{line:157,column:15}},63:{start:{line:158,column:26},end:{line:158,column:46}},64:{start:{line:159,column:4},end:{line:210,column:7}},65:{start:{line:160,column:26},end:{line:160,column:51}},66:{start:{line:161,column:6},end:{line:174,column:7}},67:{start:{line:162,column:36},end:{line:172,column:9}},68:{start:{line:166,column:47},end:{line:166,column:52}},69:{start:{line:173,column:8},end:{line:173,column:28}},70:{start:{line:175,column:6},end:{line:209,column:9}},71:{start:{line:176,column:25},end:{line:176,column:72}},72:{start:{line:177,column:27},end:{line:179,column:10}},73:{start:{line:178,column:10},end:{line:178,column:97}},74:{start:{line:180,column:32},end:{line:180,column:34}},75:{start:{line:181,column:8},end:{line:183,column:9}},76:{start:{line:182,column:10},end:{line:182,column:53}},77:{start:{line:184,column:41},end:{line:206,column:9}},78:{start:{line:207,column:8},end:{line:207,column:33}},79:{start:{line:208,column:8},end:{line:208,column:17}},80:{start:{line:211,column:14},end:{line:211,column:26}},81:{start:{line:212,column:4},end:{line:264,column:6}},82:{start:{line:267,column:27},end:{line:267,column:72}},83:{start:{line:268,column:35},end:{line:268,column:118}},84:{start:{line:268,column:80},end:{line:268,column:117}},85:{start:{line:271,column:4},end:{line:280,column:6}},86:{start:{line:278,column:33},end:{line:278,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:19},end:{line:14,column:20}},loc:{start:{line:14,column:25},end:{line:15,column:5}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:33,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:25},end:{line:45,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:23},end:{line:63,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:49,column:33},end:{line:49,column:34}},loc:{start:{line:49,column:45},end:{line:58,column:5}},line:49},5:{name:"(anonymous_5)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:33},end:{line:57,column:7}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:18},end:{line:86,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:37},end:{line:98,column:3}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:32},end:{line:102,column:3}},line:99},9:{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:46},end:{line:135,column:3}},line:103},10:{name:"getRequiredProps",decl:{start:{line:107,column:13},end:{line:107,column:29}},loc:{start:{line:107,column:37},end:{line:117,column:5}},line:107},11:{name:"withoutLayers",decl:{start:{line:122,column:13},end:{line:122,column:26}},loc:{start:{line:122,column:34},end:{line:128,column:5}},line:122},12:{name:"(anonymous_12)",decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:32},end:{line:154,column:3}},line:136},13:{name:"(anonymous_13)",decl:{start:{line:145,column:50},end:{line:145,column:51}},loc:{start:{line:145,column:63},end:{line:150,column:9}},line:145},14:{name:"(anonymous_14)",decl:{start:{line:155,column:2},end:{line:155,column:3}},loc:{start:{line:155,column:11},end:{line:265,column:3}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:159,column:26},end:{line:159,column:27}},loc:{start:{line:159,column:38},end:{line:210,column:5}},line:159},16:{name:"(anonymous_16)",decl:{start:{line:166,column:40},end:{line:166,column:41}},loc:{start:{line:166,column:47},end:{line:166,column:52}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:44},end:{line:209,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:177,column:50},end:{line:177,column:51}},loc:{start:{line:177,column:61},end:{line:179,column:9}},line:177},19:{name:"(anonymous_19)",decl:{start:{line:268,column:53},end:{line:268,column:54}},loc:{start:{line:268,column:80},end:{line:268,column:117}},line:268},20:{name:"(anonymous_20)",decl:{start:{line:270,column:2},end:{line:270,column:3}},loc:{start:{line:270,column:11},end:{line:281,column:3}},line:270},21:{name:"(anonymous_21)",decl:{start:{line:278,column:27},end:{line:278,column:28}},loc:{start:{line:278,column:33},end:{line:278,column:38}},line:278}},branchMap:{0:{loc:{start:{line:52,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:52,column:6},end:{line:54,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},1:{loc:{start:{line:72,column:8},end:{line:72,column:79}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:79}}],line:72},2:{loc:{start:{line:78,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:83,column:7}},{start:{line:81,column:13},end:{line:83,column:7}}],line:78},3:{loc:{start:{line:78,column:10},end:{line:78,column:81}},type:"binary-expr",locations:[{start:{line:78,column:10},end:{line:78,column:23}},{start:{line:78,column:27},end:{line:78,column:81}}],line:78},4:{loc:{start:{line:90,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:90,column:4},end:{line:94,column:5}},{start:{line:92,column:11},end:{line:94,column:5}}],line:90},5:{loc:{start:{line:101,column:11},end:{line:101,column:50}},type:"cond-expr",locations:[{start:{line:101,column:34},end:{line:101,column:38}},{start:{line:101,column:41},end:{line:101,column:50}}],line:101},6:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},7:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},8:{loc:{start:{line:133,column:27},end:{line:133,column:52}},type:"binary-expr",locations:[{start:{line:133,column:27},end:{line:133,column:38}},{start:{line:133,column:42},end:{line:133,column:52}}],line:133},9:{loc:{start:{line:137,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:153,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},10:{loc:{start:{line:139,column:6},end:{line:152,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:152,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:139},11:{loc:{start:{line:139,column:10},end:{line:139,column:51}},type:"binary-expr",locations:[{start:{line:139,column:10},end:{line:139,column:26}},{start:{line:139,column:30},end:{line:139,column:51}}],line:139},12:{loc:{start:{line:147,column:10},end:{line:149,column:11}},type:"if",locations:[{start:{line:147,column:10},end:{line:149,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},13:{loc:{start:{line:147,column:14},end:{line:147,column:68}},type:"binary-expr",locations:[{start:{line:147,column:14},end:{line:147,column:32}},{start:{line:147,column:36},end:{line:147,column:68}}],line:147},14:{loc:{start:{line:161,column:6},end:{line:174,column:7}},type:"if",locations:[{start:{line:161,column:6},end:{line:174,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},15:{loc:{start:{line:168,column:22},end:{line:168,column:98}},type:"binary-expr",locations:[{start:{line:168,column:22},end:{line:168,column:57}},{start:{line:168,column:61},end:{line:168,column:98}}],line:168},16:{loc:{start:{line:178,column:17},end:{line:178,column:96}},type:"binary-expr",locations:[{start:{line:178,column:17},end:{line:178,column:29}},{start:{line:178,column:33},end:{line:178,column:62}},{start:{line:178,column:66},end:{line:178,column:96}}],line:178},17:{loc:{start:{line:181,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:183,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181},18:{loc:{start:{line:188,column:52},end:{line:188,column:153}},type:"binary-expr",locations:[{start:{line:188,column:52},end:{line:188,column:69}},{start:{line:188,column:73},end:{line:188,column:112}},{start:{line:188,column:116},end:{line:188,column:153}}],line:188},19:{loc:{start:{line:189,column:53},end:{line:189,column:105}},type:"binary-expr",locations:[{start:{line:189,column:53},end:{line:189,column:84}},{start:{line:189,column:88},end:{line:189,column:105}}],line:189},20:{loc:{start:{line:197,column:25},end:{line:197,column:43}},type:"binary-expr",locations:[{start:{line:197,column:25},end:{line:197,column:37}},{start:{line:197,column:41},end:{line:197,column:43}}],line:197},21:{loc:{start:{line:241,column:26},end:{line:241,column:96}},type:"cond-expr",locations:[{start:{line:241,column:69},end:{line:241,column:82}},{start:{line:241,column:85},end:{line:241,column:96}}],line:241}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AAmNoB,cAoEd,YApEc;AAnNpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AAEnB,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAErB,SAAwB,yBAAwB;AAEhD,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAuBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YACD,OAAO;AAAA,YAEP,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,MAAM,6BAA6B,kBAAkB,CAAC,UAAmC,oBAAC,sBAAoB,GAAG,OAAO,CAAE;AAM1H,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT,aAAY;AAAA,QACZ,WAAW,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,QAC3C,eAAe;AAAA,QACf,mBAAmB,MAAM;AAAA;AAAA,IAC3B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce844afd94013ad4b9b4e84bd148b8b849d3079"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return _n=function(){return a},a}_n();class sW extends nr.Component{constructor(t){_n().f[1]++,_n().s[1]++;super(t);Tn(this,"selectedItemRef");Tn(this,"scrollContainerRef");Tn(this,"toggleLayers",(_n().s[6]++,()=>{_n().f[3]++;let t=(_n().s[7]++,0);const r=(_n().s[8]++,{});_n().s[9]++,this.groupedLayers().forEach(i=>{_n().f[4]++;const s=(_n().s[10]++,ly(i[0].id)),a=(_n().s[11]++,[s,t].join("-"));_n().s[12]++,i.length>1?(_n().b[0][0]++,_n().s[13]++,r[a]=this.state.areAllGroupsExpanded):_n().b[0][1]++,_n().s[14]++,i.forEach(o=>{_n().f[5]++,_n().s[15]++,t+=1})}),_n().s[16]++,this.setState({collapsedGroups:r,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})}));_n().s[2]++,this.selectedItemRef=nr.createRef(),_n().s[3]++,this.scrollContainerRef=nr.createRef(),_n().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Ly()},isOpen:{add:!1}}}toggleModal(t){_n().f[2]++,_n().s[5]++,this.setState({keys:{...this.state.keys,[t]:+Ly()},isOpen:{...this.state.isOpen,[t]:!this.state.isOpen[t]}})}groupedLayers(){_n().f[6]++;const t=(_n().s[17]++,[]),r=(_n().s[18]++,new Map);_n().s[19]++;for(let i=(_n().s[20]++,0);i<this.props.layers.length;i++){const s=(_n().s[21]++,this.props.layers[i]),a=(_n().s[22]++,this.props.layers[i-1]);_n().s[23]++,r.set(s.id,r.has(s.id)?(_n().b[1][0]++,r.get(s.id)+1):(_n().b[1][1]++,0));const o=(_n().s[24]++,{...s,key:`layers-list-${s.id}-${r.get(s.id)}`});if(_n().s[25]++,_n().b[3][0]++,a&&(_n().b[3][1]++,ly(a.id)==ly(o.id))){_n().b[2][0]++;const d=(_n().s[26]++,t[t.length-1]);_n().s[27]++,d.push(o)}else _n().b[2][1]++,_n().s[28]++,t.push([o])}return _n().s[29]++,t}toggleLayerGroup(t,r){_n().f[7]++;const i=(_n().s[30]++,[t,r].join("-")),s=(_n().s[31]++,{...this.state.collapsedGroups});_n().s[32]++,i in this.state.collapsedGroups?(_n().b[4][0]++,_n().s[33]++,s[i]=!this.state.collapsedGroups[i]):(_n().b[4][1]++,_n().s[34]++,s[i]=!1),_n().s[35]++,this.setState({collapsedGroups:s})}isCollapsed(t,r){_n().f[8]++;const i=(_n().s[36]++,this.state.collapsedGroups[[t,r].join("-")]);return _n().s[37]++,i===void 0?(_n().b[5][0]++,!0):(_n().b[5][1]++,i)}shouldComponentUpdate(t,r){if(_n().f[9]++,_n().s[38]++,this.state!==r)return _n().b[6][0]++,_n().s[39]++,!0;_n().b[6][1]++;function i(g){_n().f[10]++;const b=(_n().s[40]++,{id:g.id});return _n().s[41]++,g.layout?(_n().b[7][0]++,_n().s[42]++,b.layout={visibility:g.layout.visibility}):_n().b[7][1]++,_n().s[43]++,b}const s=(_n().s[44]++,y6.isEqual(t.layers.map(i),this.props.layers.map(i)));function a(g){_n().f[11]++;const b=(_n().s[45]++,{...g});return _n().s[46]++,delete b.layers,_n().s[47]++,b}const o=(_n().s[48]++,y6.isEqual(a(this.props),a(t))),d=(_n().s[49]++,_n().b[8][0]++,!(s&&(_n().b[8][1]++,o)));return _n().s[50]++,d}componentDidUpdate(t){if(_n().f[12]++,_n().s[51]++,t.selectedLayerIndex!==this.props.selectedLayerIndex){_n().b[9][0]++;const r=(_n().s[52]++,this.selectedItemRef.current);if(_n().s[53]++,_n().b[11][0]++,r&&(_n().b[11][1]++,r.node)){_n().b[10][0]++;const i=(_n().s[54]++,r.node),s=(_n().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),a=(_n().s[56]++,new IntersectionObserver(o=>{_n().f[13]++,_n().s[57]++,a.unobserve(i),_n().s[58]++,_n().b[13][0]++,o.length>0&&(_n().b[13][1]++,o[0].intersectionRatio<1)?(_n().b[12][0]++,_n().s[59]++,i.scrollIntoView()):_n().b[12][1]++},s));_n().s[60]++,a.observe(i)}else _n().b[10][1]++}else _n().b[9][1]++}render(){_n().f[14]++;const t=(_n().s[61]++,[]);let r=(_n().s[62]++,0);const i=(_n().s[63]++,this.groupedLayers());_n().s[64]++,i.forEach(a=>{_n().f[15]++;const o=(_n().s[65]++,ly(a[0].id));if(_n().s[66]++,a.length>1){_n().b[14][0]++;const d=(_n().s[67]++,le.jsx(Use,{"data-wd-key":[o,r].join("-"),"aria-controls":a.map(g=>(_n().f[16]++,_n().s[68]++,g.key)).join(" "),title:o,isActive:(_n().b[15][0]++,!this.isCollapsed(o,r)||(_n().b[15][1]++,r===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,o,r)},`group-${o}-${r}`));_n().s[69]++,t.push(d)}else _n().b[14][1]++;_n().s[70]++,a.forEach((d,g)=>{var k;_n().f[17]++;const b=(_n().s[71]++,Vle(this.props.layers,r)),E=(_n().s[72]++,this.props.errors.find(z=>(_n().f[18]++,_n().s[73]++,_n().b[16][0]++,z.parsed&&(_n().b[16][1]++,z.parsed.type==="layer")&&(_n().b[16][2]++,z.parsed.data.index==r)))),S=(_n().s[74]++,{});_n().s[75]++,r===this.props.selectedLayerIndex?(_n().b[17][0]++,_n().s[76]++,S.ref=this.selectedItemRef):_n().b[17][1]++;const B=(_n().s[77]++,le.jsx(yae,{className:um({"maputnik-layer-list-item-collapsed":(_n().b[18][0]++,a.length>1&&(_n().b[18][1]++,this.isCollapsed(o,b))&&(_n().b[18][2]++,r!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(_n().b[19][0]++,g==a.length-1&&(_n().b[19][1]++,a.length>1)),"maputnik-layer-list-item--error":!!E}),index:r,id:d.key,layerId:d.id,layerIndex:r,layerType:d.type,visibility:(_n().b[20][0]++,d.layout||(_n().b[20][1]++,{})).visibility,isSelected:r===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:(k=this.props.onLayerDestroy)==null?void 0:k.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...S},d.key));_n().s[78]++,t.push(B),_n().s[79]++,r+=1})});const s=(_n().s[80]++,this.props.t);return _n().s[81]++,le.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":s("Layers list"),ref:this.scrollContainerRef,children:[le.jsx(qle,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),le.jsxs("header",{className:"maputnik-layer-list-header",children:[le.jsx("span",{className:"maputnik-layer-list-header-title",children:s("Layers")}),le.jsx("span",{className:"maputnik-space"}),le.jsx("div",{className:"maputnik-default-property",children:le.jsx("div",{className:"maputnik-multibutton",children:le.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(_n().b[21][0]++,s("Collapse")):(_n().b[21][1]++,s("Expand"))})})}),le.jsx("div",{className:"maputnik-default-property",children:le.jsx("div",{className:"maputnik-multibutton",children:le.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:s("Add Layer")})})})]}),le.jsx("div",{role:"navigation","aria-label":s("Layers list"),children:le.jsx("ul",{className:"maputnik-layer-list-container",children:t})})]})}}Tn(sW,"defaultProps",(_n().s[0]++,{onLayerSelect:()=>{_n().f[0]++}}));const Hle=(_n().s[82]++,Vs()(sW)),Zle=(_n().s[83]++,fae(n=>(_n().f[19]++,_n().s[84]++,le.jsx(Hle,{...n}))));class Xle extends nr.Component{render(){return _n().f[20]++,_n().s[85]++,le.jsx(Zle,{...this.props,helperClass:"sortableHelper",onSortEnd:this.props.onMoveLayer.bind(this),useDragHandle:!0,shouldCancelStart:()=>(_n().f[21]++,_n().s[86]++,!1)})}}var L5,CT;function aW(){if(CT)return L5;CT=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(a,o){n[a]=o}function r(a){delete n[a]}function i(a,o){var d=n[a];if(!d)throw new Error("Cannot open "+e);d.openMenu(o)}function s(a,o){var d=n[a];if(!d)throw new Error("Cannot close "+e);d.closeMenu(o)}return L5={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:s},L5}var U5,_T;function Jle(){if(_T)return U5;_T=1;function n(i){i=i||{};var s=i.keybindings||{};this._settings={keybindings:{next:s.next||{keyCode:40},prev:s.prev||{keyCode:38},first:s.first,last:s.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var a,o;for(a in this._settings.keybindings)o=this._settings.keybindings[a],o&&[].concat(o).forEach((function(d){d.metaKey=d.metaKey||!1,d.ctrlKey=d.ctrlKey||!1,d.altKey=d.altKey||!1,d.shiftKey=d.shiftKey||!1,this._keybindingsLookup.push({action:a,eventMatcher:d})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var s=this._getActiveElementIndex();if(s!==-1){var a=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,i))switch(a=!0,i.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),a||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),s;return i<this._members.length-1?s=i+1:this._settings.wrap?s=0:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),s;return i>0?s=i-1:this._settings.wrap?s=this._members.length-1:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var s,a=0,o=this._members.length;a<o;a++)if(s=this._members[a],!!s.text&&s.text.indexOf(i)===0)return r(s.node)},n.prototype._findIndexOfNode=function(i){for(var s=0,a=this._members.length;s<a;s++)if(this._members[s].node===i)return s;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var s=this._members[i];return s&&r(s.node),this},n.prototype.addMember=function(i,s){var a=i.node||i,o=i.text||a.getAttribute("data-focus-group-text")||a.textContent||"";this._checkNode(a);var d=o.replace(/[\W_]/g,"").toLowerCase(),g={node:a,text:d};return s!=null?this._members.splice(s,0,g):this._members.push(g),this},n.prototype.removeMember=function(i){var s=typeof i=="number"?i:this._findIndexOfNode(i);if(s!==-1)return this._members.splice(s,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var s=0,a=i.length;s<a;s++)this.addMember(i[s]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,s){for(var a in i)if(s[a]!==void 0&&i[a]!==s[a])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return U5=function(s){return new n(s)},U5}var z5,bT;function eue(){if(bT)return z5;bT=1;var n=Jle(),e=aW(),t={wrap:!0,stringSearch:!0},r={init:function(d){this.updateOptions(d),this.handleBlur=i.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=a.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(d){var g=this.options;this.options=d||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),g&&g.id&&g.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(d){this.focusGroup.focusNodeAtIndex(d)},addItem:function(d){this.focusGroup.addMember(d)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(d){this.focusGroup._handleUnboundKey(d)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(d){if(!this.isOpen&&(d=d||{},d.focusMenu===void 0&&(d.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),d.focusMenu)){var g=this;this.moveFocusTimer=setTimeout(function(){g.focusItem(0)},0)}},closeMenu:function(d){this.isOpen&&(d=d||{},this.isOpen=!1,this.update(),d.focusButton&&this.button.ref.current.focus())},toggleMenu:function(d,g){d=d||{},g=g||{},this.isOpen?this.closeMenu(d):this.openMenu(g)}};function i(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var d=o.button.ref.current;if(d){var g=d.ownerDocument.activeElement;if(!(d&&g===d)){var b=o.menu.ref.current;if(b===g){o.focusItem(0);return}b&&b.contains(g)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function s(o,d){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,d)}function a(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return z5=function(o){var d=Object.create(r);return d.init(o),d},z5}var j5,xT;function r3(){if(xT)return j5;xT=1;var n=La(),e=n.createContext();return j5=e,j5}var N5,wT;function i3(){if(wT)return N5;wT=1;var n=Cp();return N5={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},N5}var W5,MT;function o3(){return MT||(MT=1,W5=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),W5}var G5,ST;function tue(){if(ST)return G5;ST=1;function n(B,k){if(!(B instanceof k))throw new TypeError("Cannot call a class as a function")}function e(B,k){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:B}function t(B,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);B.prototype=Object.create(k&&k.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(B,k):B.__proto__=k)}var r=La(),i=Cp(),s=eue(),a=r3(),o=i3(),d=o.refType,g=o3(),b={children:i.node.isRequired,forwardedRef:d,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},E=function(k){return{onMenuToggle:k.onMenuToggle,onSelection:k.onSelection,closeOnSelection:k.closeOnSelection,closeOnBlur:k.closeOnBlur,id:k.id}},S=function(B){t(k,B);function k(z){n(this,k);var j=e(this,B.call(this,z));return j.manager=s(E(z)),j}return k.prototype.componentDidUpdate=function(){this.manager.updateOptions(E(this.props))},k.prototype.render=function(){var j={};return g(j,this.props,b),r.createElement(a.Provider,{value:this.manager},r.createElement(this.props.tag,j,this.props.children))},k}(r.Component);return S.propTypes=b,S.defaultProps={tag:"div"},G5=r.forwardRef(function(B,k){var z={forwardedRef:k};return g(z,B,{children:b.children,forwardedRef:b.forwardedRef}),g(z,{forwardedRef:k}),r.createElement(S,z,B.children)}),G5}var Q5,ET;function nue(){if(ET)return Q5;ET=1;function n(S,B){if(!(S instanceof B))throw new TypeError("Cannot call a class as a function")}function e(S,B){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:S}function t(S,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);S.prototype=Object.create(B&&B.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(S,B):S.__proto__=B)}var r=La(),i=Cp(),s=r3(),a=i3(),o=a.refType,d=o3(),g={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:o,tag:i.string},b=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},E=function(S){t(B,S);function B(){var k,z,j;n(this,B);for(var Y=arguments.length,q=Array(Y),ie=0;ie<Y;ie++)q[ie]=arguments[ie];return j=(k=(z=e(this,S.call.apply(S,[this].concat(q))),z),z.ref=r.createRef(),z.handleKeyDown=function(J){if(!z.props.disabled){var $=z.props.ambManager;switch(J.key){case"ArrowDown":J.preventDefault(),$.isOpen?$.focusItem(0):$.openMenu();break;case"Enter":case" ":J.preventDefault(),$.toggleMenu();break;case"Escape":$.handleMenuKey(J);break;default:$.handleButtonNonArrowKey(J)}}},z.handleClick=function(){z.props.disabled||z.props.ambManager.toggleMenu({},{focusMenu:!1})},z.setRef=function(J){z.ref.current=J,typeof z.props.forwardedRef=="function"?z.props.forwardedRef(J):z.props.forwardedRef&&(z.props.forwardedRef.current=J)},k),e(z,j)}return B.prototype.componentDidMount=function(){this.props.ambManager.button=this},B.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},B.prototype.render=function(){var z=this.props,j=this.props.ambManager,Y={role:"button",tabIndex:z.disabled?"":"0","aria-haspopup":!0,"aria-expanded":j.isOpen,"aria-disabled":z.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},q={};return d(q,g),b().indexOf(z.tag)>=0&&delete q.disabled,j.options.closeOnBlur&&(Y.onBlur=j.handleBlur),d(Y,z,q),d(Y,{ref:this.setRef}),r.createElement(z.tag,Y,z.children)},B}(r.Component);return E.propTypes=g,E.defaultProps={tag:"span"},Q5=r.forwardRef(function(S,B){return r.createElement(s.Consumer,null,function(k){var z={ambManager:k,forwardedRef:B};return d(z,S,{ambManager:g.ambManager,children:g.children,forwardedRef:g.forwardedRef}),r.createElement(E,z,S.children)})}),Q5}var q5,BT;function rue(){return BT||(BT=1,q5=function(e,t,r){var i=0,s=0,a=!1,o=!1,d=!1;e.addEventListener("click",g,r),e.addEventListener("touchstart",b,r);function g(j){d||t(j)}function b(j){d=!0,!a&&(a=!0,e.addEventListener("touchmove",E,r),e.addEventListener("touchend",S,r),e.addEventListener("touchcancel",B,r),o=!1,i=j.touches[0].clientX,s=j.touches[0].clientY)}function E(j){o||Math.abs(j.touches[0].clientX-i)<=10&&Math.abs(j.touches[0].clientY-s)<=10||(o=!0)}function S(j){a=!1,k(),o||t(j)}function B(){a=!1,o=!1,i=0,s=0}function k(){e.removeEventListener("touchmove",E,r),e.removeEventListener("touchend",S,r),e.removeEventListener("touchcancel",B,r)}function z(){e.removeEventListener("click",g,r),e.removeEventListener("touchstart",b,r),k()}return{remove:z}}),q5}var Y5,OT;function iue(){if(OT)return Y5;OT=1;function n(S,B){if(!(S instanceof B))throw new TypeError("Cannot call a class as a function")}function e(S,B){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:S}function t(S,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);S.prototype=Object.create(B&&B.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(S,B):S.__proto__=B)}var r=La(),i=Cp(),s=rue(),a=r3(),o=i3(),d=o.refType,g=o3(),b={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:d,tag:i.string},E=function(S){t(B,S);function B(){var k,z,j;n(this,B);for(var Y=arguments.length,q=Array(Y),ie=0;ie<Y;ie++)q[ie]=arguments[ie];return j=(k=(z=e(this,S.call.apply(S,[this].concat(q))),z),z.ref=r.createRef(),z.addTapListener=function(){var J=z.ref.current;if(J){var $=J.ownerDocument;$&&(z.tapListener=s($.documentElement,z.handleTap))}},z.handleTap=function(J){z.ref.current.contains(J.target)||z.props.ambManager.button.ref.current.contains(J.target)||z.props.ambManager.closeMenu()},z.setRef=function(J){z.ref.current=J,typeof z.props.forwardedRef=="function"?z.props.forwardedRef(J):z.props.forwardedRef&&(z.props.forwardedRef.current=J)},k),e(z,j)}return B.prototype.componentDidMount=function(){this.props.ambManager.menu=this},B.prototype.componentDidUpdate=function(){var z=this.props.ambManager;z.options.closeOnBlur&&(z.isOpen&&!this.tapListener?this.addTapListener():!z.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),z.isOpen||z.clearItems())},B.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},B.prototype.render=function(){var z=this.props,j=this.props.ambManager,Y=function(){return typeof z.children=="function"?z.children({isOpen:j.isOpen}):j.isOpen?z.children:!1}();if(!Y)return!1;var q={onKeyDown:j.handleMenuKey,role:"menu",tabIndex:-1};return j.options.closeOnBlur&&(q.onBlur=j.handleBlur),g(q,z,b),g(q,{ref:this.setRef}),r.createElement(z.tag,q,Y)},B}(r.Component);return E.propTypes=b,E.defaultProps={tag:"div"},Y5=r.forwardRef(function(S,B){return r.createElement(a.Consumer,null,function(k){var z={ambManager:k,forwardedRef:B};return g(z,S,{ambManager:b.ambManager,children:b.children,forwardedRef:b.forwardedRef}),r.createElement(E,z,S.children)})}),Y5}var $5,IT;function oue(){if(IT)return $5;IT=1;function n(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function e(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function t(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var r=La(),i=Cp(),s=r3(),a=i3(),o=a.refType,d=o3(),g={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:o,tag:i.string,text:i.string,value:i.any},b=function(E){t(S,E);function S(){var B,k,z;n(this,S);for(var j=arguments.length,Y=Array(j),q=0;q<j;q++)Y[q]=arguments[q];return z=(B=(k=e(this,E.call.apply(E,[this].concat(Y))),k),k.ref=r.createRef(),k.handleKeyDown=function(ie){ie.key!=="Enter"&&ie.key!==" "||k.props.tag==="a"&&k.props.href||(ie.preventDefault(),k.selectItem(ie))},k.selectItem=function(ie){var J=typeof k.props.value<"u"?k.props.value:k.props.children;k.props.ambManager.handleSelection(J,ie)},k.setRef=function(ie){k.ref.current=ie,typeof k.props.forwardedRef=="function"?k.props.forwardedRef(ie):k.props.forwardedRef&&(k.props.forwardedRef.current=ie)},B),e(k,z)}return S.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},S.prototype.render=function(){var k={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return d(k,this.props,g),r.createElement(this.props.tag,k,this.props.children)},S}(r.Component);return b.propTypes=g,b.defaultProps={tag:"div"},$5=r.forwardRef(function(E,S){return r.createElement(s.Consumer,null,function(B){var k={ambManager:B,forwardedRef:S};return d(k,E,{ambManager:g.ambManager,children:g.children,forwardedRef:g.forwardedRef}),r.createElement(b,k,E.children)})}),$5}var V5,kT;function sue(){if(kT)return V5;kT=1;var n=aW();return V5={Wrapper:tue(),Button:nue(),Menu:iue(),MenuItem:oue(),openMenu:n.openMenu,closeMenu:n.closeMenu},V5}var xb=sue();function TT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function TB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TT(Object(t),!0).forEach(function(r){zl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):TT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function s3(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function PT(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function a3(n,e,t){return e&&PT(n.prototype,e),t&&PT(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function zl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Am(){return Am=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Am.apply(this,arguments)}function QO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&PB(n,e)}function V2(n){return V2=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},V2(n)}function PB(n,e){return PB=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},PB(n,e)}function aue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lue(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function l3(n,e){if(n==null)return{};var t=lue(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function cp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uue(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cp(n)}function qO(n){var e=aue();return function(){var r=V2(n),i;if(e){var s=V2(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return uue(this,i)}}function Aue(n,e){return hue(n)||pue(n,e)||lW(n,e)||gue()}function cue(n){return due(n)||fue(n)||lW(n)||mue()}function due(n){if(Array.isArray(n))return RB(n)}function hue(n){if(Array.isArray(n))return n}function fue(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function pue(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,a,o;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(d){s=!0,o=d}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function lW(n,e){if(n){if(typeof n=="string")return RB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return RB(n,e)}}function RB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function mue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yue=a3(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,s=e.allowMultipleExpanded,a=s===void 0?!1:s,o=e.allowZeroExpanded,d=o===void 0?!1:o;s3(this,n),zl(this,"expanded",void 0),zl(this,"allowMultipleExpanded",void 0),zl(this,"allowZeroExpanded",void 0),zl(this,"toggleExpanded",function(g){if(t.isItemDisabled(g))return t;var b=t.isItemExpanded(g);return b?t.augment({expanded:t.expanded.filter(function(E){return E!==g})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(cue(t.expanded),[g]):[g]})}),zl(this,"isItemDisabled",function(g){var b=t.isItemExpanded(g),E=t.expanded.length===1;return!!(b&&!t.allowZeroExpanded&&E)}),zl(this,"isItemExpanded",function(g){return t.expanded.indexOf(g)!==-1}),zl(this,"getPanelAttributes",function(g,b){var E=b??t.isItemExpanded(g);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!E:void 0,"aria-labelledby":t.getButtonId(g),id:t.getPanelId(g),hidden:E?void 0:!0}}),zl(this,"getHeadingAttributes",function(){return{role:"heading"}}),zl(this,"getButtonAttributes",function(g,b){var E=b??t.isItemExpanded(g),S=t.isItemDisabled(g);return{id:t.getButtonId(g),"aria-disabled":S,"aria-expanded":E,"aria-controls":t.getPanelId(g),role:"button",tabIndex:0}}),zl(this,"getPanelId",function(g){return"accordion__panel-".concat(g)}),zl(this,"getButtonId",function(g){return"accordion__heading-".concat(g)}),zl(this,"augment",function(g){return new n(TB({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},g))}),this.expanded=i,this.allowMultipleExpanded=a,this.allowZeroExpanded=d}),uW=Ai.createContext(null),AW=function(n){QO(t,n);var e=qO(t);function t(){var r;s3(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),zl(cp(r),"state",new yue({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),zl(cp(r),"toggleExpanded",function(o){r.setState(function(d){return d.toggleExpanded(o)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),zl(cp(r),"isItemDisabled",function(o){return r.state.isItemDisabled(o)}),zl(cp(r),"isItemExpanded",function(o){return r.state.isItemExpanded(o)}),zl(cp(r),"getPanelAttributes",function(o,d){return r.state.getPanelAttributes(o,d)}),zl(cp(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),zl(cp(r),"getButtonAttributes",function(o,d){return r.state.getButtonAttributes(o,d)}),r}return a3(t,[{key:"render",value:function(){var i=this.state,s=i.allowZeroExpanded,a=i.allowMultipleExpanded;return Ai.createElement(uW.Provider,{value:{allowMultipleExpanded:a,allowZeroExpanded:s,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(Ai.PureComponent);zl(AW,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var cW=function(n){QO(t,n);var e=qO(t);function t(){var r;s3(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),zl(cp(r),"renderChildren",function(o){return o?r.props.children(o):null}),r}return a3(t,[{key:"render",value:function(){return Ai.createElement(uW.Consumer,null,this.renderChildren)}}]),t}(Ai.PureComponent),vue=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Cue=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,s=e.allowZeroExpanded,a=e.onChange,o=e.preExpanded,d=l3(e,vue);return Ai.createElement(AW,{preExpanded:o,allowMultipleExpanded:i,allowZeroExpanded:s,onChange:a},Ai.createElement("div",Am({"data-accordion-component":"Accordion",className:r},d)))},DB;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(DB||(DB={}));var dW=DB,H5=0;function _ue(){var n=H5;return H5=H5+1,"raa-".concat(n)}var bue=Ai.useId||_ue,xue=/[\u0009\u000a\u000c\u000d\u0020]/g;function UC(n){return n===""||xue.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var hW=Ai.createContext(null),wue=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,s=e.dangerouslySetExpanded,a=function(){i.toggleExpanded(r)},o=function(g){var b=s??g.isItemExpanded(r),E=g.isItemDisabled(r),S=g.getPanelAttributes(r,s),B=g.getHeadingAttributes(r),k=g.getButtonAttributes(r,s);return Ai.createElement(hW.Provider,{value:{uuid:r,expanded:b,disabled:E,toggleExpanded:a,panelAttributes:S,headingAttributes:B,buttonAttributes:k}},t)};return Ai.createElement(cW,null,o)},Mue=function(e){return Ai.createElement(cW,null,function(t){return Ai.createElement(wue,Am({},e,{accordionContext:t}))})},u3=function(e){var t=e.children,r=function(s){return s?t(s):null};return Ai.createElement(hW.Consumer,null,r)},Sue=["uuid","dangerouslySetExpanded","className","activeClassName"],fW=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,s=i===void 0?"accordion__item":i,a=e.activeClassName,o=l3(e,Sue),d=Ai.useState(bue()),g=Aue(d,1),b=g[0],E=t??b,S=function(k){var z=k.expanded,j=z&&a?a:s;return Ai.createElement("div",Am({"data-accordion-component":"AccordionItem",className:j},o))};return UC(E.toString()),o.id&&UC(o.id),Ai.createElement(Mue,{uuid:E,dangerouslySetExpanded:r},Ai.createElement(u3,null,S))};fW.displayName=dW.AccordionItem;function pW(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:pW(n.parentElement))}function A3(n){var e=pW(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Eue(n){var e=A3(n)||[],t=e[0];t&&t.focus()}function Bue(n){var e=A3(n)||[],t=e[e.length-1];t&&t.focus()}function Oue(n){var e=A3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function Iue(n){var e=A3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Lm={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},kue=["toggleExpanded","className"],Tue=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,s=l3(e,kue),a=function(d){var g=d.key;if((g===Lm.ENTER||g===Lm.SPACE||g===Lm.SPACE_DEPRECATED)&&(d.preventDefault(),t()),d.target instanceof HTMLElement)switch(g){case Lm.HOME:{d.preventDefault(),Eue(d.target);break}case Lm.END:{d.preventDefault(),Bue(d.target);break}case Lm.LEFT:case Lm.UP:{d.preventDefault(),Iue(d.target);break}case Lm.RIGHT:case Lm.DOWN:{d.preventDefault(),Oue(d.target);break}}};return s.id&&UC(s.id),Ai.createElement("div",Am({className:i},s,{role:"button",tabIndex:0,onClick:t,onKeyDown:a,"data-accordion-component":"AccordionItemButton"}))},Pue=function(e){return Ai.createElement(u3,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return Ai.createElement(Tue,Am({toggleExpanded:r},e,i))})},Rue={className:"accordion__heading","aria-level":3},Due=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

“The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.”

`,mW=function(n){QO(t,n);var e=qO(t);function t(){var r;s3(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),zl(cp(r),"ref",void 0),zl(cp(r),"setRef",function(o){r.ref=o}),r}return a3(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return Ai.createElement("div",Am({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Due)}}]),t}(Ai.PureComponent);zl(mW,"defaultProps",Rue);var gW=function(e){return Ai.createElement(u3,null,function(t){var r=t.headingAttributes;return e.id&&UC(e.id),Ai.createElement(mW,Am({},e,r))})};gW.displayName=dW.AccordionItemHeading;var Kue=["className","region","id"],Fue=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,s=e.id,a=l3(e,Kue),o=function(g){var b=g.panelAttributes;s&&UC(s);var E=TB(TB({},b),{},{"aria-labelledby":i?b["aria-labelledby"]:void 0});return Ai.createElement("div",Am({"data-accordion-component":"AccordionItemPanel",className:r},a,E,{role:i?"region":void 0}))};return Ai.createElement(u3,null,o)},Gb={exports:{}},Lue=Gb.exports,RT;function c3(){return RT||(RT=1,function(n,e){(function(t,r){n.exports=r()})(Lue,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),s=/MSIE \d/.test(t),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),d=s||a||o,g=d&&(s?document.documentMode||6:+(o||a)[1]),b=!o&&/WebKit\//.test(t),E=b&&/Qt\/\d+\.\d+/.test(t),S=!o&&/Chrome\/(\d+)/.exec(t),B=S&&+S[1],k=/Opera\//.test(t),z=/Apple Computer/.test(navigator.vendor),j=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),Y=/PhantomJS/.test(t),q=z&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),ie=/Android/.test(t),J=q||ie||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),$=q||/Mac/.test(r),te=/\bCrOS\b/.test(t),W=/win/i.test(r),oe=k&&t.match(/Version\/(\d*\.\d*)/);oe&&(oe=Number(oe[1])),oe&&oe>=15&&(k=!1,b=!0);var fe=$&&(E||k&&(oe==null||oe<12.11)),he=i||d&&g>=9;function Se(A){return new RegExp("(^|\\s)"+A+"(?:$|\\s)\\s*")}var pe=function(A,y){var I=A.className,O=Se(y).exec(I);if(O){var D=I.slice(O.index+O[0].length);A.className=I.slice(0,O.index)+(D?O[1]+D:"")}};function we(A){for(var y=A.childNodes.length;y>0;--y)A.removeChild(A.firstChild);return A}function Ke(A,y){return we(A).appendChild(y)}function ge(A,y,I,O){var D=document.createElement(A);if(I&&(D.className=I),O&&(D.style.cssText=O),typeof y=="string")D.appendChild(document.createTextNode(y));else if(y)for(var Z=0;Z<y.length;++Z)D.appendChild(y[Z]);return D}function st(A,y,I,O){var D=ge(A,y,I,O);return D.setAttribute("role","presentation"),D}var Qe;document.createRange?Qe=function(A,y,I,O){var D=document.createRange();return D.setEnd(O||A,I),D.setStart(A,y),D}:Qe=function(A,y,I){var O=document.body.createTextRange();try{O.moveToElementText(A.parentNode)}catch{return O}return O.collapse(!0),O.moveEnd("character",I),O.moveStart("character",y),O};function Ze(A,y){if(y.nodeType==3&&(y=y.parentNode),A.contains)return A.contains(y);do if(y.nodeType==11&&(y=y.host),y==A)return!0;while(y=y.parentNode)}function We(A){var y=A.ownerDocument||A,I;try{I=A.activeElement}catch{I=y.body||null}for(;I&&I.shadowRoot&&I.shadowRoot.activeElement;)I=I.shadowRoot.activeElement;return I}function Ce(A,y){var I=A.className;Se(y).test(I)||(A.className+=(I?" ":"")+y)}function Pe(A,y){for(var I=A.split(" "),O=0;O<I.length;O++)I[O]&&!Se(I[O]).test(y)&&(y+=" "+I[O]);return y}var it=function(A){A.select()};q?it=function(A){A.selectionStart=0,A.selectionEnd=A.value.length}:d&&(it=function(A){try{A.select()}catch{}});function vt(A){return A.display.wrapper.ownerDocument}function _t(A){return ft(A.display.wrapper)}function ft(A){return A.getRootNode?A.getRootNode():A.ownerDocument}function Dt(A){return vt(A).defaultView}function Tt(A){var y=Array.prototype.slice.call(arguments,1);return function(){return A.apply(null,y)}}function Ue(A,y,I){y||(y={});for(var O in A)A.hasOwnProperty(O)&&(I!==!1||!y.hasOwnProperty(O))&&(y[O]=A[O]);return y}function Re(A,y,I,O,D){y==null&&(y=A.search(/[^\s\u00a0]/),y==-1&&(y=A.length));for(var Z=O||0,Ae=D||0;;){var be=A.indexOf("	",Z);if(be<0||be>=y)return Ae+(y-Z);Ae+=be-Z,Ae+=I-Ae%I,Z=be+1}}var Be=function(){this.id=null,this.f=null,this.time=0,this.handler=Tt(this.onTimeout,this)};Be.prototype.onTimeout=function(A){A.id=0,A.time<=+new Date?A.f():setTimeout(A.handler,A.time-+new Date)},Be.prototype.set=function(A,y){this.f=y;var I=+new Date+A;(!this.id||I<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,A),this.time=I)};function nt(A,y){for(var I=0;I<A.length;++I)if(A[I]==y)return I;return-1}var Ct=50,pt={toString:function(){return"CodeMirror.Pass"}},zt={scroll:!1},tn={origin:"*mouse"},Lt={origin:"+move"};function gn(A,y,I){for(var O=0,D=0;;){var Z=A.indexOf("	",O);Z==-1&&(Z=A.length);var Ae=Z-O;if(Z==A.length||D+Ae>=y)return O+Math.min(Ae,y-D);if(D+=Z-O,D+=I-D%I,O=Z+1,D>=y)return O}}var Nn=[""];function rn(A){for(;Nn.length<=A;)Nn.push(or(Nn)+" ");return Nn[A]}function or(A){return A[A.length-1]}function Kn(A,y){for(var I=[],O=0;O<A.length;O++)I[O]=y(A[O],O);return I}function pn(A,y,I){for(var O=0,D=I(y);O<A.length&&I(A[O])<=D;)O++;A.splice(O,0,y)}function Xn(){}function Mr(A,y){var I;return Object.create?I=Object.create(A):(Xn.prototype=A,I=new Xn),y&&Ue(y,I),I}var Yn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function er(A){return/\w/.test(A)||A>""&&(A.toUpperCase()!=A.toLowerCase()||Yn.test(A))}function qe(A,y){return y?y.source.indexOf("\\w")>-1&&er(A)?!0:y.test(A):er(A)}function ce(A){for(var y in A)if(A.hasOwnProperty(y)&&A[y])return!1;return!0}var me=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function tt(A){return A.charCodeAt(0)>=768&&me.test(A)}function Et(A,y,I){for(;(I<0?y>0:y<A.length)&&tt(A.charAt(y));)y+=I;return y}function $t(A,y,I){for(var O=y>I?-1:1;;){if(y==I)return y;var D=(y+I)/2,Z=O<0?Math.ceil(D):Math.floor(D);if(Z==y)return A(Z)?y:I;A(Z)?I=Z:y=Z+O}}function on(A,y,I,O){if(!A)return O(y,I,"ltr",0);for(var D=!1,Z=0;Z<A.length;++Z){var Ae=A[Z];(Ae.from<I&&Ae.to>y||y==I&&Ae.to==y)&&(O(Math.max(Ae.from,y),Math.min(Ae.to,I),Ae.level==1?"rtl":"ltr",Z),D=!0)}D||O(y,I,"ltr")}var rr=null;function Oe(A,y,I){var O;rr=null;for(var D=0;D<A.length;++D){var Z=A[D];if(Z.from<y&&Z.to>y)return D;Z.to==y&&(Z.from!=Z.to&&I=="before"?O=D:rr=D),Z.from==y&&(Z.from!=Z.to&&I!="before"?O=D:rr=D)}return O??rr}var se=function(){var A="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",y="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function I(je){return je<=247?A.charAt(je):1424<=je&&je<=1524?"R":1536<=je&&je<=1785?y.charAt(je-1536):1774<=je&&je<=2220?"r":8192<=je&&je<=8203?"w":je==8204?"b":"L"}var O=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,D=/[stwN]/,Z=/[LRr]/,Ae=/[Lb1n]/,be=/[1n]/;function Te(je,yt,St){this.level=je,this.from=yt,this.to=St}return function(je,yt){var St=yt=="ltr"?"L":"R";if(je.length==0||yt=="ltr"&&!O.test(je))return!1;for(var Jt=je.length,qt=[],En=0;En<Jt;++En)qt.push(I(je.charCodeAt(En)));for(var Fn=0,Jn=St;Fn<Jt;++Fn){var sr=qt[Fn];sr=="m"?qt[Fn]=Jn:Jn=sr}for(var xr=0,hr=St;xr<Jt;++xr){var Ur=qt[xr];Ur=="1"&&hr=="r"?qt[xr]="n":Z.test(Ur)&&(hr=Ur,Ur=="r"&&(qt[xr]="R"))}for(var li=1,Gr=qt[0];li<Jt-1;++li){var Ji=qt[li];Ji=="+"&&Gr=="1"&&qt[li+1]=="1"?qt[li]="1":Ji==","&&Gr==qt[li+1]&&(Gr=="1"||Gr=="n")&&(qt[li]=Gr),Gr=Ji}for(var To=0;To<Jt;++To){var qa=qt[To];if(qa==",")qt[To]="N";else if(qa=="%"){var la=void 0;for(la=To+1;la<Jt&&qt[la]=="%";++la);for(var ba=To&&qt[To-1]=="!"||la<Jt&&qt[la]=="1"?"1":"N",xa=To;xa<la;++xa)qt[xa]=ba;To=la-1}}for(var Ra=0,Hl=St;Ra<Jt;++Ra){var Ya=qt[Ra];Hl=="L"&&Ya=="1"?qt[Ra]="L":Z.test(Ya)&&(Hl=Ya)}for(var wa=0;wa<Jt;++wa)if(D.test(qt[wa])){var fs=void 0;for(fs=wa+1;fs<Jt&&D.test(qt[fs]);++fs);for(var yi=(wa?qt[wa-1]:St)=="L",Jo=(fs<Jt?qt[fs]:St)=="L",ua=yi==Jo?yi?"L":"R":St,pa=wa;pa<fs;++pa)qt[pa]=ua;wa=fs-1}for(var Ts=[],Fl,Do=0;Do<Jt;)if(Ae.test(qt[Do])){var Fd=Do;for(++Do;Do<Jt&&Ae.test(qt[Do]);++Do);Ts.push(new Te(0,Fd,Do))}else{var Cl=Do,KA=Ts.length,nd=yt=="rtl"?1:0;for(++Do;Do<Jt&&qt[Do]!="L";++Do);for(var _l=Cl;_l<Do;)if(be.test(qt[_l])){Cl<_l&&(Ts.splice(KA,0,new Te(1,Cl,_l)),KA+=nd);var bl=_l;for(++_l;_l<Do&&be.test(qt[_l]);++_l);Ts.splice(KA,0,new Te(2,bl,_l)),KA+=nd,Cl=_l}else++_l;Cl<Do&&Ts.splice(KA,0,new Te(1,Cl,Do))}return yt=="ltr"&&(Ts[0].level==1&&(Fl=je.match(/^\s+/))&&(Ts[0].from=Fl[0].length,Ts.unshift(new Te(0,0,Fl[0].length))),or(Ts).level==1&&(Fl=je.match(/\s+$/))&&(or(Ts).to-=Fl[0].length,Ts.push(new Te(0,Jt-Fl[0].length,Jt)))),yt=="rtl"?Ts.reverse():Ts}}();function _e(A,y){var I=A.order;return I==null&&(I=A.order=se(A.text,y)),I}var p=[],Ne=function(A,y,I){if(A.addEventListener)A.addEventListener(y,I,!1);else if(A.attachEvent)A.attachEvent("on"+y,I);else{var O=A._handlers||(A._handlers={});O[y]=(O[y]||p).concat(I)}};function $e(A,y){return A._handlers&&A._handlers[y]||p}function rt(A,y,I){if(A.removeEventListener)A.removeEventListener(y,I,!1);else if(A.detachEvent)A.detachEvent("on"+y,I);else{var O=A._handlers,D=O&&O[y];if(D){var Z=nt(D,I);Z>-1&&(O[y]=D.slice(0,Z).concat(D.slice(Z+1)))}}}function dt(A,y){var I=$e(A,y);if(I.length)for(var O=Array.prototype.slice.call(arguments,2),D=0;D<I.length;++D)I[D].apply(null,O)}function ct(A,y,I){return typeof y=="string"&&(y={type:y,preventDefault:function(){this.defaultPrevented=!0}}),dt(A,I||y.type,A,y),On(y)||y.codemirrorIgnore}function Qt(A){var y=A._handlers&&A._handlers.cursorActivity;if(y)for(var I=A.curOp.cursorActivityHandlers||(A.curOp.cursorActivityHandlers=[]),O=0;O<y.length;++O)nt(I,y[O])==-1&&I.push(y[O])}function Vt(A,y){return $e(A,y).length>0}function Nt(A){A.prototype.on=function(y,I){Ne(this,y,I)},A.prototype.off=function(y,I){rt(this,y,I)}}function wt(A){A.preventDefault?A.preventDefault():A.returnValue=!1}function Dn(A){A.stopPropagation?A.stopPropagation():A.cancelBubble=!0}function On(A){return A.defaultPrevented!=null?A.defaultPrevented:A.returnValue==!1}function pr(A){wt(A),Dn(A)}function Er(A){return A.target||A.srcElement}function sn(A){var y=A.which;return y==null&&(A.button&1?y=1:A.button&2?y=3:A.button&4&&(y=2)),$&&A.ctrlKey&&y==1&&(y=3),y}var Wn=function(){if(d&&g<9)return!1;var A=ge("div");return"draggable"in A||"dragDrop"in A}(),Ln;function Ir(A){if(Ln==null){var y=ge("span","​");Ke(A,ge("span",[y,document.createTextNode("x")])),A.firstChild.offsetHeight!=0&&(Ln=y.offsetWidth<=1&&y.offsetHeight>2&&!(d&&g<8))}var I=Ln?ge("span","​"):ge("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return I.setAttribute("cm-text",""),I}var Br;function Kr(A){if(Br!=null)return Br;var y=Ke(A,document.createTextNode("AخA")),I=Qe(y,0,1).getBoundingClientRect(),O=Qe(y,1,2).getBoundingClientRect();return we(A),!I||I.left==I.right?!1:Br=O.right-I.right<3}var Ar=`

b`.split(/\n/).length!=3?function(A){for(var y=0,I=[],O=A.length;y<=O;){var D=A.indexOf(`
`,y);D==-1&&(D=A.length);var Z=A.slice(y,A.charAt(D-1)=="\r"?D-1:D),Ae=Z.indexOf("\r");Ae!=-1?(I.push(Z.slice(0,Ae)),y+=Ae+1):(I.push(Z),y=D+1)}return I}:function(A){return A.split(/\r\n?|\n/)},ho=window.getSelection?function(A){try{return A.selectionStart!=A.selectionEnd}catch{return!1}}:function(A){var y;try{y=A.ownerDocument.selection.createRange()}catch{}return!y||y.parentElement()!=A?!1:y.compareEndPoints("StartToEnd",y)!=0},Ea=function(){var A=ge("div");return"oncopy"in A?!0:(A.setAttribute("oncopy","return;"),typeof A.oncopy=="function")}(),Yi=null;function vi(A){if(Yi!=null)return Yi;var y=Ke(A,ge("span","x")),I=y.getBoundingClientRect(),O=Qe(y,0,1).getBoundingClientRect();return Yi=Math.abs(I.left-O.left)>1}var so={},So={};function Pi(A,y){arguments.length>2&&(y.dependencies=Array.prototype.slice.call(arguments,2)),so[A]=y}function Ua(A,y){So[A]=y}function Ba(A){if(typeof A=="string"&&So.hasOwnProperty(A))A=So[A];else if(A&&typeof A.name=="string"&&So.hasOwnProperty(A.name)){var y=So[A.name];typeof y=="string"&&(y={name:y}),A=Mr(y,A),A.name=y.name}else{if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(A))return Ba("application/xml");if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(A))return Ba("application/json")}return typeof A=="string"?{name:A}:A||{name:"null"}}function rs(A,y){y=Ba(y);var I=so[y.name];if(!I)return rs(A,"text/plain");var O=I(A,y);if(ca.hasOwnProperty(y.name)){var D=ca[y.name];for(var Z in D)D.hasOwnProperty(Z)&&(O.hasOwnProperty(Z)&&(O["_"+Z]=O[Z]),O[Z]=D[Z])}if(O.name=y.name,y.helperType&&(O.helperType=y.helperType),y.modeProps)for(var Ae in y.modeProps)O[Ae]=y.modeProps[Ae];return O}var ca={};function dl(A,y){var I=ca.hasOwnProperty(A)?ca[A]:ca[A]={};Ue(y,I)}function lo(A,y){if(y===!0)return y;if(A.copyState)return A.copyState(y);var I={};for(var O in y){var D=y[O];D instanceof Array&&(D=D.concat([])),I[O]=D}return I}function Ku(A,y){for(var I;A.innerMode&&(I=A.innerMode(y),!(!I||I.mode==A));)y=I.state,A=I.mode;return I||{mode:A,state:y}}function iu(A,y,I){return A.startState?A.startState(y,I):!0}var ao=function(A,y,I){this.pos=this.start=0,this.string=A,this.tabSize=y||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=I};ao.prototype.eol=function(){return this.pos>=this.string.length},ao.prototype.sol=function(){return this.pos==this.lineStart},ao.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ao.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ao.prototype.eat=function(A){var y=this.string.charAt(this.pos),I;if(typeof A=="string"?I=y==A:I=y&&(A.test?A.test(y):A(y)),I)return++this.pos,y},ao.prototype.eatWhile=function(A){for(var y=this.pos;this.eat(A););return this.pos>y},ao.prototype.eatSpace=function(){for(var A=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>A},ao.prototype.skipToEnd=function(){this.pos=this.string.length},ao.prototype.skipTo=function(A){var y=this.string.indexOf(A,this.pos);if(y>-1)return this.pos=y,!0},ao.prototype.backUp=function(A){this.pos-=A},ao.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Re(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Re(this.string,this.lineStart,this.tabSize):0)},ao.prototype.indentation=function(){return Re(this.string,null,this.tabSize)-(this.lineStart?Re(this.string,this.lineStart,this.tabSize):0)},ao.prototype.match=function(A,y,I){if(typeof A=="string"){var O=function(Ae){return I?Ae.toLowerCase():Ae},D=this.string.substr(this.pos,A.length);if(O(D)==O(A))return y!==!1&&(this.pos+=A.length),!0}else{var Z=this.string.slice(this.pos).match(A);return Z&&Z.index>0?null:(Z&&y!==!1&&(this.pos+=Z[0].length),Z)}},ao.prototype.current=function(){return this.string.slice(this.start,this.pos)},ao.prototype.hideFirstChars=function(A,y){this.lineStart+=A;try{return y()}finally{this.lineStart-=A}},ao.prototype.lookAhead=function(A){var y=this.lineOracle;return y&&y.lookAhead(A)},ao.prototype.baseToken=function(){var A=this.lineOracle;return A&&A.baseToken(this.pos)};function Fr(A,y){if(y-=A.first,y<0||y>=A.size)throw new Error("There is no line "+(y+A.first)+" in the document.");for(var I=A;!I.lines;)for(var O=0;;++O){var D=I.children[O],Z=D.chunkSize();if(y<Z){I=D;break}y-=Z}return I.lines[y]}function Ja(A,y,I){var O=[],D=y.line;return A.iter(y.line,I.line+1,function(Z){var Ae=Z.text;D==I.line&&(Ae=Ae.slice(0,I.ch)),D==y.line&&(Ae=Ae.slice(y.ch)),O.push(Ae),++D}),O}function Rs(A,y,I){var O=[];return A.iter(y,I,function(D){O.push(D.text)}),O}function oa(A,y){var I=y-A.height;if(I)for(var O=A;O;O=O.parent)O.height+=I}function Ye(A){if(A.parent==null)return null;for(var y=A.parent,I=nt(y.lines,A),O=y.parent;O;y=O,O=O.parent)for(var D=0;O.children[D]!=y;++D)I+=O.children[D].chunkSize();return I+y.first}function Mt(A,y){var I=A.first;e:do{for(var O=0;O<A.children.length;++O){var D=A.children[O],Z=D.height;if(y<Z){A=D;continue e}y-=Z,I+=D.chunkSize()}return I}while(!A.lines);for(var Ae=0;Ae<A.lines.length;++Ae){var be=A.lines[Ae],Te=be.height;if(y<Te)break;y-=Te}return I+Ae}function yn(A,y){return y>=A.first&&y<A.first+A.size}function $n(A,y){return String(A.lineNumberFormatter(y+A.firstLineNumber))}function dn(A,y,I){if(I===void 0&&(I=null),!(this instanceof dn))return new dn(A,y,I);this.line=A,this.ch=y,this.sticky=I}function ar(A,y){return A.line-y.line||A.ch-y.ch}function Ri(A,y){return A.sticky==y.sticky&&ar(A,y)==0}function fo(A){return dn(A.line,A.ch)}function _s(A,y){return ar(A,y)<0?y:A}function Gs(A,y){return ar(A,y)<0?A:y}function bA(A,y){return Math.max(A.first,Math.min(y,A.first+A.size-1))}function ii(A,y){if(y.line<A.first)return dn(A.first,0);var I=A.first+A.size-1;return y.line>I?dn(I,Fr(A,I).text.length):Mi(y,Fr(A,y.line).text.length)}function Mi(A,y){var I=A.ch;return I==null||I>y?dn(A.line,y):I<0?dn(A.line,0):A}function el(A,y){for(var I=[],O=0;O<y.length;O++)I[O]=ii(A,y[O]);return I}var ci=function(A,y){this.state=A,this.lookAhead=y},da=function(A,y,I,O){this.state=y,this.doc=A,this.line=I,this.maxLookAhead=O||0,this.baseTokens=null,this.baseTokenPos=1};da.prototype.lookAhead=function(A){var y=this.doc.getLine(this.line+A);return y!=null&&A>this.maxLookAhead&&(this.maxLookAhead=A),y},da.prototype.baseToken=function(A){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=A;)this.baseTokenPos+=2;var y=this.baseTokens[this.baseTokenPos+1];return{type:y&&y.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-A}},da.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},da.fromSaved=function(A,y,I){return y instanceof ci?new da(A,lo(A.mode,y.state),I,y.lookAhead):new da(A,lo(A.mode,y),I)},da.prototype.save=function(A){var y=A!==!1?lo(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ci(y,this.maxLookAhead):y};function aA(A,y,I,O){var D=[A.state.modeGen],Z={};Wl(A,y.text,A.doc.mode,I,function(je,yt){return D.push(je,yt)},Z,O);for(var Ae=I.state,be=function(je){I.baseTokens=D;var yt=A.state.overlays[je],St=1,Jt=0;I.state=!0,Wl(A,y.text,yt.mode,I,function(qt,En){for(var Fn=St;Jt<qt;){var Jn=D[St];Jn>qt&&D.splice(St,1,qt,D[St+1],Jn),St+=2,Jt=Math.min(qt,Jn)}if(En)if(yt.opaque)D.splice(Fn,St-Fn,qt,"overlay "+En),St=Fn+2;else for(;Fn<St;Fn+=2){var sr=D[Fn+1];D[Fn+1]=(sr?sr+" ":"")+"overlay "+En}},Z),I.state=Ae,I.baseTokens=null,I.baseTokenPos=1},Te=0;Te<A.state.overlays.length;++Te)be(Te);return{styles:D,classes:Z.bgClass||Z.textClass?Z:null}}function us(A,y,I){if(!y.styles||y.styles[0]!=A.state.modeGen){var O=Lr(A,Ye(y)),D=y.text.length>A.options.maxHighlightLength&&lo(A.doc.mode,O.state),Z=aA(A,y,O);D&&(O.state=D),y.stateAfter=O.save(!D),y.styles=Z.styles,Z.classes?y.styleClasses=Z.classes:y.styleClasses&&(y.styleClasses=null),I===A.doc.highlightFrontier&&(A.doc.modeFrontier=Math.max(A.doc.modeFrontier,++A.doc.highlightFrontier))}return y.styles}function Lr(A,y,I){var O=A.doc,D=A.display;if(!O.mode.startState)return new da(O,!0,y);var Z=is(A,y,I),Ae=Z>O.first&&Fr(O,Z-1).stateAfter,be=Ae?da.fromSaved(O,Ae,Z):new da(O,iu(O.mode),Z);return O.iter(Z,y,function(Te){Bi(A,Te.text,be);var je=be.line;Te.stateAfter=je==y-1||je%5==0||je>=D.viewFrom&&je<D.viewTo?be.save():null,be.nextLine()}),I&&(O.modeFrontier=be.line),be}function Bi(A,y,I,O){var D=A.doc.mode,Z=new ao(y,A.options.tabSize,I);for(Z.start=Z.pos=O||0,y==""&&tl(D,I.state);!Z.eol();)Ds(D,Z,I.state),Z.start=Z.pos}function tl(A,y){if(A.blankLine)return A.blankLine(y);if(A.innerMode){var I=Ku(A,y);if(I.mode.blankLine)return I.mode.blankLine(I.state)}}function Ds(A,y,I,O){for(var D=0;D<10;D++){O&&(O[0]=Ku(A,I).mode);var Z=A.token(y,I);if(y.pos>y.start)return Z}throw new Error("Mode "+A.name+" failed to advance stream.")}var Eo=function(A,y,I){this.start=A.start,this.end=A.pos,this.string=A.current(),this.type=y||null,this.state=I};function Qs(A,y,I,O){var D=A.doc,Z=D.mode,Ae;y=ii(D,y);var be=Fr(D,y.line),Te=Lr(A,y.line,I),je=new ao(be.text,A.options.tabSize,Te),yt;for(O&&(yt=[]);(O||je.pos<y.ch)&&!je.eol();)je.start=je.pos,Ae=Ds(Z,je,Te.state),O&&yt.push(new Eo(je,Ae,lo(D.mode,Te.state)));return O?yt:new Eo(je,Ae,Te.state)}function mu(A,y){if(A)for(;;){var I=A.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!I)break;A=A.slice(0,I.index)+A.slice(I.index+I[0].length);var O=I[1]?"bgClass":"textClass";y[O]==null?y[O]=I[2]:new RegExp("(?:^|\\s)"+I[2]+"(?:$|\\s)").test(y[O])||(y[O]+=" "+I[2])}return A}function Wl(A,y,I,O,D,Z,Ae){var be=I.flattenSpans;be==null&&(be=A.options.flattenSpans);var Te=0,je=null,yt=new ao(y,A.options.tabSize,O),St,Jt=A.options.addModeClass&&[null];for(y==""&&mu(tl(I,O.state),Z);!yt.eol();){if(yt.pos>A.options.maxHighlightLength?(be=!1,Ae&&Bi(A,y,O,yt.pos),yt.pos=y.length,St=null):St=mu(Ds(I,yt,O.state,Jt),Z),Jt){var qt=Jt[0].name;qt&&(St="m-"+(St?qt+" "+St:qt))}if(!be||je!=St){for(;Te<yt.start;)Te=Math.min(yt.start,Te+5e3),D(Te,je);je=St}yt.start=yt.pos}for(;Te<yt.pos;){var En=Math.min(yt.pos,Te+5e3);D(En,je),Te=En}}function is(A,y,I){for(var O,D,Z=A.doc,Ae=I?-1:y-(A.doc.mode.innerMode?1e3:100),be=y;be>Ae;--be){if(be<=Z.first)return Z.first;var Te=Fr(Z,be-1),je=Te.stateAfter;if(je&&(!I||be+(je instanceof ci?je.lookAhead:0)<=Z.modeFrontier))return be;var yt=Re(Te.text,null,A.options.tabSize);(D==null||O>yt)&&(D=be-1,O=yt)}return D}function Hs(A,y){if(A.modeFrontier=Math.min(A.modeFrontier,y),!(A.highlightFrontier<y-10)){for(var I=A.first,O=y-1;O>I;O--){var D=Fr(A,O).stateAfter;if(D&&(!(D instanceof ci)||O+D.lookAhead<y)){I=O+1;break}}A.highlightFrontier=Math.min(A.highlightFrontier,I)}}var po=!1,gs=!1;function Ss(){po=!0}function nl(){gs=!0}function Ks(A,y,I){this.marker=A,this.from=y,this.to=I}function Ol(A,y){if(A)for(var I=0;I<A.length;++I){var O=A[I];if(O.marker==y)return O}}function lA(A,y){for(var I,O=0;O<A.length;++O)A[O]!=y&&(I||(I=[])).push(A[O]);return I}function Hi(A,y,I){var O=I&&window.WeakSet&&(I.markedSpans||(I.markedSpans=new WeakSet));O&&A.markedSpans&&O.has(A.markedSpans)?A.markedSpans.push(y):(A.markedSpans=A.markedSpans?A.markedSpans.concat([y]):[y],O&&O.add(A.markedSpans)),y.marker.attachLine(A)}function ou(A,y,I){var O;if(A)for(var D=0;D<A.length;++D){var Z=A[D],Ae=Z.marker,be=Z.from==null||(Ae.inclusiveLeft?Z.from<=y:Z.from<y);if(be||Z.from==y&&Ae.type=="bookmark"&&(!I||!Z.marker.insertLeft)){var Te=Z.to==null||(Ae.inclusiveRight?Z.to>=y:Z.to>y);(O||(O=[])).push(new Ks(Ae,Z.from,Te?null:Z.to))}}return O}function zi(A,y,I){var O;if(A)for(var D=0;D<A.length;++D){var Z=A[D],Ae=Z.marker,be=Z.to==null||(Ae.inclusiveRight?Z.to>=y:Z.to>y);if(be||Z.from==y&&Ae.type=="bookmark"&&(!I||Z.marker.insertLeft)){var Te=Z.from==null||(Ae.inclusiveLeft?Z.from<=y:Z.from<y);(O||(O=[])).push(new Ks(Ae,Te?null:Z.from-y,Z.to==null?null:Z.to-y))}}return O}function ei(A,y){if(y.full)return null;var I=yn(A,y.from.line)&&Fr(A,y.from.line).markedSpans,O=yn(A,y.to.line)&&Fr(A,y.to.line).markedSpans;if(!I&&!O)return null;var D=y.from.ch,Z=y.to.ch,Ae=ar(y.from,y.to)==0,be=ou(I,D,Ae),Te=zi(O,Z,Ae),je=y.text.length==1,yt=or(y.text).length+(je?D:0);if(be)for(var St=0;St<be.length;++St){var Jt=be[St];if(Jt.to==null){var qt=Ol(Te,Jt.marker);qt?je&&(Jt.to=qt.to==null?null:qt.to+yt):Jt.to=D}}if(Te)for(var En=0;En<Te.length;++En){var Fn=Te[En];if(Fn.to!=null&&(Fn.to+=yt),Fn.from==null){var Jn=Ol(be,Fn.marker);Jn||(Fn.from=yt,je&&(be||(be=[])).push(Fn))}else Fn.from+=yt,je&&(be||(be=[])).push(Fn)}be&&(be=su(be)),Te&&Te!=be&&(Te=su(Te));var sr=[be];if(!je){var xr=y.text.length-2,hr;if(xr>0&&be)for(var Ur=0;Ur<be.length;++Ur)be[Ur].to==null&&(hr||(hr=[])).push(new Ks(be[Ur].marker,null,null));for(var li=0;li<xr;++li)sr.push(hr);sr.push(Te)}return sr}function su(A){for(var y=0;y<A.length;++y){var I=A[y];I.from!=null&&I.from==I.to&&I.marker.clearWhenEmpty!==!1&&A.splice(y--,1)}return A.length?A:null}function Wi(A,y,I){var O=null;if(A.iter(y.line,I.line+1,function(qt){if(qt.markedSpans)for(var En=0;En<qt.markedSpans.length;++En){var Fn=qt.markedSpans[En].marker;Fn.readOnly&&(!O||nt(O,Fn)==-1)&&(O||(O=[])).push(Fn)}}),!O)return null;for(var D=[{from:y,to:I}],Z=0;Z<O.length;++Z)for(var Ae=O[Z],be=Ae.find(0),Te=0;Te<D.length;++Te){var je=D[Te];if(!(ar(je.to,be.from)<0||ar(je.from,be.to)>0)){var yt=[Te,1],St=ar(je.from,be.from),Jt=ar(je.to,be.to);(St<0||!Ae.inclusiveLeft&&!St)&&yt.push({from:je.from,to:be.from}),(Jt>0||!Ae.inclusiveRight&&!Jt)&&yt.push({from:be.to,to:je.to}),D.splice.apply(D,yt),Te+=yt.length-3}}return D}function uo(A){var y=A.markedSpans;if(y){for(var I=0;I<y.length;++I)y[I].marker.detachLine(A);A.markedSpans=null}}function Di(A,y){if(y){for(var I=0;I<y.length;++I)y[I].marker.attachLine(A);A.markedSpans=y}}function ee(A){return A.inclusiveLeft?-1:0}function Ie(A){return A.inclusiveRight?1:0}function at(A,y){var I=A.lines.length-y.lines.length;if(I!=0)return I;var O=A.find(),D=y.find(),Z=ar(O.from,D.from)||ee(A)-ee(y);if(Z)return-Z;var Ae=ar(O.to,D.to)||Ie(A)-Ie(y);return Ae||y.id-A.id}function Ht(A,y){var I=gs&&A.markedSpans,O;if(I)for(var D=void 0,Z=0;Z<I.length;++Z)D=I[Z],D.marker.collapsed&&(y?D.from:D.to)==null&&(!O||at(O,D.marker)<0)&&(O=D.marker);return O}function kr(A){return Ht(A,!0)}function Vn(A){return Ht(A,!1)}function ai(A,y){var I=gs&&A.markedSpans,O;if(I)for(var D=0;D<I.length;++D){var Z=I[D];Z.marker.collapsed&&(Z.from==null||Z.from<y)&&(Z.to==null||Z.to>y)&&(!O||at(O,Z.marker)<0)&&(O=Z.marker)}return O}function di(A,y,I,O,D){var Z=Fr(A,y),Ae=gs&&Z.markedSpans;if(Ae)for(var be=0;be<Ae.length;++be){var Te=Ae[be];if(Te.marker.collapsed){var je=Te.marker.find(0),yt=ar(je.from,I)||ee(Te.marker)-ee(D),St=ar(je.to,O)||Ie(Te.marker)-Ie(D);if(!(yt>=0&&St<=0||yt<=0&&St>=0)&&(yt<=0&&(Te.marker.inclusiveRight&&D.inclusiveLeft?ar(je.to,I)>=0:ar(je.to,I)>0)||yt>=0&&(Te.marker.inclusiveRight&&D.inclusiveLeft?ar(je.from,O)<=0:ar(je.from,O)<0)))return!0}}}function Cr(A){for(var y;y=kr(A);)A=y.find(-1,!0).line;return A}function Tr(A){for(var y;y=Vn(A);)A=y.find(1,!0).line;return A}function Ci(A){for(var y,I;y=Vn(A);)A=y.find(1,!0).line,(I||(I=[])).push(A);return I}function Bo(A,y){var I=Fr(A,y),O=Cr(I);return I==O?y:Ye(O)}function Ti(A,y){if(y>A.lastLine())return y;var I=Fr(A,y),O;if(!Yr(A,I))return y;for(;O=Vn(I);)I=O.find(1,!0).line;return Ye(I)+1}function Yr(A,y){var I=gs&&y.markedSpans;if(I){for(var O=void 0,D=0;D<I.length;++D)if(O=I[D],!!O.marker.collapsed){if(O.from==null)return!0;if(!O.marker.widgetNode&&O.from==0&&O.marker.inclusiveLeft&&Zi(A,y,O))return!0}}}function Zi(A,y,I){if(I.to==null){var O=I.marker.find(1,!0);return Zi(A,O.line,Ol(O.line.markedSpans,I.marker))}if(I.marker.inclusiveRight&&I.to==y.text.length)return!0;for(var D=void 0,Z=0;Z<y.markedSpans.length;++Z)if(D=y.markedSpans[Z],D.marker.collapsed&&!D.marker.widgetNode&&D.from==I.to&&(D.to==null||D.to!=I.from)&&(D.marker.inclusiveLeft||I.marker.inclusiveRight)&&Zi(A,y,D))return!0}function Xi(A){A=Cr(A);for(var y=0,I=A.parent,O=0;O<I.lines.length;++O){var D=I.lines[O];if(D==A)break;y+=D.height}for(var Z=I.parent;Z;I=Z,Z=I.parent)for(var Ae=0;Ae<Z.children.length;++Ae){var be=Z.children[Ae];if(be==I)break;y+=be.height}return y}function As(A){if(A.height==0)return 0;for(var y=A.text.length,I,O=A;I=kr(O);){var D=I.find(0,!0);O=D.from.line,y+=D.from.ch-D.to.ch}for(O=A;I=Vn(O);){var Z=I.find(0,!0);y-=O.text.length-Z.from.ch,O=Z.to.line,y+=O.text.length-Z.to.ch}return y}function va(A){var y=A.display,I=A.doc;y.maxLine=Fr(I,I.first),y.maxLineLength=As(y.maxLine),y.maxLineChanged=!0,I.iter(function(O){var D=As(O);D>y.maxLineLength&&(y.maxLineLength=D,y.maxLine=O)})}var za=function(A,y,I){this.text=A,Di(this,y),this.height=I?I(this):1};za.prototype.lineNo=function(){return Ye(this)},Nt(za);function gu(A,y,I,O){A.text=y,A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null),A.order!=null&&(A.order=null),uo(A),Di(A,I);var D=O?O(A):1;D!=A.height&&oa(A,D)}function Zs(A){A.parent=null,uo(A)}var mc={},Oa={};function hl(A,y){if(!A||/^\s*$/.test(A))return null;var I=y.addModeClass?Oa:mc;return I[A]||(I[A]=A.replace(/\S+/g,"cm-$&"))}function dd(A,y){var I=st("span",null,null,b?"padding-right: .1px":null),O={pre:st("pre",[I],"CodeMirror-line"),content:I,col:0,pos:0,cm:A,trailingSpace:!1,splitSpaces:A.getOption("lineWrapping")};y.measure={};for(var D=0;D<=(y.rest?y.rest.length:0);D++){var Z=D?y.rest[D-1]:y.line,Ae=void 0;O.pos=0,O.addToken=Lu,Kr(A.display.measure)&&(Ae=_e(Z,A.doc.direction))&&(O.addToken=Es(O.addToken,Ae)),O.map=[];var be=y!=A.display.externalMeasured&&Ye(Z);hd(Z,O,us(A,Z,be)),Z.styleClasses&&(Z.styleClasses.bgClass&&(O.bgClass=Pe(Z.styleClasses.bgClass,O.bgClass||"")),Z.styleClasses.textClass&&(O.textClass=Pe(Z.styleClasses.textClass,O.textClass||""))),O.map.length==0&&O.map.push(0,0,O.content.appendChild(Ir(A.display.measure))),D==0?(y.measure.map=O.map,y.measure.cache={}):((y.measure.maps||(y.measure.maps=[])).push(O.map),(y.measure.caches||(y.measure.caches=[])).push({}))}if(b){var Te=O.content.lastChild;(/\bcm-tab\b/.test(Te.className)||Te.querySelector&&Te.querySelector(".cm-tab"))&&(O.content.className="cm-tab-wrap-hack")}return dt(A,"renderLine",A,y.line,O.pre),O.pre.className&&(O.textClass=Pe(O.pre.className,O.textClass||"")),O}function Fu(A){var y=ge("span","•","cm-invalidchar");return y.title="\\u"+A.charCodeAt(0).toString(16),y.setAttribute("aria-label",y.title),y}function Lu(A,y,I,O,D,Z,Ae){if(y){var be=A.splitSpaces?Sh(y,A.trailingSpace):y,Te=A.cm.state.specialChars,je=!1,yt;if(!Te.test(y))A.col+=y.length,yt=document.createTextNode(be),A.map.push(A.pos,A.pos+y.length,yt),d&&g<9&&(je=!0),A.pos+=y.length;else{yt=document.createDocumentFragment();for(var St=0;;){Te.lastIndex=St;var Jt=Te.exec(y),qt=Jt?Jt.index-St:y.length-St;if(qt){var En=document.createTextNode(be.slice(St,St+qt));d&&g<9?yt.appendChild(ge("span",[En])):yt.appendChild(En),A.map.push(A.pos,A.pos+qt,En),A.col+=qt,A.pos+=qt}if(!Jt)break;St+=qt+1;var Fn=void 0;if(Jt[0]=="	"){var Jn=A.cm.options.tabSize,sr=Jn-A.col%Jn;Fn=yt.appendChild(ge("span",rn(sr),"cm-tab")),Fn.setAttribute("role","presentation"),Fn.setAttribute("cm-text","	"),A.col+=sr}else Jt[0]=="\r"||Jt[0]==`
`?(Fn=yt.appendChild(ge("span",Jt[0]=="\r"?"␍":"␤","cm-invalidchar")),Fn.setAttribute("cm-text",Jt[0]),A.col+=1):(Fn=A.cm.options.specialCharPlaceholder(Jt[0]),Fn.setAttribute("cm-text",Jt[0]),d&&g<9?yt.appendChild(ge("span",[Fn])):yt.appendChild(Fn),A.col+=1);A.map.push(A.pos,A.pos+1,Fn),A.pos++}}if(A.trailingSpace=be.charCodeAt(y.length-1)==32,I||O||D||je||Z||Ae){var xr=I||"";O&&(xr+=O),D&&(xr+=D);var hr=ge("span",[yt],xr,Z);if(Ae)for(var Ur in Ae)Ae.hasOwnProperty(Ur)&&Ur!="style"&&Ur!="class"&&hr.setAttribute(Ur,Ae[Ur]);return A.content.appendChild(hr)}A.content.appendChild(yt)}}function Sh(A,y){if(A.length>1&&!/  /.test(A))return A;for(var I=y,O="",D=0;D<A.length;D++){var Z=A.charAt(D);Z==" "&&I&&(D==A.length-1||A.charCodeAt(D+1)==32)&&(Z=" "),O+=Z,I=Z==" "}return O}function Es(A,y){return function(I,O,D,Z,Ae,be,Te){D=D?D+" cm-force-border":"cm-force-border";for(var je=I.pos,yt=je+O.length;;){for(var St=void 0,Jt=0;Jt<y.length&&(St=y[Jt],!(St.to>je&&St.from<=je));Jt++);if(St.to>=yt)return A(I,O,D,Z,Ae,be,Te);A(I,O.slice(0,St.to-je),D,Z,null,be,Te),Z=null,O=O.slice(St.to-je),je=St.to}}}function Uu(A,y,I,O){var D=!O&&I.widgetNode;D&&A.map.push(A.pos,A.pos+y,D),!O&&A.cm.display.input.needsContentAttribute&&(D||(D=A.content.appendChild(document.createElement("span"))),D.setAttribute("cm-marker",I.id)),D&&(A.cm.display.input.setUneditable(D),A.content.appendChild(D)),A.pos+=y,A.trailingSpace=!1}function hd(A,y,I){var O=A.markedSpans,D=A.text,Z=0;if(!O){for(var Ae=1;Ae<I.length;Ae+=2)y.addToken(y,D.slice(Z,Z=I[Ae]),hl(I[Ae+1],y.cm.options));return}for(var be=D.length,Te=0,je=1,yt="",St,Jt,qt=0,En,Fn,Jn,sr,xr;;){if(qt==Te){En=Fn=Jn=Jt="",xr=null,sr=null,qt=1/0;for(var hr=[],Ur=void 0,li=0;li<O.length;++li){var Gr=O[li],Ji=Gr.marker;if(Ji.type=="bookmark"&&Gr.from==Te&&Ji.widgetNode)hr.push(Ji);else if(Gr.from<=Te&&(Gr.to==null||Gr.to>Te||Ji.collapsed&&Gr.to==Te&&Gr.from==Te)){if(Gr.to!=null&&Gr.to!=Te&&qt>Gr.to&&(qt=Gr.to,Fn=""),Ji.className&&(En+=" "+Ji.className),Ji.css&&(Jt=(Jt?Jt+";":"")+Ji.css),Ji.startStyle&&Gr.from==Te&&(Jn+=" "+Ji.startStyle),Ji.endStyle&&Gr.to==qt&&(Ur||(Ur=[])).push(Ji.endStyle,Gr.to),Ji.title&&((xr||(xr={})).title=Ji.title),Ji.attributes)for(var To in Ji.attributes)(xr||(xr={}))[To]=Ji.attributes[To];Ji.collapsed&&(!sr||at(sr.marker,Ji)<0)&&(sr=Gr)}else Gr.from>Te&&qt>Gr.from&&(qt=Gr.from)}if(Ur)for(var qa=0;qa<Ur.length;qa+=2)Ur[qa+1]==qt&&(Fn+=" "+Ur[qa]);if(!sr||sr.from==Te)for(var la=0;la<hr.length;++la)Uu(y,0,hr[la]);if(sr&&(sr.from||0)==Te){if(Uu(y,(sr.to==null?be+1:sr.to)-Te,sr.marker,sr.from==null),sr.to==null)return;sr.to==Te&&(sr=!1)}}if(Te>=be)break;for(var ba=Math.min(be,qt);;){if(yt){var xa=Te+yt.length;if(!sr){var Ra=xa>ba?yt.slice(0,ba-Te):yt;y.addToken(y,Ra,St?St+En:En,Jn,Te+Ra.length==qt?Fn:"",Jt,xr)}if(xa>=ba){yt=yt.slice(ba-Te),Te=ba;break}Te=xa,Jn=""}yt=D.slice(Z,Z=I[je++]),St=hl(I[je++],y.cm.options)}}}function Mp(A,y,I){this.line=y,this.rest=Ci(y),this.size=this.rest?Ye(or(this.rest))-I+1:1,this.node=this.text=null,this.hidden=Yr(A,y)}function uA(A,y,I){for(var O=[],D,Z=y;Z<I;Z=D){var Ae=new Mp(A.doc,Fr(A.doc,Z),Z);D=Z+Ae.size,O.push(Ae)}return O}var Hd=null;function jc(A){Hd?Hd.ops.push(A):A.ownsGroup=Hd={ops:[A],delayedCallbacks:[]}}function Sp(A){var y=A.delayedCallbacks,I=0;do{for(;I<y.length;I++)y[I].call(null);for(var O=0;O<A.ops.length;O++){var D=A.ops[O];if(D.cursorActivityHandlers)for(;D.cursorActivityCalled<D.cursorActivityHandlers.length;)D.cursorActivityHandlers[D.cursorActivityCalled++].call(null,D.cm)}}while(I<y.length)}function zf(A,y){var I=A.ownsGroup;if(I)try{Sp(I)}finally{Hd=null,y(I)}}var gc=null;function Xs(A,y){var I=$e(A,y);if(I.length){var O=Array.prototype.slice.call(arguments,2),D;Hd?D=Hd.delayedCallbacks:gc?D=gc:(D=gc=[],setTimeout(Eh,0));for(var Z=function(be){D.push(function(){return I[be].apply(null,O)})},Ae=0;Ae<I.length;++Ae)Z(Ae)}}function Eh(){var A=gc;gc=null;for(var y=0;y<A.length;++y)A[y]()}function sf(A,y,I,O){for(var D=0;D<y.changes.length;D++){var Z=y.changes[D];Z=="text"?yc(A,y):Z=="gutter"?Oh(A,y,I,O):Z=="class"?Bh(A,y):Z=="widget"&&md(A,y,O)}y.changes=null}function fd(A){return A.node==A.text&&(A.node=ge("div",null,null,"position: relative"),A.text.parentNode&&A.text.parentNode.replaceChild(A.node,A.text),A.node.appendChild(A.text),d&&g<8&&(A.node.style.zIndex=2)),A.node}function af(A,y){var I=y.bgClass?y.bgClass+" "+(y.line.bgClass||""):y.line.bgClass;if(I&&(I+=" CodeMirror-linebackground"),y.background)I?y.background.className=I:(y.background.parentNode.removeChild(y.background),y.background=null);else if(I){var O=fd(y);y.background=O.insertBefore(ge("div",null,I),O.firstChild),A.display.input.setUneditable(y.background)}}function pd(A,y){var I=A.display.externalMeasured;return I&&I.line==y.line?(A.display.externalMeasured=null,y.measure=I.measure,I.built):dd(A,y)}function yc(A,y){var I=y.text.className,O=pd(A,y);y.text==y.node&&(y.node=O.pre),y.text.parentNode.replaceChild(O.pre,y.text),y.text=O.pre,O.bgClass!=y.bgClass||O.textClass!=y.textClass?(y.bgClass=O.bgClass,y.textClass=O.textClass,Bh(A,y)):I&&(y.text.className=I)}function Bh(A,y){af(A,y),y.line.wrapClass?fd(y).className=y.line.wrapClass:y.node!=y.text&&(y.node.className="");var I=y.textClass?y.textClass+" "+(y.line.textClass||""):y.line.textClass;y.text.className=I||""}function Oh(A,y,I,O){if(y.gutter&&(y.node.removeChild(y.gutter),y.gutter=null),y.gutterBackground&&(y.node.removeChild(y.gutterBackground),y.gutterBackground=null),y.line.gutterClass){var D=fd(y);y.gutterBackground=ge("div",null,"CodeMirror-gutter-background "+y.line.gutterClass,"left: "+(A.options.fixedGutter?O.fixedPos:-O.gutterTotalWidth)+"px; width: "+O.gutterTotalWidth+"px"),A.display.input.setUneditable(y.gutterBackground),D.insertBefore(y.gutterBackground,y.text)}var Z=y.line.gutterMarkers;if(A.options.lineNumbers||Z){var Ae=fd(y),be=y.gutter=ge("div",null,"CodeMirror-gutter-wrapper","left: "+(A.options.fixedGutter?O.fixedPos:-O.gutterTotalWidth)+"px");if(be.setAttribute("aria-hidden","true"),A.display.input.setUneditable(be),Ae.insertBefore(be,y.text),y.line.gutterClass&&(be.className+=" "+y.line.gutterClass),A.options.lineNumbers&&(!Z||!Z["CodeMirror-linenumbers"])&&(y.lineNumber=be.appendChild(ge("div",$n(A.options,I),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+O.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+A.display.lineNumInnerWidth+"px"))),Z)for(var Te=0;Te<A.display.gutterSpecs.length;++Te){var je=A.display.gutterSpecs[Te].className,yt=Z.hasOwnProperty(je)&&Z[je];yt&&be.appendChild(ge("div",[yt],"CodeMirror-gutter-elt","left: "+O.gutterLeft[je]+"px; width: "+O.gutterWidth[je]+"px"))}}}function md(A,y,I){y.alignable&&(y.alignable=null);for(var O=Se("CodeMirror-linewidget"),D=y.node.firstChild,Z=void 0;D;D=Z)Z=D.nextSibling,O.test(D.className)&&y.node.removeChild(D);Nc(A,y,I)}function pm(A,y,I,O){var D=pd(A,y);return y.text=y.node=D.pre,D.bgClass&&(y.bgClass=D.bgClass),D.textClass&&(y.textClass=D.textClass),Bh(A,y),Oh(A,y,I,O),Nc(A,y,O),y.node}function Nc(A,y,I){if(yu(A,y.line,y,I,!0),y.rest)for(var O=0;O<y.rest.length;O++)yu(A,y.rest[O],y,I,!1)}function yu(A,y,I,O,D){if(y.widgets)for(var Z=fd(I),Ae=0,be=y.widgets;Ae<be.length;++Ae){var Te=be[Ae],je=ge("div",[Te.node],"CodeMirror-linewidget"+(Te.className?" "+Te.className:""));Te.handleMouseEvents||je.setAttribute("cm-ignore-events","true"),Ih(Te,je,I,O),A.display.input.setUneditable(je),D&&Te.above?Z.insertBefore(je,I.gutter||I.text):Z.appendChild(je),Xs(Te,"redraw")}}function Ih(A,y,I,O){if(A.noHScroll){(I.alignable||(I.alignable=[])).push(y);var D=O.wrapperWidth;y.style.left=O.fixedPos+"px",A.coverGutter||(D-=O.gutterTotalWidth,y.style.paddingLeft=O.gutterTotalWidth+"px"),y.style.width=D+"px"}A.coverGutter&&(y.style.zIndex=5,y.style.position="relative",A.noHScroll||(y.style.marginLeft=-O.gutterTotalWidth+"px"))}function vu(A){if(A.height!=null)return A.height;var y=A.doc.cm;if(!y)return 0;if(!Ze(document.body,A.node)){var I="position: relative;";A.coverGutter&&(I+="margin-left: -"+y.display.gutters.offsetWidth+"px;"),A.noHScroll&&(I+="width: "+y.display.wrapper.clientWidth+"px;"),Ke(y.display.measure,ge("div",[A.node],null,I))}return A.height=A.node.parentNode.offsetHeight}function AA(A,y){for(var I=Er(y);I!=A.wrapper;I=I.parentNode)if(!I||I.nodeType==1&&I.getAttribute("cm-ignore-events")=="true"||I.parentNode==A.sizer&&I!=A.mover)return!0}function Wc(A){return A.lineSpace.offsetTop}function Zd(A){return A.mover.offsetHeight-A.lineSpace.offsetHeight}function lf(A){if(A.cachedPaddingH)return A.cachedPaddingH;var y=Ke(A.measure,ge("pre","x","CodeMirror-line-like")),I=window.getComputedStyle?window.getComputedStyle(y):y.currentStyle,O={left:parseInt(I.paddingLeft),right:parseInt(I.paddingRight)};return!isNaN(O.left)&&!isNaN(O.right)&&(A.cachedPaddingH=O),O}function au(A){return Ct-A.display.nativeBarWidth}function Il(A){return A.display.scroller.clientWidth-au(A)-A.display.barWidth}function YA(A){return A.display.scroller.clientHeight-au(A)-A.display.barHeight}function Gc(A,y,I){var O=A.options.lineWrapping,D=O&&Il(A);if(!y.measure.heights||O&&y.measure.width!=D){var Z=y.measure.heights=[];if(O){y.measure.width=D;for(var Ae=y.text.firstChild.getClientRects(),be=0;be<Ae.length-1;be++){var Te=Ae[be],je=Ae[be+1];Math.abs(Te.bottom-je.bottom)>2&&Z.push((Te.bottom+je.top)/2-I.top)}}Z.push(I.bottom-I.top)}}function uf(A,y,I){if(A.line==y)return{map:A.measure.map,cache:A.measure.cache};if(A.rest){for(var O=0;O<A.rest.length;O++)if(A.rest[O]==y)return{map:A.measure.maps[O],cache:A.measure.caches[O]};for(var D=0;D<A.rest.length;D++)if(Ye(A.rest[D])>I)return{map:A.measure.maps[D],cache:A.measure.caches[D],before:!0}}}function jf(A,y){y=Cr(y);var I=Ye(y),O=A.display.externalMeasured=new Mp(A.doc,y,I);O.lineN=I;var D=O.built=dd(A,O);return O.text=D.pre,Ke(A.display.lineMeasure,D.pre),O}function gd(A,y,I,O){return kl(A,rl(A,y),I,O)}function xA(A,y){if(y>=A.display.viewFrom&&y<A.display.viewTo)return A.display.view[cA(A,y)];var I=A.display.externalMeasured;if(I&&y>=I.lineN&&y<I.lineN+I.size)return I}function rl(A,y){var I=Ye(y),O=xA(A,I);O&&!O.text?O=null:O&&O.changes&&(sf(A,O,I,HA(A)),A.curOp.forceUpdate=!0),O||(O=jf(A,y));var D=uf(O,y,I);return{line:y,view:O,rect:null,map:D.map,cache:D.cache,before:D.before,hasHeights:!1}}function kl(A,y,I,O,D){y.before&&(I=-1);var Z=I+(O||""),Ae;return y.cache.hasOwnProperty(Z)?Ae=y.cache[Z]:(y.rect||(y.rect=y.view.text.getBoundingClientRect()),y.hasHeights||(Gc(A,y.view,y.rect),y.hasHeights=!0),Ae=Qc(A,y,I,O),Ae.bogus||(y.cache[Z]=Ae)),{left:Ae.left,right:Ae.right,top:D?Ae.rtop:Ae.top,bottom:D?Ae.rbottom:Ae.bottom}}var Vo={left:0,right:0,top:0,bottom:0};function kh(A,y,I){for(var O,D,Z,Ae,be,Te,je=0;je<A.length;je+=3)if(be=A[je],Te=A[je+1],y<be?(D=0,Z=1,Ae="left"):y<Te?(D=y-be,Z=D+1):(je==A.length-3||y==Te&&A[je+3]>y)&&(Z=Te-be,D=Z-1,y>=Te&&(Ae="right")),D!=null){if(O=A[je+2],be==Te&&I==(O.insertLeft?"left":"right")&&(Ae=I),I=="left"&&D==0)for(;je&&A[je-2]==A[je-3]&&A[je-1].insertLeft;)O=A[(je-=3)+2],Ae="left";if(I=="right"&&D==Te-be)for(;je<A.length-3&&A[je+3]==A[je+4]&&!A[je+5].insertLeft;)O=A[(je+=3)+2],Ae="right";break}return{node:O,start:D,end:Z,collapse:Ae,coverStart:be,coverEnd:Te}}function mm(A,y){var I=Vo;if(y=="left")for(var O=0;O<A.length&&(I=A[O]).left==I.right;O++);else for(var D=A.length-1;D>=0&&(I=A[D]).left==I.right;D--);return I}function Qc(A,y,I,O){var D=kh(y.map,I,O),Z=D.node,Ae=D.start,be=D.end,Te=D.collapse,je;if(Z.nodeType==3){for(var yt=0;yt<4;yt++){for(;Ae&&tt(y.line.text.charAt(D.coverStart+Ae));)--Ae;for(;D.coverStart+be<D.coverEnd&&tt(y.line.text.charAt(D.coverStart+be));)++be;if(d&&g<9&&Ae==0&&be==D.coverEnd-D.coverStart?je=Z.parentNode.getBoundingClientRect():je=mm(Qe(Z,Ae,be).getClientRects(),O),je.left||je.right||Ae==0)break;be=Ae,Ae=Ae-1,Te="right"}d&&g<11&&(je=zu(A.display.measure,je))}else{Ae>0&&(Te=O="right");var St;A.options.lineWrapping&&(St=Z.getClientRects()).length>1?je=St[O=="right"?St.length-1:0]:je=Z.getBoundingClientRect()}if(d&&g<9&&!Ae&&(!je||!je.left&&!je.right)){var Jt=Z.parentNode.getClientRects()[0];Jt?je={left:Jt.left,right:Jt.left+Gi(A.display),top:Jt.top,bottom:Jt.bottom}:je=Vo}for(var qt=je.top-y.rect.top,En=je.bottom-y.rect.top,Fn=(qt+En)/2,Jn=y.view.measure.heights,sr=0;sr<Jn.length-1&&!(Fn<Jn[sr]);sr++);var xr=sr?Jn[sr-1]:0,hr=Jn[sr],Ur={left:(Te=="right"?je.right:je.left)-y.rect.left,right:(Te=="left"?je.left:je.right)-y.rect.left,top:xr,bottom:hr};return!je.left&&!je.right&&(Ur.bogus=!0),A.options.singleCursorHeightPerLine||(Ur.rtop=qt,Ur.rbottom=En),Ur}function zu(A,y){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!vi(A))return y;var I=screen.logicalXDPI/screen.deviceXDPI,O=screen.logicalYDPI/screen.deviceYDPI;return{left:y.left*I,right:y.right*I,top:y.top*O,bottom:y.bottom*O}}function Xd(A){if(A.measure&&(A.measure.cache={},A.measure.heights=null,A.rest))for(var y=0;y<A.rest.length;y++)A.measure.caches[y]={}}function Jd(A){A.display.externalMeasure=null,we(A.display.lineMeasure);for(var y=0;y<A.display.view.length;y++)Xd(A.display.view[y])}function vc(A){Jd(A),A.display.cachedCharWidth=A.display.cachedTextHeight=A.display.cachedPaddingH=null,A.options.lineWrapping||(A.display.maxLineChanged=!0),A.display.lineNumChars=null}function eh(A){return S&&ie?-(A.body.getBoundingClientRect().left-parseInt(getComputedStyle(A.body).marginLeft)):A.defaultView.pageXOffset||(A.documentElement||A.body).scrollLeft}function Af(A){return S&&ie?-(A.body.getBoundingClientRect().top-parseInt(getComputedStyle(A.body).marginTop)):A.defaultView.pageYOffset||(A.documentElement||A.body).scrollTop}function Cc(A){var y=Cr(A),I=y.widgets,O=0;if(I)for(var D=0;D<I.length;++D)I[D].above&&(O+=vu(I[D]));return O}function Cu(A,y,I,O,D){if(!D){var Z=Cc(y);I.top+=Z,I.bottom+=Z}if(O=="line")return I;O||(O="local");var Ae=Xi(y);if(O=="local"?Ae+=Wc(A.display):Ae-=A.display.viewOffset,O=="page"||O=="window"){var be=A.display.lineSpace.getBoundingClientRect();Ae+=be.top+(O=="window"?0:Af(vt(A)));var Te=be.left+(O=="window"?0:eh(vt(A)));I.left+=Te,I.right+=Te}return I.top+=Ae,I.bottom+=Ae,I}function Zt(A,y,I){if(I=="div")return y;var O=y.left,D=y.top;if(I=="page")O-=eh(vt(A)),D-=Af(vt(A));else if(I=="local"||!I){var Z=A.display.sizer.getBoundingClientRect();O+=Z.left,D+=Z.top}var Ae=A.display.lineSpace.getBoundingClientRect();return{left:O-Ae.left,top:D-Ae.top}}function Rn(A,y,I,O,D){return O||(O=Fr(A.doc,y.line)),Cu(A,O,gd(A,O,y.ch,D),I)}function ln(A,y,I,O,D,Z){O=O||Fr(A.doc,y.line),D||(D=rl(A,O));function Ae(En,Fn){var Jn=kl(A,D,En,Fn?"right":"left",Z);return Fn?Jn.left=Jn.right:Jn.right=Jn.left,Cu(A,O,Jn,I)}var be=_e(O,A.doc.direction),Te=y.ch,je=y.sticky;if(Te>=O.text.length?(Te=O.text.length,je="before"):Te<=0&&(Te=0,je="after"),!be)return Ae(je=="before"?Te-1:Te,je=="before");function yt(En,Fn,Jn){var sr=be[Fn],xr=sr.level==1;return Ae(Jn?En-1:En,xr!=Jn)}var St=Oe(be,Te,je),Jt=rr,qt=yt(Te,St,je=="before");return Jt!=null&&(qt.other=yt(Te,Jt,je!="before")),qt}function zr(A,y){var I=0;y=ii(A.doc,y),A.options.lineWrapping||(I=Gi(A.display)*y.ch);var O=Fr(A.doc,y.line),D=Xi(O)+Wc(A.display);return{left:I,right:I,top:D,bottom:D+O.height}}function _i(A,y,I,O,D){var Z=dn(A,y,I);return Z.xRel=D,O&&(Z.outside=O),Z}function bo(A,y,I){var O=A.doc;if(I+=A.display.viewOffset,I<0)return _i(O.first,0,null,-1,-1);var D=Mt(O,I),Z=O.first+O.size-1;if(D>Z)return _i(O.first+O.size-1,Fr(O,Z).text.length,null,1,1);y<0&&(y=0);for(var Ae=Fr(O,D);;){var be=Ep(A,Ae,D,y,I),Te=ai(Ae,be.ch+(be.xRel>0||be.outside>0?1:0));if(!Te)return be;var je=Te.find(1);if(je.line==D)return je;Ae=Fr(O,D=je.line)}}function sa(A,y,I,O){O-=Cc(y);var D=y.text.length,Z=$t(function(Ae){return kl(A,I,Ae-1).bottom<=O},D,0);return D=$t(function(Ae){return kl(A,I,Ae).top>O},Z,D),{begin:Z,end:D}}function Ho(A,y,I,O){I||(I=rl(A,y));var D=Cu(A,y,kl(A,I,O),"line").top;return sa(A,y,I,D)}function $A(A,y,I,O){return A.bottom<=I?!1:A.top>I?!0:(O?A.left:A.right)>y}function Ep(A,y,I,O,D){D-=Xi(y);var Z=rl(A,y),Ae=Cc(y),be=0,Te=y.text.length,je=!0,yt=_e(y,A.doc.direction);if(yt){var St=(A.options.lineWrapping?_u:Tl)(A,y,I,Z,yt,O,D);je=St.level!=1,be=je?St.from:St.to-1,Te=je?St.to:St.from-1}var Jt=null,qt=null,En=$t(function(li){var Gr=kl(A,Z,li);return Gr.top+=Ae,Gr.bottom+=Ae,$A(Gr,O,D,!1)?(Gr.top<=D&&Gr.left<=O&&(Jt=li,qt=Gr),!0):!1},be,Te),Fn,Jn,sr=!1;if(qt){var xr=O-qt.left<qt.right-O,hr=xr==je;En=Jt+(hr?0:1),Jn=hr?"after":"before",Fn=xr?qt.left:qt.right}else{!je&&(En==Te||En==be)&&En++,Jn=En==0?"after":En==y.text.length?"before":kl(A,Z,En-(je?1:0)).bottom+Ae<=D==je?"after":"before";var Ur=ln(A,dn(I,En,Jn),"line",y,Z);Fn=Ur.left,sr=D<Ur.top?-1:D>=Ur.bottom?1:0}return En=Et(y.text,En,1),_i(I,En,Jn,sr,O-Fn)}function Tl(A,y,I,O,D,Z,Ae){var be=$t(function(St){var Jt=D[St],qt=Jt.level!=1;return $A(ln(A,dn(I,qt?Jt.to:Jt.from,qt?"before":"after"),"line",y,O),Z,Ae,!0)},0,D.length-1),Te=D[be];if(be>0){var je=Te.level!=1,yt=ln(A,dn(I,je?Te.from:Te.to,je?"after":"before"),"line",y,O);$A(yt,Z,Ae,!0)&&yt.top>Ae&&(Te=D[be-1])}return Te}function _u(A,y,I,O,D,Z,Ae){var be=sa(A,y,O,Ae),Te=be.begin,je=be.end;/\s/.test(y.text.charAt(je-1))&&je--;for(var yt=null,St=null,Jt=0;Jt<D.length;Jt++){var qt=D[Jt];if(!(qt.from>=je||qt.to<=Te)){var En=qt.level!=1,Fn=kl(A,O,En?Math.min(je,qt.to)-1:Math.max(Te,qt.from)).right,Jn=Fn<Z?Z-Fn+1e9:Fn-Z;(!yt||St>Jn)&&(yt=qt,St=Jn)}}return yt||(yt=D[D.length-1]),yt.from<Te&&(yt={from:Te,to:yt.to,level:yt.level}),yt.to>je&&(yt={from:yt.from,to:je,level:yt.level}),yt}var VA;function Pl(A){if(A.cachedTextHeight!=null)return A.cachedTextHeight;if(VA==null){VA=ge("pre",null,"CodeMirror-line-like");for(var y=0;y<49;++y)VA.appendChild(document.createTextNode("x")),VA.appendChild(ge("br"));VA.appendChild(document.createTextNode("x"))}Ke(A.measure,VA);var I=VA.offsetHeight/50;return I>3&&(A.cachedTextHeight=I),we(A.measure),I||1}function Gi(A){if(A.cachedCharWidth!=null)return A.cachedCharWidth;var y=ge("span","xxxxxxxxxx"),I=ge("pre",[y],"CodeMirror-line-like");Ke(A.measure,I);var O=y.getBoundingClientRect(),D=(O.right-O.left)/10;return D>2&&(A.cachedCharWidth=D),D||10}function HA(A){for(var y=A.display,I={},O={},D=y.gutters.clientLeft,Z=y.gutters.firstChild,Ae=0;Z;Z=Z.nextSibling,++Ae){var be=A.display.gutterSpecs[Ae].className;I[be]=Z.offsetLeft+Z.clientLeft+D,O[be]=Z.clientWidth}return{fixedPos:zo(y),gutterTotalWidth:y.gutters.offsetWidth,gutterLeft:I,gutterWidth:O,wrapperWidth:y.wrapper.clientWidth}}function zo(A){return A.scroller.getBoundingClientRect().left-A.sizer.getBoundingClientRect().left}function qc(A){var y=Pl(A.display),I=A.options.lineWrapping,O=I&&Math.max(5,A.display.scroller.clientWidth/Gi(A.display)-3);return function(D){if(Yr(A.doc,D))return 0;var Z=0;if(D.widgets)for(var Ae=0;Ae<D.widgets.length;Ae++)D.widgets[Ae].height&&(Z+=D.widgets[Ae].height);return I?Z+(Math.ceil(D.text.length/O)||1)*y:Z+y}}function ZA(A){var y=A.doc,I=qc(A);y.iter(function(O){var D=I(O);D!=O.height&&oa(O,D)})}function wA(A,y,I,O){var D=A.display;if(!I&&Er(y).getAttribute("cm-not-content")=="true")return null;var Z,Ae,be=D.lineSpace.getBoundingClientRect();try{Z=y.clientX-be.left,Ae=y.clientY-be.top}catch{return null}var Te=bo(A,Z,Ae),je;if(O&&Te.xRel>0&&(je=Fr(A.doc,Te.line).text).length==Te.ch){var yt=Re(je,je.length,A.options.tabSize)-je.length;Te=dn(Te.line,Math.max(0,Math.round((Z-lf(A.display).left)/Gi(A.display))-yt))}return Te}function cA(A,y){if(y>=A.display.viewTo||(y-=A.display.viewFrom,y<0))return null;for(var I=A.display.view,O=0;O<I.length;O++)if(y-=I[O].size,y<0)return O}function Rl(A,y,I,O){y==null&&(y=A.doc.first),I==null&&(I=A.doc.first+A.doc.size),O||(O=0);var D=A.display;if(O&&I<D.viewTo&&(D.updateLineNumbers==null||D.updateLineNumbers>y)&&(D.updateLineNumbers=y),A.curOp.viewChanged=!0,y>=D.viewTo)gs&&Bo(A.doc,y)<D.viewTo&&bu(A);else if(I<=D.viewFrom)gs&&Ti(A.doc,I+O)>D.viewFrom?bu(A):(D.viewFrom+=O,D.viewTo+=O);else if(y<=D.viewFrom&&I>=D.viewTo)bu(A);else if(y<=D.viewFrom){var Z=Gl(A,I,I+O,1);Z?(D.view=D.view.slice(Z.index),D.viewFrom=Z.lineN,D.viewTo+=O):bu(A)}else if(I>=D.viewTo){var Ae=Gl(A,y,y,-1);Ae?(D.view=D.view.slice(0,Ae.index),D.viewTo=Ae.lineN):bu(A)}else{var be=Gl(A,y,y,-1),Te=Gl(A,I,I+O,1);be&&Te?(D.view=D.view.slice(0,be.index).concat(uA(A,be.lineN,Te.lineN)).concat(D.view.slice(Te.index)),D.viewTo+=O):bu(A)}var je=D.externalMeasured;je&&(I<je.lineN?je.lineN+=O:y<je.lineN+je.size&&(D.externalMeasured=null))}function _c(A,y,I){A.curOp.viewChanged=!0;var O=A.display,D=A.display.externalMeasured;if(D&&y>=D.lineN&&y<D.lineN+D.size&&(O.externalMeasured=null),!(y<O.viewFrom||y>=O.viewTo)){var Z=O.view[cA(A,y)];if(Z.node!=null){var Ae=Z.changes||(Z.changes=[]);nt(Ae,I)==-1&&Ae.push(I)}}}function bu(A){A.display.viewFrom=A.display.viewTo=A.doc.first,A.display.view=[],A.display.viewOffset=0}function Gl(A,y,I,O){var D=cA(A,y),Z,Ae=A.display.view;if(!gs||I==A.doc.first+A.doc.size)return{index:D,lineN:I};for(var be=A.display.viewFrom,Te=0;Te<D;Te++)be+=Ae[Te].size;if(be!=y){if(O>0){if(D==Ae.length-1)return null;Z=be+Ae[D].size-y,D++}else Z=be-y;y+=Z,I+=Z}for(;Bo(A.doc,I)!=I;){if(D==(O<0?0:Ae.length-1))return null;I+=O*Ae[D-(O<0?1:0)].size,D+=O}return{index:D,lineN:I}}function Yc(A,y,I){var O=A.display,D=O.view;D.length==0||y>=O.viewTo||I<=O.viewFrom?(O.view=uA(A,y,I),O.viewFrom=y):(O.viewFrom>y?O.view=uA(A,y,O.viewFrom).concat(O.view):O.viewFrom<y&&(O.view=O.view.slice(cA(A,y))),O.viewFrom=y,O.viewTo<I?O.view=O.view.concat(uA(A,O.viewTo,I)):O.viewTo>I&&(O.view=O.view.slice(0,cA(A,I)))),O.viewTo=I}function th(A){for(var y=A.display.view,I=0,O=0;O<y.length;O++){var D=y[O];!D.hidden&&(!D.node||D.changes)&&++I}return I}function ja(A){A.display.input.showSelection(A.display.input.prepareSelection())}function yd(A,y){y===void 0&&(y=!0);var I=A.doc,O={},D=O.cursors=document.createDocumentFragment(),Z=O.selection=document.createDocumentFragment(),Ae=A.options.$customCursor;Ae&&(y=!0);for(var be=0;be<I.sel.ranges.length;be++)if(!(!y&&be==I.sel.primIndex)){var Te=I.sel.ranges[be];if(!(Te.from().line>=A.display.viewTo||Te.to().line<A.display.viewFrom)){var je=Te.empty();if(Ae){var yt=Ae(A,Te);yt&&bc(A,yt,D)}else(je||A.options.showCursorWhenSelecting)&&bc(A,Te.head,D);je||cf(A,Te,Z)}}return O}function bc(A,y,I){var O=ln(A,y,"div",null,null,!A.options.singleCursorHeightPerLine),D=I.appendChild(ge("div"," ","CodeMirror-cursor"));if(D.style.left=O.left+"px",D.style.top=O.top+"px",D.style.height=Math.max(0,O.bottom-O.top)*A.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(A.getWrapperElement().className)){var Z=Rn(A,y,"div",null,null),Ae=Z.right-Z.left;D.style.width=(Ae>0?Ae:A.defaultCharWidth())+"px"}if(O.other){var be=I.appendChild(ge("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));be.style.display="",be.style.left=O.other.left+"px",be.style.top=O.other.top+"px",be.style.height=(O.other.bottom-O.other.top)*.85+"px"}}function XA(A,y){return A.top-y.top||A.left-y.left}function cf(A,y,I){var O=A.display,D=A.doc,Z=document.createDocumentFragment(),Ae=lf(A.display),be=Ae.left,Te=Math.max(O.sizerWidth,Il(A)-O.sizer.offsetLeft)-Ae.right,je=D.direction=="ltr";function yt(hr,Ur,li,Gr){Ur<0&&(Ur=0),Ur=Math.round(Ur),Gr=Math.round(Gr),Z.appendChild(ge("div",null,"CodeMirror-selected","position: absolute; left: "+hr+`px;
                             top: `+Ur+"px; width: "+(li??Te-hr)+`px;
                             height: `+(Gr-Ur)+"px"))}function St(hr,Ur,li){var Gr=Fr(D,hr),Ji=Gr.text.length,To,qa;function la(Ra,Hl){return Rn(A,dn(hr,Ra),"div",Gr,Hl)}function ba(Ra,Hl,Ya){var wa=Ho(A,Gr,null,Ra),fs=Hl=="ltr"==(Ya=="after")?"left":"right",yi=Ya=="after"?wa.begin:wa.end-(/\s/.test(Gr.text.charAt(wa.end-1))?2:1);return la(yi,fs)[fs]}var xa=_e(Gr,D.direction);return on(xa,Ur||0,li??Ji,function(Ra,Hl,Ya,wa){var fs=Ya=="ltr",yi=la(Ra,fs?"left":"right"),Jo=la(Hl-1,fs?"right":"left"),ua=Ur==null&&Ra==0,pa=li==null&&Hl==Ji,Ts=wa==0,Fl=!xa||wa==xa.length-1;if(Jo.top-yi.top<=3){var Do=(je?ua:pa)&&Ts,Fd=(je?pa:ua)&&Fl,Cl=Do?be:(fs?yi:Jo).left,KA=Fd?Te:(fs?Jo:yi).right;yt(Cl,yi.top,KA-Cl,yi.bottom)}else{var nd,_l,bl,gf;fs?(nd=je&&ua&&Ts?be:yi.left,_l=je?Te:ba(Ra,Ya,"before"),bl=je?be:ba(Hl,Ya,"after"),gf=je&&pa&&Fl?Te:Jo.right):(nd=je?ba(Ra,Ya,"before"):be,_l=!je&&ua&&Ts?Te:yi.right,bl=!je&&pa&&Fl?be:Jo.left,gf=je?ba(Hl,Ya,"after"):Te),yt(nd,yi.top,_l-nd,yi.bottom),yi.bottom<Jo.top&&yt(be,yi.bottom,null,Jo.top),yt(bl,Jo.top,gf-bl,Jo.bottom)}(!To||XA(yi,To)<0)&&(To=yi),XA(Jo,To)<0&&(To=Jo),(!qa||XA(yi,qa)<0)&&(qa=yi),XA(Jo,qa)<0&&(qa=Jo)}),{start:To,end:qa}}var Jt=y.from(),qt=y.to();if(Jt.line==qt.line)St(Jt.line,Jt.ch,qt.ch);else{var En=Fr(D,Jt.line),Fn=Fr(D,qt.line),Jn=Cr(En)==Cr(Fn),sr=St(Jt.line,Jt.ch,Jn?En.text.length+1:null).end,xr=St(qt.line,Jn?0:null,qt.ch).start;Jn&&(sr.top<xr.top-2?(yt(sr.right,sr.top,null,sr.bottom),yt(be,xr.top,xr.left,xr.bottom)):yt(sr.right,sr.top,xr.left-sr.right,sr.bottom)),sr.bottom<xr.top&&yt(be,sr.bottom,null,xr.top)}I.appendChild(Z)}function MA(A){if(A.state.focused){var y=A.display;clearInterval(y.blinker);var I=!0;y.cursorDiv.style.visibility="",A.options.cursorBlinkRate>0?y.blinker=setInterval(function(){A.hasFocus()||Zo(A),y.cursorDiv.style.visibility=(I=!I)?"":"hidden"},A.options.cursorBlinkRate):A.options.cursorBlinkRate<0&&(y.cursorDiv.style.visibility="hidden")}}function JA(A){A.hasFocus()||(A.display.input.focus(),A.state.focused||nh(A))}function $c(A){A.state.delayingBlurEvent=!0,setTimeout(function(){A.state.delayingBlurEvent&&(A.state.delayingBlurEvent=!1,A.state.focused&&Zo(A))},100)}function nh(A,y){A.state.delayingBlurEvent&&!A.state.draggingText&&(A.state.delayingBlurEvent=!1),A.options.readOnly!="nocursor"&&(A.state.focused||(dt(A,"focus",A,y),A.state.focused=!0,Ce(A.display.wrapper,"CodeMirror-focused"),!A.curOp&&A.display.selForContextMenu!=A.doc.sel&&(A.display.input.reset(),b&&setTimeout(function(){return A.display.input.reset(!0)},20)),A.display.input.receivedFocus()),MA(A))}function Zo(A,y){A.state.delayingBlurEvent||(A.state.focused&&(dt(A,"blur",A,y),A.state.focused=!1,pe(A.display.wrapper,"CodeMirror-focused")),clearInterval(A.display.blinker),setTimeout(function(){A.state.focused||(A.display.shift=!1)},150))}function Vc(A){for(var y=A.display,I=y.lineDiv.offsetTop,O=Math.max(0,y.scroller.getBoundingClientRect().top),D=y.lineDiv.getBoundingClientRect().top,Z=0,Ae=0;Ae<y.view.length;Ae++){var be=y.view[Ae],Te=A.options.lineWrapping,je=void 0,yt=0;if(!be.hidden){if(D+=be.line.height,d&&g<8){var St=be.node.offsetTop+be.node.offsetHeight;je=St-I,I=St}else{var Jt=be.node.getBoundingClientRect();je=Jt.bottom-Jt.top,!Te&&be.text.firstChild&&(yt=be.text.firstChild.getBoundingClientRect().right-Jt.left-1)}var qt=be.line.height-je;if((qt>.005||qt<-.005)&&(D<O&&(Z-=qt),oa(be.line,je),ec(be.line),be.rest))for(var En=0;En<be.rest.length;En++)ec(be.rest[En]);if(yt>A.display.sizerWidth){var Fn=Math.ceil(yt/Gi(A.display));Fn>A.display.maxLineLength&&(A.display.maxLineLength=Fn,A.display.maxLine=be.line,A.display.maxLineChanged=!0)}}}Math.abs(Z)>2&&(y.scroller.scrollTop+=Z)}function ec(A){if(A.widgets)for(var y=0;y<A.widgets.length;++y){var I=A.widgets[y],O=I.node.parentNode;O&&(I.height=O.offsetHeight)}}function ju(A,y,I){var O=I&&I.top!=null?Math.max(0,I.top):A.scroller.scrollTop;O=Math.floor(O-Wc(A));var D=I&&I.bottom!=null?I.bottom:O+A.wrapper.clientHeight,Z=Mt(y,O),Ae=Mt(y,D);if(I&&I.ensure){var be=I.ensure.from.line,Te=I.ensure.to.line;be<Z?(Z=be,Ae=Mt(y,Xi(Fr(y,be))+A.wrapper.clientHeight)):Math.min(Te,y.lastLine())>=Ae&&(Z=Mt(y,Xi(Fr(y,Te))-A.wrapper.clientHeight),Ae=Te)}return{from:Z,to:Math.max(Ae,Z+1)}}function Hc(A,y){if(!ct(A,"scrollCursorIntoView")){var I=A.display,O=I.sizer.getBoundingClientRect(),D=null,Z=I.wrapper.ownerDocument;if(y.top+O.top<0?D=!0:y.bottom+O.top>(Z.defaultView.innerHeight||Z.documentElement.clientHeight)&&(D=!1),D!=null&&!Y){var Ae=ge("div","​",null,`position: absolute;
                         top: `+(y.top-I.viewOffset-Wc(A.display))+`px;
                         height: `+(y.bottom-y.top+au(A)+I.barHeight)+`px;
                         left: `+y.left+"px; width: "+Math.max(2,y.right-y.left)+"px;");A.display.lineSpace.appendChild(Ae),Ae.scrollIntoView(D),A.display.lineSpace.removeChild(Ae)}}}function rh(A,y,I,O){O==null&&(O=0);var D;!A.options.lineWrapping&&y==I&&(I=y.sticky=="before"?dn(y.line,y.ch+1,"before"):y,y=y.ch?dn(y.line,y.sticky=="before"?y.ch-1:y.ch,"after"):y);for(var Z=0;Z<5;Z++){var Ae=!1,be=ln(A,y),Te=!I||I==y?be:ln(A,I);D={left:Math.min(be.left,Te.left),top:Math.min(be.top,Te.top)-O,right:Math.max(be.left,Te.left),bottom:Math.max(be.bottom,Te.bottom)+O};var je=xc(A,D),yt=A.doc.scrollTop,St=A.doc.scrollLeft;if(je.scrollTop!=null&&(Nu(A,je.scrollTop),Math.abs(A.doc.scrollTop-yt)>1&&(Ae=!0)),je.scrollLeft!=null&&(Ql(A,je.scrollLeft),Math.abs(A.doc.scrollLeft-St)>1&&(Ae=!0)),!Ae)break}return D}function Zc(A,y){var I=xc(A,y);I.scrollTop!=null&&Nu(A,I.scrollTop),I.scrollLeft!=null&&Ql(A,I.scrollLeft)}function xc(A,y){var I=A.display,O=Pl(A.display);y.top<0&&(y.top=0);var D=A.curOp&&A.curOp.scrollTop!=null?A.curOp.scrollTop:I.scroller.scrollTop,Z=YA(A),Ae={};y.bottom-y.top>Z&&(y.bottom=y.top+Z);var be=A.doc.height+Zd(I),Te=y.top<O,je=y.bottom>be-O;if(y.top<D)Ae.scrollTop=Te?0:y.top;else if(y.bottom>D+Z){var yt=Math.min(y.top,(je?be:y.bottom)-Z);yt!=D&&(Ae.scrollTop=yt)}var St=A.options.fixedGutter?0:I.gutters.offsetWidth,Jt=A.curOp&&A.curOp.scrollLeft!=null?A.curOp.scrollLeft:I.scroller.scrollLeft-St,qt=Il(A)-I.gutters.offsetWidth,En=y.right-y.left>qt;return En&&(y.right=y.left+qt),y.left<10?Ae.scrollLeft=0:y.left<Jt?Ae.scrollLeft=Math.max(0,y.left+St-(En?0:10)):y.right>qt+Jt-3&&(Ae.scrollLeft=y.right+(En?0:10)-qt),Ae}function cs(A,y){y!=null&&(vd(A),A.curOp.scrollTop=(A.curOp.scrollTop==null?A.doc.scrollTop:A.curOp.scrollTop)+y)}function jo(A){vd(A);var y=A.getCursor();A.curOp.scrollToPos={from:y,to:y,margin:A.options.cursorScrollMargin}}function ds(A,y,I){(y!=null||I!=null)&&vd(A),y!=null&&(A.curOp.scrollLeft=y),I!=null&&(A.curOp.scrollTop=I)}function Nf(A,y){vd(A),A.curOp.scrollToPos=y}function vd(A){var y=A.curOp.scrollToPos;if(y){A.curOp.scrollToPos=null;var I=zr(A,y.from),O=zr(A,y.to);Cd(A,I,O,y.margin)}}function Cd(A,y,I,O){var D=xc(A,{left:Math.min(y.left,I.left),top:Math.min(y.top,I.top)-O,right:Math.max(y.right,I.right),bottom:Math.max(y.bottom,I.bottom)+O});ds(A,D.scrollLeft,D.scrollTop)}function Nu(A,y){Math.abs(A.doc.scrollTop-y)<2||(i||Ca(A,{top:y}),tc(A,y,!0),i&&Ca(A),bd(A,100))}function tc(A,y,I){y=Math.max(0,Math.min(A.display.scroller.scrollHeight-A.display.scroller.clientHeight,y)),!(A.display.scroller.scrollTop==y&&!I)&&(A.doc.scrollTop=y,A.display.scrollbars.setScrollTop(y),A.display.scroller.scrollTop!=y&&(A.display.scroller.scrollTop=y))}function Ql(A,y,I,O){y=Math.max(0,Math.min(y,A.display.scroller.scrollWidth-A.display.scroller.clientWidth)),!((I?y==A.doc.scrollLeft:Math.abs(A.doc.scrollLeft-y)<2)&&!O)&&(A.doc.scrollLeft=y,xd(A),A.display.scroller.scrollLeft!=y&&(A.display.scroller.scrollLeft=y),A.display.scrollbars.setScrollLeft(y))}function SA(A){var y=A.display,I=y.gutters.offsetWidth,O=Math.round(A.doc.height+Zd(A.display));return{clientHeight:y.scroller.clientHeight,viewHeight:y.wrapper.clientHeight,scrollWidth:y.scroller.scrollWidth,clientWidth:y.scroller.clientWidth,viewWidth:y.wrapper.clientWidth,barLeft:A.options.fixedGutter?I:0,docHeight:O,scrollHeight:O+au(A)+y.barHeight,nativeBarWidth:y.nativeBarWidth,gutterWidth:I}}var fl=function(A,y,I){this.cm=I;var O=this.vert=ge("div",[ge("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),D=this.horiz=ge("div",[ge("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");O.tabIndex=D.tabIndex=-1,A(O),A(D),Ne(O,"scroll",function(){O.clientHeight&&y(O.scrollTop,"vertical")}),Ne(D,"scroll",function(){D.clientWidth&&y(D.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,d&&g<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};fl.prototype.update=function(A){var y=A.scrollWidth>A.clientWidth+1,I=A.scrollHeight>A.clientHeight+1,O=A.nativeBarWidth;if(I){this.vert.style.display="block",this.vert.style.bottom=y?O+"px":"0";var D=A.viewHeight-(y?O:0);this.vert.firstChild.style.height=Math.max(0,A.scrollHeight-A.clientHeight+D)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(y){this.horiz.style.display="block",this.horiz.style.right=I?O+"px":"0",this.horiz.style.left=A.barLeft+"px";var Z=A.viewWidth-A.barLeft-(I?O:0);this.horiz.firstChild.style.width=Math.max(0,A.scrollWidth-A.clientWidth+Z)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&A.clientHeight>0&&(O==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:I?O:0,bottom:y?O:0}},fl.prototype.setScrollLeft=function(A){this.horiz.scrollLeft!=A&&(this.horiz.scrollLeft=A),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},fl.prototype.setScrollTop=function(A){this.vert.scrollTop!=A&&(this.vert.scrollTop=A),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},fl.prototype.zeroWidthHack=function(){var A=$&&!j?"12px":"18px";this.horiz.style.height=this.vert.style.width=A,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Be,this.disableVert=new Be},fl.prototype.enableZeroWidthBar=function(A,y,I){A.style.visibility="";function O(){var D=A.getBoundingClientRect(),Z=I=="vert"?document.elementFromPoint(D.right-1,(D.top+D.bottom)/2):document.elementFromPoint((D.right+D.left)/2,D.bottom-1);Z!=A?A.style.visibility="hidden":y.set(1e3,O)}y.set(1e3,O)},fl.prototype.clear=function(){var A=this.horiz.parentNode;A.removeChild(this.horiz),A.removeChild(this.vert)};var nc=function(){};nc.prototype.update=function(){return{bottom:0,right:0}},nc.prototype.setScrollLeft=function(){},nc.prototype.setScrollTop=function(){},nc.prototype.clear=function(){};function Wu(A,y){y||(y=SA(A));var I=A.display.barWidth,O=A.display.barHeight;_d(A,y);for(var D=0;D<4&&I!=A.display.barWidth||O!=A.display.barHeight;D++)I!=A.display.barWidth&&A.options.lineWrapping&&Vc(A),_d(A,SA(A)),I=A.display.barWidth,O=A.display.barHeight}function _d(A,y){var I=A.display,O=I.scrollbars.update(y);I.sizer.style.paddingRight=(I.barWidth=O.right)+"px",I.sizer.style.paddingBottom=(I.barHeight=O.bottom)+"px",I.heightForcer.style.borderBottom=O.bottom+"px solid transparent",O.right&&O.bottom?(I.scrollbarFiller.style.display="block",I.scrollbarFiller.style.height=O.bottom+"px",I.scrollbarFiller.style.width=O.right+"px"):I.scrollbarFiller.style.display="",O.bottom&&A.options.coverGutterNextToScrollbar&&A.options.fixedGutter?(I.gutterFiller.style.display="block",I.gutterFiller.style.height=O.bottom+"px",I.gutterFiller.style.width=y.gutterWidth+"px"):I.gutterFiller.style.display=""}var Gu={native:fl,null:nc};function ih(A){A.display.scrollbars&&(A.display.scrollbars.clear(),A.display.scrollbars.addClass&&pe(A.display.wrapper,A.display.scrollbars.addClass)),A.display.scrollbars=new Gu[A.options.scrollbarStyle](function(y){A.display.wrapper.insertBefore(y,A.display.scrollbarFiller),Ne(y,"mousedown",function(){A.state.focused&&setTimeout(function(){return A.display.input.focus()},0)}),y.setAttribute("cm-not-content","true")},function(y,I){I=="horizontal"?Ql(A,y):Nu(A,y)},A),A.display.scrollbars.addClass&&Ce(A.display.wrapper,A.display.scrollbars.addClass)}var rc=0;function Qu(A){A.curOp={cm:A,viewChanged:!1,startHeight:A.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++rc,markArrays:null},jc(A.curOp)}function qu(A){var y=A.curOp;y&&zf(y,function(I){for(var O=0;O<I.ops.length;O++)I.ops[O].cm.curOp=null;EA(I)})}function EA(A){for(var y=A.ops,I=0;I<y.length;I++)wc(y[I]);for(var O=0;O<y.length;O++)xu(y[O]);for(var D=0;D<y.length;D++)Xc(y[D]);for(var Z=0;Z<y.length;Z++)ot(y[Z]);for(var Ae=0;Ae<y.length;Ae++)Na(y[Ae])}function wc(A){var y=A.cm,I=y.display;qs(y),A.updateMaxLine&&va(y),A.mustUpdate=A.viewChanged||A.forceUpdate||A.scrollTop!=null||A.scrollToPos&&(A.scrollToPos.from.line<I.viewFrom||A.scrollToPos.to.line>=I.viewTo)||I.maxLineChanged&&y.options.lineWrapping,A.update=A.mustUpdate&&new Ia(y,A.mustUpdate&&{top:A.scrollTop,ensure:A.scrollToPos},A.forceUpdate)}function xu(A){A.updatedDisplay=A.mustUpdate&&Os(A.cm,A.update)}function Xc(A){var y=A.cm,I=y.display;A.updatedDisplay&&Vc(y),A.barMeasure=SA(y),I.maxLineChanged&&!y.options.lineWrapping&&(A.adjustWidthTo=gd(y,I.maxLine,I.maxLine.text.length).left+3,y.display.sizerWidth=A.adjustWidthTo,A.barMeasure.scrollWidth=Math.max(I.scroller.clientWidth,I.sizer.offsetLeft+A.adjustWidthTo+au(y)+y.display.barWidth),A.maxScrollLeft=Math.max(0,I.sizer.offsetLeft+A.adjustWidthTo-Il(y))),(A.updatedDisplay||A.selectionChanged)&&(A.preparedSelection=I.input.prepareSelection())}function ot(A){var y=A.cm;A.adjustWidthTo!=null&&(y.display.sizer.style.minWidth=A.adjustWidthTo+"px",A.maxScrollLeft<y.doc.scrollLeft&&Ql(y,Math.min(y.display.scroller.scrollLeft,A.maxScrollLeft),!0),y.display.maxLineChanged=!1);var I=A.focus&&A.focus==We(_t(y));A.preparedSelection&&y.display.input.showSelection(A.preparedSelection,I),(A.updatedDisplay||A.startHeight!=y.doc.height)&&Wu(y,A.barMeasure),A.updatedDisplay&&ic(y,A.barMeasure),A.selectionChanged&&MA(y),y.state.focused&&A.updateInput&&y.display.input.reset(A.typing),I&&JA(A.cm)}function Na(A){var y=A.cm,I=y.display,O=y.doc;if(A.updatedDisplay&&vr(y,A.update),I.wheelStartX!=null&&(A.scrollTop!=null||A.scrollLeft!=null||A.scrollToPos)&&(I.wheelStartX=I.wheelStartY=null),A.scrollTop!=null&&tc(y,A.scrollTop,A.forceScroll),A.scrollLeft!=null&&Ql(y,A.scrollLeft,!0,!0),A.scrollToPos){var D=rh(y,ii(O,A.scrollToPos.from),ii(O,A.scrollToPos.to),A.scrollToPos.margin);Hc(y,D)}var Z=A.maybeHiddenMarkers,Ae=A.maybeUnhiddenMarkers;if(Z)for(var be=0;be<Z.length;++be)Z[be].lines.length||dt(Z[be],"hide");if(Ae)for(var Te=0;Te<Ae.length;++Te)Ae[Te].lines.length&&dt(Ae[Te],"unhide");I.wrapper.offsetHeight&&(O.scrollTop=y.display.scroller.scrollTop),A.changeObjs&&dt(y,"changes",y,A.changeObjs),A.update&&A.update.finish()}function Oo(A,y){if(A.curOp)return y();Qu(A);try{return y()}finally{qu(A)}}function Ki(A,y){return function(){if(A.curOp)return y.apply(A,arguments);Qu(A);try{return y.apply(A,arguments)}finally{qu(A)}}}function Vr(A){return function(){if(this.curOp)return A.apply(this,arguments);Qu(this);try{return A.apply(this,arguments)}finally{qu(this)}}}function Bs(A){return function(){var y=this.cm;if(!y||y.curOp)return A.apply(this,arguments);Qu(y);try{return A.apply(this,arguments)}finally{qu(y)}}}function bd(A,y){A.doc.highlightFrontier<A.display.viewTo&&A.state.highlight.set(y,Tt(oh,A))}function oh(A){var y=A.doc;if(!(y.highlightFrontier>=A.display.viewTo)){var I=+new Date+A.options.workTime,O=Lr(A,y.highlightFrontier),D=[];y.iter(O.line,Math.min(y.first+y.size,A.display.viewTo+500),function(Z){if(O.line>=A.display.viewFrom){var Ae=Z.styles,be=Z.text.length>A.options.maxHighlightLength?lo(y.mode,O.state):null,Te=aA(A,Z,O,!0);be&&(O.state=be),Z.styles=Te.styles;var je=Z.styleClasses,yt=Te.classes;yt?Z.styleClasses=yt:je&&(Z.styleClasses=null);for(var St=!Ae||Ae.length!=Z.styles.length||je!=yt&&(!je||!yt||je.bgClass!=yt.bgClass||je.textClass!=yt.textClass),Jt=0;!St&&Jt<Ae.length;++Jt)St=Ae[Jt]!=Z.styles[Jt];St&&D.push(O.line),Z.stateAfter=O.save(),O.nextLine()}else Z.text.length<=A.options.maxHighlightLength&&Bi(A,Z.text,O),Z.stateAfter=O.line%5==0?O.save():null,O.nextLine();if(+new Date>I)return bd(A,A.options.workDelay),!0}),y.highlightFrontier=O.line,y.modeFrontier=Math.max(y.modeFrontier,O.line),D.length&&Oo(A,function(){for(var Z=0;Z<D.length;Z++)_c(A,D[Z],"text")})}}var Ia=function(A,y,I){var O=A.display;this.viewport=y,this.visible=ju(O,A.doc,y),this.editorIsHidden=!O.wrapper.offsetWidth,this.wrapperHeight=O.wrapper.clientHeight,this.wrapperWidth=O.wrapper.clientWidth,this.oldDisplayWidth=Il(A),this.force=I,this.dims=HA(A),this.events=[]};Ia.prototype.signal=function(A,y){Vt(A,y)&&this.events.push(arguments)},Ia.prototype.finish=function(){for(var A=0;A<this.events.length;A++)dt.apply(null,this.events[A])};function qs(A){var y=A.display;!y.scrollbarsClipped&&y.scroller.offsetWidth&&(y.nativeBarWidth=y.scroller.offsetWidth-y.scroller.clientWidth,y.heightForcer.style.height=au(A)+"px",y.sizer.style.marginBottom=-y.nativeBarWidth+"px",y.sizer.style.borderRightWidth=au(A)+"px",y.scrollbarsClipped=!0)}function bs(A){if(A.hasFocus())return null;var y=We(_t(A));if(!y||!Ze(A.display.lineDiv,y))return null;var I={activeElt:y};if(window.getSelection){var O=Dt(A).getSelection();O.anchorNode&&O.extend&&Ze(A.display.lineDiv,O.anchorNode)&&(I.anchorNode=O.anchorNode,I.anchorOffset=O.anchorOffset,I.focusNode=O.focusNode,I.focusOffset=O.focusOffset)}return I}function dA(A){if(!(!A||!A.activeElt||A.activeElt==We(ft(A.activeElt)))&&(A.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(A.activeElt.nodeName)&&A.anchorNode&&Ze(document.body,A.anchorNode)&&Ze(document.body,A.focusNode))){var y=A.activeElt.ownerDocument,I=y.defaultView.getSelection(),O=y.createRange();O.setEnd(A.anchorNode,A.anchorOffset),O.collapse(!1),I.removeAllRanges(),I.addRange(O),I.extend(A.focusNode,A.focusOffset)}}function Os(A,y){var I=A.display,O=A.doc;if(y.editorIsHidden)return bu(A),!1;if(!y.force&&y.visible.from>=I.viewFrom&&y.visible.to<=I.viewTo&&(I.updateLineNumbers==null||I.updateLineNumbers>=I.viewTo)&&I.renderedView==I.view&&th(A)==0)return!1;wd(A)&&(bu(A),y.dims=HA(A));var D=O.first+O.size,Z=Math.max(y.visible.from-A.options.viewportMargin,O.first),Ae=Math.min(D,y.visible.to+A.options.viewportMargin);I.viewFrom<Z&&Z-I.viewFrom<20&&(Z=Math.max(O.first,I.viewFrom)),I.viewTo>Ae&&I.viewTo-Ae<20&&(Ae=Math.min(D,I.viewTo)),gs&&(Z=Bo(A.doc,Z),Ae=Ti(A.doc,Ae));var be=Z!=I.viewFrom||Ae!=I.viewTo||I.lastWrapHeight!=y.wrapperHeight||I.lastWrapWidth!=y.wrapperWidth;Yc(A,Z,Ae),I.viewOffset=Xi(Fr(A.doc,I.viewFrom)),A.display.mover.style.top=I.viewOffset+"px";var Te=th(A);if(!be&&Te==0&&!y.force&&I.renderedView==I.view&&(I.updateLineNumbers==null||I.updateLineNumbers>=I.viewTo))return!1;var je=bs(A);return Te>4&&(I.lineDiv.style.display="none"),Jc(A,I.updateLineNumbers,y.dims),Te>4&&(I.lineDiv.style.display=""),I.renderedView=I.view,dA(je),we(I.cursorDiv),we(I.selectionDiv),I.gutters.style.height=I.sizer.style.minHeight=0,be&&(I.lastWrapHeight=y.wrapperHeight,I.lastWrapWidth=y.wrapperWidth,bd(A,400)),I.updateLineNumbers=null,!0}function vr(A,y){for(var I=y.viewport,O=!0;;O=!1){if(!O||!A.options.lineWrapping||y.oldDisplayWidth==Il(A)){if(I&&I.top!=null&&(I={top:Math.min(A.doc.height+Zd(A.display)-YA(A),I.top)}),y.visible=ju(A.display,A.doc,I),y.visible.from>=A.display.viewFrom&&y.visible.to<=A.display.viewTo)break}else O&&(y.visible=ju(A.display,A.doc,I));if(!Os(A,y))break;Vc(A);var D=SA(A);ja(A),Wu(A,D),ic(A,D),y.force=!1}y.signal(A,"update",A),(A.display.viewFrom!=A.display.reportedViewFrom||A.display.viewTo!=A.display.reportedViewTo)&&(y.signal(A,"viewportChange",A,A.display.viewFrom,A.display.viewTo),A.display.reportedViewFrom=A.display.viewFrom,A.display.reportedViewTo=A.display.viewTo)}function Ca(A,y){var I=new Ia(A,y);if(Os(A,I)){Vc(A),vr(A,I);var O=SA(A);ja(A),Wu(A,O),ic(A,O),I.finish()}}function Jc(A,y,I){var O=A.display,D=A.options.lineNumbers,Z=O.lineDiv,Ae=Z.firstChild;function be(En){var Fn=En.nextSibling;return b&&$&&A.display.currentWheelTarget==En?En.style.display="none":En.parentNode.removeChild(En),Fn}for(var Te=O.view,je=O.viewFrom,yt=0;yt<Te.length;yt++){var St=Te[yt];if(!St.hidden)if(!St.node||St.node.parentNode!=Z){var Jt=pm(A,St,je,I);Z.insertBefore(Jt,Ae)}else{for(;Ae!=St.node;)Ae=be(Ae);var qt=D&&y!=null&&y<=je&&St.lineNumber;St.changes&&(nt(St.changes,"gutter")>-1&&(qt=!1),sf(A,St,je,I)),qt&&(we(St.lineNumber),St.lineNumber.appendChild(document.createTextNode($n(A.options,je)))),Ae=St.node.nextSibling}je+=St.size}for(;Ae;)Ae=be(Ae)}function ka(A){var y=A.gutters.offsetWidth;A.sizer.style.marginLeft=y+"px",Xs(A,"gutterChanged",A)}function ic(A,y){A.display.sizer.style.minHeight=y.docHeight+"px",A.display.heightForcer.style.top=y.docHeight+"px",A.display.gutters.style.height=y.docHeight+A.display.barHeight+au(A)+"px"}function xd(A){var y=A.display,I=y.view;if(!(!y.alignWidgets&&(!y.gutters.firstChild||!A.options.fixedGutter))){for(var O=zo(y)-y.scroller.scrollLeft+A.doc.scrollLeft,D=y.gutters.offsetWidth,Z=O+"px",Ae=0;Ae<I.length;Ae++)if(!I[Ae].hidden){A.options.fixedGutter&&(I[Ae].gutter&&(I[Ae].gutter.style.left=Z),I[Ae].gutterBackground&&(I[Ae].gutterBackground.style.left=Z));var be=I[Ae].alignable;if(be)for(var Te=0;Te<be.length;Te++)be[Te].style.left=Z}A.options.fixedGutter&&(y.gutters.style.left=O+D+"px")}}function wd(A){if(!A.options.lineNumbers)return!1;var y=A.doc,I=$n(A.options,y.first+y.size-1),O=A.display;if(I.length!=O.lineNumChars){var D=O.measure.appendChild(ge("div",[ge("div",I)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Z=D.firstChild.offsetWidth,Ae=D.offsetWidth-Z;return O.lineGutter.style.width="",O.lineNumInnerWidth=Math.max(Z,O.lineGutter.offsetWidth-Ae)+1,O.lineNumWidth=O.lineNumInnerWidth+Ae,O.lineNumChars=O.lineNumInnerWidth?I.length:-1,O.lineGutter.style.width=O.lineNumWidth+"px",ka(A.display),!0}return!1}function Si(A,y){for(var I=[],O=!1,D=0;D<A.length;D++){var Z=A[D],Ae=null;if(typeof Z!="string"&&(Ae=Z.style,Z=Z.className),Z=="CodeMirror-linenumbers")if(y)O=!0;else continue;I.push({className:Z,style:Ae})}return y&&!O&&I.push({className:"CodeMirror-linenumbers",style:null}),I}function Md(A){var y=A.gutters,I=A.gutterSpecs;we(y),A.lineGutter=null;for(var O=0;O<I.length;++O){var D=I[O],Z=D.className,Ae=D.style,be=y.appendChild(ge("div",null,"CodeMirror-gutter "+Z));Ae&&(be.style.cssText=Ae),Z=="CodeMirror-linenumbers"&&(A.lineGutter=be,be.style.width=(A.lineNumWidth||1)+"px")}y.style.display=I.length?"":"none",ka(A)}function ql(A){Md(A.display),Rl(A),xd(A)}function Sd(A,y,I,O){var D=this;this.input=I,D.scrollbarFiller=ge("div",null,"CodeMirror-scrollbar-filler"),D.scrollbarFiller.setAttribute("cm-not-content","true"),D.gutterFiller=ge("div",null,"CodeMirror-gutter-filler"),D.gutterFiller.setAttribute("cm-not-content","true"),D.lineDiv=st("div",null,"CodeMirror-code"),D.selectionDiv=ge("div",null,null,"position: relative; z-index: 1"),D.cursorDiv=ge("div",null,"CodeMirror-cursors"),D.measure=ge("div",null,"CodeMirror-measure"),D.lineMeasure=ge("div",null,"CodeMirror-measure"),D.lineSpace=st("div",[D.measure,D.lineMeasure,D.selectionDiv,D.cursorDiv,D.lineDiv],null,"position: relative; outline: none");var Z=st("div",[D.lineSpace],"CodeMirror-lines");D.mover=ge("div",[Z],null,"position: relative"),D.sizer=ge("div",[D.mover],"CodeMirror-sizer"),D.sizerWidth=null,D.heightForcer=ge("div",null,null,"position: absolute; height: "+Ct+"px; width: 1px;"),D.gutters=ge("div",null,"CodeMirror-gutters"),D.lineGutter=null,D.scroller=ge("div",[D.sizer,D.heightForcer,D.gutters],"CodeMirror-scroll"),D.scroller.setAttribute("tabIndex","-1"),D.wrapper=ge("div",[D.scrollbarFiller,D.gutterFiller,D.scroller],"CodeMirror"),S&&B>=105&&(D.wrapper.style.clipPath="inset(0px)"),D.wrapper.setAttribute("translate","no"),d&&g<8&&(D.gutters.style.zIndex=-1,D.scroller.style.paddingRight=0),!b&&!(i&&J)&&(D.scroller.draggable=!0),A&&(A.appendChild?A.appendChild(D.wrapper):A(D.wrapper)),D.viewFrom=D.viewTo=y.first,D.reportedViewFrom=D.reportedViewTo=y.first,D.view=[],D.renderedView=null,D.externalMeasured=null,D.viewOffset=0,D.lastWrapHeight=D.lastWrapWidth=0,D.updateLineNumbers=null,D.nativeBarWidth=D.barHeight=D.barWidth=0,D.scrollbarsClipped=!1,D.lineNumWidth=D.lineNumInnerWidth=D.lineNumChars=null,D.alignWidgets=!1,D.cachedCharWidth=D.cachedTextHeight=D.cachedPaddingH=null,D.maxLine=null,D.maxLineLength=0,D.maxLineChanged=!1,D.wheelDX=D.wheelDY=D.wheelStartX=D.wheelStartY=null,D.shift=!1,D.selForContextMenu=null,D.activeTouch=null,D.gutterSpecs=Si(O.gutters,O.lineNumbers),Md(D),I.init(D)}var Ed=0,BA=null;d?BA=-.53:i?BA=15:S?BA=-.7:z&&(BA=-1/3);function oc(A){var y=A.wheelDeltaX,I=A.wheelDeltaY;return y==null&&A.detail&&A.axis==A.HORIZONTAL_AXIS&&(y=A.detail),I==null&&A.detail&&A.axis==A.VERTICAL_AXIS?I=A.detail:I==null&&(I=A.wheelDelta),{x:y,y:I}}function hA(A){var y=oc(A);return y.x*=BA,y.y*=BA,y}function Mc(A,y){S&&B==102&&(A.display.chromeScrollHack==null?A.display.sizer.style.pointerEvents="none":clearTimeout(A.display.chromeScrollHack),A.display.chromeScrollHack=setTimeout(function(){A.display.chromeScrollHack=null,A.display.sizer.style.pointerEvents=""},100));var I=oc(y),O=I.x,D=I.y,Z=BA;y.deltaMode===0&&(O=y.deltaX,D=y.deltaY,Z=1);var Ae=A.display,be=Ae.scroller,Te=be.scrollWidth>be.clientWidth,je=be.scrollHeight>be.clientHeight;if(O&&Te||D&&je){if(D&&$&&b){e:for(var yt=y.target,St=Ae.view;yt!=be;yt=yt.parentNode)for(var Jt=0;Jt<St.length;Jt++)if(St[Jt].node==yt){A.display.currentWheelTarget=yt;break e}}if(O&&!i&&!k&&Z!=null){D&&je&&Nu(A,Math.max(0,be.scrollTop+D*Z)),Ql(A,Math.max(0,be.scrollLeft+O*Z)),(!D||D&&je)&&wt(y),Ae.wheelStartX=null;return}if(D&&Z!=null){var qt=D*Z,En=A.doc.scrollTop,Fn=En+Ae.wrapper.clientHeight;qt<0?En=Math.max(0,En+qt-50):Fn=Math.min(A.doc.height,Fn+qt+50),Ca(A,{top:En,bottom:Fn})}Ed<20&&y.deltaMode!==0&&(Ae.wheelStartX==null?(Ae.wheelStartX=be.scrollLeft,Ae.wheelStartY=be.scrollTop,Ae.wheelDX=O,Ae.wheelDY=D,setTimeout(function(){if(Ae.wheelStartX!=null){var Jn=be.scrollLeft-Ae.wheelStartX,sr=be.scrollTop-Ae.wheelStartY,xr=sr&&Ae.wheelDY&&sr/Ae.wheelDY||Jn&&Ae.wheelDX&&Jn/Ae.wheelDX;Ae.wheelStartX=Ae.wheelStartY=null,xr&&(BA=(BA*Ed+xr)/(Ed+1),++Ed)}},200)):(Ae.wheelDX+=O,Ae.wheelDY+=D))}}var Is=function(A,y){this.ranges=A,this.primIndex=y};Is.prototype.primary=function(){return this.ranges[this.primIndex]},Is.prototype.equals=function(A){if(A==this)return!0;if(A.primIndex!=this.primIndex||A.ranges.length!=this.ranges.length)return!1;for(var y=0;y<this.ranges.length;y++){var I=this.ranges[y],O=A.ranges[y];if(!Ri(I.anchor,O.anchor)||!Ri(I.head,O.head))return!1}return!0},Is.prototype.deepCopy=function(){for(var A=[],y=0;y<this.ranges.length;y++)A[y]=new xo(fo(this.ranges[y].anchor),fo(this.ranges[y].head));return new Is(A,this.primIndex)},Is.prototype.somethingSelected=function(){for(var A=0;A<this.ranges.length;A++)if(!this.ranges[A].empty())return!0;return!1},Is.prototype.contains=function(A,y){y||(y=A);for(var I=0;I<this.ranges.length;I++){var O=this.ranges[I];if(ar(y,O.from())>=0&&ar(A,O.to())<=0)return I}return-1};var xo=function(A,y){this.anchor=A,this.head=y};xo.prototype.from=function(){return Gs(this.anchor,this.head)},xo.prototype.to=function(){return _s(this.anchor,this.head)},xo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function wu(A,y,I){var O=A&&A.options.selectionsMayTouch,D=y[I];y.sort(function(Jt,qt){return ar(Jt.from(),qt.from())}),I=nt(y,D);for(var Z=1;Z<y.length;Z++){var Ae=y[Z],be=y[Z-1],Te=ar(be.to(),Ae.from());if(O&&!Ae.empty()?Te>0:Te>=0){var je=Gs(be.from(),Ae.from()),yt=_s(be.to(),Ae.to()),St=be.empty()?Ae.from()==Ae.head:be.from()==be.head;Z<=I&&--I,y.splice(--Z,2,new xo(St?yt:je,St?je:yt))}}return new Is(y,I)}function Wa(A,y){return new Is([new xo(A,y||A)],0)}function Fs(A){return A.text?dn(A.from.line+A.text.length-1,or(A.text).length+(A.text.length==1?A.from.ch:0)):A.to}function Xo(A,y){if(ar(A,y.from)<0)return A;if(ar(A,y.to)<=0)return Fs(y);var I=A.line+y.text.length-(y.to.line-y.from.line)-1,O=A.ch;return A.line==y.to.line&&(O+=Fs(y).ch-y.to.ch),dn(I,O)}function lu(A,y){for(var I=[],O=0;O<A.sel.ranges.length;O++){var D=A.sel.ranges[O];I.push(new xo(Xo(D.anchor,y),Xo(D.head,y)))}return wu(A.cm,I,A.sel.primIndex)}function Yu(A,y,I){return A.line==y.line?dn(I.line,A.ch-y.ch+I.ch):dn(I.line+(A.line-y.line),A.ch)}function Sc(A,y,I){for(var O=[],D=dn(A.first,0),Z=D,Ae=0;Ae<y.length;Ae++){var be=y[Ae],Te=Yu(be.from,D,Z),je=Yu(Fs(be),D,Z);if(D=be.to,Z=je,I=="around"){var yt=A.sel.ranges[Ae],St=ar(yt.head,yt.anchor)<0;O[Ae]=new xo(St?je:Te,St?Te:je)}else O[Ae]=new xo(Te,Te)}return new Is(O,A.sel.primIndex)}function sh(A){A.doc.mode=rs(A.options,A.doc.modeOption),OA(A)}function OA(A){A.doc.iter(function(y){y.stateAfter&&(y.stateAfter=null),y.styles&&(y.styles=null)}),A.doc.modeFrontier=A.doc.highlightFrontier=A.doc.first,bd(A,100),A.state.modeGen++,A.curOp&&Rl(A)}function Ec(A,y){return y.from.ch==0&&y.to.ch==0&&or(y.text)==""&&(!A.cm||A.cm.options.wholeLineUpdateBefore)}function ys(A,y,I,O){function D(xr){return I?I[xr]:null}function Z(xr,hr,Ur){gu(xr,hr,Ur,O),Xs(xr,"change",xr,y)}function Ae(xr,hr){for(var Ur=[],li=xr;li<hr;++li)Ur.push(new za(je[li],D(li),O));return Ur}var be=y.from,Te=y.to,je=y.text,yt=Fr(A,be.line),St=Fr(A,Te.line),Jt=or(je),qt=D(je.length-1),En=Te.line-be.line;if(y.full)A.insert(0,Ae(0,je.length)),A.remove(je.length,A.size-je.length);else if(Ec(A,y)){var Fn=Ae(0,je.length-1);Z(St,St.text,qt),En&&A.remove(be.line,En),Fn.length&&A.insert(be.line,Fn)}else if(yt==St)if(je.length==1)Z(yt,yt.text.slice(0,be.ch)+Jt+yt.text.slice(Te.ch),qt);else{var Jn=Ae(1,je.length-1);Jn.push(new za(Jt+yt.text.slice(Te.ch),qt,O)),Z(yt,yt.text.slice(0,be.ch)+je[0],D(0)),A.insert(be.line+1,Jn)}else if(je.length==1)Z(yt,yt.text.slice(0,be.ch)+je[0]+St.text.slice(Te.ch),D(0)),A.remove(be.line+1,En);else{Z(yt,yt.text.slice(0,be.ch)+je[0],D(0)),Z(St,Jt+St.text.slice(Te.ch),qt);var sr=Ae(1,je.length-1);En>1&&A.remove(be.line+1,En-1),A.insert(be.line+1,sr)}Xs(A,"change",A,y)}function ha(A,y,I){function O(D,Z,Ae){if(D.linked)for(var be=0;be<D.linked.length;++be){var Te=D.linked[be];if(Te.doc!=Z){var je=Ae&&Te.sharedHist;I&&!je||(y(Te.doc,je),O(Te.doc,D,je))}}}O(A,null,!0)}function yr(A,y){if(y.cm)throw new Error("This document is already in use.");A.doc=y,y.cm=A,ZA(A),sh(A),Zr(A),A.options.direction=y.direction,A.options.lineWrapping||va(A),A.options.mode=y.modeOption,Rl(A)}function Zr(A){(A.doc.direction=="rtl"?Ce:pe)(A.display.lineDiv,"CodeMirror-rtl")}function $u(A){Oo(A,function(){Zr(A),Rl(A)})}function sc(A){this.done=[],this.undone=[],this.undoDepth=A?A.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=A?A.maxGeneration:1}function Mu(A,y){var I={from:fo(y.from),to:Fs(y),text:Ja(A,y.from,y.to)};return ks(A,I,y.from.line,y.to.line+1),ha(A,function(O){return ks(O,I,y.from.line,y.to.line+1)},!0),I}function xs(A){for(;A.length;){var y=or(A);if(y.ranges)A.pop();else break}}function Wf(A,y){if(y)return xs(A.done),or(A.done);if(A.done.length&&!or(A.done).ranges)return or(A.done);if(A.done.length>1&&!A.done[A.done.length-2].ranges)return A.done.pop(),or(A.done)}function uu(A,y,I,O){var D=A.history;D.undone.length=0;var Z=+new Date,Ae,be;if((D.lastOp==O||D.lastOrigin==y.origin&&y.origin&&(y.origin.charAt(0)=="+"&&D.lastModTime>Z-(A.cm?A.cm.options.historyEventDelay:500)||y.origin.charAt(0)=="*"))&&(Ae=Wf(D,D.lastOp==O)))be=or(Ae.changes),ar(y.from,y.to)==0&&ar(y.from,be.to)==0?be.to=Fs(y):Ae.changes.push(Mu(A,y));else{var Te=or(D.done);for((!Te||!Te.ranges)&&Ro(A.sel,D.done),Ae={changes:[Mu(A,y)],generation:D.generation},D.done.push(Ae);D.done.length>D.undoDepth;)D.done.shift(),D.done[0].ranges||D.done.shift()}D.done.push(I),D.generation=++D.maxGeneration,D.lastModTime=D.lastSelTime=Z,D.lastOp=D.lastSelOp=O,D.lastOrigin=D.lastSelOrigin=y.origin,be||dt(A,"historyAdded")}function Gf(A,y,I,O){var D=y.charAt(0);return D=="*"||D=="+"&&I.ranges.length==O.ranges.length&&I.somethingSelected()==O.somethingSelected()&&new Date-A.history.lastSelTime<=(A.cm?A.cm.options.historyEventDelay:500)}function Su(A,y,I,O){var D=A.history,Z=O&&O.origin;I==D.lastSelOp||Z&&D.lastSelOrigin==Z&&(D.lastModTime==D.lastSelTime&&D.lastOrigin==Z||Gf(A,Z,or(D.done),y))?D.done[D.done.length-1]=y:Ro(y,D.done),D.lastSelTime=+new Date,D.lastSelOrigin=Z,D.lastSelOp=I,O&&O.clearRedo!==!1&&xs(D.undone)}function Ro(A,y){var I=or(y);I&&I.ranges&&I.equals(A)||y.push(A)}function ks(A,y,I,O){var D=y["spans_"+A.id],Z=0;A.iter(Math.max(A.first,I),Math.min(A.first+A.size,O),function(Ae){Ae.markedSpans&&((D||(D=y["spans_"+A.id]={}))[Z]=Ae.markedSpans),++Z})}function ah(A){if(!A)return null;for(var y,I=0;I<A.length;++I)A[I].marker.explicitlyCleared?y||(y=A.slice(0,I)):y&&y.push(A[I]);return y?y.length?y:null:A}function IA(A,y){var I=y["spans_"+A.id];if(!I)return null;for(var O=[],D=0;D<y.text.length;++D)O.push(ah(I[D]));return O}function lh(A,y){var I=IA(A,y),O=ei(A,y);if(!I)return O;if(!O)return I;for(var D=0;D<I.length;++D){var Z=I[D],Ae=O[D];if(Z&&Ae)e:for(var be=0;be<Ae.length;++be){for(var Te=Ae[be],je=0;je<Z.length;++je)if(Z[je].marker==Te.marker)continue e;Z.push(Te)}else Ae&&(I[D]=Ae)}return I}function kA(A,y,I){for(var O=[],D=0;D<A.length;++D){var Z=A[D];if(Z.ranges){O.push(I?Is.prototype.deepCopy.call(Z):Z);continue}var Ae=Z.changes,be=[];O.push({changes:be});for(var Te=0;Te<Ae.length;++Te){var je=Ae[Te],yt=void 0;if(be.push({from:je.from,to:je.to,text:je.text}),y)for(var St in je)(yt=St.match(/^spans_(\d+)$/))&&nt(y,Number(yt[1]))>-1&&(or(be)[St]=je[St],delete je[St])}}return O}function Ys(A,y,I,O){if(O){var D=A.anchor;if(I){var Z=ar(y,D)<0;Z!=ar(I,D)<0?(D=y,y=I):Z!=ar(y,I)<0&&(y=I)}return new xo(D,y)}else return new xo(I||y,y)}function Bc(A,y,I,O,D){D==null&&(D=A.cm&&(A.cm.display.shift||A.extend)),_a(A,new Is([Ys(A.sel.primary(),y,I,D)],0),O)}function Yl(A,y,I){for(var O=[],D=A.cm&&(A.cm.display.shift||A.extend),Z=0;Z<A.sel.ranges.length;Z++)O[Z]=Ys(A.sel.ranges[Z],y[Z],null,D);var Ae=wu(A.cm,O,A.sel.primIndex);_a(A,Ae,I)}function pl(A,y,I,O){var D=A.sel.ranges.slice(0);D[y]=I,_a(A,wu(A.cm,D,A.sel.primIndex),O)}function Vu(A,y,I,O){_a(A,Wa(y,I),O)}function Oc(A,y,I){var O={ranges:y.ranges,update:function(D){this.ranges=[];for(var Z=0;Z<D.length;Z++)this.ranges[Z]=new xo(ii(A,D[Z].anchor),ii(A,D[Z].head))},origin:I&&I.origin};return dt(A,"beforeSelectionChange",A,O),A.cm&&dt(A.cm,"beforeSelectionChange",A.cm,O),O.ranges!=y.ranges?wu(A.cm,O.ranges,O.ranges.length-1):y}function Eu(A,y,I){var O=A.history.done,D=or(O);D&&D.ranges?(O[O.length-1]=y,Js(A,y,I)):_a(A,y,I)}function _a(A,y,I){Js(A,y,I),Su(A,A.sel,A.cm?A.cm.curOp.id:NaN,I)}function Js(A,y,I){(Vt(A,"beforeSelectionChange")||A.cm&&Vt(A.cm,"beforeSelectionChange"))&&(y=Oc(A,y,I));var O=I&&I.bias||(ar(y.primary().head,A.sel.primary().head)<0?-1:1);Au(A,fA(A,y,O,!0)),!(I&&I.scroll===!1)&&A.cm&&A.cm.getOption("readOnly")!="nocursor"&&jo(A.cm)}function Au(A,y){y.equals(A.sel)||(A.sel=y,A.cm&&(A.cm.curOp.updateInput=1,A.cm.curOp.selectionChanged=!0,Qt(A.cm)),Xs(A,"cursorActivity",A))}function cu(A){Au(A,fA(A,A.sel,null,!1))}function fA(A,y,I,O){for(var D,Z=0;Z<y.ranges.length;Z++){var Ae=y.ranges[Z],be=y.ranges.length==A.sel.ranges.length&&A.sel.ranges[Z],Te=Ic(A,Ae.anchor,be&&be.anchor,I,O),je=Ae.head==Ae.anchor?Te:Ic(A,Ae.head,be&&be.head,I,O);(D||Te!=Ae.anchor||je!=Ae.head)&&(D||(D=y.ranges.slice(0,Z)),D[Z]=new xo(Te,je))}return D?wu(A.cm,D,y.primIndex):y}function Bu(A,y,I,O,D){var Z=Fr(A,y.line);if(Z.markedSpans)for(var Ae=0;Ae<Z.markedSpans.length;++Ae){var be=Z.markedSpans[Ae],Te=be.marker,je="selectLeft"in Te?!Te.selectLeft:Te.inclusiveLeft,yt="selectRight"in Te?!Te.selectRight:Te.inclusiveRight;if((be.from==null||(je?be.from<=y.ch:be.from<y.ch))&&(be.to==null||(yt?be.to>=y.ch:be.to>y.ch))){if(D&&(dt(Te,"beforeCursorEnter"),Te.explicitlyCleared))if(Z.markedSpans){--Ae;continue}else break;if(!Te.atomic)continue;if(I){var St=Te.find(O<0?1:-1),Jt=void 0;if((O<0?yt:je)&&(St=Hu(A,St,-O,St&&St.line==y.line?Z:null)),St&&St.line==y.line&&(Jt=ar(St,I))&&(O<0?Jt<0:Jt>0))return Bu(A,St,y,O,D)}var qt=Te.find(O<0?-1:1);return(O<0?je:yt)&&(qt=Hu(A,qt,O,qt.line==y.line?Z:null)),qt?Bu(A,qt,y,O,D):null}}return y}function Ic(A,y,I,O,D){var Z=O||1,Ae=Bu(A,y,I,Z,D)||!D&&Bu(A,y,I,Z,!0)||Bu(A,y,I,-Z,D)||!D&&Bu(A,y,I,-Z,!0);return Ae||(A.cantEdit=!0,dn(A.first,0))}function Hu(A,y,I,O){return I<0&&y.ch==0?y.line>A.first?ii(A,dn(y.line-1)):null:I>0&&y.ch==(O||Fr(A,y.line)).text.length?y.line<A.first+A.size-1?dn(y.line+1,0):null:new dn(y.line,y.ch+I)}function $l(A){A.setSelection(dn(A.firstLine(),0),dn(A.lastLine()),zt)}function Bd(A,y,I){var O={canceled:!1,from:y.from,to:y.to,text:y.text,origin:y.origin,cancel:function(){return O.canceled=!0}};return I&&(O.update=function(D,Z,Ae,be){D&&(O.from=ii(A,D)),Z&&(O.to=ii(A,Z)),Ae&&(O.text=Ae),be!==void 0&&(O.origin=be)}),dt(A,"beforeChange",A,O),A.cm&&dt(A.cm,"beforeChange",A.cm,O),O.canceled?(A.cm&&(A.cm.curOp.updateInput=2),null):{from:O.from,to:O.to,text:O.text,origin:O.origin}}function T(A,y,I){if(A.cm){if(!A.cm.curOp)return Ki(A.cm,T)(A,y,I);if(A.cm.state.suppressEdits)return}if(!((Vt(A,"beforeChange")||A.cm&&Vt(A.cm,"beforeChange"))&&(y=Bd(A,y,!0),!y))){var O=po&&!I&&Wi(A,y.from,y.to);if(O)for(var D=O.length-1;D>=0;--D)l(A,{from:O[D].from,to:O[D].to,text:D?[""]:y.text,origin:y.origin});else l(A,y)}}function l(A,y){if(!(y.text.length==1&&y.text[0]==""&&ar(y.from,y.to)==0)){var I=lu(A,y);uu(A,y,I,A.cm?A.cm.curOp.id:NaN),M(A,y,I,ei(A,y));var O=[];ha(A,function(D,Z){!Z&&nt(O,D.history)==-1&&(ae(D.history,y),O.push(D.history)),M(D,y,null,ei(D,y))})}}function c(A,y,I){var O=A.cm&&A.cm.state.suppressEdits;if(!(O&&!I)){for(var D=A.history,Z,Ae=A.sel,be=y=="undo"?D.done:D.undone,Te=y=="undo"?D.undone:D.done,je=0;je<be.length&&(Z=be[je],!(I?Z.ranges&&!Z.equals(A.sel):!Z.ranges));je++);if(je!=be.length){for(D.lastOrigin=D.lastSelOrigin=null;;)if(Z=be.pop(),Z.ranges){if(Ro(Z,Te),I&&!Z.equals(A.sel)){_a(A,Z,{clearRedo:!1});return}Ae=Z}else if(O){be.push(Z);return}else break;var yt=[];Ro(Ae,Te),Te.push({changes:yt,generation:D.generation}),D.generation=Z.generation||++D.maxGeneration;for(var St=Vt(A,"beforeChange")||A.cm&&Vt(A.cm,"beforeChange"),Jt=function(Fn){var Jn=Z.changes[Fn];if(Jn.origin=y,St&&!Bd(A,Jn,!1))return be.length=0,{};yt.push(Mu(A,Jn));var sr=Fn?lu(A,Jn):or(be);M(A,Jn,sr,lh(A,Jn)),!Fn&&A.cm&&A.cm.scrollIntoView({from:Jn.from,to:Fs(Jn)});var xr=[];ha(A,function(hr,Ur){!Ur&&nt(xr,hr.history)==-1&&(ae(hr.history,Jn),xr.push(hr.history)),M(hr,Jn,null,lh(hr,Jn))})},qt=Z.changes.length-1;qt>=0;--qt){var En=Jt(qt);if(En)return En.v}}}}function _(A,y){if(y!=0&&(A.first+=y,A.sel=new Is(Kn(A.sel.ranges,function(D){return new xo(dn(D.anchor.line+y,D.anchor.ch),dn(D.head.line+y,D.head.ch))}),A.sel.primIndex),A.cm)){Rl(A.cm,A.first,A.first-y,y);for(var I=A.cm.display,O=I.viewFrom;O<I.viewTo;O++)_c(A.cm,O,"gutter")}}function M(A,y,I,O){if(A.cm&&!A.cm.curOp)return Ki(A.cm,M)(A,y,I,O);if(y.to.line<A.first){_(A,y.text.length-1-(y.to.line-y.from.line));return}if(!(y.from.line>A.lastLine())){if(y.from.line<A.first){var D=y.text.length-1-(A.first-y.from.line);_(A,D),y={from:dn(A.first,0),to:dn(y.to.line+D,y.to.ch),text:[or(y.text)],origin:y.origin}}var Z=A.lastLine();y.to.line>Z&&(y={from:y.from,to:dn(Z,Fr(A,Z).text.length),text:[y.text[0]],origin:y.origin}),y.removed=Ja(A,y.from,y.to),I||(I=lu(A,y)),A.cm?R(A.cm,y,O):ys(A,y,O),Js(A,I,zt),A.cantEdit&&Ic(A,dn(A.firstLine(),0))&&(A.cantEdit=!1)}}function R(A,y,I){var O=A.doc,D=A.display,Z=y.from,Ae=y.to,be=!1,Te=Z.line;A.options.lineWrapping||(Te=Ye(Cr(Fr(O,Z.line))),O.iter(Te,Ae.line+1,function(qt){if(qt==D.maxLine)return be=!0,!0})),O.sel.contains(y.from,y.to)>-1&&Qt(A),ys(O,y,I,qc(A)),A.options.lineWrapping||(O.iter(Te,Z.line+y.text.length,function(qt){var En=As(qt);En>D.maxLineLength&&(D.maxLine=qt,D.maxLineLength=En,D.maxLineChanged=!0,be=!1)}),be&&(A.curOp.updateMaxLine=!0)),Hs(O,Z.line),bd(A,400);var je=y.text.length-(Ae.line-Z.line)-1;y.full?Rl(A):Z.line==Ae.line&&y.text.length==1&&!Ec(A.doc,y)?_c(A,Z.line,"text"):Rl(A,Z.line,Ae.line+1,je);var yt=Vt(A,"changes"),St=Vt(A,"change");if(St||yt){var Jt={from:Z,to:Ae,text:y.text,removed:y.removed,origin:y.origin};St&&Xs(A,"change",A,Jt),yt&&(A.curOp.changeObjs||(A.curOp.changeObjs=[])).push(Jt)}A.display.selForContextMenu=null}function N(A,y,I,O,D){var Z;O||(O=I),ar(O,I)<0&&(Z=[O,I],I=Z[0],O=Z[1]),typeof y=="string"&&(y=A.splitLines(y)),T(A,{from:I,to:O,text:y,origin:D})}function V(A,y,I,O){I<A.line?A.line+=O:y<A.line&&(A.line=y,A.ch=0)}function ne(A,y,I,O){for(var D=0;D<A.length;++D){var Z=A[D],Ae=!0;if(Z.ranges){Z.copied||(Z=A[D]=Z.deepCopy(),Z.copied=!0);for(var be=0;be<Z.ranges.length;be++)V(Z.ranges[be].anchor,y,I,O),V(Z.ranges[be].head,y,I,O);continue}for(var Te=0;Te<Z.changes.length;++Te){var je=Z.changes[Te];if(I<je.from.line)je.from=dn(je.from.line+O,je.from.ch),je.to=dn(je.to.line+O,je.to.ch);else if(y<=je.to.line){Ae=!1;break}}Ae||(A.splice(0,D+1),D=0)}}function ae(A,y){var I=y.from.line,O=y.to.line,D=y.text.length-(O-I)-1;ne(A.done,I,O,D),ne(A.undone,I,O,D)}function Me(A,y,I,O){var D=y,Z=y;return typeof y=="number"?Z=Fr(A,bA(A,y)):D=Ye(y),D==null?null:(O(Z,D)&&A.cm&&_c(A.cm,D,I),Z)}function ke(A){this.lines=A,this.parent=null;for(var y=0,I=0;I<A.length;++I)A[I].parent=this,y+=A[I].height;this.height=y}ke.prototype={chunkSize:function(){return this.lines.length},removeInner:function(A,y){for(var I=A,O=A+y;I<O;++I){var D=this.lines[I];this.height-=D.height,Zs(D),Xs(D,"delete")}this.lines.splice(A,y)},collapse:function(A){A.push.apply(A,this.lines)},insertInner:function(A,y,I){this.height+=I,this.lines=this.lines.slice(0,A).concat(y).concat(this.lines.slice(A));for(var O=0;O<y.length;++O)y[O].parent=this},iterN:function(A,y,I){for(var O=A+y;A<O;++A)if(I(this.lines[A]))return!0}};function De(A){this.children=A;for(var y=0,I=0,O=0;O<A.length;++O){var D=A[O];y+=D.chunkSize(),I+=D.height,D.parent=this}this.size=y,this.height=I,this.parent=null}De.prototype={chunkSize:function(){return this.size},removeInner:function(A,y){this.size-=y;for(var I=0;I<this.children.length;++I){var O=this.children[I],D=O.chunkSize();if(A<D){var Z=Math.min(y,D-A),Ae=O.height;if(O.removeInner(A,Z),this.height-=Ae-O.height,D==Z&&(this.children.splice(I--,1),O.parent=null),(y-=Z)==0)break;A=0}else A-=D}if(this.size-y<25&&(this.children.length>1||!(this.children[0]instanceof ke))){var be=[];this.collapse(be),this.children=[new ke(be)],this.children[0].parent=this}},collapse:function(A){for(var y=0;y<this.children.length;++y)this.children[y].collapse(A)},insertInner:function(A,y,I){this.size+=y.length,this.height+=I;for(var O=0;O<this.children.length;++O){var D=this.children[O],Z=D.chunkSize();if(A<=Z){if(D.insertInner(A,y,I),D.lines&&D.lines.length>50){for(var Ae=D.lines.length%25+25,be=Ae;be<D.lines.length;){var Te=new ke(D.lines.slice(be,be+=25));D.height-=Te.height,this.children.splice(++O,0,Te),Te.parent=this}D.lines=D.lines.slice(0,Ae),this.maybeSpill()}break}A-=Z}},maybeSpill:function(){if(!(this.children.length<=10)){var A=this;do{var y=A.children.splice(A.children.length-5,5),I=new De(y);if(A.parent){A.size-=I.size,A.height-=I.height;var D=nt(A.parent.children,A);A.parent.children.splice(D+1,0,I)}else{var O=new De(A.children);O.parent=A,A.children=[O,I],A=O}I.parent=A.parent}while(A.children.length>10);A.parent.maybeSpill()}},iterN:function(A,y,I){for(var O=0;O<this.children.length;++O){var D=this.children[O],Z=D.chunkSize();if(A<Z){var Ae=Math.min(y,Z-A);if(D.iterN(A,Ae,I))return!0;if((y-=Ae)==0)break;A=0}else A-=Z}}};var Ve=function(A,y,I){if(I)for(var O in I)I.hasOwnProperty(O)&&(this[O]=I[O]);this.doc=A,this.node=y};Ve.prototype.clear=function(){var A=this.doc.cm,y=this.line.widgets,I=this.line,O=Ye(I);if(!(O==null||!y)){for(var D=0;D<y.length;++D)y[D]==this&&y.splice(D--,1);y.length||(I.widgets=null);var Z=vu(this);oa(I,Math.max(0,I.height-Z)),A&&(Oo(A,function(){Xe(A,I,-Z),_c(A,O,"widget")}),Xs(A,"lineWidgetCleared",A,this,O))}},Ve.prototype.changed=function(){var A=this,y=this.height,I=this.doc.cm,O=this.line;this.height=null;var D=vu(this)-y;D&&(Yr(this.doc,O)||oa(O,O.height+D),I&&Oo(I,function(){I.curOp.forceUpdate=!0,Xe(I,O,D),Xs(I,"lineWidgetChanged",I,A,Ye(O))}))},Nt(Ve);function Xe(A,y,I){Xi(y)<(A.curOp&&A.curOp.scrollTop||A.doc.scrollTop)&&cs(A,I)}function mt(A,y,I,O){var D=new Ve(A,I,O),Z=A.cm;return Z&&D.noHScroll&&(Z.display.alignWidgets=!0),Me(A,y,"widget",function(Ae){var be=Ae.widgets||(Ae.widgets=[]);if(D.insertAt==null?be.push(D):be.splice(Math.min(be.length,Math.max(0,D.insertAt)),0,D),D.line=Ae,Z&&!Yr(A,Ae)){var Te=Xi(Ae)<A.scrollTop;oa(Ae,Ae.height+vu(D)),Te&&cs(Z,D.height),Z.curOp.forceUpdate=!0}return!0}),Z&&Xs(Z,"lineWidgetAdded",Z,D,typeof y=="number"?y:Ye(y)),D}var ut=0,gt=function(A,y){this.lines=[],this.type=y,this.doc=A,this.id=++ut};gt.prototype.clear=function(){if(!this.explicitlyCleared){var A=this.doc.cm,y=A&&!A.curOp;if(y&&Qu(A),Vt(this,"clear")){var I=this.find();I&&Xs(this,"clear",I.from,I.to)}for(var O=null,D=null,Z=0;Z<this.lines.length;++Z){var Ae=this.lines[Z],be=Ol(Ae.markedSpans,this);A&&!this.collapsed?_c(A,Ye(Ae),"text"):A&&(be.to!=null&&(D=Ye(Ae)),be.from!=null&&(O=Ye(Ae))),Ae.markedSpans=lA(Ae.markedSpans,be),be.from==null&&this.collapsed&&!Yr(this.doc,Ae)&&A&&oa(Ae,Pl(A.display))}if(A&&this.collapsed&&!A.options.lineWrapping)for(var Te=0;Te<this.lines.length;++Te){var je=Cr(this.lines[Te]),yt=As(je);yt>A.display.maxLineLength&&(A.display.maxLine=je,A.display.maxLineLength=yt,A.display.maxLineChanged=!0)}O!=null&&A&&this.collapsed&&Rl(A,O,D+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,A&&cu(A.doc)),A&&Xs(A,"markerCleared",A,this,O,D),y&&qu(A),this.parent&&this.parent.clear()}},gt.prototype.find=function(A,y){A==null&&this.type=="bookmark"&&(A=1);for(var I,O,D=0;D<this.lines.length;++D){var Z=this.lines[D],Ae=Ol(Z.markedSpans,this);if(Ae.from!=null&&(I=dn(y?Z:Ye(Z),Ae.from),A==-1))return I;if(Ae.to!=null&&(O=dn(y?Z:Ye(Z),Ae.to),A==1))return O}return I&&{from:I,to:O}},gt.prototype.changed=function(){var A=this,y=this.find(-1,!0),I=this,O=this.doc.cm;!y||!O||Oo(O,function(){var D=y.line,Z=Ye(y.line),Ae=xA(O,Z);if(Ae&&(Xd(Ae),O.curOp.selectionChanged=O.curOp.forceUpdate=!0),O.curOp.updateMaxLine=!0,!Yr(I.doc,D)&&I.height!=null){var be=I.height;I.height=null;var Te=vu(I)-be;Te&&oa(D,D.height+Te)}Xs(O,"markerChanged",O,A)})},gt.prototype.attachLine=function(A){if(!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(!y.maybeHiddenMarkers||nt(y.maybeHiddenMarkers,this)==-1)&&(y.maybeUnhiddenMarkers||(y.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(A)},gt.prototype.detachLine=function(A){if(this.lines.splice(nt(this.lines,A),1),!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(y.maybeHiddenMarkers||(y.maybeHiddenMarkers=[])).push(this)}},Nt(gt);function bt(A,y,I,O,D){if(O&&O.shared)return Pt(A,y,I,O,D);if(A.cm&&!A.cm.curOp)return Ki(A.cm,bt)(A,y,I,O,D);var Z=new gt(A,D),Ae=ar(y,I);if(O&&Ue(O,Z,!1),Ae>0||Ae==0&&Z.clearWhenEmpty!==!1)return Z;if(Z.replacedWith&&(Z.collapsed=!0,Z.widgetNode=st("span",[Z.replacedWith],"CodeMirror-widget"),O.handleMouseEvents||Z.widgetNode.setAttribute("cm-ignore-events","true"),O.insertLeft&&(Z.widgetNode.insertLeft=!0)),Z.collapsed){if(di(A,y.line,y,I,Z)||y.line!=I.line&&di(A,I.line,y,I,Z))throw new Error("Inserting collapsed marker partially overlapping an existing one");nl()}Z.addToHistory&&uu(A,{from:y,to:I,origin:"markText"},A.sel,NaN);var be=y.line,Te=A.cm,je;if(A.iter(be,I.line+1,function(St){Te&&Z.collapsed&&!Te.options.lineWrapping&&Cr(St)==Te.display.maxLine&&(je=!0),Z.collapsed&&be!=y.line&&oa(St,0),Hi(St,new Ks(Z,be==y.line?y.ch:null,be==I.line?I.ch:null),A.cm&&A.cm.curOp),++be}),Z.collapsed&&A.iter(y.line,I.line+1,function(St){Yr(A,St)&&oa(St,0)}),Z.clearOnEnter&&Ne(Z,"beforeCursorEnter",function(){return Z.clear()}),Z.readOnly&&(Ss(),(A.history.done.length||A.history.undone.length)&&A.clearHistory()),Z.collapsed&&(Z.id=++ut,Z.atomic=!0),Te){if(je&&(Te.curOp.updateMaxLine=!0),Z.collapsed)Rl(Te,y.line,I.line+1);else if(Z.className||Z.startStyle||Z.endStyle||Z.css||Z.attributes||Z.title)for(var yt=y.line;yt<=I.line;yt++)_c(Te,yt,"text");Z.atomic&&cu(Te.doc),Xs(Te,"markerAdded",Te,Z)}return Z}var Ot=function(A,y){this.markers=A,this.primary=y;for(var I=0;I<A.length;++I)A[I].parent=this};Ot.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var A=0;A<this.markers.length;++A)this.markers[A].clear();Xs(this,"clear")}},Ot.prototype.find=function(A,y){return this.primary.find(A,y)},Nt(Ot);function Pt(A,y,I,O,D){O=Ue(O),O.shared=!1;var Z=[bt(A,y,I,O,D)],Ae=Z[0],be=O.widgetNode;return ha(A,function(Te){be&&(O.widgetNode=be.cloneNode(!0)),Z.push(bt(Te,ii(Te,y),ii(Te,I),O,D));for(var je=0;je<Te.linked.length;++je)if(Te.linked[je].isParent)return;Ae=or(Z)}),new Ot(Z,Ae)}function Kt(A){return A.findMarks(dn(A.first,0),A.clipPos(dn(A.lastLine())),function(y){return y.parent})}function jt(A,y){for(var I=0;I<y.length;I++){var O=y[I],D=O.find(),Z=A.clipPos(D.from),Ae=A.clipPos(D.to);if(ar(Z,Ae)){var be=bt(A,Z,Ae,O.primary,O.primary.type);O.markers.push(be),be.parent=O}}}function Rt(A){for(var y=function(O){var D=A[O],Z=[D.primary.doc];ha(D.primary.doc,function(Te){return Z.push(Te)});for(var Ae=0;Ae<D.markers.length;Ae++){var be=D.markers[Ae];nt(Z,be.doc)==-1&&(be.parent=null,D.markers.splice(Ae--,1))}},I=0;I<A.length;I++)y(I)}var nn=0,Xt=function(A,y,I,O,D){if(!(this instanceof Xt))return new Xt(A,y,I,O,D);I==null&&(I=0),De.call(this,[new ke([new za("",null)])]),this.first=I,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=I;var Z=dn(I,0);this.sel=Wa(Z),this.history=new sc(null),this.id=++nn,this.modeOption=y,this.lineSep=O,this.direction=D=="rtl"?"rtl":"ltr",this.extend=!1,typeof A=="string"&&(A=this.splitLines(A)),ys(this,{from:Z,to:Z,text:A}),_a(this,Wa(Z),zt)};Xt.prototype=Mr(De.prototype,{constructor:Xt,iter:function(A,y,I){I?this.iterN(A-this.first,y-A,I):this.iterN(this.first,this.first+this.size,A)},insert:function(A,y){for(var I=0,O=0;O<y.length;++O)I+=y[O].height;this.insertInner(A-this.first,y,I)},remove:function(A,y){this.removeInner(A-this.first,y)},getValue:function(A){var y=Rs(this,this.first,this.first+this.size);return A===!1?y:y.join(A||this.lineSeparator())},setValue:Bs(function(A){var y=dn(this.first,0),I=this.first+this.size-1;T(this,{from:y,to:dn(I,Fr(this,I).text.length),text:this.splitLines(A),origin:"setValue",full:!0},!0),this.cm&&ds(this.cm,0,0),_a(this,Wa(y),zt)}),replaceRange:function(A,y,I,O){y=ii(this,y),I=I?ii(this,I):y,N(this,A,y,I,O)},getRange:function(A,y,I){var O=Ja(this,ii(this,A),ii(this,y));return I===!1?O:I===""?O.join(""):O.join(I||this.lineSeparator())},getLine:function(A){var y=this.getLineHandle(A);return y&&y.text},getLineHandle:function(A){if(yn(this,A))return Fr(this,A)},getLineNumber:function(A){return Ye(A)},getLineHandleVisualStart:function(A){return typeof A=="number"&&(A=Fr(this,A)),Cr(A)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(A){return ii(this,A)},getCursor:function(A){var y=this.sel.primary(),I;return A==null||A=="head"?I=y.head:A=="anchor"?I=y.anchor:A=="end"||A=="to"||A===!1?I=y.to():I=y.from(),I},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Bs(function(A,y,I){Vu(this,ii(this,typeof A=="number"?dn(A,y||0):A),null,I)}),setSelection:Bs(function(A,y,I){Vu(this,ii(this,A),ii(this,y||A),I)}),extendSelection:Bs(function(A,y,I){Bc(this,ii(this,A),y&&ii(this,y),I)}),extendSelections:Bs(function(A,y){Yl(this,el(this,A),y)}),extendSelectionsBy:Bs(function(A,y){var I=Kn(this.sel.ranges,A);Yl(this,el(this,I),y)}),setSelections:Bs(function(A,y,I){if(A.length){for(var O=[],D=0;D<A.length;D++)O[D]=new xo(ii(this,A[D].anchor),ii(this,A[D].head||A[D].anchor));y==null&&(y=Math.min(A.length-1,this.sel.primIndex)),_a(this,wu(this.cm,O,y),I)}}),addSelection:Bs(function(A,y,I){var O=this.sel.ranges.slice(0);O.push(new xo(ii(this,A),ii(this,y||A))),_a(this,wu(this.cm,O,O.length-1),I)}),getSelection:function(A){for(var y=this.sel.ranges,I,O=0;O<y.length;O++){var D=Ja(this,y[O].from(),y[O].to());I=I?I.concat(D):D}return A===!1?I:I.join(A||this.lineSeparator())},getSelections:function(A){for(var y=[],I=this.sel.ranges,O=0;O<I.length;O++){var D=Ja(this,I[O].from(),I[O].to());A!==!1&&(D=D.join(A||this.lineSeparator())),y[O]=D}return y},replaceSelection:function(A,y,I){for(var O=[],D=0;D<this.sel.ranges.length;D++)O[D]=A;this.replaceSelections(O,y,I||"+input")},replaceSelections:Bs(function(A,y,I){for(var O=[],D=this.sel,Z=0;Z<D.ranges.length;Z++){var Ae=D.ranges[Z];O[Z]={from:Ae.from(),to:Ae.to(),text:this.splitLines(A[Z]),origin:I}}for(var be=y&&y!="end"&&Sc(this,O,y),Te=O.length-1;Te>=0;Te--)T(this,O[Te]);be?Eu(this,be):this.cm&&jo(this.cm)}),undo:Bs(function(){c(this,"undo")}),redo:Bs(function(){c(this,"redo")}),undoSelection:Bs(function(){c(this,"undo",!0)}),redoSelection:Bs(function(){c(this,"redo",!0)}),setExtending:function(A){this.extend=A},getExtending:function(){return this.extend},historySize:function(){for(var A=this.history,y=0,I=0,O=0;O<A.done.length;O++)A.done[O].ranges||++y;for(var D=0;D<A.undone.length;D++)A.undone[D].ranges||++I;return{undo:y,redo:I}},clearHistory:function(){var A=this;this.history=new sc(this.history),ha(this,function(y){return y.history=A.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(A){return A&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(A){return this.history.generation==(A||this.cleanGeneration)},getHistory:function(){return{done:kA(this.history.done),undone:kA(this.history.undone)}},setHistory:function(A){var y=this.history=new sc(this.history);y.done=kA(A.done.slice(0),null,!0),y.undone=kA(A.undone.slice(0),null,!0)},setGutterMarker:Bs(function(A,y,I){return Me(this,A,"gutter",function(O){var D=O.gutterMarkers||(O.gutterMarkers={});return D[y]=I,!I&&ce(D)&&(O.gutterMarkers=null),!0})}),clearGutter:Bs(function(A){var y=this;this.iter(function(I){I.gutterMarkers&&I.gutterMarkers[A]&&Me(y,I,"gutter",function(){return I.gutterMarkers[A]=null,ce(I.gutterMarkers)&&(I.gutterMarkers=null),!0})})}),lineInfo:function(A){var y;if(typeof A=="number"){if(!yn(this,A)||(y=A,A=Fr(this,A),!A))return null}else if(y=Ye(A),y==null)return null;return{line:y,handle:A,text:A.text,gutterMarkers:A.gutterMarkers,textClass:A.textClass,bgClass:A.bgClass,wrapClass:A.wrapClass,widgets:A.widgets}},addLineClass:Bs(function(A,y,I){return Me(this,A,y=="gutter"?"gutter":"class",function(O){var D=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass";if(!O[D])O[D]=I;else{if(Se(I).test(O[D]))return!1;O[D]+=" "+I}return!0})}),removeLineClass:Bs(function(A,y,I){return Me(this,A,y=="gutter"?"gutter":"class",function(O){var D=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass",Z=O[D];if(Z)if(I==null)O[D]=null;else{var Ae=Z.match(Se(I));if(!Ae)return!1;var be=Ae.index+Ae[0].length;O[D]=Z.slice(0,Ae.index)+(!Ae.index||be==Z.length?"":" ")+Z.slice(be)||null}else return!1;return!0})}),addLineWidget:Bs(function(A,y,I){return mt(this,A,y,I)}),removeLineWidget:function(A){A.clear()},markText:function(A,y,I){return bt(this,ii(this,A),ii(this,y),I,I&&I.type||"range")},setBookmark:function(A,y){var I={replacedWith:y&&(y.nodeType==null?y.widget:y),insertLeft:y&&y.insertLeft,clearWhenEmpty:!1,shared:y&&y.shared,handleMouseEvents:y&&y.handleMouseEvents};return A=ii(this,A),bt(this,A,A,I,"bookmark")},findMarksAt:function(A){A=ii(this,A);var y=[],I=Fr(this,A.line).markedSpans;if(I)for(var O=0;O<I.length;++O){var D=I[O];(D.from==null||D.from<=A.ch)&&(D.to==null||D.to>=A.ch)&&y.push(D.marker.parent||D.marker)}return y},findMarks:function(A,y,I){A=ii(this,A),y=ii(this,y);var O=[],D=A.line;return this.iter(A.line,y.line+1,function(Z){var Ae=Z.markedSpans;if(Ae)for(var be=0;be<Ae.length;be++){var Te=Ae[be];!(Te.to!=null&&D==A.line&&A.ch>=Te.to||Te.from==null&&D!=A.line||Te.from!=null&&D==y.line&&Te.from>=y.ch)&&(!I||I(Te.marker))&&O.push(Te.marker.parent||Te.marker)}++D}),O},getAllMarks:function(){var A=[];return this.iter(function(y){var I=y.markedSpans;if(I)for(var O=0;O<I.length;++O)I[O].from!=null&&A.push(I[O].marker)}),A},posFromIndex:function(A){var y,I=this.first,O=this.lineSeparator().length;return this.iter(function(D){var Z=D.text.length+O;if(Z>A)return y=A,!0;A-=Z,++I}),ii(this,dn(I,y))},indexFromPos:function(A){A=ii(this,A);var y=A.ch;if(A.line<this.first||A.ch<0)return 0;var I=this.lineSeparator().length;return this.iter(this.first,A.line,function(O){y+=O.text.length+I}),y},copy:function(A){var y=new Xt(Rs(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return y.scrollTop=this.scrollTop,y.scrollLeft=this.scrollLeft,y.sel=this.sel,y.extend=!1,A&&(y.history.undoDepth=this.history.undoDepth,y.setHistory(this.getHistory())),y},linkedDoc:function(A){A||(A={});var y=this.first,I=this.first+this.size;A.from!=null&&A.from>y&&(y=A.from),A.to!=null&&A.to<I&&(I=A.to);var O=new Xt(Rs(this,y,I),A.mode||this.modeOption,y,this.lineSep,this.direction);return A.sharedHist&&(O.history=this.history),(this.linked||(this.linked=[])).push({doc:O,sharedHist:A.sharedHist}),O.linked=[{doc:this,isParent:!0,sharedHist:A.sharedHist}],jt(O,Kt(this)),O},unlinkDoc:function(A){if(A instanceof ko&&(A=A.doc),this.linked)for(var y=0;y<this.linked.length;++y){var I=this.linked[y];if(I.doc==A){this.linked.splice(y,1),A.unlinkDoc(this),Rt(Kt(this));break}}if(A.history==this.history){var O=[A.id];ha(A,function(D){return O.push(D.id)},!0),A.history=new sc(null),A.history.done=kA(this.history.done,O),A.history.undone=kA(this.history.undone,O)}},iterLinkedDocs:function(A){ha(this,A)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(A){return this.lineSep?A.split(this.lineSep):Ar(A)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Bs(function(A){A!="rtl"&&(A="ltr"),A!=this.direction&&(this.direction=A,this.iter(function(y){return y.order=null}),this.cm&&$u(this.cm))})}),Xt.prototype.eachLine=Xt.prototype.iter;var bn=0;function xn(A){var y=this;if(Gn(y),!(ct(y,A)||AA(y.display,A))){wt(A),d&&(bn=+new Date);var I=wA(y,A,!0),O=A.dataTransfer.files;if(!(!I||y.isReadOnly()))if(O&&O.length&&window.FileReader&&window.File)for(var D=O.length,Z=Array(D),Ae=0,be=function(){++Ae==D&&Ki(y,function(){I=ii(y.doc,I);var qt={from:I,to:I,text:y.doc.splitLines(Z.filter(function(En){return En!=null}).join(y.doc.lineSeparator())),origin:"paste"};T(y.doc,qt),Eu(y.doc,Wa(ii(y.doc,I),ii(y.doc,Fs(qt))))})()},Te=function(qt,En){if(y.options.allowDropFileTypes&&nt(y.options.allowDropFileTypes,qt.type)==-1){be();return}var Fn=new FileReader;Fn.onerror=function(){return be()},Fn.onload=function(){var Jn=Fn.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Jn)){be();return}Z[En]=Jn,be()},Fn.readAsText(qt)},je=0;je<O.length;je++)Te(O[je],je);else{if(y.state.draggingText&&y.doc.sel.contains(I)>-1){y.state.draggingText(A),setTimeout(function(){return y.display.input.focus()},20);return}try{var yt=A.dataTransfer.getData("Text");if(yt){var St;if(y.state.draggingText&&!y.state.draggingText.copy&&(St=y.listSelections()),Js(y.doc,Wa(I,I)),St)for(var Jt=0;Jt<St.length;++Jt)N(y.doc,"",St[Jt].anchor,St[Jt].head,"drag");y.replaceSelection(yt,"around","paste"),y.display.input.focus()}}catch{}}}}function Cn(A,y){if(d&&(!A.state.draggingText||+new Date-bn<100)){pr(y);return}if(!(ct(A,y)||AA(A.display,y))&&(y.dataTransfer.setData("Text",A.getSelection()),y.dataTransfer.effectAllowed="copyMove",y.dataTransfer.setDragImage&&!z)){var I=ge("img",null,null,"position: fixed; left: 0; top: 0;");I.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",k&&(I.width=I.height=1,A.display.wrapper.appendChild(I),I._top=I.offsetTop),y.dataTransfer.setDragImage(I,0,0),k&&I.parentNode.removeChild(I)}}function kn(A,y){var I=wA(A,y);if(I){var O=document.createDocumentFragment();bc(A,I,O),A.display.dragCursor||(A.display.dragCursor=ge("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),A.display.lineSpace.insertBefore(A.display.dragCursor,A.display.cursorDiv)),Ke(A.display.dragCursor,O)}}function Gn(A){A.display.dragCursor&&(A.display.lineSpace.removeChild(A.display.dragCursor),A.display.dragCursor=null)}function Bn(A){if(document.getElementsByClassName){for(var y=document.getElementsByClassName("CodeMirror"),I=[],O=0;O<y.length;O++){var D=y[O].CodeMirror;D&&I.push(D)}I.length&&I[0].operation(function(){for(var Z=0;Z<I.length;Z++)A(I[Z])})}}var Pr=!1;function Oi(){Pr||(Vi(),Pr=!0)}function Vi(){var A;Ne(window,"resize",function(){A==null&&(A=setTimeout(function(){A=null,Bn(Io)},100))}),Ne(window,"blur",function(){return Bn(Zo)})}function Io(A){var y=A.display;y.cachedCharWidth=y.cachedTextHeight=y.cachedPaddingH=null,y.scrollbarsClipped=!1,A.setSize()}for(var Ei={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},No=0;No<10;No++)Ei[No+48]=Ei[No+96]=String(No);for(var Wo=65;Wo<=90;Wo++)Ei[Wo]=String.fromCharCode(Wo);for(var wo=1;wo<=12;wo++)Ei[wo+111]=Ei[wo+63235]="F"+wo;var vo={};vo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},vo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},vo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},vo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},vo.default=$?vo.macDefault:vo.pcDefault;function Ta(A){var y=A.split(/-(?!$)/);A=y[y.length-1];for(var I,O,D,Z,Ae=0;Ae<y.length-1;Ae++){var be=y[Ae];if(/^(cmd|meta|m)$/i.test(be))Z=!0;else if(/^a(lt)?$/i.test(be))I=!0;else if(/^(c|ctrl|control)$/i.test(be))O=!0;else if(/^s(hift)?$/i.test(be))D=!0;else throw new Error("Unrecognized modifier name: "+be)}return I&&(A="Alt-"+A),O&&(A="Ctrl-"+A),Z&&(A="Cmd-"+A),D&&(A="Shift-"+A),A}function Go(A){var y={};for(var I in A)if(A.hasOwnProperty(I)){var O=A[I];if(/^(name|fallthrough|(de|at)tach)$/.test(I))continue;if(O=="..."){delete A[I];continue}for(var D=Kn(I.split(" "),Ta),Z=0;Z<D.length;Z++){var Ae=void 0,be=void 0;Z==D.length-1?(be=D.join(" "),Ae=O):(be=D.slice(0,Z+1).join(" "),Ae="...");var Te=y[be];if(!Te)y[be]=Ae;else if(Te!=Ae)throw new Error("Inconsistent bindings for "+be)}delete A[I]}for(var je in y)A[je]=y[je];return A}function hs(A,y,I,O){y=gl(y);var D=y.call?y.call(A,O):y[A];if(D===!1)return"nothing";if(D==="...")return"multi";if(D!=null&&I(D))return"handled";if(y.fallthrough){if(Object.prototype.toString.call(y.fallthrough)!="[object Array]")return hs(A,y.fallthrough,I,O);for(var Z=0;Z<y.fallthrough.length;Z++){var Ae=hs(A,y.fallthrough[Z],I,O);if(Ae)return Ae}}}function Ga(A){var y=typeof A=="string"?A:Ei[A.keyCode];return y=="Ctrl"||y=="Alt"||y=="Shift"||y=="Mod"}function Zu(A,y,I){var O=A;return y.altKey&&O!="Alt"&&(A="Alt-"+A),(fe?y.metaKey:y.ctrlKey)&&O!="Ctrl"&&(A="Ctrl-"+A),(fe?y.ctrlKey:y.metaKey)&&O!="Mod"&&(A="Cmd-"+A),!I&&y.shiftKey&&O!="Shift"&&(A="Shift-"+A),A}function ml(A,y){if(k&&A.keyCode==34&&A.char)return!1;var I=Ei[A.keyCode];return I==null||A.altGraphKey?!1:(A.keyCode==3&&A.code&&(I=A.code),Zu(I,A,y))}function gl(A){return typeof A=="string"?vo[A]:A}function du(A,y){for(var I=A.doc.sel.ranges,O=[],D=0;D<I.length;D++){for(var Z=y(I[D]);O.length&&ar(Z.from,or(O).to)<=0;){var Ae=O.pop();if(ar(Ae.from,Z.from)<0){Z.from=Ae.from;break}}O.push(Z)}Oo(A,function(){for(var be=O.length-1;be>=0;be--)N(A.doc,"",O[be].from,O[be].to,"+delete");jo(A)})}function TA(A,y,I){var O=Et(A.text,y+I,I);return O<0||O>A.text.length?null:O}function PA(A,y,I){var O=TA(A,y.ch,I);return O==null?null:new dn(y.line,O,I<0?"after":"before")}function Xu(A,y,I,O,D){if(A){y.doc.direction=="rtl"&&(D=-D);var Z=_e(I,y.doc.direction);if(Z){var Ae=D<0?or(Z):Z[0],be=D<0==(Ae.level==1),Te=be?"after":"before",je;if(Ae.level>0||y.doc.direction=="rtl"){var yt=rl(y,I);je=D<0?I.text.length-1:0;var St=kl(y,yt,je).top;je=$t(function(Jt){return kl(y,yt,Jt).top==St},D<0==(Ae.level==1)?Ae.from:Ae.to-1,je),Te=="before"&&(je=TA(I,je,1))}else je=D<0?Ae.to:Ae.from;return new dn(O,je,Te)}}return new dn(O,D<0?I.text.length:0,D<0?"before":"after")}function ea(A,y,I,O){var D=_e(y,A.doc.direction);if(!D)return PA(y,I,O);I.ch>=y.text.length?(I.ch=y.text.length,I.sticky="before"):I.ch<=0&&(I.ch=0,I.sticky="after");var Z=Oe(D,I.ch,I.sticky),Ae=D[Z];if(A.doc.direction=="ltr"&&Ae.level%2==0&&(O>0?Ae.to>I.ch:Ae.from<I.ch))return PA(y,I,O);var be=function(sr,xr){return TA(y,sr instanceof dn?sr.ch:sr,xr)},Te,je=function(sr){return A.options.lineWrapping?(Te=Te||rl(A,y),Ho(A,y,Te,sr)):{begin:0,end:y.text.length}},yt=je(I.sticky=="before"?be(I,-1):I.ch);if(A.doc.direction=="rtl"||Ae.level==1){var St=Ae.level==1==O<0,Jt=be(I,St?1:-1);if(Jt!=null&&(St?Jt<=Ae.to&&Jt<=yt.end:Jt>=Ae.from&&Jt>=yt.begin)){var qt=St?"before":"after";return new dn(I.line,Jt,qt)}}var En=function(sr,xr,hr){for(var Ur=function(To,qa){return qa?new dn(I.line,be(To,1),"before"):new dn(I.line,To,"after")};sr>=0&&sr<D.length;sr+=xr){var li=D[sr],Gr=xr>0==(li.level!=1),Ji=Gr?hr.begin:be(hr.end,-1);if(li.from<=Ji&&Ji<li.to||(Ji=Gr?li.from:be(li.to,-1),hr.begin<=Ji&&Ji<hr.end))return Ur(Ji,Gr)}},Fn=En(Z+O,O,yt);if(Fn)return Fn;var Jn=O>0?yt.end:be(yt.begin,-1);return Jn!=null&&!(O>0&&Jn==y.text.length)&&(Fn=En(O>0?0:D.length-1,O,je(Jn)),Fn)?Fn:null}var yl={selectAll:$l,singleSelection:function(A){return A.setSelection(A.getCursor("anchor"),A.getCursor("head"),zt)},killLine:function(A){return du(A,function(y){if(y.empty()){var I=Fr(A.doc,y.head.line).text.length;return y.head.ch==I&&y.head.line<A.lastLine()?{from:y.head,to:dn(y.head.line+1,0)}:{from:y.head,to:dn(y.head.line,I)}}else return{from:y.from(),to:y.to()}})},deleteLine:function(A){return du(A,function(y){return{from:dn(y.from().line,0),to:ii(A.doc,dn(y.to().line+1,0))}})},delLineLeft:function(A){return du(A,function(y){return{from:dn(y.from().line,0),to:y.from()}})},delWrappedLineLeft:function(A){return du(A,function(y){var I=A.charCoords(y.head,"div").top+5,O=A.coordsChar({left:0,top:I},"div");return{from:O,to:y.from()}})},delWrappedLineRight:function(A){return du(A,function(y){var I=A.charCoords(y.head,"div").top+5,O=A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:I},"div");return{from:y.from(),to:O}})},undo:function(A){return A.undo()},redo:function(A){return A.redo()},undoSelection:function(A){return A.undoSelection()},redoSelection:function(A){return A.redoSelection()},goDocStart:function(A){return A.extendSelection(dn(A.firstLine(),0))},goDocEnd:function(A){return A.extendSelection(dn(A.lastLine()))},goLineStart:function(A){return A.extendSelectionsBy(function(y){return aa(A,y.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(A){return A.extendSelectionsBy(function(y){return ws(A,y.head)},{origin:"+move",bias:1})},goLineEnd:function(A){return A.extendSelectionsBy(function(y){return Dl(A,y.head.line)},{origin:"+move",bias:-1})},goLineRight:function(A){return A.extendSelectionsBy(function(y){var I=A.cursorCoords(y.head,"div").top+5;return A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:I},"div")},Lt)},goLineLeft:function(A){return A.extendSelectionsBy(function(y){var I=A.cursorCoords(y.head,"div").top+5;return A.coordsChar({left:0,top:I},"div")},Lt)},goLineLeftSmart:function(A){return A.extendSelectionsBy(function(y){var I=A.cursorCoords(y.head,"div").top+5,O=A.coordsChar({left:0,top:I},"div");return O.ch<A.getLine(O.line).search(/\S/)?ws(A,y.head):O},Lt)},goLineUp:function(A){return A.moveV(-1,"line")},goLineDown:function(A){return A.moveV(1,"line")},goPageUp:function(A){return A.moveV(-1,"page")},goPageDown:function(A){return A.moveV(1,"page")},goCharLeft:function(A){return A.moveH(-1,"char")},goCharRight:function(A){return A.moveH(1,"char")},goColumnLeft:function(A){return A.moveH(-1,"column")},goColumnRight:function(A){return A.moveH(1,"column")},goWordLeft:function(A){return A.moveH(-1,"word")},goGroupRight:function(A){return A.moveH(1,"group")},goGroupLeft:function(A){return A.moveH(-1,"group")},goWordRight:function(A){return A.moveH(1,"word")},delCharBefore:function(A){return A.deleteH(-1,"codepoint")},delCharAfter:function(A){return A.deleteH(1,"char")},delWordBefore:function(A){return A.deleteH(-1,"word")},delWordAfter:function(A){return A.deleteH(1,"word")},delGroupBefore:function(A){return A.deleteH(-1,"group")},delGroupAfter:function(A){return A.deleteH(1,"group")},indentAuto:function(A){return A.indentSelection("smart")},indentMore:function(A){return A.indentSelection("add")},indentLess:function(A){return A.indentSelection("subtract")},insertTab:function(A){return A.replaceSelection("	")},insertSoftTab:function(A){for(var y=[],I=A.listSelections(),O=A.options.tabSize,D=0;D<I.length;D++){var Z=I[D].from(),Ae=Re(A.getLine(Z.line),Z.ch,O);y.push(rn(O-Ae%O))}A.replaceSelections(y)},defaultTab:function(A){A.somethingSelected()?A.indentSelection("add"):A.execCommand("insertTab")},transposeChars:function(A){return Oo(A,function(){for(var y=A.listSelections(),I=[],O=0;O<y.length;O++)if(y[O].empty()){var D=y[O].head,Z=Fr(A.doc,D.line).text;if(Z){if(D.ch==Z.length&&(D=new dn(D.line,D.ch-1)),D.ch>0)D=new dn(D.line,D.ch+1),A.replaceRange(Z.charAt(D.ch-1)+Z.charAt(D.ch-2),dn(D.line,D.ch-2),D,"+transpose");else if(D.line>A.doc.first){var Ae=Fr(A.doc,D.line-1).text;Ae&&(D=new dn(D.line,1),A.replaceRange(Z.charAt(0)+A.doc.lineSeparator()+Ae.charAt(Ae.length-1),dn(D.line-1,Ae.length-1),D,"+transpose"))}}I.push(new xo(D,D))}A.setSelections(I)})},newlineAndIndent:function(A){return Oo(A,function(){for(var y=A.listSelections(),I=y.length-1;I>=0;I--)A.replaceRange(A.doc.lineSeparator(),y[I].anchor,y[I].head,"+input");y=A.listSelections();for(var O=0;O<y.length;O++)A.indentLine(y[O].from().line,null,!0);jo(A)})},openLine:function(A){return A.replaceSelection(`
`,"start")},toggleOverwrite:function(A){return A.toggleOverwrite()}};function aa(A,y){var I=Fr(A.doc,y),O=Cr(I);return O!=I&&(y=Ye(O)),Xu(!0,A,O,y,1)}function Dl(A,y){var I=Fr(A.doc,y),O=Tr(I);return O!=I&&(y=Ye(O)),Xu(!0,A,I,y,-1)}function ws(A,y){var I=aa(A,y.line),O=Fr(A.doc,I.line),D=_e(O,A.doc.direction);if(!D||D[0].level==0){var Z=Math.max(I.ch,O.text.search(/\S/)),Ae=y.line==I.line&&y.ch<=Z&&y.ch;return dn(I.line,Ae?0:Z,I.sticky)}return I}function $s(A,y,I){if(typeof y=="string"&&(y=yl[y],!y))return!1;A.display.input.ensurePolled();var O=A.display.shift,D=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),I&&(A.display.shift=!1),D=y(A)!=pt}finally{A.display.shift=O,A.state.suppressEdits=!1}return D}function il(A,y,I){for(var O=0;O<A.state.keyMaps.length;O++){var D=hs(y,A.state.keyMaps[O],I,A);if(D)return D}return A.options.extraKeys&&hs(y,A.options.extraKeys,I,A)||hs(y,A.options.keyMap,I,A)}var ol=new Be;function Od(A,y,I,O){var D=A.state.keySeq;if(D){if(Ga(y))return"handled";if(/\'$/.test(y)?A.state.keySeq=null:ol.set(50,function(){A.state.keySeq==D&&(A.state.keySeq=null,A.display.input.reset())}),Th(A,D+" "+y,I,O))return!0}return Th(A,y,I,O)}function Th(A,y,I,O){var D=il(A,y,O);return D=="multi"&&(A.state.keySeq=y),D=="handled"&&Xs(A,"keyHandled",A,y,I),(D=="handled"||D=="multi")&&(wt(I),MA(A)),!!D}function Ph(A,y){var I=ml(y,!0);return I?y.shiftKey&&!A.state.keySeq?Od(A,"Shift-"+I,y,function(O){return $s(A,O,!0)})||Od(A,I,y,function(O){if(typeof O=="string"?/^go[A-Z]/.test(O):O.motion)return $s(A,O)}):Od(A,I,y,function(O){return $s(A,O)}):!1}function Id(A,y,I){return Od(A,"'"+I+"'",y,function(O){return $s(A,O,!0)})}var ac=null;function Rh(A){var y=this;if(!(A.target&&A.target!=y.display.input.getField())&&(y.curOp.focus=We(_t(y)),!ct(y,A))){d&&g<11&&A.keyCode==27&&(A.returnValue=!1);var I=A.keyCode;y.display.shift=I==16||A.shiftKey;var O=Ph(y,A);k&&(ac=O?I:null,!O&&I==88&&!Ea&&($?A.metaKey:A.ctrlKey)&&y.replaceSelection("",null,"cut")),i&&!$&&!O&&I==46&&A.shiftKey&&!A.ctrlKey&&document.execCommand&&document.execCommand("cut"),I==18&&!/\bCodeMirror-crosshair\b/.test(y.display.lineDiv.className)&&Pa(y)}}function Pa(A){var y=A.display.lineDiv;Ce(y,"CodeMirror-crosshair");function I(O){(O.keyCode==18||!O.altKey)&&(pe(y,"CodeMirror-crosshair"),rt(document,"keyup",I),rt(document,"mouseover",I))}Ne(document,"keyup",I),Ne(document,"mouseover",I)}function hu(A){A.keyCode==16&&(this.doc.sel.shift=!1),ct(this,A)}function kd(A){var y=this;if(!(A.target&&A.target!=y.display.input.getField())&&!(AA(y.display,A)||ct(y,A)||A.ctrlKey&&!A.altKey||$&&A.metaKey)){var I=A.keyCode,O=A.charCode;if(k&&I==ac){ac=null,wt(A);return}if(!(k&&(!A.which||A.which<10)&&Ph(y,A))){var D=String.fromCharCode(O??I);D!="\b"&&(Id(y,A,D)||y.display.input.onKeyPress(A))}}}var Bp=400,kc=function(A,y,I){this.time=A,this.pos=y,this.button=I};kc.prototype.compare=function(A,y,I){return this.time+Bp>A&&ar(y,this.pos)==0&&I==this.button};var RA,Qa;function Op(A,y){var I=+new Date;return Qa&&Qa.compare(I,A,y)?(RA=Qa=null,"triple"):RA&&RA.compare(I,A,y)?(Qa=new kc(I,A,y),RA=null,"double"):(RA=new kc(I,A,y),Qa=null,"single")}function Dh(A){var y=this,I=y.display;if(!(ct(y,A)||I.activeTouch&&I.input.supportsTouch())){if(I.input.ensurePolled(),I.shift=A.shiftKey,AA(I,A)){b||(I.scroller.draggable=!1,setTimeout(function(){return I.scroller.draggable=!0},100));return}if(!Ah(y,A)){var O=wA(y,A),D=sn(A),Z=O?Op(O,D):"single";Dt(y).focus(),D==1&&y.state.selectingText&&y.state.selectingText(A),!(O&&Ip(y,D,O,Z,A))&&(D==1?O?Tc(y,O,Z,A):Er(A)==I.scroller&&wt(A):D==2?(O&&Bc(y.doc,O),setTimeout(function(){return I.input.focus()},20)):D==3&&(he?y.display.input.onContextMenu(A):$c(y)))}}}function Ip(A,y,I,O,D){var Z="Click";return O=="double"?Z="Double"+Z:O=="triple"&&(Z="Triple"+Z),Z=(y==1?"Left":y==2?"Middle":"Right")+Z,Od(A,Zu(Z,D),D,function(Ae){if(typeof Ae=="string"&&(Ae=yl[Ae]),!Ae)return!1;var be=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),be=Ae(A,I)!=pt}finally{A.state.suppressEdits=!1}return be})}function uh(A,y,I){var O=A.getOption("configureMouse"),D=O?O(A,y,I):{};if(D.unit==null){var Z=te?I.shiftKey&&I.metaKey:I.altKey;D.unit=Z?"rectangle":y=="single"?"char":y=="double"?"word":"line"}return(D.extend==null||A.doc.extend)&&(D.extend=A.doc.extend||I.shiftKey),D.addNew==null&&(D.addNew=$?I.metaKey:I.ctrlKey),D.moveOnDrag==null&&(D.moveOnDrag=!($?I.altKey:I.ctrlKey)),D}function Tc(A,y,I,O){d?setTimeout(Tt(JA,A),0):A.curOp.focus=We(_t(A));var D=uh(A,I,O),Z=A.doc.sel,Ae;A.options.dragDrop&&Wn&&!A.isReadOnly()&&I=="single"&&(Ae=Z.contains(y))>-1&&(ar((Ae=Z.ranges[Ae]).from(),y)<0||y.xRel>0)&&(ar(Ae.to(),y)>0||y.xRel<0)?gm(A,O,y,D):Kh(A,O,y,D)}function gm(A,y,I,O){var D=A.display,Z=!1,Ae=Ki(A,function(je){b&&(D.scroller.draggable=!1),A.state.draggingText=!1,A.state.delayingBlurEvent&&(A.hasFocus()?A.state.delayingBlurEvent=!1:$c(A)),rt(D.wrapper.ownerDocument,"mouseup",Ae),rt(D.wrapper.ownerDocument,"mousemove",be),rt(D.scroller,"dragstart",Te),rt(D.scroller,"drop",Ae),Z||(wt(je),O.addNew||Bc(A.doc,I,null,null,O.extend),b&&!z||d&&g==9?setTimeout(function(){D.wrapper.ownerDocument.body.focus({preventScroll:!0}),D.input.focus()},20):D.input.focus())}),be=function(je){Z=Z||Math.abs(y.clientX-je.clientX)+Math.abs(y.clientY-je.clientY)>=10},Te=function(){return Z=!0};b&&(D.scroller.draggable=!0),A.state.draggingText=Ae,Ae.copy=!O.moveOnDrag,Ne(D.wrapper.ownerDocument,"mouseup",Ae),Ne(D.wrapper.ownerDocument,"mousemove",be),Ne(D.scroller,"dragstart",Te),Ne(D.scroller,"drop",Ae),A.state.delayingBlurEvent=!0,setTimeout(function(){return D.input.focus()},20),D.scroller.dragDrop&&D.scroller.dragDrop()}function lc(A,y,I){if(I=="char")return new xo(y,y);if(I=="word")return A.findWordAt(y);if(I=="line")return new xo(dn(y.line,0),ii(A.doc,dn(y.line+1,0)));var O=I(A,y);return new xo(O.from,O.to)}function Kh(A,y,I,O){d&&$c(A);var D=A.display,Z=A.doc;wt(y);var Ae,be,Te=Z.sel,je=Te.ranges;if(O.addNew&&!O.extend?(be=Z.sel.contains(I),be>-1?Ae=je[be]:Ae=new xo(I,I)):(Ae=Z.sel.primary(),be=Z.sel.primIndex),O.unit=="rectangle")O.addNew||(Ae=new xo(I,I)),I=wA(A,y,!0,!0),be=-1;else{var yt=lc(A,I,O.unit);O.extend?Ae=Ys(Ae,yt.anchor,yt.head,O.extend):Ae=yt}O.addNew?be==-1?(be=je.length,_a(Z,wu(A,je.concat([Ae]),be),{scroll:!1,origin:"*mouse"})):je.length>1&&je[be].empty()&&O.unit=="char"&&!O.extend?(_a(Z,wu(A,je.slice(0,be).concat(je.slice(be+1)),0),{scroll:!1,origin:"*mouse"}),Te=Z.sel):pl(Z,be,Ae,tn):(be=0,_a(Z,new Is([Ae],0),tn),Te=Z.sel);var St=I;function Jt(hr){if(ar(St,hr)!=0)if(St=hr,O.unit=="rectangle"){for(var Ur=[],li=A.options.tabSize,Gr=Re(Fr(Z,I.line).text,I.ch,li),Ji=Re(Fr(Z,hr.line).text,hr.ch,li),To=Math.min(Gr,Ji),qa=Math.max(Gr,Ji),la=Math.min(I.line,hr.line),ba=Math.min(A.lastLine(),Math.max(I.line,hr.line));la<=ba;la++){var xa=Fr(Z,la).text,Ra=gn(xa,To,li);To==qa?Ur.push(new xo(dn(la,Ra),dn(la,Ra))):xa.length>Ra&&Ur.push(new xo(dn(la,Ra),dn(la,gn(xa,qa,li))))}Ur.length||Ur.push(new xo(I,I)),_a(Z,wu(A,Te.ranges.slice(0,be).concat(Ur),be),{origin:"*mouse",scroll:!1}),A.scrollIntoView(hr)}else{var Hl=Ae,Ya=lc(A,hr,O.unit),wa=Hl.anchor,fs;ar(Ya.anchor,wa)>0?(fs=Ya.head,wa=Gs(Hl.from(),Ya.anchor)):(fs=Ya.anchor,wa=_s(Hl.to(),Ya.head));var yi=Te.ranges.slice(0);yi[be]=Td(A,new xo(ii(Z,wa),fs)),_a(Z,wu(A,yi,be),tn)}}var qt=D.wrapper.getBoundingClientRect(),En=0;function Fn(hr){var Ur=++En,li=wA(A,hr,!0,O.unit=="rectangle");if(li)if(ar(li,St)!=0){A.curOp.focus=We(_t(A)),Jt(li);var Gr=ju(D,Z);(li.line>=Gr.to||li.line<Gr.from)&&setTimeout(Ki(A,function(){En==Ur&&Fn(hr)}),150)}else{var Ji=hr.clientY<qt.top?-20:hr.clientY>qt.bottom?20:0;Ji&&setTimeout(Ki(A,function(){En==Ur&&(D.scroller.scrollTop+=Ji,Fn(hr))}),50)}}function Jn(hr){A.state.selectingText=!1,En=1/0,hr&&(wt(hr),D.input.focus()),rt(D.wrapper.ownerDocument,"mousemove",sr),rt(D.wrapper.ownerDocument,"mouseup",xr),Z.history.lastSelOrigin=null}var sr=Ki(A,function(hr){hr.buttons===0||!sn(hr)?Jn(hr):Fn(hr)}),xr=Ki(A,Jn);A.state.selectingText=xr,Ne(D.wrapper.ownerDocument,"mousemove",sr),Ne(D.wrapper.ownerDocument,"mouseup",xr)}function Td(A,y){var I=y.anchor,O=y.head,D=Fr(A.doc,I.line);if(ar(I,O)==0&&I.sticky==O.sticky)return y;var Z=_e(D);if(!Z)return y;var Ae=Oe(Z,I.ch,I.sticky),be=Z[Ae];if(be.from!=I.ch&&be.to!=I.ch)return y;var Te=Ae+(be.from==I.ch==(be.level!=1)?0:1);if(Te==0||Te==Z.length)return y;var je;if(O.line!=I.line)je=(O.line-I.line)*(A.doc.direction=="ltr"?1:-1)>0;else{var yt=Oe(Z,O.ch,O.sticky),St=yt-Ae||(O.ch-I.ch)*(be.level==1?-1:1);yt==Te-1||yt==Te?je=St<0:je=St>0}var Jt=Z[Te+(je?-1:0)],qt=je==(Jt.level==1),En=qt?Jt.from:Jt.to,Fn=qt?"after":"before";return I.ch==En&&I.sticky==Fn?y:new xo(new dn(I.line,En,Fn),O)}function kp(A,y,I,O){var D,Z;if(y.touches)D=y.touches[0].clientX,Z=y.touches[0].clientY;else try{D=y.clientX,Z=y.clientY}catch{return!1}if(D>=Math.floor(A.display.gutters.getBoundingClientRect().right))return!1;O&&wt(y);var Ae=A.display,be=Ae.lineDiv.getBoundingClientRect();if(Z>be.bottom||!Vt(A,I))return On(y);Z-=be.top-Ae.viewOffset;for(var Te=0;Te<A.display.gutterSpecs.length;++Te){var je=Ae.gutters.childNodes[Te];if(je&&je.getBoundingClientRect().right>=D){var yt=Mt(A.doc,Z),St=A.display.gutterSpecs[Te];return dt(A,I,A,yt,St.className,y),On(y)}}}function Ah(A,y){return kp(A,y,"gutterClick",!0)}function Qf(A,y){AA(A.display,y)||qf(A,y)||ct(A,y,"contextmenu")||he||A.display.input.onContextMenu(y)}function qf(A,y){return Vt(A,"gutterContextMenu")?kp(A,y,"gutterContextMenu",!1):!1}function Tp(A){A.display.wrapper.className=A.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+A.options.theme.replace(/(^|\s)\s*/g," cm-s-"),vc(A)}var Pd={toString:function(){return"CodeMirror.Init"}},df={},Vl={};function Kl(A){var y=A.optionHandlers;function I(O,D,Z,Ae){A.defaults[O]=D,Z&&(y[O]=Ae?function(be,Te,je){je!=Pd&&Z(be,Te,je)}:Z)}A.defineOption=I,A.Init=Pd,I("value","",function(O,D){return O.setValue(D)},!0),I("mode",null,function(O,D){O.doc.modeOption=D,sh(O)},!0),I("indentUnit",2,sh,!0),I("indentWithTabs",!1),I("smartIndent",!0),I("tabSize",4,function(O){OA(O),vc(O),Rl(O)},!0),I("lineSeparator",null,function(O,D){if(O.doc.lineSep=D,!!D){var Z=[],Ae=O.doc.first;O.doc.iter(function(Te){for(var je=0;;){var yt=Te.text.indexOf(D,je);if(yt==-1)break;je=yt+D.length,Z.push(dn(Ae,yt))}Ae++});for(var be=Z.length-1;be>=0;be--)N(O.doc,D,Z[be],dn(Z[be].line,Z[be].ch+D.length))}}),I("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(O,D,Z){O.state.specialChars=new RegExp(D.source+(D.test("	")?"":"|	"),"g"),Z!=Pd&&O.refresh()}),I("specialCharPlaceholder",Fu,function(O){return O.refresh()},!0),I("electricChars",!0),I("inputStyle",J?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),I("spellcheck",!1,function(O,D){return O.getInputField().spellcheck=D},!0),I("autocorrect",!1,function(O,D){return O.getInputField().autocorrect=D},!0),I("autocapitalize",!1,function(O,D){return O.getInputField().autocapitalize=D},!0),I("rtlMoveVisually",!W),I("wholeLineUpdateBefore",!0),I("theme","default",function(O){Tp(O),ql(O)},!0),I("keyMap","default",function(O,D,Z){var Ae=gl(D),be=Z!=Pd&&gl(Z);be&&be.detach&&be.detach(O,Ae),Ae.attach&&Ae.attach(O,be||null)}),I("extraKeys",null),I("configureMouse",null),I("lineWrapping",!1,Yf,!0),I("gutters",[],function(O,D){O.display.gutterSpecs=Si(D,O.options.lineNumbers),ql(O)},!0),I("fixedGutter",!0,function(O,D){O.display.gutters.style.left=D?zo(O.display)+"px":"0",O.refresh()},!0),I("coverGutterNextToScrollbar",!1,function(O){return Wu(O)},!0),I("scrollbarStyle","native",function(O){ih(O),Wu(O),O.display.scrollbars.setScrollTop(O.doc.scrollTop),O.display.scrollbars.setScrollLeft(O.doc.scrollLeft)},!0),I("lineNumbers",!1,function(O,D){O.display.gutterSpecs=Si(O.options.gutters,D),ql(O)},!0),I("firstLineNumber",1,ql,!0),I("lineNumberFormatter",function(O){return O},ql,!0),I("showCursorWhenSelecting",!1,ja,!0),I("resetSelectionOnContextMenu",!0),I("lineWiseCopyCut",!0),I("pasteLinesPerSelection",!0),I("selectionsMayTouch",!1),I("readOnly",!1,function(O,D){D=="nocursor"&&(Zo(O),O.display.input.blur()),O.display.input.readOnlyChanged(D)}),I("screenReaderLabel",null,function(O,D){D=D===""?null:D,O.display.input.screenReaderLabelChanged(D)}),I("disableInput",!1,function(O,D){D||O.display.input.reset()},!0),I("dragDrop",!0,ym),I("allowDropFileTypes",null),I("cursorBlinkRate",530),I("cursorScrollMargin",0),I("cursorHeight",1,ja,!0),I("singleCursorHeightPerLine",!0,ja,!0),I("workTime",100),I("workDelay",100),I("flattenSpans",!0,OA,!0),I("addModeClass",!1,OA,!0),I("pollInterval",100),I("undoDepth",200,function(O,D){return O.doc.history.undoDepth=D}),I("historyEventDelay",1250),I("viewportMargin",10,function(O){return O.refresh()},!0),I("maxHighlightLength",1e4,OA,!0),I("moveInputWithCursor",!0,function(O,D){D||O.display.input.resetPosition()}),I("tabindex",null,function(O,D){return O.display.input.getField().tabIndex=D||""}),I("autofocus",null),I("direction","ltr",function(O,D){return O.doc.setDirection(D)},!0),I("phrases",null)}function ym(A,y,I){var O=I&&I!=Pd;if(!y!=!O){var D=A.display.dragFunctions,Z=y?Ne:rt;Z(A.display.scroller,"dragstart",D.start),Z(A.display.scroller,"dragenter",D.enter),Z(A.display.scroller,"dragover",D.over),Z(A.display.scroller,"dragleave",D.leave),Z(A.display.scroller,"drop",D.drop)}}function Yf(A){A.options.lineWrapping?(Ce(A.display.wrapper,"CodeMirror-wrap"),A.display.sizer.style.minWidth="",A.display.sizerWidth=null):(pe(A.display.wrapper,"CodeMirror-wrap"),va(A)),ZA(A),Rl(A),vc(A),setTimeout(function(){return Wu(A)},100)}function ko(A,y){var I=this;if(!(this instanceof ko))return new ko(A,y);this.options=y=y?Ue(y):{},Ue(df,y,!1);var O=y.value;typeof O=="string"?O=new Xt(O,y.mode,null,y.lineSeparator,y.direction):y.mode&&(O.modeOption=y.mode),this.doc=O;var D=new ko.inputStyles[y.inputStyle](this),Z=this.display=new Sd(A,O,D,y);Z.wrapper.CodeMirror=this,Tp(this),y.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ih(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Be,keySeq:null,specialChars:null},y.autofocus&&!J&&Z.input.focus(),d&&g<11&&setTimeout(function(){return I.display.input.reset(!0)},20),Ju(this),Oi(),Qu(this),this.curOp.forceUpdate=!0,yr(this,O),y.autofocus&&!J||this.hasFocus()?setTimeout(function(){I.hasFocus()&&!I.state.focused&&nh(I)},20):Zo(this);for(var Ae in Vl)Vl.hasOwnProperty(Ae)&&Vl[Ae](this,y[Ae],Pd);wd(this),y.finishInit&&y.finishInit(this);for(var be=0;be<hf.length;++be)hf[be](this);qu(this),b&&y.lineWrapping&&getComputedStyle(Z.lineDiv).textRendering=="optimizelegibility"&&(Z.lineDiv.style.textRendering="auto")}ko.defaults=df,ko.optionHandlers=Vl;function Ju(A){var y=A.display;Ne(y.scroller,"mousedown",Ki(A,Dh)),d&&g<11?Ne(y.scroller,"dblclick",Ki(A,function(Te){if(!ct(A,Te)){var je=wA(A,Te);if(!(!je||Ah(A,Te)||AA(A.display,Te))){wt(Te);var yt=A.findWordAt(je);Bc(A.doc,yt.anchor,yt.head)}}})):Ne(y.scroller,"dblclick",function(Te){return ct(A,Te)||wt(Te)}),Ne(y.scroller,"contextmenu",function(Te){return Qf(A,Te)}),Ne(y.input.getField(),"contextmenu",function(Te){y.scroller.contains(Te.target)||Qf(A,Te)});var I,O={end:0};function D(){y.activeTouch&&(I=setTimeout(function(){return y.activeTouch=null},1e3),O=y.activeTouch,O.end=+new Date)}function Z(Te){if(Te.touches.length!=1)return!1;var je=Te.touches[0];return je.radiusX<=1&&je.radiusY<=1}function Ae(Te,je){if(je.left==null)return!0;var yt=je.left-Te.left,St=je.top-Te.top;return yt*yt+St*St>20*20}Ne(y.scroller,"touchstart",function(Te){if(!ct(A,Te)&&!Z(Te)&&!Ah(A,Te)){y.input.ensurePolled(),clearTimeout(I);var je=+new Date;y.activeTouch={start:je,moved:!1,prev:je-O.end<=300?O:null},Te.touches.length==1&&(y.activeTouch.left=Te.touches[0].pageX,y.activeTouch.top=Te.touches[0].pageY)}}),Ne(y.scroller,"touchmove",function(){y.activeTouch&&(y.activeTouch.moved=!0)}),Ne(y.scroller,"touchend",function(Te){var je=y.activeTouch;if(je&&!AA(y,Te)&&je.left!=null&&!je.moved&&new Date-je.start<300){var yt=A.coordsChar(y.activeTouch,"page"),St;!je.prev||Ae(je,je.prev)?St=new xo(yt,yt):!je.prev.prev||Ae(je,je.prev.prev)?St=A.findWordAt(yt):St=new xo(dn(yt.line,0),ii(A.doc,dn(yt.line+1,0))),A.setSelection(St.anchor,St.head),A.focus(),wt(Te)}D()}),Ne(y.scroller,"touchcancel",D),Ne(y.scroller,"scroll",function(){y.scroller.clientHeight&&(Nu(A,y.scroller.scrollTop),Ql(A,y.scroller.scrollLeft,!0),dt(A,"scroll",A))}),Ne(y.scroller,"mousewheel",function(Te){return Mc(A,Te)}),Ne(y.scroller,"DOMMouseScroll",function(Te){return Mc(A,Te)}),Ne(y.wrapper,"scroll",function(){return y.wrapper.scrollTop=y.wrapper.scrollLeft=0}),y.dragFunctions={enter:function(Te){ct(A,Te)||pr(Te)},over:function(Te){ct(A,Te)||(kn(A,Te),pr(Te))},start:function(Te){return Cn(A,Te)},drop:Ki(A,xn),leave:function(Te){ct(A,Te)||Gn(A)}};var be=y.input.getField();Ne(be,"keyup",function(Te){return hu.call(A,Te)}),Ne(be,"keydown",Ki(A,Rh)),Ne(be,"keypress",Ki(A,kd)),Ne(be,"focus",function(Te){return nh(A,Te)}),Ne(be,"blur",function(Te){return Zo(A,Te)})}var hf=[];ko.defineInitHook=function(A){return hf.push(A)};function Rd(A,y,I,O){var D=A.doc,Z;I==null&&(I="add"),I=="smart"&&(D.mode.indent?Z=Lr(A,y).state:I="prev");var Ae=A.options.tabSize,be=Fr(D,y),Te=Re(be.text,null,Ae);be.stateAfter&&(be.stateAfter=null);var je=be.text.match(/^\s*/)[0],yt;if(!O&&!/\S/.test(be.text))yt=0,I="not";else if(I=="smart"&&(yt=D.mode.indent(Z,be.text.slice(je.length),be.text),yt==pt||yt>150)){if(!O)return;I="prev"}I=="prev"?y>D.first?yt=Re(Fr(D,y-1).text,null,Ae):yt=0:I=="add"?yt=Te+A.options.indentUnit:I=="subtract"?yt=Te-A.options.indentUnit:typeof I=="number"&&(yt=Te+I),yt=Math.max(0,yt);var St="",Jt=0;if(A.options.indentWithTabs)for(var qt=Math.floor(yt/Ae);qt;--qt)Jt+=Ae,St+="	";if(Jt<yt&&(St+=rn(yt-Jt)),St!=je)return N(D,St,dn(y,0),dn(y,je.length),"+input"),be.stateAfter=null,!0;for(var En=0;En<D.sel.ranges.length;En++){var Fn=D.sel.ranges[En];if(Fn.head.line==y&&Fn.head.ch<je.length){var Jn=dn(y,je.length);pl(D,En,new xo(Jn,Jn));break}}}var DA=null;function Fh(A){DA=A}function Pp(A,y,I,O,D){var Z=A.doc;A.display.shift=!1,O||(O=Z.sel);var Ae=+new Date-200,be=D=="paste"||A.state.pasteIncoming>Ae,Te=Ar(y),je=null;if(be&&O.ranges.length>1)if(DA&&DA.text.join(`
`)==y){if(O.ranges.length%DA.text.length==0){je=[];for(var yt=0;yt<DA.text.length;yt++)je.push(Z.splitLines(DA.text[yt]))}}else Te.length==O.ranges.length&&A.options.pasteLinesPerSelection&&(je=Kn(Te,function(sr){return[sr]}));for(var St=A.curOp.updateInput,Jt=O.ranges.length-1;Jt>=0;Jt--){var qt=O.ranges[Jt],En=qt.from(),Fn=qt.to();qt.empty()&&(I&&I>0?En=dn(En.line,En.ch-I):A.state.overwrite&&!be?Fn=dn(Fn.line,Math.min(Fr(Z,Fn.line).text.length,Fn.ch+or(Te).length)):be&&DA&&DA.lineWise&&DA.text.join(`
`)==Te.join(`
`)&&(En=Fn=dn(En.line,0)));var Jn={from:En,to:Fn,text:je?je[Jt%je.length]:Te,origin:D||(be?"paste":A.state.cutIncoming>Ae?"cut":"+input")};T(A.doc,Jn),Xs(A,"inputRead",A,Jn)}y&&!be&&ff(A,y),jo(A),A.curOp.updateInput<2&&(A.curOp.updateInput=St),A.curOp.typing=!0,A.state.pasteIncoming=A.state.cutIncoming=-1}function Pc(A,y){var I=A.clipboardData&&A.clipboardData.getData("Text");if(I)return A.preventDefault(),!y.isReadOnly()&&!y.options.disableInput&&y.hasFocus()&&Oo(y,function(){return Pp(y,I,0,null,"paste")}),!0}function ff(A,y){if(!(!A.options.electricChars||!A.options.smartIndent))for(var I=A.doc.sel,O=I.ranges.length-1;O>=0;O--){var D=I.ranges[O];if(!(D.head.ch>100||O&&I.ranges[O-1].head.line==D.head.line)){var Z=A.getModeAt(D.head),Ae=!1;if(Z.electricChars){for(var be=0;be<Z.electricChars.length;be++)if(y.indexOf(Z.electricChars.charAt(be))>-1){Ae=Rd(A,D.head.line,"smart");break}}else Z.electricInput&&Z.electricInput.test(Fr(A.doc,D.head.line).text.slice(0,D.head.ch))&&(Ae=Rd(A,D.head.line,"smart"));Ae&&Xs(A,"electricInput",A,D.head.line)}}}function pf(A){for(var y=[],I=[],O=0;O<A.doc.sel.ranges.length;O++){var D=A.doc.sel.ranges[O].head.line,Z={anchor:dn(D,0),head:dn(D+1,0)};I.push(Z),y.push(A.getRange(Z.anchor,Z.head))}return{text:y,ranges:I}}function ch(A,y,I,O){A.setAttribute("autocorrect",I?"on":"off"),A.setAttribute("autocapitalize",O?"on":"off"),A.setAttribute("spellcheck",!!y)}function Dd(){var A=ge("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),y=ge("div",[A],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?A.style.width="1000px":A.setAttribute("wrap","off"),q&&(A.style.border="1px solid black"),y}function ed(A){var y=A.optionHandlers,I=A.helpers={};A.prototype={constructor:A,focus:function(){Dt(this).focus(),this.display.input.focus()},setOption:function(O,D){var Z=this.options,Ae=Z[O];Z[O]==D&&O!="mode"||(Z[O]=D,y.hasOwnProperty(O)&&Ki(this,y[O])(this,D,Ae),dt(this,"optionChange",this,O))},getOption:function(O){return this.options[O]},getDoc:function(){return this.doc},addKeyMap:function(O,D){this.state.keyMaps[D?"push":"unshift"](gl(O))},removeKeyMap:function(O){for(var D=this.state.keyMaps,Z=0;Z<D.length;++Z)if(D[Z]==O||D[Z].name==O)return D.splice(Z,1),!0},addOverlay:Vr(function(O,D){var Z=O.token?O:A.getMode(this.options,O);if(Z.startState)throw new Error("Overlays may not be stateful.");pn(this.state.overlays,{mode:Z,modeSpec:O,opaque:D&&D.opaque,priority:D&&D.priority||0},function(Ae){return Ae.priority}),this.state.modeGen++,Rl(this)}),removeOverlay:Vr(function(O){for(var D=this.state.overlays,Z=0;Z<D.length;++Z){var Ae=D[Z].modeSpec;if(Ae==O||typeof O=="string"&&Ae.name==O){D.splice(Z,1),this.state.modeGen++,Rl(this);return}}}),indentLine:Vr(function(O,D,Z){typeof D!="string"&&typeof D!="number"&&(D==null?D=this.options.smartIndent?"smart":"prev":D=D?"add":"subtract"),yn(this.doc,O)&&Rd(this,O,D,Z)}),indentSelection:Vr(function(O){for(var D=this.doc.sel.ranges,Z=-1,Ae=0;Ae<D.length;Ae++){var be=D[Ae];if(be.empty())be.head.line>Z&&(Rd(this,be.head.line,O,!0),Z=be.head.line,Ae==this.doc.sel.primIndex&&jo(this));else{var Te=be.from(),je=be.to(),yt=Math.max(Z,Te.line);Z=Math.min(this.lastLine(),je.line-(je.ch?0:1))+1;for(var St=yt;St<Z;++St)Rd(this,St,O);var Jt=this.doc.sel.ranges;Te.ch==0&&D.length==Jt.length&&Jt[Ae].from().ch>0&&pl(this.doc,Ae,new xo(Te,Jt[Ae].to()),zt)}}}),getTokenAt:function(O,D){return Qs(this,O,D)},getLineTokens:function(O,D){return Qs(this,dn(O),D,!0)},getTokenTypeAt:function(O){O=ii(this.doc,O);var D=us(this,Fr(this.doc,O.line)),Z=0,Ae=(D.length-1)/2,be=O.ch,Te;if(be==0)Te=D[2];else for(;;){var je=Z+Ae>>1;if((je?D[je*2-1]:0)>=be)Ae=je;else if(D[je*2+1]<be)Z=je+1;else{Te=D[je*2+2];break}}var yt=Te?Te.indexOf("overlay "):-1;return yt<0?Te:yt==0?null:Te.slice(0,yt-1)},getModeAt:function(O){var D=this.doc.mode;return D.innerMode?A.innerMode(D,this.getTokenAt(O).state).mode:D},getHelper:function(O,D){return this.getHelpers(O,D)[0]},getHelpers:function(O,D){var Z=[];if(!I.hasOwnProperty(D))return Z;var Ae=I[D],be=this.getModeAt(O);if(typeof be[D]=="string")Ae[be[D]]&&Z.push(Ae[be[D]]);else if(be[D])for(var Te=0;Te<be[D].length;Te++){var je=Ae[be[D][Te]];je&&Z.push(je)}else be.helperType&&Ae[be.helperType]?Z.push(Ae[be.helperType]):Ae[be.name]&&Z.push(Ae[be.name]);for(var yt=0;yt<Ae._global.length;yt++){var St=Ae._global[yt];St.pred(be,this)&&nt(Z,St.val)==-1&&Z.push(St.val)}return Z},getStateAfter:function(O,D){var Z=this.doc;return O=bA(Z,O??Z.first+Z.size-1),Lr(this,O+1,D).state},cursorCoords:function(O,D){var Z,Ae=this.doc.sel.primary();return O==null?Z=Ae.head:typeof O=="object"?Z=ii(this.doc,O):Z=O?Ae.from():Ae.to(),ln(this,Z,D||"page")},charCoords:function(O,D){return Rn(this,ii(this.doc,O),D||"page")},coordsChar:function(O,D){return O=Zt(this,O,D||"page"),bo(this,O.left,O.top)},lineAtHeight:function(O,D){return O=Zt(this,{top:O,left:0},D||"page").top,Mt(this.doc,O+this.display.viewOffset)},heightAtLine:function(O,D,Z){var Ae=!1,be;if(typeof O=="number"){var Te=this.doc.first+this.doc.size-1;O<this.doc.first?O=this.doc.first:O>Te&&(O=Te,Ae=!0),be=Fr(this.doc,O)}else be=O;return Cu(this,be,{top:0,left:0},D||"page",Z||Ae).top+(Ae?this.doc.height-Xi(be):0)},defaultTextHeight:function(){return Pl(this.display)},defaultCharWidth:function(){return Gi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(O,D,Z,Ae,be){var Te=this.display;O=ln(this,ii(this.doc,O));var je=O.bottom,yt=O.left;if(D.style.position="absolute",D.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(D),Te.sizer.appendChild(D),Ae=="over")je=O.top;else if(Ae=="above"||Ae=="near"){var St=Math.max(Te.wrapper.clientHeight,this.doc.height),Jt=Math.max(Te.sizer.clientWidth,Te.lineSpace.clientWidth);(Ae=="above"||O.bottom+D.offsetHeight>St)&&O.top>D.offsetHeight?je=O.top-D.offsetHeight:O.bottom+D.offsetHeight<=St&&(je=O.bottom),yt+D.offsetWidth>Jt&&(yt=Jt-D.offsetWidth)}D.style.top=je+"px",D.style.left=D.style.right="",be=="right"?(yt=Te.sizer.clientWidth-D.offsetWidth,D.style.right="0px"):(be=="left"?yt=0:be=="middle"&&(yt=(Te.sizer.clientWidth-D.offsetWidth)/2),D.style.left=yt+"px"),Z&&Zc(this,{left:yt,top:je,right:yt+D.offsetWidth,bottom:je+D.offsetHeight})},triggerOnKeyDown:Vr(Rh),triggerOnKeyPress:Vr(kd),triggerOnKeyUp:hu,triggerOnMouseDown:Vr(Dh),execCommand:function(O){if(yl.hasOwnProperty(O))return yl[O].call(null,this)},triggerElectric:Vr(function(O){ff(this,O)}),findPosH:function(O,D,Z,Ae){var be=1;D<0&&(be=-1,D=-D);for(var Te=ii(this.doc,O),je=0;je<D&&(Te=hi(this.doc,Te,be,Z,Ae),!Te.hitSide);++je);return Te},moveH:Vr(function(O,D){var Z=this;this.extendSelectionsBy(function(Ae){return Z.display.shift||Z.doc.extend||Ae.empty()?hi(Z.doc,Ae.head,O,D,Z.options.rtlMoveVisually):O<0?Ae.from():Ae.to()},Lt)}),deleteH:Vr(function(O,D){var Z=this.doc.sel,Ae=this.doc;Z.somethingSelected()?Ae.replaceSelection("",null,"+delete"):du(this,function(be){var Te=hi(Ae,be.head,O,D,!1);return O<0?{from:Te,to:be.head}:{from:be.head,to:Te}})}),findPosV:function(O,D,Z,Ae){var be=1,Te=Ae;D<0&&(be=-1,D=-D);for(var je=ii(this.doc,O),yt=0;yt<D;++yt){var St=ln(this,je,"div");if(Te==null?Te=St.left:St.left=Te,je=td(this,St,be,Z),je.hitSide)break}return je},moveV:Vr(function(O,D){var Z=this,Ae=this.doc,be=[],Te=!this.display.shift&&!Ae.extend&&Ae.sel.somethingSelected();if(Ae.extendSelectionsBy(function(yt){if(Te)return O<0?yt.from():yt.to();var St=ln(Z,yt.head,"div");yt.goalColumn!=null&&(St.left=yt.goalColumn),be.push(St.left);var Jt=td(Z,St,O,D);return D=="page"&&yt==Ae.sel.primary()&&cs(Z,Rn(Z,Jt,"div").top-St.top),Jt},Lt),be.length)for(var je=0;je<Ae.sel.ranges.length;je++)Ae.sel.ranges[je].goalColumn=be[je]}),findWordAt:function(O){var D=this.doc,Z=Fr(D,O.line).text,Ae=O.ch,be=O.ch;if(Z){var Te=this.getHelper(O,"wordChars");(O.sticky=="before"||be==Z.length)&&Ae?--Ae:++be;for(var je=Z.charAt(Ae),yt=qe(je,Te)?function(St){return qe(St,Te)}:/\s/.test(je)?function(St){return/\s/.test(St)}:function(St){return!/\s/.test(St)&&!qe(St)};Ae>0&&yt(Z.charAt(Ae-1));)--Ae;for(;be<Z.length&&yt(Z.charAt(be));)++be}return new xo(dn(O.line,Ae),dn(O.line,be))},toggleOverwrite:function(O){O!=null&&O==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ce(this.display.cursorDiv,"CodeMirror-overwrite"):pe(this.display.cursorDiv,"CodeMirror-overwrite"),dt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==We(_t(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Vr(function(O,D){ds(this,O,D)}),getScrollInfo:function(){var O=this.display.scroller;return{left:O.scrollLeft,top:O.scrollTop,height:O.scrollHeight-au(this)-this.display.barHeight,width:O.scrollWidth-au(this)-this.display.barWidth,clientHeight:YA(this),clientWidth:Il(this)}},scrollIntoView:Vr(function(O,D){O==null?(O={from:this.doc.sel.primary().head,to:null},D==null&&(D=this.options.cursorScrollMargin)):typeof O=="number"?O={from:dn(O,0),to:null}:O.from==null&&(O={from:O,to:null}),O.to||(O.to=O.from),O.margin=D||0,O.from.line!=null?Nf(this,O):Cd(this,O.from,O.to,O.margin)}),setSize:Vr(function(O,D){var Z=this,Ae=function(Te){return typeof Te=="number"||/^\d+$/.test(String(Te))?Te+"px":Te};O!=null&&(this.display.wrapper.style.width=Ae(O)),D!=null&&(this.display.wrapper.style.height=Ae(D)),this.options.lineWrapping&&Jd(this);var be=this.display.viewFrom;this.doc.iter(be,this.display.viewTo,function(Te){if(Te.widgets){for(var je=0;je<Te.widgets.length;je++)if(Te.widgets[je].noHScroll){_c(Z,be,"widget");break}}++be}),this.curOp.forceUpdate=!0,dt(this,"refresh",this)}),operation:function(O){return Oo(this,O)},startOperation:function(){return Qu(this)},endOperation:function(){return qu(this)},refresh:Vr(function(){var O=this.display.cachedTextHeight;Rl(this),this.curOp.forceUpdate=!0,vc(this),ds(this,this.doc.scrollLeft,this.doc.scrollTop),ka(this.display),(O==null||Math.abs(O-Pl(this.display))>.5||this.options.lineWrapping)&&ZA(this),dt(this,"refresh",this)}),swapDoc:Vr(function(O){var D=this.doc;return D.cm=null,this.state.selectingText&&this.state.selectingText(),yr(this,O),vc(this),this.display.input.reset(),ds(this,O.scrollLeft,O.scrollTop),this.curOp.forceScroll=!0,Xs(this,"swapDoc",this,D),D}),phrase:function(O){var D=this.options.phrases;return D&&Object.prototype.hasOwnProperty.call(D,O)?D[O]:O},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Nt(A),A.registerHelper=function(O,D,Z){I.hasOwnProperty(O)||(I[O]=A[O]={_global:[]}),I[O][D]=Z},A.registerGlobalHelper=function(O,D,Z,Ae){A.registerHelper(O,D,Ae),I[O]._global.push({pred:Z,val:Ae})}}function hi(A,y,I,O,D){var Z=y,Ae=I,be=Fr(A,y.line),Te=D&&A.direction=="rtl"?-I:I;function je(){var xr=y.line+Te;return xr<A.first||xr>=A.first+A.size?!1:(y=new dn(xr,y.ch,y.sticky),be=Fr(A,xr))}function yt(xr){var hr;if(O=="codepoint"){var Ur=be.text.charCodeAt(y.ch+(I>0?0:-1));if(isNaN(Ur))hr=null;else{var li=I>0?Ur>=55296&&Ur<56320:Ur>=56320&&Ur<57343;hr=new dn(y.line,Math.max(0,Math.min(be.text.length,y.ch+I*(li?2:1))),-I)}}else D?hr=ea(A.cm,be,y,I):hr=PA(be,y,I);if(hr==null)if(!xr&&je())y=Xu(D,A.cm,be,y.line,Te);else return!1;else y=hr;return!0}if(O=="char"||O=="codepoint")yt();else if(O=="column")yt(!0);else if(O=="word"||O=="group")for(var St=null,Jt=O=="group",qt=A.cm&&A.cm.getHelper(y,"wordChars"),En=!0;!(I<0&&!yt(!En));En=!1){var Fn=be.text.charAt(y.ch)||`
`,Jn=qe(Fn,qt)?"w":Jt&&Fn==`
`?"n":!Jt||/\s/.test(Fn)?null:"p";if(Jt&&!En&&!Jn&&(Jn="s"),St&&St!=Jn){I<0&&(I=1,yt(),y.sticky="after");break}if(Jn&&(St=Jn),I>0&&!yt(!En))break}var sr=Ic(A,y,Z,Ae,!0);return Ri(Z,sr)&&(sr.hitSide=!0),sr}function td(A,y,I,O){var D=A.doc,Z=y.left,Ae;if(O=="page"){var be=Math.min(A.display.wrapper.clientHeight,Dt(A).innerHeight||D(A).documentElement.clientHeight),Te=Math.max(be-.5*Pl(A.display),3);Ae=(I>0?y.bottom:y.top)+I*Te}else O=="line"&&(Ae=I>0?y.bottom+3:y.top-3);for(var je;je=bo(A,Z,Ae),!!je.outside;){if(I<0?Ae<=0:Ae>=D.height){je.hitSide=!0;break}Ae+=I*5}return je}var os=function(A){this.cm=A,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Be,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};os.prototype.init=function(A){var y=this,I=this,O=I.cm,D=I.div=A.lineDiv;D.contentEditable=!0,ch(D,O.options.spellcheck,O.options.autocorrect,O.options.autocapitalize);function Z(be){for(var Te=be.target;Te;Te=Te.parentNode){if(Te==D)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Te.className))break}return!1}Ne(D,"paste",function(be){!Z(be)||ct(O,be)||Pc(be,O)||g<=11&&setTimeout(Ki(O,function(){return y.updateFromDOM()}),20)}),Ne(D,"compositionstart",function(be){y.composing={data:be.data,done:!1}}),Ne(D,"compositionupdate",function(be){y.composing||(y.composing={data:be.data,done:!1})}),Ne(D,"compositionend",function(be){y.composing&&(be.data!=y.composing.data&&y.readFromDOMSoon(),y.composing.done=!0)}),Ne(D,"touchstart",function(){return I.forceCompositionEnd()}),Ne(D,"input",function(){y.composing||y.readFromDOMSoon()});function Ae(be){if(!(!Z(be)||ct(O,be))){if(O.somethingSelected())Fh({lineWise:!1,text:O.getSelections()}),be.type=="cut"&&O.replaceSelection("",null,"cut");else if(O.options.lineWiseCopyCut){var Te=pf(O);Fh({lineWise:!0,text:Te.text}),be.type=="cut"&&O.operation(function(){O.setSelections(Te.ranges,0,zt),O.replaceSelection("",null,"cut")})}else return;if(be.clipboardData){be.clipboardData.clearData();var je=DA.text.join(`
`);if(be.clipboardData.setData("Text",je),be.clipboardData.getData("Text")==je){be.preventDefault();return}}var yt=Dd(),St=yt.firstChild;ch(St),O.display.lineSpace.insertBefore(yt,O.display.lineSpace.firstChild),St.value=DA.text.join(`
`);var Jt=We(ft(D));it(St),setTimeout(function(){O.display.lineSpace.removeChild(yt),Jt.focus(),Jt==D&&I.showPrimarySelection()},50)}}Ne(D,"copy",Ae),Ne(D,"cut",Ae)},os.prototype.screenReaderLabelChanged=function(A){A?this.div.setAttribute("aria-label",A):this.div.removeAttribute("aria-label")},os.prototype.prepareSelection=function(){var A=yd(this.cm,!1);return A.focus=We(ft(this.div))==this.div,A},os.prototype.showSelection=function(A,y){!A||!this.cm.display.view.length||((A.focus||y)&&this.showPrimarySelection(),this.showMultipleSelections(A))},os.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},os.prototype.showPrimarySelection=function(){var A=this.getSelection(),y=this.cm,I=y.doc.sel.primary(),O=I.from(),D=I.to();if(y.display.viewTo==y.display.viewFrom||O.line>=y.display.viewTo||D.line<y.display.viewFrom){A.removeAllRanges();return}var Z=vl(y,A.anchorNode,A.anchorOffset),Ae=vl(y,A.focusNode,A.focusOffset);if(!(Z&&!Z.bad&&Ae&&!Ae.bad&&ar(Gs(Z,Ae),O)==0&&ar(_s(Z,Ae),D)==0)){var be=y.display.view,Te=O.line>=y.display.viewFrom&&Kd(y,O)||{node:be[0].measure.map[2],offset:0},je=D.line<y.display.viewTo&&Kd(y,D);if(!je){var yt=be[be.length-1].measure,St=yt.maps?yt.maps[yt.maps.length-1]:yt.map;je={node:St[St.length-1],offset:St[St.length-2]-St[St.length-3]}}if(!Te||!je){A.removeAllRanges();return}var Jt=A.rangeCount&&A.getRangeAt(0),qt;try{qt=Qe(Te.node,Te.offset,je.offset,je.node)}catch{}qt&&(!i&&y.state.focused?(A.collapse(Te.node,Te.offset),qt.collapsed||(A.removeAllRanges(),A.addRange(qt))):(A.removeAllRanges(),A.addRange(qt)),Jt&&A.anchorNode==null?A.addRange(Jt):i&&this.startGracePeriod()),this.rememberSelection()}},os.prototype.startGracePeriod=function(){var A=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){A.gracePeriod=!1,A.selectionChanged()&&A.cm.operation(function(){return A.cm.curOp.selectionChanged=!0})},20)},os.prototype.showMultipleSelections=function(A){Ke(this.cm.display.cursorDiv,A.cursors),Ke(this.cm.display.selectionDiv,A.selection)},os.prototype.rememberSelection=function(){var A=this.getSelection();this.lastAnchorNode=A.anchorNode,this.lastAnchorOffset=A.anchorOffset,this.lastFocusNode=A.focusNode,this.lastFocusOffset=A.focusOffset},os.prototype.selectionInEditor=function(){var A=this.getSelection();if(!A.rangeCount)return!1;var y=A.getRangeAt(0).commonAncestorContainer;return Ze(this.div,y)},os.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||We(ft(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},os.prototype.blur=function(){this.div.blur()},os.prototype.getField=function(){return this.div},os.prototype.supportsTouch=function(){return!0},os.prototype.receivedFocus=function(){var A=this,y=this;this.selectionInEditor()?setTimeout(function(){return A.pollSelection()},20):Oo(this.cm,function(){return y.cm.curOp.selectionChanged=!0});function I(){y.cm.state.focused&&(y.pollSelection(),y.polling.set(y.cm.options.pollInterval,I))}this.polling.set(this.cm.options.pollInterval,I)},os.prototype.selectionChanged=function(){var A=this.getSelection();return A.anchorNode!=this.lastAnchorNode||A.anchorOffset!=this.lastAnchorOffset||A.focusNode!=this.lastFocusNode||A.focusOffset!=this.lastFocusOffset},os.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var A=this.getSelection(),y=this.cm;if(ie&&S&&this.cm.display.gutterSpecs.length&&Rp(A.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var I=vl(y,A.anchorNode,A.anchorOffset),O=vl(y,A.focusNode,A.focusOffset);I&&O&&Oo(y,function(){_a(y.doc,Wa(I,O),zt),(I.bad||O.bad)&&(y.curOp.selectionChanged=!0)})}}},os.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var A=this.cm,y=A.display,I=A.doc.sel.primary(),O=I.from(),D=I.to();if(O.ch==0&&O.line>A.firstLine()&&(O=dn(O.line-1,Fr(A.doc,O.line-1).length)),D.ch==Fr(A.doc,D.line).text.length&&D.line<A.lastLine()&&(D=dn(D.line+1,0)),O.line<y.viewFrom||D.line>y.viewTo-1)return!1;var Z,Ae,be;O.line==y.viewFrom||(Z=cA(A,O.line))==0?(Ae=Ye(y.view[0].line),be=y.view[0].node):(Ae=Ye(y.view[Z].line),be=y.view[Z-1].node.nextSibling);var Te=cA(A,D.line),je,yt;if(Te==y.view.length-1?(je=y.viewTo-1,yt=y.lineDiv.lastChild):(je=Ye(y.view[Te+1].line)-1,yt=y.view[Te+1].node.previousSibling),!be)return!1;for(var St=A.doc.splitLines(t0(A,be,yt,Ae,je)),Jt=Ja(A.doc,dn(Ae,0),dn(je,Fr(A.doc,je).text.length));St.length>1&&Jt.length>1;)if(or(St)==or(Jt))St.pop(),Jt.pop(),je--;else if(St[0]==Jt[0])St.shift(),Jt.shift(),Ae++;else break;for(var qt=0,En=0,Fn=St[0],Jn=Jt[0],sr=Math.min(Fn.length,Jn.length);qt<sr&&Fn.charCodeAt(qt)==Jn.charCodeAt(qt);)++qt;for(var xr=or(St),hr=or(Jt),Ur=Math.min(xr.length-(St.length==1?qt:0),hr.length-(Jt.length==1?qt:0));En<Ur&&xr.charCodeAt(xr.length-En-1)==hr.charCodeAt(hr.length-En-1);)++En;if(St.length==1&&Jt.length==1&&Ae==O.line)for(;qt&&qt>O.ch&&xr.charCodeAt(xr.length-En-1)==hr.charCodeAt(hr.length-En-1);)qt--,En++;St[St.length-1]=xr.slice(0,xr.length-En).replace(/^\u200b+/,""),St[0]=St[0].slice(qt).replace(/\u200b+$/,"");var li=dn(Ae,qt),Gr=dn(je,Jt.length?or(Jt).length-En:0);if(St.length>1||St[0]||ar(li,Gr))return N(A.doc,St,li,Gr,"+input"),!0},os.prototype.ensurePolled=function(){this.forceCompositionEnd()},os.prototype.reset=function(){this.forceCompositionEnd()},os.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},os.prototype.readFromDOMSoon=function(){var A=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(A.readDOMTimeout=null,A.composing)if(A.composing.done)A.composing=null;else return;A.updateFromDOM()},80))},os.prototype.updateFromDOM=function(){var A=this;(this.cm.isReadOnly()||!this.pollContent())&&Oo(this.cm,function(){return Rl(A.cm)})},os.prototype.setUneditable=function(A){A.contentEditable="false"},os.prototype.onKeyPress=function(A){A.charCode==0||this.composing||(A.preventDefault(),this.cm.isReadOnly()||Ki(this.cm,Pp)(this.cm,String.fromCharCode(A.charCode==null?A.keyCode:A.charCode),0))},os.prototype.readOnlyChanged=function(A){this.div.contentEditable=String(A!="nocursor")},os.prototype.onContextMenu=function(){},os.prototype.resetPosition=function(){},os.prototype.needsContentAttribute=!0;function Kd(A,y){var I=xA(A,y.line);if(!I||I.hidden)return null;var O=Fr(A.doc,y.line),D=uf(I,O,y.line),Z=_e(O,A.doc.direction),Ae="left";if(Z){var be=Oe(Z,y.ch);Ae=be%2?"right":"left"}var Te=kh(D.map,y.ch,Ae);return Te.offset=Te.collapse=="right"?Te.end:Te.start,Te}function Rp(A){for(var y=A;y;y=y.parentNode)if(/CodeMirror-gutter-wrapper/.test(y.className))return!0;return!1}function Ou(A,y){return y&&(A.bad=!0),A}function t0(A,y,I,O,D){var Z="",Ae=!1,be=A.doc.lineSeparator(),Te=!1;function je(qt){return function(En){return En.id==qt}}function yt(){Ae&&(Z+=be,Te&&(Z+=be),Ae=Te=!1)}function St(qt){qt&&(yt(),Z+=qt)}function Jt(qt){if(qt.nodeType==1){var En=qt.getAttribute("cm-text");if(En){St(En);return}var Fn=qt.getAttribute("cm-marker"),Jn;if(Fn){var sr=A.findMarks(dn(O,0),dn(D+1,0),je(+Fn));sr.length&&(Jn=sr[0].find(0))&&St(Ja(A.doc,Jn.from,Jn.to).join(be));return}if(qt.getAttribute("contenteditable")=="false")return;var xr=/^(pre|div|p|li|table|br)$/i.test(qt.nodeName);if(!/^br$/i.test(qt.nodeName)&&qt.textContent.length==0)return;xr&&yt();for(var hr=0;hr<qt.childNodes.length;hr++)Jt(qt.childNodes[hr]);/^(pre|p)$/i.test(qt.nodeName)&&(Te=!0),xr&&(Ae=!0)}else qt.nodeType==3&&St(qt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Jt(y),y!=I;)y=y.nextSibling,Te=!1;return Z}function vl(A,y,I){var O;if(y==A.display.lineDiv){if(O=A.display.lineDiv.childNodes[I],!O)return Ou(A.clipPos(dn(A.display.viewTo-1)),!0);y=null,I=0}else for(O=y;;O=O.parentNode){if(!O||O==A.display.lineDiv)return null;if(O.parentNode&&O.parentNode==A.display.lineDiv)break}for(var D=0;D<A.display.view.length;D++){var Z=A.display.view[D];if(Z.node==O)return vm(Z,y,I)}}function vm(A,y,I){var O=A.text.firstChild,D=!1;if(!y||!Ze(O,y))return Ou(dn(Ye(A.line),0),!0);if(y==O&&(D=!0,y=O.childNodes[I],I=0,!y)){var Z=A.rest?or(A.rest):A.line;return Ou(dn(Ye(Z),Z.text.length),D)}var Ae=y.nodeType==3?y:null,be=y;for(!Ae&&y.childNodes.length==1&&y.firstChild.nodeType==3&&(Ae=y.firstChild,I&&(I=Ae.nodeValue.length));be.parentNode!=O;)be=be.parentNode;var Te=A.measure,je=Te.maps;function yt(Jn,sr,xr){for(var hr=-1;hr<(je?je.length:0);hr++)for(var Ur=hr<0?Te.map:je[hr],li=0;li<Ur.length;li+=3){var Gr=Ur[li+2];if(Gr==Jn||Gr==sr){var Ji=Ye(hr<0?A.line:A.rest[hr]),To=Ur[li]+xr;return(xr<0||Gr!=Jn)&&(To=Ur[li+(xr?1:0)]),dn(Ji,To)}}}var St=yt(Ae,be,I);if(St)return Ou(St,D);for(var Jt=be.nextSibling,qt=Ae?Ae.nodeValue.length-I:0;Jt;Jt=Jt.nextSibling){if(St=yt(Jt,Jt.firstChild,0),St)return Ou(dn(St.line,St.ch-qt),D);qt+=Jt.textContent.length}for(var En=be.previousSibling,Fn=I;En;En=En.previousSibling){if(St=yt(En,En.firstChild,-1),St)return Ou(dn(St.line,St.ch+Fn),D);Fn+=En.textContent.length}}var fa=function(A){this.cm=A,this.prevInput="",this.pollingFast=!1,this.polling=new Be,this.hasSelection=!1,this.composing=null,this.resetting=!1};fa.prototype.init=function(A){var y=this,I=this,O=this.cm;this.createField(A);var D=this.textarea;A.wrapper.insertBefore(this.wrapper,A.wrapper.firstChild),q&&(D.style.width="0px"),Ne(D,"input",function(){d&&g>=9&&y.hasSelection&&(y.hasSelection=null),I.poll()}),Ne(D,"paste",function(Ae){ct(O,Ae)||Pc(Ae,O)||(O.state.pasteIncoming=+new Date,I.fastPoll())});function Z(Ae){if(!ct(O,Ae)){if(O.somethingSelected())Fh({lineWise:!1,text:O.getSelections()});else if(O.options.lineWiseCopyCut){var be=pf(O);Fh({lineWise:!0,text:be.text}),Ae.type=="cut"?O.setSelections(be.ranges,null,zt):(I.prevInput="",D.value=be.text.join(`
`),it(D))}else return;Ae.type=="cut"&&(O.state.cutIncoming=+new Date)}}Ne(D,"cut",Z),Ne(D,"copy",Z),Ne(A.scroller,"paste",function(Ae){if(!(AA(A,Ae)||ct(O,Ae))){if(!D.dispatchEvent){O.state.pasteIncoming=+new Date,I.focus();return}var be=new Event("paste");be.clipboardData=Ae.clipboardData,D.dispatchEvent(be)}}),Ne(A.lineSpace,"selectstart",function(Ae){AA(A,Ae)||wt(Ae)}),Ne(D,"compositionstart",function(){var Ae=O.getCursor("from");I.composing&&I.composing.range.clear(),I.composing={start:Ae,range:O.markText(Ae,O.getCursor("to"),{className:"CodeMirror-composing"})}}),Ne(D,"compositionend",function(){I.composing&&(I.poll(),I.composing.range.clear(),I.composing=null)})},fa.prototype.createField=function(A){this.wrapper=Dd(),this.textarea=this.wrapper.firstChild;var y=this.cm.options;ch(this.textarea,y.spellcheck,y.autocorrect,y.autocapitalize)},fa.prototype.screenReaderLabelChanged=function(A){A?this.textarea.setAttribute("aria-label",A):this.textarea.removeAttribute("aria-label")},fa.prototype.prepareSelection=function(){var A=this.cm,y=A.display,I=A.doc,O=yd(A);if(A.options.moveInputWithCursor){var D=ln(A,I.sel.primary().head,"div"),Z=y.wrapper.getBoundingClientRect(),Ae=y.lineDiv.getBoundingClientRect();O.teTop=Math.max(0,Math.min(y.wrapper.clientHeight-10,D.top+Ae.top-Z.top)),O.teLeft=Math.max(0,Math.min(y.wrapper.clientWidth-10,D.left+Ae.left-Z.left))}return O},fa.prototype.showSelection=function(A){var y=this.cm,I=y.display;Ke(I.cursorDiv,A.cursors),Ke(I.selectionDiv,A.selection),A.teTop!=null&&(this.wrapper.style.top=A.teTop+"px",this.wrapper.style.left=A.teLeft+"px")},fa.prototype.reset=function(A){if(!(this.contextMenuPending||this.composing&&A)){var y=this.cm;if(this.resetting=!0,y.somethingSelected()){this.prevInput="";var I=y.getSelection();this.textarea.value=I,y.state.focused&&it(this.textarea),d&&g>=9&&(this.hasSelection=I)}else A||(this.prevInput=this.textarea.value="",d&&g>=9&&(this.hasSelection=null));this.resetting=!1}},fa.prototype.getField=function(){return this.textarea},fa.prototype.supportsTouch=function(){return!1},fa.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!J||We(ft(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},fa.prototype.blur=function(){this.textarea.blur()},fa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},fa.prototype.receivedFocus=function(){this.slowPoll()},fa.prototype.slowPoll=function(){var A=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){A.poll(),A.cm.state.focused&&A.slowPoll()})},fa.prototype.fastPoll=function(){var A=!1,y=this;y.pollingFast=!0;function I(){var O=y.poll();!O&&!A?(A=!0,y.polling.set(60,I)):(y.pollingFast=!1,y.slowPoll())}y.polling.set(20,I)},fa.prototype.poll=function(){var A=this,y=this.cm,I=this.textarea,O=this.prevInput;if(this.contextMenuPending||this.resetting||!y.state.focused||ho(I)&&!O&&!this.composing||y.isReadOnly()||y.options.disableInput||y.state.keySeq)return!1;var D=I.value;if(D==O&&!y.somethingSelected())return!1;if(d&&g>=9&&this.hasSelection===D||$&&/[\uf700-\uf7ff]/.test(D))return y.display.input.reset(),!1;if(y.doc.sel==y.display.selForContextMenu){var Z=D.charCodeAt(0);if(Z==8203&&!O&&(O="​"),Z==8666)return this.reset(),this.cm.execCommand("undo")}for(var Ae=0,be=Math.min(O.length,D.length);Ae<be&&O.charCodeAt(Ae)==D.charCodeAt(Ae);)++Ae;return Oo(y,function(){Pp(y,D.slice(Ae),O.length-Ae,null,A.composing?"*compose":null),D.length>1e3||D.indexOf(`
`)>-1?I.value=A.prevInput="":A.prevInput=D,A.composing&&(A.composing.range.clear(),A.composing.range=y.markText(A.composing.start,y.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},fa.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},fa.prototype.onKeyPress=function(){d&&g>=9&&(this.hasSelection=null),this.fastPoll()},fa.prototype.onContextMenu=function(A){var y=this,I=y.cm,O=I.display,D=y.textarea;y.contextMenuPending&&y.contextMenuPending();var Z=wA(I,A),Ae=O.scroller.scrollTop;if(!Z||k)return;var be=I.options.resetSelectionOnContextMenu;be&&I.doc.sel.contains(Z)==-1&&Ki(I,_a)(I.doc,Wa(Z),zt);var Te=D.style.cssText,je=y.wrapper.style.cssText,yt=y.wrapper.offsetParent.getBoundingClientRect();y.wrapper.style.cssText="position: static",D.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(A.clientY-yt.top-5)+"px; left: "+(A.clientX-yt.left-5)+`px;
      z-index: 1000; background: `+(d?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var St;b&&(St=D.ownerDocument.defaultView.scrollY),O.input.focus(),b&&D.ownerDocument.defaultView.scrollTo(null,St),O.input.reset(),I.somethingSelected()||(D.value=y.prevInput=" "),y.contextMenuPending=qt,O.selForContextMenu=I.doc.sel,clearTimeout(O.detectingSelectAll);function Jt(){if(D.selectionStart!=null){var Fn=I.somethingSelected(),Jn="​"+(Fn?D.value:"");D.value="⇚",D.value=Jn,y.prevInput=Fn?"":"​",D.selectionStart=1,D.selectionEnd=Jn.length,O.selForContextMenu=I.doc.sel}}function qt(){if(y.contextMenuPending==qt&&(y.contextMenuPending=!1,y.wrapper.style.cssText=je,D.style.cssText=Te,d&&g<9&&O.scrollbars.setScrollTop(O.scroller.scrollTop=Ae),D.selectionStart!=null)){(!d||d&&g<9)&&Jt();var Fn=0,Jn=function(){O.selForContextMenu==I.doc.sel&&D.selectionStart==0&&D.selectionEnd>0&&y.prevInput=="​"?Ki(I,$l)(I):Fn++<10?O.detectingSelectAll=setTimeout(Jn,500):(O.selForContextMenu=null,O.input.reset())};O.detectingSelectAll=setTimeout(Jn,200)}}if(d&&g>=9&&Jt(),he){pr(A);var En=function(){rt(window,"mouseup",En),setTimeout(qt,20)};Ne(window,"mouseup",En)}else setTimeout(qt,50)},fa.prototype.readOnlyChanged=function(A){A||this.reset(),this.textarea.disabled=A=="nocursor",this.textarea.readOnly=!!A},fa.prototype.setUneditable=function(){},fa.prototype.needsContentAttribute=!1;function Cm(A,y){if(y=y?Ue(y):{},y.value=A.value,!y.tabindex&&A.tabIndex&&(y.tabindex=A.tabIndex),!y.placeholder&&A.placeholder&&(y.placeholder=A.placeholder),y.autofocus==null){var I=We(ft(A));y.autofocus=I==A||A.getAttribute("autofocus")!=null&&I==document.body}function O(){A.value=be.getValue()}var D;if(A.form&&(Ne(A.form,"submit",O),!y.leaveSubmitMethodAlone)){var Z=A.form;D=Z.submit;try{var Ae=Z.submit=function(){O(),Z.submit=D,Z.submit(),Z.submit=Ae}}catch{}}y.finishInit=function(Te){Te.save=O,Te.getTextArea=function(){return A},Te.toTextArea=function(){Te.toTextArea=isNaN,O(),A.parentNode.removeChild(Te.getWrapperElement()),A.style.display="",A.form&&(rt(A.form,"submit",O),!y.leaveSubmitMethodAlone&&typeof A.form.submit=="function"&&(A.form.submit=D))}},A.style.display="none";var be=ko(function(Te){return A.parentNode.insertBefore(Te,A.nextSibling)},y);return be}function mf(A){A.off=rt,A.on=Ne,A.wheelEventPixels=hA,A.Doc=Xt,A.splitLines=Ar,A.countColumn=Re,A.findColumn=gn,A.isWordChar=er,A.Pass=pt,A.signal=dt,A.Line=za,A.changeEnd=Fs,A.scrollbarModel=Gu,A.Pos=dn,A.cmpPos=ar,A.modes=so,A.mimeModes=So,A.resolveMode=Ba,A.getMode=rs,A.modeExtensions=ca,A.extendMode=dl,A.copyState=lo,A.startState=iu,A.innerMode=Ku,A.commands=yl,A.keyMap=vo,A.keyName=ml,A.isModifierKey=Ga,A.lookupKey=hs,A.normalizeKeyMap=Go,A.StringStream=ao,A.SharedTextMarker=Ot,A.TextMarker=gt,A.LineWidget=Ve,A.e_preventDefault=wt,A.e_stopPropagation=Dn,A.e_stop=pr,A.addClass=Ce,A.contains=Ze,A.rmClass=pe,A.keyNames=Ei}Kl(ko),ed(ko);var sl="iter insert remove copy getEditor constructor".split(" ");for(var Dp in Xt.prototype)Xt.prototype.hasOwnProperty(Dp)&&nt(sl,Dp)<0&&(ko.prototype[Dp]=function(A){return function(){return A.apply(this.doc,arguments)}}(Xt.prototype[Dp]));return Nt(Xt),ko.inputStyles={textarea:fa,contenteditable:os},ko.defineMode=function(A){!ko.defaults.mode&&A!="null"&&(ko.defaults.mode=A),Pi.apply(this,arguments)},ko.defineMIME=Ua,ko.defineMode("null",function(){return{token:function(A){return A.skipToEnd()}}}),ko.defineMIME("text/plain","null"),ko.defineExtension=function(A,y){ko.prototype[A]=y},ko.defineDocExtension=function(A,y){Xt.prototype[A]=y},ko.fromTextArea=Cm,mf(ko),ko.version="5.65.18",ko})}(Gb)),Gb.exports}var Uue=c3();const pp=Xa(Uue);var DT={exports:{}},KT;function zue(){return KT||(KT=1,function(n,e){(function(t){t(c3())})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,a=i.statementIndent,o=i.jsonld,d=i.json||o,g=i.trackScope!==!1,b=i.typescript,E=i.wordCharacters||/[\w$\xa1-\uffff]/,S=function(){function Ye(fo){return{type:fo,style:"keyword"}}var Mt=Ye("keyword a"),yn=Ye("keyword b"),$n=Ye("keyword c"),dn=Ye("keyword d"),ar=Ye("operator"),Ri={type:"atom",style:"atom"};return{if:Ye("if"),while:Mt,with:Mt,else:yn,do:yn,try:yn,finally:yn,return:dn,break:dn,continue:dn,new:Ye("new"),delete:$n,void:$n,throw:$n,debugger:Ye("debugger"),var:Ye("var"),const:Ye("var"),let:Ye("var"),function:Ye("function"),catch:Ye("catch"),for:Ye("for"),switch:Ye("switch"),case:Ye("case"),default:Ye("default"),in:ar,typeof:ar,instanceof:ar,true:Ri,false:Ri,null:Ri,undefined:Ri,NaN:Ri,Infinity:Ri,this:Ye("this"),class:Ye("class"),super:Ye("atom"),yield:$n,export:Ye("export"),import:Ye("import"),extends:$n,await:$n}}(),B=/[+\-*&%=<>!?|~^@]/,k=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function z(Ye){for(var Mt=!1,yn,$n=!1;(yn=Ye.next())!=null;){if(!Mt){if(yn=="/"&&!$n)return;yn=="["?$n=!0:$n&&yn=="]"&&($n=!1)}Mt=!Mt&&yn=="\\"}}var j,Y;function q(Ye,Mt,yn){return j=Ye,Y=yn,Mt}function ie(Ye,Mt){var yn=Ye.next();if(yn=='"'||yn=="'")return Mt.tokenize=J(yn),Mt.tokenize(Ye,Mt);if(yn=="."&&Ye.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return q("number","number");if(yn=="."&&Ye.match(".."))return q("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(yn))return q(yn);if(yn=="="&&Ye.eat(">"))return q("=>","operator");if(yn=="0"&&Ye.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return q("number","number");if(/\d/.test(yn))return Ye.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),q("number","number");if(yn=="/")return Ye.eat("*")?(Mt.tokenize=$,$(Ye,Mt)):Ye.eat("/")?(Ye.skipToEnd(),q("comment","comment")):oa(Ye,Mt,1)?(z(Ye),Ye.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),q("regexp","string-2")):(Ye.eat("="),q("operator","operator",Ye.current()));if(yn=="`")return Mt.tokenize=te,te(Ye,Mt);if(yn=="#"&&Ye.peek()=="!")return Ye.skipToEnd(),q("meta","meta");if(yn=="#"&&Ye.eatWhile(E))return q("variable","property");if(yn=="<"&&Ye.match("!--")||yn=="-"&&Ye.match("->")&&!/\S/.test(Ye.string.slice(0,Ye.start)))return Ye.skipToEnd(),q("comment","comment");if(B.test(yn))return(yn!=">"||!Mt.lexical||Mt.lexical.type!=">")&&(Ye.eat("=")?(yn=="!"||yn=="=")&&Ye.eat("="):/[<>*+\-|&?]/.test(yn)&&(Ye.eat(yn),yn==">"&&Ye.eat(yn))),yn=="?"&&Ye.eat(".")?q("."):q("operator","operator",Ye.current());if(E.test(yn)){Ye.eatWhile(E);var $n=Ye.current();if(Mt.lastType!="."){if(S.propertyIsEnumerable($n)){var dn=S[$n];return q(dn.type,dn.style,$n)}if($n=="async"&&Ye.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return q("async","keyword",$n)}return q("variable","variable",$n)}}function J(Ye){return function(Mt,yn){var $n=!1,dn;if(o&&Mt.peek()=="@"&&Mt.match(k))return yn.tokenize=ie,q("jsonld-keyword","meta");for(;(dn=Mt.next())!=null&&!(dn==Ye&&!$n);)$n=!$n&&dn=="\\";return $n||(yn.tokenize=ie),q("string","string")}}function $(Ye,Mt){for(var yn=!1,$n;$n=Ye.next();){if($n=="/"&&yn){Mt.tokenize=ie;break}yn=$n=="*"}return q("comment","comment")}function te(Ye,Mt){for(var yn=!1,$n;($n=Ye.next())!=null;){if(!yn&&($n=="`"||$n=="$"&&Ye.eat("{"))){Mt.tokenize=ie;break}yn=!yn&&$n=="\\"}return q("quasi","string-2",Ye.current())}var W="([{}])";function oe(Ye,Mt){Mt.fatArrowAt&&(Mt.fatArrowAt=null);var yn=Ye.string.indexOf("=>",Ye.start);if(!(yn<0)){if(b){var $n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Ye.string.slice(Ye.start,yn));$n&&(yn=$n.index)}for(var dn=0,ar=!1,Ri=yn-1;Ri>=0;--Ri){var fo=Ye.string.charAt(Ri),_s=W.indexOf(fo);if(_s>=0&&_s<3){if(!dn){++Ri;break}if(--dn==0){fo=="("&&(ar=!0);break}}else if(_s>=3&&_s<6)++dn;else if(E.test(fo))ar=!0;else if(/["'\/`]/.test(fo))for(;;--Ri){if(Ri==0)return;var Gs=Ye.string.charAt(Ri-1);if(Gs==fo&&Ye.string.charAt(Ri-2)!="\\"){Ri--;break}}else if(ar&&!dn){++Ri;break}}ar&&!dn&&(Mt.fatArrowAt=Ri)}}var fe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function he(Ye,Mt,yn,$n,dn,ar){this.indented=Ye,this.column=Mt,this.type=yn,this.prev=dn,this.info=ar,$n!=null&&(this.align=$n)}function Se(Ye,Mt){if(!g)return!1;for(var yn=Ye.localVars;yn;yn=yn.next)if(yn.name==Mt)return!0;for(var $n=Ye.context;$n;$n=$n.prev)for(var yn=$n.vars;yn;yn=yn.next)if(yn.name==Mt)return!0}function pe(Ye,Mt,yn,$n,dn){var ar=Ye.cc;for(we.state=Ye,we.stream=dn,we.marked=null,we.cc=ar,we.style=Mt,Ye.lexical.hasOwnProperty("align")||(Ye.lexical.align=!0);;){var Ri=ar.length?ar.pop():d?nt:Re;if(Ri(yn,$n)){for(;ar.length&&ar[ar.length-1].lex;)ar.pop()();return we.marked?we.marked:yn=="variable"&&Se(Ye,$n)?"variable-2":Mt}}}var we={state:null,column:null,marked:null,cc:null};function Ke(){for(var Ye=arguments.length-1;Ye>=0;Ye--)we.cc.push(arguments[Ye])}function ge(){return Ke.apply(null,arguments),!0}function st(Ye,Mt){for(var yn=Mt;yn;yn=yn.next)if(yn.name==Ye)return!0;return!1}function Qe(Ye){var Mt=we.state;if(we.marked="def",!!g){if(Mt.context){if(Mt.lexical.info=="var"&&Mt.context&&Mt.context.block){var yn=Ze(Ye,Mt.context);if(yn!=null){Mt.context=yn;return}}else if(!st(Ye,Mt.localVars)){Mt.localVars=new Pe(Ye,Mt.localVars);return}}i.globalVars&&!st(Ye,Mt.globalVars)&&(Mt.globalVars=new Pe(Ye,Mt.globalVars))}}function Ze(Ye,Mt){if(Mt)if(Mt.block){var yn=Ze(Ye,Mt.prev);return yn?yn==Mt.prev?Mt:new Ce(yn,Mt.vars,!0):null}else return st(Ye,Mt.vars)?Mt:new Ce(Mt.prev,new Pe(Ye,Mt.vars),!1);else return null}function We(Ye){return Ye=="public"||Ye=="private"||Ye=="protected"||Ye=="abstract"||Ye=="readonly"}function Ce(Ye,Mt,yn){this.prev=Ye,this.vars=Mt,this.block=yn}function Pe(Ye,Mt){this.name=Ye,this.next=Mt}var it=new Pe("this",new Pe("arguments",null));function vt(){we.state.context=new Ce(we.state.context,we.state.localVars,!1),we.state.localVars=it}function _t(){we.state.context=new Ce(we.state.context,we.state.localVars,!0),we.state.localVars=null}vt.lex=_t.lex=!0;function ft(){we.state.localVars=we.state.context.vars,we.state.context=we.state.context.prev}ft.lex=!0;function Dt(Ye,Mt){var yn=function(){var $n=we.state,dn=$n.indented;if($n.lexical.type=="stat")dn=$n.lexical.indented;else for(var ar=$n.lexical;ar&&ar.type==")"&&ar.align;ar=ar.prev)dn=ar.indented;$n.lexical=new he(dn,we.stream.column(),Ye,null,$n.lexical,Mt)};return yn.lex=!0,yn}function Tt(){var Ye=we.state;Ye.lexical.prev&&(Ye.lexical.type==")"&&(Ye.indented=Ye.lexical.indented),Ye.lexical=Ye.lexical.prev)}Tt.lex=!0;function Ue(Ye){function Mt(yn){return yn==Ye?ge():Ye==";"||yn=="}"||yn==")"||yn=="]"?Ke():ge(Mt)}return Mt}function Re(Ye,Mt){return Ye=="var"?ge(Dt("vardef",Mt),Dn,Ue(";"),Tt):Ye=="keyword a"?ge(Dt("form"),pt,Re,Tt):Ye=="keyword b"?ge(Dt("form"),Re,Tt):Ye=="keyword d"?we.stream.match(/^\s*$/,!1)?ge():ge(Dt("stat"),tn,Ue(";"),Tt):Ye=="debugger"?ge(Ue(";")):Ye=="{"?ge(Dt("}"),_t,$t,Tt,ft):Ye==";"?ge():Ye=="if"?(we.state.lexical.info=="else"&&we.state.cc[we.state.cc.length-1]==Tt&&we.state.cc.pop()(),ge(Dt("form"),pt,Re,Tt,Ln)):Ye=="function"?ge(Ar):Ye=="for"?ge(Dt("form"),_t,Ir,Re,ft,Tt):Ye=="class"||b&&Mt=="interface"?(we.marked="keyword",ge(Dt("form",Ye=="class"?Ye:Mt),so,Tt)):Ye=="variable"?b&&Mt=="declare"?(we.marked="keyword",ge(Re)):b&&(Mt=="module"||Mt=="enum"||Mt=="type")&&we.stream.match(/^\s*\w/,!1)?(we.marked="keyword",Mt=="enum"?ge(Fr):Mt=="type"?ge(Ea,Ue("operator"),_e,Ue(";")):ge(Dt("form"),On,Ue("{"),Dt("}"),$t,Tt,Tt)):b&&Mt=="namespace"?(we.marked="keyword",ge(Dt("form"),nt,Re,Tt)):b&&Mt=="abstract"?(we.marked="keyword",ge(Re)):ge(Dt("stat"),Yn):Ye=="switch"?ge(Dt("form"),pt,Ue("{"),Dt("}","switch"),_t,$t,Tt,Tt,ft):Ye=="case"?ge(nt,Ue(":")):Ye=="default"?ge(Ue(":")):Ye=="catch"?ge(Dt("form"),vt,Be,Re,Tt,ft):Ye=="export"?ge(Dt("stat"),Ba,Tt):Ye=="import"?ge(Dt("stat"),ca,Tt):Ye=="async"?ge(Re):Mt=="@"?ge(nt,Re):Ke(Dt("stat"),nt,Ue(";"),Tt)}function Be(Ye){if(Ye=="(")return ge(Yi,Ue(")"))}function nt(Ye,Mt){return zt(Ye,Mt,!1)}function Ct(Ye,Mt){return zt(Ye,Mt,!0)}function pt(Ye){return Ye!="("?Ke():ge(Dt(")"),tn,Ue(")"),Tt)}function zt(Ye,Mt,yn){if(we.state.fatArrowAt==we.stream.start){var $n=yn?Kn:or;if(Ye=="(")return ge(vt,Dt(")"),tt(Yi,")"),Tt,Ue("=>"),$n,ft);if(Ye=="variable")return Ke(vt,On,Ue("=>"),$n,ft)}var dn=yn?gn:Lt;return fe.hasOwnProperty(Ye)?ge(dn):Ye=="function"?ge(Ar,dn):Ye=="class"||b&&Mt=="interface"?(we.marked="keyword",ge(Dt("form"),vi,Tt)):Ye=="keyword c"||Ye=="async"?ge(yn?Ct:nt):Ye=="("?ge(Dt(")"),tn,Ue(")"),Tt,dn):Ye=="operator"||Ye=="spread"?ge(yn?Ct:nt):Ye=="["?ge(Dt("]"),ao,Tt,dn):Ye=="{"?Et(qe,"}",null,dn):Ye=="quasi"?Ke(Nn,dn):Ye=="new"?ge(pn(yn)):ge()}function tn(Ye){return Ye.match(/[;\}\)\],]/)?Ke():Ke(nt)}function Lt(Ye,Mt){return Ye==","?ge(tn):gn(Ye,Mt,!1)}function gn(Ye,Mt,yn){var $n=yn==!1?Lt:gn,dn=yn==!1?nt:Ct;if(Ye=="=>")return ge(vt,yn?Kn:or,ft);if(Ye=="operator")return/\+\+|--/.test(Mt)||b&&Mt=="!"?ge($n):b&&Mt=="<"&&we.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?ge(Dt(">"),tt(_e,">"),Tt,$n):Mt=="?"?ge(nt,Ue(":"),dn):ge(dn);if(Ye=="quasi")return Ke(Nn,$n);if(Ye!=";"){if(Ye=="(")return Et(Ct,")","call",$n);if(Ye==".")return ge(er,$n);if(Ye=="[")return ge(Dt("]"),tn,Ue("]"),Tt,$n);if(b&&Mt=="as")return we.marked="keyword",ge(_e,$n);if(Ye=="regexp")return we.state.lastType=we.marked="operator",we.stream.backUp(we.stream.pos-we.stream.start-1),ge(dn)}}function Nn(Ye,Mt){return Ye!="quasi"?Ke():Mt.slice(Mt.length-2)!="${"?ge(Nn):ge(tn,rn)}function rn(Ye){if(Ye=="}")return we.marked="string-2",we.state.tokenize=te,ge(Nn)}function or(Ye){return oe(we.stream,we.state),Ke(Ye=="{"?Re:nt)}function Kn(Ye){return oe(we.stream,we.state),Ke(Ye=="{"?Re:Ct)}function pn(Ye){return function(Mt){return Mt=="."?ge(Ye?Mr:Xn):Mt=="variable"&&b?ge(Vt,Ye?gn:Lt):Ke(Ye?Ct:nt)}}function Xn(Ye,Mt){if(Mt=="target")return we.marked="keyword",ge(Lt)}function Mr(Ye,Mt){if(Mt=="target")return we.marked="keyword",ge(gn)}function Yn(Ye){return Ye==":"?ge(Tt,Re):Ke(Lt,Ue(";"),Tt)}function er(Ye){if(Ye=="variable")return we.marked="property",ge()}function qe(Ye,Mt){if(Ye=="async")return we.marked="property",ge(qe);if(Ye=="variable"||we.style=="keyword"){if(we.marked="property",Mt=="get"||Mt=="set")return ge(ce);var yn;return b&&we.state.fatArrowAt==we.stream.start&&(yn=we.stream.match(/^\s*:\s*/,!1))&&(we.state.fatArrowAt=we.stream.pos+yn[0].length),ge(me)}else{if(Ye=="number"||Ye=="string")return we.marked=o?"property":we.style+" property",ge(me);if(Ye=="jsonld-keyword")return ge(me);if(b&&We(Mt))return we.marked="keyword",ge(qe);if(Ye=="[")return ge(nt,on,Ue("]"),me);if(Ye=="spread")return ge(Ct,me);if(Mt=="*")return we.marked="keyword",ge(qe);if(Ye==":")return Ke(me)}}function ce(Ye){return Ye!="variable"?Ke(me):(we.marked="property",ge(Ar))}function me(Ye){if(Ye==":")return ge(Ct);if(Ye=="(")return Ke(Ar)}function tt(Ye,Mt,yn){function $n(dn,ar){if(yn?yn.indexOf(dn)>-1:dn==","){var Ri=we.state.lexical;return Ri.info=="call"&&(Ri.pos=(Ri.pos||0)+1),ge(function(fo,_s){return fo==Mt||_s==Mt?Ke():Ke(Ye)},$n)}return dn==Mt||ar==Mt?ge():yn&&yn.indexOf(";")>-1?Ke(Ye):ge(Ue(Mt))}return function(dn,ar){return dn==Mt||ar==Mt?ge():Ke(Ye,$n)}}function Et(Ye,Mt,yn){for(var $n=3;$n<arguments.length;$n++)we.cc.push(arguments[$n]);return ge(Dt(Mt,yn),tt(Ye,Mt),Tt)}function $t(Ye){return Ye=="}"?ge():Ke(Re,$t)}function on(Ye,Mt){if(b){if(Ye==":")return ge(_e);if(Mt=="?")return ge(on)}}function rr(Ye,Mt){if(b&&(Ye==":"||Mt=="in"))return ge(_e)}function Oe(Ye){if(b&&Ye==":")return we.stream.match(/^\s*\w+\s+is\b/,!1)?ge(nt,se,_e):ge(_e)}function se(Ye,Mt){if(Mt=="is")return we.marked="keyword",ge()}function _e(Ye,Mt){if(Mt=="keyof"||Mt=="typeof"||Mt=="infer"||Mt=="readonly")return we.marked="keyword",ge(Mt=="typeof"?Ct:_e);if(Ye=="variable"||Mt=="void")return we.marked="type",ge(Qt);if(Mt=="|"||Mt=="&")return ge(_e);if(Ye=="string"||Ye=="number"||Ye=="atom")return ge(Qt);if(Ye=="[")return ge(Dt("]"),tt(_e,"]",","),Tt,Qt);if(Ye=="{")return ge(Dt("}"),Ne,Tt,Qt);if(Ye=="(")return ge(tt(ct,")"),p,Qt);if(Ye=="<")return ge(tt(_e,">"),_e);if(Ye=="quasi")return Ke(rt,Qt)}function p(Ye){if(Ye=="=>")return ge(_e)}function Ne(Ye){return Ye.match(/[\}\)\]]/)?ge():Ye==","||Ye==";"?ge(Ne):Ke($e,Ne)}function $e(Ye,Mt){if(Ye=="variable"||we.style=="keyword")return we.marked="property",ge($e);if(Mt=="?"||Ye=="number"||Ye=="string")return ge($e);if(Ye==":")return ge(_e);if(Ye=="[")return ge(Ue("variable"),rr,Ue("]"),$e);if(Ye=="(")return Ke(ho,$e);if(!Ye.match(/[;\}\)\],]/))return ge()}function rt(Ye,Mt){return Ye!="quasi"?Ke():Mt.slice(Mt.length-2)!="${"?ge(rt):ge(_e,dt)}function dt(Ye){if(Ye=="}")return we.marked="string-2",we.state.tokenize=te,ge(rt)}function ct(Ye,Mt){return Ye=="variable"&&we.stream.match(/^\s*[?:]/,!1)||Mt=="?"?ge(ct):Ye==":"?ge(_e):Ye=="spread"?ge(ct):Ke(_e)}function Qt(Ye,Mt){if(Mt=="<")return ge(Dt(">"),tt(_e,">"),Tt,Qt);if(Mt=="|"||Ye=="."||Mt=="&")return ge(_e);if(Ye=="[")return ge(_e,Ue("]"),Qt);if(Mt=="extends"||Mt=="implements")return we.marked="keyword",ge(_e);if(Mt=="?")return ge(_e,Ue(":"),_e)}function Vt(Ye,Mt){if(Mt=="<")return ge(Dt(">"),tt(_e,">"),Tt,Qt)}function Nt(){return Ke(_e,wt)}function wt(Ye,Mt){if(Mt=="=")return ge(_e)}function Dn(Ye,Mt){return Mt=="enum"?(we.marked="keyword",ge(Fr)):Ke(On,on,sn,Wn)}function On(Ye,Mt){if(b&&We(Mt))return we.marked="keyword",ge(On);if(Ye=="variable")return Qe(Mt),ge();if(Ye=="spread")return ge(On);if(Ye=="[")return Et(Er,"]");if(Ye=="{")return Et(pr,"}")}function pr(Ye,Mt){return Ye=="variable"&&!we.stream.match(/^\s*:/,!1)?(Qe(Mt),ge(sn)):(Ye=="variable"&&(we.marked="property"),Ye=="spread"?ge(On):Ye=="}"?Ke():Ye=="["?ge(nt,Ue("]"),Ue(":"),pr):ge(Ue(":"),On,sn))}function Er(){return Ke(On,sn)}function sn(Ye,Mt){if(Mt=="=")return ge(Ct)}function Wn(Ye){if(Ye==",")return ge(Dn)}function Ln(Ye,Mt){if(Ye=="keyword b"&&Mt=="else")return ge(Dt("form","else"),Re,Tt)}function Ir(Ye,Mt){if(Mt=="await")return ge(Ir);if(Ye=="(")return ge(Dt(")"),Br,Tt)}function Br(Ye){return Ye=="var"?ge(Dn,Kr):Ye=="variable"?ge(Kr):Ke(Kr)}function Kr(Ye,Mt){return Ye==")"?ge():Ye==";"?ge(Kr):Mt=="in"||Mt=="of"?(we.marked="keyword",ge(nt,Kr)):Ke(nt,Kr)}function Ar(Ye,Mt){if(Mt=="*")return we.marked="keyword",ge(Ar);if(Ye=="variable")return Qe(Mt),ge(Ar);if(Ye=="(")return ge(vt,Dt(")"),tt(Yi,")"),Tt,Oe,Re,ft);if(b&&Mt=="<")return ge(Dt(">"),tt(Nt,">"),Tt,Ar)}function ho(Ye,Mt){if(Mt=="*")return we.marked="keyword",ge(ho);if(Ye=="variable")return Qe(Mt),ge(ho);if(Ye=="(")return ge(vt,Dt(")"),tt(Yi,")"),Tt,Oe,ft);if(b&&Mt=="<")return ge(Dt(">"),tt(Nt,">"),Tt,ho)}function Ea(Ye,Mt){if(Ye=="keyword"||Ye=="variable")return we.marked="type",ge(Ea);if(Mt=="<")return ge(Dt(">"),tt(Nt,">"),Tt)}function Yi(Ye,Mt){return Mt=="@"&&ge(nt,Yi),Ye=="spread"?ge(Yi):b&&We(Mt)?(we.marked="keyword",ge(Yi)):b&&Ye=="this"?ge(on,sn):Ke(On,on,sn)}function vi(Ye,Mt){return Ye=="variable"?so(Ye,Mt):So(Ye,Mt)}function so(Ye,Mt){if(Ye=="variable")return Qe(Mt),ge(So)}function So(Ye,Mt){if(Mt=="<")return ge(Dt(">"),tt(Nt,">"),Tt,So);if(Mt=="extends"||Mt=="implements"||b&&Ye==",")return Mt=="implements"&&(we.marked="keyword"),ge(b?_e:nt,So);if(Ye=="{")return ge(Dt("}"),Pi,Tt)}function Pi(Ye,Mt){if(Ye=="async"||Ye=="variable"&&(Mt=="static"||Mt=="get"||Mt=="set"||b&&We(Mt))&&we.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return we.marked="keyword",ge(Pi);if(Ye=="variable"||we.style=="keyword")return we.marked="property",ge(Ua,Pi);if(Ye=="number"||Ye=="string")return ge(Ua,Pi);if(Ye=="[")return ge(nt,on,Ue("]"),Ua,Pi);if(Mt=="*")return we.marked="keyword",ge(Pi);if(b&&Ye=="(")return Ke(ho,Pi);if(Ye==";"||Ye==",")return ge(Pi);if(Ye=="}")return ge();if(Mt=="@")return ge(nt,Pi)}function Ua(Ye,Mt){if(Mt=="!"||Mt=="?")return ge(Ua);if(Ye==":")return ge(_e,sn);if(Mt=="=")return ge(Ct);var yn=we.state.lexical.prev,$n=yn&&yn.info=="interface";return Ke($n?ho:Ar)}function Ba(Ye,Mt){return Mt=="*"?(we.marked="keyword",ge(iu,Ue(";"))):Mt=="default"?(we.marked="keyword",ge(nt,Ue(";"))):Ye=="{"?ge(tt(rs,"}"),iu,Ue(";")):Ke(Re)}function rs(Ye,Mt){if(Mt=="as")return we.marked="keyword",ge(Ue("variable"));if(Ye=="variable")return Ke(Ct,rs)}function ca(Ye){return Ye=="string"?ge():Ye=="("?Ke(nt):Ye=="."?Ke(Lt):Ke(dl,lo,iu)}function dl(Ye,Mt){return Ye=="{"?Et(dl,"}"):(Ye=="variable"&&Qe(Mt),Mt=="*"&&(we.marked="keyword"),ge(Ku))}function lo(Ye){if(Ye==",")return ge(dl,lo)}function Ku(Ye,Mt){if(Mt=="as")return we.marked="keyword",ge(dl)}function iu(Ye,Mt){if(Mt=="from")return we.marked="keyword",ge(nt)}function ao(Ye){return Ye=="]"?ge():Ke(tt(Ct,"]"))}function Fr(){return Ke(Dt("form"),On,Ue("{"),Dt("}"),tt(Ja,"}"),Tt,Tt)}function Ja(){return Ke(On,sn)}function Rs(Ye,Mt){return Ye.lastType=="operator"||Ye.lastType==","||B.test(Mt.charAt(0))||/[,.]/.test(Mt.charAt(0))}function oa(Ye,Mt,yn){return Mt.tokenize==ie&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Mt.lastType)||Mt.lastType=="quasi"&&/\{\s*$/.test(Ye.string.slice(0,Ye.pos-(yn||0)))}return{startState:function(Ye){var Mt={tokenize:ie,lastType:"sof",cc:[],lexical:new he((Ye||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new Ce(null,null,!1),indented:Ye||0};return i.globalVars&&typeof i.globalVars=="object"&&(Mt.globalVars=i.globalVars),Mt},token:function(Ye,Mt){if(Ye.sol()&&(Mt.lexical.hasOwnProperty("align")||(Mt.lexical.align=!1),Mt.indented=Ye.indentation(),oe(Ye,Mt)),Mt.tokenize!=$&&Ye.eatSpace())return null;var yn=Mt.tokenize(Ye,Mt);return j=="comment"?yn:(Mt.lastType=j=="operator"&&(Y=="++"||Y=="--")?"incdec":j,pe(Mt,yn,j,Y,Ye))},indent:function(Ye,Mt){if(Ye.tokenize==$||Ye.tokenize==te)return t.Pass;if(Ye.tokenize!=ie)return 0;var yn=Mt&&Mt.charAt(0),$n=Ye.lexical,dn;if(!/^\s*else\b/.test(Mt))for(var ar=Ye.cc.length-1;ar>=0;--ar){var Ri=Ye.cc[ar];if(Ri==Tt)$n=$n.prev;else if(Ri!=Ln&&Ri!=ft)break}for(;($n.type=="stat"||$n.type=="form")&&(yn=="}"||(dn=Ye.cc[Ye.cc.length-1])&&(dn==Lt||dn==gn)&&!/^[,\.=+\-*:?[\(]/.test(Mt));)$n=$n.prev;a&&$n.type==")"&&$n.prev.type=="stat"&&($n=$n.prev);var fo=$n.type,_s=yn==fo;return fo=="vardef"?$n.indented+(Ye.lastType=="operator"||Ye.lastType==","?$n.info.length+1:0):fo=="form"&&yn=="{"?$n.indented:fo=="form"?$n.indented+s:fo=="stat"?$n.indented+(Rs(Ye,Mt)?a||s:0):$n.info=="switch"&&!_s&&i.doubleIndentSwitch!=!1?$n.indented+(/^(?:case|default)\b/.test(Mt)?s:2*s):$n.align?$n.column+(_s?0:1):$n.indented+(_s?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:o,jsonMode:d,expressionAllowed:oa,skipExpression:function(Ye){pe(Ye,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),DT.exports}zue();var FT={exports:{}},LT;function jue(){return LT||(LT=1,function(n,e){(function(t){t(c3())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function s(W,oe,fe){var he=document.createElement("div");he.className="CodeMirror-lint-tooltip cm-s-"+W.options.theme,he.appendChild(fe.cloneNode(!0)),W.state.lint.options.selfContain?W.getWrapperElement().appendChild(he):document.body.appendChild(he);function Se(pe){if(!he.parentNode)return t.off(document,"mousemove",Se);var we=Math.max(0,pe.clientY-he.offsetHeight-5),Ke=Math.max(0,Math.min(pe.clientX+5,he.ownerDocument.defaultView.innerWidth-he.offsetWidth));he.style.top=we+"px",he.style.left=Ke+"px"}return t.on(document,"mousemove",Se),Se(oe),he.style.opacity!=null&&(he.style.opacity=1),he}function a(W){W.parentNode&&W.parentNode.removeChild(W)}function o(W){W.parentNode&&(W.style.opacity==null&&a(W),W.style.opacity=0,setTimeout(function(){a(W)},600))}function d(W,oe,fe,he){var Se=s(W,oe,fe);function pe(){t.off(he,"mouseout",pe),Se&&(o(Se),Se=null)}var we=setInterval(function(){if(Se)for(var Ke=he;;Ke=Ke.parentNode){if(Ke&&Ke.nodeType==11&&(Ke=Ke.host),Ke==document.body)return;if(!Ke){pe();break}}if(!Se)return clearInterval(we)},400);t.on(he,"mouseout",pe)}function g(W,oe,fe){this.marked=[],oe instanceof Function&&(oe={getAnnotations:oe}),(!oe||oe===!0)&&(oe={}),this.options={},this.linterOptions=oe.options||{};for(var he in b)this.options[he]=b[he];for(var he in oe)b.hasOwnProperty(he)?oe[he]!=null&&(this.options[he]=oe[he]):oe.options||(this.linterOptions[he]=oe[he]);this.timeout=null,this.hasGutter=fe,this.onMouseOver=function(Se){te(W,Se)},this.waitingFor=0}var b={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function E(W){var oe=W.state.lint;oe.hasGutter&&W.clearGutter(r),oe.options.highlightLines&&S(W);for(var fe=0;fe<oe.marked.length;++fe)oe.marked[fe].clear();oe.marked.length=0}function S(W){W.eachLine(function(oe){var fe=oe.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(oe.wrapClass);fe&&W.removeLineClass(oe,"wrap",fe[0])})}function B(W,oe,fe,he,Se){var pe=document.createElement("div"),we=pe;return pe.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+fe,he&&(we=pe.appendChild(document.createElement("div")),we.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),Se!=!1&&t.on(we,"mouseover",function(Ke){d(W,Ke,oe,we)}),pe}function k(W,oe){return W=="error"?W:oe}function z(W){for(var oe=[],fe=0;fe<W.length;++fe){var he=W[fe],Se=he.from.line;(oe[Se]||(oe[Se]=[])).push(he)}return oe}function j(W){var oe=W.severity;oe||(oe="error");var fe=document.createElement("div");return fe.className="CodeMirror-lint-message CodeMirror-lint-message-"+oe,typeof W.messageHTML<"u"?fe.innerHTML=W.messageHTML:fe.appendChild(document.createTextNode(W.message)),fe}function Y(W,oe){var fe=W.state.lint,he=++fe.waitingFor;function Se(){he=-1,W.off("change",Se)}W.on("change",Se),oe(W.getValue(),function(pe,we){W.off("change",Se),fe.waitingFor==he&&(we&&pe instanceof t&&(pe=we),W.operation(function(){ie(W,pe)}))},fe.linterOptions,W)}function q(W){var oe=W.state.lint;if(oe){var fe=oe.options,he=fe.getAnnotations||W.getHelper(t.Pos(0,0),"lint");if(he)if(fe.async||he.async)Y(W,he);else{var Se=he(W.getValue(),oe.linterOptions,W);if(!Se)return;Se.then?Se.then(function(pe){W.operation(function(){ie(W,pe)})}):W.operation(function(){ie(W,Se)})}}}function ie(W,oe){var fe=W.state.lint;if(fe){var he=fe.options;E(W);for(var Se=z(oe),pe=0;pe<Se.length;++pe){var we=Se[pe];if(we){for(var Ke=null,ge=fe.hasGutter&&document.createDocumentFragment(),st=0;st<we.length;++st){var Qe=we[st],Ze=Qe.severity;Ze||(Ze="error"),Ke=k(Ke,Ze),he.formatAnnotation&&(Qe=he.formatAnnotation(Qe)),fe.hasGutter&&ge.appendChild(j(Qe)),Qe.to&&fe.marked.push(W.markText(Qe.from,Qe.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+Ze,__annotation:Qe}))}fe.hasGutter&&W.setGutterMarker(pe,r,B(W,ge,Ke,we.length>1,he.tooltips)),he.highlightLines&&W.addLineClass(pe,"wrap",i+Ke)}}he.onUpdateLinting&&he.onUpdateLinting(oe,Se,W)}}function J(W){var oe=W.state.lint;oe&&(clearTimeout(oe.timeout),oe.timeout=setTimeout(function(){q(W)},oe.options.delay))}function $(W,oe,fe){for(var he=fe.target||fe.srcElement,Se=document.createDocumentFragment(),pe=0;pe<oe.length;pe++){var we=oe[pe];Se.appendChild(j(we))}d(W,fe,Se,he)}function te(W,oe){var fe=oe.target||oe.srcElement;if(/\bCodeMirror-lint-mark-/.test(fe.className)){for(var he=fe.getBoundingClientRect(),Se=(he.left+he.right)/2,pe=(he.top+he.bottom)/2,we=W.findMarksAt(W.coordsChar({left:Se,top:pe},"client")),Ke=[],ge=0;ge<we.length;++ge){var st=we[ge].__annotation;st&&Ke.push(st)}Ke.length&&$(W,Ke,oe)}}t.defineOption("lint",!1,function(W,oe,fe){if(fe&&fe!=t.Init&&(E(W),W.state.lint.options.lintOnChange!==!1&&W.off("change",J),t.off(W.getWrapperElement(),"mouseover",W.state.lint.onMouseOver),clearTimeout(W.state.lint.timeout),delete W.state.lint),oe){for(var he=W.getOption("gutters"),Se=!1,pe=0;pe<he.length;++pe)he[pe]==r&&(Se=!0);var we=W.state.lint=new g(W,oe,Se);we.options.lintOnChange&&W.on("change",J),we.options.tooltips!=!1&&we.options.tooltips!="gutter"&&t.on(W.getWrapperElement(),"mouseover",we.onMouseOver),q(W)}}),t.defineExtension("performLint",function(){q(this)})})}()),FT.exports}jue();var UT={exports:{}},zT;function Nue(){return zT||(zT=1,function(n,e){(function(t){t(c3())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function a(S){return S&&S.bracketRegex||/[(){}[\]]/}function o(S,B,k){var z=S.getLineHandle(B.line),j=B.ch-1,Y=k&&k.afterCursor;Y==null&&(Y=/(^| )cm-fat-cursor($| )/.test(S.getWrapperElement().className));var q=a(k),ie=!Y&&j>=0&&q.test(z.text.charAt(j))&&s[z.text.charAt(j)]||q.test(z.text.charAt(j+1))&&s[z.text.charAt(++j)];if(!ie)return null;var J=ie.charAt(1)==">"?1:-1;if(k&&k.strict&&J>0!=(j==B.ch))return null;var $=S.getTokenTypeAt(i(B.line,j+1)),te=d(S,i(B.line,j+(J>0?1:0)),J,$,k);return te==null?null:{from:i(B.line,j),to:te&&te.pos,match:te&&te.ch==ie.charAt(0),forward:J>0}}function d(S,B,k,z,j){for(var Y=j&&j.maxScanLineLength||1e4,q=j&&j.maxScanLines||1e3,ie=[],J=a(j),$=k>0?Math.min(B.line+q,S.lastLine()+1):Math.max(S.firstLine()-1,B.line-q),te=B.line;te!=$;te+=k){var W=S.getLine(te);if(W){var oe=k>0?0:W.length-1,fe=k>0?W.length:-1;if(!(W.length>Y))for(te==B.line&&(oe=B.ch-(k<0?1:0));oe!=fe;oe+=k){var he=W.charAt(oe);if(J.test(he)&&(z===void 0||(S.getTokenTypeAt(i(te,oe+1))||"")==(z||""))){var Se=s[he];if(Se&&Se.charAt(1)==">"==k>0)ie.push(he);else if(ie.length)ie.pop();else return{pos:i(te,oe),ch:he}}}}}return te-k==(k>0?S.lastLine():S.firstLine())?!1:null}function g(S,B,k){for(var z=S.state.matchBrackets.maxHighlightLineLength||1e3,j=k&&k.highlightNonMatching,Y=[],q=S.listSelections(),ie=0;ie<q.length;ie++){var J=q[ie].empty()&&o(S,q[ie].head,k);if(J&&(J.match||j!==!1)&&S.getLine(J.from.line).length<=z){var $=J.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";Y.push(S.markText(J.from,i(J.from.line,J.from.ch+1),{className:$})),J.to&&S.getLine(J.to.line).length<=z&&Y.push(S.markText(J.to,i(J.to.line,J.to.ch+1),{className:$}))}}if(Y.length){r&&S.state.focused&&S.focus();var te=function(){S.operation(function(){for(var W=0;W<Y.length;W++)Y[W].clear()})};if(B)setTimeout(te,800);else return te}}function b(S){S.operation(function(){S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null),S.state.matchBrackets.currentlyHighlighted=g(S,!1,S.state.matchBrackets)})}function E(S){S.state.matchBrackets&&S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(S,B,k){k&&k!=t.Init&&(S.off("cursorActivity",b),S.off("focus",b),S.off("blur",E),E(S)),B&&(S.state.matchBrackets=typeof B=="object"?B:{},S.on("cursorActivity",b),S.on("focus",b),S.on("blur",E))}),t.defineExtension("matchBrackets",function(){g(this,!0)}),t.defineExtension("findMatchingBracket",function(S,B,k){return(k||typeof B=="boolean")&&(k?(k.strict=B,B=k):B=B?{strict:!0}:null),o(this,S,B)}),t.defineExtension("scanForBracket",function(S,B,k,z){return d(this,S,B,k,z)})})}()),UT.exports}Nue();const Wue=/("(?:[^\\"]|\\.)*")|[:,]/g;function yW(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(a,o,d){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const g=JSON.stringify(a,i);if(g===void 0)return g;const b=r-o.length-d;if(g.length<=b){const E=g.replace(Wue,(S,B)=>B||`${S} `);if(E.length<=b)return E}if(i!=null&&(a=JSON.parse(g),i=void 0),typeof a=="object"&&a!==null){const E=o+t,S=[];let B=0,k,z;if(Array.isArray(a)){k="[",z="]";const{length:j}=a;for(;B<j;B++)S.push(s(a[B],E,B===j-1?0:1)||"null")}else{k="{",z="}";const j=Object.keys(a),{length:Y}=j;for(;B<Y;B++){const q=j[B],ie=`${JSON.stringify(q)}: `,J=s(a[q],E,ie.length+(B===Y-1?0:1));J!==void 0&&S.push(ie+J)}}if(S.length>0)return[k,t+S.join(`,
${E}`),z].join(`
${o}`)}return g}(n,"",0)}var Gv={exports:{}},Gue=Gv.exports,jT;function Que(){return jT||(jT=1,function(n,e){(function(t,r){r(e)})(Gue,function(t){const r={isWhiteSpace:function(Ce){return Ce===" "||Ce===" "||Ce==="\uFEFF"||Ce>="	"&&Ce<="\r"||Ce===" "||Ce>=" "&&Ce<=" "||Ce==="\u2028"||Ce==="\u2029"||Ce===" "||Ce===" "||Ce==="　"},isWhiteSpaceJSON:function(Ce){return Ce===" "||Ce==="	"||Ce===`
`||Ce==="\r"},isLineTerminator:function(Ce){return Ce===`
`||Ce==="\r"||Ce==="\u2028"||Ce==="\u2029"},isLineTerminatorJSON:function(Ce){return Ce===`
`||Ce==="\r"},isIdentifierStart:function(Ce){return Ce==="$"||Ce==="_"||Ce>="A"&&Ce<="Z"||Ce>="a"&&Ce<="z"||Ce>=""&&r.NonAsciiIdentifierStart.test(Ce)},isIdentifierPart:function(Ce){return Ce==="$"||Ce==="_"||Ce>="A"&&Ce<="Z"||Ce>="a"&&Ce<="z"||Ce>="0"&&Ce<="9"||Ce>=""&&r.NonAsciiIdentifierPart.test(Ce)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function i(We){return We>="0"&&We<="9"||We>="A"&&We<="F"||We>="a"&&We<="f"}function s(We){return We>="0"&&We<="7"}function a(We){return We>="0"&&We<="9"}function o(We){return We.charCodeAt(0)===65279}const d={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},g=Object.hasOwn,b={};function E(We,Ce){(typeof We!="string"||!(We instanceof String))&&(We=String(We));const Pe=Ce.mode==="json5",it=Ce.ignoreBOM,vt=Ce.ignoreComments||Ce.mode==="cjson"||Pe,_t=Ce.ignoreTrailingCommas||Pe,ft=Ce.ignoreProtoKey,Dt=Ce.ignorePrototypeKeys,Tt=Ce.allowSingleQuotedStrings||Pe,Ue=Ce.allowDuplicateObjectKeys,Re=Ce.reviver,Be=Ce.tokenize,nt=Ce.rawTokens,Ct=Ce.tokenLocations,pt=Ce.tokenPaths,zt=Pe?r.isLineTerminator:r.isLineTerminatorJSON,tn=Pe?r.isWhiteSpace:r.isWhiteSpaceJSON,Lt=We.length;let gn=0,Nn=0,rn=0;const or=[];let Kn,pn,Xn;if(Be){let $e=null,rt,dt;Kn=function(){if($e!==null)throw Error("internal error, token overlap");rt=gn+1,dt=rn-Nn+1,$e=rn},pn=function(ct,Qt){if($e!==rn){const Vt={type:ct};nt&&(Vt.raw=We.substr($e,rn-$e)),Qt!==void 0&&(Vt.value=Qt),Ct&&(Vt.location={start:{column:dt,line:rt,offset:$e}}),pt&&(Vt.path=Xn.slice()),or.push(Vt)}return $e=null,Qt},pt&&(Xn=[])}function Mr(){let $e;return rn<Lt?$e=`Unexpected token ${JSON.stringify(We[rn])}`:$e="Unexpected end of input",$e}function Yn($e){const rt=rn-Nn+1;++gn;const dt=Se($e,We,rn,gn,rt),ct=SyntaxError(dt.message);return ct.reason=$e,ct.excerpt=dt.excerpt,ct.pointer=dt.pointer,ct.location={start:{column:rt,line:gn,offset:rn}},ct}function er($e){throw $e||($e=Mr()),Yn($e)}function qe($e){$e==="\r"&&We[rn]===`
`&&++rn,Nn=rn,++gn}function ce(){if(rn<Lt){Kn==null||Kn();const $e=We[rn++];if($e==='"'||$e==="'"&&Tt){const rt=p($e);return pn==null||pn("literal",rt),rt}if($e==="{")return pn==null||pn("symbol","{"),rr();if($e==="[")return pn==null||pn("symbol","["),Oe();if($e==="-"||$e==="."||a($e)||Pe&&($e==="+"||$e==="I"||$e==="N")){const rt=se();return pn==null||pn("literal",rt),rt}if($e==="n")return on("null"),pn==null||pn("literal",null),null;if($e==="t")return on("true"),pn==null||pn("literal",!0),!0;if($e==="f")return on("false"),pn==null||pn("literal",!1),!1;--rn,pn==null||pn();return}}function me(){let $e;if(rn<Lt){Kn==null||Kn();const rt=We[rn++];if(rt==='"'||rt==="'"&&Tt){const dt=p(rt);return pn==null||pn("literal",dt),dt}if(rt==="{")return pn==null||pn("symbol","{"),rr();if(rt==="[")return pn==null||pn("symbol","["),Oe();if(rt==="."||a(rt)){const dt=se();return pn==null||pn("literal",dt),dt}if(Pe&&r.isIdentifierStart(rt)||rt==="\\"&&We[rn]==="u"){const dt=rn-1;if($e=_e(),$e===void 0){rn=dt,pn==null||pn();return}return pn==null||pn("literal",$e),$e}--rn,pn==null||pn();return}}function tt(){o(We)&&(Kn==null||Kn(),++rn,pn==null||pn("bom"))}function Et(){let $e;function rt(){$e||($e=!0,--rn,Kn(),++rn)}function dt(){$e&&($e=!1,pn("whitespace"))}for(;rn<Lt;){const ct=We[rn++];if(zt(ct))Kn&&rt(),qe(ct);else if(tn(ct))Kn&&rt();else if(ct==="/"&&vt&&(We[rn]==="/"||We[rn]==="*"))Kn&&(--rn,dt(),Kn(),++rn),$t(We[rn++]==="*"),pn==null||pn("comment");else{--rn;break}}pn&&dt()}function $t($e){for(;rn<Lt;){const rt=We[rn++];if(zt(rt)){if(!$e){--rn;return}qe(rt)}else if(rt==="*"&&$e&&We[rn]==="/"){++rn;return}}$e&&er("Unclosed multiline comment")}function on($e){const rt=rn;for(let dt=1,ct=$e.length;dt<ct;++dt)(rn>=Lt||$e[dt]!==We[rn])&&(rn=rt-1,er()),++rn}function rr(){let $e={},rt=!1;for(;rn<Lt;){Et();const dt=me();Ue===!1&&g($e,dt)&&er(`Duplicate key: "${dt}"`),Et(),Kn==null||Kn();let ct=We[rn++];if(pn==null||pn("symbol",ct),ct==="}"&&dt===void 0)return!_t&&rt&&(--rn,er("Trailing comma in object")),$e;if(ct===":"&&dt!==void 0){Et(),Xn==null||Xn.push(dt);let Qt=ce();if(Xn==null||Xn.pop(),Qt===void 0&&er(`No value found for key "${dt}"`),typeof dt!="string"&&(!Pe||typeof dt!="number")&&er(`Wrong key type: "${dt}"`),Dt&&(dt in b||b[dt]!=null)||ft&&dt==="__proto__"||(Re&&(Qt=Re(dt,Qt)),Qt!==void 0&&(rt=!0,dt==="__proto__"?$e=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(Qt)}}`),$e):$e[dt]=Qt)),Et(),Kn==null||Kn(),ct=We[rn++],pn==null||pn("symbol",ct),ct!==","){if(ct==="}")return $e;er()}}else--rn,er()}er()}function Oe(){const $e=[];for(;rn<Lt;){Et(),Xn==null||Xn.push($e.length);let rt=ce();Xn==null||Xn.pop(),Et(),Kn==null||Kn();const dt=We[rn++];if(pn==null||pn("symbol",dt),rt!==void 0&&(Re&&(rt=Re(String($e.length),rt)),rt===void 0?(++$e.length,rt=!0):$e.push(rt)),dt===",")rt===void 0&&er("Elisions are not supported");else{if(dt==="]")return!_t&&rt===void 0&&$e.length&&(--rn,er("Trailing comma in array")),$e;--rn,er()}}}function se(){--rn;let $e=rn,rt=We[rn++];const dt=function(ct){const Qt=We.substr($e,rn-$e);let Vt;if(ct?Vt=Number.parseInt(Qt.replace(/^0o?/,""),8):Vt=Number(Qt),Number.isNaN(Vt))--rn,er(`Bad numeric literal - "${We.substr($e,rn-$e+1)}"`);else if(!Pe&&!Qt.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--rn,er(`Non-json numeric literal - "${We.substr($e,rn-$e+1)}"`);else return Vt};if((rt==="-"||rt==="+"&&Pe)&&(rt=We[rn++]),rt==="N"&&Pe)return on("NaN"),Number.NaN;if(rt==="I"&&Pe)return on("Infinity"),dt();if(rt>="1"&&rt<="9"){for(;rn<Lt&&a(We[rn]);)++rn;rt=We[rn++]}if(rt==="0"){rt=We[rn++];const ct=rt==="o"||rt==="O"||s(rt),Qt=rt==="x"||rt==="X";if(Pe&&(ct||Qt)){for(;rn<Lt&&(Qt?i:s)(We[rn]);)++rn;let Vt=1;return We[$e]==="-"?(Vt=-1,++$e):We[$e]==="+"&&++$e,Vt*dt(ct)}}if(rt==="."){for(;rn<Lt&&a(We[rn]);)++rn;rt=We[rn++]}if(rt==="e"||rt==="E"){for(rt=We[rn++],(rt==="-"||rt==="+")&&++rn;rn<Lt&&a(We[rn]);)++rn;rt=We[rn++]}return--rn,dt()}function _e(){--rn;let $e="";for(;rn<Lt;){let rt=We[rn++];if(rt==="\\"&&We[rn]==="u"&&i(We[rn+1])&&i(We[rn+2])&&i(We[rn+3])&&i(We[rn+4])&&(rt=String.fromCharCode(Number.parseInt(We.substr(rn+1,4),16)),rn+=5),$e.length)if(r.isIdentifierPart(rt))$e+=rt;else return--rn,$e;else if(r.isIdentifierStart(rt))$e+=rt;else return}er()}function p($e){let rt="";for(;rn<Lt;){let dt=We[rn++];if(dt===$e)return rt;if(dt==="\\")if(rn>=Lt&&er(),dt=We[rn++],d[dt]&&(Pe||dt!=="v"&&(dt!=="'"||Tt)))rt+=d[dt];else if(Pe&&zt(dt))qe(dt);else if(dt==="u"||dt==="x"&&Pe){const ct=dt==="u"?4:2;for(let Qt=0;Qt<ct;++Qt)rn>=Lt&&er(),i(We[rn])||er("Bad escape sequence"),rn++;rt+=String.fromCharCode(Number.parseInt(We.substr(rn-ct,ct),16))}else if(Pe&&s(dt)){let ct;dt<"4"&&s(We[rn])&&s(We[rn+1])?ct=3:s(We[rn])?ct=2:ct=1,rn+=ct-1,rt+=String.fromCharCode(Number.parseInt(We.substr(rn-ct,ct),8))}else Pe?rt+=dt:(--rn,er());else zt(dt)?er():(!Pe&&dt.charCodeAt(0)<32&&(--rn,er("Unexpected control character")),rt+=dt)}er()}it&&tt(),Et();let Ne=ce();if(Ne!==void 0||rn<Lt){if(Et(),rn>=Lt)return Re&&(Ne=Re("",Ne)),Be?or:Ne;er()}else er(rn?"No data, only a whitespace":"No data, empty input")}function S(We,Ce){return typeof Ce=="function"?Ce={reviver:Ce}:Ce||(Ce={}),E(We,Ce)}function B(We,Ce){Ce||(Ce={});const Pe=Ce.tokenize;Ce.tokenize=!0;const it=E(We,Ce);return Ce.tokenize=Pe,it}function k(We){return We.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function z(We){return We.length===0?"":`/${We.map(k).join("/")}`}function j(We){return We.replace(/~1/g,"/").replace(/~0/g,"~")}function Y(We){if(We==="")return[];if(We[0]!=="/")throw new Error('Missing initial "/" in the reference');return We.substr(1).split("/").map(j)}function q(We,Ce){const Pe=We.substr(0,Ce).split(/\r?\n/),it=Pe.length,vt=Pe[it-1].length+1;return{line:it,column:vt}}function ie(We,Ce,Pe){if(Ce>1){const it=/\r?\n/g;let vt;for(;vt=it.exec(We);)if(--Ce===1)return vt.index+Pe}return Pe-1}function J(We,Ce){const Pe=Math.max(0,Ce-20),it=We.substr(Pe,Ce-Pe);return(Ce>20?"...":"")+it.replace(/\r?\n/g,"")}function $(We,Ce){let Pe=Math.max(0,Ce-20);Pe+=Ce-Pe;const it=We.length-Pe;return We.substr(Pe,Math.min(20,it)).replace(/\r?\n/g,"")+(it>20?"...":"")}function te(We,Ce){const Pe=J(We,Ce),it=$(We,Ce),vt=`${new Array(Pe.length+1).join("-")}^`;return{excerpt:Pe+it,pointer:vt}}function W(We){let Ce=We.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const Pe=Ce.charAt(0);return Pe>="a"&&(Ce=Pe.toUpperCase()+Ce.substr(1)),Ce}function oe(We,Ce){const Pe=/ in JSON at position (\d+)$/.exec(Ce);if(Pe){const it=+Pe[1],vt=q(We,it);return{offset:it,line:vt.line,column:vt.column,reason:Ce.substr(0,Pe.index)}}}function fe(We,Ce){const Pe=/ end of JSON input$/.exec(Ce);if(Pe){const it=We.length,vt=q(We,it);return{offset:it,line:vt.line,column:vt.column,reason:Ce.substr(0,Pe.index+4)}}}function he(We,Ce){const Pe=/ at line (\d+) column (\d+) of the JSON data$/.exec(Ce);if(Pe){const it=+Pe[1],vt=+Pe[2];return{offset:ie(We,it,vt),line:it,column:vt,reason:Ce.substr(0,Pe.index)}}}function Se(We,Ce,Pe,it,vt){const _t=te(Ce,Pe),ft=_t.excerpt;let Dt,Tt;return typeof it=="number"?(Tt=_t.pointer,Dt=`Parse error on line ${it}, column ${vt}:
${ft}
${Tt}
${We}`):Dt=`Parse error in JSON input:
${ft}
${We}`,{message:Dt,excerpt:ft,pointer:Tt}}function pe(We,Ce){let Pe=W(Ce);const it=oe(We,Pe)||fe(We,Pe)||he(We,Pe);let vt,_t,ft;it?(vt=it.offset,_t=it.line,ft=it.column,Pe=it.reason):vt=0,Ce.reason=Pe;const Dt=Se(Pe,We,vt,_t,ft);return Ce.message=Dt.message,Ce.excerpt=Dt.excerpt,Dt.pointer&&(Ce.pointer=Dt.pointer,Ce.location={start:{column:ft,line:_t,offset:vt}}),Ce}function we(We,Ce){try{return JSON.parse(We,Ce)}catch(Pe){const it=pe(We,Pe);if(Pe.location)throw it;return S(We,Ce)}}const Ke=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),ge=typeof process<"u"&&process.version.startsWith("v4.");function st(We){return We.ignoreBOM||We.ignoreComments||We.ignoreTrailingCommas||We.allowSingleQuotedStrings||We.allowDuplicateObjectKeys===!1||We.ignoreProtoKey||We.ignorePrototypeKeys||We.mode==="cjson"||We.mode==="json5"||Ke||ge}function Qe(We){if(typeof We=="function")return We;if(We)return We.reviver}function Ze(We,Ce){return Ce||(Ce={}),st(Ce)?S(We,Ce):we(We,Qe(Ce))}t.parse=Ze,t.tokenize=B,t.pathToPointer=z,t.pointerToPath=Y,t.parseNative=we,t.parseCustom=S,t.getErrorTexts=Se,Object.defineProperty(t,"__esModule",{value:!0})})}(Gv,Gv.exports)),Gv.exports}var que=Que(),Qb={exports:{}},Yue=Qb.exports,NT;function $ue(){return NT||(NT=1,function(n,e){(function(t,r){n.exports=r()})(Yue,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(Re,Be){return Be={exports:{}},Re(Be,Be.exports),Be.exports}var i=r(function(Re){function Be(){var nt=0,Ct=1,pt=2,zt=3,tn=4,Lt=5,gn=6,Nn=7,rn=8,or=9,Kn=10,pn=11,Xn=12,Mr=13,Yn=14,er=15,qe=16,ce=17,me=0,tt=1,Et=2,$t=3,on=4;function rr(p,Ne){return 55296<=p.charCodeAt(Ne)&&p.charCodeAt(Ne)<=56319&&56320<=p.charCodeAt(Ne+1)&&p.charCodeAt(Ne+1)<=57343}function Oe(p,Ne){Ne===void 0&&(Ne=0);var $e=p.charCodeAt(Ne);if(55296<=$e&&$e<=56319&&Ne<p.length-1){var rt=$e,dt=p.charCodeAt(Ne+1);return 56320<=dt&&dt<=57343?(rt-55296)*1024+(dt-56320)+65536:rt}if(56320<=$e&&$e<=57343&&Ne>=1){var rt=p.charCodeAt(Ne-1),dt=$e;return 55296<=rt&&rt<=56319?(rt-55296)*1024+(dt-56320)+65536:dt}return $e}function se(p,Ne,$e){var rt=[p].concat(Ne).concat([$e]),dt=rt[rt.length-2],ct=$e,Qt=rt.lastIndexOf(Yn);if(Qt>1&&rt.slice(1,Qt).every(function(wt){return wt==zt})&&[zt,Mr,ce].indexOf(p)==-1)return Et;var Vt=rt.lastIndexOf(tn);if(Vt>0&&rt.slice(1,Vt).every(function(wt){return wt==tn})&&[Xn,tn].indexOf(dt)==-1)return rt.filter(function(wt){return wt==tn}).length%2==1?$t:on;if(dt==nt&&ct==Ct)return me;if(dt==pt||dt==nt||dt==Ct)return ct==Yn&&Ne.every(function(wt){return wt==zt})?Et:tt;if(ct==pt||ct==nt||ct==Ct)return tt;if(dt==gn&&(ct==gn||ct==Nn||ct==or||ct==Kn))return me;if((dt==or||dt==Nn)&&(ct==Nn||ct==rn))return me;if((dt==Kn||dt==rn)&&ct==rn)return me;if(ct==zt||ct==er)return me;if(ct==Lt)return me;if(dt==Xn)return me;var Nt=rt.indexOf(zt)!=-1?rt.lastIndexOf(zt)-1:rt.length-2;return[Mr,ce].indexOf(rt[Nt])!=-1&&rt.slice(Nt+1,-1).every(function(wt){return wt==zt})&&ct==Yn||dt==er&&[qe,ce].indexOf(ct)!=-1?me:Ne.indexOf(tn)!=-1?Et:dt==tn&&ct==tn?me:tt}this.nextBreak=function(p,Ne){if(Ne===void 0&&(Ne=0),Ne<0)return 0;if(Ne>=p.length-1)return p.length;for(var $e=_e(Oe(p,Ne)),rt=[],dt=Ne+1;dt<p.length;dt++)if(!rr(p,dt-1)){var ct=_e(Oe(p,dt));if(se($e,rt,ct))return dt;rt.push(ct)}return p.length},this.splitGraphemes=function(p){for(var Ne=[],$e=0,rt;(rt=this.nextBreak(p,$e))<p.length;)Ne.push(p.slice($e,rt)),$e=rt;return $e<p.length&&Ne.push(p.slice($e)),Ne},this.iterateGraphemes=function(p){var Ne=0,$e={next:(function(){var rt,dt;return(dt=this.nextBreak(p,Ne))<p.length?(rt=p.slice(Ne,dt),Ne=dt,{value:rt,done:!1}):Ne<p.length?(rt=p.slice(Ne),Ne=p.length,{value:rt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&($e[Symbol.iterator]=function(){return $e}),$e},this.countGraphemes=function(p){for(var Ne=0,$e=0,rt;(rt=this.nextBreak(p,$e))<p.length;)$e=rt,Ne++;return $e<p.length&&Ne++,Ne};function _e(p){return 1536<=p&&p<=1541||p==1757||p==1807||p==2274||p==3406||p==69821||70082<=p&&p<=70083||p==72250||72326<=p&&p<=72329||p==73030?Xn:p==13?nt:p==10?Ct:0<=p&&p<=9||11<=p&&p<=12||14<=p&&p<=31||127<=p&&p<=159||p==173||p==1564||p==6158||p==8203||8206<=p&&p<=8207||p==8232||p==8233||8234<=p&&p<=8238||8288<=p&&p<=8292||p==8293||8294<=p&&p<=8303||55296<=p&&p<=57343||p==65279||65520<=p&&p<=65528||65529<=p&&p<=65531||113824<=p&&p<=113827||119155<=p&&p<=119162||p==917504||p==917505||917506<=p&&p<=917535||917632<=p&&p<=917759||918e3<=p&&p<=921599?pt:768<=p&&p<=879||1155<=p&&p<=1159||1160<=p&&p<=1161||1425<=p&&p<=1469||p==1471||1473<=p&&p<=1474||1476<=p&&p<=1477||p==1479||1552<=p&&p<=1562||1611<=p&&p<=1631||p==1648||1750<=p&&p<=1756||1759<=p&&p<=1764||1767<=p&&p<=1768||1770<=p&&p<=1773||p==1809||1840<=p&&p<=1866||1958<=p&&p<=1968||2027<=p&&p<=2035||2070<=p&&p<=2073||2075<=p&&p<=2083||2085<=p&&p<=2087||2089<=p&&p<=2093||2137<=p&&p<=2139||2260<=p&&p<=2273||2275<=p&&p<=2306||p==2362||p==2364||2369<=p&&p<=2376||p==2381||2385<=p&&p<=2391||2402<=p&&p<=2403||p==2433||p==2492||p==2494||2497<=p&&p<=2500||p==2509||p==2519||2530<=p&&p<=2531||2561<=p&&p<=2562||p==2620||2625<=p&&p<=2626||2631<=p&&p<=2632||2635<=p&&p<=2637||p==2641||2672<=p&&p<=2673||p==2677||2689<=p&&p<=2690||p==2748||2753<=p&&p<=2757||2759<=p&&p<=2760||p==2765||2786<=p&&p<=2787||2810<=p&&p<=2815||p==2817||p==2876||p==2878||p==2879||2881<=p&&p<=2884||p==2893||p==2902||p==2903||2914<=p&&p<=2915||p==2946||p==3006||p==3008||p==3021||p==3031||p==3072||3134<=p&&p<=3136||3142<=p&&p<=3144||3146<=p&&p<=3149||3157<=p&&p<=3158||3170<=p&&p<=3171||p==3201||p==3260||p==3263||p==3266||p==3270||3276<=p&&p<=3277||3285<=p&&p<=3286||3298<=p&&p<=3299||3328<=p&&p<=3329||3387<=p&&p<=3388||p==3390||3393<=p&&p<=3396||p==3405||p==3415||3426<=p&&p<=3427||p==3530||p==3535||3538<=p&&p<=3540||p==3542||p==3551||p==3633||3636<=p&&p<=3642||3655<=p&&p<=3662||p==3761||3764<=p&&p<=3769||3771<=p&&p<=3772||3784<=p&&p<=3789||3864<=p&&p<=3865||p==3893||p==3895||p==3897||3953<=p&&p<=3966||3968<=p&&p<=3972||3974<=p&&p<=3975||3981<=p&&p<=3991||3993<=p&&p<=4028||p==4038||4141<=p&&p<=4144||4146<=p&&p<=4151||4153<=p&&p<=4154||4157<=p&&p<=4158||4184<=p&&p<=4185||4190<=p&&p<=4192||4209<=p&&p<=4212||p==4226||4229<=p&&p<=4230||p==4237||p==4253||4957<=p&&p<=4959||5906<=p&&p<=5908||5938<=p&&p<=5940||5970<=p&&p<=5971||6002<=p&&p<=6003||6068<=p&&p<=6069||6071<=p&&p<=6077||p==6086||6089<=p&&p<=6099||p==6109||6155<=p&&p<=6157||6277<=p&&p<=6278||p==6313||6432<=p&&p<=6434||6439<=p&&p<=6440||p==6450||6457<=p&&p<=6459||6679<=p&&p<=6680||p==6683||p==6742||6744<=p&&p<=6750||p==6752||p==6754||6757<=p&&p<=6764||6771<=p&&p<=6780||p==6783||6832<=p&&p<=6845||p==6846||6912<=p&&p<=6915||p==6964||6966<=p&&p<=6970||p==6972||p==6978||7019<=p&&p<=7027||7040<=p&&p<=7041||7074<=p&&p<=7077||7080<=p&&p<=7081||7083<=p&&p<=7085||p==7142||7144<=p&&p<=7145||p==7149||7151<=p&&p<=7153||7212<=p&&p<=7219||7222<=p&&p<=7223||7376<=p&&p<=7378||7380<=p&&p<=7392||7394<=p&&p<=7400||p==7405||p==7412||7416<=p&&p<=7417||7616<=p&&p<=7673||7675<=p&&p<=7679||p==8204||8400<=p&&p<=8412||8413<=p&&p<=8416||p==8417||8418<=p&&p<=8420||8421<=p&&p<=8432||11503<=p&&p<=11505||p==11647||11744<=p&&p<=11775||12330<=p&&p<=12333||12334<=p&&p<=12335||12441<=p&&p<=12442||p==42607||42608<=p&&p<=42610||42612<=p&&p<=42621||42654<=p&&p<=42655||42736<=p&&p<=42737||p==43010||p==43014||p==43019||43045<=p&&p<=43046||43204<=p&&p<=43205||43232<=p&&p<=43249||43302<=p&&p<=43309||43335<=p&&p<=43345||43392<=p&&p<=43394||p==43443||43446<=p&&p<=43449||p==43452||p==43493||43561<=p&&p<=43566||43569<=p&&p<=43570||43573<=p&&p<=43574||p==43587||p==43596||p==43644||p==43696||43698<=p&&p<=43700||43703<=p&&p<=43704||43710<=p&&p<=43711||p==43713||43756<=p&&p<=43757||p==43766||p==44005||p==44008||p==44013||p==64286||65024<=p&&p<=65039||65056<=p&&p<=65071||65438<=p&&p<=65439||p==66045||p==66272||66422<=p&&p<=66426||68097<=p&&p<=68099||68101<=p&&p<=68102||68108<=p&&p<=68111||68152<=p&&p<=68154||p==68159||68325<=p&&p<=68326||p==69633||69688<=p&&p<=69702||69759<=p&&p<=69761||69811<=p&&p<=69814||69817<=p&&p<=69818||69888<=p&&p<=69890||69927<=p&&p<=69931||69933<=p&&p<=69940||p==70003||70016<=p&&p<=70017||70070<=p&&p<=70078||70090<=p&&p<=70092||70191<=p&&p<=70193||p==70196||70198<=p&&p<=70199||p==70206||p==70367||70371<=p&&p<=70378||70400<=p&&p<=70401||p==70460||p==70462||p==70464||p==70487||70502<=p&&p<=70508||70512<=p&&p<=70516||70712<=p&&p<=70719||70722<=p&&p<=70724||p==70726||p==70832||70835<=p&&p<=70840||p==70842||p==70845||70847<=p&&p<=70848||70850<=p&&p<=70851||p==71087||71090<=p&&p<=71093||71100<=p&&p<=71101||71103<=p&&p<=71104||71132<=p&&p<=71133||71219<=p&&p<=71226||p==71229||71231<=p&&p<=71232||p==71339||p==71341||71344<=p&&p<=71349||p==71351||71453<=p&&p<=71455||71458<=p&&p<=71461||71463<=p&&p<=71467||72193<=p&&p<=72198||72201<=p&&p<=72202||72243<=p&&p<=72248||72251<=p&&p<=72254||p==72263||72273<=p&&p<=72278||72281<=p&&p<=72283||72330<=p&&p<=72342||72344<=p&&p<=72345||72752<=p&&p<=72758||72760<=p&&p<=72765||p==72767||72850<=p&&p<=72871||72874<=p&&p<=72880||72882<=p&&p<=72883||72885<=p&&p<=72886||73009<=p&&p<=73014||p==73018||73020<=p&&p<=73021||73023<=p&&p<=73029||p==73031||92912<=p&&p<=92916||92976<=p&&p<=92982||94095<=p&&p<=94098||113821<=p&&p<=113822||p==119141||119143<=p&&p<=119145||119150<=p&&p<=119154||119163<=p&&p<=119170||119173<=p&&p<=119179||119210<=p&&p<=119213||119362<=p&&p<=119364||121344<=p&&p<=121398||121403<=p&&p<=121452||p==121461||p==121476||121499<=p&&p<=121503||121505<=p&&p<=121519||122880<=p&&p<=122886||122888<=p&&p<=122904||122907<=p&&p<=122913||122915<=p&&p<=122916||122918<=p&&p<=122922||125136<=p&&p<=125142||125252<=p&&p<=125258||917536<=p&&p<=917631||917760<=p&&p<=917999?zt:127462<=p&&p<=127487?tn:p==2307||p==2363||2366<=p&&p<=2368||2377<=p&&p<=2380||2382<=p&&p<=2383||2434<=p&&p<=2435||2495<=p&&p<=2496||2503<=p&&p<=2504||2507<=p&&p<=2508||p==2563||2622<=p&&p<=2624||p==2691||2750<=p&&p<=2752||p==2761||2763<=p&&p<=2764||2818<=p&&p<=2819||p==2880||2887<=p&&p<=2888||2891<=p&&p<=2892||p==3007||3009<=p&&p<=3010||3014<=p&&p<=3016||3018<=p&&p<=3020||3073<=p&&p<=3075||3137<=p&&p<=3140||3202<=p&&p<=3203||p==3262||3264<=p&&p<=3265||3267<=p&&p<=3268||3271<=p&&p<=3272||3274<=p&&p<=3275||3330<=p&&p<=3331||3391<=p&&p<=3392||3398<=p&&p<=3400||3402<=p&&p<=3404||3458<=p&&p<=3459||3536<=p&&p<=3537||3544<=p&&p<=3550||3570<=p&&p<=3571||p==3635||p==3763||3902<=p&&p<=3903||p==3967||p==4145||4155<=p&&p<=4156||4182<=p&&p<=4183||p==4228||p==6070||6078<=p&&p<=6085||6087<=p&&p<=6088||6435<=p&&p<=6438||6441<=p&&p<=6443||6448<=p&&p<=6449||6451<=p&&p<=6456||6681<=p&&p<=6682||p==6741||p==6743||6765<=p&&p<=6770||p==6916||p==6965||p==6971||6973<=p&&p<=6977||6979<=p&&p<=6980||p==7042||p==7073||7078<=p&&p<=7079||p==7082||p==7143||7146<=p&&p<=7148||p==7150||7154<=p&&p<=7155||7204<=p&&p<=7211||7220<=p&&p<=7221||p==7393||7410<=p&&p<=7411||p==7415||43043<=p&&p<=43044||p==43047||43136<=p&&p<=43137||43188<=p&&p<=43203||43346<=p&&p<=43347||p==43395||43444<=p&&p<=43445||43450<=p&&p<=43451||43453<=p&&p<=43456||43567<=p&&p<=43568||43571<=p&&p<=43572||p==43597||p==43755||43758<=p&&p<=43759||p==43765||44003<=p&&p<=44004||44006<=p&&p<=44007||44009<=p&&p<=44010||p==44012||p==69632||p==69634||p==69762||69808<=p&&p<=69810||69815<=p&&p<=69816||p==69932||p==70018||70067<=p&&p<=70069||70079<=p&&p<=70080||70188<=p&&p<=70190||70194<=p&&p<=70195||p==70197||70368<=p&&p<=70370||70402<=p&&p<=70403||p==70463||70465<=p&&p<=70468||70471<=p&&p<=70472||70475<=p&&p<=70477||70498<=p&&p<=70499||70709<=p&&p<=70711||70720<=p&&p<=70721||p==70725||70833<=p&&p<=70834||p==70841||70843<=p&&p<=70844||p==70846||p==70849||71088<=p&&p<=71089||71096<=p&&p<=71099||p==71102||71216<=p&&p<=71218||71227<=p&&p<=71228||p==71230||p==71340||71342<=p&&p<=71343||p==71350||71456<=p&&p<=71457||p==71462||72199<=p&&p<=72200||p==72249||72279<=p&&p<=72280||p==72343||p==72751||p==72766||p==72873||p==72881||p==72884||94033<=p&&p<=94078||p==119142||p==119149?Lt:4352<=p&&p<=4447||43360<=p&&p<=43388?gn:4448<=p&&p<=4519||55216<=p&&p<=55238?Nn:4520<=p&&p<=4607||55243<=p&&p<=55291?rn:p==44032||p==44060||p==44088||p==44116||p==44144||p==44172||p==44200||p==44228||p==44256||p==44284||p==44312||p==44340||p==44368||p==44396||p==44424||p==44452||p==44480||p==44508||p==44536||p==44564||p==44592||p==44620||p==44648||p==44676||p==44704||p==44732||p==44760||p==44788||p==44816||p==44844||p==44872||p==44900||p==44928||p==44956||p==44984||p==45012||p==45040||p==45068||p==45096||p==45124||p==45152||p==45180||p==45208||p==45236||p==45264||p==45292||p==45320||p==45348||p==45376||p==45404||p==45432||p==45460||p==45488||p==45516||p==45544||p==45572||p==45600||p==45628||p==45656||p==45684||p==45712||p==45740||p==45768||p==45796||p==45824||p==45852||p==45880||p==45908||p==45936||p==45964||p==45992||p==46020||p==46048||p==46076||p==46104||p==46132||p==46160||p==46188||p==46216||p==46244||p==46272||p==46300||p==46328||p==46356||p==46384||p==46412||p==46440||p==46468||p==46496||p==46524||p==46552||p==46580||p==46608||p==46636||p==46664||p==46692||p==46720||p==46748||p==46776||p==46804||p==46832||p==46860||p==46888||p==46916||p==46944||p==46972||p==47e3||p==47028||p==47056||p==47084||p==47112||p==47140||p==47168||p==47196||p==47224||p==47252||p==47280||p==47308||p==47336||p==47364||p==47392||p==47420||p==47448||p==47476||p==47504||p==47532||p==47560||p==47588||p==47616||p==47644||p==47672||p==47700||p==47728||p==47756||p==47784||p==47812||p==47840||p==47868||p==47896||p==47924||p==47952||p==47980||p==48008||p==48036||p==48064||p==48092||p==48120||p==48148||p==48176||p==48204||p==48232||p==48260||p==48288||p==48316||p==48344||p==48372||p==48400||p==48428||p==48456||p==48484||p==48512||p==48540||p==48568||p==48596||p==48624||p==48652||p==48680||p==48708||p==48736||p==48764||p==48792||p==48820||p==48848||p==48876||p==48904||p==48932||p==48960||p==48988||p==49016||p==49044||p==49072||p==49100||p==49128||p==49156||p==49184||p==49212||p==49240||p==49268||p==49296||p==49324||p==49352||p==49380||p==49408||p==49436||p==49464||p==49492||p==49520||p==49548||p==49576||p==49604||p==49632||p==49660||p==49688||p==49716||p==49744||p==49772||p==49800||p==49828||p==49856||p==49884||p==49912||p==49940||p==49968||p==49996||p==50024||p==50052||p==50080||p==50108||p==50136||p==50164||p==50192||p==50220||p==50248||p==50276||p==50304||p==50332||p==50360||p==50388||p==50416||p==50444||p==50472||p==50500||p==50528||p==50556||p==50584||p==50612||p==50640||p==50668||p==50696||p==50724||p==50752||p==50780||p==50808||p==50836||p==50864||p==50892||p==50920||p==50948||p==50976||p==51004||p==51032||p==51060||p==51088||p==51116||p==51144||p==51172||p==51200||p==51228||p==51256||p==51284||p==51312||p==51340||p==51368||p==51396||p==51424||p==51452||p==51480||p==51508||p==51536||p==51564||p==51592||p==51620||p==51648||p==51676||p==51704||p==51732||p==51760||p==51788||p==51816||p==51844||p==51872||p==51900||p==51928||p==51956||p==51984||p==52012||p==52040||p==52068||p==52096||p==52124||p==52152||p==52180||p==52208||p==52236||p==52264||p==52292||p==52320||p==52348||p==52376||p==52404||p==52432||p==52460||p==52488||p==52516||p==52544||p==52572||p==52600||p==52628||p==52656||p==52684||p==52712||p==52740||p==52768||p==52796||p==52824||p==52852||p==52880||p==52908||p==52936||p==52964||p==52992||p==53020||p==53048||p==53076||p==53104||p==53132||p==53160||p==53188||p==53216||p==53244||p==53272||p==53300||p==53328||p==53356||p==53384||p==53412||p==53440||p==53468||p==53496||p==53524||p==53552||p==53580||p==53608||p==53636||p==53664||p==53692||p==53720||p==53748||p==53776||p==53804||p==53832||p==53860||p==53888||p==53916||p==53944||p==53972||p==54e3||p==54028||p==54056||p==54084||p==54112||p==54140||p==54168||p==54196||p==54224||p==54252||p==54280||p==54308||p==54336||p==54364||p==54392||p==54420||p==54448||p==54476||p==54504||p==54532||p==54560||p==54588||p==54616||p==54644||p==54672||p==54700||p==54728||p==54756||p==54784||p==54812||p==54840||p==54868||p==54896||p==54924||p==54952||p==54980||p==55008||p==55036||p==55064||p==55092||p==55120||p==55148||p==55176?or:44033<=p&&p<=44059||44061<=p&&p<=44087||44089<=p&&p<=44115||44117<=p&&p<=44143||44145<=p&&p<=44171||44173<=p&&p<=44199||44201<=p&&p<=44227||44229<=p&&p<=44255||44257<=p&&p<=44283||44285<=p&&p<=44311||44313<=p&&p<=44339||44341<=p&&p<=44367||44369<=p&&p<=44395||44397<=p&&p<=44423||44425<=p&&p<=44451||44453<=p&&p<=44479||44481<=p&&p<=44507||44509<=p&&p<=44535||44537<=p&&p<=44563||44565<=p&&p<=44591||44593<=p&&p<=44619||44621<=p&&p<=44647||44649<=p&&p<=44675||44677<=p&&p<=44703||44705<=p&&p<=44731||44733<=p&&p<=44759||44761<=p&&p<=44787||44789<=p&&p<=44815||44817<=p&&p<=44843||44845<=p&&p<=44871||44873<=p&&p<=44899||44901<=p&&p<=44927||44929<=p&&p<=44955||44957<=p&&p<=44983||44985<=p&&p<=45011||45013<=p&&p<=45039||45041<=p&&p<=45067||45069<=p&&p<=45095||45097<=p&&p<=45123||45125<=p&&p<=45151||45153<=p&&p<=45179||45181<=p&&p<=45207||45209<=p&&p<=45235||45237<=p&&p<=45263||45265<=p&&p<=45291||45293<=p&&p<=45319||45321<=p&&p<=45347||45349<=p&&p<=45375||45377<=p&&p<=45403||45405<=p&&p<=45431||45433<=p&&p<=45459||45461<=p&&p<=45487||45489<=p&&p<=45515||45517<=p&&p<=45543||45545<=p&&p<=45571||45573<=p&&p<=45599||45601<=p&&p<=45627||45629<=p&&p<=45655||45657<=p&&p<=45683||45685<=p&&p<=45711||45713<=p&&p<=45739||45741<=p&&p<=45767||45769<=p&&p<=45795||45797<=p&&p<=45823||45825<=p&&p<=45851||45853<=p&&p<=45879||45881<=p&&p<=45907||45909<=p&&p<=45935||45937<=p&&p<=45963||45965<=p&&p<=45991||45993<=p&&p<=46019||46021<=p&&p<=46047||46049<=p&&p<=46075||46077<=p&&p<=46103||46105<=p&&p<=46131||46133<=p&&p<=46159||46161<=p&&p<=46187||46189<=p&&p<=46215||46217<=p&&p<=46243||46245<=p&&p<=46271||46273<=p&&p<=46299||46301<=p&&p<=46327||46329<=p&&p<=46355||46357<=p&&p<=46383||46385<=p&&p<=46411||46413<=p&&p<=46439||46441<=p&&p<=46467||46469<=p&&p<=46495||46497<=p&&p<=46523||46525<=p&&p<=46551||46553<=p&&p<=46579||46581<=p&&p<=46607||46609<=p&&p<=46635||46637<=p&&p<=46663||46665<=p&&p<=46691||46693<=p&&p<=46719||46721<=p&&p<=46747||46749<=p&&p<=46775||46777<=p&&p<=46803||46805<=p&&p<=46831||46833<=p&&p<=46859||46861<=p&&p<=46887||46889<=p&&p<=46915||46917<=p&&p<=46943||46945<=p&&p<=46971||46973<=p&&p<=46999||47001<=p&&p<=47027||47029<=p&&p<=47055||47057<=p&&p<=47083||47085<=p&&p<=47111||47113<=p&&p<=47139||47141<=p&&p<=47167||47169<=p&&p<=47195||47197<=p&&p<=47223||47225<=p&&p<=47251||47253<=p&&p<=47279||47281<=p&&p<=47307||47309<=p&&p<=47335||47337<=p&&p<=47363||47365<=p&&p<=47391||47393<=p&&p<=47419||47421<=p&&p<=47447||47449<=p&&p<=47475||47477<=p&&p<=47503||47505<=p&&p<=47531||47533<=p&&p<=47559||47561<=p&&p<=47587||47589<=p&&p<=47615||47617<=p&&p<=47643||47645<=p&&p<=47671||47673<=p&&p<=47699||47701<=p&&p<=47727||47729<=p&&p<=47755||47757<=p&&p<=47783||47785<=p&&p<=47811||47813<=p&&p<=47839||47841<=p&&p<=47867||47869<=p&&p<=47895||47897<=p&&p<=47923||47925<=p&&p<=47951||47953<=p&&p<=47979||47981<=p&&p<=48007||48009<=p&&p<=48035||48037<=p&&p<=48063||48065<=p&&p<=48091||48093<=p&&p<=48119||48121<=p&&p<=48147||48149<=p&&p<=48175||48177<=p&&p<=48203||48205<=p&&p<=48231||48233<=p&&p<=48259||48261<=p&&p<=48287||48289<=p&&p<=48315||48317<=p&&p<=48343||48345<=p&&p<=48371||48373<=p&&p<=48399||48401<=p&&p<=48427||48429<=p&&p<=48455||48457<=p&&p<=48483||48485<=p&&p<=48511||48513<=p&&p<=48539||48541<=p&&p<=48567||48569<=p&&p<=48595||48597<=p&&p<=48623||48625<=p&&p<=48651||48653<=p&&p<=48679||48681<=p&&p<=48707||48709<=p&&p<=48735||48737<=p&&p<=48763||48765<=p&&p<=48791||48793<=p&&p<=48819||48821<=p&&p<=48847||48849<=p&&p<=48875||48877<=p&&p<=48903||48905<=p&&p<=48931||48933<=p&&p<=48959||48961<=p&&p<=48987||48989<=p&&p<=49015||49017<=p&&p<=49043||49045<=p&&p<=49071||49073<=p&&p<=49099||49101<=p&&p<=49127||49129<=p&&p<=49155||49157<=p&&p<=49183||49185<=p&&p<=49211||49213<=p&&p<=49239||49241<=p&&p<=49267||49269<=p&&p<=49295||49297<=p&&p<=49323||49325<=p&&p<=49351||49353<=p&&p<=49379||49381<=p&&p<=49407||49409<=p&&p<=49435||49437<=p&&p<=49463||49465<=p&&p<=49491||49493<=p&&p<=49519||49521<=p&&p<=49547||49549<=p&&p<=49575||49577<=p&&p<=49603||49605<=p&&p<=49631||49633<=p&&p<=49659||49661<=p&&p<=49687||49689<=p&&p<=49715||49717<=p&&p<=49743||49745<=p&&p<=49771||49773<=p&&p<=49799||49801<=p&&p<=49827||49829<=p&&p<=49855||49857<=p&&p<=49883||49885<=p&&p<=49911||49913<=p&&p<=49939||49941<=p&&p<=49967||49969<=p&&p<=49995||49997<=p&&p<=50023||50025<=p&&p<=50051||50053<=p&&p<=50079||50081<=p&&p<=50107||50109<=p&&p<=50135||50137<=p&&p<=50163||50165<=p&&p<=50191||50193<=p&&p<=50219||50221<=p&&p<=50247||50249<=p&&p<=50275||50277<=p&&p<=50303||50305<=p&&p<=50331||50333<=p&&p<=50359||50361<=p&&p<=50387||50389<=p&&p<=50415||50417<=p&&p<=50443||50445<=p&&p<=50471||50473<=p&&p<=50499||50501<=p&&p<=50527||50529<=p&&p<=50555||50557<=p&&p<=50583||50585<=p&&p<=50611||50613<=p&&p<=50639||50641<=p&&p<=50667||50669<=p&&p<=50695||50697<=p&&p<=50723||50725<=p&&p<=50751||50753<=p&&p<=50779||50781<=p&&p<=50807||50809<=p&&p<=50835||50837<=p&&p<=50863||50865<=p&&p<=50891||50893<=p&&p<=50919||50921<=p&&p<=50947||50949<=p&&p<=50975||50977<=p&&p<=51003||51005<=p&&p<=51031||51033<=p&&p<=51059||51061<=p&&p<=51087||51089<=p&&p<=51115||51117<=p&&p<=51143||51145<=p&&p<=51171||51173<=p&&p<=51199||51201<=p&&p<=51227||51229<=p&&p<=51255||51257<=p&&p<=51283||51285<=p&&p<=51311||51313<=p&&p<=51339||51341<=p&&p<=51367||51369<=p&&p<=51395||51397<=p&&p<=51423||51425<=p&&p<=51451||51453<=p&&p<=51479||51481<=p&&p<=51507||51509<=p&&p<=51535||51537<=p&&p<=51563||51565<=p&&p<=51591||51593<=p&&p<=51619||51621<=p&&p<=51647||51649<=p&&p<=51675||51677<=p&&p<=51703||51705<=p&&p<=51731||51733<=p&&p<=51759||51761<=p&&p<=51787||51789<=p&&p<=51815||51817<=p&&p<=51843||51845<=p&&p<=51871||51873<=p&&p<=51899||51901<=p&&p<=51927||51929<=p&&p<=51955||51957<=p&&p<=51983||51985<=p&&p<=52011||52013<=p&&p<=52039||52041<=p&&p<=52067||52069<=p&&p<=52095||52097<=p&&p<=52123||52125<=p&&p<=52151||52153<=p&&p<=52179||52181<=p&&p<=52207||52209<=p&&p<=52235||52237<=p&&p<=52263||52265<=p&&p<=52291||52293<=p&&p<=52319||52321<=p&&p<=52347||52349<=p&&p<=52375||52377<=p&&p<=52403||52405<=p&&p<=52431||52433<=p&&p<=52459||52461<=p&&p<=52487||52489<=p&&p<=52515||52517<=p&&p<=52543||52545<=p&&p<=52571||52573<=p&&p<=52599||52601<=p&&p<=52627||52629<=p&&p<=52655||52657<=p&&p<=52683||52685<=p&&p<=52711||52713<=p&&p<=52739||52741<=p&&p<=52767||52769<=p&&p<=52795||52797<=p&&p<=52823||52825<=p&&p<=52851||52853<=p&&p<=52879||52881<=p&&p<=52907||52909<=p&&p<=52935||52937<=p&&p<=52963||52965<=p&&p<=52991||52993<=p&&p<=53019||53021<=p&&p<=53047||53049<=p&&p<=53075||53077<=p&&p<=53103||53105<=p&&p<=53131||53133<=p&&p<=53159||53161<=p&&p<=53187||53189<=p&&p<=53215||53217<=p&&p<=53243||53245<=p&&p<=53271||53273<=p&&p<=53299||53301<=p&&p<=53327||53329<=p&&p<=53355||53357<=p&&p<=53383||53385<=p&&p<=53411||53413<=p&&p<=53439||53441<=p&&p<=53467||53469<=p&&p<=53495||53497<=p&&p<=53523||53525<=p&&p<=53551||53553<=p&&p<=53579||53581<=p&&p<=53607||53609<=p&&p<=53635||53637<=p&&p<=53663||53665<=p&&p<=53691||53693<=p&&p<=53719||53721<=p&&p<=53747||53749<=p&&p<=53775||53777<=p&&p<=53803||53805<=p&&p<=53831||53833<=p&&p<=53859||53861<=p&&p<=53887||53889<=p&&p<=53915||53917<=p&&p<=53943||53945<=p&&p<=53971||53973<=p&&p<=53999||54001<=p&&p<=54027||54029<=p&&p<=54055||54057<=p&&p<=54083||54085<=p&&p<=54111||54113<=p&&p<=54139||54141<=p&&p<=54167||54169<=p&&p<=54195||54197<=p&&p<=54223||54225<=p&&p<=54251||54253<=p&&p<=54279||54281<=p&&p<=54307||54309<=p&&p<=54335||54337<=p&&p<=54363||54365<=p&&p<=54391||54393<=p&&p<=54419||54421<=p&&p<=54447||54449<=p&&p<=54475||54477<=p&&p<=54503||54505<=p&&p<=54531||54533<=p&&p<=54559||54561<=p&&p<=54587||54589<=p&&p<=54615||54617<=p&&p<=54643||54645<=p&&p<=54671||54673<=p&&p<=54699||54701<=p&&p<=54727||54729<=p&&p<=54755||54757<=p&&p<=54783||54785<=p&&p<=54811||54813<=p&&p<=54839||54841<=p&&p<=54867||54869<=p&&p<=54895||54897<=p&&p<=54923||54925<=p&&p<=54951||54953<=p&&p<=54979||54981<=p&&p<=55007||55009<=p&&p<=55035||55037<=p&&p<=55063||55065<=p&&p<=55091||55093<=p&&p<=55119||55121<=p&&p<=55147||55149<=p&&p<=55175||55177<=p&&p<=55203?Kn:p==9757||p==9977||9994<=p&&p<=9997||p==127877||127938<=p&&p<=127940||p==127943||127946<=p&&p<=127948||128066<=p&&p<=128067||128070<=p&&p<=128080||p==128110||128112<=p&&p<=128120||p==128124||128129<=p&&p<=128131||128133<=p&&p<=128135||p==128170||128372<=p&&p<=128373||p==128378||p==128400||128405<=p&&p<=128406||128581<=p&&p<=128583||128587<=p&&p<=128591||p==128675||128692<=p&&p<=128694||p==128704||p==128716||129304<=p&&p<=129308||129310<=p&&p<=129311||p==129318||129328<=p&&p<=129337||129341<=p&&p<=129342||129489<=p&&p<=129501?Mr:127995<=p&&p<=127999?Yn:p==8205?er:p==9792||p==9794||9877<=p&&p<=9878||p==9992||p==10084||p==127752||p==127806||p==127859||p==127891||p==127908||p==127912||p==127979||p==127981||p==128139||128187<=p&&p<=128188||p==128295||p==128300||p==128488||p==128640||p==128658?qe:128102<=p&&p<=128105?ce:pn}return this}Re.exports&&(Re.exports=Be)}),s=new i,a=function(Be,nt,Ct){for(var pt=s.iterateGraphemes(Be.substring(nt)),zt="",tn=0;tn<Ct-nt;tn++){var Lt=pt.next();if(zt+=Lt.value,Lt.done)break}return zt},o=function(Re,Be,nt,Ct,pt,zt,tn){return{start:{line:Re,column:Be,offset:nt},end:{line:Ct,column:pt,offset:zt},source:tn||null}},d=r(function(Re,Be){(function(nt,Ct){Re.exports=Ct()})(t,function(){var nt="",Ct,pt=zt;function zt(Kn,pn){if(typeof Kn!="string")throw new TypeError("expected a string");if(pn===1)return Kn;if(pn===2)return Kn+Kn;var Xn=Kn.length*pn;if(Ct!==Kn||typeof Ct>"u")Ct=Kn,nt="";else if(nt.length>=Xn)return nt.substr(0,Xn);for(;Xn>nt.length&&pn>1;)pn&1&&(nt+=Kn),pn>>=1,Kn+=Kn;return nt+=Kn,nt=nt.substr(0,Xn),nt}var tn=function(pn,Xn,Mr){if(pn==null||Xn==null)return pn;var Yn=String(pn),er=typeof Xn=="number"?Xn:parseInt(Xn,10);if(isNaN(er)||!isFinite(er))return Yn;var qe=Yn.length;if(qe>=er)return Yn;var ce=String(Mr);ce===""&&(ce=" ");for(var me=er-qe;ce.length<me;)ce+=ce;var tt=ce.length>me?ce.substr(0,me):ce;return tt+Yn},Lt=Object.assign||function(Kn){for(var pn=1;pn<arguments.length;pn++){var Xn=arguments[pn];for(var Mr in Xn)Object.prototype.hasOwnProperty.call(Xn,Mr)&&(Kn[Mr]=Xn[Mr])}return Kn};function gn(Kn,pn,Xn,Mr){var Yn=String(pn),er=tn(Yn,Xn," "),qe=pt(" ",Mr.tabSize);return er+" | "+Kn.replace(/\t/g,qe)}function Nn(Kn,pn,Xn,Mr,Yn){return Kn.slice(pn,Xn).map(function(er,qe){return gn(er,pn+qe+1,Mr,Yn)}).join(`
`)}var rn={extraLines:2,tabSize:4},or=function(pn,Xn,Mr,Yn){Yn=Lt({},rn,Yn);var er=pn.split(/\r\n?|\n|\f/),qe=Math.max(1,Xn-Yn.extraLines)-1,ce=Math.min(Xn+Yn.extraLines,er.length),me=String(ce).length,tt=Nn(er,qe,Xn,me,Yn),Et=gn(er[Xn-1].substring(0,Mr-1),Xn,me,Yn),$t=pt(" ",Et.length)+"^",on=Nn(er,Xn,ce,me,Yn);return[tt,$t,on].filter(Boolean).join(`
`)};return or})}),g=new Error().stack,b=function(Re){var Be=Object.create(SyntaxError.prototype);return Object.assign(Be,Re,{name:"SyntaxError"}),Object.defineProperty(Be,"stack",{get:function(){return g?g.replace(/^(.+\n){1,3}/,String(Be)+`
`):""}}),Be},E=function(Re,Be,nt,Ct,pt){throw b({message:Ct?Re+`
`+d(Be,Ct,pt):Re,rawMessage:Re,source:nt,line:Ct,column:pt})},S={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Be){for(var nt=arguments.length,Ct=Array(nt>1?nt-1:0),pt=1;pt<nt;pt++)Ct[pt-1]=arguments[pt];return"Unexpected token <"+Be+"> at "+Ct.filter(Boolean).join(":")}},B={unexpectedSymbol:function(Be){for(var nt=arguments.length,Ct=Array(nt>1?nt-1:0),pt=1;pt<nt;pt++)Ct[pt-1]=arguments[pt];return"Unexpected symbol <"+Be+"> at "+Ct.filter(Boolean).join(":")}},k={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},z={"{":k.LEFT_BRACE,"}":k.RIGHT_BRACE,"[":k.LEFT_BRACKET,"]":k.RIGHT_BRACKET,":":k.COLON,",":k.COMMA},j={true:k.TRUE,false:k.FALSE,null:k.NULL},Y={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},q={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},ie={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function J(Re){return Re>="1"&&Re<="9"}function $(Re){return Re>="0"&&Re<="9"}function te(Re){return $(Re)||Re>="a"&&Re<="f"||Re>="A"&&Re<="F"}function W(Re){return Re==="e"||Re==="E"}function oe(Re,Be,nt,Ct){var pt=Re.charAt(Be);if(pt==="\r")Be++,nt++,Ct=1,Re.charAt(Be)===`
`&&Be++;else if(pt===`
`)Be++,nt++,Ct=1;else if(pt==="	"||pt===" ")Be++,Ct++;else return null;return{index:Be,line:nt,column:Ct}}function fe(Re,Be,nt,Ct){var pt=Re.charAt(Be);return pt in z?{type:z[pt],line:nt,column:Ct+1,index:Be+1,value:null}:null}function he(Re,Be,nt,Ct){for(var pt in j)if(j.hasOwnProperty(pt)&&Re.substr(Be,pt.length)===pt)return{type:j[pt],line:nt,column:Ct+pt.length,index:Be+pt.length,value:pt};return null}function Se(Re,Be,nt,Ct){for(var pt=Be,zt=Y._START_;Be<Re.length;){var tn=Re.charAt(Be);switch(zt){case Y._START_:{if(tn==='"')Be++,zt=Y.START_QUOTE_OR_CHAR;else return null;break}case Y.START_QUOTE_OR_CHAR:{if(tn==="\\")Be++,zt=Y.ESCAPE;else{if(tn==='"')return Be++,{type:k.STRING,line:nt,column:Ct+Be-pt,index:Be,value:Re.slice(pt,Be)};Be++}break}case Y.ESCAPE:{if(tn in q){if(Be++,tn==="u")for(var Lt=0;Lt<4;Lt++){var gn=Re.charAt(Be);if(gn&&te(gn))Be++;else return null}zt=Y.START_QUOTE_OR_CHAR}else return null;break}}}}function pe(Re,Be,nt,Ct){var pt=Be,zt=Be,tn=ie._START_;e:for(;Be<Re.length;){var Lt=Re.charAt(Be);switch(tn){case ie._START_:{if(Lt==="-")tn=ie.MINUS;else if(Lt==="0")zt=Be+1,tn=ie.ZERO;else if(J(Lt))zt=Be+1,tn=ie.DIGIT;else return null;break}case ie.MINUS:{if(Lt==="0")zt=Be+1,tn=ie.ZERO;else if(J(Lt))zt=Be+1,tn=ie.DIGIT;else return null;break}case ie.ZERO:{if(Lt===".")tn=ie.POINT;else if(W(Lt))tn=ie.EXP;else break e;break}case ie.DIGIT:{if($(Lt))zt=Be+1;else if(Lt===".")tn=ie.POINT;else if(W(Lt))tn=ie.EXP;else break e;break}case ie.POINT:{if($(Lt))zt=Be+1,tn=ie.DIGIT_FRACTION;else break e;break}case ie.DIGIT_FRACTION:{if($(Lt))zt=Be+1;else if(W(Lt))tn=ie.EXP;else break e;break}case ie.EXP:{if(Lt==="+"||Lt==="-")tn=ie.EXP_DIGIT_OR_SIGN;else if($(Lt))zt=Be+1,tn=ie.EXP_DIGIT_OR_SIGN;else break e;break}case ie.EXP_DIGIT_OR_SIGN:{if($(Lt))zt=Be+1;else break e;break}}Be++}return zt>0?{type:k.NUMBER,line:nt,column:Ct+zt-pt,index:zt,value:Re.slice(pt,zt)}:null}var we=function(Be,nt){for(var Ct=1,pt=1,zt=0,tn=[];zt<Be.length;){var Lt=[Be,zt,Ct,pt],gn=oe.apply(void 0,Lt);if(gn){zt=gn.index,Ct=gn.line,pt=gn.column;continue}var Nn=fe.apply(void 0,Lt)||he.apply(void 0,Lt)||Se.apply(void 0,Lt)||pe.apply(void 0,Lt);if(Nn){var rn={type:Nn.type,value:Nn.value,loc:o(Ct,pt,zt,Nn.line,Nn.column,Nn.index,nt.source)};tn.push(rn),zt=Nn.index,Ct=Nn.line,pt=Nn.column}else E(B.unexpectedSymbol(a(Be,zt,zt+1),nt.source,Ct,pt),Be,nt.source,Ct,pt)}return tn},Ke={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},ge={_START_:0,KEY:1,COLON:2},st={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Qe={loc:!0,source:null};function Ze(Re,Be,nt){var Ct=Be.length>0?Be[Be.length-1].loc.end:{line:1,column:1};E(S.unexpectedEnd(),Re,nt.source,Ct.line,Ct.column)}function We(Re){for(var Be=0,nt=0;nt<4;nt++)Be=Be*16+parseInt(Re[nt],16);return String.fromCharCode(Be)}var Ce={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Pe=['"',"\\","/"];function it(Re){for(var Be="",nt=0;nt<Re.length;nt++){var Ct=Re.charAt(nt);if(Ct==="\\"){nt++;var pt=Re.charAt(nt);if(pt==="u")Be+=We(Re.substr(nt+1,4)),nt+=4;else if(Pe.indexOf(pt)!==-1)Be+=pt;else if(pt in Ce)Be+=Ce[pt];else break}else Be+=Ct}return Be}function vt(Re,Be,nt,Ct){for(var pt=void 0,zt={type:"Object",children:[]},tn=Ke._START_;nt<Be.length;){var Lt=Be[nt];switch(tn){case Ke._START_:{if(Lt.type===k.LEFT_BRACE)pt=Lt,tn=Ke.OPEN_OBJECT,nt++;else return null;break}case Ke.OPEN_OBJECT:{if(Lt.type===k.RIGHT_BRACE)return Ct.loc&&(zt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Lt.loc.end.line,Lt.loc.end.column,Lt.loc.end.offset,Ct.source)),{value:zt,index:nt+1};var gn=_t(Re,Be,nt,Ct);zt.children.push(gn.value),tn=Ke.PROPERTY,nt=gn.index;break}case Ke.PROPERTY:{if(Lt.type===k.RIGHT_BRACE)return Ct.loc&&(zt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Lt.loc.end.line,Lt.loc.end.column,Lt.loc.end.offset,Ct.source)),{value:zt,index:nt+1};Lt.type===k.COMMA?(tn=Ke.COMMA,nt++):E(S.unexpectedToken(a(Re,Lt.loc.start.offset,Lt.loc.end.offset),Ct.source,Lt.loc.start.line,Lt.loc.start.column),Re,Ct.source,Lt.loc.start.line,Lt.loc.start.column);break}case Ke.COMMA:{var Nn=_t(Re,Be,nt,Ct);Nn?(nt=Nn.index,zt.children.push(Nn.value),tn=Ke.PROPERTY):E(S.unexpectedToken(a(Re,Lt.loc.start.offset,Lt.loc.end.offset),Ct.source,Lt.loc.start.line,Lt.loc.start.column),Re,Ct.source,Lt.loc.start.line,Lt.loc.start.column);break}}}Ze(Re,Be,Ct)}function _t(Re,Be,nt,Ct){for(var pt=void 0,zt={type:"Property",key:null,value:null},tn=ge._START_;nt<Be.length;){var Lt=Be[nt];switch(tn){case ge._START_:{if(Lt.type===k.STRING){var gn={type:"Identifier",value:it(Re.slice(Lt.loc.start.offset+1,Lt.loc.end.offset-1)),raw:Lt.value};Ct.loc&&(gn.loc=Lt.loc),pt=Lt,zt.key=gn,tn=ge.KEY,nt++}else return null;break}case ge.KEY:{Lt.type===k.COLON?(tn=ge.COLON,nt++):E(S.unexpectedToken(a(Re,Lt.loc.start.offset,Lt.loc.end.offset),Ct.source,Lt.loc.start.line,Lt.loc.start.column),Re,Ct.source,Lt.loc.start.line,Lt.loc.start.column);break}case ge.COLON:{var Nn=Tt(Re,Be,nt,Ct);return zt.value=Nn.value,Ct.loc&&(zt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Nn.value.loc.end.line,Nn.value.loc.end.column,Nn.value.loc.end.offset,Ct.source)),{value:zt,index:Nn.index}}}}}function ft(Re,Be,nt,Ct){for(var pt=void 0,zt={type:"Array",children:[]},tn=st._START_,Lt=void 0;nt<Be.length;)switch(Lt=Be[nt],tn){case st._START_:{if(Lt.type===k.LEFT_BRACKET)pt=Lt,tn=st.OPEN_ARRAY,nt++;else return null;break}case st.OPEN_ARRAY:{if(Lt.type===k.RIGHT_BRACKET)return Ct.loc&&(zt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Lt.loc.end.line,Lt.loc.end.column,Lt.loc.end.offset,Ct.source)),{value:zt,index:nt+1};var gn=Tt(Re,Be,nt,Ct);nt=gn.index,zt.children.push(gn.value),tn=st.VALUE;break}case st.VALUE:{if(Lt.type===k.RIGHT_BRACKET)return Ct.loc&&(zt.loc=o(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Lt.loc.end.line,Lt.loc.end.column,Lt.loc.end.offset,Ct.source)),{value:zt,index:nt+1};Lt.type===k.COMMA?(tn=st.COMMA,nt++):E(S.unexpectedToken(a(Re,Lt.loc.start.offset,Lt.loc.end.offset),Ct.source,Lt.loc.start.line,Lt.loc.start.column),Re,Ct.source,Lt.loc.start.line,Lt.loc.start.column);break}case st.COMMA:{var Nn=Tt(Re,Be,nt,Ct);nt=Nn.index,zt.children.push(Nn.value),tn=st.VALUE;break}}Ze(Re,Be,Ct)}function Dt(Re,Be,nt,Ct){var pt=Be[nt],zt=null;switch(pt.type){case k.STRING:{zt=it(Re.slice(pt.loc.start.offset+1,pt.loc.end.offset-1));break}case k.NUMBER:{zt=Number(pt.value);break}case k.TRUE:{zt=!0;break}case k.FALSE:{zt=!1;break}case k.NULL:{zt=null;break}default:return null}var tn={type:"Literal",value:zt,raw:pt.value};return Ct.loc&&(tn.loc=pt.loc),{value:tn,index:nt+1}}function Tt(Re,Be,nt,Ct){var pt=Be[nt],zt=Dt.apply(void 0,arguments)||vt.apply(void 0,arguments)||ft.apply(void 0,arguments);if(zt)return zt;E(S.unexpectedToken(a(Re,pt.loc.start.offset,pt.loc.end.offset),Ct.source,pt.loc.start.line,pt.loc.start.column),Re,Ct.source,pt.loc.start.line,pt.loc.start.column)}var Ue=function(Re,Be){Be=Object.assign({},Qe,Be);var nt=we(Re,Be);nt.length===0&&Ze(Re,nt,Be);var Ct=Tt(Re,nt,0,Be);if(Ct.index===nt.length)return Ct.value;var pt=nt[Ct.index];E(S.unexpectedToken(a(Re,pt.loc.start.offset,pt.loc.end.offset),Be.source,pt.loc.start.line,pt.loc.start.column),Re,Be.source,pt.loc.start.line,pt.loc.start.column)};return Ue})}(Qb)),Qb.exports}var Vue=$ue();const Hue=Xa(Vue);function fr(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="89c156e637b20b434cfb214df7fad7d710253070",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c156e637b20b434cfb214df7fad7d710253070"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fr=function(){return a},a}fr();fr().s[0]++;pp.defineMode("mgl",(n,e)=>(fr().f[0]++,fr().s[1]++,pp.modes.javascript({...n,json:!0},e)));function vW(n){fr().f[1]++;const e=(fr().s[2]++,[]);fr().s[3]++;try{fr().s[4]++,que.parse(n)}catch(t){const r=(fr().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(fr().s[6]++,r){fr().b[0][0]++;const i=(fr().s[7]++,{first_line:parseInt(r[1],10),first_column:parseInt(r[2],10),last_line:parseInt(r[1],10),last_column:parseInt(r[2],10)});fr().s[8]++,e.push({from:pp.Pos(i.first_line-1,i.first_column),to:pp.Pos(i.last_line-1,i.last_column),message:t})}else fr().b[0][1]++}return fr().s[9]++,e}fr().s[10]++;pp.registerHelper("lint","json",n=>(fr().f[2]++,fr().s[11]++,vW(n)));fr().s[12]++;pp.registerHelper("lint","mgl",(n,e,t)=>{fr().f[3]++;const r=(fr().s[13]++,vW(n)),{context:i}=(fr().s[14]++,e);if(fr().s[15]++,r.length>0)return fr().b[1][0]++,fr().s[16]++,r;fr().b[1][1]++;const s=(fr().s[17]++,Hue(n)),a=(fr().s[18]++,JSON.parse(n));function o(g,b){if(fr().f[4]++,fr().s[19]++,g){if(fr().b[2][1]++,fr().s[21]++,b.length<1)return fr().b[3][0]++,fr().s[22]++,g;if(fr().b[3][1]++,fr().s[23]++,g.children){fr().b[4][1]++;const E=(fr().s[25]++,b[0]);let S;return fr().s[26]++,E.match(/^[0-9]+$/)?(fr().b[5][0]++,fr().s[27]++,S=g.children[b[0]]):(fr().b[5][1]++,fr().s[28]++,S=g.children.find(B=>(fr().f[5]++,fr().s[29]++,fr().b[6][0]++,B.key&&(fr().b[6][1]++,B.key.type==="Identifier")&&(fr().b[6][2]++,B.key.value===E))),fr().s[30]++,S?(fr().b[7][0]++,fr().s[31]++,S=S.value):fr().b[7][1]++),fr().s[32]++,o(S,b.slice(1))}else{fr().b[4][0]++,fr().s[24]++;return}}else{fr().b[2][0]++,fr().s[20]++;return}}let d=(fr().s[33]++,null);if(fr().s[34]++,i==="layer"){fr().b[8][0]++;const g=(fr().s[35]++,Lf({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[a]}));fr().s[36]++,g?(fr().b[9][0]++,fr().s[37]++,d={result:"error",value:g.filter(b=>(fr().f[6]++,fr().s[38]++,!b.message.match(/^layers\[0\]: source ".*" not found$/))).map(b=>{fr().f[7]++;const E=(fr().s[39]++,b.message.replace(/^layers\[0\]./,"").split(":"));return fr().s[40]++,{name:"",key:E[0],message:E[1]}})}):fr().b[9][1]++}else if(fr().b[8][1]++,fr().s[41]++,i==="expression")fr().b[10][0]++,fr().s[42]++,d=VH.createExpression(a,e.spec);else throw fr().b[10][1]++,fr().s[43]++,new Error(`Invalid context ${i}`);if(fr().s[44]++,(d==null?void 0:d.result)==="error"){fr().b[11][0]++;const g=(fr().s[45]++,d.value);fr().s[46]++,g.forEach(b=>{fr().f[8]++;const{key:E,message:S}=(fr().s[47]++,b);if(fr().s[48]++,E)if(fr().b[12][1]++,fr().s[52]++,E){fr().b[13][0]++;const B=(fr().s[53]++,E.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),k=(fr().s[54]++,o(s,B));if(fr().s[55]++,k)fr().b[14][1]++;else{fr().b[14][0]++,fr().s[56]++,console.warn("Something went wrong parsing error:",b),fr().s[57]++;return}const{loc:z}=(fr().s[58]++,k),{start:j,end:Y}=(fr().s[59]++,z);fr().s[60]++,r.push({from:pp.Pos(j.line-1,j.column),to:pp.Pos(Y.line-1,Y.column),message:S})}else fr().b[13][1]++;else{fr().b[12][0]++;const B=(fr().s[49]++,t.getLineHandle(t.lastLine())),k=(fr().s[50]++,{from:pp.Pos(t.firstLine(),0),to:pp.Pos(t.lastLine(),B.text.length),message:S});fr().s[51]++,r.push(k)}})}else fr().b[11][1]++;return fr().s[61]++,r});function br(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return br=function(){return a},a}br();class CW extends nr.Component{constructor(t){br().f[5]++,br().s[4]++;super(t);Tn(this,"_keyEvent");Tn(this,"_doc");Tn(this,"_el",(br().s[2]++,null));Tn(this,"_cancelNextChange",(br().s[3]++,!1));Tn(this,"onPointerDown",(br().s[11]++,()=>{br().f[7]++,br().s[12]++,this._keyEvent="pointer"}));Tn(this,"onFocus",(br().s[13]++,()=>{br().f[8]++,br().s[14]++,this.props.onFocus?(br().b[2][0]++,br().s[15]++,this.props.onFocus()):br().b[2][1]++,br().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})}));Tn(this,"onBlur",(br().s[17]++,()=>{br().f[9]++,br().s[18]++,this._keyEvent="keyboard",br().s[19]++,this.props.onBlur?(br().b[3][0]++,br().s[20]++,this.props.onBlur()):br().b[3][1]++,br().s[21]++,this.setState({isEditing:!1,showMessage:!1})}));Tn(this,"onChange",(br().s[28]++,t=>{if(br().f[12]++,br().s[29]++,this._cancelNextChange){br().b[6][0]++,br().s[30]++,this._cancelNextChange=!1,br().s[31]++,this.setState({prevValue:this._doc.getValue()}),br().s[32]++;return}else br().b[6][1]++;const r=(br().s[33]++,this._doc.getValue());if(br().s[34]++,this.state.prevValue!==r){br().b[7][0]++;let i,s;br().s[35]++;try{br().s[36]++,i=JSON.parse(r)}catch(a){br().s[37]++,s=a,br().s[38]++,console.warn(a)}br().s[39]++,br().b[9][0]++,s&&(br().b[9][1]++,this.props.onJSONInvalid)?(br().b[8][0]++,br().s[40]++,this.props.onJSONInvalid()):(br().b[8][1]++,br().s[41]++,this.props.onChange?(br().b[10][0]++,br().s[42]++,this.props.onChange(i)):br().b[10][1]++,br().s[43]++,this.props.onJSONValid?(br().b[11][0]++,br().s[44]++,this.props.onJSONValid()):br().b[11][1]++)}else br().b[7][1]++;br().s[45]++,this.setState({prevValue:r})}));br().s[5]++,this._keyEvent="keyboard",br().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){br().f[6]++,br().s[7]++,this._doc=pp(this._el,{value:this.props.getValue(this.props.layer),mode:(br().b[0][0]++,this.props.mode||(br().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(br().b[1][0]++,this.props.lint||(br().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),br().s[8]++,this._doc.on("change",this.onChange),br().s[9]++,this._doc.on("focus",this.onFocus),br().s[10]++,this._doc.on("blur",this.onBlur)}componentWillUnMount(){br().f[10]++,br().s[22]++,this._doc.off("change",this.onChange),br().s[23]++,this._doc.off("focus",this.onFocus),br().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(t){br().f[11]++,br().s[25]++,br().b[5][0]++,!this.state.isEditing&&(br().b[5][1]++,t.layer!==this.props.layer)?(br().b[4][0]++,br().s[26]++,this._cancelNextChange=!0,br().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):br().b[4][1]++}render(){br().f[13]++;const t=(br().s[46]++,this.props.t),{showMessage:r}=(br().s[47]++,this.state),i=(br().s[48]++,{});return br().s[49]++,this.props.maxHeight?(br().b[12][0]++,br().s[50]++,i.maxHeight=this.props.maxHeight):br().b[12][1]++,br().s[51]++,le.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[le.jsx("div",{className:um("JSONEditor__message",{"JSONEditor__message--on":r}),children:le.jsxs(R0,{t,children:["Press ",le.jsx("kbd",{children:"ESC"})," to lose focus"]})}),le.jsx("div",{className:um("codemirror-container",this.props.className),ref:s=>(br().f[14]++,br().s[52]++,this._el=s),style:i})]})}}Tn(CW,"defaultProps",(br().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:t=>(br().f[0]++,br().s[1]++,yW(t,{indent:2,maxLength:40})),onFocus:()=>{br().f[1]++},onBlur:()=>{br().f[2]++},onJSONInvalid:()=>{br().f[3]++},onJSONValid:()=>{br().f[4]++}}));const Zue=(br().s[53]++,Vs()(CW));function H2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="60f4cd40e505c4a9f8de1078b77716b10a4a4264",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:61}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AASW;AATX,OAAO,WAAW;AAClB,OAAO,eAAiC;AAMxC,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,aAAW,GAAG,KAAK,OAAO;AAAA,EACpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f4cd40e505c4a9f8de1078b77716b10a4a4264"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return H2=function(){return a},a}H2();class YO extends nr.Component{render(){return H2().f[0]++,H2().s[0]++,le.jsx(Zue,{...this.props})}}var zC="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",Xue="M7,10L12,15L17,10H7Z",Jue="M7,15L12,10L17,15H7Z",$O="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Kg(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Kg=function(){return a},a}Kg();const VO=(Kg().s[0]++,["all","any","none"]);Kg().s[1]++;const eAe=(Kg().s[2]++,Object.keys(ns.filter_operator.values).filter(n=>(Kg().f[0]++,Kg().s[3]++,VO.indexOf(n)<0)));function xi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return xi=function(){return a},a}xi();function tAe(n){return xi().f[0]++,xi().s[0]++,n===""?(xi().b[0][0]++,xi().s[1]++,n):(xi().b[0][1]++,xi().s[2]++,isNaN(n)?(xi().b[1][0]++,xi().s[3]++,n):(xi().b[1][1]++,xi().s[4]++,parseFloat(n)))}function nAe(n){xi().f[1]++;const e=(xi().s[5]++,typeof n=="string");if(xi().s[6]++,e)xi().b[2][1]++;else return xi().b[2][0]++,xi().s[7]++,n;return xi().s[8]++,n.match(/^\s*true\s*$/)?(xi().b[3][0]++,xi().s[9]++,!0):(xi().b[3][1]++,xi().s[10]++,n.match(/^\s*false\s*$/)?(xi().b[4][0]++,xi().s[11]++,!1):(xi().b[4][1]++,xi().s[12]++,n))}function rAe(n){return xi().f[2]++,xi().s[13]++,n=tAe(n),xi().s[14]++,n=nAe(n),xi().s[15]++,n}class _W extends nr.Component{onFilterPartChanged(e,t,r){xi().f[3]++;let i=(xi().s[17]++,[e,t,...r.map(rAe)]);xi().s[18]++,xi().b[6][0]++,e==="has"||(xi().b[6][1]++,e==="!has")?(xi().b[5][0]++,xi().s[19]++,i=[e,t]):(xi().b[5][1]++,xi().s[20]++,r.length===0?(xi().b[7][0]++,xi().s[21]++,i=[e,t,""]):xi().b[7][1]++),xi().s[22]++,this.props.onChange(i)}render(){xi().f[4]++;const e=(xi().s[23]++,this.props.filter),t=(xi().s[24]++,e[0]),r=(xi().s[25]++,e[1]),i=(xi().s[26]++,e.slice(2));return xi().s[27]++,le.jsxs("div",{className:"maputnik-filter-editor-single",children:[le.jsx("div",{className:"maputnik-filter-editor-property",children:le.jsx(Jy,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(s=>(xi().f[5]++,xi().s[28]++,[s,s])),onChange:s=>(xi().f[6]++,xi().s[29]++,this.onFilterPartChanged(t,s,i))})}),le.jsx("div",{className:"maputnik-filter-editor-operator",children:le.jsx(Zg,{"aria-label":"function",value:t,onChange:s=>(xi().f[7]++,xi().s[30]++,this.onFilterPartChanged(s,r,i)),options:eAe})}),(xi().b[8][0]++,i.length>0&&(xi().b[8][1]++,le.jsx("div",{className:"maputnik-filter-editor-args",children:le.jsx(Ff,{"aria-label":"value",value:i.join(","),onChange:s=>(xi().f[8]++,xi().s[31]++,this.onFilterPartChanged(t,r,s.split(",")))})})))]})}}Tn(_W,"defaultProps",(xi().s[16]++,{properties:{}}));function _y(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="cef1671f65ba48cf49a518a548a597faa051d67d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SAOD,KAPC;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cef1671f65ba48cf49a518a548a597faa051d67d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return _y=function(){return a},a}_y();class iAe extends nr.Component{render(){_y().f[0]++;const e=(_y().s[0]++,this.props.t);return _y().s[1]++,le.jsxs("div",{className:"maputnik-filter-editor-block",children:[le.jsx("div",{className:"maputnik-filter-editor-block-action",children:le.jsx(Za,{className:"maputnik-delete-filter",onClick:this.props.onDelete,title:e("Delete filter block"),children:le.jsx(Gy,{})})}),le.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children})]})}}const oAe=(_y().s[2]++,Vs()(iAe));var Z5,WT;function sAe(){if(WT)return Z5;WT=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",s="["+e+"]",a="["+t+r+"]",o="\\ud83c[\\udffb-\\udfff]",d="(?:"+a+"|"+o+")",g="[^"+e+"]",b="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",S="\\u200d",B=d+"?",k="["+i+"]?",z="(?:"+S+"(?:"+[g,b,E].join("|")+")"+k+B+")*",j=k+B+z,Y="(?:"+[g+a+"?",a,b,E,s].join("|")+")",q=RegExp(o+"(?="+o+")|"+Y+j,"g"),ie=RegExp("["+S+e+t+r+i+"]"),J=typeof window=="object"&&window&&window.Object===Object&&window,$=typeof self=="object"&&self&&self.Object===Object&&self,te=J||$||Function("return this")();function W(ft){return ft.split("")}function oe(ft){return ie.test(ft)}function fe(ft){return oe(ft)?he(ft):W(ft)}function he(ft){return ft.match(q)||[]}var Se=Object.prototype,pe=Se.toString,we=te.Symbol,Ke=we?we.prototype:void 0,ge=Ke?Ke.toString:void 0;function st(ft,Dt,Tt){var Ue=-1,Re=ft.length;Dt<0&&(Dt=-Dt>Re?0:Re+Dt),Tt=Tt>Re?Re:Tt,Tt<0&&(Tt+=Re),Re=Dt>Tt?0:Tt-Dt>>>0,Dt>>>=0;for(var Be=Array(Re);++Ue<Re;)Be[Ue]=ft[Ue+Dt];return Be}function Qe(ft){if(typeof ft=="string")return ft;if(Pe(ft))return ge?ge.call(ft):"";var Dt=ft+"";return Dt=="0"&&1/ft==-1/0?"-0":Dt}function Ze(ft,Dt,Tt){var Ue=ft.length;return Tt=Tt===void 0?Ue:Tt,!Dt&&Tt>=Ue?ft:st(ft,Dt,Tt)}function We(ft){return function(Dt){Dt=it(Dt);var Tt=oe(Dt)?fe(Dt):void 0,Ue=Tt?Tt[0]:Dt.charAt(0),Re=Tt?Ze(Tt,1).join(""):Dt.slice(1);return Ue[ft]()+Re}}function Ce(ft){return!!ft&&typeof ft=="object"}function Pe(ft){return typeof ft=="symbol"||Ce(ft)&&pe.call(ft)==n}function it(ft){return ft==null?"":Qe(ft)}function vt(ft){return _t(it(ft).toLowerCase())}var _t=We("toUpperCase");return Z5=vt,Z5}var aAe=sAe();const HO=Xa(aAe);function Qp(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Qp=function(){return a},a}Qp();function d3(n){Qp().f[0]++;let e;const t=(Qp().s[0]++,n.split("-"));return Qp().s[1]++,t.length>1?(Qp().b[0][0]++,Qp().s[2]++,e=n.split("-").slice(1).join(" ")):(Qp().b[0][1]++,Qp().s[3]++,e=n),Qp().s[4]++,HO(e)}function _o(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return _o=function(){return a},a}_o();class bW extends nr.Component{constructor(t){_o().f[2]++,_o().s[1]++;super(t);Tn(this,"onJSONInvalid",(_o().s[3]++,t=>{_o().f[3]++,_o().s[4]++,this.setState({jsonError:!0})}));Tn(this,"onJSONValid",(_o().s[5]++,()=>{_o().f[4]++,_o().s[6]++,this.setState({jsonError:!1})}));_o().s[2]++,this.state={jsonError:!1}}render(){_o().f[5]++;const{t,errors:r,fieldName:i,fieldType:s,value:a,canUndo:o}=(_o().s[7]++,this.props),{jsonError:d}=(_o().s[8]++,this.state),g=(_o().s[9]++,o?(_o().b[0][0]++,!o()):(_o().b[0][1]++,!0)),b=(_o().s[10]++,le.jsxs(le.Fragment,{children:[(_o().b[1][0]++,this.props.onUndo&&(_o().b[1][1]++,le.jsx(Za,{onClick:this.props.onUndo,disabled:g,className:"maputnik-delete-stop",title:t("Revert from expression"),children:le.jsx(NZ,{})},"undo_action"))),le.jsx(Za,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:t("Delete expression"),children:le.jsx(Gy,{})},"delete_action")]})),E=(_o().s[11]++,s===void 0?(_o().b[2][0]++,i):(_o().b[2][1]++,`${s}.${i}`)),S=(_o().s[12]++,r[E]),B=(_o().s[13]++,`${E}[`),k=(_o().s[14]++,[]);function z(j){return _o().f[6]++,_o().s[15]++,yW(j,{indent:2,maxLength:38})}return _o().s[16]++,d?(_o().b[3][0]++,_o().s[17]++,k.push({message:"Invalid JSON"})):(_o().b[3][1]++,_o().s[18]++,Object.entries(r).filter(([j,Y])=>(_o().f[7]++,_o().s[19]++,j.startsWith(B))).forEach(([j,Y])=>(_o().f[8]++,_o().s[20]++,k.push(Y))),_o().s[21]++,S?(_o().b[4][0]++,_o().s[22]++,k.push(S)):_o().b[4][1]++),_o().s[23]++,le.jsx(ya,{error:k,fieldSpec:this.props.fieldSpec,label:t(d3(this.props.fieldName)),action:b,wideMode:!0,children:le.jsx(YO,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:a,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:z,onChange:this.props.onChange})})}}Tn(bW,"defaultProps",(_o().s[0]++,{errors:{},onFocus:()=>{_o().f[0]++},onBlur:()=>{_o().f[1]++}}));const xW=(_o().s[24]++,Vs()(bW));function Un(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="10bf63b3f71adfa5066d0aecd6eaecbe45ada76f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAgMQ,SAsDA,UAtDA,KAGA,YAHA;AAhMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAGjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAgG;AAC7H,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bf63b3f71adfa5066d0aecd6eaecbe45ada76f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Un=function(){return a},a}Un();function x0(n){Un().f[0]++;const e=(Un().s[0]++,Un().b[0][0]++,n.filter||(Un().b[0][1]++,["all"]));if(Un().s[1]++,Array.isArray(e))Un().b[1][1]++;else return Un().b[1][0]++,Un().s[2]++,e;let t=(Un().s[3]++,e[0]),r=(Un().s[4]++,e.slice(1));return Un().s[5]++,VO.indexOf(t)<0?(Un().b[2][0]++,Un().s[6]++,t="all",Un().s[7]++,r=[e.slice(0)]):Un().b[2][1]++,Un().s[8]++,[t,...r]}function lAe(n){return Un().f[1]++,Un().s[9]++,$H(uAe(n)).layers[0].filter}function uAe(n){return Un().f[2]++,Un().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const AAe=(Un().s[11]++,["all","any","none"]);function GT(n){if(Un().f[3]++,Un().s[12]++,Un().b[4][0]++,n.length===1&&(Un().b[4][1]++,AAe.includes(n[0])))return Un().b[3][0]++,Un().s[13]++,!0;Un().b[3][1]++;const e=(Un().s[14]++,eC(n));return Un().s[15]++,!ux.isEqual(e,n)}function QT(n){return Un().f[4]++,Un().s[16]++,VO.indexOf(n[0])>=0}function cAe(n){return Un().f[5]++,Un().s[17]++,QT(n)?(Un().b[5][0]++,Un().s[18]++,n.slice(1).map(e=>(Un().f[6]++,Un().s[19]++,QT(e))).filter(e=>(Un().f[7]++,Un().s[20]++,e==!0)).length>0):(Un().b[5][1]++,Un().s[21]++,!1)}class wW extends nr.Component{constructor(t){Un().f[8]++,Un().s[23]++;super(t);Tn(this,"addFilterItem",(Un().s[31]++,()=>{Un().f[11]++;const t=(Un().s[32]++,x0(this.props).slice(0));Un().s[33]++,t.push(["==","name",""]),Un().s[34]++,this.props.onChange(t)}));Tn(this,"onToggleDoc",(Un().s[35]++,t=>{Un().f[12]++,Un().s[36]++,this.setState({showDoc:t})}));Tn(this,"makeFilter",(Un().s[37]++,()=>{Un().f[13]++,Un().s[38]++,this.setState({displaySimpleFilter:!0})}));Tn(this,"makeExpression",(Un().s[39]++,()=>{Un().f[14]++;const t=(Un().s[40]++,x0(this.props));Un().s[41]++,this.props.onChange(lAe(t)),Un().s[42]++,this.setState({displaySimpleFilter:!1})}));Un().s[24]++,this.state={showDoc:!1,displaySimpleFilter:GT(x0(t))}}onFilterPartChanged(t,r){Un().f[9]++;const i=(Un().s[25]++,x0(this.props).slice(0));Un().s[26]++,i[t]=r,Un().s[27]++,this.props.onChange(i)}deleteFilterItem(t){Un().f[10]++;const r=(Un().s[28]++,x0(this.props).slice(0));Un().s[29]++,r.splice(t+1,1),Un().s[30]++,this.props.onChange(r)}static getDerivedStateFromProps(t,r){Un().f[15]++;const i=(Un().s[43]++,GT(x0(t)));return Un().s[44]++,Un().b[7][0]++,!i&&(Un().b[7][1]++,r.displaySimpleFilter===!0)?(Un().b[6][0]++,Un().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Un().b[6][1]++,Un().s[46]++,Un().b[9][0]++,i&&(Un().b[9][1]++,r.displaySimpleFilter===!1)?(Un().b[8][0]++,Un().s[47]++,{valueIsSimpleFilter:!0}):(Un().b[8][1]++,Un().s[48]++,{valueIsSimpleFilter:!1}))}render(){Un().f[16]++;const{errors:t,t:r}=(Un().s[49]++,this.props),{displaySimpleFilter:i}=(Un().s[50]++,this.state),s=(Un().s[51]++,{doc:Ns.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),a=(Un().s[52]++,["all"]),o=(Un().s[53]++,Un().b[10][0]++,i&&(Un().b[10][1]++,cAe(x0(this.props))));if(Un().s[54]++,o)return Un().b[11][0]++,Un().s[55]++,le.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[le.jsx("p",{children:r("Nested filters are not supported.")}),le.jsxs(Za,{onClick:this.makeExpression,title:r("Convert to expression"),children:[le.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:zC})}),r("Upgrade to expression")]})]});if(Un().b[11][1]++,Un().s[56]++,i){Un().b[12][0]++;const d=(Un().s[57]++,x0(this.props)),g=(Un().s[58]++,d[0]),b=(Un().s[59]++,d.slice(1)),E=(Un().s[60]++,le.jsx("div",{children:le.jsx(Za,{onClick:this.makeExpression,title:r("Convert to expression"),className:"maputnik-make-zoom-function",children:le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:zC})})})})),S=(Un().s[61]++,b.map((B,k)=>{Un().f[17]++;const z=(Un().s[62]++,t[`filter[${k+1}]`]);return Un().s[63]++,le.jsxs("div",{children:[le.jsx(oAe,{onDelete:this.deleteFilterItem.bind(this,k),children:le.jsx(_W,{properties:this.props.properties,filter:B,onChange:this.onFilterPartChanged.bind(this,k+1)})},k),(Un().b[13][0]++,z&&(Un().b[13][1]++,le.jsx("div",{className:"maputnik-inline-error",children:z.message},"error")))]},`block-${k}`)}));return Un().s[64]++,le.jsxs(le.Fragment,{children:[le.jsx(ya,{fieldSpec:s,label:r("Filter"),action:E,children:le.jsx(Zg,{value:g,onChange:B=>(Un().f[18]++,Un().s[65]++,this.onFilterPartChanged(0,B)),options:[["all",r("every filter matches")],["none",r("no filter matches")],["any",r("any filter matches")]]})},"top"),S,le.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:le.jsxs(Za,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:$O})})," ",r("Add filter")]})},"buttons"),le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Un().b[14][0]++,""):(Un().b[14][1]++,"none")},children:le.jsx(GO,{fieldSpec:s})},"doc")]})}else{Un().b[12][1]++;const{filter:d}=(Un().s[66]++,this.props);return Un().s[67]++,le.jsxs(le.Fragment,{children:[le.jsx(xW,{onDelete:()=>{Un().f[19]++,Un().s[68]++,this.setState({displaySimpleFilter:!0}),Un().s[69]++,this.props.onChange(a)},fieldName:"filter",fieldSpec:s,value:d,errors:t,onChange:this.props.onChange}),(Un().b[15][0]++,this.state.valueIsSimpleFilter&&(Un().b[15][1]++,le.jsxs("div",{className:"maputnik-expr-infobox",children:[r("You've entered an old style filter.")," ",le.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:r("Switch to filter editor.")})]})))]})}}}Tn(wW,"defaultProps",(Un().s[22]++,{filter:["all"]}));const dAe=(Un().s[70]++,Vs()(wW));var S1={},gh={},E1={},X5,qT;function MW(){if(qT)return X5;qT=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return X5=n,X5}var J5,YT;function xp(){if(YT)return J5;YT=1;var n=MW(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return J5=t,J5}var ew,$T;function p_(){if($T)return ew;$T=1;var n=xp(),e=n.Symbol;return ew=e,ew}var tw,VT;function hAe(){if(VT)return tw;VT=1;var n=p_(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(a){var o=t.call(a,i),d=a[i];try{a[i]=void 0;var g=!0}catch{}var b=r.call(a);return g&&(o?a[i]=d:delete a[i]),b}return tw=s,tw}var nw,HT;function fAe(){if(HT)return nw;HT=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return nw=t,nw}var rw,ZT;function Xg(){if(ZT)return rw;ZT=1;var n=p_(),e=hAe(),t=fAe(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):t(o)}return rw=a,rw}var iw,XT;function of(){if(XT)return iw;XT=1;var n=Array.isArray;return iw=n,iw}var ow,JT;function fm(){if(JT)return ow;JT=1;function n(e){return e!=null&&typeof e=="object"}return ow=n,ow}var sw,eP;function pAe(){if(eP)return sw;eP=1;var n=Xg(),e=of(),t=fm(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return sw=i,sw}var aw,tP;function mAe(){if(tP)return aw;tP=1;function n(e){return function(t,r,i){for(var s=-1,a=Object(t),o=i(t),d=o.length;d--;){var g=o[e?d:++s];if(r(a[g],g,a)===!1)break}return t}}return aw=n,aw}var lw,nP;function SW(){if(nP)return lw;nP=1;var n=mAe(),e=n();return lw=e,lw}var uw,rP;function gAe(){if(rP)return uw;rP=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return uw=n,uw}var Aw,iP;function yAe(){if(iP)return Aw;iP=1;var n=Xg(),e=fm(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return Aw=r,Aw}var cw,oP;function ZO(){if(oP)return cw;oP=1;var n=yAe(),e=fm(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return cw=s,cw}var Qv={exports:{}},dw,sP;function vAe(){if(sP)return dw;sP=1;function n(){return!1}return dw=n,dw}Qv.exports;var aP;function h3(){return aP||(aP=1,function(n,e){var t=xp(),r=vAe(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,a=s&&s.exports===i,o=a?t.Buffer:void 0,d=o?o.isBuffer:void 0,g=d||r;n.exports=g}(Qv,Qv.exports)),Qv.exports}var hw,lP;function XO(){if(lP)return hw;lP=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return hw=t,hw}var fw,uP;function JO(){if(uP)return fw;uP=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return fw=e,fw}var pw,AP;function CAe(){if(AP)return pw;AP=1;var n=Xg(),e=JO(),t=fm(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",d="[object Function]",g="[object Map]",b="[object Number]",E="[object Object]",S="[object RegExp]",B="[object Set]",k="[object String]",z="[object WeakMap]",j="[object ArrayBuffer]",Y="[object DataView]",q="[object Float32Array]",ie="[object Float64Array]",J="[object Int8Array]",$="[object Int16Array]",te="[object Int32Array]",W="[object Uint8Array]",oe="[object Uint8ClampedArray]",fe="[object Uint16Array]",he="[object Uint32Array]",Se={};Se[q]=Se[ie]=Se[J]=Se[$]=Se[te]=Se[W]=Se[oe]=Se[fe]=Se[he]=!0,Se[r]=Se[i]=Se[j]=Se[s]=Se[Y]=Se[a]=Se[o]=Se[d]=Se[g]=Se[b]=Se[E]=Se[S]=Se[B]=Se[k]=Se[z]=!1;function pe(we){return t(we)&&e(we.length)&&!!Se[n(we)]}return pw=pe,pw}var mw,cP;function eI(){if(cP)return mw;cP=1;function n(e){return function(t){return e(t)}}return mw=n,mw}var qv={exports:{}};qv.exports;var dP;function tI(){return dP||(dP=1,function(n,e){var t=MW(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,a=s&&t.process,o=function(){try{var d=i&&i.require&&i.require("util").types;return d||a&&a.binding&&a.binding("util")}catch{}}();n.exports=o}(qv,qv.exports)),qv.exports}var gw,hP;function nI(){if(hP)return gw;hP=1;var n=CAe(),e=eI(),t=tI(),r=t&&t.isTypedArray,i=r?e(r):n;return gw=i,gw}var yw,fP;function EW(){if(fP)return yw;fP=1;var n=gAe(),e=ZO(),t=of(),r=h3(),i=XO(),s=nI(),a=Object.prototype,o=a.hasOwnProperty;function d(g,b){var E=t(g),S=!E&&e(g),B=!E&&!S&&r(g),k=!E&&!S&&!B&&s(g),z=E||S||B||k,j=z?n(g.length,String):[],Y=j.length;for(var q in g)(b||o.call(g,q))&&!(z&&(q=="length"||B&&(q=="offset"||q=="parent")||k&&(q=="buffer"||q=="byteLength"||q=="byteOffset")||i(q,Y)))&&j.push(q);return j}return yw=d,yw}var vw,pP;function rI(){if(pP)return vw;pP=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return vw=e,vw}var Cw,mP;function BW(){if(mP)return Cw;mP=1;function n(e,t){return function(r){return e(t(r))}}return Cw=n,Cw}var _w,gP;function _Ae(){if(gP)return _w;gP=1;var n=BW(),e=n(Object.keys,Object);return _w=e,_w}var bw,yP;function bAe(){if(yP)return bw;yP=1;var n=rI(),e=_Ae(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return bw=i,bw}var xw,vP;function Uf(){if(vP)return xw;vP=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return xw=n,xw}var ww,CP;function iI(){if(CP)return ww;CP=1;var n=Xg(),e=Uf(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var d=n(o);return d==r||d==i||d==t||d==s}return ww=a,ww}var Mw,_P;function ev(){if(_P)return Mw;_P=1;var n=iI(),e=JO();function t(r){return r!=null&&e(r.length)&&!n(r)}return Mw=t,Mw}var Sw,bP;function m_(){if(bP)return Sw;bP=1;var n=EW(),e=bAe(),t=ev();function r(i){return t(i)?n(i):e(i)}return Sw=r,Sw}var Ew,xP;function OW(){if(xP)return Ew;xP=1;var n=SW(),e=m_();function t(r,i){return r&&n(r,i,e)}return Ew=t,Ew}var Bw,wP;function f3(){if(wP)return Bw;wP=1;function n(e){return e}return Bw=n,Bw}var Ow,MP;function IW(){if(MP)return Ow;MP=1;var n=f3();function e(t){return typeof t=="function"?t:n}return Ow=e,Ow}var Iw,SP;function oI(){if(SP)return Iw;SP=1;var n=OW(),e=IW();function t(r,i){return r&&n(r,e(i))}return Iw=t,Iw}var kw,EP;function sI(){if(EP)return kw;EP=1;var n=BW(),e=n(Object.getPrototypeOf,Object);return kw=e,kw}var Tw,BP;function kW(){if(BP)return Tw;BP=1;var n=Xg(),e=sI(),t=fm(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,d=a.call(Object);function g(b){if(!t(b)||n(b)!=r)return!1;var E=e(b);if(E===null)return!0;var S=o.call(E,"constructor")&&E.constructor;return typeof S=="function"&&S instanceof S&&a.call(S)==d}return Tw=g,Tw}var Pw,OP;function TW(){if(OP)return Pw;OP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return Pw=n,Pw}var Rw,IP;function xAe(){if(IP)return Rw;IP=1;function n(){this.__data__=[],this.size=0}return Rw=n,Rw}var Dw,kP;function g_(){if(kP)return Dw;kP=1;function n(e,t){return e===t||e!==e&&t!==t}return Dw=n,Dw}var Kw,TP;function p3(){if(TP)return Kw;TP=1;var n=g_();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return Kw=e,Kw}var Fw,PP;function wAe(){if(PP)return Fw;PP=1;var n=p3(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,a=n(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():t.call(s,a,1),--this.size,!0}return Fw=r,Fw}var Lw,RP;function MAe(){if(RP)return Lw;RP=1;var n=p3();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return Lw=e,Lw}var Uw,DP;function SAe(){if(DP)return Uw;DP=1;var n=p3();function e(t){return n(this.__data__,t)>-1}return Uw=e,Uw}var zw,KP;function EAe(){if(KP)return zw;KP=1;var n=p3();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return zw=e,zw}var jw,FP;function m3(){if(FP)return jw;FP=1;var n=xAe(),e=wAe(),t=MAe(),r=SAe(),i=EAe();function s(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,jw=s,jw}var Nw,LP;function BAe(){if(LP)return Nw;LP=1;var n=m3();function e(){this.__data__=new n,this.size=0}return Nw=e,Nw}var Ww,UP;function OAe(){if(UP)return Ww;UP=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return Ww=n,Ww}var Gw,zP;function IAe(){if(zP)return Gw;zP=1;function n(e){return this.__data__.get(e)}return Gw=n,Gw}var Qw,jP;function kAe(){if(jP)return Qw;jP=1;function n(e){return this.__data__.has(e)}return Qw=n,Qw}var qw,NP;function TAe(){if(NP)return qw;NP=1;var n=xp(),e=n["__core-js_shared__"];return qw=e,qw}var Yw,WP;function PAe(){if(WP)return Yw;WP=1;var n=TAe(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Yw=t,Yw}var $w,GP;function PW(){if(GP)return $w;GP=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return $w=t,$w}var Vw,QP;function RAe(){if(QP)return Vw;QP=1;var n=iI(),e=PAe(),t=Uf(),r=PW(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,d=a.toString,g=o.hasOwnProperty,b=RegExp("^"+d.call(g).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E(S){if(!t(S)||e(S))return!1;var B=n(S)?b:s;return B.test(r(S))}return Vw=E,Vw}var Hw,qP;function DAe(){if(qP)return Hw;qP=1;function n(e,t){return e==null?void 0:e[t]}return Hw=n,Hw}var Zw,YP;function Jg(){if(YP)return Zw;YP=1;var n=RAe(),e=DAe();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return Zw=t,Zw}var Xw,$P;function aI(){if($P)return Xw;$P=1;var n=Jg(),e=xp(),t=n(e,"Map");return Xw=t,Xw}var Jw,VP;function g3(){if(VP)return Jw;VP=1;var n=Jg(),e=n(Object,"create");return Jw=e,Jw}var eM,HP;function KAe(){if(HP)return eM;HP=1;var n=g3();function e(){this.__data__=n?n(null):{},this.size=0}return eM=e,eM}var tM,ZP;function FAe(){if(ZP)return tM;ZP=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return tM=n,tM}var nM,XP;function LAe(){if(XP)return nM;XP=1;var n=g3(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var a=this.__data__;if(n){var o=a[s];return o===e?void 0:o}return r.call(a,s)?a[s]:void 0}return nM=i,nM}var rM,JP;function UAe(){if(JP)return rM;JP=1;var n=g3(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return rM=r,rM}var iM,eR;function zAe(){if(eR)return iM;eR=1;var n=g3(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return iM=t,iM}var oM,tR;function jAe(){if(tR)return oM;tR=1;var n=KAe(),e=FAe(),t=LAe(),r=UAe(),i=zAe();function s(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,oM=s,oM}var sM,nR;function NAe(){if(nR)return sM;nR=1;var n=jAe(),e=m3(),t=aI();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return sM=r,sM}var aM,rR;function WAe(){if(rR)return aM;rR=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return aM=n,aM}var lM,iR;function y3(){if(iR)return lM;iR=1;var n=WAe();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return lM=e,lM}var uM,oR;function GAe(){if(oR)return uM;oR=1;var n=y3();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return uM=e,uM}var AM,sR;function QAe(){if(sR)return AM;sR=1;var n=y3();function e(t){return n(this,t).get(t)}return AM=e,AM}var cM,aR;function qAe(){if(aR)return cM;aR=1;var n=y3();function e(t){return n(this,t).has(t)}return cM=e,cM}var dM,lR;function YAe(){if(lR)return dM;lR=1;var n=y3();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return dM=e,dM}var hM,uR;function lI(){if(uR)return hM;uR=1;var n=NAe(),e=GAe(),t=QAe(),r=qAe(),i=YAe();function s(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,hM=s,hM}var fM,AR;function $Ae(){if(AR)return fM;AR=1;var n=m3(),e=aI(),t=lI(),r=200;function i(s,a){var o=this.__data__;if(o instanceof n){var d=o.__data__;if(!e||d.length<r-1)return d.push([s,a]),this.size=++o.size,this;o=this.__data__=new t(d)}return o.set(s,a),this.size=o.size,this}return fM=i,fM}var pM,cR;function v3(){if(cR)return pM;cR=1;var n=m3(),e=BAe(),t=OAe(),r=IAe(),i=kAe(),s=$Ae();function a(o){var d=this.__data__=new n(o);this.size=d.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,pM=a,pM}var mM,dR;function VAe(){if(dR)return mM;dR=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return mM=e,mM}var gM,hR;function HAe(){if(hR)return gM;hR=1;function n(e){return this.__data__.has(e)}return gM=n,gM}var yM,fR;function ZAe(){if(fR)return yM;fR=1;var n=lI(),e=VAe(),t=HAe();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new n;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,yM=r,yM}var vM,pR;function XAe(){if(pR)return vM;pR=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return vM=n,vM}var CM,mR;function JAe(){if(mR)return CM;mR=1;function n(e,t){return e.has(t)}return CM=n,CM}var _M,gR;function RW(){if(gR)return _M;gR=1;var n=ZAe(),e=XAe(),t=JAe(),r=1,i=2;function s(a,o,d,g,b,E){var S=d&r,B=a.length,k=o.length;if(B!=k&&!(S&&k>B))return!1;var z=E.get(a),j=E.get(o);if(z&&j)return z==o&&j==a;var Y=-1,q=!0,ie=d&i?new n:void 0;for(E.set(a,o),E.set(o,a);++Y<B;){var J=a[Y],$=o[Y];if(g)var te=S?g($,J,Y,o,a,E):g(J,$,Y,a,o,E);if(te!==void 0){if(te)continue;q=!1;break}if(ie){if(!e(o,function(W,oe){if(!t(ie,oe)&&(J===W||b(J,W,d,g,E)))return ie.push(oe)})){q=!1;break}}else if(!(J===$||b(J,$,d,g,E))){q=!1;break}}return E.delete(a),E.delete(o),q}return _M=s,_M}var bM,yR;function DW(){if(yR)return bM;yR=1;var n=xp(),e=n.Uint8Array;return bM=e,bM}var xM,vR;function ece(){if(vR)return xM;vR=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return xM=n,xM}var wM,CR;function tce(){if(CR)return wM;CR=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return wM=n,wM}var MM,_R;function nce(){if(_R)return MM;_R=1;var n=p_(),e=DW(),t=g_(),r=RW(),i=ece(),s=tce(),a=1,o=2,d="[object Boolean]",g="[object Date]",b="[object Error]",E="[object Map]",S="[object Number]",B="[object RegExp]",k="[object Set]",z="[object String]",j="[object Symbol]",Y="[object ArrayBuffer]",q="[object DataView]",ie=n?n.prototype:void 0,J=ie?ie.valueOf:void 0;function $(te,W,oe,fe,he,Se,pe){switch(oe){case q:if(te.byteLength!=W.byteLength||te.byteOffset!=W.byteOffset)return!1;te=te.buffer,W=W.buffer;case Y:return!(te.byteLength!=W.byteLength||!Se(new e(te),new e(W)));case d:case g:case S:return t(+te,+W);case b:return te.name==W.name&&te.message==W.message;case B:case z:return te==W+"";case E:var we=i;case k:var Ke=fe&a;if(we||(we=s),te.size!=W.size&&!Ke)return!1;var ge=pe.get(te);if(ge)return ge==W;fe|=o,pe.set(te,W);var st=r(we(te),we(W),fe,he,Se,pe);return pe.delete(te),st;case j:if(J)return J.call(te)==J.call(W)}return!1}return MM=$,MM}var SM,bR;function KW(){if(bR)return SM;bR=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return SM=n,SM}var EM,xR;function FW(){if(xR)return EM;xR=1;var n=KW(),e=of();function t(r,i,s){var a=i(r);return e(r)?a:n(a,s(r))}return EM=t,EM}var BM,wR;function rce(){if(wR)return BM;wR=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,a=[];++r<i;){var o=e[r];t(o,r,e)&&(a[s++]=o)}return a}return BM=n,BM}var OM,MR;function LW(){if(MR)return OM;MR=1;function n(){return[]}return OM=n,OM}var IM,SR;function uI(){if(SR)return IM;SR=1;var n=rce(),e=LW(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),n(i(a),function(o){return r.call(a,o)}))}:e;return IM=s,IM}var kM,ER;function UW(){if(ER)return kM;ER=1;var n=FW(),e=uI(),t=m_();function r(i){return n(i,t,e)}return kM=r,kM}var TM,BR;function ice(){if(BR)return TM;BR=1;var n=UW(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,a,o,d,g,b){var E=o&e,S=n(s),B=S.length,k=n(a),z=k.length;if(B!=z&&!E)return!1;for(var j=B;j--;){var Y=S[j];if(!(E?Y in a:r.call(a,Y)))return!1}var q=b.get(s),ie=b.get(a);if(q&&ie)return q==a&&ie==s;var J=!0;b.set(s,a),b.set(a,s);for(var $=E;++j<B;){Y=S[j];var te=s[Y],W=a[Y];if(d)var oe=E?d(W,te,Y,a,s,b):d(te,W,Y,s,a,b);if(!(oe===void 0?te===W||g(te,W,o,d,b):oe)){J=!1;break}$||($=Y=="constructor")}if(J&&!$){var fe=s.constructor,he=a.constructor;fe!=he&&"constructor"in s&&"constructor"in a&&!(typeof fe=="function"&&fe instanceof fe&&typeof he=="function"&&he instanceof he)&&(J=!1)}return b.delete(s),b.delete(a),J}return TM=i,TM}var PM,OR;function oce(){if(OR)return PM;OR=1;var n=Jg(),e=xp(),t=n(e,"DataView");return PM=t,PM}var RM,IR;function sce(){if(IR)return RM;IR=1;var n=Jg(),e=xp(),t=n(e,"Promise");return RM=t,RM}var DM,kR;function ace(){if(kR)return DM;kR=1;var n=Jg(),e=xp(),t=n(e,"Set");return DM=t,DM}var KM,TR;function lce(){if(TR)return KM;TR=1;var n=Jg(),e=xp(),t=n(e,"WeakMap");return KM=t,KM}var FM,PR;function C3(){if(PR)return FM;PR=1;var n=oce(),e=aI(),t=sce(),r=ace(),i=lce(),s=Xg(),a=PW(),o="[object Map]",d="[object Object]",g="[object Promise]",b="[object Set]",E="[object WeakMap]",S="[object DataView]",B=a(n),k=a(e),z=a(t),j=a(r),Y=a(i),q=s;return(n&&q(new n(new ArrayBuffer(1)))!=S||e&&q(new e)!=o||t&&q(t.resolve())!=g||r&&q(new r)!=b||i&&q(new i)!=E)&&(q=function(ie){var J=s(ie),$=J==d?ie.constructor:void 0,te=$?a($):"";if(te)switch(te){case B:return S;case k:return o;case z:return g;case j:return b;case Y:return E}return J}),FM=q,FM}var LM,RR;function uce(){if(RR)return LM;RR=1;var n=v3(),e=RW(),t=nce(),r=ice(),i=C3(),s=of(),a=h3(),o=nI(),d=1,g="[object Arguments]",b="[object Array]",E="[object Object]",S=Object.prototype,B=S.hasOwnProperty;function k(z,j,Y,q,ie,J){var $=s(z),te=s(j),W=$?b:i(z),oe=te?b:i(j);W=W==g?E:W,oe=oe==g?E:oe;var fe=W==E,he=oe==E,Se=W==oe;if(Se&&a(z)){if(!a(j))return!1;$=!0,fe=!1}if(Se&&!fe)return J||(J=new n),$||o(z)?e(z,j,Y,q,ie,J):t(z,j,W,Y,q,ie,J);if(!(Y&d)){var pe=fe&&B.call(z,"__wrapped__"),we=he&&B.call(j,"__wrapped__");if(pe||we){var Ke=pe?z.value():z,ge=we?j.value():j;return J||(J=new n),ie(Ke,ge,Y,q,J)}}return Se?(J||(J=new n),r(z,j,Y,q,ie,J)):!1}return LM=k,LM}var UM,DR;function zW(){if(DR)return UM;DR=1;var n=uce(),e=fm();function t(r,i,s,a,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,a,t,o)}return UM=t,UM}var zM,KR;function Ace(){if(KR)return zM;KR=1;var n=v3(),e=zW(),t=1,r=2;function i(s,a,o,d){var g=o.length,b=g,E=!d;if(s==null)return!b;for(s=Object(s);g--;){var S=o[g];if(E&&S[2]?S[1]!==s[S[0]]:!(S[0]in s))return!1}for(;++g<b;){S=o[g];var B=S[0],k=s[B],z=S[1];if(E&&S[2]){if(k===void 0&&!(B in s))return!1}else{var j=new n;if(d)var Y=d(k,z,B,s,a,j);if(!(Y===void 0?e(z,k,t|r,d,j):Y))return!1}}return!0}return zM=i,zM}var jM,FR;function jW(){if(FR)return jM;FR=1;var n=Uf();function e(t){return t===t&&!n(t)}return jM=e,jM}var NM,LR;function cce(){if(LR)return NM;LR=1;var n=jW(),e=m_();function t(r){for(var i=e(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,n(o)]}return i}return NM=t,NM}var WM,UR;function NW(){if(UR)return WM;UR=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return WM=n,WM}var GM,zR;function dce(){if(zR)return GM;zR=1;var n=Ace(),e=cce(),t=NW();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(a){return a===i||n(a,i,s)}}return GM=r,GM}var QM,jR;function _3(){if(jR)return QM;jR=1;var n=Xg(),e=fm(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return QM=r,QM}var qM,NR;function AI(){if(NR)return qM;NR=1;var n=of(),e=_3(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(n(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||a!=null&&s in Object(a)}return qM=i,qM}var YM,WR;function hce(){if(WR)return YM;WR=1;var n=lI(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],d=s.cache;if(d.has(o))return d.get(o);var g=r.apply(this,a);return s.cache=d.set(o,g)||d,g};return s.cache=new(t.Cache||n),s}return t.Cache=n,YM=t,YM}var $M,GR;function fce(){if(GR)return $M;GR=1;var n=hce(),e=500;function t(r){var i=n(r,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return $M=t,$M}var VM,QR;function pce(){if(QR)return VM;QR=1;var n=fce(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,d,g){s.push(d?g.replace(t,"$1"):o||a)}),s});return VM=r,VM}var HM,qR;function mce(){if(qR)return HM;qR=1;var n=p_(),e=TW(),t=of(),r=_3(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(t(o))return e(o,a)+"";if(r(o))return s?s.call(o):"";var d=o+"";return d=="0"&&1/o==-1/0?"-0":d}return HM=a,HM}var ZM,YR;function gce(){if(YR)return ZM;YR=1;var n=mce();function e(t){return t==null?"":n(t)}return ZM=e,ZM}var XM,$R;function WW(){if($R)return XM;$R=1;var n=of(),e=AI(),t=pce(),r=gce();function i(s,a){return n(s)?s:e(s,a)?[s]:t(r(s))}return XM=i,XM}var JM,VR;function b3(){if(VR)return JM;VR=1;var n=_3();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return JM=e,JM}var eS,HR;function GW(){if(HR)return eS;HR=1;var n=WW(),e=b3();function t(r,i){i=n(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[e(i[s++])];return s&&s==a?r:void 0}return eS=t,eS}var tS,ZR;function yce(){if(ZR)return tS;ZR=1;var n=GW();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return tS=e,tS}var nS,XR;function vce(){if(XR)return nS;XR=1;function n(e,t){return e!=null&&t in Object(e)}return nS=n,nS}var rS,JR;function Cce(){if(JR)return rS;JR=1;var n=WW(),e=ZO(),t=of(),r=XO(),i=JO(),s=b3();function a(o,d,g){d=n(d,o);for(var b=-1,E=d.length,S=!1;++b<E;){var B=s(d[b]);if(!(S=o!=null&&g(o,B)))break;o=o[B]}return S||++b!=E?S:(E=o==null?0:o.length,!!E&&i(E)&&r(B,E)&&(t(o)||e(o)))}return rS=a,rS}var iS,eD;function _ce(){if(eD)return iS;eD=1;var n=vce(),e=Cce();function t(r,i){return r!=null&&e(r,i,n)}return iS=t,iS}var oS,tD;function bce(){if(tD)return oS;tD=1;var n=zW(),e=yce(),t=_ce(),r=AI(),i=jW(),s=NW(),a=b3(),o=1,d=2;function g(b,E){return r(b)&&i(E)?s(a(b),E):function(S){var B=e(S,b);return B===void 0&&B===E?t(S,b):n(E,B,o|d)}}return oS=g,oS}var sS,nD;function xce(){if(nD)return sS;nD=1;function n(e){return function(t){return t==null?void 0:t[e]}}return sS=n,sS}var aS,rD;function wce(){if(rD)return aS;rD=1;var n=GW();function e(t){return function(r){return n(r,t)}}return aS=e,aS}var lS,iD;function Mce(){if(iD)return lS;iD=1;var n=xce(),e=wce(),t=AI(),r=b3();function i(s){return t(s)?n(r(s)):e(s)}return lS=i,lS}var uS,oD;function Sce(){if(oD)return uS;oD=1;var n=dce(),e=bce(),t=f3(),r=of(),i=Mce();function s(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?r(a)?e(a[0],a[1]):n(a):i(a)}return uS=s,uS}var AS,sD;function Ece(){if(sD)return AS;sD=1;var n=ev();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var a=i.length,o=r?a:-1,d=Object(i);(r?o--:++o<a)&&s(d[o],o,d)!==!1;);return i}}return AS=e,AS}var cS,aD;function QW(){if(aD)return cS;aD=1;var n=OW(),e=Ece(),t=e(n);return cS=t,cS}var dS,lD;function Bce(){if(lD)return dS;lD=1;var n=QW(),e=ev();function t(r,i){var s=-1,a=e(r)?Array(r.length):[];return n(r,function(o,d,g){a[++s]=i(o,d,g)}),a}return dS=t,dS}var hS,uD;function Oce(){if(uD)return hS;uD=1;var n=TW(),e=Sce(),t=Bce(),r=of();function i(s,a){var o=r(s)?n:t;return o(s,e(a,3))}return hS=i,hS}var AD;function Ice(){if(AD)return E1;AD=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.flattenNames=void 0;var n=pAe(),e=d(n),t=oI(),r=d(t),i=kW(),s=d(i),a=Oce(),o=d(a);function d(b){return b&&b.__esModule?b:{default:b}}var g=E1.flattenNames=function b(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],S=[];return(0,o.default)(E,function(B){Array.isArray(B)?b(B).map(function(k){return S.push(k)}):(0,s.default)(B)?(0,r.default)(B,function(k,z){k===!0&&S.push(z),S.push(z+"-"+k)}):(0,e.default)(B)&&S.push(B)}),S};return E1.default=g,E1}var B1={},fS,cD;function qW(){if(cD)return fS;cD=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return fS=n,fS}var pS,dD;function YW(){if(dD)return pS;dD=1;var n=Jg(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return pS=e,pS}var mS,hD;function cI(){if(hD)return mS;hD=1;var n=YW();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return mS=e,mS}var gS,fD;function $W(){if(fD)return gS;fD=1;var n=cI(),e=g_(),t=Object.prototype,r=t.hasOwnProperty;function i(s,a,o){var d=s[a];(!(r.call(s,a)&&e(d,o))||o===void 0&&!(a in s))&&n(s,a,o)}return gS=i,gS}var yS,pD;function y_(){if(pD)return yS;pD=1;var n=$W(),e=cI();function t(r,i,s,a){var o=!s;s||(s={});for(var d=-1,g=i.length;++d<g;){var b=i[d],E=a?a(s[b],r[b],b,s,r):void 0;E===void 0&&(E=r[b]),o?e(s,b,E):n(s,b,E)}return s}return yS=t,yS}var vS,mD;function kce(){if(mD)return vS;mD=1;var n=y_(),e=m_();function t(r,i){return r&&n(i,e(i),r)}return vS=t,vS}var CS,gD;function Tce(){if(gD)return CS;gD=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return CS=n,CS}var _S,yD;function Pce(){if(yD)return _S;yD=1;var n=Uf(),e=rI(),t=Tce(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!n(a))return t(a);var o=e(a),d=[];for(var g in a)g=="constructor"&&(o||!i.call(a,g))||d.push(g);return d}return _S=s,_S}var bS,vD;function v_(){if(vD)return bS;vD=1;var n=EW(),e=Pce(),t=ev();function r(i){return t(i)?n(i,!0):e(i)}return bS=r,bS}var xS,CD;function Rce(){if(CD)return xS;CD=1;var n=y_(),e=v_();function t(r,i){return r&&n(i,e(i),r)}return xS=t,xS}var Yv={exports:{}};Yv.exports;var _D;function VW(){return _D||(_D=1,function(n,e){var t=xp(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,a=s?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function d(g,b){if(b)return g.slice();var E=g.length,S=o?o(E):new g.constructor(E);return g.copy(S),S}n.exports=d}(Yv,Yv.exports)),Yv.exports}var wS,bD;function HW(){if(bD)return wS;bD=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return wS=n,wS}var MS,xD;function Dce(){if(xD)return MS;xD=1;var n=y_(),e=uI();function t(r,i){return n(r,e(r),i)}return MS=t,MS}var SS,wD;function ZW(){if(wD)return SS;wD=1;var n=KW(),e=sI(),t=uI(),r=LW(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)n(o,t(a)),a=e(a);return o}:r;return SS=s,SS}var ES,MD;function Kce(){if(MD)return ES;MD=1;var n=y_(),e=ZW();function t(r,i){return n(r,e(r),i)}return ES=t,ES}var BS,SD;function Fce(){if(SD)return BS;SD=1;var n=FW(),e=ZW(),t=v_();function r(i){return n(i,t,e)}return BS=r,BS}var OS,ED;function Lce(){if(ED)return OS;ED=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return OS=t,OS}var IS,BD;function dI(){if(BD)return IS;BD=1;var n=DW();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return IS=e,IS}var kS,OD;function Uce(){if(OD)return kS;OD=1;var n=dI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return kS=e,kS}var TS,ID;function zce(){if(ID)return TS;ID=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return TS=e,TS}var PS,kD;function jce(){if(kD)return PS;kD=1;var n=p_(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return PS=r,PS}var RS,TD;function XW(){if(TD)return RS;TD=1;var n=dI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return RS=e,RS}var DS,PD;function Nce(){if(PD)return DS;PD=1;var n=dI(),e=Uce(),t=zce(),r=jce(),i=XW(),s="[object Boolean]",a="[object Date]",o="[object Map]",d="[object Number]",g="[object RegExp]",b="[object Set]",E="[object String]",S="[object Symbol]",B="[object ArrayBuffer]",k="[object DataView]",z="[object Float32Array]",j="[object Float64Array]",Y="[object Int8Array]",q="[object Int16Array]",ie="[object Int32Array]",J="[object Uint8Array]",$="[object Uint8ClampedArray]",te="[object Uint16Array]",W="[object Uint32Array]";function oe(fe,he,Se){var pe=fe.constructor;switch(he){case B:return n(fe);case s:case a:return new pe(+fe);case k:return e(fe,Se);case z:case j:case Y:case q:case ie:case J:case $:case te:case W:return i(fe,Se);case o:return new pe;case d:case E:return new pe(fe);case g:return t(fe);case b:return new pe;case S:return r(fe)}}return DS=oe,DS}var KS,RD;function Wce(){if(RD)return KS;RD=1;var n=Uf(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return KS=t,KS}var FS,DD;function JW(){if(DD)return FS;DD=1;var n=Wce(),e=sI(),t=rI();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return FS=r,FS}var LS,KD;function Gce(){if(KD)return LS;KD=1;var n=C3(),e=fm(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return LS=r,LS}var US,FD;function Qce(){if(FD)return US;FD=1;var n=Gce(),e=eI(),t=tI(),r=t&&t.isMap,i=r?e(r):n;return US=i,US}var zS,LD;function qce(){if(LD)return zS;LD=1;var n=C3(),e=fm(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return zS=r,zS}var jS,UD;function Yce(){if(UD)return jS;UD=1;var n=qce(),e=eI(),t=tI(),r=t&&t.isSet,i=r?e(r):n;return jS=i,jS}var NS,zD;function $ce(){if(zD)return NS;zD=1;var n=v3(),e=qW(),t=$W(),r=kce(),i=Rce(),s=VW(),a=HW(),o=Dce(),d=Kce(),g=UW(),b=Fce(),E=C3(),S=Lce(),B=Nce(),k=JW(),z=of(),j=h3(),Y=Qce(),q=Uf(),ie=Yce(),J=m_(),$=v_(),te=1,W=2,oe=4,fe="[object Arguments]",he="[object Array]",Se="[object Boolean]",pe="[object Date]",we="[object Error]",Ke="[object Function]",ge="[object GeneratorFunction]",st="[object Map]",Qe="[object Number]",Ze="[object Object]",We="[object RegExp]",Ce="[object Set]",Pe="[object String]",it="[object Symbol]",vt="[object WeakMap]",_t="[object ArrayBuffer]",ft="[object DataView]",Dt="[object Float32Array]",Tt="[object Float64Array]",Ue="[object Int8Array]",Re="[object Int16Array]",Be="[object Int32Array]",nt="[object Uint8Array]",Ct="[object Uint8ClampedArray]",pt="[object Uint16Array]",zt="[object Uint32Array]",tn={};tn[fe]=tn[he]=tn[_t]=tn[ft]=tn[Se]=tn[pe]=tn[Dt]=tn[Tt]=tn[Ue]=tn[Re]=tn[Be]=tn[st]=tn[Qe]=tn[Ze]=tn[We]=tn[Ce]=tn[Pe]=tn[it]=tn[nt]=tn[Ct]=tn[pt]=tn[zt]=!0,tn[we]=tn[Ke]=tn[vt]=!1;function Lt(gn,Nn,rn,or,Kn,pn){var Xn,Mr=Nn&te,Yn=Nn&W,er=Nn&oe;if(rn&&(Xn=Kn?rn(gn,or,Kn,pn):rn(gn)),Xn!==void 0)return Xn;if(!q(gn))return gn;var qe=z(gn);if(qe){if(Xn=S(gn),!Mr)return a(gn,Xn)}else{var ce=E(gn),me=ce==Ke||ce==ge;if(j(gn))return s(gn,Mr);if(ce==Ze||ce==fe||me&&!Kn){if(Xn=Yn||me?{}:k(gn),!Mr)return Yn?d(gn,i(Xn,gn)):o(gn,r(Xn,gn))}else{if(!tn[ce])return Kn?gn:{};Xn=B(gn,ce,Mr)}}pn||(pn=new n);var tt=pn.get(gn);if(tt)return tt;pn.set(gn,Xn),ie(gn)?gn.forEach(function(on){Xn.add(Lt(on,Nn,rn,on,gn,pn))}):Y(gn)&&gn.forEach(function(on,rr){Xn.set(rr,Lt(on,Nn,rn,rr,gn,pn))});var Et=er?Yn?b:g:Yn?$:J,$t=qe?void 0:Et(gn);return e($t||gn,function(on,rr){$t&&(rr=on,on=gn[rr]),t(Xn,rr,Lt(on,Nn,rn,rr,gn,pn))}),Xn}return NS=Lt,NS}var WS,jD;function Vce(){if(jD)return WS;jD=1;var n=$ce(),e=1,t=4;function r(i){return n(i,e|t)}return WS=r,WS}var ND;function Hce(){if(ND)return B1;ND=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.mergeClasses=void 0;var n=oI(),e=s(n),t=Vce(),r=s(t),i=Object.assign||function(o){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(o[b]=g[b])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var a=B1.mergeClasses=function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=d.default&&(0,r.default)(d.default)||{};return g.map(function(E){var S=d[E];return S&&(0,e.default)(S,function(B,k){b[k]||(b[k]={}),b[k]=i({},b[k],S[k])}),E}),b};return B1.default=a,B1}var O1={},WD;function Zce(){if(WD)return O1;WD=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.autoprefix=void 0;var n=oI(),e=r(n),t=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a};function r(a){return a&&a.__esModule?a:{default:a}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var d=o&&o.split(" ");return{position:"absolute",top:d&&d[0],right:d&&d[1],bottom:d&&d[2],left:d&&d[3]}},extend:function(o,d){var g=d[o];return g||{extend:o}}},s=O1.autoprefix=function(o){var d={};return(0,e.default)(o,function(g,b){var E={};(0,e.default)(g,function(S,B){var k=i[B];k?E=t({},E,k(S)):E[B]=S}),d[b]=E}),d};return O1.default=s,O1}var I1={},GD;function Xce(){if(GD)return I1;GD=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.hover=void 0;var n=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}return d},e=La(),t=r(e);function r(d){return d&&d.__esModule?d:{default:d}}function i(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function s(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function a(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var o=I1.hover=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(E){a(S,E);function S(){var B,k,z,j;i(this,S);for(var Y=arguments.length,q=Array(Y),ie=0;ie<Y;ie++)q[ie]=arguments[ie];return j=(k=(z=s(this,(B=S.__proto__||Object.getPrototypeOf(S)).call.apply(B,[this].concat(q))),z),z.state={hover:!1},z.handleMouseOver=function(){return z.setState({hover:!0})},z.handleMouseOut=function(){return z.setState({hover:!1})},z.render=function(){return t.default.createElement(b,{onMouseOver:z.handleMouseOver,onMouseOut:z.handleMouseOut},t.default.createElement(g,n({},z.props,z.state)))},k),s(z,j)}return S}(t.default.Component)};return I1.default=o,I1}var k1={},QD;function Jce(){if(QD)return k1;QD=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.active=void 0;var n=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}return d},e=La(),t=r(e);function r(d){return d&&d.__esModule?d:{default:d}}function i(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function s(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function a(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var o=k1.active=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(E){a(S,E);function S(){var B,k,z,j;i(this,S);for(var Y=arguments.length,q=Array(Y),ie=0;ie<Y;ie++)q[ie]=arguments[ie];return j=(k=(z=s(this,(B=S.__proto__||Object.getPrototypeOf(S)).call.apply(B,[this].concat(q))),z),z.state={active:!1},z.handleMouseDown=function(){return z.setState({active:!0})},z.handleMouseUp=function(){return z.setState({active:!1})},z.render=function(){return t.default.createElement(b,{onMouseDown:z.handleMouseDown,onMouseUp:z.handleMouseUp},t.default.createElement(g,n({},z.props,z.state)))},k),s(z,j)}return S}(t.default.Component)};return k1.default=o,k1}var wb={},qD;function ede(){if(qD)return wb;qD=1,Object.defineProperty(wb,"__esModule",{value:!0});var n=function(t,r){var i={},s=function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=d};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return wb.default=n,wb}var YD;function wp(){if(YD)return gh;YD=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.ReactCSS=gh.loop=gh.handleActive=gh.handleHover=gh.hover=void 0;var n=Ice(),e=S(n),t=Hce(),r=S(t),i=Zce(),s=S(i),a=Xce(),o=S(a),d=Jce(),g=S(d),b=ede(),E=S(b);function S(k){return k&&k.__esModule?k:{default:k}}gh.hover=o.default,gh.handleHover=o.default,gh.handleActive=g.default,gh.loop=E.default;var B=gh.ReactCSS=function(z){for(var j=arguments.length,Y=Array(j>1?j-1:0),q=1;q<j;q++)Y[q-1]=arguments[q];var ie=(0,e.default)(Y),J=(0,r.default)(z,ie);return(0,s.default)(J)};return gh.default=B,gh}var GS,$D;function eG(){if($D)return GS;$D=1;var n=cI(),e=g_();function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return GS=t,GS}var QS,VD;function tde(){if(VD)return QS;VD=1;var n=ev(),e=fm();function t(r){return e(r)&&n(r)}return QS=t,QS}var qS,HD;function tG(){if(HD)return qS;HD=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return qS=n,qS}var YS,ZD;function nde(){if(ZD)return YS;ZD=1;var n=y_(),e=v_();function t(r){return n(r,e(r))}return YS=t,YS}var $S,XD;function rde(){if(XD)return $S;XD=1;var n=eG(),e=VW(),t=XW(),r=HW(),i=JW(),s=ZO(),a=of(),o=tde(),d=h3(),g=iI(),b=Uf(),E=kW(),S=nI(),B=tG(),k=nde();function z(j,Y,q,ie,J,$,te){var W=B(j,q),oe=B(Y,q),fe=te.get(oe);if(fe){n(j,q,fe);return}var he=$?$(W,oe,q+"",j,Y,te):void 0,Se=he===void 0;if(Se){var pe=a(oe),we=!pe&&d(oe),Ke=!pe&&!we&&S(oe);he=oe,pe||we||Ke?a(W)?he=W:o(W)?he=r(W):we?(Se=!1,he=e(oe,!0)):Ke?(Se=!1,he=t(oe,!0)):he=[]:E(oe)||s(oe)?(he=W,s(W)?he=k(W):(!b(W)||g(W))&&(he=i(oe))):Se=!1}Se&&(te.set(oe,he),J(he,oe,ie,$,te),te.delete(oe)),n(j,q,he)}return $S=z,$S}var VS,JD;function ide(){if(JD)return VS;JD=1;var n=v3(),e=eG(),t=SW(),r=rde(),i=Uf(),s=v_(),a=tG();function o(d,g,b,E,S){d!==g&&t(g,function(B,k){if(S||(S=new n),i(B))r(d,g,k,b,o,E,S);else{var z=E?E(a(d,k),B,k+"",d,g,S):void 0;z===void 0&&(z=B),e(d,k,z)}},s)}return VS=o,VS}var HS,eK;function ode(){if(eK)return HS;eK=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return HS=n,HS}var ZS,tK;function sde(){if(tK)return ZS;tK=1;var n=ode(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,d=e(a.length-i,0),g=Array(d);++o<d;)g[o]=a[i+o];o=-1;for(var b=Array(i+1);++o<i;)b[o]=a[o];return b[i]=s(g),n(r,this,b)}}return ZS=t,ZS}var XS,nK;function ade(){if(nK)return XS;nK=1;function n(e){return function(){return e}}return XS=n,XS}var JS,rK;function lde(){if(rK)return JS;rK=1;var n=ade(),e=YW(),t=f3(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return JS=r,JS}var eE,iK;function ude(){if(iK)return eE;iK=1;var n=800,e=16,t=Date.now;function r(i){var s=0,a=0;return function(){var o=t(),d=e-(o-a);if(a=o,d>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return eE=r,eE}var tE,oK;function Ade(){if(oK)return tE;oK=1;var n=lde(),e=ude(),t=e(n);return tE=t,tE}var nE,sK;function cde(){if(sK)return nE;sK=1;var n=f3(),e=sde(),t=Ade();function r(i,s){return t(e(i,s,n),i+"")}return nE=r,nE}var rE,aK;function dde(){if(aK)return rE;aK=1;var n=g_(),e=ev(),t=XO(),r=Uf();function i(s,a,o){if(!r(o))return!1;var d=typeof a;return(d=="number"?e(o)&&t(a,o.length):d=="string"&&a in o)?n(o[a],s):!1}return rE=i,rE}var iE,lK;function hde(){if(lK)return iE;lK=1;var n=cde(),e=dde();function t(r){return n(function(i,s){var a=-1,o=s.length,d=o>1?s[o-1]:void 0,g=o>2?s[2]:void 0;for(d=r.length>3&&typeof d=="function"?(o--,d):void 0,g&&e(s[0],s[1],g)&&(d=o<3?void 0:d,o=1),i=Object(i);++a<o;){var b=s[a];b&&r(i,b,a,d)}return i})}return iE=t,iE}var oE,uK;function nG(){if(uK)return oE;uK=1;var n=ide(),e=hde(),t=e(function(r,i,s){n(r,i,s)});return oE=t,oE}var sE={},T1={},Mb={},AK;function fde(){return AK||(AK=1,Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.calculateChange=function(e,t,r,i,s){var a=s.clientWidth,o=s.clientHeight,d=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,g=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,b=d-(s.getBoundingClientRect().left+window.pageXOffset),E=g-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var S=void 0;if(E<0?S=0:E>o?S=1:S=Math.round(E*100/o)/100,t.a!==S)return{h:t.h,s:t.s,l:t.l,a:S,source:"rgb"}}else{var B=void 0;if(b<0?B=0:b>a?B=1:B=Math.round(b*100/a)/100,i!==B)return{h:t.h,s:t.s,l:t.l,a:B,source:"rgb"}}return null}),Mb}var P1={},Bv={},cK;function pde(){if(cK)return Bv;cK=1,Object.defineProperty(Bv,"__esModule",{value:!0});var n={},e=Bv.render=function(r,i,s,a){if(typeof document>"u"&&!a)return null;var o=a?new a:document.createElement("canvas");o.width=s*2,o.height=s*2;var d=o.getContext("2d");return d?(d.fillStyle=r,d.fillRect(0,0,o.width,o.height),d.fillStyle=i,d.fillRect(0,0,s,s),d.translate(s,s),d.fillRect(0,0,s,s),o.toDataURL()):null};return Bv.get=function(r,i,s,a){var o=r+"-"+i+"-"+s+(a?"-server":"");if(n[o])return n[o];var d=e(r,i,s,a);return n[o]=d,d},Bv}var dK;function hI(){if(dK)return P1;dK=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.Checkboard=void 0;var n=Object.assign||function(b){for(var E=1;E<arguments.length;E++){var S=arguments[E];for(var B in S)Object.prototype.hasOwnProperty.call(S,B)&&(b[B]=S[B])}return b},e=La(),t=d(e),r=wp(),i=d(r),s=pde(),a=o(s);function o(b){if(b&&b.__esModule)return b;var E={};if(b!=null)for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(E[S]=b[S]);return E.default=b,E}function d(b){return b&&b.__esModule?b:{default:b}}var g=P1.Checkboard=function(E){var S=E.white,B=E.grey,k=E.size,z=E.renderers,j=E.borderRadius,Y=E.boxShadow,q=E.children,ie=(0,i.default)({default:{grid:{borderRadius:j,boxShadow:Y,absolute:"0px 0px 0px 0px",background:"url("+a.get(S,B,k,z.canvas)+") center left"}}});return(0,e.isValidElement)(q)?t.default.cloneElement(q,n({},q.props,{style:n({},q.props.style,ie.grid)})):t.default.createElement("div",{style:ie.grid})};return g.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},P1.default=g,P1}var hK;function mde(){if(hK)return T1;hK=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.Alpha=void 0;var n=Object.assign||function(j){for(var Y=1;Y<arguments.length;Y++){var q=arguments[Y];for(var ie in q)Object.prototype.hasOwnProperty.call(q,ie)&&(j[ie]=q[ie])}return j},e=function(){function j(Y,q){for(var ie=0;ie<q.length;ie++){var J=q[ie];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(Y,J.key,J)}}return function(Y,q,ie){return q&&j(Y.prototype,q),ie&&j(Y,ie),Y}}(),t=La(),r=E(t),i=wp(),s=E(i),a=fde(),o=b(a),d=hI(),g=E(d);function b(j){if(j&&j.__esModule)return j;var Y={};if(j!=null)for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(Y[q]=j[q]);return Y.default=j,Y}function E(j){return j&&j.__esModule?j:{default:j}}function S(j,Y){if(!(j instanceof Y))throw new TypeError("Cannot call a class as a function")}function B(j,Y){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:j}function k(j,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);j.prototype=Object.create(Y&&Y.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(j,Y):j.__proto__=Y)}var z=T1.Alpha=function(j){k(Y,j);function Y(){var q,ie,J,$;S(this,Y);for(var te=arguments.length,W=Array(te),oe=0;oe<te;oe++)W[oe]=arguments[oe];return $=(ie=(J=B(this,(q=Y.__proto__||Object.getPrototypeOf(Y)).call.apply(q,[this].concat(W))),J),J.handleChange=function(fe){var he=o.calculateChange(fe,J.props.hsl,J.props.direction,J.props.a,J.container);he&&typeof J.props.onChange=="function"&&J.props.onChange(he,fe)},J.handleMouseDown=function(fe){J.handleChange(fe),window.addEventListener("mousemove",J.handleChange),window.addEventListener("mouseup",J.handleMouseUp)},J.handleMouseUp=function(){J.unbindEventListeners()},J.unbindEventListeners=function(){window.removeEventListener("mousemove",J.handleChange),window.removeEventListener("mouseup",J.handleMouseUp)},ie),B(J,$)}return e(Y,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var ie=this,J=this.props.rgb,$=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+J.r+","+J.g+","+J.b+`, 0) 0%,
           rgba(`+J.r+","+J.g+","+J.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:J.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+J.r+","+J.g+","+J.b+`, 0) 0%,
           rgba(`+J.r+","+J.g+","+J.b+", 1) 100%)"},pointer:{left:0,top:J.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:$.alpha},r.default.createElement("div",{style:$.checkboard},r.default.createElement(g.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:$.gradient}),r.default.createElement("div",{style:$.container,ref:function(W){return ie.container=W},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:$.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:$.slider}))))}}]),Y}(t.PureComponent||t.Component);return T1.default=z,T1}var R1={},fK;function gde(){if(fK)return R1;fK=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.EditableInput=void 0;var n=function(){function q(ie,J){for(var $=0;$<J.length;$++){var te=J[$];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ie,te.key,te)}}return function(ie,J,$){return J&&q(ie.prototype,J),$&&q(ie,$),ie}}(),e=La(),t=s(e),r=wp(),i=s(r);function s(q){return q&&q.__esModule?q:{default:q}}function a(q,ie,J){return ie in q?Object.defineProperty(q,ie,{value:J,enumerable:!0,configurable:!0,writable:!0}):q[ie]=J,q}function o(q,ie){if(!(q instanceof ie))throw new TypeError("Cannot call a class as a function")}function d(q,ie){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:q}function g(q,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);q.prototype=Object.create(ie&&ie.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(q,ie):q.__proto__=ie)}var b=1,E=38,S=40,B=[E,S],k=function(ie){return B.indexOf(ie)>-1},z=function(ie){return Number(String(ie).replace(/%/g,""))},j=1,Y=R1.EditableInput=function(q){g(ie,q);function ie(J){o(this,ie);var $=d(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this));return $.handleBlur=function(){$.state.blurValue&&$.setState({value:$.state.blurValue,blurValue:null})},$.handleChange=function(te){$.setUpdatedValue(te.target.value,te)},$.handleKeyDown=function(te){var W=z(te.target.value);if(!isNaN(W)&&k(te.keyCode)){var oe=$.getArrowOffset(),fe=te.keyCode===E?W+oe:W-oe;$.setUpdatedValue(fe,te)}},$.handleDrag=function(te){if($.props.dragLabel){var W=Math.round($.props.value+te.movementX);W>=0&&W<=$.props.dragMax&&$.props.onChange&&$.props.onChange($.getValueObjectWithLabel(W),te)}},$.handleMouseDown=function(te){$.props.dragLabel&&(te.preventDefault(),$.handleDrag(te),window.addEventListener("mousemove",$.handleDrag),window.addEventListener("mouseup",$.handleMouseUp))},$.handleMouseUp=function(){$.unbindEventListeners()},$.unbindEventListeners=function(){window.removeEventListener("mousemove",$.handleDrag),window.removeEventListener("mouseup",$.handleMouseUp)},$.state={value:String(J.value).toUpperCase(),blurValue:String(J.value).toUpperCase()},$.inputId="rc-editable-input-"+j++,$}return n(ie,[{key:"componentDidUpdate",value:function($,te){this.props.value!==this.state.value&&($.value!==this.props.value||te.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function($){return a({},this.props.label,$)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||b}},{key:"setUpdatedValue",value:function($,te){var W=this.props.label?this.getValueObjectWithLabel($):$;this.props.onChange&&this.props.onChange(W,te),this.setState({value:$})}},{key:"render",value:function(){var $=this,te=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:te.wrap},t.default.createElement("input",{id:this.inputId,style:te.input,ref:function(oe){return $.input=oe},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:te.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),ie}(e.PureComponent||e.Component);return R1.default=Y,R1}var D1={},Sb={},pK;function yde(){return pK||(pK=1,Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.calculateChange=function(e,t,r,i){var s=i.clientWidth,a=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,g=o-(i.getBoundingClientRect().left+window.pageXOffset),b=d-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var E=void 0;if(b<0)E=359;else if(b>a)E=0;else{var S=-(b*100/a)+100;E=360*S/100}if(r.h!==E)return{h:E,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var B=void 0;if(g<0)B=0;else if(g>s)B=359;else{var k=g*100/s;B=360*k/100}if(r.h!==B)return{h:B,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),Sb}var mK;function vde(){if(mK)return D1;mK=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.Hue=void 0;var n=function(){function B(k,z){for(var j=0;j<z.length;j++){var Y=z[j];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(k,Y.key,Y)}}return function(k,z,j){return z&&B(k.prototype,z),j&&B(k,j),k}}(),e=La(),t=d(e),r=wp(),i=d(r),s=yde(),a=o(s);function o(B){if(B&&B.__esModule)return B;var k={};if(B!=null)for(var z in B)Object.prototype.hasOwnProperty.call(B,z)&&(k[z]=B[z]);return k.default=B,k}function d(B){return B&&B.__esModule?B:{default:B}}function g(B,k){if(!(B instanceof k))throw new TypeError("Cannot call a class as a function")}function b(B,k){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:B}function E(B,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);B.prototype=Object.create(k&&k.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(B,k):B.__proto__=k)}var S=D1.Hue=function(B){E(k,B);function k(){var z,j,Y,q;g(this,k);for(var ie=arguments.length,J=Array(ie),$=0;$<ie;$++)J[$]=arguments[$];return q=(j=(Y=b(this,(z=k.__proto__||Object.getPrototypeOf(k)).call.apply(z,[this].concat(J))),Y),Y.handleChange=function(te){var W=a.calculateChange(te,Y.props.direction,Y.props.hsl,Y.container);W&&typeof Y.props.onChange=="function"&&Y.props.onChange(W,te)},Y.handleMouseDown=function(te){Y.handleChange(te),window.addEventListener("mousemove",Y.handleChange),window.addEventListener("mouseup",Y.handleMouseUp)},Y.handleMouseUp=function(){Y.unbindEventListeners()},j),b(Y,q)}return n(k,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var j=this,Y=this.props.direction,q=Y===void 0?"horizontal":Y,ie=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:q==="vertical"});return t.default.createElement("div",{style:ie.hue},t.default.createElement("div",{className:"hue-"+q,style:ie.container,ref:function($){return j.container=$},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:ie.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ie.slider}))))}}]),k}(e.PureComponent||e.Component);return D1.default=S,D1}var K1={},gK;function Cde(){if(gK)return K1;gK=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.Raised=void 0;var n=La(),e=d(n),t=Cp(),r=d(t),i=wp(),s=d(i),a=nG(),o=d(a);function d(b){return b&&b.__esModule?b:{default:b}}var g=K1.Raised=function(E){var S=E.zDepth,B=E.radius,k=E.background,z=E.children,j=E.styles,Y=j===void 0?{}:j,q=(0,s.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+S+"px "+S*4+"px rgba(0,0,0,.24)",borderRadius:B,background:k}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},Y),{"zDepth-1":S===1});return e.default.createElement("div",{style:q.wrap},e.default.createElement("div",{style:q.bg}),e.default.createElement("div",{style:q.content},z))};return g.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},g.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},K1.default=g,K1}var F1={},aE,yK;function _de(){if(yK)return aE;yK=1;var n=xp(),e=function(){return n.Date.now()};return aE=e,aE}var lE,vK;function bde(){if(vK)return lE;vK=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return lE=e,lE}var uE,CK;function xde(){if(CK)return uE;CK=1;var n=bde(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return uE=t,uE}var AE,_K;function wde(){if(_K)return AE;_K=1;var n=xde(),e=Uf(),t=_3(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function d(g){if(typeof g=="number")return g;if(t(g))return r;if(e(g)){var b=typeof g.valueOf=="function"?g.valueOf():g;g=e(b)?b+"":b}if(typeof g!="string")return g===0?g:+g;g=n(g);var E=s.test(g);return E||a.test(g)?o(g.slice(2),E?2:8):i.test(g)?r:+g}return AE=d,AE}var cE,bK;function rG(){if(bK)return cE;bK=1;var n=Uf(),e=_de(),t=wde(),r="Expected a function",i=Math.max,s=Math.min;function a(o,d,g){var b,E,S,B,k,z,j=0,Y=!1,q=!1,ie=!0;if(typeof o!="function")throw new TypeError(r);d=t(d)||0,n(g)&&(Y=!!g.leading,q="maxWait"in g,S=q?i(t(g.maxWait)||0,d):S,ie="trailing"in g?!!g.trailing:ie);function J(we){var Ke=b,ge=E;return b=E=void 0,j=we,B=o.apply(ge,Ke),B}function $(we){return j=we,k=setTimeout(oe,d),Y?J(we):B}function te(we){var Ke=we-z,ge=we-j,st=d-Ke;return q?s(st,S-ge):st}function W(we){var Ke=we-z,ge=we-j;return z===void 0||Ke>=d||Ke<0||q&&ge>=S}function oe(){var we=e();if(W(we))return fe(we);k=setTimeout(oe,te(we))}function fe(we){return k=void 0,ie&&b?J(we):(b=E=void 0,B)}function he(){k!==void 0&&clearTimeout(k),j=0,b=z=E=k=void 0}function Se(){return k===void 0?B:fe(e())}function pe(){var we=e(),Ke=W(we);if(b=arguments,E=this,z=we,Ke){if(k===void 0)return $(z);if(q)return clearTimeout(k),k=setTimeout(oe,d),J(z)}return k===void 0&&(k=setTimeout(oe,d)),B}return pe.cancel=he,pe.flush=Se,pe}return cE=a,cE}var dE,xK;function Mde(){if(xK)return dE;xK=1;var n=rG(),e=Uf(),t="Expected a function";function r(i,s,a){var o=!0,d=!0;if(typeof i!="function")throw new TypeError(t);return e(a)&&(o="leading"in a?!!a.leading:o,d="trailing"in a?!!a.trailing:d),n(i,s,{leading:o,maxWait:s,trailing:d})}return dE=r,dE}var Eb={},wK;function Sde(){return wK||(wK=1,Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,a=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,g=o-(r.getBoundingClientRect().left+window.pageXOffset),b=d-(r.getBoundingClientRect().top+window.pageYOffset);g<0?g=0:g>s&&(g=s),b<0?b=0:b>a&&(b=a);var E=g/s,S=1-b/a;return{h:t.h,s:E,v:S,a:t.a,source:"hsv"}}),Eb}var MK;function Ede(){if(MK)return F1;MK=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.Saturation=void 0;var n=function(){function z(j,Y){for(var q=0;q<Y.length;q++){var ie=Y[q];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(j,ie.key,ie)}}return function(j,Y,q){return Y&&z(j.prototype,Y),q&&z(j,q),j}}(),e=La(),t=b(e),r=wp(),i=b(r),s=Mde(),a=b(s),o=Sde(),d=g(o);function g(z){if(z&&z.__esModule)return z;var j={};if(z!=null)for(var Y in z)Object.prototype.hasOwnProperty.call(z,Y)&&(j[Y]=z[Y]);return j.default=z,j}function b(z){return z&&z.__esModule?z:{default:z}}function E(z,j){if(!(z instanceof j))throw new TypeError("Cannot call a class as a function")}function S(z,j){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:z}function B(z,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);z.prototype=Object.create(j&&j.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(z,j):z.__proto__=j)}var k=F1.Saturation=function(z){B(j,z);function j(Y){E(this,j);var q=S(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,Y));return q.handleChange=function(ie){typeof q.props.onChange=="function"&&q.throttle(q.props.onChange,d.calculateChange(ie,q.props.hsl,q.container),ie)},q.handleMouseDown=function(ie){q.handleChange(ie);var J=q.getContainerRenderWindow();J.addEventListener("mousemove",q.handleChange),J.addEventListener("mouseup",q.handleMouseUp)},q.handleMouseUp=function(){q.unbindEventListeners()},q.throttle=(0,a.default)(function(ie,J,$){ie(J,$)},50),q}return n(j,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var q=this.container,ie=window;!ie.document.contains(q)&&ie.parent!==ie;)ie=ie.parent;return ie}},{key:"unbindEventListeners",value:function(){var q=this.getContainerRenderWindow();q.removeEventListener("mousemove",this.handleChange),q.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var q=this,ie=this.props.style||{},J=ie.color,$=ie.white,te=ie.black,W=ie.pointer,oe=ie.circle,fe=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:J,white:$,black:te,pointer:W,circle:oe}},{custom:!!this.props.style});return t.default.createElement("div",{style:fe.color,ref:function(Se){return q.container=Se},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:fe.white,className:"saturation-white"},t.default.createElement("div",{style:fe.black,className:"saturation-black"}),t.default.createElement("div",{style:fe.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:fe.circle}))))}}]),j}(e.PureComponent||e.Component);return F1.default=k,F1}var L1={},Qd={},hE,SK;function Bde(){if(SK)return hE;SK=1;var n=qW(),e=QW(),t=IW(),r=of();function i(s,a){var o=r(s)?n:e;return o(s,t(a))}return hE=i,hE}var fE,EK;function Ode(){return EK||(EK=1,fE=Bde()),fE}var qb={exports:{}},Ide=qb.exports,BK;function kde(){return BK||(BK=1,function(n,e){(function(t,r){n.exports=r()})(Ide,function(){function t(Ue){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Re){return typeof Re}:function(Re){return Re&&typeof Symbol=="function"&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re},t(Ue)}var r=/^\s+/,i=/\s+$/;function s(Ue,Re){if(Ue=Ue||"",Re=Re||{},Ue instanceof s)return Ue;if(!(this instanceof s))return new s(Ue,Re);var Be=a(Ue);this._originalInput=Ue,this._r=Be.r,this._g=Be.g,this._b=Be.b,this._a=Be.a,this._roundA=Math.round(100*this._a)/100,this._format=Re.format||Be.format,this._gradientType=Re.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Be.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Re=this.toRgb();return(Re.r*299+Re.g*587+Re.b*114)/1e3},getLuminance:function(){var Re=this.toRgb(),Be,nt,Ct,pt,zt,tn;return Be=Re.r/255,nt=Re.g/255,Ct=Re.b/255,Be<=.03928?pt=Be/12.92:pt=Math.pow((Be+.055)/1.055,2.4),nt<=.03928?zt=nt/12.92:zt=Math.pow((nt+.055)/1.055,2.4),Ct<=.03928?tn=Ct/12.92:tn=Math.pow((Ct+.055)/1.055,2.4),.2126*pt+.7152*zt+.0722*tn},setAlpha:function(Re){return this._a=Ke(Re),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Re=b(this._r,this._g,this._b);return{h:Re.h*360,s:Re.s,v:Re.v,a:this._a}},toHsvString:function(){var Re=b(this._r,this._g,this._b),Be=Math.round(Re.h*360),nt=Math.round(Re.s*100),Ct=Math.round(Re.v*100);return this._a==1?"hsv("+Be+", "+nt+"%, "+Ct+"%)":"hsva("+Be+", "+nt+"%, "+Ct+"%, "+this._roundA+")"},toHsl:function(){var Re=d(this._r,this._g,this._b);return{h:Re.h*360,s:Re.s,l:Re.l,a:this._a}},toHslString:function(){var Re=d(this._r,this._g,this._b),Be=Math.round(Re.h*360),nt=Math.round(Re.s*100),Ct=Math.round(Re.l*100);return this._a==1?"hsl("+Be+", "+nt+"%, "+Ct+"%)":"hsla("+Be+", "+nt+"%, "+Ct+"%, "+this._roundA+")"},toHex:function(Re){return S(this._r,this._g,this._b,Re)},toHexString:function(Re){return"#"+this.toHex(Re)},toHex8:function(Re){return B(this._r,this._g,this._b,this._a,Re)},toHex8String:function(Re){return"#"+this.toHex8(Re)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(ge(this._r,255)*100)+"%",g:Math.round(ge(this._g,255)*100)+"%",b:Math.round(ge(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(ge(this._r,255)*100)+"%, "+Math.round(ge(this._g,255)*100)+"%, "+Math.round(ge(this._b,255)*100)+"%)":"rgba("+Math.round(ge(this._r,255)*100)+"%, "+Math.round(ge(this._g,255)*100)+"%, "+Math.round(ge(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:pe[S(this._r,this._g,this._b,!0)]||!1},toFilter:function(Re){var Be="#"+k(this._r,this._g,this._b,this._a),nt=Be,Ct=this._gradientType?"GradientType = 1, ":"";if(Re){var pt=s(Re);nt="#"+k(pt._r,pt._g,pt._b,pt._a)}return"progid:DXImageTransform.Microsoft.gradient("+Ct+"startColorstr="+Be+",endColorstr="+nt+")"},toString:function(Re){var Be=!!Re;Re=Re||this._format;var nt=!1,Ct=this._a<1&&this._a>=0,pt=!Be&&Ct&&(Re==="hex"||Re==="hex6"||Re==="hex3"||Re==="hex4"||Re==="hex8"||Re==="name");return pt?Re==="name"&&this._a===0?this.toName():this.toRgbString():(Re==="rgb"&&(nt=this.toRgbString()),Re==="prgb"&&(nt=this.toPercentageRgbString()),(Re==="hex"||Re==="hex6")&&(nt=this.toHexString()),Re==="hex3"&&(nt=this.toHexString(!0)),Re==="hex4"&&(nt=this.toHex8String(!0)),Re==="hex8"&&(nt=this.toHex8String()),Re==="name"&&(nt=this.toName()),Re==="hsl"&&(nt=this.toHslString()),Re==="hsv"&&(nt=this.toHsvString()),nt||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(Re,Be){var nt=Re.apply(null,[this].concat([].slice.call(Be)));return this._r=nt._r,this._g=nt._g,this._b=nt._b,this.setAlpha(nt._a),this},lighten:function(){return this._applyModification(q,arguments)},brighten:function(){return this._applyModification(ie,arguments)},darken:function(){return this._applyModification(J,arguments)},desaturate:function(){return this._applyModification(z,arguments)},saturate:function(){return this._applyModification(j,arguments)},greyscale:function(){return this._applyModification(Y,arguments)},spin:function(){return this._applyModification($,arguments)},_applyCombination:function(Re,Be){return Re.apply(null,[this].concat([].slice.call(Be)))},analogous:function(){return this._applyCombination(fe,arguments)},complement:function(){return this._applyCombination(te,arguments)},monochromatic:function(){return this._applyCombination(he,arguments)},splitcomplement:function(){return this._applyCombination(oe,arguments)},triad:function(){return this._applyCombination(W,[3])},tetrad:function(){return this._applyCombination(W,[4])}},s.fromRatio=function(Ue,Re){if(t(Ue)=="object"){var Be={};for(var nt in Ue)Ue.hasOwnProperty(nt)&&(nt==="a"?Be[nt]=Ue[nt]:Be[nt]=Pe(Ue[nt]));Ue=Be}return s(Ue,Re)};function a(Ue){var Re={r:0,g:0,b:0},Be=1,nt=null,Ct=null,pt=null,zt=!1,tn=!1;return typeof Ue=="string"&&(Ue=Dt(Ue)),t(Ue)=="object"&&(ft(Ue.r)&&ft(Ue.g)&&ft(Ue.b)?(Re=o(Ue.r,Ue.g,Ue.b),zt=!0,tn=String(Ue.r).substr(-1)==="%"?"prgb":"rgb"):ft(Ue.h)&&ft(Ue.s)&&ft(Ue.v)?(nt=Pe(Ue.s),Ct=Pe(Ue.v),Re=E(Ue.h,nt,Ct),zt=!0,tn="hsv"):ft(Ue.h)&&ft(Ue.s)&&ft(Ue.l)&&(nt=Pe(Ue.s),pt=Pe(Ue.l),Re=g(Ue.h,nt,pt),zt=!0,tn="hsl"),Ue.hasOwnProperty("a")&&(Be=Ue.a)),Be=Ke(Be),{ok:zt,format:Ue.format||tn,r:Math.min(255,Math.max(Re.r,0)),g:Math.min(255,Math.max(Re.g,0)),b:Math.min(255,Math.max(Re.b,0)),a:Be}}function o(Ue,Re,Be){return{r:ge(Ue,255)*255,g:ge(Re,255)*255,b:ge(Be,255)*255}}function d(Ue,Re,Be){Ue=ge(Ue,255),Re=ge(Re,255),Be=ge(Be,255);var nt=Math.max(Ue,Re,Be),Ct=Math.min(Ue,Re,Be),pt,zt,tn=(nt+Ct)/2;if(nt==Ct)pt=zt=0;else{var Lt=nt-Ct;switch(zt=tn>.5?Lt/(2-nt-Ct):Lt/(nt+Ct),nt){case Ue:pt=(Re-Be)/Lt+(Re<Be?6:0);break;case Re:pt=(Be-Ue)/Lt+2;break;case Be:pt=(Ue-Re)/Lt+4;break}pt/=6}return{h:pt,s:zt,l:tn}}function g(Ue,Re,Be){var nt,Ct,pt;Ue=ge(Ue,360),Re=ge(Re,100),Be=ge(Be,100);function zt(gn,Nn,rn){return rn<0&&(rn+=1),rn>1&&(rn-=1),rn<1/6?gn+(Nn-gn)*6*rn:rn<1/2?Nn:rn<2/3?gn+(Nn-gn)*(2/3-rn)*6:gn}if(Re===0)nt=Ct=pt=Be;else{var tn=Be<.5?Be*(1+Re):Be+Re-Be*Re,Lt=2*Be-tn;nt=zt(Lt,tn,Ue+1/3),Ct=zt(Lt,tn,Ue),pt=zt(Lt,tn,Ue-1/3)}return{r:nt*255,g:Ct*255,b:pt*255}}function b(Ue,Re,Be){Ue=ge(Ue,255),Re=ge(Re,255),Be=ge(Be,255);var nt=Math.max(Ue,Re,Be),Ct=Math.min(Ue,Re,Be),pt,zt,tn=nt,Lt=nt-Ct;if(zt=nt===0?0:Lt/nt,nt==Ct)pt=0;else{switch(nt){case Ue:pt=(Re-Be)/Lt+(Re<Be?6:0);break;case Re:pt=(Be-Ue)/Lt+2;break;case Be:pt=(Ue-Re)/Lt+4;break}pt/=6}return{h:pt,s:zt,v:tn}}function E(Ue,Re,Be){Ue=ge(Ue,360)*6,Re=ge(Re,100),Be=ge(Be,100);var nt=Math.floor(Ue),Ct=Ue-nt,pt=Be*(1-Re),zt=Be*(1-Ct*Re),tn=Be*(1-(1-Ct)*Re),Lt=nt%6,gn=[Be,zt,pt,pt,tn,Be][Lt],Nn=[tn,Be,Be,zt,pt,pt][Lt],rn=[pt,pt,tn,Be,Be,zt][Lt];return{r:gn*255,g:Nn*255,b:rn*255}}function S(Ue,Re,Be,nt){var Ct=[Ce(Math.round(Ue).toString(16)),Ce(Math.round(Re).toString(16)),Ce(Math.round(Be).toString(16))];return nt&&Ct[0].charAt(0)==Ct[0].charAt(1)&&Ct[1].charAt(0)==Ct[1].charAt(1)&&Ct[2].charAt(0)==Ct[2].charAt(1)?Ct[0].charAt(0)+Ct[1].charAt(0)+Ct[2].charAt(0):Ct.join("")}function B(Ue,Re,Be,nt,Ct){var pt=[Ce(Math.round(Ue).toString(16)),Ce(Math.round(Re).toString(16)),Ce(Math.round(Be).toString(16)),Ce(it(nt))];return Ct&&pt[0].charAt(0)==pt[0].charAt(1)&&pt[1].charAt(0)==pt[1].charAt(1)&&pt[2].charAt(0)==pt[2].charAt(1)&&pt[3].charAt(0)==pt[3].charAt(1)?pt[0].charAt(0)+pt[1].charAt(0)+pt[2].charAt(0)+pt[3].charAt(0):pt.join("")}function k(Ue,Re,Be,nt){var Ct=[Ce(it(nt)),Ce(Math.round(Ue).toString(16)),Ce(Math.round(Re).toString(16)),Ce(Math.round(Be).toString(16))];return Ct.join("")}s.equals=function(Ue,Re){return!Ue||!Re?!1:s(Ue).toRgbString()==s(Re).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function z(Ue,Re){Re=Re===0?0:Re||10;var Be=s(Ue).toHsl();return Be.s-=Re/100,Be.s=st(Be.s),s(Be)}function j(Ue,Re){Re=Re===0?0:Re||10;var Be=s(Ue).toHsl();return Be.s+=Re/100,Be.s=st(Be.s),s(Be)}function Y(Ue){return s(Ue).desaturate(100)}function q(Ue,Re){Re=Re===0?0:Re||10;var Be=s(Ue).toHsl();return Be.l+=Re/100,Be.l=st(Be.l),s(Be)}function ie(Ue,Re){Re=Re===0?0:Re||10;var Be=s(Ue).toRgb();return Be.r=Math.max(0,Math.min(255,Be.r-Math.round(255*-(Re/100)))),Be.g=Math.max(0,Math.min(255,Be.g-Math.round(255*-(Re/100)))),Be.b=Math.max(0,Math.min(255,Be.b-Math.round(255*-(Re/100)))),s(Be)}function J(Ue,Re){Re=Re===0?0:Re||10;var Be=s(Ue).toHsl();return Be.l-=Re/100,Be.l=st(Be.l),s(Be)}function $(Ue,Re){var Be=s(Ue).toHsl(),nt=(Be.h+Re)%360;return Be.h=nt<0?360+nt:nt,s(Be)}function te(Ue){var Re=s(Ue).toHsl();return Re.h=(Re.h+180)%360,s(Re)}function W(Ue,Re){if(isNaN(Re)||Re<=0)throw new Error("Argument to polyad must be a positive number");for(var Be=s(Ue).toHsl(),nt=[s(Ue)],Ct=360/Re,pt=1;pt<Re;pt++)nt.push(s({h:(Be.h+pt*Ct)%360,s:Be.s,l:Be.l}));return nt}function oe(Ue){var Re=s(Ue).toHsl(),Be=Re.h;return[s(Ue),s({h:(Be+72)%360,s:Re.s,l:Re.l}),s({h:(Be+216)%360,s:Re.s,l:Re.l})]}function fe(Ue,Re,Be){Re=Re||6,Be=Be||30;var nt=s(Ue).toHsl(),Ct=360/Be,pt=[s(Ue)];for(nt.h=(nt.h-(Ct*Re>>1)+720)%360;--Re;)nt.h=(nt.h+Ct)%360,pt.push(s(nt));return pt}function he(Ue,Re){Re=Re||6;for(var Be=s(Ue).toHsv(),nt=Be.h,Ct=Be.s,pt=Be.v,zt=[],tn=1/Re;Re--;)zt.push(s({h:nt,s:Ct,v:pt})),pt=(pt+tn)%1;return zt}s.mix=function(Ue,Re,Be){Be=Be===0?0:Be||50;var nt=s(Ue).toRgb(),Ct=s(Re).toRgb(),pt=Be/100,zt={r:(Ct.r-nt.r)*pt+nt.r,g:(Ct.g-nt.g)*pt+nt.g,b:(Ct.b-nt.b)*pt+nt.b,a:(Ct.a-nt.a)*pt+nt.a};return s(zt)},s.readability=function(Ue,Re){var Be=s(Ue),nt=s(Re);return(Math.max(Be.getLuminance(),nt.getLuminance())+.05)/(Math.min(Be.getLuminance(),nt.getLuminance())+.05)},s.isReadable=function(Ue,Re,Be){var nt=s.readability(Ue,Re),Ct,pt;switch(pt=!1,Ct=Tt(Be),Ct.level+Ct.size){case"AAsmall":case"AAAlarge":pt=nt>=4.5;break;case"AAlarge":pt=nt>=3;break;case"AAAsmall":pt=nt>=7;break}return pt},s.mostReadable=function(Ue,Re,Be){var nt=null,Ct=0,pt,zt,tn,Lt;Be=Be||{},zt=Be.includeFallbackColors,tn=Be.level,Lt=Be.size;for(var gn=0;gn<Re.length;gn++)pt=s.readability(Ue,Re[gn]),pt>Ct&&(Ct=pt,nt=s(Re[gn]));return s.isReadable(Ue,nt,{level:tn,size:Lt})||!zt?nt:(Be.includeFallbackColors=!1,s.mostReadable(Ue,["#fff","#000"],Be))};var Se=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},pe=s.hexNames=we(Se);function we(Ue){var Re={};for(var Be in Ue)Ue.hasOwnProperty(Be)&&(Re[Ue[Be]]=Be);return Re}function Ke(Ue){return Ue=parseFloat(Ue),(isNaN(Ue)||Ue<0||Ue>1)&&(Ue=1),Ue}function ge(Ue,Re){Ze(Ue)&&(Ue="100%");var Be=We(Ue);return Ue=Math.min(Re,Math.max(0,parseFloat(Ue))),Be&&(Ue=parseInt(Ue*Re,10)/100),Math.abs(Ue-Re)<1e-6?1:Ue%Re/parseFloat(Re)}function st(Ue){return Math.min(1,Math.max(0,Ue))}function Qe(Ue){return parseInt(Ue,16)}function Ze(Ue){return typeof Ue=="string"&&Ue.indexOf(".")!=-1&&parseFloat(Ue)===1}function We(Ue){return typeof Ue=="string"&&Ue.indexOf("%")!=-1}function Ce(Ue){return Ue.length==1?"0"+Ue:""+Ue}function Pe(Ue){return Ue<=1&&(Ue=Ue*100+"%"),Ue}function it(Ue){return Math.round(parseFloat(Ue)*255).toString(16)}function vt(Ue){return Qe(Ue)/255}var _t=function(){var Ue="[-\\+]?\\d+%?",Re="[-\\+]?\\d*\\.\\d+%?",Be="(?:"+Re+")|(?:"+Ue+")",nt="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?",Ct="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?";return{CSS_UNIT:new RegExp(Be),rgb:new RegExp("rgb"+nt),rgba:new RegExp("rgba"+Ct),hsl:new RegExp("hsl"+nt),hsla:new RegExp("hsla"+Ct),hsv:new RegExp("hsv"+nt),hsva:new RegExp("hsva"+Ct),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ft(Ue){return!!_t.CSS_UNIT.exec(Ue)}function Dt(Ue){Ue=Ue.replace(r,"").replace(i,"").toLowerCase();var Re=!1;if(Se[Ue])Ue=Se[Ue],Re=!0;else if(Ue=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Be;return(Be=_t.rgb.exec(Ue))?{r:Be[1],g:Be[2],b:Be[3]}:(Be=_t.rgba.exec(Ue))?{r:Be[1],g:Be[2],b:Be[3],a:Be[4]}:(Be=_t.hsl.exec(Ue))?{h:Be[1],s:Be[2],l:Be[3]}:(Be=_t.hsla.exec(Ue))?{h:Be[1],s:Be[2],l:Be[3],a:Be[4]}:(Be=_t.hsv.exec(Ue))?{h:Be[1],s:Be[2],v:Be[3]}:(Be=_t.hsva.exec(Ue))?{h:Be[1],s:Be[2],v:Be[3],a:Be[4]}:(Be=_t.hex8.exec(Ue))?{r:Qe(Be[1]),g:Qe(Be[2]),b:Qe(Be[3]),a:vt(Be[4]),format:Re?"name":"hex8"}:(Be=_t.hex6.exec(Ue))?{r:Qe(Be[1]),g:Qe(Be[2]),b:Qe(Be[3]),format:Re?"name":"hex"}:(Be=_t.hex4.exec(Ue))?{r:Qe(Be[1]+""+Be[1]),g:Qe(Be[2]+""+Be[2]),b:Qe(Be[3]+""+Be[3]),a:vt(Be[4]+""+Be[4]),format:Re?"name":"hex8"}:(Be=_t.hex3.exec(Ue))?{r:Qe(Be[1]+""+Be[1]),g:Qe(Be[2]+""+Be[2]),b:Qe(Be[3]+""+Be[3]),format:Re?"name":"hex"}:!1}function Tt(Ue){var Re,Be;return Ue=Ue||{level:"AA",size:"small"},Re=(Ue.level||"AA").toUpperCase(),Be=(Ue.size||"small").toLowerCase(),Re!=="AA"&&Re!=="AAA"&&(Re="AA"),Be!=="small"&&Be!=="large"&&(Be="small"),{level:Re,size:Be}}return s})}(qb)),qb.exports}var OK;function iG(){if(OK)return Qd;OK=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.isvalidColorString=Qd.red=Qd.getContrastingColor=Qd.isValidHex=Qd.toState=Qd.simpleCheckForValidColor=void 0;var n=Ode(),e=i(n),t=kde(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}Qd.simpleCheckForValidColor=function(o){var d=["r","g","b","a","h","s","l","v"],g=0,b=0;return(0,e.default)(d,function(E){if(o[E]&&(g+=1,isNaN(o[E])||(b+=1),E==="s"||E==="l")){var S=/^\d+%$/;S.test(o[E])&&(b+=1)}}),g===b?o:!1};var s=Qd.toState=function(o,d){var g=o.hex?(0,r.default)(o.hex):(0,r.default)(o),b=g.toHsl(),E=g.toHsv(),S=g.toRgb(),B=g.toHex();b.s===0&&(b.h=d||0,E.h=d||0);var k=B==="000000"&&S.a===0;return{hsl:b,hex:k?"transparent":"#"+B,rgb:S,hsv:E,oldHue:o.h||d||b.h,source:o.source}};return Qd.isValidHex=function(o){if(o==="transparent")return!0;var d=String(o).charAt(0)==="#"?1:0;return o.length!==4+d&&o.length<7+d&&(0,r.default)(o).isValid()},Qd.getContrastingColor=function(o){if(!o)return"#fff";var d=s(o);if(d.hex==="transparent")return"rgba(0,0,0,0.4)";var g=(d.rgb.r*299+d.rgb.g*587+d.rgb.b*114)/1e3;return g>=128?"#000":"#fff"},Qd.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Qd.isvalidColorString=function(o,d){var g=o.replace("°","");return(0,r.default)(d+" ("+g+")")._ok},Qd}var IK;function Tde(){if(IK)return L1;IK=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.ColorWrap=void 0;var n=Object.assign||function(k){for(var z=1;z<arguments.length;z++){var j=arguments[z];for(var Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&(k[Y]=j[Y])}return k},e=function(){function k(z,j){for(var Y=0;Y<j.length;Y++){var q=j[Y];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(z,q.key,q)}}return function(z,j,Y){return j&&k(z.prototype,j),Y&&k(z,Y),z}}(),t=La(),r=g(t),i=rG(),s=g(i),a=iG(),o=d(a);function d(k){if(k&&k.__esModule)return k;var z={};if(k!=null)for(var j in k)Object.prototype.hasOwnProperty.call(k,j)&&(z[j]=k[j]);return z.default=k,z}function g(k){return k&&k.__esModule?k:{default:k}}function b(k,z){if(!(k instanceof z))throw new TypeError("Cannot call a class as a function")}function E(k,z){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:k}function S(k,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);k.prototype=Object.create(z&&z.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(k,z):k.__proto__=z)}var B=L1.ColorWrap=function(z){var j=function(Y){S(q,Y);function q(ie){b(this,q);var J=E(this,(q.__proto__||Object.getPrototypeOf(q)).call(this));return J.handleChange=function($,te){var W=o.simpleCheckForValidColor($);if(W){var oe=o.toState($,$.h||J.state.oldHue);J.setState(oe),J.props.onChangeComplete&&J.debounce(J.props.onChangeComplete,oe,te),J.props.onChange&&J.props.onChange(oe,te)}},J.handleSwatchHover=function($,te){var W=o.simpleCheckForValidColor($);if(W){var oe=o.toState($,$.h||J.state.oldHue);J.props.onSwatchHover&&J.props.onSwatchHover(oe,te)}},J.state=n({},o.toState(ie.color,0)),J.debounce=(0,s.default)(function($,te,W){$(te,W)},100),J}return e(q,[{key:"render",value:function(){var J={};return this.props.onSwatchHover&&(J.onSwatchHover=this.handleSwatchHover),r.default.createElement(z,n({},this.props,this.state,{onChange:this.handleChange},J))}}],[{key:"getDerivedStateFromProps",value:function(J,$){return n({},o.toState(J.color,$.oldHue))}}]),q}(t.PureComponent||t.Component);return j.propTypes=n({},z.propTypes),j.defaultProps=n({},z.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),j};return L1.default=B,L1}var U1={},Ov={},kK;function Pde(){if(kK)return Ov;kK=1,Object.defineProperty(Ov,"__esModule",{value:!0}),Ov.handleFocus=void 0;var n=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}return d},e=function(){function d(g,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,b,E){return b&&d(g.prototype,b),E&&d(g,E),g}}(),t=La(),r=i(t);function i(d){return d&&d.__esModule?d:{default:d}}function s(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function a(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function o(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}return Ov.handleFocus=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(E){o(S,E);function S(){var B,k,z,j;s(this,S);for(var Y=arguments.length,q=Array(Y),ie=0;ie<Y;ie++)q[ie]=arguments[ie];return j=(k=(z=a(this,(B=S.__proto__||Object.getPrototypeOf(S)).call.apply(B,[this].concat(q))),z),z.state={focus:!1},z.handleFocus=function(){return z.setState({focus:!0})},z.handleBlur=function(){return z.setState({focus:!1})},k),a(z,j)}return e(S,[{key:"render",value:function(){return r.default.createElement(b,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(g,n({},this.props,this.state)))}}]),S}(r.default.Component)},Ov}var TK;function Rde(){if(TK)return U1;TK=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.Swatch=void 0;var n=Object.assign||function(E){for(var S=1;S<arguments.length;S++){var B=arguments[S];for(var k in B)Object.prototype.hasOwnProperty.call(B,k)&&(E[k]=B[k])}return E},e=La(),t=d(e),r=wp(),i=d(r),s=Pde(),a=hI(),o=d(a);function d(E){return E&&E.__esModule?E:{default:E}}var g=13,b=U1.Swatch=function(S){var B=S.color,k=S.style,z=S.onClick,j=z===void 0?function(){}:z,Y=S.onHover,q=S.title,ie=q===void 0?B:q,J=S.children,$=S.focus,te=S.focusStyle,W=te===void 0?{}:te,oe=B==="transparent",fe=(0,i.default)({default:{swatch:n({background:B,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},k,$?W:{})}}),he=function(ge){return j(B,ge)},Se=function(ge){return ge.keyCode===g&&j(B,ge)},pe=function(ge){return Y(B,ge)},we={};return Y&&(we.onMouseOver=pe),t.default.createElement("div",n({style:fe.swatch,onClick:he,title:ie,tabIndex:0,onKeyDown:Se},we),J,oe&&t.default.createElement(o.default,{borderRadius:fe.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return U1.default=(0,s.handleFocus)(b),U1}var PK;function oG(){return PK||(PK=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=mde();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return g(e).default}});var t=hI();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return g(t).default}});var r=gde();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return g(r).default}});var i=vde();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return g(i).default}});var s=Cde();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return g(s).default}});var a=Ede();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return g(a).default}});var o=Tde();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return g(o).default}});var d=Rde();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return g(d).default}});function g(b){return b&&b.__esModule?b:{default:b}}}(sE)),sE}var z1={},pE,RK;function Dde(){if(RK)return pE;RK=1;function n(e){return e===void 0}return pE=n,pE}var Bb={},DK;function Kde(){if(DK)return Bb;DK=1,Object.defineProperty(Bb,"__esModule",{value:!0});var n=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a},e=La(),t=r(e);function r(a){return a&&a.__esModule?a:{default:a}}function i(a,o){var d={};for(var g in a)o.indexOf(g)>=0||Object.prototype.hasOwnProperty.call(a,g)&&(d[g]=a[g]);return d}var s=24;return Bb.default=function(a){var o=a.fill,d=o===void 0?"currentColor":o,g=a.width,b=g===void 0?s:g,E=a.height,S=E===void 0?s:E,B=a.style,k=B===void 0?{}:B,z=i(a,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:d,width:b,height:S},k)},z),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Bb}var KK;function Fde(){if(KK)return z1;KK=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.ChromeFields=void 0;var n=function(){function q(ie,J){for(var $=0;$<J.length;$++){var te=J[$];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ie,te.key,te)}}return function(ie,J,$){return J&&q(ie.prototype,J),$&&q(ie,$),ie}}(),e=La(),t=B(e),r=wp(),i=B(r),s=iG(),a=S(s),o=Dde(),d=B(o),g=oG(),b=Kde(),E=B(b);function S(q){if(q&&q.__esModule)return q;var ie={};if(q!=null)for(var J in q)Object.prototype.hasOwnProperty.call(q,J)&&(ie[J]=q[J]);return ie.default=q,ie}function B(q){return q&&q.__esModule?q:{default:q}}function k(q,ie){if(!(q instanceof ie))throw new TypeError("Cannot call a class as a function")}function z(q,ie){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:q}function j(q,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);q.prototype=Object.create(ie&&ie.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(q,ie):q.__proto__=ie)}var Y=z1.ChromeFields=function(q){j(ie,q);function ie(J){k(this,ie);var $=z(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this));return $.toggleViews=function(){$.state.view==="hex"?$.setState({view:"rgb"}):$.state.view==="rgb"?$.setState({view:"hsl"}):$.state.view==="hsl"&&($.props.hsl.a===1?$.setState({view:"hex"}):$.setState({view:"rgb"}))},$.handleChange=function(te,W){te.hex?a.isValidHex(te.hex)&&$.props.onChange({hex:te.hex,source:"hex"},W):te.r||te.g||te.b?$.props.onChange({r:te.r||$.props.rgb.r,g:te.g||$.props.rgb.g,b:te.b||$.props.rgb.b,source:"rgb"},W):te.a?(te.a<0?te.a=0:te.a>1&&(te.a=1),$.props.onChange({h:$.props.hsl.h,s:$.props.hsl.s,l:$.props.hsl.l,a:Math.round(te.a*100)/100,source:"rgb"},W)):(te.h||te.s||te.l)&&(typeof te.s=="string"&&te.s.includes("%")&&(te.s=te.s.replace("%","")),typeof te.l=="string"&&te.l.includes("%")&&(te.l=te.l.replace("%","")),te.s==1?te.s=.01:te.l==1&&(te.l=.01),$.props.onChange({h:te.h||$.props.hsl.h,s:Number((0,d.default)(te.s)?$.props.hsl.s:te.s),l:Number((0,d.default)(te.l)?$.props.hsl.l:te.l),source:"hsl"},W))},$.showHighlight=function(te){te.currentTarget.style.background="#eee"},$.hideHighlight=function(te){te.currentTarget.style.background="transparent"},J.hsl.a!==1&&J.view==="hex"?$.state={view:"rgb"}:$.state={view:J.view},$}return n(ie,[{key:"render",value:function(){var $=this,te=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),W=void 0;return this.state.view==="hex"?W=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(g.EditableInput,{style:{input:te.input,label:te.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?W=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(g.EditableInput,{style:{input:te.input,label:te.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(g.EditableInput,{style:{input:te.input,label:te.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(g.EditableInput,{style:{input:te.input,label:te.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:te.alpha},t.default.createElement(g.EditableInput,{style:{input:te.input,label:te.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(W=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(g.EditableInput,{style:{input:te.input,label:te.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(g.EditableInput,{style:{input:te.input,label:te.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(g.EditableInput,{style:{input:te.input,label:te.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:te.alpha},t.default.createElement(g.EditableInput,{style:{input:te.input,label:te.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:te.wrap,className:"flexbox-fix"},W,t.default.createElement("div",{style:te.toggle},t.default.createElement("div",{style:te.icon,onClick:this.toggleViews,ref:function(fe){return $.icon=fe}},t.default.createElement(E.default,{style:te.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function($,te){return $.hsl.a!==1&&te.view==="hex"?{view:"rgb"}:null}}]),ie}(t.default.Component);return Y.defaultProps={view:"hex"},z1.default=Y,z1}var j1={},FK;function Lde(){if(FK)return j1;FK=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.ChromePointer=void 0;var n=La(),e=i(n),t=wp(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var s=j1.ChromePointer=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return j1.default=s,j1}var N1={},LK;function Ude(){if(LK)return N1;LK=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.ChromePointerCircle=void 0;var n=La(),e=i(n),t=wp(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var s=N1.ChromePointerCircle=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return N1.default=s,N1}var UK;function zde(){if(UK)return S1;UK=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.Chrome=void 0;var n=La(),e=z(n),t=Cp(),r=z(t),i=wp(),s=z(i),a=nG(),o=z(a),d=oG(),g=Fde(),b=z(g),E=Lde(),S=z(E),B=Ude(),k=z(B);function z(Y){return Y&&Y.__esModule?Y:{default:Y}}var j=S1.Chrome=function(q){var ie=q.width,J=q.onChange,$=q.disableAlpha,te=q.rgb,W=q.hsl,oe=q.hsv,fe=q.hex,he=q.renderers,Se=q.styles,pe=Se===void 0?{}:Se,we=q.className,Ke=we===void 0?"":we,ge=q.defaultView,st=(0,s.default)((0,o.default)({default:{picker:{width:ie,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+te.r+", "+te.g+", "+te.b+", "+te.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},pe),{disableAlpha:$});return e.default.createElement("div",{style:st.picker,className:"chrome-picker "+Ke},e.default.createElement("div",{style:st.saturation},e.default.createElement(d.Saturation,{style:st.Saturation,hsl:W,hsv:oe,pointer:k.default,onChange:J})),e.default.createElement("div",{style:st.body},e.default.createElement("div",{style:st.controls,className:"flexbox-fix"},e.default.createElement("div",{style:st.color},e.default.createElement("div",{style:st.swatch},e.default.createElement("div",{style:st.active}),e.default.createElement(d.Checkboard,{renderers:he}))),e.default.createElement("div",{style:st.toggles},e.default.createElement("div",{style:st.hue},e.default.createElement(d.Hue,{style:st.Hue,hsl:W,pointer:S.default,onChange:J})),e.default.createElement("div",{style:st.alpha},e.default.createElement(d.Alpha,{style:st.Alpha,rgb:te,hsl:W,pointer:S.default,renderers:he,onChange:J})))),e.default.createElement(b.default,{rgb:te,hsl:W,hex:fe,view:ge,onChange:J,disableAlpha:$})))};return j.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},j.defaultProps={width:225,disableAlpha:!1,styles:{}},S1.default=(0,d.ColorWrap)(j),S1}var jde=zde();const Nde=Xa(jde);function no(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return no=function(){return a},a}no();function Wde(n){no().f[0]++;const e=(no().s[0]++,n.rgb);return no().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class sG extends nr.Component{constructor(t){no().f[1]++,no().s[4]++;super(t);Tn(this,"state",(no().s[2]++,{pickerOpened:!1}));Tn(this,"colorInput",(no().s[3]++,null));Tn(this,"calcPickerOffset",(no().s[7]++,()=>{no().f[3]++;const t=(no().s[8]++,this.colorInput);if(no().s[9]++,t){no().b[0][0]++;const r=(no().s[10]++,t.getBoundingClientRect());return no().s[11]++,{top:r.top,left:r.left+196}}else return no().b[0][1]++,no().s[12]++,{top:160,left:555}}));Tn(this,"togglePicker",(no().s[13]++,()=>{no().f[4]++,no().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})}));no().s[5]++,this.onChangeNoCheck=y6.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(t){no().f[2]++,no().s[6]++,this.props.onChange(t)}get color(){no().f[5]++,no().s[15]++;try{return no().s[16]++,j6(this.props.value).rgb()}catch(t){return no().s[17]++,console.warn("Error parsing color: ",t),no().s[18]++,j6("rgb(255,255,255)")}}onChange(t){no().f[6]++,no().s[19]++,this.props.onChange(t===""?(no().b[1][0]++,void 0):(no().b[1][1]++,t))}render(){no().f[7]++;const t=(no().s[20]++,this.calcPickerOffset()),r=(no().s[21]++,this.color.object()),i=(no().s[22]++,{r:r.r,g:r.g,b:r.b,a:r.alpha}),s=(no().s[23]++,le.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:t.left,top:t.top},children:[le.jsx(Nde,{color:i,onChange:o=>(no().f[8]++,no().s[24]++,this.onChangeNoCheck(Wde(o)))}),le.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),a=(no().s[25]++,{backgroundColor:this.props.value});return no().s[26]++,le.jsxs("div",{className:"maputnik-color-wrapper",children:[(no().b[2][0]++,this.state.pickerOpened&&(no().b[2][1]++,s)),le.jsx("div",{className:"maputnik-color-swatch",style:a}),le.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:o=>(no().f[9]++,no().s[27]++,this.colorInput=o),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(no().b[3][0]++,this.props.value):(no().b[3][1]++,""),onChange:o=>(no().f[10]++,no().s[28]++,this.onChange(o.target.value))})]})}}function mn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return mn=function(){return a},a}mn();class cm extends nr.Component{constructor(t){mn().f[0]++,mn().s[2]++;super(t);Tn(this,"_keyboardEvent",(mn().s[1]++,!1));Tn(this,"resetValue",(mn().s[26]++,()=>{if(mn().f[4]++,mn().s[27]++,this.setState({editing:!1}),mn().s[28]++,this.state.value)mn().b[16][1]++;else{mn().b[16][0]++,mn().s[29]++;return}mn().s[30]++,this.isValid(this.state.value)?mn().b[17][1]++:(mn().b[17][0]++,mn().s[31]++,this.isValid(this.props.value)?(mn().b[18][0]++,mn().s[32]++,this.changeValue(this.props.value),mn().s[33]++,this.setState({dirtyValue:this.props.value})):(mn().b[18][1]++,mn().s[34]++,this.changeValue(void 0),mn().s[35]++,this.setState({dirtyValue:void 0})))}));Tn(this,"onChangeRange",(mn().s[36]++,t=>{mn().f[5]++;let r=(mn().s[37]++,parseFloat(t.target.value));const i=(mn().s[38]++,this.props.rangeStep);let s=(mn().s[39]++,r);if(mn().s[40]++,i){mn().b[19][0]++;const a=(mn().s[41]++,r%i);mn().s[42]++,this._keyboardEvent?(mn().b[20][0]++,mn().s[43]++,r<+this.state.dirtyValue?(mn().b[21][0]++,mn().s[44]++,r=this.state.value-i):(mn().b[21][1]++,mn().s[45]++,r=this.state.value+i),mn().s[46]++,s=r):(mn().b[20][1]++,mn().s[47]++,a<i/2?(mn().b[22][0]++,mn().s[48]++,r=r-a):(mn().b[22][1]++,mn().s[49]++,r=r+(i-a)))}else mn().b[19][1]++;mn().s[50]++,this._keyboardEvent=!1,mn().s[51]++,r=Math.max(this.props.min,Math.min(this.props.max,r)),mn().s[52]++,this.setState({value:r,dirtyValue:s}),mn().s[53]++,this.props.onChange?(mn().b[23][0]++,mn().s[54]++,this.props.onChange(r)):mn().b[23][1]++}));mn().s[3]++,this.state={uuid:+Ly(),editing:!1,value:t.value,dirtyValue:t.value}}static getDerivedStateFromProps(t,r){return mn().f[1]++,mn().s[4]++,mn().b[1][0]++,!r.editing&&(mn().b[1][1]++,t.value!==r.value)?(mn().b[0][0]++,mn().s[5]++,{value:t.value,dirtyValue:t.value}):(mn().b[0][1]++,mn().s[6]++,null)}changeValue(t){mn().f[2]++;const r=(mn().s[7]++,mn().b[3][0]++,t===""||(mn().b[3][1]++,t===void 0)?(mn().b[2][0]++,void 0):(mn().b[2][1]++,+t)),i=(mn().s[8]++,this.props.value!==r);mn().s[9]++,mn().b[5][0]++,this.isValid(r)&&(mn().b[5][1]++,i)?(mn().b[4][0]++,mn().s[10]++,this.props.onChange?(mn().b[6][0]++,mn().s[11]++,this.props.onChange(r)):mn().b[6][1]++,mn().s[12]++,this.setState({value:r})):(mn().b[4][1]++,mn().s[13]++,mn().b[8][0]++,!this.isValid(r)&&(mn().b[8][1]++,i)?(mn().b[7][0]++,mn().s[14]++,this.setState({value:void 0})):mn().b[7][1]++),mn().s[15]++,this.setState({dirtyValue:t===""?(mn().b[9][0]++,void 0):(mn().b[9][1]++,t)})}isValid(t){if(mn().f[3]++,mn().s[16]++,t===void 0)return mn().b[10][0]++,mn().s[17]++,!0;mn().b[10][1]++;const r=(mn().s[18]++,+t);return mn().s[19]++,isNaN(r)?(mn().b[11][0]++,mn().s[20]++,!1):(mn().b[11][1]++,mn().s[21]++,mn().b[13][0]++,!isNaN(this.props.min)&&(mn().b[13][1]++,r<this.props.min)?(mn().b[12][0]++,mn().s[22]++,!1):(mn().b[12][1]++,mn().s[23]++,mn().b[15][0]++,!isNaN(this.props.max)&&(mn().b[15][1]++,r>this.props.max)?(mn().b[14][0]++,mn().s[24]++,!1):(mn().b[14][1]++,mn().s[25]++,!0)))}render(){var t,r;if(mn().f[6]++,mn().s[55]++,mn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(mn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(mn().b[25][2]++,this.props.min!==void 0)&&(mn().b[25][3]++,this.props.max!==void 0)&&(mn().b[25][4]++,this.props.allowRange)){mn().b[24][0]++;const i=(mn().s[56]++,this.state.editing?(mn().b[26][0]++,this.state.dirtyValue):(mn().b[26][1]++,this.state.value)),s=(mn().s[57]++,this.props.default===void 0?(mn().b[27][0]++,""):(mn().b[27][1]++,this.props.default));let a;return mn().s[58]++,this.state.editingRange?(mn().b[28][0]++,mn().s[59]++,a=this.state.value):(mn().b[28][1]++,mn().s[60]++,a=i),mn().s[61]++,le.jsxs("div",{className:"maputnik-number-container",children:[le.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:i===void 0?(mn().b[29][0]++,s):(mn().b[29][1]++,i),onChange:this.onChangeRange,onKeyDown:()=>{mn().f[7]++,mn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{mn().f[8]++,mn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{mn().f[9]++,mn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{mn().f[10]++,mn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),le.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:(t=this.props.default)==null?void 0:t.toString(),value:a===void 0?(mn().b[30][0]++,""):(mn().b[30][1]++,a),onFocus:o=>{mn().f[11]++,mn().s[66]++,this.setState({editing:!0})},onChange:o=>{mn().f[12]++,mn().s[67]++,this.changeValue(o.target.value)},onBlur:o=>{mn().f[13]++,mn().s[68]++,this.setState({editing:!1}),mn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{mn().b[24][1]++;const i=(mn().s[70]++,this.state.editing?(mn().b[31][0]++,this.state.dirtyValue):(mn().b[31][1]++,this.state.value));return mn().s[71]++,le.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:(r=this.props.default)==null?void 0:r.toString(),value:i===void 0?(mn().b[32][0]++,""):(mn().b[32][1]++,i),onChange:s=>(mn().f[14]++,mn().s[72]++,this.changeValue(s.target.value)),onFocus:()=>{mn().f[15]++,mn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}Tn(cm,"defaultProps",(mn().s[0]++,{rangeStep:1}));function qp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return qp=function(){return a},a}qp();class fI extends nr.Component{constructor(){super(...arguments);Tn(this,"onChange",(qp().s[1]++,()=>{qp().f[0]++,qp().s[2]++,this.props.onChange(!this.props.value)}))}render(){return qp().f[1]++,qp().s[3]++,le.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[le.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),le.jsx("div",{className:"maputnik-checkbox-box",children:le.jsx("svg",{style:{display:this.props.value?(qp().b[0][0]++,"inline"):(qp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:le.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}Tn(fI,"defaultProps",(qp().s[0]++,{value:!1}));function Jr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Jr=function(){return a},a}Jr();var h6;let aG=(h6=class extends nr.Component{constructor(e){Jr().f[0]++,Jr().s[1]++,super(e),Jr().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Jr().f[1]++;const r=(Jr().s[3]++,[]),i=(Jr().s[4]++,t.initialPropsValue.slice(0));return Jr().s[5]++,Array(e.length).fill(null).map((s,a)=>{Jr().f[2]++,Jr().s[6]++,e.value[a]===t.initialPropsValue[a]?(Jr().b[0][0]++,Jr().s[7]++,r[a]=t.value[a]):(Jr().b[0][1]++,Jr().s[8]++,r[a]=t.value[a],Jr().s[9]++,i[a]=t.value[a])}),Jr().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return Jr().f[3]++,Jr().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{Jr().f[4]++;const i=(Jr().s[12]++,e[r]);return Jr().s[13]++,Jr().b[1][0]++,!(i===void 0||(Jr().b[1][1]++,i===""))})}changeValue(e,t){Jr().f[5]++;const r=(Jr().s[14]++,this.state.value.slice(0));Jr().s[15]++,r[e]=t,Jr().s[16]++,this.setState({value:r},()=>{Jr().f[6]++,Jr().s[17]++,Jr().b[3][0]++,this.isComplete(r)&&(Jr().b[3][1]++,this.props.onChange)?(Jr().b[2][0]++,Jr().s[18]++,this.props.onChange(r)):(Jr().b[2][1]++,Jr().s[19]++,this.props.onChange?(Jr().b[4][0]++,Jr().s[20]++,this.props.onChange(void 0)):Jr().b[4][1]++)})}render(){Jr().f[7]++;const{value:e}=(Jr().s[21]++,this.state),t=(Jr().s[22]++,Jr().b[5][0]++,e.length>0&&(Jr().b[5][1]++,!e.every(i=>(Jr().f[8]++,Jr().s[23]++,Jr().b[6][0]++,i===""||(Jr().b[6][1]++,i===void 0))))),r=(Jr().s[24]++,Array(this.props.length).fill(null).map((i,s)=>(Jr().f[9]++,Jr().s[25]++,this.props.type==="number"?(Jr().b[7][0]++,Jr().s[26]++,le.jsx(cm,{default:(Jr().b[9][0]++,t||(Jr().b[9][1]++,!this.props.default)?(Jr().b[8][0]++,void 0):(Jr().b[8][1]++,this.props.default[s])),value:e[s],required:t?(Jr().b[10][0]++,!0):(Jr().b[10][1]++,!1),onChange:a=>(Jr().f[10]++,Jr().s[27]++,this.changeValue(s,a)),"aria-label":(Jr().b[11][0]++,this.props["aria-label"]||(Jr().b[11][1]++,this.props.label))},s)):(Jr().b[7][1]++,Jr().s[28]++,le.jsx(Ff,{default:(Jr().b[13][0]++,t||(Jr().b[13][1]++,!this.props.default)?(Jr().b[12][0]++,void 0):(Jr().b[12][1]++,this.props.default[s])),value:e[s],required:t?(Jr().b[14][0]++,!0):(Jr().b[14][1]++,!1),onChange:this.changeValue.bind(this,s),"aria-label":(Jr().b[15][0]++,this.props["aria-label"]||(Jr().b[15][1]++,this.props.label))},s)))));return Jr().s[29]++,le.jsx("div",{className:"maputnik-array",children:r})}},Tn(h6,"defaultProps",(Jr().s[0]++,{value:[],default:[]})),h6);function iA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="c4660c9ecb80d9f1ce71e70441154e1e765b77ab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAErG;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4660c9ecb80d9f1ce71e70441154e1e765b77ab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return iA=function(){return a},a}iA();class Gde extends nr.Component{render(){iA().f[0]++;let e=(iA().s[0]++,this.props.options);iA().s[1]++,iA().b[1][0]++,e.length>0&&(iA().b[1][1]++,!Array.isArray(e[0]))?(iA().b[0][0]++,iA().s[2]++,e=e.map(i=>(iA().f[1]++,iA().s[3]++,[i,i]))):iA().b[0][1]++;const t=(iA().s[4]++,iA().b[2][0]++,this.props.value||(iA().b[2][1]++,e[0][0])),r=(iA().s[5]++,e.map(([i,s])=>(iA().f[2]++,iA().s[6]++,le.jsxs("label",{className:um("maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[le.jsx("input",{type:"radio",name:this.props.name,onChange:a=>(iA().f[3]++,iA().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),s]},i))));return iA().s[8]++,le.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Ul(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ul=function(){return a},a}Ul();function Qde(n){Ul().f[0]++;let e=(Ul().s[0]++,0);return Ul().s[1]++,n.forEach(([t,r])=>{Ul().f[1]++,Ul().s[2]++,e+=r.length}),Ul().s[3]++,e}class pI extends nr.Component{render(){Ul().f[2]++;const{options:e,value:t,onChange:r,name:i,label:s}=(Ul().s[4]++,this.props);return Ul().s[5]++,Ul().b[1][0]++,e.length<=3&&(Ul().b[1][1]++,Qde(e)<=20)?(Ul().b[0][0]++,Ul().s[6]++,le.jsx(Gde,{name:i,options:e,value:(Ul().b[2][0]++,t||(Ul().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Ul().b[3][0]++,this.props["aria-label"]||(Ul().b[3][1]++,s))})):(Ul().b[0][1]++,Ul().s[7]++,le.jsx(Zg,{options:e,value:(Ul().b[4][0]++,t||(Ul().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Ul().b[5][0]++,this.props["aria-label"]||(Ul().b[5][1]++,s))}))}}function by(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return by=function(){return a},a}by();class qde extends nr.Component{render(){by().f[0]++;const e=(by().s[0]++,this.props.t);return by().s[1]++,le.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const mE=(by().s[2]++,Vs()(qde));function ro(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="b8761d76778c2aebcb896575c951cf64cf76ecb7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b8761d76778c2aebcb896575c951cf64cf76ecb7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ro=function(){return a},a}ro();function gE(n,e){if(ro().f[0]++,ro().s[0]++,n===""){ro().b[0][0]++,ro().s[1]++;return}else ro().b[0][1]++;let t;ro().s[2]++;const r=a=>{ro().f[1]++,ro().s[3]++;try{const o=(ro().s[4]++,new URL(a));return ro().s[5]++,o.protocol}catch{ro().s[6]++;return}},i=(ro().s[7]++,r(n)),s=(ro().s[8]++,window.location.protocol==="https:");return ro().s[9]++,i?(ro().b[1][1]++,ro().s[13]++,ro().b[4][0]++,i&&(ro().b[4][1]++,i==="http:")&&(ro().b[4][2]++,window.location.protocol==="https:")?(ro().b[3][0]++,ro().s[14]++,t=le.jsx(mE,{children:le.jsxs(R0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",le.jsx("code",{children:"https://"})," domain"]})})):ro().b[3][1]++):(ro().b[1][0]++,ro().s[10]++,s?(ro().b[2][0]++,ro().s[11]++,t=le.jsx(mE,{children:le.jsxs(R0,{t:e,children:["Must provide protocol: ",le.jsx("code",{children:"https://"})]})})):(ro().b[2][1]++,ro().s[12]++,t=le.jsx(mE,{children:le.jsxs(R0,{t:e,children:["Must provide protocol: ",le.jsx("code",{children:"http://"})," or ",le.jsx("code",{children:"https://"})]})}))),ro().s[15]++,t}class lG extends nr.Component{constructor(t){ro().f[3]++,ro().s[17]++;super(t);Tn(this,"onInput",(ro().s[19]++,t=>{ro().f[4]++,ro().s[20]++,this.setState({error:gE(t,this.props.t)}),ro().s[21]++,this.props.onInput?(ro().b[5][0]++,ro().s[22]++,this.props.onInput(t)):ro().b[5][1]++}));Tn(this,"onChange",(ro().s[23]++,t=>{ro().f[5]++,ro().s[24]++,this.setState({error:gE(t,this.props.t)}),ro().s[25]++,this.props.onChange(t)}));ro().s[18]++,this.state={error:gE(t.value,t.t)}}render(){return ro().f[6]++,ro().s[26]++,le.jsxs("div",{children:[le.jsx(Ff,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}Tn(lG,"defaultProps",(ro().s[16]++,{onInput:()=>{ro().f[2]++}}));const mI=(ro().s[27]++,Vs()(lG));function Nr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Nr=function(){return a},a}Nr();class Yde extends nr.Component{constructor(){super(...arguments);Tn(this,"addValue",(Nr().s[5]++,()=>{Nr().f[2]++;const t=(Nr().s[6]++,this.values.slice(0));if(Nr().s[7]++,this.props.type==="number")Nr().b[2][0]++,Nr().s[8]++,t.push(0);else if(Nr().b[2][1]++,Nr().s[9]++,this.props.type==="url")Nr().b[3][0]++,Nr().s[10]++,t.push("");else if(Nr().b[3][1]++,Nr().s[11]++,this.props.type==="enum"){Nr().b[4][0]++;const{fieldSpec:r}=(Nr().s[12]++,this.props),i=(Nr().s[13]++,Object.keys(r.values)[0]);Nr().s[14]++,t.push(i)}else Nr().b[4][1]++,Nr().s[15]++,t.push("");Nr().s[16]++,this.props.onChange?(Nr().b[5][0]++,Nr().s[17]++,this.props.onChange(t)):Nr().b[5][1]++}))}changeValue(t,r){Nr().f[0]++;const i=(Nr().s[0]++,this.values.slice(0));Nr().s[1]++,i[t]=r,Nr().s[2]++,this.props.onChange?(Nr().b[0][0]++,Nr().s[3]++,this.props.onChange(i)):Nr().b[0][1]++}get values(){return Nr().f[1]++,Nr().s[4]++,Nr().b[1][0]++,this.props.value||(Nr().b[1][1]++,this.props.default)||(Nr().b[1][2]++,[])}deleteValue(t){Nr().f[3]++;const r=(Nr().s[18]++,this.values.slice(0));Nr().s[19]++,r.splice(t,1),Nr().s[20]++,this.props.onChange?(Nr().b[6][0]++,Nr().s[21]++,this.props.onChange(r.length>0?(Nr().b[7][0]++,r):(Nr().b[7][1]++,void 0))):Nr().b[6][1]++}render(){Nr().f[4]++;const t=(Nr().s[22]++,this.props.t),r=(Nr().s[23]++,{t,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Nr().s[24]++,this.values.map((s,a)=>{var g;Nr().f[5]++;const o=(Nr().s[25]++,le.jsx($de,{onClick:this.deleteValue.bind(this,a),...r}));let d;if(Nr().s[26]++,this.props.type==="url")Nr().b[8][0]++,Nr().s[27]++,d=le.jsx(mI,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Nr().b[9][0]++,this.props["aria-label"]||(Nr().b[9][1]++,this.props.label))});else if(Nr().b[8][1]++,Nr().s[28]++,this.props.type==="number")Nr().b[10][0]++,Nr().s[29]++,d=le.jsx(cm,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Nr().b[11][0]++,this.props["aria-label"]||(Nr().b[11][1]++,this.props.label))});else if(Nr().b[10][1]++,Nr().s[30]++,this.props.type==="enum"){Nr().b[12][0]++;const b=(Nr().s[31]++,Object.keys((g=this.props.fieldSpec)==null?void 0:g.values).map(E=>(Nr().f[6]++,Nr().s[32]++,[E,HO(E)])));Nr().s[33]++,d=le.jsx(pI,{options:b,value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Nr().b[13][0]++,this.props["aria-label"]||(Nr().b[13][1]++,this.props.label))})}else Nr().b[12][1]++,Nr().s[34]++,d=le.jsx(Ff,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Nr().b[14][0]++,this.props["aria-label"]||(Nr().b[14][1]++,this.props.label))});return Nr().s[35]++,le.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[le.jsx("div",{className:"maputnik-array-block-action",children:o}),le.jsx("div",{className:"maputnik-array-block-content",children:d})]},a)}));return Nr().s[36]++,le.jsxs("div",{className:"maputnik-array",children:[i,le.jsx(Za,{className:"maputnik-array-add-value",onClick:this.addValue,children:t("Add value")})]})}}const uG=(Nr().s[37]++,Vs()(Yde));class $de extends nr.Component{render(){Nr().f[7]++;const e=(Nr().s[38]++,this.props.t);return Nr().s[39]++,le.jsx(Za,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:le.jsx(WO,{label:le.jsx(Gy,{})})})}}function ga(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ga=function(){return a},a}ga();class AG extends nr.Component{get values(){ga().f[0]++;const e=(ga().s[1]++,ga().b[0][0]++,this.props.value||(ga().b[0][1]++,this.props.default)||(ga().b[0][2]++,[]));return ga().s[2]++,e[e.length-1]!==""?(ga().b[1][0]++,ga().s[3]++,e.concat("")):(ga().b[1][1]++,ga().s[4]++,e)}changeFont(e,t){ga().f[1]++;const r=(ga().s[5]++,this.values.slice(0));ga().s[6]++,r[e]=t;const i=(ga().s[7]++,r.filter(s=>(ga().f[2]++,ga().s[8]++,s!==void 0)).filter(s=>(ga().f[3]++,ga().s[9]++,s!=="")));ga().s[10]++,this.props.onChange(i)}render(){ga().f[4]++;const e=(ga().s[11]++,this.values.map((t,r)=>{var i;return ga().f[5]++,ga().s[12]++,le.jsx("li",{children:le.jsx(Jy,{"aria-label":(ga().b[2][0]++,this.props["aria-label"]||(ga().b[2][1]++,this.props.name)),value:t,options:(i=this.props.fonts)==null?void 0:i.map(s=>(ga().f[6]++,ga().s[13]++,[s,s])),onChange:this.changeFont.bind(this,r)})},r)}));return ga().s[14]++,le.jsx("ul",{className:"maputnik-font",children:e})}}Tn(AG,"defaultProps",(ga().s[0]++,{fonts:[]}));function Ao(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ao=function(){return a},a}Ao();const Vde=(Ao().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let xy=class extends nr.Component{childNodes(){var t,r;Ao().f[0]++;const e=(Ao().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:(t=this.props.fieldSpec)==null?void 0:t.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:i=>(Ao().f[1]++,Ao().s[2]++,this.props.onChange(this.props.fieldName,i)),"aria-label":this.props["aria-label"]});switch(Ao().s[3]++,(r=this.props.fieldSpec)==null?void 0:r.type){case"number":return Ao().b[0][0]++,Ao().s[4]++,le.jsx(cm,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Ao().b[0][1]++;{const i=(Ao().s[5]++,Object.keys((Ao().b[1][0]++,this.props.fieldSpec.values||(Ao().b[1][1]++,[]))).map(s=>(Ao().f[2]++,Ao().s[6]++,[s,HO(s)])));return Ao().s[7]++,le.jsx(pI,{...e,options:i})}case"resolvedImage":Ao().b[0][2]++;case"formatted":Ao().b[0][3]++;case"string":if(Ao().b[0][4]++,Ao().s[8]++,Vde.indexOf(this.props.fieldName)>=0){Ao().b[2][0]++;const i=(Ao().s[9]++,Ao().b[3][0]++,this.props.fieldSpec.values||(Ao().b[3][1]++,[]));return Ao().s[10]++,le.jsx(Jy,{...e,options:i.map(s=>(Ao().f[3]++,Ao().s[11]++,[s,s]))})}else return Ao().b[2][1]++,Ao().s[12]++,le.jsx(Ff,{...e});case"color":return Ao().b[0][5]++,Ao().s[13]++,le.jsx(sG,{...e});case"boolean":return Ao().b[0][6]++,Ao().s[14]++,le.jsx(fI,{...e});case"array":return Ao().b[0][7]++,Ao().s[15]++,this.props.fieldName==="text-font"?(Ao().b[4][0]++,Ao().s[16]++,le.jsx(AG,{...e,fonts:this.props.fieldSpec.values})):(Ao().b[4][1]++,Ao().s[17]++,this.props.fieldSpec.length?(Ao().b[5][0]++,Ao().s[18]++,le.jsx(aG,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Ao().b[5][1]++,Ao().s[19]++,le.jsx(uG,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return Ao().b[0][8]++,Ao().s[20]++,null}}render(){return Ao().f[4]++,Ao().s[21]++,le.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function NA(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="81a841bc0059d656029a86501c08aa823d58e2d6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:9,column:4},end:{line:9,column:17}},1:{start:{line:10,column:4},end:{line:10,column:56}},2:{start:{line:11,column:4},end:{line:13,column:6}},3:{start:{line:15,column:16},end:{line:19,column:3}},4:{start:{line:16,column:4},end:{line:18,column:7}},5:{start:{line:21,column:4},end:{line:41,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:14,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:15,column:16},end:{line:15,column:17}},loc:{start:{line:15,column:25},end:{line:19,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:42,column:3}},line:20}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:29,column:10}},type:"binary-expr",locations:[{start:{line:22,column:6},end:{line:22,column:26}},{start:{line:22,column:46},end:{line:29,column:10}}],line:22},1:{loc:{start:{line:30,column:6},end:{line:30,column:130}},type:"binary-expr",locations:[{start:{line:30,column:6},end:{line:30,column:27}},{start:{line:30,column:47},end:{line:30,column:130}}],line:30},2:{loc:{start:{line:33,column:6},end:{line:40,column:7}},type:"binary-expr",locations:[{start:{line:33,column:6},end:{line:33,column:26}},{start:{line:33,column:46},end:{line:40,column:7}}],line:33},3:{loc:{start:{line:37,column:28},end:{line:37,column:60}},type:"cond-expr",locations:[{start:{line:37,column:49},end:{line:37,column:51}},{start:{line:37,column:54},end:{line:37,column:60}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAiCW,SAGD,KAHC;AAjCX,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAY7B,qBAAqB,iBAAiB,MAAM,UAAwC;AAAA,EAClF;AAAA,EAEA,YAAa,OAAsB;AACjC,UAAM,KAAK;AACX,SAAK,WAAW,iBAAiB,iBAAiB;AAClD,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,SAAU;AACR,WAAO,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,KAAK,UAC7E;AAAA,WAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,WAAW,KAAK,MAAM;AAAA;AAAA,MACxB,GACF;AAAA,MAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,MAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,MACA,oBAAC,SAAI,WAAU,gCACZ,eAAK,MAAM,UACd;AAAA,MACC,KAAK,MAAM,aACV;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,UAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,MACxC;AAAA,OAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81a841bc0059d656029a86501c08aa823d58e2d6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return NA=function(){return a},a}NA();class jC extends nr.Component{constructor(t){NA().f[0]++,NA().s[0]++;super(t);Tn(this,"_labelId");Tn(this,"onToggleDoc",(NA().s[3]++,t=>{NA().f[1]++,NA().s[4]++,this.setState({showDoc:t})}));NA().s[1]++,this._labelId=Ly("fieldset_label_"),NA().s[2]++,this.state={showDoc:!1}}render(){return NA().f[2]++,NA().s[5]++,le.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":this._labelId,children:[(NA().b[0][0]++,this.props.fieldSpec&&(NA().b[0][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:le.jsx(WO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(NA().b[1][0]++,!this.props.fieldSpec&&(NA().b[1][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),le.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),le.jsx("div",{className:"maputnik-input-block-content",children:this.props.children}),(NA().b[2][0]++,this.props.fieldSpec&&(NA().b[2][1]++,le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(NA().b[3][0]++,""):(NA().b[3][1]++,"none")},children:le.jsx(GO,{fieldSpec:this.props.fieldSpec})})))]})}}function na(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="adadf49dc291f98804cd53f74e320ed51f276886",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:6,column:16},end:{line:16,column:1}},1:{start:{line:7,column:15},end:{line:7,column:20}},2:{start:{line:8,column:27},end:{line:8,column:87}},3:{start:{line:9,column:17},end:{line:9,column:22}},4:{start:{line:10,column:15},end:{line:10,column:23}},5:{start:{line:11,column:23},end:{line:11,column:28}},6:{start:{line:12,column:16},end:{line:12,column:21}},7:{start:{line:13,column:16},end:{line:13,column:21}},8:{start:{line:14,column:19},end:{line:14,column:24}},9:{start:{line:15,column:17},end:{line:15,column:22}},10:{start:{line:19,column:22},end:{line:19,column:48}},11:{start:{line:20,column:24},end:{line:20,column:42}},12:{start:{line:22,column:4},end:{line:27,column:5}},13:{start:{line:23,column:6},end:{line:23,column:42}},14:{start:{line:25,column:6},end:{line:25,column:55}},15:{start:{line:26,column:6},end:{line:26,column:24}},16:{start:{line:28,column:4},end:{line:36,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:9},end:{line:7,column:10}},loc:{start:{line:7,column:15},end:{line:7,column:20}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:8,column:8},end:{line:8,column:9}},loc:{start:{line:8,column:27},end:{line:8,column:87}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:9,column:11},end:{line:9,column:12}},loc:{start:{line:9,column:17},end:{line:9,column:22}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:10,column:9},end:{line:10,column:10}},loc:{start:{line:10,column:15},end:{line:10,column:23}},line:10},4:{name:"(anonymous_4)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:23},end:{line:11,column:28}},line:11},5:{name:"(anonymous_5)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},6:{name:"(anonymous_6)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:16},end:{line:13,column:21}},line:13},7:{name:"(anonymous_7)",decl:{start:{line:14,column:13},end:{line:14,column:14}},loc:{start:{line:14,column:19},end:{line:14,column:24}},line:14},8:{name:"(anonymous_8)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:17},end:{line:15,column:22}},line:15},9:{name:"(anonymous_9)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:37,column:3}},line:18}},branchMap:{0:{loc:{start:{line:8,column:27},end:{line:8,column:87}},type:"cond-expr",locations:[{start:{line:8,column:71},end:{line:8,column:79}},{start:{line:8,column:82},end:{line:8,column:87}}],line:8},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:24,column:11},end:{line:27,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AA0CM;AA1CN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,KAAK,MAAM,WAAW;AAExC,UAAM,cAAc,QAAQ,SAAU;AAEtC,QAAI;AACJ,QAAI,aAAa;AACf,kBAAY,YAAY,KAAK,KAAK;AAAA,IACpC,OACK;AACH,cAAQ,KAAK,yBAAyB,SAAS;AAC/C,kBAAY;AAAA,IACd;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM;AAAA,QAClB,QAAQ,KAAK,MAAM;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QAEtB,8BAAC,aAAW,GAAG,KAAK,OAAO;AAAA;AAAA,IAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"adadf49dc291f98804cd53f74e320ed51f276886"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return na=function(){return a},a}na();const Hde=(na().s[0]++,{color:()=>(na().f[0]++,na().s[1]++,ya),enum:({fieldSpec:n})=>(na().f[1]++,na().s[2]++,Object.keys(n.values).length<=3?(na().b[0][0]++,jC):(na().b[0][1]++,ya)),boolean:()=>(na().f[2]++,na().s[3]++,ya),array:()=>(na().f[3]++,na().s[4]++,jC),resolvedImage:()=>(na().f[4]++,na().s[5]++,ya),number:()=>(na().f[5]++,na().s[6]++,ya),string:()=>(na().f[6]++,na().s[7]++,ya),formatted:()=>(na().f[7]++,na().s[8]++,ya),padding:()=>(na().f[8]++,na().s[9]++,ya)});class Zde extends nr.Component{render(){var i;na().f[9]++;const e=(na().s[10]++,(i=this.props.fieldSpec)==null?void 0:i.type),t=(na().s[11]++,Hde[e]);let r;return na().s[12]++,t?(na().b[1][0]++,na().s[13]++,r=t(this.props)):(na().b[1][1]++,na().s[14]++,console.warn("No such type for '%s'",e),na().s[15]++,r=ya),na().s[16]++,le.jsx(r,{label:this.props.label,action:this.props.action,fieldSpec:this.props.fieldSpec,children:le.jsx(xy,{...this.props})})}}function ud(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="e12cc9e5c91261e7ee42544334f5ab56bdde4e3a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,WAAW,WAAW,SAAS,MAAM,GAAG;AAC/D,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e12cc9e5c91261e7ee42544334f5ab56bdde4e3a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ud=function(){return a},a}ud();class Xde extends nr.Component{render(){ud().f[0]++;const e=(ud().s[0]++,this.props.t);let t,r,i;return ud().s[1]++,this.props.fieldSpec.expression.parameters.includes("zoom")?(ud().b[0][0]++,ud().s[2]++,i=le.jsx(Za,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:zC})})}),ud().s[3]++,t=le.jsx(Za,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:le.jsx(WZ,{})}),ud().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(ud().b[1][0]++,ud().s[5]++,r=le.jsx(Za,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:le.jsx(GZ,{})})):ud().b[1][1]++,ud().s[6]++,le.jsxs("div",{children:[i,r,t]})):(ud().b[0][1]++,ud().s[7]++,le.jsx("div",{children:i}))}}const Jde=(ud().s[8]++,Vs()(Xde));function Yp(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Yp=function(){return a},a}Yp();class cG extends nr.Component{render(){Yp().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(Yp().s[1]++,this.props),i=(Yp().s[2]++,le.jsx(Jde,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),s=(Yp().s[3]++,e[r+"."+t]);return Yp().s[4]++,le.jsx(Zde,{...this.props,error:s,fieldSpec:this.props.fieldSpec,label:d3((Yp().b[0][0]++,this.props.fieldName||(Yp().b[0][1]++,""))),action:i})}}Tn(cG,"defaultProps",(Yp().s[0]++,{errors:{}}));function yh(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return yh=function(){return a},a}yh();function dG(n,e){yh().f[0]++;const t=(yh().s[0]++,+n),r=(yh().s[1]++,+e);return yh().s[2]++,t<r?(yh().b[0][0]++,yh().s[3]++,-1):(yh().b[0][1]++,yh().s[4]++,t>r?(yh().b[1][0]++,yh().s[5]++,1):(yh().b[1][1]++,yh().s[6]++,0))}function lp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return lp=function(){return a},a}lp();function Sf(n){if(lp().f[0]++,lp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return lp().b[0][0]++,lp().s[1]++,n.default;lp().b[0][1]++;const e=(lp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return lp().s[3]++,lp().b[1][0]++,e[n.type]||(lp().b[1][1]++,"")}function wy(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return wy=function(){return a},a}wy();class ehe extends nr.Component{render(){wy().f[0]++;const e=(wy().s[0]++,this.props.t);return wy().s[1]++,le.jsx(Za,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:le.jsx(Gy,{})})}}const hG=(wy().s[2]++,Vs()(ehe));function fn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fn=function(){return a},a}fn();function zK(n,e){fn().f[0]++;let t;return fn().s[0]++,fn().b[1][0]++,n.value&&(fn().b[1][1]++,n.value.stops)?(fn().b[0][0]++,fn().s[1]++,n.value.stops.forEach((r,i)=>{fn().f[1]++,fn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?fn().b[2][1]++:(fn().b[2][0]++,fn().s[3]++,t?fn().b[3][1]++:(fn().b[3][0]++,fn().s[4]++,t={...e}),fn().s[5]++,t[i]=Ly("stop-"))})):fn().b[0][1]++,fn().s[6]++,t}class the extends nr.Component{constructor(){super(...arguments);Tn(this,"state",(fn().s[7]++,{refs:{}}));Tn(this,"onChange",(fn().s[32]++,(t,r)=>{if(fn().f[11]++,fn().s[33]++,r.type==="identity")fn().b[9][0]++,fn().s[34]++,r={type:r.type,property:r.property};else{fn().b[9][1]++;const i=(fn().s[35]++,r.type==="categorical"?(fn().b[10][0]++,""):(fn().b[10][1]++,0));fn().s[36]++,r={property:"",type:r.type,stops:[[{zoom:6,value:i},Sf(this.props.fieldSpec)],[{zoom:10,value:i},Sf(this.props.fieldSpec)]],...r}}fn().s[37]++,this.props.onChange(t,r)}))}componentDidMount(){fn().f[2]++;const t=(fn().s[8]++,zK(this.props,this.state));fn().s[9]++,t?(fn().b[4][0]++,fn().s[10]++,this.setState({refs:t})):fn().b[4][1]++}static getDerivedStateFromProps(t,r){fn().f[3]++;const i=(fn().s[11]++,zK(t,r));return fn().s[12]++,i?(fn().b[5][0]++,fn().s[13]++,{refs:i}):(fn().b[5][1]++,fn().s[14]++,null)}getFieldFunctionType(t){return fn().f[4]++,fn().s[15]++,t.expression.interpolated?(fn().b[6][0]++,fn().s[16]++,"exponential"):(fn().b[6][1]++,fn().s[17]++,t.type==="number"?(fn().b[7][0]++,fn().s[18]++,"interval"):(fn().b[7][1]++,fn().s[19]++,"categorical"))}getDataFunctionTypes(t){return fn().f[5]++,fn().s[20]++,t.expression.interpolated?(fn().b[8][0]++,fn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(fn().b[8][1]++,fn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(t){fn().f[6]++;const r=(fn().s[23]++,t.map((s,a)=>(fn().f[7]++,fn().s[24]++,{ref:this.state.refs[a],data:s})).sort((s,a)=>(fn().f[8]++,fn().s[25]++,dG(s.data[0].zoom,a.data[0].zoom)))),i=(fn().s[26]++,{});return fn().s[27]++,r.forEach((s,a)=>{fn().f[9]++,fn().s[28]++,i[a]=s.ref}),fn().s[29]++,this.setState({refs:i}),fn().s[30]++,r.map(s=>(fn().f[10]++,fn().s[31]++,s.data))}changeStop(t,r,i){var d;fn().f[12]++;const s=(fn().s[38]++,fn().b[11][0]++,((d=this.props.value)==null?void 0:d.stops.slice(0))||(fn().b[11][1]++,[]));fn().s[39]++,s[t]=[{value:r.value,zoom:r.zoom===void 0?(fn().b[12][0]++,0):(fn().b[12][1]++,r.zoom)},i];const a=(fn().s[40]++,this.orderStopsByZoom(s)),o=(fn().s[41]++,{...this.props.value,stops:a});fn().s[42]++,this.onChange(this.props.fieldName,o)}changeBase(t){fn().f[13]++;const r=(fn().s[43]++,{...this.props.value,base:t});fn().s[44]++,r.base===void 0?(fn().b[13][0]++,fn().s[45]++,delete r.base):fn().b[13][1]++,fn().s[46]++,this.props.onChange(this.props.fieldName,r)}changeDataType(t){fn().f[14]++,fn().s[47]++,fn().b[15][0]++,t==="interpolate"&&(fn().b[15][1]++,this.props.onChangeToZoomFunction)?(fn().b[14][0]++,fn().s[48]++,this.props.onChangeToZoomFunction()):(fn().b[14][1]++,fn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:t}))}changeDataProperty(t,r){fn().f[15]++,fn().s[50]++,r?(fn().b[16][0]++,fn().s[51]++,this.props.value[t]=r):(fn().b[16][1]++,fn().s[52]++,delete this.props.value[t]),fn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){var i,s,a,o,d,g,b,E;fn().f[16]++;const t=(fn().s[54]++,this.props.t);fn().s[55]++,typeof((i=this.props.value)==null?void 0:i.type)>"u"?(fn().b[17][0]++,fn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):fn().b[17][1]++;let r;return fn().s[57]++,(s=this.props.value)!=null&&s.stops?(fn().b[18][0]++,fn().s[58]++,r=this.props.value.stops.map((S,B)=>{var te,W;fn().f[17]++;const k=(fn().s[59]++,typeof S[0]=="object"?(fn().b[19][0]++,S[0].zoom):(fn().b[19][1]++,void 0)),z=(fn().s[60]++,this.state.refs[B]),j=(fn().s[61]++,typeof S[0]=="object"?(fn().b[20][0]++,S[0].value):(fn().b[20][1]++,S[0])),Y=(fn().s[62]++,S[1]),q=(fn().s[63]++,le.jsx(hG,{onClick:(te=this.props.onDeleteStop)==null?void 0:te.bind(this,B)})),ie=(fn().s[64]++,{"aria-label":t("Input value"),label:t("Data value"),value:j,onChange:oe=>(fn().f[18]++,fn().s[65]++,this.changeStop(B,{zoom:k,value:oe},Y))});let J;fn().s[66]++,((W=this.props.value)==null?void 0:W.type)==="categorical"?(fn().b[21][0]++,fn().s[67]++,J=le.jsx(Ff,{...ie})):(fn().b[21][1]++,fn().s[68]++,J=le.jsx(cm,{...ie}));let $=(fn().s[69]++,null);return fn().s[70]++,k!==void 0?(fn().b[22][0]++,fn().s[71]++,$=le.jsx("div",{children:le.jsx(cm,{"aria-label":"Zoom",value:k,onChange:oe=>(fn().f[19]++,fn().s[72]++,this.changeStop(B,{zoom:oe,value:j},Y)),min:0,max:22})})):fn().b[22][1]++,fn().s[73]++,le.jsxs("tr",{children:[le.jsx("td",{children:$}),le.jsx("td",{children:J}),le.jsx("td",{children:le.jsx(xy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:Y,onChange:(oe,fe)=>(fn().f[20]++,fn().s[74]++,this.changeStop(B,{zoom:k,value:j},fe))})}),le.jsx("td",{children:q})]},z)})):fn().b[18][1]++,fn().s[75]++,le.jsx("div",{className:"maputnik-data-spec-block",children:le.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[le.jsx("legend",{children:d3(this.props.fieldName)}),le.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[le.jsx(ya,{label:t("Function"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(Zg,{value:this.props.value.type,onChange:S=>(fn().f[21]++,fn().s[76]++,this.changeDataType(S)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(fn().b[23][0]++,((a=this.props.value)==null?void 0:a.type)!=="identity"&&(fn().b[23][1]++,le.jsx(ya,{label:t("Base"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(xy,{fieldName:"base",fieldSpec:ns.function.base,value:(o=this.props.value)==null?void 0:o.base,onChange:(S,B)=>(fn().f[22]++,fn().s[77]++,this.changeBase(B))})})},"base"))),le.jsx(ya,{label:"Property",children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(Ff,{value:(d=this.props.value)==null?void 0:d.property,title:t("Input a data property to base styles off of."),onChange:S=>(fn().f[23]++,fn().s[78]++,this.changeDataProperty("property",S))})})},"property"),(fn().b[24][0]++,r&&(fn().b[24][1]++,le.jsx(ya,{label:t("Default"),children:le.jsx(xy,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:(g=this.props.value)==null?void 0:g.default,onChange:(S,B)=>(fn().f[24]++,fn().s[79]++,this.changeDataProperty("default",B))})},"default"))),(fn().b[25][0]++,r&&(fn().b[25][1]++,le.jsx("div",{className:"maputnik-function-stop",children:le.jsxs("table",{className:"maputnik-function-stop-table",children:[le.jsx("caption",{children:t("Stops")}),le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:t("Zoom")}),le.jsx("th",{children:t("Input value")}),le.jsx("th",{rowSpan:2,children:t("Output value")})]})}),le.jsx("tbody",{children:r})]})}))),le.jsxs("div",{className:"maputnik-toolbox",children:[(fn().b[26][0]++,r&&(fn().b[26][1]++,le.jsxs(Za,{className:"maputnik-add-stop",onClick:(b=this.props.onAddStop)==null?void 0:b.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:$O})})," ",t("Add stop")]}))),le.jsxs(Za,{className:"maputnik-add-stop",onClick:(E=this.props.onExpressionClick)==null?void 0:E.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:zC})})," ",t("Convert to expression")]})]})]})]})})}}const nhe=(fn().s[80]++,Vs()(the));function Sr(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Sr=function(){return a},a}Sr();function jK(n,e){Sr().f[0]++;let t=(Sr().s[0]++,{});return Sr().s[1]++,Sr().b[1][0]++,n.value&&(Sr().b[1][1]++,n.value.stops)?(Sr().b[0][0]++,Sr().s[2]++,n.value.stops.forEach((r,i)=>{Sr().f[1]++,Sr().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(Sr().b[2][0]++,Sr().s[4]++,t?Sr().b[3][1]++:(Sr().b[3][0]++,Sr().s[5]++,t={...e}),Sr().s[6]++,t[i]=Ly("stop-")):(Sr().b[2][1]++,Sr().s[7]++,t[i]=e.refs[i])})):Sr().b[0][1]++,Sr().s[8]++,t}class fG extends nr.Component{constructor(){super(...arguments);Tn(this,"state",(Sr().s[10]++,{refs:{}}));Tn(this,"changeDataType",(Sr().s[36]++,t=>{Sr().f[11]++,Sr().s[37]++,Sr().b[8][0]++,t!=="interpolate"&&(Sr().b[8][1]++,this.props.onChangeToDataFunction)?(Sr().b[7][0]++,Sr().s[38]++,this.props.onChangeToDataFunction(t)):Sr().b[7][1]++}))}componentDidMount(){Sr().f[2]++;const t=(Sr().s[11]++,jK(this.props,this.state));Sr().s[12]++,t?(Sr().b[4][0]++,Sr().s[13]++,this.setState({refs:t})):Sr().b[4][1]++}static getDerivedStateFromProps(t,r){Sr().f[3]++;const i=(Sr().s[14]++,jK(t,r));return Sr().s[15]++,i?(Sr().b[5][0]++,Sr().s[16]++,{refs:i}):(Sr().b[5][1]++,Sr().s[17]++,null)}orderStopsByZoom(t){Sr().f[4]++;const r=(Sr().s[18]++,t.map((s,a)=>(Sr().f[5]++,Sr().s[19]++,{ref:this.state.refs[a],data:s})).sort((s,a)=>(Sr().f[6]++,Sr().s[20]++,dG(s.data[0],a.data[0])))),i=(Sr().s[21]++,{});return Sr().s[22]++,r.forEach((s,a)=>{Sr().f[7]++,Sr().s[23]++,i[a]=s.ref}),Sr().s[24]++,this.setState({refs:i}),Sr().s[25]++,r.map(s=>(Sr().f[8]++,Sr().s[26]++,s.data))}changeZoomStop(t,r,i){Sr().f[9]++;const s=(Sr().s[27]++,this.props.value.stops.slice(0));Sr().s[28]++,s[t]=[r,i];const a=(Sr().s[29]++,this.orderStopsByZoom(s)),o=(Sr().s[30]++,{...this.props.value,stops:a});Sr().s[31]++,this.props.onChange(this.props.fieldName,o)}changeBase(t){Sr().f[10]++;const r=(Sr().s[32]++,{...this.props.value,base:t});Sr().s[33]++,r.base===void 0?(Sr().b[6][0]++,Sr().s[34]++,delete r.base):Sr().b[6][1]++,Sr().s[35]++,this.props.onChange(this.props.fieldName,r)}render(){var i,s,a,o;Sr().f[12]++;const t=(Sr().s[39]++,this.props.t),r=(Sr().s[40]++,(i=this.props.value)==null?void 0:i.stops.map((d,g)=>{var B;Sr().f[13]++;const b=(Sr().s[41]++,d[0]),E=(Sr().s[42]++,d[1]),S=(Sr().s[43]++,le.jsx(hG,{onClick:(B=this.props.onDeleteStop)==null?void 0:B.bind(this,g)}));return Sr().s[44]++,le.jsxs("tr",{children:[le.jsx("td",{children:le.jsx(cm,{"aria-label":t("Zoom"),value:b,onChange:k=>(Sr().f[14]++,Sr().s[45]++,this.changeZoomStop(g,k,E)),min:0,max:22})}),le.jsx("td",{children:le.jsx(xy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:E,onChange:(k,z)=>(Sr().f[15]++,Sr().s[46]++,this.changeZoomStop(g,b,z))})}),le.jsx("td",{children:S})]},`${d[0]}-${d[1]}`)}));return Sr().s[47]++,le.jsx("div",{className:"maputnik-data-spec-block",children:le.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[le.jsx("legend",{children:d3(this.props.fieldName)}),le.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[le.jsx(ya,{label:t("Function"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(Zg,{value:"interpolate",onChange:d=>(Sr().f[16]++,Sr().s[48]++,this.changeDataType(d)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),le.jsx(ya,{label:t("Base"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(xy,{fieldName:"base",fieldSpec:ns.function.base,value:(s=this.props.value)==null?void 0:s.base,onChange:(d,g)=>(Sr().f[17]++,Sr().s[49]++,this.changeBase(g))})})}),le.jsx("div",{className:"maputnik-function-stop",children:le.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[le.jsx("caption",{children:t("Stops")}),le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:t("Zoom")}),le.jsx("th",{rowSpan:2,children:t("Output value")})]})}),le.jsx("tbody",{children:r})]})}),le.jsxs("div",{className:"maputnik-toolbox",children:[le.jsxs(Za,{className:"maputnik-add-stop",onClick:(a=this.props.onAddStop)==null?void 0:a.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:$O})})," ",t("Add stop")]}),le.jsxs(Za,{className:"maputnik-add-stop",onClick:(o=this.props.onExpressionClick)==null?void 0:o.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:zC})})," ",t("Convert to expression")]})]})]})]})})}getDataFunctionTypes(t){return Sr().f[18]++,Sr().s[50]++,t["property-type"]==="data-driven"?(Sr().b[9][0]++,Sr().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(Sr().b[9][1]++,Sr().s[52]++,["interpolate"])}}Tn(fG,"defaultProps",(Sr().s[9]++,{errors:{}}));const rhe=(Sr().s[53]++,Vs()(fG));function Ut(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:58,column:4},end:{line:58,column:17}},25:{start:{line:59,column:4},end:{line:62,column:6}},26:{start:{line:65,column:4},end:{line:72,column:5}},27:{start:{line:66,column:6},end:{line:66,column:16}},28:{start:{line:68,column:6},end:{line:71,column:8}},29:{start:{line:75,column:4},end:{line:77,column:5}},30:{start:{line:76,column:6},end:{line:76,column:27}},31:{start:{line:78,column:4},end:{line:80,column:5}},32:{start:{line:79,column:6},end:{line:79,column:24}},33:{start:{line:81,column:4},end:{line:81,column:25}},34:{start:{line:83,column:12},end:{line:99,column:3}},35:{start:{line:84,column:18},end:{line:84,column:49}},36:{start:{line:85,column:21},end:{line:85,column:44}},37:{start:{line:86,column:4},end:{line:93,column:5}},38:{start:{line:87,column:6},end:{line:90,column:9}},39:{start:{line:92,column:6},end:{line:92,column:49}},40:{start:{line:94,column:25},end:{line:97,column:5}},41:{start:{line:98,column:4},end:{line:98,column:60}},42:{start:{line:100,column:21},end:{line:106,column:3}},43:{start:{line:101,column:37},end:{line:101,column:47}},44:{start:{line:102,column:4},end:{line:102,column:54}},45:{start:{line:103,column:4},end:{line:105,column:7}},46:{start:{line:107,column:15},end:{line:118,column:3}},47:{start:{line:108,column:18},end:{line:108,column:49}},48:{start:{line:109,column:4},end:{line:109,column:29}},49:{start:{line:110,column:23},end:{line:113,column:5}},50:{start:{line:114,column:4},end:{line:116,column:5}},51:{start:{line:115,column:6},end:{line:115,column:33}},52:{start:{line:117,column:4},end:{line:117,column:60}},53:{start:{line:119,column:21},end:{line:148,column:3}},54:{start:{line:120,column:22},end:{line:120,column:32}},55:{start:{line:122,column:4},end:{line:146,column:5}},56:{start:{line:123,column:6},end:{line:138,column:7}},57:{start:{line:124,column:8},end:{line:129,column:10}},58:{start:{line:127,column:12},end:{line:127,column:88}},59:{start:{line:131,column:8},end:{line:137,column:10}},60:{start:{line:140,column:6},end:{line:145,column:8}},61:{start:{line:147,column:4},end:{line:147,column:56}},62:{start:{line:149,column:19},end:{line:165,column:3}},63:{start:{line:150,column:33},end:{line:150,column:43}},64:{start:{line:151,column:4},end:{line:164,column:5}},65:{start:{line:152,column:6},end:{line:155,column:9}},66:{start:{line:156,column:6},end:{line:158,column:9}},67:{start:{line:159,column:11},end:{line:164,column:5}},68:{start:{line:160,column:6},end:{line:160,column:47}},69:{start:{line:161,column:6},end:{line:163,column:9}},70:{start:{line:166,column:12},end:{line:169,column:3}},71:{start:{line:167,column:33},end:{line:167,column:43}},72:{start:{line:168,column:4},end:{line:168,column:140}},73:{start:{line:170,column:19},end:{line:181,column:3}},74:{start:{line:171,column:33},end:{line:171,column:43}},75:{start:{line:173,column:4},end:{line:179,column:5}},76:{start:{line:174,column:6},end:{line:174,column:67}},77:{start:{line:175,column:11},end:{line:179,column:5}},78:{start:{line:176,column:6},end:{line:176,column:43}},79:{start:{line:178,column:6},end:{line:178,column:70}},80:{start:{line:180,column:4},end:{line:180,column:58}},81:{start:{line:182,column:21},end:{line:220,column:3}},82:{start:{line:183,column:25},end:{line:183,column:72}},83:{start:{line:184,column:22},end:{line:184,column:61}},84:{start:{line:185,column:22},end:{line:185,column:32}},85:{start:{line:187,column:4},end:{line:218,column:5}},86:{start:{line:188,column:6},end:{line:207,column:7}},87:{start:{line:189,column:8},end:{line:196,column:10}},88:{start:{line:194,column:12},end:{line:194,column:111}},89:{start:{line:198,column:8},end:{line:206,column:10}},90:{start:{line:209,column:6},end:{line:217,column:8}},91:{start:{line:219,column:4},end:{line:219,column:56}},92:{start:{line:221,column:18},end:{line:223,column:3}},93:{start:{line:222,column:4},end:{line:222,column:39}},94:{start:{line:224,column:20},end:{line:226,column:3}},95:{start:{line:225,column:4},end:{line:225,column:40}},96:{start:{line:228,column:25},end:{line:228,column:35}},97:{start:{line:229,column:22},end:{line:229,column:132}},98:{start:{line:231,column:4},end:{line:295,column:5}},99:{start:{line:232,column:6},end:{line:247,column:8}},100:{start:{line:248,column:11},end:{line:295,column:5}},101:{start:{line:249,column:6},end:{line:263,column:8}},102:{start:{line:264,column:11},end:{line:295,column:5}},103:{start:{line:265,column:6},end:{line:279,column:8}},104:{start:{line:281,column:6},end:{line:294,column:8}},105:{start:{line:296,column:4},end:{line:296,column:148}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:21},end:{line:63,column:3}},line:57},12:{name:"(anonymous_12)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:48},end:{line:73,column:3}},line:64},13:{name:"(anonymous_13)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:34},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:12},end:{line:83,column:13}},loc:{start:{line:83,column:18},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:106,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:107,column:15},end:{line:107,column:16}},loc:{start:{line:107,column:28},end:{line:118,column:3}},line:107},17:{name:"(anonymous_17)",decl:{start:{line:119,column:21},end:{line:119,column:22}},loc:{start:{line:119,column:27},end:{line:148,column:3}},line:119},18:{name:"(anonymous_18)",decl:{start:{line:126,column:33},end:{line:126,column:34}},loc:{start:{line:126,column:43},end:{line:128,column:11}},line:126},19:{name:"(anonymous_19)",decl:{start:{line:149,column:19},end:{line:149,column:20}},loc:{start:{line:149,column:25},end:{line:165,column:3}},line:149},20:{name:"(anonymous_20)",decl:{start:{line:166,column:12},end:{line:166,column:13}},loc:{start:{line:166,column:18},end:{line:169,column:3}},line:166},21:{name:"(anonymous_21)",decl:{start:{line:170,column:19},end:{line:170,column:20}},loc:{start:{line:170,column:25},end:{line:181,column:3}},line:170},22:{name:"(anonymous_22)",decl:{start:{line:182,column:21},end:{line:182,column:22}},loc:{start:{line:182,column:27},end:{line:220,column:3}},line:182},23:{name:"(anonymous_23)",decl:{start:{line:193,column:33},end:{line:193,column:34}},loc:{start:{line:193,column:43},end:{line:195,column:11}},line:193},24:{name:"(anonymous_24)",decl:{start:{line:221,column:18},end:{line:221,column:19}},loc:{start:{line:221,column:24},end:{line:223,column:3}},line:221},25:{name:"(anonymous_25)",decl:{start:{line:224,column:20},end:{line:224,column:21}},loc:{start:{line:224,column:26},end:{line:226,column:3}},line:224},26:{name:"(anonymous_26)",decl:{start:{line:227,column:2},end:{line:227,column:3}},loc:{start:{line:227,column:11},end:{line:297,column:3}},line:227}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:65,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:72,column:5}},{start:{line:67,column:11},end:{line:72,column:5}}],line:65},17:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},18:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},19:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},20:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},21:{loc:{start:{line:122,column:4},end:{line:146,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:146,column:5}},{start:{line:139,column:11},end:{line:146,column:5}}],line:122},22:{loc:{start:{line:123,column:6},end:{line:138,column:7}},type:"if",locations:[{start:{line:123,column:6},end:{line:138,column:7}},{start:{line:130,column:13},end:{line:138,column:7}}],line:123},23:{loc:{start:{line:127,column:34},end:{line:127,column:86}},type:"binary-expr",locations:[{start:{line:127,column:34},end:{line:127,column:41}},{start:{line:127,column:45},end:{line:127,column:86}}],line:127},24:{loc:{start:{line:142,column:14},end:{line:142,column:64}},type:"binary-expr",locations:[{start:{line:142,column:14},end:{line:142,column:19}},{start:{line:142,column:23},end:{line:142,column:64}}],line:142},25:{loc:{start:{line:143,column:15},end:{line:143,column:65}},type:"binary-expr",locations:[{start:{line:143,column:15},end:{line:143,column:20}},{start:{line:143,column:24},end:{line:143,column:65}}],line:143},26:{loc:{start:{line:151,column:4},end:{line:164,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:164,column:5}},{start:{line:159,column:11},end:{line:164,column:5}}],line:151},27:{loc:{start:{line:159,column:11},end:{line:164,column:5}},type:"if",locations:[{start:{line:159,column:11},end:{line:164,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:159},28:{loc:{start:{line:168,column:11},end:{line:168,column:139}},type:"binary-expr",locations:[{start:{line:168,column:11},end:{line:168,column:33}},{start:{line:168,column:37},end:{line:168,column:63}},{start:{line:168,column:67},end:{line:168,column:85}},{start:{line:168,column:89},end:{line:168,column:109}},{start:{line:168,column:113},end:{line:168,column:139}}],line:168},29:{loc:{start:{line:173,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:179,column:5}},{start:{line:175,column:11},end:{line:179,column:5}}],line:173},30:{loc:{start:{line:173,column:8},end:{line:173,column:53}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:33}},{start:{line:173,column:37},end:{line:173,column:53}}],line:173},31:{loc:{start:{line:175,column:11},end:{line:179,column:5}},type:"if",locations:[{start:{line:175,column:11},end:{line:179,column:5}},{start:{line:177,column:11},end:{line:179,column:5}}],line:175},32:{loc:{start:{line:178,column:31},end:{line:178,column:68}},type:"binary-expr",locations:[{start:{line:178,column:31},end:{line:178,column:36}},{start:{line:178,column:40},end:{line:178,column:68}}],line:178},33:{loc:{start:{line:184,column:22},end:{line:184,column:61}},type:"cond-expr",locations:[{start:{line:184,column:55},end:{line:184,column:57}},{start:{line:184,column:60},end:{line:184,column:61}}],line:184},34:{loc:{start:{line:187,column:4},end:{line:218,column:5}},type:"if",locations:[{start:{line:187,column:4},end:{line:218,column:5}},{start:{line:208,column:11},end:{line:218,column:5}}],line:187},35:{loc:{start:{line:188,column:6},end:{line:207,column:7}},type:"if",locations:[{start:{line:188,column:6},end:{line:207,column:7}},{start:{line:197,column:13},end:{line:207,column:7}}],line:188},36:{loc:{start:{line:194,column:57},end:{line:194,column:109}},type:"binary-expr",locations:[{start:{line:194,column:57},end:{line:194,column:64}},{start:{line:194,column:68},end:{line:194,column:109}}],line:194},37:{loc:{start:{line:214,column:42},end:{line:214,column:103}},type:"binary-expr",locations:[{start:{line:214,column:42},end:{line:214,column:58}},{start:{line:214,column:62},end:{line:214,column:103}}],line:214},38:{loc:{start:{line:215,column:43},end:{line:215,column:104}},type:"binary-expr",locations:[{start:{line:215,column:43},end:{line:215,column:59}},{start:{line:215,column:63},end:{line:215,column:104}}],line:215},39:{loc:{start:{line:229,column:22},end:{line:229,column:132}},type:"cond-expr",locations:[{start:{line:229,column:74},end:{line:229,column:101}},{start:{line:229,column:104},end:{line:229,column:132}}],line:229},40:{loc:{start:{line:231,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:231,column:4},end:{line:295,column:5}},{start:{line:248,column:11},end:{line:295,column:5}}],line:231},41:{loc:{start:{line:248,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:248,column:11},end:{line:295,column:5}},{start:{line:264,column:11},end:{line:295,column:5}}],line:248},42:{loc:{start:{line:264,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:264,column:11},end:{line:295,column:5}},{start:{line:280,column:11},end:{line:295,column:5}}],line:264}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAkVQ;AAlVR,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAoBA,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MAClD,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAqC,OAA2B;AAE9F,QAAI,MAAM,WAAW;AACnB,aAAO,CAAC;AAAA,IACV,OACK;AACH,aAAO;AAAA,QACL,WAAW;AAAA,QACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAC,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAK;AAAA,QACrD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OACK;AACH,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,WAAW,UAAS,IAAI,KAAK;AACpC,SAAK,MAAM,SAAS,WAAW,UAAU,OAAO;AAChD,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,CAAC,YAAoB;AAChC,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAe;AAAA,MACjB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,QAAG,MAAM,WAAW,GAAG;AACrB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,QAAI;AACJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC5E,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YAC7C,CAAC,IAAI,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACtD,CAAC,IAAI,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAEhC,QAAI,gBAAgB,KAAK,GAAG;AAC1B,WAAK,MAAM,SAAS,WAAW;AAAA,QAC7B,QAAQ;AAAA,QACR,YAAY,MAAM,CAAC;AAAA,MACrB,CAAC;AACD,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH,WACS,oBAAoB,KAAK,GAAG;AACnC,WAAK,MAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AACvC,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,QAAI;AAEJ,QAAI,OAAO,UAAW,YAAY,WAAW,OAAO;AAClD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WACS,mBAAmB,KAAK,GAAG;AAClC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OACK;AACH,mBAAa,CAAC,WAAW,SAAS,KAAK,MAAM,UAAU,OAAO;AAAA,IAChE;AACA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,UAAU;AAAA,EACtD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,eAAe,KAAK,qBAAqB,KAAK,MAAM,SAAS;AACnE,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAC,MAAK,IAAI,KAAK;AACrB,QAAI;AAEJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAC,MAAM,KAAK,CAAC,GAAG,OAAO,UAAS,GAAG,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACjG,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YACvE,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC3F,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QAC9F;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,SAAS,EAAC,WAAW,KAAI,CAAC;AAAA,EACjC;AAAA,EAEA,kBAAkB,MAAM;AACtB,SAAK,SAAS,EAAC,WAAW,MAAK,CAAC;AAAA,EAClC;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,SAAQ,IAAI,KAAK;AACxB,UAAM,YAAY,KAAK,MAAM,UAAU,YAAY,KAAK,MAAM,QAAQ,8BAA8B;AACpG,QAAI;AAEJ,QAAI,aAAa,cAAc;AAC7B,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,MAAM,SAAS;AAAA,UAC7D,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK;AAAA,UACf,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA;AAAA,MACf;AAAA,IAEJ,WACS,aAAa,iBAAiB;AACrC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,WACS,aAAa,iBAAiB;AAErC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,OACK;AACH,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ;AACA,WAAO,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAAwB,KAAK,MAAM,WAC/E,qBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ut=function(){return a},a}Ut();function NK(n){return Ut().f[0]++,Ut().s[0]++,Ut().b[0][0]++,Array.isArray(n)&&(Ut().b[0][1]++,n.length===2)&&(Ut().b[0][2]++,n[0]==="literal")}function WK(n){return Ut().f[1]++,Ut().s[1]++,Ut().b[1][0]++,Array.isArray(n)&&(Ut().b[1][1]++,n.length===2)&&(Ut().b[1][2]++,n[0]==="get")}function ihe(n){return Ut().f[2]++,Ut().s[2]++,Ut().b[2][0]++,typeof n=="object"&&(Ut().b[2][1]++,n.stops)&&(Ut().b[2][2]++,typeof n.property>"u")&&(Ut().b[2][3]++,Array.isArray(n.stops))&&(Ut().b[2][4]++,n.stops.length>1)&&(Ut().b[2][5]++,n.stops.every(e=>(Ut().f[3]++,Ut().s[3]++,Ut().b[3][0]++,Array.isArray(e)&&(Ut().b[3][1]++,e.length===2))))}function pG(n){return Ut().f[4]++,Ut().s[4]++,Ut().b[4][0]++,typeof n=="object"&&(Ut().b[4][1]++,n.type==="identity")&&(Ut().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function ohe(n){return Ut().f[5]++,Ut().s[5]++,Ut().b[5][0]++,typeof n=="object"&&(Ut().b[5][1]++,n.stops)&&(Ut().b[5][2]++,typeof n.property<"u")&&(Ut().b[5][3]++,n.stops.length>1)&&(Ut().b[5][4]++,Array.isArray(n.stops))&&(Ut().b[5][5]++,n.stops.every(e=>(Ut().f[6]++,Ut().s[6]++,Ut().b[6][0]++,Array.isArray(e)&&(Ut().b[6][1]++,e.length===2)&&(Ut().b[6][2]++,typeof e[0]=="object"))))}function she(n){return Ut().f[7]++,Ut().s[7]++,Ut().b[7][0]++,pG(n)||(Ut().b[7][1]++,ohe(n))}function gI(n){Ut().f[8]++;const e=(Ut().s[8]++,["string","boolean","number"]);return Ut().s[9]++,e.includes(typeof n)}function ahe(n){return Ut().f[9]++,Ut().s[10]++,Array.isArray(n)?(Ut().b[8][0]++,Ut().s[11]++,n.every(gI)):(Ut().b[8][1]++,Ut().s[12]++,!1)}function GK(n,e=(Ut().b[9][0]++,{})){return Ut().f[10]++,Ut().s[13]++,n===void 0?(Ut().b[10][0]++,Ut().s[14]++,"value"):(Ut().b[10][1]++,Ut().s[15]++,gI(n)?(Ut().b[11][0]++,Ut().s[16]++,"value"):(Ut().b[11][1]++,Ut().s[17]++,Ut().b[13][0]++,e.type==="array"&&(Ut().b[13][1]++,ahe(n))?(Ut().b[12][0]++,Ut().s[18]++,"value"):(Ut().b[12][1]++,Ut().s[19]++,ihe(n)?(Ut().b[14][0]++,Ut().s[20]++,"zoom_function"):(Ut().b[14][1]++,Ut().s[21]++,she(n)?(Ut().b[15][0]++,Ut().s[22]++,"data_function"):(Ut().b[15][1]++,Ut().s[23]++,"expression")))))}class lhe extends nr.Component{constructor(t){Ut().f[11]++,Ut().s[24]++;super(t);Tn(this,"addStop",(Ut().s[34]++,()=>{Ut().f[14]++;const t=(Ut().s[35]++,this.props.value.stops.slice(0)),r=(Ut().s[36]++,t[t.length-1]);Ut().s[37]++,typeof r[0]=="object"?(Ut().b[19][0]++,Ut().s[38]++,t.push([{zoom:r[0].zoom+1,value:r[0].value},r[1]])):(Ut().b[19][1]++,Ut().s[39]++,t.push([r[0]+1,r[1]]));const i=(Ut().s[40]++,{...this.props.value,stops:t});Ut().s[41]++,this.props.onChange(this.props.fieldName,i)}));Tn(this,"deleteExpression",(Ut().s[42]++,()=>{Ut().f[15]++;const{fieldSpec:t,fieldName:r}=(Ut().s[43]++,this.props);Ut().s[44]++,this.props.onChange(r,t.default),Ut().s[45]++,this.setState({dataType:"value"})}));Tn(this,"deleteStop",(Ut().s[46]++,t=>{Ut().f[16]++;const r=(Ut().s[47]++,this.props.value.stops.slice(0));Ut().s[48]++,r.splice(t,1);let i=(Ut().s[49]++,{...this.props.value,stops:r});Ut().s[50]++,r.length===1?(Ut().b[20][0]++,Ut().s[51]++,i=r[0][1]):Ut().b[20][1]++,Ut().s[52]++,this.props.onChange(this.props.fieldName,i)}));Tn(this,"makeZoomFunction",(Ut().s[53]++,()=>{Ut().f[17]++;const{value:t}=(Ut().s[54]++,this.props);let r;Ut().s[55]++,typeof t=="object"?(Ut().b[21][0]++,Ut().s[56]++,t.stops?(Ut().b[22][0]++,Ut().s[57]++,r={base:t.base,stops:t.stops.map(i=>(Ut().f[18]++,Ut().s[58]++,[i[0].zoom,(Ut().b[23][0]++,i[1]||(Ut().b[23][1]++,Sf(this.props.fieldSpec)))]))}):(Ut().b[22][1]++,Ut().s[59]++,r={base:t.base,stops:[[6,Sf(this.props.fieldSpec)],[10,Sf(this.props.fieldSpec)]]})):(Ut().b[21][1]++,Ut().s[60]++,r={stops:[[6,(Ut().b[24][0]++,t||(Ut().b[24][1]++,Sf(this.props.fieldSpec)))],[10,(Ut().b[25][0]++,t||(Ut().b[25][1]++,Sf(this.props.fieldSpec)))]]}),Ut().s[61]++,this.props.onChange(this.props.fieldName,r)}));Tn(this,"undoExpression",(Ut().s[62]++,()=>{Ut().f[19]++;const{value:t,fieldName:r}=(Ut().s[63]++,this.props);Ut().s[64]++,WK(t)?(Ut().b[26][0]++,Ut().s[65]++,this.props.onChange(r,{type:"identity",property:t[1]}),Ut().s[66]++,this.setState({dataType:"value"})):(Ut().b[26][1]++,Ut().s[67]++,NK(t)?(Ut().b[27][0]++,Ut().s[68]++,this.props.onChange(r,t[1]),Ut().s[69]++,this.setState({dataType:"value"})):Ut().b[27][1]++)}));Tn(this,"canUndo",(Ut().s[70]++,()=>{Ut().f[20]++;const{value:t,fieldSpec:r}=(Ut().s[71]++,this.props);return Ut().s[72]++,Ut().b[28][0]++,WK(t)||(Ut().b[28][1]++,NK(t))||(Ut().b[28][2]++,gI(t))||(Ut().b[28][3]++,Array.isArray(t)&&(Ut().b[28][4]++,r.type==="array"))}));Tn(this,"makeExpression",(Ut().s[73]++,()=>{Ut().f[21]++;const{value:t,fieldSpec:r}=(Ut().s[74]++,this.props);let i;Ut().s[75]++,Ut().b[30][0]++,typeof t=="object"&&(Ut().b[30][1]++,"stops"in t)?(Ut().b[29][0]++,Ut().s[76]++,i=HH.convertFunction(t,r)):(Ut().b[29][1]++,Ut().s[77]++,pG(t)?(Ut().b[31][0]++,Ut().s[78]++,i=["get",t.property]):(Ut().b[31][1]++,Ut().s[79]++,i=["literal",(Ut().b[32][0]++,t||(Ut().b[32][1]++,this.props.fieldSpec.default))])),Ut().s[80]++,this.props.onChange(this.props.fieldName,i)}));Tn(this,"makeDataFunction",(Ut().s[81]++,()=>{Ut().f[22]++;const t=(Ut().s[82]++,this.getFieldFunctionType(this.props.fieldSpec)),r=(Ut().s[83]++,t==="categorical"?(Ut().b[33][0]++,""):(Ut().b[33][1]++,0)),{value:i}=(Ut().s[84]++,this.props);let s;Ut().s[85]++,typeof i=="object"?(Ut().b[34][0]++,Ut().s[86]++,i.stops?(Ut().b[35][0]++,Ut().s[87]++,s={property:"",type:t,base:i.base,stops:i.stops.map(a=>(Ut().f[23]++,Ut().s[88]++,[{zoom:a[0],value:r},(Ut().b[36][0]++,a[1]||(Ut().b[36][1]++,Sf(this.props.fieldSpec)))]))}):(Ut().b[35][1]++,Ut().s[89]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},Sf(this.props.fieldSpec)],[{zoom:10,value:r},Sf(this.props.fieldSpec)]]})):(Ut().b[34][1]++,Ut().s[90]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},(Ut().b[37][0]++,this.props.value||(Ut().b[37][1]++,Sf(this.props.fieldSpec)))],[{zoom:10,value:r},(Ut().b[38][0]++,this.props.value||(Ut().b[38][1]++,Sf(this.props.fieldSpec)))]]}),Ut().s[91]++,this.props.onChange(this.props.fieldName,s)}));Tn(this,"onMarkEditing",(Ut().s[92]++,()=>{Ut().f[24]++,Ut().s[93]++,this.setState({isEditing:!0})}));Tn(this,"onUnmarkEditing",(Ut().s[94]++,()=>{Ut().f[25]++,Ut().s[95]++,this.setState({isEditing:!1})}));Ut().s[25]++,this.state={dataType:GK(t.value,t.fieldSpec),isEditing:!1}}static getDerivedStateFromProps(t,r){return Ut().f[12]++,Ut().s[26]++,r.isEditing?(Ut().b[16][0]++,Ut().s[27]++,{}):(Ut().b[16][1]++,Ut().s[28]++,{isEditing:!1,dataType:GK(t.value,t.fieldSpec)})}getFieldFunctionType(t){return Ut().f[13]++,Ut().s[29]++,t.expression.interpolated?(Ut().b[17][0]++,Ut().s[30]++,"exponential"):(Ut().b[17][1]++,Ut().s[31]++,t.type==="number"?(Ut().b[18][0]++,Ut().s[32]++,"interval"):(Ut().b[18][1]++,Ut().s[33]++,"categorical"))}render(){Ut().f[26]++;const{dataType:t}=(Ut().s[96]++,this.state),r=(Ut().s[97]++,this.props.fieldSpec.default===this.props.value?(Ut().b[39][0]++,"maputnik-default-property"):(Ut().b[39][1]++,"maputnik-modified-property"));let i;return Ut().s[98]++,t==="expression"?(Ut().b[40][0]++,Ut().s[99]++,i=le.jsx(xW,{errors:this.props.errors,onChange:this.props.onChange.bind(this,this.props.fieldName),canUndo:this.canUndo,onUndo:this.undoExpression,onDelete:this.deleteExpression,fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onFocus:this.onMarkEditing,onBlur:this.onUnmarkEditing})):(Ut().b[40][1]++,Ut().s[100]++,t==="zoom_function"?(Ut().b[41][0]++,Ut().s[101]++,i=le.jsx(rhe,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToDataFunction:this.makeDataFunction,onExpressionClick:this.makeExpression})):(Ut().b[41][1]++,Ut().s[102]++,t==="data_function"?(Ut().b[42][0]++,Ut().s[103]++,i=le.jsx(nhe,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToZoomFunction:this.makeZoomFunction,onExpressionClick:this.makeExpression})):(Ut().b[42][1]++,Ut().s[104]++,i=le.jsx(cG,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onZoomClick:this.makeZoomFunction,onDataClick:this.makeDataFunction,onExpressionClick:this.makeExpression})))),Ut().s[105]++,le.jsx("div",{className:r,"data-wd-key":"spec-field-container:"+this.props.fieldName,children:i})}}function co(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return co=function(){return a},a}co();const uhe=(co().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function Ahe(n,e,t){co().f[0]++;const r=(co().s[1]++,mG(n,e,t)),i=(co().s[2]++,n[r+"_"+e]),s=(co().s[3]++,i[t]);return co().s[4]++,uhe.indexOf(t)>=0?(co().b[0][0]++,co().s[5]++,{...s,values:n.$root.sprite.values}):(co().b[0][1]++,co().s[6]++,t==="text-font"?(co().b[1][0]++,co().s[7]++,{...s,values:n.$root.glyphs.values}):(co().b[1][1]++,co().s[8]++,s))}function mG(n,e,t){co().f[1]++;const r=(co().s[9]++,co().b[2][0]++,n["paint_"+e]||(co().b[2][1]++,{}));return co().s[10]++,t in r?(co().b[3][0]++,co().s[11]++,"paint"):(co().b[3][1]++,co().s[12]++,"layout")}class che extends nr.Component{constructor(){super(...arguments);Tn(this,"onPropertyChange",(co().s[13]++,(t,r)=>{co().f[2]++;const i=(co().s[14]++,mG(this.props.spec,this.props.layer.type,t));co().s[15]++,this.props.onChange(i,t,r)}))}render(){co().f[3]++;const{errors:t}=(co().s[16]++,this.props),r=(co().s[17]++,this.props.groupFields.map(i=>{co().f[4]++;const s=(co().s[18]++,Ahe(this.props.spec,this.props.layer.type,i)),a=(co().s[19]++,co().b[4][0]++,this.props.layer.paint||(co().b[4][1]++,{})),o=(co().s[20]++,co().b[5][0]++,this.props.layer.layout||(co().b[5][1]++,{})),d=(co().s[21]++,i in a?(co().b[6][0]++,a[i]):(co().b[6][1]++,o[i])),g=(co().s[22]++,i in a?(co().b[7][0]++,"paint"):(co().b[7][1]++,"layout"));return co().s[23]++,le.jsx(lhe,{errors:t,onChange:this.onPropertyChange,fieldName:i,value:d,fieldType:g,fieldSpec:s},i)}));return co().s[24]++,le.jsx("div",{className:"maputnik-property-group",children:r})}}var yE,QK;function dhe(){return QK||(QK=1,yE=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,s){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var a in r)t.d(s,a,(function(o){return r[o]}).bind(null,a));return s},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=Cp()},function(n,e){n.exports=La()},function(n,e,t){t.r(e);var r=t(1),i=t(0),s=function(){return(s=Object.assign||function(k){for(var z,j=1,Y=arguments.length;j<Y;j++)for(var q in z=arguments[j])Object.prototype.hasOwnProperty.call(z,q)&&(k[q]=z[q]);return k}).apply(this,arguments)},a=function(k,z){var j={};for(var Y in k)Object.prototype.hasOwnProperty.call(k,Y)&&z.indexOf(Y)<0&&(j[Y]=k[Y]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function"){var q=0;for(Y=Object.getOwnPropertySymbols(k);q<Y.length;q++)z.indexOf(Y[q])<0&&Object.prototype.propertyIsEnumerable.call(k,Y[q])&&(j[Y[q]]=k[Y[q]])}return j},o=0,d=r.forwardRef(function(k,z){var j=k.title,Y=j===void 0?null:j,q=k.description,ie=q===void 0?null:q,J=k.size,$=J===void 0?null:J,te=k.color,W=te===void 0?"currentColor":te,oe=k.horizontal,fe=oe===void 0?null:oe,he=k.vertical,Se=he===void 0?null:he,pe=k.rotate,we=pe===void 0?null:pe,Ke=k.spin,ge=Ke===void 0?null:Ke,st=k.style,Qe=st===void 0?{}:st,Ze=k.children,We=a(k,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var Ce,Pe=ge!==null&&ge,it=r.Children.map(Ze,function(Dt){var Tt=Dt;Pe!==!0&&(Pe=(ge===null?Tt.props.spin:ge)===!0);var Ue=Tt.props.size;typeof $=="number"&&typeof Tt.props.size=="number"&&(Ue=Tt.props.size/$);var Re={size:Ue,color:W===null?Tt.props.color:W,horizontal:fe===null?Tt.props.horizontal:fe,vertical:Se===null?Tt.props.vertical:Se,rotate:we===null?Tt.props.rotate:we,spin:ge===null?Tt.props.spin:ge,inStack:!0};return r.cloneElement(Tt,Re)});$!==null&&(Qe.width=typeof $=="string"?$:1.5*$+"rem");var vt,_t="stack_labelledby_"+o,ft="stack_describedby_"+o;if(Y)Ce=ie?_t+" "+ft:_t;else if(vt="presentation",ie)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:z,viewBox:"0 0 24 24",style:Qe,role:vt,"aria-labelledby":Ce},We),Y&&r.createElement("title",{id:_t},Y),ie&&r.createElement("desc",{id:ft},ie),Pe&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),it)});d.displayName="Stack",d.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},d.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var g=d;t.d(e,"Icon",function(){return B}),t.d(e,"Stack",function(){return g});var b=function(){return(b=Object.assign||function(k){for(var z,j=1,Y=arguments.length;j<Y;j++)for(var q in z=arguments[j])Object.prototype.hasOwnProperty.call(z,q)&&(k[q]=z[q]);return k}).apply(this,arguments)},E=function(k,z){var j={};for(var Y in k)Object.prototype.hasOwnProperty.call(k,Y)&&z.indexOf(Y)<0&&(j[Y]=k[Y]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function"){var q=0;for(Y=Object.getOwnPropertySymbols(k);q<Y.length;q++)z.indexOf(Y[q])<0&&Object.prototype.propertyIsEnumerable.call(k,Y[q])&&(j[Y[q]]=k[Y[q]])}return j},S=0,B=r.forwardRef(function(k,z){var j=k.path,Y=k.id,q=Y===void 0?++S:Y,ie=k.title,J=ie===void 0?null:ie,$=k.description,te=$===void 0?null:$,W=k.size,oe=W===void 0?null:W,fe=k.color,he=fe===void 0?"currentColor":fe,Se=k.horizontal,pe=Se!==void 0&&Se,we=k.vertical,Ke=we!==void 0&&we,ge=k.rotate,st=ge===void 0?0:ge,Qe=k.spin,Ze=Qe!==void 0&&Qe,We=k.style,Ce=We===void 0?{}:We,Pe=k.inStack,it=Pe!==void 0&&Pe,vt=E(k,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),_t={},ft=[];oe!==null&&(it?ft.push("scale("+oe+")"):(Ce.width=typeof oe=="string"?oe:1.5*oe+"rem",Ce.height=Ce.width)),pe&&ft.push("scaleX(-1)"),Ke&&ft.push("scaleY(-1)"),st!==0&&ft.push("rotate("+st+"deg)"),he!==null&&(_t.fill=he);var Dt=r.createElement("path",b({d:j,style:_t},it?vt:{})),Tt=Dt;ft.length>0&&(Ce.transform=ft.join(" "),Ce.transformOrigin="center",it&&(Tt=r.createElement("g",{style:Ce},Dt,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Ue,Re=Tt,Be=Ze===!0||typeof Ze!="number"?2:Ze,nt=!it&&(pe||Ke);if(Be<0&&(nt=!nt),Ze&&(Re=r.createElement("g",{style:{animation:"spin"+(nt?"-inverse":"")+" linear "+Math.abs(Be)+"s infinite",transformOrigin:"center"}},Tt,!(pe||Ke||st!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),it)return Re;var Ct,pt="icon_labelledby_"+q,zt="icon_describedby_"+q;if(J)Ue=te?pt+" "+zt:pt;else if(Ct="presentation",te)throw new Error("title attribute required when description is set");return r.createElement("svg",b({ref:z,viewBox:"0 0 24 24",style:Ce,role:Ct,"aria-labelledby":Ue},vt),J&&r.createElement("title",{id:pt},J),te&&r.createElement("desc",{id:zt},te),!it&&Ze&&(nt?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Re)});B.displayName="Icon",B.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},B.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=B}])),yE}var hhe=dhe();const qK=Xa(hhe);function uy(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return uy=function(){return a},a}uy();class fhe extends nr.Component{render(){return uy().f[0]++,uy().s[0]++,le.jsxs(fW,{uuid:this.props.id,children:[le.jsx(gW,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(uy().f[1]++,uy().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:le.jsxs(Pue,{className:"maputnik-layer-editor-group__button",children:[le.jsx("span",{style:{flexGrow:1},children:this.props.title}),le.jsx(qK,{path:Jue,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),le.jsx(qK,{path:Xue,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),le.jsx(Fue,{children:this.props.children})]})}}function My(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="32f7af2e1a9dc4f673c1fba818006229f9fd6490",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"32f7af2e1a9dc4f673c1fba818006229f9fd6490"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return My=function(){return a},a}My();class phe extends nr.Component{render(){My().f[0]++;const e=(My().s[0]++,this.props.t);return My().s[1]++,le.jsx(ya,{label:e("Min Zoom"),fieldSpec:ns.layer.minzoom,error:this.props.error,"data-wd-key":"min-zoom",children:le.jsx(cm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:ns.layer.minzoom.minimum,max:ns.layer.minzoom.maximum,default:ns.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})}}const mhe=(My().s[2]++,Vs()(phe));function Sy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="f706dc673f9397f2919007f4b702470461bf0f7c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f706dc673f9397f2919007f4b702470461bf0f7c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Sy=function(){return a},a}Sy();class ghe extends nr.Component{render(){Sy().f[0]++;const e=(Sy().s[0]++,this.props.t);return Sy().s[1]++,le.jsx(ya,{label:e("Max Zoom"),fieldSpec:ns.layer.maxzoom,error:this.props.error,"data-wd-key":"max-zoom",children:le.jsx(cm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:ns.layer.maxzoom.minimum,max:ns.layer.maxzoom.maximum,default:ns.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})}}const yhe=(Sy().s[2]++,Vs()(ghe));function Og(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="875d9bef6002e38aa0b5bf03af99ab4fc2308047",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:22},end:{line:11,column:5}},2:{start:{line:12,column:4},end:{line:30,column:6}},3:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:31,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AAyBM;AAzBN,OAAO,WAAW;AAElB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY;AAAA,MAChB,KAAK,EAAE,2EAA2E;AAAA,IACpF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,UAAU;AAAA,QACnB;AAAA,QACA,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YACP,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,EAAE,YAAY;AAAA,YACvB,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"875d9bef6002e38aa0b5bf03af99ab4fc2308047"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Og=function(){return a},a}Og();class vhe extends nr.Component{render(){Og().f[0]++;const e=(Og().s[0]++,this.props.t),t=(Og().s[1]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Og().s[2]++,le.jsx(ya,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:this.props.error,children:le.jsx(Ff,{multi:!0,value:this.props.value,onChange:this.props.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})}}const Che=(Og().s[3]++,Vs()(vhe)),_he={groups:[{title:"Paint properties",type:"properties",fields:["line-opacity","line-color","line-width","line-offset","line-blur","line-dasharray","line-pattern","line-translate","line-translate-anchor","line-gap-width"]},{title:"Layout properties",type:"properties",fields:["line-cap","line-join","line-miter-limit","line-round-limit"]}]},bhe={groups:[{title:"Paint properties",type:"properties",fields:["background-color","background-pattern","background-opacity"]}]},xhe={groups:[{title:"Paint properties",type:"properties",fields:["fill-opacity","fill-color","fill-antialias","fill-outline-color","fill-pattern","fill-translate","fill-translate-anchor"]}]},whe={groups:[{title:"Paint properties",type:"properties",fields:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-blur","circle-radius","circle-stroke-width","circle-pitch-scale","circle-translate","circle-translate-anchor","circle-pitch-alignment"]}]},Mhe={groups:[{title:"General layout properties",type:"properties",fields:["symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-z-order"]},{title:"Text layout properties",type:"properties",fields:["text-field","text-font","text-size","text-line-height","text-padding","text-allow-overlap","text-ignore-placement","text-pitch-alignment","text-rotation-alignment","text-max-width","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-keep-upright","text-transform","text-offset","text-optional","text-variable-anchor","text-radial-offset"]},{title:"Icon layout properties",type:"properties",fields:["icon-image","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment"]},{title:"Text paint properties",type:"properties",fields:["text-color","text-opacity","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor"]},{title:"Icon paint properties",type:"properties",fields:["icon-color","icon-opacity","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor"]}]},She={groups:[{title:"Paint properties",type:"properties",fields:["raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","raster-resampling"]}]},Ehe={groups:[{title:"Paint properties",type:"properties",fields:["hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color"]}]},Bhe={groups:[{title:"Paint properties",type:"properties",fields:["heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-opacity"]}]},Ohe={groups:[]},Ob={line:_he,background:bhe,fill:xhe,"fill-extrusion":{groups:[{title:"Paint properties",type:"properties",fields:["fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient"]}]},circle:whe,symbol:Mhe,raster:She,hillshade:Ehe,heatmap:Bhe,invalid:Ohe};function Ay(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ay=function(){return a},a}Ay();function gG(n){return Ay().f[0]++,Ay().s[0]++,n===""?(Ay().b[0][0]++,"[empty_string]"):(Ay().b[0][1]++,`'${n}'`)}function Pn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="555ef41c8141fe537bdb43523a4ef7ec4c287394",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:23,column:2},end:{line:32,column:21}},1:{start:{line:26,column:6},end:{line:30,column:8}},2:{start:{line:35,column:21},end:{line:39,column:3}},3:{start:{line:40,column:22},end:{line:44,column:3}},4:{start:{line:45,column:22},end:{line:49,column:3}},5:{start:{line:50,column:2},end:{line:50,column:103}},6:{start:{line:53,column:24},end:{line:60,column:3}},7:{start:{line:61,column:29},end:{line:63,column:3}},8:{start:{line:65,column:4},end:{line:65,column:17}},9:{start:{line:66,column:25},end:{line:66,column:27}},10:{start:{line:67,column:4},end:{line:69,column:7}},11:{start:{line:68,column:6},end:{line:68,column:39}},12:{start:{line:70,column:4},end:{line:70,column:34}},13:{start:{line:73,column:29},end:{line:73,column:54}},14:{start:{line:74,column:4},end:{line:78,column:7}},15:{start:{line:75,column:6},end:{line:77,column:7}},16:{start:{line:76,column:8},end:{line:76,column:45}},17:{start:{line:79,column:4},end:{line:81,column:6}},18:{start:{line:84,column:4},end:{line:89,column:6}},19:{start:{line:92,column:4},end:{line:95,column:6}},20:{start:{line:98,column:32},end:{line:101,column:5}},21:{start:{line:102,column:4},end:{line:104,column:7}},22:{start:{line:107,column:18},end:{line:107,column:20}},23:{start:{line:108,column:4},end:{line:110,column:5}},24:{start:{line:109,column:6},end:{line:109,column:62}},25:{start:{line:111,column:35},end:{line:111,column:45}},26:{start:{line:112,column:22},end:{line:112,column:24}},27:{start:{line:113,column:4},end:{line:119,column:7}},28:{start:{line:114,column:6},end:{line:118,column:7}},29:{start:{line:115,column:8},end:{line:117,column:10}},30:{start:{line:121,column:18},end:{line:121,column:34}},31:{start:{line:122,column:4},end:{line:124,column:5}},32:{start:{line:123,column:6},end:{line:123,column:63}},33:{start:{line:125,column:4},end:{line:228,column:5}},34:{start:{line:127,column:8},end:{line:191,column:13}},35:{start:{line:134,column:35},end:{line:134,column:112}},36:{start:{line:143,column:37},end:{line:146,column:15}},37:{start:{line:155,column:31},end:{line:155,column:69}},38:{start:{line:164,column:31},end:{line:164,column:75}},39:{start:{line:172,column:31},end:{line:172,column:70}},40:{start:{line:180,column:31},end:{line:180,column:70}},41:{start:{line:188,column:31},end:{line:188,column:104}},42:{start:{line:193,column:8},end:{line:201,column:16}},43:{start:{line:199,column:29},end:{line:199,column:67}},44:{start:{line:203,column:8},end:{line:212,column:10}},45:{start:{line:214,column:8},end:{line:225,column:10}},46:{start:{line:219,column:14},end:{line:222,column:16}},47:{start:{line:227,column:8},end:{line:227,column:49}},48:{start:{line:231,column:4},end:{line:234,column:7}},49:{start:{line:237,column:14},end:{line:237,column:26}},50:{start:{line:238,column:21},end:{line:238,column:23}},51:{start:{line:239,column:22},end:{line:239,column:43}},52:{start:{line:240,column:19},end:{line:257,column:6}},53:{start:{line:241,column:6},end:{line:241,column:70}},54:{start:{line:243,column:22},end:{line:243,column:30}},55:{start:{line:244,column:6},end:{line:244,column:29}},56:{start:{line:245,column:6},end:{line:256,column:8}},57:{start:{line:258,column:20},end:{line:258,column:49}},58:{start:{line:259,column:18},end:{line:284,column:5}},59:{start:{line:262,column:23},end:{line:262,column:71}},60:{start:{line:266,column:23},end:{line:266,column:68}},61:{start:{line:270,column:23},end:{line:270,column:80}},62:{start:{line:276,column:23},end:{line:276,column:41}},63:{start:{line:282,column:23},end:{line:282,column:40}},64:{start:{line:286,column:6},end:{line:286,column:30}},65:{start:{line:287,column:6},end:{line:287,column:26}},66:{start:{line:289,column:4},end:{line:334,column:6}},67:{start:{line:316,column:33},end:{line:316,column:42}},68:{start:{line:317,column:20},end:{line:317,column:174}},69:{start:{line:337,column:20},end:{line:337,column:58}}},fnMap:{0:{name:"getLayoutForType",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:35},end:{line:33,column:1}},line:22},1:{name:"(anonymous_1)",decl:{start:{line:25,column:36},end:{line:25,column:37}},loc:{start:{line:25,column:47},end:{line:31,column:5}},line:25},2:{name:"layoutGroups",decl:{start:{line:34,column:9},end:{line:34,column:21}},loc:{start:{line:34,column:36},end:{line:51,column:1}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:54,column:20},end:{line:54,column:21}},loc:{start:{line:54,column:26},end:{line:55,column:5}},line:54},4:{name:"(anonymous_4)",decl:{start:{line:56,column:21},end:{line:56,column:22}},loc:{start:{line:56,column:27},end:{line:57,column:5}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:28},end:{line:59,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:21},end:{line:71,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:67,column:57},end:{line:67,column:58}},loc:{start:{line:67,column:68},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:48},end:{line:82,column:3}},line:72},9:{name:"(anonymous_9)",decl:{start:{line:74,column:63},end:{line:74,column:64}},loc:{start:{line:74,column:74},end:{line:78,column:5}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:20},end:{line:90,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:44},end:{line:96,column:3}},line:91},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:36},end:{line:105,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:32},end:{line:229,column:3}},line:106},14:{name:"(anonymous_14)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:30},end:{line:119,column:5}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:35},end:{line:134,column:112}},line:134},16:{name:"(anonymous_16)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:37},end:{line:146,column:15}},line:143},17:{name:"(anonymous_17)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:31},end:{line:155,column:69}},line:155},18:{name:"(anonymous_18)",decl:{start:{line:164,column:24},end:{line:164,column:25}},loc:{start:{line:164,column:31},end:{line:164,column:75}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:31},end:{line:172,column:70}},line:172},20:{name:"(anonymous_20)",decl:{start:{line:180,column:24},end:{line:180,column:25}},loc:{start:{line:180,column:31},end:{line:180,column:70}},line:180},21:{name:"(anonymous_21)",decl:{start:{line:188,column:24},end:{line:188,column:25}},loc:{start:{line:188,column:31},end:{line:188,column:104}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:199,column:22},end:{line:199,column:23}},loc:{start:{line:199,column:29},end:{line:199,column:67}},line:199},23:{name:"(anonymous_23)",decl:{start:{line:218,column:22},end:{line:218,column:23}},loc:{start:{line:218,column:34},end:{line:223,column:13}},line:218},24:{name:"(anonymous_24)",decl:{start:{line:230,column:2},end:{line:230,column:3}},loc:{start:{line:230,column:20},end:{line:235,column:3}},line:230},25:{name:"(anonymous_25)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:335,column:3}},line:236},26:{name:"(anonymous_26)",decl:{start:{line:240,column:53},end:{line:240,column:54}},loc:{start:{line:240,column:64},end:{line:242,column:5}},line:240},27:{name:"(anonymous_27)",decl:{start:{line:242,column:11},end:{line:242,column:12}},loc:{start:{line:242,column:22},end:{line:257,column:5}},line:242},28:{name:"(anonymous_28)",decl:{start:{line:262,column:17},end:{line:262,column:18}},loc:{start:{line:262,column:23},end:{line:262,column:71}},line:262},29:{name:"(anonymous_29)",decl:{start:{line:266,column:17},end:{line:266,column:18}},loc:{start:{line:266,column:23},end:{line:266,column:68}},line:266},30:{name:"(anonymous_30)",decl:{start:{line:270,column:17},end:{line:270,column:18}},loc:{start:{line:270,column:23},end:{line:270,column:80}},line:270},31:{name:"(anonymous_31)",decl:{start:{line:276,column:17},end:{line:276,column:18}},loc:{start:{line:276,column:23},end:{line:276,column:41}},line:276},32:{name:"(anonymous_32)",decl:{start:{line:282,column:17},end:{line:282,column:18}},loc:{start:{line:282,column:23},end:{line:282,column:40}},line:282},33:{name:"handleSelection",decl:{start:{line:285,column:13},end:{line:285,column:28}},loc:{start:{line:285,column:40},end:{line:288,column:5}},line:285},34:{name:"(anonymous_34)",decl:{start:{line:315,column:147},end:{line:315,column:148}},loc:{start:{line:315,column:155},end:{line:318,column:19}},line:315}},branchMap:{0:{loc:{start:{line:23,column:9},end:{line:32,column:20}},type:"cond-expr",locations:[{start:{line:23,column:24},end:{line:32,column:3}},{start:{line:32,column:6},end:{line:32,column:20}}],line:23},1:{loc:{start:{line:75,column:6},end:{line:77,column:7}},type:"if",locations:[{start:{line:75,column:6},end:{line:77,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},2:{loc:{start:{line:108,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:108,column:4},end:{line:110,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:108},3:{loc:{start:{line:114,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:114,column:6},end:{line:118,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},4:{loc:{start:{line:114,column:10},end:{line:114,column:96}},type:"binary-expr",locations:[{start:{line:114,column:10},end:{line:114,column:22}},{start:{line:114,column:26},end:{line:114,column:55}},{start:{line:114,column:59},end:{line:114,column:96}}],line:114},5:{loc:{start:{line:122,column:4},end:{line:124,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:124,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:122},6:{loc:{start:{line:125,column:4},end:{line:228,column:5}},type:"switch",locations:[{start:{line:126,column:6},end:{line:191,column:13}},{start:{line:192,column:6},end:{line:201,column:16}},{start:{line:202,column:6},end:{line:212,column:10}},{start:{line:213,column:6},end:{line:225,column:10}},{start:{line:226,column:6},end:{line:227,column:49}}],line:125},7:{loc:{start:{line:149,column:10},end:{line:157,column:11}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:48}},{start:{line:149,column:68},end:{line:157,column:11}}],line:149},8:{loc:{start:{line:158,column:10},end:{line:166,column:11}},type:"binary-expr",locations:[{start:{line:158,column:10},end:{line:158,column:93}},{start:{line:158,column:113},end:{line:166,column:11}}],line:158},9:{loc:{start:{line:188,column:83},end:{line:188,column:103}},type:"cond-expr",locations:[{start:{line:188,column:93},end:{line:188,column:99}},{start:{line:188,column:102},end:{line:188,column:103}}],line:188},10:{loc:{start:{line:241,column:15},end:{line:241,column:68}},type:"binary-expr",locations:[{start:{line:241,column:15},end:{line:241,column:41}},{start:{line:241,column:45},end:{line:241,column:68}}],line:241},11:{loc:{start:{line:258,column:20},end:{line:258,column:49}},type:"binary-expr",locations:[{start:{line:258,column:20},end:{line:258,column:43}},{start:{line:258,column:47},end:{line:258,column:49}}],line:258},12:{loc:{start:{line:269,column:14},end:{line:269,column:67}},type:"cond-expr",locations:[{start:{line:269,column:46},end:{line:269,column:55}},{start:{line:269,column:58},end:{line:269,column:67}}],line:269}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer","layout"],mappings:"AA2KyB,SA2EL,UA1Ed,KADmB;AA3KzB,OAAO,WAAuB;AAC9B,OAAO,eAAe;AACtB,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AAGzB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,OAAO,YAAY;AACnB,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAIjD,SAAS,iBAAiB,MAAkC,GAAc;AACxE,SAAO,OAAO,IAAI,IAAI;AAAA,IACpB,GAAG,OAAO,IAAI;AAAA,IACd,QAAQ,OAAO,IAAI,EAAE,OAAO,IAAI,WAAS;AACvC,aAAO;AAAA,QACL,GAAG;AAAA,QACH,IAAI,MAAM,MAAM,QAAQ,MAAM,GAAG;AAAA,QACjC,OAAO,EAAE,MAAM,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH,IAAI,OAAO;AACb;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,EAAE,MAAM,EAC5C,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAGX,UAAM,eAAyC,CAAC;AAChD,iBAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,QAAQ,WAAS;AAC5D,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B,CAAC;AAED,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,qBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,OAAO,QAAQ,WAAS;AAClE,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,kBAAmB;AACjB,WAAO;AAAA,MACL,eAAe;AAAA,QACb,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAkB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAU;AAAA,IAC7D;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,MAAM,IAAI,IAAI,KACjF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAMC,UAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAAkF;AAAA,MACtF,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,MAChE;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,MAC7D;AAAA,MACA,MAAM;AAAA,QACJ,MAAOA,QAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,MACzE;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA;AAAA,QAEvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,MAClC;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA;AAAA,QAEzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,MAClC;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACxB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAC5B,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"555ef41c8141fe537bdb43523a4ef7ec4c287394"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Pn=function(){return a},a}Pn();function yG(n,e){return Pn().f[0]++,Pn().s[0]++,Ob[n]?(Pn().b[0][0]++,{...Ob[n],groups:Ob[n].groups.map(t=>(Pn().f[1]++,Pn().s[1]++,{...t,id:t.title.replace(/ /g,"_"),title:e(t.title)}))}):(Pn().b[0][1]++,Ob.invalid)}function YK(n,e){Pn().f[2]++;const t=(Pn().s[2]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(Pn().s[3]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(Pn().s[4]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Pn().s[5]++,[t,r].concat(yG(n,e).groups).concat([i])}class KB extends nr.Component{constructor(e){Pn().f[6]++,Pn().s[8]++,super(e);const t=(Pn().s[9]++,{});Pn().s[10]++,YK(this.props.layer.type,e.t).forEach(r=>{Pn().f[7]++,Pn().s[11]++,t[r.title]=!0}),Pn().s[12]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Pn().f[8]++;const r=(Pn().s[13]++,{...t.editorGroups});return Pn().s[14]++,yG(e.layer.type,e.t).groups.forEach(i=>{Pn().f[9]++,Pn().s[15]++,i.title in r?Pn().b[1][1]++:(Pn().b[1][0]++,Pn().s[16]++,r[i.title]=!0)}),Pn().s[17]++,{editorGroups:r}}getChildContext(){return Pn().f[10]++,Pn().s[18]++,{reactIconBase:{size:14,color:"#8e8e8e"}}}changeProperty(e,t,r){Pn().f[11]++,Pn().s[19]++,this.props.onLayerChanged(this.props.layerIndex,$le(this.props.layer,e,t,r))}onGroupToggle(e,t){Pn().f[12]++;const r=(Pn().s[20]++,{...this.state.editorGroups,[e]:t});Pn().s[21]++,this.setState({editorGroups:r})}renderGroupType(e,t){Pn().f[13]++;let r=(Pn().s[22]++,"");Pn().s[23]++,this.props.layer.metadata?(Pn().b[2][0]++,Pn().s[24]++,r=this.props.layer.metadata["maputnik:comment"]):Pn().b[2][1]++;const{errors:i,layerIndex:s}=(Pn().s[25]++,this.props),a=(Pn().s[26]++,{});Pn().s[27]++,i.forEach(g=>{Pn().f[14]++,Pn().s[28]++,Pn().b[4][0]++,g.parsed&&(Pn().b[4][1]++,g.parsed.type==="layer")&&(Pn().b[4][2]++,g.parsed.data.index==s)?(Pn().b[3][0]++,Pn().s[29]++,a[g.parsed.data.key]={message:g.parsed.data.message}):Pn().b[3][1]++});let o;const d=(Pn().s[30]++,this.props.layer);switch(Pn().s[31]++,Object.prototype.hasOwnProperty.call(this.props.sources,d.source)?(Pn().b[5][0]++,Pn().s[32]++,o=this.props.sources[d.source].layers):Pn().b[5][1]++,Pn().s[33]++,e){case"layer":return Pn().b[6][0]++,Pn().s[34]++,le.jsxs("div",{children:[le.jsx(tW,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:a.id,onChange:g=>(Pn().f[15]++,Pn().s[35]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,g))}),le.jsx(eW,{disabled:!0,error:a.type,value:this.props.layer.type,onChange:g=>(Pn().f[16]++,Pn().s[36]++,this.props.onLayerChanged(this.props.layerIndex,Yle(this.props.layer,g)))}),(Pn().b[7][0]++,this.props.layer.type!=="background"&&(Pn().b[7][1]++,le.jsx(rW,{error:a.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:g=>(Pn().f[17]++,Pn().s[37]++,this.changeProperty(null,"source",g))}))),(Pn().b[8][0]++,["background","raster","hillshade","heatmap"].indexOf(this.props.layer.type)<0&&(Pn().b[8][1]++,le.jsx(oW,{error:a["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:g=>(Pn().f[18]++,Pn().s[38]++,this.changeProperty(null,"source-layer",g))}))),le.jsx(mhe,{error:a.minzoom,value:this.props.layer.minzoom,onChange:g=>(Pn().f[19]++,Pn().s[39]++,this.changeProperty(null,"minzoom",g))}),le.jsx(yhe,{error:a.maxzoom,value:this.props.layer.maxzoom,onChange:g=>(Pn().f[20]++,Pn().s[40]++,this.changeProperty(null,"maxzoom",g))}),le.jsx(Che,{error:a.comment,value:r,onChange:g=>(Pn().f[21]++,Pn().s[41]++,this.changeProperty("metadata","maputnik:comment",g==""?(Pn().b[9][0]++,void 0):(Pn().b[9][1]++,g)))})]});case"filter":return Pn().b[6][1]++,Pn().s[42]++,le.jsx("div",{children:le.jsx("div",{className:"maputnik-filter-editor-wrapper",children:le.jsx(dAe,{errors:a,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:g=>(Pn().f[22]++,Pn().s[43]++,this.changeProperty(null,"filter",g))})})});case"properties":return Pn().b[6][2]++,Pn().s[44]++,le.jsx(che,{errors:a,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Pn().b[6][3]++,Pn().s[45]++,le.jsx(YO,{layer:this.props.layer,onChange:g=>{Pn().f[23]++,Pn().s[46]++,this.props.onLayerChanged(this.props.layerIndex,g)}});default:return Pn().b[6][4]++,Pn().s[47]++,le.jsx(le.Fragment,{})}}moveLayer(e){Pn().f[24]++,Pn().s[48]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Pn().f[25]++;const e=(Pn().s[49]++,this.props.t),t=(Pn().s[50]++,[]),r=(Pn().s[51]++,this.props.layer.type),i=(Pn().s[52]++,YK(r,e).filter(d=>(Pn().f[26]++,Pn().s[53]++,Pn().b[10][0]++,!(r==="background"&&(Pn().b[10][1]++,d.type==="source")))).map(d=>{Pn().f[27]++;const g=(Pn().s[54]++,d.id);return Pn().s[55]++,t.push(g),Pn().s[56]++,le.jsx(fhe,{"data-wd-key":d.title,id:g,title:d.title,isActive:this.state.editorGroups[d.title],onActiveToggle:this.onGroupToggle.bind(this,d.title),children:this.renderGroupType(d.type,d.fields)},g)})),s=(Pn().s[57]++,Pn().b[11][0]++,this.props.layer.layout||(Pn().b[11][1]++,{})),a=(Pn().s[58]++,{delete:{text:e("Delete"),handler:()=>(Pn().f[28]++,Pn().s[59]++,this.props.onLayerDestroy(this.props.layerIndex))},duplicate:{text:e("Duplicate"),handler:()=>(Pn().f[29]++,Pn().s[60]++,this.props.onLayerCopy(this.props.layerIndex))},hide:{text:s.visibility==="none"?(Pn().b[12][0]++,e("Show")):(Pn().b[12][1]++,e("Hide")),handler:()=>(Pn().f[30]++,Pn().s[61]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Pn().f[31]++,Pn().s[62]++,this.moveLayer(-1))},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Pn().f[32]++,Pn().s[63]++,this.moveLayer(1))}});function o(d,g){Pn().f[33]++,Pn().s[64]++,g.stopPropagation(),Pn().s[65]++,a[d].handler()}return Pn().s[66]++,le.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[le.jsx("header",{children:le.jsxs("div",{className:"layer-header",children:[le.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:gG(this.props.layer.id)})}),le.jsx("div",{className:"layer-header__info",children:le.jsxs(xb.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[le.jsx(xb.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:le.jsx(HZ,{className:"more-menu__button__svg"})}),le.jsx(xb.Menu,{children:le.jsx("ul",{className:"more-menu__menu",children:Object.keys(a).map(d=>{Pn().f[34]++;const g=(Pn().s[67]++,a[d]);return Pn().s[68]++,le.jsx("li",{children:le.jsx(xb.MenuItem,{value:d,className:"more-menu__menu__item",children:g.text})},d)})})})]})})]})}),le.jsx(Cue,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})}}Tn(KB,"defaultProps",(Pn().s[6]++,{onLayerChanged:()=>{Pn().f[3]++},onLayerIdChange:()=>{Pn().f[4]++},onLayerDestroyed:()=>{Pn().f[5]++}})),Tn(KB,"childContextTypes",(Pn().s[7]++,{reactIconBase:pi.object}));const Ihe=(Pn().s[69]++,Vs()(KB));var $K=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},khe=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),The=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),Phe=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),Rhe=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),Dhe=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),Khe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Fhe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,VK=3,Lhe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Khe]],HK=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Uhe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Dhe:typeof navigator<"u"?jhe(navigator.userAgent):Whe()}function zhe(n){return n!==""&&Lhe.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function jhe(n){var e=zhe(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Rhe;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<VK&&(i=$K($K([],i,!0),Ghe(VK-i.length),!0)):i=[];var s=i.join("."),a=Nhe(n),o=Fhe.exec(n);return o&&o[1]?new Phe(t,s,a,o[1]):new khe(t,s,a)}function Nhe(n){for(var e=0,t=HK.length;e<t;e++){var r=HK[e],i=r[0],s=r[1],a=s.exec(n);if(a)return i}return null}function Whe(){var n=typeof process<"u"&&process.version;return n?new The(process.version.slice(1)):null}function Ghe(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const Qhe="maputnik",qhe="2.1.1",Yhe="A MapLibre GL visual style editor",$he="module",Vhe="''",Hhe={start:"vite",build:"tsc && vite build --base=/maputnik/","build-desktop":"tsc && vite build --base=/ && cd desktop && make","i18n:refresh":"i18next 'src/**/*.{ts,tsx,js,jsx}'",lint:"eslint",test:"cypress run","cy:open":"cypress open","lint-css":'stylelint "src/styles/*.scss"',"sort-styles":"jq 'sort_by(.id)' src/config/styles.json > tmp.json && mv tmp.json src/config/styles.json"},Zhe={type:"git",url:"https://github.com/maplibre/maputnik"},Xhe="Lukas Martinelli",Jhe="MIT",efe="https://github.com/maplibre/maputnik#readme",tfe={"@mapbox/mapbox-gl-rtl-text":"^0.3.0","@maplibre/maplibre-gl-geocoder":"^1.7.1","@maplibre/maplibre-gl-inspect":"^1.7.1","@maplibre/maplibre-gl-style-spec":"^23.1.0","@mdi/js":"^7.4.47","@mdi/react":"^1.6.1","@prantlf/jsonlint":"^16.0.0","array-move":"^4.0.0",buffer:"^6.0.3",classnames:"^2.5.1",codemirror:"^5.65.18",color:"^4.2.3","detect-browser":"^5.3.0",events:"^3.3.0","file-saver":"^2.0.5",i18next:"^24.2.1","i18next-browser-languagedetector":"^8.0.2","i18next-resources-to-backend":"^1.2.1","json-stringify-pretty-compact":"^4.0.0","json-to-ast":"^2.1.0",lodash:"^4.17.21","lodash.capitalize":"^4.2.1","lodash.clamp":"^4.0.3","lodash.clonedeep":"^4.5.0","lodash.get":"^4.4.2","lodash.isequal":"^4.5.0","lodash.throttle":"^4.1.1","maplibre-gl":"^5.0.1","maputnik-design":"github:maputnik/design#172b06c",ol:"^10.3.1","ol-mapbox-style":"^12.4.0",pmtiles:"^4.1.0","prop-types":"^15.8.1",react:"^18.2.0","react-accessible-accordion":"^5.0.0","react-aria-menubutton":"^7.0.3","react-aria-modal":"^5.0.2","react-autobind":"^1.0.6","react-autocomplete":"^1.8.1","react-collapse":"^5.1.1","react-color":"^2.19.3","react-dom":"^18.2.0","react-file-reader-input":"^2.0.0","react-i18next":"^15.4.0","react-icon-base":"^2.1.2","react-icons":"^5.4.0","react-sortable-hoc":"^2.0.0","reconnecting-websocket":"^4.4.0",slugify:"^1.6.6","string-hash":"^1.1.3",url:"^0.11.4"},nfe={esversion:6},rfe={extends:"stylelint-config-recommended-scss",rules:{"no-descending-specificity":null,"media-feature-name-no-unknown":[!0,{ignoreMediaFeatureNames:["prefers-reduced-motion"]}]}},ife={"@cypress/code-coverage":"^3.13.10","@eslint/js":"^9.18.0","@istanbuljs/nyc-config-typescript":"^1.0.2","@rollup/plugin-replace":"^6.0.2","@shellygo/cypress-test-utils":"^4.1.11","@types/codemirror":"^5.60.15","@types/color":"^4.2.0","@types/cors":"^2.8.17","@types/file-saver":"^2.0.7","@types/geojson":"^7946.0.15","@types/json-to-ast":"^2.1.4","@types/lodash.capitalize":"^4.2.9","@types/lodash.clamp":"^4.0.9","@types/lodash.clonedeep":"^4.5.9","@types/lodash.get":"^4.4.9","@types/lodash.isequal":"^4.5.8","@types/lodash.throttle":"^4.1.9","@types/randomcolor":"^0.5.9","@types/react":"^18.2.67","@types/react-aria-menubutton":"^6.2.14","@types/react-aria-modal":"^5.0.0","@types/react-autocomplete":"^1.8.11","@types/react-collapse":"^5.0.4","@types/react-color":"^3.0.13","@types/react-dom":"^18.2.22","@types/react-file-reader-input":"^2.0.4","@types/react-icon-base":"^2.1.6","@types/string-hash":"^1.1.3","@types/uuid":"^10.0.0","@types/wicg-file-system-access":"^2023.10.5","@vitejs/plugin-react":"^4.3.4",cors:"^2.8.5",cypress:"^14.0.0","cypress-plugin-tab":"^1.0.5",eslint:"^9.18.0","eslint-plugin-react":"^7.37.4","eslint-plugin-react-hooks":"^5.1.0","eslint-plugin-react-refresh":"^0.4.18","i18next-parser":"^9.1.0",istanbul:"^0.4.5","istanbul-lib-coverage":"^3.2.2",postcss:"^8.5.1","react-hot-loader":"^4.13.1",sass:"^1.83.4",stylelint:"^16.13.2","stylelint-config-recommended-scss":"^14.1.0","stylelint-scss":"^6.10.1",typescript:"^5.7.3","typescript-eslint":"^8.21.0",uuid:"^11.0.5",vite:"^6.0.11","vite-plugin-istanbul":"^6.0.2"},ZK={name:Qhe,version:qhe,description:Yhe,type:$he,main:Vhe,scripts:Hhe,repository:Zhe,author:Xhe,license:Jhe,homepage:efe,dependencies:tfe,jshintConfig:nfe,stylelint:rfe,devDependencies:ife},ofe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Qi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="7ffd82d4f3aa9239b1c505abaafac5bdb522b791",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AA+BW,cAyLG,YAzLH;AA/BX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAGnC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ffd82d4f3aa9239b1c505abaafac5bdb522b791"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Qi=function(){return a},a}Qi();const sfe=(Qi().s[0]++,Uhe()),Ib=(Qi().s[1]++,["chrome","firefox"].indexOf(sfe.name)>-1);class fg extends nr.Component{render(){return Qi().f[0]++,Qi().s[2]++,le.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class afe extends nr.Component{render(){return Qi().f[1]++,Qi().s[3]++,le.jsx("a",{className:um("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class XK extends nr.Component{render(){return Qi().f[2]++,Qi().s[4]++,le.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class kb extends nr.Component{render(){return Qi().f[3]++,Qi().s[5]++,le.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class lfe extends nr.Component{constructor(){super(...arguments);Tn(this,"state",(Qi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}}));Tn(this,"onSkip",(Qi().s[9]++,t=>{if(Qi().f[6]++,Qi().s[10]++,t==="map")Qi().b[0][0]++,Qi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Qi().b[0][1]++;const r=(Qi().s[12]++,document.querySelector("#skip-target-"+t));Qi().s[13]++,r.focus()}}))}handleSelection(t){Qi().f[4]++,Qi().s[7]++,this.props.onSetMapState(t)}handleLanguageChange(t){Qi().f[5]++,Qi().s[8]++,this.props.i18n.changeLanguage(t)}render(){Qi().f[7]++;const t=(Qi().s[14]++,this.props.t),r=(Qi().s[15]++,[{id:"map",group:"general",title:t("Map")},{id:"inspect",group:"general",title:t("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:t("Deuteranopia filter"),disabled:!Ib},{id:"filter-protanopia",group:"color-accessibility",title:t("Protanopia filter"),disabled:!Ib},{id:"filter-tritanopia",group:"color-accessibility",title:t("Tritanopia filter"),disabled:!Ib},{id:"filter-achromatopsia",group:"color-accessibility",title:t("Achromatopsia filter"),disabled:!Ib}]),i=(Qi().s[16]++,r.find(s=>(Qi().f[8]++,Qi().s[17]++,s.id===this.props.mapState)));return Qi().s[18]++,le.jsx("nav",{className:"maputnik-toolbar",children:le.jsxs("div",{className:"maputnik-toolbar__inner",children:[le.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[le.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:s=>(Qi().f[9]++,Qi().s[19]++,this.onSkip("layer-list")),children:t("Layers list")}),le.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:s=>(Qi().f[10]++,Qi().s[20]++,this.onSkip("layer-editor")),children:t("Layer editor")}),le.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:s=>(Qi().f[11]++,Qi().s[21]++,this.onSkip("map")),children:t("Map view")}),le.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[le.jsx("img",{src:ofe,alt:t("Maputnik on GitHub")}),le.jsxs("h1",{children:[le.jsx("span",{className:"maputnik-toolbar-name",children:ZK.name}),le.jsxs("span",{className:"maputnik-toolbar-version",children:["v",ZK.version]})]})]})]}),le.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[le.jsxs(kb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[le.jsx(FZ,{}),le.jsx(fg,{children:t("Open")})]}),le.jsxs(kb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[le.jsx(z6,{}),le.jsx(fg,{children:t("Save")})]}),le.jsxs(kb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[le.jsx(QZ,{}),le.jsx(fg,{children:t("Data Sources")})]}),le.jsxs(kb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[le.jsx(LZ,{}),le.jsx(fg,{children:t("Style Settings")})]}),le.jsxs(XK,{wdKey:"nav:inspect",children:[le.jsx(TZ,{}),le.jsxs(fg,{children:[t("View"),le.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:s=>(Qi().f[12]++,Qi().s[22]++,this.handleSelection(s.target.value)),value:i==null?void 0:i.id,children:[r.filter(s=>(Qi().f[13]++,Qi().s[23]++,s.group==="general")).map(s=>(Qi().f[14]++,Qi().s[24]++,le.jsx("option",{value:s.id,disabled:s.disabled,"data-wd-key":s.id,children:s.title},s.id))),le.jsx("optgroup",{label:t("Color accessibility"),children:r.filter(s=>(Qi().f[15]++,Qi().s[25]++,s.group==="color-accessibility")).map(s=>(Qi().f[16]++,Qi().s[26]++,le.jsx("option",{value:s.id,disabled:s.disabled,children:s.title},s.id)))})]})]})]}),le.jsxs(XK,{wdKey:"nav:language",children:[le.jsx(KZ,{}),le.jsxs(fg,{children:["Language",le.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:s=>(Qi().f[17]++,Qi().s[27]++,this.handleLanguageChange(s.target.value)),value:this.props.i18n.language,children:Object.entries(wL).map(([s,a])=>(Qi().f[18]++,Qi().s[28]++,le.jsx("option",{value:s,children:a},s)))})]})]}),le.jsxs(afe,{href:"https://github.com/maplibre/maputnik/wiki",children:[le.jsx(PZ,{}),le.jsx(fg,{children:t("Help")})]})]})]})})}}const ufe=(Qi().s[29]++,Vs()(lfe));function Z2(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Z2=function(){return a},a}Z2();class Afe extends nr.Component{render(){return Z2().f[0]++,Z2().s[0]++,le.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function Ap(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="1ee946cae22aef585acbff88e7256312e8bd0812",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:7,column:29},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:13,column:6}},2:{start:{line:16,column:4},end:{line:16,column:46}},3:{start:{line:17,column:4},end:{line:26,column:9}},4:{start:{line:29,column:18},end:{line:29,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:20},end:{line:14,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:27,column:3}},line:15}},branchMap:{0:{loc:{start:{line:24,column:6},end:{line:24,column:123}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:23}},{start:{line:24,column:43},end:{line:24,column:123}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AA8BM,SACE,KADF;AA9BN,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAWjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,qBAAC,SAAI,WAAU,mBACnB;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ee946cae22aef585acbff88e7256312e8bd0812"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ap=function(){return a},a}Ap();class vG extends nr.Component{getChildContext(){return Ap().f[0]++,Ap().s[1]++,{reactIconBase:{size:14}}}render(){return Ap().f[1]++,Ap().s[2]++,document.body.dir=this.props.i18n.dir(),Ap().s[3]++,le.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,le.jsxs("div",{className:"maputnik-layout-main",children:[le.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),le.jsx("div",{className:"maputnik-layout-drawer",children:le.jsx(Afe,{children:this.props.layerEditor})}),this.props.map]}),(Ap().b[0][0]++,this.props.bottom&&(Ap().b[0][1]++,le.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})}}Tn(vG,"childContextTypes",(Ap().s[0]++,{reactIconBase:pi.object}));const cfe=(Ap().s[4]++,Vs()(vG));function cl(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return cl=function(){return a},a}cl();class CG extends nr.Component{render(){var s,a;cl().f[1]++;const{t:e,selectedLayerIndex:t}=(cl().s[1]++,this.props),r=(cl().s[2]++,(s=this.props.errors)==null?void 0:s.map((o,d)=>{var b;cl().f[2]++;let g;if(cl().s[3]++,cl().b[1][0]++,o.parsed&&(cl().b[1][1]++,o.parsed.type==="layer")){cl().b[0][0]++;const{parsed:E}=(cl().s[4]++,o),S=(cl().s[5]++,(b=this.props.mapStyle)==null?void 0:b.layers[E.data.index].id);cl().s[6]++,g=le.jsxs(le.Fragment,{children:[le.jsxs(R0,{t:e,children:["Layer ",le.jsx("span",{children:gG(S)}),": ",E.data.message]}),(cl().b[2][0]++,t!==E.data.index&&(cl().b[2][1]++,le.jsxs(le.Fragment,{children:[" — ",le.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(cl().f[3]++,cl().s[7]++,this.props.onLayerSelect(E.data.index)),children:e("switch to layer")})]})))]})}else cl().b[0][1]++,cl().s[8]++,g=o.message;return cl().s[9]++,le.jsx("p",{className:"maputnik-message-panel-error",children:g},"error-"+d)})),i=(cl().s[10]++,(a=this.props.infos)==null?void 0:a.map((o,d)=>(cl().f[4]++,cl().s[11]++,le.jsx("p",{children:o},"info-"+d))));return cl().s[12]++,le.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}Tn(CG,"defaultProps",(cl().s[0]++,{onLayerSelect:()=>{cl().f[0]++}}));const dfe=(cl().s[13]++,Vs()(CG));function X2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="a416dfabb7eaa48bd0505cf98cb9c66326bca3ec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:165}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a416dfabb7eaa48bd0505cf98cb9c66326bca3ec"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return X2=function(){return a},a}X2();class J2 extends nr.Component{render(){return X2().f[0]++,X2().s[0]++,le.jsx(jC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(aG,{...this.props})})}}function ex(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4931f85d3ebf1a60a85ac9883e78e028b7a388d8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4931f85d3ebf1a60a85ac9883e78e028b7a388d8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ex=function(){return a},a}ex();class dp extends nr.Component{render(){return ex().f[0]++,ex().s[0]++,le.jsx(ya,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(cm,{...this.props})})}}function tx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="37d7b9547efb8875177dbe7a186e7965cd9eb1c0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37d7b9547efb8875177dbe7a186e7965cd9eb1c0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return tx=function(){return a},a}tx();class Hp extends nr.Component{render(){return tx().f[0]++,tx().s[0]++,le.jsx(ya,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(Ff,{...this.props})})}}function nx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="a176a83ddcea7ca7f45b0bf957355a9e0c40a3af",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:160}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAiBQ;AAjBR,OAAO,WAAW;AAClB,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,qBAAqB,iBAAiB,MAAM,UAAyB;AAAA,EACnE,SAAU;AACR,WACE,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WACpD,8BAAC,YAAU,GAAG,KAAK,OAAO,GAC5B;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a176a83ddcea7ca7f45b0bf957355a9e0c40a3af"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return nx=function(){return a},a}nx();class Uy extends nr.Component{render(){return nx().f[0]++,nx().s[0]++,le.jsx(ya,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(mI,{...this.props})})}}function rx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAM,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return rx=function(){return a},a}rx();class x3 extends nr.Component{render(){return rx().f[0]++,rx().s[0]++,le.jsx(ya,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(Zg,{...this.props})})}}function ix(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="5745e67ee75c0f352c022256ef8bf31e8fa7367f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:164}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,aAAW,GAAG,KAAK,OAAO,GAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5745e67ee75c0f352c022256ef8bf31e8fa7367f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ix=function(){return a},a}ix();class hfe extends nr.Component{render(){return ix().f[0]++,ix().s[0]++,le.jsx(jC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(pI,{...this.props})})}}function ox(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="4d9e98bd5e7819496a7ef6b66981b81e318fe1bf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:162}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d9e98bd5e7819496a7ef6b66981b81e318fe1bf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ox=function(){return a},a}ox();class ffe extends nr.Component{render(){return ox().f[0]++,ox().s[0]++,le.jsx(ya,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(sG,{...this.props})})}}function NC(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3f2b222219042b3cb4a75b927d846ca17e6201aa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:26,column:2}},1:{start:{line:1,column:21},end:{line:26,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:26,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3f2b222219042b3cb4a75b927d846ca17e6201aa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return NC=function(){return a},a}NC();NC().s[0]++;const _G=n=>(NC().f[0]++,NC().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Ui(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="2bfcb2bc337b915a29f70f26bbf03f5047260e49",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:295,column:6}},27:{start:{line:298,column:22},end:{line:298,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:296,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:160,column:21},end:{line:160,column:42}},type:"binary-expr",locations:[{start:{line:160,column:21},end:{line:160,column:36}},{start:{line:160,column:40},end:{line:160,column:42}}],line:160},9:{loc:{start:{line:289,column:21},end:{line:289,column:62}},type:"binary-expr",locations:[{start:{line:289,column:21},end:{line:289,column:50}},{start:{line:289,column:54},end:{line:289,column:62}}],line:289}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AA+GM,SACE,KADF;AA/GN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAUhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2bfcb2bc337b915a29f70f26bbf03f5047260e49"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ui=function(){return a},a}Ui();class pfe extends nr.Component{changeTransitionProperty(e,t){Ui().f[0]++;const r=(Ui().s[0]++,{...this.props.mapStyle.transition});Ui().s[1]++,t===void 0?(Ui().b[0][0]++,Ui().s[2]++,delete r[e]):(Ui().b[0][1]++,Ui().s[3]++,r[e]=t),Ui().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){Ui().f[1]++;const r=(Ui().s[5]++,{...this.props.mapStyle.light});Ui().s[6]++,t===void 0?(Ui().b[1][0]++,Ui().s[7]++,delete r[e]):(Ui().b[1][1]++,Ui().s[8]++,r[e]=t),Ui().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){Ui().f[2]++;const r=(Ui().s[10]++,{...this.props.mapStyle.terrain});Ui().s[11]++,t===void 0?(Ui().b[2][0]++,Ui().s[12]++,delete r[e]):(Ui().b[2][1]++,Ui().s[13]++,r[e]=t),Ui().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){Ui().f[3]++;const r=(Ui().s[15]++,{...this.props.mapStyle});Ui().s[16]++,t===void 0?(Ui().b[3][0]++,Ui().s[17]++,delete r[e]):(Ui().b[3][1]++,Ui().s[18]++,r[e]=t),Ui().s[19]++,this.props.onStyleChanged(r)}render(){Ui().f[4]++;const e=(Ui().s[20]++,Ui().b[4][0]++,this.props.mapStyle.metadata||(Ui().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(Ui().s[21]++,this.props),s=(Ui().s[22]++,_G(t)),a=(Ui().s[23]++,Ui().b[5][0]++,this.props.mapStyle.light||(Ui().b[5][1]++,{})),o=(Ui().s[24]++,Ui().b[6][0]++,this.props.mapStyle.transition||(Ui().b[6][1]++,{})),d=(Ui().s[25]++,Ui().b[7][0]++,this.props.mapStyle.terrain||(Ui().b[7][1]++,{}));return Ui().s[26]++,le.jsx(q0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:le.jsxs("div",{className:"modal:settings",children:[le.jsx(Hp,{label:t("Name"),fieldSpec:ns.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),le.jsx(Hp,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),le.jsx(Uy,{fieldSpec:ns.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),le.jsx(Uy,{label:t("Glyphs URL"),fieldSpec:ns.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),le.jsx(Hp,{label:s.maputnik.maptiler_access_token.label,fieldSpec:s.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),le.jsx(Hp,{label:s.maputnik.thunderforest_access_token.label,fieldSpec:s.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),le.jsx(Hp,{label:s.maputnik.stadia_access_token.label,fieldSpec:s.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),le.jsx(J2,{label:t("Center"),fieldSpec:ns.$root.center,length:2,type:"number",value:(Ui().b[8][0]++,i.center||(Ui().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),le.jsx(dp,{label:t("Zoom"),fieldSpec:ns.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),le.jsx(dp,{label:t("Bearing"),fieldSpec:ns.$root.bearing,value:i.bearing,default:ns.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),le.jsx(dp,{label:t("Pitch"),fieldSpec:ns.$root.pitch,value:i.pitch,default:ns.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),le.jsx(hfe,{label:t("Light anchor"),fieldSpec:ns.light.anchor,name:"light-anchor",value:a.anchor,options:Object.keys(ns.light.anchor.values),default:ns.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),le.jsx(ffe,{label:t("Light color"),fieldSpec:ns.light.color,value:a.color,default:ns.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),le.jsx(dp,{label:t("Light intensity"),fieldSpec:ns.light.intensity,value:a.intensity,default:ns.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),le.jsx(J2,{label:t("Light position"),fieldSpec:ns.light.position,type:"number",length:ns.light.position.length,value:a.position,default:ns.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),le.jsx(Hp,{label:t("Terrain source"),fieldSpec:ns.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:d.source,onChange:this.changeTerrainProperty.bind(this,"source")}),le.jsx(dp,{label:t("Terrain exaggeration"),fieldSpec:ns.terrain.exaggeration,value:d.exaggeration,default:ns.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),le.jsx(dp,{label:t("Transition delay"),fieldSpec:ns.transition.delay,value:o.delay,default:ns.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),le.jsx(dp,{label:t("Transition duration"),fieldSpec:ns.transition.duration,value:o.duration,default:ns.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),le.jsx(x3,{label:s.maputnik.style_renderer.label,fieldSpec:s.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Ui().b[9][0]++,e["maputnik:renderer"]||(Ui().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const mfe=(Ui().s[27]++,Vs()(pfe));var Yb={exports:{}},gfe=Yb.exports,JK;function yfe(){return JK||(JK=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",gfe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),r=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(s,a){if(typeof s!="string")throw new Error("slugify: string argument expected");a=typeof a=="string"?{replacement:a}:a||{};var o=r[a.locale]||{},d=a.replacement===void 0?"-":a.replacement,g=a.trim===void 0?!0:a.trim,b=s.normalize().split("").reduce(function(E,S){var B=o[S];return B===void 0&&(B=t[S]),B===void 0&&(B=S),B===d&&(B=" "),E+B.replace(a.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return a.strict&&(b=b.replace(/[^A-Za-z0-9\s]/g,"")),g&&(b=b.trim()),b=b.replace(/\s+/g,d),a.lower&&(b=b.toLowerCase()),b}return i.extend=function(s){Object.assign(t,s)},i})}(Yb)),Yb.exports}var vfe=yfe();const Cfe=Xa(vfe);var $b={exports:{}},_fe=$b.exports,eF;function bfe(){return eF||(eF=1,function(n,e){(function(t,r){r()})(_fe,function(){function t(g,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function r(g,b,E){var S=new XMLHttpRequest;S.open("GET",g),S.responseType="blob",S.onload=function(){d(S.response,b,E)},S.onerror=function(){console.error("could not download file")},S.send()}function i(g){var b=new XMLHttpRequest;b.open("HEAD",g,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function s(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(b)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(g,b,E){var S=a.URL||a.webkitURL,B=document.createElement("a");b=b||g.name||"download",B.download=b,B.rel="noopener",typeof g=="string"?(B.href=g,B.origin===location.origin?s(B):i(B.href)?r(g,b,E):s(B,B.target="_blank")):(B.href=S.createObjectURL(g),setTimeout(function(){S.revokeObjectURL(B.href)},4e4),setTimeout(function(){s(B)},0))}:"msSaveOrOpenBlob"in navigator?function(g,b,E){if(b=b||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(t(g,E),b);else if(i(g))r(g,b,E);else{var S=document.createElement("a");S.href=g,S.target="_blank",setTimeout(function(){s(S)})}}:function(g,b,E,S){if(S=S||open("","_blank"),S&&(S.document.title=S.document.body.innerText="downloading..."),typeof g=="string")return r(g,b,E);var B=g.type==="application/octet-stream",k=/constructor/i.test(a.HTMLElement)||a.safari,z=/CriOS\/[\d]+/.test(navigator.userAgent);if((z||B&&k||o)&&typeof FileReader<"u"){var j=new FileReader;j.onloadend=function(){var ie=j.result;ie=z?ie:ie.replace(/^data:[^;]*;/,"data:attachment/file;"),S?S.location.href=ie:location=ie,S=null},j.readAsDataURL(g)}else{var Y=a.URL||a.webkitURL,q=Y.createObjectURL(g);S?S.location=q:location.href=q,S=null,setTimeout(function(){Y.revokeObjectURL(q)},4e4)}});a.saveAs=d.saveAs=d,n.exports=d})}($b)),$b.exports}var tF=bfe();const xfe="5.0.1",wfe="get_your_own_OpIi9ZULNHzrESv6T2vL",Mfe="b71f7f0ba4064f5eb9e903859a9cf5c6",bG={openmaptiles:wfe,thunderforest:Mfe};function ur(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="c162664fcb147ac7caff0efb860cd8a0c7d435d1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:15,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:17}},5:{start:{line:16,column:2},end:{line:16,column:15}},6:{start:{line:19,column:24},end:{line:23,column:4}},7:{start:{line:20,column:25},end:{line:20,column:37}},8:{start:{line:21,column:4},end:{line:21,column:36}},9:{start:{line:22,column:4},end:{line:22,column:24}},10:{start:{line:24,column:2},end:{line:27,column:4}},11:{start:{line:30,column:2},end:{line:33,column:4}},12:{start:{line:36,column:2},end:{line:36,column:69}},13:{start:{line:39,column:2},end:{line:43,column:3}},14:{start:{line:39,column:15},end:{line:39,column:16}},15:{start:{line:40,column:4},end:{line:42,column:5}},16:{start:{line:41,column:6},end:{line:41,column:15}},17:{start:{line:44,column:2},end:{line:44,column:14}},18:{start:{line:47,column:19},end:{line:47,column:42}},19:{start:{line:48,column:20},end:{line:48,column:67}},20:{start:{line:49,column:2},end:{line:51,column:3}},21:{start:{line:50,column:4},end:{line:50,column:37}},22:{start:{line:52,column:2},end:{line:52,column:21}},23:{start:{line:55,column:17},end:{line:55,column:45}},24:{start:{line:56,column:2},end:{line:56,column:31}},25:{start:{line:56,column:15},end:{line:56,column:31}},26:{start:{line:57,column:2},end:{line:57,column:57}},27:{start:{line:57,column:41},end:{line:57,column:57}},28:{start:{line:58,column:23},end:{line:58,column:33}},29:{start:{line:59,column:2},end:{line:63,column:3}},30:{start:{line:60,column:4},end:{line:60,column:37}},31:{start:{line:61,column:9},end:{line:63,column:3}},32:{start:{line:62,column:4},end:{line:62,column:30}},33:{start:{line:64,column:22},end:{line:64,column:68}},34:{start:{line:65,column:2},end:{line:67,column:3}},35:{start:{line:66,column:4},end:{line:66,column:20}},36:{start:{line:69,column:2},end:{line:73,column:3}},37:{start:{line:70,column:4},end:{line:70,column:55}},38:{start:{line:72,column:4},end:{line:72,column:57}},39:{start:{line:74,column:25},end:{line:80,column:3}},40:{start:{line:81,column:23},end:{line:84,column:3}},41:{start:{line:85,column:2},end:{line:85,column:22}},42:{start:{line:88,column:21},end:{line:88,column:29}},43:{start:{line:89,column:2},end:{line:91,column:5}},44:{start:{line:90,column:4},end:{line:90,column:76}},45:{start:{line:92,column:2},end:{line:100,column:3}},46:{start:{line:93,column:27},end:{line:93,column:73}},47:{start:{line:94,column:4},end:{line:99,column:5}},48:{start:{line:95,column:6},end:{line:98,column:8}},49:{start:{line:101,column:2},end:{line:101,column:22}},50:{start:{line:104,column:26},end:{line:106,column:3}},51:{start:{line:107,column:2},end:{line:107,column:63}},52:{start:{line:108,column:2},end:{line:108,column:64}},53:{start:{line:109,column:2},end:{line:109,column:57}},54:{start:{line:110,column:2},end:{line:113,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:17,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:39},end:{line:28,column:1}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:19,column:41},end:{line:19,column:42}},loc:{start:{line:19,column:52},end:{line:23,column:3}},line:19},4:{name:"ensureHasNoRefs",decl:{start:{line:29,column:9},end:{line:29,column:24}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"ensureStyleValidity",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:36},end:{line:37,column:1}},line:35},6:{name:"indexOfLayer",decl:{start:{line:38,column:9},end:{line:38,column:21}},loc:{start:{line:38,column:39},end:{line:45,column:1}},line:38},7:{name:"getAccessToken",decl:{start:{line:46,column:9},end:{line:46,column:23}},loc:{start:{line:46,column:52},end:{line:53,column:1}},line:46},8:{name:"replaceSourceAccessToken",decl:{start:{line:54,column:9},end:{line:54,column:33}},loc:{start:{line:54,column:67},end:{line:86,column:1}},line:54},9:{name:"replaceAccessTokens",decl:{start:{line:87,column:9},end:{line:87,column:28}},loc:{start:{line:87,column:50},end:{line:102,column:1}},line:87},10:{name:"(anonymous_10)",decl:{start:{line:89,column:40},end:{line:89,column:41}},loc:{start:{line:89,column:56},end:{line:91,column:3}},line:89},11:{name:"stripAccessTokens",decl:{start:{line:103,column:9},end:{line:103,column:26}},loc:{start:{line:103,column:37},end:{line:114,column:1}},line:103}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:47,column:19},end:{line:47,column:42}},type:"binary-expr",locations:[{start:{line:47,column:19},end:{line:47,column:36}},{start:{line:47,column:40},end:{line:47,column:42}}],line:47},4:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:49,column:6},end:{line:49,column:40}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:24}},{start:{line:49,column:28},end:{line:49,column:40}}],line:49},6:{loc:{start:{line:54,column:56},end:{line:54,column:65}},type:"default-arg",locations:[{start:{line:54,column:63},end:{line:54,column:65}}],line:54},7:{loc:{start:{line:56,column:2},end:{line:56,column:31}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:57,column:2},end:{line:57,column:57}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},9:{loc:{start:{line:57,column:6},end:{line:57,column:39}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:24}},{start:{line:57,column:28},end:{line:57,column:39}}],line:57},10:{loc:{start:{line:59,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:63,column:3}},{start:{line:61,column:9},end:{line:63,column:3}}],line:59},11:{loc:{start:{line:59,column:6},end:{line:59,column:89}},type:"binary-expr",locations:[{start:{line:59,column:6},end:{line:59,column:46}},{start:{line:59,column:50},end:{line:59,column:89}}],line:59},12:{loc:{start:{line:61,column:9},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:9},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},13:{loc:{start:{line:61,column:13},end:{line:61,column:70}},type:"binary-expr",locations:[{start:{line:61,column:13},end:{line:61,column:28}},{start:{line:61,column:32},end:{line:61,column:70}}],line:61},14:{loc:{start:{line:65,column:2},end:{line:67,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:67,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},15:{loc:{start:{line:69,column:2},end:{line:73,column:3}},type:"if",locations:[{start:{line:69,column:2},end:{line:73,column:3}},{start:{line:71,column:9},end:{line:73,column:3}}],line:69},16:{loc:{start:{line:87,column:39},end:{line:87,column:48}},type:"default-arg",locations:[{start:{line:87,column:46},end:{line:87,column:48}}],line:87},17:{loc:{start:{line:92,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:92,column:2},end:{line:100,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},18:{loc:{start:{line:92,column:6},end:{line:92,column:114}},type:"binary-expr",locations:[{start:{line:92,column:6},end:{line:92,column:21}},{start:{line:92,column:26},end:{line:92,column:69}},{start:{line:92,column:73},end:{line:92,column:113}}],line:92},19:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0],17:[0,0],18:[0,0,0],19:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAGnB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAkF;AACrG,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAA0C;AACxE,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAA0C;AACjE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAgE;AAC3F,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c162664fcb147ac7caff0efb860cd8a0c7d435d1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ur=function(){return a},a}ur();const Sfe=(ur().s[0]++,wG({version:8,sources:{},layers:[]}));function xG(){return ur().f[0]++,ur().s[1]++,Math.random().toString(36).substring(2,9)}function Efe(n){return ur().f[1]++,ur().s[2]++,ur().b[1][0]++,!("id"in n)||(ur().b[1][1]++,!n.id)?(ur().b[0][0]++,ur().s[3]++,n.id=xG(),ur().s[4]++,n):(ur().b[0][1]++,ur().s[5]++,n)}function Bfe(n){ur().f[2]++;const e=(ur().s[6]++,n.layers.map(t=>{ur().f[3]++;const r=(ur().s[7]++,{...t});return ur().s[8]++,delete r.interactive,ur().s[9]++,r}));return ur().s[10]++,{...n,layers:e}}function Ofe(n){return ur().f[4]++,ur().s[11]++,{...n,layers:z$(n.layers)}}function wG(n){return ur().f[5]++,ur().s[12]++,Bfe(Ofe(Efe(n)))}function Ife(n,e){ur().f[6]++,ur().s[13]++;for(let t=(ur().s[14]++,0);t<n.length;t++){if(ur().s[15]++,n[t].id===e)return ur().b[2][0]++,ur().s[16]++,t;ur().b[2][1]++}return ur().s[17]++,null}function yI(n,e,t){ur().f[7]++;const r=(ur().s[18]++,ur().b[3][0]++,e.metadata||(ur().b[3][1]++,{}));let i=(ur().s[19]++,r[`maputnik:${n}_access_token`]);return ur().s[20]++,ur().b[5][0]++,t.allowFallback&&(ur().b[5][1]++,!i)?(ur().b[4][0]++,ur().s[21]++,i=bG[n]):ur().b[4][1]++,ur().s[22]++,i}function kfe(n,e,t=(ur().b[6][0]++,{})){var g;ur().f[8]++;const r=(ur().s[23]++,n.sources[e]);if(ur().s[24]++,r)ur().b[7][1]++;else return ur().b[7][0]++,ur().s[25]++,n;if(ur().s[26]++,ur().b[9][0]++,!("url"in r)||(ur().b[9][1]++,!r.url))return ur().b[8][0]++,ur().s[27]++,n;ur().b[8][1]++;let i=(ur().s[28]++,e);ur().s[29]++,ur().b[11][0]++,e==="thunderforest_transport"||(ur().b[11][1]++,e==="thunderforest_outdoors")?(ur().b[10][0]++,ur().s[30]++,i="thunderforest"):(ur().b[10][1]++,ur().s[31]++,ur().b[13][0]++,"url"in r&&(ur().b[13][1]++,(g=r.url)==null?void 0:g.match(/\.stadiamaps\.com/))?(ur().b[12][0]++,ur().s[32]++,i="stadia"):ur().b[12][1]++);const s=(ur().s[33]++,yI(i,n,t));if(ur().s[34]++,s)ur().b[14][1]++;else return ur().b[14][0]++,ur().s[35]++,n;let a;ur().s[36]++,i=="stadia"?(ur().b[15][0]++,ur().s[37]++,a=`${r.url}?api_key=${s}`):(ur().b[15][1]++,ur().s[38]++,a=r.url.replace("{key}",s));const o=(ur().s[39]++,{...n.sources,[e]:{...r,url:a}}),d=(ur().s[40]++,{...n,sources:o});return ur().s[41]++,d}function Tfe(n,e=(ur().b[16][0]++,{})){ur().f[9]++;let t=(ur().s[42]++,n);if(ur().s[43]++,Object.keys(n.sources).forEach(r=>{ur().f[10]++,ur().s[44]++,t=kfe(t,r,e)}),ur().s[45]++,ur().b[18][0]++,n.glyphs&&(ur().b[18][1]++,n.glyphs.match(/\.tilehosting\.com/)||(ur().b[18][2]++,n.glyphs.match(/\.maptiler\.com/)))){ur().b[17][0]++;const r=(ur().s[46]++,yI("openmaptiles",n,e));ur().s[47]++,r?(ur().b[19][0]++,ur().s[48]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):ur().b[19][1]++}else ur().b[17][1]++;return ur().s[49]++,t}function Pfe(n){ur().f[11]++;const e=(ur().s[50]++,{...n.metadata});return ur().s[51]++,delete e["maputnik:openmaptiles_access_token"],ur().s[52]++,delete e["maputnik:thunderforest_access_token"],ur().s[53]++,delete e["maputnik:stadia_access_token"],ur().s[54]++,{...n,metadata:e}}const pc={ensureStyleValidity:wG,emptyStyle:Sfe,indexOfLayer:Ife,generateId:xG,getAccessToken:yI,replaceAccessTokens:Tfe,stripAccessTokens:Pfe};function Hr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="66cf81ab709608eec5a644a6a17a019c5afe48ce",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:179,column:6}},46:{start:{line:182,column:20},end:{line:182,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:180,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:168,column:12},end:{line:171,column:16}},type:"binary-expr",locations:[{start:{line:168,column:12},end:{line:168,column:39}},{start:{line:168,column:59},end:{line:171,column:16}}],line:168}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AAErB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAGhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"66cf81ab709608eec5a644a6a17a019c5afe48ce"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Hr=function(){return a},a}Hr();const nF=(Hr().s[0]++,xfe),rF=(Hr().s[1]++,typeof window.showSaveFilePicker=="function");class Rfe extends nr.Component{tokenizedStyle(){return Hr().f[0]++,Hr().s[2]++,HU(pc.stripAccessTokens(pc.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Hr().f[1]++,Hr().s[3]++,this.props.mapStyle.name?(Hr().b[0][0]++,Hr().s[4]++,Cfe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Hr().b[0][1]++,Hr().s[5]++,this.props.mapStyle.id)}createHtml(){Hr().f[2]++;const e=(Hr().s[6]++,this.tokenizedStyle()),t=(Hr().s[7]++,Hr().b[1][0]++,this.props.mapStyle.name||(Hr().b[1][1]++,this.props.t("Map"))),r=(Hr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${nF}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${nF}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Hr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),s=(Hr().s[10]++,this.exportName());Hr().s[11]++,tF.saveAs(i,s+".html")}async saveStyle(){Hr().f[3]++;const e=(Hr().s[12]++,this.tokenizedStyle());if(Hr().s[13]++,rF)Hr().b[2][1]++;else{Hr().b[2][0]++;const i=(Hr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),s=(Hr().s[15]++,this.exportName());Hr().s[16]++,tF.saveAs(i,s+".json"),Hr().s[17]++;return}let t=(Hr().s[18]++,this.props.fileHandle);if(Hr().s[19]++,t==null)if(Hr().b[3][0]++,Hr().s[20]++,t=await this.createFileHandle(),Hr().s[21]++,this.props.onSetFileHandle(t),Hr().s[22]++,t==null){Hr().b[4][0]++,Hr().s[23]++;return}else Hr().b[4][1]++;else Hr().b[3][1]++;const r=(Hr().s[24]++,await t.createWritable());Hr().s[25]++,await r.write(e),Hr().s[26]++,await r.close(),Hr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Hr().f[4]++;const e=(Hr().s[28]++,this.tokenizedStyle()),t=(Hr().s[29]++,await this.createFileHandle());if(Hr().s[30]++,this.props.onSetFileHandle(t),Hr().s[31]++,t==null){Hr().b[5][0]++,Hr().s[32]++;return}else Hr().b[5][1]++;const r=(Hr().s[33]++,await t.createWritable());Hr().s[34]++,await r.write(e),Hr().s[35]++,await r.close(),Hr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Hr().f[5]++;const e=(Hr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Hr().s[38]++,await window.showSaveFilePicker(e));return Hr().s[39]++,this.props.onSetFileHandle(t),Hr().s[40]++,t}changeMetadataProperty(e,t){Hr().f[6]++;const r=(Hr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Hr().s[42]++,this.props.onStyleChanged(r)}render(){Hr().f[7]++;const e=(Hr().s[43]++,this.props.t),t=(Hr().s[44]++,_G(e));return Hr().s[45]++,le.jsx(q0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Save Style")}),le.jsx("p",{children:e("Save the JSON style to your computer.")}),le.jsxs("div",{children:[le.jsx(Hp,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Hr().b[6][0]++,this.props.mapStyle.metadata||(Hr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),le.jsx(Hp,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Hr().b[7][0]++,this.props.mapStyle.metadata||(Hr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),le.jsx(Hp,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Hr().b[8][0]++,this.props.mapStyle.metadata||(Hr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")})]}),le.jsxs("div",{className:"maputnik-modal-export-buttons",children:[le.jsxs(Za,{onClick:this.saveStyle.bind(this),children:[le.jsx(z6,{}),e("Save")]}),(Hr().b[9][0]++,rF&&(Hr().b[9][1]++,le.jsxs(Za,{onClick:this.saveStyleAs.bind(this),children:[le.jsx(z6,{}),e("Save as")]}))),le.jsxs(Za,{onClick:this.createHtml.bind(this),children:[le.jsx(qZ,{}),e("Create HTML")]})]})]})})}}const Dfe=(Hr().s[46]++,Vs()(Rfe));function sx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="950dd35e62562a3439b74678b95f406e749c6958",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:139}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAWM;AAXN,OAAO,WAAW;AAClB,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OACjC,8BAAC,qBAAmB,GAAG,KAAK,OAAO,GACrC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"950dd35e62562a3439b74678b95f406e749c6958"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return sx=function(){return a},a}sx();class MG extends nr.Component{render(){return sx().f[0]++,sx().s[0]++,le.jsx(jC,{label:this.props.label,children:le.jsx(uG,{...this.props})})}}function ax(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="a27c35e986d22656fa80c276efb67df518853ac2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:132}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAC9B,8BAAC,iBAAe,GAAG,KAAK,OAAO,GACjC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a27c35e986d22656fa80c276efb67df518853ac2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ax=function(){return a},a}ax();class Kfe extends nr.Component{render(){return ax().f[0]++,ax().s[0]++,le.jsx(ya,{label:this.props.label,children:le.jsx(fI,{...this.props})})}}function qn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="dab453a2f232d0ad88af178ab26f5244dd676038",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dab453a2f232d0ad88af178ab26f5244dd676038"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return qn=function(){return a},a}qn();class vE extends nr.Component{render(){qn().f[0]++;const e=(qn().s[0]++,this.props.t);return qn().s[1]++,le.jsxs("div",{children:[le.jsx(Uy,{label:e("TileJSON URL"),fieldSpec:Ns.source_vector.url,value:this.props.source.url,onChange:t=>(qn().f[1]++,qn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class CE extends nr.Component{changeTileUrls(e){qn().f[2]++,qn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){qn().f[3]++;const e=(qn().s[4]++,qn().b[0][0]++,this.props.source.tiles||(qn().b[0][1]++,[]));return qn().s[5]++,le.jsx(MG,{label:this.props.t("Tile URL"),fieldSpec:Ns.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){qn().f[4]++;const e=(qn().s[6]++,this.props.t);return qn().s[7]++,le.jsxs("div",{children:[this.renderTileUrls(),le.jsx(x3,{label:e("Scheme Type"),fieldSpec:Ns.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(qn().f[5]++,qn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),le.jsx(dp,{label:e("Min Zoom"),fieldSpec:Ns.source_vector.minzoom,value:(qn().b[1][0]++,this.props.source.minzoom||(qn().b[1][1]++,0)),onChange:t=>(qn().f[6]++,qn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),le.jsx(dp,{label:e("Max Zoom"),fieldSpec:Ns.source_vector.maxzoom,value:(qn().b[2][0]++,this.props.source.maxzoom||(qn().b[2][1]++,22)),onChange:t=>(qn().f[7]++,qn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}qn().s[11]++;const SG=n=>(qn().f[8]++,qn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class Ffe extends nr.Component{render(){qn().f[9]++;const e=(qn().s[13]++,this.props.t);qn().s[14]++;const t=(r,i)=>{qn().f[10]++;const s=(qn().s[15]++,this.props.source.coordinates.slice(0));qn().s[16]++,s[r]=i,qn().s[17]++,this.props.onChange({...this.props.source,coordinates:s})};return qn().s[18]++,le.jsxs("div",{children:[le.jsx(Uy,{label:e("Image URL"),fieldSpec:Ns.source_image.url,value:this.props.source.url,onChange:r=>(qn().f[11]++,qn().s[19]++,this.props.onChange({...this.props.source,url:r}))}),SG(e).map(({label:r,key:i},s)=>(qn().f[12]++,qn().s[20]++,le.jsx(J2,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(qn().f[13]++,qn().s[21]++,t(s,a))},i)))]})}}class Lfe extends nr.Component{render(){qn().f[14]++;const e=(qn().s[22]++,this.props.t);qn().s[23]++;const t=(i,s)=>{qn().f[15]++;const a=(qn().s[24]++,this.props.source.coordinates.slice(0));qn().s[25]++,a[i]=s,qn().s[26]++,this.props.onChange({...this.props.source,coordinates:a})};qn().s[27]++;const r=i=>{qn().f[16]++,qn().s[28]++,this.props.onChange({...this.props.source,urls:i})};return qn().s[29]++,le.jsxs("div",{children:[le.jsx(MG,{label:e("Video URL"),fieldSpec:Ns.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),SG(e).map(({label:i,key:s},a)=>(qn().f[17]++,qn().s[30]++,le.jsx(J2,{label:i,length:2,type:"number",value:this.props.source.coordinates[a],default:[0,0],onChange:o=>(qn().f[18]++,qn().s[31]++,t(a,o))},s)))]})}}class Ufe extends nr.Component{render(){qn().f[19]++;const e=(qn().s[32]++,this.props.t);return qn().s[33]++,le.jsx(Uy,{label:e("GeoJSON URL"),fieldSpec:Ns.source_geojson.data,value:this.props.source.data,onChange:t=>(qn().f[20]++,qn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class zfe extends nr.Component{render(){qn().f[21]++;const e=(qn().s[35]++,this.props.t);return qn().s[36]++,le.jsxs("div",{children:[le.jsx(ya,{label:e("GeoJSON"),fieldSpec:Ns.source_geojson.data,children:le.jsx(YO,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{qn().f[22]++,qn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),le.jsx(Kfe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{qn().f[23]++,qn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class jfe extends nr.Component{render(){qn().f[24]++;const e=(qn().s[39]++,this.props.t);return qn().s[40]++,le.jsxs("div",{children:[le.jsx(Uy,{label:e("PMTiles URL"),fieldSpec:Ns.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(qn().f[25]++,qn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(qn().b[3][0]++,t):(qn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class Nfe extends nr.Component{render(){qn().f[26]++;const e=(qn().s[42]++,this.props.t),t=(qn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(qn().s[44]++,this.props.mode){case"geojson_url":return qn().b[4][0]++,qn().s[45]++,le.jsx(Ufe,{...t});case"geojson_json":return qn().b[4][1]++,qn().s[46]++,le.jsx(zfe,{...t});case"tilejson_vector":return qn().b[4][2]++,qn().s[47]++,le.jsx(vE,{...t});case"tile_vector":return qn().b[4][3]++,qn().s[48]++,le.jsx(CE,{...t});case"tilejson_raster":return qn().b[4][4]++,qn().s[49]++,le.jsx(vE,{...t});case"tile_raster":return qn().b[4][5]++,qn().s[50]++,le.jsx(CE,{...t,children:le.jsx(dp,{label:e("Tile Size"),fieldSpec:Ns.source_raster.tileSize,onChange:r=>(qn().f[27]++,qn().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(qn().b[5][0]++,this.props.source.tileSize||(qn().b[5][1]++,Ns.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return qn().b[4][6]++,qn().s[52]++,le.jsx(vE,{...t});case"tilexyz_raster-dem":return qn().b[4][7]++,qn().s[53]++,le.jsxs(CE,{...t,children:[le.jsx(dp,{label:e("Tile Size"),fieldSpec:Ns.source_raster_dem.tileSize,onChange:r=>(qn().f[28]++,qn().s[54]++,this.props.onChange({...this.props.source,tileSize:r})),value:(qn().b[6][0]++,this.props.source.tileSize||(qn().b[6][1]++,Ns.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),le.jsx(x3,{label:e("Encoding"),fieldSpec:Ns.source_raster_dem.encoding,options:Object.keys(Ns.source_raster_dem.encoding.values),onChange:r=>(qn().f[29]++,qn().s[55]++,this.props.onChange({...this.props.source,encoding:r})),value:(qn().b[7][0]++,this.props.source.encoding||(qn().b[7][1]++,Ns.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return qn().b[4][8]++,qn().s[56]++,le.jsx(jfe,{...t});case"image":return qn().b[4][9]++,qn().s[57]++,le.jsx(Ffe,{...t});case"video":return qn().b[4][10]++,qn().s[58]++,le.jsx(Lfe,{...t});default:return qn().b[4][11]++,qn().s[59]++,null}}}const EG=(qn().s[60]++,Vs()(Nfe));function gp(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="315b9927ffd3b5bf51669bb9e53779783a451930",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAEO,gBAAS,aAAa,UAA8B,UAAkB;AAC3E,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAA8B,UAAkB,QAA6B;AACrG,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAA8B,UAAkB,QAA6B;AACxG,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"315b9927ffd3b5bf51669bb9e53779783a451930"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return gp=function(){return a},a}gp();function Wfe(n,e){gp().f[0]++;const t=(gp().s[0]++,{...n.sources});return gp().s[1]++,delete t[e],gp().s[2]++,{...n,sources:t}}function iF(n,e,t){return gp().f[1]++,gp().s[3]++,BG(n,e,t)}function BG(n,e,t){gp().f[2]++;const r=(gp().s[4]++,{...n.sources,[e]:t});return gp().s[5]++,{...n,sources:r}}const Gfe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},Qfe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},qfe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},Yfe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},oF={openmaptiles:Gfe,thunderforest_transport:Qfe,thunderforest_outdoors:qfe,open_zoomstack:Yfe};function un(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAgCU,cACA,YADA;AAhCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAU1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return un=function(){return a},a}un();class $fe extends nr.Component{render(){return un().f[0]++,un().s[0]++,le.jsx("div",{className:"maputnik-public-source",children:le.jsxs(Za,{className:"maputnik-public-source-select",onClick:()=>(un().f[1]++,un().s[1]++,this.props.onSelect(this.props.id)),children:[le.jsxs("div",{className:"maputnik-public-source-info",children:[le.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),le.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),le.jsx("span",{className:"maputnik-space"}),le.jsx(ez,{})]})})}}function Vfe(n){return un().f[2]++,un().s[2]++,n.type==="raster"?(un().b[0][0]++,un().s[3]++,n.tiles?(un().b[1][0]++,un().s[4]++,"tile_raster"):(un().b[1][1]++,un().s[5]++,"tilejson_raster")):(un().b[0][1]++,un().s[6]++,n.type==="raster-dem"?(un().b[2][0]++,un().s[7]++,n.tiles?(un().b[3][0]++,un().s[8]++,"tilexyz_raster-dem"):(un().b[3][1]++,un().s[9]++,"tilejson_raster-dem")):(un().b[2][1]++,un().s[10]++,n.type==="vector"?(un().b[4][0]++,un().s[11]++,n.tiles?(un().b[5][0]++,un().s[12]++,"tile_vector"):(un().b[5][1]++,un().s[13]++,un().b[7][0]++,n.url&&(un().b[7][1]++,n.url.startsWith("pmtiles://"))?(un().b[6][0]++,un().s[14]++,"pmtiles_vector"):(un().b[6][1]++,un().s[15]++,"tilejson_vector"))):(un().b[4][1]++,un().s[16]++,n.type==="geojson"?(un().b[8][0]++,un().s[17]++,typeof n.data=="string"?(un().b[9][0]++,un().s[18]++,"geojson_url"):(un().b[9][1]++,un().s[19]++,"geojson_json")):(un().b[8][1]++,un().s[20]++,n.type==="image"?(un().b[10][0]++,un().s[21]++,"image"):(un().b[10][1]++,un().s[22]++,n.type==="video"?(un().b[11][0]++,un().s[23]++,"video"):(un().b[11][1]++,un().s[24]++,null))))))}class Hfe extends nr.Component{render(){un().f[3]++;const e=(un().s[25]++,this.props.t);return un().s[26]++,le.jsxs("div",{className:"maputnik-active-source-type-editor",children:[le.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[le.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),le.jsx("span",{className:"maputnik-space"}),le.jsx(Za,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(un().f[4]++,un().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:le.jsx(Gy,{})})]}),le.jsx("div",{className:"maputnik-active-source-type-editor-content",children:le.jsx(EG,{onChange:this.props.onChange,mode:Vfe(this.props.source),source:this.props.source})})]})}}class Zfe extends nr.Component{constructor(t){un().f[5]++,un().s[28]++;super(t);Tn(this,"onAdd",(un().s[45]++,()=>{un().f[7]++;const{source:t,sourceId:r}=(un().s[46]++,this.state);un().s[47]++,this.props.onAdd(r,t)}));Tn(this,"onChangeSource",(un().s[48]++,t=>{un().f[8]++,un().s[49]++,this.setState({source:t})}));un().s[29]++,this.state={mode:"tilejson_vector",sourceId:pc.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(t){un().f[6]++;const r=(un().s[30]++,un().b[12][0]++,(un().b[13][0]++,this.state||(un().b[13][1]++,{})).source||(un().b[12][1]++,{})),{protocol:i}=(un().s[31]++,window.location);switch(un().s[32]++,t){case"pmtiles_vector":return un().b[14][0]++,un().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return un().b[14][1]++,un().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return un().b[14][2]++,un().s[35]++,{type:"geojson",cluster:(un().b[15][0]++,r.cluster||(un().b[15][1]++,!1)),data:""};case"tilejson_vector":return un().b[14][3]++,un().s[36]++,{type:"vector",url:(un().b[16][0]++,r.url||(un().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return un().b[14][4]++,un().s[37]++,{type:"vector",tiles:(un().b[17][0]++,r.tiles||(un().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(un().b[18][0]++,r.minzoom||(un().b[18][1]++,0)),maxzoom:(un().b[19][0]++,r.maxzoom||(un().b[19][1]++,14)),scheme:(un().b[20][0]++,r.scheme||(un().b[20][1]++,"xyz"))};case"tilejson_raster":return un().b[14][5]++,un().s[38]++,{type:"raster",url:(un().b[21][0]++,r.url||(un().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return un().b[14][6]++,un().s[39]++,{type:"raster",tiles:(un().b[22][0]++,r.tiles||(un().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(un().b[23][0]++,r.minzoom||(un().b[23][1]++,0)),maxzoom:(un().b[24][0]++,r.maxzoom||(un().b[24][1]++,14)),scheme:(un().b[25][0]++,r.scheme||(un().b[25][1]++,"xyz")),tileSize:(un().b[26][0]++,r.tileSize||(un().b[26][1]++,512))};case"tilejson_raster-dem":return un().b[14][7]++,un().s[40]++,{type:"raster-dem",url:(un().b[27][0]++,r.url||(un().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return un().b[14][8]++,un().s[41]++,{type:"raster-dem",tiles:(un().b[28][0]++,r.tiles||(un().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(un().b[29][0]++,r.minzoom||(un().b[29][1]++,0)),maxzoom:(un().b[30][0]++,r.maxzoom||(un().b[30][1]++,14)),tileSize:(un().b[31][0]++,r.tileSize||(un().b[31][1]++,512))};case"image":return un().b[14][9]++,un().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return un().b[14][10]++,un().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return un().b[14][11]++,un().s[44]++,{}}}render(){un().f[9]++;const t=(un().s[50]++,this.props.t),r=(un().s[51]++,{doc:ns.source_vector.type.doc});return un().s[52]++,le.jsxs("div",{className:"maputnik-add-source",children:[le.jsx(Hp,{label:t("Source ID"),fieldSpec:{doc:t("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(un().f[10]++,un().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),le.jsx(x3,{label:t("Source Type"),fieldSpec:r,options:[["geojson_json",t("GeoJSON (JSON)")],["geojson_url",t("GeoJSON (URL)")],["tilejson_vector",t("Vector (TileJSON URL)")],["tile_vector",t("Vector (Tile URLs)")],["tilejson_raster",t("Raster (TileJSON URL)")],["tile_raster",t("Raster (Tile URLs)")],["tilejson_raster-dem",t("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",t("Raster DEM (XYZ URLs)")],["pmtiles_vector",t("Vector (PMTiles)")],["image",t("Image")],["video",t("Video")]],onChange:i=>(un().f[11]++,un().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),le.jsx(EG,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),le.jsx(Za,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:t("Add Source")})]})}}class Xfe extends nr.Component{stripTitle(e){un().f[12]++;const t=(un().s[55]++,{...e});return un().s[56]++,delete t.title,un().s[57]++,t}render(){un().f[13]++;const{t:e,mapStyle:t}=(un().s[58]++,this.props),r=(un().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(un().s[60]++,Object.keys(t.sources).map(a=>{un().f[14]++;const o=(un().s[61]++,t.sources[a]);return un().s[62]++,le.jsx(Hfe,{sourceId:a,source:o,onChange:d=>(un().f[15]++,un().s[63]++,this.props.onStyleChanged(BG(t,a,d))),onDelete:()=>(un().f[16]++,un().s[64]++,this.props.onStyleChanged(Wfe(t,a))),...r},a)})),s=(un().s[65]++,Object.keys(oF).filter(a=>(un().f[17]++,un().s[66]++,!(a in t.sources))).map(a=>{un().f[18]++;const o=(un().s[67]++,oF[a]);return un().s[68]++,le.jsx($fe,{id:a,type:o.type,title:o.title,onSelect:()=>(un().f[19]++,un().s[69]++,this.props.onStyleChanged(iF(t,a,this.stripTitle(o))))},a)}));return un().s[70]++,le.jsxs(q0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Active Sources")}),i]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Choose Public Source")}),le.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),le.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:s})]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Add New Source")}),le.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),le.jsx(Zfe,{onAdd:(a,o)=>(un().f[20]++,un().s[71]++,this.props.onStyleChanged(iF(t,a,o))),...r})]})]})}}const Jfe=(un().s[72]++,Vs()(Xfe));var Tb={},sF;function epe(){if(sF)return Tb;sF=1,Object.defineProperty(Tb,"__esModule",{value:!0});var n=Object.assign||function(k){for(var z=1;z<arguments.length;z++){var j=arguments[z];for(var Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&(k[Y]=j[Y])}return k},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},t=function(){function k(z,j){for(var Y=0;Y<j.length;Y++){var q=j[Y];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(z,q.key,q)}}return function(z,j,Y){return j&&k(z.prototype,j),Y&&k(z,Y),z}}(),r=La(),i=d(r),s=GC(),a=o(s);function o(k){return k&&k.__esModule?k:{default:k}}function d(k){if(k&&k.__esModule)return k;var z={};if(k!=null)for(var j in k)Object.prototype.hasOwnProperty.call(k,j)&&(z[j]=k[j]);return z.default=k,z}function g(k,z){var j={};for(var Y in k)z.indexOf(Y)>=0||Object.prototype.hasOwnProperty.call(k,Y)&&(j[Y]=k[Y]);return j}function b(k,z){if(!(k instanceof z))throw new TypeError("Cannot call a class as a function")}function E(k,z){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:k}function S(k,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);k.prototype=Object.create(z&&z.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(k,z):k.__proto__=z)}var B=function(k){S(z,k);function z(j){b(this,z);var Y=E(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,j));Y.handleChange=function(ie){var J=Array.prototype.slice.call(ie.target.files),$=(Y.props.as||"url").toLowerCase();Promise.all(J.map(function(te){return new Promise(function(W,oe){var fe=new FileReader;switch(fe.onload=function(he){W([he,te])},$){case"binary":{fe.readAsBinaryString(te);break}case"buffer":{fe.readAsArrayBuffer(te);break}case"text":{fe.readAsText(te);break}case"url":{fe.readAsDataURL(te);break}}})})).then(function(te){Y.props.onChange(ie,te)})},Y.triggerInput=function(){var ie=a.default.findDOMNode(Y._reactFileReaderInput);ie&&ie.click()};var q=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!q.File||!q.FileReader||!q.FileList||!q.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),Y}return t(z,[{key:"render",value:function(){var Y=this,q=this.props;q.as;var ie=q.children,J=q.style,$=g(q,["as","children","style"]),te=ie?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:J},i.createElement("input",n({},$,{type:"file",ref:function(oe){Y._reactFileReaderInput=oe},onChange:this.handleChange,onClick:function(){Y._reactFileReaderInput.value=null},style:te})),ie)}}]),z}(i.Component);return Tb.default=B,Tb}var tpe=epe();const npe=Xa(tpe);function vh(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return vh=function(){return a},a}vh();class rpe extends nr.Component{underlayOnClick(e){vh().f[0]++,vh().s[0]++,e.stopPropagation()}render(){vh().f[1]++;const e=(vh().s[1]++,this.props.t);return vh().s[2]++,le.jsxs(q0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(vh().f[2]++,vh().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(vh().f[3]++,vh().s[4]++,this.props.onCancel()),children:[le.jsx("p",{children:this.props.message}),le.jsx("p",{className:"maputnik-dialog__buttons",children:le.jsx(Za,{onClick:t=>(vh().f[4]++,vh().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const ipe=(vh().s[6]++,Vs()(rpe)),OG=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"os-zoomstack-light",title:"Zoomstack Light",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-light/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-light.png"},{id:"os-zoomstack-night",title:"Zoomstack Night",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-night/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-night.png"},{id:"os-zoomstack-outdoor",title:"Zoomstack Outdoor",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-outdoor/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-outdoor.png"},{id:"os-zoomstack-road",title:"Zoomstack Road",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-road/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-road.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function lr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return lr=function(){return a},a}lr();class ope extends nr.Component{render(){return lr().f[0]++,lr().s[0]++,le.jsx("div",{className:"maputnik-public-style",children:le.jsxs(Za,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(lr().f[1]++,lr().s[1]++,this.props.onSelect(this.props.url)),children:[le.jsxs("div",{className:"maputnik-public-style-header",children:[le.jsx("div",{children:this.props.title}),le.jsx("span",{className:"maputnik-space"}),le.jsx(ez,{})]}),le.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class spe extends nr.Component{constructor(t){lr().f[2]++,lr().s[2]++;super(t);Tn(this,"onStyleSelect",(lr().s[10]++,t=>{lr().f[5]++,lr().s[11]++,this.clearError();let r=(lr().s[12]++,!1);lr().s[13]++,fetch(t,{mode:"cors",credentials:"same-origin"}).then(function(i){return lr().f[6]++,lr().s[14]++,i.json()}).then(i=>{if(lr().f[7]++,lr().s[15]++,r){lr().b[2][0]++,lr().s[16]++;return}else lr().b[2][1]++;lr().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const s=(lr().s[18]++,pc.ensureStyleValidity(i));lr().s[19]++,console.log("Loaded style ",s.id),lr().s[20]++,this.props.onStyleOpen(s),lr().s[21]++,this.onOpenToggle()}).catch(i=>{lr().f[8]++,lr().s[22]++,this.setState({error:`Failed to load: '${t}'`,activeRequest:null,activeRequestUrl:null}),lr().s[23]++,console.error(i),lr().s[24]++,console.warn("Could not open the style URL",t)}),lr().s[25]++,this.setState({activeRequest:{abort:function(){lr().f[9]++,lr().s[26]++,r=!0}},activeRequestUrl:t})}));Tn(this,"onSubmitUrl",(lr().s[27]++,t=>{lr().f[10]++,lr().s[28]++,t.preventDefault(),lr().s[29]++,this.onStyleSelect(this.state.styleUrl)}));Tn(this,"onOpenFile",(lr().s[30]++,async()=>{lr().f[11]++,lr().s[31]++,this.clearError();const t=(lr().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[r]=(lr().s[33]++,await window.showOpenFilePicker(t)),i=(lr().s[34]++,await r.getFile()),s=(lr().s[35]++,await i.text());let a;lr().s[36]++;try{lr().s[37]++,a=JSON.parse(s)}catch(o){lr().s[38]++,this.setState({error:o.toString()}),lr().s[39]++;return}return lr().s[40]++,a=pc.ensureStyleValidity(a),lr().s[41]++,this.props.onStyleOpen(a,r),lr().s[42]++,this.onOpenToggle(),lr().s[43]++,i}));Tn(this,"onFileChanged",(lr().s[44]++,async(t,r)=>{lr().f[12]++;const[,i]=(lr().s[45]++,r[0]),s=(lr().s[46]++,new FileReader);lr().s[47]++,this.clearError(),lr().s[48]++,s.readAsText(i,"UTF-8"),lr().s[49]++,s.onload=a=>{var d;lr().f[13]++;let o;lr().s[50]++;try{lr().s[51]++,o=JSON.parse((d=a.target)==null?void 0:d.result)}catch(g){lr().s[52]++,this.setState({error:g.toString()}),lr().s[53]++;return}lr().s[54]++,o=pc.ensureStyleValidity(o),lr().s[55]++,this.props.onStyleOpen(o),lr().s[56]++,this.onOpenToggle()},lr().s[57]++,s.onerror=a=>(lr().f[14]++,lr().s[58]++,console.log(a.target))}));Tn(this,"onChangeUrl",(lr().s[62]++,t=>{lr().f[16]++,lr().s[63]++,this.setState({styleUrl:t})}));lr().s[3]++,this.state={styleUrl:""}}clearError(){lr().f[3]++,lr().s[4]++,this.setState({error:null})}onCancelActiveRequest(t){lr().f[4]++,lr().s[5]++,t?(lr().b[0][0]++,lr().s[6]++,t.stopPropagation()):lr().b[0][1]++,lr().s[7]++,this.state.activeRequest?(lr().b[1][0]++,lr().s[8]++,this.state.activeRequest.abort(),lr().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):lr().b[1][1]++}onOpenToggle(){lr().f[15]++,lr().s[59]++,this.setState({styleUrl:""}),lr().s[60]++,this.clearError(),lr().s[61]++,this.props.onOpenToggle()}render(){lr().f[17]++;const t=(lr().s[64]++,this.props.t),r=(lr().s[65]++,OG.map(s=>(lr().f[18]++,lr().s[66]++,le.jsx(ope,{url:s.url,title:s.title,thumbnailUrl:s.thumbnail,onSelect:this.onStyleSelect},s.id))));let i;return lr().s[67]++,this.state.error?(lr().b[3][0]++,lr().s[68]++,i=le.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,le.jsx("a",{href:"#",onClick:()=>(lr().f[19]++,lr().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:"×"})]})):lr().b[3][1]++,lr().s[70]++,le.jsxs("div",{children:[le.jsxs(q0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(lr().f[20]++,lr().s[71]++,this.onOpenToggle()),title:t("Open Style"),children:[i,le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:t("Open local Style")}),le.jsx("p",{children:t("Open a local JSON style from your computer.")}),le.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(lr().b[4][0]++,le.jsxs(Za,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[le.jsx(Z7,{})," ",t("Open Style")]})):(lr().b[4][1]++,le.jsx(npe,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":t("Open Style"),children:le.jsxs(Za,{className:"maputnik-upload-button",children:[le.jsx(Z7,{})," ",t("Open Style")]})}))})]}),le.jsx("section",{className:"maputnik-modal-section",children:le.jsxs("form",{onSubmit:this.onSubmitUrl,children:[le.jsx("h1",{children:t("Load from URL")}),le.jsx("p",{children:le.jsxs(R0,{t,children:["Load from a URL. Note that the URL must have ",le.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),le.jsx(mI,{"aria-label":t("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:t("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),le.jsx("div",{children:le.jsx(Za,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[le.jsx("h1",{children:t("Gallery Styles")}),le.jsx("p",{children:t("Open one of the publicly available styles to start from.")}),le.jsx("div",{className:"maputnik-style-gallery-container",children:r})]})]}),le.jsx(ipe,{isOpen:!!this.state.activeRequest,title:t("Loading style"),onCancel:s=>(lr().f[21]++,lr().s[72]++,this.onCancelActiveRequest(s)),message:t("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const ape=(lr().s[73]++,Vs()(spe));function Bf(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Bf=function(){return a},a}Bf();class lpe extends nr.Component{render(){Bf().f[0]++;const e=(Bf().s[0]++,this.props.t),t=(Bf().s[1]++,[{key:le.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:le.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:le.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:le.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:le.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:le.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:le.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:le.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(Bf().s[2]++,[{key:le.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:le.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:le.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:le.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:le.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:le.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return Bf().s[3]++,le.jsx(q0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[le.jsx("p",{children:le.jsxs(R0,{t:e,children:["Press ",le.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),le.jsx("dl",{children:t.map((i,s)=>(Bf().f[1]++,Bf().s[4]++,le.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[le.jsx("dt",{children:i.key},"dt"+s),le.jsx("dd",{children:i.text},"dd"+s)]},s)))}),le.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),le.jsx("ul",{children:r.map((i,s)=>(Bf().f[2]++,Bf().s[5]++,le.jsxs("li",{children:[le.jsx("span",{children:i.key})," ",i.text]},s)))})]})})}}const upe=(Bf().s[6]++,Vs()(lpe));function oA(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return oA=function(){return a},a}oA();class Ape extends nr.Component{render(){oA().f[0]++;const{t:e,mapView:t}=(oA().s[0]++,this.props),r=(oA().s[1]++,Math.round(t.zoom)+1),i=(oA().s[2]++,+t.center.lng.toFixed(5)),s=(oA().s[3]++,+t.center.lat.toFixed(5));return oA().s[4]++,le.jsxs(q0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[le.jsx("h1",{children:e("Options")}),(oA().b[0][0]++,this.props.renderer==="mlgljs"&&(oA().b[0][1]++,le.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([a,o])=>(oA().f[1]++,oA().s[5]++,le.jsx("li",{children:le.jsxs("label",{children:[le.jsx("input",{type:"checkbox",checked:o,onChange:d=>(oA().f[2]++,oA().s[6]++,this.props.onChangeMaplibreGlDebug(a,d.target.checked))})," ",a]})},a)))}))),(oA().b[1][0]++,this.props.renderer==="ol"&&(oA().b[1][1]++,le.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([a,o])=>(oA().f[3]++,oA().s[7]++,le.jsx("li",{children:le.jsxs("label",{children:[le.jsx("input",{type:"checkbox",checked:o,onChange:d=>(oA().f[4]++,oA().s[8]++,this.props.onChangeOpenlayersDebug(a,d.target.checked))})," ",a]})},a)))})))]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:"Links"}),le.jsx("p",{children:le.jsxs(R0,{t:e,children:[le.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${s}/${i}`,children:"Open in OSM"})," — Opens the current view on openstreetmap.org"]})})]})]})}}const cpe=(oA().s[9]++,Vs()(Ape));var pg={},$v={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var dpe=$v.exports,aF;function hpe(){return aF||(aF=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=!n.nodeType&&n,s=typeof window=="object"&&window;(s.global===s||s.window===s||s.self===s)&&(t=s);var a,o=2147483647,d=36,g=1,b=26,E=38,S=700,B=72,k=128,z="-",j=/^xn--/,Y=/[^\x20-\x7E]/,q=/[\x2E\u3002\uFF0E\uFF61]/g,ie={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=d-g,$=Math.floor,te=String.fromCharCode,W;function oe(Ce){throw new RangeError(ie[Ce])}function fe(Ce,Pe){for(var it=Ce.length,vt=[];it--;)vt[it]=Pe(Ce[it]);return vt}function he(Ce,Pe){var it=Ce.split("@"),vt="";it.length>1&&(vt=it[0]+"@",Ce=it[1]),Ce=Ce.replace(q,".");var _t=Ce.split("."),ft=fe(_t,Pe).join(".");return vt+ft}function Se(Ce){for(var Pe=[],it=0,vt=Ce.length,_t,ft;it<vt;)_t=Ce.charCodeAt(it++),_t>=55296&&_t<=56319&&it<vt?(ft=Ce.charCodeAt(it++),(ft&64512)==56320?Pe.push(((_t&1023)<<10)+(ft&1023)+65536):(Pe.push(_t),it--)):Pe.push(_t);return Pe}function pe(Ce){return fe(Ce,function(Pe){var it="";return Pe>65535&&(Pe-=65536,it+=te(Pe>>>10&1023|55296),Pe=56320|Pe&1023),it+=te(Pe),it}).join("")}function we(Ce){return Ce-48<10?Ce-22:Ce-65<26?Ce-65:Ce-97<26?Ce-97:d}function Ke(Ce,Pe){return Ce+22+75*(Ce<26)-((Pe!=0)<<5)}function ge(Ce,Pe,it){var vt=0;for(Ce=it?$(Ce/S):Ce>>1,Ce+=$(Ce/Pe);Ce>J*b>>1;vt+=d)Ce=$(Ce/J);return $(vt+(J+1)*Ce/(Ce+E))}function st(Ce){var Pe=[],it=Ce.length,vt,_t=0,ft=k,Dt=B,Tt,Ue,Re,Be,nt,Ct,pt,zt,tn;for(Tt=Ce.lastIndexOf(z),Tt<0&&(Tt=0),Ue=0;Ue<Tt;++Ue)Ce.charCodeAt(Ue)>=128&&oe("not-basic"),Pe.push(Ce.charCodeAt(Ue));for(Re=Tt>0?Tt+1:0;Re<it;){for(Be=_t,nt=1,Ct=d;Re>=it&&oe("invalid-input"),pt=we(Ce.charCodeAt(Re++)),(pt>=d||pt>$((o-_t)/nt))&&oe("overflow"),_t+=pt*nt,zt=Ct<=Dt?g:Ct>=Dt+b?b:Ct-Dt,!(pt<zt);Ct+=d)tn=d-zt,nt>$(o/tn)&&oe("overflow"),nt*=tn;vt=Pe.length+1,Dt=ge(_t-Be,vt,Be==0),$(_t/vt)>o-ft&&oe("overflow"),ft+=$(_t/vt),_t%=vt,Pe.splice(_t++,0,ft)}return pe(Pe)}function Qe(Ce){var Pe,it,vt,_t,ft,Dt,Tt,Ue,Re,Be,nt,Ct=[],pt,zt,tn,Lt;for(Ce=Se(Ce),pt=Ce.length,Pe=k,it=0,ft=B,Dt=0;Dt<pt;++Dt)nt=Ce[Dt],nt<128&&Ct.push(te(nt));for(vt=_t=Ct.length,_t&&Ct.push(z);vt<pt;){for(Tt=o,Dt=0;Dt<pt;++Dt)nt=Ce[Dt],nt>=Pe&&nt<Tt&&(Tt=nt);for(zt=vt+1,Tt-Pe>$((o-it)/zt)&&oe("overflow"),it+=(Tt-Pe)*zt,Pe=Tt,Dt=0;Dt<pt;++Dt)if(nt=Ce[Dt],nt<Pe&&++it>o&&oe("overflow"),nt==Pe){for(Ue=it,Re=d;Be=Re<=ft?g:Re>=ft+b?b:Re-ft,!(Ue<Be);Re+=d)Lt=Ue-Be,tn=d-Be,Ct.push(te(Ke(Be+Lt%tn,0))),Ue=$(Lt/tn);Ct.push(te(Ke(Ue,0))),ft=ge(it,zt,vt==_t),it=0,++vt}++it,++Pe}return Ct.join("")}function Ze(Ce){return he(Ce,function(Pe){return j.test(Pe)?st(Pe.slice(4).toLowerCase()):Pe})}function We(Ce){return he(Ce,function(Pe){return Y.test(Pe)?"xn--"+Qe(Pe):Pe})}if(a={version:"1.4.1",ucs2:{decode:Se,encode:pe},decode:st,encode:Qe,toASCII:We,toUnicode:Ze},r&&i)if(n.exports==r)i.exports=a;else for(W in a)a.hasOwnProperty(W)&&(r[W]=a[W]);else t.punycode=a})(dpe)}($v,$v.exports)),$v.exports}var _E,lF;function tv(){return lF||(lF=1,_E=TypeError),_E}const fpe={},ppe=Object.freeze(Object.defineProperty({__proto__:null,default:fpe},Symbol.toStringTag,{value:"Module"})),mpe=UB(ppe);var bE,uF;function w3(){if(uF)return bE;uF=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,d=typeof WeakMap=="function"&&WeakMap.prototype,g=d?WeakMap.prototype.has:null,b=typeof WeakSet=="function"&&WeakSet.prototype,E=b?WeakSet.prototype.has:null,S=typeof WeakRef=="function"&&WeakRef.prototype,B=S?WeakRef.prototype.deref:null,k=Boolean.prototype.valueOf,z=Object.prototype.toString,j=Function.prototype.toString,Y=String.prototype.match,q=String.prototype.slice,ie=String.prototype.replace,J=String.prototype.toUpperCase,$=String.prototype.toLowerCase,te=RegExp.prototype.test,W=Array.prototype.concat,oe=Array.prototype.join,fe=Array.prototype.slice,he=Math.floor,Se=typeof BigInt=="function"?BigInt.prototype.valueOf:null,pe=Object.getOwnPropertySymbols,we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ge=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ke||!0)?Symbol.toStringTag:null,st=Object.prototype.propertyIsEnumerable,Qe=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Oe){return Oe.__proto__}:null);function Ze(Oe,se){if(Oe===1/0||Oe===-1/0||Oe!==Oe||Oe&&Oe>-1e3&&Oe<1e3||te.call(/e/,se))return se;var _e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Oe=="number"){var p=Oe<0?-he(-Oe):he(Oe);if(p!==Oe){var Ne=String(p),$e=q.call(se,Ne.length+1);return ie.call(Ne,_e,"$&_")+"."+ie.call(ie.call($e,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ie.call(se,_e,"$&_")}var We=mpe,Ce=We.custom,Pe=pt(Ce)?Ce:null,it={__proto__:null,double:'"',single:"'"},vt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};bE=function Oe(se,_e,p,Ne){var $e=_e||{};if(Lt($e,"quoteStyle")&&!Lt(it,$e.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Lt($e,"maxStringLength")&&(typeof $e.maxStringLength=="number"?$e.maxStringLength<0&&$e.maxStringLength!==1/0:$e.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var rt=Lt($e,"customInspect")?$e.customInspect:!0;if(typeof rt!="boolean"&&rt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Lt($e,"indent")&&$e.indent!==null&&$e.indent!=="	"&&!(parseInt($e.indent,10)===$e.indent&&$e.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Lt($e,"numericSeparator")&&typeof $e.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var dt=$e.numericSeparator;if(typeof se>"u")return"undefined";if(se===null)return"null";if(typeof se=="boolean")return se?"true":"false";if(typeof se=="string")return er(se,$e);if(typeof se=="number"){if(se===0)return 1/0/se>0?"0":"-0";var ct=String(se);return dt?Ze(se,ct):ct}if(typeof se=="bigint"){var Qt=String(se)+"n";return dt?Ze(se,Qt):Qt}var Vt=typeof $e.depth>"u"?5:$e.depth;if(typeof p>"u"&&(p=0),p>=Vt&&Vt>0&&typeof se=="object")return Dt(se)?"[Array]":"[Object]";var Nt=$t($e,p);if(typeof Ne>"u")Ne=[];else if(rn(Ne,se)>=0)return"[Circular]";function wt(So,Pi,Ua){if(Pi&&(Ne=fe.call(Ne),Ne.push(Pi)),Ua){var Ba={depth:$e.depth};return Lt($e,"quoteStyle")&&(Ba.quoteStyle=$e.quoteStyle),Oe(So,Ba,p+1,Ne)}return Oe(So,$e,p+1,Ne)}if(typeof se=="function"&&!Ue(se)){var Dn=Nn(se),On=rr(se,wt);return"[Function"+(Dn?": "+Dn:" (anonymous)")+"]"+(On.length>0?" { "+oe.call(On,", ")+" }":"")}if(pt(se)){var pr=Ke?ie.call(String(se),/^(Symbol\(.*\))_[^)]*$/,"$1"):we.call(se);return typeof se=="object"&&!Ke?ce(pr):pr}if(Yn(se)){for(var Er="<"+$.call(String(se.nodeName)),sn=se.attributes||[],Wn=0;Wn<sn.length;Wn++)Er+=" "+sn[Wn].name+"="+_t(ft(sn[Wn].value),"double",$e);return Er+=">",se.childNodes&&se.childNodes.length&&(Er+="..."),Er+="</"+$.call(String(se.nodeName))+">",Er}if(Dt(se)){if(se.length===0)return"[]";var Ln=rr(se,wt);return Nt&&!Et(Ln)?"["+on(Ln,Nt)+"]":"[ "+oe.call(Ln,", ")+" ]"}if(Re(se)){var Ir=rr(se,wt);return!("cause"in Error.prototype)&&"cause"in se&&!st.call(se,"cause")?"{ ["+String(se)+"] "+oe.call(W.call("[cause]: "+wt(se.cause),Ir),", ")+" }":Ir.length===0?"["+String(se)+"]":"{ ["+String(se)+"] "+oe.call(Ir,", ")+" }"}if(typeof se=="object"&&rt){if(Pe&&typeof se[Pe]=="function"&&We)return We(se,{depth:Vt-p});if(rt!=="symbol"&&typeof se.inspect=="function")return se.inspect()}if(or(se)){var Br=[];return r&&r.call(se,function(So,Pi){Br.push(wt(Pi,se,!0)+" => "+wt(So,se))}),tt("Map",t.call(se),Br,Nt)}if(Xn(se)){var Kr=[];return o&&o.call(se,function(So){Kr.push(wt(So,se))}),tt("Set",a.call(se),Kr,Nt)}if(Kn(se))return me("WeakMap");if(Mr(se))return me("WeakSet");if(pn(se))return me("WeakRef");if(nt(se))return ce(wt(Number(se)));if(zt(se))return ce(wt(Se.call(se)));if(Ct(se))return ce(k.call(se));if(Be(se))return ce(wt(String(se)));if(typeof window<"u"&&se===window)return"{ [object Window] }";if(typeof globalThis<"u"&&se===globalThis||typeof window<"u"&&se===window)return"{ [object globalThis] }";if(!Tt(se)&&!Ue(se)){var Ar=rr(se,wt),ho=Qe?Qe(se)===Object.prototype:se instanceof Object||se.constructor===Object,Ea=se instanceof Object?"":"null prototype",Yi=!ho&&ge&&Object(se)===se&&ge in se?q.call(gn(se),8,-1):Ea?"Object":"",vi=ho||typeof se.constructor!="function"?"":se.constructor.name?se.constructor.name+" ":"",so=vi+(Yi||Ea?"["+oe.call(W.call([],Yi||[],Ea||[]),": ")+"] ":"");return Ar.length===0?so+"{}":Nt?so+"{"+on(Ar,Nt)+"}":so+"{ "+oe.call(Ar,", ")+" }"}return String(se)};function _t(Oe,se,_e){var p=_e.quoteStyle||se,Ne=it[p];return Ne+Oe+Ne}function ft(Oe){return ie.call(String(Oe),/"/g,"&quot;")}function Dt(Oe){return gn(Oe)==="[object Array]"&&(!ge||!(typeof Oe=="object"&&ge in Oe))}function Tt(Oe){return gn(Oe)==="[object Date]"&&(!ge||!(typeof Oe=="object"&&ge in Oe))}function Ue(Oe){return gn(Oe)==="[object RegExp]"&&(!ge||!(typeof Oe=="object"&&ge in Oe))}function Re(Oe){return gn(Oe)==="[object Error]"&&(!ge||!(typeof Oe=="object"&&ge in Oe))}function Be(Oe){return gn(Oe)==="[object String]"&&(!ge||!(typeof Oe=="object"&&ge in Oe))}function nt(Oe){return gn(Oe)==="[object Number]"&&(!ge||!(typeof Oe=="object"&&ge in Oe))}function Ct(Oe){return gn(Oe)==="[object Boolean]"&&(!ge||!(typeof Oe=="object"&&ge in Oe))}function pt(Oe){if(Ke)return Oe&&typeof Oe=="object"&&Oe instanceof Symbol;if(typeof Oe=="symbol")return!0;if(!Oe||typeof Oe!="object"||!we)return!1;try{return we.call(Oe),!0}catch{}return!1}function zt(Oe){if(!Oe||typeof Oe!="object"||!Se)return!1;try{return Se.call(Oe),!0}catch{}return!1}var tn=Object.prototype.hasOwnProperty||function(Oe){return Oe in this};function Lt(Oe,se){return tn.call(Oe,se)}function gn(Oe){return z.call(Oe)}function Nn(Oe){if(Oe.name)return Oe.name;var se=Y.call(j.call(Oe),/^function\s*([\w$]+)/);return se?se[1]:null}function rn(Oe,se){if(Oe.indexOf)return Oe.indexOf(se);for(var _e=0,p=Oe.length;_e<p;_e++)if(Oe[_e]===se)return _e;return-1}function or(Oe){if(!t||!Oe||typeof Oe!="object")return!1;try{t.call(Oe);try{a.call(Oe)}catch{return!0}return Oe instanceof Map}catch{}return!1}function Kn(Oe){if(!g||!Oe||typeof Oe!="object")return!1;try{g.call(Oe,g);try{E.call(Oe,E)}catch{return!0}return Oe instanceof WeakMap}catch{}return!1}function pn(Oe){if(!B||!Oe||typeof Oe!="object")return!1;try{return B.call(Oe),!0}catch{}return!1}function Xn(Oe){if(!a||!Oe||typeof Oe!="object")return!1;try{a.call(Oe);try{t.call(Oe)}catch{return!0}return Oe instanceof Set}catch{}return!1}function Mr(Oe){if(!E||!Oe||typeof Oe!="object")return!1;try{E.call(Oe,E);try{g.call(Oe,g)}catch{return!0}return Oe instanceof WeakSet}catch{}return!1}function Yn(Oe){return!Oe||typeof Oe!="object"?!1:typeof HTMLElement<"u"&&Oe instanceof HTMLElement?!0:typeof Oe.nodeName=="string"&&typeof Oe.getAttribute=="function"}function er(Oe,se){if(Oe.length>se.maxStringLength){var _e=Oe.length-se.maxStringLength,p="... "+_e+" more character"+(_e>1?"s":"");return er(q.call(Oe,0,se.maxStringLength),se)+p}var Ne=vt[se.quoteStyle||"single"];Ne.lastIndex=0;var $e=ie.call(ie.call(Oe,Ne,"\\$1"),/[\x00-\x1f]/g,qe);return _t($e,"single",se)}function qe(Oe){var se=Oe.charCodeAt(0),_e={8:"b",9:"t",10:"n",12:"f",13:"r"}[se];return _e?"\\"+_e:"\\x"+(se<16?"0":"")+J.call(se.toString(16))}function ce(Oe){return"Object("+Oe+")"}function me(Oe){return Oe+" { ? }"}function tt(Oe,se,_e,p){var Ne=p?on(_e,p):oe.call(_e,", ");return Oe+" ("+se+") {"+Ne+"}"}function Et(Oe){for(var se=0;se<Oe.length;se++)if(rn(Oe[se],`
`)>=0)return!1;return!0}function $t(Oe,se){var _e;if(Oe.indent==="	")_e="	";else if(typeof Oe.indent=="number"&&Oe.indent>0)_e=oe.call(Array(Oe.indent+1)," ");else return null;return{base:_e,prev:oe.call(Array(se+1),_e)}}function on(Oe,se){if(Oe.length===0)return"";var _e=`
`+se.prev+se.base;return _e+oe.call(Oe,","+_e)+`
`+se.prev}function rr(Oe,se){var _e=Dt(Oe),p=[];if(_e){p.length=Oe.length;for(var Ne=0;Ne<Oe.length;Ne++)p[Ne]=Lt(Oe,Ne)?se(Oe[Ne],Oe):""}var $e=typeof pe=="function"?pe(Oe):[],rt;if(Ke){rt={};for(var dt=0;dt<$e.length;dt++)rt["$"+$e[dt]]=$e[dt]}for(var ct in Oe)Lt(Oe,ct)&&(_e&&String(Number(ct))===ct&&ct<Oe.length||Ke&&rt["$"+ct]instanceof Symbol||(te.call(/[^\w$]/,ct)?p.push(se(ct,Oe)+": "+se(Oe[ct],Oe)):p.push(ct+": "+se(Oe[ct],Oe))));if(typeof pe=="function")for(var Qt=0;Qt<$e.length;Qt++)st.call(Oe,$e[Qt])&&p.push("["+se($e[Qt])+"]: "+se(Oe[$e[Qt]],Oe));return p}return bE}var xE,AF;function gpe(){if(AF)return xE;AF=1;var n=w3(),e=tv(),t=function(o,d,g){for(var b=o,E;(E=b.next)!=null;b=E)if(E.key===d)return b.next=E.next,g||(E.next=o.next,o.next=E),E},r=function(o,d){if(o){var g=t(o,d);return g&&g.value}},i=function(o,d,g){var b=t(o,d);b?b.value=g:o.next={key:d,next:o.next,value:g}},s=function(o,d){return o?!!t(o,d):!1},a=function(o,d){if(o)return t(o,d,!0)};return xE=function(){var d,g={assert:function(b){if(!g.has(b))throw new e("Side channel does not contain "+n(b))},delete:function(b){var E=d&&d.next,S=a(d,b);return S&&E&&E===S&&(d=void 0),!!S},get:function(b){return r(d,b)},has:function(b){return s(d,b)},set:function(b,E){d||(d={next:void 0}),i(d,b,E)}};return g},xE}var wE,cF;function IG(){return cF||(cF=1,wE=Object),wE}var ME,dF;function ype(){return dF||(dF=1,ME=Error),ME}var SE,hF;function vpe(){return hF||(hF=1,SE=EvalError),SE}var EE,fF;function Cpe(){return fF||(fF=1,EE=RangeError),EE}var BE,pF;function _pe(){return pF||(pF=1,BE=ReferenceError),BE}var OE,mF;function bpe(){return mF||(mF=1,OE=SyntaxError),OE}var IE,gF;function xpe(){return gF||(gF=1,IE=URIError),IE}var kE,yF;function wpe(){return yF||(yF=1,kE=Math.abs),kE}var TE,vF;function Mpe(){return vF||(vF=1,TE=Math.floor),TE}var PE,CF;function Spe(){return CF||(CF=1,PE=Math.max),PE}var RE,_F;function Epe(){return _F||(_F=1,RE=Math.min),RE}var DE,bF;function Bpe(){return bF||(bF=1,DE=Math.pow),DE}var KE,xF;function Ope(){return xF||(xF=1,KE=Math.round),KE}var FE,wF;function Ipe(){return wF||(wF=1,FE=Number.isNaN||function(e){return e!==e}),FE}var LE,MF;function kpe(){if(MF)return LE;MF=1;var n=Ipe();return LE=function(t){return n(t)||t===0?t:t<0?-1:1},LE}var UE,SF;function Tpe(){return SF||(SF=1,UE=Object.getOwnPropertyDescriptor),UE}var zE,EF;function kG(){if(EF)return zE;EF=1;var n=Tpe();if(n)try{n([],"length")}catch{n=null}return zE=n,zE}var jE,BF;function Ppe(){if(BF)return jE;BF=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return jE=n,jE}var NE,OF;function Rpe(){return OF||(OF=1,NE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),NE}var WE,IF;function Dpe(){if(IF)return WE;IF=1;var n=typeof Symbol<"u"&&Symbol,e=Rpe();return WE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},WE}var GE,kF;function TG(){return kF||(kF=1,GE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),GE}var QE,TF;function PG(){if(TF)return QE;TF=1;var n=IG();return QE=n.getPrototypeOf||null,QE}var qE,PF;function Kpe(){if(PF)return qE;PF=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(d,g){for(var b=[],E=0;E<d.length;E+=1)b[E]=d[E];for(var S=0;S<g.length;S+=1)b[S+d.length]=g[S];return b},s=function(d,g){for(var b=[],E=g,S=0;E<d.length;E+=1,S+=1)b[S]=d[E];return b},a=function(o,d){for(var g="",b=0;b<o.length;b+=1)g+=o[b],b+1<o.length&&(g+=d);return g};return qE=function(d){var g=this;if(typeof g!="function"||e.apply(g)!==r)throw new TypeError(n+g);for(var b=s(arguments,1),E,S=function(){if(this instanceof E){var Y=g.apply(this,i(b,arguments));return Object(Y)===Y?Y:this}return g.apply(d,i(b,arguments))},B=t(0,g.length-b.length),k=[],z=0;z<B;z++)k[z]="$"+z;if(E=Function("binder","return function ("+a(k,",")+"){ return binder.apply(this,arguments); }")(S),g.prototype){var j=function(){};j.prototype=g.prototype,E.prototype=new j,j.prototype=null}return E},qE}var YE,RF;function M3(){if(RF)return YE;RF=1;var n=Kpe();return YE=Function.prototype.bind||n,YE}var $E,DF;function vI(){return DF||(DF=1,$E=Function.prototype.call),$E}var VE,KF;function RG(){return KF||(KF=1,VE=Function.prototype.apply),VE}var HE,FF;function Fpe(){return FF||(FF=1,HE=typeof Reflect<"u"&&Reflect&&Reflect.apply),HE}var ZE,LF;function Lpe(){if(LF)return ZE;LF=1;var n=M3(),e=RG(),t=vI(),r=Fpe();return ZE=r||n.call(t,e),ZE}var XE,UF;function DG(){if(UF)return XE;UF=1;var n=M3(),e=tv(),t=vI(),r=Lpe();return XE=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},XE}var JE,zF;function Upe(){if(zF)return JE;zF=1;var n=DG(),e=kG(),t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return JE=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,JE}var e6,jF;function zpe(){if(jF)return e6;jF=1;var n=TG(),e=PG(),t=Upe();return e6=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,e6}var t6,NF;function jpe(){if(NF)return t6;NF=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=M3();return t6=t.call(n,e),t6}var n6,WF;function CI(){if(WF)return n6;WF=1;var n,e=IG(),t=ype(),r=vpe(),i=Cpe(),s=_pe(),a=bpe(),o=tv(),d=xpe(),g=wpe(),b=Mpe(),E=Spe(),S=Epe(),B=Bpe(),k=Ope(),z=kpe(),j=Function,Y=function(Re){try{return j('"use strict"; return ('+Re+").constructor;")()}catch{}},q=kG(),ie=Ppe(),J=function(){throw new o},$=q?function(){try{return arguments.callee,J}catch{try{return q(arguments,"callee").get}catch{return J}}}():J,te=Dpe()(),W=zpe(),oe=PG(),fe=TG(),he=RG(),Se=vI(),pe={},we=typeof Uint8Array>"u"||!W?n:W(Uint8Array),Ke={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":te&&W?W([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":pe,"%AsyncGenerator%":pe,"%AsyncGeneratorFunction%":pe,"%AsyncIteratorPrototype%":pe,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":j,"%GeneratorFunction%":pe,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":te&&W?W(W([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!te||!W?n:W(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":q,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!te||!W?n:W(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":te&&W?W(""[Symbol.iterator]()):n,"%Symbol%":te?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":$,"%TypedArray%":we,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Se,"%Function.prototype.apply%":he,"%Object.defineProperty%":ie,"%Object.getPrototypeOf%":oe,"%Math.abs%":g,"%Math.floor%":b,"%Math.max%":E,"%Math.min%":S,"%Math.pow%":B,"%Math.round%":k,"%Math.sign%":z,"%Reflect.getPrototypeOf%":fe};if(W)try{null.error}catch(Re){var ge=W(W(Re));Ke["%Error.prototype%"]=ge}var st=function Re(Be){var nt;if(Be==="%AsyncFunction%")nt=Y("async function () {}");else if(Be==="%GeneratorFunction%")nt=Y("function* () {}");else if(Be==="%AsyncGeneratorFunction%")nt=Y("async function* () {}");else if(Be==="%AsyncGenerator%"){var Ct=Re("%AsyncGeneratorFunction%");Ct&&(nt=Ct.prototype)}else if(Be==="%AsyncIteratorPrototype%"){var pt=Re("%AsyncGenerator%");pt&&W&&(nt=W(pt.prototype))}return Ke[Be]=nt,nt},Qe={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ze=M3(),We=jpe(),Ce=Ze.call(Se,Array.prototype.concat),Pe=Ze.call(he,Array.prototype.splice),it=Ze.call(Se,String.prototype.replace),vt=Ze.call(Se,String.prototype.slice),_t=Ze.call(Se,RegExp.prototype.exec),ft=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Dt=/\\(\\)?/g,Tt=function(Be){var nt=vt(Be,0,1),Ct=vt(Be,-1);if(nt==="%"&&Ct!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(Ct==="%"&&nt!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var pt=[];return it(Be,ft,function(zt,tn,Lt,gn){pt[pt.length]=Lt?it(gn,Dt,"$1"):tn||zt}),pt},Ue=function(Be,nt){var Ct=Be,pt;if(We(Qe,Ct)&&(pt=Qe[Ct],Ct="%"+pt[0]+"%"),We(Ke,Ct)){var zt=Ke[Ct];if(zt===pe&&(zt=st(Ct)),typeof zt>"u"&&!nt)throw new o("intrinsic "+Be+" exists, but is not available. Please file an issue!");return{alias:pt,name:Ct,value:zt}}throw new a("intrinsic "+Be+" does not exist!")};return n6=function(Be,nt){if(typeof Be!="string"||Be.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof nt!="boolean")throw new o('"allowMissing" argument must be a boolean');if(_t(/^%?[^%]*%?$/,Be)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ct=Tt(Be),pt=Ct.length>0?Ct[0]:"",zt=Ue("%"+pt+"%",nt),tn=zt.name,Lt=zt.value,gn=!1,Nn=zt.alias;Nn&&(pt=Nn[0],Pe(Ct,Ce([0,1],Nn)));for(var rn=1,or=!0;rn<Ct.length;rn+=1){var Kn=Ct[rn],pn=vt(Kn,0,1),Xn=vt(Kn,-1);if((pn==='"'||pn==="'"||pn==="`"||Xn==='"'||Xn==="'"||Xn==="`")&&pn!==Xn)throw new a("property names with quotes must have matching quotes");if((Kn==="constructor"||!or)&&(gn=!0),pt+="."+Kn,tn="%"+pt+"%",We(Ke,tn))Lt=Ke[tn];else if(Lt!=null){if(!(Kn in Lt)){if(!nt)throw new o("base intrinsic for "+Be+" exists, but the property is not available.");return}if(q&&rn+1>=Ct.length){var Mr=q(Lt,Kn);or=!!Mr,or&&"get"in Mr&&!("originalValue"in Mr.get)?Lt=Mr.get:Lt=Lt[Kn]}else or=We(Lt,Kn),Lt=Lt[Kn];or&&!gn&&(Ke[tn]=Lt)}}return Lt},n6}var r6,GF;function KG(){if(GF)return r6;GF=1;var n=CI(),e=DG(),t=e([n("%String.prototype.indexOf%")]);return r6=function(i,s){var a=n(i,!!s);return typeof a=="function"&&t(i,".prototype.")>-1?e([a]):a},r6}var i6,QF;function FG(){if(QF)return i6;QF=1;var n=CI(),e=KG(),t=w3(),r=tv(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),a=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),d=e("Map.prototype.delete",!0),g=e("Map.prototype.size",!0);return i6=!!i&&function(){var E,S={assert:function(B){if(!S.has(B))throw new r("Side channel does not contain "+t(B))},delete:function(B){if(E){var k=d(E,B);return g(E)===0&&(E=void 0),k}return!1},get:function(B){if(E)return s(E,B)},has:function(B){return E?o(E,B):!1},set:function(B,k){E||(E=new i),a(E,B,k)}};return S},i6}var o6,qF;function Npe(){if(qF)return o6;qF=1;var n=CI(),e=KG(),t=w3(),r=FG(),i=tv(),s=n("%WeakMap%",!0),a=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),d=e("WeakMap.prototype.has",!0),g=e("WeakMap.prototype.delete",!0);return o6=s?function(){var E,S,B={assert:function(k){if(!B.has(k))throw new i("Side channel does not contain "+t(k))},delete:function(k){if(s&&k&&(typeof k=="object"||typeof k=="function")){if(E)return g(E,k)}else if(r&&S)return S.delete(k);return!1},get:function(k){return s&&k&&(typeof k=="object"||typeof k=="function")&&E?a(E,k):S&&S.get(k)},has:function(k){return s&&k&&(typeof k=="object"||typeof k=="function")&&E?d(E,k):!!S&&S.has(k)},set:function(k,z){s&&k&&(typeof k=="object"||typeof k=="function")?(E||(E=new s),o(E,k,z)):r&&(S||(S=r()),S.set(k,z))}};return B}:r,o6}var s6,YF;function Wpe(){if(YF)return s6;YF=1;var n=tv(),e=w3(),t=gpe(),r=FG(),i=Npe(),s=i||r||t;return s6=function(){var o,d={assert:function(g){if(!d.has(g))throw new n("Side channel does not contain "+e(g))},delete:function(g){return!!o&&o.delete(g)},get:function(g){return o&&o.get(g)},has:function(g){return!!o&&o.has(g)},set:function(g,b){o||(o=s()),o.set(g,b)}};return d},s6}var a6,$F;function _I(){if($F)return a6;$F=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return a6={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},a6}var l6,VF;function LG(){if(VF)return l6;VF=1;var n=_I(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var j=[],Y=0;Y<256;++Y)j.push("%"+((Y<16?"0":"")+Y.toString(16)).toUpperCase());return j}(),i=function(Y){for(;Y.length>1;){var q=Y.pop(),ie=q.obj[q.prop];if(t(ie)){for(var J=[],$=0;$<ie.length;++$)typeof ie[$]<"u"&&J.push(ie[$]);q.obj[q.prop]=J}}},s=function(Y,q){for(var ie=q&&q.plainObjects?{__proto__:null}:{},J=0;J<Y.length;++J)typeof Y[J]<"u"&&(ie[J]=Y[J]);return ie},a=function j(Y,q,ie){if(!q)return Y;if(typeof q!="object"&&typeof q!="function"){if(t(Y))Y.push(q);else if(Y&&typeof Y=="object")(ie&&(ie.plainObjects||ie.allowPrototypes)||!e.call(Object.prototype,q))&&(Y[q]=!0);else return[Y,q];return Y}if(!Y||typeof Y!="object")return[Y].concat(q);var J=Y;return t(Y)&&!t(q)&&(J=s(Y,ie)),t(Y)&&t(q)?(q.forEach(function($,te){if(e.call(Y,te)){var W=Y[te];W&&typeof W=="object"&&$&&typeof $=="object"?Y[te]=j(W,$,ie):Y.push($)}else Y[te]=$}),Y):Object.keys(q).reduce(function($,te){var W=q[te];return e.call($,te)?$[te]=j($[te],W,ie):$[te]=W,$},J)},o=function(Y,q){return Object.keys(q).reduce(function(ie,J){return ie[J]=q[J],ie},Y)},d=function(j,Y,q){var ie=j.replace(/\+/g," ");if(q==="iso-8859-1")return ie.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ie)}catch{return ie}},g=1024,b=function(Y,q,ie,J,$){if(Y.length===0)return Y;var te=Y;if(typeof Y=="symbol"?te=Symbol.prototype.toString.call(Y):typeof Y!="string"&&(te=String(Y)),ie==="iso-8859-1")return escape(te).replace(/%u[0-9a-f]{4}/gi,function(we){return"%26%23"+parseInt(we.slice(2),16)+"%3B"});for(var W="",oe=0;oe<te.length;oe+=g){for(var fe=te.length>=g?te.slice(oe,oe+g):te,he=[],Se=0;Se<fe.length;++Se){var pe=fe.charCodeAt(Se);if(pe===45||pe===46||pe===95||pe===126||pe>=48&&pe<=57||pe>=65&&pe<=90||pe>=97&&pe<=122||$===n.RFC1738&&(pe===40||pe===41)){he[he.length]=fe.charAt(Se);continue}if(pe<128){he[he.length]=r[pe];continue}if(pe<2048){he[he.length]=r[192|pe>>6]+r[128|pe&63];continue}if(pe<55296||pe>=57344){he[he.length]=r[224|pe>>12]+r[128|pe>>6&63]+r[128|pe&63];continue}Se+=1,pe=65536+((pe&1023)<<10|fe.charCodeAt(Se)&1023),he[he.length]=r[240|pe>>18]+r[128|pe>>12&63]+r[128|pe>>6&63]+r[128|pe&63]}W+=he.join("")}return W},E=function(Y){for(var q=[{obj:{o:Y},prop:"o"}],ie=[],J=0;J<q.length;++J)for(var $=q[J],te=$.obj[$.prop],W=Object.keys(te),oe=0;oe<W.length;++oe){var fe=W[oe],he=te[fe];typeof he=="object"&&he!==null&&ie.indexOf(he)===-1&&(q.push({obj:te,prop:fe}),ie.push(he))}return i(q),Y},S=function(Y){return Object.prototype.toString.call(Y)==="[object RegExp]"},B=function(Y){return!Y||typeof Y!="object"?!1:!!(Y.constructor&&Y.constructor.isBuffer&&Y.constructor.isBuffer(Y))},k=function(Y,q){return[].concat(Y,q)},z=function(Y,q){if(t(Y)){for(var ie=[],J=0;J<Y.length;J+=1)ie.push(q(Y[J]));return ie}return q(Y)};return l6={arrayToObject:s,assign:o,combine:k,compact:E,decode:d,encode:b,isBuffer:B,isRegExp:S,maybeMap:z,merge:a},l6}var u6,HF;function Gpe(){if(HF)return u6;HF=1;var n=Wpe(),e=LG(),t=_I(),r=Object.prototype.hasOwnProperty,i={brackets:function(j){return j+"[]"},comma:"comma",indices:function(j,Y){return j+"["+Y+"]"},repeat:function(j){return j}},s=Array.isArray,a=Array.prototype.push,o=function(z,j){a.apply(z,s(j)?j:[j])},d=Date.prototype.toISOString,g=t.default,b={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:g,formatter:t.formatters[g],indices:!1,serializeDate:function(j){return d.call(j)},skipNulls:!1,strictNullHandling:!1},E=function(j){return typeof j=="string"||typeof j=="number"||typeof j=="boolean"||typeof j=="symbol"||typeof j=="bigint"},S={},B=function z(j,Y,q,ie,J,$,te,W,oe,fe,he,Se,pe,we,Ke,ge,st,Qe){for(var Ze=j,We=Qe,Ce=0,Pe=!1;(We=We.get(S))!==void 0&&!Pe;){var it=We.get(j);if(Ce+=1,typeof it<"u"){if(it===Ce)throw new RangeError("Cyclic object value");Pe=!0}typeof We.get(S)>"u"&&(Ce=0)}if(typeof fe=="function"?Ze=fe(Y,Ze):Ze instanceof Date?Ze=pe(Ze):q==="comma"&&s(Ze)&&(Ze=e.maybeMap(Ze,function(tn){return tn instanceof Date?pe(tn):tn})),Ze===null){if($)return oe&&!ge?oe(Y,b.encoder,st,"key",we):Y;Ze=""}if(E(Ze)||e.isBuffer(Ze)){if(oe){var vt=ge?Y:oe(Y,b.encoder,st,"key",we);return[Ke(vt)+"="+Ke(oe(Ze,b.encoder,st,"value",we))]}return[Ke(Y)+"="+Ke(String(Ze))]}var _t=[];if(typeof Ze>"u")return _t;var ft;if(q==="comma"&&s(Ze))ge&&oe&&(Ze=e.maybeMap(Ze,oe)),ft=[{value:Ze.length>0?Ze.join(",")||null:void 0}];else if(s(fe))ft=fe;else{var Dt=Object.keys(Ze);ft=he?Dt.sort(he):Dt}var Tt=W?String(Y).replace(/\./g,"%2E"):String(Y),Ue=ie&&s(Ze)&&Ze.length===1?Tt+"[]":Tt;if(J&&s(Ze)&&Ze.length===0)return Ue+"[]";for(var Re=0;Re<ft.length;++Re){var Be=ft[Re],nt=typeof Be=="object"&&Be&&typeof Be.value<"u"?Be.value:Ze[Be];if(!(te&&nt===null)){var Ct=Se&&W?String(Be).replace(/\./g,"%2E"):String(Be),pt=s(Ze)?typeof q=="function"?q(Ue,Ct):Ue:Ue+(Se?"."+Ct:"["+Ct+"]");Qe.set(j,Ce);var zt=n();zt.set(S,Qe),o(_t,z(nt,pt,q,ie,J,$,te,W,q==="comma"&&ge&&s(Ze)?null:oe,fe,he,Se,pe,we,Ke,ge,st,zt))}}return _t},k=function(j){if(!j)return b;if(typeof j.allowEmptyArrays<"u"&&typeof j.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof j.encodeDotInKeys<"u"&&typeof j.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(j.encoder!==null&&typeof j.encoder<"u"&&typeof j.encoder!="function")throw new TypeError("Encoder has to be a function.");var Y=j.charset||b.charset;if(typeof j.charset<"u"&&j.charset!=="utf-8"&&j.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var q=t.default;if(typeof j.format<"u"){if(!r.call(t.formatters,j.format))throw new TypeError("Unknown format option provided.");q=j.format}var ie=t.formatters[q],J=b.filter;(typeof j.filter=="function"||s(j.filter))&&(J=j.filter);var $;if(j.arrayFormat in i?$=j.arrayFormat:"indices"in j?$=j.indices?"indices":"repeat":$=b.arrayFormat,"commaRoundTrip"in j&&typeof j.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var te=typeof j.allowDots>"u"?j.encodeDotInKeys===!0?!0:b.allowDots:!!j.allowDots;return{addQueryPrefix:typeof j.addQueryPrefix=="boolean"?j.addQueryPrefix:b.addQueryPrefix,allowDots:te,allowEmptyArrays:typeof j.allowEmptyArrays=="boolean"?!!j.allowEmptyArrays:b.allowEmptyArrays,arrayFormat:$,charset:Y,charsetSentinel:typeof j.charsetSentinel=="boolean"?j.charsetSentinel:b.charsetSentinel,commaRoundTrip:!!j.commaRoundTrip,delimiter:typeof j.delimiter>"u"?b.delimiter:j.delimiter,encode:typeof j.encode=="boolean"?j.encode:b.encode,encodeDotInKeys:typeof j.encodeDotInKeys=="boolean"?j.encodeDotInKeys:b.encodeDotInKeys,encoder:typeof j.encoder=="function"?j.encoder:b.encoder,encodeValuesOnly:typeof j.encodeValuesOnly=="boolean"?j.encodeValuesOnly:b.encodeValuesOnly,filter:J,format:q,formatter:ie,serializeDate:typeof j.serializeDate=="function"?j.serializeDate:b.serializeDate,skipNulls:typeof j.skipNulls=="boolean"?j.skipNulls:b.skipNulls,sort:typeof j.sort=="function"?j.sort:null,strictNullHandling:typeof j.strictNullHandling=="boolean"?j.strictNullHandling:b.strictNullHandling}};return u6=function(z,j){var Y=z,q=k(j),ie,J;typeof q.filter=="function"?(J=q.filter,Y=J("",Y)):s(q.filter)&&(J=q.filter,ie=J);var $=[];if(typeof Y!="object"||Y===null)return"";var te=i[q.arrayFormat],W=te==="comma"&&q.commaRoundTrip;ie||(ie=Object.keys(Y)),q.sort&&ie.sort(q.sort);for(var oe=n(),fe=0;fe<ie.length;++fe){var he=ie[fe],Se=Y[he];q.skipNulls&&Se===null||o($,B(Se,he,te,W,q.allowEmptyArrays,q.strictNullHandling,q.skipNulls,q.encodeDotInKeys,q.encode?q.encoder:null,q.filter,q.sort,q.allowDots,q.serializeDate,q.format,q.formatter,q.encodeValuesOnly,q.charset,oe))}var pe=$.join(q.delimiter),we=q.addQueryPrefix===!0?"?":"";return q.charsetSentinel&&(q.charset==="iso-8859-1"?we+="utf8=%26%2310003%3B&":we+="utf8=%E2%9C%93&"),pe.length>0?we+pe:""},u6}var A6,ZF;function Qpe(){if(ZF)return A6;ZF=1;var n=LG(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(S){return S.replace(/&#(\d+);/g,function(B,k){return String.fromCharCode(parseInt(k,10))})},s=function(S,B){return S&&typeof S=="string"&&B.comma&&S.indexOf(",")>-1?S.split(","):S},a="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",d=function(B,k){var z={__proto__:null},j=k.ignoreQueryPrefix?B.replace(/^\?/,""):B;j=j.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var Y=k.parameterLimit===1/0?void 0:k.parameterLimit,q=j.split(k.delimiter,Y),ie=-1,J,$=k.charset;if(k.charsetSentinel)for(J=0;J<q.length;++J)q[J].indexOf("utf8=")===0&&(q[J]===o?$="utf-8":q[J]===a&&($="iso-8859-1"),ie=J,J=q.length);for(J=0;J<q.length;++J)if(J!==ie){var te=q[J],W=te.indexOf("]="),oe=W===-1?te.indexOf("="):W+1,fe,he;oe===-1?(fe=k.decoder(te,r.decoder,$,"key"),he=k.strictNullHandling?null:""):(fe=k.decoder(te.slice(0,oe),r.decoder,$,"key"),he=n.maybeMap(s(te.slice(oe+1),k),function(pe){return k.decoder(pe,r.decoder,$,"value")})),he&&k.interpretNumericEntities&&$==="iso-8859-1"&&(he=i(String(he))),te.indexOf("[]=")>-1&&(he=t(he)?[he]:he);var Se=e.call(z,fe);Se&&k.duplicates==="combine"?z[fe]=n.combine(z[fe],he):(!Se||k.duplicates==="last")&&(z[fe]=he)}return z},g=function(S,B,k,z){for(var j=z?B:s(B,k),Y=S.length-1;Y>=0;--Y){var q,ie=S[Y];if(ie==="[]"&&k.parseArrays)q=k.allowEmptyArrays&&(j===""||k.strictNullHandling&&j===null)?[]:[].concat(j);else{q=k.plainObjects?{__proto__:null}:{};var J=ie.charAt(0)==="["&&ie.charAt(ie.length-1)==="]"?ie.slice(1,-1):ie,$=k.decodeDotInKeys?J.replace(/%2E/g,"."):J,te=parseInt($,10);!k.parseArrays&&$===""?q={0:j}:!isNaN(te)&&ie!==$&&String(te)===$&&te>=0&&k.parseArrays&&te<=k.arrayLimit?(q=[],q[te]=j):$!=="__proto__"&&(q[$]=j)}j=q}return j},b=function(B,k,z,j){if(B){var Y=z.allowDots?B.replace(/\.([^.[]+)/g,"[$1]"):B,q=/(\[[^[\]]*])/,ie=/(\[[^[\]]*])/g,J=z.depth>0&&q.exec(Y),$=J?Y.slice(0,J.index):Y,te=[];if($){if(!z.plainObjects&&e.call(Object.prototype,$)&&!z.allowPrototypes)return;te.push($)}for(var W=0;z.depth>0&&(J=ie.exec(Y))!==null&&W<z.depth;){if(W+=1,!z.plainObjects&&e.call(Object.prototype,J[1].slice(1,-1))&&!z.allowPrototypes)return;te.push(J[1])}if(J){if(z.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+z.depth+" and strictDepth is true");te.push("["+Y.slice(J.index)+"]")}return g(te,k,z,j)}},E=function(B){if(!B)return r;if(typeof B.allowEmptyArrays<"u"&&typeof B.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof B.decodeDotInKeys<"u"&&typeof B.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(B.decoder!==null&&typeof B.decoder<"u"&&typeof B.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof B.charset<"u"&&B.charset!=="utf-8"&&B.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var k=typeof B.charset>"u"?r.charset:B.charset,z=typeof B.duplicates>"u"?r.duplicates:B.duplicates;if(z!=="combine"&&z!=="first"&&z!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var j=typeof B.allowDots>"u"?B.decodeDotInKeys===!0?!0:r.allowDots:!!B.allowDots;return{allowDots:j,allowEmptyArrays:typeof B.allowEmptyArrays=="boolean"?!!B.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof B.allowPrototypes=="boolean"?B.allowPrototypes:r.allowPrototypes,allowSparse:typeof B.allowSparse=="boolean"?B.allowSparse:r.allowSparse,arrayLimit:typeof B.arrayLimit=="number"?B.arrayLimit:r.arrayLimit,charset:k,charsetSentinel:typeof B.charsetSentinel=="boolean"?B.charsetSentinel:r.charsetSentinel,comma:typeof B.comma=="boolean"?B.comma:r.comma,decodeDotInKeys:typeof B.decodeDotInKeys=="boolean"?B.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof B.decoder=="function"?B.decoder:r.decoder,delimiter:typeof B.delimiter=="string"||n.isRegExp(B.delimiter)?B.delimiter:r.delimiter,depth:typeof B.depth=="number"||B.depth===!1?+B.depth:r.depth,duplicates:z,ignoreQueryPrefix:B.ignoreQueryPrefix===!0,interpretNumericEntities:typeof B.interpretNumericEntities=="boolean"?B.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof B.parameterLimit=="number"?B.parameterLimit:r.parameterLimit,parseArrays:B.parseArrays!==!1,plainObjects:typeof B.plainObjects=="boolean"?B.plainObjects:r.plainObjects,strictDepth:typeof B.strictDepth=="boolean"?!!B.strictDepth:r.strictDepth,strictNullHandling:typeof B.strictNullHandling=="boolean"?B.strictNullHandling:r.strictNullHandling}};return A6=function(S,B){var k=E(B);if(S===""||S===null||typeof S>"u")return k.plainObjects?{__proto__:null}:{};for(var z=typeof S=="string"?d(S,k):S,j=k.plainObjects?{__proto__:null}:{},Y=Object.keys(z),q=0;q<Y.length;++q){var ie=Y[q],J=b(ie,z[ie],k,typeof S=="string");j=n.merge(j,J,k)}return k.allowSparse===!0?j:n.compact(j)},A6}var c6,XF;function qpe(){if(XF)return c6;XF=1;var n=Gpe(),e=Qpe(),t=_I();return c6={formats:t,parse:e,stringify:n},c6}var JF;function Ype(){if(JF)return pg;JF=1;var n=hpe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(a),d=["%","/","?",";","#"].concat(o),g=["/","?","#"],b=255,E=/^[+a-z0-9A-Z_-]{0,63}$/,S=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,B={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=qpe();function Y($,te,W){if($&&typeof $=="object"&&$ instanceof e)return $;var oe=new e;return oe.parse($,te,W),oe}e.prototype.parse=function($,te,W){if(typeof $!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof $);var oe=$.indexOf("?"),fe=oe!==-1&&oe<$.indexOf("#")?"?":"#",he=$.split(fe),Se=/\\/g;he[0]=he[0].replace(Se,"/"),$=he.join(fe);var pe=$;if(pe=pe.trim(),!W&&$.split("#").length===1){var we=i.exec(pe);if(we)return this.path=pe,this.href=pe,this.pathname=we[1],we[2]?(this.search=we[2],te?this.query=j.parse(this.search.substr(1)):this.query=this.search.substr(1)):te&&(this.search="",this.query={}),this}var Ke=t.exec(pe);if(Ke){Ke=Ke[0];var ge=Ke.toLowerCase();this.protocol=ge,pe=pe.substr(Ke.length)}if(W||Ke||pe.match(/^\/\/[^@/]+@[^@/]+/)){var st=pe.substr(0,2)==="//";st&&!(Ke&&k[Ke])&&(pe=pe.substr(2),this.slashes=!0)}if(!k[Ke]&&(st||Ke&&!z[Ke])){for(var Qe=-1,Ze=0;Ze<g.length;Ze++){var We=pe.indexOf(g[Ze]);We!==-1&&(Qe===-1||We<Qe)&&(Qe=We)}var Ce,Pe;Qe===-1?Pe=pe.lastIndexOf("@"):Pe=pe.lastIndexOf("@",Qe),Pe!==-1&&(Ce=pe.slice(0,Pe),pe=pe.slice(Pe+1),this.auth=decodeURIComponent(Ce)),Qe=-1;for(var Ze=0;Ze<d.length;Ze++){var We=pe.indexOf(d[Ze]);We!==-1&&(Qe===-1||We<Qe)&&(Qe=We)}Qe===-1&&(Qe=pe.length),this.host=pe.slice(0,Qe),pe=pe.slice(Qe),this.parseHost(),this.hostname=this.hostname||"";var it=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!it)for(var vt=this.hostname.split(/\./),Ze=0,_t=vt.length;Ze<_t;Ze++){var ft=vt[Ze];if(ft&&!ft.match(E)){for(var Dt="",Tt=0,Ue=ft.length;Tt<Ue;Tt++)ft.charCodeAt(Tt)>127?Dt+="x":Dt+=ft[Tt];if(!Dt.match(E)){var Re=vt.slice(0,Ze),Be=vt.slice(Ze+1),nt=ft.match(S);nt&&(Re.push(nt[1]),Be.unshift(nt[2])),Be.length&&(pe="/"+Be.join(".")+pe),this.hostname=Re.join(".");break}}}this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),it||(this.hostname=n.toASCII(this.hostname));var Ct=this.port?":"+this.port:"",pt=this.hostname||"";this.host=pt+Ct,this.href+=this.host,it&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),pe[0]!=="/"&&(pe="/"+pe))}if(!B[ge])for(var Ze=0,_t=o.length;Ze<_t;Ze++){var zt=o[Ze];if(pe.indexOf(zt)!==-1){var tn=encodeURIComponent(zt);tn===zt&&(tn=escape(zt)),pe=pe.split(zt).join(tn)}}var Lt=pe.indexOf("#");Lt!==-1&&(this.hash=pe.substr(Lt),pe=pe.slice(0,Lt));var gn=pe.indexOf("?");if(gn!==-1?(this.search=pe.substr(gn),this.query=pe.substr(gn+1),te&&(this.query=j.parse(this.query)),pe=pe.slice(0,gn)):te&&(this.search="",this.query={}),pe&&(this.pathname=pe),z[ge]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Ct=this.pathname||"",Nn=this.search||"";this.path=Ct+Nn}return this.href=this.format(),this};function q($){return typeof $=="string"&&($=Y($)),$ instanceof e?$.format():e.prototype.format.call($)}e.prototype.format=function(){var $=this.auth||"";$&&($=encodeURIComponent($),$=$.replace(/%3A/i,":"),$+="@");var te=this.protocol||"",W=this.pathname||"",oe=this.hash||"",fe=!1,he="";this.host?fe=$+this.host:this.hostname&&(fe=$+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(fe+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(he=j.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Se=this.search||he&&"?"+he||"";return te&&te.substr(-1)!==":"&&(te+=":"),this.slashes||(!te||z[te])&&fe!==!1?(fe="//"+(fe||""),W&&W.charAt(0)!=="/"&&(W="/"+W)):fe||(fe=""),oe&&oe.charAt(0)!=="#"&&(oe="#"+oe),Se&&Se.charAt(0)!=="?"&&(Se="?"+Se),W=W.replace(/[?#]/g,function(pe){return encodeURIComponent(pe)}),Se=Se.replace("#","%23"),te+fe+W+Se+oe};function ie($,te){return Y($,!1,!0).resolve(te)}e.prototype.resolve=function($){return this.resolveObject(Y($,!1,!0)).format()};function J($,te){return $?Y($,!1,!0).resolveObject(te):te}return e.prototype.resolveObject=function($){if(typeof $=="string"){var te=new e;te.parse($,!1,!0),$=te}for(var W=new e,oe=Object.keys(this),fe=0;fe<oe.length;fe++){var he=oe[fe];W[he]=this[he]}if(W.hash=$.hash,$.href==="")return W.href=W.format(),W;if($.slashes&&!$.protocol){for(var Se=Object.keys($),pe=0;pe<Se.length;pe++){var we=Se[pe];we!=="protocol"&&(W[we]=$[we])}return z[W.protocol]&&W.hostname&&!W.pathname&&(W.pathname="/",W.path=W.pathname),W.href=W.format(),W}if($.protocol&&$.protocol!==W.protocol){if(!z[$.protocol]){for(var Ke=Object.keys($),ge=0;ge<Ke.length;ge++){var st=Ke[ge];W[st]=$[st]}return W.href=W.format(),W}if(W.protocol=$.protocol,!$.host&&!k[$.protocol]){for(var _t=($.pathname||"").split("/");_t.length&&!($.host=_t.shift()););$.host||($.host=""),$.hostname||($.hostname=""),_t[0]!==""&&_t.unshift(""),_t.length<2&&_t.unshift(""),W.pathname=_t.join("/")}else W.pathname=$.pathname;if(W.search=$.search,W.query=$.query,W.host=$.host||"",W.auth=$.auth,W.hostname=$.hostname||$.host,W.port=$.port,W.pathname||W.search){var Qe=W.pathname||"",Ze=W.search||"";W.path=Qe+Ze}return W.slashes=W.slashes||$.slashes,W.href=W.format(),W}var We=W.pathname&&W.pathname.charAt(0)==="/",Ce=$.host||$.pathname&&$.pathname.charAt(0)==="/",Pe=Ce||We||W.host&&$.pathname,it=Pe,vt=W.pathname&&W.pathname.split("/")||[],_t=$.pathname&&$.pathname.split("/")||[],ft=W.protocol&&!z[W.protocol];if(ft&&(W.hostname="",W.port=null,W.host&&(vt[0]===""?vt[0]=W.host:vt.unshift(W.host)),W.host="",$.protocol&&($.hostname=null,$.port=null,$.host&&(_t[0]===""?_t[0]=$.host:_t.unshift($.host)),$.host=null),Pe=Pe&&(_t[0]===""||vt[0]==="")),Ce)W.host=$.host||$.host===""?$.host:W.host,W.hostname=$.hostname||$.hostname===""?$.hostname:W.hostname,W.search=$.search,W.query=$.query,vt=_t;else if(_t.length)vt||(vt=[]),vt.pop(),vt=vt.concat(_t),W.search=$.search,W.query=$.query;else if($.search!=null){if(ft){W.host=vt.shift(),W.hostname=W.host;var Dt=W.host&&W.host.indexOf("@")>0?W.host.split("@"):!1;Dt&&(W.auth=Dt.shift(),W.hostname=Dt.shift(),W.host=W.hostname)}return W.search=$.search,W.query=$.query,(W.pathname!==null||W.search!==null)&&(W.path=(W.pathname?W.pathname:"")+(W.search?W.search:"")),W.href=W.format(),W}if(!vt.length)return W.pathname=null,W.search?W.path="/"+W.search:W.path=null,W.href=W.format(),W;for(var Tt=vt.slice(-1)[0],Ue=(W.host||$.host||vt.length>1)&&(Tt==="."||Tt==="..")||Tt==="",Re=0,Be=vt.length;Be>=0;Be--)Tt=vt[Be],Tt==="."?vt.splice(Be,1):Tt===".."?(vt.splice(Be,1),Re++):Re&&(vt.splice(Be,1),Re--);if(!Pe&&!it)for(;Re--;Re)vt.unshift("..");Pe&&vt[0]!==""&&(!vt[0]||vt[0].charAt(0)!=="/")&&vt.unshift(""),Ue&&vt.join("/").substr(-1)!=="/"&&vt.push("");var nt=vt[0]===""||vt[0]&&vt[0].charAt(0)==="/";if(ft){W.hostname=nt?"":vt.length?vt.shift():"",W.host=W.hostname;var Dt=W.host&&W.host.indexOf("@")>0?W.host.split("@"):!1;Dt&&(W.auth=Dt.shift(),W.hostname=Dt.shift(),W.host=W.hostname)}return Pe=Pe||W.host&&vt.length,Pe&&!nt&&vt.unshift(""),vt.length>0?W.pathname=vt.join("/"):(W.pathname=null,W.path=null),(W.pathname!==null||W.search!==null)&&(W.path=(W.pathname?W.pathname:"")+(W.search?W.search:"")),W.auth=$.auth||W.auth,W.slashes=W.slashes||$.slashes,W.href=W.format(),W},e.prototype.parseHost=function(){var $=this.host,te=r.exec($);te&&(te=te[0],te!==":"&&(this.port=te.substr(1)),$=$.substr(0,$.length-te.length)),$&&(this.hostname=$)},pg.parse=Y,pg.resolve=ie,pg.resolveObject=J,pg.format=q,pg.Url=e,pg}var $pe=Ype();const eL=Xa($pe);function Cs(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Cs=function(){return a},a}Cs();function UG(n,e,t){Cs().f[0]++,Cs().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(r=>{if(Cs().f[1]++,Cs().s[1]++,r.ok)Cs().b[0][1]++;else throw Cs().b[0][0]++,Cs().s[2]++,new Error("Failed to load metadata for "+n);return Cs().s[3]++,r.json()}).then(r=>{Cs().f[2]++,Cs().s[4]++,t(r)}).catch(()=>{Cs().f[3]++,Cs().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),Cs().s[6]++,t(e)})}function Vpe(n,e){if(Cs().f[4]++,Cs().s[7]++,n)Cs().b[1][1]++;else return Cs().b[1][0]++,Cs().s[8]++,e([]);const t=(Cs().s[9]++,eL.parse(n)),r=(Cs().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");Cs().s[11]++,t.pathname===r?(Cs().b[2][0]++,Cs().s[12]++,t.pathname="/fontstacks.json"):(Cs().b[2][1]++,Cs().s[13]++,t.pathname=t.pathname.replace(r,".json"));const i=(Cs().s[14]++,eL.format(t));Cs().s[15]++,UG(i,[],e)}function Hpe(n,e){if(Cs().f[5]++,Cs().s[16]++,n)Cs().b[3][1]++;else return Cs().b[3][0]++,Cs().s[17]++,e([]);const t=(Cs().s[18]++,n+".json");Cs().s[19]++,UG(t,{},r=>(Cs().f[6]++,Cs().s[20]++,e(Object.keys(r))))}function GA(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="16cd8175e865a1f27680600ab24a4fbadf5fb4b2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:2},end:{line:4,column:46}},2:{start:{line:7,column:2},end:{line:7,column:41}},3:{start:{line:8,column:2},end:{line:18,column:5}},4:{start:{line:12,column:4},end:{line:12,column:27}},5:{start:{line:14,column:4},end:{line:14,column:40}},6:{start:{line:16,column:4},end:{line:16,column:60}},7:{start:{line:17,column:4},end:{line:17,column:25}},8:{start:{line:21,column:21},end:{line:21,column:50}},9:{start:{line:22,column:2},end:{line:22,column:42}},10:{start:{line:23,column:2},end:{line:23,column:73}}},fnMap:{0:{name:"initialStyleUrl",decl:{start:{line:2,column:16},end:{line:2,column:31}},loc:{start:{line:2,column:34},end:{line:5,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:43},end:{line:19,column:1}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:25},end:{line:15,column:3}},line:13},4:{name:"(anonymous_4)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:22},end:{line:18,column:3}},line:15},5:{name:"removeStyleQuerystring",decl:{start:{line:20,column:16},end:{line:20,column:38}},loc:{start:{line:20,column:41},end:{line:24,column:1}},line:20}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAEX,gBAAS,kBAAkB;AAChC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,SAAO,WAAW,aAAa,IAAI,OAAO;AAC5C;AAEO,gBAAS,aAAa,UAAkB,IAA8B;AAC3E,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,QAAM,UAAU;AAAA,IACd,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,EACpC,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,iCAAiC,QAAQ;AACtD,OAAG,MAAM,UAAU;AAAA,EACrB,CAAC;AACL;AAEO,gBAAS,yBAAyB;AACvC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,aAAW,aAAa,OAAO,OAAO;AACtC,SAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AACvE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16cd8175e865a1f27680600ab24a4fbadf5fb4b2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return GA=function(){return a},a}GA();function Zpe(){GA().f[0]++;const n=(GA().s[0]++,new URL(window.location.href));return GA().s[1]++,n.searchParams.get("style")}function zG(n,e){GA().f[1]++,GA().s[2]++,console.log("Loading style",n),GA().s[3]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(t){return GA().f[2]++,GA().s[4]++,t.json()}).then(function(t){GA().f[3]++,GA().s[5]++,e(pc.ensureStyleValidity(t))}).catch(function(){GA().f[4]++,GA().s[6]++,console.warn("Could not fetch default style",n),GA().s[7]++,e(pc.emptyStyle)})}function tL(){GA().f[5]++;const n=(GA().s[8]++,new URL(window.location.href));GA().s[9]++,n.searchParams.delete("style"),GA().s[10]++,window.history.replaceState({},document.title,n.toString())}function Yd(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Yd=function(){return a},a}Yd();function jG(n,e){Yd().f[0]++;const t=(Yd().s[0]++,Q$(n,e));return Yd().s[1]++,t.map(r=>(Yd().f[1]++,Yd().s[2]++,r.command+" "+r.args.join(" ")))}function Xpe(n,e){return Yd().f[2]++,Yd().s[3]++,jG(n,e).map(t=>(Yd().f[3]++,Yd().s[4]++,"Undo "+t))}function Jpe(n,e){return Yd().f[4]++,Yd().s[5]++,jG(n,e).map(t=>(Yd().f[5]++,Yd().s[6]++,"Redo "+t))}function mi(){var n="/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",e="d0461aebf8a7391762efd074af8c5c2674087e64",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:36}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:50,column:4},end:{line:50,column:13}},22:{start:{line:54,column:4},end:{line:59,column:5}},23:{start:{line:54,column:17},end:{line:54,column:18}},24:{start:{line:55,column:18},end:{line:55,column:44}},25:{start:{line:56,column:6},end:{line:58,column:7}},26:{start:{line:57,column:8},end:{line:57,column:44}},27:{start:{line:63,column:4},end:{line:63,column:65}},28:{start:{line:63,column:37},end:{line:63,column:65}},29:{start:{line:64,column:20},end:{line:64,column:67}},30:{start:{line:65,column:22},end:{line:65,column:68}},31:{start:{line:66,column:4},end:{line:66,column:52}},32:{start:{line:66,column:19},end:{line:66,column:52}},33:{start:{line:67,column:4},end:{line:67,column:25}},34:{start:{line:71,column:4},end:{line:71,column:51}},35:{start:{line:72,column:16},end:{line:72,column:37}},36:{start:{line:73,column:4},end:{line:73,column:63}},37:{start:{line:74,column:4},end:{line:74,column:65}},38:{start:{line:75,column:4},end:{line:75,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:11},end:{line:51,column:3}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:10},end:{line:60,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:68,column:3}},line:62},9:{name:"(anonymous_9)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:17},end:{line:76,column:3}},line:70}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:56,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:58,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},4:{loc:{start:{line:63,column:4},end:{line:63,column:65}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:65}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},5:{loc:{start:{line:66,column:4},end:{line:66,column:52}},type:"if",locations:[{start:{line:66,column:4},end:{line:66,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,iBAAiB,IAA8B;AAC7D,eAAa,iBAAiB,EAAE;AAClC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA,EAEA,KAAK,IAA8B;AACjC,OAAG,IAAI;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,IAA8B;AACxC,QAAG,KAAK,UAAU,WAAW,EAAG,QAAO,iBAAiB,EAAE;AAC1D,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAG,UAAW,QAAO,GAAG,KAAK,MAAM,SAAS,CAAC;AAC7C,qBAAiB,EAAE;AAAA,EACrB;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAChC,WAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,WAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAC3D,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d0461aebf8a7391762efd074af8c5c2674087e64"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return mi=function(){return a},a}mi();const WC=(mi().s[0]++,"maputnik"),NG=(mi().s[1]++,"style"),nL=(mi().s[2]++,{latest:[WC,"latest_style"].join(":"),accessToken:[WC,"access_token"].join(":")}),eme=(mi().s[3]++,OG[0].url);function rL(n){mi().f[0]++,mi().s[4]++,zG(eme,n)}function tme(){mi().f[1]++;const n=(mi().s[5]++,[]);mi().s[6]++;for(let e=(mi().s[7]++,0);e<window.localStorage.length;e++){const t=(mi().s[8]++,window.localStorage.key(e));mi().s[9]++,WG(t)?(mi().b[0][0]++,mi().s[10]++,n.push(nme(t))):mi().b[0][1]++}return mi().s[11]++,n}function WG(n){mi().f[2]++;const e=(mi().s[12]++,n.split(":"));return mi().s[13]++,mi().b[1][0]++,e.length===3&&(mi().b[1][1]++,e[0]===WC)&&(mi().b[1][2]++,e[1]===NG)}function nme(n){if(mi().f[3]++,mi().s[14]++,WG(n))mi().b[2][1]++;else throw mi().b[2][0]++,mi().s[15]++,"Key is not a valid style key";const e=(mi().s[16]++,n.split(":")),t=(mi().s[17]++,e[2]);return mi().s[18]++,t}function iL(n){return mi().f[4]++,mi().s[19]++,[WC,NG,n].join(":")}class oL{constructor(){Tn(this,"mapStyles");mi().f[5]++,mi().s[20]++,this.mapStyles=tme()}init(e){mi().f[6]++,mi().s[21]++,e(null)}purge(){mi().f[7]++,mi().s[22]++;for(let e=(mi().s[23]++,0);e<window.localStorage.length;e++){const t=(mi().s[24]++,window.localStorage.key(e));mi().s[25]++,t.startsWith(WC)?(mi().b[3][0]++,mi().s[26]++,window.localStorage.removeItem(t)):mi().b[3][1]++}}latestStyle(e){if(mi().f[8]++,mi().s[27]++,this.mapStyles.length===0)return mi().b[4][0]++,mi().s[28]++,rL(e);mi().b[4][1]++;const t=(mi().s[29]++,window.localStorage.getItem(nL.latest)),r=(mi().s[30]++,window.localStorage.getItem(iL(t)));if(mi().s[31]++,r)return mi().b[5][0]++,mi().s[32]++,e(JSON.parse(r));mi().b[5][1]++,mi().s[33]++,rL(e)}save(e){mi().f[9]++,mi().s[34]++,e=pc.ensureStyleValidity(e);const t=(mi().s[35]++,iL(e.id));return mi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),mi().s[37]++,window.localStorage.setItem(nL.latest,e.id),mi().s[38]++,e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var FB=function(n,e){return FB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},FB(n,e)};function GG(n,e){FB(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function rme(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function ime(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s}function ome(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(ime(arguments[e]));return n}var QG=function(){function n(e,t){this.target=t,this.type=e}return n}(),sme=function(n){GG(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(QG),ame=function(n){GG(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var s=n.call(this,"close",i)||this;return s.wasClean=!0,s.code=t,s.reason=r,s}return e}(QG);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var lme=function(){if(typeof WebSocket<"u")return WebSocket},ume=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},mg={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Ame=function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){i._debug("open event");var a=i._options.minUptime,o=a===void 0?mg.minUptime:a;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},o),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(d){return i._ws.send(d)}),i._messageQueue=[],i.onopen&&i.onopen(s),i._listeners.open.forEach(function(d){return i._callEventListener(s,d)})},this._handleMessage=function(s){i._debug("message event"),i.onmessage&&i.onmessage(s),i._listeners.message.forEach(function(a){return i._callEventListener(s,a)})},this._handleError=function(s){i._debug("error event",s.message),i._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(s),i._debug("exec error listeners"),i._listeners.error.forEach(function(a){return i._callEventListener(s,a)}),i._connect()},this._handleClose=function(s){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(s),i._listeners.close.forEach(function(a){return i._callEventListener(s,a)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?mg.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var s=rme(i),a=s.next();!a.done;a=s.next()){var o=a.value;this._callEventListener(e,o)}}catch(d){t={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,ome(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?mg.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,s=i===void 0?mg.minReconnectionDelay:i,a=e.maxReconnectionDelay,o=a===void 0?mg.maxReconnectionDelay:a,d=0;return this._retryCount>0&&(d=s*Math.pow(r,this._retryCount-1),d>o&&(d=o)),this._debug("next delay",d),d},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?mg.maxRetries:r,s=t.connectionTimeout,a=s===void 0?mg.connectionTimeout:s,o=t.WebSocket,d=o===void 0?lme():o;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!ume(d))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(g){e._closeCalled||(e._debug("connect",{url:g,protocols:e._protocols}),e._ws=e._protocols?new d(g,e._protocols):new d(g),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},a))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new sme(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new ame(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();function gi(){var n="/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",e="fa2411bec13fe7a0c74835456fb0c60c3fdde9e5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:36}},3:{start:{line:13,column:17},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:30,column:7}},8:{start:{line:22,column:6},end:{line:22,column:29}},9:{start:{line:24,column:23},end:{line:24,column:27}},10:{start:{line:25,column:6},end:{line:25,column:39}},11:{start:{line:26,column:6},end:{line:26,column:32}},12:{start:{line:27,column:6},end:{line:27,column:15}},13:{start:{line:29,column:6},end:{line:29,column:52}},14:{start:{line:33,column:23},end:{line:33,column:67}},15:{start:{line:34,column:4},end:{line:45,column:6}},16:{start:{line:35,column:6},end:{line:35,column:26}},17:{start:{line:35,column:19},end:{line:35,column:26}},18:{start:{line:36,column:6},end:{line:36,column:52}},19:{start:{line:37,column:24},end:{line:37,column:40}},20:{start:{line:38,column:6},end:{line:42,column:7}},21:{start:{line:39,column:8},end:{line:39,column:41}},22:{start:{line:41,column:8},end:{line:41,column:27}},23:{start:{line:43,column:27},end:{line:43,column:65}},24:{start:{line:44,column:6},end:{line:44,column:44}},25:{start:{line:48,column:4},end:{line:58,column:5}},26:{start:{line:49,column:6},end:{line:55,column:9}},27:{start:{line:52,column:8},end:{line:52,column:31}},28:{start:{line:54,column:8},end:{line:54,column:44}},29:{start:{line:57,column:6},end:{line:57,column:92}},30:{start:{line:62,column:22},end:{line:66,column:5}},31:{start:{line:67,column:15},end:{line:67,column:26}},32:{start:{line:68,column:4},end:{line:77,column:7}},33:{start:{line:76,column:6},end:{line:76,column:38}},34:{start:{line:76,column:17},end:{line:76,column:38}},35:{start:{line:78,column:4},end:{line:78,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:31,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:21,column:12},end:{line:21,column:13}},loc:{start:{line:21,column:26},end:{line:23,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:22},end:{line:28,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:28,column:13},end:{line:28,column:14}},loc:{start:{line:28,column:19},end:{line:30,column:5}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:23},end:{line:46,column:3}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:34},end:{line:45,column:5}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:18},end:{line:59,column:3}},line:47},9:{name:"(anonymous_9)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:53,column:7}},line:51},10:{name:"(anonymous_10)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:29},end:{line:55,column:7}},line:53},11:{name:"(anonymous_11)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:17},end:{line:79,column:3}},line:61},12:{name:"(anonymous_12)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:29},end:{line:77,column:5}},line:75}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:12,column:17},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:26}},{start:{line:12,column:30},end:{line:12,column:36}}],line:12},2:{loc:{start:{line:13,column:17},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:41}}],line:13},3:{loc:{start:{line:35,column:6},end:{line:35,column:26}},type:"if",locations:[{start:{line:35,column:6},end:{line:35,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:48,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:58,column:5}},{start:{line:56,column:11},end:{line:58,column:5}}],line:48},5:{loc:{start:{line:76,column:6},end:{line:76,column:38}},type:"if",locations:[{start:{line:76,column:6},end:{line:76,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AAErB,OAAO,2BAA2B;AAQ3B,aAAM,cAAc;AAAA,EAEzB;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,KAAK,QAAQ;AAC1B,UAAM,OAAO,KAAK,QAAQ;AAC1B,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,KAAK,IAA8B;AACjC,UAAM,KAAK,WAAW,WAAW;AAAA,MAC/B,MAAM;AAAA,IACR,CAAC,EACE,KAAK,CAAC,aAAc;AACnB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AACxB,SAAG,IAAI;AAAA,IACT,CAAC,EACA,MAAM,MAAM;AACX,SAAG,IAAI,MAAM,8BAA8B,CAAC;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,IAA8B;AACxC,QAAG,KAAK,eAAe;AACrB,YAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QACrD,MAAM;AAAA,MACR,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,eAAO,SAAS,KAAK;AAAA,MACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,WAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,MACpC,CAAC;AAAA,IACL,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fa2411bec13fe7a0c74835456fb0c60c3fdde9e5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return gi=function(){return a},a}gi();class cme{constructor(e){Tn(this,"localUrl");Tn(this,"websocketUrl");Tn(this,"latestStyleId",(gi().s[0]++,void 0));Tn(this,"onLocalStyleChange");gi().f[0]++,gi().s[1]++,this.onLocalStyleChange=(gi().b[0][0]++,e.onLocalStyleChange||(gi().b[0][1]++,()=>{gi().f[1]++}));const t=(gi().s[2]++,gi().b[1][0]++,e.port||(gi().b[1][1]++,"8000")),r=(gi().s[3]++,gi().b[2][0]++,e.host||(gi().b[2][1]++,"localhost"));gi().s[4]++,this.localUrl=`http://${r}:${t}`,gi().s[5]++,this.websocketUrl=`ws://${r}:${t}/ws`,gi().s[6]++,this.init=this.init.bind(this)}init(e){gi().f[2]++,gi().s[7]++,fetch(this.localUrl+"/styles",{mode:"cors"}).then(t=>(gi().f[3]++,gi().s[8]++,t.json())).then(t=>{gi().f[4]++;const r=(gi().s[9]++,t);gi().s[10]++,this.latestStyleId=r[0],gi().s[11]++,this.notifyLocalChanges(),gi().s[12]++,e(null)}).catch(()=>{gi().f[5]++,gi().s[13]++,e(new Error("Can not connect to style API"))})}notifyLocalChanges(){gi().f[6]++;const e=(gi().s[14]++,new Ame(this.websocketUrl));gi().s[15]++,e.onmessage=t=>{if(gi().f[7]++,gi().s[16]++,t.data)gi().b[3][1]++;else{gi().b[3][0]++,gi().s[17]++;return}gi().s[18]++,console.log("Received style update from API");let r=(gi().s[19]++,pc.emptyStyle);gi().s[20]++;try{gi().s[21]++,r=JSON.parse(t.data)}catch(s){gi().s[22]++,console.error(s)}const i=(gi().s[23]++,pc.ensureStyleValidity(r));gi().s[24]++,this.onLocalStyleChange(i)}}latestStyle(e){if(gi().f[8]++,gi().s[25]++,this.latestStyleId)gi().b[4][0]++,gi().s[26]++,fetch(this.localUrl+"/styles/"+this.latestStyleId,{mode:"cors"}).then(function(t){return gi().f[9]++,gi().s[27]++,t.json()}).then(function(t){gi().f[10]++,gi().s[28]++,e(pc.ensureStyleValidity(t))});else throw gi().b[4][1]++,gi().s[29]++,new Error("No latest style available. You need to init the api backend first.")}save(e){gi().f[11]++;const t=(gi().s[30]++,HU(pc.stripAccessTokens(pc.replaceAccessTokens(e)))),r=(gi().s[31]++,e.id);return gi().s[32]++,fetch(this.localUrl+"/styles/"+r,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}).catch(function(i){gi().f[12]++,gi().s[33]++,i?(gi().b[5][0]++,gi().s[34]++,console.error(i)):gi().b[5][1]++}),gi().s[35]++,e}}function El(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="9277d165d3b1fd7c235a1faab33cf41596d9966e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAA6C;AAGvD,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9277d165d3b1fd7c235a1faab33cf41596d9966e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return El=function(){return a},a}El();class dme{constructor(e=(El().b[0][0]++,[])){Tn(this,"revisions");Tn(this,"currentIdx");El().f[0]++,El().s[0]++,this.revisions=e,El().s[1]++,this.currentIdx=e.length-1}get latest(){return El().f[1]++,El().s[2]++,this.revisions[this.revisions.length-1]}get current(){return El().f[2]++,El().s[3]++,this.revisions[this.currentIdx]}addRevision(e){El().f[3]++,El().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),El().s[5]++,this.revisions.push(e),El().s[6]++,this.currentIdx++}undo(){return El().f[4]++,El().s[7]++,this.currentIdx>0?(El().b[1][0]++,El().s[8]++,this.currentIdx--):El().b[1][1]++,El().s[9]++,this.current}redo(){return El().f[5]++,El().s[10]++,this.currentIdx<this.revisions.length-1?(El().b[2][0]++,El().s[11]++,this.currentIdx++):El().b[2][1]++,El().s[12]++,this.current}}var d6,sL;function hme(){if(sL)return d6;sL=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,d=typeof window=="object"&&window&&window.Object===Object&&window,g=typeof self=="object"&&self&&self.Object===Object&&self,b=d||g||Function("return this")(),E=Object.prototype,S=E.toString,B=Math.max,k=Math.min,z=function(){return b.Date.now()};function j(te,W,oe){var fe,he,Se,pe,we,Ke,ge=0,st=!1,Qe=!1,Ze=!0;if(typeof te!="function")throw new TypeError(n);W=$(W)||0,q(oe)&&(st=!!oe.leading,Qe="maxWait"in oe,Se=Qe?B($(oe.maxWait)||0,W):Se,Ze="trailing"in oe?!!oe.trailing:Ze);function We(Ue){var Re=fe,Be=he;return fe=he=void 0,ge=Ue,pe=te.apply(Be,Re),pe}function Ce(Ue){return ge=Ue,we=setTimeout(vt,W),st?We(Ue):pe}function Pe(Ue){var Re=Ue-Ke,Be=Ue-ge,nt=W-Re;return Qe?k(nt,Se-Be):nt}function it(Ue){var Re=Ue-Ke,Be=Ue-ge;return Ke===void 0||Re>=W||Re<0||Qe&&Be>=Se}function vt(){var Ue=z();if(it(Ue))return _t(Ue);we=setTimeout(vt,Pe(Ue))}function _t(Ue){return we=void 0,Ze&&fe?We(Ue):(fe=he=void 0,pe)}function ft(){we!==void 0&&clearTimeout(we),ge=0,fe=Ke=he=we=void 0}function Dt(){return we===void 0?pe:_t(z())}function Tt(){var Ue=z(),Re=it(Ue);if(fe=arguments,he=this,Ke=Ue,Re){if(we===void 0)return Ce(Ke);if(Qe)return we=setTimeout(vt,W),We(Ke)}return we===void 0&&(we=setTimeout(vt,W)),pe}return Tt.cancel=ft,Tt.flush=Dt,Tt}function Y(te,W,oe){var fe=!0,he=!0;if(typeof te!="function")throw new TypeError(n);return q(oe)&&(fe="leading"in oe?!!oe.leading:fe,he="trailing"in oe?!!oe.trailing:he),j(te,W,{leading:fe,maxWait:W,trailing:he})}function q(te){var W=typeof te;return!!te&&(W=="object"||W=="function")}function ie(te){return!!te&&typeof te=="object"}function J(te){return typeof te=="symbol"||ie(te)&&S.call(te)==t}function $(te){if(typeof te=="number")return te;if(J(te))return e;if(q(te)){var W=typeof te.valueOf=="function"?te.valueOf():te;te=q(W)?W+"":W}if(typeof te!="string")return te===0?te:+te;te=te.replace(r,"");var oe=s.test(te);return oe||a.test(te)?o(te.slice(2),oe?2:8):i.test(te)?e:+te}return d6=Y,d6}var fme=hme();const pme=Xa(fme);var Vv={exports:{}};Vv.exports;var aL;function mme(){return aL||(aL=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",d="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",E="[object Date]",S="[object Error]",B="[object Function]",k="[object GeneratorFunction]",z="[object Map]",j="[object Number]",Y="[object Null]",q="[object Object]",ie="[object Promise]",J="[object Proxy]",$="[object RegExp]",te="[object Set]",W="[object String]",oe="[object Symbol]",fe="[object Undefined]",he="[object WeakMap]",Se="[object ArrayBuffer]",pe="[object DataView]",we="[object Float32Array]",Ke="[object Float64Array]",ge="[object Int8Array]",st="[object Int16Array]",Qe="[object Int32Array]",Ze="[object Uint8Array]",We="[object Uint8ClampedArray]",Ce="[object Uint16Array]",Pe="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,vt=/^\[object .+?Constructor\]$/,_t=/^(?:0|[1-9]\d*)$/,ft={};ft[we]=ft[Ke]=ft[ge]=ft[st]=ft[Qe]=ft[Ze]=ft[We]=ft[Ce]=ft[Pe]=!0,ft[o]=ft[d]=ft[Se]=ft[b]=ft[pe]=ft[E]=ft[S]=ft[B]=ft[z]=ft[j]=ft[q]=ft[$]=ft[te]=ft[W]=ft[he]=!1;var Dt=typeof window=="object"&&window&&window.Object===Object&&window,Tt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Dt||Tt||Function("return this")(),Re=e&&!e.nodeType&&e,Be=Re&&!0&&n&&!n.nodeType&&n,nt=Be&&Be.exports===Re,Ct=nt&&Dt.process,pt=function(){try{return Ct&&Ct.binding&&Ct.binding("util")}catch{}}(),zt=pt&&pt.isTypedArray;function tn(ee,Ie){for(var at=-1,Ht=ee==null?0:ee.length,kr=0,Vn=[];++at<Ht;){var ai=ee[at];Ie(ai,at,ee)&&(Vn[kr++]=ai)}return Vn}function Lt(ee,Ie){for(var at=-1,Ht=Ie.length,kr=ee.length;++at<Ht;)ee[kr+at]=Ie[at];return ee}function gn(ee,Ie){for(var at=-1,Ht=ee==null?0:ee.length;++at<Ht;)if(Ie(ee[at],at,ee))return!0;return!1}function Nn(ee,Ie){for(var at=-1,Ht=Array(ee);++at<ee;)Ht[at]=Ie(at);return Ht}function rn(ee){return function(Ie){return ee(Ie)}}function or(ee,Ie){return ee.has(Ie)}function Kn(ee,Ie){return ee==null?void 0:ee[Ie]}function pn(ee){var Ie=-1,at=Array(ee.size);return ee.forEach(function(Ht,kr){at[++Ie]=[kr,Ht]}),at}function Xn(ee,Ie){return function(at){return ee(Ie(at))}}function Mr(ee){var Ie=-1,at=Array(ee.size);return ee.forEach(function(Ht){at[++Ie]=Ht}),at}var Yn=Array.prototype,er=Function.prototype,qe=Object.prototype,ce=Ue["__core-js_shared__"],me=er.toString,tt=qe.hasOwnProperty,Et=function(){var ee=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),$t=qe.toString,on=RegExp("^"+me.call(tt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rr=nt?Ue.Buffer:void 0,Oe=Ue.Symbol,se=Ue.Uint8Array,_e=qe.propertyIsEnumerable,p=Yn.splice,Ne=Oe?Oe.toStringTag:void 0,$e=Object.getOwnPropertySymbols,rt=rr?rr.isBuffer:void 0,dt=Xn(Object.keys,Object),ct=Bi(Ue,"DataView"),Qt=Bi(Ue,"Map"),Vt=Bi(Ue,"Promise"),Nt=Bi(Ue,"Set"),wt=Bi(Ue,"WeakMap"),Dn=Bi(Object,"create"),On=po(ct),pr=po(Qt),Er=po(Vt),sn=po(Nt),Wn=po(wt),Ln=Oe?Oe.prototype:void 0,Ir=Ln?Ln.valueOf:void 0;function Br(ee){var Ie=-1,at=ee==null?0:ee.length;for(this.clear();++Ie<at;){var Ht=ee[Ie];this.set(Ht[0],Ht[1])}}function Kr(){this.__data__=Dn?Dn(null):{},this.size=0}function Ar(ee){var Ie=this.has(ee)&&delete this.__data__[ee];return this.size-=Ie?1:0,Ie}function ho(ee){var Ie=this.__data__;if(Dn){var at=Ie[ee];return at===r?void 0:at}return tt.call(Ie,ee)?Ie[ee]:void 0}function Ea(ee){var Ie=this.__data__;return Dn?Ie[ee]!==void 0:tt.call(Ie,ee)}function Yi(ee,Ie){var at=this.__data__;return this.size+=this.has(ee)?0:1,at[ee]=Dn&&Ie===void 0?r:Ie,this}Br.prototype.clear=Kr,Br.prototype.delete=Ar,Br.prototype.get=ho,Br.prototype.has=Ea,Br.prototype.set=Yi;function vi(ee){var Ie=-1,at=ee==null?0:ee.length;for(this.clear();++Ie<at;){var Ht=ee[Ie];this.set(Ht[0],Ht[1])}}function so(){this.__data__=[],this.size=0}function So(ee){var Ie=this.__data__,at=ar(Ie,ee);if(at<0)return!1;var Ht=Ie.length-1;return at==Ht?Ie.pop():p.call(Ie,at,1),--this.size,!0}function Pi(ee){var Ie=this.__data__,at=ar(Ie,ee);return at<0?void 0:Ie[at][1]}function Ua(ee){return ar(this.__data__,ee)>-1}function Ba(ee,Ie){var at=this.__data__,Ht=ar(at,ee);return Ht<0?(++this.size,at.push([ee,Ie])):at[Ht][1]=Ie,this}vi.prototype.clear=so,vi.prototype.delete=So,vi.prototype.get=Pi,vi.prototype.has=Ua,vi.prototype.set=Ba;function rs(ee){var Ie=-1,at=ee==null?0:ee.length;for(this.clear();++Ie<at;){var Ht=ee[Ie];this.set(Ht[0],Ht[1])}}function ca(){this.size=0,this.__data__={hash:new Br,map:new(Qt||vi),string:new Br}}function dl(ee){var Ie=Lr(this,ee).delete(ee);return this.size-=Ie?1:0,Ie}function lo(ee){return Lr(this,ee).get(ee)}function Ku(ee){return Lr(this,ee).has(ee)}function iu(ee,Ie){var at=Lr(this,ee),Ht=at.size;return at.set(ee,Ie),this.size+=at.size==Ht?0:1,this}rs.prototype.clear=ca,rs.prototype.delete=dl,rs.prototype.get=lo,rs.prototype.has=Ku,rs.prototype.set=iu;function ao(ee){var Ie=-1,at=ee==null?0:ee.length;for(this.__data__=new rs;++Ie<at;)this.add(ee[Ie])}function Fr(ee){return this.__data__.set(ee,r),this}function Ja(ee){return this.__data__.has(ee)}ao.prototype.add=ao.prototype.push=Fr,ao.prototype.has=Ja;function Rs(ee){var Ie=this.__data__=new vi(ee);this.size=Ie.size}function oa(){this.__data__=new vi,this.size=0}function Ye(ee){var Ie=this.__data__,at=Ie.delete(ee);return this.size=Ie.size,at}function Mt(ee){return this.__data__.get(ee)}function yn(ee){return this.__data__.has(ee)}function $n(ee,Ie){var at=this.__data__;if(at instanceof vi){var Ht=at.__data__;if(!Qt||Ht.length<t-1)return Ht.push([ee,Ie]),this.size=++at.size,this;at=this.__data__=new rs(Ht)}return at.set(ee,Ie),this.size=at.size,this}Rs.prototype.clear=oa,Rs.prototype.delete=Ye,Rs.prototype.get=Mt,Rs.prototype.has=yn,Rs.prototype.set=$n;function dn(ee,Ie){var at=nl(ee),Ht=!at&&Ss(ee),kr=!at&&!Ht&&Ol(ee),Vn=!at&&!Ht&&!kr&&su(ee),ai=at||Ht||kr||Vn,di=ai?Nn(ee.length,String):[],Cr=di.length;for(var Tr in ee)tt.call(ee,Tr)&&!(ai&&(Tr=="length"||kr&&(Tr=="offset"||Tr=="parent")||Vn&&(Tr=="buffer"||Tr=="byteLength"||Tr=="byteOffset")||Qs(Tr,Cr)))&&di.push(Tr);return di}function ar(ee,Ie){for(var at=ee.length;at--;)if(gs(ee[at][0],Ie))return at;return-1}function Ri(ee,Ie,at){var Ht=Ie(ee);return nl(ee)?Ht:Lt(Ht,at(ee))}function fo(ee){return ee==null?ee===void 0?fe:Y:Ne&&Ne in Object(ee)?tl(ee):Hs(ee)}function _s(ee){return ei(ee)&&fo(ee)==o}function Gs(ee,Ie,at,Ht,kr){return ee===Ie?!0:ee==null||Ie==null||!ei(ee)&&!ei(Ie)?ee!==ee&&Ie!==Ie:bA(ee,Ie,at,Ht,Gs,kr)}function bA(ee,Ie,at,Ht,kr,Vn){var ai=nl(ee),di=nl(Ie),Cr=ai?d:Eo(ee),Tr=di?d:Eo(Ie);Cr=Cr==o?q:Cr,Tr=Tr==o?q:Tr;var Ci=Cr==q,Bo=Tr==q,Ti=Cr==Tr;if(Ti&&Ol(ee)){if(!Ol(Ie))return!1;ai=!0,Ci=!1}if(Ti&&!Ci)return Vn||(Vn=new Rs),ai||su(ee)?ci(ee,Ie,at,Ht,kr,Vn):da(ee,Ie,Cr,at,Ht,kr,Vn);if(!(at&i)){var Yr=Ci&&tt.call(ee,"__wrapped__"),Zi=Bo&&tt.call(Ie,"__wrapped__");if(Yr||Zi){var Xi=Yr?ee.value():ee,As=Zi?Ie.value():Ie;return Vn||(Vn=new Rs),kr(Xi,As,at,Ht,Vn)}}return Ti?(Vn||(Vn=new Rs),aA(ee,Ie,at,Ht,kr,Vn)):!1}function ii(ee){if(!zi(ee)||Wl(ee))return!1;var Ie=Hi(ee)?on:vt;return Ie.test(po(ee))}function Mi(ee){return ei(ee)&&ou(ee.length)&&!!ft[fo(ee)]}function el(ee){if(!is(ee))return dt(ee);var Ie=[];for(var at in Object(ee))tt.call(ee,at)&&at!="constructor"&&Ie.push(at);return Ie}function ci(ee,Ie,at,Ht,kr,Vn){var ai=at&i,di=ee.length,Cr=Ie.length;if(di!=Cr&&!(ai&&Cr>di))return!1;var Tr=Vn.get(ee);if(Tr&&Vn.get(Ie))return Tr==Ie;var Ci=-1,Bo=!0,Ti=at&s?new ao:void 0;for(Vn.set(ee,Ie),Vn.set(Ie,ee);++Ci<di;){var Yr=ee[Ci],Zi=Ie[Ci];if(Ht)var Xi=ai?Ht(Zi,Yr,Ci,Ie,ee,Vn):Ht(Yr,Zi,Ci,ee,Ie,Vn);if(Xi!==void 0){if(Xi)continue;Bo=!1;break}if(Ti){if(!gn(Ie,function(As,va){if(!or(Ti,va)&&(Yr===As||kr(Yr,As,at,Ht,Vn)))return Ti.push(va)})){Bo=!1;break}}else if(!(Yr===Zi||kr(Yr,Zi,at,Ht,Vn))){Bo=!1;break}}return Vn.delete(ee),Vn.delete(Ie),Bo}function da(ee,Ie,at,Ht,kr,Vn,ai){switch(at){case pe:if(ee.byteLength!=Ie.byteLength||ee.byteOffset!=Ie.byteOffset)return!1;ee=ee.buffer,Ie=Ie.buffer;case Se:return!(ee.byteLength!=Ie.byteLength||!Vn(new se(ee),new se(Ie)));case b:case E:case j:return gs(+ee,+Ie);case S:return ee.name==Ie.name&&ee.message==Ie.message;case $:case W:return ee==Ie+"";case z:var di=pn;case te:var Cr=Ht&i;if(di||(di=Mr),ee.size!=Ie.size&&!Cr)return!1;var Tr=ai.get(ee);if(Tr)return Tr==Ie;Ht|=s,ai.set(ee,Ie);var Ci=ci(di(ee),di(Ie),Ht,kr,Vn,ai);return ai.delete(ee),Ci;case oe:if(Ir)return Ir.call(ee)==Ir.call(Ie)}return!1}function aA(ee,Ie,at,Ht,kr,Vn){var ai=at&i,di=us(ee),Cr=di.length,Tr=us(Ie),Ci=Tr.length;if(Cr!=Ci&&!ai)return!1;for(var Bo=Cr;Bo--;){var Ti=di[Bo];if(!(ai?Ti in Ie:tt.call(Ie,Ti)))return!1}var Yr=Vn.get(ee);if(Yr&&Vn.get(Ie))return Yr==Ie;var Zi=!0;Vn.set(ee,Ie),Vn.set(Ie,ee);for(var Xi=ai;++Bo<Cr;){Ti=di[Bo];var As=ee[Ti],va=Ie[Ti];if(Ht)var za=ai?Ht(va,As,Ti,Ie,ee,Vn):Ht(As,va,Ti,ee,Ie,Vn);if(!(za===void 0?As===va||kr(As,va,at,Ht,Vn):za)){Zi=!1;break}Xi||(Xi=Ti=="constructor")}if(Zi&&!Xi){var gu=ee.constructor,Zs=Ie.constructor;gu!=Zs&&"constructor"in ee&&"constructor"in Ie&&!(typeof gu=="function"&&gu instanceof gu&&typeof Zs=="function"&&Zs instanceof Zs)&&(Zi=!1)}return Vn.delete(ee),Vn.delete(Ie),Zi}function us(ee){return Ri(ee,Wi,Ds)}function Lr(ee,Ie){var at=ee.__data__;return mu(Ie)?at[typeof Ie=="string"?"string":"hash"]:at.map}function Bi(ee,Ie){var at=Kn(ee,Ie);return ii(at)?at:void 0}function tl(ee){var Ie=tt.call(ee,Ne),at=ee[Ne];try{ee[Ne]=void 0;var Ht=!0}catch{}var kr=$t.call(ee);return Ht&&(Ie?ee[Ne]=at:delete ee[Ne]),kr}var Ds=$e?function(ee){return ee==null?[]:(ee=Object(ee),tn($e(ee),function(Ie){return _e.call(ee,Ie)}))}:uo,Eo=fo;(ct&&Eo(new ct(new ArrayBuffer(1)))!=pe||Qt&&Eo(new Qt)!=z||Vt&&Eo(Vt.resolve())!=ie||Nt&&Eo(new Nt)!=te||wt&&Eo(new wt)!=he)&&(Eo=function(ee){var Ie=fo(ee),at=Ie==q?ee.constructor:void 0,Ht=at?po(at):"";if(Ht)switch(Ht){case On:return pe;case pr:return z;case Er:return ie;case sn:return te;case Wn:return he}return Ie});function Qs(ee,Ie){return Ie=Ie??a,!!Ie&&(typeof ee=="number"||_t.test(ee))&&ee>-1&&ee%1==0&&ee<Ie}function mu(ee){var Ie=typeof ee;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ee!=="__proto__":ee===null}function Wl(ee){return!!Et&&Et in ee}function is(ee){var Ie=ee&&ee.constructor,at=typeof Ie=="function"&&Ie.prototype||qe;return ee===at}function Hs(ee){return $t.call(ee)}function po(ee){if(ee!=null){try{return me.call(ee)}catch{}try{return ee+""}catch{}}return""}function gs(ee,Ie){return ee===Ie||ee!==ee&&Ie!==Ie}var Ss=_s(function(){return arguments}())?_s:function(ee){return ei(ee)&&tt.call(ee,"callee")&&!_e.call(ee,"callee")},nl=Array.isArray;function Ks(ee){return ee!=null&&ou(ee.length)&&!Hi(ee)}var Ol=rt||Di;function lA(ee,Ie){return Gs(ee,Ie)}function Hi(ee){if(!zi(ee))return!1;var Ie=fo(ee);return Ie==B||Ie==k||Ie==g||Ie==J}function ou(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=a}function zi(ee){var Ie=typeof ee;return ee!=null&&(Ie=="object"||Ie=="function")}function ei(ee){return ee!=null&&typeof ee=="object"}var su=zt?rn(zt):Mi;function Wi(ee){return Ks(ee)?dn(ee):el(ee)}function uo(){return[]}function Di(){return!1}n.exports=lA}(Vv,Vv.exports)),Vv.exports}var gme=mme();const LB=Xa(gme);function Li(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Li=function(){return a},a}Li();class yme{constructor(e=(Li().b[0][0]++,{})){Tn(this,"onSourcesChange");Tn(this,"onVectorLayersChange");Tn(this,"throttledAnalyzeVectorLayerFields");Tn(this,"_sources");Tn(this,"_vectorLayers");Li().f[0]++,Li().s[0]++,this.onSourcesChange=(Li().b[1][0]++,e.onSourcesChange||(Li().b[1][1]++,()=>{Li().f[1]++})),Li().s[1]++,this.onVectorLayersChange=(Li().b[2][0]++,e.onVectorLayersChange||(Li().b[2][1]++,()=>{Li().f[2]++})),Li().s[2]++,this._sources={},Li().s[3]++,this._vectorLayers={},Li().s[4]++,this.throttledAnalyzeVectorLayerFields=pme(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Li().f[3]++;const t=(Li().s[5]++,{...this._sources});Li().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Li().f[4]++,Li().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Li().s[8]++,LB(t,this._sources)?Li().b[3][1]++:(Li().b[3][0]++,Li().s[9]++,this.onSourcesChange(this._sources)),Li().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Li().f[5]++;const t=(Li().s[11]++,{...this._vectorLayers});Li().s[12]++,Object.keys(this._sources).forEach(r=>{Li().f[6]++,Li().s[13]++,(Li().b[4][0]++,this._sources[r]||(Li().b[4][1]++,[])).forEach(i=>{Li().f[7]++;const s=(Li().s[14]++,Li().b[5][0]++,this._vectorLayers[i]||(Li().b[5][1]++,{})),a=(Li().s[15]++,{sourceLayer:i});Li().s[16]++,e.querySourceFeatures(r,a).forEach(o=>{Li().f[8]++,Li().s[17]++,Object.keys(o.properties).forEach(d=>{Li().f[9]++;const g=(Li().s[18]++,Li().b[6][0]++,s[d]||(Li().b[6][1]++,{}));Li().s[19]++,g[o.properties[d]]={},Li().s[20]++,s[d]=g})}),Li().s[21]++,this._vectorLayers[i]=s})}),Li().s[22]++,LB(t,this._vectorLayers)?Li().b[7][1]++:(Li().b[7][0]++,Li().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Li().f[10]++,Li().s[24]++,this._sources}get vectorLayers(){return Li().f[11]++,Li().s[25]++,this._vectorLayers}}function ra(){var n="/home/runner/work/maputnik/maputnik/src/libs/debug.ts",e="f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/debug.ts",statementMap:{0:{start:{line:1,column:19},end:{line:1,column:21}},1:{start:{line:3,column:13},end:{line:3,column:55}},2:{start:{line:4,column:18},end:{line:4,column:33}},3:{start:{line:5,column:2},end:{line:9,column:3}},4:{start:{line:6,column:4},end:{line:6,column:42}},5:{start:{line:8,column:4},end:{line:8,column:17}},6:{start:{line:12,column:2},end:{line:12,column:91}},7:{start:{line:15,column:2},end:{line:17,column:3}},8:{start:{line:16,column:4},end:{line:16,column:19}},9:{start:{line:18,column:2},end:{line:18,column:54}},10:{start:{line:19,column:2},end:{line:19,column:37}},11:{start:{line:22,column:2},end:{line:24,column:3}},12:{start:{line:23,column:4},end:{line:23,column:19}},13:{start:{line:25,column:2},end:{line:27,column:3}},14:{start:{line:26,column:4},end:{line:26,column:38}},15:{start:{line:29,column:12},end:{line:33,column:1}},16:{start:{line:34,column:0},end:{line:34,column:19}}},fnMap:{0:{name:"enabled",decl:{start:{line:2,column:9},end:{line:2,column:16}},loc:{start:{line:2,column:19},end:{line:10,column:1}},line:2},1:{name:"genErr",decl:{start:{line:11,column:9},end:{line:11,column:15}},loc:{start:{line:11,column:18},end:{line:13,column:1}},line:11},2:{name:"set",decl:{start:{line:14,column:9},end:{line:14,column:12}},loc:{start:{line:14,column:36},end:{line:20,column:1}},line:14},3:{name:"get",decl:{start:{line:21,column:9},end:{line:21,column:12}},loc:{start:{line:21,column:29},end:{line:28,column:1}},line:21}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5},1:{loc:{start:{line:15,column:2},end:{line:17,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:17,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:18,column:26},end:{line:18,column:53}},type:"binary-expr",locations:[{start:{line:18,column:26},end:{line:18,column:47}},{start:{line:18,column:51},end:{line:18,column:53}}],line:18},3:{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:25,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/debug.ts"],names:[],mappings:"AAMA,MAAM,aAAyB,CAAC;AAEhC,SAAS,UAAU;AACjB,QAAM,KAAK,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE;AACzC,QAAM,UAAU,GAAG,IAAI,OAAO;AAC9B,MAAG,SAAS;AACV,WAAO,CAAC,CAAC,QAAQ,MAAM,aAAa;AAAA,EACtC,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,SAAS;AAChB,SAAO,IAAI,MAAM,sEAAsE;AACzF;AAEA,SAAS,IAAI,WAA6B,KAAa,OAAY;AACjE,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,aAAW,SAAS,IAAI,WAAW,SAAS,KAAK,CAAC;AAClD,aAAW,SAAS,EAAE,GAAG,IAAI;AAC/B;AAEA,SAAS,IAAI,WAA6B,KAAa;AACrD,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,MAAG,OAAO,UAAU,eAAe,KAAK,YAAY,SAAS,GAAG;AAC9D,WAAO,WAAW,SAAS,EAAE,GAAG;AAAA,EAClC;AACF;AAEA,MAAM,MAAM;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF;AAEC,OAAe,QAAQ;AACxB,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ra=function(){return a},a}ra();const uC=(ra().s[0]++,{});function bI(){ra().f[0]++;const n=(ra().s[1]++,new URL(window.location.href).searchParams),e=(ra().s[2]++,n.get("debug"));return ra().s[3]++,e?(ra().b[0][0]++,ra().s[4]++,!!e.match(/^(|1|true)$/)):(ra().b[0][1]++,ra().s[5]++,!1)}function qG(){return ra().f[1]++,ra().s[6]++,new Error("Debug not enabled, enable by appending '?debug' to your query string")}function vme(n,e,t){if(ra().f[2]++,ra().s[7]++,bI())ra().b[1][1]++;else throw ra().b[1][0]++,ra().s[8]++,qG();ra().s[9]++,uC[n]=(ra().b[2][0]++,uC[n]||(ra().b[2][1]++,{})),ra().s[10]++,uC[n][e]=t}function Cme(n,e){if(ra().f[3]++,ra().s[11]++,bI())ra().b[3][1]++;else throw ra().b[3][0]++,ra().s[12]++,qG();if(ra().s[13]++,Object.prototype.hasOwnProperty.call(uC,n))return ra().b[4][0]++,ra().s[14]++,uC[n][e];ra().b[4][1]++}const vg=(ra().s[15]++,{enabled:bI,get:Cme,set:vme});ra().s[16]++;window.debug=vg;function Ee(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="202ad01ed2133eb4b0af12f6c2be77d2f87957aa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:37,column:0},end:{line:37,column:30}},1:{start:{line:39,column:29},end:{line:39,column:60}},2:{start:{line:40,column:26},end:{line:40,column:54}},3:{start:{line:41,column:31},end:{line:41,column:64}},4:{start:{line:42,column:2},end:{line:54,column:3}},5:{start:{line:43,column:24},end:{line:43,column:95}},6:{start:{line:44,column:4},end:{line:46,column:5}},7:{start:{line:45,column:6},end:{line:45,column:47}},8:{start:{line:47,column:9},end:{line:54,column:3}},9:{start:{line:48,column:24},end:{line:48,column:96}},10:{start:{line:49,column:4},end:{line:51,column:5}},11:{start:{line:50,column:6},end:{line:50,column:47}},12:{start:{line:53,column:4},end:{line:53,column:15}},13:{start:{line:57,column:2},end:{line:66,column:4}},14:{start:{line:73,column:4},end:{line:73,column:17}},15:{start:{line:74,column:4},end:{line:74,column:19}},16:{start:{line:75,column:4},end:{line:75,column:45}},17:{start:{line:76,column:19},end:{line:76,column:75}},18:{start:{line:77,column:15},end:{line:77,column:38}},19:{start:{line:78,column:4},end:{line:80,column:5}},20:{start:{line:79,column:6},end:{line:79,column:34}},21:{start:{line:81,column:4},end:{line:85,column:7}},22:{start:{line:82,column:40},end:{line:82,column:86}},23:{start:{line:86,column:22},end:{line:137,column:5}},24:{start:{line:90,column:10},end:{line:90,column:40}},25:{start:{line:96,column:10},end:{line:96,column:35}},26:{start:{line:102,column:10},end:{line:102,column:37}},27:{start:{line:108,column:10},end:{line:108,column:38}},28:{start:{line:114,column:10},end:{line:114,column:39}},29:{start:{line:120,column:10},end:{line:122,column:12}},30:{start:{line:128,column:10},end:{line:128,column:63}},31:{start:{line:134,column:10},end:{line:134,column:36}},32:{start:{line:138,column:4},end:{line:151,column:7}},33:{start:{line:139,column:6},end:{line:150,column:7}},34:{start:{line:140,column:8},end:{line:140,column:24}},35:{start:{line:141,column:8},end:{line:141,column:30}},36:{start:{line:142,column:13},end:{line:150,column:7}},37:{start:{line:143,column:25},end:{line:145,column:10}},38:{start:{line:144,column:10},end:{line:144,column:41}},39:{start:{line:146,column:8},end:{line:149,column:9}},40:{start:{line:147,column:10},end:{line:147,column:44}},41:{start:{line:148,column:10},end:{line:148,column:29}},42:{start:{line:152,column:21},end:{line:152,column:38}},43:{start:{line:153,column:4},end:{line:172,column:5}},44:{start:{line:154,column:6},end:{line:154,column:41}},45:{start:{line:155,column:6},end:{line:155,column:74}},46:{start:{line:155,column:43},end:{line:155,column:72}},47:{start:{line:156,column:6},end:{line:156,column:31}},48:{start:{line:158,column:6},end:{line:160,column:7}},49:{start:{line:159,column:8},end:{line:159,column:33}},50:{start:{line:161,column:6},end:{line:171,column:9}},51:{start:{line:162,column:8},end:{line:165,column:9}},52:{start:{line:163,column:10},end:{line:163,column:74}},53:{start:{line:164,column:10},end:{line:164,column:45}},54:{start:{line:166,column:8},end:{line:166,column:104}},55:{start:{line:166,column:50},end:{line:166,column:102}},56:{start:{line:167,column:8},end:{line:170,column:9}},57:{start:{line:168,column:10},end:{line:168,column:63}},58:{start:{line:169,column:10},end:{line:169,column:69}},59:{start:{line:173,column:4},end:{line:176,column:5}},60:{start:{line:174,column:6},end:{line:174,column:65}},61:{start:{line:175,column:6},end:{line:175,column:59}},62:{start:{line:177,column:4},end:{line:211,column:6}},63:{start:{line:212,column:4},end:{line:214,column:7}},64:{start:{line:213,column:35},end:{line:213,column:69}},65:{start:{line:216,column:19},end:{line:234,column:3}},66:{start:{line:217,column:4},end:{line:233,column:5}},67:{start:{line:218,column:6},end:{line:224,column:7}},68:{start:{line:219,column:8},end:{line:219,column:27}},69:{start:{line:220,column:8},end:{line:220,column:22}},70:{start:{line:221,column:13},end:{line:224,column:7}},71:{start:{line:222,column:8},end:{line:222,column:27}},72:{start:{line:223,column:8},end:{line:223,column:22}},73:{start:{line:226,column:6},end:{line:232,column:7}},74:{start:{line:227,column:8},end:{line:227,column:27}},75:{start:{line:228,column:8},end:{line:228,column:22}},76:{start:{line:229,column:13},end:{line:232,column:7}},77:{start:{line:230,column:8},end:{line:230,column:27}},78:{start:{line:231,column:8},end:{line:231,column:22}},79:{start:{line:236,column:4},end:{line:236,column:60}},80:{start:{line:239,column:4},end:{line:239,column:63}},81:{start:{line:242,column:4},end:{line:242,column:40}},82:{start:{line:245,column:21},end:{line:245,column:55}},83:{start:{line:246,column:24},end:{line:246,column:93}},84:{start:{line:247,column:21},end:{line:247,column:110}},85:{start:{line:248,column:4},end:{line:250,column:7}},86:{start:{line:249,column:6},end:{line:249,column:80}},87:{start:{line:253,column:4},end:{line:255,column:7}},88:{start:{line:254,column:6},end:{line:254,column:80}},89:{start:{line:257,column:29},end:{line:271,column:3}},90:{start:{line:258,column:4},end:{line:262,column:5}},91:{start:{line:259,column:6},end:{line:261,column:9}},92:{start:{line:263,column:25},end:{line:269,column:5}},93:{start:{line:270,column:4},end:{line:270,column:38}},94:{start:{line:272,column:19},end:{line:384,column:3}},95:{start:{line:273,column:4},end:{line:278,column:6}},96:{start:{line:279,column:4},end:{line:281,column:5}},97:{start:{line:280,column:6},end:{line:280,column:44}},98:{start:{line:282,column:19},end:{line:282,column:51}},99:{start:{line:283,column:24},end:{line:283,column:26}},100:{start:{line:284,column:4},end:{line:295,column:5}},101:{start:{line:285,column:26},end:{line:285,column:42}},102:{start:{line:286,column:6},end:{line:294,column:9}},103:{start:{line:287,column:8},end:{line:292,column:9}},104:{start:{line:288,column:24},end:{line:290,column:11}},105:{start:{line:291,column:10},end:{line:291,column:34}},106:{start:{line:293,column:8},end:{line:293,column:40}},107:{start:{line:296,column:25},end:{line:347,column:6}},108:{start:{line:297,column:23},end:{line:297,column:109}},109:{start:{line:298,column:6},end:{line:311,column:7}},110:{start:{line:299,column:35},end:{line:299,column:43}},111:{start:{line:300,column:8},end:{line:310,column:10}},112:{start:{line:312,column:33},end:{line:312,column:100}},113:{start:{line:313,column:6},end:{line:326,column:7}},114:{start:{line:314,column:35},end:{line:314,column:53}},115:{start:{line:315,column:8},end:{line:325,column:10}},116:{start:{line:327,column:25},end:{line:327,column:88}},117:{start:{line:328,column:6},end:{line:346,column:7}},118:{start:{line:329,column:52},end:{line:329,column:62}},119:{start:{line:330,column:20},end:{line:330,column:78}},120:{start:{line:331,column:8},end:{line:341,column:10}},121:{start:{line:343,column:8},end:{line:345,column:10}},122:{start:{line:348,column:24},end:{line:348,column:30}},123:{start:{line:349,column:4},end:{line:363,column:5}},124:{start:{line:350,column:6},end:{line:350,column:42}},125:{start:{line:351,column:6},end:{line:362,column:9}},126:{start:{line:352,column:28},end:{line:352,column:33}},127:{start:{line:353,column:8},end:{line:361,column:9}},128:{start:{line:354,column:10},end:{line:360,column:11}},129:{start:{line:355,column:28},end:{line:355,column:49}},130:{start:{line:356,column:30},end:{line:356,column:69}},131:{start:{line:357,column:12},end:{line:357,column:44}},132:{start:{line:359,column:12},end:{line:359,column:30}},133:{start:{line:364,column:4},end:{line:366,column:5}},134:{start:{line:365,column:6},end:{line:365,column:40}},135:{start:{line:367,column:4},end:{line:369,column:5}},136:{start:{line:368,column:6},end:{line:368,column:40}},137:{start:{line:370,column:4},end:{line:372,column:5}},138:{start:{line:371,column:6},end:{line:371,column:47}},139:{start:{line:373,column:4},end:{line:375,column:5}},140:{start:{line:374,column:6},end:{line:374,column:31}},141:{start:{line:376,column:4},end:{line:383,column:7}},142:{start:{line:381,column:6},end:{line:381,column:26}},143:{start:{line:382,column:6},end:{line:382,column:27}},144:{start:{line:385,column:11},end:{line:392,column:3}},145:{start:{line:386,column:24},end:{line:386,column:49}},146:{start:{line:387,column:21},end:{line:387,column:67}},147:{start:{line:388,column:4},end:{line:388,column:61}},148:{start:{line:389,column:4},end:{line:391,column:7}},149:{start:{line:393,column:11},end:{line:400,column:3}},150:{start:{line:394,column:24},end:{line:394,column:49}},151:{start:{line:395,column:21},end:{line:395,column:67}},152:{start:{line:396,column:4},end:{line:396,column:61}},153:{start:{line:397,column:4},end:{line:399,column:7}},154:{start:{line:401,column:16},end:{line:415,column:3}},155:{start:{line:402,column:33},end:{line:402,column:37}},156:{start:{line:403,column:17},end:{line:403,column:43}},157:{start:{line:404,column:4},end:{line:404,column:53}},158:{start:{line:405,column:4},end:{line:405,column:53}},159:{start:{line:406,column:4},end:{line:406,column:38}},160:{start:{line:406,column:31},end:{line:406,column:38}},161:{start:{line:407,column:4},end:{line:411,column:5}},162:{start:{line:408,column:6},end:{line:410,column:9}},163:{start:{line:412,column:4},end:{line:412,column:29}},164:{start:{line:413,column:4},end:{line:413,column:49}},165:{start:{line:414,column:4},end:{line:414,column:32}},166:{start:{line:416,column:19},end:{line:422,column:3}},167:{start:{line:417,column:25},end:{line:420,column:5}},168:{start:{line:421,column:4},end:{line:421,column:38}},169:{start:{line:423,column:19},end:{line:428,column:3}},170:{start:{line:424,column:19},end:{line:424,column:45}},171:{start:{line:425,column:28},end:{line:425,column:43}},172:{start:{line:426,column:4},end:{line:426,column:37}},173:{start:{line:427,column:4},end:{line:427,column:41}},174:{start:{line:429,column:16},end:{line:436,column:3}},175:{start:{line:430,column:19},end:{line:430,column:45}},176:{start:{line:431,column:26},end:{line:431,column:41}},177:{start:{line:432,column:24},end:{line:432,column:55}},178:{start:{line:433,column:4},end:{line:433,column:46}},179:{start:{line:434,column:4},end:{line:434,column:48}},180:{start:{line:435,column:4},end:{line:435,column:39}},181:{start:{line:437,column:28},end:{line:446,column:3}},182:{start:{line:438,column:19},end:{line:438,column:45}},183:{start:{line:439,column:26},end:{line:439,column:41}},184:{start:{line:440,column:18},end:{line:440,column:45}},185:{start:{line:441,column:26},end:{line:441,column:70}},186:{start:{line:442,column:4},end:{line:442,column:88}},187:{start:{line:443,column:4},end:{line:443,column:33}},188:{start:{line:444,column:4},end:{line:444,column:33}},189:{start:{line:445,column:4},end:{line:445,column:39}},190:{start:{line:447,column:20},end:{line:454,column:3}},191:{start:{line:448,column:26},end:{line:448,column:61}},192:{start:{line:449,column:4},end:{line:452,column:6}},193:{start:{line:453,column:4},end:{line:453,column:39}},194:{start:{line:455,column:19},end:{line:459,column:3}},195:{start:{line:456,column:26},end:{line:456,column:61}},196:{start:{line:457,column:4},end:{line:457,column:33}},197:{start:{line:458,column:4},end:{line:458,column:39}},198:{start:{line:460,column:16},end:{line:464,column:3}},199:{start:{line:461,column:4},end:{line:463,column:27}},200:{start:{line:465,column:21},end:{line:479,column:3}},201:{start:{line:466,column:21},end:{line:466,column:44}},202:{start:{line:467,column:4},end:{line:478,column:5}},203:{start:{line:468,column:27},end:{line:474,column:7}},204:{start:{line:475,column:6},end:{line:475,column:26}},205:{start:{line:477,column:6},end:{line:477,column:22}},206:{start:{line:480,column:14},end:{line:484,column:3}},207:{start:{line:481,column:4},end:{line:481,column:34}},208:{start:{line:482,column:4},end:{line:482,column:47}},209:{start:{line:483,column:4},end:{line:483,column:34}},210:{start:{line:486,column:23},end:{line:486,column:25}},211:{start:{line:487,column:4},end:{line:527,column:5}},212:{start:{line:488,column:6},end:{line:526,column:7}},213:{start:{line:489,column:8},end:{line:492,column:10}},214:{start:{line:493,column:18},end:{line:493,column:25}},215:{start:{line:494,column:8},end:{line:498,column:9}},216:{start:{line:495,column:10},end:{line:495,column:62}},217:{start:{line:497,column:10},end:{line:497,column:63}},218:{start:{line:499,column:32},end:{line:512,column:9}},219:{start:{line:500,column:10},end:{line:502,column:11}},220:{start:{line:501,column:12},end:{line:501,column:19}},221:{start:{line:503,column:26},end:{line:505,column:12}},222:{start:{line:506,column:10},end:{line:508,column:11}},223:{start:{line:507,column:12},end:{line:507,column:47}},224:{start:{line:509,column:10},end:{line:511,column:13}},225:{start:{line:513,column:8},end:{line:523,column:9}},226:{start:{line:514,column:10},end:{line:516,column:13}},227:{start:{line:514,column:69},end:{line:514,column:90}},228:{start:{line:515,column:12},end:{line:515,column:74}},229:{start:{line:518,column:10},end:{line:522,column:13}},230:{start:{line:520,column:32},end:{line:520,column:47}},231:{start:{line:520,column:64},end:{line:520,column:85}},232:{start:{line:521,column:12},end:{line:521,column:74}},233:{start:{line:525,column:8},end:{line:525,column:86}},234:{start:{line:528,column:4},end:{line:533,column:5}},235:{start:{line:529,column:6},end:{line:529,column:39}},236:{start:{line:530,column:6},end:{line:532,column:9}},237:{start:{line:536,column:21},end:{line:536,column:55}},238:{start:{line:537,column:4},end:{line:537,column:53}},239:{start:{line:539,column:16},end:{line:543,column:3}},240:{start:{line:540,column:4},end:{line:542,column:7}},241:{start:{line:545,column:40},end:{line:545,column:50}},242:{start:{line:546,column:21},end:{line:557,column:5}},243:{start:{line:549,column:8},end:{line:551,column:11}},244:{start:{line:554,column:8},end:{line:554,column:44}},245:{start:{line:555,column:8},end:{line:555,column:28}},246:{start:{line:558,column:21},end:{line:558,column:40}},247:{start:{line:560,column:4},end:{line:582,column:5}},248:{start:{line:561,column:6},end:{line:569,column:8}},249:{start:{line:571,column:6},end:{line:581,column:8}},250:{start:{line:584,column:4},end:{line:586,column:5}},251:{start:{line:585,column:6},end:{line:585,column:63}},252:{start:{line:587,column:25},end:{line:587,column:27}},253:{start:{line:588,column:4},end:{line:590,column:5}},254:{start:{line:589,column:6},end:{line:589,column:52}},255:{start:{line:591,column:4},end:{line:591,column:160}},256:{start:{line:593,column:18},end:{line:611,column:3}},257:{start:{line:594,column:43},end:{line:594,column:53}},258:{start:{line:595,column:35},end:{line:595,column:45}},259:{start:{line:596,column:16},end:{line:596,column:38}},260:{start:{line:597,column:20},end:{line:597,column:50}},261:{start:{line:598,column:4},end:{line:598,column:70}},262:{start:{line:599,column:23},end:{line:599,column:122}},263:{start:{line:599,column:66},end:{line:599,column:91}},264:{start:{line:599,column:109},end:{line:599,column:121}},265:{start:{line:600,column:4},end:{line:604,column:5}},266:{start:{line:601,column:6},end:{line:601,column:58}},267:{start:{line:603,column:6},end:{line:603,column:39}},268:{start:{line:605,column:4},end:{line:609,column:5}},269:{start:{line:606,column:6},end:{line:606,column:38}},270:{start:{line:607,column:11},end:{line:609,column:5}},271:{start:{line:608,column:6},end:{line:608,column:46}},272:{start:{line:610,column:4},end:{line:610,column:71}},273:{start:{line:612,column:27},end:{line:657,column:3}},274:{start:{line:613,column:16},end:{line:613,column:38}},275:{start:{line:614,column:23},end:{line:614,column:52}},276:{start:{line:615,column:4},end:{line:627,column:5}},277:{start:{line:616,column:21},end:{line:616,column:42}},278:{start:{line:617,column:23},end:{line:617,column:25}},279:{start:{line:618,column:6},end:{line:620,column:9}},280:{start:{line:619,column:8},end:{line:619,column:35}},281:{start:{line:621,column:6},end:{line:626,column:9}},282:{start:{line:628,column:17},end:{line:628,column:45}},283:{start:{line:629,column:4},end:{line:631,column:5}},284:{start:{line:630,column:6},end:{line:630,column:29}},285:{start:{line:632,column:17},end:{line:632,column:46}},286:{start:{line:633,column:4},end:{line:656,column:5}},287:{start:{line:634,column:6},end:{line:655,column:7}},288:{start:{line:635,column:22},end:{line:635,column:37}},289:{start:{line:636,column:46},end:{line:639,column:9}},290:{start:{line:640,column:20},end:{line:640,column:24}},291:{start:{line:641,column:8},end:{line:646,column:9}},292:{start:{line:642,column:33},end:{line:642,column:63}},293:{start:{line:643,column:10},end:{line:645,column:11}},294:{start:{line:644,column:12},end:{line:644,column:26}},295:{start:{line:647,column:8},end:{line:652,column:9}},296:{start:{line:648,column:10},end:{line:651,column:13}},297:{start:{line:654,column:8},end:{line:654,column:26}},298:{start:{line:658,column:18},end:{line:663,column:3}},299:{start:{line:659,column:4},end:{line:662,column:27}},300:{start:{line:665,column:4},end:{line:670,column:27}},301:{start:{line:673,column:4},end:{line:673,column:60}},302:{start:{line:676,column:4},end:{line:676,column:34}},303:{start:{line:678,column:28},end:{line:685,column:3}},304:{start:{line:679,column:4},end:{line:684,column:7}},305:{start:{line:686,column:28},end:{line:693,column:3}},306:{start:{line:687,column:4},end:{line:692,column:7}},307:{start:{line:695,column:19},end:{line:695,column:51}},308:{start:{line:696,column:26},end:{line:696,column:92}},309:{start:{line:697,column:36},end:{line:710,column:5}},310:{start:{line:711,column:38},end:{line:725,column:5}},311:{start:{line:726,column:24},end:{line:745,column:14}},312:{start:{line:746,column:24},end:{line:756,column:14}},313:{start:{line:757,column:35},end:{line:817,column:8}},314:{start:{line:818,column:4},end:{line:828,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:38,column:9},end:{line:38,column:28}},loc:{start:{line:38,column:44},end:{line:55,column:1}},line:38},1:{name:"updateRootSpec",decl:{start:{line:56,column:9},end:{line:56,column:23}},loc:{start:{line:56,column:52},end:{line:67,column:1}},line:56},2:{name:"(anonymous_2)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:21},end:{line:215,column:3}},line:72},3:{name:"(anonymous_3)",decl:{start:{line:82,column:26},end:{line:82,column:27}},loc:{start:{line:82,column:40},end:{line:82,column:86}},line:82},4:{name:"(anonymous_4)",decl:{start:{line:89,column:17},end:{line:89,column:18}},loc:{start:{line:89,column:23},end:{line:91,column:9}},line:89},5:{name:"(anonymous_5)",decl:{start:{line:95,column:17},end:{line:95,column:18}},loc:{start:{line:95,column:23},end:{line:97,column:9}},line:95},6:{name:"(anonymous_6)",decl:{start:{line:101,column:17},end:{line:101,column:18}},loc:{start:{line:101,column:23},end:{line:103,column:9}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:107,column:17},end:{line:107,column:18}},loc:{start:{line:107,column:23},end:{line:109,column:9}},line:107},8:{name:"(anonymous_8)",decl:{start:{line:113,column:17},end:{line:113,column:18}},loc:{start:{line:113,column:23},end:{line:115,column:9}},line:113},9:{name:"(anonymous_9)",decl:{start:{line:119,column:17},end:{line:119,column:18}},loc:{start:{line:119,column:23},end:{line:123,column:9}},line:119},10:{name:"(anonymous_10)",decl:{start:{line:127,column:17},end:{line:127,column:18}},loc:{start:{line:127,column:23},end:{line:129,column:9}},line:127},11:{name:"(anonymous_11)",decl:{start:{line:133,column:17},end:{line:133,column:18}},loc:{start:{line:133,column:23},end:{line:135,column:9}},line:133},12:{name:"(anonymous_12)",decl:{start:{line:138,column:44},end:{line:138,column:45}},loc:{start:{line:138,column:51},end:{line:151,column:5}},line:138},13:{name:"(anonymous_13)",decl:{start:{line:143,column:40},end:{line:143,column:41}},loc:{start:{line:143,column:55},end:{line:145,column:9}},line:143},14:{name:"(anonymous_14)",decl:{start:{line:155,column:29},end:{line:155,column:30}},loc:{start:{line:155,column:43},end:{line:155,column:72}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:161,column:27},end:{line:161,column:28}},loc:{start:{line:161,column:36},end:{line:171,column:7}},line:161},16:{name:"(anonymous_16)",decl:{start:{line:166,column:36},end:{line:166,column:37}},loc:{start:{line:166,column:50},end:{line:166,column:102}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:213,column:28},end:{line:213,column:29}},loc:{start:{line:213,column:35},end:{line:213,column:69}},line:213},18:{name:"(anonymous_18)",decl:{start:{line:216,column:19},end:{line:216,column:20}},loc:{start:{line:216,column:26},end:{line:234,column:3}},line:216},19:{name:"(anonymous_19)",decl:{start:{line:235,column:2},end:{line:235,column:3}},loc:{start:{line:235,column:22},end:{line:237,column:3}},line:235},20:{name:"(anonymous_20)",decl:{start:{line:238,column:2},end:{line:238,column:3}},loc:{start:{line:238,column:25},end:{line:240,column:3}},line:238},21:{name:"(anonymous_21)",decl:{start:{line:241,column:2},end:{line:241,column:3}},loc:{start:{line:241,column:27},end:{line:243,column:3}},line:241},22:{name:"(anonymous_22)",decl:{start:{line:244,column:2},end:{line:244,column:3}},loc:{start:{line:244,column:27},end:{line:251,column:3}},line:244},23:{name:"(anonymous_23)",decl:{start:{line:248,column:37},end:{line:248,column:38}},loc:{start:{line:248,column:48},end:{line:250,column:5}},line:248},24:{name:"(anonymous_24)",decl:{start:{line:252,column:2},end:{line:252,column:3}},loc:{start:{line:252,column:23},end:{line:256,column:3}},line:252},25:{name:"(anonymous_25)",decl:{start:{line:253,column:36},end:{line:253,column:37}},loc:{start:{line:253,column:47},end:{line:255,column:5}},line:253},26:{name:"(anonymous_26)",decl:{start:{line:257,column:29},end:{line:257,column:30}},loc:{start:{line:257,column:50},end:{line:271,column:3}},line:257},27:{name:"(anonymous_27)",decl:{start:{line:272,column:19},end:{line:272,column:20}},loc:{start:{line:272,column:44},end:{line:384,column:3}},line:272},28:{name:"(anonymous_28)",decl:{start:{line:286,column:30},end:{line:286,column:31}},loc:{start:{line:286,column:48},end:{line:294,column:7}},line:286},29:{name:"(anonymous_29)",decl:{start:{line:296,column:56},end:{line:296,column:57}},loc:{start:{line:296,column:67},end:{line:347,column:5}},line:296},30:{name:"(anonymous_30)",decl:{start:{line:351,column:21},end:{line:351,column:22}},loc:{start:{line:351,column:32},end:{line:362,column:7}},line:351},31:{name:"(anonymous_31)",decl:{start:{line:380,column:7},end:{line:380,column:8}},loc:{start:{line:380,column:13},end:{line:383,column:5}},line:380},32:{name:"(anonymous_32)",decl:{start:{line:385,column:11},end:{line:385,column:12}},loc:{start:{line:385,column:17},end:{line:392,column:3}},line:385},33:{name:"(anonymous_33)",decl:{start:{line:393,column:11},end:{line:393,column:12}},loc:{start:{line:393,column:17},end:{line:400,column:3}},line:393},34:{name:"(anonymous_34)",decl:{start:{line:401,column:16},end:{line:401,column:17}},loc:{start:{line:401,column:26},end:{line:415,column:3}},line:401},35:{name:"(anonymous_35)",decl:{start:{line:416,column:19},end:{line:416,column:20}},loc:{start:{line:416,column:38},end:{line:422,column:3}},line:416},36:{name:"(anonymous_36)",decl:{start:{line:423,column:19},end:{line:423,column:20}},loc:{start:{line:423,column:30},end:{line:428,column:3}},line:423},37:{name:"(anonymous_37)",decl:{start:{line:429,column:16},end:{line:429,column:17}},loc:{start:{line:429,column:27},end:{line:436,column:3}},line:429},38:{name:"(anonymous_38)",decl:{start:{line:437,column:28},end:{line:437,column:29}},loc:{start:{line:437,column:39},end:{line:446,column:3}},line:437},39:{name:"(anonymous_39)",decl:{start:{line:447,column:20},end:{line:447,column:21}},loc:{start:{line:447,column:46},end:{line:454,column:3}},line:447},40:{name:"(anonymous_40)",decl:{start:{line:455,column:19},end:{line:455,column:20}},loc:{start:{line:455,column:37},end:{line:459,column:3}},line:455},41:{name:"(anonymous_41)",decl:{start:{line:460,column:16},end:{line:460,column:17}},loc:{start:{line:460,column:30},end:{line:464,column:3}},line:460},42:{name:"(anonymous_42)",decl:{start:{line:465,column:21},end:{line:465,column:22}},loc:{start:{line:465,column:35},end:{line:479,column:3}},line:465},43:{name:"(anonymous_43)",decl:{start:{line:480,column:14},end:{line:480,column:15}},loc:{start:{line:480,column:40},end:{line:484,column:3}},line:480},44:{name:"(anonymous_44)",decl:{start:{line:485,column:2},end:{line:485,column:3}},loc:{start:{line:485,column:17},end:{line:534,column:3}},line:485},45:{name:"(anonymous_45)",decl:{start:{line:499,column:32},end:{line:499,column:33}},loc:{start:{line:499,column:42},end:{line:512,column:9}},line:499},46:{name:"(anonymous_46)",decl:{start:{line:514,column:59},end:{line:514,column:60}},loc:{start:{line:514,column:69},end:{line:514,column:90}},line:514},47:{name:"(anonymous_47)",decl:{start:{line:514,column:98},end:{line:514,column:99}},loc:{start:{line:514,column:107},end:{line:516,column:11}},line:514},48:{name:"(anonymous_48)",decl:{start:{line:520,column:18},end:{line:520,column:19}},loc:{start:{line:520,column:32},end:{line:520,column:47}},line:520},49:{name:"(anonymous_49)",decl:{start:{line:520,column:54},end:{line:520,column:55}},loc:{start:{line:520,column:64},end:{line:520,column:85}},line:520},50:{name:"(anonymous_50)",decl:{start:{line:520,column:93},end:{line:520,column:94}},loc:{start:{line:520,column:102},end:{line:522,column:11}},line:520},51:{name:"(anonymous_51)",decl:{start:{line:535,column:2},end:{line:535,column:3}},loc:{start:{line:535,column:17},end:{line:538,column:3}},line:535},52:{name:"(anonymous_52)",decl:{start:{line:539,column:16},end:{line:539,column:17}},loc:{start:{line:539,column:29},end:{line:543,column:3}},line:539},53:{name:"(anonymous_53)",decl:{start:{line:544,column:2},end:{line:544,column:3}},loc:{start:{line:544,column:16},end:{line:592,column:3}},line:544},54:{name:"(anonymous_54)",decl:{start:{line:548,column:27},end:{line:548,column:28}},loc:{start:{line:548,column:42},end:{line:552,column:7}},line:548},55:{name:"(anonymous_55)",decl:{start:{line:553,column:20},end:{line:553,column:21}},loc:{start:{line:553,column:27},end:{line:556,column:7}},line:553},56:{name:"(anonymous_56)",decl:{start:{line:593,column:18},end:{line:593,column:19}},loc:{start:{line:593,column:24},end:{line:611,column:3}},line:593},57:{name:"(anonymous_57)",decl:{start:{line:599,column:50},end:{line:599,column:51}},loc:{start:{line:599,column:66},end:{line:599,column:91}},line:599},58:{name:"(anonymous_58)",decl:{start:{line:599,column:100},end:{line:599,column:101}},loc:{start:{line:599,column:109},end:{line:599,column:121}},line:599},59:{name:"(anonymous_59)",decl:{start:{line:612,column:27},end:{line:612,column:28}},loc:{start:{line:612,column:41},end:{line:657,column:3}},line:612},60:{name:"(anonymous_60)",decl:{start:{line:618,column:21},end:{line:618,column:22}},loc:{start:{line:618,column:36},end:{line:620,column:7}},line:618},61:{name:"(anonymous_61)",decl:{start:{line:658,column:18},end:{line:658,column:19}},loc:{start:{line:658,column:29},end:{line:663,column:3}},line:658},62:{name:"(anonymous_62)",decl:{start:{line:664,column:2},end:{line:664,column:3}},loc:{start:{line:664,column:29},end:{line:671,column:3}},line:664},63:{name:"(anonymous_63)",decl:{start:{line:672,column:2},end:{line:672,column:3}},loc:{start:{line:672,column:25},end:{line:674,column:3}},line:672},64:{name:"(anonymous_64)",decl:{start:{line:675,column:2},end:{line:675,column:3}},loc:{start:{line:675,column:30},end:{line:677,column:3}},line:675},65:{name:"(anonymous_65)",decl:{start:{line:678,column:28},end:{line:678,column:29}},loc:{start:{line:678,column:44},end:{line:685,column:3}},line:678},66:{name:"(anonymous_66)",decl:{start:{line:686,column:28},end:{line:686,column:29}},loc:{start:{line:686,column:44},end:{line:693,column:3}},line:686},67:{name:"(anonymous_67)",decl:{start:{line:694,column:2},end:{line:694,column:3}},loc:{start:{line:694,column:11},end:{line:829,column:3}},line:694}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:47,column:9},end:{line:54,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},6:{loc:{start:{line:78,column:8},end:{line:78,column:89}},type:"binary-expr",locations:[{start:{line:78,column:8},end:{line:78,column:20}},{start:{line:78,column:25},end:{line:78,column:54}},{start:{line:78,column:58},end:{line:78,column:88}}],line:78},7:{loc:{start:{line:121,column:12},end:{line:121,column:61}},type:"cond-expr",locations:[{start:{line:121,column:44},end:{line:121,column:53}},{start:{line:121,column:56},end:{line:121,column:61}}],line:121},8:{loc:{start:{line:139,column:6},end:{line:150,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:150,column:7}},{start:{line:142,column:13},end:{line:150,column:7}}],line:139},9:{loc:{start:{line:142,column:13},end:{line:150,column:7}},type:"if",locations:[{start:{line:142,column:13},end:{line:150,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:142},10:{loc:{start:{line:142,column:17},end:{line:142,column:88}},type:"binary-expr",locations:[{start:{line:142,column:17},end:{line:142,column:44}},{start:{line:142,column:48},end:{line:142,column:88}}],line:142},11:{loc:{start:{line:146,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:146,column:8},end:{line:149,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},12:{loc:{start:{line:153,column:4},end:{line:172,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:172,column:5}},{start:{line:157,column:11},end:{line:172,column:5}}],line:153},13:{loc:{start:{line:153,column:8},end:{line:153,column:104}},type:"binary-expr",locations:[{start:{line:153,column:8},end:{line:153,column:16}},{start:{line:153,column:20},end:{line:153,column:104}}],line:153},14:{loc:{start:{line:158,column:6},end:{line:160,column:7}},type:"if",locations:[{start:{line:158,column:6},end:{line:160,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:158},15:{loc:{start:{line:162,column:8},end:{line:165,column:9}},type:"if",locations:[{start:{line:162,column:8},end:{line:165,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:162},16:{loc:{start:{line:167,column:8},end:{line:170,column:9}},type:"if",locations:[{start:{line:167,column:8},end:{line:170,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:167},17:{loc:{start:{line:173,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:176,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:173},18:{loc:{start:{line:217,column:4},end:{line:233,column:5}},type:"if",locations:[{start:{line:217,column:4},end:{line:233,column:5}},{start:{line:225,column:11},end:{line:233,column:5}}],line:217},19:{loc:{start:{line:218,column:6},end:{line:224,column:7}},type:"if",locations:[{start:{line:218,column:6},end:{line:224,column:7}},{start:{line:221,column:13},end:{line:224,column:7}}],line:218},20:{loc:{start:{line:218,column:10},end:{line:218,column:53}},type:"binary-expr",locations:[{start:{line:218,column:10},end:{line:218,column:19}},{start:{line:218,column:23},end:{line:218,column:33}},{start:{line:218,column:37},end:{line:218,column:53}}],line:218},21:{loc:{start:{line:221,column:13},end:{line:224,column:7}},type:"if",locations:[{start:{line:221,column:13},end:{line:224,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:221},22:{loc:{start:{line:221,column:17},end:{line:221,column:46}},type:"binary-expr",locations:[{start:{line:221,column:17},end:{line:221,column:26}},{start:{line:221,column:30},end:{line:221,column:46}}],line:221},23:{loc:{start:{line:226,column:6},end:{line:232,column:7}},type:"if",locations:[{start:{line:226,column:6},end:{line:232,column:7}},{start:{line:229,column:13},end:{line:232,column:7}}],line:226},24:{loc:{start:{line:226,column:10},end:{line:226,column:39}},type:"binary-expr",locations:[{start:{line:226,column:10},end:{line:226,column:19}},{start:{line:226,column:23},end:{line:226,column:39}}],line:226},25:{loc:{start:{line:229,column:13},end:{line:232,column:7}},type:"if",locations:[{start:{line:229,column:13},end:{line:232,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:229},26:{loc:{start:{line:229,column:17},end:{line:229,column:46}},type:"binary-expr",locations:[{start:{line:229,column:17},end:{line:229,column:26}},{start:{line:229,column:30},end:{line:229,column:46}}],line:229},27:{loc:{start:{line:245,column:21},end:{line:245,column:55}},type:"binary-expr",locations:[{start:{line:245,column:21},end:{line:245,column:49}},{start:{line:245,column:53},end:{line:245,column:55}}],line:245},28:{loc:{start:{line:246,column:24},end:{line:246,column:93}},type:"binary-expr",locations:[{start:{line:246,column:24},end:{line:246,column:70}},{start:{line:246,column:74},end:{line:246,column:93}}],line:246},29:{loc:{start:{line:247,column:21},end:{line:247,column:110}},type:"cond-expr",locations:[{start:{line:247,column:55},end:{line:247,column:96}},{start:{line:247,column:99},end:{line:247,column:110}}],line:247},30:{loc:{start:{line:258,column:4},end:{line:262,column:5}},type:"if",locations:[{start:{line:258,column:4},end:{line:262,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:258},31:{loc:{start:{line:258,column:8},end:{line:258,column:123}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:40}},{start:{line:258,column:44},end:{line:258,column:123}}],line:258},32:{loc:{start:{line:272,column:30},end:{line:272,column:39}},type:"default-arg",locations:[{start:{line:272,column:37},end:{line:272,column:39}}],line:272},33:{loc:{start:{line:279,column:4},end:{line:281,column:5}},type:"if",locations:[{start:{line:279,column:4},end:{line:281,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:279},34:{loc:{start:{line:282,column:19},end:{line:282,column:51}},type:"binary-expr",locations:[{start:{line:282,column:19},end:{line:282,column:45}},{start:{line:282,column:49},end:{line:282,column:51}}],line:282},35:{loc:{start:{line:284,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:284,column:4},end:{line:295,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:284},36:{loc:{start:{line:284,column:8},end:{line:284,column:35}},type:"binary-expr",locations:[{start:{line:284,column:8},end:{line:284,column:16}},{start:{line:284,column:20},end:{line:284,column:35}}],line:284},37:{loc:{start:{line:287,column:8},end:{line:292,column:9}},type:"if",locations:[{start:{line:287,column:8},end:{line:292,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:287},38:{loc:{start:{line:287,column:12},end:{line:287,column:56}},type:"binary-expr",locations:[{start:{line:287,column:12},end:{line:287,column:27}},{start:{line:287,column:31},end:{line:287,column:56}}],line:287},39:{loc:{start:{line:298,column:6},end:{line:311,column:7}},type:"if",locations:[{start:{line:298,column:6},end:{line:311,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:298},40:{loc:{start:{line:313,column:6},end:{line:326,column:7}},type:"if",locations:[{start:{line:313,column:6},end:{line:326,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:313},41:{loc:{start:{line:328,column:6},end:{line:346,column:7}},type:"if",locations:[{start:{line:328,column:6},end:{line:346,column:7}},{start:{line:342,column:13},end:{line:346,column:7}}],line:328},42:{loc:{start:{line:330,column:20},end:{line:330,column:78}},type:"cond-expr",locations:[{start:{line:330,column:40},end:{line:330,column:67}},{start:{line:330,column:70},end:{line:330,column:78}}],line:330},43:{loc:{start:{line:330,column:20},end:{line:330,column:37}},type:"binary-expr",locations:[{start:{line:330,column:20},end:{line:330,column:25}},{start:{line:330,column:29},end:{line:330,column:37}}],line:330},44:{loc:{start:{line:349,column:4},end:{line:363,column:5}},type:"if",locations:[{start:{line:349,column:4},end:{line:363,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:349},45:{loc:{start:{line:353,column:8},end:{line:361,column:9}},type:"if",locations:[{start:{line:353,column:8},end:{line:361,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:353},46:{loc:{start:{line:364,column:4},end:{line:366,column:5}},type:"if",locations:[{start:{line:364,column:4},end:{line:366,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},47:{loc:{start:{line:367,column:4},end:{line:369,column:5}},type:"if",locations:[{start:{line:367,column:4},end:{line:369,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:367},48:{loc:{start:{line:370,column:4},end:{line:372,column:5}},type:"if",locations:[{start:{line:370,column:4},end:{line:372,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:370},49:{loc:{start:{line:373,column:4},end:{line:375,column:5}},type:"if",locations:[{start:{line:373,column:4},end:{line:375,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:373},50:{loc:{start:{line:406,column:4},end:{line:406,column:38}},type:"if",locations:[{start:{line:406,column:4},end:{line:406,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:406},51:{loc:{start:{line:407,column:4},end:{line:411,column:5}},type:"if",locations:[{start:{line:407,column:4},end:{line:411,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:407},52:{loc:{start:{line:441,column:26},end:{line:441,column:70}},type:"cond-expr",locations:[{start:{line:441,column:46},end:{line:441,column:65}},{start:{line:441,column:68},end:{line:441,column:70}}],line:441},53:{loc:{start:{line:442,column:31},end:{line:442,column:87}},type:"cond-expr",locations:[{start:{line:442,column:69},end:{line:442,column:78}},{start:{line:442,column:81},end:{line:442,column:87}}],line:442},54:{loc:{start:{line:466,column:21},end:{line:466,column:44}},type:"binary-expr",locations:[{start:{line:466,column:21},end:{line:466,column:38}},{start:{line:466,column:42},end:{line:466,column:44}}],line:466},55:{loc:{start:{line:467,column:4},end:{line:478,column:5}},type:"if",locations:[{start:{line:467,column:4},end:{line:478,column:5}},{start:{line:476,column:11},end:{line:478,column:5}}],line:467},56:{loc:{start:{line:488,column:6},end:{line:526,column:7}},type:"if",locations:[{start:{line:488,column:6},end:{line:526,column:7}},{start:{line:524,column:13},end:{line:526,column:7}}],line:488},57:{loc:{start:{line:488,column:10},end:{line:488,column:149}},type:"binary-expr",locations:[{start:{line:488,column:10},end:{line:488,column:72}},{start:{line:488,column:76},end:{line:488,column:97}},{start:{line:488,column:101},end:{line:488,column:149}}],line:488},58:{loc:{start:{line:500,column:10},end:{line:502,column:11}},type:"if",locations:[{start:{line:500,column:10},end:{line:502,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:500},59:{loc:{start:{line:513,column:8},end:{line:523,column:9}},type:"if",locations:[{start:{line:513,column:8},end:{line:523,column:9}},{start:{line:517,column:15},end:{line:523,column:9}}],line:513},60:{loc:{start:{line:525,column:26},end:{line:525,column:85}},type:"binary-expr",locations:[{start:{line:525,column:26},end:{line:525,column:49}},{start:{line:525,column:53},end:{line:525,column:85}}],line:525},61:{loc:{start:{line:528,column:4},end:{line:533,column:5}},type:"if",locations:[{start:{line:528,column:4},end:{line:533,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:528},62:{loc:{start:{line:536,column:21},end:{line:536,column:55}},type:"binary-expr",locations:[{start:{line:536,column:21},end:{line:536,column:49}},{start:{line:536,column:53},end:{line:536,column:55}}],line:536},63:{loc:{start:{line:537,column:11},end:{line:537,column:52}},type:"binary-expr",locations:[{start:{line:537,column:11},end:{line:537,column:40}},{start:{line:537,column:44},end:{line:537,column:52}}],line:537},64:{loc:{start:{line:547,column:16},end:{line:547,column:41}},type:"binary-expr",locations:[{start:{line:547,column:16},end:{line:547,column:29}},{start:{line:547,column:33},end:{line:547,column:41}}],line:547},65:{loc:{start:{line:560,column:4},end:{line:582,column:5}},type:"if",locations:[{start:{line:560,column:4},end:{line:582,column:5}},{start:{line:570,column:11},end:{line:582,column:5}}],line:560},66:{loc:{start:{line:584,column:4},end:{line:586,column:5}},type:"if",locations:[{start:{line:584,column:4},end:{line:586,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:584},67:{loc:{start:{line:588,column:4},end:{line:590,column:5}},type:"if",locations:[{start:{line:588,column:4},end:{line:590,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:588},68:{loc:{start:{line:599,column:66},end:{line:599,column:91}},type:"cond-expr",locations:[{start:{line:599,column:81},end:{line:599,column:84}},{start:{line:599,column:87},end:{line:599,column:91}}],line:599},69:{loc:{start:{line:600,column:4},end:{line:604,column:5}},type:"if",locations:[{start:{line:600,column:4},end:{line:604,column:5}},{start:{line:602,column:11},end:{line:604,column:5}}],line:600},70:{loc:{start:{line:605,column:4},end:{line:609,column:5}},type:"if",locations:[{start:{line:605,column:4},end:{line:609,column:5}},{start:{line:607,column:11},end:{line:609,column:5}}],line:605},71:{loc:{start:{line:607,column:11},end:{line:609,column:5}},type:"if",locations:[{start:{line:607,column:11},end:{line:609,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:607},72:{loc:{start:{line:615,column:4},end:{line:627,column:5}},type:"if",locations:[{start:{line:615,column:4},end:{line:627,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:615},73:{loc:{start:{line:615,column:8},end:{line:615,column:39}},type:"binary-expr",locations:[{start:{line:615,column:8},end:{line:615,column:18}},{start:{line:615,column:22},end:{line:615,column:39}}],line:615},74:{loc:{start:{line:629,column:4},end:{line:631,column:5}},type:"if",locations:[{start:{line:629,column:4},end:{line:631,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:629},75:{loc:{start:{line:629,column:8},end:{line:629,column:27}},type:"binary-expr",locations:[{start:{line:629,column:8},end:{line:629,column:12}},{start:{line:629,column:16},end:{line:629,column:27}}],line:629},76:{loc:{start:{line:633,column:4},end:{line:656,column:5}},type:"if",locations:[{start:{line:633,column:4},end:{line:656,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:633},77:{loc:{start:{line:641,column:8},end:{line:646,column:9}},type:"if",locations:[{start:{line:641,column:8},end:{line:646,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:641},78:{loc:{start:{line:643,column:10},end:{line:645,column:11}},type:"if",locations:[{start:{line:643,column:10},end:{line:645,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:643},79:{loc:{start:{line:647,column:8},end:{line:652,column:9}},type:"if",locations:[{start:{line:647,column:8},end:{line:652,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:647},80:{loc:{start:{line:695,column:19},end:{line:695,column:51}},type:"binary-expr",locations:[{start:{line:695,column:19},end:{line:695,column:45}},{start:{line:695,column:49},end:{line:695,column:51}}],line:695},81:{loc:{start:{line:696,column:26},end:{line:696,column:92}},type:"cond-expr",locations:[{start:{line:696,column:46},end:{line:696,column:83}},{start:{line:696,column:86},end:{line:696,column:92}}],line:696},82:{loc:{start:{line:726,column:24},end:{line:745,column:14}},type:"cond-expr",locations:[{start:{line:726,column:56},end:{line:745,column:5}},{start:{line:745,column:8},end:{line:745,column:14}}],line:726},83:{loc:{start:{line:746,column:24},end:{line:756,column:14}},type:"cond-expr",locations:[{start:{line:746,column:97},end:{line:756,column:5}},{start:{line:756,column:8},end:{line:756,column:14}}],line:746}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AA4tBmB,SAAA,KAgNA,YAhNA;AA3tBnB,OAAO,cAAc;AACrB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,iBAAiB,cAAc,8BAA8B;AACtE,SAAS,cAAc,oBAAoB;AAC3C,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,WAAW;AAKlB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AAChE,QAAA,qBAAqB,IAAI,MAAM,oBAAoB;AACnD,QAAA,kBAAkB,IAAI,MAAM,iBAAiB;AAC7C,QAAA,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,MAAI,sBAAsB,iBAAiB;AACnC,UAAA,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AACvB,UAAA,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACI,WAAA;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AAC7D,SAAA;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AACX,aAAS,IAAI;AAER,SAAA,gBAAgB,IAAI,cAAc;AACjC,UAAA,SAAS,IAAI,gBAAgB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC;AAClE,QAAA,OAAO,OAAO,IAAI,WAAW;AAC7B,QAAA,QAAQ,SAAS,OAAO,SAAS,SAAS,QAAQ,OAAO,SAAS,SAAS,QAAQ;AACrF,aAAO,OAAO,SAAS;AAAA,IACzB;AACK,SAAA,aAAa,IAAI,cAAc;AAAA,MAClC,oBAAoB,cAAY,KAAK,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,MAC3E;AAAA,MACA,MAAM,OAAO,IAAI,WAAW;AAAA,IAC9B,CAAC;AAGD,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACR,eAAA;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC1C,UAAA,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AACpCA,iBAAAA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACN,eAAA,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,WAAW,gBAAgB;AACjC,QAAG,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B,GAAG;AAC9F,WAAA,aAAa,IAAI,WAAW;AACjC,mBAAa,UAAU,CAAA,aAAY,KAAK,eAAe,QAAQ,CAAC;AACzC,6BAAA;AAAA,IACzB,OAAO;AACL,UAAG,UAAU;AACY,+BAAA;AAAA,MACzB;AACK,WAAA,WAAW,KAAK,CAAO,QAAA;AAC1B,YAAG,KAAK;AACN,kBAAQ,IAAI,kDAAkD;AACzD,eAAA,aAAa,IAAI,WAAW;AAAA,QACnC;AACK,aAAA,WAAW,YAAY,CAAA,aAAY,KAAK,eAAe,UAAU,EAAC,aAAa,KAAI,CAAC,CAAC;AAEvF,YAAA,MAAM,QAAQ,GAAG;AAClB,gBAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AACnD,gBAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AAEG,QAAA,MAAM,QAAQ,GAAG;AAClB,YAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AACzD,YAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AAAA,IACrD;AAEA,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEK,SAAA,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAK,MAAA,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AACX,WAAA,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACd,WAAA,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAkD;AACrD,SAAA,WAAW,KAAK,aAAa;AAAA,EACpC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAEvE,UAAA,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAS,UAAA;AACnC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAS,UAAA;AAClC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAA6C,OAAyB,CAAC,MAAM;AACtF,WAAA;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAIjE,UAAM,cAA2C,CAAC;AAC9C,QAAA,YAAY,SAAS,QAAQ;AACzB,YAAA,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACY,oBAAA,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAS,UAAA;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AACtC,cAAA,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AACzD,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACI,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AAChD,QAAA,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,aAAO,QAAQ,CAAS,UAAA;AAChB,cAAA,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACP,cAAA;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,GAAG;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACf,WAAA,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAA6C;AAAA,IAC9D;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC3B,QAAA,EAAE,UAAU,SAAS,IAAI;AACzB,QAAA,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAEtB,QAAA,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAES,aAAA,OAAO,MAAM,CAAC;AACN,qBAAA,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAC5B,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,kBAAkB,OAAO,MAAM,CAAC;AACtB,oBAAA,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AACzB,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AACtC,gBAAA,KAAK,YAAY,KAAK;AACpB,kBAAA,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AACrC,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AAClC,UAAA,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAgD;AAC5D,UAAA,WAAoC,SAAS,YAAY,CAAC;AAC7D,QAAA,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACO,aAAA;AAAA,IACT,OAAO;AACE,aAAA;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAA6C,eAA4C;AAC/F,SAAA,SAAS,EAAC,WAAsB,CAAC;AAC3B,eAAA,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,eAAe;AACb,UAAM,aAAmC,CAAC;AAEhC,eAAA,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,SAAS,OAAO,GAAG;AACnE,UACE,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,GAAG,KAC7D,IAAI,SAAS,YACb,OAAO,UAAU,eAAe,KAAK,KAAK,KAAK,GAC/C;AACA,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,IAAI;AAAA,UACV,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,IAAI;AAEV,YAAA;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACH,kBAAA,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEM,cAAA,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAGA,gBAAM,UAAU,OAAO,OAAO,CAAC,GAAG;AAAA,YAChC,CAAC,GAAG,GAAG,KAAK,MAAM,QAAQ,GAAG;AAAA,UAC/B,CAAC;AAES,qBAAA,SAAS,KAAK,eAAe;AACpC,oBAAQ,GAAG,EAAU,OAAO,KAAK,MAAM,EAAE;AAAA,UAC5C;AAEA,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH;AAEI,YAAA,IAAK,WAAW,YAAY,GAAG;AAChC,cAAI,QAAQ,IAAK,OAAO,EAAE,CAAC,EAAG,YAAY,EAAE,EAC1C,KAAK,CAAQ,SAAA,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL,OAAO;AACL,gBAAM,KAAM;AAAA,YACV,MAAM;AAAA,UACR,CAAC,EACE,KAAK,CAAA,aAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL;AAAA,MACF,OACK;AACQ,mBAAA,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,KAAK,MAAM,SAAS,QAAQ,GAAG;AAAA,MAC9E;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,iBAAiB;AAC/B,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AACnE,WAAA,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AAC9C,eAAA,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC1B,aAAA,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEM,UAAA,WAAW,KAAK,aAAa;AAE/B,QAAA;AAGJ,QAAG,aAAa,MAAM;AACP,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AACQ,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEI,QAAA;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACD,mBAAA,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEO,WAAA,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UACH,WAAA,CAAA;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AACpC,UAAA,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAEzB,QAAA,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACC,UAAA,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AAClB,UAAA,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC3B,UAAA,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAC3C,QAAA,cAAc,eAAe,IAAI;AAC7B,YAAA,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAa,cAAA;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACpC,QAAA,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACJ,UAAA;AACI,cAAA,QAAQ,KAAK,MAAM,GAAG;AACtB,cAAA,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AACpC,oBAAA;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,gBAAgB,YAAyC;AAClD,SAAA,SAAS,EAAC,WAAsB,CAAC;AAAA,EACxC;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AACxC,UAAA,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEC,UAAA,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGC,UAAA,8BAAU,OACd,EAAA,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IACF,EAAA,CAAA;AAEO,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"202ad01ed2133eb4b0af12f6c2be77d2f87957aa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ee=function(){return a},a}Ee();Ee().s[0]++;window.Buffer=cY.Buffer;function _me(n,e){Ee().f[0]++;const t=(Ee().s[1]++,n.match(/\.tilehosting\.com/)),r=(Ee().s[2]++,n.match(/\.maptiler\.com/)),i=(Ee().s[3]++,n.match(/\.thunderforest\.com/));if(Ee().s[4]++,Ee().b[1][0]++,t||(Ee().b[1][1]++,r)){Ee().b[0][0]++;const s=(Ee().s[5]++,pc.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(Ee().s[6]++,s)return Ee().b[2][0]++,Ee().s[7]++,n.replace("{key}",s);Ee().b[2][1]++}else if(Ee().b[0][1]++,Ee().s[8]++,i){Ee().b[3][0]++;const s=(Ee().s[9]++,pc.getAccessToken("thunderforest",e,{allowFallback:!0}));if(Ee().s[10]++,s)return Ee().b[4][0]++,Ee().s[11]++,n.replace("{key}",s);Ee().b[4][1]++}else return Ee().b[3][1]++,Ee().s[12]++,n}function lL(n,e,t){return Ee().f[1]++,Ee().s[13]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class bme extends nr.Component{constructor(t){Ee().f[2]++,Ee().s[14]++;super(t);Tn(this,"revisionStore");Tn(this,"styleStore");Tn(this,"layerWatcher");Tn(this,"handleKeyPress",(Ee().s[65]++,t=>{Ee().f[18]++,Ee().s[66]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(Ee().b[18][0]++,Ee().s[67]++,Ee().b[20][0]++,t.metaKey&&(Ee().b[20][1]++,t.shiftKey)&&(Ee().b[20][2]++,t.keyCode===90)?(Ee().b[19][0]++,Ee().s[68]++,t.preventDefault(),Ee().s[69]++,this.onRedo()):(Ee().b[19][1]++,Ee().s[70]++,Ee().b[22][0]++,t.metaKey&&(Ee().b[22][1]++,t.keyCode===90)?(Ee().b[21][0]++,Ee().s[71]++,t.preventDefault(),Ee().s[72]++,this.onUndo()):Ee().b[21][1]++)):(Ee().b[18][1]++,Ee().s[73]++,Ee().b[24][0]++,t.ctrlKey&&(Ee().b[24][1]++,t.keyCode===90)?(Ee().b[23][0]++,Ee().s[74]++,t.preventDefault(),Ee().s[75]++,this.onUndo()):(Ee().b[23][1]++,Ee().s[76]++,Ee().b[26][0]++,t.ctrlKey&&(Ee().b[26][1]++,t.keyCode===89)?(Ee().b[25][0]++,Ee().s[77]++,t.preventDefault(),Ee().s[78]++,this.onRedo()):Ee().b[25][1]++))}));Tn(this,"onChangeMetadataProperty",(Ee().s[89]++,(t,r)=>{Ee().f[26]++,Ee().s[90]++,Ee().b[31][0]++,t==="maputnik:renderer"&&(Ee().b[31][1]++,r!==fY(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(Ee().b[30][0]++,Ee().s[91]++,this.setState({mapState:"map"})):Ee().b[30][1]++;const i=(Ee().s[92]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[t]:r}});Ee().s[93]++,this.onStyleChanged(i)}));Tn(this,"onStyleChanged",(Ee().s[94]++,(t,r=(Ee().b[32][0]++,{}))=>{Ee().f[27]++,Ee().s[95]++,r={save:!0,addRevision:!0,initialLoad:!1,...r},Ee().s[96]++,r.initialLoad?(Ee().b[33][0]++,Ee().s[97]++,this.getInitialStateFromUrl(t)):Ee().b[33][1]++;const i=(Ee().s[98]++,Ee().b[34][0]++,Lf(t)||(Ee().b[34][1]++,[])),s=(Ee().s[99]++,[]);if(Ee().s[100]++,Ee().b[36][0]++,t&&(Ee().b[36][1]++,t.layers)){Ee().b[35][0]++;const d=(Ee().s[101]++,new window.Map);Ee().s[102]++,t.layers.forEach((g,b)=>{if(Ee().f[28]++,Ee().s[103]++,Ee().b[38][0]++,g.id===""&&(Ee().b[38][1]++,d.has(g.id))){Ee().b[37][0]++;const E=(Ee().s[104]++,new Error(`layers[${b}]: duplicate layer id [empty_string], previously used`));Ee().s[105]++,s.push(E)}else Ee().b[37][1]++;Ee().s[106]++,d.set(g.id,!0)})}else Ee().b[35][1]++;const a=(Ee().s[107]++,s.concat(i).map(d=>{Ee().f[29]++;const g=(Ee().s[108]++,d.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(Ee().s[109]++,g){Ee().b[39][0]++;const[,S,B]=(Ee().s[110]++,g);return Ee().s[111]++,{message:d.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:"id",message:B}}}}else Ee().b[39][1]++;const b=(Ee().s[112]++,d.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(Ee().s[113]++,b){Ee().b[40][0]++;const[,S,B]=(Ee().s[114]++,b);return Ee().s[115]++,{message:d.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:"source",message:B}}}}else Ee().b[40][1]++;const E=(Ee().s[116]++,d.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(Ee().s[117]++,E){Ee().b[41][0]++;const[,S,B,k,z]=(Ee().s[118]++,E),j=(Ee().s[119]++,Ee().b[43][0]++,B&&(Ee().b[43][1]++,k)?(Ee().b[42][0]++,[B,k].join(".")):(Ee().b[42][1]++,k));return Ee().s[120]++,{message:d.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:j,message:z}}}}else return Ee().b[41][1]++,Ee().s[121]++,{message:d.message}}));let o=(Ee().s[122]++,void 0);Ee().s[123]++,i.length>0?(Ee().b[44][0]++,Ee().s[124]++,o=o7(t),Ee().s[125]++,i.forEach(d=>{Ee().f[30]++;const{message:g}=(Ee().s[126]++,d);if(Ee().s[127]++,g){Ee().b[45][0]++,Ee().s[128]++;try{const b=(Ee().s[129]++,g.split(":")[0]),E=(Ee().s[130]++,b.match(/^\S+?\[\d+\]\.[^[]+/)[0]);Ee().s[131]++,ux.unset(o,E)}catch(b){Ee().s[132]++,console.warn(b)}}else Ee().b[45][1]++})):Ee().b[44][1]++,Ee().s[133]++,t.glyphs!==this.state.mapStyle.glyphs?(Ee().b[46][0]++,Ee().s[134]++,this.updateFonts(t.glyphs)):Ee().b[46][1]++,Ee().s[135]++,t.sprite!==this.state.mapStyle.sprite?(Ee().b[47][0]++,Ee().s[136]++,this.updateIcons(t.sprite)):Ee().b[47][1]++,Ee().s[137]++,r.addRevision?(Ee().b[48][0]++,Ee().s[138]++,this.revisionStore.addRevision(t)):Ee().b[48][1]++,Ee().s[139]++,r.save?(Ee().b[49][0]++,Ee().s[140]++,this.saveStyle(t)):Ee().b[49][1]++,Ee().s[141]++,this.setState({mapStyle:t,dirtyMapStyle:o,errors:a},()=>{Ee().f[31]++,Ee().s[142]++,this.fetchSources(),Ee().s[143]++,this.setStateInUrl()})}));Tn(this,"onUndo",(Ee().s[144]++,()=>{Ee().f[32]++;const t=(Ee().s[145]++,this.revisionStore.undo()),r=(Ee().s[146]++,Xpe(this.state.mapStyle,t));Ee().s[147]++,this.onStyleChanged(t,{addRevision:!1}),Ee().s[148]++,this.setState({infos:r})}));Tn(this,"onRedo",(Ee().s[149]++,()=>{Ee().f[33]++;const t=(Ee().s[150]++,this.revisionStore.redo()),r=(Ee().s[151]++,Jpe(this.state.mapStyle,t));Ee().s[152]++,this.onStyleChanged(t,{addRevision:!1}),Ee().s[153]++,this.setState({infos:r})}));Tn(this,"onMoveLayer",(Ee().s[154]++,t=>{Ee().f[34]++;let{oldIndex:r,newIndex:i}=(Ee().s[155]++,t),s=(Ee().s[156]++,this.state.mapStyle.layers);if(Ee().s[157]++,r=a7(r,0,s.length-1),Ee().s[158]++,i=a7(i,0,s.length-1),Ee().s[159]++,r===i){Ee().b[50][0]++,Ee().s[160]++;return}else Ee().b[50][1]++;Ee().s[161]++,r===this.state.selectedLayerIndex?(Ee().b[51][0]++,Ee().s[162]++,this.setState({selectedLayerIndex:i})):Ee().b[51][1]++,Ee().s[163]++,s=s.slice(0),Ee().s[164]++,gY(s,r,i),Ee().s[165]++,this.onLayersChange(s)}));Tn(this,"onLayersChange",(Ee().s[166]++,t=>{Ee().f[35]++;const r=(Ee().s[167]++,{...this.state.mapStyle,layers:t});Ee().s[168]++,this.onStyleChanged(r)}));Tn(this,"onLayerDestroy",(Ee().s[169]++,t=>{Ee().f[36]++;const r=(Ee().s[170]++,this.state.mapStyle.layers),i=(Ee().s[171]++,r.slice(0));Ee().s[172]++,i.splice(t,1),Ee().s[173]++,this.onLayersChange(i)}));Tn(this,"onLayerCopy",(Ee().s[174]++,t=>{Ee().f[37]++;const r=(Ee().s[175]++,this.state.mapStyle.layers),i=(Ee().s[176]++,r.slice(0)),s=(Ee().s[177]++,o7(i[t]));Ee().s[178]++,s.id=s.id+"-copy",Ee().s[179]++,i.splice(t,0,s),Ee().s[180]++,this.onLayersChange(i)}));Tn(this,"onLayerVisibilityToggle",(Ee().s[181]++,t=>{Ee().f[38]++;const r=(Ee().s[182]++,this.state.mapStyle.layers),i=(Ee().s[183]++,r.slice(0)),s=(Ee().s[184]++,{...i[t]}),a=(Ee().s[185]++,"layout"in s?(Ee().b[52][0]++,{...s.layout}):(Ee().b[52][1]++,{}));Ee().s[186]++,a.visibility=a.visibility==="none"?(Ee().b[53][0]++,"visible"):(Ee().b[53][1]++,"none"),Ee().s[187]++,s.layout=a,Ee().s[188]++,i[t]=s,Ee().s[189]++,this.onLayersChange(i)}));Tn(this,"onLayerIdChange",(Ee().s[190]++,(t,r,i)=>{Ee().f[39]++;const s=(Ee().s[191]++,this.state.mapStyle.layers.slice(0));Ee().s[192]++,s[t]={...s[t],id:i},Ee().s[193]++,this.onLayersChange(s)}));Tn(this,"onLayerChanged",(Ee().s[194]++,(t,r)=>{Ee().f[40]++;const i=(Ee().s[195]++,this.state.mapStyle.layers.slice(0));Ee().s[196]++,i[t]=r,Ee().s[197]++,this.onLayersChange(i)}));Tn(this,"setMapState",(Ee().s[198]++,t=>{Ee().f[41]++,Ee().s[199]++,this.setState({mapState:t},this.setStateInUrl)}));Tn(this,"setDefaultValues",(Ee().s[200]++,t=>{Ee().f[42]++;const r=(Ee().s[201]++,Ee().b[54][0]++,t.metadata||(Ee().b[54][1]++,{}));if(Ee().s[202]++,r["maputnik:renderer"]===void 0){Ee().b[55][0]++;const i=(Ee().s[203]++,{...t,metadata:{...t.metadata,"maputnik:renderer":"mlgljs"}});return Ee().s[204]++,i}else return Ee().b[55][1]++,Ee().s[205]++,t}));Tn(this,"openStyle",(Ee().s[206]++,(t,r)=>{Ee().f[43]++,Ee().s[207]++,this.setState({fileHandle:r}),Ee().s[208]++,t=this.setDefaultValues(t),Ee().s[209]++,this.onStyleChanged(t)}));Tn(this,"onMapChange",(Ee().s[239]++,t=>{Ee().f[52]++,Ee().s[240]++,this.setState({mapView:t})}));Tn(this,"setStateInUrl",(Ee().s[256]++,()=>{Ee().f[56]++;const{mapState:t,mapStyle:r,isOpen:i}=(Ee().s[257]++,this.state),{selectedLayerIndex:s}=(Ee().s[258]++,this.state),a=(Ee().s[259]++,new URL(location.href)),o=(Ee().s[260]++,f7(JSON.stringify(r)));Ee().s[261]++,a.searchParams.set("layer",`${o}~${s}`);const d=(Ee().s[262]++,Object.entries(i).map(([g,b])=>(Ee().f[57]++,Ee().s[263]++,b===!0?(Ee().b[68][0]++,g):(Ee().b[68][1]++,null))).filter(g=>(Ee().f[58]++,Ee().s[264]++,g!==null)));Ee().s[265]++,d.length>0?(Ee().b[69][0]++,Ee().s[266]++,a.searchParams.set("modal",d.join(","))):(Ee().b[69][1]++,Ee().s[267]++,a.searchParams.delete("modal")),Ee().s[268]++,t==="map"?(Ee().b[70][0]++,Ee().s[269]++,a.searchParams.delete("view")):(Ee().b[70][1]++,Ee().s[270]++,t==="inspect"?(Ee().b[71][0]++,Ee().s[271]++,a.searchParams.set("view","inspect")):Ee().b[71][1]++),Ee().s[272]++,history.replaceState({selectedLayerIndex:s},"Maputnik",a.href)}));Tn(this,"getInitialStateFromUrl",(Ee().s[273]++,t=>{Ee().f[59]++;const r=(Ee().s[274]++,new URL(location.href)),i=(Ee().s[275]++,r.searchParams.get("modal"));if(Ee().s[276]++,Ee().b[73][0]++,i&&(Ee().b[73][1]++,i!=="")){Ee().b[72][0]++;const o=(Ee().s[277]++,i.split(",")),d=(Ee().s[278]++,{});Ee().s[279]++,o.forEach(g=>{Ee().f[60]++,Ee().s[280]++,d[g]=!0}),Ee().s[281]++,this.setState({isOpen:{...this.state.isOpen,...d}})}else Ee().b[72][1]++;const s=(Ee().s[282]++,r.searchParams.get("view"));Ee().s[283]++,Ee().b[75][0]++,s&&(Ee().b[75][1]++,s!=="")?(Ee().b[74][0]++,Ee().s[284]++,this.setMapState(s)):Ee().b[74][1]++;const a=(Ee().s[285]++,r.searchParams.get("layer"));if(Ee().s[286]++,a){Ee().b[76][0]++,Ee().s[287]++;try{const o=(Ee().s[288]++,a.split("~")),[d,g]=(Ee().s[289]++,[o[0],parseInt(o[1],10)]);let b=(Ee().s[290]++,!0);if(Ee().s[291]++,d!=="-"){Ee().b[77][0]++;const E=(Ee().s[292]++,f7(JSON.stringify(t)));Ee().s[293]++,E!==parseInt(d,10)?(Ee().b[78][0]++,Ee().s[294]++,b=!1):Ee().b[78][1]++}else Ee().b[77][1]++;Ee().s[295]++,b?(Ee().b[79][0]++,Ee().s[296]++,this.setState({selectedLayerIndex:g,selectedLayerOriginalId:t.layers[g].id})):Ee().b[79][1]++}catch(o){Ee().s[297]++,console.warn(o)}}else Ee().b[76][1]++}));Tn(this,"onLayerSelect",(Ee().s[298]++,t=>{Ee().f[61]++,Ee().s[299]++,this.setState({selectedLayerIndex:t,selectedLayerOriginalId:this.state.mapStyle.layers[t].id},this.setStateInUrl)}));Tn(this,"onChangeOpenlayersDebug",(Ee().s[303]++,(t,r)=>{Ee().f[65]++,Ee().s[304]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[t]:r}})}));Tn(this,"onChangeMaplibreGlDebug",(Ee().s[305]++,(t,r)=>{Ee().f[66]++,Ee().s[306]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[t]:r}})}));Ee().s[15]++,nY(this),Ee().s[16]++,this.revisionStore=new dme;const r=(Ee().s[17]++,new URLSearchParams(window.location.search.substring(1)));let i=(Ee().s[18]++,r.get("localport"));Ee().s[19]++,Ee().b[6][0]++,i==null&&(Ee().b[6][1]++,window.location.port!=="80")&&(Ee().b[6][2]++,window.location.port!=="443")?(Ee().b[5][0]++,Ee().s[20]++,i=window.location.port):Ee().b[5][1]++,Ee().s[21]++,this.styleStore=new cme({onLocalStyleChange:o=>(Ee().f[3]++,Ee().s[22]++,this.onStyleChanged(o,{save:!1})),port:i,host:r.get("localhost")});const s=(Ee().s[23]++,[{key:"?",handler:()=>{Ee().f[4]++,Ee().s[24]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{Ee().f[5]++,Ee().s[25]++,this.toggleModal("open")}},{key:"e",handler:()=>{Ee().f[6]++,Ee().s[26]++,this.toggleModal("export")}},{key:"d",handler:()=>{Ee().f[7]++,Ee().s[27]++,this.toggleModal("sources")}},{key:"s",handler:()=>{Ee().f[8]++,Ee().s[28]++,this.toggleModal("settings")}},{key:"i",handler:()=>{Ee().f[9]++,Ee().s[29]++,this.setMapState(this.state.mapState==="map"?(Ee().b[7][0]++,"inspect"):(Ee().b[7][1]++,"map"))}},{key:"m",handler:()=>{Ee().f[10]++,Ee().s[30]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{Ee().f[11]++,Ee().s[31]++,this.toggleModal("debug")}}]);Ee().s[32]++,document.body.addEventListener("keyup",o=>{if(Ee().f[12]++,Ee().s[33]++,o.key==="Escape")Ee().b[8][0]++,Ee().s[34]++,o.target.blur(),Ee().s[35]++,document.body.focus();else if(Ee().b[8][1]++,Ee().s[36]++,Ee().b[10][0]++,this.state.isOpen.shortcuts||(Ee().b[10][1]++,document.activeElement===document.body)){Ee().b[9][0]++;const d=(Ee().s[37]++,s.find(g=>(Ee().f[13]++,Ee().s[38]++,g.key===o.key)));Ee().s[39]++,d?(Ee().b[11][0]++,Ee().s[40]++,this.setModal("shortcuts",!1),Ee().s[41]++,d.handler()):Ee().b[11][1]++}else Ee().b[9][1]++});const a=(Ee().s[42]++,Zpe());Ee().s[43]++,Ee().b[13][0]++,a&&(Ee().b[13][1]++,window.confirm("Load style from URL: "+a+" and discard current changes?"))?(Ee().b[12][0]++,Ee().s[44]++,this.styleStore=new oL,Ee().s[45]++,zG(a,o=>(Ee().f[14]++,Ee().s[46]++,this.onStyleChanged(o))),Ee().s[47]++,tL()):(Ee().b[12][1]++,Ee().s[48]++,a?(Ee().b[14][0]++,Ee().s[49]++,tL()):Ee().b[14][1]++,Ee().s[50]++,this.styleStore.init(o=>{Ee().f[15]++,Ee().s[51]++,o?(Ee().b[15][0]++,Ee().s[52]++,console.log("Falling back to local storage for storing styles"),Ee().s[53]++,this.styleStore=new oL):Ee().b[15][1]++,Ee().s[54]++,this.styleStore.latestStyle(d=>(Ee().f[16]++,Ee().s[55]++,this.onStyleChanged(d,{initialLoad:!0}))),Ee().s[56]++,vg.enabled()?(Ee().b[16][0]++,Ee().s[57]++,vg.set("maputnik","styleStore",this.styleStore),Ee().s[58]++,vg.set("maputnik","revisionStore",this.revisionStore)):Ee().b[16][1]++})),Ee().s[59]++,vg.enabled()?(Ee().b[17][0]++,Ee().s[60]++,vg.set("maputnik","revisionStore",this.revisionStore),Ee().s[61]++,vg.set("maputnik","styleStore",this.styleStore)):Ee().b[17][1]++,Ee().s[62]++,this.state={errors:[],infos:[],mapStyle:pc.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Ns,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},Ee().s[63]++,this.layerWatcher=new yme({onVectorLayersChange:o=>(Ee().f[17]++,Ee().s[64]++,this.setState({vectorLayers:o}))})}componentDidMount(){Ee().f[19]++,Ee().s[79]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){Ee().f[20]++,Ee().s[80]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(t){Ee().f[21]++,Ee().s[81]++,this.styleStore.save(t)}updateFonts(t){Ee().f[22]++;const r=(Ee().s[82]++,Ee().b[27][0]++,this.state.mapStyle.metadata||(Ee().b[27][1]++,{})),i=(Ee().s[83]++,Ee().b[28][0]++,r["maputnik:openmaptiles_access_token"]||(Ee().b[28][1]++,bG.openmaptiles)),s=(Ee().s[84]++,typeof t=="string"?(Ee().b[29][0]++,t.replace("{key}",i)):(Ee().b[29][1]++,t));Ee().s[85]++,Vpe(s,a=>{Ee().f[23]++,Ee().s[86]++,this.setState({spec:lL(this.state.spec,"glyphs",a)})})}updateIcons(t){Ee().f[24]++,Ee().s[87]++,Hpe(t,r=>{Ee().f[25]++,Ee().s[88]++,this.setState({spec:lL(this.state.spec,"sprite",r)})})}fetchSources(){Ee().f[44]++;const t=(Ee().s[210]++,{});Ee().s[211]++;for(const[r,i]of Object.entries(this.state.mapStyle.sources))if(Ee().s[212]++,Ee().b[57][0]++,!Object.prototype.hasOwnProperty.call(this.state.sources,r)&&(Ee().b[57][1]++,i.type==="vector")&&(Ee().b[57][2]++,Object.prototype.hasOwnProperty.call(i,"url"))){Ee().b[56][0]++,Ee().s[213]++,t[r]={type:i.type,layers:[]};let s=(Ee().s[214]++,i.url);Ee().s[215]++;try{Ee().s[216]++,s=_me(s,this.state.mapStyle)}catch(o){Ee().s[217]++,console.warn("Failed to setFetchAccessToken: ",o)}Ee().s[218]++;const a=o=>{if(Ee().f[45]++,Ee().s[219]++,Object.prototype.hasOwnProperty.call(o,"vector_layers"))Ee().b[58][1]++;else{Ee().b[58][0]++,Ee().s[220]++;return}const d=(Ee().s[221]++,Object.assign({},{[r]:this.state.sources[r]}));Ee().s[222]++;for(const g of o.vector_layers)Ee().s[223]++,d[r].layers.push(g.id);Ee().s[224]++,this.setState({sources:d})};Ee().s[225]++,s.startsWith("pmtiles://")?(Ee().b[59][0]++,Ee().s[226]++,new _6(s.substr(10)).getTileJson("").then(o=>(Ee().f[46]++,Ee().s[227]++,a(o))).catch(o=>{Ee().f[47]++,Ee().s[228]++,console.error("Failed to process sources for '%s'",s,o)})):(Ee().b[59][1]++,Ee().s[229]++,fetch(s,{mode:"cors"}).then(o=>(Ee().f[48]++,Ee().s[230]++,o.json())).then(o=>(Ee().f[49]++,Ee().s[231]++,a(o))).catch(o=>{Ee().f[50]++,Ee().s[232]++,console.error("Failed to process sources for '%s'",s,o)}))}else Ee().b[56][1]++,Ee().s[233]++,t[r]=(Ee().b[60][0]++,this.state.sources[r]||(Ee().b[60][1]++,this.state.mapStyle.sources[r]));Ee().s[234]++,LB(this.state.sources,t)?Ee().b[61][1]++:(Ee().b[61][0]++,Ee().s[235]++,console.debug("Setting sources"),Ee().s[236]++,this.setState({sources:t}))}_getRenderer(){Ee().f[51]++;const t=(Ee().s[237]++,Ee().b[62][0]++,this.state.mapStyle.metadata||(Ee().b[62][1]++,{}));return Ee().s[238]++,Ee().b[63][0]++,t["maputnik:renderer"]||(Ee().b[63][1]++,"mlgljs")}mapRenderer(){Ee().f[53]++;const{mapStyle:t,dirtyMapStyle:r}=(Ee().s[241]++,this.state),i=(Ee().s[242]++,{mapStyle:(Ee().b[64][0]++,r||(Ee().b[64][1]++,t)),replaceAccessTokens:g=>(Ee().f[54]++,Ee().s[243]++,pc.replaceAccessTokens(g,{allowFallback:!0})),onDataChange:g=>{Ee().f[55]++,Ee().s[244]++,this.layerWatcher.analyzeMap(g.map),Ee().s[245]++,this.fetchSources()}}),s=(Ee().s[246]++,this._getRenderer());let a;Ee().s[247]++,s==="ol"?(Ee().b[65][0]++,Ee().s[248]++,a=le.jsx(Dse,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(Ee().b[65][1]++,Ee().s[249]++,a=le.jsx(RX,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let o;Ee().s[250]++,this.state.mapState.match(/^filter-/)?(Ee().b[66][0]++,Ee().s[251]++,o=this.state.mapState.replace(/^filter-/,"")):Ee().b[66][1]++;const d=(Ee().s[252]++,{});return Ee().s[253]++,o?(Ee().b[67][0]++,Ee().s[254]++,d.filter=`url('#${o}')`):Ee().b[67][1]++,Ee().s[255]++,le.jsx("div",{style:d,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:a})}setModal(t,r){Ee().f[62]++,Ee().s[300]++,this.setState({isOpen:{...this.state.isOpen,[t]:r}},this.setStateInUrl)}toggleModal(t){Ee().f[63]++,Ee().s[301]++,this.setModal(t,!this.state.isOpen[t])}onSetFileHandle(t){Ee().f[64]++,Ee().s[302]++,this.setState({fileHandle:t})}render(){Ee().f[67]++;const t=(Ee().s[307]++,Ee().b[80][0]++,this.state.mapStyle.layers||(Ee().b[80][1]++,[])),r=(Ee().s[308]++,t.length>0?(Ee().b[81][0]++,t[this.state.selectedLayerIndex]):(Ee().b[81][1]++,void 0)),i=(Ee().s[309]++,le.jsx(ufe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),s=(Ee().s[310]++,le.jsx(Xle,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:t,sources:this.state.sources,errors:this.state.errors})),a=(Ee().s[311]++,r?(Ee().b[82][0]++,le.jsx(Ihe,{layer:r,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(Ee().b[82][1]++,void 0)),o=(Ee().s[312]++,this.state.errors.length+this.state.infos.length>0?(Ee().b[83][0]++,le.jsx(dfe,{currentLayer:r,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(Ee().b[83][1]++,void 0)),d=(Ee().s[313]++,le.jsxs("div",{children:[le.jsx(cpe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),le.jsx(upe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),le.jsx(mfe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),le.jsx(Dfe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),le.jsx(ape,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),le.jsx(Jfe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return Ee().s[314]++,le.jsx(cfe,{toolbar:i,layerList:s,layerEditor:a,map:this.mapRenderer(),bottom:o,modals:d})}}const xme=WQ.createRoot(document.querySelector("#app"));xme.render(le.jsx(f6.Provider,{value:{className:"react-icons"},children:le.jsx(bme,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-Dk7kop5l.js.map
